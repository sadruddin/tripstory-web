const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dockerfile-BKs6k2Af.js","assets/simple-mode-GW_nhZxv.js","assets/factor-kuTfRLto.js","assets/nsis-LdVXkNf5.js","assets/pug-DeIclll2.js","assets/javascript-iXu5QeM3.js"])))=>i.map(i=>d[i]);
function eG(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var gF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var XI={exports:{}},KS={};var yF;function cue(){if(yF)return KS;yF=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var a=null;if(o!==void 0&&(a=""+o),i.key!==void 0&&(a=""+i.key),"key"in i){o={};for(var s in i)s!=="key"&&(o[s]=i[s])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:a,ref:i!==void 0?i:null,props:o}}return KS.Fragment=e,KS.jsx=n,KS.jsxs=n,KS}var vF;function uue(){return vF||(vF=1,XI.exports=cue()),XI.exports}var J=uue(),YI={exports:{}},xr={};var _F;function hue(){if(_F)return xr;_F=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),w=Symbol.iterator;function S(Me){return Me===null||typeof Me!="object"?null:(Me=w&&Me[w]||Me["@@iterator"],typeof Me=="function"?Me:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,R={};function $(Me,Xe,Ee){this.props=Me,this.context=Xe,this.refs=R,this.updater=Ee||E}$.prototype.isReactComponent={},$.prototype.setState=function(Me,Xe){if(typeof Me!="object"&&typeof Me!="function"&&Me!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Me,Xe,"setState")},$.prototype.forceUpdate=function(Me){this.updater.enqueueForceUpdate(this,Me,"forceUpdate")};function z(){}z.prototype=$.prototype;function B(Me,Xe,Ee){this.props=Me,this.context=Xe,this.refs=R,this.updater=Ee||E}var F=B.prototype=new z;F.constructor=B,A(F,$.prototype),F.isPureReactComponent=!0;var U=Array.isArray;function q(){}var H={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function ie(Me,Xe,Ee){var ft=Ee.ref;return{$$typeof:t,type:Me,key:Xe,ref:ft!==void 0?ft:null,props:Ee}}function ce(Me,Xe){return ie(Me.type,Xe,Me.props)}function xe(Me){return typeof Me=="object"&&Me!==null&&Me.$$typeof===t}function re(Me){var Xe={"=":"=0",":":"=2"};return"$"+Me.replace(/[=:]/g,function(Ee){return Xe[Ee]})}var me=/\/+/g;function Te(Me,Xe){return typeof Me=="object"&&Me!==null&&Me.key!=null?re(""+Me.key):Xe.toString(36)}function ye(Me){switch(Me.status){case"fulfilled":return Me.value;case"rejected":throw Me.reason;default:switch(typeof Me.status=="string"?Me.then(q,q):(Me.status="pending",Me.then(function(Xe){Me.status==="pending"&&(Me.status="fulfilled",Me.value=Xe)},function(Xe){Me.status==="pending"&&(Me.status="rejected",Me.reason=Xe)})),Me.status){case"fulfilled":return Me.value;case"rejected":throw Me.reason}}throw Me}function _e(Me,Xe,Ee,ft,mt){var ct=typeof Me;(ct==="undefined"||ct==="boolean")&&(Me=null);var st=!1;if(Me===null)st=!0;else switch(ct){case"bigint":case"string":case"number":st=!0;break;case"object":switch(Me.$$typeof){case t:case e:st=!0;break;case g:return st=Me._init,_e(st(Me._payload),Xe,Ee,ft,mt)}}if(st)return mt=mt(Me),st=ft===""?"."+Te(Me,0):ft,U(mt)?(Ee="",st!=null&&(Ee=st.replace(me,"$&/")+"/"),_e(mt,Xe,Ee,"",function(Tt){return Tt})):mt!=null&&(xe(mt)&&(mt=ce(mt,Ee+(mt.key==null||Me&&Me.key===mt.key?"":(""+mt.key).replace(me,"$&/")+"/")+st)),Xe.push(mt)),1;st=0;var bt=ft===""?".":ft+":";if(U(Me))for(var At=0;At<Me.length;At++)ft=Me[At],ct=bt+Te(ft,At),st+=_e(ft,Xe,Ee,ct,mt);else if(At=S(Me),typeof At=="function")for(Me=At.call(Me),At=0;!(ft=Me.next()).done;)ft=ft.value,ct=bt+Te(ft,At++),st+=_e(ft,Xe,Ee,ct,mt);else if(ct==="object"){if(typeof Me.then=="function")return _e(ye(Me),Xe,Ee,ft,mt);throw Xe=String(Me),Error("Objects are not valid as a React child (found: "+(Xe==="[object Object]"?"object with keys {"+Object.keys(Me).join(", ")+"}":Xe)+"). If you meant to render a collection of children, use an array instead.")}return st}function ke(Me,Xe,Ee){if(Me==null)return Me;var ft=[],mt=0;return _e(Me,ft,"","",function(ct){return Xe.call(Ee,ct,mt++)}),ft}function Ne(Me){if(Me._status===-1){var Xe=Me._result;Xe=Xe(),Xe.then(function(Ee){(Me._status===0||Me._status===-1)&&(Me._status=1,Me._result=Ee)},function(Ee){(Me._status===0||Me._status===-1)&&(Me._status=2,Me._result=Ee)}),Me._status===-1&&(Me._status=0,Me._result=Xe)}if(Me._status===1)return Me._result.default;throw Me._result}var Qe=typeof reportError=="function"?reportError:function(Me){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Me=="object"&&Me!==null&&typeof Me.message=="string"?String(Me.message):String(Me),error:Me});if(!window.dispatchEvent(Xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Me);return}console.error(Me)},Se={map:ke,forEach:function(Me,Xe,Ee){ke(Me,function(){Xe.apply(this,arguments)},Ee)},count:function(Me){var Xe=0;return ke(Me,function(){Xe++}),Xe},toArray:function(Me){return ke(Me,function(Xe){return Xe})||[]},only:function(Me){if(!xe(Me))throw Error("React.Children.only expected to receive a single React element child.");return Me}};return xr.Activity=_,xr.Children=Se,xr.Component=$,xr.Fragment=n,xr.Profiler=i,xr.PureComponent=B,xr.StrictMode=r,xr.Suspense=u,xr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,xr.__COMPILER_RUNTIME={__proto__:null,c:function(Me){return H.H.useMemoCache(Me)}},xr.cache=function(Me){return function(){return Me.apply(null,arguments)}},xr.cacheSignal=function(){return null},xr.cloneElement=function(Me,Xe,Ee){if(Me==null)throw Error("The argument must be a React element, but you passed "+Me+".");var ft=A({},Me.props),mt=Me.key;if(Xe!=null)for(ct in Xe.key!==void 0&&(mt=""+Xe.key),Xe)!ne.call(Xe,ct)||ct==="key"||ct==="__self"||ct==="__source"||ct==="ref"&&Xe.ref===void 0||(ft[ct]=Xe[ct]);var ct=arguments.length-2;if(ct===1)ft.children=Ee;else if(1<ct){for(var st=Array(ct),bt=0;bt<ct;bt++)st[bt]=arguments[bt+2];ft.children=st}return ie(Me.type,mt,ft)},xr.createContext=function(Me){return Me={$$typeof:a,_currentValue:Me,_currentValue2:Me,_threadCount:0,Provider:null,Consumer:null},Me.Provider=Me,Me.Consumer={$$typeof:o,_context:Me},Me},xr.createElement=function(Me,Xe,Ee){var ft,mt={},ct=null;if(Xe!=null)for(ft in Xe.key!==void 0&&(ct=""+Xe.key),Xe)ne.call(Xe,ft)&&ft!=="key"&&ft!=="__self"&&ft!=="__source"&&(mt[ft]=Xe[ft]);var st=arguments.length-2;if(st===1)mt.children=Ee;else if(1<st){for(var bt=Array(st),At=0;At<st;At++)bt[At]=arguments[At+2];mt.children=bt}if(Me&&Me.defaultProps)for(ft in st=Me.defaultProps,st)mt[ft]===void 0&&(mt[ft]=st[ft]);return ie(Me,ct,mt)},xr.createRef=function(){return{current:null}},xr.forwardRef=function(Me){return{$$typeof:s,render:Me}},xr.isValidElement=xe,xr.lazy=function(Me){return{$$typeof:g,_payload:{_status:-1,_result:Me},_init:Ne}},xr.memo=function(Me,Xe){return{$$typeof:f,type:Me,compare:Xe===void 0?null:Xe}},xr.startTransition=function(Me){var Xe=H.T,Ee={};H.T=Ee;try{var ft=Me(),mt=H.S;mt!==null&&mt(Ee,ft),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"&&ft.then(q,Qe)}catch(ct){Qe(ct)}finally{Xe!==null&&Ee.types!==null&&(Xe.types=Ee.types),H.T=Xe}},xr.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},xr.use=function(Me){return H.H.use(Me)},xr.useActionState=function(Me,Xe,Ee){return H.H.useActionState(Me,Xe,Ee)},xr.useCallback=function(Me,Xe){return H.H.useCallback(Me,Xe)},xr.useContext=function(Me){return H.H.useContext(Me)},xr.useDebugValue=function(){},xr.useDeferredValue=function(Me,Xe){return H.H.useDeferredValue(Me,Xe)},xr.useEffect=function(Me,Xe){return H.H.useEffect(Me,Xe)},xr.useEffectEvent=function(Me){return H.H.useEffectEvent(Me)},xr.useId=function(){return H.H.useId()},xr.useImperativeHandle=function(Me,Xe,Ee){return H.H.useImperativeHandle(Me,Xe,Ee)},xr.useInsertionEffect=function(Me,Xe){return H.H.useInsertionEffect(Me,Xe)},xr.useLayoutEffect=function(Me,Xe){return H.H.useLayoutEffect(Me,Xe)},xr.useMemo=function(Me,Xe){return H.H.useMemo(Me,Xe)},xr.useOptimistic=function(Me,Xe){return H.H.useOptimistic(Me,Xe)},xr.useReducer=function(Me,Xe,Ee){return H.H.useReducer(Me,Xe,Ee)},xr.useRef=function(Me){return H.H.useRef(Me)},xr.useState=function(Me){return H.H.useState(Me)},xr.useSyncExternalStore=function(Me,Xe,Ee){return H.H.useSyncExternalStore(Me,Xe,Ee)},xr.useTransition=function(){return H.H.useTransition()},xr.version="19.2.3",xr}var bF;function v6(){return bF||(bF=1,YI.exports=hue()),YI.exports}var Q=v6();const se=aO(Q),OC=eG({__proto__:null,default:se},[Q]);var KI={exports:{}},JS={},JI={exports:{}},e3={};var xF;function due(){return xF||(xF=1,(function(t){function e(_e,ke){var Ne=_e.length;_e.push(ke);e:for(;0<Ne;){var Qe=Ne-1>>>1,Se=_e[Qe];if(0<i(Se,ke))_e[Qe]=ke,_e[Ne]=Se,Ne=Qe;else break e}}function n(_e){return _e.length===0?null:_e[0]}function r(_e){if(_e.length===0)return null;var ke=_e[0],Ne=_e.pop();if(Ne!==ke){_e[0]=Ne;e:for(var Qe=0,Se=_e.length,Me=Se>>>1;Qe<Me;){var Xe=2*(Qe+1)-1,Ee=_e[Xe],ft=Xe+1,mt=_e[ft];if(0>i(Ee,Ne))ft<Se&&0>i(mt,Ee)?(_e[Qe]=mt,_e[ft]=Ne,Qe=ft):(_e[Qe]=Ee,_e[Xe]=Ne,Qe=Xe);else if(ft<Se&&0>i(mt,Ne))_e[Qe]=mt,_e[ft]=Ne,Qe=ft;else break e}}return ke}function i(_e,ke){var Ne=_e.sortIndex-ke.sortIndex;return Ne!==0?Ne:_e.id-ke.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var u=[],f=[],g=1,_=null,w=3,S=!1,E=!1,A=!1,R=!1,$=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function F(_e){for(var ke=n(f);ke!==null;){if(ke.callback===null)r(f);else if(ke.startTime<=_e)r(f),ke.sortIndex=ke.expirationTime,e(u,ke);else break;ke=n(f)}}function U(_e){if(A=!1,F(_e),!E)if(n(u)!==null)E=!0,q||(q=!0,re());else{var ke=n(f);ke!==null&&ye(U,ke.startTime-_e)}}var q=!1,H=-1,ne=5,ie=-1;function ce(){return R?!0:!(t.unstable_now()-ie<ne)}function xe(){if(R=!1,q){var _e=t.unstable_now();ie=_e;var ke=!0;try{e:{E=!1,A&&(A=!1,z(H),H=-1),S=!0;var Ne=w;try{t:{for(F(_e),_=n(u);_!==null&&!(_.expirationTime>_e&&ce());){var Qe=_.callback;if(typeof Qe=="function"){_.callback=null,w=_.priorityLevel;var Se=Qe(_.expirationTime<=_e);if(_e=t.unstable_now(),typeof Se=="function"){_.callback=Se,F(_e),ke=!0;break t}_===n(u)&&r(u),F(_e)}else r(u);_=n(u)}if(_!==null)ke=!0;else{var Me=n(f);Me!==null&&ye(U,Me.startTime-_e),ke=!1}}break e}finally{_=null,w=Ne,S=!1}ke=void 0}}finally{ke?re():q=!1}}}var re;if(typeof B=="function")re=function(){B(xe)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Te=me.port2;me.port1.onmessage=xe,re=function(){Te.postMessage(null)}}else re=function(){$(xe,0)};function ye(_e,ke){H=$(function(){_e(t.unstable_now())},ke)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_e){_e.callback=null},t.unstable_forceFrameRate=function(_e){0>_e||125<_e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<_e?Math.floor(1e3/_e):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(_e){switch(w){case 1:case 2:case 3:var ke=3;break;default:ke=w}var Ne=w;w=ke;try{return _e()}finally{w=Ne}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(_e,ke){switch(_e){case 1:case 2:case 3:case 4:case 5:break;default:_e=3}var Ne=w;w=_e;try{return ke()}finally{w=Ne}},t.unstable_scheduleCallback=function(_e,ke,Ne){var Qe=t.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?Qe+Ne:Qe):Ne=Qe,_e){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=Ne+Se,_e={id:g++,callback:ke,priorityLevel:_e,startTime:Ne,expirationTime:Se,sortIndex:-1},Ne>Qe?(_e.sortIndex=Ne,e(f,_e),n(u)===null&&_e===n(f)&&(A?(z(H),H=-1):A=!0,ye(U,Ne-Qe))):(_e.sortIndex=Se,e(u,_e),E||S||(E=!0,q||(q=!0,re()))),_e},t.unstable_shouldYield=ce,t.unstable_wrapCallback=function(_e){var ke=w;return function(){var Ne=w;w=ke;try{return _e.apply(this,arguments)}finally{w=Ne}}}})(e3)),e3}var wF;function fue(){return wF||(wF=1,JI.exports=due()),JI.exports}var t3={exports:{}},Cl={};var OF;function pue(){if(OF)return Cl;OF=1;var t=v6();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(u,f,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:_==null?null:""+_,children:u,containerInfo:f,implementation:g}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Cl.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Cl.createPortal=function(u,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(u,f,null,g)},Cl.flushSync=function(u){var f=a.T,g=r.p;try{if(a.T=null,r.p=2,u)return u()}finally{a.T=f,r.p=g,r.d.f()}},Cl.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(u,f))},Cl.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Cl.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var g=f.as,_=s(g,f.crossOrigin),w=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?r.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:_,integrity:w,fetchPriority:S}):g==="script"&&r.d.X(u,{crossOrigin:_,integrity:w,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Cl.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=s(f.as,f.crossOrigin);r.d.M(u,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(u)},Cl.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,_=s(g,f.crossOrigin);r.d.L(u,g,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Cl.preloadModule=function(u,f){if(typeof u=="string")if(f){var g=s(f.as,f.crossOrigin);r.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(u)},Cl.requestFormReset=function(u){r.d.r(u)},Cl.unstable_batchedUpdates=function(u,f){return u(f)},Cl.useFormState=function(u,f,g){return a.H.useFormState(u,f,g)},Cl.useFormStatus=function(){return a.H.useHostTransitionStatus()},Cl.version="19.2.3",Cl}var SF;function tG(){if(SF)return t3.exports;SF=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),t3.exports=pue(),t3.exports}var CF;function mue(){if(CF)return JS;CF=1;var t=fue(),e=v6(),n=tG();function r(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var O=2;O<arguments.length;O++)y+="&args[]="+encodeURIComponent(arguments[O])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function o(p){var y=p,O=p;if(p.alternate)for(;y.return;)y=y.return;else{p=y;do y=p,(y.flags&4098)!==0&&(O=y.return),p=y.return;while(p)}return y.tag===3?O:null}function a(p){if(p.tag===13){var y=p.memoizedState;if(y===null&&(p=p.alternate,p!==null&&(y=p.memoizedState)),y!==null)return y.dehydrated}return null}function s(p){if(p.tag===31){var y=p.memoizedState;if(y===null&&(p=p.alternate,p!==null&&(y=p.memoizedState)),y!==null)return y.dehydrated}return null}function u(p){if(o(p)!==p)throw Error(r(188))}function f(p){var y=p.alternate;if(!y){if(y=o(p),y===null)throw Error(r(188));return y!==p?null:p}for(var O=p,M=y;;){var V=O.return;if(V===null)break;var G=V.alternate;if(G===null){if(M=V.return,M!==null){O=M;continue}break}if(V.child===G.child){for(G=V.child;G;){if(G===O)return u(V),p;if(G===M)return u(V),y;G=G.sibling}throw Error(r(188))}if(O.return!==M.return)O=V,M=G;else{for(var de=!1,Pe=V.child;Pe;){if(Pe===O){de=!0,O=V,M=G;break}if(Pe===M){de=!0,M=V,O=G;break}Pe=Pe.sibling}if(!de){for(Pe=G.child;Pe;){if(Pe===O){de=!0,O=G,M=V;break}if(Pe===M){de=!0,M=G,O=V;break}Pe=Pe.sibling}if(!de)throw Error(r(189))}}if(O.alternate!==M)throw Error(r(190))}if(O.tag!==3)throw Error(r(188));return O.stateNode.current===O?p:y}function g(p){var y=p.tag;if(y===5||y===26||y===27||y===6)return p;for(p=p.child;p!==null;){if(y=g(p),y!==null)return y;p=p.sibling}return null}var _=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),B=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),xe=Symbol.iterator;function re(p){return p===null||typeof p!="object"?null:(p=xe&&p[xe]||p["@@iterator"],typeof p=="function"?p:null)}var me=Symbol.for("react.client.reference");function Te(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===me?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case A:return"Fragment";case $:return"Profiler";case R:return"StrictMode";case U:return"Suspense";case q:return"SuspenseList";case ie:return"Activity"}if(typeof p=="object")switch(p.$$typeof){case E:return"Portal";case B:return p.displayName||"Context";case z:return(p._context.displayName||"Context")+".Consumer";case F:var y=p.render;return p=p.displayName,p||(p=y.displayName||y.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case H:return y=p.displayName||null,y!==null?y:Te(p.type)||"Memo";case ne:y=p._payload,p=p._init;try{return Te(p(y))}catch{}}return null}var ye=Array.isArray,_e=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne={pending:!1,data:null,method:null,action:null},Qe=[],Se=-1;function Me(p){return{current:p}}function Xe(p){0>Se||(p.current=Qe[Se],Qe[Se]=null,Se--)}function Ee(p,y){Se++,Qe[Se]=p.current,p.current=y}var ft=Me(null),mt=Me(null),ct=Me(null),st=Me(null);function bt(p,y){switch(Ee(ct,y),Ee(mt,p),Ee(ft,null),y.nodeType){case 9:case 11:p=(p=y.documentElement)&&(p=p.namespaceURI)?dp(p):0;break;default:if(p=y.tagName,y=y.namespaceURI)y=dp(y),p=ES(y,p);else switch(p){case"svg":p=1;break;case"math":p=2;break;default:p=0}}Xe(ft),Ee(ft,p)}function At(){Xe(ft),Xe(mt),Xe(ct)}function Tt(p){p.memoizedState!==null&&Ee(st,p);var y=ft.current,O=ES(y,p.type);y!==O&&(Ee(mt,p),Ee(ft,O))}function Wt(p){mt.current===p&&(Xe(ft),Xe(mt)),st.current===p&&(Xe(st),o0._currentValue=Ne)}var nn,An;function rn(p){if(nn===void 0)try{throw Error()}catch(O){var y=O.stack.trim().match(/\n( *(at )?)/);nn=y&&y[1]||"",An=-1<O.stack.indexOf(`
    at`)?" (<anonymous>)":-1<O.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nn+p+An}var Jt=!1;function Mn(p,y){if(!p||Jt)return"";Jt=!0;var O=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var M={DetermineComponentFrameRoot:function(){try{if(y){var qt=function(){throw Error()};if(Object.defineProperty(qt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qt,[])}catch(Pt){var St=Pt}Reflect.construct(p,[],qt)}else{try{qt.call()}catch(Pt){St=Pt}p.call(qt.prototype)}}else{try{throw Error()}catch(Pt){St=Pt}(qt=p())&&typeof qt.catch=="function"&&qt.catch(function(){})}}catch(Pt){if(Pt&&St&&typeof Pt.stack=="string")return[Pt.stack,St.stack]}return[null,null]}};M.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var V=Object.getOwnPropertyDescriptor(M.DetermineComponentFrameRoot,"name");V&&V.configurable&&Object.defineProperty(M.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var G=M.DetermineComponentFrameRoot(),de=G[0],Pe=G[1];if(de&&Pe){var et=de.split(`
`),wt=Pe.split(`
`);for(V=M=0;M<et.length&&!et[M].includes("DetermineComponentFrameRoot");)M++;for(;V<wt.length&&!wt[V].includes("DetermineComponentFrameRoot");)V++;if(M===et.length||V===wt.length)for(M=et.length-1,V=wt.length-1;1<=M&&0<=V&&et[M]!==wt[V];)V--;for(;1<=M&&0<=V;M--,V--)if(et[M]!==wt[V]){if(M!==1||V!==1)do if(M--,V--,0>V||et[M]!==wt[V]){var Lt=`
`+et[M].replace(" at new "," at ");return p.displayName&&Lt.includes("<anonymous>")&&(Lt=Lt.replace("<anonymous>",p.displayName)),Lt}while(1<=M&&0<=V);break}}}finally{Jt=!1,Error.prepareStackTrace=O}return(O=p?p.displayName||p.name:"")?rn(O):""}function vn(p,y){switch(p.tag){case 26:case 27:case 5:return rn(p.type);case 16:return rn("Lazy");case 13:return p.child!==y&&y!==null?rn("Suspense Fallback"):rn("Suspense");case 19:return rn("SuspenseList");case 0:case 15:return Mn(p.type,!1);case 11:return Mn(p.type.render,!1);case 1:return Mn(p.type,!0);case 31:return rn("Activity");default:return""}}function Nn(p){try{var y="",O=null;do y+=vn(p,O),O=p,p=p.return;while(p);return y}catch(M){return`
Error generating stack: `+M.message+`
`+M.stack}}var lr=Object.prototype.hasOwnProperty,rr=t.unstable_scheduleCallback,Ue=t.unstable_cancelCallback,Je=t.unstable_shouldYield,xt=t.unstable_requestPaint,Et=t.unstable_now,Vt=t.unstable_getCurrentPriorityLevel,we=t.unstable_ImmediatePriority,ae=t.unstable_UserBlockingPriority,Y=t.unstable_NormalPriority,be=t.unstable_LowPriority,$e=t.unstable_IdlePriority,ze=t.log,rt=t.unstable_setDisableYieldValue,tt=null,Ye=null;function at(p){if(typeof ze=="function"&&rt(p),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(tt,p)}catch{}}var Ot=Math.clz32?Math.clz32:an,ot=Math.log,$t=Math.LN2;function an(p){return p>>>=0,p===0?32:31-(ot(p)/$t|0)|0}var $n=256,Er=262144,Tr=4194304;function ut(p){var y=p&42;if(y!==0)return y;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return p&261888;case 262144:case 524288:case 1048576:case 2097152:return p&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function Ur(p,y,O){var M=p.pendingLanes;if(M===0)return 0;var V=0,G=p.suspendedLanes,de=p.pingedLanes;p=p.warmLanes;var Pe=M&134217727;return Pe!==0?(M=Pe&~G,M!==0?V=ut(M):(de&=Pe,de!==0?V=ut(de):O||(O=Pe&~p,O!==0&&(V=ut(O))))):(Pe=M&~G,Pe!==0?V=ut(Pe):de!==0?V=ut(de):O||(O=M&~p,O!==0&&(V=ut(O)))),V===0?0:y!==0&&y!==V&&(y&G)===0&&(G=V&-V,O=y&-y,G>=O||G===32&&(O&4194048)!==0)?y:V}function eo(p,y){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&y)===0}function Gn(p,y){switch(p){case 1:case 2:case 4:case 8:case 64:return y+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cn(){var p=Tr;return Tr<<=1,(Tr&62914560)===0&&(Tr=4194304),p}function gi(p){for(var y=[],O=0;31>O;O++)y.push(p);return y}function ti(p,y){p.pendingLanes|=y,y!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function to(p,y,O,M,V,G){var de=p.pendingLanes;p.pendingLanes=O,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=O,p.entangledLanes&=O,p.errorRecoveryDisabledLanes&=O,p.shellSuspendCounter=0;var Pe=p.entanglements,et=p.expirationTimes,wt=p.hiddenUpdates;for(O=de&~O;0<O;){var Lt=31-Ot(O),qt=1<<Lt;Pe[Lt]=0,et[Lt]=-1;var St=wt[Lt];if(St!==null)for(wt[Lt]=null,Lt=0;Lt<St.length;Lt++){var Pt=St[Lt];Pt!==null&&(Pt.lane&=-536870913)}O&=~qt}M!==0&&li(p,M,0),G!==0&&V===0&&p.tag!==0&&(p.suspendedLanes|=G&~(de&~y))}function li(p,y,O){p.pendingLanes|=y,p.suspendedLanes&=~y;var M=31-Ot(y);p.entangledLanes|=y,p.entanglements[M]=p.entanglements[M]|1073741824|O&261930}function Eo(p,y){var O=p.entangledLanes|=y;for(p=p.entanglements;O;){var M=31-Ot(O),V=1<<M;V&y|p[M]&y&&(p[M]|=y),O&=~V}}function If(p,y){var O=y&-y;return O=(O&42)!==0?1:ld(O),(O&(p.suspendedLanes|y))!==0?0:O}function ld(p){switch(p){case 2:p=1;break;case 8:p=4;break;case 32:p=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:p=128;break;case 268435456:p=134217728;break;default:p=0}return p}function Gt(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function Is(){var p=ke.p;return p!==0?p:(p=window.event,p===void 0?32:hg(p.type))}function Ds(p,y){var O=ke.p;try{return ke.p=p,y()}finally{ke.p=O}}var Bl=Math.random().toString(36).slice(2),yi="__reactFiber$"+Bl,tn="__reactProps$"+Bl,ir="__reactContainer$"+Bl,dr="__reactEvents$"+Bl,Ra="__reactListeners$"+Bl,uy="__reactHandles$"+Bl,fc="__reactResources$"+Bl,nr="__reactMarker$"+Bl;function cd(p){delete p[yi],delete p[tn],delete p[dr],delete p[Ra],delete p[uy]}function pc(p){var y=p[yi];if(y)return y;for(var O=p.parentNode;O;){if(y=O[ir]||O[yi]){if(O=y.alternate,y.child!==null||O!==null&&O.child!==null)for(p=Kv(p);p!==null;){if(O=p[yi])return O;p=Kv(p)}return y}p=O,O=p.parentNode}return null}function su(p){if(p=p[yi]||p[ir]){var y=p.tag;if(y===5||y===6||y===13||y===31||y===26||y===27||y===3)return p}return null}function mc(p){var y=p.tag;if(y===5||y===26||y===27||y===6)return p.stateNode;throw Error(r(33))}function gc(p){var y=p[fc];return y||(y=p[fc]={hoistableStyles:new Map,hoistableScripts:new Map}),y}function no(p){p[nr]=!0}var Df=new Set,Ls={};function Mr(p,y){au(p,y),au(p+"Capture",y)}function au(p,y){for(Ls[p]=y,p=0;p<y.length;p++)Df.add(y[p])}var Lf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$f={},ih={};function Fl(p){return lr.call(ih,p)?!0:lr.call($f,p)?!1:Lf.test(p)?ih[p]=!0:($f[p]=!0,!1)}function gm(p,y,O){if(Fl(y))if(O===null)p.removeAttribute(y);else{switch(typeof O){case"undefined":case"function":case"symbol":p.removeAttribute(y);return;case"boolean":var M=y.toLowerCase().slice(0,5);if(M!=="data-"&&M!=="aria-"){p.removeAttribute(y);return}}p.setAttribute(y,""+O)}}function yc(p,y,O){if(O===null)p.removeAttribute(y);else{switch(typeof O){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(y);return}p.setAttribute(y,""+O)}}function sl(p,y,O,M){if(M===null)p.removeAttribute(O);else{switch(typeof M){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(O);return}p.setAttributeNS(y,O,""+M)}}function Nr(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function sv(p){var y=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function Nb(p,y,O){var M=Object.getOwnPropertyDescriptor(p.constructor.prototype,y);if(!p.hasOwnProperty(y)&&typeof M<"u"&&typeof M.get=="function"&&typeof M.set=="function"){var V=M.get,G=M.set;return Object.defineProperty(p,y,{configurable:!0,get:function(){return V.call(this)},set:function(de){O=""+de,G.call(this,de)}}),Object.defineProperty(p,y,{enumerable:M.enumerable}),{getValue:function(){return O},setValue:function(de){O=""+de},stopTracking:function(){p._valueTracker=null,delete p[y]}}}}function ud(p){if(!p._valueTracker){var y=sv(p)?"checked":"value";p._valueTracker=Nb(p,y,""+p[y])}}function av(p){if(!p)return!1;var y=p._valueTracker;if(!y)return!0;var O=y.getValue(),M="";return p&&(M=sv(p)?p.checked?"true":"false":p.value),p=M,p!==O?(y.setValue(p),!0):!1}function ym(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var Bb=/[\n"\\]/g;function na(p){return p.replace(Bb,function(y){return"\\"+y.charCodeAt(0).toString(16)+" "})}function vm(p,y,O,M,V,G,de,Pe){p.name="",de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?p.type=de:p.removeAttribute("type"),y!=null?de==="number"?(y===0&&p.value===""||p.value!=y)&&(p.value=""+Nr(y)):p.value!==""+Nr(y)&&(p.value=""+Nr(y)):de!=="submit"&&de!=="reset"||p.removeAttribute("value"),y!=null?_m(p,de,Nr(y)):O!=null?_m(p,de,Nr(O)):M!=null&&p.removeAttribute("value"),V==null&&G!=null&&(p.defaultChecked=!!G),V!=null&&(p.checked=V&&typeof V!="function"&&typeof V!="symbol"),Pe!=null&&typeof Pe!="function"&&typeof Pe!="symbol"&&typeof Pe!="boolean"?p.name=""+Nr(Pe):p.removeAttribute("name")}function hy(p,y,O,M,V,G,de,Pe){if(G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(p.type=G),y!=null||O!=null){if(!(G!=="submit"&&G!=="reset"||y!=null)){ud(p);return}O=O!=null?""+Nr(O):"",y=y!=null?""+Nr(y):O,Pe||y===p.value||(p.value=y),p.defaultValue=y}M=M??V,M=typeof M!="function"&&typeof M!="symbol"&&!!M,p.checked=Pe?p.checked:!!M,p.defaultChecked=!!M,de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"&&(p.name=de),ud(p)}function _m(p,y,O){y==="number"&&ym(p.ownerDocument)===p||p.defaultValue===""+O||(p.defaultValue=""+O)}function oh(p,y,O,M){if(p=p.options,y){y={};for(var V=0;V<O.length;V++)y["$"+O[V]]=!0;for(O=0;O<p.length;O++)V=y.hasOwnProperty("$"+p[O].value),p[O].selected!==V&&(p[O].selected=V),V&&M&&(p[O].defaultSelected=!0)}else{for(O=""+Nr(O),y=null,V=0;V<p.length;V++){if(p[V].value===O){p[V].selected=!0,M&&(p[V].defaultSelected=!0);return}y!==null||p[V].disabled||(y=p[V])}y!==null&&(y.selected=!0)}}function Fb(p,y,O){if(y!=null&&(y=""+Nr(y),y!==p.value&&(p.value=y),O==null)){p.defaultValue!==y&&(p.defaultValue=y);return}p.defaultValue=O!=null?""+Nr(O):""}function zf(p,y,O,M){if(y==null){if(M!=null){if(O!=null)throw Error(r(92));if(ye(M)){if(1<M.length)throw Error(r(93));M=M[0]}O=M}O==null&&(O=""),y=O}O=Nr(y),p.defaultValue=O,M=p.textContent,M===O&&M!==""&&M!==null&&(p.value=M),ud(p)}function lu(p,y){if(y){var O=p.firstChild;if(O&&O===p.lastChild&&O.nodeType===3){O.nodeValue=y;return}}p.textContent=y}var jb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hd(p,y,O){var M=y.indexOf("--")===0;O==null||typeof O=="boolean"||O===""?M?p.setProperty(y,""):y==="float"?p.cssFloat="":p[y]="":M?p.setProperty(y,O):typeof O!="number"||O===0||jb.has(y)?y==="float"?p.cssFloat=O:p[y]=(""+O).trim():p[y]=O+"px"}function dy(p,y,O){if(y!=null&&typeof y!="object")throw Error(r(62));if(p=p.style,O!=null){for(var M in O)!O.hasOwnProperty(M)||y!=null&&y.hasOwnProperty(M)||(M.indexOf("--")===0?p.setProperty(M,""):M==="float"?p.cssFloat="":p[M]="");for(var V in y)M=y[V],y.hasOwnProperty(V)&&O[V]!==M&&hd(p,V,M)}else for(var G in y)y.hasOwnProperty(G)&&hd(p,G,y[G])}function dd(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cr(p){return Nf.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}function jl(){}var lv=null;function bm(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var Ho=null,Ao=null;function Di(p){var y=su(p);if(y&&(p=y.stateNode)){var O=p[tn]||null;e:switch(p=y.stateNode,y.type){case"input":if(vm(p,O.value,O.defaultValue,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name),y=O.name,O.type==="radio"&&y!=null){for(O=p;O.parentNode;)O=O.parentNode;for(O=O.querySelectorAll('input[name="'+na(""+y)+'"][type="radio"]'),y=0;y<O.length;y++){var M=O[y];if(M!==p&&M.form===p.form){var V=M[tn]||null;if(!V)throw Error(r(90));vm(M,V.value,V.defaultValue,V.defaultValue,V.checked,V.defaultChecked,V.type,V.name)}}for(y=0;y<O.length;y++)M=O[y],M.form===p.form&&av(M)}break e;case"textarea":Fb(p,O.value,O.defaultValue);break e;case"select":y=O.value,y!=null&&oh(p,!!O.multiple,y,!1)}}}var Fn=!1;function ci(p,y,O){if(Fn)return p(y,O);Fn=!0;try{var M=p(y);return M}finally{if(Fn=!1,(Ho!==null||Ao!==null)&&(Uv(),Ho&&(y=Ho,p=Ao,Ao=Ho=null,Di(y),p)))for(y=0;y<p.length;y++)Di(p[y])}}function al(p,y){var O=p.stateNode;if(O===null)return null;var M=O[tn]||null;if(M===null)return null;O=M[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(p=p.type,M=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!M;break e;default:p=!1}if(p)return null;if(O&&typeof O!="function")throw Error(r(231,y,typeof O));return O}var ro=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ra=!1;if(ro)try{var Go={};Object.defineProperty(Go,"passive",{get:function(){ra=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{ra=!1}var Ia=null,vc=null,Li=null;function ah(){if(Li)return Li;var p,y=vc,O=y.length,M,V="value"in Ia?Ia.value:Ia.textContent,G=V.length;for(p=0;p<O&&y[p]===V[p];p++);var de=O-p;for(M=1;M<=de&&y[O-M]===V[G-M];M++);return Li=V.slice(p,1<M?1-M:void 0)}function Da(p){var y=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&y===13&&(p=13)):p=y,p===10&&(p=13),32<=p||p===13?p:0}function fd(){return!0}function ia(){return!1}function Bo(p){function y(O,M,V,G,de){this._reactName=O,this._targetInst=V,this.type=M,this.nativeEvent=G,this.target=de,this.currentTarget=null;for(var Pe in p)p.hasOwnProperty(Pe)&&(O=p[Pe],this[Pe]=O?O(G):G[Pe]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?fd:ia,this.isPropagationStopped=ia,this}return _(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var O=this.nativeEvent;O&&(O.preventDefault?O.preventDefault():typeof O.returnValue!="unknown"&&(O.returnValue=!1),this.isDefaultPrevented=fd)},stopPropagation:function(){var O=this.nativeEvent;O&&(O.stopPropagation?O.stopPropagation():typeof O.cancelBubble!="unknown"&&(O.cancelBubble=!0),this.isPropagationStopped=fd)},persist:function(){},isPersistent:fd}),y}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xm=Bo(oa),pd=_({},oa,{view:0,detail:0}),md=Bo(pd),ni,lh,vr,or=_({},pd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sm,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==vr&&(vr&&p.type==="mousemove"?(ni=p.screenX-vr.screenX,lh=p.screenY-vr.screenY):lh=ni=0,vr=p),ni)},movementY:function(p){return"movementY"in p?p.movementY:lh}}),gd=Bo(or),Rr=_({},or,{dataTransfer:0}),wm=Bo(Rr),ll=_({},pd,{relatedTarget:0}),ch=Bo(ll),uh=_({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),Vb=Bo(uh),Om=_({},oa,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),cv=Bo(Om),qO=_({},oa,{data:0}),uv=Bo(qO),sa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_c={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yd(p){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(p):(p=$i[p])?!!y[p]:!1}function Sm(){return yd}var Cm=_({},pd,{key:function(p){if(p.key){var y=sa[p.key]||p.key;if(y!=="Unidentified")return y}return p.type==="keypress"?(p=Da(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?_c[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sm,charCode:function(p){return p.type==="keypress"?Da(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?Da(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),io=Bo(Cm),Qb=_({},or,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fy=Bo(Qb),Ub=_({},pd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sm}),WO=Bo(Ub),Bf=_({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),py=Bo(Bf),Ff=_({},or,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),hv=Bo(Ff),Tm=_({},oa,{newState:0,oldState:0}),jf=Bo(Tm),Vf=[9,13,27,32],yo=ro&&"CompositionEvent"in window,Qf=null;ro&&"documentMode"in document&&(Qf=document.documentMode);var Uf=ro&&"TextEvent"in window&&!Qf,Zf=ro&&(!yo||Qf&&8<Qf&&11>=Qf),hh=" ",Zb=!1;function km(p,y){switch(p){case"keyup":return Vf.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qb(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var Vl=!1;function my(p,y){switch(p){case"compositionend":return qb(y);case"keypress":return y.which!==32?null:(Zb=!0,hh);case"textInput":return p=y.data,p===hh&&Zb?null:p;default:return null}}function Wb(p,y){if(Vl)return p==="compositionend"||!yo&&km(p,y)?(p=ah(),Li=vc=Ia=null,Vl=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return Zf&&y.locale!=="ko"?null:y.data;default:return null}}var Hb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gy(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y==="input"?!!Hb[p.type]:y==="textarea"}function yy(p,y,O,M){Ho?Ao?Ao.push(M):Ao=[M]:Ho=M,y=Hv(y,"onChange"),0<y.length&&(O=new xm("onChange","change",null,O,M),p.push({event:O,listeners:y}))}var vd=null,qf=null;function Gb(p){fE(p,0)}function Em(p){var y=mc(p);if(av(y))return p}function dh(p,y){if(p==="change")return y}var dv=!1;if(ro){var Am;if(ro){var fh="oninput"in document;if(!fh){var fv=document.createElement("div");fv.setAttribute("oninput","return;"),fh=typeof fv.oninput=="function"}Am=fh}else Am=!1;dv=Am&&(!document.documentMode||9<document.documentMode)}function Pm(){vd&&(vd.detachEvent("onpropertychange",Xb),qf=vd=null)}function Xb(p){if(p.propertyName==="value"&&Em(qf)){var y=[];yy(y,qf,p,bm(p)),ci(Gb,y)}}function HO(p,y,O){p==="focusin"?(Pm(),vd=y,qf=O,vd.attachEvent("onpropertychange",Xb)):p==="focusout"&&Pm()}function Yb(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Em(qf)}function Mm(p,y){if(p==="click")return Em(y)}function Kb(p,y){if(p==="input"||p==="change")return Em(y)}function pv(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var pa=typeof Object.is=="function"?Object.is:pv;function ph(p,y){if(pa(p,y))return!0;if(typeof p!="object"||p===null||typeof y!="object"||y===null)return!1;var O=Object.keys(p),M=Object.keys(y);if(O.length!==M.length)return!1;for(M=0;M<O.length;M++){var V=O[M];if(!lr.call(y,V)||!pa(p[V],y[V]))return!1}return!0}function cl(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Rm(p,y){var O=cl(p);p=0;for(var M;O;){if(O.nodeType===3){if(M=p+O.textContent.length,p<=y&&M>=y)return{node:O,offset:y-p};p=M}e:{for(;O;){if(O.nextSibling){O=O.nextSibling;break e}O=O.parentNode}O=void 0}O=cl(O)}}function vy(p,y){return p&&y?p===y?!0:p&&p.nodeType===3?!1:y&&y.nodeType===3?vy(p,y.parentNode):"contains"in p?p.contains(y):p.compareDocumentPosition?!!(p.compareDocumentPosition(y)&16):!1:!1}function _y(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var y=ym(p.document);y instanceof p.HTMLIFrameElement;){try{var O=typeof y.contentWindow.location.href=="string"}catch{O=!1}if(O)p=y.contentWindow;else break;y=ym(p.document)}return y}function Im(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y&&(y==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||y==="textarea"||p.contentEditable==="true")}var by=ro&&"documentMode"in document&&11>=document.documentMode,ul=null,Dm=null,Lm=null,xy=!1;function Jb(p,y,O){var M=O.window===O?O.document:O.nodeType===9?O:O.ownerDocument;xy||ul==null||ul!==ym(M)||(M=ul,"selectionStart"in M&&Im(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),Lm&&ph(Lm,M)||(Lm=M,M=Hv(Dm,"onSelect"),0<M.length&&(y=new xm("onSelect","select",null,y,O),p.push({event:y,listeners:M}),y.target=ul)))}function _d(p,y){var O={};return O[p.toLowerCase()]=y.toLowerCase(),O["Webkit"+p]="webkit"+y,O["Moz"+p]="moz"+y,O}var bd={animationend:_d("Animation","AnimationEnd"),animationiteration:_d("Animation","AnimationIteration"),animationstart:_d("Animation","AnimationStart"),transitionrun:_d("Transition","TransitionRun"),transitionstart:_d("Transition","TransitionStart"),transitioncancel:_d("Transition","TransitionCancel"),transitionend:_d("Transition","TransitionEnd")},mv={},Br={};ro&&(Br=document.createElement("div").style,"AnimationEvent"in window||(delete bd.animationend.animation,delete bd.animationiteration.animation,delete bd.animationstart.animation),"TransitionEvent"in window||delete bd.transitionend.transition);function bc(p){if(mv[p])return mv[p];if(!bd[p])return p;var y=bd[p],O;for(O in y)if(y.hasOwnProperty(O)&&O in Br)return mv[p]=y[O];return p}var $m=bc("animationend"),zm=bc("animationiteration"),wy=bc("animationstart"),xd=bc("transitionrun"),Nm=bc("transitionstart"),Wf=bc("transitioncancel"),La=bc("transitionend"),gv=new Map,Oy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oy.push("scrollEnd");function $a(p,y){gv.set(p,y),Mr(y,[p])}var xc=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},aa=[],cu=0,wd=0;function Od(){for(var p=cu,y=wd=cu=0;y<p;){var O=aa[y];aa[y++]=null;var M=aa[y];aa[y++]=null;var V=aa[y];aa[y++]=null;var G=aa[y];if(aa[y++]=null,M!==null&&V!==null){var de=M.pending;de===null?V.next=V:(V.next=de.next,de.next=V),M.pending=V}G!==0&&yv(O,V,G)}}function Bm(p,y,O,M){aa[cu++]=p,aa[cu++]=y,aa[cu++]=O,aa[cu++]=M,wd|=M,p.lanes|=M,p=p.alternate,p!==null&&(p.lanes|=M)}function mh(p,y,O,M){return Bm(p,y,O,M),Hf(p)}function hl(p,y){return Bm(p,null,null,y),Hf(p)}function yv(p,y,O){p.lanes|=O;var M=p.alternate;M!==null&&(M.lanes|=O);for(var V=!1,G=p.return;G!==null;)G.childLanes|=O,M=G.alternate,M!==null&&(M.childLanes|=O),G.tag===22&&(p=G.stateNode,p===null||p._visibility&1||(V=!0)),p=G,G=G.return;return p.tag===3?(G=p.stateNode,V&&y!==null&&(V=31-Ot(O),p=G.hiddenUpdates,M=p[V],M===null?p[V]=[y]:M.push(y),y.lane=O|536870912),G):null}function Hf(p){if(50<Qv)throw Qv=0,dS=null,Error(r(185));for(var y=p.return;y!==null;)p=y,y=p.return;return p.tag===3?p.stateNode:null}var sr={};function Sy(p,y,O,M){this.tag=p,this.key=O,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(p,y,O,M){return new Sy(p,y,O,M)}function Cy(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Na(p,y){var O=p.alternate;return O===null?(O=za(p.tag,y,p.key,p.mode),O.elementType=p.elementType,O.type=p.type,O.stateNode=p.stateNode,O.alternate=p,p.alternate=O):(O.pendingProps=y,O.type=p.type,O.flags=0,O.subtreeFlags=0,O.deletions=null),O.flags=p.flags&65011712,O.childLanes=p.childLanes,O.lanes=p.lanes,O.child=p.child,O.memoizedProps=p.memoizedProps,O.memoizedState=p.memoizedState,O.updateQueue=p.updateQueue,y=p.dependencies,O.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},O.sibling=p.sibling,O.index=p.index,O.ref=p.ref,O.refCleanup=p.refCleanup,O}function ex(p,y){p.flags&=65011714;var O=p.alternate;return O===null?(p.childLanes=0,p.lanes=y,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=O.childLanes,p.lanes=O.lanes,p.child=O.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=O.memoizedProps,p.memoizedState=O.memoizedState,p.updateQueue=O.updateQueue,p.type=O.type,y=O.dependencies,p.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),p}function Ty(p,y,O,M,V,G){var de=0;if(M=p,typeof p=="function")Cy(p)&&(de=1);else if(typeof p=="string")de=Wx(p,O,ft.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case ie:return p=za(31,O,y,V),p.elementType=ie,p.lanes=G,p;case A:return gh(O.children,V,G,y);case R:de=8,V|=24;break;case $:return p=za(12,O,y,V|2),p.elementType=$,p.lanes=G,p;case U:return p=za(13,O,y,V),p.elementType=U,p.lanes=G,p;case q:return p=za(19,O,y,V),p.elementType=q,p.lanes=G,p;default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case B:de=10;break e;case z:de=9;break e;case F:de=11;break e;case H:de=14;break e;case ne:de=16,M=null;break e}de=29,O=Error(r(130,p===null?"null":typeof p,"")),M=null}return y=za(de,O,y,V),y.elementType=p,y.type=M,y.lanes=G,y}function gh(p,y,O,M){return p=za(7,p,M,y),p.lanes=O,p}function vv(p,y,O){return p=za(6,p,null,y),p.lanes=O,p}function ky(p){var y=za(18,null,null,0);return y.stateNode=p,y}function yh(p,y,O){return y=za(4,p.children!==null?p.children:[],p.key,y),y.lanes=O,y.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},y}var Gf=new WeakMap;function la(p,y){if(typeof p=="object"&&p!==null){var O=Gf.get(p);return O!==void 0?O:(y={value:p,source:y,stack:Nn(y)},Gf.set(p,y),y)}return{value:p,source:y,stack:Nn(y)}}var vh=[],_h=0,Sd=null,bh=0,Xo=[],is=0,wc=null,Oc=1,ma="";function uu(p,y){vh[_h++]=bh,vh[_h++]=Sd,Sd=p,bh=y}function _v(p,y,O){Xo[is++]=Oc,Xo[is++]=ma,Xo[is++]=wc,wc=p;var M=Oc;p=ma;var V=32-Ot(M)-1;M&=~(1<<V),O+=1;var G=32-Ot(y)+V;if(30<G){var de=V-V%5;G=(M&(1<<de)-1).toString(32),M>>=de,V-=de,Oc=1<<32-Ot(y)+V|O<<V|M,ma=G+p}else Oc=1<<G|O<<V|M,ma=p}function Cd(p){p.return!==null&&(uu(p,1),_v(p,1,0))}function Xf(p){for(;p===Sd;)Sd=vh[--_h],vh[_h]=null,bh=vh[--_h],vh[_h]=null;for(;p===wc;)wc=Xo[--is],Xo[is]=null,ma=Xo[--is],Xo[is]=null,Oc=Xo[--is],Xo[is]=null}function bv(p,y){Xo[is++]=Oc,Xo[is++]=ma,Xo[is++]=wc,Oc=y.id,ma=y.overflow,wc=p}var os=null,ui=null,kr=!1,hu=null,Ba=!1,Ui=Error(r(519));function ga(p){var y=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw du(la(y,p)),Ui}function ya(p){var y=p.stateNode,O=p.type,M=p.memoizedProps;switch(y[yi]=p,y[tn]=M,O){case"dialog":$r("cancel",y),$r("close",y);break;case"iframe":case"object":case"embed":$r("load",y);break;case"video":case"audio":for(O=0;O<hp.length;O++)$r(hp[O],y);break;case"source":$r("error",y);break;case"img":case"image":case"link":$r("error",y),$r("load",y);break;case"details":$r("toggle",y);break;case"input":$r("invalid",y),hy(y,M.value,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name,!0);break;case"select":$r("invalid",y);break;case"textarea":$r("invalid",y),zf(y,M.value,M.defaultValue,M.children)}O=M.children,typeof O!="string"&&typeof O!="number"&&typeof O!="bigint"||y.textContent===""+O||M.suppressHydrationWarning===!0||TS(y.textContent,O)?(M.popover!=null&&($r("beforetoggle",y),$r("toggle",y)),M.onScroll!=null&&$r("scroll",y),M.onScrollEnd!=null&&$r("scrollend",y),M.onClick!=null&&(y.onclick=jl),y=!0):y=!1,y||ga(p,!0)}function Fm(p){for(os=p.return;os;)switch(os.tag){case 5:case 31:case 13:Ba=!1;return;case 27:case 3:Ba=!0;return;default:os=os.return}}function Sc(p){if(p!==os)return!1;if(!kr)return Fm(p),kr=!0,!1;var y=p.tag,O;if((O=y!==3&&y!==27)&&((O=y===5)&&(O=p.type,O=!(O!=="form"&&O!=="button")||Fx(p.type,p.memoizedProps)),O=!O),O&&ui&&ga(p),Fm(p),y===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));ui=fs(p)}else if(y===31){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));ui=fs(p)}else y===27?(y=ui,pp(p.type)?(p=Wa,Wa=null,ui=p):ui=y):ui=os?ec(p.stateNode.nextSibling):null;return!0}function Cc(){ui=os=null,kr=!1}function Tc(){var p=hu;return p!==null&&(xl===null?xl=p:xl.push.apply(xl,p),hu=null),p}function du(p){hu===null?hu=[p]:hu.push(p)}var fu=Me(null),dl=null,kc=null;function pu(p,y,O){Ee(fu,y._currentValue),y._currentValue=O}function Ec(p){p._currentValue=fu.current,Xe(fu)}function Ey(p,y,O){for(;p!==null;){var M=p.alternate;if((p.childLanes&y)!==y?(p.childLanes|=y,M!==null&&(M.childLanes|=y)):M!==null&&(M.childLanes&y)!==y&&(M.childLanes|=y),p===O)break;p=p.return}}function Ay(p,y,O,M){var V=p.child;for(V!==null&&(V.return=p);V!==null;){var G=V.dependencies;if(G!==null){var de=V.child;G=G.firstContext;e:for(;G!==null;){var Pe=G;G=V;for(var et=0;et<y.length;et++)if(Pe.context===y[et]){G.lanes|=O,Pe=G.alternate,Pe!==null&&(Pe.lanes|=O),Ey(G.return,O,p),M||(de=null);break e}G=Pe.next}}else if(V.tag===18){if(de=V.return,de===null)throw Error(r(341));de.lanes|=O,G=de.alternate,G!==null&&(G.lanes|=O),Ey(de,O,p),de=null}else de=V.child;if(de!==null)de.return=V;else for(de=V;de!==null;){if(de===p){de=null;break}if(V=de.sibling,V!==null){V.return=de.return,de=V;break}de=de.return}V=de}}function Fa(p,y,O,M){p=null;for(var V=y,G=!1;V!==null;){if(!G){if((V.flags&524288)!==0)G=!0;else if((V.flags&262144)!==0)break}if(V.tag===10){var de=V.alternate;if(de===null)throw Error(r(387));if(de=de.memoizedProps,de!==null){var Pe=V.type;pa(V.pendingProps.value,de.value)||(p!==null?p.push(Pe):p=[Pe])}}else if(V===st.current){if(de=V.alternate,de===null)throw Error(r(387));de.memoizedState.memoizedState!==V.memoizedState.memoizedState&&(p!==null?p.push(o0):p=[o0])}V=V.return}p!==null&&Ay(y,p,O,M),y.flags|=262144}function Yf(p){for(p=p.firstContext;p!==null;){if(!pa(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function mu(p){dl=p,kc=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function Po(p){return Py(dl,p)}function jm(p,y){return dl===null&&mu(p),Py(p,y)}function Py(p,y){var O=y._currentValue;if(y={context:y,memoizedValue:O,next:null},kc===null){if(p===null)throw Error(r(308));kc=y,p.dependencies={lanes:0,firstContext:y},p.flags|=524288}else kc=kc.next=y;return O}var xv=typeof AbortController<"u"?AbortController:function(){var p=[],y=this.signal={aborted:!1,addEventListener:function(O,M){p.push(M)}};this.abort=function(){y.aborted=!0,p.forEach(function(O){return O()})}},tx=t.unstable_scheduleCallback,wv=t.unstable_NormalPriority,vo={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ac(){return{controller:new xv,data:new Map,refCount:0}}function Kf(p){p.refCount--,p.refCount===0&&tx(wv,function(){p.controller.abort()})}var $s=null,ja=0,Td=0,zs=null;function GO(p,y){if($s===null){var O=$s=[];ja=0,Td=xS(),zs={status:"pending",value:void 0,then:function(M){O.push(M)}}}return ja++,y.then(Jf,Jf),y}function Jf(){if(--ja===0&&$s!==null){zs!==null&&(zs.status="fulfilled");var p=$s;$s=null,Td=0,zs=null;for(var y=0;y<p.length;y++)(0,p[y])()}}function Vm(p,y){var O=[],M={status:"pending",value:null,reason:null,then:function(V){O.push(V)}};return p.then(function(){M.status="fulfilled",M.value=y;for(var V=0;V<O.length;V++)(0,O[V])(y)},function(V){for(M.status="rejected",M.reason=V,V=0;V<O.length;V++)(0,O[V])(void 0)}),M}var Yo=_e.S;_e.S=function(p,y){Xk=Et(),typeof y=="object"&&y!==null&&typeof y.then=="function"&&GO(p,y),Yo!==null&&Yo(p,y)};var Ql=Me(null);function My(){var p=Ql.current;return p!==null?p:Bi.pooledCache}function Ry(p,y){y===null?Ee(Ql,Ql.current):Ee(Ql,y.pool)}function nx(){var p=My();return p===null?null:{parent:vo._currentValue,pool:p}}var Ul=Error(r(460)),xh=Error(r(474)),va=Error(r(542)),pn={then:function(){}};function Qm(p){return p=p.status,p==="fulfilled"||p==="rejected"}function Iy(p,y,O){switch(O=p[O],O===void 0?p.push(y):O!==y&&(y.then(jl,jl),y=O),y.status){case"fulfilled":return y.value;case"rejected":throw p=y.reason,Dy(p),p;default:if(typeof y.status=="string")y.then(jl,jl);else{if(p=Bi,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=y,p.status="pending",p.then(function(M){if(y.status==="pending"){var V=y;V.status="fulfilled",V.value=M}},function(M){if(y.status==="pending"){var V=y;V.status="rejected",V.reason=M}})}switch(y.status){case"fulfilled":return y.value;case"rejected":throw p=y.reason,Dy(p),p}throw Zl=y,Ul}}function fl(p){try{var y=p._init;return y(p._payload)}catch(O){throw O!==null&&typeof O=="object"&&typeof O.then=="function"?(Zl=O,Ul):O}}var Zl=null;function ep(){if(Zl===null)throw Error(r(459));var p=Zl;return Zl=null,p}function Dy(p){if(p===Ul||p===va)throw Error(r(483))}var Pc=null,kd=0;function Um(p){var y=kd;return kd+=1,Pc===null&&(Pc=[]),Iy(Pc,p,y)}function Mc(p,y){y=y.props.ref,p.ref=y!==void 0?y:null}function Ly(p,y){throw y.$$typeof===w?Error(r(525)):(p=Object.prototype.toString.call(y),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":p)))}function Zm(p){function y(lt,it){if(p){var vt=lt.deletions;vt===null?(lt.deletions=[it],lt.flags|=16):vt.push(it)}}function O(lt,it){if(!p)return null;for(;it!==null;)y(lt,it),it=it.sibling;return null}function M(lt){for(var it=new Map;lt!==null;)lt.key!==null?it.set(lt.key,lt):it.set(lt.index,lt),lt=lt.sibling;return it}function V(lt,it){return lt=Na(lt,it),lt.index=0,lt.sibling=null,lt}function G(lt,it,vt){return lt.index=vt,p?(vt=lt.alternate,vt!==null?(vt=vt.index,vt<it?(lt.flags|=67108866,it):vt):(lt.flags|=67108866,it)):(lt.flags|=1048576,it)}function de(lt){return p&&lt.alternate===null&&(lt.flags|=67108866),lt}function Pe(lt,it,vt,Qt){return it===null||it.tag!==6?(it=vv(vt,lt.mode,Qt),it.return=lt,it):(it=V(it,vt),it.return=lt,it)}function et(lt,it,vt,Qt){var Qn=vt.type;return Qn===A?Lt(lt,it,vt.props.children,Qt,vt.key):it!==null&&(it.elementType===Qn||typeof Qn=="object"&&Qn!==null&&Qn.$$typeof===ne&&fl(Qn)===it.type)?(it=V(it,vt.props),Mc(it,vt),it.return=lt,it):(it=Ty(vt.type,vt.key,vt.props,null,lt.mode,Qt),Mc(it,vt),it.return=lt,it)}function wt(lt,it,vt,Qt){return it===null||it.tag!==4||it.stateNode.containerInfo!==vt.containerInfo||it.stateNode.implementation!==vt.implementation?(it=yh(vt,lt.mode,Qt),it.return=lt,it):(it=V(it,vt.children||[]),it.return=lt,it)}function Lt(lt,it,vt,Qt,Qn){return it===null||it.tag!==7?(it=gh(vt,lt.mode,Qt,Qn),it.return=lt,it):(it=V(it,vt),it.return=lt,it)}function qt(lt,it,vt){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return it=vv(""+it,lt.mode,vt),it.return=lt,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case S:return vt=Ty(it.type,it.key,it.props,null,lt.mode,vt),Mc(vt,it),vt.return=lt,vt;case E:return it=yh(it,lt.mode,vt),it.return=lt,it;case ne:return it=fl(it),qt(lt,it,vt)}if(ye(it)||re(it))return it=gh(it,lt.mode,vt,null),it.return=lt,it;if(typeof it.then=="function")return qt(lt,Um(it),vt);if(it.$$typeof===B)return qt(lt,jm(lt,it),vt);Ly(lt,it)}return null}function St(lt,it,vt,Qt){var Qn=it!==null?it.key:null;if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return Qn!==null?null:Pe(lt,it,""+vt,Qt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case S:return vt.key===Qn?et(lt,it,vt,Qt):null;case E:return vt.key===Qn?wt(lt,it,vt,Qt):null;case ne:return vt=fl(vt),St(lt,it,vt,Qt)}if(ye(vt)||re(vt))return Qn!==null?null:Lt(lt,it,vt,Qt,null);if(typeof vt.then=="function")return St(lt,it,Um(vt),Qt);if(vt.$$typeof===B)return St(lt,it,jm(lt,vt),Qt);Ly(lt,vt)}return null}function Pt(lt,it,vt,Qt,Qn){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number"||typeof Qt=="bigint")return lt=lt.get(vt)||null,Pe(it,lt,""+Qt,Qn);if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case S:return lt=lt.get(Qt.key===null?vt:Qt.key)||null,et(it,lt,Qt,Qn);case E:return lt=lt.get(Qt.key===null?vt:Qt.key)||null,wt(it,lt,Qt,Qn);case ne:return Qt=fl(Qt),Pt(lt,it,vt,Qt,Qn)}if(ye(Qt)||re(Qt))return lt=lt.get(vt)||null,Lt(it,lt,Qt,Qn,null);if(typeof Qt.then=="function")return Pt(lt,it,vt,Um(Qt),Qn);if(Qt.$$typeof===B)return Pt(lt,it,vt,jm(it,Qt),Qn);Ly(it,Qt)}return null}function In(lt,it,vt,Qt){for(var Qn=null,oi=null,Dn=it,Bn=it=0,Ir=null;Dn!==null&&Bn<vt.length;Bn++){Dn.index>Bn?(Ir=Dn,Dn=null):Ir=Dn.sibling;var Kr=St(lt,Dn,vt[Bn],Qt);if(Kr===null){Dn===null&&(Dn=Ir);break}p&&Dn&&Kr.alternate===null&&y(lt,Dn),it=G(Kr,it,Bn),oi===null?Qn=Kr:oi.sibling=Kr,oi=Kr,Dn=Ir}if(Bn===vt.length)return O(lt,Dn),kr&&uu(lt,Bn),Qn;if(Dn===null){for(;Bn<vt.length;Bn++)Dn=qt(lt,vt[Bn],Qt),Dn!==null&&(it=G(Dn,it,Bn),oi===null?Qn=Dn:oi.sibling=Dn,oi=Dn);return kr&&uu(lt,Bn),Qn}for(Dn=M(Dn);Bn<vt.length;Bn++)Ir=Pt(Dn,lt,Bn,vt[Bn],Qt),Ir!==null&&(p&&Ir.alternate!==null&&Dn.delete(Ir.key===null?Bn:Ir.key),it=G(Ir,it,Bn),oi===null?Qn=Ir:oi.sibling=Ir,oi=Ir);return p&&Dn.forEach(function(Hd){return y(lt,Hd)}),kr&&uu(lt,Bn),Qn}function qn(lt,it,vt,Qt){if(vt==null)throw Error(r(151));for(var Qn=null,oi=null,Dn=it,Bn=it=0,Ir=null,Kr=vt.next();Dn!==null&&!Kr.done;Bn++,Kr=vt.next()){Dn.index>Bn?(Ir=Dn,Dn=null):Ir=Dn.sibling;var Hd=St(lt,Dn,Kr.value,Qt);if(Hd===null){Dn===null&&(Dn=Ir);break}p&&Dn&&Hd.alternate===null&&y(lt,Dn),it=G(Hd,it,Bn),oi===null?Qn=Hd:oi.sibling=Hd,oi=Hd,Dn=Ir}if(Kr.done)return O(lt,Dn),kr&&uu(lt,Bn),Qn;if(Dn===null){for(;!Kr.done;Bn++,Kr=vt.next())Kr=qt(lt,Kr.value,Qt),Kr!==null&&(it=G(Kr,it,Bn),oi===null?Qn=Kr:oi.sibling=Kr,oi=Kr);return kr&&uu(lt,Bn),Qn}for(Dn=M(Dn);!Kr.done;Bn++,Kr=vt.next())Kr=Pt(Dn,lt,Bn,Kr.value,Qt),Kr!==null&&(p&&Kr.alternate!==null&&Dn.delete(Kr.key===null?Bn:Kr.key),it=G(Kr,it,Bn),oi===null?Qn=Kr:oi.sibling=Kr,oi=Kr);return p&&Dn.forEach(function(HS){return y(lt,HS)}),kr&&uu(lt,Bn),Qn}function xi(lt,it,vt,Qt){if(typeof vt=="object"&&vt!==null&&vt.type===A&&vt.key===null&&(vt=vt.props.children),typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case S:e:{for(var Qn=vt.key;it!==null;){if(it.key===Qn){if(Qn=vt.type,Qn===A){if(it.tag===7){O(lt,it.sibling),Qt=V(it,vt.props.children),Qt.return=lt,lt=Qt;break e}}else if(it.elementType===Qn||typeof Qn=="object"&&Qn!==null&&Qn.$$typeof===ne&&fl(Qn)===it.type){O(lt,it.sibling),Qt=V(it,vt.props),Mc(Qt,vt),Qt.return=lt,lt=Qt;break e}O(lt,it);break}else y(lt,it);it=it.sibling}vt.type===A?(Qt=gh(vt.props.children,lt.mode,Qt,vt.key),Qt.return=lt,lt=Qt):(Qt=Ty(vt.type,vt.key,vt.props,null,lt.mode,Qt),Mc(Qt,vt),Qt.return=lt,lt=Qt)}return de(lt);case E:e:{for(Qn=vt.key;it!==null;){if(it.key===Qn)if(it.tag===4&&it.stateNode.containerInfo===vt.containerInfo&&it.stateNode.implementation===vt.implementation){O(lt,it.sibling),Qt=V(it,vt.children||[]),Qt.return=lt,lt=Qt;break e}else{O(lt,it);break}else y(lt,it);it=it.sibling}Qt=yh(vt,lt.mode,Qt),Qt.return=lt,lt=Qt}return de(lt);case ne:return vt=fl(vt),xi(lt,it,vt,Qt)}if(ye(vt))return In(lt,it,vt,Qt);if(re(vt)){if(Qn=re(vt),typeof Qn!="function")throw Error(r(150));return vt=Qn.call(vt),qn(lt,it,vt,Qt)}if(typeof vt.then=="function")return xi(lt,it,Um(vt),Qt);if(vt.$$typeof===B)return xi(lt,it,jm(lt,vt),Qt);Ly(lt,vt)}return typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint"?(vt=""+vt,it!==null&&it.tag===6?(O(lt,it.sibling),Qt=V(it,vt),Qt.return=lt,lt=Qt):(O(lt,it),Qt=vv(vt,lt.mode,Qt),Qt.return=lt,lt=Qt),de(lt)):O(lt,it)}return function(lt,it,vt,Qt){try{kd=0;var Qn=xi(lt,it,vt,Qt);return Pc=null,Qn}catch(Dn){if(Dn===Ul||Dn===va)throw Dn;var oi=za(29,Dn,null,lt.mode);return oi.lanes=Qt,oi.return=lt,oi}}}var Rc=Zm(!0),Ov=Zm(!1),Ic=!1;function $y(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qm(p,y){p=p.updateQueue,y.updateQueue===p&&(y.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function Dc(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function gu(p,y,O){var M=p.updateQueue;if(M===null)return null;if(M=M.shared,(fi&2)!==0){var V=M.pending;return V===null?y.next=y:(y.next=V.next,V.next=y),M.pending=y,y=Hf(p),yv(p,null,O),y}return Bm(p,M,y,O),Hf(p)}function pl(p,y,O){if(y=y.updateQueue,y!==null&&(y=y.shared,(O&4194048)!==0)){var M=y.lanes;M&=p.pendingLanes,O|=M,y.lanes=O,Eo(p,O)}}function Xr(p,y){var O=p.updateQueue,M=p.alternate;if(M!==null&&(M=M.updateQueue,O===M)){var V=null,G=null;if(O=O.firstBaseUpdate,O!==null){do{var de={lane:O.lane,tag:O.tag,payload:O.payload,callback:null,next:null};G===null?V=G=de:G=G.next=de,O=O.next}while(O!==null);G===null?V=G=y:G=G.next=y}else V=G=y;O={baseState:M.baseState,firstBaseUpdate:V,lastBaseUpdate:G,shared:M.shared,callbacks:M.callbacks},p.updateQueue=O;return}p=O.lastBaseUpdate,p===null?O.firstBaseUpdate=y:p.next=y,O.lastBaseUpdate=y}var Sv=!1;function yu(){if(Sv){var p=zs;if(p!==null)throw p}}function wh(p,y,O,M){Sv=!1;var V=p.updateQueue;Ic=!1;var G=V.firstBaseUpdate,de=V.lastBaseUpdate,Pe=V.shared.pending;if(Pe!==null){V.shared.pending=null;var et=Pe,wt=et.next;et.next=null,de===null?G=wt:de.next=wt,de=et;var Lt=p.alternate;Lt!==null&&(Lt=Lt.updateQueue,Pe=Lt.lastBaseUpdate,Pe!==de&&(Pe===null?Lt.firstBaseUpdate=wt:Pe.next=wt,Lt.lastBaseUpdate=et))}if(G!==null){var qt=V.baseState;de=0,Lt=wt=et=null,Pe=G;do{var St=Pe.lane&-536870913,Pt=St!==Pe.lane;if(Pt?(Lr&St)===St:(M&St)===St){St!==0&&St===Td&&(Sv=!0),Lt!==null&&(Lt=Lt.next={lane:0,tag:Pe.tag,payload:Pe.payload,callback:null,next:null});e:{var In=p,qn=Pe;St=y;var xi=O;switch(qn.tag){case 1:if(In=qn.payload,typeof In=="function"){qt=In.call(xi,qt,St);break e}qt=In;break e;case 3:In.flags=In.flags&-65537|128;case 0:if(In=qn.payload,St=typeof In=="function"?In.call(xi,qt,St):In,St==null)break e;qt=_({},qt,St);break e;case 2:Ic=!0}}St=Pe.callback,St!==null&&(p.flags|=64,Pt&&(p.flags|=8192),Pt=V.callbacks,Pt===null?V.callbacks=[St]:Pt.push(St))}else Pt={lane:St,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null},Lt===null?(wt=Lt=Pt,et=qt):Lt=Lt.next=Pt,de|=St;if(Pe=Pe.next,Pe===null){if(Pe=V.shared.pending,Pe===null)break;Pt=Pe,Pe=Pt.next,Pt.next=null,V.lastBaseUpdate=Pt,V.shared.pending=null}}while(!0);Lt===null&&(et=qt),V.baseState=et,V.firstBaseUpdate=wt,V.lastBaseUpdate=Lt,G===null&&(V.shared.lanes=0),jd|=de,p.lanes=de,p.memoizedState=qt}}function Wm(p,y){if(typeof p!="function")throw Error(r(191,p));p.call(y)}function zy(p,y){var O=p.callbacks;if(O!==null)for(p.callbacks=null,p=0;p<O.length;p++)Wm(O[p],y)}var Ed=Me(null),Hm=Me(0);function Cv(p,y){p=Fd,Ee(Hm,p),Ee(Ed,y),Fd=p|y.baseLanes}function Va(){Ee(Hm,Fd),Ee(Ed,Ed.current)}function Ad(){Fd=Hm.current,Xe(Ed),Xe(Hm)}var yn=Me(null),Tn=null;function ml(p){var y=p.alternate;Ee(oo,oo.current&1),Ee(yn,p),Tn===null&&(y===null||Ed.current!==null||y.memoizedState!==null)&&(Tn=p)}function tp(p){Ee(oo,oo.current),Ee(yn,p),Tn===null&&(Tn=p)}function Gm(p){p.tag===22?(Ee(oo,oo.current),Ee(yn,p),Tn===null&&(Tn=p)):_o()}function _o(){Ee(oo,oo.current),Ee(yn,yn.current)}function Zi(p){Xe(yn),Tn===p&&(Tn=null),Xe(oo)}var oo=Me(0);function Xm(p){for(var y=p;y!==null;){if(y.tag===13){var O=y.memoizedState;if(O!==null&&(O=O.dehydrated,O===null||wa(O)||jo(O)))return y}else if(y.tag===19&&(y.memoizedProps.revealOrder==="forwards"||y.memoizedProps.revealOrder==="backwards"||y.memoizedProps.revealOrder==="unstable_legacy-backwards"||y.memoizedProps.revealOrder==="together")){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var vu=0,yr=null,Wr=null,mr=null,zi=!1,gl=!1,ql=!1,Pd=0,Md=0,_u=null,Tv=0;function ki(){throw Error(r(321))}function Wl(p,y){if(y===null)return!1;for(var O=0;O<y.length&&O<p.length;O++)if(!pa(p[O],y[O]))return!1;return!0}function np(p,y,O,M,V,G){return vu=G,yr=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,_e.H=p===null||p.memoizedState===null?di:Mo,ql=!1,G=O(M,V),ql=!1,gl&&(G=Ym(y,O,M,V)),rp(p),G}function rp(p){_e.H=Yr;var y=Wr!==null&&Wr.next!==null;if(vu=0,mr=Wr=yr=null,zi=!1,Md=0,_u=null,y)throw Error(r(300));p===null||ls||(p=p.dependencies,p!==null&&Yf(p)&&(ls=!0))}function Ym(p,y,O,M){yr=p;var V=0;do{if(gl&&(_u=null),Md=0,gl=!1,25<=V)throw Error(r(301));if(V+=1,mr=Wr=null,p.updateQueue!=null){var G=p.updateQueue;G.lastEffect=null,G.events=null,G.stores=null,G.memoCache!=null&&(G.memoCache.index=0)}_e.H=Fo,G=y(O,M)}while(gl);return G}function Km(){var p=_e.H,y=p.useState()[0];return y=typeof y.then=="function"?Rd(y):y,p=p.useState()[0],(Wr!==null?Wr.memoizedState:null)!==p&&(yr.flags|=1024),y}function Jm(){var p=Pd!==0;return Pd=0,p}function Oh(p,y,O){y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~O}function bu(p){if(zi){for(p=p.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}zi=!1}vu=0,mr=Wr=yr=null,gl=!1,Md=Pd=0,_u=null}function ws(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?yr.memoizedState=mr=p:mr=mr.next=p,mr}function Ni(){if(Wr===null){var p=yr.alternate;p=p!==null?p.memoizedState:null}else p=Wr.next;var y=mr===null?yr.memoizedState:mr.next;if(y!==null)mr=y,Wr=p;else{if(p===null)throw yr.alternate===null?Error(r(467)):Error(r(310));Wr=p,p={memoizedState:Wr.memoizedState,baseState:Wr.baseState,baseQueue:Wr.baseQueue,queue:Wr.queue,next:null},mr===null?yr.memoizedState=mr=p:mr=mr.next=p}return mr}function Lc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rd(p){var y=Md;return Md+=1,_u===null&&(_u=[]),p=Iy(_u,p,y),y=yr,(mr===null?y.memoizedState:mr.next)===null&&(y=y.alternate,_e.H=y===null||y.memoizedState===null?di:Mo),p}function Id(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Rd(p);if(p.$$typeof===B)return Po(p)}throw Error(r(438,String(p)))}function ip(p){var y=null,O=yr.updateQueue;if(O!==null&&(y=O.memoCache),y==null){var M=yr.alternate;M!==null&&(M=M.updateQueue,M!==null&&(M=M.memoCache,M!=null&&(y={data:M.data.map(function(V){return V.slice()}),index:0})))}if(y==null&&(y={data:[],index:0}),O===null&&(O=Lc(),yr.updateQueue=O),O.memoCache=y,O=y.data[y.index],O===void 0)for(O=y.data[y.index]=Array(p),M=0;M<p;M++)O[M]=ce;return y.index++,O}function Hl(p,y){return typeof y=="function"?y(p):y}function P(p){var y=Ni();return c(y,Wr,p)}function c(p,y,O){var M=p.queue;if(M===null)throw Error(r(311));M.lastRenderedReducer=O;var V=p.baseQueue,G=M.pending;if(G!==null){if(V!==null){var de=V.next;V.next=G.next,G.next=de}y.baseQueue=V=G,M.pending=null}if(G=p.baseState,V===null)p.memoizedState=G;else{y=V.next;var Pe=de=null,et=null,wt=y,Lt=!1;do{var qt=wt.lane&-536870913;if(qt!==wt.lane?(Lr&qt)===qt:(vu&qt)===qt){var St=wt.revertLane;if(St===0)et!==null&&(et=et.next={lane:0,revertLane:0,gesture:null,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null}),qt===Td&&(Lt=!0);else if((vu&St)===St){wt=wt.next,St===Td&&(Lt=!0);continue}else qt={lane:0,revertLane:wt.revertLane,gesture:null,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null},et===null?(Pe=et=qt,de=G):et=et.next=qt,yr.lanes|=St,jd|=St;qt=wt.action,ql&&O(G,qt),G=wt.hasEagerState?wt.eagerState:O(G,qt)}else St={lane:qt,revertLane:wt.revertLane,gesture:wt.gesture,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null},et===null?(Pe=et=St,de=G):et=et.next=St,yr.lanes|=qt,jd|=qt;wt=wt.next}while(wt!==null&&wt!==y);if(et===null?de=G:et.next=Pe,!pa(G,p.memoizedState)&&(ls=!0,Lt&&(O=zs,O!==null)))throw O;p.memoizedState=G,p.baseState=de,p.baseQueue=et,M.lastRenderedState=G}return V===null&&(M.lanes=0),[p.memoizedState,M.dispatch]}function m(p){var y=Ni(),O=y.queue;if(O===null)throw Error(r(311));O.lastRenderedReducer=p;var M=O.dispatch,V=O.pending,G=y.memoizedState;if(V!==null){O.pending=null;var de=V=V.next;do G=p(G,de.action),de=de.next;while(de!==V);pa(G,y.memoizedState)||(ls=!0),y.memoizedState=G,y.baseQueue===null&&(y.baseState=G),O.lastRenderedState=G}return[G,M]}function b(p,y,O){var M=yr,V=Ni(),G=kr;if(G){if(O===void 0)throw Error(r(407));O=O()}else O=y();var de=!pa((Wr||V).memoizedState,O);if(de&&(V.memoizedState=O,ls=!0),V=V.queue,gt(L.bind(null,M,V,p),[p]),V.getSnapshot!==y||de||mr!==null&&mr.memoizedState.tag&1){if(M.flags|=2048,Ze(9,{destroy:void 0},I.bind(null,M,V,O,y),null),Bi===null)throw Error(r(349));G||(vu&127)!==0||C(M,y,O)}return O}function C(p,y,O){p.flags|=16384,p={getSnapshot:y,value:O},y=yr.updateQueue,y===null?(y=Lc(),yr.updateQueue=y,y.stores=[p]):(O=y.stores,O===null?y.stores=[p]:O.push(p))}function I(p,y,O,M){y.value=O,y.getSnapshot=M,j(y)&&W(p)}function L(p,y,O){return O(function(){j(y)&&W(p)})}function j(p){var y=p.getSnapshot;p=p.value;try{var O=y();return!pa(p,O)}catch{return!0}}function W(p){var y=hl(p,2);y!==null&&Ol(y,p,2)}function K(p){var y=ws();if(typeof p=="function"){var O=p;if(p=O(),ql){at(!0);try{O()}finally{at(!1)}}}return y.memoizedState=y.baseState=p,y.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:p},y}function te(p,y,O,M){return p.baseState=O,c(p,Wr,typeof M=="function"?M:Hl)}function he(p,y,O,M,V){if(Qa(p))throw Error(r(485));if(p=y.action,p!==null){var G={payload:V,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(de){G.listeners.push(de)}};_e.T!==null?O(!0):G.isTransition=!1,M(G),O=y.pending,O===null?(G.next=y.pending=G,ue(y,G)):(G.next=O.next,y.pending=O.next=G)}}function ue(p,y){var O=y.action,M=y.payload,V=p.state;if(y.isTransition){var G=_e.T,de={};_e.T=de;try{var Pe=O(V,M),et=_e.S;et!==null&&et(de,Pe),ge(p,y,Pe)}catch(wt){Ie(p,y,wt)}finally{G!==null&&de.types!==null&&(G.types=de.types),_e.T=G}}else try{G=O(V,M),ge(p,y,G)}catch(wt){Ie(p,y,wt)}}function ge(p,y,O){O!==null&&typeof O=="object"&&typeof O.then=="function"?O.then(function(M){Oe(p,y,M)},function(M){return Ie(p,y,M)}):Oe(p,y,O)}function Oe(p,y,O){y.status="fulfilled",y.value=O,Le(y),p.state=O,y=p.pending,y!==null&&(O=y.next,O===y?p.pending=null:(O=O.next,y.next=O,ue(p,O)))}function Ie(p,y,O){var M=p.pending;if(p.pending=null,M!==null){M=M.next;do y.status="rejected",y.reason=O,Le(y),y=y.next;while(y!==M)}p.action=null}function Le(p){p=p.listeners;for(var y=0;y<p.length;y++)(0,p[y])()}function De(p,y){return y}function je(p,y){if(kr){var O=Bi.formState;if(O!==null){e:{var M=yr;if(kr){if(ui){t:{for(var V=ui,G=Ba;V.nodeType!==8;){if(!G){V=null;break t}if(V=ec(V.nextSibling),V===null){V=null;break t}}G=V.data,V=G==="F!"||G==="F"?V:null}if(V){ui=ec(V.nextSibling),M=V.data==="F!";break e}}ga(M)}M=!1}M&&(y=O[0])}}return O=ws(),O.memoizedState=O.baseState=y,M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:De,lastRenderedState:y},O.queue=M,O=op.bind(null,yr,M),M.dispatch=O,M=K(!1),G=ba.bind(null,yr,!1,M.queue),M=ws(),V={state:y,dispatch:null,action:p,pending:null},M.queue=V,O=he.bind(null,yr,V,G,O),V.dispatch=O,M.memoizedState=p,[y,O,!1]}function He(p){var y=Ni();return Fe(y,Wr,p)}function Fe(p,y,O){if(y=c(p,y,De)[0],p=P(Hl)[0],typeof y=="object"&&y!==null&&typeof y.then=="function")try{var M=Rd(y)}catch(de){throw de===Ul?va:de}else M=y;y=Ni();var V=y.queue,G=V.dispatch;return O!==y.memoizedState&&(yr.flags|=2048,Ze(9,{destroy:void 0},We.bind(null,V,O),null)),[M,G,p]}function We(p,y){p.action=y}function Ke(p){var y=Ni(),O=Wr;if(O!==null)return Fe(y,O,p);Ni(),y=y.memoizedState,O=Ni();var M=O.queue.dispatch;return O.memoizedState=p,[y,M,!1]}function Ze(p,y,O,M){return p={tag:p,create:O,deps:M,inst:y,next:null},y=yr.updateQueue,y===null&&(y=Lc(),yr.updateQueue=y),O=y.lastEffect,O===null?y.lastEffect=p.next=p:(M=O.next,O.next=p,p.next=M,y.lastEffect=p),p}function nt(){return Ni().memoizedState}function yt(p,y,O,M){var V=ws();yr.flags|=p,V.memoizedState=Ze(1|y,{destroy:void 0},O,M===void 0?null:M)}function ht(p,y,O,M){var V=Ni();M=M===void 0?null:M;var G=V.memoizedState.inst;Wr!==null&&M!==null&&Wl(M,Wr.memoizedState.deps)?V.memoizedState=Ze(y,G,O,M):(yr.flags|=p,V.memoizedState=Ze(1|y,G,O,M))}function pt(p,y){yt(8390656,8,p,y)}function gt(p,y){ht(2048,8,p,y)}function Kt(p){yr.flags|=4;var y=yr.updateQueue;if(y===null)y=Lc(),yr.updateQueue=y,y.events=[p];else{var O=y.events;O===null?y.events=[p]:O.push(p)}}function en(p){var y=Ni().memoizedState;return Kt({ref:y,nextImpl:p}),function(){if((fi&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}function zt(p,y){return ht(4,2,p,y)}function ln(p,y){return ht(4,4,p,y)}function Jn(p,y){if(typeof y=="function"){p=p();var O=y(p);return function(){typeof O=="function"?O():y(null)}}if(y!=null)return p=p(),y.current=p,function(){y.current=null}}function Hr(p,y,O){O=O!=null?O.concat([p]):null,ht(4,4,Jn.bind(null,y,p),O)}function vi(){}function hi(p,y){var O=Ni();y=y===void 0?null:y;var M=O.memoizedState;return y!==null&&Wl(y,M[1])?M[0]:(O.memoizedState=[p,y],p)}function Ei(p,y){var O=Ni();y=y===void 0?null:y;var M=O.memoizedState;if(y!==null&&Wl(y,M[1]))return M[0];if(M=p(),ql){at(!0);try{p()}finally{at(!1)}}return O.memoizedState=[M,y],M}function ri(p,y,O){return O===void 0||(vu&1073741824)!==0&&(Lr&261930)===0?p.memoizedState=y:(p.memoizedState=O,p=Kk(),yr.lanes|=p,jd|=p,O)}function qi(p,y,O,M){return pa(O,y)?O:Ed.current!==null?(p=ri(p,O,M),pa(p,y)||(ls=!0),p):(vu&42)===0||(vu&1073741824)!==0&&(Lr&261930)===0?(ls=!0,p.memoizedState=O):(p=Kk(),yr.lanes|=p,jd|=p,y)}function Ai(p,y,O,M,V){var G=ke.p;ke.p=G!==0&&8>G?G:8;var de=_e.T,Pe={};_e.T=Pe,ba(p,!1,y,O);try{var et=V(),wt=_e.S;if(wt!==null&&wt(Pe,et),et!==null&&typeof et=="object"&&typeof et.then=="function"){var Lt=Vm(et,M);Xl(p,y,Lt,wl(p))}else Xl(p,y,M,wl(p))}catch(qt){Xl(p,y,{then:function(){},status:"rejected",reason:qt},wl())}finally{ke.p=G,de!==null&&Pe.types!==null&&(de.types=Pe.types),_e.T=de}}function ss(){}function so(p,y,O,M){if(p.tag!==5)throw Error(r(476));var V=ao(p).queue;Ai(p,V,y,Ne,O===null?ss:function(){return as(p),O(M)})}function ao(p){var y=p.memoizedState;if(y!==null)return y;y={memoizedState:Ne,baseState:Ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:Ne},next:null};var O={};return y.next={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:O},next:null},p.memoizedState=y,p=p.alternate,p!==null&&(p.memoizedState=y),y}function as(p){var y=ao(p);y.next===null&&(y=p.alternate.memoizedState),Xl(p,y.next.queue,{},wl())}function $c(){return Po(o0)}function zc(){return Ni().memoizedState}function Gl(){return Ni().memoizedState}function _a(p){for(var y=p.return;y!==null;){switch(y.tag){case 24:case 3:var O=wl();p=Dc(O);var M=gu(y,p,O);M!==null&&(Ol(M,y,O),pl(M,y,O)),y={cache:Ac()},p.payload=y;return}y=y.return}}function Dd(p,y,O){var M=wl();O={lane:M,revertLane:0,gesture:null,action:O,hasEagerState:!1,eagerState:null,next:null},Qa(p)?yl(y,O):(O=mh(p,y,O,M),O!==null&&(Ol(O,p,M),vl(O,y,M)))}function op(p,y,O){var M=wl();Xl(p,y,O,M)}function Xl(p,y,O,M){var V={lane:M,revertLane:0,gesture:null,action:O,hasEagerState:!1,eagerState:null,next:null};if(Qa(p))yl(y,V);else{var G=p.alternate;if(p.lanes===0&&(G===null||G.lanes===0)&&(G=y.lastRenderedReducer,G!==null))try{var de=y.lastRenderedState,Pe=G(de,O);if(V.hasEagerState=!0,V.eagerState=Pe,pa(Pe,de))return Bm(p,y,V,0),Bi===null&&Od(),!1}catch{}if(O=mh(p,y,V,M),O!==null)return Ol(O,p,M),vl(O,y,M),!0}return!1}function ba(p,y,O,M){if(M={lane:2,revertLane:xS(),gesture:null,action:M,hasEagerState:!1,eagerState:null,next:null},Qa(p)){if(y)throw Error(r(479))}else y=mh(p,O,M,2),y!==null&&Ol(y,p,2)}function Qa(p){var y=p.alternate;return p===yr||y!==null&&y===yr}function yl(p,y){gl=zi=!0;var O=p.pending;O===null?y.next=y:(y.next=O.next,O.next=y),p.pending=y}function vl(p,y,O){if((O&4194048)!==0){var M=y.lanes;M&=p.pendingLanes,O|=M,y.lanes=O,Eo(p,O)}}var Yr={readContext:Po,use:Id,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useLayoutEffect:ki,useInsertionEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useSyncExternalStore:ki,useId:ki,useHostTransitionStatus:ki,useFormState:ki,useActionState:ki,useOptimistic:ki,useMemoCache:ki,useCacheRefresh:ki};Yr.useEffectEvent=ki;var di={readContext:Po,use:Id,useCallback:function(p,y){return ws().memoizedState=[p,y===void 0?null:y],p},useContext:Po,useEffect:pt,useImperativeHandle:function(p,y,O){O=O!=null?O.concat([p]):null,yt(4194308,4,Jn.bind(null,y,p),O)},useLayoutEffect:function(p,y){return yt(4194308,4,p,y)},useInsertionEffect:function(p,y){yt(4,2,p,y)},useMemo:function(p,y){var O=ws();y=y===void 0?null:y;var M=p();if(ql){at(!0);try{p()}finally{at(!1)}}return O.memoizedState=[M,y],M},useReducer:function(p,y,O){var M=ws();if(O!==void 0){var V=O(y);if(ql){at(!0);try{O(y)}finally{at(!1)}}}else V=y;return M.memoizedState=M.baseState=V,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:V},M.queue=p,p=p.dispatch=Dd.bind(null,yr,p),[M.memoizedState,p]},useRef:function(p){var y=ws();return p={current:p},y.memoizedState=p},useState:function(p){p=K(p);var y=p.queue,O=op.bind(null,yr,y);return y.dispatch=O,[p.memoizedState,O]},useDebugValue:vi,useDeferredValue:function(p,y){var O=ws();return ri(O,p,y)},useTransition:function(){var p=K(!1);return p=Ai.bind(null,yr,p.queue,!0,!1),ws().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,y,O){var M=yr,V=ws();if(kr){if(O===void 0)throw Error(r(407));O=O()}else{if(O=y(),Bi===null)throw Error(r(349));(Lr&127)!==0||C(M,y,O)}V.memoizedState=O;var G={value:O,getSnapshot:y};return V.queue=G,pt(L.bind(null,M,G,p),[p]),M.flags|=2048,Ze(9,{destroy:void 0},I.bind(null,M,G,O,y),null),O},useId:function(){var p=ws(),y=Bi.identifierPrefix;if(kr){var O=ma,M=Oc;O=(M&~(1<<32-Ot(M)-1)).toString(32)+O,y="_"+y+"R_"+O,O=Pd++,0<O&&(y+="H"+O.toString(32)),y+="_"}else O=Tv++,y="_"+y+"r_"+O.toString(32)+"_";return p.memoizedState=y},useHostTransitionStatus:$c,useFormState:je,useActionState:je,useOptimistic:function(p){var y=ws();y.memoizedState=y.baseState=p;var O={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return y.queue=O,y=ba.bind(null,yr,!0,O),O.dispatch=y,[p,y]},useMemoCache:ip,useCacheRefresh:function(){return ws().memoizedState=_a.bind(null,yr)},useEffectEvent:function(p){var y=ws(),O={impl:p};return y.memoizedState=O,function(){if((fi&2)!==0)throw Error(r(440));return O.impl.apply(void 0,arguments)}}},Mo={readContext:Po,use:Id,useCallback:hi,useContext:Po,useEffect:gt,useImperativeHandle:Hr,useInsertionEffect:zt,useLayoutEffect:ln,useMemo:Ei,useReducer:P,useRef:nt,useState:function(){return P(Hl)},useDebugValue:vi,useDeferredValue:function(p,y){var O=Ni();return qi(O,Wr.memoizedState,p,y)},useTransition:function(){var p=P(Hl)[0],y=Ni().memoizedState;return[typeof p=="boolean"?p:Rd(p),y]},useSyncExternalStore:b,useId:zc,useHostTransitionStatus:$c,useFormState:He,useActionState:He,useOptimistic:function(p,y){var O=Ni();return te(O,Wr,p,y)},useMemoCache:ip,useCacheRefresh:Gl};Mo.useEffectEvent=en;var Fo={readContext:Po,use:Id,useCallback:hi,useContext:Po,useEffect:gt,useImperativeHandle:Hr,useInsertionEffect:zt,useLayoutEffect:ln,useMemo:Ei,useReducer:m,useRef:nt,useState:function(){return m(Hl)},useDebugValue:vi,useDeferredValue:function(p,y){var O=Ni();return Wr===null?ri(O,p,y):qi(O,Wr.memoizedState,p,y)},useTransition:function(){var p=m(Hl)[0],y=Ni().memoizedState;return[typeof p=="boolean"?p:Rd(p),y]},useSyncExternalStore:b,useId:zc,useHostTransitionStatus:$c,useFormState:Ke,useActionState:Ke,useOptimistic:function(p,y){var O=Ni();return Wr!==null?te(O,Wr,p,y):(O.baseState=p,[p,O.queue.dispatch])},useMemoCache:ip,useCacheRefresh:Gl};Fo.useEffectEvent=en;function Ny(p,y,O,M){y=p.memoizedState,O=O(M,y),O=O==null?y:_({},y,O),p.memoizedState=O,p.lanes===0&&(p.updateQueue.baseState=O)}var By={enqueueSetState:function(p,y,O){p=p._reactInternals;var M=wl(),V=Dc(M);V.payload=y,O!=null&&(V.callback=O),y=gu(p,V,M),y!==null&&(Ol(y,p,M),pl(y,p,M))},enqueueReplaceState:function(p,y,O){p=p._reactInternals;var M=wl(),V=Dc(M);V.tag=1,V.payload=y,O!=null&&(V.callback=O),y=gu(p,V,M),y!==null&&(Ol(y,p,M),pl(y,p,M))},enqueueForceUpdate:function(p,y){p=p._reactInternals;var O=wl(),M=Dc(O);M.tag=2,y!=null&&(M.callback=y),y=gu(p,M,O),y!==null&&(Ol(y,p,O),pl(y,p,O))}};function Sh(p,y,O,M,V,G,de){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(M,G,de):y.prototype&&y.prototype.isPureReactComponent?!ph(O,M)||!ph(V,G):!0}function rx(p,y,O,M){p=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(O,M),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(O,M),y.state!==p&&By.enqueueReplaceState(y,y.state,null)}function Ch(p,y){var O=y;if("ref"in y){O={};for(var M in y)M!=="ref"&&(O[M]=y[M])}if(p=p.defaultProps){O===y&&(O=_({},O));for(var V in p)O[V]===void 0&&(O[V]=p[V])}return O}function Fy(p){xc(p)}function xu(p){console.error(p)}function wu(p){xc(p)}function Yl(p,y){try{var O=p.onUncaughtError;O(y.value,{componentStack:y.stack})}catch(M){setTimeout(function(){throw M})}}function jy(p,y,O){try{var M=p.onCaughtError;M(O.value,{componentStack:O.stack,errorBoundary:y.tag===1?y.stateNode:null})}catch(V){setTimeout(function(){throw V})}}function eg(p,y,O){return O=Dc(O),O.tag=3,O.payload={element:null},O.callback=function(){Yl(p,y)},O}function tg(p){return p=Dc(p),p.tag=3,p}function ng(p,y,O,M){var V=O.type.getDerivedStateFromError;if(typeof V=="function"){var G=M.value;p.payload=function(){return V(G)},p.callback=function(){jy(y,O,M)}}var de=O.stateNode;de!==null&&typeof de.componentDidCatch=="function"&&(p.callback=function(){jy(y,O,M),typeof V!="function"&&(Vd===null?Vd=new Set([this]):Vd.add(this));var Pe=M.stack;this.componentDidCatch(M.value,{componentStack:Pe!==null?Pe:""})})}function ix(p,y,O,M,V){if(O.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){if(y=O.alternate,y!==null&&Fa(y,O,V,!0),O=yn.current,O!==null){switch(O.tag){case 31:case 13:return Tn===null?Zv():O.alternate===null&&Ro===0&&(Ro=3),O.flags&=-257,O.flags|=65536,O.lanes=V,M===pn?O.flags|=16384:(y=O.updateQueue,y===null?O.updateQueue=new Set([M]):y.add(M),Ax(p,M,V)),!1;case 22:return O.flags|=65536,M===pn?O.flags|=16384:(y=O.updateQueue,y===null?(y={transitions:null,markerInstances:null,retryQueue:new Set([M])},O.updateQueue=y):(O=y.retryQueue,O===null?y.retryQueue=new Set([M]):O.add(M)),Ax(p,M,V)),!1}throw Error(r(435,O.tag))}return Ax(p,M,V),Zv(),!1}if(kr)return y=yn.current,y!==null?((y.flags&65536)===0&&(y.flags|=256),y.flags|=65536,y.lanes=V,M!==Ui&&(p=Error(r(422),{cause:M}),du(la(p,O)))):(M!==Ui&&(y=Error(r(423),{cause:M}),du(la(y,O))),p=p.current.alternate,p.flags|=65536,V&=-V,p.lanes|=V,M=la(M,O),V=eg(p.stateNode,M,V),Xr(p,V),Ro!==4&&(Ro=2)),!1;var G=Error(r(520),{cause:M});if(G=la(G,O),jv===null?jv=[G]:jv.push(G),Ro!==4&&(Ro=2),y===null)return!0;M=la(M,O),O=y;do{switch(O.tag){case 3:return O.flags|=65536,p=V&-V,O.lanes|=p,p=eg(O.stateNode,M,p),Xr(O,p),!1;case 1:if(y=O.type,G=O.stateNode,(O.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Vd===null||!Vd.has(G))))return O.flags|=65536,V&=-V,O.lanes|=V,V=tg(V),ng(V,p,O,M),Xr(O,V),!1}O=O.return}while(O!==null);return!1}var ox=Error(r(461)),ls=!1;function Os(p,y,O,M){y.child=p===null?Ov(y,null,O,M):Rc(y,p.child,O,M)}function Lk(p,y,O,M,V){O=O.render;var G=y.ref;if("ref"in M){var de={};for(var Pe in M)Pe!=="ref"&&(de[Pe]=M[Pe])}else de=M;return mu(y),M=np(p,y,O,de,G,V),Pe=Jm(),p!==null&&!ls?(Oh(p,y,V),kh(p,y,V)):(kr&&Pe&&Cd(y),y.flags|=1,Os(p,y,M,V),y.child)}function sx(p,y,O,M,V){if(p===null){var G=O.type;return typeof G=="function"&&!Cy(G)&&G.defaultProps===void 0&&O.compare===null?(y.tag=15,y.type=G,XO(p,y,G,M,V)):(p=Ty(O.type,null,M,y,y.mode,V),p.ref=y.ref,p.return=y,y.child=p)}if(G=p.child,!Av(p,V)){var de=G.memoizedProps;if(O=O.compare,O=O!==null?O:ph,O(de,M)&&p.ref===y.ref)return kh(p,y,V)}return y.flags|=1,p=Na(G,M),p.ref=y.ref,p.return=y,y.child=p}function XO(p,y,O,M,V){if(p!==null){var G=p.memoizedProps;if(ph(G,M)&&p.ref===y.ref)if(ls=!1,y.pendingProps=M=G,Av(p,V))(p.flags&131072)!==0&&(ls=!0);else return y.lanes=p.lanes,kh(p,y,V)}return KO(p,y,O,M,V)}function YO(p,y,O,M){var V=M.children,G=p!==null?p.memoizedState:null;if(p===null&&y.stateNode===null&&(y.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),M.mode==="hidden"){if((y.flags&128)!==0){if(G=G!==null?G.baseLanes|O:O,p!==null){for(M=y.child=p.child,V=0;M!==null;)V=V|M.lanes|M.childLanes,M=M.sibling;M=V&~G}else M=0,y.child=null;return $k(p,y,G,O,M)}if((O&536870912)!==0)y.memoizedState={baseLanes:0,cachePool:null},p!==null&&Ry(y,G!==null?G.cachePool:null),G!==null?Cv(y,G):Va(),Gm(y);else return M=y.lanes=536870912,$k(p,y,G!==null?G.baseLanes|O:O,O,M)}else G!==null?(Ry(y,G.cachePool),Cv(y,G),_o(),y.memoizedState=null):(p!==null&&Ry(y,null),Va(),_o());return Os(p,y,V,O),y.child}function Th(p,y){return p!==null&&p.tag===22||y.stateNode!==null||(y.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.sibling}function $k(p,y,O,M,V){var G=My();return G=G===null?null:{parent:vo._currentValue,pool:G},y.memoizedState={baseLanes:O,cachePool:G},p!==null&&Ry(y,null),Va(),Gm(y),p!==null&&Fa(p,y,M,!0),y.childLanes=V,null}function Ld(p,y){return y=hx({mode:y.mode,children:y.children},p.mode),y.ref=p.ref,p.child=y,y.return=p,y}function kv(p,y,O){return Rc(y,p.child,null,O),p=Ld(y,y.pendingProps),p.flags|=2,Zi(y),y.memoizedState=null,p}function ax(p,y,O){var M=y.pendingProps,V=(y.flags&128)!==0;if(y.flags&=-129,p===null){if(kr){if(M.mode==="hidden")return p=Ld(y,M),y.lanes=536870912,Th(null,p);if(tp(y),(p=ui)?(p=mp(p,Ba),p=p!==null&&p.data==="&"?p:null,p!==null&&(y.memoizedState={dehydrated:p,treeContext:wc!==null?{id:Oc,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},O=ky(p),O.return=y,y.child=O,os=y,ui=null)):p=null,p===null)throw ga(y);return y.lanes=536870912,null}return Ld(y,M)}var G=p.memoizedState;if(G!==null){var de=G.dehydrated;if(tp(y),V)if(y.flags&256)y.flags&=-257,y=kv(p,y,O);else if(y.memoizedState!==null)y.child=p.child,y.flags|=128,y=null;else throw Error(r(558));else if(ls||Fa(p,y,O,!1),V=(O&p.childLanes)!==0,ls||V){if(M=Bi,M!==null&&(de=If(M,O),de!==0&&de!==G.retryLane))throw G.retryLane=de,hl(p,de),Ol(M,p,de),ox;Zv(),y=kv(p,y,O)}else p=G.treeContext,ui=ec(de.nextSibling),os=y,kr=!0,hu=null,Ba=!1,p!==null&&bv(y,p),y=Ld(y,M),y.flags|=4096;return y}return p=Na(p.child,{mode:M.mode,children:M.children}),p.ref=y.ref,y.child=p,p.return=y,p}function lx(p,y){var O=y.ref;if(O===null)p!==null&&p.ref!==null&&(y.flags|=4194816);else{if(typeof O!="function"&&typeof O!="object")throw Error(r(284));(p===null||p.ref!==O)&&(y.flags|=4194816)}}function KO(p,y,O,M,V){return mu(y),O=np(p,y,O,M,void 0,V),M=Jm(),p!==null&&!ls?(Oh(p,y,V),kh(p,y,V)):(kr&&M&&Cd(y),y.flags|=1,Os(p,y,O,V),y.child)}function zk(p,y,O,M,V,G){return mu(y),y.updateQueue=null,O=Ym(y,M,O,V),rp(p),M=Jm(),p!==null&&!ls?(Oh(p,y,G),kh(p,y,G)):(kr&&M&&Cd(y),y.flags|=1,Os(p,y,O,G),y.child)}function Nk(p,y,O,M,V){if(mu(y),y.stateNode===null){var G=sr,de=O.contextType;typeof de=="object"&&de!==null&&(G=Po(de)),G=new O(M,G),y.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,G.updater=By,y.stateNode=G,G._reactInternals=y,G=y.stateNode,G.props=M,G.state=y.memoizedState,G.refs={},$y(y),de=O.contextType,G.context=typeof de=="object"&&de!==null?Po(de):sr,G.state=y.memoizedState,de=O.getDerivedStateFromProps,typeof de=="function"&&(Ny(y,O,de,M),G.state=y.memoizedState),typeof O.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(de=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),de!==G.state&&By.enqueueReplaceState(G,G.state,null),wh(y,M,G,V),yu(),G.state=y.memoizedState),typeof G.componentDidMount=="function"&&(y.flags|=4194308),M=!0}else if(p===null){G=y.stateNode;var Pe=y.memoizedProps,et=Ch(O,Pe);G.props=et;var wt=G.context,Lt=O.contextType;de=sr,typeof Lt=="object"&&Lt!==null&&(de=Po(Lt));var qt=O.getDerivedStateFromProps;Lt=typeof qt=="function"||typeof G.getSnapshotBeforeUpdate=="function",Pe=y.pendingProps!==Pe,Lt||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Pe||wt!==de)&&rx(y,G,M,de),Ic=!1;var St=y.memoizedState;G.state=St,wh(y,M,G,V),yu(),wt=y.memoizedState,Pe||St!==wt||Ic?(typeof qt=="function"&&(Ny(y,O,qt,M),wt=y.memoizedState),(et=Ic||Sh(y,O,et,M,St,wt,de))?(Lt||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(y.flags|=4194308)):(typeof G.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=M,y.memoizedState=wt),G.props=M,G.state=wt,G.context=de,M=et):(typeof G.componentDidMount=="function"&&(y.flags|=4194308),M=!1)}else{G=y.stateNode,qm(p,y),de=y.memoizedProps,Lt=Ch(O,de),G.props=Lt,qt=y.pendingProps,St=G.context,wt=O.contextType,et=sr,typeof wt=="object"&&wt!==null&&(et=Po(wt)),Pe=O.getDerivedStateFromProps,(wt=typeof Pe=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(de!==qt||St!==et)&&rx(y,G,M,et),Ic=!1,St=y.memoizedState,G.state=St,wh(y,M,G,V),yu();var Pt=y.memoizedState;de!==qt||St!==Pt||Ic||p!==null&&p.dependencies!==null&&Yf(p.dependencies)?(typeof Pe=="function"&&(Ny(y,O,Pe,M),Pt=y.memoizedState),(Lt=Ic||Sh(y,O,Lt,M,St,Pt,et)||p!==null&&p.dependencies!==null&&Yf(p.dependencies))?(wt||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(M,Pt,et),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(M,Pt,et)),typeof G.componentDidUpdate=="function"&&(y.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof G.componentDidUpdate!="function"||de===p.memoizedProps&&St===p.memoizedState||(y.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||de===p.memoizedProps&&St===p.memoizedState||(y.flags|=1024),y.memoizedProps=M,y.memoizedState=Pt),G.props=M,G.state=Pt,G.context=et,M=Lt):(typeof G.componentDidUpdate!="function"||de===p.memoizedProps&&St===p.memoizedState||(y.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||de===p.memoizedProps&&St===p.memoizedState||(y.flags|=1024),M=!1)}return G=M,lx(p,y),M=(y.flags&128)!==0,G||M?(G=y.stateNode,O=M&&typeof O.getDerivedStateFromError!="function"?null:G.render(),y.flags|=1,p!==null&&M?(y.child=Rc(y,p.child,null,V),y.child=Rc(y,null,O,V)):Os(p,y,O,V),y.memoizedState=G.state,p=y.child):p=kh(p,y,V),p}function Bk(p,y,O,M){return Cc(),y.flags|=256,Os(p,y,O,M),y.child}var cx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ev(p){return{baseLanes:p,cachePool:nx()}}function ux(p,y,O){return p=p!==null?p.childLanes&~O:0,y&&(p|=ca),p}function JO(p,y,O){var M=y.pendingProps,V=!1,G=(y.flags&128)!==0,de;if((de=G)||(de=p!==null&&p.memoizedState===null?!1:(oo.current&2)!==0),de&&(V=!0,y.flags&=-129),de=(y.flags&32)!==0,y.flags&=-33,p===null){if(kr){if(V?ml(y):_o(),(p=ui)?(p=mp(p,Ba),p=p!==null&&p.data!=="&"?p:null,p!==null&&(y.memoizedState={dehydrated:p,treeContext:wc!==null?{id:Oc,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},O=ky(p),O.return=y,y.child=O,os=y,ui=null)):p=null,p===null)throw ga(y);return jo(p)?y.lanes=32:y.lanes=536870912,null}var Pe=M.children;return M=M.fallback,V?(_o(),V=y.mode,Pe=hx({mode:"hidden",children:Pe},V),M=gh(M,V,O,null),Pe.return=y,M.return=y,Pe.sibling=M,y.child=Pe,M=y.child,M.memoizedState=Ev(O),M.childLanes=ux(p,de,O),y.memoizedState=cx,Th(null,M)):(ml(y),eS(y,Pe))}var et=p.memoizedState;if(et!==null&&(Pe=et.dehydrated,Pe!==null)){if(G)y.flags&256?(ml(y),y.flags&=-257,y=dx(p,y,O)):y.memoizedState!==null?(_o(),y.child=p.child,y.flags|=128,y=null):(_o(),Pe=M.fallback,V=y.mode,M=hx({mode:"visible",children:M.children},V),Pe=gh(Pe,V,O,null),Pe.flags|=2,M.return=y,Pe.return=y,M.sibling=Pe,y.child=M,Rc(y,p.child,null,O),M=y.child,M.memoizedState=Ev(O),M.childLanes=ux(p,de,O),y.memoizedState=cx,y=Th(null,M));else if(ml(y),jo(Pe)){if(de=Pe.nextSibling&&Pe.nextSibling.dataset,de)var wt=de.dgst;de=wt,M=Error(r(419)),M.stack="",M.digest=de,du({value:M,source:null,stack:null}),y=dx(p,y,O)}else if(ls||Fa(p,y,O,!1),de=(O&p.childLanes)!==0,ls||de){if(de=Bi,de!==null&&(M=If(de,O),M!==0&&M!==et.retryLane))throw et.retryLane=M,hl(p,M),Ol(de,p,M),ox;wa(Pe)||Zv(),y=dx(p,y,O)}else wa(Pe)?(y.flags|=192,y.child=p.child,y=null):(p=et.treeContext,ui=ec(Pe.nextSibling),os=y,kr=!0,hu=null,Ba=!1,p!==null&&bv(y,p),y=eS(y,M.children),y.flags|=4096);return y}return V?(_o(),Pe=M.fallback,V=y.mode,et=p.child,wt=et.sibling,M=Na(et,{mode:"hidden",children:M.children}),M.subtreeFlags=et.subtreeFlags&65011712,wt!==null?Pe=Na(wt,Pe):(Pe=gh(Pe,V,O,null),Pe.flags|=2),Pe.return=y,M.return=y,M.sibling=Pe,y.child=M,Th(null,M),M=y.child,Pe=p.child.memoizedState,Pe===null?Pe=Ev(O):(V=Pe.cachePool,V!==null?(et=vo._currentValue,V=V.parent!==et?{parent:et,pool:et}:V):V=nx(),Pe={baseLanes:Pe.baseLanes|O,cachePool:V}),M.memoizedState=Pe,M.childLanes=ux(p,de,O),y.memoizedState=cx,Th(p.child,M)):(ml(y),O=p.child,p=O.sibling,O=Na(O,{mode:"visible",children:M.children}),O.return=y,O.sibling=null,p!==null&&(de=y.deletions,de===null?(y.deletions=[p],y.flags|=16):de.push(p)),y.child=O,y.memoizedState=null,O)}function eS(p,y){return y=hx({mode:"visible",children:y},p.mode),y.return=p,p.child=y}function hx(p,y){return p=za(22,p,null,y),p.lanes=0,p}function dx(p,y,O){return Rc(y,p.child,null,O),p=eS(y,y.pendingProps.children),p.flags|=2,y.memoizedState=null,p}function tS(p,y,O){p.lanes|=y;var M=p.alternate;M!==null&&(M.lanes|=y),Ey(p.return,y,O)}function nS(p,y,O,M,V,G){var de=p.memoizedState;de===null?p.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:M,tail:O,tailMode:V,treeForkCount:G}:(de.isBackwards=y,de.rendering=null,de.renderingStartTime=0,de.last=M,de.tail=O,de.tailMode=V,de.treeForkCount=G)}function fx(p,y,O){var M=y.pendingProps,V=M.revealOrder,G=M.tail;M=M.children;var de=oo.current,Pe=(de&2)!==0;if(Pe?(de=de&1|2,y.flags|=128):de&=1,Ee(oo,de),Os(p,y,M,O),M=kr?bh:0,!Pe&&p!==null&&(p.flags&128)!==0)e:for(p=y.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&tS(p,O,y);else if(p.tag===19)tS(p,O,y);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===y)break e;for(;p.sibling===null;){if(p.return===null||p.return===y)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}switch(V){case"forwards":for(O=y.child,V=null;O!==null;)p=O.alternate,p!==null&&Xm(p)===null&&(V=O),O=O.sibling;O=V,O===null?(V=y.child,y.child=null):(V=O.sibling,O.sibling=null),nS(y,!1,V,O,G,M);break;case"backwards":case"unstable_legacy-backwards":for(O=null,V=y.child,y.child=null;V!==null;){if(p=V.alternate,p!==null&&Xm(p)===null){y.child=V;break}p=V.sibling,V.sibling=O,O=V,V=p}nS(y,!0,O,null,G,M);break;case"together":nS(y,!1,null,null,void 0,M);break;default:y.memoizedState=null}return y.child}function kh(p,y,O){if(p!==null&&(y.dependencies=p.dependencies),jd|=y.lanes,(O&y.childLanes)===0)if(p!==null){if(Fa(p,y,O,!1),(O&y.childLanes)===0)return null}else return null;if(p!==null&&y.child!==p.child)throw Error(r(153));if(y.child!==null){for(p=y.child,O=Na(p,p.pendingProps),y.child=O,O.return=y;p.sibling!==null;)p=p.sibling,O=O.sibling=Na(p,p.pendingProps),O.return=y;O.sibling=null}return y.child}function Av(p,y){return(p.lanes&y)!==0?!0:(p=p.dependencies,!!(p!==null&&Yf(p)))}function Pv(p,y,O){switch(y.tag){case 3:bt(y,y.stateNode.containerInfo),pu(y,vo,p.memoizedState.cache),Cc();break;case 27:case 5:Tt(y);break;case 4:bt(y,y.stateNode.containerInfo);break;case 10:pu(y,y.type,y.memoizedProps.value);break;case 31:if(y.memoizedState!==null)return y.flags|=128,tp(y),null;break;case 13:var M=y.memoizedState;if(M!==null)return M.dehydrated!==null?(ml(y),y.flags|=128,null):(O&y.child.childLanes)!==0?JO(p,y,O):(ml(y),p=kh(p,y,O),p!==null?p.sibling:null);ml(y);break;case 19:var V=(p.flags&128)!==0;if(M=(O&y.childLanes)!==0,M||(Fa(p,y,O,!1),M=(O&y.childLanes)!==0),V){if(M)return fx(p,y,O);y.flags|=128}if(V=y.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),Ee(oo,oo.current),M)break;return null;case 22:return y.lanes=0,YO(p,y,O,y.pendingProps);case 24:pu(y,vo,p.memoizedState.cache)}return kh(p,y,O)}function xa(p,y,O){if(p!==null)if(p.memoizedProps!==y.pendingProps)ls=!0;else{if(!Av(p,O)&&(y.flags&128)===0)return ls=!1,Pv(p,y,O);ls=(p.flags&131072)!==0}else ls=!1,kr&&(y.flags&1048576)!==0&&_v(y,bh,y.index);switch(y.lanes=0,y.tag){case 16:e:{var M=y.pendingProps;if(p=fl(y.elementType),y.type=p,typeof p=="function")Cy(p)?(M=Ch(p,M),y.tag=1,y=Nk(null,y,p,M,O)):(y.tag=0,y=KO(null,y,p,M,O));else{if(p!=null){var V=p.$$typeof;if(V===F){y.tag=11,y=Lk(null,y,p,M,O);break e}else if(V===H){y.tag=14,y=sx(null,y,p,M,O);break e}}throw y=Te(p)||p,Error(r(306,y,""))}}return y;case 0:return KO(p,y,y.type,y.pendingProps,O);case 1:return M=y.type,V=Ch(M,y.pendingProps),Nk(p,y,M,V,O);case 3:e:{if(bt(y,y.stateNode.containerInfo),p===null)throw Error(r(387));M=y.pendingProps;var G=y.memoizedState;V=G.element,qm(p,y),wh(y,M,null,O);var de=y.memoizedState;if(M=de.cache,pu(y,vo,M),M!==G.cache&&Ay(y,[vo],O,!0),yu(),M=de.element,G.isDehydrated)if(G={element:M,isDehydrated:!1,cache:de.cache},y.updateQueue.baseState=G,y.memoizedState=G,y.flags&256){y=Bk(p,y,M,O);break e}else if(M!==V){V=la(Error(r(424)),y),du(V),y=Bk(p,y,M,O);break e}else for(p=y.stateNode.containerInfo,p.nodeType===9?p=p.body:p=p.nodeName==="HTML"?p.ownerDocument.body:p,ui=ec(p.firstChild),os=y,kr=!0,hu=null,Ba=!0,O=Ov(y,null,M,O),y.child=O;O;)O.flags=O.flags&-3|4096,O=O.sibling;else{if(Cc(),M===V){y=kh(p,y,O);break e}Os(p,y,M,O)}y=y.child}return y;case 26:return lx(p,y),p===null?(O=$S(y.type,null,y.pendingProps,null))?y.memoizedState=O:kr||(O=y.type,p=y.pendingProps,M=Yv(ct.current).createElement(O),M[yi]=y,M[tn]=p,Cs(M,O,p),no(M),y.stateNode=M):y.memoizedState=$S(y.type,p.memoizedProps,y.pendingProps,p.memoizedState),null;case 27:return Tt(y),p===null&&kr&&(M=y.stateNode=_E(y.type,y.pendingProps,ct.current),os=y,Ba=!0,V=ui,pp(y.type)?(Wa=V,ui=ec(M.firstChild)):ui=V),Os(p,y,y.pendingProps.children,O),lx(p,y),p===null&&(y.flags|=4194304),y.child;case 5:return p===null&&kr&&((V=M=ui)&&(M=Ns(M,y.type,y.pendingProps,Ba),M!==null?(y.stateNode=M,os=y,ui=ec(M.firstChild),Ba=!1,V=!0):V=!1),V||ga(y)),Tt(y),V=y.type,G=y.pendingProps,de=p!==null?p.memoizedProps:null,M=G.children,Fx(V,G)?M=null:de!==null&&Fx(V,de)&&(y.flags|=32),y.memoizedState!==null&&(V=np(p,y,Km,null,null,O),o0._currentValue=V),lx(p,y),Os(p,y,M,O),y.child;case 6:return p===null&&kr&&((p=O=ui)&&(O=ku(O,y.pendingProps,Ba),O!==null?(y.stateNode=O,os=y,ui=null,p=!0):p=!1),p||ga(y)),null;case 13:return JO(p,y,O);case 4:return bt(y,y.stateNode.containerInfo),M=y.pendingProps,p===null?y.child=Rc(y,null,M,O):Os(p,y,M,O),y.child;case 11:return Lk(p,y,y.type,y.pendingProps,O);case 7:return Os(p,y,y.pendingProps,O),y.child;case 8:return Os(p,y,y.pendingProps.children,O),y.child;case 12:return Os(p,y,y.pendingProps.children,O),y.child;case 10:return M=y.pendingProps,pu(y,y.type,M.value),Os(p,y,M.children,O),y.child;case 9:return V=y.type._context,M=y.pendingProps.children,mu(y),V=Po(V),M=M(V),y.flags|=1,Os(p,y,M,O),y.child;case 14:return sx(p,y,y.type,y.pendingProps,O);case 15:return XO(p,y,y.type,y.pendingProps,O);case 19:return fx(p,y,O);case 31:return ax(p,y,O);case 22:return YO(p,y,O,y.pendingProps);case 24:return mu(y),M=Po(vo),p===null?(V=My(),V===null&&(V=Bi,G=Ac(),V.pooledCache=G,G.refCount++,G!==null&&(V.pooledCacheLanes|=O),V=G),y.memoizedState={parent:M,cache:V},$y(y),pu(y,vo,V)):((p.lanes&O)!==0&&(qm(p,y),wh(y,null,null,O),yu()),V=p.memoizedState,G=y.memoizedState,V.parent!==M?(V={parent:M,cache:M},y.memoizedState=V,y.lanes===0&&(y.memoizedState=y.updateQueue.baseState=V),pu(y,vo,M)):(M=G.cache,pu(y,vo,M),M!==V.cache&&Ay(y,[vo],O,!0))),Os(p,y,y.pendingProps.children,O),y.child;case 29:throw y.pendingProps}throw Error(r(156,y.tag))}function Eh(p){p.flags|=4}function Mv(p,y,O,M,V){if((y=(p.mode&32)!==0)&&(y=!1),y){if(p.flags|=16777216,(V&335544128)===V)if(p.stateNode.complete)p.flags|=8192;else if(pS())p.flags|=8192;else throw Zl=pn,xh}else p.flags&=-16777217}function Fk(p,y){if(y.type!=="stylesheet"||(y.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!t_(y))if(pS())p.flags|=8192;else throw Zl=pn,xh}function Rv(p,y){y!==null&&(p.flags|=4),p.flags&16384&&(y=p.tag!==22?Cn():536870912,p.lanes|=y,ag|=y)}function Iv(p,y){if(!kr)switch(p.tailMode){case"hidden":y=p.tail;for(var O=null;y!==null;)y.alternate!==null&&(O=y),y=y.sibling;O===null?p.tail=null:O.sibling=null;break;case"collapsed":O=p.tail;for(var M=null;O!==null;)O.alternate!==null&&(M=O),O=O.sibling;M===null?y||p.tail===null?p.tail=null:p.tail.sibling=null:M.sibling=null}}function lo(p){var y=p.alternate!==null&&p.alternate.child===p.child,O=0,M=0;if(y)for(var V=p.child;V!==null;)O|=V.lanes|V.childLanes,M|=V.subtreeFlags&65011712,M|=V.flags&65011712,V.return=p,V=V.sibling;else for(V=p.child;V!==null;)O|=V.lanes|V.childLanes,M|=V.subtreeFlags,M|=V.flags,V.return=p,V=V.sibling;return p.subtreeFlags|=M,p.childLanes=O,y}function jk(p,y,O){var M=y.pendingProps;switch(Xf(y),y.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lo(y),null;case 1:return lo(y),null;case 3:return O=y.stateNode,M=null,p!==null&&(M=p.memoizedState.cache),y.memoizedState.cache!==M&&(y.flags|=2048),Ec(vo),At(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(p===null||p.child===null)&&(Sc(y)?Eh(y):p===null||p.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Tc())),lo(y),null;case 26:var V=y.type,G=y.memoizedState;return p===null?(Eh(y),G!==null?(lo(y),Fk(y,G)):(lo(y),Mv(y,V,null,M,O))):G?G!==p.memoizedState?(Eh(y),lo(y),Fk(y,G)):(lo(y),y.flags&=-16777217):(p=p.memoizedProps,p!==M&&Eh(y),lo(y),Mv(y,V,p,M,O)),null;case 27:if(Wt(y),O=ct.current,V=y.type,p!==null&&y.stateNode!=null)p.memoizedProps!==M&&Eh(y);else{if(!M){if(y.stateNode===null)throw Error(r(166));return lo(y),null}p=ft.current,Sc(y)?ya(y):(p=_E(V,M,O),y.stateNode=p,Eh(y))}return lo(y),null;case 5:if(Wt(y),V=y.type,p!==null&&y.stateNode!=null)p.memoizedProps!==M&&Eh(y);else{if(!M){if(y.stateNode===null)throw Error(r(166));return lo(y),null}if(G=ft.current,Sc(y))ya(y);else{var de=Yv(ct.current);switch(G){case 1:G=de.createElementNS("http://www.w3.org/2000/svg",V);break;case 2:G=de.createElementNS("http://www.w3.org/1998/Math/MathML",V);break;default:switch(V){case"svg":G=de.createElementNS("http://www.w3.org/2000/svg",V);break;case"math":G=de.createElementNS("http://www.w3.org/1998/Math/MathML",V);break;case"script":G=de.createElement("div"),G.innerHTML="<script><\/script>",G=G.removeChild(G.firstChild);break;case"select":G=typeof M.is=="string"?de.createElement("select",{is:M.is}):de.createElement("select"),M.multiple?G.multiple=!0:M.size&&(G.size=M.size);break;default:G=typeof M.is=="string"?de.createElement(V,{is:M.is}):de.createElement(V)}}G[yi]=y,G[tn]=M;e:for(de=y.child;de!==null;){if(de.tag===5||de.tag===6)G.appendChild(de.stateNode);else if(de.tag!==4&&de.tag!==27&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===y)break e;for(;de.sibling===null;){if(de.return===null||de.return===y)break e;de=de.return}de.sibling.return=de.return,de=de.sibling}y.stateNode=G;e:switch(Cs(G,V,M),V){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}M&&Eh(y)}}return lo(y),Mv(y,y.type,p===null?null:p.memoizedProps,y.pendingProps,O),null;case 6:if(p&&y.stateNode!=null)p.memoizedProps!==M&&Eh(y);else{if(typeof M!="string"&&y.stateNode===null)throw Error(r(166));if(p=ct.current,Sc(y)){if(p=y.stateNode,O=y.memoizedProps,M=null,V=os,V!==null)switch(V.tag){case 27:case 5:M=V.memoizedProps}p[yi]=y,p=!!(p.nodeValue===O||M!==null&&M.suppressHydrationWarning===!0||TS(p.nodeValue,O)),p||ga(y,!0)}else p=Yv(p).createTextNode(M),p[yi]=y,y.stateNode=p}return lo(y),null;case 31:if(O=y.memoizedState,p===null||p.memoizedState!==null){if(M=Sc(y),O!==null){if(p===null){if(!M)throw Error(r(318));if(p=y.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(557));p[yi]=y}else Cc(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;lo(y),p=!1}else O=Tc(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=O),p=!0;if(!p)return y.flags&256?(Zi(y),y):(Zi(y),null);if((y.flags&128)!==0)throw Error(r(558))}return lo(y),null;case 13:if(M=y.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(V=Sc(y),M!==null&&M.dehydrated!==null){if(p===null){if(!V)throw Error(r(318));if(V=y.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(r(317));V[yi]=y}else Cc(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;lo(y),V=!1}else V=Tc(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=V),V=!0;if(!V)return y.flags&256?(Zi(y),y):(Zi(y),null)}return Zi(y),(y.flags&128)!==0?(y.lanes=O,y):(O=M!==null,p=p!==null&&p.memoizedState!==null,O&&(M=y.child,V=null,M.alternate!==null&&M.alternate.memoizedState!==null&&M.alternate.memoizedState.cachePool!==null&&(V=M.alternate.memoizedState.cachePool.pool),G=null,M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(G=M.memoizedState.cachePool.pool),G!==V&&(M.flags|=2048)),O!==p&&O&&(y.child.flags|=8192),Rv(y,y.updateQueue),lo(y),null);case 4:return At(),p===null&&SS(y.stateNode.containerInfo),lo(y),null;case 10:return Ec(y.type),lo(y),null;case 19:if(Xe(oo),M=y.memoizedState,M===null)return lo(y),null;if(V=(y.flags&128)!==0,G=M.rendering,G===null)if(V)Iv(M,!1);else{if(Ro!==0||p!==null&&(p.flags&128)!==0)for(p=y.child;p!==null;){if(G=Xm(p),G!==null){for(y.flags|=128,Iv(M,!1),p=G.updateQueue,y.updateQueue=p,Rv(y,p),y.subtreeFlags=0,p=O,O=y.child;O!==null;)ex(O,p),O=O.sibling;return Ee(oo,oo.current&1|2),kr&&uu(y,M.treeForkCount),y.child}p=p.sibling}M.tail!==null&&Et()>Vv&&(y.flags|=128,V=!0,Iv(M,!1),y.lanes=4194304)}else{if(!V)if(p=Xm(G),p!==null){if(y.flags|=128,V=!0,p=p.updateQueue,y.updateQueue=p,Rv(y,p),Iv(M,!0),M.tail===null&&M.tailMode==="hidden"&&!G.alternate&&!kr)return lo(y),null}else 2*Et()-M.renderingStartTime>Vv&&O!==536870912&&(y.flags|=128,V=!0,Iv(M,!1),y.lanes=4194304);M.isBackwards?(G.sibling=y.child,y.child=G):(p=M.last,p!==null?p.sibling=G:y.child=G,M.last=G)}return M.tail!==null?(p=M.tail,M.rendering=p,M.tail=p.sibling,M.renderingStartTime=Et(),p.sibling=null,O=oo.current,Ee(oo,V?O&1|2:O&1),kr&&uu(y,M.treeForkCount),p):(lo(y),null);case 22:case 23:return Zi(y),Ad(),M=y.memoizedState!==null,p!==null?p.memoizedState!==null!==M&&(y.flags|=8192):M&&(y.flags|=8192),M?(O&536870912)!==0&&(y.flags&128)===0&&(lo(y),y.subtreeFlags&6&&(y.flags|=8192)):lo(y),O=y.updateQueue,O!==null&&Rv(y,O.retryQueue),O=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(O=p.memoizedState.cachePool.pool),M=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(M=y.memoizedState.cachePool.pool),M!==O&&(y.flags|=2048),p!==null&&Xe(Ql),null;case 24:return O=null,p!==null&&(O=p.memoizedState.cache),y.memoizedState.cache!==O&&(y.flags|=2048),Ec(vo),lo(y),null;case 25:return null;case 30:return null}throw Error(r(156,y.tag))}function II(p,y){switch(Xf(y),y.tag){case 1:return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 3:return Ec(vo),At(),p=y.flags,(p&65536)!==0&&(p&128)===0?(y.flags=p&-65537|128,y):null;case 26:case 27:case 5:return Wt(y),null;case 31:if(y.memoizedState!==null){if(Zi(y),y.alternate===null)throw Error(r(340));Cc()}return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 13:if(Zi(y),p=y.memoizedState,p!==null&&p.dehydrated!==null){if(y.alternate===null)throw Error(r(340));Cc()}return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 19:return Xe(oo),null;case 4:return At(),null;case 10:return Ec(y.type),null;case 22:case 23:return Zi(y),Ad(),p!==null&&Xe(Ql),p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 24:return Ec(vo),null;case 25:return null;default:return null}}function px(p,y){switch(Xf(y),y.tag){case 3:Ec(vo),At();break;case 26:case 27:case 5:Wt(y);break;case 4:At();break;case 31:y.memoizedState!==null&&Zi(y);break;case 13:Zi(y);break;case 19:Xe(oo);break;case 10:Ec(y.type);break;case 22:case 23:Zi(y),Ad(),p!==null&&Xe(Ql);break;case 24:Ec(vo)}}function Vy(p,y){try{var O=y.updateQueue,M=O!==null?O.lastEffect:null;if(M!==null){var V=M.next;O=V;do{if((O.tag&p)===p){M=void 0;var G=O.create,de=O.inst;M=G(),de.destroy=M}O=O.next}while(O!==V)}}catch(Pe){pi(y,y.return,Pe)}}function $d(p,y,O){try{var M=y.updateQueue,V=M!==null?M.lastEffect:null;if(V!==null){var G=V.next;M=G;do{if((M.tag&p)===p){var de=M.inst,Pe=de.destroy;if(Pe!==void 0){de.destroy=void 0,V=y;var et=O,wt=Pe;try{wt()}catch(Lt){pi(V,et,Lt)}}}M=M.next}while(M!==G)}}catch(Lt){pi(y,y.return,Lt)}}function Vk(p){var y=p.updateQueue;if(y!==null){var O=p.stateNode;try{zy(y,O)}catch(M){pi(p,p.return,M)}}}function Qk(p,y,O){O.props=Ch(p.type,p.memoizedProps),O.state=p.memoizedState;try{O.componentWillUnmount()}catch(M){pi(p,y,M)}}function Dv(p,y){try{var O=p.ref;if(O!==null){switch(p.tag){case 26:case 27:case 5:var M=p.stateNode;break;case 30:M=p.stateNode;break;default:M=p.stateNode}typeof O=="function"?p.refCleanup=O(M):O.current=M}}catch(V){pi(p,y,V)}}function Kl(p,y){var O=p.ref,M=p.refCleanup;if(O!==null)if(typeof M=="function")try{M()}catch(V){pi(p,y,V)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof O=="function")try{O(null)}catch(V){pi(p,y,V)}else O.current=null}function mx(p){var y=p.type,O=p.memoizedProps,M=p.stateNode;try{e:switch(y){case"button":case"input":case"select":case"textarea":O.autoFocus&&M.focus();break e;case"img":O.src?M.src=O.src:O.srcSet&&(M.srcset=O.srcSet)}}catch(V){pi(p,p.return,V)}}function gx(p,y,O){try{var M=p.stateNode;yE(M,p.type,O,y),M[tn]=y}catch(V){pi(p,p.return,V)}}function sp(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27&&pp(p.type)||p.tag===4}function rg(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||sp(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.tag===27&&pp(p.type)||p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function rS(p,y,O){var M=p.tag;if(M===5||M===6)p=p.stateNode,y?(O.nodeType===9?O.body:O.nodeName==="HTML"?O.ownerDocument.body:O).insertBefore(p,y):(y=O.nodeType===9?O.body:O.nodeName==="HTML"?O.ownerDocument.body:O,y.appendChild(p),O=O._reactRootContainer,O!=null||y.onclick!==null||(y.onclick=jl));else if(M!==4&&(M===27&&pp(p.type)&&(O=p.stateNode,y=null),p=p.child,p!==null))for(rS(p,y,O),p=p.sibling;p!==null;)rS(p,y,O),p=p.sibling}function yx(p,y,O){var M=p.tag;if(M===5||M===6)p=p.stateNode,y?O.insertBefore(p,y):O.appendChild(p);else if(M!==4&&(M===27&&pp(p.type)&&(O=p.stateNode),p=p.child,p!==null))for(yx(p,y,O),p=p.sibling;p!==null;)yx(p,y,O),p=p.sibling}function Uk(p){var y=p.stateNode,O=p.memoizedProps;try{for(var M=p.type,V=y.attributes;V.length;)y.removeAttributeNode(V[0]);Cs(y,M,O),y[yi]=p,y[tn]=O}catch(G){pi(p,p.return,G)}}var zd=!1,cs=!1,iS=!1,Zk=typeof WeakSet=="function"?WeakSet:Set,us=null;function DI(p,y){if(p=p.containerInfo,Xv=s_,p=_y(p),Im(p)){if("selectionStart"in p)var O={start:p.selectionStart,end:p.selectionEnd};else e:{O=(O=p.ownerDocument)&&O.defaultView||window;var M=O.getSelection&&O.getSelection();if(M&&M.rangeCount!==0){O=M.anchorNode;var V=M.anchorOffset,G=M.focusNode;M=M.focusOffset;try{O.nodeType,G.nodeType}catch{O=null;break e}var de=0,Pe=-1,et=-1,wt=0,Lt=0,qt=p,St=null;t:for(;;){for(var Pt;qt!==O||V!==0&&qt.nodeType!==3||(Pe=de+V),qt!==G||M!==0&&qt.nodeType!==3||(et=de+M),qt.nodeType===3&&(de+=qt.nodeValue.length),(Pt=qt.firstChild)!==null;)St=qt,qt=Pt;for(;;){if(qt===p)break t;if(St===O&&++wt===V&&(Pe=de),St===G&&++Lt===M&&(et=de),(Pt=qt.nextSibling)!==null)break;qt=St,St=qt.parentNode}qt=Pt}O=Pe===-1||et===-1?null:{start:Pe,end:et}}else O=null}O=O||{start:0,end:0}}else O=null;for(kS={focusedElem:p,selectionRange:O},s_=!1,us=y;us!==null;)if(y=us,p=y.child,(y.subtreeFlags&1028)!==0&&p!==null)p.return=y,us=p;else for(;us!==null;){switch(y=us,G=y.alternate,p=y.flags,y.tag){case 0:if((p&4)!==0&&(p=y.updateQueue,p=p!==null?p.events:null,p!==null))for(O=0;O<p.length;O++)V=p[O],V.ref.impl=V.nextImpl;break;case 11:case 15:break;case 1:if((p&1024)!==0&&G!==null){p=void 0,O=y,V=G.memoizedProps,G=G.memoizedState,M=O.stateNode;try{var In=Ch(O.type,V);p=M.getSnapshotBeforeUpdate(In,G),M.__reactInternalSnapshotBeforeUpdate=p}catch(qn){pi(O,O.return,qn)}}break;case 3:if((p&1024)!==0){if(p=y.stateNode.containerInfo,O=p.nodeType,O===9)Tu(p);else if(O===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":Tu(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=y.sibling,p!==null){p.return=y.return,us=p;break}us=y.return}}function oS(p,y,O){var M=O.flags;switch(O.tag){case 0:case 11:case 15:bl(p,O),M&4&&Vy(5,O);break;case 1:if(bl(p,O),M&4)if(p=O.stateNode,y===null)try{p.componentDidMount()}catch(de){pi(O,O.return,de)}else{var V=Ch(O.type,y.memoizedProps);y=y.memoizedState;try{p.componentDidUpdate(V,y,p.__reactInternalSnapshotBeforeUpdate)}catch(de){pi(O,O.return,de)}}M&64&&Vk(O),M&512&&Dv(O,O.return);break;case 3:if(bl(p,O),M&64&&(p=O.updateQueue,p!==null)){if(y=null,O.child!==null)switch(O.child.tag){case 27:case 5:y=O.child.stateNode;break;case 1:y=O.child.stateNode}try{zy(p,y)}catch(de){pi(O,O.return,de)}}break;case 27:y===null&&M&4&&Uk(O);case 26:case 5:bl(p,O),y===null&&M&4&&mx(O),M&512&&Dv(O,O.return);break;case 12:bl(p,O);break;case 31:bl(p,O),M&4&&Lv(p,O);break;case 13:bl(p,O),M&4&&$v(p,O),M&64&&(p=O.memoizedState,p!==null&&(p=p.dehydrated,p!==null&&(O=gS.bind(null,O),ds(p,O))));break;case 22:if(M=O.memoizedState!==null||zd,!M){y=y!==null&&y.memoizedState!==null||cs,V=zd;var G=cs;zd=M,(cs=y)&&!G?Nd(p,O,(O.subtreeFlags&8772)!==0):bl(p,O),zd=V,cs=G}break;case 30:break;default:bl(p,O)}}function Qy(p){var y=p.alternate;y!==null&&(p.alternate=null,Qy(y)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(y=p.stateNode,y!==null&&cd(y)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var bo=null,Fr=!1;function _l(p,y,O){for(O=O.child;O!==null;)sS(p,y,O),O=O.sibling}function sS(p,y,O){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(tt,O)}catch{}switch(O.tag){case 26:cs||Kl(O,y),_l(p,y,O),O.memoizedState?O.memoizedState.count--:O.stateNode&&(O=O.stateNode,O.parentNode.removeChild(O));break;case 27:cs||Kl(O,y);var M=bo,V=Fr;pp(O.type)&&(bo=O.stateNode,Fr=!1),_l(p,y,O),n0(O.stateNode),bo=M,Fr=V;break;case 5:cs||Kl(O,y);case 6:if(M=bo,V=Fr,bo=null,_l(p,y,O),bo=M,Fr=V,bo!==null)if(Fr)try{(bo.nodeType===9?bo.body:bo.nodeName==="HTML"?bo.ownerDocument.body:bo).removeChild(O.stateNode)}catch(G){pi(O,y,G)}else try{bo.removeChild(O.stateNode)}catch(G){pi(O,y,G)}break;case 18:bo!==null&&(Fr?(p=bo,vE(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,O.stateNode),bp(p)):vE(bo,O.stateNode));break;case 4:M=bo,V=Fr,bo=O.stateNode.containerInfo,Fr=!0,_l(p,y,O),bo=M,Fr=V;break;case 0:case 11:case 14:case 15:$d(2,O,y),cs||$d(4,O,y),_l(p,y,O);break;case 1:cs||(Kl(O,y),M=O.stateNode,typeof M.componentWillUnmount=="function"&&Qk(O,y,M)),_l(p,y,O);break;case 21:_l(p,y,O);break;case 22:cs=(M=cs)||O.memoizedState!==null,_l(p,y,O),cs=M;break;default:_l(p,y,O)}}function Lv(p,y){if(y.memoizedState===null&&(p=y.alternate,p!==null&&(p=p.memoizedState,p!==null))){p=p.dehydrated;try{bp(p)}catch(O){pi(y,y.return,O)}}}function $v(p,y){if(y.memoizedState===null&&(p=y.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{bp(p)}catch(O){pi(y,y.return,O)}}function zv(p){switch(p.tag){case 31:case 13:case 19:var y=p.stateNode;return y===null&&(y=p.stateNode=new Zk),y;case 22:return p=p.stateNode,y=p._retryCache,y===null&&(y=p._retryCache=new Zk),y;default:throw Error(r(435,p.tag))}}function Nv(p,y){var O=zv(p);y.forEach(function(M){if(!O.has(M)){O.add(M);var V=zI.bind(null,p,M);M.then(V,V)}})}function Ua(p,y){var O=y.deletions;if(O!==null)for(var M=0;M<O.length;M++){var V=O[M],G=p,de=y,Pe=de;e:for(;Pe!==null;){switch(Pe.tag){case 27:if(pp(Pe.type)){bo=Pe.stateNode,Fr=!1;break e}break;case 5:bo=Pe.stateNode,Fr=!1;break e;case 3:case 4:bo=Pe.stateNode.containerInfo,Fr=!0;break e}Pe=Pe.return}if(bo===null)throw Error(r(160));sS(G,de,V),bo=null,Fr=!1,G=V.alternate,G!==null&&(G.return=null),V.return=null}if(y.subtreeFlags&13886)for(y=y.child;y!==null;)vx(y,p),y=y.sibling}var Za=null;function vx(p,y){var O=p.alternate,M=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:Ua(y,p),Ss(p),M&4&&($d(3,p,p.return),Vy(3,p),$d(5,p,p.return));break;case 1:Ua(y,p),Ss(p),M&512&&(cs||O===null||Kl(O,O.return)),M&64&&zd&&(p=p.updateQueue,p!==null&&(M=p.callbacks,M!==null&&(O=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=O===null?M:O.concat(M))));break;case 26:var V=Za;if(Ua(y,p),Ss(p),M&512&&(cs||O===null||Kl(O,O.return)),M&4){var G=O!==null?O.memoizedState:null;if(M=p.memoizedState,O===null)if(M===null)if(p.stateNode===null){e:{M=p.type,O=p.memoizedProps,V=V.ownerDocument||V;t:switch(M){case"title":G=V.getElementsByTagName("title")[0],(!G||G[nr]||G[yi]||G.namespaceURI==="http://www.w3.org/2000/svg"||G.hasAttribute("itemprop"))&&(G=V.createElement(M),V.head.insertBefore(G,V.querySelector("head > title"))),Cs(G,M,O),G[yi]=p,no(G),M=G;break e;case"link":var de=FS("link","href",V).get(M+(O.href||""));if(de){for(var Pe=0;Pe<de.length;Pe++)if(G=de[Pe],G.getAttribute("href")===(O.href==null||O.href===""?null:O.href)&&G.getAttribute("rel")===(O.rel==null?null:O.rel)&&G.getAttribute("title")===(O.title==null?null:O.title)&&G.getAttribute("crossorigin")===(O.crossOrigin==null?null:O.crossOrigin)){de.splice(Pe,1);break t}}G=V.createElement(M),Cs(G,M,O),V.head.appendChild(G);break;case"meta":if(de=FS("meta","content",V).get(M+(O.content||""))){for(Pe=0;Pe<de.length;Pe++)if(G=de[Pe],G.getAttribute("content")===(O.content==null?null:""+O.content)&&G.getAttribute("name")===(O.name==null?null:O.name)&&G.getAttribute("property")===(O.property==null?null:O.property)&&G.getAttribute("http-equiv")===(O.httpEquiv==null?null:O.httpEquiv)&&G.getAttribute("charset")===(O.charSet==null?null:O.charSet)){de.splice(Pe,1);break t}}G=V.createElement(M),Cs(G,M,O),V.head.appendChild(G);break;default:throw Error(r(468,M))}G[yi]=p,no(G),M=G}p.stateNode=M}else e_(V,p.type,p.stateNode);else p.stateNode=BS(V,M,p.memoizedProps);else G!==M?(G===null?O.stateNode!==null&&(O=O.stateNode,O.parentNode.removeChild(O)):G.count--,M===null?e_(V,p.type,p.stateNode):BS(V,M,p.memoizedProps)):M===null&&p.stateNode!==null&&gx(p,p.memoizedProps,O.memoizedProps)}break;case 27:Ua(y,p),Ss(p),M&512&&(cs||O===null||Kl(O,O.return)),O!==null&&M&4&&gx(p,p.memoizedProps,O.memoizedProps);break;case 5:if(Ua(y,p),Ss(p),M&512&&(cs||O===null||Kl(O,O.return)),p.flags&32){V=p.stateNode;try{lu(V,"")}catch(In){pi(p,p.return,In)}}M&4&&p.stateNode!=null&&(V=p.memoizedProps,gx(p,V,O!==null?O.memoizedProps:V)),M&1024&&(iS=!0);break;case 6:if(Ua(y,p),Ss(p),M&4){if(p.stateNode===null)throw Error(r(162));M=p.memoizedProps,O=p.stateNode;try{O.nodeValue=M}catch(In){pi(p,p.return,In)}}break;case 3:if(qx=null,V=Za,Za=Qx(y.containerInfo),Ua(y,p),Za=V,Ss(p),M&4&&O!==null&&O.memoizedState.isDehydrated)try{bp(y.containerInfo)}catch(In){pi(p,p.return,In)}iS&&(iS=!1,Bv(p));break;case 4:M=Za,Za=Qx(p.stateNode.containerInfo),Ua(y,p),Ss(p),Za=M;break;case 12:Ua(y,p),Ss(p);break;case 31:Ua(y,p),Ss(p),M&4&&(M=p.updateQueue,M!==null&&(p.updateQueue=null,Nv(p,M)));break;case 13:Ua(y,p),Ss(p),p.child.flags&8192&&p.memoizedState!==null!=(O!==null&&O.memoizedState!==null)&&(xx=Et()),M&4&&(M=p.updateQueue,M!==null&&(p.updateQueue=null,Nv(p,M)));break;case 22:V=p.memoizedState!==null;var et=O!==null&&O.memoizedState!==null,wt=zd,Lt=cs;if(zd=wt||V,cs=Lt||et,Ua(y,p),cs=Lt,zd=wt,Ss(p),M&8192)e:for(y=p.stateNode,y._visibility=V?y._visibility&-2:y._visibility|1,V&&(O===null||et||zd||cs||Ou(p)),O=null,y=p;;){if(y.tag===5||y.tag===26){if(O===null){et=O=y;try{if(G=et.stateNode,V)de=G.style,typeof de.setProperty=="function"?de.setProperty("display","none","important"):de.display="none";else{Pe=et.stateNode;var qt=et.memoizedProps.style,St=qt!=null&&qt.hasOwnProperty("display")?qt.display:null;Pe.style.display=St==null||typeof St=="boolean"?"":(""+St).trim()}}catch(In){pi(et,et.return,In)}}}else if(y.tag===6){if(O===null){et=y;try{et.stateNode.nodeValue=V?"":et.memoizedProps}catch(In){pi(et,et.return,In)}}}else if(y.tag===18){if(O===null){et=y;try{var Pt=et.stateNode;V?_r(Pt,!0):_r(et.stateNode,!1)}catch(In){pi(et,et.return,In)}}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===p)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break e;for(;y.sibling===null;){if(y.return===null||y.return===p)break e;O===y&&(O=null),y=y.return}O===y&&(O=null),y.sibling.return=y.return,y=y.sibling}M&4&&(M=p.updateQueue,M!==null&&(O=M.retryQueue,O!==null&&(M.retryQueue=null,Nv(p,O))));break;case 19:Ua(y,p),Ss(p),M&4&&(M=p.updateQueue,M!==null&&(p.updateQueue=null,Nv(p,M)));break;case 30:break;case 21:break;default:Ua(y,p),Ss(p)}}function Ss(p){var y=p.flags;if(y&2){try{for(var O,M=p.return;M!==null;){if(sp(M)){O=M;break}M=M.return}if(O==null)throw Error(r(160));switch(O.tag){case 27:var V=O.stateNode,G=rg(p);yx(p,G,V);break;case 5:var de=O.stateNode;O.flags&32&&(lu(de,""),O.flags&=-33);var Pe=rg(p);yx(p,Pe,de);break;case 3:case 4:var et=O.stateNode.containerInfo,wt=rg(p);rS(p,wt,et);break;default:throw Error(r(161))}}catch(Lt){pi(p,p.return,Lt)}p.flags&=-3}y&4096&&(p.flags&=-4097)}function Bv(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var y=p;Bv(y),y.tag===5&&y.flags&1024&&y.stateNode.reset(),p=p.sibling}}function bl(p,y){if(y.subtreeFlags&8772)for(y=y.child;y!==null;)oS(p,y.alternate,y),y=y.sibling}function Ou(p){for(p=p.child;p!==null;){var y=p;switch(y.tag){case 0:case 11:case 14:case 15:$d(4,y,y.return),Ou(y);break;case 1:Kl(y,y.return);var O=y.stateNode;typeof O.componentWillUnmount=="function"&&Qk(y,y.return,O),Ou(y);break;case 27:n0(y.stateNode);case 26:case 5:Kl(y,y.return),Ou(y);break;case 22:y.memoizedState===null&&Ou(y);break;case 30:Ou(y);break;default:Ou(y)}p=p.sibling}}function Nd(p,y,O){for(O=O&&(y.subtreeFlags&8772)!==0,y=y.child;y!==null;){var M=y.alternate,V=p,G=y,de=G.flags;switch(G.tag){case 0:case 11:case 15:Nd(V,G,O),Vy(4,G);break;case 1:if(Nd(V,G,O),M=G,V=M.stateNode,typeof V.componentDidMount=="function")try{V.componentDidMount()}catch(wt){pi(M,M.return,wt)}if(M=G,V=M.updateQueue,V!==null){var Pe=M.stateNode;try{var et=V.shared.hiddenCallbacks;if(et!==null)for(V.shared.hiddenCallbacks=null,V=0;V<et.length;V++)Wm(et[V],Pe)}catch(wt){pi(M,M.return,wt)}}O&&de&64&&Vk(G),Dv(G,G.return);break;case 27:Uk(G);case 26:case 5:Nd(V,G,O),O&&M===null&&de&4&&mx(G),Dv(G,G.return);break;case 12:Nd(V,G,O);break;case 31:Nd(V,G,O),O&&de&4&&Lv(V,G);break;case 13:Nd(V,G,O),O&&de&4&&$v(V,G);break;case 22:G.memoizedState===null&&Nd(V,G,O),Dv(G,G.return);break;case 30:break;default:Nd(V,G,O)}y=y.sibling}}function _x(p,y){var O=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(O=p.memoizedState.cachePool.pool),p=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(p=y.memoizedState.cachePool.pool),p!==O&&(p!=null&&p.refCount++,O!=null&&Kf(O))}function Bd(p,y){p=null,y.alternate!==null&&(p=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==p&&(y.refCount++,p!=null&&Kf(p))}function Su(p,y,O,M){if(y.subtreeFlags&10256)for(y=y.child;y!==null;)aS(p,y,O,M),y=y.sibling}function aS(p,y,O,M){var V=y.flags;switch(y.tag){case 0:case 11:case 15:Su(p,y,O,M),V&2048&&Vy(9,y);break;case 1:Su(p,y,O,M);break;case 3:Su(p,y,O,M),V&2048&&(p=null,y.alternate!==null&&(p=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==p&&(y.refCount++,p!=null&&Kf(p)));break;case 12:if(V&2048){Su(p,y,O,M),p=y.stateNode;try{var G=y.memoizedProps,de=G.id,Pe=G.onPostCommit;typeof Pe=="function"&&Pe(de,y.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(et){pi(y,y.return,et)}}else Su(p,y,O,M);break;case 31:Su(p,y,O,M);break;case 13:Su(p,y,O,M);break;case 23:break;case 22:G=y.stateNode,de=y.alternate,y.memoizedState!==null?G._visibility&2?Su(p,y,O,M):ig(p,y):G._visibility&2?Su(p,y,O,M):(G._visibility|=2,Ah(p,y,O,M,(y.subtreeFlags&10256)!==0||!1)),V&2048&&_x(de,y);break;case 24:Su(p,y,O,M),V&2048&&Bd(y.alternate,y);break;default:Su(p,y,O,M)}}function Ah(p,y,O,M,V){for(V=V&&((y.subtreeFlags&10256)!==0||!1),y=y.child;y!==null;){var G=p,de=y,Pe=O,et=M,wt=de.flags;switch(de.tag){case 0:case 11:case 15:Ah(G,de,Pe,et,V),Vy(8,de);break;case 23:break;case 22:var Lt=de.stateNode;de.memoizedState!==null?Lt._visibility&2?Ah(G,de,Pe,et,V):ig(G,de):(Lt._visibility|=2,Ah(G,de,Pe,et,V)),V&&wt&2048&&_x(de.alternate,de);break;case 24:Ah(G,de,Pe,et,V),V&&wt&2048&&Bd(de.alternate,de);break;default:Ah(G,de,Pe,et,V)}y=y.sibling}}function ig(p,y){if(y.subtreeFlags&10256)for(y=y.child;y!==null;){var O=p,M=y,V=M.flags;switch(M.tag){case 22:ig(O,M),V&2048&&_x(M.alternate,M);break;case 24:ig(O,M),V&2048&&Bd(M.alternate,M);break;default:ig(O,M)}y=y.sibling}}var Uy=8192;function og(p,y,O){if(p.subtreeFlags&Uy)for(p=p.child;p!==null;)qk(p,y,O),p=p.sibling}function qk(p,y,O){switch(p.tag){case 26:og(p,y,O),p.flags&Uy&&p.memoizedState!==null&&jS(O,Za,p.memoizedState,p.memoizedProps);break;case 5:og(p,y,O);break;case 3:case 4:var M=Za;Za=Qx(p.stateNode.containerInfo),og(p,y,O),Za=M;break;case 22:p.memoizedState===null&&(M=p.alternate,M!==null&&M.memoizedState!==null?(M=Uy,Uy=16777216,og(p,y,O),Uy=M):og(p,y,O));break;default:og(p,y,O)}}function Wk(p){var y=p.alternate;if(y!==null&&(p=y.child,p!==null)){y.child=null;do y=p.sibling,p.sibling=null,p=y;while(p!==null)}}function Fv(p){var y=p.deletions;if((p.flags&16)!==0){if(y!==null)for(var O=0;O<y.length;O++){var M=y[O];us=M,Zy(M,p)}Wk(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Hk(p),p=p.sibling}function Hk(p){switch(p.tag){case 0:case 11:case 15:Fv(p),p.flags&2048&&$d(9,p,p.return);break;case 3:Fv(p);break;case 12:Fv(p);break;case 22:var y=p.stateNode;p.memoizedState!==null&&y._visibility&2&&(p.return===null||p.return.tag!==13)?(y._visibility&=-3,bx(p)):Fv(p);break;default:Fv(p)}}function bx(p){var y=p.deletions;if((p.flags&16)!==0){if(y!==null)for(var O=0;O<y.length;O++){var M=y[O];us=M,Zy(M,p)}Wk(p)}for(p=p.child;p!==null;){switch(y=p,y.tag){case 0:case 11:case 15:$d(8,y,y.return),bx(y);break;case 22:O=y.stateNode,O._visibility&2&&(O._visibility&=-3,bx(y));break;default:bx(y)}p=p.sibling}}function Zy(p,y){for(;us!==null;){var O=us;switch(O.tag){case 0:case 11:case 15:$d(8,O,y);break;case 23:case 22:if(O.memoizedState!==null&&O.memoizedState.cachePool!==null){var M=O.memoizedState.cachePool.pool;M!=null&&M.refCount++}break;case 24:Kf(O.memoizedState.cache)}if(M=O.child,M!==null)M.return=O,us=M;else e:for(O=p;us!==null;){M=us;var V=M.sibling,G=M.return;if(Qy(M),M===O){us=null;break e}if(V!==null){V.return=G,us=V;break e}us=G}}}var LI={getCacheForType:function(p){var y=Po(vo),O=y.data.get(p);return O===void 0&&(O=p(),y.data.set(p,O)),O},cacheSignal:function(){return Po(vo).controller.signal}},Gk=typeof WeakMap=="function"?WeakMap:Map,fi=0,Bi=null,Dr=null,Lr=0,bi=0,qa=null,Nc=!1,ap=!1,lS=!1,Fd=0,Ro=0,jd=0,sg=0,cS=0,ca=0,ag=0,jv=null,xl=null,uS=!1,xx=0,Xk=0,Vv=1/0,qy=null,Vd=null,hs=0,Qd=null,Wy=null,Bc=0,hS=0,wx=null,Yk=null,Qv=0,dS=null;function wl(){return(fi&2)!==0&&Lr!==0?Lr&-Lr:_e.T!==null?xS():Is()}function Kk(){if(ca===0)if((Lr&536870912)===0||kr){var p=Er;Er<<=1,(Er&3932160)===0&&(Er=262144),ca=p}else ca=536870912;return p=yn.current,p!==null&&(p.flags|=32),ca}function Ol(p,y,O){(p===Bi&&(bi===2||bi===9)||p.cancelPendingCommit!==null)&&(Gy(p,0),lp(p,Lr,ca,!1)),ti(p,O),((fi&2)===0||p!==Bi)&&(p===Bi&&((fi&2)===0&&(sg|=O),Ro===4&&lp(p,Lr,ca,!1)),Cu(p))}function Ko(p,y,O){if((fi&6)!==0)throw Error(r(327));var M=!O&&(y&127)===0&&(y&p.expiredLanes)===0||eo(p,y),V=M?Xy(p,y):Cx(p,y,!0),G=M;do{if(V===0){ap&&!M&&lp(p,y,0,!1);break}else{if(O=p.current.alternate,G&&!$I(O)){V=Cx(p,y,!1),G=!1;continue}if(V===2){if(G=y,p.errorRecoveryDisabledLanes&G)var de=0;else de=p.pendingLanes&-536870913,de=de!==0?de:de&536870912?536870912:0;if(de!==0){y=de;e:{var Pe=p;V=jv;var et=Pe.current.memoizedState.isDehydrated;if(et&&(Gy(Pe,de).flags|=256),de=Cx(Pe,de,!1),de!==2){if(lS&&!et){Pe.errorRecoveryDisabledLanes|=G,sg|=G,V=4;break e}G=xl,xl=V,G!==null&&(xl===null?xl=G:xl.push.apply(xl,G))}V=de}if(G=!1,V!==2)continue}}if(V===1){Gy(p,0),lp(p,y,0,!0);break}e:{switch(M=p,G=V,G){case 0:case 1:throw Error(r(345));case 4:if((y&4194048)!==y)break;case 6:lp(M,y,ca,!Nc);break e;case 2:xl=null;break;case 3:case 5:break;default:throw Error(r(329))}if((y&62914560)===y&&(V=xx+300-Et(),10<V)){if(lp(M,y,ca,!Nc),Ur(M,0,!0)!==0)break e;Bc=y,M.timeoutHandle=Vx(Hy.bind(null,M,O,xl,qy,uS,y,ca,sg,ag,Nc,G,"Throttled",-0,0),V);break e}Hy(M,O,xl,qy,uS,y,ca,sg,ag,Nc,G,null,-0,0)}}break}while(!0);Cu(p)}function Hy(p,y,O,M,V,G,de,Pe,et,wt,Lt,qt,St,Pt){if(p.timeoutHandle=-1,qt=y.subtreeFlags,qt&8192||(qt&16785408)===16785408){qt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:jl},qk(y,G,qt);var In=(G&62914560)===G?xx-Et():(G&4194048)===G?Xk-Et():0;if(In=VS(qt,In),In!==null){Bc=G,p.cancelPendingCommit=In(rE.bind(null,p,y,G,O,M,V,de,Pe,et,Lt,qt,null,St,Pt)),lp(p,G,de,!wt);return}}rE(p,y,G,O,M,V,de,Pe,et)}function $I(p){for(var y=p;;){var O=y.tag;if((O===0||O===11||O===15)&&y.flags&16384&&(O=y.updateQueue,O!==null&&(O=O.stores,O!==null)))for(var M=0;M<O.length;M++){var V=O[M],G=V.getSnapshot;V=V.value;try{if(!pa(G(),V))return!1}catch{return!1}}if(O=y.child,y.subtreeFlags&16384&&O!==null)O.return=y,y=O;else{if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function lp(p,y,O,M){y&=~cS,y&=~sg,p.suspendedLanes|=y,p.pingedLanes&=~y,M&&(p.warmLanes|=y),M=p.expirationTimes;for(var V=y;0<V;){var G=31-Ot(V),de=1<<G;M[G]=-1,V&=~de}O!==0&&li(p,O,y)}function Uv(){return(fi&6)===0?(Jl(0),!1):!0}function Ox(){if(Dr!==null){if(bi===0)var p=Dr.return;else p=Dr,kc=dl=null,bu(p),Pc=null,kd=0,p=Dr;for(;p!==null;)px(p.alternate,p),p=p.return;Dr=null}}function Gy(p,y){var O=p.timeoutHandle;O!==-1&&(p.timeoutHandle=-1,AS(O)),O=p.cancelPendingCommit,O!==null&&(p.cancelPendingCommit=null,O()),Bc=0,Ox(),Bi=p,Dr=O=Na(p.current,null),Lr=y,bi=0,qa=null,Nc=!1,ap=eo(p,y),lS=!1,ag=ca=cS=sg=jd=Ro=0,xl=jv=null,uS=!1,(y&8)!==0&&(y|=y&32);var M=p.entangledLanes;if(M!==0)for(p=p.entanglements,M&=y;0<M;){var V=31-Ot(M),G=1<<V;y|=p[V],M&=~G}return Fd=y,Od(),O}function fS(p,y){yr=null,_e.H=Yr,y===Ul||y===va?(y=ep(),bi=3):y===xh?(y=ep(),bi=4):bi=y===ox?8:y!==null&&typeof y=="object"&&typeof y.then=="function"?6:1,qa=y,Dr===null&&(Ro=1,Yl(p,la(y,p.current)))}function pS(){var p=yn.current;return p===null?!0:(Lr&4194048)===Lr?Tn===null:(Lr&62914560)===Lr||(Lr&536870912)!==0?p===Tn:!1}function lg(){var p=_e.H;return _e.H=Yr,p===null?Yr:p}function Sx(){var p=_e.A;return _e.A=LI,p}function Zv(){Ro=4,Nc||(Lr&4194048)!==Lr&&yn.current!==null||(ap=!0),(jd&134217727)===0&&(sg&134217727)===0||Bi===null||lp(Bi,Lr,ca,!1)}function Cx(p,y,O){var M=fi;fi|=2;var V=lg(),G=Sx();(Bi!==p||Lr!==y)&&(qy=null,Gy(p,y)),y=!1;var de=Ro;e:do try{if(bi!==0&&Dr!==null){var Pe=Dr,et=qa;switch(bi){case 8:Ox(),de=6;break e;case 3:case 2:case 9:case 6:yn.current===null&&(y=!0);var wt=bi;if(bi=0,qa=null,Yy(p,Pe,et,wt),O&&ap){de=0;break e}break;default:wt=bi,bi=0,qa=null,Yy(p,Pe,et,wt)}}Tx(),de=Ro;break}catch(Lt){fS(p,Lt)}while(!0);return y&&p.shellSuspendCounter++,kc=dl=null,fi=M,_e.H=V,_e.A=G,Dr===null&&(Bi=null,Lr=0,Od()),de}function Tx(){for(;Dr!==null;)eE(Dr)}function Xy(p,y){var O=fi;fi|=2;var M=lg(),V=Sx();Bi!==p||Lr!==y?(qy=null,Vv=Et()+500,Gy(p,y)):ap=eo(p,y);e:do try{if(bi!==0&&Dr!==null){y=Dr;var G=qa;t:switch(bi){case 1:bi=0,qa=null,Yy(p,y,G,1);break;case 2:case 9:if(Qm(G)){bi=0,qa=null,tE(y);break}y=function(){bi!==2&&bi!==9||Bi!==p||(bi=7),Cu(p)},G.then(y,y);break e;case 3:bi=7;break e;case 4:bi=5;break e;case 7:Qm(G)?(bi=0,qa=null,tE(y)):(bi=0,qa=null,Yy(p,y,G,7));break;case 5:var de=null;switch(Dr.tag){case 26:de=Dr.memoizedState;case 5:case 27:var Pe=Dr;if(de?t_(de):Pe.stateNode.complete){bi=0,qa=null;var et=Pe.sibling;if(et!==null)Dr=et;else{var wt=Pe.return;wt!==null?(Dr=wt,kx(wt)):Dr=null}break t}}bi=0,qa=null,Yy(p,y,G,5);break;case 6:bi=0,qa=null,Yy(p,y,G,6);break;case 8:Ox(),Ro=6;break e;default:throw Error(r(462))}}Jk();break}catch(Lt){fS(p,Lt)}while(!0);return kc=dl=null,_e.H=M,_e.A=V,fi=O,Dr!==null?0:(Bi=null,Lr=0,Od(),Ro)}function Jk(){for(;Dr!==null&&!Je();)eE(Dr)}function eE(p){var y=xa(p.alternate,p,Fd);p.memoizedProps=p.pendingProps,y===null?kx(p):Dr=y}function tE(p){var y=p,O=y.alternate;switch(y.tag){case 15:case 0:y=zk(O,y,y.pendingProps,y.type,void 0,Lr);break;case 11:y=zk(O,y,y.pendingProps,y.type.render,y.ref,Lr);break;case 5:bu(y);default:px(O,y),y=Dr=ex(y,Fd),y=xa(O,y,Fd)}p.memoizedProps=p.pendingProps,y===null?kx(p):Dr=y}function Yy(p,y,O,M){kc=dl=null,bu(y),Pc=null,kd=0;var V=y.return;try{if(ix(p,V,y,O,Lr)){Ro=1,Yl(p,la(O,p.current)),Dr=null;return}}catch(G){if(V!==null)throw Dr=V,G;Ro=1,Yl(p,la(O,p.current)),Dr=null;return}y.flags&32768?(kr||M===1?p=!0:ap||(Lr&536870912)!==0?p=!1:(Nc=p=!0,(M===2||M===9||M===3||M===6)&&(M=yn.current,M!==null&&M.tag===13&&(M.flags|=16384))),nE(y,p)):kx(y)}function kx(p){var y=p;do{if((y.flags&32768)!==0){nE(y,Nc);return}p=y.return;var O=jk(y.alternate,y,Fd);if(O!==null){Dr=O;return}if(y=y.sibling,y!==null){Dr=y;return}Dr=y=p}while(y!==null);Ro===0&&(Ro=5)}function nE(p,y){do{var O=II(p.alternate,p);if(O!==null){O.flags&=32767,Dr=O;return}if(O=p.return,O!==null&&(O.flags|=32768,O.subtreeFlags=0,O.deletions=null),!y&&(p=p.sibling,p!==null)){Dr=p;return}Dr=p=O}while(p!==null);Ro=6,Dr=null}function rE(p,y,O,M,V,G,de,Pe,et){p.cancelPendingCommit=null;do Ex();while(hs!==0);if((fi&6)!==0)throw Error(r(327));if(y!==null){if(y===p.current)throw Error(r(177));if(G=y.lanes|y.childLanes,G|=wd,to(p,O,G,de,Pe,et),p===Bi&&(Dr=Bi=null,Lr=0),Wy=y,Qd=p,Bc=O,hS=G,wx=V,Yk=M,(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?(p.callbackNode=null,p.callbackPriority=0,cE(Y,function(){return lE(),null})):(p.callbackNode=null,p.callbackPriority=0),M=(y.flags&13878)!==0,(y.subtreeFlags&13878)!==0||M){M=_e.T,_e.T=null,V=ke.p,ke.p=2,de=fi,fi|=4;try{DI(p,y,O)}finally{fi=de,ke.p=V,_e.T=M}}hs=1,iE(),oE(),sE()}}function iE(){if(hs===1){hs=0;var p=Qd,y=Wy,O=(y.flags&13878)!==0;if((y.subtreeFlags&13878)!==0||O){O=_e.T,_e.T=null;var M=ke.p;ke.p=2;var V=fi;fi|=4;try{vx(y,p);var G=kS,de=_y(p.containerInfo),Pe=G.focusedElem,et=G.selectionRange;if(de!==Pe&&Pe&&Pe.ownerDocument&&vy(Pe.ownerDocument.documentElement,Pe)){if(et!==null&&Im(Pe)){var wt=et.start,Lt=et.end;if(Lt===void 0&&(Lt=wt),"selectionStart"in Pe)Pe.selectionStart=wt,Pe.selectionEnd=Math.min(Lt,Pe.value.length);else{var qt=Pe.ownerDocument||document,St=qt&&qt.defaultView||window;if(St.getSelection){var Pt=St.getSelection(),In=Pe.textContent.length,qn=Math.min(et.start,In),xi=et.end===void 0?qn:Math.min(et.end,In);!Pt.extend&&qn>xi&&(de=xi,xi=qn,qn=de);var lt=Rm(Pe,qn),it=Rm(Pe,xi);if(lt&&it&&(Pt.rangeCount!==1||Pt.anchorNode!==lt.node||Pt.anchorOffset!==lt.offset||Pt.focusNode!==it.node||Pt.focusOffset!==it.offset)){var vt=qt.createRange();vt.setStart(lt.node,lt.offset),Pt.removeAllRanges(),qn>xi?(Pt.addRange(vt),Pt.extend(it.node,it.offset)):(vt.setEnd(it.node,it.offset),Pt.addRange(vt))}}}}for(qt=[],Pt=Pe;Pt=Pt.parentNode;)Pt.nodeType===1&&qt.push({element:Pt,left:Pt.scrollLeft,top:Pt.scrollTop});for(typeof Pe.focus=="function"&&Pe.focus(),Pe=0;Pe<qt.length;Pe++){var Qt=qt[Pe];Qt.element.scrollLeft=Qt.left,Qt.element.scrollTop=Qt.top}}s_=!!Xv,kS=Xv=null}finally{fi=V,ke.p=M,_e.T=O}}p.current=y,hs=2}}function oE(){if(hs===2){hs=0;var p=Qd,y=Wy,O=(y.flags&8772)!==0;if((y.subtreeFlags&8772)!==0||O){O=_e.T,_e.T=null;var M=ke.p;ke.p=2;var V=fi;fi|=4;try{oS(p,y.alternate,y)}finally{fi=V,ke.p=M,_e.T=O}}hs=3}}function sE(){if(hs===4||hs===3){hs=0,xt();var p=Qd,y=Wy,O=Bc,M=Yk;(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?hs=5:(hs=0,Wy=Qd=null,aE(p,p.pendingLanes));var V=p.pendingLanes;if(V===0&&(Vd=null),Gt(O),y=y.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(tt,y,void 0,(y.current.flags&128)===128)}catch{}if(M!==null){y=_e.T,V=ke.p,ke.p=2,_e.T=null;try{for(var G=p.onRecoverableError,de=0;de<M.length;de++){var Pe=M[de];G(Pe.value,{componentStack:Pe.stack})}}finally{_e.T=y,ke.p=V}}(Bc&3)!==0&&Ex(),Cu(p),V=p.pendingLanes,(O&261930)!==0&&(V&42)!==0?p===dS?Qv++:(Qv=0,dS=p):Qv=0,Jl(0)}}function aE(p,y){(p.pooledCacheLanes&=y)===0&&(y=p.pooledCache,y!=null&&(p.pooledCache=null,Kf(y)))}function Ex(){return iE(),oE(),sE(),lE()}function lE(){if(hs!==5)return!1;var p=Qd,y=hS;hS=0;var O=Gt(Bc),M=_e.T,V=ke.p;try{ke.p=32>O?32:O,_e.T=null,O=wx,wx=null;var G=Qd,de=Bc;if(hs=0,Wy=Qd=null,Bc=0,(fi&6)!==0)throw Error(r(331));var Pe=fi;if(fi|=4,Hk(G.current),aS(G,G.current,de,O),fi=Pe,Jl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(tt,G)}catch{}return!0}finally{ke.p=V,_e.T=M,aE(p,y)}}function mS(p,y,O){y=la(O,y),y=eg(p.stateNode,y,2),p=gu(p,y,2),p!==null&&(ti(p,2),Cu(p))}function pi(p,y,O){if(p.tag===3)mS(p,p,O);else for(;y!==null;){if(y.tag===3){mS(y,p,O);break}else if(y.tag===1){var M=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Vd===null||!Vd.has(M))){p=la(O,p),O=tg(2),M=gu(y,O,2),M!==null&&(ng(O,M,y,p),ti(M,2),Cu(M));break}}y=y.return}}function Ax(p,y,O){var M=p.pingCache;if(M===null){M=p.pingCache=new Gk;var V=new Set;M.set(y,V)}else V=M.get(y),V===void 0&&(V=new Set,M.set(y,V));V.has(O)||(lS=!0,V.add(O),p=cp.bind(null,p,y,O),y.then(p,p))}function cp(p,y,O){var M=p.pingCache;M!==null&&M.delete(y),p.pingedLanes|=p.suspendedLanes&O,p.warmLanes&=~O,Bi===p&&(Lr&O)===O&&(Ro===4||Ro===3&&(Lr&62914560)===Lr&&300>Et()-xx?(fi&2)===0&&Gy(p,0):cS|=O,ag===Lr&&(ag=0)),Cu(p)}function qv(p,y){y===0&&(y=Cn()),p=hl(p,y),p!==null&&(ti(p,y),Cu(p))}function gS(p){var y=p.memoizedState,O=0;y!==null&&(O=y.retryLane),qv(p,O)}function zI(p,y){var O=0;switch(p.tag){case 31:case 13:var M=p.stateNode,V=p.memoizedState;V!==null&&(O=V.retryLane);break;case 19:M=p.stateNode;break;case 22:M=p.stateNode._retryCache;break;default:throw Error(r(314))}M!==null&&M.delete(y),qv(p,O)}function cE(p,y){return rr(p,y)}var Px=null,Ky=null,yS=!1,Mx=!1,vS=!1,Ud=0;function Cu(p){p!==Ky&&p.next===null&&(Ky===null?Px=Ky=p:Ky=Ky.next=p),Mx=!0,yS||(yS=!0,bS())}function Jl(p,y){if(!vS&&Mx){vS=!0;do for(var O=!1,M=Px;M!==null;){if(p!==0){var V=M.pendingLanes;if(V===0)var G=0;else{var de=M.suspendedLanes,Pe=M.pingedLanes;G=(1<<31-Ot(42|p)+1)-1,G&=V&~(de&~Pe),G=G&201326741?G&201326741|1:G?G|2:0}G!==0&&(O=!0,Wv(M,G))}else G=Lr,G=Ur(M,M===Bi?G:0,M.cancelPendingCommit!==null||M.timeoutHandle!==-1),(G&3)===0||eo(M,G)||(O=!0,Wv(M,G));M=M.next}while(O);vS=!1}}function up(){_S()}function _S(){Mx=yS=!1;var p=0;Ud!==0&&jx()&&(p=Ud);for(var y=Et(),O=null,M=Px;M!==null;){var V=M.next,G=Rx(M,y);G===0?(M.next=null,O===null?Px=V:O.next=V,V===null&&(Ky=O)):(O=M,(p!==0||(G&3)!==0)&&(Mx=!0)),M=V}hs!==0&&hs!==5||Jl(p),Ud!==0&&(Ud=0)}function Rx(p,y){for(var O=p.suspendedLanes,M=p.pingedLanes,V=p.expirationTimes,G=p.pendingLanes&-62914561;0<G;){var de=31-Ot(G),Pe=1<<de,et=V[de];et===-1?((Pe&O)===0||(Pe&M)!==0)&&(V[de]=Gn(Pe,y)):et<=y&&(p.expiredLanes|=Pe),G&=~Pe}if(y=Bi,O=Lr,O=Ur(p,p===y?O:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),M=p.callbackNode,O===0||p===y&&(bi===2||bi===9)||p.cancelPendingCommit!==null)return M!==null&&M!==null&&Ue(M),p.callbackNode=null,p.callbackPriority=0;if((O&3)===0||eo(p,O)){if(y=O&-O,y===p.callbackPriority)return y;switch(M!==null&&Ue(M),Gt(O)){case 2:case 8:O=ae;break;case 32:O=Y;break;case 268435456:O=$e;break;default:O=Y}return M=uE.bind(null,p),O=rr(O,M),p.callbackPriority=y,p.callbackNode=O,y}return M!==null&&M!==null&&Ue(M),p.callbackPriority=2,p.callbackNode=null,2}function uE(p,y){if(hs!==0&&hs!==5)return p.callbackNode=null,p.callbackPriority=0,null;var O=p.callbackNode;if(Ex()&&p.callbackNode!==O)return null;var M=Lr;return M=Ur(p,p===Bi?M:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),M===0?null:(Ko(p,M,y),Rx(p,Et()),p.callbackNode!=null&&p.callbackNode===O?uE.bind(null,p):null)}function Wv(p,y){if(Ex())return null;Ko(p,y,!0)}function bS(){MS(function(){(fi&6)!==0?rr(we,up):_S()})}function xS(){if(Ud===0){var p=Td;p===0&&(p=$n,$n<<=1,($n&261888)===0&&($n=256)),Ud=p}return Ud}function Ix(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:cr(""+p)}function Dx(p,y){var O=y.ownerDocument.createElement("input");return O.name=y.name,O.value=y.value,p.id&&O.setAttribute("form",p.id),y.parentNode.insertBefore(O,y),p=new FormData(p),O.parentNode.removeChild(O),p}function Jy(p,y,O,M,V){if(y==="submit"&&O&&O.stateNode===V){var G=Ix((V[tn]||null).action),de=M.submitter;de&&(y=(y=de[tn]||null)?Ix(y.formAction):de.getAttribute("formAction"),y!==null&&(G=y,de=null));var Pe=new xm("action","action",null,M,V);p.push({event:Pe,listeners:[{instance:null,listener:function(){if(M.defaultPrevented){if(Ud!==0){var et=de?Dx(V,de):new FormData(V);so(O,{pending:!0,data:et,method:V.method,action:G},null,et)}}else typeof G=="function"&&(Pe.preventDefault(),et=de?Dx(V,de):new FormData(V),so(O,{pending:!0,data:et,method:V.method,action:G},G,et))},currentTarget:V}]})}}for(var Lx=0;Lx<Oy.length;Lx++){var $x=Oy[Lx],wS=$x.toLowerCase(),hE=$x[0].toUpperCase()+$x.slice(1);$a(wS,"on"+hE)}$a($m,"onAnimationEnd"),$a(zm,"onAnimationIteration"),$a(wy,"onAnimationStart"),$a("dblclick","onDoubleClick"),$a("focusin","onFocus"),$a("focusout","onBlur"),$a(xd,"onTransitionRun"),$a(Nm,"onTransitionStart"),$a(Wf,"onTransitionCancel"),$a(La,"onTransitionEnd"),au("onMouseEnter",["mouseout","mouseover"]),au("onMouseLeave",["mouseout","mouseover"]),au("onPointerEnter",["pointerout","pointerover"]),au("onPointerLeave",["pointerout","pointerover"]),Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hp));function fE(p,y){y=(y&4)!==0;for(var O=0;O<p.length;O++){var M=p[O],V=M.event;M=M.listeners;e:{var G=void 0;if(y)for(var de=M.length-1;0<=de;de--){var Pe=M[de],et=Pe.instance,wt=Pe.currentTarget;if(Pe=Pe.listener,et!==G&&V.isPropagationStopped())break e;G=Pe,V.currentTarget=wt;try{G(V)}catch(Lt){xc(Lt)}V.currentTarget=null,G=et}else for(de=0;de<M.length;de++){if(Pe=M[de],et=Pe.instance,wt=Pe.currentTarget,Pe=Pe.listener,et!==G&&V.isPropagationStopped())break e;G=Pe,V.currentTarget=wt;try{G(V)}catch(Lt){xc(Lt)}V.currentTarget=null,G=et}}}}function $r(p,y){var O=y[dr];O===void 0&&(O=y[dr]=new Set);var M=p+"__bubble";O.has(M)||(Nx(y,p,2,!1),O.add(M))}function OS(p,y,O){var M=0;y&&(M|=4),Nx(O,p,M,y)}var zx="_reactListening"+Math.random().toString(36).slice(2);function SS(p){if(!p[zx]){p[zx]=!0,Df.forEach(function(O){O!=="selectionchange"&&(dE.has(O)||OS(O,!1,p),OS(O,!0,p))});var y=p.nodeType===9?p:p.ownerDocument;y===null||y[zx]||(y[zx]=!0,OS("selectionchange",!1,y))}}function Nx(p,y,O,M){switch(hg(y)){case 2:var V=a_;break;case 8:V=kE;break;default:V=US}O=V.bind(null,y,O,p),V=void 0,!ra||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(V=!0),M?V!==void 0?p.addEventListener(y,O,{capture:!0,passive:V}):p.addEventListener(y,O,!0):V!==void 0?p.addEventListener(y,O,{passive:V}):p.addEventListener(y,O,!1)}function Ph(p,y,O,M,V){var G=M;if((y&1)===0&&(y&2)===0&&M!==null)e:for(;;){if(M===null)return;var de=M.tag;if(de===3||de===4){var Pe=M.stateNode.containerInfo;if(Pe===V)break;if(de===4)for(de=M.return;de!==null;){var et=de.tag;if((et===3||et===4)&&de.stateNode.containerInfo===V)return;de=de.return}for(;Pe!==null;){if(de=pc(Pe),de===null)return;if(et=de.tag,et===5||et===6||et===26||et===27){M=G=de;continue e}Pe=Pe.parentNode}}M=M.return}ci(function(){var wt=G,Lt=bm(O),qt=[];e:{var St=gv.get(p);if(St!==void 0){var Pt=xm,In=p;switch(p){case"keypress":if(Da(O)===0)break e;case"keydown":case"keyup":Pt=io;break;case"focusin":In="focus",Pt=ch;break;case"focusout":In="blur",Pt=ch;break;case"beforeblur":case"afterblur":Pt=ch;break;case"click":if(O.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pt=gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pt=wm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pt=WO;break;case $m:case zm:case wy:Pt=Vb;break;case La:Pt=py;break;case"scroll":case"scrollend":Pt=md;break;case"wheel":Pt=hv;break;case"copy":case"cut":case"paste":Pt=cv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pt=fy;break;case"toggle":case"beforetoggle":Pt=jf}var qn=(y&4)!==0,xi=!qn&&(p==="scroll"||p==="scrollend"),lt=qn?St!==null?St+"Capture":null:St;qn=[];for(var it=wt,vt;it!==null;){var Qt=it;if(vt=Qt.stateNode,Qt=Qt.tag,Qt!==5&&Qt!==26&&Qt!==27||vt===null||lt===null||(Qt=al(it,lt),Qt!=null&&qn.push(e0(it,Qt,vt))),xi)break;it=it.return}0<qn.length&&(St=new Pt(St,In,null,O,Lt),qt.push({event:St,listeners:qn}))}}if((y&7)===0){e:{if(St=p==="mouseover"||p==="pointerover",Pt=p==="mouseout"||p==="pointerout",St&&O!==lv&&(In=O.relatedTarget||O.fromElement)&&(pc(In)||In[ir]))break e;if((Pt||St)&&(St=Lt.window===Lt?Lt:(St=Lt.ownerDocument)?St.defaultView||St.parentWindow:window,Pt?(In=O.relatedTarget||O.toElement,Pt=wt,In=In?pc(In):null,In!==null&&(xi=o(In),qn=In.tag,In!==xi||qn!==5&&qn!==27&&qn!==6)&&(In=null)):(Pt=null,In=wt),Pt!==In)){if(qn=gd,Qt="onMouseLeave",lt="onMouseEnter",it="mouse",(p==="pointerout"||p==="pointerover")&&(qn=fy,Qt="onPointerLeave",lt="onPointerEnter",it="pointer"),xi=Pt==null?St:mc(Pt),vt=In==null?St:mc(In),St=new qn(Qt,it+"leave",Pt,O,Lt),St.target=xi,St.relatedTarget=vt,Qt=null,pc(Lt)===wt&&(qn=new qn(lt,it+"enter",In,O,Lt),qn.target=vt,qn.relatedTarget=xi,Qt=qn),xi=Qt,Pt&&In)t:{for(qn=pE,lt=Pt,it=In,vt=0,Qt=lt;Qt;Qt=qn(Qt))vt++;Qt=0;for(var Qn=it;Qn;Qn=qn(Qn))Qt++;for(;0<vt-Qt;)lt=qn(lt),vt--;for(;0<Qt-vt;)it=qn(it),Qt--;for(;vt--;){if(lt===it||it!==null&&lt===it.alternate){qn=lt;break t}lt=qn(lt),it=qn(it)}qn=null}else qn=null;Pt!==null&&CS(qt,St,Pt,qn,!1),In!==null&&xi!==null&&CS(qt,xi,In,qn,!0)}}e:{if(St=wt?mc(wt):window,Pt=St.nodeName&&St.nodeName.toLowerCase(),Pt==="select"||Pt==="input"&&St.type==="file")var oi=dh;else if(gy(St))if(dv)oi=Kb;else{oi=Yb;var Dn=HO}else Pt=St.nodeName,!Pt||Pt.toLowerCase()!=="input"||St.type!=="checkbox"&&St.type!=="radio"?wt&&dd(wt.elementType)&&(oi=dh):oi=Mm;if(oi&&(oi=oi(p,wt))){yy(qt,oi,O,Lt);break e}Dn&&Dn(p,St,wt),p==="focusout"&&wt&&St.type==="number"&&wt.memoizedProps.value!=null&&_m(St,"number",St.value)}switch(Dn=wt?mc(wt):window,p){case"focusin":(gy(Dn)||Dn.contentEditable==="true")&&(ul=Dn,Dm=wt,Lm=null);break;case"focusout":Lm=Dm=ul=null;break;case"mousedown":xy=!0;break;case"contextmenu":case"mouseup":case"dragend":xy=!1,Jb(qt,O,Lt);break;case"selectionchange":if(by)break;case"keydown":case"keyup":Jb(qt,O,Lt)}var Bn;if(yo)e:{switch(p){case"compositionstart":var Ir="onCompositionStart";break e;case"compositionend":Ir="onCompositionEnd";break e;case"compositionupdate":Ir="onCompositionUpdate";break e}Ir=void 0}else Vl?km(p,O)&&(Ir="onCompositionEnd"):p==="keydown"&&O.keyCode===229&&(Ir="onCompositionStart");Ir&&(Zf&&O.locale!=="ko"&&(Vl||Ir!=="onCompositionStart"?Ir==="onCompositionEnd"&&Vl&&(Bn=ah()):(Ia=Lt,vc="value"in Ia?Ia.value:Ia.textContent,Vl=!0)),Dn=Hv(wt,Ir),0<Dn.length&&(Ir=new uv(Ir,p,null,O,Lt),qt.push({event:Ir,listeners:Dn}),Bn?Ir.data=Bn:(Bn=qb(O),Bn!==null&&(Ir.data=Bn)))),(Bn=Uf?my(p,O):Wb(p,O))&&(Ir=Hv(wt,"onBeforeInput"),0<Ir.length&&(Dn=new uv("onBeforeInput","beforeinput",null,O,Lt),qt.push({event:Dn,listeners:Ir}),Dn.data=Bn)),Jy(qt,p,wt,O,Lt)}fE(qt,y)})}function e0(p,y,O){return{instance:p,listener:y,currentTarget:O}}function Hv(p,y){for(var O=y+"Capture",M=[];p!==null;){var V=p,G=V.stateNode;if(V=V.tag,V!==5&&V!==26&&V!==27||G===null||(V=al(p,O),V!=null&&M.unshift(e0(p,V,G)),V=al(p,y),V!=null&&M.push(e0(p,V,G))),p.tag===3)return M;p=p.return}return[]}function pE(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function CS(p,y,O,M,V){for(var G=y._reactName,de=[];O!==null&&O!==M;){var Pe=O,et=Pe.alternate,wt=Pe.stateNode;if(Pe=Pe.tag,et!==null&&et===M)break;Pe!==5&&Pe!==26&&Pe!==27||wt===null||(et=wt,V?(wt=al(O,G),wt!=null&&de.unshift(e0(O,wt,et))):V||(wt=al(O,G),wt!=null&&de.push(e0(O,wt,et)))),O=O.return}de.length!==0&&p.push({event:y,listeners:de})}var mE=/\r\n?/g,gE=/\u0000|\uFFFD/g;function Gv(p){return(typeof p=="string"?p:""+p).replace(mE,`
`).replace(gE,"")}function TS(p,y){return y=Gv(y),Gv(p)===y}function ii(p,y,O,M,V,G){switch(O){case"children":typeof M=="string"?y==="body"||y==="textarea"&&M===""||lu(p,M):(typeof M=="number"||typeof M=="bigint")&&y!=="body"&&lu(p,""+M);break;case"className":yc(p,"class",M);break;case"tabIndex":yc(p,"tabindex",M);break;case"dir":case"role":case"viewBox":case"width":case"height":yc(p,O,M);break;case"style":dy(p,M,G);break;case"data":if(y!=="object"){yc(p,"data",M);break}case"src":case"href":if(M===""&&(y!=="a"||O!=="href")){p.removeAttribute(O);break}if(M==null||typeof M=="function"||typeof M=="symbol"||typeof M=="boolean"){p.removeAttribute(O);break}M=cr(""+M),p.setAttribute(O,M);break;case"action":case"formAction":if(typeof M=="function"){p.setAttribute(O,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof G=="function"&&(O==="formAction"?(y!=="input"&&ii(p,y,"name",V.name,V,null),ii(p,y,"formEncType",V.formEncType,V,null),ii(p,y,"formMethod",V.formMethod,V,null),ii(p,y,"formTarget",V.formTarget,V,null)):(ii(p,y,"encType",V.encType,V,null),ii(p,y,"method",V.method,V,null),ii(p,y,"target",V.target,V,null)));if(M==null||typeof M=="symbol"||typeof M=="boolean"){p.removeAttribute(O);break}M=cr(""+M),p.setAttribute(O,M);break;case"onClick":M!=null&&(p.onclick=jl);break;case"onScroll":M!=null&&$r("scroll",p);break;case"onScrollEnd":M!=null&&$r("scrollend",p);break;case"dangerouslySetInnerHTML":if(M!=null){if(typeof M!="object"||!("__html"in M))throw Error(r(61));if(O=M.__html,O!=null){if(V.children!=null)throw Error(r(60));p.innerHTML=O}}break;case"multiple":p.multiple=M&&typeof M!="function"&&typeof M!="symbol";break;case"muted":p.muted=M&&typeof M!="function"&&typeof M!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(M==null||typeof M=="function"||typeof M=="boolean"||typeof M=="symbol"){p.removeAttribute("xlink:href");break}O=cr(""+M),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",O);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":M!=null&&typeof M!="function"&&typeof M!="symbol"?p.setAttribute(O,""+M):p.removeAttribute(O);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":M&&typeof M!="function"&&typeof M!="symbol"?p.setAttribute(O,""):p.removeAttribute(O);break;case"capture":case"download":M===!0?p.setAttribute(O,""):M!==!1&&M!=null&&typeof M!="function"&&typeof M!="symbol"?p.setAttribute(O,M):p.removeAttribute(O);break;case"cols":case"rows":case"size":case"span":M!=null&&typeof M!="function"&&typeof M!="symbol"&&!isNaN(M)&&1<=M?p.setAttribute(O,M):p.removeAttribute(O);break;case"rowSpan":case"start":M==null||typeof M=="function"||typeof M=="symbol"||isNaN(M)?p.removeAttribute(O):p.setAttribute(O,M);break;case"popover":$r("beforetoggle",p),$r("toggle",p),gm(p,"popover",M);break;case"xlinkActuate":sl(p,"http://www.w3.org/1999/xlink","xlink:actuate",M);break;case"xlinkArcrole":sl(p,"http://www.w3.org/1999/xlink","xlink:arcrole",M);break;case"xlinkRole":sl(p,"http://www.w3.org/1999/xlink","xlink:role",M);break;case"xlinkShow":sl(p,"http://www.w3.org/1999/xlink","xlink:show",M);break;case"xlinkTitle":sl(p,"http://www.w3.org/1999/xlink","xlink:title",M);break;case"xlinkType":sl(p,"http://www.w3.org/1999/xlink","xlink:type",M);break;case"xmlBase":sl(p,"http://www.w3.org/XML/1998/namespace","xml:base",M);break;case"xmlLang":sl(p,"http://www.w3.org/XML/1998/namespace","xml:lang",M);break;case"xmlSpace":sl(p,"http://www.w3.org/XML/1998/namespace","xml:space",M);break;case"is":gm(p,"is",M);break;case"innerText":case"textContent":break;default:(!(2<O.length)||O[0]!=="o"&&O[0]!=="O"||O[1]!=="n"&&O[1]!=="N")&&(O=sh.get(O)||O,gm(p,O,M))}}function Bx(p,y,O,M,V,G){switch(O){case"style":dy(p,M,G);break;case"dangerouslySetInnerHTML":if(M!=null){if(typeof M!="object"||!("__html"in M))throw Error(r(61));if(O=M.__html,O!=null){if(V.children!=null)throw Error(r(60));p.innerHTML=O}}break;case"children":typeof M=="string"?lu(p,M):(typeof M=="number"||typeof M=="bigint")&&lu(p,""+M);break;case"onScroll":M!=null&&$r("scroll",p);break;case"onScrollEnd":M!=null&&$r("scrollend",p);break;case"onClick":M!=null&&(p.onclick=jl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ls.hasOwnProperty(O))e:{if(O[0]==="o"&&O[1]==="n"&&(V=O.endsWith("Capture"),y=O.slice(2,V?O.length-7:void 0),G=p[tn]||null,G=G!=null?G[O]:null,typeof G=="function"&&p.removeEventListener(y,G,V),typeof M=="function")){typeof G!="function"&&G!==null&&(O in p?p[O]=null:p.hasAttribute(O)&&p.removeAttribute(O)),p.addEventListener(y,M,V);break e}O in p?p[O]=M:M===!0?p.setAttribute(O,""):gm(p,O,M)}}}function Cs(p,y,O){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$r("error",p),$r("load",p);var M=!1,V=!1,G;for(G in O)if(O.hasOwnProperty(G)){var de=O[G];if(de!=null)switch(G){case"src":M=!0;break;case"srcSet":V=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,y));default:ii(p,y,G,de,O,null)}}V&&ii(p,y,"srcSet",O.srcSet,O,null),M&&ii(p,y,"src",O.src,O,null);return;case"input":$r("invalid",p);var Pe=G=de=V=null,et=null,wt=null;for(M in O)if(O.hasOwnProperty(M)){var Lt=O[M];if(Lt!=null)switch(M){case"name":V=Lt;break;case"type":de=Lt;break;case"checked":et=Lt;break;case"defaultChecked":wt=Lt;break;case"value":G=Lt;break;case"defaultValue":Pe=Lt;break;case"children":case"dangerouslySetInnerHTML":if(Lt!=null)throw Error(r(137,y));break;default:ii(p,y,M,Lt,O,null)}}hy(p,G,Pe,et,wt,de,V,!1);return;case"select":$r("invalid",p),M=de=G=null;for(V in O)if(O.hasOwnProperty(V)&&(Pe=O[V],Pe!=null))switch(V){case"value":G=Pe;break;case"defaultValue":de=Pe;break;case"multiple":M=Pe;default:ii(p,y,V,Pe,O,null)}y=G,O=de,p.multiple=!!M,y!=null?oh(p,!!M,y,!1):O!=null&&oh(p,!!M,O,!0);return;case"textarea":$r("invalid",p),G=V=M=null;for(de in O)if(O.hasOwnProperty(de)&&(Pe=O[de],Pe!=null))switch(de){case"value":M=Pe;break;case"defaultValue":V=Pe;break;case"children":G=Pe;break;case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(r(91));break;default:ii(p,y,de,Pe,O,null)}zf(p,M,V,G);return;case"option":for(et in O)O.hasOwnProperty(et)&&(M=O[et],M!=null)&&(et==="selected"?p.selected=M&&typeof M!="function"&&typeof M!="symbol":ii(p,y,et,M,O,null));return;case"dialog":$r("beforetoggle",p),$r("toggle",p),$r("cancel",p),$r("close",p);break;case"iframe":case"object":$r("load",p);break;case"video":case"audio":for(M=0;M<hp.length;M++)$r(hp[M],p);break;case"image":$r("error",p),$r("load",p);break;case"details":$r("toggle",p);break;case"embed":case"source":case"link":$r("error",p),$r("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(wt in O)if(O.hasOwnProperty(wt)&&(M=O[wt],M!=null))switch(wt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,y));default:ii(p,y,wt,M,O,null)}return;default:if(dd(y)){for(Lt in O)O.hasOwnProperty(Lt)&&(M=O[Lt],M!==void 0&&Bx(p,y,Lt,M,O,void 0));return}}for(Pe in O)O.hasOwnProperty(Pe)&&(M=O[Pe],M!=null&&ii(p,y,Pe,M,O,null))}function yE(p,y,O,M){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var V=null,G=null,de=null,Pe=null,et=null,wt=null,Lt=null;for(Pt in O){var qt=O[Pt];if(O.hasOwnProperty(Pt)&&qt!=null)switch(Pt){case"checked":break;case"value":break;case"defaultValue":et=qt;default:M.hasOwnProperty(Pt)||ii(p,y,Pt,null,M,qt)}}for(var St in M){var Pt=M[St];if(qt=O[St],M.hasOwnProperty(St)&&(Pt!=null||qt!=null))switch(St){case"type":G=Pt;break;case"name":V=Pt;break;case"checked":wt=Pt;break;case"defaultChecked":Lt=Pt;break;case"value":de=Pt;break;case"defaultValue":Pe=Pt;break;case"children":case"dangerouslySetInnerHTML":if(Pt!=null)throw Error(r(137,y));break;default:Pt!==qt&&ii(p,y,St,Pt,M,qt)}}vm(p,de,Pe,et,wt,Lt,G,V);return;case"select":Pt=de=Pe=St=null;for(G in O)if(et=O[G],O.hasOwnProperty(G)&&et!=null)switch(G){case"value":break;case"multiple":Pt=et;default:M.hasOwnProperty(G)||ii(p,y,G,null,M,et)}for(V in M)if(G=M[V],et=O[V],M.hasOwnProperty(V)&&(G!=null||et!=null))switch(V){case"value":St=G;break;case"defaultValue":Pe=G;break;case"multiple":de=G;default:G!==et&&ii(p,y,V,G,M,et)}y=Pe,O=de,M=Pt,St!=null?oh(p,!!O,St,!1):!!M!=!!O&&(y!=null?oh(p,!!O,y,!0):oh(p,!!O,O?[]:"",!1));return;case"textarea":Pt=St=null;for(Pe in O)if(V=O[Pe],O.hasOwnProperty(Pe)&&V!=null&&!M.hasOwnProperty(Pe))switch(Pe){case"value":break;case"children":break;default:ii(p,y,Pe,null,M,V)}for(de in M)if(V=M[de],G=O[de],M.hasOwnProperty(de)&&(V!=null||G!=null))switch(de){case"value":St=V;break;case"defaultValue":Pt=V;break;case"children":break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:V!==G&&ii(p,y,de,V,M,G)}Fb(p,St,Pt);return;case"option":for(var In in O)St=O[In],O.hasOwnProperty(In)&&St!=null&&!M.hasOwnProperty(In)&&(In==="selected"?p.selected=!1:ii(p,y,In,null,M,St));for(et in M)St=M[et],Pt=O[et],M.hasOwnProperty(et)&&St!==Pt&&(St!=null||Pt!=null)&&(et==="selected"?p.selected=St&&typeof St!="function"&&typeof St!="symbol":ii(p,y,et,St,M,Pt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qn in O)St=O[qn],O.hasOwnProperty(qn)&&St!=null&&!M.hasOwnProperty(qn)&&ii(p,y,qn,null,M,St);for(wt in M)if(St=M[wt],Pt=O[wt],M.hasOwnProperty(wt)&&St!==Pt&&(St!=null||Pt!=null))switch(wt){case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(r(137,y));break;default:ii(p,y,wt,St,M,Pt)}return;default:if(dd(y)){for(var xi in O)St=O[xi],O.hasOwnProperty(xi)&&St!==void 0&&!M.hasOwnProperty(xi)&&Bx(p,y,xi,void 0,M,St);for(Lt in M)St=M[Lt],Pt=O[Lt],!M.hasOwnProperty(Lt)||St===Pt||St===void 0&&Pt===void 0||Bx(p,y,Lt,St,M,Pt);return}}for(var lt in O)St=O[lt],O.hasOwnProperty(lt)&&St!=null&&!M.hasOwnProperty(lt)&&ii(p,y,lt,null,M,St);for(qt in M)St=M[qt],Pt=O[qt],!M.hasOwnProperty(qt)||St===Pt||St==null&&Pt==null||ii(p,y,qt,St,M,Pt)}function Sl(p){switch(p){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function t0(){if(typeof performance.getEntriesByType=="function"){for(var p=0,y=0,O=performance.getEntriesByType("resource"),M=0;M<O.length;M++){var V=O[M],G=V.transferSize,de=V.initiatorType,Pe=V.duration;if(G&&Pe&&Sl(de)){for(de=0,Pe=V.responseEnd,M+=1;M<O.length;M++){var et=O[M],wt=et.startTime;if(wt>Pe)break;var Lt=et.transferSize,qt=et.initiatorType;Lt&&Sl(qt)&&(et=et.responseEnd,de+=Lt*(et<Pe?1:(Pe-wt)/(et-wt)))}if(--M,y+=8*(G+de)/(V.duration/1e3),p++,10<p)break}}if(0<p)return y/p/1e6}return navigator.connection&&(p=navigator.connection.downlink,typeof p=="number")?p:5}var Xv=null,kS=null;function Yv(p){return p.nodeType===9?p:p.ownerDocument}function dp(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ES(p,y){if(p===0)switch(y){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&y==="foreignObject"?0:p}function Fx(p,y){return p==="textarea"||p==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.children=="bigint"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var fp=null;function jx(){var p=window.event;return p&&p.type==="popstate"?p===fp?!1:(fp=p,!0):(fp=null,!1)}var Vx=typeof setTimeout=="function"?setTimeout:void 0,AS=typeof clearTimeout=="function"?clearTimeout:void 0,PS=typeof Promise=="function"?Promise:void 0,MS=typeof queueMicrotask=="function"?queueMicrotask:typeof PS<"u"?function(p){return PS.resolve(null).then(p).catch(RS)}:Vx;function RS(p){setTimeout(function(){throw p})}function pp(p){return p==="head"}function vE(p,y){var O=y,M=0;do{var V=O.nextSibling;if(p.removeChild(O),V&&V.nodeType===8)if(O=V.data,O==="/$"||O==="/&"){if(M===0){p.removeChild(V),bp(y);return}M--}else if(O==="$"||O==="$?"||O==="$~"||O==="$!"||O==="&")M++;else if(O==="html")n0(p.ownerDocument.documentElement);else if(O==="head"){O=p.ownerDocument.head,n0(O);for(var G=O.firstChild;G;){var de=G.nextSibling,Pe=G.nodeName;G[nr]||Pe==="SCRIPT"||Pe==="STYLE"||Pe==="LINK"&&G.rel.toLowerCase()==="stylesheet"||O.removeChild(G),G=de}}else O==="body"&&n0(p.ownerDocument.body);O=V}while(O);bp(y)}function _r(p,y){var O=p;p=0;do{var M=O.nextSibling;if(O.nodeType===1?y?(O._stashedDisplay=O.style.display,O.style.display="none"):(O.style.display=O._stashedDisplay||"",O.getAttribute("style")===""&&O.removeAttribute("style")):O.nodeType===3&&(y?(O._stashedText=O.nodeValue,O.nodeValue=""):O.nodeValue=O._stashedText||""),M&&M.nodeType===8)if(O=M.data,O==="/$"){if(p===0)break;p--}else O!=="$"&&O!=="$?"&&O!=="$~"&&O!=="$!"||p++;O=M}while(O)}function Tu(p){var y=p.firstChild;for(y&&y.nodeType===10&&(y=y.nextSibling);y;){var O=y;switch(y=y.nextSibling,O.nodeName){case"HTML":case"HEAD":case"BODY":Tu(O),cd(O);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(O.rel.toLowerCase()==="stylesheet")continue}p.removeChild(O)}}function Ns(p,y,O,M){for(;p.nodeType===1;){var V=O;if(p.nodeName.toLowerCase()!==y.toLowerCase()){if(!M&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(M){if(!p[nr])switch(y){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(G=p.getAttribute("rel"),G==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(G!==V.rel||p.getAttribute("href")!==(V.href==null||V.href===""?null:V.href)||p.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin)||p.getAttribute("title")!==(V.title==null?null:V.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(G=p.getAttribute("src"),(G!==(V.src==null?null:V.src)||p.getAttribute("type")!==(V.type==null?null:V.type)||p.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin))&&G&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(y==="input"&&p.type==="hidden"){var G=V.name==null?null:""+V.name;if(V.type==="hidden"&&p.getAttribute("name")===G)return p}else return p;if(p=ec(p.nextSibling),p===null)break}return null}function ku(p,y,O){if(y==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!O||(p=ec(p.nextSibling),p===null))return null;return p}function mp(p,y){for(;p.nodeType!==8;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!y||(p=ec(p.nextSibling),p===null))return null;return p}function wa(p){return p.data==="$?"||p.data==="$~"}function jo(p){return p.data==="$!"||p.data==="$?"&&p.ownerDocument.readyState!=="loading"}function ds(p,y){var O=p.ownerDocument;if(p.data==="$~")p._reactRetry=y;else if(p.data!=="$?"||O.readyState!=="loading")y();else{var M=function(){y(),O.removeEventListener("DOMContentLoaded",M)};O.addEventListener("DOMContentLoaded",M),p._reactRetry=M}}function ec(p){for(;p!=null;p=p.nextSibling){var y=p.nodeType;if(y===1||y===3)break;if(y===8){if(y=p.data,y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"||y==="F!"||y==="F")break;if(y==="/$"||y==="/&")return null}}return p}var Wa=null;function fs(p){p=p.nextSibling;for(var y=0;p;){if(p.nodeType===8){var O=p.data;if(O==="/$"||O==="/&"){if(y===0)return ec(p.nextSibling);y--}else O!=="$"&&O!=="$!"&&O!=="$?"&&O!=="$~"&&O!=="&"||y++}p=p.nextSibling}return null}function Kv(p){p=p.previousSibling;for(var y=0;p;){if(p.nodeType===8){var O=p.data;if(O==="$"||O==="$!"||O==="$?"||O==="$~"||O==="&"){if(y===0)return p;y--}else O!=="/$"&&O!=="/&"||y++}p=p.previousSibling}return null}function _E(p,y,O){switch(y=Yv(O),p){case"html":if(p=y.documentElement,!p)throw Error(r(452));return p;case"head":if(p=y.head,!p)throw Error(r(453));return p;case"body":if(p=y.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}function n0(p){for(var y=p.attributes;y.length;)p.removeAttributeNode(y[0]);cd(p)}var Bs=new Map,cg=new Set;function Qx(p){return typeof p.getRootNode=="function"?p.getRootNode():p.nodeType===9?p:p.ownerDocument}var Mh=ke.d;ke.d={f:bE,r:xE,D:DS,C:Oa,L:Eu,m:Sa,X:Ux,S:yp,M:LS};function bE(){var p=Mh.f(),y=Uv();return p||y}function xE(p){var y=su(p);y!==null&&y.tag===5&&y.type==="form"?as(y):Mh.r(p)}var gp=typeof document>"u"?null:document;function IS(p,y,O){var M=gp;if(M&&typeof y=="string"&&y){var V=na(y);V='link[rel="'+p+'"][href="'+V+'"]',typeof O=="string"&&(V+='[crossorigin="'+O+'"]'),cg.has(V)||(cg.add(V),p={rel:p,crossOrigin:O,href:y},M.querySelector(V)===null&&(y=M.createElement("link"),Cs(y,"link",p),no(y),M.head.appendChild(y)))}}function DS(p){Mh.D(p),IS("dns-prefetch",p,null)}function Oa(p,y){Mh.C(p,y),IS("preconnect",p,y)}function Eu(p,y,O){Mh.L(p,y,O);var M=gp;if(M&&p&&y){var V='link[rel="preload"][as="'+na(y)+'"]';y==="image"&&O&&O.imageSrcSet?(V+='[imagesrcset="'+na(O.imageSrcSet)+'"]',typeof O.imageSizes=="string"&&(V+='[imagesizes="'+na(O.imageSizes)+'"]')):V+='[href="'+na(p)+'"]';var G=V;switch(y){case"style":G=ug(p);break;case"script":G=Zd(p)}Bs.has(G)||(p=_({rel:"preload",href:y==="image"&&O&&O.imageSrcSet?void 0:p,as:y},O),Bs.set(G,p),M.querySelector(V)!==null||y==="style"&&M.querySelector(r0(G))||y==="script"&&M.querySelector(i0(G))||(y=M.createElement("link"),Cs(y,"link",p),no(y),M.head.appendChild(y)))}}function Sa(p,y){Mh.m(p,y);var O=gp;if(O&&p){var M=y&&typeof y.as=="string"?y.as:"script",V='link[rel="modulepreload"][as="'+na(M)+'"][href="'+na(p)+'"]',G=V;switch(M){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":G=Zd(p)}if(!Bs.has(G)&&(p=_({rel:"modulepreload",href:p},y),Bs.set(G,p),O.querySelector(V)===null)){switch(M){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(O.querySelector(i0(G)))return}M=O.createElement("link"),Cs(M,"link",p),no(M),O.head.appendChild(M)}}}function yp(p,y,O){Mh.S(p,y,O);var M=gp;if(M&&p){var V=gc(M).hoistableStyles,G=ug(p);y=y||"default";var de=V.get(G);if(!de){var Pe={loading:0,preload:null};if(de=M.querySelector(r0(G)))Pe.loading=5;else{p=_({rel:"stylesheet",href:p,"data-precedence":y},O),(O=Bs.get(G))&&Jv(p,O);var et=de=M.createElement("link");no(et),Cs(et,"link",p),et._p=new Promise(function(wt,Lt){et.onload=wt,et.onerror=Lt}),et.addEventListener("load",function(){Pe.loading|=1}),et.addEventListener("error",function(){Pe.loading|=2}),Pe.loading|=4,qd(de,y,M)}de={type:"stylesheet",instance:de,count:1,state:Pe},V.set(G,de)}}}function Ux(p,y){Mh.X(p,y);var O=gp;if(O&&p){var M=gc(O).hoistableScripts,V=Zd(p),G=M.get(V);G||(G=O.querySelector(i0(V)),G||(p=_({src:p,async:!0},y),(y=Bs.get(V))&&Zx(p,y),G=O.createElement("script"),no(G),Cs(G,"link",p),O.head.appendChild(G)),G={type:"script",instance:G,count:1,state:null},M.set(V,G))}}function LS(p,y){Mh.M(p,y);var O=gp;if(O&&p){var M=gc(O).hoistableScripts,V=Zd(p),G=M.get(V);G||(G=O.querySelector(i0(V)),G||(p=_({src:p,async:!0,type:"module"},y),(y=Bs.get(V))&&Zx(p,y),G=O.createElement("script"),no(G),Cs(G,"link",p),O.head.appendChild(G)),G={type:"script",instance:G,count:1,state:null},M.set(V,G))}}function $S(p,y,O,M){var V=(V=ct.current)?Qx(V):null;if(!V)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof O.precedence=="string"&&typeof O.href=="string"?(y=ug(O.href),O=gc(V).hoistableStyles,M=O.get(y),M||(M={type:"style",instance:null,count:0,state:null},O.set(y,M)),M):{type:"void",instance:null,count:0,state:null};case"link":if(O.rel==="stylesheet"&&typeof O.href=="string"&&typeof O.precedence=="string"){p=ug(O.href);var G=gc(V).hoistableStyles,de=G.get(p);if(de||(V=V.ownerDocument||V,de={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},G.set(p,de),(G=V.querySelector(r0(p)))&&!G._p&&(de.instance=G,de.state.loading=5),Bs.has(p)||(O={rel:"preload",as:"style",href:O.href,crossOrigin:O.crossOrigin,integrity:O.integrity,media:O.media,hrefLang:O.hrefLang,referrerPolicy:O.referrerPolicy},Bs.set(p,O),G||NS(V,p,O,de.state))),y&&M===null)throw Error(r(528,""));return de}if(y&&M!==null)throw Error(r(529,""));return null;case"script":return y=O.async,O=O.src,typeof O=="string"&&y&&typeof y!="function"&&typeof y!="symbol"?(y=Zd(O),O=gc(V).hoistableScripts,M=O.get(y),M||(M={type:"script",instance:null,count:0,state:null},O.set(y,M)),M):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function ug(p){return'href="'+na(p)+'"'}function r0(p){return'link[rel="stylesheet"]['+p+"]"}function zS(p){return _({},p,{"data-precedence":p.precedence,precedence:null})}function NS(p,y,O,M){p.querySelector('link[rel="preload"][as="style"]['+y+"]")?M.loading=1:(y=p.createElement("link"),M.preload=y,y.addEventListener("load",function(){return M.loading|=1}),y.addEventListener("error",function(){return M.loading|=2}),Cs(y,"link",O),no(y),p.head.appendChild(y))}function Zd(p){return'[src="'+na(p)+'"]'}function i0(p){return"script[async]"+p}function BS(p,y,O){if(y.count++,y.instance===null)switch(y.type){case"style":var M=p.querySelector('style[data-href~="'+na(O.href)+'"]');if(M)return y.instance=M,no(M),M;var V=_({},O,{"data-href":O.href,"data-precedence":O.precedence,href:null,precedence:null});return M=(p.ownerDocument||p).createElement("style"),no(M),Cs(M,"style",V),qd(M,O.precedence,p),y.instance=M;case"stylesheet":V=ug(O.href);var G=p.querySelector(r0(V));if(G)return y.state.loading|=4,y.instance=G,no(G),G;M=zS(O),(V=Bs.get(V))&&Jv(M,V),G=(p.ownerDocument||p).createElement("link"),no(G);var de=G;return de._p=new Promise(function(Pe,et){de.onload=Pe,de.onerror=et}),Cs(G,"link",M),y.state.loading|=4,qd(G,O.precedence,p),y.instance=G;case"script":return G=Zd(O.src),(V=p.querySelector(i0(G)))?(y.instance=V,no(V),V):(M=O,(V=Bs.get(G))&&(M=_({},O),Zx(M,V)),p=p.ownerDocument||p,V=p.createElement("script"),no(V),Cs(V,"link",M),p.head.appendChild(V),y.instance=V);case"void":return null;default:throw Error(r(443,y.type))}else y.type==="stylesheet"&&(y.state.loading&4)===0&&(M=y.instance,y.state.loading|=4,qd(M,O.precedence,p));return y.instance}function qd(p,y,O){for(var M=O.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),V=M.length?M[M.length-1]:null,G=V,de=0;de<M.length;de++){var Pe=M[de];if(Pe.dataset.precedence===y)G=Pe;else if(G!==V)break}G?G.parentNode.insertBefore(p,G.nextSibling):(y=O.nodeType===9?O.head:O,y.insertBefore(p,y.firstChild))}function Jv(p,y){p.crossOrigin==null&&(p.crossOrigin=y.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=y.referrerPolicy),p.title==null&&(p.title=y.title)}function Zx(p,y){p.crossOrigin==null&&(p.crossOrigin=y.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=y.referrerPolicy),p.integrity==null&&(p.integrity=y.integrity)}var qx=null;function FS(p,y,O){if(qx===null){var M=new Map,V=qx=new Map;V.set(O,M)}else V=qx,M=V.get(O),M||(M=new Map,V.set(O,M));if(M.has(p))return M;for(M.set(p,null),O=O.getElementsByTagName(p),V=0;V<O.length;V++){var G=O[V];if(!(G[nr]||G[yi]||p==="link"&&G.getAttribute("rel")==="stylesheet")&&G.namespaceURI!=="http://www.w3.org/2000/svg"){var de=G.getAttribute(y)||"";de=p+de;var Pe=M.get(de);Pe?Pe.push(G):M.set(de,[G])}}return M}function e_(p,y,O){p=p.ownerDocument||p,p.head.insertBefore(O,y==="title"?p.querySelector("head > title"):null)}function Wx(p,y,O){if(O===1||y.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof y.precedence!="string"||typeof y.href!="string"||y.href==="")break;return!0;case"link":if(typeof y.rel!="string"||typeof y.href!="string"||y.href===""||y.onLoad||y.onError)break;return y.rel==="stylesheet"?(p=y.disabled,typeof y.precedence=="string"&&p==null):!0;case"script":if(y.async&&typeof y.async!="function"&&typeof y.async!="symbol"&&!y.onLoad&&!y.onError&&y.src&&typeof y.src=="string")return!0}return!1}function t_(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}function jS(p,y,O,M){if(O.type==="stylesheet"&&(typeof M.media!="string"||matchMedia(M.media).matches!==!1)&&(O.state.loading&4)===0){if(O.instance===null){var V=ug(M.href),G=y.querySelector(r0(V));if(G){y=G._p,y!==null&&typeof y=="object"&&typeof y.then=="function"&&(p.count++,p=r_.bind(p),y.then(p,p)),O.state.loading|=4,O.instance=G,no(G);return}G=y.ownerDocument||y,M=zS(M),(V=Bs.get(V))&&Jv(M,V),G=G.createElement("link"),no(G);var de=G;de._p=new Promise(function(Pe,et){de.onload=Pe,de.onerror=et}),Cs(G,"link",M),O.instance=G}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(O,y),(y=O.state.preload)&&(O.state.loading&3)===0&&(p.count++,O=r_.bind(p),y.addEventListener("load",O),y.addEventListener("error",O))}}var n_=0;function VS(p,y){return p.stylesheets&&p.count===0&&o_(p,p.stylesheets),0<p.count||0<p.imgCount?function(O){var M=setTimeout(function(){if(p.stylesheets&&o_(p,p.stylesheets),p.unsuspend){var G=p.unsuspend;p.unsuspend=null,G()}},6e4+y);0<p.imgBytes&&n_===0&&(n_=62500*t0());var V=setTimeout(function(){if(p.waitingForImages=!1,p.count===0&&(p.stylesheets&&o_(p,p.stylesheets),p.unsuspend)){var G=p.unsuspend;p.unsuspend=null,G()}},(p.imgBytes>n_?50:800)+y);return p.unsuspend=O,function(){p.unsuspend=null,clearTimeout(M),clearTimeout(V)}}:null}function r_(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)o_(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var i_=null;function o_(p,y){p.stylesheets=null,p.unsuspend!==null&&(p.count++,i_=new Map,y.forEach(wE,p),i_=null,r_.call(p))}function wE(p,y){if(!(y.state.loading&4)){var O=i_.get(p);if(O)var M=O.get(null);else{O=new Map,i_.set(p,O);for(var V=p.querySelectorAll("link[data-precedence],style[data-precedence]"),G=0;G<V.length;G++){var de=V[G];(de.nodeName==="LINK"||de.getAttribute("media")!=="not all")&&(O.set(de.dataset.precedence,de),M=de)}M&&O.set(null,M)}V=y.instance,de=V.getAttribute("data-precedence"),G=O.get(de)||M,G===M&&O.set(null,V),O.set(de,V),this.count++,M=r_.bind(this),V.addEventListener("load",M),V.addEventListener("error",M),G?G.parentNode.insertBefore(V,G.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(V,p.firstChild)),y.state.loading|=4}}var o0={$$typeof:B,Provider:null,Consumer:null,_currentValue:Ne,_currentValue2:Ne,_threadCount:0};function NI(p,y,O,M,V,G,de,Pe,et){this.tag=1,this.containerInfo=p,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=M,this.onUncaughtError=V,this.onCaughtError=G,this.onRecoverableError=de,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=et,this.incompleteTransitions=new Map}function QS(p,y,O,M,V,G,de,Pe,et,wt,Lt,qt){return p=new NI(p,y,O,de,et,wt,Lt,qt,Pe),y=1,G===!0&&(y|=24),G=za(3,null,null,y),p.current=G,G.stateNode=p,y=Ac(),y.refCount++,p.pooledCache=y,y.refCount++,G.memoizedState={element:M,isDehydrated:O,cache:y},$y(G),p}function OE(p){return p?(p=sr,p):sr}function SE(p,y,O,M,V,G){V=OE(V),M.context===null?M.context=V:M.pendingContext=V,M=Dc(y),M.payload={element:O},G=G===void 0?null:G,G!==null&&(M.callback=G),O=gu(p,M,y),O!==null&&(Ol(O,p,y),pl(O,p,y))}function Hx(p,y){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var O=p.retryLane;p.retryLane=O!==0&&O<y?O:y}}function Gx(p,y){Hx(p,y),(p=p.alternate)&&Hx(p,y)}function CE(p){if(p.tag===13||p.tag===31){var y=hl(p,67108864);y!==null&&Ol(y,p,67108864),Gx(p,67108864)}}function TE(p){if(p.tag===13||p.tag===31){var y=wl();y=ld(y);var O=hl(p,y);O!==null&&Ol(O,p,y),Gx(p,y)}}var s_=!0;function a_(p,y,O,M){var V=_e.T;_e.T=null;var G=ke.p;try{ke.p=2,US(p,y,O,M)}finally{ke.p=G,_e.T=V}}function kE(p,y,O,M){var V=_e.T;_e.T=null;var G=ke.p;try{ke.p=8,US(p,y,O,M)}finally{ke.p=G,_e.T=V}}function US(p,y,O,M){if(s_){var V=l_(M);if(V===null)Ph(p,y,M,s0,O),EE(p,M);else if(FI(V,p,y,O,M))M.stopPropagation();else if(EE(p,M),y&4&&-1<BI.indexOf(p)){for(;V!==null;){var G=su(V);if(G!==null)switch(G.tag){case 3:if(G=G.stateNode,G.current.memoizedState.isDehydrated){var de=ut(G.pendingLanes);if(de!==0){var Pe=G;for(Pe.pendingLanes|=2,Pe.entangledLanes|=2;de;){var et=1<<31-Ot(de);Pe.entanglements[1]|=et,de&=~et}Cu(G),(fi&6)===0&&(Vv=Et()+500,Jl(0))}}break;case 31:case 13:Pe=hl(G,2),Pe!==null&&Ol(Pe,G,2),Uv(),Gx(G,2)}if(G=l_(M),G===null&&Ph(p,y,M,s0,O),G===V)break;V=G}V!==null&&M.stopPropagation()}else Ph(p,y,M,null,O)}}function l_(p){return p=bm(p),Xx(p)}var s0=null;function Xx(p){if(s0=null,p=pc(p),p!==null){var y=o(p);if(y===null)p=null;else{var O=y.tag;if(O===13){if(p=a(y),p!==null)return p;p=null}else if(O===31){if(p=s(y),p!==null)return p;p=null}else if(O===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;p=null}else y!==p&&(p=null)}}return s0=p,null}function hg(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vt()){case we:return 2;case ae:return 8;case Y:case be:return 32;case $e:return 268435456;default:return 32}default:return 32}}var Yx=!1,vp=null,Fc=null,_p=null,c_=new Map,a0=new Map,Wd=[],BI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function EE(p,y){switch(p){case"focusin":case"focusout":vp=null;break;case"dragenter":case"dragleave":Fc=null;break;case"mouseover":case"mouseout":_p=null;break;case"pointerover":case"pointerout":c_.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":a0.delete(y.pointerId)}}function u_(p,y,O,M,V,G){return p===null||p.nativeEvent!==G?(p={blockedOn:y,domEventName:O,eventSystemFlags:M,nativeEvent:G,targetContainers:[V]},y!==null&&(y=su(y),y!==null&&CE(y)),p):(p.eventSystemFlags|=M,y=p.targetContainers,V!==null&&y.indexOf(V)===-1&&y.push(V),p)}function FI(p,y,O,M,V){switch(y){case"focusin":return vp=u_(vp,p,y,O,M,V),!0;case"dragenter":return Fc=u_(Fc,p,y,O,M,V),!0;case"mouseover":return _p=u_(_p,p,y,O,M,V),!0;case"pointerover":var G=V.pointerId;return c_.set(G,u_(c_.get(G)||null,p,y,O,M,V)),!0;case"gotpointercapture":return G=V.pointerId,a0.set(G,u_(a0.get(G)||null,p,y,O,M,V)),!0}return!1}function AE(p){var y=pc(p.target);if(y!==null){var O=o(y);if(O!==null){if(y=O.tag,y===13){if(y=a(O),y!==null){p.blockedOn=y,Ds(p.priority,function(){TE(O)});return}}else if(y===31){if(y=s(O),y!==null){p.blockedOn=y,Ds(p.priority,function(){TE(O)});return}}else if(y===3&&O.stateNode.current.memoizedState.isDehydrated){p.blockedOn=O.tag===3?O.stateNode.containerInfo:null;return}}}p.blockedOn=null}function h_(p){if(p.blockedOn!==null)return!1;for(var y=p.targetContainers;0<y.length;){var O=l_(p.nativeEvent);if(O===null){O=p.nativeEvent;var M=new O.constructor(O.type,O);lv=M,O.target.dispatchEvent(M),lv=null}else return y=su(O),y!==null&&CE(y),p.blockedOn=O,!1;y.shift()}return!0}function PE(p,y,O){h_(p)&&O.delete(y)}function d_(){Yx=!1,vp!==null&&h_(vp)&&(vp=null),Fc!==null&&h_(Fc)&&(Fc=null),_p!==null&&h_(_p)&&(_p=null),c_.forEach(PE),a0.forEach(PE)}function Kx(p,y){p.blockedOn===y&&(p.blockedOn=null,Yx||(Yx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,d_)))}var Jx=null;function ME(p){Jx!==p&&(Jx=p,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Jx===p&&(Jx=null);for(var y=0;y<p.length;y+=3){var O=p[y],M=p[y+1],V=p[y+2];if(typeof M!="function"){if(Xx(M||O)===null)continue;break}var G=su(O);G!==null&&(p.splice(y,3),y-=3,so(G,{pending:!0,data:V,method:O.method,action:M},M,V))}}))}function bp(p){function y(et){return Kx(et,p)}vp!==null&&Kx(vp,p),Fc!==null&&Kx(Fc,p),_p!==null&&Kx(_p,p),c_.forEach(y),a0.forEach(y);for(var O=0;O<Wd.length;O++){var M=Wd[O];M.blockedOn===p&&(M.blockedOn=null)}for(;0<Wd.length&&(O=Wd[0],O.blockedOn===null);)AE(O),O.blockedOn===null&&Wd.shift();if(O=(p.ownerDocument||p).$$reactFormReplay,O!=null)for(M=0;M<O.length;M+=3){var V=O[M],G=O[M+1],de=V[tn]||null;if(typeof G=="function")de||ME(O);else if(de){var Pe=null;if(G&&G.hasAttribute("formAction")){if(V=G,de=G[tn]||null)Pe=de.formAction;else if(Xx(V)!==null)continue}else Pe=de.action;typeof Pe=="function"?O[M+1]=Pe:(O.splice(M,3),M-=3),ME(O)}}}function ZS(){function p(G){G.canIntercept&&G.info==="react-transition"&&G.intercept({handler:function(){return new Promise(function(de){return V=de})},focusReset:"manual",scroll:"manual"})}function y(){V!==null&&(V(),V=null),M||setTimeout(O,20)}function O(){if(!M&&!navigation.transition){var G=navigation.currentEntry;G&&G.url!=null&&navigation.navigate(G.url,{state:G.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var M=!1,V=null;return navigation.addEventListener("navigate",p),navigation.addEventListener("navigatesuccess",y),navigation.addEventListener("navigateerror",y),setTimeout(O,100),function(){M=!0,navigation.removeEventListener("navigate",p),navigation.removeEventListener("navigatesuccess",y),navigation.removeEventListener("navigateerror",y),V!==null&&(V(),V=null)}}}function qS(p){this._internalRoot=p}e1.prototype.render=qS.prototype.render=function(p){var y=this._internalRoot;if(y===null)throw Error(r(409));var O=y.current,M=wl();SE(O,M,p,y,null,null)},e1.prototype.unmount=qS.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var y=p.containerInfo;SE(p.current,2,null,p,null,null),Uv(),y[ir]=null}};function e1(p){this._internalRoot=p}e1.prototype.unstable_scheduleHydration=function(p){if(p){var y=Is();p={blockedOn:null,target:p,priority:y};for(var O=0;O<Wd.length&&y!==0&&y<Wd[O].priority;O++);Wd.splice(O,0,p),O===0&&AE(p)}};var WS=e.version;if(WS!=="19.2.3")throw Error(r(527,WS,"19.2.3"));ke.findDOMNode=function(p){var y=p._reactInternals;if(y===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=f(y),p=p!==null?g(p):null,p=p===null?null:p.stateNode,p};var RE={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:_e,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var t1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t1.isDisabled&&t1.supportsFiber)try{tt=t1.inject(RE),Ye=t1}catch{}}return JS.createRoot=function(p,y){if(!i(p))throw Error(r(299));var O=!1,M="",V=Fy,G=xu,de=wu;return y!=null&&(y.unstable_strictMode===!0&&(O=!0),y.identifierPrefix!==void 0&&(M=y.identifierPrefix),y.onUncaughtError!==void 0&&(V=y.onUncaughtError),y.onCaughtError!==void 0&&(G=y.onCaughtError),y.onRecoverableError!==void 0&&(de=y.onRecoverableError)),y=QS(p,1,!1,null,null,O,M,null,V,G,de,ZS),p[ir]=y.current,SS(p),new qS(y)},JS.hydrateRoot=function(p,y,O){if(!i(p))throw Error(r(299));var M=!1,V="",G=Fy,de=xu,Pe=wu,et=null;return O!=null&&(O.unstable_strictMode===!0&&(M=!0),O.identifierPrefix!==void 0&&(V=O.identifierPrefix),O.onUncaughtError!==void 0&&(G=O.onUncaughtError),O.onCaughtError!==void 0&&(de=O.onCaughtError),O.onRecoverableError!==void 0&&(Pe=O.onRecoverableError),O.formState!==void 0&&(et=O.formState)),y=QS(p,1,!0,y,O??null,M,V,et,G,de,Pe,ZS),y.context=OE(null),O=y.current,M=wl(),M=ld(M),V=Dc(M),V.callback=null,gu(O,V,M),O=M,y.current.lanes=O,ti(y,O),Cu(y),p[ir]=y.current,SS(p),new e1(y)},JS.version="19.2.3",JS}var TF;function gue(){if(TF)return KI.exports;TF=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),KI.exports=mue(),KI.exports}var yue=gue();var kF="popstate";function vue(t={}){function e(r,i){let{pathname:o,search:a,hash:s}=r.location;return QL("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:SC(i)}return bue(e,n,null,t)}function Zo(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xu(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _ue(){return Math.random().toString(36).substring(2,10)}function EF(t,e){return{usr:t.state,key:t.key,idx:e}}function QL(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?lO(e):e,state:n,key:e&&e.key||r||_ue()}}function SC({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function lO(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function bue(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s="POP",u=null,f=g();f==null&&(f=0,a.replaceState({...a.state,idx:f},""));function g(){return(a.state||{idx:null}).idx}function _(){s="POP";let R=g(),$=R==null?null:R-f;f=R,u&&u({action:s,location:A.location,delta:$})}function w(R,$){s="PUSH";let z=QL(A.location,R,$);f=g()+1;let B=EF(z,f),F=A.createHref(z);try{a.pushState(B,"",F)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(F)}o&&u&&u({action:s,location:A.location,delta:1})}function S(R,$){s="REPLACE";let z=QL(A.location,R,$);f=g();let B=EF(z,f),F=A.createHref(z);a.replaceState(B,"",F),o&&u&&u({action:s,location:A.location,delta:0})}function E(R){return xue(R)}let A={get action(){return s},get location(){return t(i,a)},listen(R){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(kF,_),u=R,()=>{i.removeEventListener(kF,_),u=null}},createHref(R){return e(i,R)},createURL:E,encodeLocation(R){let $=E(R);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:w,replace:S,go(R){return a.go(R)}};return A}function xue(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Zo(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:SC(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function nG(t,e,n="/"){return wue(t,e,n,!1)}function wue(t,e,n,r){let i=typeof e=="string"?lO(e):e,o=jg(i.pathname||"/",n);if(o==null)return null;let a=rG(t);Oue(a);let s=null;for(let u=0;s==null&&u<a.length;++u){let f=Due(o);s=Rue(a[u],f,r)}return s}function rG(t,e=[],n=[],r="",i=!1){let o=(a,s,u=i,f)=>{let g={relativePath:f===void 0?a.path||"":f,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&u)return;Zo(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let _=$g([r,g.relativePath]),w=n.concat(g);a.children&&a.children.length>0&&(Zo(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),rG(a.children,e,w,_,u)),!(a.path==null&&!a.index)&&e.push({path:_,score:Pue(_,a.index),routesMeta:w})};return t.forEach((a,s)=>{if(a.path===""||!a.path?.includes("?"))o(a,s);else for(let u of iG(a.path))o(a,s,!0,u)}),e}function iG(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=iG(r.join("/")),s=[];return s.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&s.push(...a),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function Oue(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Mue(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Sue=/^:[\w-]+$/,Cue=3,Tue=2,kue=1,Eue=10,Aue=-2,AF=t=>t==="*";function Pue(t,e){let n=t.split("/"),r=n.length;return n.some(AF)&&(r+=Aue),e&&(r+=Tue),n.filter(i=>!AF(i)).reduce((i,o)=>i+(Sue.test(o)?Cue:o===""?kue:Eue),r)}function Mue(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Rue(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",a=[];for(let s=0;s<r.length;++s){let u=r[s],f=s===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",_=NP({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},g),w=u.route;if(!_&&f&&n&&!r[r.length-1].route.index&&(_=NP({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},g)),!_)return null;Object.assign(i,_.params),a.push({params:i,pathname:$g([o,_.pathname]),pathnameBase:Nue($g([o,_.pathnameBase])),route:w}),_.pathnameBase!=="/"&&(o=$g([o,_.pathnameBase]))}return a}function NP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Iue(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((f,{paramName:g,isOptional:_},w)=>{if(g==="*"){let E=s[w]||"";a=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const S=s[w];return _&&!S?f[g]=void 0:f[g]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function Iue(t,e=!1,n=!0){Xu(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Due(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xu(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function jg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var oG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lue=t=>oG.test(t);function $ue(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?lO(t):t,o;if(n)if(Lue(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Xu(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?o=PF(n.substring(1),"/"):o=PF(n,e)}else o=e;return{pathname:o,search:Bue(r),hash:Fue(i)}}function PF(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function n3(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zue(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _6(t){let e=zue(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function b6(t,e,n,r=!1){let i;typeof t=="string"?i=lO(t):(i={...t},Zo(!i.pathname||!i.pathname.includes("?"),n3("?","pathname","search",i)),Zo(!i.pathname||!i.pathname.includes("#"),n3("#","pathname","hash",i)),Zo(!i.search||!i.search.includes("#"),n3("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=n;else{let _=e.length-1;if(!r&&a.startsWith("..")){let w=a.split("/");for(;w[0]==="..";)w.shift(),_-=1;i.pathname=w.join("/")}s=_>=0?e[_]:"/"}let u=$ue(i,s),f=a&&a!=="/"&&a.endsWith("/"),g=(o||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(f||g)&&(u.pathname+="/"),u}var $g=t=>t.join("/").replace(/\/\/+/g,"/"),Nue=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Bue=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Fue=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,jue=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Vue(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Que(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var sG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function aG(t,e){let n=t;if(typeof n!="string"||!oG.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(sG)try{let o=new URL(window.location.href),a=n.startsWith("//")?new URL(o.protocol+n):new URL(n),s=jg(a.pathname,e);a.origin===o.origin&&s!=null?n=s+a.search+a.hash:i=!0}catch{Xu(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var lG=["POST","PUT","PATCH","DELETE"];new Set(lG);var Uue=["GET",...lG];new Set(Uue);var cO=Q.createContext(null);cO.displayName="DataRouter";var EM=Q.createContext(null);EM.displayName="DataRouterState";var Zue=Q.createContext(!1),cG=Q.createContext({isTransitioning:!1});cG.displayName="ViewTransition";var que=Q.createContext(new Map);que.displayName="Fetchers";var Wue=Q.createContext(null);Wue.displayName="Await";var th=Q.createContext(null);th.displayName="Navigation";var LT=Q.createContext(null);LT.displayName="Location";var cm=Q.createContext({outlet:null,matches:[],isDataRoute:!1});cm.displayName="Route";var x6=Q.createContext(null);x6.displayName="RouteError";var uG="REACT_ROUTER_ERROR",Hue="REDIRECT",Gue="ROUTE_ERROR_RESPONSE";function Xue(t){if(t.startsWith(`${uG}:${Hue}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Yue(t){if(t.startsWith(`${uG}:${Gue}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new jue(e.status,e.statusText,e.data)}catch{}}function Kue(t,{relative:e}={}){Zo(uO(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=Q.useContext(th),{hash:i,pathname:o,search:a}=zT(t,{relative:e}),s=o;return n!=="/"&&(s=o==="/"?n:$g([n,o])),r.createHref({pathname:s,search:a,hash:i})}function uO(){return Q.useContext(LT)!=null}function um(){return Zo(uO(),"useLocation() may be used only in the context of a <Router> component."),Q.useContext(LT).location}var hG="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dG(t){Q.useContext(th).static||Q.useLayoutEffect(t)}function $T(){let{isDataRoute:t}=Q.useContext(cm);return t?hhe():Jue()}function Jue(){Zo(uO(),"useNavigate() may be used only in the context of a <Router> component.");let t=Q.useContext(cO),{basename:e,navigator:n}=Q.useContext(th),{matches:r}=Q.useContext(cm),{pathname:i}=um(),o=JSON.stringify(_6(r)),a=Q.useRef(!1);return dG(()=>{a.current=!0}),Q.useCallback((u,f={})=>{if(Xu(a.current,hG),!a.current)return;if(typeof u=="number"){n.go(u);return}let g=b6(u,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:$g([e,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[e,n,o,i,t])}Q.createContext(null);function zT(t,{relative:e}={}){let{matches:n}=Q.useContext(cm),{pathname:r}=um(),i=JSON.stringify(_6(n));return Q.useMemo(()=>b6(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function ehe(t,e){return fG(t,e)}function fG(t,e,n,r,i){Zo(uO(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=Q.useContext(th),{matches:a}=Q.useContext(cm),s=a[a.length-1],u=s?s.params:{},f=s?s.pathname:"/",g=s?s.pathnameBase:"/",_=s&&s.route;{let z=_&&_.path||"";mG(f,!_||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let w=um(),S;if(e){let z=typeof e=="string"?lO(e):e;Zo(g==="/"||z.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${z.pathname}" was given in the \`location\` prop.`),S=z}else S=w;let E=S.pathname||"/",A=E;if(g!=="/"){let z=g.replace(/^\//,"").split("/");A="/"+E.replace(/^\//,"").split("/").slice(z.length).join("/")}let R=nG(t,{pathname:A});Xu(_||R!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Xu(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=ohe(R&&R.map(z=>Object.assign({},z,{params:Object.assign({},u,z.params),pathname:$g([g,o.encodeLocation?o.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:$g([g,o.encodeLocation?o.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),a,n,r,i);return e&&$?Q.createElement(LT.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},$):$}function the(){let t=uhe(),e=Vue(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=Q.createElement(Q.Fragment,null,Q.createElement("p",null," Hey developer "),Q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Q.createElement("code",{style:o},"ErrorBoundary")," or"," ",Q.createElement("code",{style:o},"errorElement")," prop on your route.")),Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),n?Q.createElement("pre",{style:i},n):null,a)}var nhe=Q.createElement(the,null),pG=class extends Q.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Yue(t.digest);n&&(t=n)}let e=t!==void 0?Q.createElement(cm.Provider,{value:this.props.routeContext},Q.createElement(x6.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?Q.createElement(rhe,{error:t},e):e}};pG.contextType=Zue;var r3=new WeakMap;function rhe({children:t,error:e}){let{basename:n}=Q.useContext(th);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Xue(e.digest);if(r){let i=r3.get(e);if(i)throw i;let o=aG(r.location,n);if(sG&&!r3.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw r3.set(e,a),a}return Q.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return t}function ihe({routeContext:t,match:e,children:n}){let r=Q.useContext(cO);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Q.createElement(cm.Provider,{value:t},n)}function ohe(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=n?.errors;if(a!=null){let g=o.findIndex(_=>_.route.id&&a?.[_.route.id]!==void 0);Zo(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let s=!1,u=-1;if(n)for(let g=0;g<o.length;g++){let _=o[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(u=g),_.route.id){let{loaderData:w,errors:S}=n,E=_.route.loader&&!w.hasOwnProperty(_.route.id)&&(!S||S[_.route.id]===void 0);if(_.route.lazy||E){s=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}let f=n&&r?(g,_)=>{r(g,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Que(n.matches),errorInfo:_})}:void 0;return o.reduceRight((g,_,w)=>{let S,E=!1,A=null,R=null;n&&(S=a&&_.route.id?a[_.route.id]:void 0,A=_.route.errorElement||nhe,s&&(u<0&&w===0?(mG("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,R=null):u===w&&(E=!0,R=_.route.hydrateFallbackElement||null)));let $=e.concat(o.slice(0,w+1)),z=()=>{let B;return S?B=A:E?B=R:_.route.Component?B=Q.createElement(_.route.Component,null):_.route.element?B=_.route.element:B=g,Q.createElement(ihe,{match:_,routeContext:{outlet:g,matches:$,isDataRoute:n!=null},children:B})};return n&&(_.route.ErrorBoundary||_.route.errorElement||w===0)?Q.createElement(pG,{location:n.location,revalidation:n.revalidation,component:A,error:S,children:z(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:f}):z()},null)}function w6(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function she(t){let e=Q.useContext(cO);return Zo(e,w6(t)),e}function ahe(t){let e=Q.useContext(EM);return Zo(e,w6(t)),e}function lhe(t){let e=Q.useContext(cm);return Zo(e,w6(t)),e}function O6(t){let e=lhe(t),n=e.matches[e.matches.length-1];return Zo(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function che(){return O6("useRouteId")}function uhe(){let t=Q.useContext(x6),e=ahe("useRouteError"),n=O6("useRouteError");return t!==void 0?t:e.errors?.[n]}function hhe(){let{router:t}=she("useNavigate"),e=O6("useNavigate"),n=Q.useRef(!1);return dG(()=>{n.current=!0}),Q.useCallback(async(i,o={})=>{Xu(n.current,hG),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var MF={};function mG(t,e,n){!e&&!MF[t]&&(MF[t]=!0,Xu(!1,n))}Q.memo(dhe);function dhe({routes:t,future:e,state:n,onError:r}){return fG(t,void 0,n,r,e)}function fhe({to:t,replace:e,state:n,relative:r}){Zo(uO(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=Q.useContext(th);Xu(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=Q.useContext(cm),{pathname:a}=um(),s=$T(),u=b6(t,_6(o),a,r==="path"),f=JSON.stringify(u);return Q.useEffect(()=>{s(JSON.parse(f),{replace:e,state:n,relative:r})},[s,f,r,e,n]),null}function kp(t){Zo(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function phe({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:a}){Zo(!uO(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),u=Q.useMemo(()=>({basename:s,navigator:i,static:o,unstable_useTransitions:a,future:{}}),[s,i,o,a]);typeof n=="string"&&(n=lO(n));let{pathname:f="/",search:g="",hash:_="",state:w=null,key:S="default"}=n,E=Q.useMemo(()=>{let A=jg(f,s);return A==null?null:{location:{pathname:A,search:g,hash:_,state:w,key:S},navigationType:r}},[s,f,g,_,w,S,r]);return Xu(E!=null,`<Router basename="${s}"> is not able to match the URL "${f}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:Q.createElement(th.Provider,{value:u},Q.createElement(LT.Provider,{children:e,value:E}))}function RF({children:t,location:e}){return ehe(UL(t),e)}function UL(t,e=[]){let n=[];return Q.Children.forEach(t,(r,i)=>{if(!Q.isValidElement(r))return;let o=[...e,i];if(r.type===Q.Fragment){n.push.apply(n,UL(r.props.children,o));return}Zo(r.type===kp,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zo(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=UL(r.props.children,o)),n.push(a)}),n}var KA="get",JA="application/x-www-form-urlencoded";function AM(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function mhe(t){return AM(t)&&t.tagName.toLowerCase()==="button"}function ghe(t){return AM(t)&&t.tagName.toLowerCase()==="form"}function yhe(t){return AM(t)&&t.tagName.toLowerCase()==="input"}function vhe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _he(t,e){return t.button===0&&(!e||e==="_self")&&!vhe(t)}function ZL(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function bhe(t,e){let n=ZL(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}var LE=null;function xhe(){if(LE===null)try{new FormData(document.createElement("form"),0),LE=!1}catch{LE=!0}return LE}var whe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function i3(t){return t!=null&&!whe.has(t)?(Xu(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${JA}"`),null):t}function Ohe(t,e){let n,r,i,o,a;if(ghe(t)){let s=t.getAttribute("action");r=s?jg(s,e):null,n=t.getAttribute("method")||KA,i=i3(t.getAttribute("enctype"))||JA,o=new FormData(t)}else if(mhe(t)||yhe(t)&&(t.type==="submit"||t.type==="image")){let s=t.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||s.getAttribute("action");if(r=u?jg(u,e):null,n=t.getAttribute("formmethod")||s.getAttribute("method")||KA,i=i3(t.getAttribute("formenctype"))||i3(s.getAttribute("enctype"))||JA,o=new FormData(s,t),!xhe()){let{name:f,type:g,value:_}=t;if(g==="image"){let w=f?`${f}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else f&&o.append(f,_)}}else{if(AM(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=KA,r=null,i=JA,a=t}return o&&i==="text/plain"&&(a=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function S6(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function She(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&jg(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Che(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function The(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function khe(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let a=await Che(o,n);return a.links?a.links():[]}return[]}));return Mhe(r.flat(1).filter(The).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function IF(t,e,n,r,i,o){let a=(u,f)=>n[f]?u.route.id!==n[f].route.id:!0,s=(u,f)=>n[f].pathname!==u.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==u.params["*"];return o==="assets"?e.filter((u,f)=>a(u,f)||s(u,f)):o==="data"?e.filter((u,f)=>{let g=r.routes[u.route.id];if(!g||!g.hasLoader)return!1;if(a(u,f)||s(u,f))return!0;if(u.route.shouldRevalidate){let _=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function Ehe(t,e,{includeHydrateFallback:n}={}){return Ahe(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function Ahe(t){return[...new Set(t)]}function Phe(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Mhe(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(Phe(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function gG(){let t=Q.useContext(cO);return S6(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Rhe(){let t=Q.useContext(EM);return S6(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var C6=Q.createContext(void 0);C6.displayName="FrameworkContext";function yG(){let t=Q.useContext(C6);return S6(t,"You must render this element inside a <HydratedRouter> element"),t}function Ihe(t,e){let n=Q.useContext(C6),[r,i]=Q.useState(!1),[o,a]=Q.useState(!1),{onFocus:s,onBlur:u,onMouseEnter:f,onMouseLeave:g,onTouchStart:_}=e,w=Q.useRef(null);Q.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let A=$=>{$.forEach(z=>{a(z.isIntersecting)})},R=new IntersectionObserver(A,{threshold:.5});return w.current&&R.observe(w.current),()=>{R.disconnect()}}},[t]),Q.useEffect(()=>{if(r){let A=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(A)}}},[r]);let S=()=>{i(!0)},E=()=>{i(!1),a(!1)};return n?t!=="intent"?[o,w,{}]:[o,w,{onFocus:e2(s,S),onBlur:e2(u,E),onMouseEnter:e2(f,S),onMouseLeave:e2(g,E),onTouchStart:e2(_,S)}]:[!1,w,{}]}function e2(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Dhe({page:t,...e}){let{router:n}=gG(),r=Q.useMemo(()=>nG(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?Q.createElement($he,{page:t,matches:r,...e}):null}function Lhe(t){let{manifest:e,routeModules:n}=yG(),[r,i]=Q.useState([]);return Q.useEffect(()=>{let o=!1;return khe(t,e,n).then(a=>{o||i(a)}),()=>{o=!0}},[t,e,n]),r}function $he({page:t,matches:e,...n}){let r=um(),{manifest:i,routeModules:o}=yG(),{basename:a}=gG(),{loaderData:s,matches:u}=Rhe(),f=Q.useMemo(()=>IF(t,e,u,i,r,"data"),[t,e,u,i,r]),g=Q.useMemo(()=>IF(t,e,u,i,r,"assets"),[t,e,u,i,r]),_=Q.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let E=new Set,A=!1;if(e.forEach($=>{let z=i.routes[$.route.id];!z||!z.hasLoader||(!f.some(B=>B.route.id===$.route.id)&&$.route.id in s&&o[$.route.id]?.shouldRevalidate||z.hasClientLoader?A=!0:E.add($.route.id))}),E.size===0)return[];let R=She(t,a,"data");return A&&E.size>0&&R.searchParams.set("_routes",e.filter($=>E.has($.route.id)).map($=>$.route.id).join(",")),[R.pathname+R.search]},[a,s,r,i,f,e,t,o]),w=Q.useMemo(()=>Ehe(g,i),[g,i]),S=Lhe(g);return Q.createElement(Q.Fragment,null,_.map(E=>Q.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),w.map(E=>Q.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),S.map(({key:E,link:A})=>Q.createElement("link",{key:E,nonce:n.nonce,...A})))}function zhe(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Nhe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Nhe&&(window.__reactRouterVersion="7.11.0")}catch{}function Bhe({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=Q.useRef();i.current==null&&(i.current=vue({window:r,v5Compat:!0}));let o=i.current,[a,s]=Q.useState({action:o.action,location:o.location}),u=Q.useCallback(f=>{n===!1?s(f):Q.startTransition(()=>s(f))},[n]);return Q.useLayoutEffect(()=>o.listen(u),[o,u]),Q.createElement(phe,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:o,unstable_useTransitions:n})}var vG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sf=Q.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:a,state:s,target:u,to:f,preventScrollReset:g,viewTransition:_,unstable_defaultShouldRevalidate:w,...S},E){let{basename:A,unstable_useTransitions:R}=Q.useContext(th),$=typeof f=="string"&&vG.test(f),z=aG(f,A);f=z.to;let B=Kue(f,{relative:i}),[F,U,q]=Ihe(r,S),H=Qhe(f,{replace:a,state:s,target:u,preventScrollReset:g,relative:i,viewTransition:_,unstable_defaultShouldRevalidate:w,unstable_useTransitions:R});function ne(ce){e&&e(ce),ce.defaultPrevented||H(ce)}let ie=Q.createElement("a",{...S,...q,href:z.absoluteURL||B,onClick:z.isExternal||o?e:ne,ref:zhe(E,U),target:u,"data-discover":!$&&n==="render"?"true":void 0});return F&&!$?Q.createElement(Q.Fragment,null,ie,Q.createElement(Dhe,{page:B})):ie});sf.displayName="Link";var Fhe=Q.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:a,viewTransition:s,children:u,...f},g){let _=zT(a,{relative:f.relative}),w=um(),S=Q.useContext(EM),{navigator:E,basename:A}=Q.useContext(th),R=S!=null&&Ghe(_)&&s===!0,$=E.encodeLocation?E.encodeLocation(_).pathname:_.pathname,z=w.pathname,B=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;n||(z=z.toLowerCase(),B=B?B.toLowerCase():null,$=$.toLowerCase()),B&&A&&(B=jg(B,A)||B);const F=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let U=z===$||!i&&z.startsWith($)&&z.charAt(F)==="/",q=B!=null&&(B===$||!i&&B.startsWith($)&&B.charAt($.length)==="/"),H={isActive:U,isPending:q,isTransitioning:R},ne=U?e:void 0,ie;typeof r=="function"?ie=r(H):ie=[r,U?"active":null,q?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let ce=typeof o=="function"?o(H):o;return Q.createElement(sf,{...f,"aria-current":ne,className:ie,ref:g,style:ce,to:a,viewTransition:s},typeof u=="function"?u(H):u)});Fhe.displayName="NavLink";var jhe=Q.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:a=KA,action:s,onSubmit:u,relative:f,preventScrollReset:g,viewTransition:_,unstable_defaultShouldRevalidate:w,...S},E)=>{let{unstable_useTransitions:A}=Q.useContext(th),R=Whe(),$=Hhe(s,{relative:f}),z=a.toLowerCase()==="get"?"get":"post",B=typeof s=="string"&&vG.test(s),F=U=>{if(u&&u(U),U.defaultPrevented)return;U.preventDefault();let q=U.nativeEvent.submitter,H=q?.getAttribute("formmethod")||a,ne=()=>R(q||U.currentTarget,{fetcherKey:e,method:H,navigate:n,replace:i,state:o,relative:f,preventScrollReset:g,viewTransition:_,unstable_defaultShouldRevalidate:w});A&&n!==!1?Q.startTransition(()=>ne()):ne()};return Q.createElement("form",{ref:E,method:z,action:$,onSubmit:r?u:F,...S,"data-discover":!B&&t==="render"?"true":void 0})});jhe.displayName="Form";function Vhe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _G(t){let e=Q.useContext(cO);return Zo(e,Vhe(t)),e}function Qhe(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:s,unstable_useTransitions:u}={}){let f=$T(),g=um(),_=zT(t,{relative:o});return Q.useCallback(w=>{if(_he(w,e)){w.preventDefault();let S=n!==void 0?n:SC(g)===SC(_),E=()=>f(t,{replace:S,state:r,preventScrollReset:i,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:s});u?Q.startTransition(()=>E()):E()}},[g,f,_,n,r,e,t,i,o,a,s,u])}function Uhe(t){Xu(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=Q.useRef(ZL(t)),n=Q.useRef(!1),r=um(),i=Q.useMemo(()=>bhe(r.search,n.current?null:e.current),[r.search]),o=$T(),a=Q.useCallback((s,u)=>{const f=ZL(typeof s=="function"?s(new URLSearchParams(i)):s);n.current=!0,o("?"+f,u)},[o,i]);return[i,a]}var Zhe=0,qhe=()=>`__${String(++Zhe)}__`;function Whe(){let{router:t}=_G("useSubmit"),{basename:e}=Q.useContext(th),n=che(),r=t.fetch,i=t.navigate;return Q.useCallback(async(o,a={})=>{let{action:s,method:u,encType:f,formData:g,body:_}=Ohe(o,e);if(a.navigate===!1){let w=a.fetcherKey||qhe();await r(w,n,a.action||s,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:g,body:_,formMethod:a.method||u,formEncType:a.encType||f,flushSync:a.flushSync})}else await i(a.action||s,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:g,body:_,formMethod:a.method||u,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,e,n])}function Hhe(t,{relative:e}={}){let{basename:n}=Q.useContext(th),r=Q.useContext(cm);Zo(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...zT(t||".",{relative:e})},a=um();if(t==null){o.search=a.search;let s=new URLSearchParams(o.search),u=s.getAll("index");if(u.some(g=>g==="")){s.delete("index"),u.filter(_=>_).forEach(_=>s.append("index",_));let g=s.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:$g([n,o.pathname])),SC(o)}function Ghe(t,{relative:e}={}){let n=Q.useContext(cG);Zo(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=_G("useViewTransitionState"),i=zT(t,{relative:e});if(!n.isTransitioning)return!1;let o=jg(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=jg(n.nextLocation.pathname,r)||n.nextLocation.pathname;return NP(i.pathname,a)!=null||NP(i.pathname,o)!=null}var tm=tG();const A2=aO(tm);var eP={exports:{}};var Xhe=eP.exports,DF;function Yhe(){return DF||(DF=1,(function(t,e){(function(n,r){t.exports=r()})(Xhe,(function(){var n={},r={};function i(a,s,u){if(r[a]=u,a==="index"){var f="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",g={};return r.shared(g),r.index(n,g),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([f],{type:"text/javascript"}))),n}}i("shared",["exports"],(function(a){function s(d,l,h,v){return new(h||(h=Promise))((function(x,T){function k(Z){try{N(v.next(Z))}catch(X){T(X)}}function D(Z){try{N(v.throw(Z))}catch(X){T(X)}}function N(Z){var X;Z.done?x(Z.value):(X=Z.value,X instanceof h?X:new h((function(ee){ee(X)}))).then(k,D)}N((v=v.apply(d,l||[])).next())}))}function u(d,l){this.x=d,this.y=l}function f(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var g,_;typeof SuppressedError=="function"&&SuppressedError,u.prototype={clone(){return new u(this.x,this.y)},add(d){return this.clone()._add(d)},sub(d){return this.clone()._sub(d)},multByPoint(d){return this.clone()._multByPoint(d)},divByPoint(d){return this.clone()._divByPoint(d)},mult(d){return this.clone()._mult(d)},div(d){return this.clone()._div(d)},rotate(d){return this.clone()._rotate(d)},rotateAround(d,l){return this.clone()._rotateAround(d,l)},matMult(d){return this.clone()._matMult(d)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(d){return this.x===d.x&&this.y===d.y},dist(d){return Math.sqrt(this.distSqr(d))},distSqr(d){const l=d.x-this.x,h=d.y-this.y;return l*l+h*h},angle(){return Math.atan2(this.y,this.x)},angleTo(d){return Math.atan2(this.y-d.y,this.x-d.x)},angleWith(d){return this.angleWithSep(d.x,d.y)},angleWithSep(d,l){return Math.atan2(this.x*l-this.y*d,this.x*d+this.y*l)},_matMult(d){const l=d[2]*this.x+d[3]*this.y;return this.x=d[0]*this.x+d[1]*this.y,this.y=l,this},_add(d){return this.x+=d.x,this.y+=d.y,this},_sub(d){return this.x-=d.x,this.y-=d.y,this},_mult(d){return this.x*=d,this.y*=d,this},_div(d){return this.x/=d,this.y/=d,this},_multByPoint(d){return this.x*=d.x,this.y*=d.y,this},_divByPoint(d){return this.x/=d.x,this.y/=d.y,this},_unit(){return this._div(this.mag()),this},_perp(){const d=this.y;return this.y=this.x,this.x=-d,this},_rotate(d){const l=Math.cos(d),h=Math.sin(d),v=h*this.x+l*this.y;return this.x=l*this.x-h*this.y,this.y=v,this},_rotateAround(d,l){const h=Math.cos(d),v=Math.sin(d),x=l.y+v*(this.x-l.x)+h*(this.y-l.y);return this.x=l.x+h*(this.x-l.x)-v*(this.y-l.y),this.y=x,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:u},u.convert=function(d){if(d instanceof u)return d;if(Array.isArray(d))return new u(+d[0],+d[1]);if(d.x!==void 0&&d.y!==void 0)return new u(+d.x,+d.y);throw new Error("Expected [x, y] or {x, y} point format")};var w=(function(){if(_)return g;function d(l,h,v,x){this.cx=3*l,this.bx=3*(v-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(x-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=h,this.p2x=v,this.p2y=x}return _=1,g=d,d.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,h){if(h===void 0&&(h=1e-6),l<0)return 0;if(l>1)return 1;for(var v=l,x=0;x<8;x++){var T=this.sampleCurveX(v)-l;if(Math.abs(T)<h)return v;var k=this.sampleCurveDerivativeX(v);if(Math.abs(k)<1e-6)break;v-=T/k}var D=0,N=1;for(v=l,x=0;x<20&&(T=this.sampleCurveX(v),!(Math.abs(T-l)<h));x++)l>T?D=v:N=v,v=.5*(N-D)+D;return v},solve:function(l,h){return this.sampleCurveY(this.solveCurveX(l,h))}},g})(),S=f(w);let E,A;function R(){return E==null&&(E=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),E}function $(){if(A==null&&(A=!1,R())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let v=0;v<25;v++){const x=4*v;l.fillStyle=`rgb(${x},${x+1},${x+2})`,l.fillRect(v%5,Math.floor(v/5),1,1)}const h=l.getImageData(0,0,5,5).data;for(let v=0;v<100;v++)if(v%4!=3&&h[v]!==v){A=!0;break}}}return A||!1}var z=1e-6,B=typeof Float32Array<"u"?Float32Array:Array;function F(){var d=new B(9);return B!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d}function U(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function q(){var d=new B(3);return B!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d}function H(d){var l=d[0],h=d[1],v=d[2];return Math.sqrt(l*l+h*h+v*v)}function ne(d,l,h){var v=new B(3);return v[0]=d,v[1]=l,v[2]=h,v}function ie(d,l,h){return d[0]=l[0]+h[0],d[1]=l[1]+h[1],d[2]=l[2]+h[2],d}function ce(d,l,h){return d[0]=l[0]*h,d[1]=l[1]*h,d[2]=l[2]*h,d}function xe(d,l,h){var v=l[0],x=l[1],T=l[2],k=h[0],D=h[1],N=h[2];return d[0]=x*N-T*D,d[1]=T*k-v*N,d[2]=v*D-x*k,d}var re,me=H;function Te(d,l,h){var v=l[0],x=l[1],T=l[2],k=l[3];return d[0]=h[0]*v+h[4]*x+h[8]*T+h[12]*k,d[1]=h[1]*v+h[5]*x+h[9]*T+h[13]*k,d[2]=h[2]*v+h[6]*x+h[10]*T+h[14]*k,d[3]=h[3]*v+h[7]*x+h[11]*T+h[15]*k,d}function ye(){var d=new B(4);return B!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function _e(d,l,h,v){var x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",T=Math.PI/360;l*=T,v*=T,h*=T;var k=Math.sin(l),D=Math.cos(l),N=Math.sin(h),Z=Math.cos(h),X=Math.sin(v),ee=Math.cos(v);switch(x){case"xyz":d[0]=k*Z*ee+D*N*X,d[1]=D*N*ee-k*Z*X,d[2]=D*Z*X+k*N*ee,d[3]=D*Z*ee-k*N*X;break;case"xzy":d[0]=k*Z*ee-D*N*X,d[1]=D*N*ee-k*Z*X,d[2]=D*Z*X+k*N*ee,d[3]=D*Z*ee+k*N*X;break;case"yxz":d[0]=k*Z*ee+D*N*X,d[1]=D*N*ee-k*Z*X,d[2]=D*Z*X-k*N*ee,d[3]=D*Z*ee+k*N*X;break;case"yzx":d[0]=k*Z*ee+D*N*X,d[1]=D*N*ee+k*Z*X,d[2]=D*Z*X-k*N*ee,d[3]=D*Z*ee-k*N*X;break;case"zxy":d[0]=k*Z*ee-D*N*X,d[1]=D*N*ee+k*Z*X,d[2]=D*Z*X+k*N*ee,d[3]=D*Z*ee-k*N*X;break;case"zyx":d[0]=k*Z*ee-D*N*X,d[1]=D*N*ee+k*Z*X,d[2]=D*Z*X-k*N*ee,d[3]=D*Z*ee+k*N*X;break;default:throw new Error("Unknown angle order "+x)}return d}function ke(){var d=new B(2);return B!=Float32Array&&(d[0]=0,d[1]=0),d}function Ne(d,l){var h=new B(2);return h[0]=d,h[1]=l,h}q(),re=new B(4),B!=Float32Array&&(re[0]=0,re[1]=0,re[2]=0,re[3]=0),q(),ne(1,0,0),ne(0,1,0),ye(),ye(),F(),ke();const Qe=8192;function Se(d,l,h){return l*(Qe/(d.tileSize*Math.pow(2,h-d.tileID.overscaledZ)))}function Me(d,l){return(d%l+l)%l}function Xe(d,l,h){return d*(1-h)+l*h}function Ee(d){if(d<=0)return 0;if(d>=1)return 1;const l=d*d,h=l*d;return 4*(d<.5?h:3*(d-l)+h-.75)}function ft(d,l,h,v){const x=new S(d,l,h,v);return T=>x.solve(T)}const mt=ft(.25,.1,.25,1);function ct(d,l,h){return Math.min(h,Math.max(l,d))}function st(d,l,h){const v=h-l,x=((d-l)%v+v)%v+l;return x===l?h:x}function bt(d,...l){for(const h of l)for(const v in h)d[v]=h[v];return d}let At=1;function Tt(d,l,h){const v={};for(const x in d)v[x]=l.call(this,d[x],x,d);return v}function Wt(d,l,h){const v={};for(const x in d)l.call(this,d[x],x,d)&&(v[x]=d[x]);return v}function nn(d){return Array.isArray(d)?d.map(nn):typeof d=="object"&&d?Tt(d,nn):d}const An={};function rn(d){An[d]||(typeof console<"u"&&console.warn(d),An[d]=!0)}function Jt(d,l,h){return(h.y-d.y)*(l.x-d.x)>(l.y-d.y)*(h.x-d.x)}function Mn(d){return typeof WorkerGlobalScope<"u"&&d!==void 0&&d instanceof WorkerGlobalScope}let vn=null;function Nn(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap}const lr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function rr(d,l,h,v,x){return s(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const T=new VideoFrame(d,{timestamp:0});try{const k=T?.format;if(!k||!k.startsWith("BGR")&&!k.startsWith("RGB"))throw new Error(`Unrecognized format ${k}`);const D=k.startsWith("BGR"),N=new Uint8ClampedArray(v*x*4);if(yield T.copyTo(N,(function(Z,X,ee,oe,le){const fe=4*Math.max(-X,0),pe=(Math.max(0,ee)-ee)*oe*4+fe,ve=4*oe,Ce=Math.max(0,X),Ve=Math.max(0,ee);return{rect:{x:Ce,y:Ve,width:Math.min(Z.width,X+oe)-Ce,height:Math.min(Z.height,ee+le)-Ve},layout:[{offset:pe,stride:ve}]}})(d,l,h,v,x)),D)for(let Z=0;Z<N.length;Z+=4){const X=N[Z];N[Z]=N[Z+2],N[Z+2]=X}return N}finally{T.close()}}))}let Ue,Je;function xt(d,l,h,v){return d.addEventListener(l,h,v),{unsubscribe:()=>{d.removeEventListener(l,h,v)}}}function Et(d){return d*Math.PI/180}function Vt(d){return d/Math.PI*180}const we={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ae={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Y="AbortError";class be extends Error{constructor(l=Y){super(l instanceof Error?l.message:l),this.name=Y,l instanceof Error&&l.stack&&(this.stack=l.stack)}}function $e(d){return d.name===Y}const ze={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function rt(d){return ze.REGISTERED_PROTOCOLS[d.substring(0,d.indexOf("://"))]}const tt="global-dispatcher";class Ye extends Error{constructor(l,h,v,x){super(`AJAXError: ${h} (${l}): ${v}`),this.status=l,this.statusText=h,this.url=v,this.body=x}}const at=()=>Mn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ot=function(d,l){if(/:\/\//.test(d.url)&&!/^https?:|^file:/.test(d.url)){const v=rt(d.url);if(v)return v(d,l);if(Mn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,targetMapId:tt},l)}if(!(/^file:/.test(h=d.url)||/^file:/.test(at())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(v,x){return s(this,void 0,void 0,(function*(){const T=new Request(v.url,{method:v.method||"GET",body:v.body,credentials:v.credentials,headers:v.headers,cache:v.cache,referrer:at(),signal:x.signal});let k,D;v.type!=="json"||T.headers.has("Accept")||T.headers.set("Accept","application/json");try{k=yield fetch(T)}catch(Z){throw $e(Z)?Z:new Ye(0,Z.message,v.url,new Blob)}if(!k.ok){const Z=yield k.blob();throw new Ye(k.status,k.statusText,v.url,Z)}D=v.type==="arrayBuffer"||v.type==="image"?k.arrayBuffer():v.type==="json"?k.json():k.text();const N=yield D;return x.signal.throwIfAborted(),{data:N,cacheControl:k.headers.get("Cache-Control"),expires:k.headers.get("Expires")}}))})(d,l);if(Mn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,mustQueue:!0,targetMapId:tt},l)}var h;return(function(v,x){return new Promise(((T,k)=>{var D;const N=new XMLHttpRequest;N.open(v.method||"GET",v.url,!0),v.type!=="arrayBuffer"&&v.type!=="image"||(N.responseType="arraybuffer");for(const Z in v.headers)N.setRequestHeader(Z,v.headers[Z]);v.type==="json"&&(N.responseType="text",!((D=v.headers)===null||D===void 0)&&D.Accept||N.setRequestHeader("Accept","application/json")),N.withCredentials=v.credentials==="include",N.onerror=()=>{k(new Error(N.statusText))},N.onload=()=>{if(!x.signal.aborted)if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){let Z=N.response;if(v.type==="json")try{Z=JSON.parse(N.response)}catch(X){return void k(X)}T({data:Z,cacheControl:N.getResponseHeader("Cache-Control"),expires:N.getResponseHeader("Expires")})}else{const Z=new Blob([N.response],{type:N.getResponseHeader("Content-Type")});k(new Ye(N.status,N.statusText,v.url,Z))}},x.signal.addEventListener("abort",(()=>{N.abort(),k(new be(x.signal.reason))})),N.send(v.body)}))})(d,l)};function ot(d){if(!d||d.indexOf("://")<=0||d.indexOf("data:image/")===0||d.indexOf("blob:")===0)return!0;const l=new URL(d),h=window.location;return l.protocol===h.protocol&&l.host===h.host}function $t(d,l,h){h[d]&&h[d].indexOf(l)!==-1||(h[d]=h[d]||[],h[d].push(l))}function an(d,l,h){if(h&&h[d]){const v=h[d].indexOf(l);v!==-1&&h[d].splice(v,1)}}class $n{constructor(l,h={}){bt(this,h),this.type=l}}class Er extends $n{constructor(l,h={}){super("error",bt({error:l},h))}}class Tr{on(l,h){return this._listeners=this._listeners||{},$t(l,h,this._listeners),{unsubscribe:()=>{this.off(l,h)}}}off(l,h){return an(l,h,this._listeners),an(l,h,this._oneTimeListeners),this}once(l,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},$t(l,h,this._oneTimeListeners),this):new Promise((v=>this.once(l,v)))}fire(l,h){typeof l=="string"&&(l=new $n(l,h||{}));const v=l.type;if(this.listens(v)){l.target=this;const x=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const D of x)D.call(this,l);const T=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const D of T)an(v,D,this._oneTimeListeners),D.call(this,l);const k=this._eventedParent;k&&(bt(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(l))}else l instanceof Er&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,h){return this._eventedParent=l,this._eventedParentData=h,this}}var ut={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const Ur=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function eo(d,l){const h={};for(const v in d)v!=="ref"&&(h[v]=d[v]);return Ur.forEach((v=>{v in l&&(h[v]=l[v])})),h}function Gn(d,l){if(Array.isArray(d)){if(!Array.isArray(l)||d.length!==l.length)return!1;for(let h=0;h<d.length;h++)if(!Gn(d[h],l[h]))return!1;return!0}if(typeof d=="object"&&d!==null&&l!==null){if(typeof l!="object"||Object.keys(d).length!==Object.keys(l).length)return!1;for(const h in d)if(!Gn(d[h],l[h]))return!1;return!0}return d===l}function Cn(d,l){d.push(l)}function gi(d,l,h){Cn(h,{command:"addSource",args:[d,l[d]]})}function ti(d,l,h){Cn(l,{command:"removeSource",args:[d]}),h[d]=!0}function to(d,l,h,v){ti(d,h,v),gi(d,l,h)}function li(d,l,h){let v;for(v in d[h])if(Object.prototype.hasOwnProperty.call(d[h],v)&&v!=="data"&&!Gn(d[h][v],l[h][v]))return!1;for(v in l[h])if(Object.prototype.hasOwnProperty.call(l[h],v)&&v!=="data"&&!Gn(d[h][v],l[h][v]))return!1;return!0}function Eo(d,l,h,v,x,T){d=d||{},l=l||{};for(const k in d)Object.prototype.hasOwnProperty.call(d,k)&&(Gn(d[k],l[k])||h.push({command:T,args:[v,k,l[k],x]}));for(const k in l)Object.prototype.hasOwnProperty.call(l,k)&&!Object.prototype.hasOwnProperty.call(d,k)&&(Gn(d[k],l[k])||h.push({command:T,args:[v,k,l[k],x]}))}function If(d){return d.id}function ld(d,l){return d[l.id]=l,d}class Gt{constructor(l,h,v,x){this.message=(l?`${l}: `:"")+v,x&&(this.identifier=x),h!=null&&h.__line__&&(this.line=h.__line__)}}function Is(d,...l){for(const h of l)for(const v in h)d[v]=h[v];return d}class Ds extends Error{constructor(l,h){super(h),this.message=h,this.key=l}}class Bl{constructor(l,h=[]){this.parent=l,this.bindings={};for(const[v,x]of h)this.bindings[v]=x}concat(l){return new Bl(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const yi={kind:"null"},tn={kind:"number"},ir={kind:"string"},dr={kind:"boolean"},Ra={kind:"color"},uy={kind:"projectionDefinition"},fc={kind:"object"},nr={kind:"value"},cd={kind:"collator"},pc={kind:"formatted"},su={kind:"padding"},mc={kind:"colorArray"},gc={kind:"numberArray"},no={kind:"resolvedImage"},Df={kind:"variableAnchorOffsetCollection"};function Ls(d,l){return{kind:"array",itemType:d,N:l}}function Mr(d){if(d.kind==="array"){const l=Mr(d.itemType);return typeof d.N=="number"?`array<${l}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${l}>`}return d.kind}const au=[yi,tn,ir,dr,Ra,uy,pc,fc,Ls(nr),su,gc,mc,no,Df];function Lf(d,l){if(l.kind==="error")return null;if(d.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!Lf(d.itemType,l.itemType))&&(typeof d.N!="number"||d.N===l.N))return null}else{if(d.kind===l.kind)return null;if(d.kind==="value"){for(const h of au)if(!Lf(h,l))return null}}return`Expected ${Mr(d)} but found ${Mr(l)} instead.`}function $f(d,l){return l.some((h=>h.kind===d.kind))}function ih(d,l){return l.some((h=>h==="null"?d===null:h==="array"?Array.isArray(d):h==="object"?d&&!Array.isArray(d)&&typeof d=="object":h===typeof d))}function Fl(d,l){return d.kind==="array"&&l.kind==="array"?d.itemType.kind===l.itemType.kind&&typeof d.N=="number":d.kind===l.kind}const gm=.96422,yc=.82521,sl=4/29,Nr=6/29,sv=3*Nr*Nr,Nb=Nr*Nr*Nr,ud=Math.PI/180,av=180/Math.PI;function ym(d){return(d%=360)<0&&(d+=360),d}function Bb([d,l,h,v]){let x,T;const k=vm((.2225045*(d=na(d))+.7168786*(l=na(l))+.0606169*(h=na(h)))/1);d===l&&l===h?x=T=k:(x=vm((.4360747*d+.3850649*l+.1430804*h)/gm),T=vm((.0139322*d+.0971045*l+.7141733*h)/yc));const D=116*k-16;return[D<0?0:D,500*(x-k),200*(k-T),v]}function na(d){return d<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function vm(d){return d>Nb?Math.pow(d,1/3):d/sv+sl}function hy([d,l,h,v]){let x=(d+16)/116,T=isNaN(l)?x:x+l/500,k=isNaN(h)?x:x-h/200;return x=1*oh(x),T=gm*oh(T),k=yc*oh(k),[_m(3.1338561*T-1.6168667*x-.4906146*k),_m(-.9787684*T+1.9161415*x+.033454*k),_m(.0719453*T-.2289914*x+1.4052427*k),v]}function _m(d){return(d=d<=.00304?12.92*d:1.055*Math.pow(d,1/2.4)-.055)<0?0:d>1?1:d}function oh(d){return d>Nr?d*d*d:sv*(d-sl)}const Fb=Object.hasOwn||function(d,l){return Object.prototype.hasOwnProperty.call(d,l)};function zf(d,l){return Fb(d,l)?d[l]:void 0}function lu(d){return parseInt(d.padEnd(2,d),16)/255}function jb(d,l){return hd(l?d/100:d,0,1)}function hd(d,l,h){return Math.min(Math.max(l,d),h)}function dy(d){return!d.some(Number.isNaN)}const dd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function sh(d,l,h){return d+h*(l-d)}function Nf(d,l,h){return d.map(((v,x)=>sh(v,l[x],h)))}class cr{constructor(l,h,v,x=1,T=!0){this.r=l,this.g=h,this.b=v,this.a=x,T||(this.r*=x,this.g*=x,this.b*=x,x||this.overwriteGetter("rgb",[l,h,v,x]))}static parse(l){if(l instanceof cr)return l;if(typeof l!="string")return;const h=(function(v){if((v=v.toLowerCase().trim())==="transparent")return[0,0,0,0];const x=zf(dd,v);if(x){const[k,D,N]=x;return[k/255,D/255,N/255,1]}if(v.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(v)){const k=v.length<6?1:2;let D=1;return[lu(v.slice(D,D+=k)),lu(v.slice(D,D+=k)),lu(v.slice(D,D+=k)),lu(v.slice(D,D+k)||"ff")]}if(v.startsWith("rgb")){const k=v.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[D,N,Z,X,ee,oe,le,fe,pe,ve,Ce,Ve]=k,Ae=[X||" ",le||" ",ve].join("");if(Ae==="  "||Ae==="  /"||Ae===",,"||Ae===",,,"){const Re=[Z,oe,pe].join(""),qe=Re==="%%%"?100:Re===""?255:0;if(qe){const Ge=[hd(+N/qe,0,1),hd(+ee/qe,0,1),hd(+fe/qe,0,1),Ce?jb(+Ce,Ve):1];if(dy(Ge))return Ge}}return}}const T=v.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[k,D,N,Z,X,ee,oe,le,fe]=T,pe=[N||" ",X||" ",oe].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){const ve=[+D,hd(+Z,0,100),hd(+ee,0,100),le?jb(+le,fe):1];if(dy(ve))return(function([Ce,Ve,Ae,Re]){function qe(Ge){const dt=(Ge+Ce/30)%12,Dt=Ve*Math.min(Ae,1-Ae);return Ae-Dt*Math.max(-1,Math.min(dt-3,9-dt,1))}return Ce=ym(Ce),Ve/=100,Ae/=100,[qe(0),qe(8),qe(4),Re]})(ve)}}})(l);return h?new cr(...h,!1):void 0}get rgb(){const{r:l,g:h,b:v,a:x}=this,T=x||1/0;return this.overwriteGetter("rgb",[l/T,h/T,v/T,x])}get hcl(){return this.overwriteGetter("hcl",(function(l){const[h,v,x,T]=Bb(l),k=Math.sqrt(v*v+x*x);return[Math.round(1e4*k)?ym(Math.atan2(x,v)*av):NaN,k,h,T]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Bb(this.rgb))}overwriteGetter(l,h){return Object.defineProperty(this,l,{value:h}),h}toString(){const[l,h,v,x]=this.rgb;return`rgba(${[l,h,v].map((T=>Math.round(255*T))).join(",")},${x})`}static interpolate(l,h,v,x="rgb"){switch(x){case"rgb":{const[T,k,D,N]=Nf(l.rgb,h.rgb,v);return new cr(T,k,D,N,!1)}case"hcl":{const[T,k,D,N]=l.hcl,[Z,X,ee,oe]=h.hcl;let le,fe;if(isNaN(T)||isNaN(Z))isNaN(T)?isNaN(Z)?le=NaN:(le=Z,D!==1&&D!==0||(fe=X)):(le=T,ee!==1&&ee!==0||(fe=k));else{let Ae=Z-T;Z>T&&Ae>180?Ae-=360:Z<T&&T-Z>180&&(Ae+=360),le=T+v*Ae}const[pe,ve,Ce,Ve]=(function([Ae,Re,qe,Ge]){return Ae=isNaN(Ae)?0:Ae*ud,hy([qe,Math.cos(Ae)*Re,Math.sin(Ae)*Re,Ge])})([le,fe??sh(k,X,v),sh(D,ee,v),sh(N,oe,v)]);return new cr(pe,ve,Ce,Ve,!1)}case"lab":{const[T,k,D,N]=hy(Nf(l.lab,h.lab,v));return new cr(T,k,D,N,!1)}}}}cr.black=new cr(0,0,0,1),cr.white=new cr(1,1,1,1),cr.transparent=new cr(0,0,0,0),cr.red=new cr(1,0,0,1);class jl{constructor(l,h,v){this.sensitivity=l?h?"variant":"case":h?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,h){return this.collator.compare(l,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const lv=["bottom","center","top"];class bm{constructor(l,h,v,x,T,k){this.text=l,this.image=h,this.scale=v,this.fontStack=x,this.textColor=T,this.verticalAlign=k}}class Ho{constructor(l){this.sections=l}static fromString(l){return new Ho([new bm(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((l=>l.text.length!==0||l.image&&l.image.name.length!==0))}static factory(l){return l instanceof Ho?l:Ho.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map((l=>l.text)).join("")}}class Ao{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Ao)return l;if(typeof l=="number")return new Ao([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const h of l)if(typeof h!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new Ao(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,h,v){return new Ao(Nf(l.values,h.values,v))}}class Di{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Di)return l;if(typeof l=="number")return new Di([l]);if(Array.isArray(l)){for(const h of l)if(typeof h!="number")return;return new Di(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,h,v){return new Di(Nf(l.values,h.values,v))}}class Fn{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Fn)return l;if(typeof l=="string"){const v=cr.parse(l);return v?new Fn([v]):void 0}if(!Array.isArray(l))return;const h=[];for(const v of l){if(typeof v!="string")return;const x=cr.parse(v);if(!x)return;h.push(x)}return new Fn(h)}toString(){return JSON.stringify(this.values)}static interpolate(l,h,v,x="rgb"){const T=[];if(l.values.length!=h.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${h.values.length}), cannot interpolate.`);for(let k=0;k<l.values.length;k++)T.push(cr.interpolate(l.values[k],h.values[k],v,x));return new Fn(T)}}class ci extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}const al=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ro{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof ro)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let h=0;h<l.length;h+=2){const v=l[h],x=l[h+1];if(typeof v!="string"||!al.has(v)||!Array.isArray(x)||x.length!==2||typeof x[0]!="number"||typeof x[1]!="number")return}return new ro(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,h,v){const x=l.values,T=h.values;if(x.length!==T.length)throw new ci(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${h.toString()}`);const k=[];for(let D=0;D<x.length;D+=2){if(x[D]!==T[D])throw new ci(`Cannot interpolate values containing mismatched anchors. from[${D}]: ${x[D]}, to[${D}]: ${T[D]}`);k.push(x[D]);const[N,Z]=x[D+1],[X,ee]=T[D+1];k.push([sh(N,X,v),sh(Z,ee,v)])}return new ro(k)}}class ra{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new ra({name:l,available:!1}):null}}class Go{constructor(l,h,v){this.from=l,this.to=h,this.transition=v}static interpolate(l,h,v){return new Go(l,h,v)}static parse(l){return l instanceof Go?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new Go(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new Go(l.from,l.to,l.transition):typeof l=="string"?new Go(l,l,1):void 0}}function Ia(d,l,h,v){return typeof d=="number"&&d>=0&&d<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof h=="number"&&h>=0&&h<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[d,l,h,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[d,l,h,v]:[d,l,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function vc(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof Go||d instanceof cr||d instanceof jl||d instanceof Ho||d instanceof Ao||d instanceof Di||d instanceof Fn||d instanceof ro||d instanceof ra)return!0;if(Array.isArray(d)){for(const l of d)if(!vc(l))return!1;return!0}if(typeof d=="object"){for(const l in d)if(!vc(d[l]))return!1;return!0}return!1}function Li(d){if(d===null)return yi;if(typeof d=="string")return ir;if(typeof d=="boolean")return dr;if(typeof d=="number")return tn;if(d instanceof cr)return Ra;if(d instanceof Go)return uy;if(d instanceof jl)return cd;if(d instanceof Ho)return pc;if(d instanceof Ao)return su;if(d instanceof Di)return gc;if(d instanceof Fn)return mc;if(d instanceof ro)return Df;if(d instanceof ra)return no;if(Array.isArray(d)){const l=d.length;let h;for(const v of d){const x=Li(v);if(h){if(h===x)continue;h=nr;break}h=x}return Ls(h||nr,l)}return fc}function ah(d){const l=typeof d;return d===null?"":l==="string"||l==="number"||l==="boolean"?String(d):d instanceof cr||d instanceof Go||d instanceof Ho||d instanceof Ao||d instanceof Di||d instanceof Fn||d instanceof ro||d instanceof ra?d.toString():JSON.stringify(d)}class Da{constructor(l,h){this.type=l,this.value=h}static parse(l,h){if(l.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!vc(l[1]))return h.error("invalid value");const v=l[1];let x=Li(v);const T=h.expectedType;return x.kind!=="array"||x.N!==0||!T||T.kind!=="array"||typeof T.N=="number"&&T.N!==0||(x=T),new Da(x,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const fd={string:ir,number:tn,boolean:dr,object:fc};class ia{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");let v,x=1;const T=l[0];if(T==="array"){let D,N;if(l.length>2){const Z=l[1];if(typeof Z!="string"||!(Z in fd)||Z==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);D=fd[Z],x++}else D=nr;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return h.error('The length argument to "array" must be a positive integer literal',2);N=l[2],x++}v=Ls(D,N)}else{if(!fd[T])throw new Error(`Types doesn't contain name = ${T}`);v=fd[T]}const k=[];for(;x<l.length;x++){const D=h.parse(l[x],x,nr);if(!D)return null;k.push(D)}return new ia(v,k)}evaluate(l){for(let h=0;h<this.args.length;h++){const v=this.args[h].evaluate(l);if(!Lf(this.type,Li(v)))return v;if(h===this.args.length-1)throw new ci(`Expected value to be of type ${Mr(this.type)}, but found ${Mr(Li(v))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const Bo={"to-boolean":dr,"to-color":Ra,"to-number":tn,"to-string":ir};class oa{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");const v=l[0];if(!Bo[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&l.length!==2)return h.error("Expected one argument.");const x=Bo[v],T=[];for(let k=1;k<l.length;k++){const D=h.parse(l[k],k,nr);if(!D)return null;T.push(D)}return new oa(x,T)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let h,v;for(const x of this.args){if(h=x.evaluate(l),v=null,h instanceof cr)return h;if(typeof h=="string"){const T=l.parseColor(h);if(T)return T}else if(Array.isArray(h)&&(v=h.length<3||h.length>4?`Invalid rgba value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:Ia(h[0],h[1],h[2],h[3]),!v))return new cr(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new ci(v||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const v of this.args){h=v.evaluate(l);const x=Ao.parse(h);if(x)return x}throw new ci(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"numberArray":{let h;for(const v of this.args){h=v.evaluate(l);const x=Di.parse(h);if(x)return x}throw new ci(`Could not parse numberArray from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"colorArray":{let h;for(const v of this.args){h=v.evaluate(l);const x=Fn.parse(h);if(x)return x}throw new ci(`Could not parse colorArray from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const v of this.args){h=v.evaluate(l);const x=ro.parse(h);if(x)return x}throw new ci(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const v of this.args){if(h=v.evaluate(l),h===null)return 0;const x=Number(h);if(!isNaN(x))return x}throw new ci(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return Ho.fromString(ah(this.args[0].evaluate(l)));case"resolvedImage":return ra.fromString(ah(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return ah(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const xm=["Unknown","Point","LineString","Polygon"];class pd{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?xm[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let h=this._parseColorCache.get(l);return h||(h=cr.parse(l),this._parseColorCache.set(l,h)),h}}class md{constructor(l,h,v=[],x,T=new Bl,k=[]){this.registry=l,this.path=v,this.key=v.map((D=>`[${D}]`)).join(""),this.scope=T,this.errors=k,this.expectedType=x,this._isConstant=h}parse(l,h,v,x,T={}){return h?this.concat(h,v,x)._parse(l,T):this._parse(l,T)}_parse(l,h){function v(x,T,k){return k==="assert"?new ia(T,[x]):k==="coerce"?new oa(T,[x]):x}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const x=l[0];if(typeof x!="string")return this.error(`Expression name must be a string, but found ${typeof x} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const T=this.registry[x];if(T){let k=T.parse(l,this);if(!k)return null;if(this.expectedType){const D=this.expectedType,N=k.type;if(D.kind!=="string"&&D.kind!=="number"&&D.kind!=="boolean"&&D.kind!=="object"&&D.kind!=="array"||N.kind!=="value"){if(D.kind==="projectionDefinition"&&["string","array"].includes(N.kind)||["color","formatted","resolvedImage"].includes(D.kind)&&["value","string"].includes(N.kind)||["padding","numberArray"].includes(D.kind)&&["value","number","array"].includes(N.kind)||D.kind==="colorArray"&&["value","string","array"].includes(N.kind)||D.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(N.kind))k=v(k,D,h.typeAnnotation||"coerce");else if(this.checkSubtype(D,N))return null}else k=v(k,D,h.typeAnnotation||"assert")}if(!(k instanceof Da)&&k.type.kind!=="resolvedImage"&&this._isConstant(k)){const D=new pd;try{k=new Da(k.type,k.evaluate(D))}catch(N){return this.error(N.message),null}}return k}return this.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,h,v){const x=typeof l=="number"?this.path.concat(l):this.path,T=v?this.scope.concat(v):this.scope;return new md(this.registry,this._isConstant,x,h||null,T,this.errors)}error(l,...h){const v=`${this.key}${h.map((x=>`[${x}]`)).join("")}`;this.errors.push(new Ds(v,l))}checkSubtype(l,h){const v=Lf(l,h);return v&&this.error(v),v}}class ni{constructor(l,h){this.type=h.type,this.bindings=[].concat(l),this.result=h}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const h of this.bindings)l(h[1]);l(this.result)}static parse(l,h){if(l.length<4)return h.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const v=[];for(let T=1;T<l.length-1;T+=2){const k=l[T];if(typeof k!="string")return h.error(`Expected string, but found ${typeof k} instead.`,T);if(/[^a-zA-Z0-9_]/.test(k))return h.error("Variable names must contain only alphanumeric characters or '_'.",T);const D=h.parse(l[T+1],T+1);if(!D)return null;v.push([k,D])}const x=h.parse(l[l.length-1],l.length-1,h.expectedType,v);return x?new ni(v,x):null}outputDefined(){return this.result.outputDefined()}}class lh{constructor(l,h){this.type=h.type,this.name=l,this.boundExpression=h}static parse(l,h){if(l.length!==2||typeof l[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const v=l[1];return h.scope.has(v)?new lh(v,h.scope.get(v)):h.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class vr{constructor(l,h,v){this.type=l,this.index=h,this.input=v}static parse(l,h){if(l.length!==3)return h.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const v=h.parse(l[1],1,tn),x=h.parse(l[2],2,Ls(h.expectedType||nr));return v&&x?new vr(x.type.itemType,v,x):null}evaluate(l){const h=this.index.evaluate(l),v=this.input.evaluate(l);if(h<0)throw new ci(`Array index out of bounds: ${h} < 0.`);if(h>=v.length)throw new ci(`Array index out of bounds: ${h} > ${v.length-1}.`);if(h!==Math.floor(h))throw new ci(`Array index must be an integer, but found ${h} instead.`);return v[h]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class or{constructor(l,h){this.type=dr,this.needle=l,this.haystack=h}static parse(l,h){if(l.length!==3)return h.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const v=h.parse(l[1],1,nr),x=h.parse(l[2],2,nr);return v&&x?$f(v.type,[dr,ir,tn,yi,nr])?new or(v,x):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Mr(v.type)} instead`):null}evaluate(l){const h=this.needle.evaluate(l),v=this.haystack.evaluate(l);if(!v)return!1;if(!ih(h,["boolean","string","number","null"]))throw new ci(`Expected first argument to be of type boolean, string, number or null, but found ${Mr(Li(h))} instead.`);if(!ih(v,["string","array"]))throw new ci(`Expected second argument to be of type array or string, but found ${Mr(Li(v))} instead.`);return v.indexOf(h)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class gd{constructor(l,h,v){this.type=tn,this.needle=l,this.haystack=h,this.fromIndex=v}static parse(l,h){if(l.length<=2||l.length>=5)return h.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const v=h.parse(l[1],1,nr),x=h.parse(l[2],2,nr);if(!v||!x)return null;if(!$f(v.type,[dr,ir,tn,yi,nr]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Mr(v.type)} instead`);if(l.length===4){const T=h.parse(l[3],3,tn);return T?new gd(v,x,T):null}return new gd(v,x)}evaluate(l){const h=this.needle.evaluate(l),v=this.haystack.evaluate(l);if(!ih(h,["boolean","string","number","null"]))throw new ci(`Expected first argument to be of type boolean, string, number or null, but found ${Mr(Li(h))} instead.`);let x;if(this.fromIndex&&(x=this.fromIndex.evaluate(l)),ih(v,["string"])){const T=v.indexOf(h,x);return T===-1?-1:[...v.slice(0,T)].length}if(ih(v,["array"]))return v.indexOf(h,x);throw new ci(`Expected second argument to be of type array or string, but found ${Mr(Li(v))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class Rr{constructor(l,h,v,x,T,k){this.inputType=l,this.type=h,this.input=v,this.cases=x,this.outputs=T,this.otherwise=k}static parse(l,h){if(l.length<5)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return h.error("Expected an even number of arguments.");let v,x;h.expectedType&&h.expectedType.kind!=="value"&&(x=h.expectedType);const T={},k=[];for(let Z=2;Z<l.length-1;Z+=2){let X=l[Z];const ee=l[Z+1];Array.isArray(X)||(X=[X]);const oe=h.concat(Z);if(X.length===0)return oe.error("Expected at least one branch label.");for(const fe of X){if(typeof fe!="number"&&typeof fe!="string")return oe.error("Branch labels must be numbers or strings.");if(typeof fe=="number"&&Math.abs(fe)>Number.MAX_SAFE_INTEGER)return oe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof fe=="number"&&Math.floor(fe)!==fe)return oe.error("Numeric branch labels must be integer values.");if(v){if(oe.checkSubtype(v,Li(fe)))return null}else v=Li(fe);if(T[String(fe)]!==void 0)return oe.error("Branch labels must be unique.");T[String(fe)]=k.length}const le=h.parse(ee,Z,x);if(!le)return null;x=x||le.type,k.push(le)}const D=h.parse(l[1],1,nr);if(!D)return null;const N=h.parse(l[l.length-1],l.length-1,x);return N?D.type.kind!=="value"&&h.concat(1).checkSubtype(v,D.type)?null:new Rr(v,x,D,T,k,N):null}evaluate(l){const h=this.input.evaluate(l);return(Li(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))&&this.otherwise.outputDefined()}}class wm{constructor(l,h,v){this.type=l,this.branches=h,this.otherwise=v}static parse(l,h){if(l.length<4)return h.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return h.error("Expected an odd number of arguments.");let v;h.expectedType&&h.expectedType.kind!=="value"&&(v=h.expectedType);const x=[];for(let k=1;k<l.length-1;k+=2){const D=h.parse(l[k],k,dr);if(!D)return null;const N=h.parse(l[k+1],k+1,v);if(!N)return null;x.push([D,N]),v=v||N.type}const T=h.parse(l[l.length-1],l.length-1,v);if(!T)return null;if(!v)throw new Error("Can't infer output type");return new wm(v,x,T)}evaluate(l){for(const[h,v]of this.branches)if(h.evaluate(l))return v.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[h,v]of this.branches)l(h),l(v);l(this.otherwise)}outputDefined(){return this.branches.every((([l,h])=>h.outputDefined()))&&this.otherwise.outputDefined()}}class ll{constructor(l,h,v,x){this.type=l,this.input=h,this.beginIndex=v,this.endIndex=x}static parse(l,h){if(l.length<=2||l.length>=5)return h.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const v=h.parse(l[1],1,nr),x=h.parse(l[2],2,tn);if(!v||!x)return null;if(!$f(v.type,[Ls(nr),ir,nr]))return h.error(`Expected first argument to be of type array or string, but found ${Mr(v.type)} instead`);if(l.length===4){const T=h.parse(l[3],3,tn);return T?new ll(v.type,v,x,T):null}return new ll(v.type,v,x)}evaluate(l){const h=this.input.evaluate(l),v=this.beginIndex.evaluate(l);let x;if(this.endIndex&&(x=this.endIndex.evaluate(l)),ih(h,["string"]))return[...h].slice(v,x).join("");if(ih(h,["array"]))return h.slice(v,x);throw new ci(`Expected first argument to be of type array or string, but found ${Mr(Li(h))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function ch(d,l){const h=d.length-1;let v,x,T=0,k=h,D=0;for(;T<=k;)if(D=Math.floor((T+k)/2),v=d[D],x=d[D+1],v<=l){if(D===h||l<x)return D;T=D+1}else{if(!(v>l))throw new ci("Input is not a number.");k=D-1}return 0}class uh{constructor(l,h,v){this.type=l,this.input=h,this.labels=[],this.outputs=[];for(const[x,T]of v)this.labels.push(x),this.outputs.push(T)}static parse(l,h){if(l.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return h.error("Expected an even number of arguments.");const v=h.parse(l[1],1,tn);if(!v)return null;const x=[];let T=null;h.expectedType&&h.expectedType.kind!=="value"&&(T=h.expectedType);for(let k=1;k<l.length;k+=2){const D=k===1?-1/0:l[k],N=l[k+1],Z=k,X=k+1;if(typeof D!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(x.length&&x[x.length-1][0]>=D)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Z);const ee=h.parse(N,X,T);if(!ee)return null;T=T||ee.type,x.push([D,ee])}return new uh(T,v,x)}evaluate(l){const h=this.labels,v=this.outputs;if(h.length===1)return v[0].evaluate(l);const x=this.input.evaluate(l);if(x<=h[0])return v[0].evaluate(l);const T=h.length;return x>=h[T-1]?v[T-1].evaluate(l):v[ch(h,x)].evaluate(l)}eachChild(l){l(this.input);for(const h of this.outputs)l(h)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function Vb(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Om,cv,qO=(function(){if(cv)return Om;function d(l,h,v,x){this.cx=3*l,this.bx=3*(v-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(x-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=h,this.p2x=v,this.p2y=x}return cv=1,Om=d,d.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,h){if(h===void 0&&(h=1e-6),l<0)return 0;if(l>1)return 1;for(var v=l,x=0;x<8;x++){var T=this.sampleCurveX(v)-l;if(Math.abs(T)<h)return v;var k=this.sampleCurveDerivativeX(v);if(Math.abs(k)<1e-6)break;v-=T/k}var D=0,N=1;for(v=l,x=0;x<20&&(T=this.sampleCurveX(v),!(Math.abs(T-l)<h));x++)l>T?D=v:N=v,v=.5*(N-D)+D;return v},solve:function(l,h){return this.sampleCurveY(this.solveCurveX(l,h))}},Om})(),uv=Vb(qO);class sa{constructor(l,h,v,x,T){this.type=l,this.operator=h,this.interpolation=v,this.input=x,this.labels=[],this.outputs=[];for(const[k,D]of T)this.labels.push(k),this.outputs.push(D)}static interpolationFactor(l,h,v,x){let T=0;if(l.name==="exponential")T=_c(h,l.base,v,x);else if(l.name==="linear")T=_c(h,1,v,x);else if(l.name==="cubic-bezier"){const k=l.controlPoints;T=new uv(k[0],k[1],k[2],k[3]).solve(_c(h,1,v,x))}return T}static parse(l,h){let[v,x,T,...k]=l;if(!Array.isArray(x)||x.length===0)return h.error("Expected an interpolation type expression.",1);if(x[0]==="linear")x={name:"linear"};else if(x[0]==="exponential"){const Z=x[1];if(typeof Z!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:Z}}else{if(x[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(x[0])}`,1,0);{const Z=x.slice(1);if(Z.length!==4||Z.some((X=>typeof X!="number"||X<0||X>1)))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:Z}}}if(l.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(T=h.parse(T,2,tn),!T)return null;const D=[];let N=null;v!=="interpolate-hcl"&&v!=="interpolate-lab"||h.expectedType==mc?h.expectedType&&h.expectedType.kind!=="value"&&(N=h.expectedType):N=Ra;for(let Z=0;Z<k.length;Z+=2){const X=k[Z],ee=k[Z+1],oe=Z+3,le=Z+4;if(typeof X!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',oe);if(D.length&&D[D.length-1][0]>=X)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',oe);const fe=h.parse(ee,le,N);if(!fe)return null;N=N||fe.type,D.push([X,fe])}return Fl(N,tn)||Fl(N,uy)||Fl(N,Ra)||Fl(N,su)||Fl(N,gc)||Fl(N,mc)||Fl(N,Df)||Fl(N,Ls(tn))?new sa(N,v,x,T,D):h.error(`Type ${Mr(N)} is not interpolatable.`)}evaluate(l){const h=this.labels,v=this.outputs;if(h.length===1)return v[0].evaluate(l);const x=this.input.evaluate(l);if(x<=h[0])return v[0].evaluate(l);const T=h.length;if(x>=h[T-1])return v[T-1].evaluate(l);const k=ch(h,x),D=sa.interpolationFactor(this.interpolation,x,h[k],h[k+1]),N=v[k].evaluate(l),Z=v[k+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return sh(N,Z,D);case"color":return cr.interpolate(N,Z,D);case"padding":return Ao.interpolate(N,Z,D);case"colorArray":return Fn.interpolate(N,Z,D);case"numberArray":return Di.interpolate(N,Z,D);case"variableAnchorOffsetCollection":return ro.interpolate(N,Z,D);case"array":return Nf(N,Z,D);case"projectionDefinition":return Go.interpolate(N,Z,D)}case"interpolate-hcl":switch(this.type.kind){case"color":return cr.interpolate(N,Z,D,"hcl");case"colorArray":return Fn.interpolate(N,Z,D,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return cr.interpolate(N,Z,D,"lab");case"colorArray":return Fn.interpolate(N,Z,D,"lab")}}}eachChild(l){l(this.input);for(const h of this.outputs)l(h)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function _c(d,l,h,v){const x=v-h,T=d-h;return x===0?0:l===1?T/x:(Math.pow(l,T)-1)/(Math.pow(l,x)-1)}const $i={color:cr.interpolate,number:sh,padding:Ao.interpolate,numberArray:Di.interpolate,colorArray:Fn.interpolate,variableAnchorOffsetCollection:ro.interpolate,array:Nf};class yd{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");let v=null;const x=h.expectedType;x&&x.kind!=="value"&&(v=x);const T=[];for(const D of l.slice(1)){const N=h.parse(D,1+T.length,v,void 0,{typeAnnotation:"omit"});if(!N)return null;v=v||N.type,T.push(N)}if(!v)throw new Error("No output type");const k=x&&T.some((D=>Lf(x,D.type)));return new yd(k?nr:v,T)}evaluate(l){let h,v=null,x=0;for(const T of this.args)if(x++,v=T.evaluate(l),v&&v instanceof ra&&!v.available&&(h||(h=v.name),v=null,x===this.args.length&&(v=h)),v!==null)break;return v}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}function Sm(d,l){return d==="=="||d==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function Cm(d,l,h,v){return v.compare(l,h)===0}function io(d,l,h){const v=d!=="=="&&d!=="!=";return class bG{constructor(T,k,D){this.type=dr,this.lhs=T,this.rhs=k,this.collator=D,this.hasUntypedArgument=T.type.kind==="value"||k.type.kind==="value"}static parse(T,k){if(T.length!==3&&T.length!==4)return k.error("Expected two or three arguments.");const D=T[0];let N=k.parse(T[1],1,nr);if(!N)return null;if(!Sm(D,N.type))return k.concat(1).error(`"${D}" comparisons are not supported for type '${Mr(N.type)}'.`);let Z=k.parse(T[2],2,nr);if(!Z)return null;if(!Sm(D,Z.type))return k.concat(2).error(`"${D}" comparisons are not supported for type '${Mr(Z.type)}'.`);if(N.type.kind!==Z.type.kind&&N.type.kind!=="value"&&Z.type.kind!=="value")return k.error(`Cannot compare types '${Mr(N.type)}' and '${Mr(Z.type)}'.`);v&&(N.type.kind==="value"&&Z.type.kind!=="value"?N=new ia(Z.type,[N]):N.type.kind!=="value"&&Z.type.kind==="value"&&(Z=new ia(N.type,[Z])));let X=null;if(T.length===4){if(N.type.kind!=="string"&&Z.type.kind!=="string"&&N.type.kind!=="value"&&Z.type.kind!=="value")return k.error("Cannot use collator to compare non-string types.");if(X=k.parse(T[3],3,cd),!X)return null}return new bG(N,Z,X)}evaluate(T){const k=this.lhs.evaluate(T),D=this.rhs.evaluate(T);if(v&&this.hasUntypedArgument){const N=Li(k),Z=Li(D);if(N.kind!==Z.kind||N.kind!=="string"&&N.kind!=="number")throw new ci(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${N.kind}, ${Z.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const N=Li(k),Z=Li(D);if(N.kind!=="string"||Z.kind!=="string")return l(T,k,D)}return this.collator?h(T,k,D,this.collator.evaluate(T)):l(T,k,D)}eachChild(T){T(this.lhs),T(this.rhs),this.collator&&T(this.collator)}outputDefined(){return!0}}}const Qb=io("==",(function(d,l,h){return l===h}),Cm),fy=io("!=",(function(d,l,h){return l!==h}),(function(d,l,h,v){return!Cm(0,l,h,v)})),Ub=io("<",(function(d,l,h){return l<h}),(function(d,l,h,v){return v.compare(l,h)<0})),WO=io(">",(function(d,l,h){return l>h}),(function(d,l,h,v){return v.compare(l,h)>0})),Bf=io("<=",(function(d,l,h){return l<=h}),(function(d,l,h,v){return v.compare(l,h)<=0})),py=io(">=",(function(d,l,h){return l>=h}),(function(d,l,h,v){return v.compare(l,h)>=0}));class Ff{constructor(l,h,v){this.type=cd,this.locale=v,this.caseSensitive=l,this.diacriticSensitive=h}static parse(l,h){if(l.length!==2)return h.error("Expected one argument.");const v=l[1];if(typeof v!="object"||Array.isArray(v))return h.error("Collator options argument must be an object.");const x=h.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,dr);if(!x)return null;const T=h.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,dr);if(!T)return null;let k=null;return v.locale&&(k=h.parse(v.locale,1,ir),!k)?null:new Ff(x,T,k)}evaluate(l){return new jl(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class hv{constructor(l,h,v,x,T){this.type=ir,this.number=l,this.locale=h,this.currency=v,this.minFractionDigits=x,this.maxFractionDigits=T}static parse(l,h){if(l.length!==3)return h.error("Expected two arguments.");const v=h.parse(l[1],1,tn);if(!v)return null;const x=l[2];if(typeof x!="object"||Array.isArray(x))return h.error("NumberFormat options argument must be an object.");let T=null;if(x.locale&&(T=h.parse(x.locale,1,ir),!T))return null;let k=null;if(x.currency&&(k=h.parse(x.currency,1,ir),!k))return null;let D=null;if(x["min-fraction-digits"]&&(D=h.parse(x["min-fraction-digits"],1,tn),!D))return null;let N=null;return x["max-fraction-digits"]&&(N=h.parse(x["max-fraction-digits"],1,tn),!N)?null:new hv(v,T,k,D,N)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class Tm{constructor(l){this.type=pc,this.sections=l}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");const v=l[1];if(!Array.isArray(v)&&typeof v=="object")return h.error("First argument must be an image or text section.");const x=[];let T=!1;for(let k=1;k<=l.length-1;++k){const D=l[k];if(T&&typeof D=="object"&&!Array.isArray(D)){T=!1;let N=null;if(D["font-scale"]&&(N=h.parse(D["font-scale"],1,tn),!N))return null;let Z=null;if(D["text-font"]&&(Z=h.parse(D["text-font"],1,Ls(ir)),!Z))return null;let X=null;if(D["text-color"]&&(X=h.parse(D["text-color"],1,Ra),!X))return null;let ee=null;if(D["vertical-align"]){if(typeof D["vertical-align"]=="string"&&!lv.includes(D["vertical-align"]))return h.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${D["vertical-align"]}' instead.`);if(ee=h.parse(D["vertical-align"],1,ir),!ee)return null}const oe=x[x.length-1];oe.scale=N,oe.font=Z,oe.textColor=X,oe.verticalAlign=ee}else{const N=h.parse(l[k],1,nr);if(!N)return null;const Z=N.type.kind;if(Z!=="string"&&Z!=="value"&&Z!=="null"&&Z!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");T=!0,x.push({content:N,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Tm(x)}evaluate(l){return new Ho(this.sections.map((h=>{const v=h.content.evaluate(l);return Li(v)===no?new bm("",v,null,null,null,h.verticalAlign?h.verticalAlign.evaluate(l):null):new bm(ah(v),null,h.scale?h.scale.evaluate(l):null,h.font?h.font.evaluate(l).join(","):null,h.textColor?h.textColor.evaluate(l):null,h.verticalAlign?h.verticalAlign.evaluate(l):null)})))}eachChild(l){for(const h of this.sections)l(h.content),h.scale&&l(h.scale),h.font&&l(h.font),h.textColor&&l(h.textColor),h.verticalAlign&&l(h.verticalAlign)}outputDefined(){return!1}}class jf{constructor(l){this.type=no,this.input=l}static parse(l,h){if(l.length!==2)return h.error("Expected two arguments.");const v=h.parse(l[1],1,ir);return v?new jf(v):h.error("No image name provided.")}evaluate(l){const h=this.input.evaluate(l),v=ra.fromString(h);return v&&l.availableImages&&(v.available=l.availableImages.indexOf(h)>-1),v}eachChild(l){l(this.input)}outputDefined(){return!1}}class Vf{constructor(l){this.type=tn,this.input=l}static parse(l,h){if(l.length!==2)return h.error(`Expected 1 argument, but found ${l.length-1} instead.`);const v=h.parse(l[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${Mr(v.type)} instead.`):new Vf(v):null}evaluate(l){const h=this.input.evaluate(l);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new ci(`Expected value to be of type string or array, but found ${Mr(Li(h))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const yo=8192;function Qf(d,l){const h=(180+d[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,x=Math.pow(2,l.z);return[Math.round(h*x*yo),Math.round(v*x*yo)]}function Uf(d,l){const h=Math.pow(2,l.z);return[(x=(d[0]/yo+l.x)/h,360*x-180),(v=(d[1]/yo+l.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*v)*Math.PI/180))-90)];var v,x}function Zf(d,l){d[0]=Math.min(d[0],l[0]),d[1]=Math.min(d[1],l[1]),d[2]=Math.max(d[2],l[0]),d[3]=Math.max(d[3],l[1])}function hh(d,l){return!(d[0]<=l[0]||d[2]>=l[2]||d[1]<=l[1]||d[3]>=l[3])}function Zb(d,l,h){const v=d[0]-l[0],x=d[1]-l[1],T=d[0]-h[0],k=d[1]-h[1];return v*k-T*x==0&&v*T<=0&&x*k<=0}function km(d,l,h,v){return(x=[v[0]-h[0],v[1]-h[1]])[0]*(T=[l[0]-d[0],l[1]-d[1]])[1]-x[1]*T[0]!=0&&!(!gy(d,l,h,v)||!gy(h,v,d,l));var x,T}function qb(d,l,h){for(const v of h)for(let x=0;x<v.length-1;++x)if(km(d,l,v[x],v[x+1]))return!0;return!1}function Vl(d,l,h=!1){let v=!1;for(const D of l)for(let N=0;N<D.length-1;N++){if(Zb(d,D[N],D[N+1]))return h;(T=D[N])[1]>(x=d)[1]!=(k=D[N+1])[1]>x[1]&&x[0]<(k[0]-T[0])*(x[1]-T[1])/(k[1]-T[1])+T[0]&&(v=!v)}var x,T,k;return v}function my(d,l){for(const h of l)if(Vl(d,h))return!0;return!1}function Wb(d,l){for(const h of d)if(!Vl(h,l))return!1;for(let h=0;h<d.length-1;++h)if(qb(d[h],d[h+1],l))return!1;return!0}function Hb(d,l){for(const h of l)if(Wb(d,h))return!0;return!1}function gy(d,l,h,v){const x=v[0]-h[0],T=v[1]-h[1],k=(d[0]-h[0])*T-x*(d[1]-h[1]),D=(l[0]-h[0])*T-x*(l[1]-h[1]);return k>0&&D<0||k<0&&D>0}function yy(d,l,h){const v=[];for(let x=0;x<d.length;x++){const T=[];for(let k=0;k<d[x].length;k++){const D=Qf(d[x][k],h);Zf(l,D),T.push(D)}v.push(T)}return v}function vd(d,l,h){const v=[];for(let x=0;x<d.length;x++){const T=yy(d[x],l,h);v.push(T)}return v}function qf(d,l,h,v){if(d[0]<h[0]||d[0]>h[2]){const x=.5*v;let T=d[0]-h[0]>x?-v:h[0]-d[0]>x?v:0;T===0&&(T=d[0]-h[2]>x?-v:h[2]-d[0]>x?v:0),d[0]+=T}Zf(l,d)}function Gb(d,l,h,v){const x=Math.pow(2,v.z)*yo,T=[v.x*yo,v.y*yo],k=[];for(const D of d)for(const N of D){const Z=[N.x+T[0],N.y+T[1]];qf(Z,l,h,x),k.push(Z)}return k}function Em(d,l,h,v){const x=Math.pow(2,v.z)*yo,T=[v.x*yo,v.y*yo],k=[];for(const N of d){const Z=[];for(const X of N){const ee=[X.x+T[0],X.y+T[1]];Zf(l,ee),Z.push(ee)}k.push(Z)}if(l[2]-l[0]<=x/2){(D=l)[0]=D[1]=1/0,D[2]=D[3]=-1/0;for(const N of k)for(const Z of N)qf(Z,l,h,x)}var D;return k}class dh{constructor(l,h){this.type=dr,this.geojson=l,this.geometries=h}static parse(l,h){if(l.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(vc(l[1])){const v=l[1];if(v.type==="FeatureCollection"){const x=[];for(const T of v.features){const{type:k,coordinates:D}=T.geometry;k==="Polygon"&&x.push(D),k==="MultiPolygon"&&x.push(...D)}if(x.length)return new dh(v,{type:"MultiPolygon",coordinates:x})}else if(v.type==="Feature"){const x=v.geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new dh(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new dh(v,v)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(h,v){const x=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],k=h.canonicalID();if(v.type==="Polygon"){const D=yy(v.coordinates,T,k),N=Gb(h.geometry(),x,T,k);if(!hh(x,T))return!1;for(const Z of N)if(!Vl(Z,D))return!1}if(v.type==="MultiPolygon"){const D=vd(v.coordinates,T,k),N=Gb(h.geometry(),x,T,k);if(!hh(x,T))return!1;for(const Z of N)if(!my(Z,D))return!1}return!0})(l,this.geometries);if(l.geometryType()==="LineString")return(function(h,v){const x=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],k=h.canonicalID();if(v.type==="Polygon"){const D=yy(v.coordinates,T,k),N=Em(h.geometry(),x,T,k);if(!hh(x,T))return!1;for(const Z of N)if(!Wb(Z,D))return!1}if(v.type==="MultiPolygon"){const D=vd(v.coordinates,T,k),N=Em(h.geometry(),x,T,k);if(!hh(x,T))return!1;for(const Z of N)if(!Hb(Z,D))return!1}return!0})(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let dv=class{constructor(d=[],l=(h,v)=>h<v?-1:h>v?1:0){if(this.data=d,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(d){this.data.push(d),this._up(this.length++)}pop(){if(this.length===0)return;const d=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),d}peek(){return this.data[0]}_up(d){const{data:l,compare:h}=this,v=l[d];for(;d>0;){const x=d-1>>1,T=l[x];if(h(v,T)>=0)break;l[d]=T,d=x}l[d]=v}_down(d){const{data:l,compare:h}=this,v=this.length>>1,x=l[d];for(;d<v;){let T=1+(d<<1);const k=T+1;if(k<this.length&&h(l[k],l[T])<0&&(T=k),h(l[T],x)>=0)break;l[d]=l[T],d=T}l[d]=x}};function Am(d,l,h=0,v=d.length-1,x=fv){for(;v>h;){if(v-h>600){const N=v-h+1,Z=l-h+1,X=Math.log(N),ee=.5*Math.exp(2*X/3),oe=.5*Math.sqrt(X*ee*(N-ee)/N)*(Z-N/2<0?-1:1);Am(d,l,Math.max(h,Math.floor(l-Z*ee/N+oe)),Math.min(v,Math.floor(l+(N-Z)*ee/N+oe)),x)}const T=d[l];let k=h,D=v;for(fh(d,h,l),x(d[v],T)>0&&fh(d,h,v);k<D;){for(fh(d,k,D),k++,D--;x(d[k],T)<0;)k++;for(;x(d[D],T)>0;)D--}x(d[h],T)===0?fh(d,h,D):(D++,fh(d,D,v)),D<=l&&(h=D+1),l<=D&&(v=D-1)}}function fh(d,l,h){const v=d[l];d[l]=d[h],d[h]=v}function fv(d,l){return d<l?-1:d>l?1:0}function Pm(d,l){if(d.length<=1)return[d];const h=[];let v,x;for(const T of d){const k=HO(T);k!==0&&(T.area=Math.abs(k),x===void 0&&(x=k<0),x===k<0?(v&&h.push(v),v=[T]):v.push(T))}if(v&&h.push(v),l>1)for(let T=0;T<h.length;T++)h[T].length<=l||(Am(h[T],l,1,h[T].length-1,Xb),h[T]=h[T].slice(0,l));return h}function Xb(d,l){return l.area-d.area}function HO(d){let l=0;for(let h,v,x=0,T=d.length,k=T-1;x<T;k=x++)h=d[x],v=d[k],l+=(v.x-h.x)*(h.y+v.y);return l}const Yb=1/298.257223563,Mm=Yb*(2-Yb),Kb=Math.PI/180;class pv{constructor(l){const h=6378.137*Kb*1e3,v=Math.cos(l*Kb),x=1/(1-Mm*(1-v*v)),T=Math.sqrt(x);this.kx=h*T*v,this.ky=h*T*x*(1-Mm)}distance(l,h){const v=this.wrap(l[0]-h[0])*this.kx,x=(l[1]-h[1])*this.ky;return Math.sqrt(v*v+x*x)}pointOnLine(l,h){let v,x,T,k,D=1/0;for(let N=0;N<l.length-1;N++){let Z=l[N][0],X=l[N][1],ee=this.wrap(l[N+1][0]-Z)*this.kx,oe=(l[N+1][1]-X)*this.ky,le=0;ee===0&&oe===0||(le=(this.wrap(h[0]-Z)*this.kx*ee+(h[1]-X)*this.ky*oe)/(ee*ee+oe*oe),le>1?(Z=l[N+1][0],X=l[N+1][1]):le>0&&(Z+=ee/this.kx*le,X+=oe/this.ky*le)),ee=this.wrap(h[0]-Z)*this.kx,oe=(h[1]-X)*this.ky;const fe=ee*ee+oe*oe;fe<D&&(D=fe,v=Z,x=X,T=N,k=le)}return{point:[v,x],index:T,t:Math.max(0,Math.min(1,k))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function pa(d,l){return l[0]-d[0]}function ph(d){return d[1]-d[0]+1}function cl(d,l){return d[1]>=d[0]&&d[1]<l}function Rm(d,l){if(d[0]>d[1])return[null,null];const h=ph(d);if(l){if(h===2)return[d,null];const x=Math.floor(h/2);return[[d[0],d[0]+x],[d[0]+x,d[1]]]}if(h===1)return[d,null];const v=Math.floor(h/2)-1;return[[d[0],d[0]+v],[d[0]+v+1,d[1]]]}function vy(d,l){if(!cl(l,d.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let v=l[0];v<=l[1];++v)Zf(h,d[v]);return h}function _y(d){const l=[1/0,1/0,-1/0,-1/0];for(const h of d)for(const v of h)Zf(l,v);return l}function Im(d){return d[0]!==-1/0&&d[1]!==-1/0&&d[2]!==1/0&&d[3]!==1/0}function by(d,l,h){if(!Im(d)||!Im(l))return NaN;let v=0,x=0;return d[2]<l[0]&&(v=l[0]-d[2]),d[0]>l[2]&&(v=d[0]-l[2]),d[1]>l[3]&&(x=d[1]-l[3]),d[3]<l[1]&&(x=l[1]-d[3]),h.distance([0,0],[v,x])}function ul(d,l,h){const v=h.pointOnLine(l,d);return h.distance(d,v.point)}function Dm(d,l,h,v,x){const T=Math.min(ul(d,[h,v],x),ul(l,[h,v],x)),k=Math.min(ul(h,[d,l],x),ul(v,[d,l],x));return Math.min(T,k)}function Lm(d,l,h,v,x){if(!cl(l,d.length)||!cl(v,h.length))return 1/0;let T=1/0;for(let k=l[0];k<l[1];++k){const D=d[k],N=d[k+1];for(let Z=v[0];Z<v[1];++Z){const X=h[Z],ee=h[Z+1];if(km(D,N,X,ee))return 0;T=Math.min(T,Dm(D,N,X,ee,x))}}return T}function xy(d,l,h,v,x){if(!cl(l,d.length)||!cl(v,h.length))return NaN;let T=1/0;for(let k=l[0];k<=l[1];++k)for(let D=v[0];D<=v[1];++D)if(T=Math.min(T,x.distance(d[k],h[D])),T===0)return T;return T}function Jb(d,l,h){if(Vl(d,l,!0))return 0;let v=1/0;for(const x of l){const T=x[0],k=x[x.length-1];if(T!==k&&(v=Math.min(v,ul(d,[k,T],h)),v===0))return v;const D=h.pointOnLine(x,d);if(v=Math.min(v,h.distance(d,D.point)),v===0)return v}return v}function _d(d,l,h,v){if(!cl(l,d.length))return NaN;for(let T=l[0];T<=l[1];++T)if(Vl(d[T],h,!0))return 0;let x=1/0;for(let T=l[0];T<l[1];++T){const k=d[T],D=d[T+1];for(const N of h)for(let Z=0,X=N.length,ee=X-1;Z<X;ee=Z++){const oe=N[ee],le=N[Z];if(km(k,D,oe,le))return 0;x=Math.min(x,Dm(k,D,oe,le,v))}}return x}function bd(d,l){for(const h of d)for(const v of h)if(Vl(v,l,!0))return!0;return!1}function mv(d,l,h,v=1/0){const x=_y(d),T=_y(l);if(v!==1/0&&by(x,T,h)>=v)return v;if(hh(x,T)){if(bd(d,l))return 0}else if(bd(l,d))return 0;let k=1/0;for(const D of d)for(let N=0,Z=D.length,X=Z-1;N<Z;X=N++){const ee=D[X],oe=D[N];for(const le of l)for(let fe=0,pe=le.length,ve=pe-1;fe<pe;ve=fe++){const Ce=le[ve],Ve=le[fe];if(km(ee,oe,Ce,Ve))return 0;k=Math.min(k,Dm(ee,oe,Ce,Ve,h))}}return k}function Br(d,l,h,v,x,T){if(!T)return;const k=by(vy(v,T),x,h);k<l&&d.push([k,T,[0,0]])}function bc(d,l,h,v,x,T,k){if(!T||!k)return;const D=by(vy(v,T),vy(x,k),h);D<l&&d.push([D,T,k])}function $m(d,l,h,v,x=1/0){let T=Math.min(v.distance(d[0],h[0][0]),x);if(T===0)return T;const k=new dv([[0,[0,d.length-1],[0,0]]],pa),D=_y(h);for(;k.length>0;){const N=k.pop();if(N[0]>=T)continue;const Z=N[1],X=l?50:100;if(ph(Z)<=X){if(!cl(Z,d.length))return NaN;if(l){const ee=_d(d,Z,h,v);if(isNaN(ee)||ee===0)return ee;T=Math.min(T,ee)}else for(let ee=Z[0];ee<=Z[1];++ee){const oe=Jb(d[ee],h,v);if(T=Math.min(T,oe),T===0)return 0}}else{const ee=Rm(Z,l);Br(k,T,v,d,D,ee[0]),Br(k,T,v,d,D,ee[1])}}return T}function zm(d,l,h,v,x,T=1/0){let k=Math.min(T,x.distance(d[0],h[0]));if(k===0)return k;const D=new dv([[0,[0,d.length-1],[0,h.length-1]]],pa);for(;D.length>0;){const N=D.pop();if(N[0]>=k)continue;const Z=N[1],X=N[2],ee=l?50:100,oe=v?50:100;if(ph(Z)<=ee&&ph(X)<=oe){if(!cl(Z,d.length)&&cl(X,h.length))return NaN;let le;if(l&&v)le=Lm(d,Z,h,X,x),k=Math.min(k,le);else if(l&&!v){const fe=d.slice(Z[0],Z[1]+1);for(let pe=X[0];pe<=X[1];++pe)if(le=ul(h[pe],fe,x),k=Math.min(k,le),k===0)return k}else if(!l&&v){const fe=h.slice(X[0],X[1]+1);for(let pe=Z[0];pe<=Z[1];++pe)if(le=ul(d[pe],fe,x),k=Math.min(k,le),k===0)return k}else le=xy(d,Z,h,X,x),k=Math.min(k,le)}else{const le=Rm(Z,l),fe=Rm(X,v);bc(D,k,x,d,h,le[0],fe[0]),bc(D,k,x,d,h,le[0],fe[1]),bc(D,k,x,d,h,le[1],fe[0]),bc(D,k,x,d,h,le[1],fe[1])}}return k}function wy(d){return d.type==="MultiPolygon"?d.coordinates.map((l=>({type:"Polygon",coordinates:l}))):d.type==="MultiLineString"?d.coordinates.map((l=>({type:"LineString",coordinates:l}))):d.type==="MultiPoint"?d.coordinates.map((l=>({type:"Point",coordinates:l}))):[d]}class xd{constructor(l,h){this.type=tn,this.geojson=l,this.geometries=h}static parse(l,h){if(l.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(vc(l[1])){const v=l[1];if(v.type==="FeatureCollection")return new xd(v,v.features.map((x=>wy(x.geometry))).flat());if(v.type==="Feature")return new xd(v,wy(v.geometry));if("type"in v&&"coordinates"in v)return new xd(v,wy(v))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(h,v){const x=h.geometry(),T=x.flat().map((N=>Uf([N.x,N.y],h.canonical)));if(x.length===0)return NaN;const k=new pv(T[0][1]);let D=1/0;for(const N of v){switch(N.type){case"Point":D=Math.min(D,zm(T,!1,[N.coordinates],!1,k,D));break;case"LineString":D=Math.min(D,zm(T,!1,N.coordinates,!0,k,D));break;case"Polygon":D=Math.min(D,$m(T,!1,N.coordinates,k,D))}if(D===0)return D}return D})(l,this.geometries);if(l.geometryType()==="LineString")return(function(h,v){const x=h.geometry(),T=x.flat().map((N=>Uf([N.x,N.y],h.canonical)));if(x.length===0)return NaN;const k=new pv(T[0][1]);let D=1/0;for(const N of v){switch(N.type){case"Point":D=Math.min(D,zm(T,!0,[N.coordinates],!1,k,D));break;case"LineString":D=Math.min(D,zm(T,!0,N.coordinates,!0,k,D));break;case"Polygon":D=Math.min(D,$m(T,!0,N.coordinates,k,D))}if(D===0)return D}return D})(l,this.geometries);if(l.geometryType()==="Polygon")return(function(h,v){const x=h.geometry();if(x.length===0||x[0].length===0)return NaN;const T=Pm(x,0).map((N=>N.map((Z=>Z.map((X=>Uf([X.x,X.y],h.canonical))))))),k=new pv(T[0][0][0][1]);let D=1/0;for(const N of v)for(const Z of T){switch(N.type){case"Point":D=Math.min(D,$m([N.coordinates],!1,Z,k,D));break;case"LineString":D=Math.min(D,$m(N.coordinates,!0,Z,k,D));break;case"Polygon":D=Math.min(D,mv(Z,N.coordinates,k,D))}if(D===0)return D}return D})(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Nm{constructor(l){this.type=nr,this.key=l}static parse(l,h){if(l.length!==2)return h.error(`Expected 1 argument, but found ${l.length-1} instead.`);const v=l[1];return v==null?h.error("Global state property must be defined."):typeof v!="string"?h.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new Nm(v)}evaluate(l){var h;const v=(h=l.globals)===null||h===void 0?void 0:h.globalState;return v&&Object.keys(v).length!==0?zf(v,this.key):null}eachChild(){}outputDefined(){return!1}}const Wf={"==":Qb,"!=":fy,">":WO,"<":Ub,">=":py,"<=":Bf,array:ia,at:vr,boolean:ia,case:wm,coalesce:yd,collator:Ff,format:Tm,image:jf,in:or,"index-of":gd,interpolate:sa,"interpolate-hcl":sa,"interpolate-lab":sa,length:Vf,let:ni,literal:Da,match:Rr,number:ia,"number-format":hv,object:ia,slice:ll,step:uh,string:ia,"to-boolean":oa,"to-color":oa,"to-number":oa,"to-string":oa,var:lh,within:dh,distance:xd,"global-state":Nm};class La{constructor(l,h,v,x){this.name=l,this.type=h,this._evaluate=v,this.args=x}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,h){const v=l[0],x=La.definitions[v];if(!x)return h.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const T=Array.isArray(x)?x[0]:x.type,k=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,D=k.filter((([Z])=>!Array.isArray(Z)||Z.length===l.length-1));let N=null;for(const[Z,X]of D){N=new md(h.registry,aa,h.path,null,h.scope);const ee=[];let oe=!1;for(let le=1;le<l.length;le++){const fe=l[le],pe=Array.isArray(Z)?Z[le-1]:Z.type,ve=N.parse(fe,1+ee.length,pe);if(!ve){oe=!0;break}ee.push(ve)}if(!oe)if(Array.isArray(Z)&&Z.length!==ee.length)N.error(`Expected ${Z.length} arguments, but found ${ee.length} instead.`);else{for(let le=0;le<ee.length;le++){const fe=Array.isArray(Z)?Z[le]:Z.type,pe=ee[le];N.concat(le+1).checkSubtype(fe,pe.type)}if(N.errors.length===0)return new La(v,T,X,ee)}}if(D.length===1)h.errors.push(...N.errors);else{const Z=(D.length?D:k).map((([ee])=>{return oe=ee,Array.isArray(oe)?`(${oe.map(Mr).join(", ")})`:`(${Mr(oe.type)}...)`;var oe})).join(" | "),X=[];for(let ee=1;ee<l.length;ee++){const oe=h.parse(l[ee],1+X.length);if(!oe)return null;X.push(Mr(oe.type))}h.error(`Expected arguments of type ${Z}, but found (${X.join(", ")}) instead.`)}return null}static register(l,h){La.definitions=h;for(const v in h)l[v]=La}}function gv(d,[l,h,v,x]){l=l.evaluate(d),h=h.evaluate(d),v=v.evaluate(d);const T=x?x.evaluate(d):1,k=Ia(l,h,v,T);if(k)throw new ci(k);return new cr(l/255,h/255,v/255,T,!1)}function Oy(d,l){return d in l}function $a(d,l){const h=l[d];return h===void 0?null:h}function xc(d){return{type:d}}function aa(d){if(d instanceof lh)return aa(d.boundExpression);if(d instanceof La&&d.name==="error"||d instanceof Ff||d instanceof dh||d instanceof xd||d instanceof Nm)return!1;const l=d instanceof oa||d instanceof ia;let h=!0;return d.eachChild((v=>{h=l?h&&aa(v):h&&v instanceof Da})),!!h&&cu(d)&&Od(d,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function cu(d){if(d instanceof La&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof dh||d instanceof xd)return!1;let l=!0;return d.eachChild((h=>{l&&!cu(h)&&(l=!1)})),l}function wd(d){if(d instanceof La&&d.name==="feature-state")return!1;let l=!0;return d.eachChild((h=>{l&&!wd(h)&&(l=!1)})),l}function Od(d,l){if(d instanceof La&&l.indexOf(d.name)>=0)return!1;let h=!0;return d.eachChild((v=>{h&&!Od(v,l)&&(h=!1)})),h}function Bm(d){return{result:"success",value:d}}function mh(d){return{result:"error",value:d}}function hl(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function yv(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function Hf(d){return!!d.expression&&d.expression.interpolated}function sr(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function Sy(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)&&Li(d)===fc}function za(d){return d}function Cy(d,l){const h=d.stops&&typeof d.stops[0][0]=="object",v=h||!(h||d.property!==void 0),x=d.type||(Hf(l)?"exponential":"interval"),T=(function(X){switch(X.type){case"color":return cr.parse;case"padding":return Ao.parse;case"numberArray":return Di.parse;case"colorArray":return Fn.parse;default:return null}})(l);if(T&&((d=Is({},d)).stops&&(d.stops=d.stops.map((X=>[X[0],T(X[1])]))),d.default=T(d.default?d.default:l.default)),d.colorSpace&&(k=d.colorSpace)!=="rgb"&&k!=="hcl"&&k!=="lab")throw new Error(`Unknown color space: "${d.colorSpace}"`);var k;const D=(function(X){switch(X){case"exponential":return gh;case"interval":return Ty;case"categorical":return ex;case"identity":return vv;default:throw new Error(`Unknown function type "${X}"`)}})(x);let N,Z;if(x==="categorical"){N=Object.create(null);for(const X of d.stops)N[X[0]]=X[1];Z=typeof d.stops[0][0]}if(h){const X={},ee=[];for(let fe=0;fe<d.stops.length;fe++){const pe=d.stops[fe],ve=pe[0].zoom;X[ve]===void 0&&(X[ve]={zoom:ve,type:d.type,property:d.property,default:d.default,stops:[]},ee.push(ve)),X[ve].stops.push([pe[0].value,pe[1]])}const oe=[];for(const fe of ee)oe.push([X[fe].zoom,Cy(X[fe],l)]);const le={name:"linear"};return{kind:"composite",interpolationType:le,interpolationFactor:sa.interpolationFactor.bind(void 0,le),zoomStops:oe.map((fe=>fe[0])),evaluate:({zoom:fe},pe)=>gh({stops:oe,base:d.base},l,fe).evaluate(fe,pe)}}if(v){const X=x==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:X,interpolationFactor:sa.interpolationFactor.bind(void 0,X),zoomStops:d.stops.map((ee=>ee[0])),evaluate:({zoom:ee})=>D(d,l,ee,N,Z)}}return{kind:"source",evaluate(X,ee){const oe=ee&&ee.properties?ee.properties[d.property]:void 0;return oe===void 0?Na(d.default,l.default):D(d,l,oe,N,Z)}}}function Na(d,l,h){return d!==void 0?d:l!==void 0?l:h!==void 0?h:void 0}function ex(d,l,h,v,x){return Na(typeof h===x?v[h]:void 0,d.default,l.default)}function Ty(d,l,h){if(sr(h)!=="number")return Na(d.default,l.default);const v=d.stops.length;if(v===1||h<=d.stops[0][0])return d.stops[0][1];if(h>=d.stops[v-1][0])return d.stops[v-1][1];const x=ch(d.stops.map((T=>T[0])),h);return d.stops[x][1]}function gh(d,l,h){const v=d.base!==void 0?d.base:1;if(sr(h)!=="number")return Na(d.default,l.default);const x=d.stops.length;if(x===1||h<=d.stops[0][0])return d.stops[0][1];if(h>=d.stops[x-1][0])return d.stops[x-1][1];const T=ch(d.stops.map((X=>X[0])),h),k=(function(X,ee,oe,le){const fe=le-oe,pe=X-oe;return fe===0?0:ee===1?pe/fe:(Math.pow(ee,pe)-1)/(Math.pow(ee,fe)-1)})(h,v,d.stops[T][0],d.stops[T+1][0]),D=d.stops[T][1],N=d.stops[T+1][1],Z=$i[l.type]||za;return typeof D.evaluate=="function"?{evaluate(...X){const ee=D.evaluate.apply(void 0,X),oe=N.evaluate.apply(void 0,X);if(ee!==void 0&&oe!==void 0)return Z(ee,oe,k,d.colorSpace)}}:Z(D,N,k,d.colorSpace)}function vv(d,l,h){switch(l.type){case"color":h=cr.parse(h);break;case"formatted":h=Ho.fromString(h.toString());break;case"resolvedImage":h=ra.fromString(h.toString());break;case"padding":h=Ao.parse(h);break;case"colorArray":h=Fn.parse(h);break;case"numberArray":h=Di.parse(h);break;default:sr(h)===l.type||l.type==="enum"&&l.values[h]||(h=void 0)}return Na(h,d.default,l.default)}La.register(Wf,{error:[{kind:"error"},[ir],(d,[l])=>{throw new ci(l.evaluate(d))}],typeof:[ir,[nr],(d,[l])=>Mr(Li(l.evaluate(d)))],"to-rgba":[Ls(tn,4),[Ra],(d,[l])=>{const[h,v,x,T]=l.evaluate(d).rgb;return[255*h,255*v,255*x,T]}],rgb:[Ra,[tn,tn,tn],gv],rgba:[Ra,[tn,tn,tn,tn],gv],has:{type:dr,overloads:[[[ir],(d,[l])=>Oy(l.evaluate(d),d.properties())],[[ir,fc],(d,[l,h])=>Oy(l.evaluate(d),h.evaluate(d))]]},get:{type:nr,overloads:[[[ir],(d,[l])=>$a(l.evaluate(d),d.properties())],[[ir,fc],(d,[l,h])=>$a(l.evaluate(d),h.evaluate(d))]]},"feature-state":[nr,[ir],(d,[l])=>$a(l.evaluate(d),d.featureState||{})],properties:[fc,[],d=>d.properties()],"geometry-type":[ir,[],d=>d.geometryType()],id:[nr,[],d=>d.id()],zoom:[tn,[],d=>d.globals.zoom],"heatmap-density":[tn,[],d=>d.globals.heatmapDensity||0],elevation:[tn,[],d=>d.globals.elevation||0],"line-progress":[tn,[],d=>d.globals.lineProgress||0],accumulated:[nr,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[tn,xc(tn),(d,l)=>{let h=0;for(const v of l)h+=v.evaluate(d);return h}],"*":[tn,xc(tn),(d,l)=>{let h=1;for(const v of l)h*=v.evaluate(d);return h}],"-":{type:tn,overloads:[[[tn,tn],(d,[l,h])=>l.evaluate(d)-h.evaluate(d)],[[tn],(d,[l])=>-l.evaluate(d)]]},"/":[tn,[tn,tn],(d,[l,h])=>l.evaluate(d)/h.evaluate(d)],"%":[tn,[tn,tn],(d,[l,h])=>l.evaluate(d)%h.evaluate(d)],ln2:[tn,[],()=>Math.LN2],pi:[tn,[],()=>Math.PI],e:[tn,[],()=>Math.E],"^":[tn,[tn,tn],(d,[l,h])=>Math.pow(l.evaluate(d),h.evaluate(d))],sqrt:[tn,[tn],(d,[l])=>Math.sqrt(l.evaluate(d))],log10:[tn,[tn],(d,[l])=>Math.log(l.evaluate(d))/Math.LN10],ln:[tn,[tn],(d,[l])=>Math.log(l.evaluate(d))],log2:[tn,[tn],(d,[l])=>Math.log(l.evaluate(d))/Math.LN2],sin:[tn,[tn],(d,[l])=>Math.sin(l.evaluate(d))],cos:[tn,[tn],(d,[l])=>Math.cos(l.evaluate(d))],tan:[tn,[tn],(d,[l])=>Math.tan(l.evaluate(d))],asin:[tn,[tn],(d,[l])=>Math.asin(l.evaluate(d))],acos:[tn,[tn],(d,[l])=>Math.acos(l.evaluate(d))],atan:[tn,[tn],(d,[l])=>Math.atan(l.evaluate(d))],min:[tn,xc(tn),(d,l)=>Math.min(...l.map((h=>h.evaluate(d))))],max:[tn,xc(tn),(d,l)=>Math.max(...l.map((h=>h.evaluate(d))))],abs:[tn,[tn],(d,[l])=>Math.abs(l.evaluate(d))],round:[tn,[tn],(d,[l])=>{const h=l.evaluate(d);return h<0?-Math.round(-h):Math.round(h)}],floor:[tn,[tn],(d,[l])=>Math.floor(l.evaluate(d))],ceil:[tn,[tn],(d,[l])=>Math.ceil(l.evaluate(d))],"filter-==":[dr,[ir,nr],(d,[l,h])=>d.properties()[l.value]===h.value],"filter-id-==":[dr,[nr],(d,[l])=>d.id()===l.value],"filter-type-==":[dr,[ir],(d,[l])=>d.geometryType()===l.value],"filter-<":[dr,[ir,nr],(d,[l,h])=>{const v=d.properties()[l.value],x=h.value;return typeof v==typeof x&&v<x}],"filter-id-<":[dr,[nr],(d,[l])=>{const h=d.id(),v=l.value;return typeof h==typeof v&&h<v}],"filter->":[dr,[ir,nr],(d,[l,h])=>{const v=d.properties()[l.value],x=h.value;return typeof v==typeof x&&v>x}],"filter-id->":[dr,[nr],(d,[l])=>{const h=d.id(),v=l.value;return typeof h==typeof v&&h>v}],"filter-<=":[dr,[ir,nr],(d,[l,h])=>{const v=d.properties()[l.value],x=h.value;return typeof v==typeof x&&v<=x}],"filter-id-<=":[dr,[nr],(d,[l])=>{const h=d.id(),v=l.value;return typeof h==typeof v&&h<=v}],"filter->=":[dr,[ir,nr],(d,[l,h])=>{const v=d.properties()[l.value],x=h.value;return typeof v==typeof x&&v>=x}],"filter-id->=":[dr,[nr],(d,[l])=>{const h=d.id(),v=l.value;return typeof h==typeof v&&h>=v}],"filter-has":[dr,[nr],(d,[l])=>l.value in d.properties()],"filter-has-id":[dr,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[dr,[Ls(ir)],(d,[l])=>l.value.indexOf(d.geometryType())>=0],"filter-id-in":[dr,[Ls(nr)],(d,[l])=>l.value.indexOf(d.id())>=0],"filter-in-small":[dr,[ir,Ls(nr)],(d,[l,h])=>h.value.indexOf(d.properties()[l.value])>=0],"filter-in-large":[dr,[ir,Ls(nr)],(d,[l,h])=>(function(v,x,T,k){for(;T<=k;){const D=T+k>>1;if(x[D]===v)return!0;x[D]>v?k=D-1:T=D+1}return!1})(d.properties()[l.value],h.value,0,h.value.length-1)],all:{type:dr,overloads:[[[dr,dr],(d,[l,h])=>l.evaluate(d)&&h.evaluate(d)],[xc(dr),(d,l)=>{for(const h of l)if(!h.evaluate(d))return!1;return!0}]]},any:{type:dr,overloads:[[[dr,dr],(d,[l,h])=>l.evaluate(d)||h.evaluate(d)],[xc(dr),(d,l)=>{for(const h of l)if(h.evaluate(d))return!0;return!1}]]},"!":[dr,[dr],(d,[l])=>!l.evaluate(d)],"is-supported-script":[dr,[ir],(d,[l])=>{const h=d.globals&&d.globals.isSupportedScript;return!h||h(l.evaluate(d))}],upcase:[ir,[ir],(d,[l])=>l.evaluate(d).toUpperCase()],downcase:[ir,[ir],(d,[l])=>l.evaluate(d).toLowerCase()],concat:[ir,xc(nr),(d,l)=>l.map((h=>ah(h.evaluate(d)))).join("")],"resolved-locale":[ir,[cd],(d,[l])=>l.evaluate(d).resolvedLocale()]});class ky{constructor(l,h,v){this.expression=l,this._warningHistory={},this._evaluator=new pd,this._defaultValue=h?(function(x){if(x.type==="color"&&Sy(x.default))return new cr(0,0,0,0);switch(x.type){case"color":return cr.parse(x.default)||null;case"padding":return Ao.parse(x.default)||null;case"numberArray":return Di.parse(x.default)||null;case"colorArray":return Fn.parse(x.default)||null;case"variableAnchorOffsetCollection":return ro.parse(x.default)||null;case"projectionDefinition":return Go.parse(x.default)||null;default:return x.default===void 0?null:x.default}})(h):null,this._enumValues=h&&h.type==="enum"?h.values:null,this._globalState=v}evaluateWithoutErrorHandling(l,h,v,x,T,k){return this._globalState&&(l=is(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=h,this._evaluator.featureState=v,this._evaluator.canonical=x,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=k,this.expression.evaluate(this._evaluator)}evaluate(l,h,v,x,T,k){this._globalState&&(l=is(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=h||null,this._evaluator.featureState=v||null,this._evaluator.canonical=x,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=k||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new ci(`Expected value to be one of ${Object.keys(this._enumValues).map((N=>JSON.stringify(N))).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function yh(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in Wf}function Gf(d,l,h){const v=new md(Wf,aa,[],l?(function(T){const k={color:Ra,string:ir,number:tn,enum:ir,boolean:dr,formatted:pc,padding:su,numberArray:gc,colorArray:mc,projectionDefinition:uy,resolvedImage:no,variableAnchorOffsetCollection:Df};return T.type==="array"?Ls(k[T.value]||nr,T.length):k[T.type]})(l):void 0),x=v.parse(d,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return x?Bm(new ky(x,l,h)):mh(v.errors)}class la{constructor(l,h,v){this.kind=l,this._styleExpression=h,this.isStateDependent=l!=="constant"&&!wd(h.expression),this.globalStateRefs=Xo(h.expression),this._globalState=v}evaluateWithoutErrorHandling(l,h,v,x,T,k){return this._globalState&&(l=is(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,h,v,x,T,k)}evaluate(l,h,v,x,T,k){return this._globalState&&(l=is(l,this._globalState)),this._styleExpression.evaluate(l,h,v,x,T,k)}}class vh{constructor(l,h,v,x,T){this.kind=l,this.zoomStops=v,this._styleExpression=h,this.isStateDependent=l!=="camera"&&!wd(h.expression),this.globalStateRefs=Xo(h.expression),this.interpolationType=x,this._globalState=T}evaluateWithoutErrorHandling(l,h,v,x,T,k){return this._globalState&&(l=is(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,h,v,x,T,k)}evaluate(l,h,v,x,T,k){return this._globalState&&(l=is(l,this._globalState)),this._styleExpression.evaluate(l,h,v,x,T,k)}interpolationFactor(l,h,v){return this.interpolationType?sa.interpolationFactor(this.interpolationType,l,h,v):0}}function _h(d,l,h){const v=Gf(d,l,h);if(v.result==="error")return v;const x=v.value.expression,T=cu(x);if(!T&&!hl(l))return mh([new Ds("","data expressions not supported")]);const k=Od(x,["zoom"]);if(!k&&!yv(l))return mh([new Ds("","zoom expressions not supported")]);const D=bh(x);return D||k?D instanceof Ds?mh([D]):D instanceof sa&&!Hf(l)?mh([new Ds("",'"interpolate" expressions cannot be used with this property')]):Bm(D?new vh(T?"camera":"composite",v.value,D.labels,D instanceof sa?D.interpolation:void 0,h):new la(T?"constant":"source",v.value,h)):mh([new Ds("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Sd{constructor(l,h){this._parameters=l,this._specification=h,Is(this,Cy(this._parameters,this._specification))}static deserialize(l){return new Sd(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function bh(d){let l=null;if(d instanceof ni)l=bh(d.result);else if(d instanceof yd){for(const h of d.args)if(l=bh(h),l)break}else(d instanceof uh||d instanceof sa)&&d.input instanceof La&&d.input.name==="zoom"&&(l=d);return l instanceof Ds||d.eachChild((h=>{const v=bh(h);v instanceof Ds?l=v:!l&&v?l=new Ds("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&v&&l!==v&&(l=new Ds("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),l}function Xo(d,l=new Set){return d instanceof Nm&&l.add(d.key),d.eachChild((h=>{Xo(h,l)})),l}function is(d,l){const{zoom:h,heatmapDensity:v,elevation:x,lineProgress:T,isSupportedScript:k,accumulated:D}=d??{};return{zoom:h,heatmapDensity:v,elevation:x,lineProgress:T,isSupportedScript:k,accumulated:D,globalState:l}}function wc(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const l of d.slice(1))if(!wc(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const Oc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ma(d,l){if(d==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};wc(d)||(d=Cd(d));const h=Gf(d,Oc,l);if(h.result==="error")throw new Error(h.value.map((v=>`${v.key}: ${v.message}`)).join(", "));return{filter:(v,x,T)=>h.value.evaluate(v,x,{},T),needGeometry:_v(d),getGlobalStateRefs:()=>Xo(h.value.expression)}}function uu(d,l){return d<l?-1:d>l?1:0}function _v(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let l=1;l<d.length;l++)if(_v(d[l]))return!0;return!1}function Cd(d){if(!d)return!0;const l=d[0];return d.length<=1?l!=="any":l==="=="?Xf(d[1],d[2],"=="):l==="!="?ui(Xf(d[1],d[2],"==")):l==="<"||l===">"||l==="<="||l===">="?Xf(d[1],d[2],l):l==="any"?(h=d.slice(1),["any"].concat(h.map(Cd))):l==="all"?["all"].concat(d.slice(1).map(Cd)):l==="none"?["all"].concat(d.slice(1).map(Cd).map(ui)):l==="in"?bv(d[1],d.slice(2)):l==="!in"?ui(bv(d[1],d.slice(2))):l==="has"?os(d[1]):l!=="!has"||ui(os(d[1]));var h}function Xf(d,l,h){switch(d){case"$type":return[`filter-type-${h}`,l];case"$id":return[`filter-id-${h}`,l];default:return[`filter-${h}`,d,l]}}function bv(d,l){if(l.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some((h=>typeof h!=typeof l[0]))?["filter-in-large",d,["literal",l.sort(uu)]]:["filter-in-small",d,["literal",l]]}}function os(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function ui(d){return["!",d]}function kr(d){const l=typeof d;if(l==="number"||l==="boolean"||l==="string"||d==null)return JSON.stringify(d);if(Array.isArray(d)){let x="[";for(const T of d)x+=`${kr(T)},`;return`${x}]`}const h=Object.keys(d).sort();let v="{";for(let x=0;x<h.length;x++)v+=`${JSON.stringify(h[x])}:${kr(d[h[x]])},`;return`${v}}`}function hu(d){let l="";for(const h of Ur)l+=`/${kr(d[h])}`;return l}function Ba(d){const l=d.value;return l?[new Gt(d.key,l,"constants have been deprecated as of v8")]:[]}function Ui(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function ga(d){if(Array.isArray(d))return d.map(ga);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const l={};for(const h in d)l[h]=ga(d[h]);return l}return Ui(d)}function ya(d){const l=d.key,h=d.value,v=d.valueSpec||{},x=d.objectElementValidators||{},T=d.style,k=d.styleSpec,D=d.validateSpec;let N=[];const Z=sr(h);if(Z!=="object")return[new Gt(l,h,`object expected, ${Z} found`)];for(const X in h){const ee=X.split(".")[0],oe=zf(v,ee)||v["*"];let le;if(zf(x,ee))le=x[ee];else if(zf(v,ee)){if(h[X]===void 0)continue;le=D}else if(x["*"])le=x["*"];else{if(!v["*"]){N.push(new Gt(l,h[X],`unknown property "${X}"`));continue}le=D}N=N.concat(le({key:(l&&`${l}.`)+X,value:h[X],valueSpec:oe,style:T,styleSpec:k,object:h,objectKey:X,validateSpec:D},h))}for(const X in v)x[X]||v[X].required&&v[X].default===void 0&&h[X]===void 0&&N.push(new Gt(l,h,`missing required property "${X}"`));return N}function Fm(d){const l=d.value,h=d.valueSpec,v=d.style,x=d.styleSpec,T=d.key,k=d.arrayElementValidator||d.validateSpec;if(sr(l)!=="array")return[new Gt(T,l,`array expected, ${sr(l)} found`)];if(h.length&&l.length!==h.length)return[new Gt(T,l,`array length ${h.length} expected, length ${l.length} found`)];let D={type:h.value,values:h.values};x.$version<7&&(D.function=h.function),sr(h.value)==="object"&&(D=h.value);let N=[];for(let Z=0;Z<l.length;Z++)N=N.concat(k({array:l,arrayIndex:Z,value:l[Z],valueSpec:D,validateSpec:d.validateSpec,style:v,styleSpec:x,key:`${T}[${Z}]`}));return N}function Sc(d){const l=d.key,h=d.value,v=d.valueSpec;let x=sr(h);return x==="number"&&h!=h&&(x="NaN"),x!=="number"?[new Gt(l,h,`number expected, ${x} found`)]:"minimum"in v&&h<v.minimum?[new Gt(l,h,`${h} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&h>v.maximum?[new Gt(l,h,`${h} is greater than the maximum value ${v.maximum}`)]:[]}function Cc(d){const l=d.valueSpec,h=Ui(d.value.type);let v,x,T,k={};const D=h!=="categorical"&&d.value.property===void 0,N=!D,Z=sr(d.value.stops)==="array"&&sr(d.value.stops[0])==="array"&&sr(d.value.stops[0][0])==="object",X=ya({key:d.key,value:d.value,valueSpec:d.styleSpec.function,validateSpec:d.validateSpec,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(le){if(h==="identity")return[new Gt(le.key,le.value,'identity function may not have a "stops" property')];let fe=[];const pe=le.value;return fe=fe.concat(Fm({key:le.key,value:pe,valueSpec:le.valueSpec,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec,arrayElementValidator:ee})),sr(pe)==="array"&&pe.length===0&&fe.push(new Gt(le.key,pe,"array must have at least one stop")),fe},default:function(le){return le.validateSpec({key:le.key,value:le.value,valueSpec:l,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec})}}});return h==="identity"&&D&&X.push(new Gt(d.key,d.value,'missing required property "property"')),h==="identity"||d.value.stops||X.push(new Gt(d.key,d.value,'missing required property "stops"')),h==="exponential"&&d.valueSpec.expression&&!Hf(d.valueSpec)&&X.push(new Gt(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(N&&!hl(d.valueSpec)?X.push(new Gt(d.key,d.value,"property functions not supported")):D&&!yv(d.valueSpec)&&X.push(new Gt(d.key,d.value,"zoom functions not supported"))),h!=="categorical"&&!Z||d.value.property!==void 0||X.push(new Gt(d.key,d.value,'"property" property is required')),X;function ee(le){let fe=[];const pe=le.value,ve=le.key;if(sr(pe)!=="array")return[new Gt(ve,pe,`array expected, ${sr(pe)} found`)];if(pe.length!==2)return[new Gt(ve,pe,`array length 2 expected, length ${pe.length} found`)];if(Z){if(sr(pe[0])!=="object")return[new Gt(ve,pe,`object expected, ${sr(pe[0])} found`)];if(pe[0].zoom===void 0)return[new Gt(ve,pe,"object stop key must have zoom")];if(pe[0].value===void 0)return[new Gt(ve,pe,"object stop key must have value")];if(T&&T>Ui(pe[0].zoom))return[new Gt(ve,pe[0].zoom,"stop zoom values must appear in ascending order")];Ui(pe[0].zoom)!==T&&(T=Ui(pe[0].zoom),x=void 0,k={}),fe=fe.concat(ya({key:`${ve}[0]`,value:pe[0],valueSpec:{zoom:{}},validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec,objectElementValidators:{zoom:Sc,value:oe}}))}else fe=fe.concat(oe({key:`${ve}[0]`,value:pe[0],validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec},pe));return yh(ga(pe[1]))?fe.concat([new Gt(`${ve}[1]`,pe[1],"expressions are not allowed in function stops.")]):fe.concat(le.validateSpec({key:`${ve}[1]`,value:pe[1],valueSpec:l,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec}))}function oe(le,fe){const pe=sr(le.value),ve=Ui(le.value),Ce=le.value!==null?le.value:fe;if(v){if(pe!==v)return[new Gt(le.key,Ce,`${pe} stop domain type must match previous stop domain type ${v}`)]}else v=pe;if(pe!=="number"&&pe!=="string"&&pe!=="boolean")return[new Gt(le.key,Ce,"stop domain value must be a number, string, or boolean")];if(pe!=="number"&&h!=="categorical"){let Ve=`number expected, ${pe} found`;return hl(l)&&h===void 0&&(Ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Gt(le.key,Ce,Ve)]}return h!=="categorical"||pe!=="number"||isFinite(ve)&&Math.floor(ve)===ve?h!=="categorical"&&pe==="number"&&x!==void 0&&ve<x?[new Gt(le.key,Ce,"stop domain values must appear in ascending order")]:(x=ve,h==="categorical"&&ve in k?[new Gt(le.key,Ce,"stop domain values must be unique")]:(k[ve]=!0,[])):[new Gt(le.key,Ce,`integer expected, found ${ve}`)]}}function Tc(d){const l=(d.expressionContext==="property"?_h:Gf)(ga(d.value),d.valueSpec);if(l.result==="error")return l.value.map((v=>new Gt(`${d.key}${v.key}`,d.value,v.message)));const h=l.value.expression||l.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!h.outputDefined())return[new Gt(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!wd(h))return[new Gt(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!wd(h))return[new Gt(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!Od(h,["zoom","feature-state"]))return[new Gt(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!cu(h))return[new Gt(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function du(d){const l=d.key,h=d.value,v=sr(h);return v!=="string"?[new Gt(l,h,`color expected, ${v} found`)]:cr.parse(String(h))?[]:[new Gt(l,h,`color expected, "${h}" found`)]}function fu(d){const l=d.key,h=d.value,v=d.valueSpec,x=[];return Array.isArray(v.values)?v.values.indexOf(Ui(h))===-1&&x.push(new Gt(l,h,`expected one of [${v.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(v.values).indexOf(Ui(h))===-1&&x.push(new Gt(l,h,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(h)} found`)),x}function dl(d){return wc(ga(d.value))?Tc(Is({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):kc(d)}function kc(d){const l=d.value,h=d.key;if(sr(l)!=="array")return[new Gt(h,l,`array expected, ${sr(l)} found`)];const v=d.styleSpec;let x,T=[];if(l.length<1)return[new Gt(h,l,"filter array must have at least 1 element")];switch(T=T.concat(fu({key:`${h}[0]`,value:l[0],valueSpec:v.filter_operator,style:d.style,styleSpec:d.styleSpec})),Ui(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Ui(l[1])==="$type"&&T.push(new Gt(h,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&T.push(new Gt(h,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(x=sr(l[1]),x!=="string"&&T.push(new Gt(`${h}[1]`,l[1],`string expected, ${x} found`)));for(let k=2;k<l.length;k++)x=sr(l[k]),Ui(l[1])==="$type"?T=T.concat(fu({key:`${h}[${k}]`,value:l[k],valueSpec:v.geometry_type,style:d.style,styleSpec:d.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&T.push(new Gt(`${h}[${k}]`,l[k],`string, number, or boolean expected, ${x} found`));break;case"any":case"all":case"none":for(let k=1;k<l.length;k++)T=T.concat(kc({key:`${h}[${k}]`,value:l[k],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":x=sr(l[1]),l.length!==2?T.push(new Gt(h,l,`filter array for "${l[0]}" operator must have 2 elements`)):x!=="string"&&T.push(new Gt(`${h}[1]`,l[1],`string expected, ${x} found`))}return T}function pu(d,l){const h=d.key,v=d.validateSpec,x=d.style,T=d.styleSpec,k=d.value,D=d.objectKey,N=T[`${l}_${d.layerType}`];if(!N)return[];const Z=D.match(/^(.*)-transition$/);if(l==="paint"&&Z&&N[Z[1]]&&N[Z[1]].transition)return v({key:h,value:k,valueSpec:T.transition,style:x,styleSpec:T});const X=d.valueSpec||N[D];if(!X)return[new Gt(h,k,`unknown property "${D}"`)];let ee;if(sr(k)==="string"&&hl(X)&&!X.tokens&&(ee=/^{([^}]+)}$/.exec(k)))return[new Gt(h,k,`"${D}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ee[1])} }\`.`)];const oe=[];return d.layerType==="symbol"&&D==="text-font"&&Sy(ga(k))&&Ui(k.type)==="identity"&&oe.push(new Gt(h,k,'"text-font" does not support identity functions')),oe.concat(v({key:d.key,value:k,valueSpec:X,style:x,styleSpec:T,expressionContext:"property",propertyType:l,propertyKey:D}))}function Ec(d){return pu(d,"paint")}function Ey(d){return pu(d,"layout")}function Ay(d){let l=[];const h=d.value,v=d.key,x=d.style,T=d.styleSpec;if(sr(h)!=="object")return[new Gt(v,h,`object expected, ${sr(h)} found`)];h.type||h.ref||l.push(new Gt(v,h,'either "type" or "ref" is required'));let k=Ui(h.type);const D=Ui(h.ref);if(h.id){const N=Ui(h.id);for(let Z=0;Z<d.arrayIndex;Z++){const X=x.layers[Z];Ui(X.id)===N&&l.push(new Gt(v,h.id,`duplicate layer id "${h.id}", previously used at line ${X.id.__line__}`))}}if("ref"in h){let N;["type","source","source-layer","filter","layout"].forEach((Z=>{Z in h&&l.push(new Gt(v,h[Z],`"${Z}" is prohibited for ref layers`))})),x.layers.forEach((Z=>{Ui(Z.id)===D&&(N=Z)})),N?N.ref?l.push(new Gt(v,h.ref,"ref cannot reference another ref layer")):k=Ui(N.type):l.push(new Gt(v,h.ref,`ref layer "${D}" not found`))}else if(k!=="background")if(h.source){const N=x.sources&&x.sources[h.source],Z=N&&Ui(N.type);N?Z==="vector"&&k==="raster"?l.push(new Gt(v,h.source,`layer "${h.id}" requires a raster source`)):Z!=="raster-dem"&&k==="hillshade"||Z!=="raster-dem"&&k==="color-relief"?l.push(new Gt(v,h.source,`layer "${h.id}" requires a raster-dem source`)):Z==="raster"&&k!=="raster"?l.push(new Gt(v,h.source,`layer "${h.id}" requires a vector source`)):Z!=="vector"||h["source-layer"]?Z==="raster-dem"&&k!=="hillshade"&&k!=="color-relief"?l.push(new Gt(v,h.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):k!=="line"||!h.paint||!h.paint["line-gradient"]||Z==="geojson"&&N.lineMetrics||l.push(new Gt(v,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new Gt(v,h,`layer "${h.id}" must specify a "source-layer"`)):l.push(new Gt(v,h.source,`source "${h.source}" not found`))}else l.push(new Gt(v,h,'missing required property "source"'));return l=l.concat(ya({key:v,value:h,valueSpec:T.layer,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*":()=>[],type:()=>d.validateSpec({key:`${v}.type`,value:h.type,valueSpec:T.layer.type,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,object:h,objectKey:"type"}),filter:dl,layout:N=>ya({layer:h,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":Z=>Ey(Is({layerType:k},Z))}}),paint:N=>ya({layer:h,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":Z=>Ec(Is({layerType:k},Z))}})}})),l}function Fa(d){const l=d.value,h=d.key,v=sr(l);return v!=="string"?[new Gt(h,l,`string expected, ${v} found`)]:[]}const Yf={promoteId:function({key:d,value:l}){if(sr(l)==="string")return Fa({key:d,value:l});{const h=[];for(const v in l)h.push(...Fa({key:`${d}.${v}`,value:l[v]}));return h}}};function mu(d){const l=d.value,h=d.key,v=d.styleSpec,x=d.style,T=d.validateSpec;if(!l.type)return[new Gt(h,l,'"type" is required')];const k=Ui(l.type);let D;switch(k){case"vector":case"raster":return D=ya({key:h,value:l,valueSpec:v[`source_${k.replace("-","_")}`],style:d.style,styleSpec:v,objectElementValidators:Yf,validateSpec:T}),D;case"raster-dem":return D=(function(N){var Z;const X=(Z=N.sourceName)!==null&&Z!==void 0?Z:"",ee=N.value,oe=N.styleSpec,le=oe.source_raster_dem,fe=N.style;let pe=[];const ve=sr(ee);if(ee===void 0)return pe;if(ve!=="object")return pe.push(new Gt("source_raster_dem",ee,`object expected, ${ve} found`)),pe;const Ce=Ui(ee.encoding)==="custom",Ve=["redFactor","greenFactor","blueFactor","baseShift"],Ae=N.value.encoding?`"${N.value.encoding}"`:"Default";for(const Re in ee)!Ce&&Ve.includes(Re)?pe.push(new Gt(Re,ee[Re],`In "${X}": "${Re}" is only valid when "encoding" is set to "custom". ${Ae} encoding found`)):le[Re]?pe=pe.concat(N.validateSpec({key:Re,value:ee[Re],valueSpec:le[Re],validateSpec:N.validateSpec,style:fe,styleSpec:oe})):pe.push(new Gt(Re,ee[Re],`unknown property "${Re}"`));return pe})({sourceName:h,value:l,style:d.style,styleSpec:v,validateSpec:T}),D;case"geojson":if(D=ya({key:h,value:l,valueSpec:v.source_geojson,style:x,styleSpec:v,validateSpec:T,objectElementValidators:Yf}),l.cluster)for(const N in l.clusterProperties){const[Z,X]=l.clusterProperties[N],ee=typeof Z=="string"?[Z,["accumulated"],["get",N]]:Z;D.push(...Tc({key:`${h}.${N}.map`,value:X,expressionContext:"cluster-map"})),D.push(...Tc({key:`${h}.${N}.reduce`,value:ee,expressionContext:"cluster-reduce"}))}return D;case"video":return ya({key:h,value:l,valueSpec:v.source_video,style:x,validateSpec:T,styleSpec:v});case"image":return ya({key:h,value:l,valueSpec:v.source_image,style:x,validateSpec:T,styleSpec:v});case"canvas":return[new Gt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return fu({key:`${h}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Po(d){const l=d.value,h=d.styleSpec,v=h.light,x=d.style;let T=[];const k=sr(l);if(l===void 0)return T;if(k!=="object")return T=T.concat([new Gt("light",l,`object expected, ${k} found`)]),T;for(const D in l){const N=D.match(/^(.*)-transition$/);T=T.concat(N&&v[N[1]]&&v[N[1]].transition?d.validateSpec({key:D,value:l[D],valueSpec:h.transition,validateSpec:d.validateSpec,style:x,styleSpec:h}):v[D]?d.validateSpec({key:D,value:l[D],valueSpec:v[D],validateSpec:d.validateSpec,style:x,styleSpec:h}):[new Gt(D,l[D],`unknown property "${D}"`)])}return T}function jm(d){const l=d.value,h=d.styleSpec,v=h.sky,x=d.style,T=sr(l);if(l===void 0)return[];if(T!=="object")return[new Gt("sky",l,`object expected, ${T} found`)];let k=[];for(const D in l)k=k.concat(v[D]?d.validateSpec({key:D,value:l[D],valueSpec:v[D],style:x,styleSpec:h}):[new Gt(D,l[D],`unknown property "${D}"`)]);return k}function Py(d){const l=d.value,h=d.styleSpec,v=h.terrain,x=d.style;let T=[];const k=sr(l);if(l===void 0)return T;if(k!=="object")return T=T.concat([new Gt("terrain",l,`object expected, ${k} found`)]),T;for(const D in l)T=T.concat(v[D]?d.validateSpec({key:D,value:l[D],valueSpec:v[D],validateSpec:d.validateSpec,style:x,styleSpec:h}):[new Gt(D,l[D],`unknown property "${D}"`)]);return T}function xv(d){let l=[];const h=d.value,v=d.key;if(Array.isArray(h)){const x=[],T=[];for(const k in h)h[k].id&&x.includes(h[k].id)&&l.push(new Gt(v,h,`all the sprites' ids must be unique, but ${h[k].id} is duplicated`)),x.push(h[k].id),h[k].url&&T.includes(h[k].url)&&l.push(new Gt(v,h,`all the sprites' URLs must be unique, but ${h[k].url} is duplicated`)),T.push(h[k].url),l=l.concat(ya({key:`${v}[${k}]`,value:h[k],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:d.validateSpec}));return l}return Fa({key:v,value:h})}function tx(d){return!!d&&d.constructor===Object}function wv(d){return tx(d.value)?[]:[new Gt(d.key,d.value,`object expected, ${sr(d.value)} found`)]}const vo={"*":()=>[],array:Fm,boolean:function(d){const l=d.value,h=d.key,v=sr(l);return v!=="boolean"?[new Gt(h,l,`boolean expected, ${v} found`)]:[]},number:Sc,color:du,constants:Ba,enum:fu,filter:dl,function:Cc,layer:Ay,object:ya,source:mu,light:Po,sky:jm,terrain:Py,projection:function(d){const l=d.value,h=d.styleSpec,v=h.projection,x=d.style,T=sr(l);if(l===void 0)return[];if(T!=="object")return[new Gt("projection",l,`object expected, ${T} found`)];let k=[];for(const D in l)k=k.concat(v[D]?d.validateSpec({key:D,value:l[D],valueSpec:v[D],style:x,styleSpec:h}):[new Gt(D,l[D],`unknown property "${D}"`)]);return k},projectionDefinition:function(d){const l=d.key;let h=d.value;h=h instanceof String?h.valueOf():h;const v=sr(h);return v!=="array"||(function(x){return Array.isArray(x)&&x.length===3&&typeof x[0]=="string"&&typeof x[1]=="string"&&typeof x[2]=="number"})(h)||(function(x){return!!["interpolate","step","literal"].includes(x[0])})(h)?["array","string"].includes(v)?[]:[new Gt(l,h,`projection expected, invalid type "${v}" found`)]:[new Gt(l,h,`projection expected, invalid array ${JSON.stringify(h)} found`)]},string:Fa,formatted:function(d){return Fa(d).length===0?[]:Tc(d)},resolvedImage:function(d){return Fa(d).length===0?[]:Tc(d)},padding:function(d){const l=d.key,h=d.value;if(sr(h)==="array"){if(h.length<1||h.length>4)return[new Gt(l,h,`padding requires 1 to 4 values; ${h.length} values found`)];const v={type:"number"};let x=[];for(let T=0;T<h.length;T++)x=x.concat(d.validateSpec({key:`${l}[${T}]`,value:h[T],validateSpec:d.validateSpec,valueSpec:v}));return x}return Sc({key:l,value:h,valueSpec:{}})},numberArray:function(d){const l=d.key,h=d.value;if(sr(h)==="array"){const v={type:"number"};if(h.length<1)return[new Gt(l,h,"array length at least 1 expected, length 0 found")];let x=[];for(let T=0;T<h.length;T++)x=x.concat(d.validateSpec({key:`${l}[${T}]`,value:h[T],validateSpec:d.validateSpec,valueSpec:v}));return x}return Sc({key:l,value:h,valueSpec:{}})},colorArray:function(d){const l=d.key,h=d.value;if(sr(h)==="array"){if(h.length<1)return[new Gt(l,h,"array length at least 1 expected, length 0 found")];let v=[];for(let x=0;x<h.length;x++)v=v.concat(du({key:`${l}[${x}]`,value:h[x]}));return v}return du({key:l,value:h})},variableAnchorOffsetCollection:function(d){const l=d.key,h=d.value,v=sr(h),x=d.styleSpec;if(v!=="array"||h.length<1||h.length%2!=0)return[new Gt(l,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let T=[];for(let k=0;k<h.length;k+=2)T=T.concat(fu({key:`${l}[${k}]`,value:h[k],valueSpec:x.layout_symbol["text-anchor"]})),T=T.concat(Fm({key:`${l}[${k+1}]`,value:h[k+1],valueSpec:{length:2,value:"number"},validateSpec:d.validateSpec,style:d.style,styleSpec:x}));return T},sprite:xv,state:wv,fontFaces:function(d){const l=d.key,h=d.value,v=d.validateSpec,x=d.styleSpec,T=d.style;if(!tx(h))return[new Gt(l,h,`object expected, ${sr(h)} found`)];const k=[];for(const D in h){const N=h[D],Z=sr(N);if(Z==="string")k.push(...Fa({key:`${l}.${D}`,value:N}));else if(Z==="array"){const X={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[ee,oe]of N.entries())k.push(...ya({key:`${l}.${D}[${ee}]`,value:oe,valueSpec:X,styleSpec:x,style:T,validateSpec:v}))}else k.push(new Gt(`${l}.${D}`,N,`string or array expected, ${Z} found`))}return k}};function Ac(d){const l=d.value,h=d.valueSpec,v=d.styleSpec;return d.validateSpec=Ac,h.expression&&Sy(Ui(l))?Cc(d):h.expression&&yh(ga(l))?Tc(d):h.type&&vo[h.type]?vo[h.type](d):ya(Is({},d,{valueSpec:h.type?v[h.type]:h}))}function Kf(d){const l=d.value,h=d.key,v=Fa(d);return v.length||(l.indexOf("{fontstack}")===-1&&v.push(new Gt(h,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&v.push(new Gt(h,l,'"glyphs" url must include a "{range}" token'))),v}function $s(d,l=ut){let h=[];return h=h.concat(Ac({key:"",value:d,valueSpec:l.$root,styleSpec:l,style:d,validateSpec:Ac,objectElementValidators:{glyphs:Kf,"*":()=>[]}})),d.constants&&(h=h.concat(Ba({key:"constants",value:d.constants}))),Td(h)}function ja(d){return function(l){return d(Object.assign({},l,{validateSpec:Ac}))}}function Td(d){return[].concat(d).sort(((l,h)=>l.line-h.line))}function zs(d){return function(...l){return Td(d.apply(this,l))}}$s.source=zs(ja(mu)),$s.sprite=zs(ja(xv)),$s.glyphs=zs(ja(Kf)),$s.light=zs(ja(Po)),$s.sky=zs(ja(jm)),$s.terrain=zs(ja(Py)),$s.state=zs(ja(wv)),$s.layer=zs(ja(Ay)),$s.filter=zs(ja(dl)),$s.paintProperty=zs(ja(Ec)),$s.layoutProperty=zs(ja(Ey));const GO={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class Jf{constructor(l,h){this._globalState=h,this.setValue(l)}evaluate(){var l;return(l=this._literalValue)!==null&&l!==void 0?l:this._compiledValue.evaluate({})}setValue(l){if(l==null||l==="visible"||l==="none")return this._literalValue=l==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const h=Gf(l,GO,this._globalState);if(h.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(h.value.map((v=>`${v.key}: ${v.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=h.value,this._globalStateRefs=Xo(h.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const Vm=ut,Yo=$s,Ql=Yo.light,My=Yo.sky,Ry=Yo.paintProperty,nx=Yo.layoutProperty;function Ul(d,l){let h=!1;if(l&&l.length)for(const v of l)d.fire(new Er(new Error(v.message))),h=!0;return h}class xh{constructor(l,h,v){const x=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const k=new Int32Array(this.arrayBuffer);l=k[0],this.d=(h=k[1])+2*(v=k[2]);for(let N=0;N<this.d*this.d;N++){const Z=k[3+N],X=k[3+N+1];x.push(Z===X?null:k.subarray(Z,X))}const D=k[3+x.length+1];this.keys=k.subarray(k[3+x.length],D),this.bboxes=k.subarray(D),this.insert=this._insertReadonly}else{this.d=h+2*v;for(let k=0;k<this.d*this.d;k++)x.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=l,this.padding=v,this.scale=h/l,this.uid=0;const T=v/h*l;this.min=-T,this.max=l+T}insert(l,h,v,x,T){this._forEachCell(h,v,x,T,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(h),this.bboxes.push(v),this.bboxes.push(x),this.bboxes.push(T)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,h,v,x,T,k){this.cells[T].push(k)}query(l,h,v,x,T){const k=this.min,D=this.max;if(l<=k&&h<=k&&D<=v&&D<=x&&!T)return Array.prototype.slice.call(this.keys);{const N=[];return this._forEachCell(l,h,v,x,this._queryCell,N,{},T),N}}_queryCell(l,h,v,x,T,k,D,N){const Z=this.cells[T];if(Z!==null){const X=this.keys,ee=this.bboxes;for(let oe=0;oe<Z.length;oe++){const le=Z[oe];if(D[le]===void 0){const fe=4*le;(N?N(ee[fe+0],ee[fe+1],ee[fe+2],ee[fe+3]):l<=ee[fe+2]&&h<=ee[fe+3]&&v>=ee[fe+0]&&x>=ee[fe+1])?(D[le]=!0,k.push(X[le])):D[le]=!1}}}}_forEachCell(l,h,v,x,T,k,D,N){const Z=this._convertToCellCoord(l),X=this._convertToCellCoord(h),ee=this._convertToCellCoord(v),oe=this._convertToCellCoord(x);for(let le=Z;le<=ee;le++)for(let fe=X;fe<=oe;fe++){const pe=this.d*fe+le;if((!N||N(this._convertFromCellCoord(le),this._convertFromCellCoord(fe),this._convertFromCellCoord(le+1),this._convertFromCellCoord(fe+1)))&&T.call(this,l,h,v,x,pe,k,D,N))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,h=3+this.cells.length+1+1;let v=0;for(let k=0;k<this.cells.length;k++)v+=this.cells[k].length;const x=new Int32Array(h+v+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;let T=h;for(let k=0;k<l.length;k++){const D=l[k];x[3+k]=T,x.set(D,T),T+=D.length}return x[3+l.length]=T,x.set(this.keys,T),T+=this.keys.length,x[3+l.length+1]=T,x.set(this.bboxes,T),T+=this.bboxes.length,x.buffer}static serialize(l,h){const v=l.toArrayBuffer();return h&&h.push(v),{buffer:v}}static deserialize(l){return new xh(l.buffer)}}const va={};function pn(d,l,h={}){if(va[d])throw new Error(`${d} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:d,writeable:!1}),va[d]={klass:l,omit:h.omit||[],shallow:h.shallow||[]}}pn("Object",Object),pn("Set",Set),pn("TransferableGridIndex",xh),pn("Color",cr),pn("Error",Error),pn("AJAXError",Ye),pn("ResolvedImage",ra),pn("StylePropertyFunction",Sd),pn("StyleExpression",ky,{omit:["_evaluator"]}),pn("ZoomDependentExpression",vh),pn("ZoomConstantExpression",la),pn("CompoundExpression",La,{omit:["_evaluate"]});for(const d in Wf)Wf[d]._classRegistryKey||pn(`Expression_${d}`,Wf[d]);function Qm(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function Iy(d){return d.$name||d.constructor._classRegistryKey}function fl(d){return!(function(l){if(l===null||typeof l!="object")return!1;const h=Iy(l);return!(!h||h==="Object")})(d)&&(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error||Qm(d)||Nn(d)||ArrayBuffer.isView(d)||d instanceof ImageData)}function Zl(d,l){if(fl(d))return(Qm(d)||Nn(d))&&l&&l.push(d),ArrayBuffer.isView(d)&&l&&l.push(d.buffer),d instanceof ImageData&&l&&l.push(d.data.buffer),d;if(Array.isArray(d)){const T=[];for(const k of d)T.push(Zl(k,l));return T}if(typeof d!="object")throw new Error("can't serialize object of type "+typeof d);const h=Iy(d);if(!h)throw new Error(`can't serialize object of unregistered class ${d.constructor.name}`);if(!va[h])throw new Error(`${h} is not registered.`);const{klass:v}=va[h],x=v.serialize?v.serialize(d,l):{};if(v.serialize){if(l&&x===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const T in d){if(!d.hasOwnProperty(T)||va[h].omit.indexOf(T)>=0)continue;const k=d[T];x[T]=va[h].shallow.indexOf(T)>=0?k:Zl(k,l)}d instanceof Error&&(x.message=d.message)}if(x.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(x.$name=h),x}function ep(d){if(fl(d))return d;if(Array.isArray(d))return d.map(ep);if(typeof d!="object")throw new Error("can't deserialize object of type "+typeof d);const l=Iy(d)||"Object";if(!va[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:h}=va[l];if(!h)throw new Error(`can't deserialize unregistered class ${l}`);if(h.deserialize)return h.deserialize(d);const v=Object.create(h.prototype);for(const x of Object.keys(d)){if(x==="$name")continue;const T=d[x];v[x]=va[l].shallow.indexOf(x)>=0?T:ep(T)}return v}class Dy{constructor(){this.first=!0}update(l,h){const v=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=h),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=v,!0))}}function Pc(d){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(d))}function kd(d){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(d))}function Um(d){return/\s/u.test(String.fromCodePoint(d))}function Mc(d){for(const l of d)if(kd(l.codePointAt(0)))return!0;return!1}function Ly(d){for(const l of d)if(!Ov(l.codePointAt(0)))return!1;return!0}function Zm(d){const l=d.map((h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch{return null}})).filter((h=>h));return new RegExp(l.join("|"),"u")}const Rc=Zm(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ov(d){return!Rc.test(String.fromCodePoint(d))}function Ic(d){return!(kd(d)||(l=d,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(l))));var l}const $y=Zm(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function qm(d){return $y.test(String.fromCodePoint(d))}function Dc(d,l){return!(!l&&qm(d)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(d)))}function gu(d){for(const l of d)if(qm(l.codePointAt(0)))return!0;return!1}const pl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(d){this.pluginStatus=d.pluginStatus,this.pluginURL=d.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(d){if(pl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=d.applyArabicShaping,this.processBidirectionalText=d.processBidirectionalText,this.processStyledBidirectionalText=d.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(d,l){return s(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(d.pluginStatus!=="loading")return this.setState(d),d;const h=d.pluginURL,v=new Promise((T=>{this.loadScriptResolve=T}));l(h);const x=new Promise((T=>setTimeout((()=>T()),this.TIMEOUT)));if(yield Promise.race([v,x]),this.isParsed()){const T={pluginStatus:"loaded",pluginURL:h};return this.setState(T),T}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${h}`)}))}};class Xr{constructor(l,h){this.isSupportedScript=Sv,this.zoom=l,h?(this.now=h.now||0,this.fadeDuration=h.fadeDuration||0,this.zoomHistory=h.zoomHistory||new Dy,this.transition=h.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Dy,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,h=l-Math.floor(l),v=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*h}}}function Sv(d){return(function(l,h){for(const v of l)if(!Dc(v.codePointAt(0),h))return!1;return!0})(d,pl.getRTLTextPluginStatus()==="loaded")}const yu="-transition";class wh{constructor(l,h,v){this.property=l,this.value=h,this.expression=(function(x,T,k){if(Sy(x))return new Sd(x,T);if(yh(x)){const D=_h(x,T,k);if(D.result==="error")throw new Error(D.value.map((N=>`${N.key}: ${N.message}`)).join(", "));return D.value}{let D=x;return T.type==="color"&&typeof x=="string"?D=cr.parse(x):T.type!=="padding"||typeof x!="number"&&!Array.isArray(x)?T.type!=="numberArray"||typeof x!="number"&&!Array.isArray(x)?T.type!=="colorArray"||typeof x!="string"&&!Array.isArray(x)?T.type==="variableAnchorOffsetCollection"&&Array.isArray(x)?D=ro.parse(x):T.type==="projectionDefinition"&&typeof x=="string"&&(D=Go.parse(x)):D=Fn.parse(x):D=Di.parse(x):D=Ao.parse(x),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>D}}})(h===void 0?l.specification.default:h,l.specification,v)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,h,v){return this.property.possiblyEvaluate(this,l,h,v)}}class Wm{constructor(l,h){this.property=l,this.value=new wh(l,void 0,h)}transitioned(l,h){return new Ed(this.property,this.value,h,bt({},l.transition,this.transition),l.now)}untransitioned(){return new Ed(this.property,this.value,null,{},0)}}class zy{constructor(l,h){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues),this._globalState=h}getValue(l){return nn(this._values[l].value.value)}setValue(l,h){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Wm(this._values[l].property,this._globalState)),this._values[l].value=new wh(this._values[l].property,h===null?void 0:nn(h),this._globalState)}getTransition(l){return nn(this._values[l].transition)}setTransition(l,h){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Wm(this._values[l].property,this._globalState)),this._values[l].transition=nn(h)||void 0}serialize(){const l={};for(const h of Object.keys(this._values)){const v=this.getValue(h);v!==void 0&&(l[h]=v);const x=this.getTransition(h);x!==void 0&&(l[`${h}${yu}`]=x)}return l}transitioned(l,h){const v=new Hm(this._properties);for(const x of Object.keys(this._values))v._values[x]=this._values[x].transitioned(l,h._values[x]);return v}untransitioned(){const l=new Hm(this._properties);for(const h of Object.keys(this._values))l._values[h]=this._values[h].untransitioned();return l}}class Ed{constructor(l,h,v,x,T){this.property=l,this.value=h,this.begin=T+x.delay||0,this.end=this.begin+x.duration||0,l.specification.transition&&(x.delay||x.duration)&&(this.prior=v)}possiblyEvaluate(l,h,v){const x=l.now||0,T=this.value.possiblyEvaluate(l,h,v),k=this.prior;if(k){if(x>this.end)return this.prior=null,T;if(this.value.isDataDriven())return this.prior=null,T;if(x<this.begin)return k.possiblyEvaluate(l,h,v);{const D=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(k.possiblyEvaluate(l,h,v),T,Ee(D))}}return T}}class Hm{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,h,v){const x=new Ad(this._properties);for(const T of Object.keys(this._values))x._values[T]=this._values[T].possiblyEvaluate(l,h,v);return x}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class Cv{constructor(l,h){this._properties=l,this._values=Object.create(l.defaultPropertyValues),this._globalState=h}hasValue(l){return this._values[l].value!==void 0}getValue(l){return nn(this._values[l].value)}setValue(l,h){this._values[l]=new wh(this._values[l].property,h===null?void 0:nn(h),this._globalState)}serialize(){const l={};for(const h of Object.keys(this._values)){const v=this.getValue(h);v!==void 0&&(l[h]=v)}return l}possiblyEvaluate(l,h,v){const x=new Ad(this._properties);for(const T of Object.keys(this._values))x._values[T]=this._values[T].possiblyEvaluate(l,h,v);return x}}class Va{constructor(l,h,v){this.property=l,this.value=h,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,h,v,x){return this.property.evaluate(this.value,this.parameters,l,h,v,x)}}class Ad{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class yn{constructor(l){this.specification=l}possiblyEvaluate(l,h){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(h)}interpolate(l,h,v){const x=$i[this.specification.type];return x?x(l,h,v):l}}class Tn{constructor(l,h){this.specification=l,this.overrides=h}possiblyEvaluate(l,h,v,x){return new Va(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(h,null,{},v,x)}:l.expression,h)}interpolate(l,h,v){if(l.value.kind!=="constant"||h.value.kind!=="constant")return l;if(l.value.value===void 0||h.value.value===void 0)return new Va(this,{kind:"constant",value:void 0},l.parameters);const x=$i[this.specification.type];if(x){const T=x(l.value.value,h.value.value,v);return new Va(this,{kind:"constant",value:T},l.parameters)}return l}evaluate(l,h,v,x,T,k){return l.kind==="constant"?l.value:l.evaluate(h,v,x,T,k)}}class ml extends Tn{possiblyEvaluate(l,h,v,x){if(l.value===void 0)return new Va(this,{kind:"constant",value:void 0},h);if(l.expression.kind==="constant"){const T=l.expression.evaluate(h,null,{},v,x),k=l.property.specification.type==="resolvedImage"&&typeof T!="string"?T.name:T,D=this._calculate(k,k,k,h);return new Va(this,{kind:"constant",value:D},h)}if(l.expression.kind==="camera"){const T=this._calculate(l.expression.evaluate({zoom:h.zoom-1}),l.expression.evaluate({zoom:h.zoom}),l.expression.evaluate({zoom:h.zoom+1}),h);return new Va(this,{kind:"constant",value:T},h)}return new Va(this,l.expression,h)}evaluate(l,h,v,x,T,k){if(l.kind==="source"){const D=l.evaluate(h,v,x,T,k);return this._calculate(D,D,D,h)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(h.zoom)-1},v,x),l.evaluate({zoom:Math.floor(h.zoom)},v,x),l.evaluate({zoom:Math.floor(h.zoom)+1},v,x),h):l.value}_calculate(l,h,v,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:l,to:h}:{from:v,to:h}}interpolate(l){return l}}class tp{constructor(l){this.specification=l}possiblyEvaluate(l,h,v,x){if(l.value!==void 0){if(l.expression.kind==="constant"){const T=l.expression.evaluate(h,null,{},v,x);return this._calculate(T,T,T,h)}return this._calculate(l.expression.evaluate(new Xr(Math.floor(h.zoom-1),h)),l.expression.evaluate(new Xr(Math.floor(h.zoom),h)),l.expression.evaluate(new Xr(Math.floor(h.zoom+1),h)),h)}}_calculate(l,h,v,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:l,to:h}:{from:v,to:h}}interpolate(l){return l}}class Gm{constructor(l){this.specification=l}possiblyEvaluate(l,h,v,x){return!!l.expression.evaluate(h,null,{},v,x)}interpolate(){return!1}}class _o{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in l){const v=l[h];v.specification.overridable&&this.overridableProperties.push(h);const x=this.defaultPropertyValues[h]=new wh(v,void 0,void 0),T=this.defaultTransitionablePropertyValues[h]=new Wm(v,void 0);this.defaultTransitioningPropertyValues[h]=T.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=x.possiblyEvaluate({})}}}pn("DataDrivenProperty",Tn),pn("DataConstantProperty",yn),pn("CrossFadedDataDrivenProperty",ml),pn("CrossFadedProperty",tp),pn("ColorRampProperty",Gm);class Zi extends Tr{constructor(l,h,v){if(super(),this.id=l.id,this.type=l.type,this._globalState=v,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,this._visibilityExpression=(function(x,T){return new Jf(x,T)})(this.visibility,v),l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter,this._featureFilter=ma(l.filter,v)),h.layout&&(this._unevaluatedLayout=new Cv(h.layout,v)),h.paint)){this._transitionablePaint=new zy(h.paint,v);for(const x in l.paint)this.setPaintProperty(x,l.paint[x],{validate:!1});for(const x in l.layout)this.setLayoutProperty(x,l.layout[x],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ad(h.paint)}}setFilter(l){this.filter=l,this._featureFilter=ma(l,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){const l=new Set;for(const h of this._visibilityExpression.getGlobalStateRefs())l.add(h);if(this._unevaluatedLayout)for(const h in this._unevaluatedLayout._values){const v=this._unevaluatedLayout._values[h];for(const x of v.getGlobalStateRefs())l.add(x)}for(const h of this._featureFilter.getGlobalStateRefs())l.add(h);return l}getPaintAffectingGlobalStateRefs(){var l;const h=new globalThis.Map;if(this._transitionablePaint)for(const v in this._transitionablePaint._values){const x=this._transitionablePaint._values[v].value;for(const T of x.getGlobalStateRefs()){const k=(l=h.get(T))!==null&&l!==void 0?l:[];k.push({name:v,value:x.value}),h.set(T,k)}}return h}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(l,h,v={}){if(h==null||!this._validate(nx,`layers.${this.id}.layout.${l}`,l,h,v))return l==="visibility"?(this.visibility=h,this._visibilityExpression.setValue(h),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(l,h)}getPaintProperty(l){return l.endsWith(yu)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,h,v={}){if(h!=null&&this._validate(Ry,`layers.${this.id}.paint.${l}`,l,h,v))return!1;if(l.endsWith(yu))return this._transitionablePaint.setTransition(l.slice(0,-11),h||void 0),!1;{const x=this._transitionablePaint._values[l],T=x.property.specification["property-type"]==="cross-faded-data-driven",k=x.value.isDataDriven(),D=x.value;this._transitionablePaint.setValue(l,h),this._handleSpecialPaintPropertyUpdate(l);const N=this._transitionablePaint._values[l].value;return N.isDataDriven()||k||T||this._handleOverridablePaintPropertyUpdate(l,D,N)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,h,v){return!1}isHidden(l=this.minzoom,h=!1){return!!(this.minzoom&&l<(h?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&l>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(l,h){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,h)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),Wt(l,((h,v)=>!(h===void 0||v==="layout"&&!Object.keys(h).length||v==="paint"&&!Object.keys(h).length)))}_validate(l,h,v,x,T={}){return(!T||T.validate!==!1)&&Ul(this,l.call(Yo,{key:h,layerType:this.type,objectKey:v,value:x,styleSpec:ut,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const h=this.paint.get(l);if(h instanceof Va&&hl(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}let oo;var Xm={get paint(){return oo=oo||new _o({"raster-opacity":new yn(ut.paint_raster["raster-opacity"]),"raster-hue-rotate":new yn(ut.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yn(ut.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yn(ut.paint_raster["raster-brightness-max"]),"raster-saturation":new yn(ut.paint_raster["raster-saturation"]),"raster-contrast":new yn(ut.paint_raster["raster-contrast"]),"raster-resampling":new yn(ut.paint_raster["raster-resampling"]),"raster-fade-duration":new yn(ut.paint_raster["raster-fade-duration"])})}};class vu extends Zi{constructor(l,h){super(l,Xm,h)}}const yr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Wr{constructor(l,h){this._structArray=l,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class mr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,h){return l._trim(),h&&(l.isTransferred=!0,h.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const h=Object.create(this.prototype);return h.arrayBuffer=l.arrayBuffer,h.length=l.length,h.capacity=l.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function zi(d,l=1){let h=0,v=0;return{members:d.map((x=>{const T=yr[x.type].BYTES_PER_ELEMENT,k=h=gl(h,Math.max(l,T)),D=x.components||1;return v=Math.max(v,T),h+=T*D,{name:x.name,type:x.type,components:D,offset:k}})),size:gl(h,Math.max(v,l)),alignment:l}}function gl(d,l){return Math.ceil(d/l)*l}class ql extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h){const v=this.length;return this.resize(v+1),this.emplace(v,l,h)}emplace(l,h,v){const x=2*l;return this.int16[x+0]=h,this.int16[x+1]=v,l}}ql.prototype.bytesPerElement=4,pn("StructArrayLayout2i4",ql);class Pd extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,v){const x=this.length;return this.resize(x+1),this.emplace(x,l,h,v)}emplace(l,h,v,x){const T=3*l;return this.int16[T+0]=h,this.int16[T+1]=v,this.int16[T+2]=x,l}}Pd.prototype.bytesPerElement=6,pn("StructArrayLayout3i6",Pd);class Md extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,l,h,v,x)}emplace(l,h,v,x,T){const k=4*l;return this.int16[k+0]=h,this.int16[k+1]=v,this.int16[k+2]=x,this.int16[k+3]=T,l}}Md.prototype.bytesPerElement=8,pn("StructArrayLayout4i8",Md);class _u extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,v,x,T,k){const D=this.length;return this.resize(D+1),this.emplace(D,l,h,v,x,T,k)}emplace(l,h,v,x,T,k,D){const N=6*l;return this.int16[N+0]=h,this.int16[N+1]=v,this.int16[N+2]=x,this.int16[N+3]=T,this.int16[N+4]=k,this.int16[N+5]=D,l}}_u.prototype.bytesPerElement=12,pn("StructArrayLayout2i4i12",_u);class Tv extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,v,x,T,k){const D=this.length;return this.resize(D+1),this.emplace(D,l,h,v,x,T,k)}emplace(l,h,v,x,T,k,D){const N=4*l,Z=8*l;return this.int16[N+0]=h,this.int16[N+1]=v,this.uint8[Z+4]=x,this.uint8[Z+5]=T,this.uint8[Z+6]=k,this.uint8[Z+7]=D,l}}Tv.prototype.bytesPerElement=8,pn("StructArrayLayout2i4ub8",Tv);class ki extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h){const v=this.length;return this.resize(v+1),this.emplace(v,l,h)}emplace(l,h,v){const x=2*l;return this.float32[x+0]=h,this.float32[x+1]=v,l}}ki.prototype.bytesPerElement=8,pn("StructArrayLayout2f8",ki);class Wl extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,v,x,T,k,D,N,Z,X){const ee=this.length;return this.resize(ee+1),this.emplace(ee,l,h,v,x,T,k,D,N,Z,X)}emplace(l,h,v,x,T,k,D,N,Z,X,ee){const oe=10*l;return this.uint16[oe+0]=h,this.uint16[oe+1]=v,this.uint16[oe+2]=x,this.uint16[oe+3]=T,this.uint16[oe+4]=k,this.uint16[oe+5]=D,this.uint16[oe+6]=N,this.uint16[oe+7]=Z,this.uint16[oe+8]=X,this.uint16[oe+9]=ee,l}}Wl.prototype.bytesPerElement=20,pn("StructArrayLayout10ui20",Wl);class np extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,v,x,T,k,D,N){const Z=this.length;return this.resize(Z+1),this.emplace(Z,l,h,v,x,T,k,D,N)}emplace(l,h,v,x,T,k,D,N,Z){const X=8*l;return this.uint16[X+0]=h,this.uint16[X+1]=v,this.uint16[X+2]=x,this.uint16[X+3]=T,this.uint16[X+4]=k,this.uint16[X+5]=D,this.uint16[X+6]=N,this.uint16[X+7]=Z,l}}np.prototype.bytesPerElement=16,pn("StructArrayLayout8ui16",np);class rp extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,v,x,T,k,D,N,Z,X,ee,oe){const le=this.length;return this.resize(le+1),this.emplace(le,l,h,v,x,T,k,D,N,Z,X,ee,oe)}emplace(l,h,v,x,T,k,D,N,Z,X,ee,oe,le){const fe=12*l;return this.int16[fe+0]=h,this.int16[fe+1]=v,this.int16[fe+2]=x,this.int16[fe+3]=T,this.uint16[fe+4]=k,this.uint16[fe+5]=D,this.uint16[fe+6]=N,this.uint16[fe+7]=Z,this.int16[fe+8]=X,this.int16[fe+9]=ee,this.int16[fe+10]=oe,this.int16[fe+11]=le,l}}rp.prototype.bytesPerElement=24,pn("StructArrayLayout4i4ui4i24",rp);class Ym extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,v){const x=this.length;return this.resize(x+1),this.emplace(x,l,h,v)}emplace(l,h,v,x){const T=3*l;return this.float32[T+0]=h,this.float32[T+1]=v,this.float32[T+2]=x,l}}Ym.prototype.bytesPerElement=12,pn("StructArrayLayout3f12",Ym);class Km extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.uint32[1*l+0]=h,l}}Km.prototype.bytesPerElement=4,pn("StructArrayLayout1ul4",Km);class Jm extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,v,x,T,k,D,N,Z){const X=this.length;return this.resize(X+1),this.emplace(X,l,h,v,x,T,k,D,N,Z)}emplace(l,h,v,x,T,k,D,N,Z,X){const ee=10*l,oe=5*l;return this.int16[ee+0]=h,this.int16[ee+1]=v,this.int16[ee+2]=x,this.int16[ee+3]=T,this.int16[ee+4]=k,this.int16[ee+5]=D,this.uint32[oe+3]=N,this.uint16[ee+8]=Z,this.uint16[ee+9]=X,l}}Jm.prototype.bytesPerElement=20,pn("StructArrayLayout6i1ul2ui20",Jm);class Oh extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,v,x,T,k){const D=this.length;return this.resize(D+1),this.emplace(D,l,h,v,x,T,k)}emplace(l,h,v,x,T,k,D){const N=6*l;return this.int16[N+0]=h,this.int16[N+1]=v,this.int16[N+2]=x,this.int16[N+3]=T,this.int16[N+4]=k,this.int16[N+5]=D,l}}Oh.prototype.bytesPerElement=12,pn("StructArrayLayout2i2i2i12",Oh);class bu extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,v,x,T){const k=this.length;return this.resize(k+1),this.emplace(k,l,h,v,x,T)}emplace(l,h,v,x,T,k){const D=4*l,N=8*l;return this.float32[D+0]=h,this.float32[D+1]=v,this.float32[D+2]=x,this.int16[N+6]=T,this.int16[N+7]=k,l}}bu.prototype.bytesPerElement=16,pn("StructArrayLayout2f1f2i16",bu);class ws extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,v,x,T,k){const D=this.length;return this.resize(D+1),this.emplace(D,l,h,v,x,T,k)}emplace(l,h,v,x,T,k,D){const N=16*l,Z=4*l,X=8*l;return this.uint8[N+0]=h,this.uint8[N+1]=v,this.float32[Z+1]=x,this.float32[Z+2]=T,this.int16[X+6]=k,this.int16[X+7]=D,l}}ws.prototype.bytesPerElement=16,pn("StructArrayLayout2ub2f2i16",ws);class Ni extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,v){const x=this.length;return this.resize(x+1),this.emplace(x,l,h,v)}emplace(l,h,v,x){const T=3*l;return this.uint16[T+0]=h,this.uint16[T+1]=v,this.uint16[T+2]=x,l}}Ni.prototype.bytesPerElement=6,pn("StructArrayLayout3ui6",Ni);class Lc extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,v,x,T,k,D,N,Z,X,ee,oe,le,fe,pe,ve,Ce){const Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,l,h,v,x,T,k,D,N,Z,X,ee,oe,le,fe,pe,ve,Ce)}emplace(l,h,v,x,T,k,D,N,Z,X,ee,oe,le,fe,pe,ve,Ce,Ve){const Ae=24*l,Re=12*l,qe=48*l;return this.int16[Ae+0]=h,this.int16[Ae+1]=v,this.uint16[Ae+2]=x,this.uint16[Ae+3]=T,this.uint32[Re+2]=k,this.uint32[Re+3]=D,this.uint32[Re+4]=N,this.uint16[Ae+10]=Z,this.uint16[Ae+11]=X,this.uint16[Ae+12]=ee,this.float32[Re+7]=oe,this.float32[Re+8]=le,this.uint8[qe+36]=fe,this.uint8[qe+37]=pe,this.uint8[qe+38]=ve,this.uint32[Re+10]=Ce,this.int16[Ae+22]=Ve,l}}Lc.prototype.bytesPerElement=48,pn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Lc);class Rd extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,v,x,T,k,D,N,Z,X,ee,oe,le,fe,pe,ve,Ce,Ve,Ae,Re,qe,Ge,dt,Dt,Ct,Bt,cn,Ut){const Mt=this.length;return this.resize(Mt+1),this.emplace(Mt,l,h,v,x,T,k,D,N,Z,X,ee,oe,le,fe,pe,ve,Ce,Ve,Ae,Re,qe,Ge,dt,Dt,Ct,Bt,cn,Ut)}emplace(l,h,v,x,T,k,D,N,Z,X,ee,oe,le,fe,pe,ve,Ce,Ve,Ae,Re,qe,Ge,dt,Dt,Ct,Bt,cn,Ut,Mt){const _t=32*l,_n=16*l;return this.int16[_t+0]=h,this.int16[_t+1]=v,this.int16[_t+2]=x,this.int16[_t+3]=T,this.int16[_t+4]=k,this.int16[_t+5]=D,this.int16[_t+6]=N,this.int16[_t+7]=Z,this.uint16[_t+8]=X,this.uint16[_t+9]=ee,this.uint16[_t+10]=oe,this.uint16[_t+11]=le,this.uint16[_t+12]=fe,this.uint16[_t+13]=pe,this.uint16[_t+14]=ve,this.uint16[_t+15]=Ce,this.uint16[_t+16]=Ve,this.uint16[_t+17]=Ae,this.uint16[_t+18]=Re,this.uint16[_t+19]=qe,this.uint16[_t+20]=Ge,this.uint16[_t+21]=dt,this.uint16[_t+22]=Dt,this.uint32[_n+12]=Ct,this.float32[_n+13]=Bt,this.float32[_n+14]=cn,this.uint16[_t+30]=Ut,this.uint16[_t+31]=Mt,l}}Rd.prototype.bytesPerElement=64,pn("StructArrayLayout8i15ui1ul2f2ui64",Rd);class Id extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.float32[1*l+0]=h,l}}Id.prototype.bytesPerElement=4,pn("StructArrayLayout1f4",Id);class ip extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,v){const x=this.length;return this.resize(x+1),this.emplace(x,l,h,v)}emplace(l,h,v,x){const T=3*l;return this.uint16[6*l+0]=h,this.float32[T+1]=v,this.float32[T+2]=x,l}}ip.prototype.bytesPerElement=12,pn("StructArrayLayout1ui2f12",ip);class Hl extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,v){const x=this.length;return this.resize(x+1),this.emplace(x,l,h,v)}emplace(l,h,v,x){const T=4*l;return this.uint32[2*l+0]=h,this.uint16[T+2]=v,this.uint16[T+3]=x,l}}Hl.prototype.bytesPerElement=8,pn("StructArrayLayout1ul2ui8",Hl);class P extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h){const v=this.length;return this.resize(v+1),this.emplace(v,l,h)}emplace(l,h,v){const x=2*l;return this.uint16[x+0]=h,this.uint16[x+1]=v,l}}P.prototype.bytesPerElement=4,pn("StructArrayLayout2ui4",P);class c extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.uint16[1*l+0]=h,l}}c.prototype.bytesPerElement=2,pn("StructArrayLayout1ui2",c);class m extends mr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,v,x){const T=this.length;return this.resize(T+1),this.emplace(T,l,h,v,x)}emplace(l,h,v,x,T){const k=4*l;return this.float32[k+0]=h,this.float32[k+1]=v,this.float32[k+2]=x,this.float32[k+3]=T,l}}m.prototype.bytesPerElement=16,pn("StructArrayLayout4f16",m);class b extends Wr{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new u(this.anchorPointX,this.anchorPointY)}}b.prototype.size=20;class C extends Jm{get(l){return new b(this,l)}}pn("CollisionBoxArray",C);class I extends Wr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}I.prototype.size=48;class L extends Lc{get(l){return new I(this,l)}}pn("PlacedSymbolArray",L);class j extends Wr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}j.prototype.size=64;class W extends Rd{get(l){return new j(this,l)}}pn("SymbolInstanceArray",W);class K extends Id{getoffsetX(l){return this.float32[1*l+0]}}pn("GlyphOffsetArray",K);class te extends Pd{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}pn("SymbolLineVertexArray",te);class he extends Wr{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}he.prototype.size=12;class ue extends ip{get(l){return new he(this,l)}}pn("TextAnchorOffsetArray",ue);class ge extends Wr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ge.prototype.size=8;class Oe extends Hl{get(l){return new ge(this,l)}}pn("FeatureIndexArray",Oe);class Ie extends ql{}class Le extends ql{}class De extends ql{}class je extends _u{}class He extends Tv{}class Fe extends ki{}class We extends Wl{}class Ke extends np{}class Ze extends rp{}class nt extends Ym{}class yt extends Km{}class ht extends Oh{}class pt extends ws{}class gt extends Ni{}class Kt extends P{}const en=zi([{name:"a_pos",components:2,type:"Int16"}],4),{members:zt}=en;class ln{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,h,v,x){const T=this.segments[this.segments.length-1];return l>ln.MAX_VERTEX_ARRAY_LENGTH&&rn(`Max vertices per segment is ${ln.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${ln.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!T||T.vertexLength+l>ln.MAX_VERTEX_ARRAY_LENGTH||T.sortKey!==x?this.createNewSegment(h,v,x):T}createNewSegment(l,h,v){const x={vertexOffset:l.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0,vaos:{}};return v!==void 0&&(x.sortKey=v),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(x),x}getOrCreateLatestSegment(l,h,v){return this.prepareSegment(0,l,h,v)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const l of this.segments)for(const h in l.vaos)l.vaos[h].destroy()}static simpleSegment(l,h,v,x){return new ln([{vertexOffset:l,primitiveOffset:h,vertexLength:v,primitiveLength:x,vaos:{},sortKey:0}])}}function Jn(d,l){return 256*(d=ct(Math.floor(d),0,255))+ct(Math.floor(l),0,255)}ln.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,pn("SegmentVector",ln);const Hr=zi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),vi=zi([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var hi,Ei,ri,qi={exports:{}},Ai={exports:{}},ss={exports:{}},so=(function(){if(ri)return qi.exports;ri=1;var d=(hi||(hi=1,Ai.exports=function(h,v){var x,T,k,D,N,Z,X,ee;for(T=h.length-(x=3&h.length),k=v,N=3432918353,Z=461845907,ee=0;ee<T;)X=255&h.charCodeAt(ee)|(255&h.charCodeAt(++ee))<<8|(255&h.charCodeAt(++ee))<<16|(255&h.charCodeAt(++ee))<<24,++ee,k=27492+(65535&(D=5*(65535&(k=(k^=X=(65535&(X=(X=(65535&X)*N+(((X>>>16)*N&65535)<<16)&4294967295)<<15|X>>>17))*Z+(((X>>>16)*Z&65535)<<16)&4294967295)<<13|k>>>19))+((5*(k>>>16)&65535)<<16)&4294967295))+((58964+(D>>>16)&65535)<<16);switch(X=0,x){case 3:X^=(255&h.charCodeAt(ee+2))<<16;case 2:X^=(255&h.charCodeAt(ee+1))<<8;case 1:k^=X=(65535&(X=(X=(65535&(X^=255&h.charCodeAt(ee)))*N+(((X>>>16)*N&65535)<<16)&4294967295)<<15|X>>>17))*Z+(((X>>>16)*Z&65535)<<16)&4294967295}return k^=h.length,k=2246822507*(65535&(k^=k>>>16))+((2246822507*(k>>>16)&65535)<<16)&4294967295,k=3266489909*(65535&(k^=k>>>13))+((3266489909*(k>>>16)&65535)<<16)&4294967295,(k^=k>>>16)>>>0}),Ai.exports),l=(Ei||(Ei=1,ss.exports=function(h,v){for(var x,T=h.length,k=v^T,D=0;T>=4;)x=1540483477*(65535&(x=255&h.charCodeAt(D)|(255&h.charCodeAt(++D))<<8|(255&h.charCodeAt(++D))<<16|(255&h.charCodeAt(++D))<<24))+((1540483477*(x>>>16)&65535)<<16),k=1540483477*(65535&k)+((1540483477*(k>>>16)&65535)<<16)^(x=1540483477*(65535&(x^=x>>>24))+((1540483477*(x>>>16)&65535)<<16)),T-=4,++D;switch(T){case 3:k^=(255&h.charCodeAt(D+2))<<16;case 2:k^=(255&h.charCodeAt(D+1))<<8;case 1:k=1540483477*(65535&(k^=255&h.charCodeAt(D)))+((1540483477*(k>>>16)&65535)<<16)}return k=1540483477*(65535&(k^=k>>>13))+((1540483477*(k>>>16)&65535)<<16),(k^=k>>>15)>>>0}),ss.exports);return qi.exports=d,qi.exports.murmur3=d,qi.exports.murmur2=l,qi.exports})(),ao=f(so);class as{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,h,v,x){this.ids.push($c(l)),this.positions.push(h,v,x)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=$c(l);let v=0,x=this.ids.length-1;for(;v<x;){const k=v+x>>1;this.ids[k]>=h?x=k:v=k+1}const T=[];for(;this.ids[v]===h;)T.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return T}static serialize(l,h){const v=new Float64Array(l.ids),x=new Uint32Array(l.positions);return zc(v,x,0,v.length-1),h&&h.push(v.buffer,x.buffer),{ids:v,positions:x}}static deserialize(l){const h=new as;return h.ids=l.ids,h.positions=l.positions,h.indexed=!0,h}}function $c(d){const l=+d;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:ao(String(d))}function zc(d,l,h,v){for(;h<v;){const x=d[h+v>>1];let T=h-1,k=v+1;for(;;){do T++;while(d[T]<x);do k--;while(d[k]>x);if(T>=k)break;Gl(d,T,k),Gl(l,3*T,3*k),Gl(l,3*T+1,3*k+1),Gl(l,3*T+2,3*k+2)}k-h<v-k?(zc(d,l,h,k),h=k+1):(zc(d,l,k+1,v),v=k)}}function Gl(d,l,h){const v=d[l];d[l]=d[h],d[h]=v}pn("FeaturePositionMap",as);class _a{constructor(l,h){this.gl=l.gl,this.location=h}}class Dd extends _a{constructor(l,h){super(l,h),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class op extends _a{constructor(l,h){super(l,h),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class Xl extends _a{constructor(l,h){super(l,h),this.current=cr.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const ba=new Float32Array(16);function Qa(d){return[Jn(255*d.r,255*d.g),Jn(255*d.b,255*d.a)]}class yl{constructor(l,h,v){this.value=l,this.uniformNames=h.map((x=>`u_${x}`)),this.type=v}setUniform(l,h,v){l.set(v.constantOr(this.value))}getBinding(l,h,v){return this.type==="color"?new Xl(l,h):new Dd(l,h)}}class vl{constructor(l,h){this.uniformNames=h.map((v=>`u_${v}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=l.tlbr}setConstantDashPositions(l,h){this.dashTo=[0,l.y,l.height,l.width],this.dashFrom=[0,h.y,h.height,h.width]}setUniform(l,h,v,x){let T=null;x==="u_pattern_to"?T=this.patternTo:x==="u_pattern_from"?T=this.patternFrom:x==="u_dasharray_to"?T=this.dashTo:x==="u_dasharray_from"?T=this.dashFrom:x==="u_pixel_ratio_to"?T=this.pixelRatioTo:x==="u_pixel_ratio_from"&&(T=this.pixelRatioFrom),T!==null&&l.set(T)}getBinding(l,h,v){return v.substr(0,9)==="u_pattern"||v.substr(0,12)==="u_dasharray_"?new op(l,h):new Dd(l,h)}}class Yr{constructor(l,h,v,x){this.expression=l,this.type=v,this.maxValue=0,this.paintVertexAttributes=h.map((T=>({name:`a_${T}`,type:"Float32",components:v==="color"?2:1,offset:0}))),this.paintVertexArray=new x}populatePaintArray(l,h,v){const x=this.paintVertexArray.length,T=this.expression.evaluate(new Xr(0,v),h,{},v.canonical,[],v.formattedSection);this.paintVertexArray.resize(l),this._setPaintValue(x,l,T)}updatePaintArray(l,h,v,x,T){const k=this.expression.evaluate(new Xr(0,T),v,x);this._setPaintValue(l,h,k)}_setPaintValue(l,h,v){if(this.type==="color"){const x=Qa(v);for(let T=l;T<h;T++)this.paintVertexArray.emplace(T,x[0],x[1])}else{for(let x=l;x<h;x++)this.paintVertexArray.emplace(x,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class di{constructor(l,h,v,x,T,k){this.expression=l,this.uniformNames=h.map((D=>`u_${D}_t`)),this.type=v,this.useIntegerZoom=x,this.zoom=T,this.maxValue=0,this.paintVertexAttributes=h.map((D=>({name:`a_${D}`,type:"Float32",components:v==="color"?4:2,offset:0}))),this.paintVertexArray=new k}populatePaintArray(l,h,v){const x=this.expression.evaluate(new Xr(this.zoom,v),h,{},v.canonical,[],v.formattedSection),T=this.expression.evaluate(new Xr(this.zoom+1,v),h,{},v.canonical,[],v.formattedSection),k=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(k,l,x,T)}updatePaintArray(l,h,v,x,T){const k=this.expression.evaluate(new Xr(this.zoom,T),v,x),D=this.expression.evaluate(new Xr(this.zoom+1,T),v,x);this._setPaintValue(l,h,k,D)}_setPaintValue(l,h,v,x){if(this.type==="color"){const T=Qa(v),k=Qa(x);for(let D=l;D<h;D++)this.paintVertexArray.emplace(D,T[0],T[1],k[0],k[1])}else{for(let T=l;T<h;T++)this.paintVertexArray.emplace(T,v,x);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(x))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,h){const v=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,x=ct(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);l.set(x)}getBinding(l,h,v){return new Dd(l,h)}}class Mo{constructor(l,h,v,x,T,k){this.expression=l,this.type=h,this.useIntegerZoom=v,this.zoom=x,this.layerId=k,this.zoomInPaintVertexArray=new T,this.zoomOutPaintVertexArray=new T}populatePaintArray(l,h,v){const x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(x,l,this.getPositionIds(h),v)}updatePaintArray(l,h,v,x,T){this._setPaintValues(l,h,this.getPositionIds(v),T)}_setPaintValues(l,h,v,x){const T=this.getPositions(x);if(!T||!v)return;const k=T[v.min],D=T[v.mid],N=T[v.max];if(k&&D&&N)for(let Z=l;Z<h;Z++)this.emplace(this.zoomInPaintVertexArray,Z,D,k),this.emplace(this.zoomOutPaintVertexArray,Z,D,N)}upload(l){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const h=this.getVertexAttributes();this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,h,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,h,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Fo extends Mo{getPositions(l){return l.imagePositions}getPositionIds(l){return l.patterns&&l.patterns[this.layerId]}getVertexAttributes(){return Hr.members}emplace(l,h,v,x){l.emplace(h,v.tlbr[0],v.tlbr[1],v.tlbr[2],v.tlbr[3],x.tlbr[0],x.tlbr[1],x.tlbr[2],x.tlbr[3],v.pixelRatio,x.pixelRatio)}}class Ny extends Mo{getPositions(l){return l.dashPositions}getPositionIds(l){return l.dashes&&l.dashes[this.layerId]}getVertexAttributes(){return vi.members}emplace(l,h,v,x){l.emplace(h,0,v.y,v.height,v.width,0,x.y,x.height,x.width)}}class By{constructor(l,h,v){this.binders={},this._buffers=[];const x=[];for(const T in l.paint._values){if(!v(T))continue;const k=l.paint.get(T);if(!(k instanceof Va&&hl(k.property.specification)))continue;const D=rx(T,l.type),N=k.value,Z=k.property.specification.type,X=k.property.useIntegerZoom,ee=k.property.specification["property-type"],oe=ee==="cross-faded"||ee==="cross-faded-data-driven";if(N.kind==="constant")this.binders[T]=oe?new vl(N.value,D):new yl(N.value,D,Z),x.push(`/u_${T}`);else if(N.kind==="source"||oe){const le=Ch(T,Z,"source");this.binders[T]=oe?T==="line-dasharray"?new Ny(N,Z,X,h,le,l.id):new Fo(N,Z,X,h,le,l.id):new Yr(N,D,Z,le),x.push(`/a_${T}`)}else{const le=Ch(T,Z,"composite");this.binders[T]=new di(N,D,Z,X,h,le),x.push(`/z_${T}`)}}this.cacheKey=x.sort().join("")}getMaxValue(l){const h=this.binders[l];return h instanceof Yr||h instanceof di?h.maxValue:0}populatePaintArrays(l,h,v){for(const x in this.binders){const T=this.binders[x];(T instanceof Yr||T instanceof di||T instanceof Mo)&&T.populatePaintArray(l,h,v)}}setConstantPatternPositions(l,h){for(const v in this.binders){const x=this.binders[v];x instanceof vl&&x.setConstantPatternPositions(l,h)}}setConstantDashPositions(l,h){for(const v in this.binders){const x=this.binders[v];x instanceof vl&&x.setConstantDashPositions(l,h)}}updatePaintArrays(l,h,v,x,T){let k=!1;for(const D in l){const N=h.getPositions(D);for(const Z of N){const X=v.feature(Z.index);for(const ee in this.binders){const oe=this.binders[ee];if((oe instanceof Yr||oe instanceof di||oe instanceof Mo)&&oe.expression.isStateDependent===!0){const le=x.paint.get(ee);oe.expression=le.value,oe.updatePaintArray(Z.start,Z.end,X,l[D],T),k=!0}}}}return k}defines(){const l=[];for(const h in this.binders){const v=this.binders[h];(v instanceof yl||v instanceof vl)&&l.push(...v.uniformNames.map((x=>`#define HAS_UNIFORM_${x}`)))}return l}getBinderAttributes(){const l=[];for(const h in this.binders){const v=this.binders[h];if(v instanceof Yr||v instanceof di)for(let x=0;x<v.paintVertexAttributes.length;x++)l.push(v.paintVertexAttributes[x].name);else if(v instanceof Mo){const x=v.getVertexAttributes();for(const T of x)l.push(T.name)}}return l}getBinderUniforms(){const l=[];for(const h in this.binders){const v=this.binders[h];if(v instanceof yl||v instanceof vl||v instanceof di)for(const x of v.uniformNames)l.push(x)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,h){const v=[];for(const x in this.binders){const T=this.binders[x];if(T instanceof yl||T instanceof vl||T instanceof di){for(const k of T.uniformNames)if(h[k]){const D=T.getBinding(l,h[k],k);v.push({name:k,property:x,binding:D})}}}return v}setUniforms(l,h,v,x){for(const{name:T,property:k,binding:D}of h)this.binders[k].setUniform(D,x,v.get(k),T)}updatePaintBuffers(l){this._buffers=[];for(const h in this.binders){const v=this.binders[h];if(l&&v instanceof Mo){const x=l.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(v instanceof Yr||v instanceof di)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(l){for(const h in this.binders){const v=this.binders[h];(v instanceof Yr||v instanceof di||v instanceof Mo)&&v.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const h=this.binders[l];(h instanceof Yr||h instanceof di||h instanceof Mo)&&h.destroy()}}}class Sh{constructor(l,h,v=()=>!0){this.programConfigurations={};for(const x of l)this.programConfigurations[x.id]=new By(x,h,v);this.needsUpload=!1,this._featureMap=new as,this._bufferOffset=0}populatePaintArrays(l,h,v,x){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(l,h,x);h.id!==void 0&&this._featureMap.add(h.id,v,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,h,v,x){for(const T of v)this.needsUpload=this.programConfigurations[T.id].updatePaintArrays(l,this._featureMap,h,T,x)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function rx(d,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(`${l}-`,"").replace(/-/g,"_")]}function Ch(d,l,h){const v={color:{source:ki,composite:m},number:{source:Id,composite:ki}},x=(function(T){return{"line-pattern":{source:We,composite:We},"fill-pattern":{source:We,composite:We},"fill-extrusion-pattern":{source:We,composite:We},"line-dasharray":{source:Ke,composite:Ke}}[T]})(d);return x&&x[h]||v[l][h]}pn("ConstantBinder",yl),pn("CrossFadedConstantBinder",vl),pn("SourceExpressionBinder",Yr),pn("CrossFadedPatternBinder",Fo),pn("CrossFadedDasharrayBinder",Ny),pn("CompositeExpressionBinder",di),pn("ProgramConfiguration",By,{omit:["_buffers"]}),pn("ProgramConfigurationSet",Sh);const Fy=Math.pow(2,14)-1,xu=-Fy-1;function wu(d){const l=Qe/d.extent,h=d.loadGeometry();for(let v=0;v<h.length;v++){const x=h[v];for(let T=0;T<x.length;T++){const k=x[T],D=Math.round(k.x*l),N=Math.round(k.y*l);k.x=ct(D,xu,Fy),k.y=ct(N,xu,Fy),(D<k.x||D>k.x+1||N<k.y||N>k.y+1)&&rn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function Yl(d,l){return{type:d.type,id:d.id,properties:d.properties,geometry:l?wu(d):[]}}const jy=-32768;function eg(d,l,h,v,x){d.emplaceBack(jy+8*l+v,jy+8*h+x)}class tg{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new Le,this.indexArray=new gt,this.segments=new ln,this.programConfigurations=new Sh(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(l,h,v){const x=this.layers[0],T=[];let k=null,D=!1,N=x.type==="heatmap";if(x.type==="circle"){const X=x;k=X.layout.get("circle-sort-key"),D=!k.isConstant(),N=N||X.paint.get("circle-pitch-alignment")==="map"}const Z=N?h.subdivisionGranularity.circle:1;for(const{feature:X,id:ee,index:oe,sourceLayerIndex:le}of l){const fe=this.layers[0]._featureFilter.needGeometry,pe=Yl(X,fe);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),pe,v))continue;const ve=D?k.evaluate(pe,{},v):void 0,Ce={id:ee,properties:X.properties,type:X.type,sourceLayerIndex:le,index:oe,geometry:fe?pe.geometry:wu(X),patterns:{},sortKey:ve};T.push(Ce)}D&&T.sort(((X,ee)=>X.sortKey-ee.sortKey));for(const X of T){const{geometry:ee,index:oe,sourceLayerIndex:le}=X,fe=l[oe].feature;this.addFeature(X,ee,oe,v,Z),h.featureIndex.insert(fe,ee,oe,le,this.index)}}update(l,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,{imagePositions:v})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,zt),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,h,v,x,T=1){let k;switch(T){case 1:k=[0,7];break;case 3:k=[0,2,5,7];break;case 5:k=[0,1,3,4,6,7];break;case 7:k=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${T}; valid values are 1, 3, 5, 7.`)}const D=k.length;for(const N of h)for(const Z of N){const X=Z.x,ee=Z.y;if(X<0||X>=Qe||ee<0||ee>=Qe)continue;const oe=this.segments.prepareSegment(D*D,this.layoutVertexArray,this.indexArray,l.sortKey),le=oe.vertexLength;for(let fe=0;fe<D;fe++)for(let pe=0;pe<D;pe++)eg(this.layoutVertexArray,X,ee,k[pe],k[fe]);for(let fe=0;fe<D-1;fe++)for(let pe=0;pe<D-1;pe++){const ve=le+fe*D+pe,Ce=le+(fe+1)*D+pe;this.indexArray.emplaceBack(ve,Ce+1,ve+1),this.indexArray.emplaceBack(ve,Ce,Ce+1)}oe.vertexLength+=D*D,oe.primitiveLength+=(D-1)*(D-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,v,{imagePositions:{},canonical:x})}}function ng(d,l){for(let h=0;h<d.length;h++)if(Th(l,d[h]))return!0;for(let h=0;h<l.length;h++)if(Th(d,l[h]))return!0;return!!Os(d,l)}function ix(d,l,h){return!!Th(d,l)||!!sx(l,d,h)}function ox(d,l){if(d.length===1)return YO(l,d[0]);for(let h=0;h<l.length;h++){const v=l[h];for(let x=0;x<v.length;x++)if(Th(d,v[x]))return!0}for(let h=0;h<d.length;h++)if(YO(l,d[h]))return!0;for(let h=0;h<l.length;h++)if(Os(d,l[h]))return!0;return!1}function ls(d,l,h){if(d.length>1){if(Os(d,l))return!0;for(let v=0;v<l.length;v++)if(sx(l[v],d,h))return!0}for(let v=0;v<d.length;v++)if(sx(d[v],l,h))return!0;return!1}function Os(d,l){if(d.length===0||l.length===0)return!1;for(let h=0;h<d.length-1;h++){const v=d[h],x=d[h+1];for(let T=0;T<l.length-1;T++)if(Lk(v,x,l[T],l[T+1]))return!0}return!1}function Lk(d,l,h,v){return Jt(d,h,v)!==Jt(l,h,v)&&Jt(d,l,h)!==Jt(d,l,v)}function sx(d,l,h){const v=h*h;if(l.length===1)return d.distSqr(l[0])<v;for(let x=1;x<l.length;x++)if(XO(d,l[x-1],l[x])<v)return!0;return!1}function XO(d,l,h){const v=l.distSqr(h);if(v===0)return d.distSqr(l);const x=((d.x-l.x)*(h.x-l.x)+(d.y-l.y)*(h.y-l.y))/v;return d.distSqr(x<0?l:x>1?h:h.sub(l)._mult(x)._add(l))}function YO(d,l){let h,v,x,T=!1;for(let k=0;k<d.length;k++){h=d[k];for(let D=0,N=h.length-1;D<h.length;N=D++)v=h[D],x=h[N],v.y>l.y!=x.y>l.y&&l.x<(x.x-v.x)*(l.y-v.y)/(x.y-v.y)+v.x&&(T=!T)}return T}function Th(d,l){let h=!1;for(let v=0,x=d.length-1;v<d.length;x=v++){const T=d[v],k=d[x];T.y>l.y!=k.y>l.y&&l.x<(k.x-T.x)*(l.y-T.y)/(k.y-T.y)+T.x&&(h=!h)}return h}function $k(d,l,h){const v=h[0],x=h[2];if(d.x<v.x&&l.x<v.x||d.x>x.x&&l.x>x.x||d.y<v.y&&l.y<v.y||d.y>x.y&&l.y>x.y)return!1;const T=Jt(d,l,h[0]);return T!==Jt(d,l,h[1])||T!==Jt(d,l,h[2])||T!==Jt(d,l,h[3])}function Ld(d,l,h){const v=l.paint.get(d).value;return v.kind==="constant"?v.value:h.programConfigurations.get(l.id).getMaxValue(d)}function kv(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function ax(d,l,h,v,x){if(!l[0]&&!l[1])return d;const T=u.convert(l)._mult(x);h==="viewport"&&T._rotate(-v);const k=[];for(let D=0;D<d.length;D++)k.push(d[D].sub(T));return k}function lx(d){const l=[];for(let h=0;h<d.length;h++){const v=d[h],x=l.at(-1);(h===0||x&&!v.equals(x))&&l.push(v)}return l}function KO({queryGeometry:d,size:l},h){return ix(d,h,l)}function zk({queryGeometry:d,size:l,transform:h,unwrappedTileID:v,getElevation:x},T){return ix(d,T,l*(h.projectTileCoordinates(T.x,T.y,v,x).signedDistanceFromCamera/h.cameraToCenterDistance))}function Nk({queryGeometry:d,size:l,transform:h,unwrappedTileID:v,getElevation:x},T){const k=h.projectTileCoordinates(T.x,T.y,v,x).signedDistanceFromCamera,D=l*(h.cameraToCenterDistance/k);return ix(d,Ev(T,h,v,x),D)}function Bk({queryGeometry:d,size:l,transform:h,unwrappedTileID:v,getElevation:x},T){return ix(d,Ev(T,h,v,x),l)}function cx({queryGeometry:d,size:l,transform:h,unwrappedTileID:v,getElevation:x,pitchAlignment:T="map",pitchScale:k="map"},D){const N=T==="map"?k==="map"?KO:zk:k==="map"?Nk:Bk,Z={queryGeometry:d,size:l,transform:h,unwrappedTileID:v,getElevation:x};for(const X of D)for(const ee of X)if(N(Z,ee))return!0;return!1}function Ev(d,l,h,v){const x=l.projectTileCoordinates(d.x,d.y,h,v).point;return new u((.5*x.x+.5)*l.width,(.5*-x.y+.5)*l.height)}let ux,JO;pn("CircleBucket",tg,{omit:["layers"]});var eS={get paint(){return JO=JO||new _o({"circle-radius":new Tn(ut.paint_circle["circle-radius"]),"circle-color":new Tn(ut.paint_circle["circle-color"]),"circle-blur":new Tn(ut.paint_circle["circle-blur"]),"circle-opacity":new Tn(ut.paint_circle["circle-opacity"]),"circle-translate":new yn(ut.paint_circle["circle-translate"]),"circle-translate-anchor":new yn(ut.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yn(ut.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yn(ut.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Tn(ut.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Tn(ut.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Tn(ut.paint_circle["circle-stroke-opacity"])})},get layout(){return ux=ux||new _o({"circle-sort-key":new Tn(ut.layout_circle["circle-sort-key"])})}};class hx extends Zi{constructor(l,h){super(l,eS,h)}createBucket(l){return new tg(l)}queryRadius(l){const h=l;return Ld("circle-radius",this,h)+Ld("circle-stroke-width",this,h)+kv(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:h,featureState:v,geometry:x,transform:T,pixelsToTileUnits:k,unwrappedTileID:D,getElevation:N}){const Z=ax(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-T.bearingInRadians,k),X=this.paint.get("circle-radius").evaluate(h,v)+this.paint.get("circle-stroke-width").evaluate(h,v),ee=this.paint.get("circle-pitch-scale"),oe=this.paint.get("circle-pitch-alignment");let le,fe;return oe==="map"?(le=Z,fe=X*k):(le=(function(pe,ve,Ce,Ve){return pe.map((Ae=>Ev(Ae,ve,Ce,Ve)))})(Z,T,D,N),fe=X),cx({queryGeometry:le,size:fe,transform:T,unwrappedTileID:D,getElevation:N,pitchAlignment:oe,pitchScale:ee},x)}}class dx extends tg{}let tS;pn("HeatmapBucket",dx,{omit:["layers"]});var nS={get paint(){return tS=tS||new _o({"heatmap-radius":new Tn(ut.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Tn(ut.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yn(ut.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Gm(ut.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yn(ut.paint_heatmap["heatmap-opacity"])})}};function fx(d,{width:l,height:h},v,x){if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==l*h*v)throw new RangeError(`mismatched image size. expected: ${x.length} but got: ${l*h*v}`)}else x=new Uint8Array(l*h*v);return d.width=l,d.height=h,d.data=x,d}function kh(d,{width:l,height:h},v){if(l===d.width&&h===d.height)return;const x=fx({},{width:l,height:h},v);Av(d,x,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,l),height:Math.min(d.height,h)},v),d.width=l,d.height=h,d.data=x.data}function Av(d,l,h,v,x,T){if(x.width===0||x.height===0)return l;if(x.width>d.width||x.height>d.height||h.x>d.width-x.width||h.y>d.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>l.width||x.height>l.height||v.x>l.width-x.width||v.y>l.height-x.height)throw new RangeError("out of range destination coordinates for image copy");const k=d.data,D=l.data;if(k===D)throw new Error("srcData equals dstData, so image is already copied");for(let N=0;N<x.height;N++){const Z=((h.y+N)*d.width+h.x)*T,X=((v.y+N)*l.width+v.x)*T;for(let ee=0;ee<x.width*T;ee++)D[X+ee]=k[Z+ee]}return l}class Pv{constructor(l,h){fx(this,l,1,h)}resize(l){kh(this,l,1)}clone(){return new Pv({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,h,v,x,T){Av(l,h,v,x,T,1)}}class xa{constructor(l,h){fx(this,l,4,h)}resize(l){kh(this,l,4)}replace(l,h){h?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new xa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,h,v,x,T){Av(l,h,v,x,T,4)}setPixel(l,h,v){const x=4*(l*this.width+h);this.data[x+0]=Math.round(255*v.r/v.a),this.data[x+1]=Math.round(255*v.g/v.a),this.data[x+2]=Math.round(255*v.b/v.a),this.data[x+3]=Math.round(255*v.a)}}function Eh(d){const l={},h=d.resolution||256,v=d.clips?d.clips.length:1,x=d.image||new xa({width:h,height:v});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const T=(k,D,N)=>{l[d.evaluationKey]=N;const Z=d.expression.evaluate(l);x.setPixel(k/4/h,D/4,Z)};if(d.clips)for(let k=0,D=0;k<v;++k,D+=4*h)for(let N=0,Z=0;N<h;N++,Z+=4){const X=N/(h-1),{start:ee,end:oe}=d.clips[k];T(D,Z,ee*(1-X)+oe*X)}else for(let k=0,D=0;k<h;k++,D+=4)T(0,D,k/(h-1));return x}pn("AlphaImage",Pv),pn("RGBAImage",xa);const Mv="big-fb";class Fk extends Zi{createBucket(l){return new dx(l)}constructor(l,h){super(l,nS,h),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Eh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Mv)&&this.heatmapFbos.delete(Mv)}queryRadius(l){return Ld("heatmap-radius",this,l)}queryIntersectsFeature({queryGeometry:l,feature:h,featureState:v,geometry:x,transform:T,pixelsToTileUnits:k,unwrappedTileID:D,getElevation:N}){return cx({queryGeometry:l,size:this.paint.get("heatmap-radius").evaluate(h,v)*k,transform:T,unwrappedTileID:D,getElevation:N},x)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let Rv;var Iv={get paint(){return Rv=Rv||new _o({"hillshade-illumination-direction":new yn(ut.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new yn(ut.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new yn(ut.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yn(ut.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yn(ut.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yn(ut.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yn(ut.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new yn(ut.paint_hillshade["hillshade-method"])})}};class lo extends Zi{constructor(l,h){super(l,Iv,h),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,h=this.paint.get("hillshade-illumination-altitude").values,v=this.paint.get("hillshade-highlight-color").values,x=this.paint.get("hillshade-shadow-color").values;const T=Math.max(l.length,h.length,v.length,x.length);l=l.concat(Array(T-l.length).fill(l.at(-1))),h=h.concat(Array(T-h.length).fill(h.at(-1))),v=v.concat(Array(T-v.length).fill(v.at(-1))),x=x.concat(Array(T-x.length).fill(x.at(-1)));const k=h.map(Et);return{directionRadians:l.map(Et),altitudeRadians:k,shadowColor:x,highlightColor:v}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let jk;var II={get paint(){return jk=jk||new _o({"color-relief-opacity":new yn(ut["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Gm(ut["paint_color-relief"]["color-relief-color"])})}};class px{constructor(l,h,v,x){this.context=l,this.format=v,this.texture=l.gl.createTexture(),this.update(h,x)}update(l,h,v){const{width:x,height:T}=l,k=!(this.size&&this.size[0]===x&&this.size[1]===T||v),{context:D}=this,{gl:N}=D;if(this.useMipmap=!!(h&&h.useMipmap),N.bindTexture(N.TEXTURE_2D,this.texture),D.pixelStoreUnpackFlipY.set(!1),D.pixelStoreUnpack.set(1),D.pixelStoreUnpackPremultiplyAlpha.set(this.format===N.RGBA&&(!h||h.premultiply!==!1)),k)this.size=[x,T],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Nn(l)?N.texImage2D(N.TEXTURE_2D,0,this.format,this.format,N.UNSIGNED_BYTE,l):N.texImage2D(N.TEXTURE_2D,0,this.format,x,T,0,this.format,N.UNSIGNED_BYTE,l.data);else{const{x:Z,y:X}=v||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Nn(l)?N.texSubImage2D(N.TEXTURE_2D,0,Z,X,N.RGBA,N.UNSIGNED_BYTE,l):N.texSubImage2D(N.TEXTURE_2D,0,Z,X,x,T,N.RGBA,N.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&N.generateMipmap(N.TEXTURE_2D),D.pixelStoreUnpackFlipY.setDefault(),D.pixelStoreUnpack.setDefault(),D.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,h,v){const{context:x}=this,{gl:T}=x;T.bindTexture(T.TEXTURE_2D,this.texture),v!==T.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=T.LINEAR),l!==this.filter&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,l),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,v||l),this.filter=l),h!==this.wrap&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,h),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class Vy{constructor(l,h,v,x=1,T=1,k=1,D=0){if(this.uid=l,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(v&&!["mapbox","terrarium","custom"].includes(v))return void rn(`"${v}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const N=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),v){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=x,this.greenFactor=T,this.blueFactor=k,this.baseShift=D;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Z=0;Z<N;Z++)this.data[this._idx(-1,Z)]=this.data[this._idx(0,Z)],this.data[this._idx(N,Z)]=this.data[this._idx(N-1,Z)],this.data[this._idx(Z,-1)]=this.data[this._idx(Z,0)],this.data[this._idx(Z,N)]=this.data[this._idx(Z,N-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(N,-1)]=this.data[this._idx(N-1,0)],this.data[this._idx(-1,N)]=this.data[this._idx(0,N-1)],this.data[this._idx(N,N)]=this.data[this._idx(N-1,N-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Z=0;Z<N;Z++)for(let X=0;X<N;X++){const ee=this.get(Z,X);ee>this.max&&(this.max=ee),ee<this.min&&(this.min=ee)}}get(l,h){const v=new Uint8Array(this.data.buffer),x=4*this._idx(l,h);return this.unpack(v[x],v[x+1],v[x+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,h){if(l<-1||l>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${l}, y: ${h}, dim: ${this.dim}`);return(h+1)*this.stride+(l+1)}unpack(l,h,v){return l*this.redFactor+h*this.greenFactor+v*this.blueFactor-this.baseShift}pack(l){return $d(l,this.getUnpackVector())}getPixels(){return new xa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,h,v){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let x=h*this.dim,T=h*this.dim+this.dim,k=v*this.dim,D=v*this.dim+this.dim;switch(h){case-1:x=T-1;break;case 1:T=x+1}switch(v){case-1:k=D-1;break;case 1:D=k+1}const N=-h*this.dim,Z=-v*this.dim;for(let X=k;X<D;X++)for(let ee=x;ee<T;ee++)this.data[this._idx(ee,X)]=l.data[this._idx(ee+N,X+Z)]}}function $d(d,l){const h=l[0],v=l[1],x=l[2],T=l[3],k=Math.min(h,v,x),D=Math.round((d+T)/k);return{r:Math.floor(D*k/h)%256,g:Math.floor(D*k/v)%256,b:Math.floor(D*k/x)%256}}pn("DEMData",Vy);class Vk extends Zi{constructor(l,h){super(l,II,h)}_createColorRamp(l){const h={elevationStops:[],colorStops:[]},v=this._transitionablePaint._values["color-relief-color"].value.expression;if(v instanceof la&&v._styleExpression.expression instanceof sa){this.colorRampExpression=v;const k=v._styleExpression.expression;h.elevationStops=k.labels,h.colorStops=[];for(const D of h.elevationStops)h.colorStops.push(k.evaluate({globals:{elevation:D}}))}if(h.elevationStops.length<1&&(h.elevationStops=[0],h.colorStops=[cr.transparent]),h.elevationStops.length<2&&(h.elevationStops.push(h.elevationStops[0]+1),h.colorStops.push(h.colorStops[0])),h.elevationStops.length<=l)return h;const x={elevationStops:[],colorStops:[]},T=(h.elevationStops.length-1)/(l-1);for(let k=0;k<h.elevationStops.length-.5;k+=T)x.elevationStops.push(h.elevationStops[Math.round(k)]),x.colorStops.push(h.colorStops[Math.round(k)]);return rn(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${l}, provided: ${h.elevationStops.length}`),x}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(l,h,v){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const x=this._createColorRamp(h),T=new xa({width:x.colorStops.length,height:1}),k=new xa({width:x.colorStops.length,height:1});for(let D=0;D<x.elevationStops.length;D++){const N=$d(x.elevationStops[D],v);k.setPixel(0,D,new cr(N.r/255,N.g/255,N.b/255,1)),T.setPixel(0,D,x.colorStops[D])}return this.colorRampTextures={elevationTexture:new px(l,k,l.gl.RGBA),colorTexture:new px(l,T,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const Qk=zi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Dv}=Qk;function Kl(d,l,h){const v=h.patternDependencies;let x=!1;for(const T of l){const k=T.paint.get(`${d}-pattern`);k.isConstant()||(x=!0);const D=k.constantOr(null);D&&(x=!0,v[D.to]=!0,v[D.from]=!0)}return x}function mx(d,l,h,v,x){const{zoom:T}=v,k=x.patternDependencies;for(const D of l){const N=D.paint.get(`${d}-pattern`).value;if(N.kind!=="constant"){let Z=N.evaluate({zoom:T-1},h,{},x.availableImages),X=N.evaluate({zoom:T},h,{},x.availableImages),ee=N.evaluate({zoom:T+1},h,{},x.availableImages);Z=Z&&Z.name?Z.name:Z,X=X&&X.name?X.name:X,ee=ee&&ee.name?ee.name:ee,k[Z]=!0,k[X]=!0,k[ee]=!0,h.patterns[D.id]={min:Z,mid:X,max:ee}}}return h}function gx(d,l,h,v,x){let T;if(x===(function(k,D,N,Z){let X=0;for(let ee=D,oe=N-Z;ee<N;ee+=Z)X+=(k[oe]-k[ee])*(k[ee+1]+k[oe+1]),oe=ee;return X})(d,l,h,v)>0)for(let k=l;k<h;k+=v)T=Ua(k/v|0,d[k],d[k+1],T);else for(let k=h-v;k>=l;k-=v)T=Ua(k/v|0,d[k],d[k+1],T);return T&&_l(T,T.next)&&(Za(T),T=T.next),T}function sp(d,l){if(!d)return d;l||(l=d);let h,v=d;do if(h=!1,v.steiner||!_l(v,v.next)&&Fr(v.prev,v,v.next)!==0)v=v.next;else{if(Za(v),v=l=v.prev,v===v.next)break;h=!0}while(h||v!==l);return l}function rg(d,l,h,v,x,T,k){if(!d)return;!k&&T&&(function(N,Z,X,ee){let oe=N;do oe.z===0&&(oe.z=us(oe.x,oe.y,Z,X,ee)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==N);oe.prevZ.nextZ=null,oe.prevZ=null,(function(le){let fe,pe=1;do{let ve,Ce=le;le=null;let Ve=null;for(fe=0;Ce;){fe++;let Ae=Ce,Re=0;for(let Ge=0;Ge<pe&&(Re++,Ae=Ae.nextZ,Ae);Ge++);let qe=pe;for(;Re>0||qe>0&&Ae;)Re!==0&&(qe===0||!Ae||Ce.z<=Ae.z)?(ve=Ce,Ce=Ce.nextZ,Re--):(ve=Ae,Ae=Ae.nextZ,qe--),Ve?Ve.nextZ=ve:le=ve,ve.prevZ=Ve,Ve=ve;Ce=Ae}Ve.nextZ=null,pe*=2}while(fe>1)})(oe)})(d,v,x,T);let D=d;for(;d.prev!==d.next;){const N=d.prev,Z=d.next;if(T?yx(d,v,x,T):rS(d))l.push(N.i,d.i,Z.i),Za(d),d=Z.next,D=Z.next;else if((d=Z)===D){k?k===1?rg(d=Uk(sp(d),l),l,h,v,x,T,2):k===2&&zd(d,l,h,v,x,T):rg(sp(d),l,h,v,x,T,1);break}}}function rS(d){const l=d.prev,h=d,v=d.next;if(Fr(l,h,v)>=0)return!1;const x=l.x,T=h.x,k=v.x,D=l.y,N=h.y,Z=v.y,X=Math.min(x,T,k),ee=Math.min(D,N,Z),oe=Math.max(x,T,k),le=Math.max(D,N,Z);let fe=v.next;for(;fe!==l;){if(fe.x>=X&&fe.x<=oe&&fe.y>=ee&&fe.y<=le&&Qy(x,D,T,N,k,Z,fe.x,fe.y)&&Fr(fe.prev,fe,fe.next)>=0)return!1;fe=fe.next}return!0}function yx(d,l,h,v){const x=d.prev,T=d,k=d.next;if(Fr(x,T,k)>=0)return!1;const D=x.x,N=T.x,Z=k.x,X=x.y,ee=T.y,oe=k.y,le=Math.min(D,N,Z),fe=Math.min(X,ee,oe),pe=Math.max(D,N,Z),ve=Math.max(X,ee,oe),Ce=us(le,fe,l,h,v),Ve=us(pe,ve,l,h,v);let Ae=d.prevZ,Re=d.nextZ;for(;Ae&&Ae.z>=Ce&&Re&&Re.z<=Ve;){if(Ae.x>=le&&Ae.x<=pe&&Ae.y>=fe&&Ae.y<=ve&&Ae!==x&&Ae!==k&&Qy(D,X,N,ee,Z,oe,Ae.x,Ae.y)&&Fr(Ae.prev,Ae,Ae.next)>=0||(Ae=Ae.prevZ,Re.x>=le&&Re.x<=pe&&Re.y>=fe&&Re.y<=ve&&Re!==x&&Re!==k&&Qy(D,X,N,ee,Z,oe,Re.x,Re.y)&&Fr(Re.prev,Re,Re.next)>=0))return!1;Re=Re.nextZ}for(;Ae&&Ae.z>=Ce;){if(Ae.x>=le&&Ae.x<=pe&&Ae.y>=fe&&Ae.y<=ve&&Ae!==x&&Ae!==k&&Qy(D,X,N,ee,Z,oe,Ae.x,Ae.y)&&Fr(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.prevZ}for(;Re&&Re.z<=Ve;){if(Re.x>=le&&Re.x<=pe&&Re.y>=fe&&Re.y<=ve&&Re!==x&&Re!==k&&Qy(D,X,N,ee,Z,oe,Re.x,Re.y)&&Fr(Re.prev,Re,Re.next)>=0)return!1;Re=Re.nextZ}return!0}function Uk(d,l){let h=d;do{const v=h.prev,x=h.next.next;!_l(v,x)&&sS(v,h,h.next,x)&&zv(v,x)&&zv(x,v)&&(l.push(v.i,h.i,x.i),Za(h),Za(h.next),h=d=x),h=h.next}while(h!==d);return sp(h)}function zd(d,l,h,v,x,T){let k=d;do{let D=k.next.next;for(;D!==k.prev;){if(k.i!==D.i&&bo(k,D)){let N=Nv(k,D);return k=sp(k,k.next),N=sp(N,N.next),rg(k,l,h,v,x,T,0),void rg(N,l,h,v,x,T,0)}D=D.next}k=k.next}while(k!==d)}function cs(d,l){let h=d.x-l.x;return h===0&&(h=d.y-l.y,h===0)&&(h=(d.next.y-d.y)/(d.next.x-d.x)-(l.next.y-l.y)/(l.next.x-l.x)),h}function iS(d,l){const h=(function(x,T){let k=T;const D=x.x,N=x.y;let Z,X=-1/0;if(_l(x,k))return k;do{if(_l(x,k.next))return k.next;if(N<=k.y&&N>=k.next.y&&k.next.y!==k.y){const pe=k.x+(N-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(pe<=D&&pe>X&&(X=pe,Z=k.x<k.next.x?k:k.next,pe===D))return Z}k=k.next}while(k!==T);if(!Z)return null;const ee=Z,oe=Z.x,le=Z.y;let fe=1/0;k=Z;do{if(D>=k.x&&k.x>=oe&&D!==k.x&&oS(N<le?D:X,N,oe,le,N<le?X:D,N,k.x,k.y)){const pe=Math.abs(N-k.y)/(D-k.x);zv(k,x)&&(pe<fe||pe===fe&&(k.x>Z.x||k.x===Z.x&&Zk(Z,k)))&&(Z=k,fe=pe)}k=k.next}while(k!==ee);return Z})(d,l);if(!h)return l;const v=Nv(h,d);return sp(v,v.next),sp(h,h.next)}function Zk(d,l){return Fr(d.prev,d,l.prev)<0&&Fr(l.next,d,d.next)<0}function us(d,l,h,v,x){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-h)*x|0)|d<<8))|d<<4))|d<<2))|d<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-v)*x|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function DI(d){let l=d,h=d;do(l.x<h.x||l.x===h.x&&l.y<h.y)&&(h=l),l=l.next;while(l!==d);return h}function oS(d,l,h,v,x,T,k,D){return(x-k)*(l-D)>=(d-k)*(T-D)&&(d-k)*(v-D)>=(h-k)*(l-D)&&(h-k)*(T-D)>=(x-k)*(v-D)}function Qy(d,l,h,v,x,T,k,D){return!(d===k&&l===D)&&oS(d,l,h,v,x,T,k,D)}function bo(d,l){return d.next.i!==l.i&&d.prev.i!==l.i&&!(function(h,v){let x=h;do{if(x.i!==h.i&&x.next.i!==h.i&&x.i!==v.i&&x.next.i!==v.i&&sS(x,x.next,h,v))return!0;x=x.next}while(x!==h);return!1})(d,l)&&(zv(d,l)&&zv(l,d)&&(function(h,v){let x=h,T=!1;const k=(h.x+v.x)/2,D=(h.y+v.y)/2;do x.y>D!=x.next.y>D&&x.next.y!==x.y&&k<(x.next.x-x.x)*(D-x.y)/(x.next.y-x.y)+x.x&&(T=!T),x=x.next;while(x!==h);return T})(d,l)&&(Fr(d.prev,d,l.prev)||Fr(d,l.prev,l))||_l(d,l)&&Fr(d.prev,d,d.next)>0&&Fr(l.prev,l,l.next)>0)}function Fr(d,l,h){return(l.y-d.y)*(h.x-l.x)-(l.x-d.x)*(h.y-l.y)}function _l(d,l){return d.x===l.x&&d.y===l.y}function sS(d,l,h,v){const x=$v(Fr(d,l,h)),T=$v(Fr(d,l,v)),k=$v(Fr(h,v,d)),D=$v(Fr(h,v,l));return x!==T&&k!==D||!(x!==0||!Lv(d,h,l))||!(T!==0||!Lv(d,v,l))||!(k!==0||!Lv(h,d,v))||!(D!==0||!Lv(h,l,v))}function Lv(d,l,h){return l.x<=Math.max(d.x,h.x)&&l.x>=Math.min(d.x,h.x)&&l.y<=Math.max(d.y,h.y)&&l.y>=Math.min(d.y,h.y)}function $v(d){return d>0?1:d<0?-1:0}function zv(d,l){return Fr(d.prev,d,d.next)<0?Fr(d,l,d.next)>=0&&Fr(d,d.prev,l)>=0:Fr(d,l,d.prev)<0||Fr(d,d.next,l)<0}function Nv(d,l){const h=vx(d.i,d.x,d.y),v=vx(l.i,l.x,l.y),x=d.next,T=l.prev;return d.next=l,l.prev=d,h.next=x,x.prev=h,v.next=h,h.prev=v,T.next=v,v.prev=T,v}function Ua(d,l,h,v){const x=vx(d,l,h);return v?(x.next=v.next,x.prev=v,v.next.prev=x,v.next=x):(x.prev=x,x.next=x),x}function Za(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function vx(d,l,h){return{i:d,x:l,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Ss{constructor(l,h){if(h>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=h}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class Bv{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}Bv.noSubdivision=new Bv({fill:new Ss(0,0),line:new Ss(0,0),tile:new Ss(0,0),stencil:new Ss(0,0),circle:1}),pn("SubdivisionGranularityExpression",Ss),pn("SubdivisionGranularitySetting",Bv);const bl=-32768,Ou=32767;class Nd{constructor(l,h){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=Qe/l,this._canonical=h}_getKey(l,h){return(l+=32768)<<16|h+32768}_vertexToIndex(l,h){if(l<-32768||h<-32768||l>32767||h>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const v=0|Math.round(l),x=0|Math.round(h),T=this._getKey(v,x);if(this._vertexDictionary.has(T))return this._vertexDictionary.get(T);const k=this._vertexBuffer.length/2;return this._vertexDictionary.set(T,k),this._vertexBuffer.push(v,x),k}_subdivideTrianglesScanline(l){if(this._granularity<2)return(function(x,T){const k=[];for(let D=0;D<T.length;D+=3){const N=T[D],Z=T[D+1],X=T[D+2],ee=x[2*N],oe=x[2*N+1];(x[2*Z]-ee)*(x[2*X+1]-oe)-(x[2*Z+1]-oe)*(x[2*X]-ee)>0?(k.push(N),k.push(X),k.push(Z)):(k.push(N),k.push(Z),k.push(X))}return k})(this._vertexBuffer,l);const h=[],v=l.length;for(let x=0;x<v;x+=3){const T=[l[x+0],l[x+1],l[x+2]],k=[this._vertexBuffer[2*l[x+0]+0],this._vertexBuffer[2*l[x+0]+1],this._vertexBuffer[2*l[x+1]+0],this._vertexBuffer[2*l[x+1]+1],this._vertexBuffer[2*l[x+2]+0],this._vertexBuffer[2*l[x+2]+1]];let D=1/0,N=1/0,Z=-1/0,X=-1/0;for(let pe=0;pe<3;pe++){const ve=k[2*pe],Ce=k[2*pe+1];D=Math.min(D,ve),Z=Math.max(Z,ve),N=Math.min(N,Ce),X=Math.max(X,Ce)}if(D===Z||N===X)continue;const ee=Math.floor(D/this._granularityCellSize),oe=Math.ceil(Z/this._granularityCellSize),le=Math.floor(N/this._granularityCellSize),fe=Math.ceil(X/this._granularityCellSize);if(ee!==oe||le!==fe)for(let pe=le;pe<fe;pe++){const ve=this._scanlineGenerateVertexRingForCellRow(pe,k,T);Su(this._vertexBuffer,ve,h)}else h.push(...T)}return h}_scanlineGenerateVertexRingForCellRow(l,h,v){const x=l*this._granularityCellSize,T=x+this._granularityCellSize,k=[];for(let D=0;D<3;D++){const N=h[2*D],Z=h[2*D+1],X=h[2*(D+1)%6],ee=h[(2*(D+1)+1)%6],oe=h[2*(D+2)%6],le=h[(2*(D+2)+1)%6],fe=X-N,pe=ee-Z,ve=fe===0,Ce=pe===0,Ve=(x-Z)/pe,Ae=(T-Z)/pe,Re=Math.min(Ve,Ae),qe=Math.max(Ve,Ae);if(!Ce&&(Re>=1||qe<=0)||Ce&&(Z<x||Z>T)){ee>=x&&ee<=T&&k.push(v[(D+1)%3]);continue}!Ce&&Re>0&&k.push(this._vertexToIndex(N+fe*Re,Z+pe*Re));const Ge=N+fe*Math.max(Re,0),dt=N+fe*Math.min(qe,1);ve||this._generateIntraEdgeVertices(k,N,Z,X,ee,Ge,dt),!Ce&&qe<1&&k.push(this._vertexToIndex(N+fe*qe,Z+pe*qe)),(Ce||ee>=x&&ee<=T)&&k.push(v[(D+1)%3]),!Ce&&(ee<=x||ee>=T)&&this._generateInterEdgeVertices(k,N,Z,X,ee,oe,le,dt,x,T)}return k}_generateIntraEdgeVertices(l,h,v,x,T,k,D){const N=x-h,Z=T-v,X=Z===0,ee=X?Math.min(h,x):Math.min(k,D),oe=X?Math.max(h,x):Math.max(k,D),le=Math.floor(ee/this._granularityCellSize)+1,fe=Math.ceil(oe/this._granularityCellSize)-1;if(X?h<x:k<D)for(let pe=le;pe<=fe;pe++){const ve=pe*this._granularityCellSize;l.push(this._vertexToIndex(ve,v+Z*(ve-h)/N))}else for(let pe=fe;pe>=le;pe--){const ve=pe*this._granularityCellSize;l.push(this._vertexToIndex(ve,v+Z*(ve-h)/N))}}_generateInterEdgeVertices(l,h,v,x,T,k,D,N,Z,X){const ee=T-v,oe=k-x,le=D-T,fe=(Z-T)/le,pe=(X-T)/le,ve=Math.min(fe,pe),Ce=Math.max(fe,pe),Ve=x+oe*ve;let Ae=Math.floor(Math.min(Ve,N)/this._granularityCellSize)+1,Re=Math.ceil(Math.max(Ve,N)/this._granularityCellSize)-1,qe=N<Ve;const Ge=le===0;if(Ge&&(D===Z||D===X))return;if(Ge||ve>=1||Ce<=0){const Dt=v-D,Ct=k+(h-k)*Math.min((Z-D)/Dt,(X-D)/Dt);Ae=Math.floor(Math.min(Ct,N)/this._granularityCellSize)+1,Re=Math.ceil(Math.max(Ct,N)/this._granularityCellSize)-1,qe=N<Ct}const dt=ee>0?X:Z;if(qe)for(let Dt=Ae;Dt<=Re;Dt++)l.push(this._vertexToIndex(Dt*this._granularityCellSize,dt));else for(let Dt=Re;Dt>=Ae;Dt--)l.push(this._vertexToIndex(Dt*this._granularityCellSize,dt))}_generateOutline(l){const h=[];for(const v of l){const x=Bd(v,this._granularity,!0),T=this._pointArrayToIndices(x),k=[];for(let D=1;D<T.length;D++)k.push(T[D-1]),k.push(T[D]);h.push(k)}return h}_handlePoles(l){let h=!1,v=!1;this._canonical&&(this._canonical.y===0&&(h=!0),this._canonical.y===(1<<this._canonical.z)-1&&(v=!0)),(h||v)&&this._fillPoles(l,h,v)}_ensureNoPoleVertices(){const l=this._vertexBuffer;for(let h=0;h<l.length;h+=2){const v=l[h+1];v===bl&&(l[h+1]=-32767),v===Ou&&(l[h+1]=32766)}}_generatePoleQuad(l,h,v,x,T,k){x>T!=(k===bl)?(l.push(h),l.push(v),l.push(this._vertexToIndex(x,k)),l.push(v),l.push(this._vertexToIndex(T,k)),l.push(this._vertexToIndex(x,k))):(l.push(v),l.push(h),l.push(this._vertexToIndex(x,k)),l.push(this._vertexToIndex(T,k)),l.push(v),l.push(this._vertexToIndex(x,k)))}_fillPoles(l,h,v){const x=this._vertexBuffer,T=Qe,k=l.length;for(let D=2;D<k;D+=3){const N=l[D-2],Z=l[D-1],X=l[D],ee=x[2*N],oe=x[2*N+1],le=x[2*Z],fe=x[2*Z+1],pe=x[2*X],ve=x[2*X+1];h&&(oe===0&&fe===0&&this._generatePoleQuad(l,N,Z,ee,le,bl),fe===0&&ve===0&&this._generatePoleQuad(l,Z,X,le,pe,bl),ve===0&&oe===0&&this._generatePoleQuad(l,X,N,pe,ee,bl)),v&&(oe===T&&fe===T&&this._generatePoleQuad(l,N,Z,ee,le,Ou),fe===T&&ve===T&&this._generatePoleQuad(l,Z,X,le,pe,Ou),ve===T&&oe===T&&this._generatePoleQuad(l,X,N,pe,ee,Ou))}}_initializeVertices(l){for(let h=0;h<l.length;h+=2)this._vertexToIndex(l[h],l[h+1])}subdividePolygonInternal(l,h){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:v,holeIndices:x}=(function(D){const N=[],Z=[];for(const X of D)if(X.length!==0){X!==D[0]&&N.push(Z.length/2);for(let ee=0;ee<X.length;ee++)Z.push(X[ee].x),Z.push(X[ee].y)}return{flattened:Z,holeIndices:N}})(l);let T;this._initializeVertices(v);try{const D=(function(Z,X,ee=2){const oe=X&&X.length,le=oe?X[0]*ee:Z.length;let fe=gx(Z,0,le,ee,!0);const pe=[];if(!fe||fe.next===fe.prev)return pe;let ve,Ce,Ve;if(oe&&(fe=(function(Ae,Re,qe,Ge){const dt=[];for(let Dt=0,Ct=Re.length;Dt<Ct;Dt++){const Bt=gx(Ae,Re[Dt]*Ge,Dt<Ct-1?Re[Dt+1]*Ge:Ae.length,Ge,!1);Bt===Bt.next&&(Bt.steiner=!0),dt.push(DI(Bt))}dt.sort(cs);for(let Dt=0;Dt<dt.length;Dt++)qe=iS(dt[Dt],qe);return qe})(Z,X,fe,ee)),Z.length>80*ee){ve=Z[0],Ce=Z[1];let Ae=ve,Re=Ce;for(let qe=ee;qe<le;qe+=ee){const Ge=Z[qe],dt=Z[qe+1];Ge<ve&&(ve=Ge),dt<Ce&&(Ce=dt),Ge>Ae&&(Ae=Ge),dt>Re&&(Re=dt)}Ve=Math.max(Ae-ve,Re-Ce),Ve=Ve!==0?32767/Ve:0}return rg(fe,pe,ee,ve,Ce,Ve,0),pe})(v,x),N=this._convertIndices(v,D);T=this._subdivideTrianglesScanline(N)}catch(D){console.error(D)}let k=[];return h&&(k=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(T),{verticesFlattened:this._vertexBuffer,indicesTriangles:T,indicesLineList:k}}_convertIndices(l,h){const v=[];for(let x=0;x<h.length;x++)v.push(this._vertexToIndex(l[2*h[x]],l[2*h[x]+1]));return v}_pointArrayToIndices(l){const h=[];for(let v=0;v<l.length;v++){const x=l[v];h.push(this._vertexToIndex(x.x,x.y))}return h}}function _x(d,l,h,v=!0){return new Nd(h,l).subdividePolygonInternal(d,v)}function Bd(d,l,h=!1){if(!d||d.length<1)return[];if(d.length<2)return[];const v=d[0],x=d[d.length-1],T=h&&(v.x!==x.x||v.y!==x.y);if(l<2)return T?[...d,d[0]]:[...d];const k=Math.floor(Qe/l),D=[];D.push(new u(d[0].x,d[0].y));const N=d.length,Z=T?N:N-1;for(let X=0;X<Z;X++){const ee=d[X],oe=X<N-1?d[X+1]:d[0],le=ee.x,fe=ee.y,pe=oe.x,ve=oe.y,Ce=le!==pe,Ve=fe!==ve;if(!Ce&&!Ve)continue;const Ae=pe-le,Re=ve-fe,qe=Math.abs(Ae),Ge=Math.abs(Re);let dt=le,Dt=fe;for(;;){const Bt=Ae>0?(Math.floor(dt/k)+1)*k:(Math.ceil(dt/k)-1)*k,cn=Re>0?(Math.floor(Dt/k)+1)*k:(Math.ceil(Dt/k)-1)*k,Ut=Math.abs(dt-Bt),Mt=Math.abs(Dt-cn),_t=Math.abs(dt-pe),_n=Math.abs(Dt-ve),mn=Ce?Ut/qe:Number.POSITIVE_INFINITY,xn=Ve?Mt/Ge:Number.POSITIVE_INFINITY;if((_t<=Ut||!Ce)&&(_n<=Mt||!Ve))break;if(mn<xn&&Ce||!Ve){dt=Bt,Dt+=Re*mn;const dn=new u(dt,Math.round(Dt));D[D.length-1].x===dn.x&&D[D.length-1].y===dn.y||D.push(dn)}else{dt+=Ae*xn,Dt=cn;const dn=new u(Math.round(dt),Dt);D[D.length-1].x===dn.x&&D[D.length-1].y===dn.y||D.push(dn)}}const Ct=new u(pe,ve);D[D.length-1].x===Ct.x&&D[D.length-1].y===Ct.y||D.push(Ct)}return D}function Su(d,l,h){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let v=0,x=d[2*l[0]];for(let N=1;N<l.length;N++){const Z=d[2*l[N]];Z<x&&(x=Z,v=N)}const T=l.length;let k=v,D=(k+1)%T;for(;;){const N=k-1>=0?k-1:T-1,Z=(D+1)%T,X=d[2*l[N]],ee=d[2*l[Z]],oe=d[2*l[k]],le=d[2*l[k]+1],fe=d[2*l[D]+1];let pe=!1;if(X<ee)pe=!0;else if(X>ee)pe=!1;else{const ve=fe-le,Ce=-(d[2*l[D]]-oe),Ve=le<fe?1:-1;((X-oe)*ve+(d[2*l[N]+1]-le)*Ce)*Ve>((ee-oe)*ve+(d[2*l[Z]+1]-le)*Ce)*Ve&&(pe=!0)}if(pe){const ve=l[N],Ce=l[k],Ve=l[D];ve!==Ce&&ve!==Ve&&Ce!==Ve&&h.push(Ve,Ce,ve),k--,k<0&&(k=T-1)}else{const ve=l[Z],Ce=l[k],Ve=l[D];ve!==Ce&&ve!==Ve&&Ce!==Ve&&h.push(Ve,Ce,ve),D++,D>=T&&(D=0)}if(N===Z)break}}function aS(d,l,h,v,x,T,k,D,N){const Z=x.length/2,X=k&&D&&N;if(Z<ln.MAX_VERTEX_ARRAY_LENGTH){const ee=l.prepareSegment(Z,h,v),oe=ee.vertexLength;for(let pe=0;pe<T.length;pe+=3)v.emplaceBack(oe+T[pe],oe+T[pe+1],oe+T[pe+2]);let le,fe;ee.vertexLength+=Z,ee.primitiveLength+=T.length/3,X&&(fe=k.prepareSegment(Z,h,D),le=fe.vertexLength,fe.vertexLength+=Z);for(let pe=0;pe<x.length;pe+=2)d(x[pe],x[pe+1]);if(X)for(let pe=0;pe<N.length;pe++){const ve=N[pe];for(let Ce=1;Ce<ve.length;Ce+=2)D.emplaceBack(le+ve[Ce-1],le+ve[Ce]);fe.primitiveLength+=ve.length/2}}else(function(ee,oe,le,fe,pe,ve){const Ce=[];for(let Ge=0;Ge<fe.length/2;Ge++)Ce.push(-1);const Ve={count:0};let Ae=0,Re=ee.getOrCreateLatestSegment(oe,le),qe=Re.vertexLength;for(let Ge=2;Ge<pe.length;Ge+=3){const dt=pe[Ge-2],Dt=pe[Ge-1],Ct=pe[Ge];let Bt=Ce[dt]<Ae,cn=Ce[Dt]<Ae,Ut=Ce[Ct]<Ae;Re.vertexLength+((Bt?1:0)+(cn?1:0)+(Ut?1:0))>ln.MAX_VERTEX_ARRAY_LENGTH&&(Re=ee.createNewSegment(oe,le),Ae=Ve.count,Bt=!0,cn=!0,Ut=!0,qe=0);const Mt=Ah(Ce,fe,ve,Ve,dt,Bt,Re),_t=Ah(Ce,fe,ve,Ve,Dt,cn,Re),_n=Ah(Ce,fe,ve,Ve,Ct,Ut,Re);le.emplaceBack(qe+Mt-Ae,qe+_t-Ae,qe+_n-Ae),Re.primitiveLength++}})(l,h,v,x,T,d),X&&(function(ee,oe,le,fe,pe,ve){const Ce=[];for(let Ge=0;Ge<fe.length/2;Ge++)Ce.push(-1);const Ve={count:0};let Ae=0,Re=ee.getOrCreateLatestSegment(oe,le),qe=Re.vertexLength;for(let Ge=0;Ge<pe.length;Ge++){const dt=pe[Ge];for(let Dt=1;Dt<pe[Ge].length;Dt+=2){const Ct=dt[Dt-1],Bt=dt[Dt];let cn=Ce[Ct]<Ae,Ut=Ce[Bt]<Ae;Re.vertexLength+((cn?1:0)+(Ut?1:0))>ln.MAX_VERTEX_ARRAY_LENGTH&&(Re=ee.createNewSegment(oe,le),Ae=Ve.count,cn=!0,Ut=!0,qe=0);const Mt=Ah(Ce,fe,ve,Ve,Ct,cn,Re),_t=Ah(Ce,fe,ve,Ve,Bt,Ut,Re);le.emplaceBack(qe+Mt-Ae,qe+_t-Ae),Re.primitiveLength++}}})(k,h,D,x,N,d),l.forceNewSegmentOnNextPrepare(),k?.forceNewSegmentOnNextPrepare()}function Ah(d,l,h,v,x,T,k){if(T){const D=v.count;return h(l[2*x],l[2*x+1]),d[x]=v.count,v.count++,k.vertexLength++,D}return d[x]}class ig{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new De,this.indexArray=new gt,this.indexArray2=new Kt,this.programConfigurations=new Sh(l.layers,l.zoom),this.segments=new ln,this.segments2=new ln,this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(l,h,v){this.hasDependencies=Kl("fill",this.layers,h);const x=this.layers[0].layout.get("fill-sort-key"),T=!x.isConstant(),k=[];for(const{feature:D,id:N,index:Z,sourceLayerIndex:X}of l){const ee=this.layers[0]._featureFilter.needGeometry,oe=Yl(D,ee);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),oe,v))continue;const le=T?x.evaluate(oe,{},v,h.availableImages):void 0,fe={id:N,properties:D.properties,type:D.type,sourceLayerIndex:X,index:Z,geometry:ee?oe.geometry:wu(D),patterns:{},sortKey:le};k.push(fe)}T&&k.sort(((D,N)=>D.sortKey-N.sortKey));for(const D of k){const{geometry:N,index:Z,sourceLayerIndex:X}=D;if(this.hasDependencies){const ee=mx("fill",this.layers,D,{zoom:this.zoom},h);this.patternFeatures.push(ee)}else this.addFeature(D,N,Z,v,{},h.subdivisionGranularity);h.featureIndex.insert(l[Z].feature,N,Z,X,this.index)}}update(l,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,{imagePositions:v})}addFeatures(l,h,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,h,v,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Dv),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,h,v,x,T,k){for(const D of Pm(h,500)){const N=_x(D,x,k.fill.getGranularityForZoomLevel(x.z)),Z=this.layoutVertexArray;aS(((X,ee)=>{Z.emplaceBack(X,ee)}),this.segments,this.layoutVertexArray,this.indexArray,N.verticesFlattened,N.indicesTriangles,this.segments2,this.indexArray2,N.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,v,{imagePositions:T,canonical:x})}}let Uy,og;pn("FillBucket",ig,{omit:["layers","patternFeatures"]});var qk={get paint(){return og=og||new _o({"fill-antialias":new yn(ut.paint_fill["fill-antialias"]),"fill-opacity":new Tn(ut.paint_fill["fill-opacity"]),"fill-color":new Tn(ut.paint_fill["fill-color"]),"fill-outline-color":new Tn(ut.paint_fill["fill-outline-color"]),"fill-translate":new yn(ut.paint_fill["fill-translate"]),"fill-translate-anchor":new yn(ut.paint_fill["fill-translate-anchor"]),"fill-pattern":new ml(ut.paint_fill["fill-pattern"])})},get layout(){return Uy=Uy||new _o({"fill-sort-key":new Tn(ut.layout_fill["fill-sort-key"])})}};class Wk extends Zi{constructor(l,h){super(l,qk,h)}recalculate(l,h){super.recalculate(l,h);const v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new ig(l)}queryRadius(){return kv(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:h,transform:v,pixelsToTileUnits:x}){return ox(ax(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-v.bearingInRadians,x),h)}isTileClipped(){return!0}}const Fv=zi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Hk=zi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:bx}=Fv;class Zy{constructor(l,h,v,x,T){this.properties={},this.extent=v,this.type=0,this.id=void 0,this._pbf=l,this._geometry=-1,this._keys=x,this._values=T,l.readFields(LI,this,h)}loadGeometry(){const l=this._pbf;l.pos=this._geometry;const h=l.readVarint()+l.pos,v=[];let x,T=1,k=0,D=0,N=0;for(;l.pos<h;){if(k<=0){const Z=l.readVarint();T=7&Z,k=Z>>3}if(k--,T===1||T===2)D+=l.readSVarint(),N+=l.readSVarint(),T===1&&(x&&v.push(x),x=[]),x&&x.push(new u(D,N));else{if(T!==7)throw new Error(`unknown command ${T}`);x&&x.push(x[0].clone())}}return x&&v.push(x),v}bbox(){const l=this._pbf;l.pos=this._geometry;const h=l.readVarint()+l.pos;let v=1,x=0,T=0,k=0,D=1/0,N=-1/0,Z=1/0,X=-1/0;for(;l.pos<h;){if(x<=0){const ee=l.readVarint();v=7&ee,x=ee>>3}if(x--,v===1||v===2)T+=l.readSVarint(),k+=l.readSVarint(),T<D&&(D=T),T>N&&(N=T),k<Z&&(Z=k),k>X&&(X=k);else if(v!==7)throw new Error(`unknown command ${v}`)}return[D,Z,N,X]}toGeoJSON(l,h,v){const x=this.extent*Math.pow(2,v),T=this.extent*l,k=this.extent*h,D=this.loadGeometry();function N(oe){return[360*(oe.x+T)/x-180,360/Math.PI*Math.atan(Math.exp((1-2*(oe.y+k)/x)*Math.PI))-90]}function Z(oe){return oe.map(N)}let X;if(this.type===1){const oe=[];for(const fe of D)oe.push(fe[0]);const le=Z(oe);X=oe.length===1?{type:"Point",coordinates:le[0]}:{type:"MultiPoint",coordinates:le}}else if(this.type===2){const oe=D.map(Z);X=oe.length===1?{type:"LineString",coordinates:oe[0]}:{type:"MultiLineString",coordinates:oe}}else{if(this.type!==3)throw new Error("unknown feature type");{const oe=Gk(D),le=[];for(const fe of oe)le.push(fe.map(Z));X=le.length===1?{type:"Polygon",coordinates:le[0]}:{type:"MultiPolygon",coordinates:le}}}const ee={type:"Feature",geometry:X,properties:this.properties};return this.id!=null&&(ee.id=this.id),ee}}function LI(d,l,h){d===1?l.id=h.readVarint():d===2?(function(v,x){const T=v.readVarint()+v.pos;for(;v.pos<T;){const k=x._keys[v.readVarint()],D=x._values[v.readVarint()];x.properties[k]=D}})(h,l):d===3?l.type=h.readVarint():d===4&&(l._geometry=h.pos)}function Gk(d){const l=d.length;if(l<=1)return[d];const h=[];let v,x;for(let T=0;T<l;T++){const k=fi(d[T]);k!==0&&(x===void 0&&(x=k<0),x===k<0?(v&&h.push(v),v=[d[T]]):v&&v.push(d[T]))}return v&&h.push(v),h}function fi(d){let l=0;for(let h,v,x=0,T=d.length,k=T-1;x<T;k=x++)h=d[x],v=d[k],l+=(v.x-h.x)*(h.y+v.y);return l}Zy.types=["Unknown","Point","LineString","Polygon"];class Bi{constructor(l,h){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(Dr,this,h),this.length=this._features.length}feature(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];const h=this._pbf.readVarint()+this._pbf.pos;return new Zy(this._pbf,h,this.extent,this._keys,this._values)}}function Dr(d,l,h){d===15?l.version=h.readVarint():d===1?l.name=h.readString():d===5?l.extent=h.readVarint():d===2?l._features.push(h.pos):d===3?l._keys.push(h.readString()):d===4&&l._values.push((function(v){let x=null;const T=v.readVarint()+v.pos;for(;v.pos<T;){const k=v.readVarint()>>3;x=k===1?v.readString():k===2?v.readFloat():k===3?v.readDouble():k===4?v.readVarint64():k===5?v.readVarint():k===6?v.readSVarint():k===7?v.readBoolean():null}if(x==null)throw new Error("unknown feature value");return x})(h))}class Lr{constructor(l,h){this.layers=l.readFields(bi,{},h)}}function bi(d,l,h){if(d===3){const v=new Bi(h,h.readVarint()+h.pos);v.length&&(l[v.name]=v)}}const qa=Math.pow(2,13);function Nc(d,l,h,v,x,T,k,D){d.emplaceBack(l,h,2*Math.floor(v*qa)+k,x*qa*2,T*qa*2,Math.round(D))}class ap{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new je,this.centroidVertexArray=new Ie,this.indexArray=new gt,this.programConfigurations=new Sh(l.layers,l.zoom),this.segments=new ln,this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(l,h,v){this.features=[],this.hasDependencies=Kl("fill-extrusion",this.layers,h);for(const{feature:x,id:T,index:k,sourceLayerIndex:D}of l){const N=this.layers[0]._featureFilter.needGeometry,Z=Yl(x,N);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),Z,v))continue;const X={id:T,sourceLayerIndex:D,index:k,geometry:N?Z.geometry:wu(x),properties:x.properties,type:x.type,patterns:{}};this.hasDependencies?this.features.push(mx("fill-extrusion",this.layers,X,{zoom:this.zoom},h)):this.addFeature(X,X.geometry,k,v,{},h.subdivisionGranularity),h.featureIndex.insert(x,X.geometry,k,D,this.index,!0)}}addFeatures(l,h,v){for(const x of this.features){const{geometry:T}=x;this.addFeature(x,T,x.index,h,v,l.subdivisionGranularity)}}update(l,h,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,{imagePositions:v})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,bx),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,Hk.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,h,v,x,T,k){for(const D of Pm(h,500)){const N={x:0,y:0,sampleCount:0},Z=this.layoutVertexArray.length;this.processPolygon(N,x,l,D,k);const X=this.layoutVertexArray.length-Z,ee=Math.floor(N.x/N.sampleCount),oe=Math.floor(N.y/N.sampleCount);for(let le=0;le<X;le++)this.centroidVertexArray.emplaceBack(ee,oe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,v,{imagePositions:T,canonical:x})}processPolygon(l,h,v,x,T){if(x.length<1||Ro(x[0]))return;for(const ee of x)ee.length!==0&&lS(l,ee);const k={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},D=T.fill.getGranularityForZoomLevel(h.z),N=Zy.types[v.type]==="Polygon";for(const ee of x){if(ee.length===0||Ro(ee))continue;const oe=Bd(ee,D,N);this._generateSideFaces(oe,k)}if(!N)return;const Z=_x(x,h,D,!1),X=this.layoutVertexArray;aS(((ee,oe)=>{Nc(X,ee,oe,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,Z.verticesFlattened,Z.indicesTriangles)}_generateSideFaces(l,h){let v=0;for(let x=1;x<l.length;x++){const T=l[x],k=l[x-1];if(Fd(T,k))continue;h.segment.vertexLength+4>ln.MAX_VERTEX_ARRAY_LENGTH&&(h.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const D=T.sub(k)._perp()._unit(),N=k.dist(T);v+N>32768&&(v=0),Nc(this.layoutVertexArray,T.x,T.y,D.x,D.y,0,0,v),Nc(this.layoutVertexArray,T.x,T.y,D.x,D.y,0,1,v),v+=N,Nc(this.layoutVertexArray,k.x,k.y,D.x,D.y,0,0,v),Nc(this.layoutVertexArray,k.x,k.y,D.x,D.y,0,1,v);const Z=h.segment.vertexLength;this.indexArray.emplaceBack(Z,Z+2,Z+1),this.indexArray.emplaceBack(Z+1,Z+2,Z+3),h.segment.vertexLength+=4,h.segment.primitiveLength+=2}}}function lS(d,l){for(let h=0;h<l.length;h++){const v=l[h];h===l.length-1&&l[0].x===v.x&&l[0].y===v.y||(d.x+=v.x,d.y+=v.y,d.sampleCount++)}}function Fd(d,l){return d.x===l.x&&(d.x<0||d.x>Qe)||d.y===l.y&&(d.y<0||d.y>Qe)}function Ro(d){return d.every((l=>l.x<0))||d.every((l=>l.x>Qe))||d.every((l=>l.y<0))||d.every((l=>l.y>Qe))}let jd;pn("FillExtrusionBucket",ap,{omit:["layers","features"]});var sg={get paint(){return jd=jd||new _o({"fill-extrusion-opacity":new yn(ut["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Tn(ut["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yn(ut["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yn(ut["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ml(ut["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Tn(ut["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Tn(ut["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yn(ut["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class cS extends Zi{constructor(l,h){super(l,sg,h)}createBucket(l){return new ap(l)}queryRadius(){return kv(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:h,featureState:v,geometry:x,transform:T,pixelsToTileUnits:k,pixelPosMatrix:D}){const N=ax(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-T.bearingInRadians,k),Z=this.paint.get("fill-extrusion-height").evaluate(h,v),X=this.paint.get("fill-extrusion-base").evaluate(h,v),ee=(function(le,fe){const pe=[];for(const ve of le){const Ce=[ve.x,ve.y,0,1];Te(Ce,Ce,fe),pe.push(new u(Ce[0]/Ce[3],Ce[1]/Ce[3]))}return pe})(N,D),oe=(function(le,fe,pe,ve){const Ce=[],Ve=[],Ae=ve[8]*fe,Re=ve[9]*fe,qe=ve[10]*fe,Ge=ve[11]*fe,dt=ve[8]*pe,Dt=ve[9]*pe,Ct=ve[10]*pe,Bt=ve[11]*pe;for(const cn of le){const Ut=[],Mt=[];for(const _t of cn){const _n=_t.x,mn=_t.y,xn=ve[0]*_n+ve[4]*mn+ve[12],dn=ve[1]*_n+ve[5]*mn+ve[13],Ln=ve[2]*_n+ve[6]*mn+ve[14],jr=ve[3]*_n+ve[7]*mn+ve[15],Or=Ln+qe,co=jr+Ge,Ca=xn+dt,ps=dn+Dt,uo=Ln+Ct,Wi=jr+Bt,si=new u((xn+Ae)/co,(dn+Re)/co);si.z=Or/co,Ut.push(si);const Io=new u(Ca/Wi,ps/Wi);Io.z=uo/Wi,Mt.push(Io)}Ce.push(Ut),Ve.push(Mt)}return[Ce,Ve]})(x,X,Z,D);return(function(le,fe,pe){let ve=1/0;ox(pe,fe)&&(ve=ag(pe,fe[0]));for(let Ce=0;Ce<fe.length;Ce++){const Ve=fe[Ce],Ae=le[Ce];for(let Re=0;Re<Ve.length-1;Re++){const qe=Ve[Re],Ge=[qe,Ve[Re+1],Ae[Re+1],Ae[Re],qe];ng(pe,Ge)&&(ve=Math.min(ve,ag(pe,Ge)))}}return ve!==1/0&&ve})(oe[0],oe[1],ee)}}function ca(d,l){return d.x*l.x+d.y*l.y}function ag(d,l){if(d.length===1){let h=0;const v=l[h++];let x;for(;!x||v.equals(x);)if(x=l[h++],!x)return 1/0;for(;h<l.length;h++){const T=l[h],k=d[0],D=x.sub(v),N=T.sub(v),Z=k.sub(v),X=ca(D,D),ee=ca(D,N),oe=ca(N,N),le=ca(Z,D),fe=ca(Z,N),pe=X*oe-ee*ee,ve=(oe*le-ee*fe)/pe,Ce=(X*fe-ee*le)/pe,Ve=v.z*(1-ve-Ce)+x.z*ve+T.z*Ce;if(isFinite(Ve))return Ve}return 1/0}{let h=1/0;for(const v of l)h=Math.min(h,v.z);return h}}const jv=zi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:xl}=jv,uS=zi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:xx}=uS,Xk=Math.cos(Math.PI/180*37.5),Vv=Math.pow(2,14)/.5;class qy{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((h=>{this.gradients[h.id]={}})),this.layoutVertexArray=new He,this.layoutVertexArray2=new Fe,this.indexArray=new gt,this.programConfigurations=new Sh(l.layers,l.zoom),this.segments=new ln,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(l,h,v){this.hasDependencies=Kl("line",this.layers,h)||this.hasLineDasharray(this.layers);const x=this.layers[0].layout.get("line-sort-key"),T=!x.isConstant(),k=[];for(const{feature:D,id:N,index:Z,sourceLayerIndex:X}of l){const ee=this.layers[0]._featureFilter.needGeometry,oe=Yl(D,ee);if(!this.layers[0]._featureFilter.filter(new Xr(this.zoom),oe,v))continue;const le=T?x.evaluate(oe,{},v):void 0,fe={id:N,properties:D.properties,type:D.type,sourceLayerIndex:X,index:Z,geometry:ee?oe.geometry:wu(D),patterns:{},dashes:{},sortKey:le};k.push(fe)}T&&k.sort(((D,N)=>D.sortKey-N.sortKey));for(const D of k){const{geometry:N,index:Z,sourceLayerIndex:X}=D;this.hasDependencies?(Kl("line",this.layers,h)?mx("line",this.layers,D,{zoom:this.zoom},h):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,D,this.zoom,h),this.patternFeatures.push(D)):this.addFeature(D,N,Z,v,{},{},h.subdivisionGranularity),h.featureIndex.insert(l[Z].feature,N,Z,X,this.index)}}update(l,h,v,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,{imagePositions:v,dashPositions:x})}addFeatures(l,h,v,x){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,h,v,x,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,xx)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,xl),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,h,v,x,T,k,D){const N=this.layers[0].layout,Z=N.get("line-join").evaluate(l,{}),X=N.get("line-cap"),ee=N.get("line-miter-limit"),oe=N.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const le of h)this.addLine(le,l,Z,X,ee,oe,x,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,v,{imagePositions:T,dashPositions:k,canonical:x})}addLine(l,h,v,x,T,k,D,N){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=Bd(l,D?N.line.getGranularityForZoomLevel(D.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ae=0;Ae<l.length-1;Ae++)this.totalDistance+=l[Ae].dist(l[Ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Z=Zy.types[h.type]==="Polygon";let X=l.length;for(;X>=2&&l[X-1].equals(l[X-2]);)X--;let ee=0;for(;ee<X-1&&l[ee].equals(l[ee+1]);)ee++;if(X<(Z?3:2))return;v==="bevel"&&(T=1.05);const oe=this.overscaling<=16?122880/(512*this.overscaling):0,le=this.segments.prepareSegment(10*X,this.layoutVertexArray,this.indexArray);let fe,pe,ve,Ce,Ve;this.e1=this.e2=-1,Z&&(fe=l[X-2],Ve=l[ee].sub(fe)._unit()._perp());for(let Ae=ee;Ae<X;Ae++){if(ve=Ae===X-1?Z?l[ee+1]:void 0:l[Ae+1],ve&&l[Ae].equals(ve))continue;Ve&&(Ce=Ve),fe&&(pe=fe),fe=l[Ae],Ve=ve?ve.sub(fe)._unit()._perp():Ce,Ce=Ce||Ve;let Re=Ce.add(Ve);Re.x===0&&Re.y===0||Re._unit();const qe=Ce.x*Ve.x+Ce.y*Ve.y,Ge=Re.x*Ve.x+Re.y*Ve.y,dt=Ge!==0?1/Ge:1/0,Dt=2*Math.sqrt(2-2*Ge),Ct=Ge<Xk&&pe&&ve,Bt=Ce.x*Ve.y-Ce.y*Ve.x>0;if(Ct&&Ae>ee){const Mt=fe.dist(pe);if(Mt>2*oe){const _t=fe.sub(fe.sub(pe)._mult(oe/Mt)._round());this.updateDistance(pe,_t),this.addCurrentVertex(_t,Ce,0,0,le),pe=_t}}const cn=pe&&ve;let Ut=cn?v:Z?"butt":x;if(cn&&Ut==="round"&&(dt<k?Ut="miter":dt<=2&&(Ut="fakeround")),Ut==="miter"&&dt>T&&(Ut="bevel"),Ut==="bevel"&&(dt>2&&(Ut="flipbevel"),dt<T&&(Ut="miter")),pe&&this.updateDistance(pe,fe),Ut==="miter")Re._mult(dt),this.addCurrentVertex(fe,Re,0,0,le);else if(Ut==="flipbevel"){if(dt>100)Re=Ve.mult(-1);else{const Mt=dt*Ce.add(Ve).mag()/Ce.sub(Ve).mag();Re._perp()._mult(Mt*(Bt?-1:1))}this.addCurrentVertex(fe,Re,0,0,le),this.addCurrentVertex(fe,Re.mult(-1),0,0,le)}else if(Ut==="bevel"||Ut==="fakeround"){const Mt=-Math.sqrt(dt*dt-1),_t=Bt?Mt:0,_n=Bt?0:Mt;if(pe&&this.addCurrentVertex(fe,Ce,_t,_n,le),Ut==="fakeround"){const mn=Math.round(180*Dt/Math.PI/20);for(let xn=1;xn<mn;xn++){let dn=xn/mn;if(dn!==.5){const jr=dn-.5;dn+=dn*jr*(dn-1)*((1.0904+qe*(qe*(3.55645-1.43519*qe)-3.2452))*jr*jr+(.848013+qe*(.215638*qe-1.06021)))}const Ln=Ve.sub(Ce)._mult(dn)._add(Ce)._unit()._mult(Bt?-1:1);this.addHalfVertex(fe,Ln.x,Ln.y,!1,Bt,0,le)}}ve&&this.addCurrentVertex(fe,Ve,-_t,-_n,le)}else if(Ut==="butt")this.addCurrentVertex(fe,Re,0,0,le);else if(Ut==="square"){const Mt=pe?1:-1;this.addCurrentVertex(fe,Re,Mt,Mt,le)}else Ut==="round"&&(pe&&(this.addCurrentVertex(fe,Ce,0,0,le),this.addCurrentVertex(fe,Ce,1,1,le,!0)),ve&&(this.addCurrentVertex(fe,Ve,-1,-1,le,!0),this.addCurrentVertex(fe,Ve,0,0,le)));if(Ct&&Ae<X-1){const Mt=fe.dist(ve);if(Mt>2*oe){const _t=fe.add(ve.sub(fe)._mult(oe/Mt)._round());this.updateDistance(fe,_t),this.addCurrentVertex(_t,Ve,0,0,le),fe=_t}}}}addCurrentVertex(l,h,v,x,T,k=!1){const D=h.y*x-h.x,N=-h.y-h.x*x;this.addHalfVertex(l,h.x+h.y*v,h.y-h.x*v,k,!1,v,T),this.addHalfVertex(l,D,N,k,!0,-x,T),this.distance>Vv/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,h,v,x,T,k))}addHalfVertex({x:l,y:h},v,x,T,k,D,N){const Z=.5*(this.lineClips?this.scaledDistance*(Vv-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(T?1:0),(h<<1)+(k?1:0),Math.round(63*v)+128,Math.round(63*x)+128,1+(D===0?0:D<0?-1:1)|(63&Z)<<2,Z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const X=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,X,this.e2),N.primitiveLength++),k?this.e2=X:this.e1=X}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,h){this.distance+=l.dist(h),this.updateScaledDistance()}hasLineDasharray(l){for(const h of l){const v=h.paint.get("line-dasharray");if(v&&!v.isConstant())return!0}return!1}addLineDashDependencies(l,h,v,x){for(const T of l){const k=T.paint.get("line-dasharray");if(!k||k.value.kind==="constant")continue;const D=T.layout.get("line-cap")==="round",N={dasharray:k.value.evaluate({zoom:v-1},h,{}),round:D},Z={dasharray:k.value.evaluate({zoom:v},h,{}),round:D},X={dasharray:k.value.evaluate({zoom:v+1},h,{}),round:D},ee=`${N.dasharray.join(",")},${N.round}`,oe=`${Z.dasharray.join(",")},${Z.round}`,le=`${X.dasharray.join(",")},${X.round}`;x.dashDependencies[ee]=N,x.dashDependencies[oe]=Z,x.dashDependencies[le]=X,h.dashes[T.id]={min:ee,mid:oe,max:le}}}}let Vd,hs;pn("LineBucket",qy,{omit:["layers","patternFeatures"]});var Qd={get paint(){return hs=hs||new _o({"line-opacity":new Tn(ut.paint_line["line-opacity"]),"line-color":new Tn(ut.paint_line["line-color"]),"line-translate":new yn(ut.paint_line["line-translate"]),"line-translate-anchor":new yn(ut.paint_line["line-translate-anchor"]),"line-width":new Tn(ut.paint_line["line-width"]),"line-gap-width":new Tn(ut.paint_line["line-gap-width"]),"line-offset":new Tn(ut.paint_line["line-offset"]),"line-blur":new Tn(ut.paint_line["line-blur"]),"line-dasharray":new ml(ut.paint_line["line-dasharray"]),"line-pattern":new ml(ut.paint_line["line-pattern"]),"line-gradient":new Gm(ut.paint_line["line-gradient"])})},get layout(){return Vd=Vd||new _o({"line-cap":new yn(ut.layout_line["line-cap"]),"line-join":new Tn(ut.layout_line["line-join"]),"line-miter-limit":new yn(ut.layout_line["line-miter-limit"]),"line-round-limit":new yn(ut.layout_line["line-round-limit"]),"line-sort-key":new Tn(ut.layout_line["line-sort-key"])})}};class Wy extends Tn{possiblyEvaluate(l,h){return h=new Xr(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(l,h)}evaluate(l,h,v,x){return h=bt({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(l,h,v,x)}}let Bc;class hS extends Zi{constructor(l,h){super(l,Qd,h),this.gradientVersion=0,Bc||(Bc=new Wy(Qd.paint.properties["line-width"].specification),Bc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!(function(v){return v._styleExpression!==void 0})(h)&&h._styleExpression.expression instanceof uh,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,h){super.recalculate(l,h),this.paint._values["line-floorwidth"]=Bc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new qy(l)}queryRadius(l){const h=l,v=wx(Ld("line-width",this,h),Ld("line-gap-width",this,h)),x=Ld("line-offset",this,h);return v/2+Math.abs(x)+kv(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:h,featureState:v,geometry:x,transform:T,pixelsToTileUnits:k}){const D=ax(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-T.bearingInRadians,k),N=k/2*wx(this.paint.get("line-width").evaluate(h,v),this.paint.get("line-gap-width").evaluate(h,v)),Z=this.paint.get("line-offset").evaluate(h,v);return Z&&(x=(function(X,ee){const oe=[];for(let le=0;le<X.length;le++){const fe=lx(X[le]),pe=[];for(let ve=0;ve<fe.length;ve++){const Ce=fe[ve],Ve=fe[ve-1],Ae=fe[ve+1],Re=ve===0?new u(0,0):Ce.sub(Ve)._unit()._perp(),qe=ve===fe.length-1?new u(0,0):Ae.sub(Ce)._unit()._perp(),Ge=Re._add(qe)._unit(),dt=Ge.x*qe.x+Ge.y*qe.y;dt!==0&&Ge._mult(1/dt),pe.push(Ge._mult(ee)._add(Ce))}oe.push(pe)}return oe})(x,Z*k)),(function(X,ee,oe){for(let le=0;le<ee.length;le++){const fe=ee[le];if(X.length>=3){for(let pe=0;pe<fe.length;pe++)if(Th(X,fe[pe]))return!0}if(ls(X,fe,oe))return!0}return!1})(D,x,N)}isTileClipped(){return!0}}function wx(d,l){return l>0?l+2*d:d}const Yk=zi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Qv=zi([{name:"a_projected_pos",components:3,type:"Float32"}],4);zi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const dS=zi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);zi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const wl=zi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Kk=zi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ol(d,l,h){return d.sections.forEach((v=>{v.text=(function(x,T,k){const D=T.layout.get("text-transform").evaluate(k,{});return D==="uppercase"?x=x.toLocaleUpperCase():D==="lowercase"&&(x=x.toLocaleLowerCase()),pl.applyArabicShaping&&(x=pl.applyArabicShaping(x)),x})(v.text,l,h)})),d}zi([{name:"triangle",components:3,type:"Uint16"}]),zi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),zi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),zi([{type:"Float32",name:"offsetX"}]),zi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),zi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Ko=24;const Hy={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},$I={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},lp={40:!0};function Uv(d,l,h,v,x,T){if("fontStack"in l){const k=h[l.fontStack],D=k&&k[d];return D?D.metrics.advance*l.scale+x:0}{const k=v[l.imageName];return k?k.displaySize[0]*l.scale*Ko/T+x:0}}function Ox(d,l,h,v){const x=Math.pow(d-l,2);return v?d<l?x/2:2*x:x+Math.abs(h)*h}function Gy(d,l,h){let v=0;return d===10&&(v-=1e4),h&&(v+=150),d!==40&&d!==65288||(v+=50),l!==41&&l!==65289||(v+=50),v}function fS(d,l,h,v,x,T){let k=null,D=Ox(l,h,x,T);for(const N of v){const Z=Ox(l-N.x,h,x,T)+N.badness;Z<=D&&(k=N,D=Z)}return{index:d,x:l,priorBreak:k,badness:D}}function pS(d){return d?pS(d.priorBreak).concat(d.index):[]}class lg{constructor(l="",h=[],v=[]){this.text=l,this.sections=h,this.sectionIndex=v,this.imageSectionID=null}static fromFeature(l,h){const v=new lg;for(let x=0;x<l.sections.length;x++){const T=l.sections[x];T.image?v.addImageSection(T):v.addTextSection(T,h)}return v}length(){return[...this.text].length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}verticalizePunctuation(){this.text=(function(l){let h="",v={premature:!0,value:void 0};const x=l[Symbol.iterator]();let T=x.next();const k=l[Symbol.iterator]();k.next();let D=k.next();for(;!T.done;)h+=!D.done&&Ic(D.value.codePointAt(0))&&!Hy[D.value]||!v.premature&&Ic(v.value.codePointAt(0))&&!Hy[v.value]||!Hy[T.value]?T.value:Hy[T.value],v={value:T.value,premature:!1},T=x.next(),D=k.next();return h})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const l=this.text.match(/^\s*/),h=l?l[0].length:0,v=this.text.match(/\S\s*$/),x=v?v[0].length-1:0;this.text=this.text.substring(h,this.text.length-x),this.sectionIndex=this.sectionIndex.slice(h,this.sectionIndex.length-x)}substring(l,h){const v=[...this.text].slice(l,h).join(""),x=this.sectionIndex.slice(l,h);return new lg(v,this.sections,x)}toCodeUnitIndex(l){return[...this.text].slice(0,l).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((l,h)=>Math.max(l,this.sections[h].scale)),0)}getMaxImageSize(l){let h=0,v=0;for(let x=0;x<this.length();x++){const T=this.getSection(x);if("imageName"in T){const k=l[T.imageName];if(!k)continue;const D=k.displaySize;h=Math.max(h,D[0]),v=Math.max(v,D[1])}}return{maxImageWidth:h,maxImageHeight:v}}addTextSection(l,h){this.text+=l.text,this.sections.push({scale:l.scale||1,verticalAlign:l.verticalAlign||"bottom",fontStack:l.fontStack||h});const v=this.sections.length-1;this.sectionIndex.push(...[...l.text].map((()=>v)))}addImageSection(l){const h=l.image?l.image.name:"";if(h.length===0)return void rn("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push({scale:1,verticalAlign:l.verticalAlign||"bottom",imageName:h}),this.sectionIndex.push(this.sections.length-1)):rn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(l,h,v,x,T){const k=[],D=this.determineAverageLineWidth(l,h,v,x,T),N=this.hasZeroWidthSpaces();let Z=0,X=0;const ee=this.text[Symbol.iterator]();let oe=ee.next();const le=this.text[Symbol.iterator]();le.next();let fe=le.next();const pe=this.text[Symbol.iterator]();pe.next(),pe.next();let ve=pe.next();for(;!oe.done;){const Ce=this.getSection(X),Ve=oe.value.codePointAt(0);if(Um(Ve)||(Z+=Uv(Ve,Ce,v,x,l,T)),!fe.done){const Ae=Pc(Ve),Re=fe.value.codePointAt(0);($I[Ve]||Ae||"imageName"in Ce||!ve.done&&lp[Re])&&k.push(fS(X+1,Z,D,k,Gy(Ve,Re,Ae&&N),!1))}X++,oe=ee.next(),fe=le.next(),ve=pe.next()}return pS(fS(this.length(),Z,D,k,0,!0))}determineAverageLineWidth(l,h,v,x,T){let k=0,D=0;for(const N of this.text){const Z=this.getSection(D);k+=Uv(N.codePointAt(0),Z,v,x,l,T),D++}return k/Math.max(1,Math.ceil(k/h))}}const Sx=4294967296,Zv=1/Sx,Cx=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Tx{constructor(l=new Uint8Array(16)){this.buf=ArrayBuffer.isView(l)?l:new Uint8Array(l),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(l,h,v=this.length){for(;this.pos<v;){const x=this.readVarint(),T=x>>3,k=this.pos;this.type=7&x,l(T,h,this),this.pos===k&&this.skip(x)}return h}readMessage(l,h){return this.readFields(l,h,this.readVarint()+this.pos)}readFixed32(){const l=this.dataView.getUint32(this.pos,!0);return this.pos+=4,l}readSFixed32(){const l=this.dataView.getInt32(this.pos,!0);return this.pos+=4,l}readFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Sx;return this.pos+=8,l}readSFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Sx;return this.pos+=8,l}readFloat(){const l=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,l}readDouble(){const l=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,l}readVarint(l){const h=this.buf;let v,x;return x=h[this.pos++],v=127&x,x<128?v:(x=h[this.pos++],v|=(127&x)<<7,x<128?v:(x=h[this.pos++],v|=(127&x)<<14,x<128?v:(x=h[this.pos++],v|=(127&x)<<21,x<128?v:(x=h[this.pos],v|=(15&x)<<28,(function(T,k,D){const N=D.buf;let Z,X;if(X=N[D.pos++],Z=(112&X)>>4,X<128||(X=N[D.pos++],Z|=(127&X)<<3,X<128)||(X=N[D.pos++],Z|=(127&X)<<10,X<128)||(X=N[D.pos++],Z|=(127&X)<<17,X<128)||(X=N[D.pos++],Z|=(127&X)<<24,X<128)||(X=N[D.pos++],Z|=(1&X)<<31,X<128))return Xy(T,Z,k);throw new Error("Expected varint not more than 10 bytes")})(v,l,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const l=this.readVarint();return l%2==1?(l+1)/-2:l/2}readBoolean(){return!!this.readVarint()}readString(){const l=this.readVarint()+this.pos,h=this.pos;return this.pos=l,l-h>=12&&Cx?Cx.decode(this.buf.subarray(h,l)):(function(v,x,T){let k="",D=x;for(;D<T;){const N=v[D];let Z,X,ee,oe=null,le=N>239?4:N>223?3:N>191?2:1;if(D+le>T)break;le===1?N<128&&(oe=N):le===2?(Z=v[D+1],(192&Z)==128&&(oe=(31&N)<<6|63&Z,oe<=127&&(oe=null))):le===3?(Z=v[D+1],X=v[D+2],(192&Z)==128&&(192&X)==128&&(oe=(15&N)<<12|(63&Z)<<6|63&X,(oe<=2047||oe>=55296&&oe<=57343)&&(oe=null))):le===4&&(Z=v[D+1],X=v[D+2],ee=v[D+3],(192&Z)==128&&(192&X)==128&&(192&ee)==128&&(oe=(15&N)<<18|(63&Z)<<12|(63&X)<<6|63&ee,(oe<=65535||oe>=1114112)&&(oe=null))),oe===null?(oe=65533,le=1):oe>65535&&(oe-=65536,k+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|1023&oe),k+=String.fromCharCode(oe),D+=le}return k})(this.buf,h,l)}readBytes(){const l=this.readVarint()+this.pos,h=this.buf.subarray(this.pos,l);return this.pos=l,h}readPackedVarint(l=[],h){const v=this.readPackedEnd();for(;this.pos<v;)l.push(this.readVarint(h));return l}readPackedSVarint(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readSVarint());return l}readPackedBoolean(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readBoolean());return l}readPackedFloat(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readFloat());return l}readPackedDouble(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readDouble());return l}readPackedFixed32(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readFixed32());return l}readPackedSFixed32(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readSFixed32());return l}readPackedFixed64(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readFixed64());return l}readPackedSFixed64(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readSFixed64());return l}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(l){const h=7&l;if(h===0)for(;this.buf[this.pos++]>127;);else if(h===2)this.pos=this.readVarint()+this.pos;else if(h===5)this.pos+=4;else{if(h!==1)throw new Error(`Unimplemented type: ${h}`);this.pos+=8}}writeTag(l,h){this.writeVarint(l<<3|h)}realloc(l){let h=this.length||16;for(;h<this.pos+l;)h*=2;if(h!==this.length){const v=new Uint8Array(h);v.set(this.buf),this.buf=v,this.dataView=new DataView(v.buffer),this.length=h}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeSFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*Zv),!0),this.pos+=8}writeSFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*Zv),!0),this.pos+=8}writeVarint(l){(l=+l||0)>268435455||l<0?(function(h,v){let x,T;if(h>=0?(x=h%4294967296|0,T=h/4294967296|0):(x=~(-h%4294967296),T=~(-h/4294967296),4294967295^x?x=x+1|0:(x=0,T=T+1|0)),h>=18446744073709552e3||h<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");v.realloc(10),(function(k,D,N){N.buf[N.pos++]=127&k|128,k>>>=7,N.buf[N.pos++]=127&k|128,k>>>=7,N.buf[N.pos++]=127&k|128,k>>>=7,N.buf[N.pos++]=127&k|128,N.buf[N.pos]=127&(k>>>=7)})(x,0,v),(function(k,D){const N=(7&k)<<4;D.buf[D.pos++]|=N|((k>>>=3)?128:0),k&&(D.buf[D.pos++]=127&k|((k>>>=7)?128:0),k&&(D.buf[D.pos++]=127&k|((k>>>=7)?128:0),k&&(D.buf[D.pos++]=127&k|((k>>>=7)?128:0),k&&(D.buf[D.pos++]=127&k|((k>>>=7)?128:0),k&&(D.buf[D.pos++]=127&k)))))})(T,v)})(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))}writeSVarint(l){this.writeVarint(l<0?2*-l-1:2*l)}writeBoolean(l){this.writeVarint(+l)}writeString(l){l=String(l),this.realloc(4*l.length),this.pos++;const h=this.pos;this.pos=(function(x,T,k){for(let D,N,Z=0;Z<T.length;Z++){if(D=T.charCodeAt(Z),D>55295&&D<57344){if(!N){D>56319||Z+1===T.length?(x[k++]=239,x[k++]=191,x[k++]=189):N=D;continue}if(D<56320){x[k++]=239,x[k++]=191,x[k++]=189,N=D;continue}D=N-55296<<10|D-56320|65536,N=null}else N&&(x[k++]=239,x[k++]=191,x[k++]=189,N=null);D<128?x[k++]=D:(D<2048?x[k++]=D>>6|192:(D<65536?x[k++]=D>>12|224:(x[k++]=D>>18|240,x[k++]=D>>12&63|128),x[k++]=D>>6&63|128),x[k++]=63&D|128)}return k})(this.buf,l,this.pos);const v=this.pos-h;v>=128&&Jk(h,v,this),this.pos=h-1,this.writeVarint(v),this.pos+=v}writeFloat(l){this.realloc(4),this.dataView.setFloat32(this.pos,l,!0),this.pos+=4}writeDouble(l){this.realloc(8),this.dataView.setFloat64(this.pos,l,!0),this.pos+=8}writeBytes(l){const h=l.length;this.writeVarint(h),this.realloc(h);for(let v=0;v<h;v++)this.buf[this.pos++]=l[v]}writeRawMessage(l,h){this.pos++;const v=this.pos;l(h,this);const x=this.pos-v;x>=128&&Jk(v,x,this),this.pos=v-1,this.writeVarint(x),this.pos+=x}writeMessage(l,h,v){this.writeTag(l,2),this.writeRawMessage(h,v)}writePackedVarint(l,h){h.length&&this.writeMessage(l,eE,h)}writePackedSVarint(l,h){h.length&&this.writeMessage(l,tE,h)}writePackedBoolean(l,h){h.length&&this.writeMessage(l,nE,h)}writePackedFloat(l,h){h.length&&this.writeMessage(l,Yy,h)}writePackedDouble(l,h){h.length&&this.writeMessage(l,kx,h)}writePackedFixed32(l,h){h.length&&this.writeMessage(l,rE,h)}writePackedSFixed32(l,h){h.length&&this.writeMessage(l,iE,h)}writePackedFixed64(l,h){h.length&&this.writeMessage(l,oE,h)}writePackedSFixed64(l,h){h.length&&this.writeMessage(l,sE,h)}writeBytesField(l,h){this.writeTag(l,2),this.writeBytes(h)}writeFixed32Field(l,h){this.writeTag(l,5),this.writeFixed32(h)}writeSFixed32Field(l,h){this.writeTag(l,5),this.writeSFixed32(h)}writeFixed64Field(l,h){this.writeTag(l,1),this.writeFixed64(h)}writeSFixed64Field(l,h){this.writeTag(l,1),this.writeSFixed64(h)}writeVarintField(l,h){this.writeTag(l,0),this.writeVarint(h)}writeSVarintField(l,h){this.writeTag(l,0),this.writeSVarint(h)}writeStringField(l,h){this.writeTag(l,2),this.writeString(h)}writeFloatField(l,h){this.writeTag(l,5),this.writeFloat(h)}writeDoubleField(l,h){this.writeTag(l,1),this.writeDouble(h)}writeBooleanField(l,h){this.writeVarintField(l,+h)}}function Xy(d,l,h){return h?4294967296*l+(d>>>0):4294967296*(l>>>0)+(d>>>0)}function Jk(d,l,h){const v=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));h.realloc(v);for(let x=h.pos-1;x>=d;x--)h.buf[x+v]=h.buf[x]}function eE(d,l){for(let h=0;h<d.length;h++)l.writeVarint(d[h])}function tE(d,l){for(let h=0;h<d.length;h++)l.writeSVarint(d[h])}function Yy(d,l){for(let h=0;h<d.length;h++)l.writeFloat(d[h])}function kx(d,l){for(let h=0;h<d.length;h++)l.writeDouble(d[h])}function nE(d,l){for(let h=0;h<d.length;h++)l.writeBoolean(d[h])}function rE(d,l){for(let h=0;h<d.length;h++)l.writeFixed32(d[h])}function iE(d,l){for(let h=0;h<d.length;h++)l.writeSFixed32(d[h])}function oE(d,l){for(let h=0;h<d.length;h++)l.writeFixed64(d[h])}function sE(d,l){for(let h=0;h<d.length;h++)l.writeSFixed64(d[h])}function aE(d,l,h){d===1&&h.readMessage(Ex,l)}function Ex(d,l,h){if(d===3){const{id:v,bitmap:x,width:T,height:k,left:D,top:N,advance:Z}=h.readMessage(lE,{});l.push({id:v,bitmap:new Pv({width:T+6,height:k+6},x),metrics:{width:T,height:k,left:D,top:N,advance:Z}})}}function lE(d,l,h){d===1?l.id=h.readVarint():d===2?l.bitmap=h.readBytes():d===3?l.width=h.readVarint():d===4?l.height=h.readVarint():d===5?l.left=h.readSVarint():d===6?l.top=h.readSVarint():d===7&&(l.advance=h.readVarint())}function mS(d){let l=0,h=0;for(const k of d)l+=k.w*k.h,h=Math.max(h,k.w);d.sort(((k,D)=>D.h-k.h));const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),h),h:1/0}];let x=0,T=0;for(const k of d)for(let D=v.length-1;D>=0;D--){const N=v[D];if(!(k.w>N.w||k.h>N.h)){if(k.x=N.x,k.y=N.y,T=Math.max(T,k.y+k.h),x=Math.max(x,k.x+k.w),k.w===N.w&&k.h===N.h){const Z=v.pop();Z&&D<v.length&&(v[D]=Z)}else k.h===N.h?(N.x+=k.w,N.w-=k.w):k.w===N.w?(N.y+=k.h,N.h-=k.h):(v.push({x:N.x+k.w,y:N.y,w:N.w-k.w,h:k.h}),N.y+=k.h,N.h-=k.h);break}}return{w:x,h:T,fill:l/(x*T)||0}}class pi{constructor(l,{pixelRatio:h,version:v,stretchX:x,stretchY:T,content:k,textFitWidth:D,textFitHeight:N}){this.paddedRect=l,this.pixelRatio=h,this.stretchX=x,this.stretchY=T,this.content=k,this.version=v,this.textFitWidth=D,this.textFitHeight=N}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Ax{constructor(l,h){const v={},x={};this.haveRenderCallbacks=[];const T=[];this.addImages(l,v,T),this.addImages(h,x,T);const{w:k,h:D}=mS(T),N=new xa({width:k||1,height:D||1});for(const Z in l){const X=l[Z],ee=v[Z].paddedRect;xa.copy(X.data,N,{x:0,y:0},{x:ee.x+1,y:ee.y+1},X.data)}for(const Z in h){const X=h[Z],ee=x[Z].paddedRect,oe=ee.x+1,le=ee.y+1,fe=X.data.width,pe=X.data.height;xa.copy(X.data,N,{x:0,y:0},{x:oe,y:le},X.data),xa.copy(X.data,N,{x:0,y:pe-1},{x:oe,y:le-1},{width:fe,height:1}),xa.copy(X.data,N,{x:0,y:0},{x:oe,y:le+pe},{width:fe,height:1}),xa.copy(X.data,N,{x:fe-1,y:0},{x:oe-1,y:le},{width:1,height:pe}),xa.copy(X.data,N,{x:0,y:0},{x:oe+fe,y:le},{width:1,height:pe})}this.image=N,this.iconPositions=v,this.patternPositions=x}addImages(l,h,v){for(const x in l){const T=l[x],k={x:0,y:0,w:T.data.width+2,h:T.data.height+2};v.push(k),h[x]=new pi(k,T),T.hasRenderCallback&&this.haveRenderCallbacks.push(x)}}patchUpdatedImages(l,h){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in l.updatedImages)this.patchUpdatedImage(this.iconPositions[v],l.getImage(v),h),this.patchUpdatedImage(this.patternPositions[v],l.getImage(v),h)}patchUpdatedImage(l,h,v){if(!l||!h||l.version===h.version)return;l.version=h.version;const[x,T]=l.tl;v.update(h.data,void 0,{x,y:T})}}var cp;function qv(d,l,h,v,x,T,k,D,N,Z,X,ee,oe,le,fe){const pe=lg.fromFeature(d,x);let ve;ee===a.az.vertical&&pe.verticalizePunctuation();let Ce=pe.determineLineBreaks(Z,T,l,v,le);const{processBidirectionalText:Ve,processStyledBidirectionalText:Ae}=pl;if(Ve&&pe.sections.length===1){ve=[],Ce=Ce.map((dt=>pe.toCodeUnitIndex(dt)));const Ge=Ve(pe.toString(),Ce);for(const dt of Ge){const Dt=[...dt].map((()=>0));ve.push(new lg(dt,pe.sections,Dt))}}else if(Ae){ve=[],Ce=Ce.map((Ct=>pe.toCodeUnitIndex(Ct)));let Ge=0;const dt=[];for(const Ct of pe.text)dt.push(...Array(Ct.length).fill(pe.sectionIndex[Ge])),Ge++;const Dt=Ae(pe.text,dt,Ce);for(const Ct of Dt){const Bt=[];let cn="";for(const Ut of Ct[0])Bt.push(Ct[1][cn.length]),cn+=Ut;ve.push(new lg(Ct[0],pe.sections,Bt))}}else ve=(function(Ge,dt){const Dt=[];let Ct=0;for(const Bt of dt)Dt.push(Ge.substring(Ct,Bt)),Ct=Bt;return Ct<Ge.length()&&Dt.push(Ge.substring(Ct,Ge.length())),Dt})(pe,Ce);const Re=[],qe={positionedLines:Re,text:pe.toString(),top:X[1],bottom:X[1],left:X[0],right:X[0],writingMode:ee,iconsInText:!1,verticalizable:!1};return(function(Ge,dt,Dt,Ct,Bt,cn,Ut,Mt,_t,_n,mn,xn){let dn=0,Ln=0,jr=0,Or=0;const co=Mt==="right"?1:Mt==="left"?0:.5,Ca=Ko/xn;let ps=0;for(const si of Bt){si.trim();const Io=si.getMaxScale(),Vo={positionedGlyphs:[],lineOffset:0};Ge.positionedLines[ps]=Vo;const Fi=Vo.positionedGlyphs;let tc=0;if(!si.length()){Ln+=cn,++ps;continue}const Ta=zI(Ct,si,Ca);let nc=0;for(const Fs of si.text){const xo=si.getSection(nc),ms=Fs.codePointAt(0),Do=Px(_t,mn,ms),js={glyph:ms,imageName:null,x:dn,y:Ln+-17,vertical:Do,scale:1,fontStack:"",sectionIndex:si.getSectionIndex(nc),metrics:null,rect:null};let dg;if("fontStack"in xo){if(dg=Ky(xo,ms,Do,Ta,dt,Dt),!dg)continue;js.fontStack=xo.fontStack}else{if(Ge.iconsInText=!0,xo.scale*=Ca,dg=yS(xo,Do,Io,Ta,Ct),!dg)continue;tc=Math.max(tc,dg.imageOffset),js.imageName=xo.imageName}const{rect:Gd,metrics:YS,baselineOffset:l0}=dg;js.y+=l0,js.scale=xo.scale,js.metrics=YS,js.rect=Gd,Fi.push(js),Do?(Ge.verticalizable=!0,dn+=("imageName"in xo?YS.advance:Ko)*xo.scale+_n):dn+=YS.advance*xo.scale+_n,nc++}Fi.length!==0&&(jr=Math.max(dn-_n,jr),Mx(Fi,0,Fi.length-1,co)),dn=0,Vo.lineOffset=Math.max(tc,(Io-1)*Ko);const Rh=cn*Io+tc;Ln+=Rh,Or=Math.max(Rh,Or),++ps}const{horizontalAlign:uo,verticalAlign:Wi}=gS(Ut);(function(si,Io,Vo,Fi,tc,Ta,nc,Rh,Fs){const xo=(Io-Vo)*tc;let ms=0;ms=Ta!==nc?-Rh*Fi- -17:-Fi*Fs*nc+.5*nc;for(const Do of si)for(const js of Do.positionedGlyphs)js.x+=xo,js.y+=ms})(Ge.positionedLines,co,uo,Wi,jr,Or,cn,Ln,Bt.length),Ge.top+=-Wi*Ln,Ge.bottom=Ge.top+Ln,Ge.left+=-uo*jr,Ge.right=Ge.left+jr})(qe,l,h,v,ve,k,D,N,ee,Z,oe,fe),!(function(Ge){for(const dt of Ge)if(dt.positionedGlyphs.length!==0)return!1;return!0})(Re)&&qe}function gS(d){let l=.5,h=.5;switch(d){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:l,verticalAlign:h}}function zI(d,l,h){const v=l.getMaxScale()*Ko,{maxImageWidth:x,maxImageHeight:T}=l.getMaxImageSize(d),k=Math.max(v,T*h);return{verticalLineContentWidth:Math.max(v,x*h),horizontalLineContentHeight:k}}function cE(d){switch(d){case"top":return 0;case"center":return .5;default:return 1}}function Px(d,l,h){return!(d===a.az.horizontal||!l&&!kd(h)||l&&(Um(h)||(v=h,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(v)))));var v}function Ky(d,l,h,v,x,T){const k=T[d.fontStack],D=(function(Z,X,ee,oe){if(Z&&Z.rect)return Z;const le=X[ee.fontStack],fe=le&&le[oe];return fe?{rect:null,metrics:fe.metrics}:null})(k&&k[l],x,d,l);if(D===null)return null;let N;if(h)N=v.verticalLineContentWidth-d.scale*Ko;else{const Z=cE(d.verticalAlign);N=(v.horizontalLineContentHeight-d.scale*Ko)*Z}return{rect:D.rect,metrics:D.metrics,baselineOffset:N}}function yS(d,l,h,v,x){const T=x[d.imageName];if(!T)return null;const k=T.paddedRect,D=T.displaySize,N={width:D[0],height:D[1],left:1,top:-3,advance:l?D[1]:D[0]};let Z;if(l)Z=v.verticalLineContentWidth-D[1]*d.scale;else{const X=cE(d.verticalAlign);Z=(v.horizontalLineContentHeight-D[1]*d.scale)*X}return{rect:k,metrics:N,baselineOffset:Z,imageOffset:(l?D[0]:D[1])*d.scale-Ko*h}}function Mx(d,l,h,v){if(v===0)return;const x=d[h],T=(d[h].x+x.metrics.advance*x.scale)*v;for(let k=l;k<=h;k++)d[k].x-=T}function vS(d,l,h){const{horizontalAlign:v,verticalAlign:x}=gS(h),T=l[0]-d.displaySize[0]*v,k=l[1]-d.displaySize[1]*x;return{image:d,top:k,bottom:k+d.displaySize[1],left:T,right:T+d.displaySize[0]}}function Ud(d){var l,h;let v=d.left,x=d.top,T=d.right-v,k=d.bottom-x;const D=(l=d.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",N=(h=d.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",Z=(d.image.content[2]-d.image.content[0])/(d.image.content[3]-d.image.content[1]);if(N==="proportional"){if(D==="stretchOnly"&&T/k<Z||D==="proportional"){const X=Math.ceil(k*Z);v*=X/T,T=X}}else if(D==="proportional"&&N==="stretchOnly"&&Z!==0&&T/k>Z){const X=Math.ceil(T/Z);x*=X/k,k=X}return{x1:v,y1:x,x2:v+T,y2:x+k}}function Cu(d,l,h,v,x,T){const k=d.image;let D;if(k.content){const ve=k.content,Ce=k.pixelRatio||1;D=[ve[0]/Ce,ve[1]/Ce,k.displaySize[0]-ve[2]/Ce,k.displaySize[1]-ve[3]/Ce]}const N=l.left*T,Z=l.right*T;let X,ee,oe,le;h==="width"||h==="both"?(le=x[0]+N-v[3],ee=x[0]+Z+v[1]):(le=x[0]+(N+Z-k.displaySize[0])/2,ee=le+k.displaySize[0]);const fe=l.top*T,pe=l.bottom*T;return h==="height"||h==="both"?(X=x[1]+fe-v[0],oe=x[1]+pe+v[2]):(X=x[1]+(fe+pe-k.displaySize[1])/2,oe=X+k.displaySize[1]),{image:k,top:X,right:ee,bottom:oe,left:le,collisionPadding:D}}pn("ImagePosition",pi),pn("ImageAtlas",Ax),a.az=void 0,(cp=a.az||(a.az={}))[cp.none=0]="none",cp[cp.horizontal=1]="horizontal",cp[cp.vertical=2]="vertical",cp[cp.horizontalOnly=3]="horizontalOnly";const Jl=128,up=32640;function _S(d,l){const{expression:h}=l;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new Xr(d+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:x}=h;let T=0;for(;T<v.length&&v[T]<=d;)T++;T=Math.max(0,T-1);let k=T;for(;k<v.length&&v[k]<d+1;)k++;k=Math.min(v.length-1,k);const D=v[T],N=v[k];return h.kind==="composite"?{kind:"composite",minZoom:D,maxZoom:N,interpolationType:x}:{kind:"camera",minZoom:D,maxZoom:N,minSize:h.evaluate(new Xr(D)),maxSize:h.evaluate(new Xr(N)),interpolationType:x}}}function Rx(d,l,h){let v="never";const x=d.get(l);return x?v=x:d.get(h)&&(v="always"),v}const uE=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wv(d,l,h,v,x,T,k,D,N,Z,X,ee,oe){const le=D?Math.min(up,Math.round(D[0])):0,fe=D?Math.min(up,Math.round(D[1])):0;d.emplaceBack(l,h,Math.round(32*v),Math.round(32*x),T,k,(le<<1)+(N?1:0),fe,16*Z,16*X,256*ee,256*oe)}function bS(d,l,h){d.emplaceBack(l.x,l.y,h),d.emplaceBack(l.x,l.y,h),d.emplaceBack(l.x,l.y,h),d.emplaceBack(l.x,l.y,h)}function xS(d){for(const l of d.sections)if(gu(l.text))return!0;return!1}class Ix{constructor(l){this.layoutVertexArray=new Ze,this.indexArray=new gt,this.programConfigurations=l,this.segments=new ln,this.dynamicLayoutVertexArray=new nt,this.opacityVertexArray=new yt,this.hasVisibleVertices=!1,this.placedSymbolArray=new L}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,h,v,x){this.isEmpty()||(v&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Yk.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,Qv.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,uE,!0),this.opacityVertexBuffer.itemSize=1),(v||x)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}pn("SymbolBuffers",Ix);class Dx{constructor(l,h,v){this.layoutVertexArray=new l,this.layoutAttributes=h,this.indexArray=new v,this.segments=new ln,this.collisionVertexArray=new pt}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,dS.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}pn("CollisionBuffers",Dx);class Jy{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((k=>k.id)),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_S(this.zoom,h["text-size"]),this.iconSizeData=_S(this.zoom,h["icon-size"]);const v=this.layers[0].layout,x=v.get("symbol-sort-key"),T=v.get("symbol-z-order");this.canOverlap=Rx(v,"text-overlap","text-allow-overlap")!=="never"||Rx(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=T!=="viewport-y"&&!x.isConstant(),this.sortFeaturesByY=(T==="viewport-y"||T==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map((k=>a.az[k]))),this.stateDependentLayerIds=this.layers.filter((k=>k.isStateDependent())).map((k=>k.id)),this.sourceID=l.sourceID}createArrays(){this.text=new Ix(new Sh(this.layers,this.zoom,(l=>/^text/.test(l)))),this.icon=new Ix(new Sh(this.layers,this.zoom,(l=>/^icon/.test(l)))),this.glyphOffsetArray=new K,this.lineVertexArray=new te,this.symbolInstances=new W,this.textAnchorOffsets=new ue}calculateGlyphDependencies(l,h,v,x,T){for(const k of l)if(h[k.codePointAt(0)]=!0,(v||x)&&T){const D=Hy[k];D&&(h[D.codePointAt(0)]=!0)}}populate(l,h,v){const x=this.layers[0],T=x.layout,k=T.get("text-font"),D=T.get("text-field"),N=T.get("icon-image"),Z=(D.value.kind!=="constant"||D.value.value instanceof Ho&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),X=N.value.kind!=="constant"||!!N.value.value||Object.keys(N.parameters).length>0,ee=T.get("symbol-sort-key");if(this.features=[],!Z&&!X)return;const oe=h.iconDependencies,le=h.glyphDependencies,fe=h.availableImages,pe=new Xr(this.zoom);for(const{feature:ve,id:Ce,index:Ve,sourceLayerIndex:Ae}of l){const Re=x._featureFilter.needGeometry,qe=Yl(ve,Re);if(!x._featureFilter.filter(pe,qe,v))continue;let Ge,dt;if(Re||(qe.geometry=wu(ve)),Z){const Ct=x.getValueAndResolveTokens("text-field",qe,v,fe),Bt=Ho.factory(Ct),cn=this.hasRTLText=this.hasRTLText||xS(Bt);(!cn||pl.getRTLTextPluginStatus()==="unavailable"||cn&&pl.isParsed())&&(Ge=Ol(Bt,x,qe))}if(X){const Ct=x.getValueAndResolveTokens("icon-image",qe,v,fe);dt=Ct instanceof ra?Ct:ra.fromString(Ct)}if(!Ge&&!dt)continue;const Dt=this.sortFeaturesByKey?ee.evaluate(qe,{},v):void 0;if(this.features.push({id:Ce,text:Ge,icon:dt,index:Ve,sourceLayerIndex:Ae,geometry:qe.geometry,properties:ve.properties,type:Zy.types[ve.type],sortKey:Dt}),dt&&(oe[dt.name]=!0),Ge){const Ct=k.evaluate(qe,{},v).join(","),Bt=T.get("text-rotation-alignment")!=="viewport"&&T.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.az.vertical)>=0;for(const cn of Ge.sections)if(cn.image)oe[cn.image.name]=!0;else{const Ut=Mc(Ge.toString()),Mt=cn.fontStack||Ct,_t=le[Mt]=le[Mt]||{};this.calculateGlyphDependencies(cn.text,_t,Bt,this.allowVerticalPlacement,Ut)}}}T.get("symbol-placement")==="line"&&(this.features=(function(ve){const Ce={},Ve={},Ae=[];let Re=0;function qe(Ct){Ae.push(ve[Ct]),Re++}function Ge(Ct,Bt,cn){const Ut=Ve[Ct];return delete Ve[Ct],Ve[Bt]=Ut,Ae[Ut].geometry[0].pop(),Ae[Ut].geometry[0]=Ae[Ut].geometry[0].concat(cn[0]),Ut}function dt(Ct,Bt,cn){const Ut=Ce[Bt];return delete Ce[Bt],Ce[Ct]=Ut,Ae[Ut].geometry[0].shift(),Ae[Ut].geometry[0]=cn[0].concat(Ae[Ut].geometry[0]),Ut}function Dt(Ct,Bt,cn){const Ut=cn?Bt[0][Bt[0].length-1]:Bt[0][0];return`${Ct}:${Ut.x}:${Ut.y}`}for(let Ct=0;Ct<ve.length;Ct++){const Bt=ve[Ct],cn=Bt.geometry,Ut=Bt.text?Bt.text.toString():null;if(!Ut){qe(Ct);continue}const Mt=Dt(Ut,cn),_t=Dt(Ut,cn,!0);if(Mt in Ve&&_t in Ce&&Ve[Mt]!==Ce[_t]){const _n=dt(Mt,_t,cn),mn=Ge(Mt,_t,Ae[_n].geometry);delete Ce[Mt],delete Ve[_t],Ve[Dt(Ut,Ae[mn].geometry,!0)]=mn,Ae[_n].geometry=null}else Mt in Ve?Ge(Mt,_t,cn):_t in Ce?dt(Mt,_t,cn):(qe(Ct),Ce[Mt]=Re-1,Ve[_t]=Re-1)}return Ae.filter((Ct=>Ct.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ve,Ce)=>ve.sortKey-Ce.sortKey))}update(l,h,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,h,this.layers,{imagePositions:v}),this.icon.programConfigurations.updatePaintArrays(l,h,this.layers,{imagePositions:v}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,h){const v=this.lineVertexArray.length;if(l.segment!==void 0){let x=l.dist(h[l.segment+1]),T=l.dist(h[l.segment]);const k={};for(let D=l.segment+1;D<h.length;D++)k[D]={x:h[D].x,y:h[D].y,tileUnitDistanceFromAnchor:x},D<h.length-1&&(x+=h[D+1].dist(h[D]));for(let D=l.segment||0;D>=0;D--)k[D]={x:h[D].x,y:h[D].y,tileUnitDistanceFromAnchor:T},D>0&&(T+=h[D-1].dist(h[D]));for(let D=0;D<h.length;D++){const N=k[D];this.lineVertexArray.emplaceBack(N.x,N.y,N.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(l,h,v,x,T,k,D,N,Z,X,ee,oe){const le=l.indexArray,fe=l.layoutVertexArray,pe=l.segments.prepareSegment(4*h.length,fe,le,this.canOverlap?k.sortKey:void 0),ve=this.glyphOffsetArray.length,Ce=pe.vertexLength,Ve=this.allowVerticalPlacement&&D===a.az.vertical?Math.PI/2:0,Ae=k.text&&k.text.sections;for(let Re=0;Re<h.length;Re++){const{tl:qe,tr:Ge,bl:dt,br:Dt,tex:Ct,pixelOffsetTL:Bt,pixelOffsetBR:cn,minFontScaleX:Ut,minFontScaleY:Mt,glyphOffset:_t,isSDF:_n,sectionIndex:mn}=h[Re],xn=pe.vertexLength,dn=_t[1];Wv(fe,N.x,N.y,qe.x,dn+qe.y,Ct.x,Ct.y,v,_n,Bt.x,Bt.y,Ut,Mt),Wv(fe,N.x,N.y,Ge.x,dn+Ge.y,Ct.x+Ct.w,Ct.y,v,_n,cn.x,Bt.y,Ut,Mt),Wv(fe,N.x,N.y,dt.x,dn+dt.y,Ct.x,Ct.y+Ct.h,v,_n,Bt.x,cn.y,Ut,Mt),Wv(fe,N.x,N.y,Dt.x,dn+Dt.y,Ct.x+Ct.w,Ct.y+Ct.h,v,_n,cn.x,cn.y,Ut,Mt),bS(l.dynamicLayoutVertexArray,N,Ve),le.emplaceBack(xn,xn+2,xn+1),le.emplaceBack(xn+1,xn+2,xn+3),pe.vertexLength+=4,pe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(_t[0]),Re!==h.length-1&&mn===h[Re+1].sectionIndex||l.programConfigurations.populatePaintArrays(fe.length,k,k.index,{imagePositions:{},canonical:oe,formattedSection:Ae&&Ae[mn]})}l.placedSymbolArray.emplaceBack(N.x,N.y,ve,this.glyphOffsetArray.length-ve,Ce,Z,X,N.segment,v?v[0]:0,v?v[1]:0,x[0],x[1],D,0,!1,0,ee)}_addCollisionDebugVertex(l,h,v,x,T,k){return h.emplaceBack(0,0),l.emplaceBack(v.x,v.y,x,T,Math.round(k.x),Math.round(k.y))}addCollisionDebugVertices(l,h,v,x,T,k,D){const N=T.segments.prepareSegment(4,T.layoutVertexArray,T.indexArray),Z=N.vertexLength,X=T.layoutVertexArray,ee=T.collisionVertexArray,oe=D.anchorX,le=D.anchorY;this._addCollisionDebugVertex(X,ee,k,oe,le,new u(l,h)),this._addCollisionDebugVertex(X,ee,k,oe,le,new u(v,h)),this._addCollisionDebugVertex(X,ee,k,oe,le,new u(v,x)),this._addCollisionDebugVertex(X,ee,k,oe,le,new u(l,x)),N.vertexLength+=4;const fe=T.indexArray;fe.emplaceBack(Z,Z+1),fe.emplaceBack(Z+1,Z+2),fe.emplaceBack(Z+2,Z+3),fe.emplaceBack(Z+3,Z),N.primitiveLength+=4}addDebugCollisionBoxes(l,h,v,x){for(let T=l;T<h;T++){const k=this.collisionBoxArray.get(T);this.addCollisionDebugVertices(k.x1,k.y1,k.x2,k.y2,x?this.textCollisionBox:this.iconCollisionBox,k.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Dx(ht,wl.members,Kt),this.iconCollisionBox=new Dx(ht,wl.members,Kt);for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(l,h,v,x,T,k,D,N,Z){const X={};for(let ee=h;ee<v;ee++){const oe=l.get(ee);X.textBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},X.textFeatureIndex=oe.featureIndex;break}for(let ee=x;ee<T;ee++){const oe=l.get(ee);X.verticalTextBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},X.verticalTextFeatureIndex=oe.featureIndex;break}for(let ee=k;ee<D;ee++){const oe=l.get(ee);X.iconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},X.iconFeatureIndex=oe.featureIndex;break}for(let ee=N;ee<Z;ee++){const oe=l.get(ee);X.verticalIconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},X.verticalIconFeatureIndex=oe.featureIndex;break}return X}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const v=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,h){const v=l.placedSymbolArray.get(h),x=v.vertexStartIndex+4*v.numGlyphs;for(let T=v.vertexStartIndex;T<x;T+=4)l.indexArray.emplaceBack(T,T+2,T+1),l.indexArray.emplaceBack(T+1,T+2,T+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(l),v=Math.cos(l),x=[],T=[],k=[];for(let D=0;D<this.symbolInstances.length;++D){k.push(D);const N=this.symbolInstances.get(D);x.push(0|Math.round(h*N.anchorX+v*N.anchorY)),T.push(N.featureIndex)}return k.sort(((D,N)=>x[D]-x[N]||T[N]-T[D])),k}addToSortKeyRanges(l,h){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===h?v.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const v=this.symbolInstances.get(h);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach(((x,T,k)=>{x>=0&&k.indexOf(x)===T&&this.addIndicesForPlacedSymbol(this.text,x)})),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Lx,$x;pn("SymbolBucket",Jy,{omit:["layers","collisionBoxArray","features","compareText"]}),Jy.MAX_GLYPHS=65535,Jy.addDynamicAttributes=bS;var wS={get paint(){return $x=$x||new _o({"icon-opacity":new Tn(ut.paint_symbol["icon-opacity"]),"icon-color":new Tn(ut.paint_symbol["icon-color"]),"icon-halo-color":new Tn(ut.paint_symbol["icon-halo-color"]),"icon-halo-width":new Tn(ut.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Tn(ut.paint_symbol["icon-halo-blur"]),"icon-translate":new yn(ut.paint_symbol["icon-translate"]),"icon-translate-anchor":new yn(ut.paint_symbol["icon-translate-anchor"]),"text-opacity":new Tn(ut.paint_symbol["text-opacity"]),"text-color":new Tn(ut.paint_symbol["text-color"],{runtimeType:Ra,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new Tn(ut.paint_symbol["text-halo-color"]),"text-halo-width":new Tn(ut.paint_symbol["text-halo-width"]),"text-halo-blur":new Tn(ut.paint_symbol["text-halo-blur"]),"text-translate":new yn(ut.paint_symbol["text-translate"]),"text-translate-anchor":new yn(ut.paint_symbol["text-translate-anchor"])})},get layout(){return Lx=Lx||new _o({"symbol-placement":new yn(ut.layout_symbol["symbol-placement"]),"symbol-spacing":new yn(ut.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yn(ut.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Tn(ut.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yn(ut.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yn(ut.layout_symbol["icon-allow-overlap"]),"icon-overlap":new yn(ut.layout_symbol["icon-overlap"]),"icon-ignore-placement":new yn(ut.layout_symbol["icon-ignore-placement"]),"icon-optional":new yn(ut.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yn(ut.layout_symbol["icon-rotation-alignment"]),"icon-size":new Tn(ut.layout_symbol["icon-size"]),"icon-text-fit":new yn(ut.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yn(ut.layout_symbol["icon-text-fit-padding"]),"icon-image":new Tn(ut.layout_symbol["icon-image"]),"icon-rotate":new Tn(ut.layout_symbol["icon-rotate"]),"icon-padding":new Tn(ut.layout_symbol["icon-padding"]),"icon-keep-upright":new yn(ut.layout_symbol["icon-keep-upright"]),"icon-offset":new Tn(ut.layout_symbol["icon-offset"]),"icon-anchor":new Tn(ut.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yn(ut.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yn(ut.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yn(ut.layout_symbol["text-rotation-alignment"]),"text-field":new Tn(ut.layout_symbol["text-field"]),"text-font":new Tn(ut.layout_symbol["text-font"]),"text-size":new Tn(ut.layout_symbol["text-size"]),"text-max-width":new Tn(ut.layout_symbol["text-max-width"]),"text-line-height":new yn(ut.layout_symbol["text-line-height"]),"text-letter-spacing":new Tn(ut.layout_symbol["text-letter-spacing"]),"text-justify":new Tn(ut.layout_symbol["text-justify"]),"text-radial-offset":new Tn(ut.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yn(ut.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Tn(ut.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Tn(ut.layout_symbol["text-anchor"]),"text-max-angle":new yn(ut.layout_symbol["text-max-angle"]),"text-writing-mode":new yn(ut.layout_symbol["text-writing-mode"]),"text-rotate":new Tn(ut.layout_symbol["text-rotate"]),"text-padding":new yn(ut.layout_symbol["text-padding"]),"text-keep-upright":new yn(ut.layout_symbol["text-keep-upright"]),"text-transform":new Tn(ut.layout_symbol["text-transform"]),"text-offset":new Tn(ut.layout_symbol["text-offset"]),"text-allow-overlap":new yn(ut.layout_symbol["text-allow-overlap"]),"text-overlap":new yn(ut.layout_symbol["text-overlap"]),"text-ignore-placement":new yn(ut.layout_symbol["text-ignore-placement"]),"text-optional":new yn(ut.layout_symbol["text-optional"])})}};class hE{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:yi,this.defaultValue=l}evaluate(l){if(l.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(l.formattedSection))return h.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}pn("FormatSectionOverride",hE,{omit:["defaultValue"]});class hp extends Zi{constructor(l,h){super(l,wS,h)}recalculate(l,h){if(super.recalculate(l,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const x=[];for(const T of v)x.indexOf(T)<0&&x.push(T);this.layout._values["text-writing-mode"]=x}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,h,v,x){const T=this.layout.get(l).evaluate(h,{},v,x),k=this._unevaluatedLayout._values[l];return k.isDataDriven()||yh(k.value)||!T?T:(function(D,N){return N.replace(/{([^{}]+)}/g,((Z,X)=>D&&X in D?String(D[X]):""))})(h.properties,T)}createBucket(l){return new Jy(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of wS.paint.overridableProperties){if(!hp.hasPaintOverride(this.layout,l))continue;const h=this.paint.get(l),v=new hE(h),x=new ky(v,h.property.specification);let T=null;T=h.value.kind==="constant"||h.value.kind==="source"?new la("source",x):new vh("composite",x,h.value.zoomStops),this.paint._values[l]=new Va(h.property,T,h.parameters)}}_handleOverridablePaintPropertyUpdate(l,h,v){return!(!this.layout||h.isDataDriven()||v.isDataDriven())&&hp.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,h){const v=l.get("text-field"),x=wS.paint.properties[h];let T=!1;const k=D=>{for(const N of D)if(x.overrides&&x.overrides.hasOverride(N))return void(T=!0)};if(v.value.kind==="constant"&&v.value.value instanceof Ho)k(v.value.value.sections);else if(v.value.kind==="source"||v.value.kind==="composite"){const D=Z=>{T||(Z instanceof Da&&Li(Z.value)===pc?k(Z.value.sections):Z instanceof Tm?k(Z.sections):Z.eachChild(D))},N=v.value;N._styleExpression&&D(N._styleExpression.expression)}return T}}let dE;var fE={get paint(){return dE=dE||new _o({"background-color":new yn(ut.paint_background["background-color"]),"background-pattern":new tp(ut.paint_background["background-pattern"]),"background-opacity":new yn(ut.paint_background["background-opacity"])})}};class $r extends Zi{constructor(l,h){super(l,fE,h)}}class OS extends Zi{constructor(l,h){super(l,{},h),this.onAdd=v=>{this.implementation.onAdd&&this.implementation.onAdd(v,v.painter.context.gl)},this.onRemove=v=>{this.implementation.onRemove&&this.implementation.onRemove(v,v.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class zx{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const SS={once:!0},Nx=63710088e-1;class Ph{constructor(l,h){if(isNaN(l)||isNaN(h))throw new Error(`Invalid LngLat object: (${l}, ${h})`);if(this.lng=+l,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ph(st(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const h=Math.PI/180,v=this.lat*h,x=l.lat*h,T=Math.sin(v)*Math.sin(x)+Math.cos(v)*Math.cos(x)*Math.cos((l.lng-this.lng)*h);return Nx*Math.acos(Math.min(T,1))}static convert(l){if(l instanceof Ph)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new Ph(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new Ph(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const e0=2*Math.PI*Nx;function Hv(d){return e0*Math.cos(d*Math.PI/180)}function pE(d){return(180+d)/360}function CS(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function mE(d,l){return d/Hv(l)}function gE(d){return 360*d-180}function Gv(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function TS(d,l){return d*Hv(Gv(l))}class ii{constructor(l,h,v=0){this.x=+l,this.y=+h,this.z=+v}static fromLngLat(l,h=0){const v=Ph.convert(l);return new ii(pE(v.lng),CS(v.lat),mE(h,v.lat))}toLngLat(){return new Ph(gE(this.x),Gv(this.y))}toAltitude(){return TS(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/e0*(l=Gv(this.y),1/Math.cos(l*Math.PI/180));var l}}function Bx(d,l,h){var v=2*Math.PI*6378137/256/Math.pow(2,h);return[d*v-2*Math.PI*6378137/2,l*v-2*Math.PI*6378137/2]}class Cs{constructor(l,h,v){if(!(function(x,T,k){return!(x<0||x>25||k<0||k>=Math.pow(2,x)||T<0||T>=Math.pow(2,x))})(l,h,v))throw new Error(`x=${h}, y=${v}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=h,this.y=v,this.key=t0(0,l,l,h,v)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,h,v){const x=(function(k,D,N){var Z=Bx(256*k,256*(D=Math.pow(2,N)-D-1),N),X=Bx(256*(k+1),256*(D+1),N);return Z[0]+","+Z[1]+","+X[0]+","+X[1]})(this.x,this.y,this.z),T=(function(k,D,N){let Z,X="";for(let ee=k;ee>0;ee--)Z=1<<ee-1,X+=(D&Z?1:0)+(N&Z?2:0);return X})(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,T).replace(/{bbox-epsg-3857}/g,x)}isChildOf(l){const h=this.z-l.z;return h>0&&l.x===this.x>>h&&l.y===this.y>>h}getTilePoint(l){const h=Math.pow(2,this.z);return new u((l.x*h-this.x)*Qe,(l.y*h-this.y)*Qe)}toString(){return`${this.z}/${this.x}/${this.y}`}}class yE{constructor(l,h){this.wrap=l,this.canonical=h,this.key=t0(l,h.z,h.z,h.x,h.y)}}class Sl{constructor(l,h,v,x,T){if(this.terrainRttPosMatrix32f=null,l<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${v}`);this.overscaledZ=l,this.wrap=h,this.canonical=new Cs(v,+x,+T),this.key=t0(h,l,v,x,T)}clone(){return new Sl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-l;return l>this.canonical.z?new Sl(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Sl(l,this.wrap,l,this.canonical.x>>h,this.canonical.y>>h)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(l,h){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-l;return l>this.canonical.z?t0(this.wrap*+h,l,this.canonical.z,this.canonical.x,this.canonical.y):t0(this.wrap*+h,l,l,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(l){if(l.wrap!==this.wrap||this.overscaledZ-l.overscaledZ<=0)return!1;if(l.overscaledZ===0)return this.overscaledZ>0;const h=this.canonical.z-l.canonical.z;return!(h<0)&&l.canonical.x===this.canonical.x>>h&&l.canonical.y===this.canonical.y>>h}children(l){if(this.overscaledZ>=l)return[new Sl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,v=2*this.canonical.x,x=2*this.canonical.y;return[new Sl(h,this.wrap,h,v,x),new Sl(h,this.wrap,h,v+1,x),new Sl(h,this.wrap,h,v,x+1),new Sl(h,this.wrap,h,v+1,x+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new Sl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new Sl(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new yE(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new ii(l.x-this.wrap,l.y))}}function t0(d,l,h,v,x){(d*=2)<0&&(d=-1*d-1);const T=1<<h;return(T*T*d+T*x+v).toString(36)+h.toString(36)+l.toString(36)}function Xv(d,l){return l?d.properties[l]:d.id}function kS(d,l){const h={id:d.id};if(l.removeAllProperties&&(delete d.removeProperties,delete d.addOrUpdateProperties,delete l.removeProperties),l.removeProperties)for(const v of l.removeProperties){const x=d.addOrUpdateProperties.findIndex((T=>T.key===v));x>-1&&d.addOrUpdateProperties.splice(x,1)}return(d.removeAllProperties||l.removeAllProperties)&&(h.removeAllProperties=!0),(d.removeProperties||l.removeProperties)&&(h.removeProperties=[...d.removeProperties||[],...l.removeProperties||[]]),(d.addOrUpdateProperties||l.addOrUpdateProperties)&&(h.addOrUpdateProperties=[...d.addOrUpdateProperties||[],...l.addOrUpdateProperties||[]]),(d.newGeometry||l.newGeometry)&&(h.newGeometry=l.newGeometry||d.newGeometry),h}function Yv(d){var l,h;if(!d)return{};const v={};return v.removeAll=d.removeAll,v.remove=new Set(d.remove||[]),v.add=new Map((l=d.add)===null||l===void 0?void 0:l.map((x=>[x.id,x]))),v.update=new Map((h=d.update)===null||h===void 0?void 0:h.map((x=>[x.id,x]))),v}pn("CanonicalTileID",Cs),pn("OverscaledTileID",Sl,{omit:["terrainRttPosMatrix32f"]});class dp{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){const h=new dp;return h.extend(l(new u(this.minX,this.minY))),h.extend(l(new u(this.maxX,this.minY))),h.extend(l(new u(this.minX,this.maxY))),h.extend(l(new u(this.maxX,this.maxY))),h}static fromPoints(l){const h=new dp;for(const v of l)h.extend(v);return h}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}class ES{constructor(l){this._stringToNumber={},this._numberToString=[];for(let h=0;h<l.length;h++){const v=l[h];this._stringToNumber[v]=h,this._numberToString[h]=v}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class Fx{constructor(l,h,v,x,T){this.type="Feature",this._vectorTileFeature=l,this._x=v,this._y=x,this._z=h,this.properties=l.properties,this.id=T}projectPoint(l,h,v,x){return[360*(l.x+h)/x-180,360/Math.PI*Math.atan(Math.exp((1-2*(l.y+v)/x)*Math.PI))-90]}projectLine(l,h,v,x){return l.map((T=>this.projectPoint(T,h,v,x)))}get geometry(){if(this._geometry)return this._geometry;const l=this._vectorTileFeature,h=l.extent*Math.pow(2,this._z),v=l.extent*this._x,x=l.extent*this._y,T=l.loadGeometry();switch(l.type){case 1:{const k=[];for(const N of T)k.push(N[0]);const D=this.projectLine(k,v,x,h);this._geometry=k.length===1?{type:"Point",coordinates:D[0]}:{type:"MultiPoint",coordinates:D};break}case 2:{const k=T.map((D=>this.projectLine(D,v,x,h)));this._geometry=k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k};break}case 3:{const k=Gk(T),D=[];for(const N of k)D.push(N.map((Z=>this.projectLine(Z,v,x,h))));this._geometry=D.length===1?{type:"Polygon",coordinates:D[0]}:{type:"MultiPolygon",coordinates:D};break}default:throw new Error(`unknown feature type: ${l.type}`)}return this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&h!=="_x"&&h!=="_y"&&h!=="_z"&&(l[h]=this[h]);return l}}class fp{_name;dataBuffer;nullabilityBuffer;_size;constructor(l,h,v){this._name=l,this.dataBuffer=h,typeof v=="number"?this._size=v:(this.nullabilityBuffer=v,this._size=v.size())}getValue(l){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(l)?null:this.getValueFromBuffer(l)}has(l){return this.nullabilityBuffer&&this.nullabilityBuffer.get(l)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class jx extends fp{}class Vx extends jx{getValueFromBuffer(l){return this.dataBuffer[l]}}class AS extends jx{getValueFromBuffer(l){return this.dataBuffer[l]}}class PS extends fp{delta;constructor(l,h,v,x){super(l,h,x),this.delta=v}}class MS extends PS{constructor(l,h,v,x){super(l,Int32Array.of(h),v,x)}getValueFromBuffer(l){return this.dataBuffer[0]+l*this.delta}}class RS extends fp{constructor(l,h,v){super(l,Int32Array.of(h),v)}getValueFromBuffer(l){return this.dataBuffer[0]}}class pp{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(l,h,v,x,T=4096){this._name=l,this._geometryVector=h,this._idVector=v,this._propertyVectors=x,this._extent=T}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(l){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((h=>[h.name,h])))),this.propertyVectorsMap.get(l)}*[Symbol.iterator](){const l=this.geometryVector[Symbol.iterator]();let h=0;for(;h<this.numFeatures;){let v;this.idVector&&(v=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(h)):this.idVector.getValue(h));const x=l?.next().value,T={};for(const k of this.propertyVectors){if(!k)continue;const D=k.name,N=k.getValue(h);N!==null&&(T[D]=N)}h++,yield{id:v,geometry:x,properties:T}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const l=[],h=this.geometryVector.getGeometries();for(let v=0;v<this.numFeatures;v++){let x;this.idVector&&(x=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(v)):this.idVector.getValue(v));const T={coordinates:h[v],type:this.geometryVector.geometryType(v)},k={};for(const D of this.propertyVectors){if(!D)continue;const N=D.name,Z=D.getValue(v);Z!==null&&(k[N]=Z)}l.push({id:x,geometry:T,properties:k})}return l}containsMaxSaveIntegerValues(l){return l instanceof Vx||l instanceof RS&&l instanceof MS||l instanceof AS}}class vE{value;constructor(l){this.value=l}get(){return this.value}set(l){this.value=l}increment(){return this.value++}add(l){this.value+=l}}var _r,Tu,Ns,ku,mp,wa,jo,ds,ec,Wa;function fs(d,l,h){const v=new Int32Array(h);let x=0,T=l.get();for(let k=0;k<v.length;k++){let D=d[T++],N=127&D;D<128||(D=d[T++],N|=(127&D)<<7,D<128||(D=d[T++],N|=(127&D)<<14,D<128||(D=d[T++],N|=(127&D)<<21,D<128||(D=d[T++],N|=(15&D)<<28)))),v[x++]=N}return l.set(T),v}function Kv(d,l,h){const v=new BigInt64Array(h);for(let x=0;x<v.length;x++)v[x]=Qx(d,l);return v}function _E(d,l){let h,v;return v=d[l.get()],l.increment(),h=127&v,v<128?h:(v=d[l.get()],l.increment(),h|=(127&v)<<7,v<128?h:(v=d[l.get()],l.increment(),h|=(127&v)<<14,v<128?h:(v=d[l.get()],l.increment(),h|=(127&v)<<21,v<128?h:(v=d[l.get()],h|=(15&v)<<28,(function(x,T,k){let D,N;if(N=T[k.get()],k.increment(),D=(112&N)>>4,N<128||(N=T[k.get()],k.increment(),D|=(127&N)<<3,N<128)||(N=T[k.get()],k.increment(),D|=(127&N)<<10,N<128)||(N=T[k.get()],k.increment(),D|=(127&N)<<17,N<128)||(N=T[k.get()],k.increment(),D|=(127&N)<<24,N<128)||(N=T[k.get()],k.increment(),D|=(1&N)<<31,N<128))return 4294967296*D+(x>>>0);throw new Error("Expected varint not more than 10 bytes")})(h,d,l)))))}function n0(d,l,h,v){throw new Error("FastPFor is not implemented yet.")}function Bs(d){return d>>>1^-(1&d)}function cg(d){return d>>1n^-(1n&d)}function Qx(d,l){let h=0n,v=0,x=l.get();for(;x<d.length;){const T=d[x++];if(h|=BigInt(127&T)<<BigInt(v),!(128&T))break;if(v+=7,v>=64)throw new Error("Varint too long")}return l.set(x),h}function Mh(d,l,h){const v=new Int32Array(h);let x=0;for(let T=0;T<l;T++){const k=d[T];v.fill(d[T+l],x,x+k),x+=k}return v}function bE(d,l,h){const v=new BigInt64Array(h);let x=0;for(let T=0;T<l;T++){const k=Number(d[T]);v.fill(d[T+l],x,x+k),x+=k}return v}function xE(d,l,h){const v=new Float64Array(h);let x=0;for(let T=0;T<l;T++){const k=d[T];v.fill(d[T+l],x,x+k),x+=k}return v}function gp(d){const l=d.length/4*4;let h=1;if(l>=4)for(let v=d[0];h<l-4;h+=4)v=d[h]+=v,v=d[h+1]+=v,v=d[h+2]+=v,v=d[h+3]+=v;for(;h!=d.length;)d[h]+=d[h-1],++h}function IS(d){d[0]=d[0]>>>1^-(1&d[0]),d[1]=d[1]>>>1^-(1&d[1]);const l=d.length/4*4;let h=2;if(l>=4)for(;h<l-4;h+=4){const v=d[h],x=d[h+1],T=d[h+2],k=d[h+3];d[h]=(v>>>1^-(1&v))+d[h-2],d[h+1]=(x>>>1^-(1&x))+d[h-1],d[h+2]=(T>>>1^-(1&T))+d[h],d[h+3]=(k>>>1^-(1&k))+d[h+1]}for(;h!=d.length;h+=2)d[h]=(d[h]>>>1^-(1&d[h]))+d[h-2],d[h+1]=(d[h+1]>>>1^-(1&d[h+1]))+d[h-1]}(function(d){d.NONE="NONE",d.DELTA="DELTA",d.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",d.RLE="RLE",d.MORTON="MORTON",d.PDE="PDE"})(_r||(_r={})),(function(d){d.NONE="NONE",d.FAST_PFOR="FAST_PFOR",d.VARINT="VARINT",d.ALP="ALP"})(Tu||(Tu={})),(function(d){d.PRESENT="PRESENT",d.DATA="DATA",d.OFFSET="OFFSET",d.LENGTH="LENGTH"})(Ns||(Ns={}));class DS{_dictionaryType;_offsetType;_lengthType;constructor(l,h,v){this._dictionaryType=l,this._offsetType=h,this._lengthType=v}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Oa(d,l){const h=(function(v,x){const T=v[x.get()],k=Object.values(Ns)[T>>4];let D=null;switch(k){case Ns.DATA:D=new DS(Object.values(ku)[15&T]);break;case Ns.OFFSET:D=new DS(null,Object.values(mp)[15&T]);break;case Ns.LENGTH:D=new DS(null,null,Object.values(wa)[15&T])}x.increment();const N=v[x.get()],Z=Object.values(_r)[N>>5],X=Object.values(_r)[N>>2&7],ee=Object.values(Tu)[3&N];x.increment();const oe=fs(v,x,2),le=oe[0];return{physicalStreamType:k,logicalStreamType:D,logicalLevelTechnique1:Z,logicalLevelTechnique2:X,physicalLevelTechnique:ee,numValues:le,byteLength:oe[1],decompressedCount:le}})(d,l);return h.logicalLevelTechnique1===_r.MORTON?(function(v,x,T){const k=fs(x,T,2);return{physicalStreamType:v.physicalStreamType,logicalStreamType:v.logicalStreamType,logicalLevelTechnique1:v.logicalLevelTechnique1,logicalLevelTechnique2:v.logicalLevelTechnique2,physicalLevelTechnique:v.physicalLevelTechnique,numValues:v.numValues,byteLength:v.byteLength,decompressedCount:v.decompressedCount,numBits:k[0],coordinateShift:k[1]}})(h,d,l):_r.RLE!==h.logicalLevelTechnique1&&_r.RLE!==h.logicalLevelTechnique2||Tu.NONE===h.physicalLevelTechnique?h:(function(v,x,T){const k=fs(x,T,2);return{physicalStreamType:v.physicalStreamType,logicalStreamType:v.logicalStreamType,logicalLevelTechnique1:v.logicalLevelTechnique1,logicalLevelTechnique2:v.logicalLevelTechnique2,physicalLevelTechnique:v.physicalLevelTechnique,numValues:v.numValues,byteLength:v.byteLength,decompressedCount:k[1],runs:k[0],numRleValues:k[1]}})(h,d,l)}(function(d){d.NONE="NONE",d.SINGLE="SINGLE",d.SHARED="SHARED",d.VERTEX="VERTEX",d.MORTON="MORTON",d.FSST="FSST"})(ku||(ku={})),(function(d){d.VERTEX="VERTEX",d.INDEX="INDEX",d.STRING="STRING",d.KEY="KEY"})(mp||(mp={})),(function(d){d.VAR_BINARY="VAR_BINARY",d.GEOMETRIES="GEOMETRIES",d.PARTS="PARTS",d.RINGS="RINGS",d.TRIANGLES="TRIANGLES",d.SYMBOL="SYMBOL",d.DICTIONARY="DICTIONARY"})(wa||(wa={})),(function(d){d[d.FLAT=0]="FLAT",d[d.CONST=1]="CONST",d[d.SEQUENCE=2]="SEQUENCE",d[d.DICTIONARY=3]="DICTIONARY",d[d.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(jo||(jo={}));class Eu{values;_size;constructor(l,h){this.values=l,this._size=h}get(l){const h=Math.floor(l/8);return(this.values[h]>>l%8&1)==1}set(l,h){const v=Math.floor(l/8);this.values[v]=this.values[v]|(h?1:0)<<l%8}getInt(l){const h=Math.floor(l/8);return this.values[h]>>l%8&1}size(){return this._size}getBuffer(){return this.values}}function Sa(d,l,h,v,x){return(function(T,k,D){switch(k.logicalLevelTechnique1){case _r.DELTA:return k.logicalLevelTechnique2===_r.RLE?(function(N,Z,X){const ee=new Int32Array(X);let oe=0,le=0;for(let fe=0;fe<Z;fe++){const pe=N[fe],ve=Bs(N[fe+Z]);for(let Ce=0;Ce<pe;Ce++)le+=ve,ee[oe++]=le}return ee})(T,k.runs,k.numRleValues):((function(N){N[0]=N[0]>>>1^-(1&N[0]);const Z=N.length/4*4;let X=1;if(Z>=4)for(;X<Z-4;X+=4){const ee=N[X],oe=N[X+1],le=N[X+2],fe=N[X+3];N[X]=(ee>>>1^-(1&ee))+N[X-1],N[X+1]=(oe>>>1^-(1&oe))+N[X],N[X+2]=(le>>>1^-(1&le))+N[X+1],N[X+3]=(fe>>>1^-(1&fe))+N[X+2]}for(;X!=N.length;++X)N[X]=(N[X]>>>1^-(1&N[X]))+N[X-1]})(T),T);case _r.RLE:return(function(N,Z,X){return X?(function(ee,oe,le){const fe=new Int32Array(le);let pe=0;for(let ve=0;ve<oe;ve++){const Ce=ee[ve];let Ve=ee[ve+oe];Ve=Ve>>>1^-(1&Ve),fe.fill(Ve,pe,pe+Ce),pe+=Ce}return fe})(N,Z.runs,Z.numRleValues):Mh(N,Z.runs,Z.numRleValues)})(T,k,D);case _r.MORTON:return gp(T),T;case _r.COMPONENTWISE_DELTA:return IS(T),T;case _r.NONE:return D&&(function(N){for(let Z=0;Z<N.length;Z++){const X=N[Z];N[Z]=X>>>1^-(1&X)}})(T),T;default:throw new Error(`The specified Logical level technique is not supported: ${k.logicalLevelTechnique1}`)}})(Ux(d,l,h),h,v)}function yp(d,l,h){return(function(v,x){if(x.logicalLevelTechnique1===_r.DELTA&&x.logicalLevelTechnique2===_r.NONE)return(function(k){const D=new Int32Array(k.length+1);D[0]=0,D[1]=Bs(k[0]);let N=D[1],Z=2;for(;Z!=D.length;++Z){const X=k[Z-1];N+=X>>>1^-(1&X),D[Z]=D[Z-1]+N}return D})(v);if(x.logicalLevelTechnique1===_r.RLE&&x.logicalLevelTechnique2===_r.NONE)return(function(k,D,N){const Z=new Int32Array(N+1);Z[0]=0;let X=1,ee=Z[0];for(let oe=0;oe<D;oe++){const le=k[oe],fe=k[oe+D];for(let pe=X;pe<X+le;pe++)Z[pe]=fe+ee,ee=Z[pe];X+=le}return Z})(v,x.runs,x.numRleValues);if(x.logicalLevelTechnique1===_r.NONE&&x.logicalLevelTechnique2===_r.NONE){(function(k){let D=0;for(let N=0;N<k.length;N++)k[N]+=D,D=k[N]})(v);const T=new Int32Array(x.numValues+1);return T[0]=0,T.set(v,1),T}if(x.logicalLevelTechnique1===_r.DELTA&&x.logicalLevelTechnique2===_r.RLE){const T=(function(k,D,N){const Z=new Int32Array(N+1);Z[0]=0;let X=1,ee=Z[0];for(let oe=0;oe<D;oe++){const le=k[oe];let fe=k[oe+D];fe=fe>>>1^-(1&fe);for(let pe=X;pe<X+le;pe++)Z[pe]=fe+ee,ee=Z[pe];X+=le}return Z})(v,x.runs,x.numRleValues);return gp(T),T}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(Ux(d,l,h),h)}function Ux(d,l,h){const v=h.physicalLevelTechnique;if(v===Tu.FAST_PFOR)return n0();if(v===Tu.VARINT)return fs(d,l,h.numValues);if(v===Tu.NONE){const x=l.get();l.add(h.byteLength);const T=d.subarray(x,l.get());return new Int32Array(T)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function LS(d,l,h,v){const x=Ux(d,l,h);if(x.length===1){const T=x[0];return v?Bs(T):T}return v?(function(T){return Bs(T[1])})(x):(function(T){return T[1]})(x)}function $S(d,l,h){return(function(v){if(v.length==2){const x=Bs(v[1]);return[x,x]}return[Bs(v[2]),Bs(v[3])]})(Ux(d,l,h))}function ug(d,l,h){return(function(v){if(v.length==2){const x=cg(v[1]);return[x,x]}return[cg(v[2]),cg(v[3])]})(Kv(d,l,h.numValues))}function r0(d,l,h,v){return(function(x,T,k){switch(T.logicalLevelTechnique1){case _r.DELTA:return T.logicalLevelTechnique2===_r.RLE?(function(D,N,Z){const X=new BigInt64Array(Z);let ee=0,oe=0n;for(let le=0;le<N;le++){const fe=Number(D[le]),pe=cg(D[le+N]);for(let ve=0;ve<fe;ve++)oe+=pe,X[ee++]=oe}return X})(x,T.runs,T.numRleValues):((function(D){D[0]=D[0]>>1n^-(1n&D[0]);const N=D.length/4*4;let Z=1;if(N>=4)for(;Z<N-4;Z+=4){const X=D[Z],ee=D[Z+1],oe=D[Z+2],le=D[Z+3];D[Z]=(X>>1n^-(1n&X))+D[Z-1],D[Z+1]=(ee>>1n^-(1n&ee))+D[Z],D[Z+2]=(oe>>1n^-(1n&oe))+D[Z+1],D[Z+3]=(le>>1n^-(1n&le))+D[Z+2]}for(;Z!=D.length;++Z)D[Z]=(D[Z]>>1n^-(1n&D[Z]))+D[Z-1]})(x),x);case _r.RLE:return(function(D,N,Z){return Z?(function(X,ee,oe){const le=new BigInt64Array(oe);let fe=0;for(let pe=0;pe<ee;pe++){const ve=Number(X[pe]);let Ce=X[pe+ee];Ce=Ce>>1n^-(1n&Ce),le.fill(Ce,fe,fe+ve),fe+=ve}return le})(D,N.runs,N.numRleValues):bE(D,N.runs,N.numRleValues)})(x,T,k);case _r.NONE:return k&&(function(D){for(let N=0;N<D.length;N++){const Z=D[N];D[N]=Z>>1n^-(1n&Z)}})(x),x;default:throw new Error(`The specified Logical level technique is not supported: ${T.logicalLevelTechnique1}`)}})(Kv(d,l,h.numValues),h,v)}function zS(d,l,h,v){const x=Kv(d,l,h.numValues);if(x.length===1){const T=x[0];return v?cg(T):T}return v?(function(T){return cg(T[1])})(x):(function(T){return T[1]})(x)}function NS(d,l,h,v,x){return(function(T,k,D,N){switch(k.logicalLevelTechnique1){case _r.DELTA:return k.logicalLevelTechnique2===_r.RLE&&(T=Mh(T,k.runs,k.numRleValues)),(function(Z,X){const ee=new Int32Array(Z.size());let oe=0;Z.get(0)?(ee[0]=Z.get(0)?X[0]>>>1^-(1&X[0]):0,oe=1):ee[0]=0;let le=1;for(;le!=ee.length;++le)ee[le]=Z.get(le)?ee[le-1]+(X[oe]>>>1^-(1&X[oe++])):ee[le-1];return ee})(N,T);case _r.RLE:return(function(Z,X,ee,oe){const le=X;return ee?(function(fe,pe,ve){const Ce=new Int32Array(fe.size());let Ve=0;for(let Ae=0;Ae<ve;Ae++){const Re=pe[Ae];let qe=pe[Ae+ve];qe=qe>>>1^-(1&qe);for(let Ge=Ve;Ge<Ve+Re;Ge++)fe.get(Ge)?Ce[Ge]=qe:(Ce[Ge]=0,Ve++);Ve+=Re}return Ce})(oe,Z,le.runs):(function(fe,pe,ve){const Ce=new Int32Array(fe.size());let Ve=0;for(let Ae=0;Ae<ve;Ae++){const Re=pe[Ae],qe=pe[Ae+ve];for(let Ge=Ve;Ge<Ve+Re;Ge++)fe.get(Ge)?Ce[Ge]=qe:(Ce[Ge]=0,Ve++);Ve+=Re}return Ce})(oe,Z,le.runs)})(T,k,D,N);case _r.MORTON:return gp(T),T;case _r.COMPONENTWISE_DELTA:return IS(T),T;case _r.NONE:return T=D?(function(Z,X){const ee=new Int32Array(Z.size());let oe=0,le=0;for(;le!=ee.length;++le)if(Z.get(le)){const fe=X[oe++];ee[le]=fe>>>1^-(1&fe)}else ee[le]=0;return ee})(N,T):(function(Z,X){const ee=new Int32Array(Z.size());let oe=0,le=0;for(;le!=ee.length;++le)ee[le]=Z.get(le)?X[oe++]:0;return ee})(N,T),T;default:throw new Error("The specified Logical level technique is not supported")}})(h.physicalLevelTechnique===Tu.FAST_PFOR?n0():fs(d,l,h.numValues),h,v,x)}function Zd(d,l,h,v){const x=d.logicalLevelTechnique1;if(x===_r.RLE)return d.runs===1?jo.CONST:jo.FLAT;const T=l instanceof Eu?l.size():l;if(x===_r.DELTA&&d.logicalLevelTechnique2===_r.RLE){const k=d.runs,D=2;if(d.numRleValues!==T)return jo.FLAT;if(k===1)return jo.SEQUENCE;if(k===2){const N=v.get();let Z;if(d.physicalLevelTechnique===Tu.VARINT)Z=fs(h,v,4);else{const X=v.get();Z=new Int32Array(h.buffer,h.byteOffset+X,4)}if(v.set(N),Z[2]===D&&Z[3]===D)return jo.SEQUENCE}}return d.numValues===1?jo.CONST:jo.FLAT}class i0 extends jx{getValueFromBuffer(l){return this.dataBuffer[l]}}class BS extends PS{constructor(l,h,v,x){super(l,BigInt64Array.of(h),v,x)}getValueFromBuffer(l){return this.dataBuffer[0]+BigInt(l)*this.delta}}class qd{_geometryOffsets;_partOffsets;_ringOffsets;constructor(l,h,v){this._geometryOffsets=l,this._partOffsets=h,this._ringOffsets=v}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function Jv(d,l,h){return{x:Zx(d,l)-h,y:Zx(d>>1,l)-h}}function Zx(d,l){let h=0;for(let v=0;v<l;v++)h|=(d&1<<2*v)>>v;return h}(function(d){d[d.POINT=0]="POINT",d[d.LINESTRING=1]="LINESTRING",d[d.POLYGON=2]="POLYGON",d[d.MULTIPOINT=3]="MULTIPOINT",d[d.MULTILINESTRING=4]="MULTILINESTRING",d[d.MULTIPOLYGON=5]="MULTIPOLYGON"})(ds||(ds={})),(function(d){d[d.POINT=0]="POINT",d[d.LINESTRING=1]="LINESTRING",d[d.POLYGON=2]="POLYGON"})(ec||(ec={})),(function(d){d[d.MORTON=0]="MORTON",d[d.VEC_2=1]="VEC_2",d[d.VEC_3=2]="VEC_3"})(Wa||(Wa={}));class qx{createPoint(l){return[[l]]}createMultiPoint(l){return l.map((h=>[h]))}createLineString(l){return[l]}createMultiLineString(l){return l}createPolygon(l,h){return[l].concat(h)}createMultiPolygon(l){return l.flat()}}function FS(d){const l=new Array(d.numGeometries);let h=1,v=1,x=1,T=0;const k=new qx;let D=0,N=0;const Z=d.mortonSettings,X=d.topologyVector,ee=X.geometryOffsets,oe=X.partOffsets,le=X.ringOffsets,fe=d.vertexOffsets,pe=d.containsPolygonGeometry(),ve=d.vertexBuffer;for(let Ce=0;Ce<d.numGeometries;Ce++){const Ve=d.geometryType(Ce);if(Ve===ds.POINT){if(fe&&fe.length!==0)if(d.vertexBufferType===Wa.VEC_2){const Ae=2*fe[N++],Re=new u(ve[Ae],ve[Ae+1]);l[T++]=k.createPoint(Re)}else{const Ae=Jv(ve[fe[N++]],Z.numBits,Z.coordinateShift),Re=new u(Ae.x,Ae.y);l[T++]=k.createPoint(Re)}else{const Ae=new u(ve[D++],ve[D++]);l[T++]=k.createPoint(Ae)}ee&&x++,oe&&h++,le&&v++}else if(Ve===ds.MULTIPOINT){const Ae=ee[x]-ee[x-1];x++;const Re=new Array(Ae);if(fe&&fe.length!==0){for(let qe=0;qe<Ae;qe++){const Ge=2*fe[N++];Re[qe]=new u(ve[Ge],ve[Ge+1])}l[T++]=k.createMultiPoint(Re)}else{for(let qe=0;qe<Ae;qe++){const Ge=ve[D++],dt=ve[D++];Re[qe]=new u(Ge,dt)}l[T++]=k.createMultiPoint(Re)}}else if(Ve===ds.LINESTRING){let Ae,Re=0;pe?(Re=le[v]-le[v-1],v++):Re=oe[h]-oe[h-1],h++,fe&&fe.length!==0?(Ae=d.vertexBufferType===Wa.VEC_2?n_(ve,fe,N,Re,!1):VS(ve,fe,N,Re,!1,Z),N+=Re):(Ae=jS(ve,D,Re,!1),D+=2*Re),l[T++]=k.createLineString(Ae),ee&&x++}else if(Ve===ds.POLYGON){const Ae=oe[h]-oe[h-1];h++;const Re=new Array(Ae-1);let qe=le[v]-le[v-1];if(v++,fe&&fe.length!==0){const Ge=d.vertexBufferType===Wa.VEC_2?Wx(ve,fe,N,qe):t_(ve,fe,N,qe,0,Z);N+=qe;for(let dt=0;dt<Re.length;dt++)qe=le[v]-le[v-1],v++,Re[dt]=d.vertexBufferType===Wa.VEC_2?Wx(ve,fe,N,qe):t_(ve,fe,N,qe,0,Z),N+=qe;l[T++]=k.createPolygon(Ge,Re)}else{const Ge=e_(ve,D,qe);D+=2*qe;for(let dt=0;dt<Re.length;dt++)qe=le[v]-le[v-1],v++,Re[dt]=e_(ve,D,qe),D+=2*qe;l[T++]=k.createPolygon(Ge,Re)}ee&&x++}else if(Ve===ds.MULTILINESTRING){const Ae=ee[x]-ee[x-1];x++;const Re=new Array(Ae);if(fe&&fe.length!==0){for(let qe=0;qe<Ae;qe++){let Ge=0;pe?(Ge=le[v]-le[v-1],v++):Ge=oe[h]-oe[h-1],h++;const dt=d.vertexBufferType===Wa.VEC_2?n_(ve,fe,N,Ge,!1):VS(ve,fe,N,Ge,!1,Z);Re[qe]=dt,N+=Ge}l[T++]=k.createMultiLineString(Re)}else{for(let qe=0;qe<Ae;qe++){let Ge=0;pe?(Ge=le[v]-le[v-1],v++):Ge=oe[h]-oe[h-1],h++,Re[qe]=jS(ve,D,Ge,!1),D+=2*Ge}l[T++]=k.createMultiLineString(Re)}}else{if(Ve!==ds.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const Ae=ee[x]-ee[x-1];x++;const Re=new Array(Ae);let qe=0;if(fe&&fe.length!==0){for(let Ge=0;Ge<Ae;Ge++){const dt=oe[h]-oe[h-1];h++;const Dt=new Array(dt-1);qe=le[v]-le[v-1],v++;const Ct=d.vertexBufferType===Wa.VEC_2?Wx(ve,fe,N,qe):t_(ve,fe,N,qe,0,Z);N+=qe;for(let Bt=0;Bt<Dt.length;Bt++)qe=le[v]-le[v-1],v++,Dt[Bt]=d.vertexBufferType===Wa.VEC_2?Wx(ve,fe,N,qe):t_(ve,fe,N,qe,0,Z),N+=qe;Re[Ge]=k.createPolygon(Ct,Dt)}l[T++]=k.createMultiPolygon(Re)}else{for(let Ge=0;Ge<Ae;Ge++){const dt=oe[h]-oe[h-1];h++;const Dt=new Array(dt-1);qe=le[v]-le[v-1],v++;const Ct=e_(ve,D,qe);D+=2*qe;for(let Bt=0;Bt<Dt.length;Bt++){const cn=le[v]-le[v-1];v++,Dt[Bt]=e_(ve,D,cn),D+=2*cn}Re[Ge]=k.createPolygon(Ct,Dt)}l[T++]=k.createMultiPolygon(Re)}}}}return l}function e_(d,l,h){return jS(d,l,h,!0)}function Wx(d,l,h,v){return n_(d,l,h,v,!0)}function t_(d,l,h,v,x,T){return VS(d,l,h,v,!0,T)}function jS(d,l,h,v){const x=new Array(v?h+1:h);for(let T=0;T<2*h;T+=2)x[T/2]=new u(d[l+T],d[l+T+1]);return v&&(x[x.length-1]=x[0]),x}function n_(d,l,h,v,x){const T=new Array(x?v+1:v);for(let k=0;k<2*v;k+=2){const D=2*l[h+k/2];T[k/2]=new u(d[D],d[D+1])}return x&&(T[T.length-1]=T[0]),T}function VS(d,l,h,v,x,T){const k=new Array(x?v+1:v);for(let D=0;D<v;D++){const N=Jv(d[l[h+D]],T.numBits,T.coordinateShift);k[D]=new u(N.x,N.y)}return x&&(k[k.length-1]=k[0]),k}class r_{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(l,h,v,x,T){this._vertexBufferType=l,this._topologyVector=h,this._vertexOffsets=v,this._vertexBuffer=x,this._mortonSettings=T}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const l=FS(this);let h=0;for(;h<this.numGeometries;)yield{coordinates:l[h],type:this.geometryType(h)},h++}getSimpleEncodedVertex(l){const h=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[h],this.vertexBuffer[h+1]]}getVertex(l){if(this.vertexOffsets&&this.mortonSettings){const v=Jv(this.vertexBuffer[this.vertexOffsets[l]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[v.x,v.y]}const h=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[h],this.vertexBuffer[h+1]]}getGeometries(){return FS(this)}get mortonSettings(){return this._mortonSettings}}class i_ extends r_{_numGeometries;_geometryType;constructor(l,h,v,x,T,k,D){super(v,x,T,k,D),this._numGeometries=l,this._geometryType=h}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===ds.POLYGON||this._geometryType===ds.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class o_ extends r_{_geometryTypes;constructor(l,h,v,x,T,k){super(l,v,x,T,k),this._geometryTypes=h}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let l=0;l<this.numGeometries;l++)if(this.geometryType(l)===ds.POLYGON||this.geometryType(l)===ds.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class wE{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(l,h,v,x){this._triangleOffsets=l,this._indexBuffer=h,this._vertexBuffer=v,this._topologyVector=x}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const l=new Array(this.numGeometries),h=this._topologyVector,v=h.partOffsets,x=h.ringOffsets,T=h.geometryOffsets;let k=0,D=1,N=1,Z=1;for(let X=0;X<this.numGeometries;X++)switch(this.geometryType(X)){case ds.POLYGON:{const ee=v[D]-v[D-1];D++;const oe=[];for(let le=0;le<ee;le++){const fe=x[N]-x[N-1];N++;const pe=[];for(let ve=0;ve<fe;ve++){const Ce=this._vertexBuffer[k++],Ve=this._vertexBuffer[k++];pe.push(new u(Ce,Ve))}pe.length>0&&pe.push(pe[0]),oe.push(pe)}l[X]=oe,T&&Z++}break;case ds.MULTIPOLYGON:{const ee=T[Z]-T[Z-1];Z++;const oe=[];for(let le=0;le<ee;le++){const fe=v[D]-v[D-1];D++;for(let pe=0;pe<fe;pe++){const ve=x[N]-x[N-1];N++;const Ce=[];for(let Ve=0;Ve<ve;Ve++){const Ae=this._vertexBuffer[k++],Re=this._vertexBuffer[k++];Ce.push(new u(Ae,Re))}Ce.length>0&&Ce.push(Ce[0]),oe.push(Ce)}}l[X]=oe}}return l}[Symbol.iterator](){return null}}function o0(d,l,h,v,x,T){return new NI(d,l,h,v,x,T)}class NI extends wE{_numGeometries;_geometryType;constructor(l,h,v,x,T,k){super(v,x,T,k),this._numGeometries=l,this._geometryType=h}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function QS(d,l,h,v,x){return new OE(d,l,h,v,x)}class OE extends wE{_geometryTypes;constructor(l,h,v,x,T){super(h,v,x,T),this._geometryTypes=l}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function SE(d,l,h,v,x){const T=Oa(d,h);let k=null,D=null,N=null,Z=null,X=null,ee=null,oe=null,le=null;if(Zd(T,v,d,h)===jo.CONST){const pe=LS(d,h,T,!1);for(let ve=0;ve<l-1;ve++){const Ce=Oa(d,h);switch(Ce.physicalStreamType){case Ns.LENGTH:switch(Ce.logicalStreamType.lengthType){case wa.GEOMETRIES:k=yp(d,h,Ce);break;case wa.PARTS:D=yp(d,h,Ce);break;case wa.RINGS:N=yp(d,h,Ce);break;case wa.TRIANGLES:oe=yp(d,h,Ce)}break;case Ns.OFFSET:switch(Ce.logicalStreamType.offsetType){case mp.VERTEX:Z=Sa(d,h,Ce,!1);break;case mp.INDEX:le=Sa(d,h,Ce,!1)}break;case Ns.DATA:ku.VERTEX===Ce.logicalStreamType.dictionaryType?X=Sa(d,h,Ce,!0):(ee={numBits:Ce.numBits,coordinateShift:Ce.coordinateShift},X=Sa(d,h,Ce,!1))}}return le!==null?k!=null||D!=null?o0(v,pe,oe,le,X,new qd(k,D,N)):o0(v,pe,oe,le,X):ee===null?(function(ve,Ce,Ve,Ae,Re){return new i_(ve,Ce,Wa.VEC_2,Ve,Ae,Re)})(v,pe,new qd(k,D,N),Z,X):(function(ve,Ce,Ve,Ae,Re,qe){return new i_(ve,Ce,Wa.MORTON,Ve,Ae,Re,qe)})(v,pe,new qd(k,D,N),Z,X,ee)}const fe=Sa(d,h,T,!1);for(let pe=0;pe<l-1;pe++){const ve=Oa(d,h);switch(ve.physicalStreamType){case Ns.LENGTH:switch(ve.logicalStreamType.lengthType){case wa.GEOMETRIES:k=Sa(d,h,ve,!1);break;case wa.PARTS:D=Sa(d,h,ve,!1);break;case wa.RINGS:N=Sa(d,h,ve,!1);break;case wa.TRIANGLES:oe=yp(d,h,ve)}break;case Ns.OFFSET:switch(ve.logicalStreamType.offsetType){case mp.VERTEX:Z=Sa(d,h,ve,!1);break;case mp.INDEX:le=Sa(d,h,ve,!1)}break;case Ns.DATA:ku.VERTEX===ve.logicalStreamType.dictionaryType?X=Sa(d,h,ve,!0):(ee={numBits:ve.numBits,coordinateShift:ve.coordinateShift},X=Sa(d,h,ve,!1))}}return le!==null&&D===null?QS(fe,oe,le,X):(k!==null?(k=Hx(fe,k,2),D!==null&&N!==null?(D=Gx(fe,k,D,!1),N=(function(pe,ve,Ce,Ve){const Ae=new Int32Array(Ce[Ce.length-1]+1);let Re=0;Ae[0]=Re;let qe=1,Ge=1,dt=0;for(let Dt=0;Dt<pe.length;Dt++){const Ct=pe[Dt],Bt=ve[Dt+1]-ve[Dt];if(Ct!==0&&Ct!==3)for(let cn=0;cn<Bt;cn++){const Ut=Ce[qe]-Ce[qe-1];qe++;for(let Mt=0;Mt<Ut;Mt++)Re=Ae[Ge++]=Re+Ve[dt++]}else for(let cn=0;cn<Bt;cn++)Ae[Ge++]=++Re,qe++}return Ae})(fe,k,D,N)):D!==null&&(D=(function(pe,ve,Ce){const Ve=new Int32Array(ve[ve.length-1]+1);let Ae=0;Ve[0]=Ae;let Re=1,qe=0;for(let Ge=0;Ge<pe.length;Ge++){const dt=pe[Ge],Dt=ve[Ge+1]-ve[Ge];if(dt===4||dt===1)for(let Ct=0;Ct<Dt;Ct++)Ae=Ve[Re++]=Ae+Ce[qe++];else for(let Ct=0;Ct<Dt;Ct++)Ve[Re++]=++Ae}return Ve})(fe,k,D))):D!==null&&N!==null?(D=Hx(fe,D,1),N=Gx(fe,D,N,!0)):D!==null&&(D=Hx(fe,D,0)),le!==null?QS(fe,oe,le,X,new qd(k,D,N)):ee===null?(function(pe,ve,Ce,Ve){return new o_(Wa.VEC_2,pe,ve,Ce,Ve)})(fe,new qd(k,D,N),Z,X):(function(pe,ve,Ce,Ve,Ae){return new o_(Wa.MORTON,pe,ve,Ce,Ve,Ae)})(fe,new qd(k,D,N),Z,X,ee))}function Hx(d,l,h){const v=new Int32Array(d.length+1);let x=0;v[0]=x;let T=0;for(let k=0;k<d.length;k++)x=v[k+1]=x+(d[k]>h?l[T++]:1);return v}function Gx(d,l,h,v){const x=new Int32Array(l[l.length-1]+1);let T=0;x[0]=T;let k=1,D=0;for(let N=0;N<d.length;N++){const Z=d[N],X=l[N+1]-l[N];if(Z===5||Z===2||v&&(Z===4||Z===1))for(let ee=0;ee<X;ee++)T=x[k++]=T+h[D++];else for(let ee=0;ee<X;ee++)x[k++]=++T}return x}class CE extends fp{dataVector;constructor(l,h,v){super(l,h.getBuffer(),v),this.dataVector=h}getValueFromBuffer(l){return this.dataVector.get(l)}}class TE extends jx{getValueFromBuffer(l){return this.dataBuffer[l]}}class s_ extends fp{constructor(l,h,v){super(l,BigInt64Array.of(h),v)}getValueFromBuffer(l){return this.dataBuffer[0]}}function a_(d,l,h){return kE(d,Math.ceil(l/8),h)}function kE(d,l,h){const v=new Uint8Array(l);let x=0;for(;x<l;){const T=d[h.increment()];if(T<=127){const k=T+3,D=d[h.increment()],N=x+k;v.fill(D,x,N),x=N}else{const k=256-T;for(let D=0;D<k;D++)v[x++]=d[h.increment()]}}return v}const US=new TextDecoder;function l_(d,l,h){return h-l>=12?US.decode(d.subarray(l,h)):(function(v,x,T){let k="",D=x;for(;D<T;){const N=v[D];let Z,X,ee,oe=null,le=N>239?4:N>223?3:N>191?2:1;if(D+le>T)break;le===1?N<128&&(oe=N):le===2?(Z=v[D+1],(192&Z)==128&&(oe=(31&N)<<6|63&Z,oe<=127&&(oe=null))):le===3?(Z=v[D+1],X=v[D+2],(192&Z)==128&&(192&X)==128&&(oe=(15&N)<<12|(63&Z)<<6|63&X,(oe<=2047||oe>=55296&&oe<=57343)&&(oe=null))):le===4&&(Z=v[D+1],X=v[D+2],ee=v[D+3],(192&Z)==128&&(192&X)==128&&(192&ee)==128&&(oe=(15&N)<<18|(63&Z)<<12|(63&X)<<6|63&ee,(oe<=65535||oe>=1114112)&&(oe=null))),oe===null?(oe=65533,le=1):oe>65535&&(oe-=65536,k+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|1023&oe),k+=String.fromCharCode(oe),D+=le}return k})(d,l,h)}class s0 extends fp{offsetBuffer;constructor(l,h,v,x){super(l,v,x),this.offsetBuffer=h}}class Xx extends s0{textEncoder;constructor(l,h,v,x){super(l,h,v,x??h.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(l){return l_(this.dataBuffer,this.offsetBuffer[l],this.offsetBuffer[l+1])}}class hg extends s0{indexBuffer;textEncoder;constructor(l,h,v,x,T){super(l,v,x,T??h.length),this.indexBuffer=h,this.indexBuffer=h,this.textEncoder=new TextEncoder}getValueFromBuffer(l){const h=this.indexBuffer[l];return l_(this.dataBuffer,this.offsetBuffer[h],this.offsetBuffer[h+1])}}class Yx extends s0{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(l,h,v,x,T,k,D){super(l,v,x,D),this.indexBuffer=h,this.symbolOffsetBuffer=T,this.symbolTableBuffer=k,this.textEncoder=new TextEncoder}getValueFromBuffer(l){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(v,x,T){const k=[],D=new Array(x.length).fill(0);for(let N=1;N<x.length;N++)D[N]=D[N-1]+x[N-1];for(let N=0;N<T.length;N++)if(T[N]===255)k.push(T[++N]);else{const Z=x[T[N]],X=D[T[N]];for(let ee=0;ee<Z;ee++)k.push(v[X+ee])}return new Uint8Array(k)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const h=this.indexBuffer[l];return l_(this.decodedDictionary,this.offsetBuffer[h],this.offsetBuffer[h+1])}offsetToLengthBuffer(l){const h=new Uint32Array(l.length-1);let v=l[0];for(let x=1;x<l.length;x++){const T=l[x];h[x-1]=T-v,v=T}return h}}function vp(d,l,h,v,x,T){return h.type==="scalarType"?(function(k,D,N,Z,X,ee){let oe=null,le=0;if(k===0)return null;if(ee.nullable){const pe=Oa(D,N);le=pe.numValues;const ve=N.get(),Ce=a_(D,le,N);N.set(ve+pe.byteLength),oe=new Eu(Ce,pe.numValues)}const fe=oe??Z;switch(X.physicalType){case 4:case 3:return(function(pe,ve,Ce,Ve,Ae){const Re=Oa(pe,ve),qe=Zd(Re,Ae,pe,ve),Ge=Ve.physicalType===3;if(qe===jo.FLAT){const dt=Fc(Ae)?NS(pe,ve,Re,Ge,Ae):Sa(pe,ve,Re,Ge);return new Vx(Ce.name,dt,Ae)}if(qe===jo.SEQUENCE){const dt=$S(pe,ve,Re);return new MS(Ce.name,dt[0],dt[1],Re.numRleValues)}{const dt=LS(pe,ve,Re,Ge);return new RS(Ce.name,dt,Ae)}})(D,N,ee,X,fe);case 9:return(function(pe,ve,Ce,Ve,Ae){let Re=null,qe=null,Ge=null,dt=null,Dt=null,Ct=null,Bt=null,cn=null;for(let Ut=0;Ut<Ve;Ut++){const Mt=Oa(ve,Ce);if(Mt.byteLength!==0)switch(Mt.physicalStreamType){case Ns.PRESENT:{const _t=a_(ve,Mt.numValues,Ce);Ct=new Eu(_t,Mt.numValues);break}case Ns.OFFSET:qe=Ae!=null||Ct!=null?NS(ve,Ce,Mt,!1,Ae??Ct):Sa(ve,Ce,Mt,!1);break;case Ns.LENGTH:{const _t=yp(ve,Ce,Mt);wa.DICTIONARY===Mt.logicalStreamType.lengthType?Re=_t:wa.SYMBOL===Mt.logicalStreamType.lengthType?dt=_t:Bt=_t;break}case Ns.DATA:{const _t=ve.subarray(Ce.get(),Ce.get()+Mt.byteLength);Ce.add(Mt.byteLength);const _n=Mt.logicalStreamType.dictionaryType;ku.FSST===_n?Dt=_t:ku.SINGLE===_n||ku.SHARED===_n?Ge=_t:ku.NONE===_n&&(cn=_t);break}}}return(function(Ut,Mt,_t,_n,mn,xn,dn){return Mt?new Yx(Ut,_t,_n,mn,xn,Mt,dn):null})(pe,Dt,qe,Re,Ge,dt,Ae??Ct)??(function(Ut,Mt,_t,_n,mn){return Mt?mn?new hg(Ut,_t,_n,Mt,mn):new hg(Ut,_t,_n,Mt):null})(pe,Ge,qe,Re,Ae??Ct)??(function(Ut,Mt,_t,_n,mn){if(!Mt||!_t)return null;if(_n)return mn?new hg(Ut,_n,Mt,_t,mn):new hg(Ut,_n,Mt,_t);if(mn&&mn.size()!==Mt.length-1){const xn=new Int32Array(mn.size());let dn=0;for(let Ln=0;Ln<mn.size();Ln++)xn[Ln]=mn.get(Ln)?dn++:0;return new hg(Ut,xn,Mt,_t,mn)}return mn?new Xx(Ut,Mt,_t,mn):new Xx(Ut,Mt,_t)})(pe,Bt,cn,qe,Ae??Ct)})(ee.name,D,N,ee.nullable?k-1:k,oe);case 0:return(function(pe,ve,Ce,Ve,Ae){const Re=Oa(pe,ve),qe=Re.numValues,Ge=ve.get(),dt=Fc(Ae)?(function(Ct,Bt,cn,Ut){const Mt=kE(Ct,Math.ceil(Bt/8),cn),_t=new Eu(Mt,Bt),_n=Ut.size(),mn=new Eu(new Uint8Array(_n),_n);let xn=0;for(let dn=0;dn<Ut.size();dn++){const Ln=!!Ut.get(dn)&&_t.get(xn++);mn.set(dn,Ln)}return mn.getBuffer()})(pe,qe,ve,Ae):a_(pe,qe,ve);ve.set(Ge+Re.byteLength);const Dt=new Eu(dt,qe);return new CE(Ce.name,Dt,Ae)})(D,N,ee,0,fe);case 6:case 5:return(function(pe,ve,Ce,Ve,Ae){const Re=Oa(pe,ve),qe=Zd(Re,Ve,pe,ve),Ge=Ae.physicalType===5;if(qe===jo.FLAT){const dt=Fc(Ve)?(function(Dt,Ct,Bt,cn,Ut){return(function(Mt,_t,_n,mn){switch(_t.logicalLevelTechnique1){case _r.DELTA:return _t.logicalLevelTechnique2===_r.RLE&&(Mt=bE(Mt,_t.runs,_t.numRleValues)),(function(xn,dn){const Ln=new BigInt64Array(xn.size());let jr=0;xn.get(0)?(Ln[0]=xn.get(0)?dn[0]>>1n^-(1n&dn[0]):0n,jr=1):Ln[0]=0n;let Or=1;for(;Or!=Ln.length;++Or)Ln[Or]=xn.get(Or)?Ln[Or-1]+(dn[jr]>>1n^-(1n&dn[jr++])):Ln[Or-1];return Ln})(mn,Mt);case _r.RLE:return(function(xn,dn,Ln,jr){const Or=dn;return Ln?(function(co,Ca,ps){const uo=new BigInt64Array(co.size());let Wi=0;for(let si=0;si<ps;si++){const Io=Number(Ca[si]);let Vo=Ca[si+ps];Vo=Vo>>1n^-(1n&Vo);for(let Fi=Wi;Fi<Wi+Io;Fi++)co.get(Fi)?uo[Fi]=Vo:(uo[Fi]=0n,Wi++);Wi+=Io}return uo})(jr,xn,Or.runs):(function(co,Ca,ps){const uo=new BigInt64Array(co.size());let Wi=0;for(let si=0;si<ps;si++){const Io=Number(Ca[si]),Vo=Ca[si+ps];for(let Fi=Wi;Fi<Wi+Io;Fi++)co.get(Fi)?uo[Fi]=Vo:(uo[Fi]=0n,Wi++);Wi+=Io}return uo})(jr,xn,Or.runs)})(Mt,_t,_n,mn);case _r.NONE:return Mt=_n?(function(xn,dn){const Ln=new BigInt64Array(xn.size());let jr=0,Or=0;for(;Or!=Ln.length;++Or)if(xn.get(Or)){const co=dn[jr++];Ln[Or]=co>>1n^-(1n&co)}else Ln[Or]=0n;return Ln})(mn,Mt):(function(xn,dn){const Ln=new BigInt64Array(xn.size());let jr=0,Or=0;for(;Or!=Ln.length;++Or)Ln[Or]=xn.get(Or)?dn[jr++]:0n;return Ln})(mn,Mt),Mt;default:throw new Error("The specified Logical level technique is not supported")}})(Kv(Dt,Ct,Bt.numValues),Bt,cn,Ut)})(pe,ve,Re,Ge,Ve):r0(pe,ve,Re,Ge);return new i0(Ce.name,dt,Ve)}if(qe===jo.SEQUENCE){const dt=ug(pe,ve,Re);return new BS(Ce.name,dt[0],dt[1],Re.numRleValues)}{const dt=zS(pe,ve,Re,Ge);return new s_(Ce.name,dt,Ve)}})(D,N,ee,fe,X);case 7:return(function(pe,ve,Ce,Ve){const Ae=Oa(pe,ve),Re=Fc(Ve)?(function(qe,Ge,dt,Dt){const Ct=Ge.get(),Bt=Ct+Dt*Float32Array.BYTES_PER_ELEMENT,cn=new Uint8Array(qe.subarray(Ct,Bt)).buffer,Ut=new Float32Array(cn);Ge.set(Bt);const Mt=dt.size(),_t=new Float32Array(Mt);let _n=0;for(let mn=0;mn<Mt;mn++)_t[mn]=dt.get(mn)?Ut[_n++]:0;return _t})(pe,ve,Ve,Ae.numValues):(function(qe,Ge,dt){const Dt=Ge.get(),Ct=Dt+dt*Float32Array.BYTES_PER_ELEMENT,Bt=new Uint8Array(qe.subarray(Dt,Ct)).buffer,cn=new Float32Array(Bt);return Ge.set(Ct),cn})(pe,ve,Ae.numValues);return new TE(Ce.name,Re,Ve)})(D,N,ee,fe);case 8:return(function(pe,ve,Ce,Ve){const Ae=Oa(pe,ve),Re=Fc(Ve)?(function(qe,Ge,dt,Dt){const Ct=Ge.get(),Bt=Ct+Dt*Float64Array.BYTES_PER_ELEMENT,cn=new Uint8Array(qe.subarray(Ct,Bt)).buffer,Ut=new Float64Array(cn);Ge.set(Bt);const Mt=dt.size(),_t=new Float64Array(Mt);let _n=0;for(let mn=0;mn<Mt;mn++)_t[mn]=dt.get(mn)?Ut[_n++]:0;return _t})(pe,ve,Ve,Ae.numValues):(function(qe,Ge,dt){const Dt=Ge.get(),Ct=Dt+dt*Float64Array.BYTES_PER_ELEMENT,Bt=new Uint8Array(qe.subarray(Dt,Ct)).buffer,cn=new Float64Array(Bt);return Ge.set(Ct),cn})(pe,ve,Ae.numValues);return new AS(Ce.name,Re,Ve)})(D,N,ee,fe);default:throw new Error(`The specified data type for the field is currently not supported: ${X}`)}})(v,d,l,x,h.scalarType,h):v!=1?null:(function(k,D,N,Z){let X=null,ee=null,oe=null,le=null,fe=!1;for(;!fe;){const Ve=Oa(k,D);switch(Ve.physicalStreamType){case Ns.LENGTH:wa.DICTIONARY===Ve.logicalStreamType.lengthType?X=yp(k,D,Ve):oe=yp(k,D,Ve);break;case Ns.DATA:ku.SINGLE===Ve.logicalStreamType.dictionaryType||ku.SHARED===Ve.logicalStreamType.dictionaryType?(ee=k.subarray(D.get(),D.get()+Ve.byteLength),fe=!0):le=k.subarray(D.get(),D.get()+Ve.byteLength),D.add(Ve.byteLength)}}const pe=N.complexType.children,ve=[];let Ce=0;for(const Ve of pe){const Ae=fs(k,D,1)[0];if(Ae==0)continue;const Re=`${N.name}${Ve.name==="default"?"":":"+Ve.name}`;if(Ae!==2||Ve.type!=="scalarField"||Ve.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const qe=Oa(k,D),Ge=a_(k,qe.numValues,D),dt=Oa(k,D),Dt=dt.decompressedCount!==Z?NS(k,D,dt,!1,new Eu(Ge,qe.numValues)):Sa(k,D,dt,!1);ve[Ce++]=le?new Yx(Re,Dt,X,ee,oe,le,new Eu(Ge,qe.numValues)):new hg(Re,Dt,X,ee,new Eu(Ge,qe.numValues))}return ve})(d,l,h,x)}function Fc(d){return d instanceof Eu}function _p(d){if(d.name==="id")return!1;if(d.type==="scalarType"){const l=d.scalarType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(l.type==="logicalType")return!1}else if(d.type==="complexType"){const l=d.complexType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",d),!1}const c_=new TextDecoder;function a0(d,l){const h=fs(d,l,1)[0];if(h===0)return"";const v=l.get(),x=d.subarray(v,v+h);return l.add(h),c_.decode(x)}function Wd(d,l){const h=fs(d,l,1)[0]>>>0,v=!!(4&h),x=!!(2&h),T=fs(d,l,1)[0]>>>0,k={};if(1&h&&(k.nullable=!0),x){const D={};if(v?(D.type="logicalType",D.logicalType=T):(D.type="physicalType",D.physicalType=T),8&h){const N=fs(d,l,1)[0]>>>0;D.children=new Array(N);for(let Z=0;Z<N;Z++)D.children[Z]=Wd(d,l)}k.type="complexField",k.complexField=D}else{const D={};v?(D.type="logicalType",D.logicalType=T):(D.type="physicalType",D.physicalType=T),k.type="scalarField",k.scalarField=D}return k}function BI(d,l){const h=fs(d,l,1)[0]>>>0,v=(function(x){switch(x){case 0:case 1:case 2:case 3:{const T={};T.nullable=!!(1&x),T.columnScope=0;const k={};return k.physicalType=x>1?6:4,k.type="physicalType",T.scalarType=k,T.type="scalarType",T}case 4:{const T={nullable:!1,columnScope:0},k={type:"physicalType",physicalType:0};return T.type="complexType",T.complexType=k,T}case 30:{const T={nullable:!1,columnScope:0},k={type:"physicalType",physicalType:1};return T.type="complexType",T.complexType=k,T}default:return(function(T){let k=null;switch(T){case 10:case 11:k=0;break;case 12:case 13:k=1;break;case 14:case 15:k=2;break;case 16:case 17:k=3;break;case 18:case 19:k=4;break;case 20:case 21:k=5;break;case 22:case 23:k=6;break;case 24:case 25:k=7;break;case 26:case 27:k=8;break;case 28:case 29:k=9;break;default:return null}const D={};D.nullable=!!(1&T),D.columnScope=0;const N={type:"physicalType"};return N.physicalType=k,D.type="scalarType",D.scalarType=N,D})(x)}})(h);if(!v)throw new Error(`Unsupported column type code: ${h}`);if((function(x){return x>=10})(h)?v.name=a0(d,l):h>=0&&h<=3?v.name="id":h===4&&(v.name="geometry"),(function(x){return x===30})(h)){const x=fs(d,l,1)[0]>>>0,T=v.complexType;T.children=new Array(x);for(let k=0;k<x;k++)T.children[k]=Wd(d,l)}return v}function EE(d,l){const h={featureTables:[]},v={};v.name=a0(d,l);const x=fs(d,l,1)[0]>>>0,T=fs(d,l,1)[0]>>>0;v.columns=new Array(T);for(let k=0;k<T;k++)v.columns[k]=BI(d,l);return h.featureTables.push(v),[h,x]}function u_(d,l,h,v,x,T,k=!1){const D=l.scalarType.physicalType,N=Zd(x,T,d,h);if(D===4)switch(N){case jo.FLAT:{const Z=Sa(d,h,x,!1);return new Vx(v,Z,T)}case jo.SEQUENCE:{const Z=$S(d,h,x);return new MS(v,Z[0],Z[1],x.numRleValues)}case jo.CONST:{const Z=LS(d,h,x,!1);return new RS(v,Z,T)}}else switch(N){case jo.FLAT:{if(k){const X=(function(ee,oe,le,fe){const pe=(function(ve,Ce,Ve){const Ae=new Float64Array(Ce);for(let Re=0;Re<Ce;Re++)Ae[Re]=_E(ve,Ve);return Ae})(ee,le.numValues,oe);return(function(ve,Ce,Ve){switch(Ce.logicalLevelTechnique1){case _r.DELTA:return Ce.logicalLevelTechnique2===_r.RLE&&(ve=xE(ve,Ce.runs,Ce.numRleValues)),(function(Ae){Ae[0]=Ae[0]%2==1?(Ae[0]+1)/-2:Ae[0]/2;const Re=Ae.length/4*4;let qe=1;if(Re>=4)for(;qe<Re-4;qe+=4){const Ge=Ae[qe],dt=Ae[qe+1],Dt=Ae[qe+2],Ct=Ae[qe+3];Ae[qe]=(Ge%2==1?(Ge+1)/-2:Ge/2)+Ae[qe-1],Ae[qe+1]=(dt%2==1?(dt+1)/-2:dt/2)+Ae[qe],Ae[qe+2]=(Dt%2==1?(Dt+1)/-2:Dt/2)+Ae[qe+1],Ae[qe+3]=(Ct%2==1?(Ct+1)/-2:Ct/2)+Ae[qe+2]}for(;qe!=Ae.length;++qe)Ae[qe]=(Ae[qe]%2==1?(Ae[qe]+1)/-2:Ae[qe]/2)+Ae[qe-1]})(ve),ve;case _r.RLE:return(function(Ae,Re,qe){return xE(Ae,Re.runs,Re.numRleValues)})(ve,Ce);case _r.NONE:return ve;default:throw new Error(`The specified Logical level technique is not supported: ${Ce.logicalLevelTechnique1}`)}})(pe,le)})(d,h,x);return new AS(v,X,T)}const Z=r0(d,h,x,!1);return new i0(v,Z,T)}case jo.SEQUENCE:{const Z=ug(d,h,x);return new BS(v,Z[0],Z[1],x.numRleValues)}case jo.CONST:{const Z=zS(d,h,x,!1);return new s_(v,Z,T)}}throw new Error("Vector type not supported for id column.")}class FI{constructor(l,h){var v;switch(this._featureData=l,this.properties=this._featureData.properties||{},(v=this._featureData.geometry)===null||v===void 0?void 0:v.type){case ds.POINT:case ds.MULTIPOINT:this.type=1;break;case ds.LINESTRING:case ds.MULTILINESTRING:this.type=2;break;case ds.POLYGON:case ds.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=h,this.id=Number(this._featureData.id)}loadGeometry(){const l=[];for(const h of this._featureData.geometry.coordinates){const v=[];for(const x of h)v.push(new u(x.x,x.y));l.push(v)}return l}}class AE{constructor(l){this.features=[],this.featureTable=l,this.name=l.name,this.extent=l.extent,this.version=2,this.features=l.getFeatures(),this.length=this.features.length}feature(l){return new FI(this.features[l],this.extent)}}class h_{constructor(l){this.layers={};const h=(function(v,x,T=!0){const k=new vE(0),D=[];for(;k.get()<v.length;){const N=fs(v,k,1)[0]>>>0,Z=k.get()+N;if(Z>v.length)throw new Error(`Block overruns tile: ${Z} > ${v.length}`);if(fs(v,k,1)[0]>>>0!=1){k.set(Z);continue}const X=EE(v,k),ee=X[1],oe=X[0].featureTables[0];let le=null,fe=null;const pe=[];let ve=0;for(const Ve of oe.columns){const Ae=Ve.name;if(Ae==="id"){let Re=null;if(Ve.nullable){const Ge=Oa(v,k),dt=k.get(),Dt=a_(v,Ge.numValues,k);k.set(dt+Ge.byteLength),Re=new Eu(Dt,Ge.numValues)}const qe=Oa(v,k);ve=qe.decompressedCount,le=u_(v,Ve,k,Ae,qe,Re??ve,T)}else if(Ae==="geometry"){const Re=fs(v,k,1)[0];if(ve===0){const qe=k.get();ve=Oa(v,k).decompressedCount,k.set(qe)}fe=SE(v,Re,k,ve)}else{const Re=_p(Ve)?fs(v,k,1)[0]:1;if(Re===0&&Ve.type==="scalarType")continue;const qe=vp(v,k,Ve,Re,ve);if(qe)if(Array.isArray(qe))for(const Ge of qe)pe.push(Ge);else pe.push(qe)}}const Ce=new pp(oe.name,fe,le,pe,ee);D.push(Ce),k.set(Z)}return D})(new Uint8Array(l));this.layers=h.reduce(((v,x)=>Object.assign(Object.assign({},v),{[x.name]:new AE(x)})),{})}}class PE{constructor(l,h){this.feature=l,this.type=l.type,this.properties=l.tags?l.tags:{},this.extent=h,"id"in l&&(typeof l.id=="string"?this.id=parseInt(l.id,10):typeof l.id!="number"||isNaN(l.id)||(this.id=l.id))}loadGeometry(){const l=[],h=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const v of h){const x=[];for(const T of v)x.push(new u(T[0],T[1]));l.push(x)}return l}}const d_="_geojsonTileLayer";function Kx(d,l){l.writeVarintField(15,d.version||1),l.writeStringField(1,d.name||""),l.writeVarintField(5,d.extent||4096);const h={keys:[],values:[],keycache:{},valuecache:{}};for(let T=0;T<d.length;T++)h.feature=d.feature(T),l.writeMessage(2,Jx,h);const v=h.keys;for(const T of v)l.writeStringField(3,T);const x=h.values;for(const T of x)l.writeMessage(4,e1,T)}function Jx(d,l){if(!d.feature)return;const h=d.feature;h.id!==void 0&&l.writeVarintField(1,h.id),l.writeMessage(2,ME,d),l.writeVarintField(3,h.type),l.writeMessage(4,qS,h)}function ME(d,l){for(const h in d.feature?.properties){let v=d.feature.properties[h],x=d.keycache[h];if(v==null)continue;x===void 0&&(d.keys.push(h),x=d.keys.length-1,d.keycache[h]=x),l.writeVarint(x),typeof v!="string"&&typeof v!="boolean"&&typeof v!="number"&&(v=JSON.stringify(v));const T=typeof v+":"+v;let k=d.valuecache[T];k===void 0&&(d.values.push(v),k=d.values.length-1,d.valuecache[T]=k),l.writeVarint(k)}}function bp(d,l){return(l<<3)+(7&d)}function ZS(d){return d<<1^d>>31}function qS(d,l){const h=d.loadGeometry(),v=d.type;let x=0,T=0;for(const k of h){let D=1;v===1&&(D=k.length),l.writeVarint(bp(1,D));const N=v===3?k.length-1:k.length;for(let Z=0;Z<N;Z++){Z===1&&v!==1&&l.writeVarint(bp(2,N-1));const X=k[Z].x-x,ee=k[Z].y-T;l.writeVarint(ZS(X)),l.writeVarint(ZS(ee)),x+=X,T+=ee}d.type===3&&l.writeVarint(bp(7,1))}}function e1(d,l){const h=typeof d;h==="string"?l.writeStringField(1,d):h==="boolean"?l.writeBooleanField(7,d):h==="number"&&(d%1!=0?l.writeDoubleField(3,d):d<0?l.writeSVarintField(6,d):l.writeVarintField(5,d))}class WS{constructor(l,h){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new xh(Qe,16,0),this.grid3D=new xh(Qe,16,0),this.featureIndexArray=new Oe,this.promoteId=h}insert(l,h,v,x,T,k){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,x,T);const N=k?this.grid3D:this.grid;for(let Z=0;Z<h.length;Z++){const X=h[Z],ee=[1/0,1/0,-1/0,-1/0];for(let oe=0;oe<X.length;oe++){const le=X[oe];ee[0]=Math.min(ee[0],le.x),ee[1]=Math.min(ee[1],le.y),ee[2]=Math.max(ee[2],le.x),ee[3]=Math.max(ee[3],le.y)}ee[0]<Qe&&ee[1]<Qe&&ee[2]>=0&&ee[3]>=0&&N.insert(D,ee[0],ee[1],ee[2],ee[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new Lr(new Tx(this.rawTileData)).layers:new h_(this.rawTileData).layers,this.sourceLayerCoder=new ES(this.vtLayers?Object.keys(this.vtLayers).sort():[d_])),this.vtLayers}query(l,h,v,x){this.loadVTLayers();const T=l.params,k=Qe/l.tileSize/l.scale,D=ma(T.filter,T.globalState),N=l.queryGeometry,Z=l.queryPadding*k,X=dp.fromPoints(N),ee=this.grid.query(X.minX-Z,X.minY-Z,X.maxX+Z,X.maxY+Z),oe=dp.fromPoints(l.cameraQueryGeometry).expandBy(Z),le=this.grid3D.query(oe.minX,oe.minY,oe.maxX,oe.maxY,((ve,Ce,Ve,Ae)=>(function(Re,qe,Ge,dt,Dt){for(const Bt of Re)if(qe<=Bt.x&&Ge<=Bt.y&&dt>=Bt.x&&Dt>=Bt.y)return!0;const Ct=[new u(qe,Ge),new u(qe,Dt),new u(dt,Dt),new u(dt,Ge)];if(Re.length>2){for(const Bt of Ct)if(Th(Re,Bt))return!0}for(let Bt=0;Bt<Re.length-1;Bt++)if($k(Re[Bt],Re[Bt+1],Ct))return!0;return!1})(l.cameraQueryGeometry,ve-Z,Ce-Z,Ve+Z,Ae+Z)));for(const ve of le)ee.push(ve);ee.sort(t1);const fe={};let pe;for(let ve=0;ve<ee.length;ve++){const Ce=ee[ve];if(Ce===pe)continue;pe=Ce;const Ve=this.featureIndexArray.get(Ce);let Ae=null;this.loadMatchingFeature(fe,Ve.bucketIndex,Ve.sourceLayerIndex,Ve.featureIndex,D,T.layers,T.availableImages,h,v,x,((Re,qe,Ge)=>(Ae||(Ae=wu(Re)),qe.queryIntersectsFeature({queryGeometry:N,feature:Re,featureState:Ge,geometry:Ae,zoom:this.z,transform:l.transform,pixelsToTileUnits:k,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation}))))}return fe}loadMatchingFeature(l,h,v,x,T,k,D,N,Z,X,ee){const oe=this.bucketLayerIDs[h];if(k&&!oe.some((ve=>k.has(ve))))return;const le=this.sourceLayerCoder.decode(v),fe=this.vtLayers[le].feature(x);if(T.needGeometry){const ve=Yl(fe,!0);if(!T.filter(new Xr(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!T.filter(new Xr(this.tileID.overscaledZ),fe))return;const pe=this.getId(fe,le);for(let ve=0;ve<oe.length;ve++){const Ce=oe[ve];if(k&&!k.has(Ce))continue;const Ve=N[Ce];if(!Ve)continue;let Ae={};pe&&X&&(Ae=X.getState(Ve.sourceLayer||d_,pe));const Re=bt({},Z[Ce]);Re.paint=RE(Re.paint,Ve.paint,fe,Ae,D),Re.layout=RE(Re.layout,Ve.layout,fe,Ae,D);const qe=!ee||ee(fe,Ve,Ae);if(!qe)continue;const Ge=new Fx(fe,this.z,this.x,this.y,pe);Ge.layer=Re;let dt=l[Ce];dt===void 0&&(dt=l[Ce]=[]),dt.push({featureIndex:x,feature:Ge,intersectionZ:qe})}}lookupSymbolFeatures(l,h,v,x,T,k,D,N){const Z={};this.loadVTLayers();const X=ma(T.filterSpec,T.globalState);for(const ee of l)this.loadMatchingFeature(Z,v,x,ee,X,k,D,N,h);return Z}hasLayer(l){for(const h of this.bucketLayerIDs)for(const v of h)if(l===v)return!0;return!1}getId(l,h){var v;let x=l.id;return this.promoteId&&(x=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof x=="boolean"&&(x=Number(x)),x===void 0&&(!((v=l.properties)===null||v===void 0)&&v.cluster)&&this.promoteId&&(x=Number(l.properties.cluster_id))),x}}function RE(d,l,h,v,x){return Tt(d,((T,k)=>{const D=l instanceof Ad?l.get(k):null;return D&&D.evaluate?D.evaluate(h,v,x):D}))}function t1(d,l){return l-d}function p(d,l,h,v,x){const T=[];for(let k=0;k<d.length;k++){const D=d[k];let N;for(let Z=0;Z<D.length-1;Z++){let X=D[Z],ee=D[Z+1];X.x<l&&ee.x<l||(X.x<l?X=new u(l,X.y+(l-X.x)/(ee.x-X.x)*(ee.y-X.y))._round():ee.x<l&&(ee=new u(l,X.y+(l-X.x)/(ee.x-X.x)*(ee.y-X.y))._round()),X.y<h&&ee.y<h||(X.y<h?X=new u(X.x+(h-X.y)/(ee.y-X.y)*(ee.x-X.x),h)._round():ee.y<h&&(ee=new u(X.x+(h-X.y)/(ee.y-X.y)*(ee.x-X.x),h)._round()),X.x>=v&&ee.x>=v||(X.x>=v?X=new u(v,X.y+(v-X.x)/(ee.x-X.x)*(ee.y-X.y))._round():ee.x>=v&&(ee=new u(v,X.y+(v-X.x)/(ee.x-X.x)*(ee.y-X.y))._round()),X.y>=x&&ee.y>=x||(X.y>=x?X=new u(X.x+(x-X.y)/(ee.y-X.y)*(ee.x-X.x),x)._round():ee.y>=x&&(ee=new u(X.x+(x-X.y)/(ee.y-X.y)*(ee.x-X.x),x)._round()),N&&X.equals(N[N.length-1])||(N=[X],T.push(N)),N.push(ee)))))}}return T}function y(d,l,h,v,x){switch(l){case 1:return(function(T,k,D,N){const Z=[];for(const X of T)for(const ee of X){const oe=N===0?ee.x:ee.y;oe>=k&&oe<=D&&Z.push([ee])}return Z})(d,h,v,x);case 2:return M(d,h,v,x,!1);case 3:return M(d,h,v,x,!0)}return[]}function O(d,l,h,v,x){const T=v===0?V:G;let k=[];const D=[];for(let X=0;X<d.length-1;X++){const ee=d[X],oe=d[X+1],le=v===0?ee.x:ee.y,fe=v===0?oe.x:oe.y;let pe=!1;le<l?fe>l&&k.push(T(ee,oe,l)):le>h?fe<h&&k.push(T(ee,oe,h)):k.push(ee),fe<l&&le>=l&&(k.push(T(ee,oe,l)),pe=!0),fe>h&&le<=h&&(k.push(T(ee,oe,h)),pe=!0),!x&&pe&&(D.push(k),k=[])}const N=d.length-1,Z=v===0?d[N].x:d[N].y;return Z>=l&&Z<=h&&k.push(d[N]),x&&k.length>0&&!k[0].equals(k[k.length-1])&&k.push(new u(k[0].x,k[0].y)),k.length>0&&D.push(k),D}function M(d,l,h,v,x){const T=[];for(const k of d){const D=O(k,l,h,v,x);D.length>0&&T.push(...D)}return T}function V(d,l,h){return new u(h,d.y+(h-d.x)/(l.x-d.x)*(l.y-d.y))}function G(d,l,h){return new u(d.x+(h-d.y)/(l.y-d.y)*(l.x-d.x),h)}pn("FeatureIndex",WS,{omit:["rawTileData","sourceLayerCoder"]});class de extends u{constructor(l,h,v,x){super(l,h),this.angle=v,x!==void 0&&(this.segment=x)}clone(){return new de(this.x,this.y,this.angle,this.segment)}}function Pe(d,l,h,v,x){if(l.segment===void 0||h===0)return!0;let T=l,k=l.segment+1,D=0;for(;D>-h/2;){if(k--,k<0)return!1;D-=d[k].dist(T),T=d[k]}D+=d[k].dist(d[k+1]),k++;const N=[];let Z=0;for(;D<h/2;){const X=d[k],ee=d[k+1];if(!ee)return!1;let oe=d[k-1].angleTo(X)-X.angleTo(ee);for(oe=Math.abs((oe+3*Math.PI)%(2*Math.PI)-Math.PI),N.push({distance:D,angleDelta:oe}),Z+=oe;D-N[0].distance>v;)Z-=N.shift().angleDelta;if(Z>x)return!1;k++,D+=X.dist(ee)}return!0}function et(d){let l=0;for(let h=0;h<d.length-1;h++)l+=d[h].dist(d[h+1]);return l}function wt(d,l,h){return d?.6*l*h:0}function Lt(d,l){return Math.max(d?d.right-d.left:0,l?l.right-l.left:0)}function qt(d,l,h,v,x,T){const k=wt(h,x,T),D=Lt(h,v)*T;let N=0;const Z=et(d)/2;for(let X=0;X<d.length-1;X++){const ee=d[X],oe=d[X+1],le=ee.dist(oe);if(N+le>Z){const fe=(Z-N)/le,pe=$i.number(ee.x,oe.x,fe),ve=$i.number(ee.y,oe.y,fe),Ce=new de(pe,ve,oe.angleTo(ee),X);return Ce._round(),!k||Pe(d,Ce,D,k,l)?Ce:void 0}N+=le}}function St(d,l,h,v,x,T,k,D,N){const Z=wt(v,T,k),X=Lt(v,x),ee=X*k,oe=d[0].x===0||d[0].x===N||d[0].y===0||d[0].y===N;return l-ee<l/4&&(l=ee+l/4),Pt(d,oe?l/2*D%l:(X/2+2*T)*k*D%l,l,Z,h,ee,oe,!1,N)}function Pt(d,l,h,v,x,T,k,D,N){const Z=T/2,X=et(d);let ee=0,oe=l-h,le=[];for(let fe=0;fe<d.length-1;fe++){const pe=d[fe],ve=d[fe+1],Ce=pe.dist(ve),Ve=ve.angleTo(pe);for(;oe+h<ee+Ce;){oe+=h;const Ae=(oe-ee)/Ce,Re=$i.number(pe.x,ve.x,Ae),qe=$i.number(pe.y,ve.y,Ae);if(Re>=0&&Re<N&&qe>=0&&qe<N&&oe-Z>=0&&oe+Z<=X){const Ge=new de(Re,qe,Ve,fe);Ge._round(),v&&!Pe(d,Ge,T,v,x)||le.push(Ge)}}ee+=Ce}return D||le.length||k||(le=Pt(d,ee/2,h,v,x,T,k,!0,N)),le}function In(d,l,h,v){const x=[],T=d.image,k=T.pixelRatio,D=T.paddedRect.w-2,N=T.paddedRect.h-2;let Z={x1:d.left,y1:d.top,x2:d.right,y2:d.bottom};const X=T.stretchX||[[0,D]],ee=T.stretchY||[[0,N]],oe=(_t,_n)=>_t+_n[1]-_n[0],le=X.reduce(oe,0),fe=ee.reduce(oe,0),pe=D-le,ve=N-fe;let Ce=0,Ve=le,Ae=0,Re=fe,qe=0,Ge=pe,dt=0,Dt=ve;if(T.content&&v){const _t=T.content,_n=_t[2]-_t[0],mn=_t[3]-_t[1];(T.textFitWidth||T.textFitHeight)&&(Z=Ud(d)),Ce=qn(X,0,_t[0]),Ae=qn(ee,0,_t[1]),Ve=qn(X,_t[0],_t[2]),Re=qn(ee,_t[1],_t[3]),qe=_t[0]-Ce,dt=_t[1]-Ae,Ge=_n-Ve,Dt=mn-Re}const Ct=Z.x1,Bt=Z.y1,cn=Z.x2-Ct,Ut=Z.y2-Bt,Mt=(_t,_n,mn,xn)=>{const dn=lt(_t.stretch-Ce,Ve,cn,Ct),Ln=it(_t.fixed-qe,Ge,_t.stretch,le),jr=lt(_n.stretch-Ae,Re,Ut,Bt),Or=it(_n.fixed-dt,Dt,_n.stretch,fe),co=lt(mn.stretch-Ce,Ve,cn,Ct),Ca=it(mn.fixed-qe,Ge,mn.stretch,le),ps=lt(xn.stretch-Ae,Re,Ut,Bt),uo=it(xn.fixed-dt,Dt,xn.stretch,fe),Wi=new u(dn,jr),si=new u(co,jr),Io=new u(co,ps),Vo=new u(dn,ps),Fi=new u(Ln/k,Or/k),tc=new u(Ca/k,uo/k),Ta=l*Math.PI/180;if(Ta){const Fs=Math.sin(Ta),xo=Math.cos(Ta),ms=[xo,-Fs,Fs,xo];Wi._matMult(ms),si._matMult(ms),Vo._matMult(ms),Io._matMult(ms)}const nc=_t.stretch+_t.fixed,Rh=_n.stretch+_n.fixed;return{tl:Wi,tr:si,bl:Vo,br:Io,tex:{x:T.paddedRect.x+1+nc,y:T.paddedRect.y+1+Rh,w:mn.stretch+mn.fixed-nc,h:xn.stretch+xn.fixed-Rh},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Fi,pixelOffsetBR:tc,minFontScaleX:Ge/k/cn,minFontScaleY:Dt/k/Ut,isSDF:h}};if(v&&(T.stretchX||T.stretchY)){const _t=xi(X,pe,le),_n=xi(ee,ve,fe);for(let mn=0;mn<_t.length-1;mn++){const xn=_t[mn],dn=_t[mn+1];for(let Ln=0;Ln<_n.length-1;Ln++)x.push(Mt(xn,_n[Ln],dn,_n[Ln+1]))}}else x.push(Mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:N+1}));return x}function qn(d,l,h){let v=0;for(const x of d)v+=Math.max(l,Math.min(h,x[1]))-Math.max(l,Math.min(h,x[0]));return v}function xi(d,l,h){const v=[{fixed:-1,stretch:0}];for(const[x,T]of d){const k=v[v.length-1];v.push({fixed:x-k.stretch,stretch:k.stretch}),v.push({fixed:x-k.stretch,stretch:k.stretch+(T-x)})}return v.push({fixed:l+1,stretch:h}),v}function lt(d,l,h,v){return d/l*h+v}function it(d,l,h,v){return d-l*h/v}pn("Anchor",de);class vt{constructor(l,h,v,x,T,k,D,N,Z,X){var ee;if(this.boxStartIndex=l.length,Z){let oe=k.top,le=k.bottom;const fe=k.collisionPadding;fe&&(oe-=fe[1],le+=fe[3]);let pe=le-oe;pe>0&&(pe=Math.max(10,pe),this.circleDiameter=pe)}else{const oe=!((ee=k.image)===null||ee===void 0)&&ee.content&&(k.image.textFitWidth||k.image.textFitHeight)?Ud(k):{x1:k.left,y1:k.top,x2:k.right,y2:k.bottom};oe.y1=oe.y1*D-N[0],oe.y2=oe.y2*D+N[2],oe.x1=oe.x1*D-N[3],oe.x2=oe.x2*D+N[1];const le=k.collisionPadding;if(le&&(oe.x1-=le[0]*D,oe.y1-=le[1]*D,oe.x2+=le[2]*D,oe.y2+=le[3]*D),X){const fe=new u(oe.x1,oe.y1),pe=new u(oe.x2,oe.y1),ve=new u(oe.x1,oe.y2),Ce=new u(oe.x2,oe.y2),Ve=X*Math.PI/180;fe._rotate(Ve),pe._rotate(Ve),ve._rotate(Ve),Ce._rotate(Ve),oe.x1=Math.min(fe.x,pe.x,ve.x,Ce.x),oe.x2=Math.max(fe.x,pe.x,ve.x,Ce.x),oe.y1=Math.min(fe.y,pe.y,ve.y,Ce.y),oe.y2=Math.max(fe.y,pe.y,ve.y,Ce.y)}l.emplaceBack(h.x,h.y,oe.x1,oe.y1,oe.x2,oe.y2,v,x,T)}this.boxEndIndex=l.length}}class Qt{constructor(l=[],h=(v,x)=>v<x?-1:v>x?1:0){if(this.data=l,this.length=this.data.length,this.compare=h,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:h,compare:v}=this,x=h[l];for(;l>0;){const T=l-1>>1,k=h[T];if(v(x,k)>=0)break;h[l]=k,l=T}h[l]=x}_down(l){const{data:h,compare:v}=this,x=this.length>>1,T=h[l];for(;l<x;){let k=1+(l<<1);const D=k+1;if(D<this.length&&v(h[D],h[k])<0&&(k=D),v(h[k],T)>=0)break;h[l]=h[k],l=k}h[l]=T}}function Qn(d,l=1,h=!1){const v=dp.fromPoints(d[0]),x=Math.min(v.width(),v.height());let T=x/2;const k=new Qt([],oi),{minX:D,minY:N,maxX:Z,maxY:X}=v;if(x===0)return new u(D,N);for(let le=D;le<Z;le+=x)for(let fe=N;fe<X;fe+=x)k.push(new Dn(le+T,fe+T,T,d));let ee=(function(le){let fe=0,pe=0,ve=0;const Ce=le[0];for(let Ve=0,Ae=Ce.length,Re=Ae-1;Ve<Ae;Re=Ve++){const qe=Ce[Ve],Ge=Ce[Re],dt=qe.x*Ge.y-Ge.x*qe.y;pe+=(qe.x+Ge.x)*dt,ve+=(qe.y+Ge.y)*dt,fe+=3*dt}return new Dn(pe/fe,ve/fe,0,le)})(d),oe=k.length;for(;k.length;){const le=k.pop();(le.d>ee.d||!ee.d)&&(ee=le,h&&console.log("found best %d after %d probes",Math.round(1e4*le.d)/1e4,oe)),le.max-ee.d<=l||(T=le.h/2,k.push(new Dn(le.p.x-T,le.p.y-T,T,d)),k.push(new Dn(le.p.x+T,le.p.y-T,T,d)),k.push(new Dn(le.p.x-T,le.p.y+T,T,d)),k.push(new Dn(le.p.x+T,le.p.y+T,T,d)),oe+=4)}return h&&(console.log(`num probes: ${oe}`),console.log(`best distance: ${ee.d}`)),ee.p}function oi(d,l){return l.max-d.max}function Dn(d,l,h,v){this.p=new u(d,l),this.h=h,this.d=(function(x,T){let k=!1,D=1/0;for(let N=0;N<T.length;N++){const Z=T[N];for(let X=0,ee=Z.length,oe=ee-1;X<ee;oe=X++){const le=Z[X],fe=Z[oe];le.y>x.y!=fe.y>x.y&&x.x<(fe.x-le.x)*(x.y-le.y)/(fe.y-le.y)+le.x&&(k=!k),D=Math.min(D,XO(x,le,fe))}}return(k?1:-1)*Math.sqrt(D)})(this.p,v),this.max=this.d+this.h*Math.SQRT2}var Bn;a.aP=void 0,(Bn=a.aP||(a.aP={}))[Bn.center=1]="center",Bn[Bn.left=2]="left",Bn[Bn.right=3]="right",Bn[Bn.top=4]="top",Bn[Bn.bottom=5]="bottom",Bn[Bn["top-left"]=6]="top-left",Bn[Bn["top-right"]=7]="top-right",Bn[Bn["bottom-left"]=8]="bottom-left",Bn[Bn["bottom-right"]=9]="bottom-right";const Ir=Number.POSITIVE_INFINITY;function Kr(d,l){return l[1]!==Ir?(function(h,v,x){let T=0,k=0;switch(v=Math.abs(v),x=Math.abs(x),h){case"top-right":case"top-left":case"top":k=x-7;break;case"bottom-right":case"bottom-left":case"bottom":k=7-x}switch(h){case"top-right":case"bottom-right":case"right":T=-v;break;case"top-left":case"bottom-left":case"left":T=v}return[T,k]})(d,l[0],l[1]):(function(h,v){let x=0,T=0;v<0&&(v=0);const k=v/Math.SQRT2;switch(h){case"top-right":case"top-left":T=k-7;break;case"bottom-right":case"bottom-left":T=7-k;break;case"bottom":T=7-v;break;case"top":T=v-7}switch(h){case"top-right":case"bottom-right":x=-k;break;case"top-left":case"bottom-left":x=k;break;case"left":x=v;break;case"right":x=-v}return[x,T]})(d,l[0])}function Hd(d,l,h){var v;const x=d.layout,T=(v=x.get("text-variable-anchor-offset"))===null||v===void 0?void 0:v.evaluate(l,{},h);if(T){const D=T.values,N=[];for(let Z=0;Z<D.length;Z+=2){const X=N[Z]=D[Z],ee=D[Z+1].map((oe=>oe*Ko));X.startsWith("top")?ee[1]-=7:X.startsWith("bottom")&&(ee[1]+=7),N[Z+1]=ee}return new ro(N)}const k=x.get("text-variable-anchor");if(k){let D;D=d._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[x.get("text-radial-offset").evaluate(l,{},h)*Ko,Ir]:x.get("text-offset").evaluate(l,{},h).map((Z=>Z*Ko));const N=[];for(const Z of k)N.push(Z,Kr(Z,D));return new ro(N)}return null}function HS(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Gce(d,l,h,v,x,T,k,D,N,Z,X,ee){let oe=T.textMaxSize.evaluate(l,{});oe===void 0&&(oe=k);const le=d.layers[0].layout,fe=le.get("icon-offset").evaluate(l,{},X),pe=oF(h.horizontal),ve=k/24,Ce=d.tilePixelRatio*ve,Ve=d.tilePixelRatio*oe/24,Ae=d.tilePixelRatio*D,Re=d.tilePixelRatio*le.get("symbol-spacing"),qe=le.get("text-padding")*d.tilePixelRatio,Ge=(function(mn,xn,dn,Ln=1){const jr=mn.get("icon-padding").evaluate(xn,{},dn),Or=jr&&jr.values;return[Or[0]*Ln,Or[1]*Ln,Or[2]*Ln,Or[3]*Ln]})(le,l,X,d.tilePixelRatio),dt=le.get("text-max-angle")/180*Math.PI,Dt=le.get("text-rotation-alignment")!=="viewport"&&le.get("symbol-placement")!=="point",Ct=le.get("icon-rotation-alignment")==="map"&&le.get("symbol-placement")!=="point",Bt=le.get("symbol-placement"),cn=Re/2,Ut=le.get("icon-text-fit");let Mt;v&&Ut!=="none"&&(d.allowVerticalPlacement&&h.vertical&&(Mt=Cu(v,h.vertical,Ut,le.get("icon-text-fit-padding"),fe,ve)),pe&&(v=Cu(v,pe,Ut,le.get("icon-text-fit-padding"),fe,ve)));const _t=X?ee.line.getGranularityForZoomLevel(X.z):1,_n=(mn,xn)=>{xn.x<0||xn.x>=Qe||xn.y<0||xn.y>=Qe||(function(dn,Ln,jr,Or,co,Ca,ps,uo,Wi,si,Io,Vo,Fi,tc,Ta,nc,Rh,Fs,xo,ms,Do,js,dg,Gd,YS){const l0=dn.addToLineVertexArray(Ln,jr);let f_,n1,r1,i1,cF=0,uF=0,hF=0,dF=0,HI=-1,GI=-1;const fg={};let fF=ao("");if(dn.allowVerticalPlacement&&Or.vertical){const Ha=uo.layout.get("text-rotate").evaluate(Do,{},Gd)+90;r1=new vt(Wi,Ln,si,Io,Vo,Or.vertical,Fi,tc,Ta,Ha),ps&&(i1=new vt(Wi,Ln,si,Io,Vo,ps,Rh,Fs,Ta,Ha))}if(co){const Ha=uo.layout.get("icon-rotate").evaluate(Do,{}),Au=uo.layout.get("icon-text-fit")!=="none",p_=In(co,Ha,dg,Au),Yd=ps?In(ps,Ha,dg,Au):void 0;n1=new vt(Wi,Ln,si,Io,Vo,co,Rh,Fs,!1,Ha),cF=4*p_.length;const m_=dn.iconSizeData;let xp=null;m_.kind==="source"?(xp=[Jl*uo.layout.get("icon-size").evaluate(Do,{})],xp[0]>up&&rn(`${dn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):m_.kind==="composite"&&(xp=[Jl*js.compositeIconSizes[0].evaluate(Do,{},Gd),Jl*js.compositeIconSizes[1].evaluate(Do,{},Gd)],(xp[0]>up||xp[1]>up)&&rn(`${dn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),dn.addSymbols(dn.icon,p_,xp,ms,xo,Do,a.az.none,Ln,l0.lineStartIndex,l0.lineLength,-1,Gd),HI=dn.icon.placedSymbolArray.length-1,Yd&&(uF=4*Yd.length,dn.addSymbols(dn.icon,Yd,xp,ms,xo,Do,a.az.vertical,Ln,l0.lineStartIndex,l0.lineLength,-1,Gd),GI=dn.icon.placedSymbolArray.length-1)}const pF=Object.keys(Or.horizontal);for(const Ha of pF){const Au=Or.horizontal[Ha];if(!f_){fF=ao(Au.text);const Yd=uo.layout.get("text-rotate").evaluate(Do,{},Gd);f_=new vt(Wi,Ln,si,Io,Vo,Au,Fi,tc,Ta,Yd)}const p_=Au.positionedLines.length===1;if(hF+=iF(dn,Ln,Au,Ca,uo,Ta,Do,nc,l0,Or.vertical?a.az.horizontal:a.az.horizontalOnly,p_?pF:[Ha],fg,HI,js,Gd),p_)break}Or.vertical&&(dF+=iF(dn,Ln,Or.vertical,Ca,uo,Ta,Do,nc,l0,a.az.vertical,["vertical"],fg,GI,js,Gd));const Kce=f_?f_.boxStartIndex:dn.collisionBoxArray.length,Jce=f_?f_.boxEndIndex:dn.collisionBoxArray.length,eue=r1?r1.boxStartIndex:dn.collisionBoxArray.length,tue=r1?r1.boxEndIndex:dn.collisionBoxArray.length,nue=n1?n1.boxStartIndex:dn.collisionBoxArray.length,rue=n1?n1.boxEndIndex:dn.collisionBoxArray.length,iue=i1?i1.boxStartIndex:dn.collisionBoxArray.length,oue=i1?i1.boxEndIndex:dn.collisionBoxArray.length;let Xd=-1;const DE=(Ha,Au)=>Ha&&Ha.circleDiameter?Math.max(Ha.circleDiameter,Au):Au;Xd=DE(f_,Xd),Xd=DE(r1,Xd),Xd=DE(n1,Xd),Xd=DE(i1,Xd);const mF=Xd>-1?1:0;mF&&(Xd*=YS/Ko),dn.glyphOffsetArray.length>=Jy.MAX_GLYPHS&&rn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Do.sortKey!==void 0&&dn.addToSortKeyRanges(dn.symbolInstances.length,Do.sortKey);const sue=Hd(uo,Do,Gd),[aue,lue]=(function(Ha,Au){const p_=Ha.length,Yd=Au?.values;if(Yd?.length>0)for(let m_=0;m_<Yd.length;m_+=2){const xp=Yd[m_+1];Ha.emplaceBack(a.aP[Yd[m_]],xp[0],xp[1])}return[p_,Ha.length]})(dn.textAnchorOffsets,sue);dn.symbolInstances.emplaceBack(Ln.x,Ln.y,fg.right>=0?fg.right:-1,fg.center>=0?fg.center:-1,fg.left>=0?fg.left:-1,fg.vertical||-1,HI,GI,fF,Kce,Jce,eue,tue,nue,rue,iue,oue,si,hF,dF,cF,uF,mF,0,Fi,Xd,aue,lue)})(d,xn,mn,h,v,x,Mt,d.layers[0],d.collisionBoxArray,l.index,l.sourceLayerIndex,d.index,Ce,[qe,qe,qe,qe],Dt,N,Ae,Ge,Ct,fe,l,T,Z,X,k)};if(Bt==="line")for(const mn of p(l.geometry,0,0,Qe,Qe)){const xn=Bd(mn,_t),dn=St(xn,Re,dt,h.vertical||pe,v,24,Ve,d.overscaling,Qe);for(const Ln of dn)pe&&Xce(d,pe.text,cn,Ln)||_n(xn,Ln)}else if(Bt==="line-center"){for(const mn of l.geometry)if(mn.length>1){const xn=Bd(mn,_t),dn=qt(xn,dt,h.vertical||pe,v,24,Ve);dn&&_n(xn,dn)}}else if(l.type==="Polygon")for(const mn of Pm(l.geometry,0)){const xn=Qn(mn,16);_n(Bd(mn[0],_t,!0),new de(xn.x,xn.y,0))}else if(l.type==="LineString")for(const mn of l.geometry){const xn=Bd(mn,_t);_n(xn,new de(xn[0].x,xn[0].y,0))}else if(l.type==="Point")for(const mn of l.geometry)for(const xn of mn)_n([xn],new de(xn.x,xn.y,0))}function iF(d,l,h,v,x,T,k,D,N,Z,X,ee,oe,le,fe){const pe=(function(Ve,Ae,Re,qe,Ge,dt,Dt,Ct){const Bt=qe.layout.get("text-rotate").evaluate(dt,{})*Math.PI/180,cn=[];for(const Ut of Ae.positionedLines)for(const Mt of Ut.positionedGlyphs){if(!Mt.rect)continue;const _t=Mt.rect||{};let _n=4,mn=!0,xn=1,dn=0;const Ln=(Ge||Ct)&&Mt.vertical,jr=Mt.metrics.advance*Mt.scale/2;if(Ct&&Ae.verticalizable&&(dn=Ut.lineOffset/2-(Mt.imageName?-(Ko-Mt.metrics.width*Mt.scale)/2:(Mt.scale-1)*Ko)),Mt.imageName){const Fs=Dt[Mt.imageName];mn=Fs.sdf,xn=Fs.pixelRatio,_n=1/xn}const Or=Ge?[Mt.x+jr,Mt.y]:[0,0];let co=Ge?[0,0]:[Mt.x+jr+Re[0],Mt.y+Re[1]-dn],Ca=[0,0];Ln&&(Ca=co,co=[0,0]);const ps=Mt.metrics.isDoubleResolution?2:1,uo=(Mt.metrics.left-_n)*Mt.scale-jr+co[0],Wi=(-Mt.metrics.top-_n)*Mt.scale+co[1],si=uo+_t.w/ps*Mt.scale/xn,Io=Wi+_t.h/ps*Mt.scale/xn,Vo=new u(uo,Wi),Fi=new u(si,Wi),tc=new u(uo,Io),Ta=new u(si,Io);if(Ln){const Fs=new u(-jr,jr- -17),xo=-Math.PI/2,ms=12-jr,Do=new u(22-ms,-(Mt.imageName?ms:0)),js=new u(...Ca);Vo._rotateAround(xo,Fs)._add(Do)._add(js),Fi._rotateAround(xo,Fs)._add(Do)._add(js),tc._rotateAround(xo,Fs)._add(Do)._add(js),Ta._rotateAround(xo,Fs)._add(Do)._add(js)}if(Bt){const Fs=Math.sin(Bt),xo=Math.cos(Bt),ms=[xo,-Fs,Fs,xo];Vo._matMult(ms),Fi._matMult(ms),tc._matMult(ms),Ta._matMult(ms)}const nc=new u(0,0),Rh=new u(0,0);cn.push({tl:Vo,tr:Fi,bl:tc,br:Ta,tex:_t,writingMode:Ae.writingMode,glyphOffset:Or,sectionIndex:Mt.sectionIndex,isSDF:mn,pixelOffsetTL:nc,pixelOffsetBR:Rh,minFontScaleX:0,minFontScaleY:0})}return cn})(0,h,D,x,T,k,v,d.allowVerticalPlacement),ve=d.textSizeData;let Ce=null;ve.kind==="source"?(Ce=[Jl*x.layout.get("text-size").evaluate(k,{})],Ce[0]>up&&rn(`${d.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ve.kind==="composite"&&(Ce=[Jl*le.compositeTextSizes[0].evaluate(k,{},fe),Jl*le.compositeTextSizes[1].evaluate(k,{},fe)],(Ce[0]>up||Ce[1]>up)&&rn(`${d.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),d.addSymbols(d.text,pe,Ce,D,T,k,Z,l,N.lineStartIndex,N.lineLength,oe,fe);for(const Ve of X)ee[Ve]=d.text.placedSymbolArray.length-1;return 4*pe.length}function oF(d){for(const l in d)return d[l];return null}function Xce(d,l,h,v){const x=d.compareText;if(l in x){const T=x[l];for(let k=T.length-1;k>=0;k--)if(v.dist(T[k])<h)return!0}else x[l]=[];return x[l].push(v),!1}const sF=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class jI{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,v]=new Uint8Array(l,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const x=v>>4;if(x!==1)throw new Error(`Got v${x} data when expected v1.`);const T=sF[15&v];if(!T)throw new Error("Unrecognized array type.");const[k]=new Uint16Array(l,2,1),[D]=new Uint32Array(l,4,1);return new jI(D,k,T,l)}constructor(l,h=64,v=Float64Array,x){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=v,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const T=sF.indexOf(this.ArrayType),k=2*l*this.ArrayType.BYTES_PER_ELEMENT,D=l*this.IndexArrayType.BYTES_PER_ELEMENT,N=(8-D%8)%8;if(T<0)throw new Error(`Unexpected typed array class: ${v}.`);x&&x instanceof ArrayBuffer?(this.data=x,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+D+N,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+k+D+N),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+D+N,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+T]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=l)}add(l,h){const v=this._pos>>1;return this.ids[v]=v,this.coords[this._pos++]=l,this.coords[this._pos++]=h,v}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return VI(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,h,v,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:k,nodeSize:D}=this,N=[0,T.length-1,0],Z=[];for(;N.length;){const X=N.pop()||0,ee=N.pop()||0,oe=N.pop()||0;if(ee-oe<=D){for(let ve=oe;ve<=ee;ve++){const Ce=k[2*ve],Ve=k[2*ve+1];Ce>=l&&Ce<=v&&Ve>=h&&Ve<=x&&Z.push(T[ve])}continue}const le=oe+ee>>1,fe=k[2*le],pe=k[2*le+1];fe>=l&&fe<=v&&pe>=h&&pe<=x&&Z.push(T[le]),(X===0?l<=fe:h<=pe)&&(N.push(oe),N.push(le-1),N.push(1-X)),(X===0?v>=fe:x>=pe)&&(N.push(le+1),N.push(ee),N.push(1-X))}return Z}within(l,h,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:T,nodeSize:k}=this,D=[0,x.length-1,0],N=[],Z=v*v;for(;D.length;){const X=D.pop()||0,ee=D.pop()||0,oe=D.pop()||0;if(ee-oe<=k){for(let ve=oe;ve<=ee;ve++)lF(T[2*ve],T[2*ve+1],l,h)<=Z&&N.push(x[ve]);continue}const le=oe+ee>>1,fe=T[2*le],pe=T[2*le+1];lF(fe,pe,l,h)<=Z&&N.push(x[le]),(X===0?l-v<=fe:h-v<=pe)&&(D.push(oe),D.push(le-1),D.push(1-X)),(X===0?l+v>=fe:h+v>=pe)&&(D.push(le+1),D.push(ee),D.push(1-X))}return N}}function VI(d,l,h,v,x,T){if(x-v<=h)return;const k=v+x>>1;aF(d,l,k,v,x,T),VI(d,l,h,v,k-1,1-T),VI(d,l,h,k+1,x,1-T)}function aF(d,l,h,v,x,T){for(;x>v;){if(x-v>600){const Z=x-v+1,X=h-v+1,ee=Math.log(Z),oe=.5*Math.exp(2*ee/3),le=.5*Math.sqrt(ee*oe*(Z-oe)/Z)*(X-Z/2<0?-1:1);aF(d,l,h,Math.max(v,Math.floor(h-X*oe/Z+le)),Math.min(x,Math.floor(h+(Z-X)*oe/Z+le)),T)}const k=l[2*h+T];let D=v,N=x;for(GS(d,l,v,h),l[2*x+T]>k&&GS(d,l,v,x);D<N;){for(GS(d,l,D,N),D++,N--;l[2*D+T]<k;)D++;for(;l[2*N+T]>k;)N--}l[2*v+T]===k?GS(d,l,v,N):(N++,GS(d,l,N,x)),N<=h&&(v=N+1),h<=N&&(x=N-1)}}function GS(d,l,h,v){QI(d,h,v),QI(l,2*h,2*v),QI(l,2*h+1,2*v+1)}function QI(d,l,h){const v=d[l];d[l]=d[h],d[h]=v}function lF(d,l,h,v){const x=d-h,T=l-v;return x*x+T*T}var UI;a.cH=void 0,(UI=a.cH||(a.cH={})).create="create",UI.load="load",UI.fullLoad="fullLoad";let IE=null,XS=[];const ZI=1e3/60,qI="loadTime",WI="fullLoadTime",Yce={mark(d){performance.mark(d)},frame(d){const l=d;IE!=null&&XS.push(l-IE),IE=l},clearMetrics(){IE=null,XS=[],performance.clearMeasures(qI),performance.clearMeasures(WI);for(const d in a.cH)performance.clearMarks(a.cH[d])},getPerformanceMetrics(){performance.measure(qI,a.cH.create,a.cH.load),performance.measure(WI,a.cH.create,a.cH.fullLoad);const d=performance.getEntriesByName(qI)[0].duration,l=performance.getEntriesByName(WI)[0].duration,h=XS.length,v=1/(XS.reduce(((T,k)=>T+k),0)/h/1e3),x=XS.filter((T=>T>ZI)).reduce(((T,k)=>T+(k-ZI)/ZI),0);return{loadTime:d,fullLoadTime:l,fps:v,percentDroppedFrames:x/(h+x)*100,totalFrames:h}}};a.$=R,a.A=B,a.B=Ul,a.C=Yo,a.D=yn,a.E=Tr,a.F=function([d,l,h]){return l+=90,l*=Math.PI/180,h*=Math.PI/180,{x:d*Math.cos(l)*Math.sin(h),y:d*Math.sin(l)*Math.sin(h),z:d*Math.cos(h)}},a.G=$i,a.H=Xr,a.I=pi,a.J=My,a.K=function(d){if(vn==null){const l=d.navigator?d.navigator.userAgent:null;vn=!!d.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return vn},a.L=class{constructor(d,l){this.target=d,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new zx((()=>this.process())),this.subscription=xt(this.target,"message",(h=>this.receive(h)),!1),this.globalScope=Mn(self)?d:window}registerMessageHandler(d,l){this.messageHandlers[d]=l}unregisterMessageHandler(d){delete this.messageHandlers[d]}sendAsync(d,l){return new Promise(((h,v)=>{const x=Math.round(1e18*Math.random()).toString(36).substring(0,10),T=l?xt(l.signal,"abort",(()=>{T?.unsubscribe(),delete this.resolveRejects[x];const N={id:x,type:"<cancel>",origin:location.origin,targetMapId:d.targetMapId,sourceMapId:this.mapId};this.target.postMessage(N)}),SS):null;this.resolveRejects[x]={resolve:N=>{T?.unsubscribe(),h(N)},reject:N=>{T?.unsubscribe(),v(N)}};const k=[],D=Object.assign(Object.assign({},d),{id:x,sourceMapId:this.mapId,origin:location.origin,data:Zl(d.data,k)});this.target.postMessage(D,{transfer:k})}))}receive(d){const l=d.data,h=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[h];const v=this.abortControllers[h];return delete this.abortControllers[h],void(v&&v.abort())}if(Mn(self)||l.mustQueue)return this.tasks[h]=l,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,l)}}process(){if(this.taskQueue.length===0)return;const d=this.taskQueue.shift(),l=this.tasks[d];delete this.tasks[d],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(d,l)}processTask(d,l){return s(this,void 0,void 0,(function*(){if(l.type==="<response>"){const x=this.resolveRejects[d];return delete this.resolveRejects[d],x?void(l.error?x.reject(ep(l.error)):x.resolve(ep(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(d,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=ep(l.data),v=new AbortController;this.abortControllers[d]=v;try{const x=yield this.messageHandlers[l.type](l.sourceMapId,h,v);this.completeTask(d,null,x)}catch(x){this.completeTask(d,x)}}))}completeTask(d,l,h){const v=[];delete this.abortControllers[d];const x={id:d,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?Zl(l):null,data:Zl(h,v)};this.target.postMessage(x,{transfer:v})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.M=tt,a.N=function(){var d=new B(16);return B!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},a.O=function(d,l,h){var v,x,T,k,D,N,Z,X,ee,oe,le,fe,pe=h[0],ve=h[1],Ce=h[2];return l===d?(d[12]=l[0]*pe+l[4]*ve+l[8]*Ce+l[12],d[13]=l[1]*pe+l[5]*ve+l[9]*Ce+l[13],d[14]=l[2]*pe+l[6]*ve+l[10]*Ce+l[14],d[15]=l[3]*pe+l[7]*ve+l[11]*Ce+l[15]):(x=l[1],T=l[2],k=l[3],D=l[4],N=l[5],Z=l[6],X=l[7],ee=l[8],oe=l[9],le=l[10],fe=l[11],d[0]=v=l[0],d[1]=x,d[2]=T,d[3]=k,d[4]=D,d[5]=N,d[6]=Z,d[7]=X,d[8]=ee,d[9]=oe,d[10]=le,d[11]=fe,d[12]=v*pe+D*ve+ee*Ce+l[12],d[13]=x*pe+N*ve+oe*Ce+l[13],d[14]=T*pe+Z*ve+le*Ce+l[14],d[15]=k*pe+X*ve+fe*Ce+l[15]),d},a.P=u,a.Q=function(d,l,h){var v=h[0],x=h[1],T=h[2];return d[0]=l[0]*v,d[1]=l[1]*v,d[2]=l[2]*v,d[3]=l[3]*v,d[4]=l[4]*x,d[5]=l[5]*x,d[6]=l[6]*x,d[7]=l[7]*x,d[8]=l[8]*T,d[9]=l[9]*T,d[10]=l[10]*T,d[11]=l[11]*T,d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15],d},a.R=xa,a.S=function(d,l,h){var v=l[0],x=l[1],T=l[2],k=l[3],D=l[4],N=l[5],Z=l[6],X=l[7],ee=l[8],oe=l[9],le=l[10],fe=l[11],pe=l[12],ve=l[13],Ce=l[14],Ve=l[15],Ae=h[0],Re=h[1],qe=h[2],Ge=h[3];return d[0]=Ae*v+Re*D+qe*ee+Ge*pe,d[1]=Ae*x+Re*N+qe*oe+Ge*ve,d[2]=Ae*T+Re*Z+qe*le+Ge*Ce,d[3]=Ae*k+Re*X+qe*fe+Ge*Ve,d[4]=(Ae=h[4])*v+(Re=h[5])*D+(qe=h[6])*ee+(Ge=h[7])*pe,d[5]=Ae*x+Re*N+qe*oe+Ge*ve,d[6]=Ae*T+Re*Z+qe*le+Ge*Ce,d[7]=Ae*k+Re*X+qe*fe+Ge*Ve,d[8]=(Ae=h[8])*v+(Re=h[9])*D+(qe=h[10])*ee+(Ge=h[11])*pe,d[9]=Ae*x+Re*N+qe*oe+Ge*ve,d[10]=Ae*T+Re*Z+qe*le+Ge*Ce,d[11]=Ae*k+Re*X+qe*fe+Ge*Ve,d[12]=(Ae=h[12])*v+(Re=h[13])*D+(qe=h[14])*ee+(Ge=h[15])*pe,d[13]=Ae*x+Re*N+qe*oe+Ge*ve,d[14]=Ae*T+Re*Z+qe*le+Ge*Ce,d[15]=Ae*k+Re*X+qe*fe+Ge*Ve,d},a.T=px,a.U=function(d,l){const h={};for(let v=0;v<l.length;v++){const x=l[v];x in d&&(h[x]=d[x])}return h},a.V=Ph,a.W=st,a.X=CS,a.Y=pE,a.Z=$e,a._=s,a.a=be,a.a$=ce,a.a0=$,a.a1=rr,a.a2=Sl,a.a3=gE,a.a4=Gv,a.a5=Qe,a.a6=function(d,l,h){if(!d)return l||{};if(!l)return d||{};const v=Yv(d),x=Yv(l);(function(k,D){D.removeAll&&(k.add.clear(),k.update.clear(),k.remove.clear(),D.remove.clear());for(const N of D.remove)k.add.delete(N),k.update.delete(N);for(const[N,Z]of D.update){const X=k.update.get(N);X&&(D.update.set(N,kS(X,Z)),k.update.delete(N))}})(v,x);const T={};if((v.removeAll||x.removeAll)&&(T.removeAll=!0),T.remove=new Set([...v.remove,...x.remove]),T.add=new Map([...v.add,...x.add]),T.update=new Map([...v.update,...x.update]),T.remove.size&&T.add.size)for(const k of T.add.keys())T.remove.delete(k);return(function(k){const D={};return k.removeAll&&(D.removeAll=k.removeAll),k.remove&&(D.remove=Array.from(k.remove)),k.add&&(D.add=Array.from(k.add.values())),k.update&&(D.update=Array.from(k.update.values())),D})(T)},a.a7=function(d,l){const h=new Map;if(d==null||d.type==null)return h;if(d.type==="Feature"){const v=Xv(d,l);return v==null?void 0:(h.set(v,d),h)}if(d.type==="FeatureCollection"){const v=new Set;for(const x of d.features){const T=Xv(x,l);if(T==null||v.has(T))return;v.add(T),h.set(T,x)}return h}},a.a8=function(d,l,h){var v,x;const T=[];if(l.removeAll)d.clear();else if(l.remove)for(const k of l.remove){const D=d.get(k);D&&(T.push(D.geometry),d.delete(k))}if(l.add)for(const k of l.add){const D=Xv(k,h);if(D==null)continue;const N=d.get(D);N&&T.push(N.geometry),T.push(k.geometry),d.set(D,k)}if(l.update)for(const k of l.update){const D=d.get(k.id);if(!D)continue;const N=!!k.newGeometry,Z=k.removeAllProperties||((v=k.removeProperties)===null||v===void 0?void 0:v.length)>0||((x=k.addOrUpdateProperties)===null||x===void 0?void 0:x.length)>0;if(!N&&!Z)continue;T.push(D.geometry);const X=Object.assign({},D);if(d.set(k.id,X),N&&(T.push(k.newGeometry),X.geometry=k.newGeometry),Z){if(X.properties=k.removeAllProperties?{}:Object.assign({},X.properties||{}),k.removeProperties)for(const ee of k.removeProperties)delete X.properties[ee];if(k.addOrUpdateProperties)for(const{key:ee,value:oe}of k.addOrUpdateProperties)X.properties[ee]=oe}}return T},a.a9=ii,a.aA=function(d,{uSize:l,uSizeT:h},{lowerSize:v,upperSize:x}){return d.kind==="source"?v/Jl:d.kind==="composite"?$i.number(v/Jl,x/Jl,h):l},a.aB=function(d,l){var h=l[0],v=l[1],x=l[2],T=l[3],k=l[4],D=l[5],N=l[6],Z=l[7],X=l[8],ee=l[9],oe=l[10],le=l[11],fe=l[12],pe=l[13],ve=l[14],Ce=l[15],Ve=h*D-v*k,Ae=h*N-x*k,Re=h*Z-T*k,qe=v*N-x*D,Ge=v*Z-T*D,dt=x*Z-T*N,Dt=X*pe-ee*fe,Ct=X*ve-oe*fe,Bt=X*Ce-le*fe,cn=ee*ve-oe*pe,Ut=ee*Ce-le*pe,Mt=oe*Ce-le*ve,_t=Ve*Mt-Ae*Ut+Re*cn+qe*Bt-Ge*Ct+dt*Dt;return _t?(d[0]=(D*Mt-N*Ut+Z*cn)*(_t=1/_t),d[1]=(x*Ut-v*Mt-T*cn)*_t,d[2]=(pe*dt-ve*Ge+Ce*qe)*_t,d[3]=(oe*Ge-ee*dt-le*qe)*_t,d[4]=(N*Bt-k*Mt-Z*Ct)*_t,d[5]=(h*Mt-x*Bt+T*Ct)*_t,d[6]=(ve*Re-fe*dt-Ce*Ae)*_t,d[7]=(X*dt-oe*Re+le*Ae)*_t,d[8]=(k*Ut-D*Bt+Z*Dt)*_t,d[9]=(v*Bt-h*Ut-T*Dt)*_t,d[10]=(fe*Ge-pe*Re+Ce*Ve)*_t,d[11]=(ee*Re-X*Ge-le*Ve)*_t,d[12]=(D*Ct-k*cn-N*Dt)*_t,d[13]=(h*cn-v*Ct+x*Dt)*_t,d[14]=(pe*Ae-fe*qe-ve*Ve)*_t,d[15]=(X*qe-ee*Ae+oe*Ve)*_t,d):null},a.aC=ke,a.aD=function(d){var l=d[0],h=d[1];return Math.sqrt(l*l+h*h)},a.aE=function(d){return d[0]=0,d[1]=0,d},a.aF=function(d,l,h){return d[0]=l[0]*h,d[1]=l[1]*h,d},a.aG=bS,a.aH=Te,a.aI=function(d,l,h,v){const x=l.y-d.y,T=l.x-d.x,k=v.y-h.y,D=v.x-h.x,N=k*T-D*x;if(N===0)return null;const Z=(D*(d.y-h.y)-k*(d.x-h.x))/N;return new u(d.x+Z*T,d.y+Z*x)},a.aJ=p,a.aK=ng,a.aL=function(d){let l=1/0,h=1/0,v=-1/0,x=-1/0;for(const T of d)l=Math.min(l,T.x),h=Math.min(h,T.y),v=Math.max(v,T.x),x=Math.max(x,T.y);return[l,h,v,x]},a.aM=Ko,a.aN=Se,a.aO=function(d,l,h,v,x=!1){if(!h[0]&&!h[1])return[0,0];const T=x?v==="map"?-d.bearingInRadians:0:v==="viewport"?d.bearingInRadians:0;if(T){const k=Math.sin(T),D=Math.cos(T);h=[h[0]*D-h[1]*k,h[0]*k+h[1]*D]}return[x?h[0]:Se(l,h[0],d.zoom),x?h[1]:Se(l,h[1],d.zoom)]},a.aQ=Rx,a.aR=HS,a.aS=gS,a.aT=jI,a.aU=zi,a.aV=Bv,a.aW=Ie,a.aX=ln,a.aY=gt,a.aZ=Vt,a.a_=TS,a.aa=dp,a.ab=25,a.ac=Cs,a.ad=d=>{const l=window.document.createElement("video");return l.muted=!0,new Promise((h=>{l.onloadstart=()=>{h(l)};for(const v of d){const x=window.document.createElement("source");ot(v)||(l.crossOrigin="Anonymous"),x.src=v,l.appendChild(x)}}))},a.ae=Gt,a.af=function(){return At++},a.ag=C,a.ah=Jy,a.ai=d_,a.aj=ma,a.ak=Yl,a.al=Fx,a.am=function(d){const l={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((h,v,x,T)=>{const k=x||T;return l[v]=!k||k.toLowerCase(),""})),l["max-age"]){const h=parseInt(l["max-age"],10);isNaN(h)?delete l["max-age"]:l["max-age"]=h}return l},a.an=ct,a.ao=85.051129,a.ap=Et,a.aq=function(d){return Math.pow(2,d)},a.ar=U,a.as=mE,a.at=function(d){return Math.log(d)/Math.LN2},a.au=function(d){var l=d[0],h=d[1];return l*l+h*h},a.av=function(d){if(!d.length)return new Set;const l=Math.max(...d.map((N=>N.canonical.z)));let h=1/0,v=-1/0,x=1/0,T=-1/0;const k=[];for(const N of d){const{x:Z,y:X,z:ee}=N.canonical,oe=Math.pow(2,l-ee),le=Z*oe,fe=X*oe;k.push({id:N,x:le,y:fe}),le<h&&(h=le),le>v&&(v=le),fe<x&&(x=fe),fe>T&&(T=fe)}const D=new Set;for(const N of k)N.x!==h&&N.x!==v&&N.y!==x&&N.y!==T||D.add(N.id);return D},a.aw=function(d,l){const h=Math.abs(2*d.wrap)-+(d.wrap<0),v=Math.abs(2*l.wrap)-+(l.wrap<0);return d.overscaledZ-l.overscaledZ||v-h||l.canonical.y-d.canonical.y||l.canonical.x-d.canonical.x},a.ax=class{constructor(d,l){this.max=d,this.onRemove=l,this.reset()}reset(){for(const d in this.data)for(const l of this.data[d])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(d,l,h){const v=d.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const x={value:l,timeout:void 0};if(h!==void 0&&(x.timeout=setTimeout((()=>{this.remove(d,x)}),h)),this.data[v].push(x),this.order.push(v),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(d){return d.wrapped().key in this.data}getAndRemove(d){return this.has(d)?this._getAndRemoveByKey(d.wrapped().key):null}_getAndRemoveByKey(d){const l=this.data[d].shift();return l.timeout&&clearTimeout(l.timeout),this.data[d].length===0&&delete this.data[d],this.order.splice(this.order.indexOf(d),1),l.value}getByKey(d){const l=this.data[d];return l?l[0].value:null}get(d){return this.has(d)?this.data[d.wrapped().key][0].value:null}remove(d,l){if(!this.has(d))return this;const h=d.wrapped().key,v=l===void 0?0:this.data[h].indexOf(l),x=this.data[h][v];return this.data[h].splice(v,1),x.timeout&&clearTimeout(x.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(x.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(d){for(this.max=d;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(d){const l=[];for(const h in this.data)for(const v of this.data[h])d(v.value)||l.push(v);for(const h of l)this.remove(h.value.tileID,h)}},a.ay=function(d,l){let h=0,v=0;if(d.kind==="constant")v=d.layoutSize;else if(d.kind!=="source"){const{interpolationType:x,minZoom:T,maxZoom:k}=d,D=x?ct(sa.interpolationFactor(x,l,T,k),0,1):0;d.kind==="camera"?v=$i.number(d.minSize,d.maxSize,D):h=D}return{uSizeT:h,uSize:v}},a.b=Nn,a.b$=Xl,a.b0=ie,a.b1=function(d){var l=new B(3);return l[0]=d[0],l[1]=d[1],l[2]=d[2],l},a.b2=function(d,l,h){return d[0]=l[0]-h[0],d[1]=l[1]-h[1],d[2]=l[2]-h[2],d},a.b3=function(d,l){var h=l[0],v=l[1],x=l[2],T=h*h+v*v+x*x;return T>0&&(T=1/Math.sqrt(T)),d[0]=l[0]*T,d[1]=l[1]*T,d[2]=l[2]*T,d},a.b4=xe,a.b5=function(d,l){return d[0]*l[0]+d[1]*l[1]+d[2]*l[2]},a.b6=function(d,l,h){return d[0]=l[0]*h[0],d[1]=l[1]*h[1],d[2]=l[2]*h[2],d[3]=l[3]*h[3],d},a.b7=H,a.b8=function(d,l,h){const v=l[0]*h[0]+l[1]*h[1]+l[2]*h[2];return v===0?null:(-(d[0]*h[0]+d[1]*h[1]+d[2]*h[2])-h[3])/v},a.b9=me,a.bA=function(d,l,h,v){return d[0]=l[0]+h[0]*v,d[1]=l[1]+h[1]*v,d[2]=l[2]+h[2]*v,d},a.bB=_e,a.bC=function(d,l,h){var v=h[0],x=h[1],T=h[2],k=h[3],D=l[0],N=l[1],Z=l[2],X=x*Z-T*N,ee=T*D-v*Z,oe=v*N-x*D;return d[0]=D+k*(X+=X)+x*(oe+=oe)-T*(ee+=ee),d[1]=N+k*ee+T*X-v*oe,d[2]=Z+k*oe+v*ee-x*X,d},a.bD=function(d,l,h){const v=(function(N){var Z=N[3],X=N[4],ee=N[5],oe=N[6],le=N[7],fe=N[8];return N[0]*(fe*X-ee*le)+N[1]*(-fe*Z+ee*oe)+N[2]*(le*Z-X*oe)})([d[0],d[1],d[2],l[0],l[1],l[2],h[0],h[1],h[2]]);if(v===0)return null;const x=xe([],[l[0],l[1],l[2]],[h[0],h[1],h[2]]),T=xe([],[h[0],h[1],h[2]],[d[0],d[1],d[2]]),k=xe([],[d[0],d[1],d[2]],[l[0],l[1],l[2]]),D=ce([],x,-d[3]);return ie(D,D,ce([],T,-l[3])),ie(D,D,ce([],k,-h[3])),ce(D,D,1/v),D},a.bE=Nx,a.bF=function(){return new Float64Array(4)},a.bG=function(d,l,h,v){var x=[],T=[];return x[0]=l[0]-h[0],x[1]=l[1]-h[1],x[2]=l[2]-h[2],T[0]=x[0]*Math.cos(v)-x[1]*Math.sin(v),T[1]=x[0]*Math.sin(v)+x[1]*Math.cos(v),T[2]=x[2],d[0]=T[0]+h[0],d[1]=T[1]+h[1],d[2]=T[2]+h[2],d},a.bH=function(d,l,h,v){var x=[],T=[];return x[0]=l[0]-h[0],x[1]=l[1]-h[1],x[2]=l[2]-h[2],T[0]=x[0],T[1]=x[1]*Math.cos(v)-x[2]*Math.sin(v),T[2]=x[1]*Math.sin(v)+x[2]*Math.cos(v),d[0]=T[0]+h[0],d[1]=T[1]+h[1],d[2]=T[2]+h[2],d},a.bI=function(d,l,h,v){var x=[],T=[];return x[0]=l[0]-h[0],x[1]=l[1]-h[1],x[2]=l[2]-h[2],T[0]=x[2]*Math.sin(v)+x[0]*Math.cos(v),T[1]=x[1],T[2]=x[2]*Math.cos(v)-x[0]*Math.sin(v),d[0]=T[0]+h[0],d[1]=T[1]+h[1],d[2]=T[2]+h[2],d},a.bJ=function(d,l,h){var v=Math.sin(h),x=Math.cos(h),T=l[0],k=l[1],D=l[2],N=l[3],Z=l[8],X=l[9],ee=l[10],oe=l[11];return l!==d&&(d[4]=l[4],d[5]=l[5],d[6]=l[6],d[7]=l[7],d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15]),d[0]=T*x-Z*v,d[1]=k*x-X*v,d[2]=D*x-ee*v,d[3]=N*x-oe*v,d[8]=T*v+Z*x,d[9]=k*v+X*x,d[10]=D*v+ee*x,d[11]=N*v+oe*x,d},a.bK=function(d,l){const h=Me(d,360),v=Me(l,360),x=v-h,T=v>h?x-360:x+360;return Math.abs(x)<Math.abs(T)?x:T},a.bL=function(d){return d[0]=0,d[1]=0,d[2]=0,d},a.bM=function(d,l,h,v){const x=Math.sqrt(d*d+l*l),T=Math.sqrt(h*h+v*v);d/=x,l/=x,h/=T,v/=T;const k=Math.acos(d*h+l*v);return-l*h+d*v>0?k:-k},a.bN=function(d,l){const h=Me(d,2*Math.PI),v=Me(l,2*Math.PI);return Math.min(Math.abs(h-v),Math.abs(h-v+2*Math.PI),Math.abs(h-v-2*Math.PI))},a.bO=function(){const d={},l=ut.$version;for(const h in ut.$root){const v=ut.$root[h];if(v.required){let x=null;x=h==="version"?l:v.type==="array"?[]:{},x!=null&&(d[h]=x)}}return d},a.bP=at,a.bQ=Dy,a.bR=function d(l,h){if(Array.isArray(l)){if(!Array.isArray(h)||l.length!==h.length)return!1;for(let v=0;v<l.length;v++)if(!d(l[v],h[v]))return!1;return!0}if(typeof l=="object"&&l!==null&&h!==null){if(typeof h!="object"||Object.keys(l).length!==Object.keys(h).length)return!1;for(const v in l)if(!d(l[v],h[v]))return!1;return!0}return l===h},a.bS=function(d){d=d.slice();const l=Object.create(null);for(let h=0;h<d.length;h++)l[d[h].id]=d[h];for(let h=0;h<d.length;h++)"ref"in d[h]&&(d[h]=eo(d[h],l[d[h].ref]));return d},a.bT=function(d,l){if(d.type==="custom")return new OS(d,l);switch(d.type){case"background":return new $r(d,l);case"circle":return new hx(d,l);case"color-relief":return new Vk(d,l);case"fill":return new Wk(d,l);case"fill-extrusion":return new cS(d,l);case"heatmap":return new Fk(d,l);case"hillshade":return new lo(d,l);case"line":return new hS(d,l);case"raster":return new vu(d,l);case"symbol":return new hp(d,l)}},a.bU=d=>d.type==="raster",a.bV=nn,a.bW=function(d,l){if(!d)return[{command:"setStyle",args:[l]}];let h=[];try{if(!Gn(d.version,l.version))return[{command:"setStyle",args:[l]}];Gn(d.center,l.center)||h.push({command:"setCenter",args:[l.center]}),Gn(d.state,l.state)||h.push({command:"setGlobalState",args:[l.state]}),Gn(d.centerAltitude,l.centerAltitude)||h.push({command:"setCenterAltitude",args:[l.centerAltitude]}),Gn(d.zoom,l.zoom)||h.push({command:"setZoom",args:[l.zoom]}),Gn(d.bearing,l.bearing)||h.push({command:"setBearing",args:[l.bearing]}),Gn(d.pitch,l.pitch)||h.push({command:"setPitch",args:[l.pitch]}),Gn(d.roll,l.roll)||h.push({command:"setRoll",args:[l.roll]}),Gn(d.sprite,l.sprite)||h.push({command:"setSprite",args:[l.sprite]}),Gn(d.glyphs,l.glyphs)||h.push({command:"setGlyphs",args:[l.glyphs]}),Gn(d.transition,l.transition)||h.push({command:"setTransition",args:[l.transition]}),Gn(d.light,l.light)||h.push({command:"setLight",args:[l.light]}),Gn(d.terrain,l.terrain)||h.push({command:"setTerrain",args:[l.terrain]}),Gn(d.sky,l.sky)||h.push({command:"setSky",args:[l.sky]}),Gn(d.projection,l.projection)||h.push({command:"setProjection",args:[l.projection]});const v={},x=[];(function(k,D,N,Z){let X;for(X in D=D||{},k=k||{})Object.prototype.hasOwnProperty.call(k,X)&&(Object.prototype.hasOwnProperty.call(D,X)||ti(X,N,Z));for(X in D)Object.prototype.hasOwnProperty.call(D,X)&&(Object.prototype.hasOwnProperty.call(k,X)?Gn(k[X],D[X])||(k[X].type==="geojson"&&D[X].type==="geojson"&&li(k,D,X)?Cn(N,{command:"setGeoJSONSourceData",args:[X,D[X].data]}):to(X,D,N,Z)):gi(X,D,N))})(d.sources,l.sources,x,v);const T=[];d.layers&&d.layers.forEach((k=>{"source"in k&&v[k.source]?h.push({command:"removeLayer",args:[k.id]}):T.push(k)})),h=h.concat(x),(function(k,D,N){D=D||[];const Z=(k=k||[]).map(If),X=D.map(If),ee=k.reduce(ld,{}),oe=D.reduce(ld,{}),le=Z.slice(),fe=Object.create(null);let pe,ve,Ce,Ve,Ae;for(let Re=0,qe=0;Re<Z.length;Re++)pe=Z[Re],Object.prototype.hasOwnProperty.call(oe,pe)?qe++:(Cn(N,{command:"removeLayer",args:[pe]}),le.splice(le.indexOf(pe,qe),1));for(let Re=0,qe=0;Re<X.length;Re++)pe=X[X.length-1-Re],le[le.length-1-Re]!==pe&&(Object.prototype.hasOwnProperty.call(ee,pe)?(Cn(N,{command:"removeLayer",args:[pe]}),le.splice(le.lastIndexOf(pe,le.length-qe),1)):qe++,Ve=le[le.length-Re],Cn(N,{command:"addLayer",args:[oe[pe],Ve]}),le.splice(le.length-Re,0,pe),fe[pe]=!0);for(let Re=0;Re<X.length;Re++)if(pe=X[Re],ve=ee[pe],Ce=oe[pe],!fe[pe]&&!Gn(ve,Ce))if(Gn(ve.source,Ce.source)&&Gn(ve["source-layer"],Ce["source-layer"])&&Gn(ve.type,Ce.type)){for(Ae in Eo(ve.layout,Ce.layout,N,pe,null,"setLayoutProperty"),Eo(ve.paint,Ce.paint,N,pe,null,"setPaintProperty"),Gn(ve.filter,Ce.filter)||Cn(N,{command:"setFilter",args:[pe,Ce.filter]}),Gn(ve.minzoom,Ce.minzoom)&&Gn(ve.maxzoom,Ce.maxzoom)||Cn(N,{command:"setLayerZoomRange",args:[pe,Ce.minzoom,Ce.maxzoom]}),ve)Object.prototype.hasOwnProperty.call(ve,Ae)&&Ae!=="layout"&&Ae!=="paint"&&Ae!=="filter"&&Ae!=="metadata"&&Ae!=="minzoom"&&Ae!=="maxzoom"&&(Ae.indexOf("paint.")===0?Eo(ve[Ae],Ce[Ae],N,pe,Ae.slice(6),"setPaintProperty"):Gn(ve[Ae],Ce[Ae])||Cn(N,{command:"setLayerProperty",args:[pe,Ae,Ce[Ae]]}));for(Ae in Ce)Object.prototype.hasOwnProperty.call(Ce,Ae)&&!Object.prototype.hasOwnProperty.call(ve,Ae)&&Ae!=="layout"&&Ae!=="paint"&&Ae!=="filter"&&Ae!=="metadata"&&Ae!=="minzoom"&&Ae!=="maxzoom"&&(Ae.indexOf("paint.")===0?Eo(ve[Ae],Ce[Ae],N,pe,Ae.slice(6),"setPaintProperty"):Gn(ve[Ae],Ce[Ae])||Cn(N,{command:"setLayerProperty",args:[pe,Ae,Ce[Ae]]}))}else Cn(N,{command:"removeLayer",args:[pe]}),Ve=le[le.lastIndexOf(pe)+1],Cn(N,{command:"addLayer",args:[Ce,Ve]})})(T,l.layers,h)}catch(v){console.warn("Unable to compute style diff:",v),h=[{command:"setStyle",args:[l]}]}return h},a.bX=function(d){const l=[],h=d.id;return h===void 0&&l.push({message:`layers.${h}: missing required property "id"`}),d.render===void 0&&l.push({message:`layers.${h}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&l.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),l},a.bY=Tt,a.bZ=Wt,a.b_=class extends _a{constructor(d,l){super(d,l),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},a.ba=function(d,l,h){return d[0]=l[0]*h,d[1]=l[1]*h,d[2]=l[2]*h,d[3]=l[3]*h,d},a.bb=function(d,l){return d[0]*l[0]+d[1]*l[1]+d[2]*l[2]+d[3]},a.bc=yE,a.bd=t0,a.be=function(d,l,h,v,x){var T=1/Math.tan(l/2);if(d[0]=T/h,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=T,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,x!=null&&x!==1/0){var k=1/(v-x);d[10]=(x+v)*k,d[14]=2*x*v*k}else d[10]=-1,d[14]=-2*v;return d},a.bf=function(d){var l=new B(16);return l[0]=d[0],l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5],l[6]=d[6],l[7]=d[7],l[8]=d[8],l[9]=d[9],l[10]=d[10],l[11]=d[11],l[12]=d[12],l[13]=d[13],l[14]=d[14],l[15]=d[15],l},a.bg=function(d,l,h){var v=Math.sin(h),x=Math.cos(h),T=l[0],k=l[1],D=l[2],N=l[3],Z=l[4],X=l[5],ee=l[6],oe=l[7];return l!==d&&(d[8]=l[8],d[9]=l[9],d[10]=l[10],d[11]=l[11],d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15]),d[0]=T*x+Z*v,d[1]=k*x+X*v,d[2]=D*x+ee*v,d[3]=N*x+oe*v,d[4]=Z*x-T*v,d[5]=X*x-k*v,d[6]=ee*x-D*v,d[7]=oe*x-N*v,d},a.bh=function(d,l,h){var v=Math.sin(h),x=Math.cos(h),T=l[4],k=l[5],D=l[6],N=l[7],Z=l[8],X=l[9],ee=l[10],oe=l[11];return l!==d&&(d[0]=l[0],d[1]=l[1],d[2]=l[2],d[3]=l[3],d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15]),d[4]=T*x+Z*v,d[5]=k*x+X*v,d[6]=D*x+ee*v,d[7]=N*x+oe*v,d[8]=Z*x-T*v,d[9]=X*x-k*v,d[10]=ee*x-D*v,d[11]=oe*x-N*v,d},a.bi=function(){const d=new Float32Array(16);return U(d),d},a.bj=function(){const d=new Float64Array(16);return U(d),d},a.bk=function(){return new Float64Array(16)},a.bl=function(d,l,h){const v=new Float64Array(4);return _e(v,d,l-90,h),v},a.bm=function(d,l,h,v){var x,T,k,D,N,Z=l[0],X=l[1],ee=l[2],oe=l[3],le=h[0],fe=h[1],pe=h[2],ve=h[3];return(T=Z*le+X*fe+ee*pe+oe*ve)<0&&(T=-T,le=-le,fe=-fe,pe=-pe,ve=-ve),1-T>z?(x=Math.acos(T),k=Math.sin(x),D=Math.sin((1-v)*x)/k,N=Math.sin(v*x)/k):(D=1-v,N=v),d[0]=D*Z+N*le,d[1]=D*X+N*fe,d[2]=D*ee+N*pe,d[3]=D*oe+N*ve,d},a.bn=function(d){const l=new Float64Array(9);(function(T,k){var D=k[0],N=k[1],Z=k[2],X=k[3],ee=D+D,oe=N+N,le=Z+Z,fe=D*ee,pe=N*ee,ve=N*oe,Ce=Z*ee,Ve=Z*oe,Ae=Z*le,Re=X*ee,qe=X*oe,Ge=X*le;T[0]=1-ve-Ae,T[3]=pe-Ge,T[6]=Ce+qe,T[1]=pe+Ge,T[4]=1-fe-Ae,T[7]=Ve-Re,T[2]=Ce-qe,T[5]=Ve+Re,T[8]=1-fe-ve})(l,d);const h=Vt(-Math.asin(ct(l[2],-1,1)));let v,x;return Math.hypot(l[5],l[8])<.001?(v=0,x=-Vt(Math.atan2(l[3],l[4]))):(v=Vt(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),x=Vt(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:v,pitch:h+90,bearing:x}},a.bo=function(d,l){return d.roll==l.roll&&d.pitch==l.pitch&&d.bearing==l.bearing},a.bp=cr,a.bq=Dd,a.br=bl,a.bs=Ou,a.bt=Ss,a.bu=Xe,a.bv=Ee,a.bw=Go,a.bx=function(d,l,h,v,x){return Xe(v,x,ct((d-l)/(h-l),0,1))},a.by=Me,a.bz=function(){return new Float64Array(3)},a.c=ze,a.c$=function(d,l,h,v,x){return s(this,void 0,void 0,(function*(){if($())try{return yield rr(d,l,h,v,x)}catch{}return(function(T,k,D,N,Z){const X=T.width,ee=T.height;Ue&&Je||(Ue=new OffscreenCanvas(X,ee),Je=Ue.getContext("2d",{willReadFrequently:!0})),Ue.width=X,Ue.height=ee,Je.drawImage(T,0,0,X,ee);const oe=Je.getImageData(k,D,N,Z);return Je.clearRect(0,0,X,ee),oe.data})(d,l,h,v,x)}))},a.c0=class extends _a{constructor(d,l){super(d,l),this.current=ba}set(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let l=1;l<16;l++)if(d[l]!==this.current[l]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}},a.c1=op,a.c2=class extends _a{constructor(d,l){super(d,l),this.current=[0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))}},a.c3=class extends _a{constructor(d,l){super(d,l),this.current=[0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))}},a.c4=F,a.c5=function(d,l){var h=Math.sin(l),v=Math.cos(l);return d[0]=v,d[1]=h,d[2]=0,d[3]=-h,d[4]=v,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},a.c6=function(d,l,h){var v=l[0],x=l[1],T=l[2];return d[0]=v*h[0]+x*h[3]+T*h[6],d[1]=v*h[1]+x*h[4]+T*h[7],d[2]=v*h[2]+x*h[5]+T*h[8],d},a.c7=function(d,l,h,v,x,T,k){var D=1/(l-h),N=1/(v-x),Z=1/(T-k);return d[0]=-2*D,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*N,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*Z,d[11]=0,d[12]=(l+h)*D,d[13]=(x+v)*N,d[14]=(k+T)*Z,d[15]=1,d},a.c8=class extends _a{constructor(d,l){super(d,l),this.current=new Array}set(d){if(d!=this.current){this.current=d;const l=new Float32Array(4*d.length);for(let h=0;h<d.length;h++)l[4*h]=d[h].r,l[4*h+1]=d[h].g,l[4*h+2]=d[h].b,l[4*h+3]=d[h].a;this.gl.uniform4fv(this.location,l)}}},a.c9=class extends _a{constructor(d,l){super(d,l),this.current=new Array}set(d){if(d!=this.current){this.current=d;const l=new Float32Array(d);this.gl.uniform1fv(this.location,l)}}},a.cA=function(d,l){return we[l]&&"touches"in d},a.cB=function(d){return we[d]||ae[d]},a.cC=function(d,l,h){var v=l[0],x=l[1];return d[0]=h[0]*v+h[4]*x+h[12],d[1]=h[1]*v+h[5]*x+h[13],d},a.cD=function(d,l){const{x:h,y:v}=ii.fromLngLat(l);return!(d<0||d>25||v<0||v>=1||h<0||h>=1)},a.cE=function(d,l){return d[0]=l[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=l[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=l[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},a.cF=class extends Pd{},a.cG=Yce,a.cI=Ye,a.cJ=function(d,l){ze.REGISTERED_PROTOCOLS[d]=l},a.cK=function(d){delete ze.REGISTERED_PROTOCOLS[d]},a.cL=function(d,l){const h={};for(let x=0;x<d.length;x++){const T=l&&l[d[x].id]||hu(d[x]);l&&(l[d[x].id]=T);let k=h[T];k||(k=h[T]=[]),k.push(d[x])}const v=[];for(const x in h)v.push(h[x]);return v},a.cM=pn,a.cN=ES,a.cO=WS,a.cP=Ax,a.cQ=function(d){d.bucket.createArrays(),d.bucket.tilePixelRatio=Qe/(512*d.bucket.overscaling),d.bucket.compareText={},d.bucket.iconsNeedLinear=!1;const l=d.bucket.layers[0],h=l.layout,v=l._unevaluatedLayout._values,x={layoutIconSize:v["icon-size"].possiblyEvaluate(new Xr(d.bucket.zoom+1),d.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new Xr(d.bucket.zoom+1),d.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new Xr(18))};if(d.bucket.textSizeData.kind==="composite"){const{minZoom:Z,maxZoom:X}=d.bucket.textSizeData;x.compositeTextSizes=[v["text-size"].possiblyEvaluate(new Xr(Z),d.canonical),v["text-size"].possiblyEvaluate(new Xr(X),d.canonical)]}if(d.bucket.iconSizeData.kind==="composite"){const{minZoom:Z,maxZoom:X}=d.bucket.iconSizeData;x.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new Xr(Z),d.canonical),v["icon-size"].possiblyEvaluate(new Xr(X),d.canonical)]}const T=h.get("text-line-height")*Ko,k=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",D=h.get("text-keep-upright"),N=h.get("text-size");for(const Z of d.bucket.features){const X=h.get("text-font").evaluate(Z,{},d.canonical).join(","),ee=N.evaluate(Z,{},d.canonical),oe=x.layoutTextSize.evaluate(Z,{},d.canonical),le=x.layoutIconSize.evaluate(Z,{},d.canonical),fe={horizontal:{},vertical:void 0},pe=Z.text;let ve,Ce=[0,0];if(pe){const Re=pe.toString(),qe=h.get("text-letter-spacing").evaluate(Z,{},d.canonical)*Ko,Ge=Ly(Re)?qe:0,dt=h.get("text-anchor").evaluate(Z,{},d.canonical),Dt=Hd(l,Z,d.canonical);if(!Dt){const Ut=h.get("text-radial-offset").evaluate(Z,{},d.canonical);Ce=Ut?Kr(dt,[Ut*Ko,Ir]):h.get("text-offset").evaluate(Z,{},d.canonical).map((Mt=>Mt*Ko))}let Ct=k?"center":h.get("text-justify").evaluate(Z,{},d.canonical);const Bt=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(Z,{},d.canonical)*Ko:1/0,cn=()=>{d.bucket.allowVerticalPlacement&&Mc(Re)&&(fe.vertical=qv(pe,d.glyphMap,d.glyphPositions,d.imagePositions,X,Bt,T,dt,"left",Ge,Ce,a.az.vertical,!0,oe,ee))};if(!k&&Dt){const Ut=new Set;if(Ct==="auto")for(let _t=0;_t<Dt.values.length;_t+=2)Ut.add(HS(Dt.values[_t]));else Ut.add(Ct);let Mt=!1;for(const _t of Ut)if(!fe.horizontal[_t])if(Mt)fe.horizontal[_t]=fe.horizontal[0];else{const _n=qv(pe,d.glyphMap,d.glyphPositions,d.imagePositions,X,Bt,T,"center",_t,Ge,Ce,a.az.horizontal,!1,oe,ee);_n&&(fe.horizontal[_t]=_n,Mt=_n.positionedLines.length===1)}cn()}else{Ct==="auto"&&(Ct=HS(dt));const Ut=qv(pe,d.glyphMap,d.glyphPositions,d.imagePositions,X,Bt,T,dt,Ct,Ge,Ce,a.az.horizontal,!1,oe,ee);Ut&&(fe.horizontal[Ct]=Ut),cn(),Mc(Re)&&k&&D&&(fe.vertical=qv(pe,d.glyphMap,d.glyphPositions,d.imagePositions,X,Bt,T,dt,Ct,Ge,Ce,a.az.vertical,!1,oe,ee))}}let Ve=!1;if(Z.icon&&Z.icon.name){const Re=d.imageMap[Z.icon.name];Re&&(ve=vS(d.imagePositions[Z.icon.name],h.get("icon-offset").evaluate(Z,{},d.canonical),h.get("icon-anchor").evaluate(Z,{},d.canonical)),Ve=!!Re.sdf,d.bucket.sdfIcons===void 0?d.bucket.sdfIcons=Ve:d.bucket.sdfIcons!==Ve&&rn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Re.pixelRatio!==d.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(d.bucket.iconsNeedLinear=!0))}const Ae=oF(fe.horizontal)||fe.vertical;d.bucket.iconsInText=!!Ae&&Ae.iconsInText,(Ae||ve)&&Gce(d.bucket,Z,fe,ve,d.imageMap,x,oe,le,Ce,Ve,d.canonical,d.subdivisionGranularity)}d.showCollisionBoxes&&d.bucket.generateCollisionDebugBuffers()},a.cR=ig,a.cS=ap,a.cT=qy,a.cU=function(d){const l=new Tx;return(function(h,v){for(const x in h.layers)v.writeMessage(3,Kx,h.layers[x])})(d,l),l.finish()},a.cV=function(d,l,h,v,x,T){let k=y(d,l,h,x,0);return k=y(k,l,v,T,1),k},a.cW=class{constructor(d){this.maxEntries=d,this.map=new Map}get(d){const l=this.map.get(d);return l!==void 0&&(this.map.delete(d),this.map.set(d,l)),l}set(d,l){if(this.map.has(d))this.map.delete(d);else if(this.map.size>=this.maxEntries){const h=this.map.keys().next().value;this.map.delete(h)}this.map.set(d,l)}clear(){this.map.clear()}},a.cX=Lr,a.cY=Tx,a.cZ=h_,a.c_=class{constructor(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let d=performance.getEntriesByName(this._marks.measure);return d.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),d=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),d}},a.ca=class extends bu{},a.cb=Kk,a.cc=class extends Ni{},a.cd=Mv,a.ce=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},a.cf=Eh,a.cg=function(d,l,h){var v=l[0],x=l[1],T=l[2],k=h[3]*v+h[7]*x+h[11]*T+h[15];return d[0]=(h[0]*v+h[4]*x+h[8]*T+h[12])/(k=k||1),d[1]=(h[1]*v+h[5]*x+h[9]*T+h[13])/k,d[2]=(h[2]*v+h[6]*x+h[10]*T+h[14])/k,d},a.ch=class extends Md{},a.ci=class extends c{},a.cj=function(d,l){return d[0]===l[0]&&d[1]===l[1]&&d[2]===l[2]&&d[3]===l[3]&&d[4]===l[4]&&d[5]===l[5]&&d[6]===l[6]&&d[7]===l[7]&&d[8]===l[8]&&d[9]===l[9]&&d[10]===l[10]&&d[11]===l[11]&&d[12]===l[12]&&d[13]===l[13]&&d[14]===l[14]&&d[15]===l[15]},a.ck=function(d,l){var h=d[0],v=d[1],x=d[2],T=d[3],k=d[4],D=d[5],N=d[6],Z=d[7],X=d[8],ee=d[9],oe=d[10],le=d[11],fe=d[12],pe=d[13],ve=d[14],Ce=d[15],Ve=l[0],Ae=l[1],Re=l[2],qe=l[3],Ge=l[4],dt=l[5],Dt=l[6],Ct=l[7],Bt=l[8],cn=l[9],Ut=l[10],Mt=l[11],_t=l[12],_n=l[13],mn=l[14],xn=l[15];return Math.abs(h-Ve)<=z*Math.max(1,Math.abs(h),Math.abs(Ve))&&Math.abs(v-Ae)<=z*Math.max(1,Math.abs(v),Math.abs(Ae))&&Math.abs(x-Re)<=z*Math.max(1,Math.abs(x),Math.abs(Re))&&Math.abs(T-qe)<=z*Math.max(1,Math.abs(T),Math.abs(qe))&&Math.abs(k-Ge)<=z*Math.max(1,Math.abs(k),Math.abs(Ge))&&Math.abs(D-dt)<=z*Math.max(1,Math.abs(D),Math.abs(dt))&&Math.abs(N-Dt)<=z*Math.max(1,Math.abs(N),Math.abs(Dt))&&Math.abs(Z-Ct)<=z*Math.max(1,Math.abs(Z),Math.abs(Ct))&&Math.abs(X-Bt)<=z*Math.max(1,Math.abs(X),Math.abs(Bt))&&Math.abs(ee-cn)<=z*Math.max(1,Math.abs(ee),Math.abs(cn))&&Math.abs(oe-Ut)<=z*Math.max(1,Math.abs(oe),Math.abs(Ut))&&Math.abs(le-Mt)<=z*Math.max(1,Math.abs(le),Math.abs(Mt))&&Math.abs(fe-_t)<=z*Math.max(1,Math.abs(fe),Math.abs(_t))&&Math.abs(pe-_n)<=z*Math.max(1,Math.abs(pe),Math.abs(_n))&&Math.abs(ve-mn)<=z*Math.max(1,Math.abs(ve),Math.abs(mn))&&Math.abs(Ce-xn)<=z*Math.max(1,Math.abs(Ce),Math.abs(xn))},a.cl=function(d,l){return d[0]=l[0],d[1]=l[1],d[2]=l[2],d[3]=l[3],d[4]=l[4],d[5]=l[5],d[6]=l[6],d[7]=l[7],d[8]=l[8],d[9]=l[9],d[10]=l[10],d[11]=l[11],d[12]=l[12],d[13]=l[13],d[14]=l[14],d[15]=l[15],d},a.cm=d=>d.type==="symbol",a.cn=d=>d.type==="circle",a.co=d=>d.type==="heatmap",a.cp=d=>d.type==="line",a.cq=d=>d.type==="fill",a.cr=d=>d.type==="fill-extrusion",a.cs=d=>d.type==="hillshade",a.ct=d=>d.type==="color-relief",a.cu=d=>d.type==="background",a.cv=d=>d.type==="custom",a.cw=ft,a.cx=function(d,l,h){const v=Ne(l.x-h.x,l.y-h.y),x=Ne(d.x-h.x,d.y-h.y),T=Math.atan2(v[0]*x[1]-v[1]*x[0],(function(k,D){return k[0]*D[0]+k[1]*D[1]})(v,x));return Vt(T)},a.cy=mt,a.cz=function(d,l){return ae[l]&&(d instanceof MouseEvent||d instanceof WheelEvent)},a.d=ot,a.d0=Vy,a.d1=f,a.d2=class{constructor(d,l){this.layers={[d_]:this},this.name=d_,this.version=l?l.version:1,this.extent=l?l.extent:4096,this.length=d.length,this.features=d}feature(d){return new PE(this.features[d],this.extent)}},a.d3=Gf,a.d4=pl,a.e=bt,a.f=d=>s(void 0,void 0,void 0,(function*(){if(d.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(d)],{type:"image/png"});try{return createImageBitmap(l)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),a.g=rt,a.h=d=>new Promise(((l,h)=>{const v=new Image;v.onload=()=>{l(v),URL.revokeObjectURL(v.src),v.onload=null,window.requestAnimationFrame((()=>{v.src=lr}))},v.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const x=new Blob([new Uint8Array(d)],{type:"image/png"});v.src=d.byteLength?URL.createObjectURL(x):lr})),a.i=Mn,a.j=(d,l)=>Ot(bt(d,{type:"json"}),l),a.k=Er,a.l=$n,a.m=Ot,a.n=(d,l)=>Ot(bt(d,{type:"arrayBuffer"}),l),a.o=function(d){return new Tx(d).readFields(aE,[])},a.p=mS,a.q=function(d){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(d))},a.r=Pv,a.s=xt,a.t=_o,a.u=ut,a.v=Vm,a.w=rn,a.x=zy,a.y=Ql,a.z=yu})),i("worker",["./shared"],(function(a){class s{constructor(ae,Y){this.keyCache={},ae&&this.replace(ae,Y)}replace(ae,Y){this._layerConfigs={},this._layers={},this.update(ae,[],Y)}update(ae,Y,be){for(const ze of ae){this._layerConfigs[ze.id]=ze;const rt=this._layers[ze.id]=a.bT(ze,be);rt._featureFilter=a.aj(rt.filter,be),this.keyCache[ze.id]&&delete this.keyCache[ze.id]}for(const ze of Y)delete this.keyCache[ze],delete this._layerConfigs[ze],delete this._layers[ze];this.familiesBySource={};const $e=a.cL(Object.values(this._layerConfigs),this.keyCache);for(const ze of $e){const rt=ze.map(($t=>this._layers[$t.id])),tt=rt[0];if(tt.isHidden())continue;const Ye=tt.source||"";let at=this.familiesBySource[Ye];at||(at=this.familiesBySource[Ye]={});const Ot=tt.sourceLayer||a.ai;let ot=at[Ot];ot||(ot=at[Ot]=[]),ot.push(rt)}}}class u{constructor(ae){const Y={},be=[];for(const tt in ae){const Ye=ae[tt],at=Y[tt]={};for(const Ot in Ye){const ot=Ye[+Ot];if(!ot||ot.bitmap.width===0||ot.bitmap.height===0)continue;const $t={x:0,y:0,w:ot.bitmap.width+2,h:ot.bitmap.height+2};be.push($t),at[Ot]={rect:$t,metrics:ot.metrics}}}const{w:$e,h:ze}=a.p(be),rt=new a.r({width:$e||1,height:ze||1});for(const tt in ae){const Ye=ae[tt];for(const at in Ye){const Ot=Ye[+at];if(!Ot||Ot.bitmap.width===0||Ot.bitmap.height===0)continue;const ot=Y[tt][at].rect;a.r.copy(Ot.bitmap,rt,{x:0,y:0},{x:ot.x+1,y:ot.y+1},Ot.bitmap)}}this.image=rt,this.positions=Y}}a.cM("GlyphAtlas",u);class f{constructor(ae){this.tileID=new a.a2(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,Y,be,$e,ze){return a._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new a.ag;const rt=new a.cN(Object.keys(ae.layers).sort()),tt=new a.cO(this.tileID,this.promoteId);tt.bucketLayerIDs=[];const Ye={},at={featureIndex:tt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:be,subdivisionGranularity:ze},Ot=Y.familiesBySource[this.source];for(const li in Ot){const Eo=ae.layers[li];if(!Eo)continue;Eo.version===1&&a.w(`Vector tile source "${this.source}" layer "${li}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const If=rt.encode(li),ld=[];for(let Gt=0;Gt<Eo.length;Gt++){const Is=Eo.feature(Gt),Ds=tt.getId(Is,li);ld.push({feature:Is,id:Ds,index:Gt,sourceLayerIndex:If})}for(const Gt of Ot[li]){const Is=Gt[0];Is.source!==this.source&&a.w(`layer.source = ${Is.source} does not equal this.source = ${this.source}`),Is.isHidden(this.zoom,!0)||(g(Gt,this.zoom,be),(Ye[Is.id]=Is.createBucket({index:tt.bucketLayerIDs.length,layers:Gt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:If,sourceID:this.source})).populate(ld,at,this.tileID.canonical),tt.bucketLayerIDs.push(Gt.map((Ds=>Ds.id))))}}const ot=a.bY(at.glyphDependencies,(li=>Object.keys(li).map(Number)));this.inFlightDependencies.forEach((li=>li?.abort())),this.inFlightDependencies=[];let $t=Promise.resolve({});if(Object.keys(ot).length){const li=new AbortController;this.inFlightDependencies.push(li),$t=$e.sendAsync({type:"GG",data:{stacks:ot,source:this.source,tileID:this.tileID,type:"glyphs"}},li)}const an=Object.keys(at.iconDependencies);let $n=Promise.resolve({});if(an.length){const li=new AbortController;this.inFlightDependencies.push(li),$n=$e.sendAsync({type:"GI",data:{icons:an,source:this.source,tileID:this.tileID,type:"icons"}},li)}const Er=Object.keys(at.patternDependencies);let Tr=Promise.resolve({});if(Er.length){const li=new AbortController;this.inFlightDependencies.push(li),Tr=$e.sendAsync({type:"GI",data:{icons:Er,source:this.source,tileID:this.tileID,type:"patterns"}},li)}const ut=at.dashDependencies;let Ur=Promise.resolve({});if(Object.keys(ut).length){const li=new AbortController;this.inFlightDependencies.push(li),Ur=$e.sendAsync({type:"GDA",data:{dashes:ut}},li)}const[eo,Gn,Cn,gi]=yield Promise.all([$t,$n,Tr,Ur]),ti=new u(eo),to=new a.cP(Gn,Cn);for(const li in Ye){const Eo=Ye[li];Eo instanceof a.ah?(g(Eo.layers,this.zoom,be),a.cQ({bucket:Eo,glyphMap:eo,glyphPositions:ti.positions,imageMap:Gn,imagePositions:to.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:at.subdivisionGranularity})):Eo.hasDependencies&&(Eo instanceof a.cR||Eo instanceof a.cS||Eo instanceof a.cT)&&(g(Eo.layers,this.zoom,be),Eo.addFeatures(at,this.tileID.canonical,to.patternPositions,gi))}return this.status="done",{buckets:Object.values(Ye).filter((li=>!li.isEmpty())),featureIndex:tt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ti.image,imageAtlas:to,dashPositions:gi,glyphMap:this.returnDependencies?eo:null,iconMap:this.returnDependencies?Gn:null,glyphPositions:this.returnDependencies?ti.positions:null}}))}}function g(we,ae,Y){const be=new a.H(ae);for(const $e of we)$e.recalculate(be,Y)}class _{constructor(ae,Y,be,$e,ze){this.type=ae,this.properties=be||{},this.extent=ze,this.pointsArray=Y,this.id=$e}loadGeometry(){return this.pointsArray.map((ae=>ae.map((Y=>new a.P(Y.x,Y.y)))))}}class w{constructor(ae,Y,be){this.version=2,this._myFeatures=ae,this.name=Y,this.length=ae.length,this.extent=be}feature(ae){return this._myFeatures[ae]}}class S{constructor(){this.layers={}}addLayer(ae){this.layers[ae.name]=ae}}function E(we){let ae=a.cU(we);return ae.byteOffset===0&&ae.byteLength===ae.buffer.byteLength||(ae=new Uint8Array(ae)),{vectorTile:we,rawData:ae.buffer}}function A(we,ae,Y){const{extent:be}=we,$e=Math.pow(2,Y.z-ae.z),ze=(Y.x-ae.x*$e)*be,rt=(Y.y-ae.y*$e)*be,tt=[];for(let Ye=0;Ye<we.length;Ye++){const at=we.feature(Ye);let Ot=at.loadGeometry();for(const $t of Ot)for(const an of $t)an.x=an.x*$e-ze,an.y=an.y*$e-rt;const ot=128;Ot=a.cV(Ot,at.type,-ot,-ot,be+ot,be+ot),Ot.length!==0&&tt.push(new _(at.type,Ot,at.properties,at.id,be))}return new w(tt,we.name,be)}class R{constructor(ae,Y,be){this.actor=ae,this.layerIndex=Y,this.availableImages=be,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new a.cW(1e3)}loadVectorTile(ae,Y){return a._(this,void 0,void 0,(function*(){const be=yield a.n(ae.request,Y);try{return{vectorTile:ae.encoding!=="mlt"?new a.cX(new a.cY(be.data)):new a.cZ(be.data),rawData:be.data,cacheControl:be.cacheControl,expires:be.expires}}catch($e){const ze=new Uint8Array(be.data);let rt=`Unable to parse the tile at ${ae.request.url}, `;throw rt+=ze[0]===31&&ze[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${$e.message}`,new Error(rt)}}))}loadTile(ae){return a._(this,void 0,void 0,(function*(){const{uid:Y,overzoomParameters:be}=ae;be&&(ae.request=be.overzoomRequest);const $e=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new a.c_(ae.request),ze=new f(ae);this.loading[Y]=ze;const rt=new AbortController;ze.abort=rt;try{const tt=yield this.loadVectorTile(ae,rt);if(delete this.loading[Y],!tt)return null;if(be){const $t=this._getOverzoomTile(ae,tt.vectorTile);tt.rawData=$t.rawData,tt.vectorTile=$t.vectorTile}const Ye=tt.rawData,at={};tt.expires&&(at.expires=tt.expires),tt.cacheControl&&(at.cacheControl=tt.cacheControl);const Ot={};if($e){const $t=$e.finish();$t&&(Ot.resourceTiming=JSON.parse(JSON.stringify($t)))}ze.vectorTile=tt.vectorTile;const ot=ze.parse(tt.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);this.loaded[Y]=ze,this.fetching[Y]={rawTileData:Ye,cacheControl:at,resourceTiming:Ot};try{const $t=yield ot;return a.e({rawTileData:Ye.slice(0),encoding:ae.encoding},$t,at,Ot)}finally{delete this.fetching[Y]}}catch(tt){throw delete this.loading[Y],ze.status="done",this.loaded[Y]=ze,tt}}))}_getOverzoomTile(ae,Y){const{tileID:be,source:$e,overzoomParameters:ze}=ae,{maxZoomTileID:rt}=ze,tt=`${rt.key}_${be.key}`,Ye=this.overzoomedTileResultCache.get(tt);if(Ye)return Ye;const at=new S,Ot=this.layerIndex.familiesBySource[$e];for(const $t in Ot){const an=Y.layers[$t];if(!an)continue;const $n=A(an,rt,be.canonical);$n.length>0&&at.addLayer($n)}const ot=E(at);return this.overzoomedTileResultCache.set(tt,ot),ot}reloadTile(ae){return a._(this,void 0,void 0,(function*(){const Y=ae.uid;if(!this.loaded||!this.loaded[Y])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const be=this.loaded[Y];if(be.showCollisionBoxes=ae.showCollisionBoxes,be.status==="parsing"){const $e=yield be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);let ze;if(this.fetching[Y]){const{rawTileData:rt,cacheControl:tt,resourceTiming:Ye}=this.fetching[Y];delete this.fetching[Y],ze=a.e({rawTileData:rt.slice(0),encoding:ae.encoding},$e,tt,Ye)}else ze=$e;return ze}if(be.status==="done"&&be.vectorTile)return be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity)}))}abortTile(ae){return a._(this,void 0,void 0,(function*(){const Y=this.loading,be=ae.uid;Y&&Y[be]&&Y[be].abort&&(Y[be].abort.abort(),delete Y[be])}))}removeTile(ae){return a._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]}))}}class ${constructor(){this.loaded={}}loadTile(ae){return a._(this,void 0,void 0,(function*(){const{uid:Y,encoding:be,rawImageData:$e,redFactor:ze,greenFactor:rt,blueFactor:tt,baseShift:Ye}=ae,at=$e.width+2,Ot=$e.height+2,ot=a.b($e)?new a.R({width:at,height:Ot},yield a.c$($e,-1,-1,at,Ot)):$e,$t=new a.d0(Y,ot,be,ze,rt,tt,Ye);return this.loaded=this.loaded||{},this.loaded[Y]=$t,$t}))}removeTile(ae){const Y=this.loaded,be=ae.uid;Y&&Y[be]&&delete Y[be]}}var z,B,F=(function(){if(B)return z;function we(Y,be){if(Y.length!==0){ae(Y[0],be);for(var $e=1;$e<Y.length;$e++)ae(Y[$e],!be)}}function ae(Y,be){for(var $e=0,ze=0,rt=0,tt=Y.length,Ye=tt-1;rt<tt;Ye=rt++){var at=(Y[rt][0]-Y[Ye][0])*(Y[Ye][1]+Y[rt][1]),Ot=$e+at;ze+=Math.abs($e)>=Math.abs(at)?$e-Ot+at:at-Ot+$e,$e=Ot}$e+ze>=0!=!!be&&Y.reverse()}return B=1,z=function Y(be,$e){var ze,rt=be&&be.type;if(rt==="FeatureCollection")for(ze=0;ze<be.features.length;ze++)Y(be.features[ze],$e);else if(rt==="GeometryCollection")for(ze=0;ze<be.geometries.length;ze++)Y(be.geometries[ze],$e);else if(rt==="Feature")Y(be.geometry,$e);else if(rt==="Polygon")we(be.coordinates,$e);else if(rt==="MultiPolygon")for(ze=0;ze<be.coordinates.length;ze++)we(be.coordinates[ze],$e);return be}})(),U=a.d1(F);const q={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:we=>we},H=Math.fround||(ne=new Float32Array(1),we=>(ne[0]=+we,ne[0]));var ne;class ie{constructor(ae){this.options=Object.assign(Object.create(q),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:Y,minZoom:be,maxZoom:$e}=this.options;Y&&console.time("total time");const ze=`prepare ${ae.length} points`;Y&&console.time(ze),this.points=ae;const rt=[];for(let Ye=0;Ye<ae.length;Ye++){const at=ae[Ye];if(!at.geometry)continue;const[Ot,ot]=at.geometry.coordinates,$t=H(re(Ot)),an=H(me(ot));rt.push($t,an,1/0,Ye,-1,1),this.options.reduce&&rt.push(0)}let tt=this.trees[$e+1]=this._createTree(rt);Y&&console.timeEnd(ze);for(let Ye=$e;Ye>=be;Ye--){const at=+Date.now();tt=this.trees[Ye]=this._createTree(this._cluster(tt,Ye)),Y&&console.log("z%d: %d clusters in %dms",Ye,tt.numItems,+Date.now()-at)}return Y&&console.timeEnd("total time"),this}getClusters(ae,Y){let be=((ae[0]+180)%360+360)%360-180;const $e=Math.max(-90,Math.min(90,ae[1]));let ze=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const rt=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)be=-180,ze=180;else if(be>ze){const ot=this.getClusters([be,$e,180,rt],Y),$t=this.getClusters([-180,$e,ze,rt],Y);return ot.concat($t)}const tt=this.trees[this._limitZoom(Y)],Ye=tt.range(re(be),me(rt),re(ze),me($e)),at=tt.data,Ot=[];for(const ot of Ye){const $t=this.stride*ot;Ot.push(at[$t+5]>1?ce(at,$t,this.clusterProps):this.points[at[$t+3]])}return Ot}getChildren(ae){const Y=this._getOriginId(ae),be=this._getOriginZoom(ae),$e="No cluster with the specified id.",ze=this.trees[be];if(!ze)throw new Error($e);const rt=ze.data;if(Y*this.stride>=rt.length)throw new Error($e);const tt=this.options.radius/(this.options.extent*Math.pow(2,be-1)),Ye=ze.within(rt[Y*this.stride],rt[Y*this.stride+1],tt),at=[];for(const Ot of Ye){const ot=Ot*this.stride;rt[ot+4]===ae&&at.push(rt[ot+5]>1?ce(rt,ot,this.clusterProps):this.points[rt[ot+3]])}if(at.length===0)throw new Error($e);return at}getLeaves(ae,Y,be){const $e=[];return this._appendLeaves($e,ae,Y=Y||10,be=be||0,0),$e}getTile(ae,Y,be){const $e=this.trees[this._limitZoom(ae)],ze=Math.pow(2,ae),{extent:rt,radius:tt}=this.options,Ye=tt/rt,at=(be-Ye)/ze,Ot=(be+1+Ye)/ze,ot={features:[]};return this._addTileFeatures($e.range((Y-Ye)/ze,at,(Y+1+Ye)/ze,Ot),$e.data,Y,be,ze,ot),Y===0&&this._addTileFeatures($e.range(1-Ye/ze,at,1,Ot),$e.data,ze,be,ze,ot),Y===ze-1&&this._addTileFeatures($e.range(0,at,Ye/ze,Ot),$e.data,-1,be,ze,ot),ot.features.length?ot:null}getClusterExpansionZoom(ae){let Y=this._getOriginZoom(ae)-1;for(;Y<=this.options.maxZoom;){const be=this.getChildren(ae);if(Y++,be.length!==1)break;ae=be[0].properties.cluster_id}return Y}_appendLeaves(ae,Y,be,$e,ze){const rt=this.getChildren(Y);for(const tt of rt){const Ye=tt.properties;if(Ye&&Ye.cluster?ze+Ye.point_count<=$e?ze+=Ye.point_count:ze=this._appendLeaves(ae,Ye.cluster_id,be,$e,ze):ze<$e?ze++:ae.push(tt),ae.length===be)break}return ze}_createTree(ae){const Y=new a.aT(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let be=0;be<ae.length;be+=this.stride)Y.add(ae[be],ae[be+1]);return Y.finish(),Y.data=ae,Y}_addTileFeatures(ae,Y,be,$e,ze,rt){for(const tt of ae){const Ye=tt*this.stride,at=Y[Ye+5]>1;let Ot,ot,$t;if(at)Ot=xe(Y,Ye,this.clusterProps),ot=Y[Ye],$t=Y[Ye+1];else{const Er=this.points[Y[Ye+3]];Ot=Er.properties;const[Tr,ut]=Er.geometry.coordinates;ot=re(Tr),$t=me(ut)}const an={type:1,geometry:[[Math.round(this.options.extent*(ot*ze-be)),Math.round(this.options.extent*($t*ze-$e))]],tags:Ot};let $n;$n=at||this.options.generateId?Y[Ye+3]:this.points[Y[Ye+3]].id,$n!==void 0&&(an.id=$n),rt.features.push(an)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,Y){const{radius:be,extent:$e,reduce:ze,minPoints:rt}=this.options,tt=be/($e*Math.pow(2,Y)),Ye=ae.data,at=[],Ot=this.stride;for(let ot=0;ot<Ye.length;ot+=Ot){if(Ye[ot+2]<=Y)continue;Ye[ot+2]=Y;const $t=Ye[ot],an=Ye[ot+1],$n=ae.within(Ye[ot],Ye[ot+1],tt),Er=Ye[ot+5];let Tr=Er;for(const ut of $n){const Ur=ut*Ot;Ye[Ur+2]>Y&&(Tr+=Ye[Ur+5])}if(Tr>Er&&Tr>=rt){let ut,Ur=$t*Er,eo=an*Er,Gn=-1;const Cn=(ot/Ot<<5)+(Y+1)+this.points.length;for(const gi of $n){const ti=gi*Ot;if(Ye[ti+2]<=Y)continue;Ye[ti+2]=Y;const to=Ye[ti+5];Ur+=Ye[ti]*to,eo+=Ye[ti+1]*to,Ye[ti+4]=Cn,ze&&(ut||(ut=this._map(Ye,ot,!0),Gn=this.clusterProps.length,this.clusterProps.push(ut)),ze(ut,this._map(Ye,ti)))}Ye[ot+4]=Cn,at.push(Ur/Tr,eo/Tr,1/0,Cn,-1,Tr),ze&&at.push(Gn)}else{for(let ut=0;ut<Ot;ut++)at.push(Ye[ot+ut]);if(Tr>1)for(const ut of $n){const Ur=ut*Ot;if(!(Ye[Ur+2]<=Y)){Ye[Ur+2]=Y;for(let eo=0;eo<Ot;eo++)at.push(Ye[Ur+eo])}}}}return at}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,Y,be){if(ae[Y+5]>1){const rt=this.clusterProps[ae[Y+6]];return be?Object.assign({},rt):rt}const $e=this.points[ae[Y+3]].properties,ze=this.options.map($e);return be&&ze===$e?Object.assign({},ze):ze}}function ce(we,ae,Y){return{type:"Feature",id:we[ae+3],properties:xe(we,ae,Y),geometry:{type:"Point",coordinates:[(be=we[ae],360*(be-.5)),Te(we[ae+1])]}};var be}function xe(we,ae,Y){const be=we[ae+5],$e=be>=1e4?`${Math.round(be/1e3)}k`:be>=1e3?Math.round(be/100)/10+"k":be,ze=we[ae+6],rt=ze===-1?{}:Object.assign({},Y[ze]);return Object.assign(rt,{cluster:!0,cluster_id:we[ae+3],point_count:be,point_count_abbreviated:$e})}function re(we){return we/360+.5}function me(we){const ae=Math.sin(we*Math.PI/180),Y=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return Y<0?0:Y>1?1:Y}function Te(we){const ae=(180-360*we)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function ye(we,ae,Y,be){let $e=be;const ze=ae+(Y-ae>>1);let rt,tt=Y-ae;const Ye=we[ae],at=we[ae+1],Ot=we[Y],ot=we[Y+1];for(let $t=ae+3;$t<Y;$t+=3){const an=_e(we[$t],we[$t+1],Ye,at,Ot,ot);if(an>$e)rt=$t,$e=an;else if(an===$e){const $n=Math.abs($t-ze);$n<tt&&(rt=$t,tt=$n)}}$e>be&&(rt-ae>3&&ye(we,ae,rt,be),we[rt+2]=$e,Y-rt>3&&ye(we,rt,Y,be))}function _e(we,ae,Y,be,$e,ze){let rt=$e-Y,tt=ze-be;if(rt!==0||tt!==0){const Ye=((we-Y)*rt+(ae-be)*tt)/(rt*rt+tt*tt);Ye>1?(Y=$e,be=ze):Ye>0&&(Y+=rt*Ye,be+=tt*Ye)}return rt=we-Y,tt=ae-be,rt*rt+tt*tt}function ke(we,ae,Y,be){const $e={id:we??null,type:ae,geometry:Y,tags:be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")Ne($e,Y);else if(ae==="Polygon")Ne($e,Y[0]);else if(ae==="MultiLineString")for(const ze of Y)Ne($e,ze);else if(ae==="MultiPolygon")for(const ze of Y)Ne($e,ze[0]);return $e}function Ne(we,ae){for(let Y=0;Y<ae.length;Y+=3)we.minX=Math.min(we.minX,ae[Y]),we.minY=Math.min(we.minY,ae[Y+1]),we.maxX=Math.max(we.maxX,ae[Y]),we.maxY=Math.max(we.maxY,ae[Y+1])}function Qe(we,ae,Y,be){if(!ae.geometry)return;const $e=ae.geometry.coordinates;if($e&&$e.length===0)return;const ze=ae.geometry.type,rt=Math.pow(Y.tolerance/((1<<Y.maxZoom)*Y.extent),2);let tt=[],Ye=ae.id;if(Y.promoteId?Ye=ae.properties[Y.promoteId]:Y.generateId&&(Ye=be||0),ze==="Point")Se($e,tt);else if(ze==="MultiPoint")for(const at of $e)Se(at,tt);else if(ze==="LineString")Me($e,tt,rt,!1);else if(ze==="MultiLineString"){if(Y.lineMetrics){for(const at of $e)tt=[],Me(at,tt,rt,!1),we.push(ke(Ye,"LineString",tt,ae.properties));return}Xe($e,tt,rt,!1)}else if(ze==="Polygon")Xe($e,tt,rt,!0);else{if(ze!=="MultiPolygon"){if(ze==="GeometryCollection"){for(const at of ae.geometry.geometries)Qe(we,{id:Ye,geometry:at,properties:ae.properties},Y,be);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const at of $e){const Ot=[];Xe(at,Ot,rt,!0),tt.push(Ot)}}we.push(ke(Ye,ze,tt,ae.properties))}function Se(we,ae){ae.push(Ee(we[0]),ft(we[1]),0)}function Me(we,ae,Y,be){let $e,ze,rt=0;for(let Ye=0;Ye<we.length;Ye++){const at=Ee(we[Ye][0]),Ot=ft(we[Ye][1]);ae.push(at,Ot,0),Ye>0&&(rt+=be?($e*Ot-at*ze)/2:Math.sqrt(Math.pow(at-$e,2)+Math.pow(Ot-ze,2))),$e=at,ze=Ot}const tt=ae.length-3;ae[2]=1,ye(ae,0,tt,Y),ae[tt+2]=1,ae.size=Math.abs(rt),ae.start=0,ae.end=ae.size}function Xe(we,ae,Y,be){for(let $e=0;$e<we.length;$e++){const ze=[];Me(we[$e],ze,Y,be),ae.push(ze)}}function Ee(we){return we/360+.5}function ft(we){const ae=Math.sin(we*Math.PI/180),Y=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return Y<0?0:Y>1?1:Y}function mt(we,ae,Y,be,$e,ze,rt,tt){if(be/=ae,ze>=(Y/=ae)&&rt<be)return we;if(rt<Y||ze>=be)return null;const Ye=[];for(const at of we){const Ot=at.geometry;let ot=at.type;const $t=$e===0?at.minX:at.minY,an=$e===0?at.maxX:at.maxY;if($t>=Y&&an<be){Ye.push(at);continue}if(an<Y||$t>=be)continue;let $n=[];if(ot==="Point"||ot==="MultiPoint")ct(Ot,$n,Y,be,$e);else if(ot==="LineString")st(Ot,$n,Y,be,$e,!1,tt.lineMetrics);else if(ot==="MultiLineString")At(Ot,$n,Y,be,$e,!1);else if(ot==="Polygon")At(Ot,$n,Y,be,$e,!0);else if(ot==="MultiPolygon")for(const Er of Ot){const Tr=[];At(Er,Tr,Y,be,$e,!0),Tr.length&&$n.push(Tr)}if($n.length){if(tt.lineMetrics&&ot==="LineString"){for(const Er of $n)Ye.push(ke(at.id,ot,Er,at.tags));continue}ot!=="LineString"&&ot!=="MultiLineString"||($n.length===1?(ot="LineString",$n=$n[0]):ot="MultiLineString"),ot!=="Point"&&ot!=="MultiPoint"||(ot=$n.length===3?"Point":"MultiPoint"),Ye.push(ke(at.id,ot,$n,at.tags))}}return Ye.length?Ye:null}function ct(we,ae,Y,be,$e){for(let ze=0;ze<we.length;ze+=3){const rt=we[ze+$e];rt>=Y&&rt<=be&&Tt(ae,we[ze],we[ze+1],we[ze+2])}}function st(we,ae,Y,be,$e,ze,rt){let tt=bt(we);const Ye=$e===0?Wt:nn;let at,Ot,ot=we.start;for(let Tr=0;Tr<we.length-3;Tr+=3){const ut=we[Tr],Ur=we[Tr+1],eo=we[Tr+2],Gn=we[Tr+3],Cn=we[Tr+4],gi=$e===0?ut:Ur,ti=$e===0?Gn:Cn;let to=!1;rt&&(at=Math.sqrt(Math.pow(ut-Gn,2)+Math.pow(Ur-Cn,2))),gi<Y?ti>Y&&(Ot=Ye(tt,ut,Ur,Gn,Cn,Y),rt&&(tt.start=ot+at*Ot)):gi>be?ti<be&&(Ot=Ye(tt,ut,Ur,Gn,Cn,be),rt&&(tt.start=ot+at*Ot)):Tt(tt,ut,Ur,eo),ti<Y&&gi>=Y&&(Ot=Ye(tt,ut,Ur,Gn,Cn,Y),to=!0),ti>be&&gi<=be&&(Ot=Ye(tt,ut,Ur,Gn,Cn,be),to=!0),!ze&&to&&(rt&&(tt.end=ot+at*Ot),ae.push(tt),tt=bt(we)),rt&&(ot+=at)}let $t=we.length-3;const an=we[$t],$n=we[$t+1],Er=$e===0?an:$n;Er>=Y&&Er<=be&&Tt(tt,an,$n,we[$t+2]),$t=tt.length-3,ze&&$t>=3&&(tt[$t]!==tt[0]||tt[$t+1]!==tt[1])&&Tt(tt,tt[0],tt[1],tt[2]),tt.length&&ae.push(tt)}function bt(we){const ae=[];return ae.size=we.size,ae.start=we.start,ae.end=we.end,ae}function At(we,ae,Y,be,$e,ze){for(const rt of we)st(rt,ae,Y,be,$e,ze,!1)}function Tt(we,ae,Y,be){we.push(ae,Y,be)}function Wt(we,ae,Y,be,$e,ze){const rt=(ze-ae)/(be-ae);return Tt(we,ze,Y+($e-Y)*rt,1),rt}function nn(we,ae,Y,be,$e,ze){const rt=(ze-Y)/($e-Y);return Tt(we,ae+(be-ae)*rt,ze,1),rt}function An(we,ae){const Y=[];for(let be=0;be<we.length;be++){const $e=we[be],ze=$e.type;let rt;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")rt=rn($e.geometry,ae);else if(ze==="MultiLineString"||ze==="Polygon"){rt=[];for(const tt of $e.geometry)rt.push(rn(tt,ae))}else if(ze==="MultiPolygon"){rt=[];for(const tt of $e.geometry){const Ye=[];for(const at of tt)Ye.push(rn(at,ae));rt.push(Ye)}}Y.push(ke($e.id,ze,rt,$e.tags))}return Y}function rn(we,ae){const Y=[];Y.size=we.size,we.start!==void 0&&(Y.start=we.start,Y.end=we.end);for(let be=0;be<we.length;be+=3)Y.push(we[be]+ae,we[be+1],we[be+2]);return Y}function Jt(we,ae){if(we.transformed)return we;const Y=1<<we.z,be=we.x,$e=we.y;for(const ze of we.features){const rt=ze.geometry,tt=ze.type;if(ze.geometry=[],tt===1)for(let Ye=0;Ye<rt.length;Ye+=2)ze.geometry.push(Mn(rt[Ye],rt[Ye+1],ae,Y,be,$e));else for(let Ye=0;Ye<rt.length;Ye++){const at=[];for(let Ot=0;Ot<rt[Ye].length;Ot+=2)at.push(Mn(rt[Ye][Ot],rt[Ye][Ot+1],ae,Y,be,$e));ze.geometry.push(at)}}return we.transformed=!0,we}function Mn(we,ae,Y,be,$e,ze){return[Math.round(Y*(we*be-$e)),Math.round(Y*(ae*be-ze))]}function vn(we,ae,Y,be,$e){const ze=ae===$e.maxZoom?0:$e.tolerance/((1<<ae)*$e.extent),rt={features:[],numPoints:0,numSimplified:0,numFeatures:we.length,source:null,x:Y,y:be,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const tt of we)Nn(rt,tt,ze,$e);return rt}function Nn(we,ae,Y,be){const $e=ae.geometry,ze=ae.type,rt=[];if(we.minX=Math.min(we.minX,ae.minX),we.minY=Math.min(we.minY,ae.minY),we.maxX=Math.max(we.maxX,ae.maxX),we.maxY=Math.max(we.maxY,ae.maxY),ze==="Point"||ze==="MultiPoint")for(let tt=0;tt<$e.length;tt+=3)rt.push($e[tt],$e[tt+1]),we.numPoints++,we.numSimplified++;else if(ze==="LineString")lr(rt,$e,we,Y,!1,!1);else if(ze==="MultiLineString"||ze==="Polygon")for(let tt=0;tt<$e.length;tt++)lr(rt,$e[tt],we,Y,ze==="Polygon",tt===0);else if(ze==="MultiPolygon")for(let tt=0;tt<$e.length;tt++){const Ye=$e[tt];for(let at=0;at<Ye.length;at++)lr(rt,Ye[at],we,Y,!0,at===0)}if(rt.length){let tt=ae.tags||null;if(ze==="LineString"&&be.lineMetrics){tt={};for(const at in ae.tags)tt[at]=ae.tags[at];tt.mapbox_clip_start=$e.start/$e.size,tt.mapbox_clip_end=$e.end/$e.size}const Ye={geometry:rt,type:ze==="Polygon"||ze==="MultiPolygon"?3:ze==="LineString"||ze==="MultiLineString"?2:1,tags:tt};ae.id!==null&&(Ye.id=ae.id),we.features.push(Ye)}}function lr(we,ae,Y,be,$e,ze){const rt=be*be;if(be>0&&ae.size<($e?rt:be))return void(Y.numPoints+=ae.length/3);const tt=[];for(let Ye=0;Ye<ae.length;Ye+=3)(be===0||ae[Ye+2]>rt)&&(Y.numSimplified++,tt.push(ae[Ye],ae[Ye+1])),Y.numPoints++;$e&&(function(Ye,at){let Ot=0;for(let ot=0,$t=Ye.length,an=$t-2;ot<$t;an=ot,ot+=2)Ot+=(Ye[ot]-Ye[an])*(Ye[ot+1]+Ye[an+1]);if(Ot>0===at)for(let ot=0,$t=Ye.length;ot<$t/2;ot+=2){const an=Ye[ot],$n=Ye[ot+1];Ye[ot]=Ye[$t-2-ot],Ye[ot+1]=Ye[$t-1-ot],Ye[$t-2-ot]=an,Ye[$t-1-ot]=$n}})(tt,ze),we.push(tt)}const rr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ue{constructor(ae,Y){const be=(Y=this.options=(function(ze,rt){for(const tt in rt)ze[tt]=rt[tt];return ze})(Object.create(rr),Y)).debug;if(be&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");let $e=(function(ze,rt){const tt=[];if(ze.type==="FeatureCollection")for(let Ye=0;Ye<ze.features.length;Ye++)Qe(tt,ze.features[Ye],rt,Ye);else Qe(tt,ze.type==="Feature"?ze:{geometry:ze},rt);return tt})(ae,Y);this.tiles={},this.tileCoords=[],be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),$e=(function(ze,rt){const tt=rt.buffer/rt.extent;let Ye=ze;const at=mt(ze,1,-1-tt,tt,0,-1,2,rt),Ot=mt(ze,1,1-tt,2+tt,0,-1,2,rt);return(at||Ot)&&(Ye=mt(ze,1,-tt,1+tt,0,-1,2,rt)||[],at&&(Ye=An(at,1).concat(Ye)),Ot&&(Ye=Ye.concat(An(Ot,-1)))),Ye})($e,Y),$e.length&&this.splitTile($e,0,0,0),be&&($e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,Y,be,$e,ze,rt,tt){const Ye=[ae,Y,be,$e],at=this.options,Ot=at.debug;for(;Ye.length;){$e=Ye.pop(),be=Ye.pop(),Y=Ye.pop(),ae=Ye.pop();const ot=1<<Y,$t=Je(Y,be,$e);let an=this.tiles[$t];if(!an&&(Ot>1&&console.time("creation"),an=this.tiles[$t]=vn(ae,Y,be,$e,at),this.tileCoords.push({z:Y,x:be,y:$e}),Ot)){Ot>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,be,$e,an.numFeatures,an.numPoints,an.numSimplified),console.timeEnd("creation"));const to=`z${Y}`;this.stats[to]=(this.stats[to]||0)+1,this.total++}if(an.source=ae,ze==null){if(Y===at.indexMaxZoom||an.numPoints<=at.indexMaxPoints)continue}else{if(Y===at.maxZoom||Y===ze)continue;if(ze!=null){const to=ze-Y;if(be!==rt>>to||$e!==tt>>to)continue}}if(an.source=null,ae.length===0)continue;Ot>1&&console.time("clipping");const $n=.5*at.buffer/at.extent,Er=.5-$n,Tr=.5+$n,ut=1+$n;let Ur=null,eo=null,Gn=null,Cn=null,gi=mt(ae,ot,be-$n,be+Tr,0,an.minX,an.maxX,at),ti=mt(ae,ot,be+Er,be+ut,0,an.minX,an.maxX,at);ae=null,gi&&(Ur=mt(gi,ot,$e-$n,$e+Tr,1,an.minY,an.maxY,at),eo=mt(gi,ot,$e+Er,$e+ut,1,an.minY,an.maxY,at),gi=null),ti&&(Gn=mt(ti,ot,$e-$n,$e+Tr,1,an.minY,an.maxY,at),Cn=mt(ti,ot,$e+Er,$e+ut,1,an.minY,an.maxY,at),ti=null),Ot>1&&console.timeEnd("clipping"),Ye.push(Ur||[],Y+1,2*be,2*$e),Ye.push(eo||[],Y+1,2*be,2*$e+1),Ye.push(Gn||[],Y+1,2*be+1,2*$e),Ye.push(Cn||[],Y+1,2*be+1,2*$e+1)}}getTile(ae,Y,be){ae=+ae,Y=+Y,be=+be;const $e=this.options,{extent:ze,debug:rt}=$e;if(ae<0||ae>24)return null;const tt=1<<ae,Ye=Je(ae,Y=Y+tt&tt-1,be);if(this.tiles[Ye])return Jt(this.tiles[Ye],ze);rt>1&&console.log("drilling down to z%d-%d-%d",ae,Y,be);let at,Ot=ae,ot=Y,$t=be;for(;!at&&Ot>0;)Ot--,ot>>=1,$t>>=1,at=this.tiles[Je(Ot,ot,$t)];return at&&at.source?(rt>1&&(console.log("found parent tile z%d-%d-%d",Ot,ot,$t),console.time("drilling down")),this.splitTile(at.source,Ot,ot,$t,ae,Y,be),rt>1&&console.timeEnd("drilling down"),this.tiles[Ye]?Jt(this.tiles[Ye],ze):null):null}}function Je(we,ae,Y){return 32*((1<<we)*Y+ae)+we}class xt extends R{constructor(ae,Y,be,$e=Et){super(ae,Y,be),this._dataUpdateable=new Map,this._createGeoJSONIndex=$e}loadVectorTile(ae,Y){return a._(this,void 0,void 0,(function*(){const be=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const $e=this._geoJSONIndex.getTile(be.z,be.x,be.y);return $e?E(new a.d2($e.features,{version:2,extent:a.a5})):null}))}loadData(ae){return a._(this,void 0,void 0,(function*(){var Y;(Y=this._pendingRequest)===null||Y===void 0||Y.abort();const be=this._startPerformance(ae);this._pendingRequest=new AbortController;try{(!this._pendingData||ae.request||ae.data||ae.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest));const $e=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex($e,ae),this.loaded={};const ze={};return ae.request&&(ze.data=$e),this._finishPerformance(be,ae,ze),ze}catch($e){if(delete this._pendingRequest,a.Z($e))return{abandoned:!0};throw $e}}))}_startPerformance(ae){var Y;if(!((Y=ae?.request)===null||Y===void 0)&&Y.collectResourceTiming)return new a.c_(ae.request)}_finishPerformance(ae,Y,be){if(!ae)return;const $e=ae.finish();$e&&(be.resourceTiming={},be.resourceTiming[Y.source]=JSON.parse(JSON.stringify($e)))}getData(){return a._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ae){const Y=this.loaded;return Y&&Y[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,Y){return a._(this,void 0,void 0,(function*(){let be;if(ae.request?be=yield this.loadGeoJSONFromUrl(ae.request,ae.promoteId,Y):ae.data?be=this._loadGeoJSONFromObject(ae.data,ae.promoteId):ae.dataDiff&&(be=this._loadGeoJSONFromDiff(ae.dataDiff,ae.promoteId,ae.source)),delete this._pendingRequest,typeof be!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);return U(be,!0),ae.filter&&(be=this._filterGeoJSON(be,ae.filter)),be}))}loadGeoJSONFromUrl(ae,Y,be){return a._(this,void 0,void 0,(function*(){const $e=yield a.j(ae,be);return this._dataUpdateable=a.a7($e.data,Y),$e.data}))}_loadGeoJSONFromObject(ae,Y){return this._dataUpdateable=a.a7(ae,Y),ae}_loadGeoJSONFromDiff(ae,Y,be){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${be}`);a.a8(this._dataUpdateable,ae,Y);const $e=Array.from(this._dataUpdateable.values());return this._toFeatureCollection($e)}_filterGeoJSON(ae,Y){const be=a.d3(Y,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(be.result==="error")throw new Error(be.value.map((ze=>`${ze.key}: ${ze.message}`)).join(", "));const $e=ae.features.filter((ze=>be.value.evaluate({zoom:0},ze)));return this._toFeatureCollection($e)}_toFeatureCollection(ae){return{type:"FeatureCollection",features:ae}}removeSource(ae){return a._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}function Et(we,ae){return ae.cluster?new ie((function({superclusterOptions:Y,clusterProperties:be}){if(!be||!Y)return Y;const $e={},ze={},rt={accumulated:null,zoom:0},tt={properties:null},Ye=Object.keys(be);for(const at of Ye){const[Ot,ot]=be[at],$t=a.d3(ot),an=a.d3(typeof Ot=="string"?[Ot,["accumulated"],["get",at]]:Ot);$e[at]=$t.value,ze[at]=an.value}return Y.map=at=>{tt.properties=at;const Ot={};for(const ot of Ye)Ot[ot]=$e[ot].evaluate(rt,tt);return Ot},Y.reduce=(at,Ot)=>{tt.properties=Ot;for(const ot of Ye)rt.accumulated=at[ot],at[ot]=ze[ot].evaluate(rt,tt)},Y})(ae)).load(we.features):(function(Y,be){return new Ue(Y,be)})(we,ae.geojsonVtOptions)}class Vt{constructor(ae){this.self=ae,this.actor=new a.L(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(Y,be)=>{if(this.externalWorkerSourceTypes[Y])throw new Error(`Worker source with name "${Y}" already registered.`);this.externalWorkerSourceTypes[Y]=be},this.self.addProtocol=a.cJ,this.self.removeProtocol=a.cK,this.self.registerRTLTextPlugin=Y=>{a.d4.setMethods(Y)},this.actor.registerMessageHandler("LDT",((Y,be)=>this._getDEMWorkerSource(Y,be.source).loadTile(be))),this.actor.registerMessageHandler("RDT",((Y,be)=>a._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(Y,be.source).removeTile(be)})))),this.actor.registerMessageHandler("GCEZ",((Y,be)=>a._(this,void 0,void 0,(function*(){return this._getWorkerSource(Y,be.type,be.source).getClusterExpansionZoom(be)})))),this.actor.registerMessageHandler("GCC",((Y,be)=>a._(this,void 0,void 0,(function*(){return this._getWorkerSource(Y,be.type,be.source).getClusterChildren(be)})))),this.actor.registerMessageHandler("GCL",((Y,be)=>a._(this,void 0,void 0,(function*(){return this._getWorkerSource(Y,be.type,be.source).getClusterLeaves(be)})))),this.actor.registerMessageHandler("LD",((Y,be)=>this._getWorkerSource(Y,be.type,be.source).loadData(be))),this.actor.registerMessageHandler("GD",((Y,be)=>this._getWorkerSource(Y,be.type,be.source).getData())),this.actor.registerMessageHandler("LT",((Y,be)=>this._getWorkerSource(Y,be.type,be.source).loadTile(be))),this.actor.registerMessageHandler("RT",((Y,be)=>this._getWorkerSource(Y,be.type,be.source).reloadTile(be))),this.actor.registerMessageHandler("AT",((Y,be)=>this._getWorkerSource(Y,be.type,be.source).abortTile(be))),this.actor.registerMessageHandler("RMT",((Y,be)=>this._getWorkerSource(Y,be.type,be.source).removeTile(be))),this.actor.registerMessageHandler("RS",((Y,be)=>a._(this,void 0,void 0,(function*(){if(!this.workerSources[Y]||!this.workerSources[Y][be.type]||!this.workerSources[Y][be.type][be.source])return;const $e=this.workerSources[Y][be.type][be.source];delete this.workerSources[Y][be.type][be.source],$e.removeSource!==void 0&&$e.removeSource(be)})))),this.actor.registerMessageHandler("RM",(Y=>a._(this,void 0,void 0,(function*(){delete this.layerIndexes[Y],delete this.availableImages[Y],delete this.workerSources[Y],delete this.demWorkerSources[Y],this.globalStates.delete(Y)})))),this.actor.registerMessageHandler("SR",((Y,be)=>a._(this,void 0,void 0,(function*(){this.referrer=be})))),this.actor.registerMessageHandler("SRPS",((Y,be)=>this._syncRTLPluginState(Y,be))),this.actor.registerMessageHandler("IS",((Y,be)=>a._(this,void 0,void 0,(function*(){this.self.importScripts(be)})))),this.actor.registerMessageHandler("SI",((Y,be)=>this._setImages(Y,be))),this.actor.registerMessageHandler("UL",((Y,be)=>a._(this,void 0,void 0,(function*(){this._getLayerIndex(Y).update(be.layers,be.removedIds,this._getGlobalState(Y))})))),this.actor.registerMessageHandler("UGS",((Y,be)=>a._(this,void 0,void 0,(function*(){const $e=this._getGlobalState(Y);for(const ze in be)$e[ze]=be[ze]})))),this.actor.registerMessageHandler("SL",((Y,be)=>a._(this,void 0,void 0,(function*(){this._getLayerIndex(Y).replace(be,this._getGlobalState(Y))}))))}_getGlobalState(ae){let Y=this.globalStates.get(ae);return Y||(Y={},this.globalStates.set(ae,Y)),Y}_setImages(ae,Y){return a._(this,void 0,void 0,(function*(){this.availableImages[ae]=Y;for(const be in this.workerSources[ae]){const $e=this.workerSources[ae][be];for(const ze in $e)$e[ze].availableImages=Y}}))}_syncRTLPluginState(ae,Y){return a._(this,void 0,void 0,(function*(){return yield a.d4.syncState(Y,this.self.importScripts)}))}_getAvailableImages(ae){let Y=this.availableImages[ae];return Y||(Y=[]),Y}_getLayerIndex(ae){let Y=this.layerIndexes[ae];return Y||(Y=this.layerIndexes[ae]=new s),Y}_getWorkerSource(ae,Y,be){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][Y]||(this.workerSources[ae][Y]={}),!this.workerSources[ae][Y][be]){const $e={sendAsync:(ze,rt)=>(ze.targetMapId=ae,this.actor.sendAsync(ze,rt))};switch(Y){case"vector":this.workerSources[ae][Y][be]=new R($e,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][Y][be]=new xt($e,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][Y][be]=new this.externalWorkerSourceTypes[Y]($e,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][Y][be]}_getDEMWorkerSource(ae,Y){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][Y]||(this.demWorkerSources[ae][Y]=new $),this.demWorkerSources[ae][Y]}}return a.i(self)&&(self.worker=new Vt(self)),Vt})),i("index",["exports","./shared"],(function(a,s){var u="5.15.0";function f(){var P=new s.A(4);return s.A!=Float32Array&&(P[1]=0,P[2]=0),P[0]=1,P[3]=1,P}let g,_,w;const S={frame(P,c,m){const b=requestAnimationFrame((I=>{C(),c(I)})),{unsubscribe:C}=s.s(P.signal,"abort",(()=>{C(),cancelAnimationFrame(b),m(new s.a(P.signal.reason))}),!1)},frameAsync(P){return new Promise(((c,m)=>{this.frame(P,c,m)}))},getImageData(P,c=0){return this.getImageCanvasContext(P).getImageData(-c,-c,P.width+2*c,P.height+2*c)},getImageCanvasContext(P){const c=window.document.createElement("canvas"),m=c.getContext("2d",{willReadFrequently:!0});if(!m)throw new Error("failed to create canvas 2d context");return c.width=P.width,c.height=P.height,m.drawImage(P,0,0,P.width,P.height),m},resolveURL:P=>(g||(g=document.createElement("a")),g.href=P,g.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return w!==void 0?w:!!matchMedia&&(_==null&&(_=matchMedia("(prefers-reduced-motion: reduce)")),_.matches)},set prefersReducedMotion(P){w=P}},E=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(P){this._frozenAt=P}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function A(){return E.getCurrentTime()}class R{static testProp(c){if(!R.docStyle)return c[0];for(let m=0;m<c.length;m++)if(c[m]in R.docStyle)return c[m];return c[0]}static create(c,m,b){const C=window.document.createElement(c);return m!==void 0&&(C.className=m),b&&b.appendChild(C),C}static createNS(c,m){return window.document.createElementNS(c,m)}static disableDrag(){R.docStyle&&R.selectProp&&(R.userSelect=R.docStyle[R.selectProp],R.docStyle[R.selectProp]="none")}static enableDrag(){R.docStyle&&R.selectProp&&(R.docStyle[R.selectProp]=R.userSelect)}static setTransform(c,m){c.style[R.transformProp]=m}static addEventListener(c,m,b,C={}){c.addEventListener(m,b,"passive"in C?C:C.capture)}static removeEventListener(c,m,b,C={}){c.removeEventListener(m,b,"passive"in C?C:C.capture)}static suppressClickInternal(c){c.preventDefault(),c.stopPropagation(),window.removeEventListener("click",R.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",R.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",R.suppressClickInternal,!0)}),0)}static getScale(c){const m=c.getBoundingClientRect();return{x:m.width/c.offsetWidth||1,y:m.height/c.offsetHeight||1,boundingClientRect:m}}static getPoint(c,m,b){const C=m.boundingClientRect;return new s.P((b.clientX-C.left)/m.x-c.clientLeft,(b.clientY-C.top)/m.y-c.clientTop)}static mousePos(c,m){const b=R.getScale(c);return R.getPoint(c,b,m)}static touchPos(c,m){const b=[],C=R.getScale(c);for(let I=0;I<m.length;I++)b.push(R.getPoint(c,C,m[I]));return b}static mouseButton(c){return c.button}static remove(c){c.parentNode&&c.parentNode.removeChild(c)}static sanitize(c){const m=new DOMParser().parseFromString(c,"text/html").body||document.createElement("body"),b=m.querySelectorAll("script");for(const C of b)C.remove();return R.clean(m),m.innerHTML}static isPossiblyDangerous(c,m){const b=m.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(c)||!b.includes("javascript:")&&!b.includes("data:"))||!!c.startsWith("on")||void 0}static clean(c){const m=c.children;for(const b of m)R.removeAttributes(b),R.clean(b)}static removeAttributes(c){for(const{name:m,value:b}of c.attributes)R.isPossiblyDangerous(m,b)&&c.removeAttribute(m)}}R.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,R.selectProp=R.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),R.transformProp=R.testProp(["transform","WebkitTransform"]);const $={supported:!1,testSupport:function(P){!F&&B&&(U?q(P):z=P)}};let z,B,F=!1,U=!1;function q(P){const c=P.createTexture();P.bindTexture(P.TEXTURE_2D,c);try{if(P.texImage2D(P.TEXTURE_2D,0,P.RGBA,P.RGBA,P.UNSIGNED_BYTE,B),P.isContextLost())return;$.supported=!0}catch{}P.deleteTexture(c),F=!0}var H;typeof document<"u"&&(B=document.createElement("img"),B.onload=()=>{z&&q(z),z=null,U=!0},B.onerror=()=>{F=!0,z=null},B.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(P){let c,m,b,C;P.resetRequestQueue=()=>{c=[],m=0,b=0,C={}},P.addThrottleControl=W=>{const K=b++;return C[K]=W,K},P.removeThrottleControl=W=>{delete C[W],L()},P.getImage=(W,K,te=!0)=>new Promise(((he,ue)=>{$.supported&&(W.headers||(W.headers={}),W.headers.accept="image/webp,*/*"),s.e(W,{type:"image"}),c.push({abortController:K,requestParameters:W,supportImageRefresh:te,state:"queued",onError:ge=>{ue(ge)},onSuccess:ge=>{he(ge)}}),L()}));const I=W=>s._(this,void 0,void 0,(function*(){W.state="running";const{requestParameters:K,supportImageRefresh:te,onError:he,onSuccess:ue,abortController:ge}=W,Oe=te===!1&&!s.i(self)&&!s.g(K.url)&&(!K.headers||Object.keys(K.headers).reduce(((De,je)=>De&&je==="accept"),!0));m++;const Ie=Oe?j(K,ge):s.m(K,ge);try{const De=yield Ie;delete W.abortController,W.state="completed",De.data instanceof HTMLImageElement||s.b(De.data)?ue(De):De.data&&ue({data:yield(Le=De.data,typeof createImageBitmap=="function"?s.f(Le):s.h(Le)),cacheControl:De.cacheControl,expires:De.expires})}catch(De){delete W.abortController,he(De)}finally{m--,L()}var Le})),L=()=>{const W=(()=>{for(const K of Object.keys(C))if(C[K]())return!0;return!1})()?s.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let K=m;K<W&&c.length>0;K++){const te=c.shift();te.abortController.signal.aborted?K--:I(te)}},j=(W,K)=>new Promise(((te,he)=>{const ue=new Image,ge=W.url,Oe=W.credentials;Oe&&Oe==="include"?ue.crossOrigin="use-credentials":(Oe&&Oe==="same-origin"||!s.d(ge))&&(ue.crossOrigin="anonymous"),K.signal.addEventListener("abort",(()=>{ue.src="",he(new s.a(K.signal.reason))})),ue.fetchPriority="high",ue.onload=()=>{ue.onerror=ue.onload=null,te({data:ue})},ue.onerror=()=>{ue.onerror=ue.onload=null,K.signal.aborted||he(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ue.src=ge}))})(H||(H={})),H.resetRequestQueue();class ne{constructor(c){this._transformRequestFn=c??null}transformRequest(c,m){return this._transformRequestFn&&this._transformRequestFn(c,m)||{url:c}}setTransformRequest(c){this._transformRequestFn=c}}function ie(P){const c=[];if(typeof P=="string")c.push({id:"default",url:P});else if(P&&P.length>0){const m=[];for(const{id:b,url:C}of P){const I=`${b}${C}`;m.indexOf(I)===-1&&(m.push(I),c.push({id:b,url:C}))}}return c}function ce(P,c,m){try{const b=new URL(P);return b.pathname+=`${c}${m}`,b.toString()}catch{throw new Error(`Invalid sprite URL "${P}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function xe(P){const{userImage:c}=P;return!!(c&&c.render&&c.render())&&(P.data.replace(new Uint8Array(c.data.buffer)),!0)}class re extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const c of Object.keys(this.images))this.removeImage(c);this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:m,promiseResolve:b}of this.requestors)b(this._getImagesForIds(m));this.requestors=[]}}getImage(c){const m=this.images[c];if(m&&!m.data&&m.spriteData){const b=m.spriteData;m.data=new s.R({width:b.width,height:b.height},b.context.getImageData(b.x,b.y,b.width,b.height).data),m.spriteData=null}return m}addImage(c,m){if(this.images[c])throw new Error(`Image id ${c} already exist, use updateImage instead`);this._validate(c,m)&&(this.images[c]=m)}_validate(c,m){let b=!0;const C=m.data||m.spriteData;return this._validateStretch(m.stretchX,C&&C.width)||(this.fire(new s.k(new Error(`Image "${c}" has invalid "stretchX" value`))),b=!1),this._validateStretch(m.stretchY,C&&C.height)||(this.fire(new s.k(new Error(`Image "${c}" has invalid "stretchY" value`))),b=!1),this._validateContent(m.content,m)||(this.fire(new s.k(new Error(`Image "${c}" has invalid "content" value`))),b=!1),b}_validateStretch(c,m){if(!c)return!0;let b=0;for(const C of c){if(C[0]<b||C[1]<C[0]||m<C[1])return!1;b=C[1]}return!0}_validateContent(c,m){if(!c)return!0;if(c.length!==4)return!1;const b=m.spriteData,C=b&&b.width||m.data.width,I=b&&b.height||m.data.height;return!(c[0]<0||C<c[0]||c[1]<0||I<c[1]||c[2]<0||C<c[2]||c[3]<0||I<c[3]||c[2]<c[0]||c[3]<c[1])}updateImage(c,m,b=!0){const C=this.getImage(c);if(b&&(C.data.width!==m.data.width||C.data.height!==m.data.height))throw new Error(`size mismatch between old image (${C.data.width}x${C.data.height}) and new image (${m.data.width}x${m.data.height}).`);m.version=C.version+1,this.images[c]=m,this.updatedImages[c]=!0}removeImage(c){const m=this.images[c];delete this.images[c],delete this.patterns[c],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c){return new Promise(((m,b)=>{let C=!0;if(!this.isLoaded())for(const I of c)this.images[I]||(C=!1);this.isLoaded()||C?m(this._getImagesForIds(c)):this.requestors.push({ids:c,promiseResolve:m})}))}_getImagesForIds(c){const m={};for(const b of c){let C=this.getImage(b);C||(this.fire(new s.l("styleimagemissing",{id:b})),C=this.getImage(b)),C?m[b]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,textFitWidth:C.textFitWidth,textFitHeight:C.textFitHeight,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:s.w(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return m}getPixelSize(){const{width:c,height:m}=this.atlasImage;return{width:c,height:m}}getPattern(c){const m=this.patterns[c],b=this.getImage(c);if(!b)return null;if(m&&m.position.version===b.version)return m.position;if(m)m.position.version=b.version;else{const C={w:b.data.width+2,h:b.data.height+2,x:0,y:0},I=new s.I(C,b);this.patterns[c]={bin:C,position:I}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const m=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.T(c,this.atlasImage,m.RGBA),this.atlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const I in this.patterns)c.push(this.patterns[I].bin);const{w:m,h:b}=s.p(c),C=this.atlasImage;C.resize({width:m||1,height:b||1});for(const I in this.patterns){const{bin:L}=this.patterns[I],j=L.x+1,W=L.y+1,K=this.getImage(I).data,te=K.width,he=K.height;s.R.copy(K,C,{x:0,y:0},{x:j,y:W},{width:te,height:he}),s.R.copy(K,C,{x:0,y:he-1},{x:j,y:W-1},{width:te,height:1}),s.R.copy(K,C,{x:0,y:0},{x:j,y:W+he},{width:te,height:1}),s.R.copy(K,C,{x:te-1,y:0},{x:j-1,y:W},{width:1,height:he}),s.R.copy(K,C,{x:0,y:0},{x:j+te,y:W},{width:1,height:he})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const m of c){if(this.callbackDispatchedThisFrame[m])continue;this.callbackDispatchedThisFrame[m]=!0;const b=this.getImage(m);b||s.w(`Image with ID: "${m}" was not found`),xe(b)&&this.updateImage(m,b)}}cloneImages(){const c={};for(const m in this.images){const b=this.images[m];c[m]=Object.assign(Object.assign({},b),{data:b.data?b.data.clone():null})}return c}}const me=1e20;function Te(P,c,m,b,C,I,L,j,W){for(let K=c;K<c+b;K++)ye(P,m*I+K,I,C,L,j,W);for(let K=m;K<m+C;K++)ye(P,K*I+c,1,b,L,j,W)}function ye(P,c,m,b,C,I,L){I[0]=0,L[0]=-me,L[1]=me,C[0]=P[c];for(let j=1,W=0,K=0;j<b;j++){C[j]=P[c+j*m];const te=j*j;do{const he=I[W];K=(C[j]-C[he]+te-he*he)/(j-he)/2}while(K<=L[W]&&--W>-1);W++,I[W]=j,L[W]=K,L[W+1]=me}for(let j=0,W=0;j<b;j++){for(;L[W+1]<j;)W++;const K=I[W],te=j-K;P[c+j*m]=C[K]+te*te}}const _e=s.v.layout_symbol["text-font"].default.join(",");class ke{constructor(c,m,b){this.requestManager=c,this.localIdeographFontFamily=m,this.entries={},this.lang=b}setURL(c){this.url=c}getGlyphs(c){return s._(this,void 0,void 0,(function*(){const m=[];for(const I in c)for(const L of c[I])m.push(this._getAndCacheGlyphsPromise(I,L));const b=yield Promise.all(m),C={};for(const{stack:I,id:L,glyph:j}of b)C[I]||(C[I]={}),C[I][L]=j&&{id:j.id,bitmap:j.bitmap.clone(),metrics:j.metrics};return C}))}_getAndCacheGlyphsPromise(c,m){return s._(this,void 0,void 0,(function*(){let b=this.entries[c];b||(b=this.entries[c]={glyphs:{},requests:{},ranges:{}});let C=b.glyphs[m];return C!==void 0?{stack:c,id:m,glyph:C}:!this.url||this._charUsesLocalIdeographFontFamily(m)?(C=b.glyphs[m]=this._drawGlyph(b,c,m),{stack:c,id:m,glyph:C}):yield this._downloadAndCacheRangePromise(c,m)}))}_downloadAndCacheRangePromise(c,m){return s._(this,void 0,void 0,(function*(){const b=this.entries[c],C=Math.floor(m/256);if(b.ranges[C])return{stack:c,id:m,glyph:null};if(!b.requests[C]){const I=ke.loadGlyphRange(c,C,this.url,this.requestManager);b.requests[C]=I}try{const I=yield b.requests[C];for(const L in I)b.glyphs[+L]=I[+L];return b.ranges[C]=!0,{stack:c,id:m,glyph:I[m]||null}}catch(I){const L=b.glyphs[m]=this._drawGlyph(b,c,m);return this._warnOnMissingGlyphRange(L,C,m,I),{stack:c,id:m,glyph:L}}}))}_warnOnMissingGlyphRange(c,m,b,C){const I=256*m,L=I+255,j=b.toString(16).padStart(4,"0").toUpperCase();s.w(`Unable to load glyph range ${m}, ${I}-${L}. Rendering codepoint U+${j} locally instead. ${C}`)}_charUsesLocalIdeographFontFamily(c){return!!this.localIdeographFontFamily&&s.q(c)}_drawGlyph(c,m,b){const C=m===_e&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(b),I=C?"ideographTinySDF":"tinySDF";c[I]||(c[I]=this._createTinySDF(C?this.localIdeographFontFamily:m));const L=c[I].draw(String.fromCodePoint(b));return{id:b,bitmap:new s.r({width:L.width||60,height:L.height||60},L.data),metrics:{width:L.glyphWidth/2||24,height:L.glyphHeight/2||24,left:L.glyphLeft/2+.5||0,top:L.glyphTop/2-27.5||-8,advance:L.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(c){const m=c?c.split(","):[];m.push("sans-serif");const b=m.map((C=>/[-\w]+/.test(C)?C:`'${CSS.escape(C)}'`)).join(",");return new ke.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:b,fontWeight:this._fontWeight(m[0]),fontStyle:this._fontStyle(m[0]),lang:this.lang})}_fontStyle(c){return/italic/i.test(c)?"italic":/oblique/i.test(c)?"oblique":"normal"}_fontWeight(c){const m={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let b;for(const[C,I]of Object.entries(m))new RegExp(`\\b${C}\\b`,"i").test(c)&&(b=`${I}`);return b}destroy(){for(const c in this.entries){const m=this.entries[c];m.tinySDF&&(m.tinySDF=null),m.ideographTinySDF&&(m.ideographTinySDF=null),m.glyphs={},m.requests={},m.ranges={}}this.entries={}}}ke.loadGlyphRange=function(P,c,m,b){return s._(this,void 0,void 0,(function*(){const C=256*c,I=C+255,L=b.transformRequest(m.replace("{fontstack}",P).replace("{range}",`${C}-${I}`),"Glyphs"),j=yield s.n(L,new AbortController);if(!j||!j.data)throw new Error(`Could not load glyph range. range: ${c}, ${C}-${I}`);const W={};for(const K of s.o(j.data))W[K.id]=K;return W}))},ke.TinySDF=class{constructor({fontSize:P=24,buffer:c=3,radius:m=8,cutoff:b=.25,fontFamily:C="sans-serif",fontWeight:I="normal",fontStyle:L="normal",lang:j=null}={}){this.buffer=c,this.cutoff=b,this.radius=m,this.lang=j;const W=this.size=P+4*c,K=this._createCanvas(W),te=this.ctx=K.getContext("2d",{willReadFrequently:!0});te.font=`${L} ${I} ${P}px ${C}`,te.textBaseline="alphabetic",te.textAlign="left",te.fillStyle="black",this.gridOuter=new Float64Array(W*W),this.gridInner=new Float64Array(W*W),this.f=new Float64Array(W),this.z=new Float64Array(W+1),this.v=new Uint16Array(W)}_createCanvas(P){const c=document.createElement("canvas");return c.width=c.height=P,c}draw(P){const{width:c,actualBoundingBoxAscent:m,actualBoundingBoxDescent:b,actualBoundingBoxLeft:C,actualBoundingBoxRight:I}=this.ctx.measureText(P),L=Math.ceil(m),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(I-C))),W=Math.min(this.size-this.buffer,L+Math.ceil(b)),K=j+2*this.buffer,te=W+2*this.buffer,he=Math.max(K*te,0),ue=new Uint8ClampedArray(he),ge={data:ue,width:K,height:te,glyphWidth:j,glyphHeight:W,glyphTop:L,glyphLeft:0,glyphAdvance:c};if(j===0||W===0)return ge;const{ctx:Oe,buffer:Ie,gridInner:Le,gridOuter:De}=this;this.lang&&(Oe.lang=this.lang),Oe.clearRect(Ie,Ie,j,W),Oe.fillText(P,Ie,Ie+L);const je=Oe.getImageData(Ie,Ie,j,W);De.fill(me,0,he),Le.fill(0,0,he);for(let He=0;He<W;He++)for(let Fe=0;Fe<j;Fe++){const We=je.data[4*(He*j+Fe)+3]/255;if(We===0)continue;const Ke=(He+Ie)*K+Fe+Ie;if(We===1)De[Ke]=0,Le[Ke]=me;else{const Ze=.5-We;De[Ke]=Ze>0?Ze*Ze:0,Le[Ke]=Ze<0?Ze*Ze:0}}Te(De,0,0,K,te,K,this.f,this.v,this.z),Te(Le,Ie,Ie,j,W,K,this.f,this.v,this.z);for(let He=0;He<he;He++){const Fe=Math.sqrt(De[He])-Math.sqrt(Le[He]);ue[He]=Math.round(255-255*(Fe/this.radius+this.cutoff))}return ge}};class Ne{constructor(){this.specification=s.u.light.position}possiblyEvaluate(c,m){return s.F(c.expression.evaluate(m))}interpolate(c,m,b){return{x:s.G.number(c.x,m.x,b),y:s.G.number(c.y,m.y,b),z:s.G.number(c.z,m.z,b)}}}let Qe;class Se extends s.E{constructor(c){super(),Qe=Qe||new s.t({anchor:new s.D(s.u.light.anchor),position:new Ne,color:new s.D(s.u.light.color),intensity:new s.D(s.u.light.intensity)}),this._transitionable=new s.x(Qe,void 0),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,m={}){if(!this._validate(s.y,c,m))for(const b in c){const C=c[b];b.endsWith(s.z)?this._transitionable.setTransition(b.slice(0,-s.z.length),C):this._transitionable.setValue(b,C)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,m,b){return(!b||b.validate!==!1)&&s.B(this,c.call(s.C,{value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.u}))}}const Me=new s.t({"sky-color":new s.D(s.u.sky["sky-color"]),"horizon-color":new s.D(s.u.sky["horizon-color"]),"fog-color":new s.D(s.u.sky["fog-color"]),"fog-ground-blend":new s.D(s.u.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.u.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.u.sky["atmosphere-blend"])});class Xe extends s.E{constructor(c){super(),this._transitionable=new s.x(Me,void 0),this.setSky(c),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.H(0))}setSky(c,m={}){if(!this._validate(s.J,c,m)){c||(c={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const b in c){const C=c[b];b.endsWith(s.z)?this._transitionable.setTransition(b.slice(0,-s.z.length),C):this._transitionable.setValue(b,C)}}}getSky(){return this._transitionable.serialize()}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,m,b={}){return b?.validate!==!1&&s.B(this,c.call(s.C,s.e({value:m,style:{glyphs:!0,sprite:!0},styleSpec:s.u})))}calculateFogBlendOpacity(c){return c<60?0:c<70?(c-60)/10:1}}class Ee{constructor(c,m){this.width=c,this.height=m,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(c,m){const b=c.join(",")+String(m);return this.dashEntry[b]||(this.dashEntry[b]=this.addDash(c,m)),this.dashEntry[b]}getDashRanges(c,m,b){const C=[];let I=c.length%2==1?-c[c.length-1]*b:0,L=c[0]*b,j=!0;C.push({left:I,right:L,isDash:j,zeroLength:c[0]===0});let W=c[0];for(let K=1;K<c.length;K++){j=!j;const te=c[K];I=W*b,W+=te,L=W*b,C.push({left:I,right:L,isDash:j,zeroLength:te===0})}return C}addRoundDash(c,m,b){const C=m/2;for(let I=-b;I<=b;I++){const L=this.width*(this.nextRow+b+I);let j=0,W=c[j];for(let K=0;K<this.width;K++){K/W.right>1&&(W=c[++j]);const te=Math.abs(K-W.left),he=Math.abs(K-W.right),ue=Math.min(te,he);let ge;const Oe=I/b*(C+1);if(W.isDash){const Ie=C-Math.abs(Oe);ge=Math.sqrt(ue*ue+Ie*Ie)}else ge=C-Math.sqrt(ue*ue+Oe*Oe);this.data[L+K]=Math.max(0,Math.min(255,ge+128))}}}addRegularDash(c){for(let j=c.length-1;j>=0;--j){const W=c[j],K=c[j+1];W.zeroLength?c.splice(j,1):K&&K.isDash===W.isDash&&(K.left=W.left,c.splice(j,1))}const m=c[0],b=c[c.length-1];m.isDash===b.isDash&&(m.left=b.left-this.width,b.right=m.right+this.width);const C=this.width*this.nextRow;let I=0,L=c[I];for(let j=0;j<this.width;j++){j/L.right>1&&(L=c[++I]);const W=Math.abs(j-L.left),K=Math.abs(j-L.right),te=Math.min(W,K);this.data[C+j]=Math.max(0,Math.min(255,(L.isDash?te:-te)+128))}}addDash(c,m){const b=m?7:0,C=2*b+1;if(this.nextRow+C>this.height)return s.w("LineAtlas out of space"),null;let I=0;for(let j=0;j<c.length;j++)I+=c[j];if(I!==0){const j=this.width/I,W=this.getDashRanges(c,this.width,j);m?this.addRoundDash(W,j,b):this.addRegularDash(W)}const L={y:this.nextRow+b,height:2*b,width:I};return this.nextRow+=C,this.dirty=!0,L}bind(c){const m=c.gl;this.texture?(m.bindTexture(m.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,m.texSubImage2D(m.TEXTURE_2D,0,0,0,this.width,this.height,m.ALPHA,m.UNSIGNED_BYTE,this.data))):(this.texture=m.createTexture(),m.bindTexture(m.TEXTURE_2D,this.texture),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.REPEAT),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texImage2D(m.TEXTURE_2D,0,m.ALPHA,this.width,this.height,0,m.ALPHA,m.UNSIGNED_BYTE,this.data))}}const ft="maplibre_preloaded_worker_pool";class mt{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<mt.workerCount;)this.workers.push(new Worker(s.c.WORKER_URL));return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach((m=>{m.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[ft]}numActive(){return Object.keys(this.active).length}}const ct=Math.floor(S.hardwareConcurrency/2);let st,bt;function At(){return st||(st=new mt),st}mt.workerCount=s.K(globalThis)?Math.max(Math.min(ct,3),1):1;class Tt{constructor(c,m){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=m;const b=this.workerPool.acquire(m);for(let C=0;C<b.length;C++){const I=new s.L(b[C],m);I.name=`Worker ${C}`,this.actors.push(I)}if(!this.actors.length)throw new Error("No actors found")}broadcast(c,m){const b=[];for(const C of this.actors)b.push(C.sendAsync({type:c,data:m}));return Promise.all(b)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(c=!0){this.actors.forEach((m=>{m.remove()})),this.actors=[],c&&this.workerPool.release(this.id)}registerMessageHandler(c,m){for(const b of this.actors)b.registerMessageHandler(c,m)}unregisterMessageHandler(c){for(const m of this.actors)m.unregisterMessageHandler(c)}}function Wt(){return bt||(bt=new Tt(At(),s.M),bt.registerMessageHandler("GR",((P,c,m)=>s.m(c,m)))),bt}function nn(P,c){const m=s.N();return s.O(m,m,[1,1,0]),s.Q(m,m,[.5*P.width,.5*P.height,1]),P.calculatePosMatrix?s.S(m,m,P.calculatePosMatrix(c.toUnwrapped())):m}function An(P,c,m,b,C,I,L){var j;const W=(function(ue,ge,Oe){if(ue)for(const Ie of ue){const Le=ge[Ie];if(Le&&Le.source===Oe&&Le.type==="fill-extrusion")return!0}else for(const Ie in ge){const Le=ge[Ie];if(Le.source===Oe&&Le.type==="fill-extrusion")return!0}return!1})((j=C?.layers)!==null&&j!==void 0?j:null,c,P.id),K=I.maxPitchScaleFactor(),te=P.tilesIn(b,K,W);te.sort(rn);const he=[];for(const ue of te)he.push({wrappedTileID:ue.tileID.wrapped().key,queryResults:ue.tile.queryRenderedFeatures(c,m,P.getState(),ue.queryGeometry,ue.cameraQueryGeometry,ue.scale,C,I,K,nn(I,ue.tileID),L?(ge,Oe)=>L(ue.tileID,ge,Oe):void 0)});return(function(ue,ge){for(const Oe in ue)for(const Ie of ue[Oe])Jt(Ie,ge);return ue})((function(ue){const ge={},Oe={};for(const Ie of ue){const Le=Ie.queryResults,De=Ie.wrappedTileID,je=Oe[De]=Oe[De]||{};for(const He in Le){const Fe=Le[He],We=je[He]=je[He]||{},Ke=ge[He]=ge[He]||[];for(const Ze of Fe)We[Ze.featureIndex]||(We[Ze.featureIndex]=!0,Ke.push(Ze))}}return ge})(he),P)}function rn(P,c){const m=P.tileID,b=c.tileID;return m.overscaledZ-b.overscaledZ||m.canonical.y-b.canonical.y||m.wrap-b.wrap||m.canonical.x-b.canonical.x}function Jt(P,c){const m=P.feature,b=c.getFeatureState(m.layer["source-layer"],m.id);m.source=m.layer.source,m.layer["source-layer"]&&(m.sourceLayer=m.layer["source-layer"]),m.state=b}function Mn(P,c,m){return s._(this,void 0,void 0,(function*(){let b=P;if(P.url?b=(yield s.j(c.transformRequest(P.url,"Source"),m)).data:yield S.frameAsync(m),!b)return null;const C=s.U(s.e(b,P),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in b&&b.vector_layers&&(C.vectorLayerIds=b.vector_layers.map((I=>I.id))),C}))}class vn{constructor(c,m){c&&(m?this.setSouthWest(c).setNorthEast(m):Array.isArray(c)&&(c.length===4?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1])))}setNorthEast(c){return this._ne=c instanceof s.V?new s.V(c.lng,c.lat):s.V.convert(c),this}setSouthWest(c){return this._sw=c instanceof s.V?new s.V(c.lng,c.lat):s.V.convert(c),this}extend(c){const m=this._sw,b=this._ne;let C,I;if(c instanceof s.V)C=c,I=c;else{if(!(c instanceof vn))return Array.isArray(c)?c.length===4||c.every(Array.isArray)?this.extend(vn.convert(c)):this.extend(s.V.convert(c)):c&&("lng"in c||"lon"in c)&&"lat"in c?this.extend(s.V.convert(c)):this;if(C=c._sw,I=c._ne,!C||!I)return this}return m||b?(m.lng=Math.min(C.lng,m.lng),m.lat=Math.min(C.lat,m.lat),b.lng=Math.max(I.lng,b.lng),b.lat=Math.max(I.lat,b.lat)):(this._sw=new s.V(C.lng,C.lat),this._ne=new s.V(I.lng,I.lat)),this}getCenter(){return new s.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.V(this.getWest(),this.getNorth())}getSouthEast(){return new s.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(c){const{lng:m,lat:b}=s.V.convert(c);let C=this._sw.lng<=m&&m<=this._ne.lng;return this._sw.lng>this._ne.lng&&(C=this._sw.lng>=m&&m>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&C}intersects(c){if(!((c=vn.convert(c)).getNorth()>=this.getSouth()&&c.getSouth()<=this.getNorth()))return!1;const m=Math.abs(this.getEast()-this.getWest()),b=Math.abs(c.getEast()-c.getWest());if(m>=360||b>=360)return!0;const C=s.W(this.getWest(),-180,180),I=s.W(this.getEast(),-180,180),L=s.W(c.getWest(),-180,180),j=s.W(c.getEast(),-180,180),W=C>=I,K=L>=j;return!(!W||!K)||(W?j>=C||L<=I:K?I>=L||C<=j:L<=I&&j>=C)}static convert(c){return c instanceof vn?c:c&&new vn(c)}static fromLngLat(c,m=0){const b=360*m/40075017,C=b/Math.cos(Math.PI/180*c.lat);return new vn(new s.V(c.lng-C,c.lat-b),new s.V(c.lng+C,c.lat+b))}adjustAntiMeridian(){const c=new s.V(this._sw.lng,this._sw.lat),m=new s.V(this._ne.lng,this._ne.lat);return new vn(c,c.lng>m.lng?new s.V(m.lng+360,m.lat):m)}}class Nn{constructor(c,m,b){this.bounds=vn.convert(this.validateBounds(c)),this.minzoom=m||0,this.maxzoom=b||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const m=Math.pow(2,c.z),b=Math.floor(s.Y(this.bounds.getWest())*m),C=Math.floor(s.X(this.bounds.getNorth())*m),I=Math.ceil(s.Y(this.bounds.getEast())*m),L=Math.ceil(s.X(this.bounds.getSouth())*m);return c.x>=b&&c.x<I&&c.y>=C&&c.y<L}}class lr extends s.E{constructor(c,m,b,C){if(super(),this.id=c,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.U(m,["url","scheme","tileSize","promoteId","encoding"])),this._options=s.e({type:"vector"},m),this._collectResourceTiming=m.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(C)}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield Mn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),c&&(s.e(this,c),c.bounds&&(this.tileBounds=new Nn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,s.Z(c)||this.fire(new s.k(c))}}))}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}setSourceProperty(c){this._tileJSONRequest&&this._tileJSONRequest.abort(),c(),this.load()}setTiles(c){return this.setSourceProperty((()=>{this._options.tiles=c})),this}setUrl(c){return this.setSourceProperty((()=>{this.url=c,this._options.url=c})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(c){return s._(this,void 0,void 0,(function*(){const m=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b={request:this.map._requestManager.transformRequest(m,"Tile"),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(c)};b.request.collectResourceTiming=this._collectResourceTiming;let C="RT";if(c.actor&&c.state!=="expired"){if(c.state==="loading")return new Promise(((I,L)=>{c.reloadPromise={resolve:I,reject:L}}))}else c.actor=this.dispatcher.getActor(),C="LT";c.abortController=new AbortController;try{const I=yield c.actor.sendAsync({type:C,data:b},c.abortController);if(delete c.abortController,c.aborted)return;this._afterTileLoadWorkerResponse(c,I)}catch(I){if(delete c.abortController,c.aborted)return;if(I&&I.status!==404)throw I;this._afterTileLoadWorkerResponse(c,null)}}))}_getOverzoomParameters(c){if(c.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const m=c.tileID.scaledTo(this.maxzoom).canonical,b=m.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:m,overzoomRequest:this.map._requestManager.transformRequest(b,"Tile")}}_afterTileLoadWorkerResponse(c,m){if(m&&m.resourceTiming&&(c.resourceTiming=m.resourceTiming),m&&this.map._refreshExpiredTiles&&c.setExpiryData(m),c.loadVectorData(m,this.map.painter),c.reloadPromise){const b=c.reloadPromise;c.reloadPromise=null,this.loadTile(c).then(b.resolve).catch(b.reject)}}abortTile(c){return s._(this,void 0,void 0,(function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.actor&&(yield c.actor.sendAsync({type:"AT",data:{uid:c.uid,type:this.type,source:this.id}}))}))}unloadTile(c){return s._(this,void 0,void 0,(function*(){c.unloadVectorData(),c.actor&&(yield c.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class rr extends s.E{constructor(c,m,b,C){super(),this.id=c,this.dispatcher=b,this.setEventedParent(C),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},m),s.e(this,s.U(m,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,(function*(c=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const m=yield Mn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,m&&(s.e(this,m),m.bounds&&(this.tileBounds=new Nn(m.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:c})))}catch(m){this._tileJSONRequest=null,this._loaded=!0,s.Z(m)||this.fire(new s.k(m))}}))}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(c){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),c(),this.load(!0)}setTiles(c){return this.setSourceProperty((()=>{this._options.tiles=c})),this}setUrl(c){return this.setSourceProperty((()=>{this.url=c,this._options.url=c})),this}serialize(){return s.e({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c){return s._(this,void 0,void 0,(function*(){const m=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);c.abortController=new AbortController;try{const b=yield H.getImage(this.map._requestManager.transformRequest(m,"Tile"),c.abortController,this.map._refreshExpiredTiles);if(delete c.abortController,c.aborted)return void(c.state="unloaded");if(b&&b.data){this.map._refreshExpiredTiles&&(b.cacheControl||b.expires)&&c.setExpiryData({cacheControl:b.cacheControl,expires:b.expires});const C=this.map.painter.context,I=C.gl,L=b.data;c.texture=this.map.painter.getTileTexture(L.width),c.texture?c.texture.update(L,{useMipmap:!0}):(c.texture=new s.T(C,L,I.RGBA,{useMipmap:!0}),c.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST)),c.state="loaded"}}catch(b){if(delete c.abortController,c.aborted)c.state="unloaded";else if(b)throw c.state="errored",b}}))}abortTile(c){return s._(this,void 0,void 0,(function*(){c.abortController&&(c.abortController.abort(),delete c.abortController)}))}unloadTile(c){return s._(this,void 0,void 0,(function*(){c.texture&&this.map.painter.saveTileTexture(c.texture)}))}hasTransition(){return!1}}class Ue extends rr{constructor(c,m,b,C){super(c,m,b,C),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},m),this.encoding=m.encoding||"mapbox",this.redFactor=m.redFactor,this.greenFactor=m.greenFactor,this.blueFactor=m.blueFactor,this.baseShift=m.baseShift}loadTile(c){return s._(this,void 0,void 0,(function*(){const m=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b=this.map._requestManager.transformRequest(m,"Tile");c.neighboringTiles=this._getNeighboringTiles(c.tileID),c.abortController=new AbortController;try{const C=yield H.getImage(b,c.abortController,this.map._refreshExpiredTiles);if(delete c.abortController,c.aborted)return void(c.state="unloaded");if(C&&C.data){const I=C.data;this.map._refreshExpiredTiles&&(C.cacheControl||C.expires)&&c.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const L=s.b(I)&&s.$()?I:yield this.readImageNow(I),j={type:this.type,uid:c.uid,source:this.id,rawImageData:L,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!c.actor||c.state==="expired"){c.actor=this.dispatcher.getActor();const W=yield c.actor.sendAsync({type:"LDT",data:j});c.dem=W,c.needsHillshadePrepare=!0,c.needsTerrainPrepare=!0,c.state="loaded"}}}catch(C){if(delete c.abortController,c.aborted)c.state="unloaded";else if(C)throw c.state="errored",C}}))}readImageNow(c){return s._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&s.a0()){const m=c.width+2,b=c.height+2;try{return new s.R({width:m,height:b},yield s.a1(c,-1,-1,m,b))}catch{}}return S.getImageData(c,1)}))}_getNeighboringTiles(c){const m=c.canonical,b=Math.pow(2,m.z),C=(m.x-1+b)%b,I=m.x===0?c.wrap-1:c.wrap,L=(m.x+1+b)%b,j=m.x+1===b?c.wrap+1:c.wrap,W={};return W[new s.a2(c.overscaledZ,I,m.z,C,m.y).key]={backfilled:!1},W[new s.a2(c.overscaledZ,j,m.z,L,m.y).key]={backfilled:!1},m.y>0&&(W[new s.a2(c.overscaledZ,I,m.z,C,m.y-1).key]={backfilled:!1},W[new s.a2(c.overscaledZ,c.wrap,m.z,m.x,m.y-1).key]={backfilled:!1},W[new s.a2(c.overscaledZ,j,m.z,L,m.y-1).key]={backfilled:!1}),m.y+1<b&&(W[new s.a2(c.overscaledZ,I,m.z,C,m.y+1).key]={backfilled:!1},W[new s.a2(c.overscaledZ,c.wrap,m.z,m.x,m.y+1).key]={backfilled:!1},W[new s.a2(c.overscaledZ,j,m.z,L,m.y+1).key]={backfilled:!1}),W}unloadTile(c){return s._(this,void 0,void 0,(function*(){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&(yield c.actor.sendAsync({type:"RDT",data:{type:this.type,uid:c.uid,source:this.id}}))}))}}function Je(P){return P.type==="GeometryCollection"?P.geometries.map((c=>c.coordinates)).flat(1/0):P.coordinates.flat(1/0)}function xt(P){const c=new vn;let m;switch(P.type){case"FeatureCollection":m=P.features.map((b=>Je(b.geometry))).flat(1/0);break;case"Feature":m=Je(P.geometry);break;default:m=Je(P)}if(m.length==0)return c;for(let b=0;b<m.length-1;b+=2)c.extend([m[b],m[b+1]]);return c}class Et extends s.E{constructor(c,m,b,C){super(),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:m.data},this.actor=b.getActor(),this.setEventedParent(C),this._data=typeof m.data=="string"?{url:m.data}:{geojson:m.data},this._options=s.e({},m),this._collectResourceTiming=m.collectResourceTiming,m.maxzoom!==void 0&&(this.maxzoom=m.maxzoom),m.type&&(this.type=m.type),m.attribution&&(this.attribution=m.attribution),this.promoteId=m.promoteId,m.clusterMaxZoom!==void 0&&this.maxzoom<=m.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${m.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:m.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(m.buffer!==void 0?m.buffer:128),tolerance:this._pixelsToTileUnits(m.tolerance!==void 0?m.tolerance:.375),extent:s.a5,maxZoom:this.maxzoom,lineMetrics:m.lineMetrics||!1,generateId:m.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(m.clusterMaxZoom),minPoints:Math.max(2,m.clusterMinPoints||2),extent:s.a5,radius:this._pixelsToTileUnits(m.clusterRadius||50),log:!1,generateId:m.generateId||!1},clusterProperties:m.clusterProperties,filter:m.filter},m.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(c){return c*(s.a5/this.tileSize)}_getClusterMaxZoom(c){const m=c?Math.round(c):this.maxzoom-1;return Number.isInteger(c)||c===void 0||s.w(`Integer expected for option 'clusterMaxZoom': provided value "${c}" rounded to "${m}"`),m}load(){return s._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(c){this.map=c,this.load()}setData(c,m){this._data=typeof c=="string"?{url:c}:{geojson:c},this._pendingWorkerUpdate={data:c};const b=this._updateWorkerData();return m?b:this}updateData(c,m){this._pendingWorkerUpdate.diff=s.a6(this._pendingWorkerUpdate.diff,c);const b=this._updateWorkerData();return m?b:this}getData(){return s._(this,void 0,void 0,(function*(){const c=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:c})}))}getBounds(){return s._(this,void 0,void 0,(function*(){return xt(yield this.getData())}))}setClusterOptions(c){return this.workerOptions.cluster=c.cluster,c.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(c.clusterRadius)),c.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(c.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(c){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:c,source:this.id}})}getClusterChildren(c){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:c,source:this.id}})}getClusterLeaves(c,m,b){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:c,limit:m,offset:b}})}_updateWorkerData(){return s._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void s.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:c,diff:m}=this._pendingWorkerUpdate,b=s.e({type:this.type},this.workerOptions);c!==void 0?(typeof c=="string"?(b.request=this.map._requestManager.transformRequest(S.resolveURL(c),"Source"),b.request.collectResourceTiming=this._collectResourceTiming):b.data=c,this._pendingWorkerUpdate.data=void 0):m&&(b.dataDiff=m,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new s.l("dataloading",{dataType:"source"}));try{const C=yield this.actor.sendAsync({type:"LD",data:b});if(this._isUpdatingWorker=!1,this._removed||C.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));C.data&&(this._data={geojson:C.data});const I=this._applyDiffToSource(m),L=this._getShouldReloadTileOptions(I);let j=null;C.resourceTiming&&C.resourceTiming[this.id]&&(j=C.resourceTiming[this.id].slice(0));const W={dataType:"source"};this._collectResourceTiming&&j&&j.length>0&&s.e(W,{resourceTiming:j}),this.fire(new s.l("data",Object.assign(Object.assign({},W),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},W),{sourceDataType:"content",shouldReloadTileOptions:L})))}catch(C){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(C))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(c){if(!c)return;const m=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const C=s.a7(this._data.geojson,m);if(!C)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:C}}if(!this._data.updateable)return;const b=s.a8(this._data.updateable,c,m);return c.removeAll||this._options.cluster?void 0:b}_getShouldReloadTileOptions(c){if(c)return{affectedBounds:c.filter(Boolean).map((m=>xt(m)))}}shouldReloadTile(c,{affectedBounds:m}){if(c.state==="loading")return!0;if(c.state==="unloaded")return!1;const{buffer:b,extent:C}=this.workerOptions.geojsonVtOptions,I=(function({x:L,y:j,z:W},K=0){const te=s.a3((L-K)/Math.pow(2,W)),he=s.a4((j+1+K)/Math.pow(2,W)),ue=s.a3((L+1+K)/Math.pow(2,W)),ge=s.a4((j-K)/Math.pow(2,W));return new vn([te,he],[ue,ge])})(c.tileID.canonical,b/C);for(const L of m)if(I.intersects(L))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(c){return s._(this,void 0,void 0,(function*(){const m=c.actor?"RT":"LT";c.actor=this.actor;const b={type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};c.abortController=new AbortController;const C=yield this.actor.sendAsync({type:m,data:b},c.abortController);delete c.abortController,c.unloadVectorData(),c.aborted||c.loadVectorData(C,this.map.painter,m==="RT")}))}abortTile(c){return s._(this,void 0,void 0,(function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.aborted=!0}))}unloadTile(c){return s._(this,void 0,void 0,(function*(){c.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Vt extends s.E{constructor(c,m,b,C){super(),this.flippedWindingOrder=!1,this.id=c,this.dispatcher=b,this.coordinates=m.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(C),this.options=m}load(c){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const m=yield H.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,m&&m.data&&(this.image=m.data,c&&(this.coordinates=c),this._finishLoading())}catch(m){this._request=null,this._loaded=!0,s.Z(m)||this.fire(new s.k(m))}}))}loaded(){return this._loaded}updateImage(c){return c.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=c.url,this.load(c.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(c){this.coordinates=c;const m=c.map(s.a9.fromLngLat);var b;return this.tileID=(function(C){const I=s.aa.fromPoints(C),L=I.width(),j=I.height(),W=Math.max(L,j),K=Math.max(0,Math.floor(-Math.log(W)/Math.LN2)),te=Math.pow(2,K);return new s.ac(K,Math.floor((I.minX+I.maxX)/2*te),Math.floor((I.minY+I.maxY)/2*te))})(m),this.terrainTileRanges=this._getOverlappingTileRanges(m),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=m.map((C=>this.tileID.getTilePoint(C)._round())),this.flippedWindingOrder=((b=this.tileCoords)[1].x-b[0].x)*(b[2].y-b[0].y)-(b[1].y-b[0].y)*(b[2].x-b[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,m=c.gl;this.texture||(this.texture=new s.T(c,this.image,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let b=!1;for(const C in this.tiles){const I=this.tiles[C];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,b=!0)}b&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(c){return s._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={}):c.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(c){const{minX:m,minY:b,maxX:C,maxY:I}=s.aa.fromPoints(c),L={};for(let j=0;j<=s.ab;j++){const W=Math.pow(2,j),K=Math.floor(m*W),te=Math.floor(b*W),he=Math.floor(C*W),ue=Math.floor(I*W);L[j]={minTileX:K,minTileY:te,maxTileX:he,maxTileY:ue}}return L}}class we extends Vt{constructor(c,m,b,C){super(c,m,b,C),this.roundZoom=!0,this.type="video",this.options=m}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1;const c=this.options;this.urls=[];for(const m of c.urls)this.urls.push(this.map._requestManager.transformRequest(m,"Source").url);try{const m=yield s.ad(this.urls);if(this._loaded=!0,!m)return;this.video=m,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(m){this.fire(new s.k(m))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(c){if(this.video){const m=this.video.seekable;c<m.start(0)||c>m.end(0)?this.fire(new s.k(new s.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${m.start(0)} and ${m.end(0)}-second mark.`))):this.video.currentTime=c}}getVideo(){return this.video}onAdd(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const c=this.map.painter.context,m=c.gl;this.texture?this.video.paused||(this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.texSubImage2D(m.TEXTURE_2D,0,0,0,m.RGBA,m.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(c,this.video,m.RGBA),this.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE));let b=!1;for(const C in this.tiles){const I=this.tiles[C];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,b=!0)}b&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ae extends Vt{constructor(c,m,b,C){super(c,m,b,C),m.coordinates?Array.isArray(m.coordinates)&&m.coordinates.length===4&&!m.coordinates.some((I=>!Array.isArray(I)||I.length!==2||I.some((L=>typeof L!="number"))))||this.fire(new s.k(new s.ae(`sources.${c}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.ae(`sources.${c}`,null,'missing required property "coordinates"'))),m.animate&&typeof m.animate!="boolean"&&this.fire(new s.k(new s.ae(`sources.${c}`,null,'optional "animate" property must be a boolean value'))),m.canvas?typeof m.canvas=="string"||m.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.ae(`sources.${c}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.ae(`sources.${c}`,null,'missing required property "canvas"'))),this.options=m,this.animate=m.animate===void 0||m.animate}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const m=this.map.painter.context,b=m.gl;this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new s.T(m,this.canvas,b.RGBA,{premultiply:!0}),this.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE));let C=!1;for(const I in this.tiles){const L=this.tiles[I];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,C=!0)}C&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const c of[this.canvas.width,this.canvas.height])if(isNaN(c)||c<=0)return!0;return!1}}const Y={},be=P=>{switch(P){case"geojson":return Et;case"image":return Vt;case"raster":return rr;case"raster-dem":return Ue;case"vector":return lr;case"video":return we;case"canvas":return ae}return Y[P]},$e="RTLPluginLoaded";class ze extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Wt()}_syncState(c){return this.status=c,this.dispatcher.broadcast("SRPS",{pluginStatus:c,pluginURL:this.url}).catch((m=>{throw this.status="error",m}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(c){return s._(this,arguments,void 0,(function*(m,b=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=S.resolveURL(m),!this.url)throw new Error(`requested url ${m} is invalid`);if(this.status==="unavailable"){if(!b)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return s._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l($e))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let rt=null;function tt(){return rt||(rt=new ze),rt}var Ye,at;(function(P){P[P.Base=0]="Base",P[P.Parent=1]="Parent"})(Ye||(Ye={})),(function(P){P[P.Departing=0]="Departing",P[P.Incoming=1]="Incoming"})(at||(at={}));class Ot{constructor(c,m){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=c,this.uid=s.af(),this.uses=0,this.tileSize=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(c){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(c||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:c,fadingDirection:m,fadingParentID:b,fadeEndTime:C}){this.resetFadeLogic(),this.fadingRole=c,this.fadingDirection=m,this.fadingParentID=b,this.fadeEndTime=C}setSelfFadeLogic(c){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=c}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=A(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(c){this.demTexture&&c.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(c,m,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",c){c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,this.latestFeatureIndex.rawTileData=c.rawTileData,this.latestFeatureIndex.encoding=c.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=(function(C,I){const L={};if(!I)return L;for(const j of C){const W=j.layerIds.map((K=>I.getLayer(K))).filter(Boolean);if(W.length!==0){j.layers=W,j.stateDependentLayerIds&&(j.stateDependentLayers=j.stateDependentLayerIds.map((K=>W.filter((te=>te.id===K))[0])));for(const K of W)L[K.id]=j}}return L})(c.buckets,m?.style),this.hasSymbolBuckets=!1;for(const C in this.buckets){const I=this.buckets[C];if(I instanceof s.ah){if(this.hasSymbolBuckets=!0,!b)break;I.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const C in this.buckets){const I=this.buckets[C];if(I instanceof s.ah&&I.hasRTLText){this.hasRTLText=!0,tt().lazyLoad();break}}this.queryPadding=0;for(const C in this.buckets){const I=this.buckets[C];this.queryPadding=Math.max(this.queryPadding,m.style.getLayer(C).queryRadius(I))}c.imageAtlas&&(this.imageAtlas=c.imageAtlas),c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage),this.dashPositions=c.dashPositions}else this.collisionBoxArray=new s.ag}unloadVectorData(){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(c){return this.buckets[c.id]}upload(c){for(const b in this.buckets){const C=this.buckets[b];C.uploadPending()&&C.upload(c)}const m=c.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new s.T(c,this.imageAtlas.image,m.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(c,this.glyphAtlasImage,m.ALPHA),this.glyphAtlasImage=null)}prepare(c){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture)}queryRenderedFeatures(c,m,b,C,I,L,j,W,K,te,he){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:C,cameraQueryGeometry:I,scale:L,tileSize:this.tileSize,pixelPosMatrix:te,transform:W,params:j,queryPadding:this.queryPadding*K,getElevation:he},c,m,b):{}}querySourceFeatures(c,m){const b=this.latestFeatureIndex;if(!b||!b.rawTileData)return;const C=b.loadVTLayers(),I=m&&m.sourceLayer?m.sourceLayer:"",L=C[s.ai]||C[I];if(!L)return;const j=s.aj(m?.filter,m?.globalState),{z:W,x:K,y:te}=this.tileID.canonical,he={z:W,x:K,y:te};for(let ue=0;ue<L.length;ue++){const ge=L.feature(ue);if(j.needGeometry){const Le=s.ak(ge,!0);if(!j.filter(new s.H(this.tileID.overscaledZ),Le,this.tileID.canonical))continue}else if(!j.filter(new s.H(this.tileID.overscaledZ),ge))continue;const Oe=b.getId(ge,I),Ie=new s.al(ge,W,K,te,Oe);Ie.tile=he,c.push(Ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(c){const m=this.expirationTime;if(c.cacheControl){const b=s.am(c.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else c.expires&&(this.expirationTime=new Date(c.expires).getTime());if(this.expirationTime){const b=Date.now();let C=!1;if(this.expirationTime>b)C=!1;else if(m)if(this.expirationTime<m)C=!0;else{const I=this.expirationTime-m;I?this.expirationTime=b+Math.max(I,3e4):C=!0}else C=!0;C?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(c,m){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(c).length===0)return;const b=this.latestFeatureIndex.loadVTLayers();for(const C in this.buckets){if(!m.style.hasLayer(C))continue;const I=this.buckets[C],L=I.layers[0].sourceLayer||s.ai,j=b[L],W=c[L];if(!j||!W||Object.keys(W).length===0)continue;I.update(W,j,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const K=m&&m.style&&m.style.getLayer(C);K&&(this.queryPadding=Math.max(this.queryPadding,K.queryRadius(I)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(c){this.symbolFadeHoldUntil=A()+c}setDependencies(c,m){const b={};for(const C of m)b[C]=!0;this.dependencies[c]=b}hasDependency(c,m){for(const b of c){const C=this.dependencies[b];if(C){for(const I of m)if(C[I])return!0}}return!1}}class ot{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(c,m,b){const C=String(m);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][C]=this.stateChanges[c][C]||{},s.e(this.stateChanges[c][C],b),this.deletedStates[c]===null){this.deletedStates[c]={};for(const I in this.state[c])I!==C&&(this.deletedStates[c][I]=null)}else if(this.deletedStates[c]&&this.deletedStates[c][C]===null){this.deletedStates[c][C]={};for(const I in this.state[c][C])b[I]||(this.deletedStates[c][C][I]=null)}else for(const I in b)this.deletedStates[c]&&this.deletedStates[c][C]&&this.deletedStates[c][C][I]===null&&delete this.deletedStates[c][C][I]}removeFeatureState(c,m,b){if(this.deletedStates[c]===null)return;const C=String(m);if(this.deletedStates[c]=this.deletedStates[c]||{},b&&m!==void 0)this.deletedStates[c][C]!==null&&(this.deletedStates[c][C]=this.deletedStates[c][C]||{},this.deletedStates[c][C][b]=null);else if(m!==void 0)if(this.stateChanges[c]&&this.stateChanges[c][C])for(b in this.deletedStates[c][C]={},this.stateChanges[c][C])this.deletedStates[c][C][b]=null;else this.deletedStates[c][C]=null;else this.deletedStates[c]=null}getState(c,m){const b=String(m),C=s.e({},(this.state[c]||{})[b],(this.stateChanges[c]||{})[b]);if(this.deletedStates[c]===null)return{};if(this.deletedStates[c]){const I=this.deletedStates[c][m];if(I===null)return{};for(const L in I)delete C[L]}return C}initializeTileState(c,m){c.setFeatureState(this.state,m)}coalesceChanges(c,m){const b={};for(const C in this.stateChanges){this.state[C]=this.state[C]||{};const I={};for(const L in this.stateChanges[C])this.state[C][L]||(this.state[C][L]={}),s.e(this.state[C][L],this.stateChanges[C][L]),I[L]=this.state[C][L];b[C]=I}for(const C in this.deletedStates){this.state[C]=this.state[C]||{};const I={};if(this.deletedStates[C]===null)for(const L in this.state[C])I[L]={},this.state[C][L]={};else for(const L in this.deletedStates[C]){if(this.deletedStates[C][L]===null)this.state[C][L]={};else for(const j of Object.keys(this.deletedStates[C][L]))delete this.state[C][L][j];I[L]=this.state[C][L]}b[C]=b[C]||{},s.e(b[C],I)}this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0&&c.setFeatureState(b,m)}}const $t=89.25;function an(P,c){const m=s.an(c.lat,-s.ao,s.ao);return new s.P(s.Y(c.lng)*P,s.X(m)*P)}function $n(P,c){return new s.a9(c.x/P,c.y/P).toLngLat()}function Er(P){return P.cameraToCenterDistance*Math.min(.85*Math.tan(s.ap(90-P.pitch)),Math.tan(s.ap($t-P.pitch)))}function Tr(P,c){const m=P.canonical,b=c/s.aq(m.z),C=m.x+Math.pow(2,m.z)*P.wrap,I=s.ar(new Float64Array(16));return s.O(I,I,[C*b,m.y*b,0]),s.Q(I,I,[b/s.a5,b/s.a5,1]),I}function ut(P,c,m,b,C){const I=s.a9.fromLngLat(P,c),L=C*s.as(1,P.lat),{x:j,y:W,z:K}=Ur(m,b);return new s.a9(I.x+L*-j,I.y+L*-W,I.z+L*-K)}function Ur(P,c){const m=s.ap(P),b=s.ap(c),C=Math.cos(-m),I=Math.sin(m);return{x:I*Math.sin(b),y:-I*Math.cos(b),z:C}}function eo(P,c,m){const b=c.intersectsFrustum(P);if(!m||b===0)return b;const C=c.intersectsPlane(m);return C===0?0:b===2&&C===2?2:1}function Gn(P,c,m){let b=0;const C=(m-c)/10;for(let I=0;I<10;I++)b+=C*Math.pow(Math.cos(c+(I+.5)/10*(m-c)),P);return b}function Cn(P,c){return function(m,b,C,I,L){const j=2*((P-1)/s.at(Math.cos(s.ap($t-L))/Math.cos(s.ap($t)))-1),W=Math.acos(C/I),K=2*Gn(j-1,0,s.ap(L/2)),te=Math.min(s.ap($t),W+s.ap(L/2)),he=Gn(j-1,Math.min(te,W-s.ap(L/2)),te),ue=Math.atan(b/C),ge=Math.hypot(b,C);let Oe=m;return Oe+=s.at(I/ge/Math.max(.5,Math.cos(s.ap(L/2)))),Oe+=j*s.at(Math.cos(ue))/2,Oe-=s.at(Math.max(1,he/K/c))/2,Oe}}const gi=Cn(9.314,3);function ti(P,c){const m=(c.roundZoom?Math.round:Math.floor)(P.zoom+s.at(P.tileSize/c.tileSize));return Math.max(0,m)}function to(P,c){const m=P.getCameraFrustum(),b=P.getClippingPlane(),C=P.screenPointToMercatorCoordinate(P.getCameraPoint()),I=s.a9.fromLngLat(P.center,P.elevation);C.z=I.z+Math.cos(P.pitchInRadians)*P.cameraToCenterDistance/P.worldSize;const L=P.getCoveringTilesDetailsProvider(),j=L.allowVariableZoom(P,c),W=ti(P,c),K=c.minzoom||0,te=c.maxzoom!==void 0?c.maxzoom:P.maxZoom,he=Math.min(Math.max(0,W),te),ue=Math.pow(2,he),ge=[ue*C.x,ue*C.y,0],Oe=[ue*I.x,ue*I.y,0],Ie=Math.hypot(I.x-C.x,I.y-C.y),Le=Math.abs(I.z-C.z),De=Math.hypot(Ie,Le),je=We=>({zoom:0,x:0,y:0,wrap:We,fullyVisible:!1}),He=[],Fe=[];if(P.renderWorldCopies&&L.allowWorldCopies())for(let We=1;We<=3;We++)He.push(je(-We)),He.push(je(We));for(He.push(je(0));He.length>0;){const We=He.pop(),Ke=We.x,Ze=We.y;let nt=We.fullyVisible;const yt={x:Ke,y:Ze,z:We.zoom},ht=L.getTileBoundingVolume(yt,We.wrap,P.elevation,c);if(!nt){const en=eo(m,ht,b);if(en===0)continue;nt=en===2}const pt=L.distanceToTile2d(C.x,C.y,yt,ht);let gt=W;j&&(gt=(c.calculateTileZoom||gi)(P.zoom+s.at(P.tileSize/c.tileSize),pt,Le,De,P.fov)),gt=(c.roundZoom?Math.round:Math.floor)(gt),gt=Math.max(0,gt);const Kt=Math.min(gt,te);if(We.wrap=L.getWrap(I,yt,We.wrap),We.zoom>=Kt){if(We.zoom<K)continue;const en=he-We.zoom,zt=ge[0]-.5-(Ke<<en),ln=ge[1]-.5-(Ze<<en),Jn=c.reparseOverscaled?Math.max(We.zoom,gt):We.zoom;Fe.push({tileID:new s.a2(We.zoom===te?Jn:We.zoom,We.wrap,We.zoom,Ke,Ze),distanceSq:s.au([Oe[0]-.5-Ke,Oe[1]-.5-Ze]),tileDistanceToCamera:Math.sqrt(zt*zt+ln*ln)})}else for(let en=0;en<4;en++)He.push({zoom:We.zoom+1,x:(Ke<<1)+en%2,y:(Ze<<1)+(en>>1),wrap:We.wrap,fullyVisible:nt})}return Fe.sort(((We,Ke)=>We.distanceSq-Ke.distanceSq)).map((We=>We.tileID))}const li=s.aa.fromPoints([new s.P(0,0),new s.P(s.a5,s.a5)]);function Eo(P){return P==="raster"||P==="image"||P==="video"}function If(P,c,m,b,C,I,L){if(!c.hasData())return!1;const{tileID:j,fadingRole:W,fadingDirection:K,fadingParentID:te}=c;if(W===Ye.Base&&K===at.Incoming&&te)return m[te.key]=te,!0;const he=Math.max(j.overscaledZ-C,I);for(let ue=j.overscaledZ-1;ue>=he;ue--){const ge=j.scaledTo(ue),Oe=P.getLoadedTile(ge);if(Oe)return c.setCrossFadeLogic({fadingRole:Ye.Base,fadingDirection:at.Incoming,fadingParentID:Oe.tileID,fadeEndTime:b+L}),Oe.setCrossFadeLogic({fadingRole:Ye.Parent,fadingDirection:at.Departing,fadeEndTime:b+L}),m[ge.key]=ge,!0}return!1}function ld(P,c,m,b,C,I){if(!c.hasData())return!1;const L=c.tileID.children(C);let j=Gt(P,c,L,m,b,C,I);if(j)return!0;for(const W of L)Gt(P,c,W.children(C),m,b,C,I)&&(j=!0);return j}function Gt(P,c,m,b,C,I,L){if(m[0].overscaledZ>=I)return!1;let j=!1;for(const W of m){const K=P.getLoadedTile(W);if(!K)continue;const{fadingRole:te,fadingDirection:he,fadingParentID:ue}=K;te===Ye.Base&&he===at.Departing&&ue||(K.setCrossFadeLogic({fadingRole:Ye.Base,fadingDirection:at.Departing,fadingParentID:c.tileID,fadeEndTime:C+L}),c.setCrossFadeLogic({fadingRole:Ye.Parent,fadingDirection:at.Incoming,fadeEndTime:C+L})),b[W.key]=W,j=!0}return j}function Is(P,c,m,b){const C=P.tileID;return!!P.selfFading||!P.hasData()&&!!c.has(C)&&(P.setSelfFadeLogic(m+b),!0)}function Ds(P,c){var m;P.needsHillshadePrepare=!0,P.needsTerrainPrepare=!0;let b=c.tileID.canonical.x-P.tileID.canonical.x;const C=c.tileID.canonical.y-P.tileID.canonical.y,I=Math.pow(2,P.tileID.canonical.z),L=c.tileID.key;b===0&&C===0||Math.abs(C)>1||(Math.abs(b)>1&&(Math.abs(b+I)===1?b+=I:Math.abs(b-I)===1&&(b-=I)),c.dem&&P.dem&&(P.dem.backfillBorder(c.dem,b,C),!((m=P.neighboringTiles)===null||m===void 0)&&m[L]&&(P.neighboringTiles[L].backfilled=!0)))}class Bl{constructor(){this._tiles={}}handleWrapJump(c){const m={};for(const b in this._tiles){const C=this._tiles[b];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+c),m[C.tileID.key]=C}this._tiles=m}setFeatureState(c,m){for(const b in this._tiles)this._tiles[b].setFeatureState(c,m)}getAllTiles(){return Object.values(this._tiles)}getAllIds(c=!1){return c?Object.values(this._tiles).map((m=>m.tileID)).sort(s.aw).map((m=>m.key)):Object.keys(this._tiles)}getTileById(c){return this._tiles[c]}setTile(c,m){this._tiles[c]=m}deleteTileById(c){delete this._tiles[c]}getLoadedTile(c){const m=this.getTileById(c.key);return m?.hasData()?m:null}isIdRenderable(c,m=!1){var b;return(b=this.getTileById(c))===null||b===void 0?void 0:b.isRenderable(m)}getRenderableIds(c=0,m){const b=[];for(const C of this.getAllIds())this.isIdRenderable(C,m)&&b.push(this.getTileById(C));return m?b.sort(((C,I)=>{const L=C.tileID,j=I.tileID,W=new s.P(L.canonical.x,L.canonical.y)._rotate(-c),K=new s.P(j.canonical.x,j.canonical.y)._rotate(-c);return L.overscaledZ-j.overscaledZ||K.y-W.y||K.x-W.x})).map((C=>C.tileID.key)):b.map((C=>C.tileID)).sort(s.aw).map((C=>C.key))}}class yi extends s.E{constructor(c,m,b){super(),this.id=c,this.dispatcher=b,this.on("data",(C=>this._dataHandler(C))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((C,I,L,j)=>{const W=new(be(I.type))(C,I,L,j);if(W.id!==C)throw new Error(`Expected Source id to be ${C} instead of ${W.id}`);return W})(c,m,b,this),this._inViewTiles=new Bl,this._outOfViewCache=new s.ax(0,(C=>this._unloadTile(C))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new ot,this._didEmitContent=!1,this._updated=!1}onAdd(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._maxTileCacheZoomLevels=c?c._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(c)}onRemove(c){for(const m of this._inViewTiles.getAllTiles())m.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(c),this._inViewTiles=new Bl}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const c of this._inViewTiles.getAllTiles())if(c.state!=="loaded"&&c.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(c,m,b){return s._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(c),this._tileLoaded(c,m,b)}catch(C){c.state="errored",C.status!==404?this._source.fire(new s.k(C,{tile:c})):this.update(this.transform,this.terrain)}}))}_unloadTile(c){this._source.unloadTile&&this._source.unloadTile(c)}_abortTile(c){this._source.abortTile&&this._source.abortTile(c),this._source.fire(new s.l("dataabort",{tile:c,coord:c.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(c){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const m of this._inViewTiles.getAllTiles())m.upload(c),m.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(c){var m;return this._inViewTiles.getRenderableIds((m=this.transform)===null||m===void 0?void 0:m.bearingInRadians,c)}hasRenderableParent(c){const m=c.overscaledZ-1;if(m>=this._source.minzoom){const b=this.getLoadedTile(c.scaledTo(m));if(b)return this._inViewTiles.isIdRenderable(b.tileID.key)}return!1}reload(c,m=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const b of this._inViewTiles.getAllIds()){const C=this._inViewTiles.getTileById(b);m&&!this._source.shouldReloadTile(C,m)||(c?this._reloadTile(b,"expired"):C.state!=="errored"&&this._reloadTile(b,"reloading"))}}}_reloadTile(c,m){return s._(this,void 0,void 0,(function*(){const b=this._inViewTiles.getTileById(c);b&&(b.state!=="loading"&&(b.state=m),yield this._loadTile(b,c,m))}))}_tileLoaded(c,m,b){c.timeAdded=A(),c.selfFading&&(c.fadeEndTime=c.timeAdded+this._rasterFadeDuration),b==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(m,c),this.getSource().type==="raster-dem"&&c.dem&&(function(C,I){var L,j;const W=I.getRenderableIds();for(const K of W){if(!C.neighboringTiles||!C.neighboringTiles[K])continue;const te=I.getTileById(K);C.neighboringTiles[K].backfilled||Ds(C,te),!((j=(L=te.neighboringTiles)===null||L===void 0?void 0:L[C.tileID.key])===null||j===void 0)&&j.backfilled||Ds(te,C)}})(c,this._inViewTiles),this._state.initializeTileState(c,this.map?this.map.painter:null),c.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:c,coord:c.tileID}))}getTile(c){return this.getTileByID(c.key)}getTileByID(c){return this._inViewTiles.getTileById(c)}_retainLoadedChildren(c,m){const b=this._getLoadedDescendents(m),C=new Set;for(const I of m){const L=b[I.key];if(!L?.length){C.add(I);continue}const j=I.overscaledZ+yi.maxOverzooming,W=L.filter((he=>he.tileID.overscaledZ<=j));if(!W.length){C.add(I);continue}const K=Math.min(...W.map((he=>he.tileID.overscaledZ))),te=W.filter((he=>he.tileID.overscaledZ===K)).map((he=>he.tileID));for(const he of te)c[he.key]=he;this._areDescendentsComplete(te,K,I.overscaledZ)||C.add(I)}return C}_getLoadedDescendents(c){var m;const b={};for(const C of this._inViewTiles.getAllTiles().filter((I=>I.hasData())))for(const I of c)C.tileID.isChildOf(I)&&(b[m=I.key]||(b[m]=[])).push(C);return b}_areDescendentsComplete(c,m,b){return c.length===1&&c[0].isOverscaled()?c[0].overscaledZ===m:Math.pow(4,m-b)===c.length}getLoadedTile(c){return this._inViewTiles.getLoadedTile(c)}updateCacheSize(c){const m=Math.ceil(c.width/this._source.tileSize)+1,b=Math.ceil(c.height/this._source.tileSize)+1,C=Math.floor(m*b*(this._maxTileCacheZoomLevels===null?s.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),I=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,C):C;this._outOfViewCache.setMaxSize(I)}handleWrapJump(c){const m=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);this._prevLng=c,m&&(this._inViewTiles.handleWrapJump(m),this._resetTileReloadTimers())}update(c,m){if(!this._sourceLoaded||this._paused)return;let b;this.transform=c,this.terrain=m,this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?b=c.getVisibleUnwrappedCoordinates(this._source.tileID).map((W=>new s.a2(W.canonical.z,W.wrap,W.canonical.z,W.canonical.x,W.canonical.y))):(b=to(c,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?c.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:m,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(b=b.filter((W=>this._source.hasTile(W))))):b=[],this.usedForTerrain&&(b=this._addTerrainIdealTiles(b));const C=b.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const I=ti(c,this._source),L=this._updateRetainedTiles(b,I),j=Eo(this._source.type);j&&this._rasterFadeDuration>0&&!m&&(function(W,K,te,he,ue,ge,Oe){const Ie=A(),Le=s.av(K);for(const De of K){const je=W.getTileById(De.key);je.fadingDirection!==at.Departing&&je.fadeOpacity!==0||je.resetFadeLogic(),If(W,je,te,Ie,he,ue,Oe)||ld(W,je,te,Ie,ge,Oe)||Is(je,Le,Ie,Oe)||je.resetFadeLogic()}})(this._inViewTiles,b,L,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),j?this._cleanUpRasterTiles(L):this._cleanUpVectorTiles(L)}_cleanUpRasterTiles(c){for(const m of this._inViewTiles.getAllIds())c[m]||this._removeTile(m)}_cleanUpVectorTiles(c){for(const m of this._inViewTiles.getAllIds()){const b=this._inViewTiles.getTileById(m);c[m]?b.clearSymbolFadeHold():b.hasSymbolBuckets?b.holdingForSymbolFade()?b.symbolFadeFinished()&&this._removeTile(m):b.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(m)}}_addTerrainIdealTiles(c){const m=[];for(const b of c)if(b.canonical.z>this._source.minzoom){const C=b.scaledTo(b.canonical.z-1);m.push(C);const I=b.scaledTo(Math.max(this._source.minzoom,Math.min(b.canonical.z,5)));m.push(I)}return c.concat(m)}releaseSymbolFadeTiles(){for(const c of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(c).holdingForSymbolFade()&&this._removeTile(c)}_updateRetainedTiles(c,m){var b;const C=new Set;for(const K of c)this._addTile(K).hasData()||C.add(K);const I=c.reduce(((K,te)=>(K[te.key]=te,K)),{}),L=this._retainLoadedChildren(I,C),j={},W=Math.max(m-yi.maxUnderzooming,this._source.minzoom);for(const K of L){let te=this._inViewTiles.getTileById(K.key),he=te?.wasRequested();for(let ue=K.overscaledZ-1;ue>=W;--ue){const ge=K.scaledTo(ue);if(j[ge.key])break;if(j[ge.key]=!0,te=this.getTile(ge),!te&&he&&(te=this._addTile(ge)),te){const Oe=te.hasData();if((Oe||!(!((b=this.map)===null||b===void 0)&&b.cancelPendingTileRequestsWhileZooming)||he)&&(I[ge.key]=ge),he=te.wasRequested(),Oe)break}}}return I}_addTile(c){let m=this._inViewTiles.getTileById(c.key);if(m)return m;m=this._outOfViewCache.getAndRemove(c),m&&(m.resetFadeLogic(),this._setTileReloadTimer(c.key,m),m.tileID=c,this._state.initializeTileState(m,this.map?this.map.painter:null));const b=m;return m||(m=new Ot(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(m,c.key,m.state)),m.uses++,this._inViewTiles.setTile(c.key,m),b||this._source.fire(new s.l("dataloading",{tile:m,coord:m.tileID,dataType:"source"})),m}_setTileReloadTimer(c,m){this._clearTileReloadTimer(c);const b=m.getExpiryTimeout();b&&(this._timers[c]=setTimeout((()=>{this._reloadTile(c,"expired"),delete this._timers[c]}),b))}_clearTileReloadTimer(c){const m=this._timers[c];m&&(clearTimeout(m),delete this._timers[c])}_resetTileReloadTimers(){for(const c in this._timers)clearTimeout(this._timers[c]),delete this._timers[c];for(const c of this._inViewTiles.getAllIds()){const m=this._inViewTiles.getTileById(c);this._setTileReloadTimer(c,m)}}refreshTiles(c){for(const m of this._inViewTiles.getAllIds()){const b=this._inViewTiles.getTileById(m);(this._inViewTiles.isIdRenderable(m)||b.state=="errored")&&c.some((C=>C.equals(b.tileID.canonical)))&&this._reloadTile(m,"expired")}}_removeTile(c){const m=this._inViewTiles.getTileById(c);m&&(m.uses--,this._inViewTiles.deleteTileById(c),this._clearTileReloadTimer(c),m.uses>0||(m.hasData()&&m.state!=="reloading"?this._outOfViewCache.add(m.tileID,m,m.getExpiryTimeout()):(m.aborted=!0,this._abortTile(m),this._unloadTile(m))))}_dataHandler(c){c.dataType==="source"&&(c.sourceDataType!=="metadata"?c.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(c.sourceDataChanged,c.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const c of this._inViewTiles.getAllIds())this._removeTile(c);this._outOfViewCache.reset()}tilesIn(c,m,b){const C=[],I=this.transform;if(!I)return C;const L=I.getCoveringTilesDetailsProvider().allowWorldCopies(),j=b?I.getCameraQueryGeometry(c):c,W=ge=>I.screenPointToMercatorCoordinate(ge,this.terrain),K=this.transformBbox(c,W,!L),te=this.transformBbox(j,W,!L),he=this.getIds(),ue=s.aa.fromPoints(te);for(let ge=0;ge<he.length;ge++){const Oe=this._inViewTiles.getTileById(he[ge]);if(Oe.holdingForSymbolFade())continue;const Ie=L?[Oe.tileID]:[Oe.tileID.unwrapTo(-1),Oe.tileID.unwrapTo(0)],Le=Math.pow(2,I.zoom-Oe.tileID.overscaledZ),De=m*Oe.queryPadding*s.a5/Oe.tileSize/Le;for(const je of Ie){const He=ue.map((Fe=>je.getTilePoint(new s.a9(Fe.x,Fe.y))));if(He.expandBy(De),He.intersects(li)){const Fe=K.map((Ke=>je.getTilePoint(Ke))),We=te.map((Ke=>je.getTilePoint(Ke)));C.push({tile:Oe,tileID:L?je:je.unwrapTo(0),queryGeometry:Fe,cameraQueryGeometry:We,scale:Le})}}}return C}transformBbox(c,m,b){let C=c.map(m);if(b){const I=s.aa.fromPoints(c);I.shrinkBy(.001*Math.min(I.width(),I.height()));const L=I.map(m);s.aa.fromPoints(C).covers(L)||(C=C.map((j=>j.x>.5?new s.a9(j.x-1,j.y,j.z):j)))}return C}getVisibleCoordinates(c){const m=this.getRenderableIds(c).map((b=>this._inViewTiles.getTileById(b).tileID));return this.transform&&this.transform.populateCache(m),m}hasTransition(){return!!this._source.hasTransition()||!(!Eo(this._source.type)||!(function(c,m){if(m<=0)return!1;const b=A();for(const C of c.getAllTiles())if(C.fadeEndTime>=b)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(c){this._rasterFadeDuration=c}setFeatureState(c,m,b){this._state.updateState(c=c||s.ai,m,b)}removeFeatureState(c,m,b){this._state.removeFeatureState(c=c||s.ai,m,b)}getFeatureState(c,m){return this._state.getState(c=c||s.ai,m)}setDependencies(c,m,b){const C=this._inViewTiles.getTileById(c);C&&C.setDependencies(m,b)}reloadTilesForDependencies(c,m){for(const b of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(b).hasDependency(c,m)&&this._reloadTile(b,"reloading");this._outOfViewCache.filter((b=>!b.hasDependency(c,m)))}areTilesLoaded(){for(const c of this._inViewTiles.getAllTiles())if(c.state!=="loaded"&&c.state!=="errored")return!1;return!0}}yi.maxUnderzooming=10,yi.maxOverzooming=3;class tn{constructor(c,m){this.reset(c,m)}reset(c,m){this.points=c||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(m||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=s.an(c,0,1);let m=1,b=this._distances[m];const C=c*this.paddedLength+this.padding;for(;b<C&&m<this._distances.length;)b=this._distances[++m];const I=m-1,L=this._distances[I],j=b-L,W=j>0?(C-L)/j:0;return this.points[I].mult(1-W).add(this.points[m].mult(W))}}function ir(P,c){let m=!0;return P==="always"||P!=="never"&&c!=="never"||(m=!1),m}class dr{constructor(c,m,b){const C=this.boxCells=[],I=this.circleCells=[];this.xCellCount=Math.ceil(c/b),this.yCellCount=Math.ceil(m/b);for(let L=0;L<this.xCellCount*this.yCellCount;L++)C.push([]),I.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=m,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/m,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,m,b,C,I){this._forEachCell(m,b,C,I,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(C),this.bboxes.push(I)}insertCircle(c,m,b,C){this._forEachCell(m-C,b-C,m+C,b+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(m),this.circles.push(b),this.circles.push(C)}_insertBoxCell(c,m,b,C,I,L){this.boxCells[I].push(L)}_insertCircleCell(c,m,b,C,I,L){this.circleCells[I].push(L)}_query(c,m,b,C,I,L,j){if(b<0||c>this.width||C<0||m>this.height)return[];const W=[];if(c<=0&&m<=0&&this.width<=b&&this.height<=C){if(I)return[{key:null,x1:c,y1:m,x2:b,y2:C}];for(let K=0;K<this.boxKeys.length;K++)W.push({key:this.boxKeys[K],x1:this.bboxes[4*K],y1:this.bboxes[4*K+1],x2:this.bboxes[4*K+2],y2:this.bboxes[4*K+3]});for(let K=0;K<this.circleKeys.length;K++){const te=this.circles[3*K],he=this.circles[3*K+1],ue=this.circles[3*K+2];W.push({key:this.circleKeys[K],x1:te-ue,y1:he-ue,x2:te+ue,y2:he+ue})}}else this._forEachCell(c,m,b,C,this._queryCell,W,{hitTest:I,overlapMode:L,seenUids:{box:{},circle:{}}},j);return W}query(c,m,b,C){return this._query(c,m,b,C,!1,null)}hitTest(c,m,b,C,I,L){return this._query(c,m,b,C,!0,I,L).length>0}hitTestCircle(c,m,b,C,I){const L=c-b,j=c+b,W=m-b,K=m+b;if(j<0||L>this.width||K<0||W>this.height)return!1;const te=[];return this._forEachCell(L,W,j,K,this._queryCellCircle,te,{hitTest:!0,overlapMode:C,circle:{x:c,y:m,radius:b},seenUids:{box:{},circle:{}}},I),te.length>0}_queryCell(c,m,b,C,I,L,j,W){const{seenUids:K,hitTest:te,overlapMode:he}=j,ue=this.boxCells[I];if(ue!==null){const Oe=this.bboxes;for(const Ie of ue)if(!K.box[Ie]){K.box[Ie]=!0;const Le=4*Ie,De=this.boxKeys[Ie];if(c<=Oe[Le+2]&&m<=Oe[Le+3]&&b>=Oe[Le+0]&&C>=Oe[Le+1]&&(!W||W(De))&&(!te||!ir(he,De.overlapMode))&&(L.push({key:De,x1:Oe[Le],y1:Oe[Le+1],x2:Oe[Le+2],y2:Oe[Le+3]}),te))return!0}}const ge=this.circleCells[I];if(ge!==null){const Oe=this.circles;for(const Ie of ge)if(!K.circle[Ie]){K.circle[Ie]=!0;const Le=3*Ie,De=this.circleKeys[Ie];if(this._circleAndRectCollide(Oe[Le],Oe[Le+1],Oe[Le+2],c,m,b,C)&&(!W||W(De))&&(!te||!ir(he,De.overlapMode))){const je=Oe[Le],He=Oe[Le+1],Fe=Oe[Le+2];if(L.push({key:De,x1:je-Fe,y1:He-Fe,x2:je+Fe,y2:He+Fe}),te)return!0}}}return!1}_queryCellCircle(c,m,b,C,I,L,j,W){const{circle:K,seenUids:te,overlapMode:he}=j,ue=this.boxCells[I];if(ue!==null){const Oe=this.bboxes;for(const Ie of ue)if(!te.box[Ie]){te.box[Ie]=!0;const Le=4*Ie,De=this.boxKeys[Ie];if(this._circleAndRectCollide(K.x,K.y,K.radius,Oe[Le+0],Oe[Le+1],Oe[Le+2],Oe[Le+3])&&(!W||W(De))&&!ir(he,De.overlapMode))return L.push(!0),!0}}const ge=this.circleCells[I];if(ge!==null){const Oe=this.circles;for(const Ie of ge)if(!te.circle[Ie]){te.circle[Ie]=!0;const Le=3*Ie,De=this.circleKeys[Ie];if(this._circlesCollide(Oe[Le],Oe[Le+1],Oe[Le+2],K.x,K.y,K.radius)&&(!W||W(De))&&!ir(he,De.overlapMode))return L.push(!0),!0}}}_forEachCell(c,m,b,C,I,L,j,W){const K=this._convertToXCellCoord(c),te=this._convertToYCellCoord(m),he=this._convertToXCellCoord(b),ue=this._convertToYCellCoord(C);for(let ge=K;ge<=he;ge++)for(let Oe=te;Oe<=ue;Oe++)if(I.call(this,c,m,b,C,this.xCellCount*Oe+ge,L,j,W))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,m,b,C,I,L){const j=C-c,W=I-m,K=b+L;return K*K>j*j+W*W}_circleAndRectCollide(c,m,b,C,I,L,j){const W=(L-C)/2,K=Math.abs(c-(C+W));if(K>W+b)return!1;const te=(j-I)/2,he=Math.abs(m-(I+te));if(he>te+b)return!1;if(K<=W||he<=te)return!0;const ue=K-W,ge=he-te;return ue*ue+ge*ge<=b*b}}function Ra(P,c,m){const b=s.N();if(!P){const{vecSouth:he,vecEast:ue}=fc(c),ge=f();ge[0]=ue[0],ge[1]=ue[1],ge[2]=he[0],ge[3]=he[1],C=ge,(te=(L=(I=ge)[0])*(K=I[3])-(W=I[2])*(j=I[1]))&&(C[0]=K*(te=1/te),C[1]=-j*te,C[2]=-W*te,C[3]=L*te),b[0]=ge[0],b[1]=ge[1],b[4]=ge[2],b[5]=ge[3]}var C,I,L,j,W,K,te;return s.Q(b,b,[1/m,1/m,1]),b}function uy(P,c,m,b){if(P){const C=s.N();if(!c){const{vecSouth:I,vecEast:L}=fc(m);C[0]=L[0],C[1]=L[1],C[4]=I[0],C[5]=I[1]}return s.Q(C,C,[b,b,1]),C}return m.pixelsToClipSpaceMatrix}function fc(P){const c=Math.cos(P.rollInRadians),m=Math.sin(P.rollInRadians),b=Math.cos(P.pitchInRadians),C=Math.cos(P.bearingInRadians),I=Math.sin(P.bearingInRadians),L=s.aC();L[0]=-C*b*m-I*c,L[1]=-I*b*m+C*c;const j=s.aD(L);j<1e-9?s.aE(L):s.aF(L,L,1/j);const W=s.aC();W[0]=C*b*c-I*m,W[1]=I*b*c+C*m;const K=s.aD(W);return K<1e-9?s.aE(W):s.aF(W,W,1/K),{vecEast:W,vecSouth:L}}function nr(P,c,m,b){let C;b?(C=[P,c,b(P,c),1],s.aH(C,C,m)):(C=[P,c,0,1],sl(C,C,m));const I=C[3];return{point:new s.P(C[0]/I,C[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}function cd(P,c){return .5+P/c*.5}function pc(P,c){return P.x>=-c[0]&&P.x<=c[0]&&P.y>=-c[1]&&P.y<=c[1]}function su(P,c,m,b,C,I,L,j,W,K,te,he,ue){const ge=m?P.textSizeData:P.iconSizeData,Oe=s.ay(ge,c.transform.zoom),Ie=[256/c.width*2+1,256/c.height*2+1],Le=m?P.text.dynamicLayoutVertexArray:P.icon.dynamicLayoutVertexArray;Le.clear();const De=P.lineVertexArray,je=m?P.text.placedSymbolArray:P.icon.placedSymbolArray,He=c.transform.width/c.transform.height;let Fe=!1;for(let We=0;We<je.length;We++){const Ke=je.get(We);if(Ke.hidden||Ke.writingMode===s.az.vertical&&!Fe){yc(Ke.numGlyphs,Le);continue}Fe=!1;const Ze=new s.P(Ke.anchorX,Ke.anchorY),nt={getElevation:ue,pitchedLabelPlaneMatrix:b,lineVertexArray:De,pitchWithMap:I,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:c.transform,tileAnchorPoint:Ze,unwrappedTileID:W,width:K,height:te,translation:he},yt=Lf(Ke.anchorX,Ke.anchorY,nt);if(!pc(yt.point,Ie)){yc(Ke.numGlyphs,Le);continue}const ht=cd(c.transform.cameraToCenterDistance,yt.signedDistanceFromCamera),pt=s.aA(ge,Oe,Ke),gt=I?pt*c.transform.getPitchedTextCorrection(Ke.anchorX,Ke.anchorY,W)/ht:pt*ht,Kt=no({projectionContext:nt,pitchedLabelPlaneMatrixInverse:C,symbol:Ke,fontSize:gt,flip:!1,keepUpright:L,glyphOffsetArray:P.glyphOffsetArray,dynamicLayoutVertexArray:Le,aspectRatio:He,rotateToLine:j});Fe=Kt.useVertical,(Kt.notEnoughRoom||Fe||Kt.needsFlipping&&no({projectionContext:nt,pitchedLabelPlaneMatrixInverse:C,symbol:Ke,fontSize:gt,flip:!0,keepUpright:L,glyphOffsetArray:P.glyphOffsetArray,dynamicLayoutVertexArray:Le,aspectRatio:He,rotateToLine:j}).notEnoughRoom)&&yc(Ke.numGlyphs,Le)}m?P.text.dynamicLayoutVertexBuffer.updateData(Le):P.icon.dynamicLayoutVertexBuffer.updateData(Le)}function mc(P,c,m,b,C,I,L,j){const W=I.glyphStartIndex+I.numGlyphs,K=I.lineStartIndex,te=I.lineStartIndex+I.lineLength,he=c.getoffsetX(I.glyphStartIndex),ue=c.getoffsetX(W-1),ge=Fl(P*he,m,b,C,I.segment,K,te,j,L);if(!ge)return null;const Oe=Fl(P*ue,m,b,C,I.segment,K,te,j,L);return Oe?j.projectionCache.anyProjectionOccluded?null:{first:ge,last:Oe}:null}function gc(P,c,m,b){return P===s.az.horizontal&&Math.abs(m.y-c.y)>Math.abs(m.x-c.x)*b?{useVertical:!0}:(P===s.az.vertical?c.y<m.y:c.x>m.x)?{needsFlipping:!0}:null}function no(P){const{projectionContext:c,pitchedLabelPlaneMatrixInverse:m,symbol:b,fontSize:C,flip:I,keepUpright:L,glyphOffsetArray:j,dynamicLayoutVertexArray:W,aspectRatio:K,rotateToLine:te}=P,he=C/24,ue=b.lineOffsetX*he,ge=b.lineOffsetY*he;let Oe;if(b.numGlyphs>1){const Ie=b.glyphStartIndex+b.numGlyphs,Le=b.lineStartIndex,De=b.lineStartIndex+b.lineLength,je=mc(he,j,ue,ge,I,b,te,c);if(!je)return{notEnoughRoom:!0};const He=au(je.first.point.x,je.first.point.y,c,m),Fe=au(je.last.point.x,je.last.point.y,c,m);if(L&&!I){const We=gc(b.writingMode,He,Fe,K);if(We)return We}Oe=[je.first];for(let We=b.glyphStartIndex+1;We<Ie-1;We++){const Ke=Fl(he*j.getoffsetX(We),ue,ge,I,b.segment,Le,De,c,te);if(!Ke)return{notEnoughRoom:!0};Oe.push(Ke)}Oe.push(je.last)}else{if(L&&!I){const Le=Mr(c.tileAnchorPoint.x,c.tileAnchorPoint.y,c).point,De=b.lineStartIndex+b.segment+1,je=new s.P(c.lineVertexArray.getx(De),c.lineVertexArray.gety(De)),He=Mr(je.x,je.y,c),Fe=He.signedDistanceFromCamera>0?He.point:Df(c.tileAnchorPoint,je,Le,1,c),We=au(Le.x,Le.y,c,m),Ke=au(Fe.x,Fe.y,c,m),Ze=gc(b.writingMode,We,Ke,K);if(Ze)return Ze}const Ie=Fl(he*j.getoffsetX(b.glyphStartIndex),ue,ge,I,b.segment,b.lineStartIndex,b.lineStartIndex+b.lineLength,c,te);if(!Ie||c.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Oe=[Ie]}for(const Ie of Oe)s.aG(W,Ie.point,Ie.angle);return{}}function Df(P,c,m,b,C){const I=P.add(P.sub(c)._unit()),L=Mr(I.x,I.y,C).point,j=m.sub(L);return m.add(j._mult(b/j.mag()))}function Ls(P,c,m){const b=c.projectionCache;if(b.projections[P])return b.projections[P];const C=new s.P(c.lineVertexArray.getx(P),c.lineVertexArray.gety(P)),I=Mr(C.x,C.y,c);if(I.signedDistanceFromCamera>0)return b.projections[P]=I.point,b.anyProjectionOccluded=b.anyProjectionOccluded||I.isOccluded,I.point;const L=P-m.direction;return Df(m.distanceFromAnchor===0?c.tileAnchorPoint:new s.P(c.lineVertexArray.getx(L),c.lineVertexArray.gety(L)),C,m.previousVertex,m.absOffsetX-m.distanceFromAnchor+1,c)}function Mr(P,c,m){const b=P+m.translation[0],C=c+m.translation[1];let I;return m.pitchWithMap?(I=nr(b,C,m.pitchedLabelPlaneMatrix,m.getElevation),I.isOccluded=!1):(I=m.transform.projectTileCoordinates(b,C,m.unwrappedTileID,m.getElevation),I.point.x=(.5*I.point.x+.5)*m.width,I.point.y=(.5*-I.point.y+.5)*m.height),I}function au(P,c,m,b){if(m.pitchWithMap){const C=[P,c,0,1];return s.aH(C,C,b),m.transform.projectTileCoordinates(C[0]/C[3],C[1]/C[3],m.unwrappedTileID,m.getElevation).point}return{x:P/m.width*2-1,y:1-c/m.height*2}}function Lf(P,c,m){return m.transform.projectTileCoordinates(P,c,m.unwrappedTileID,m.getElevation)}function $f(P,c,m){return P._unit()._perp()._mult(c*m)}function ih(P,c,m,b,C,I,L,j,W){if(j.projectionCache.offsets[P])return j.projectionCache.offsets[P];const K=m.add(c);if(P+W.direction<b||P+W.direction>=C)return j.projectionCache.offsets[P]=K,K;const te=Ls(P+W.direction,j,W),he=$f(te.sub(m),L,W.direction),ue=m.add(he),ge=te.add(he);return j.projectionCache.offsets[P]=s.aI(I,K,ue,ge)||K,j.projectionCache.offsets[P]}function Fl(P,c,m,b,C,I,L,j,W){const K=b?P-c:P+c;let te=K>0?1:-1,he=0;b&&(te*=-1,he=Math.PI),te<0&&(he+=Math.PI);let ue,ge=te>0?I+C:I+C+1;j.projectionCache.cachedAnchorPoint?ue=j.projectionCache.cachedAnchorPoint:(ue=Mr(j.tileAnchorPoint.x,j.tileAnchorPoint.y,j).point,j.projectionCache.cachedAnchorPoint=ue);let Oe,Ie,Le=ue,De=ue,je=0,He=0;const Fe=Math.abs(K),We=[];let Ke;for(;je+He<=Fe;){if(ge+=te,ge<I||ge>=L)return null;je+=He,De=Le,Ie=Oe;const yt={absOffsetX:Fe,direction:te,distanceFromAnchor:je,previousVertex:De};if(Le=Ls(ge,j,yt),m===0)We.push(De),Ke=Le.sub(De);else{let ht;const pt=Le.sub(De);ht=pt.mag()===0?$f(Ls(ge+te,j,yt).sub(Le),m,te):$f(pt,m,te),Ie||(Ie=De.add(ht)),Oe=ih(ge,ht,Le,I,L,Ie,m,j,yt),We.push(Ie),Ke=Oe.sub(Ie)}He=Ke.mag()}const Ze=Ke._mult((Fe-je)/He)._add(Ie||De),nt=he+Math.atan2(Le.y-De.y,Le.x-De.x);return We.push(Ze),{point:Ze,angle:W?nt:0,path:We}}const gm=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function yc(P,c){for(let m=0;m<P;m++){const b=c.length;c.resize(b+4),c.float32.set(gm,3*b)}}function sl(P,c,m){const b=c[0],C=c[1];return P[0]=m[0]*b+m[4]*C+m[12],P[1]=m[1]*b+m[5]*C+m[13],P[3]=m[3]*b+m[7]*C+m[15],P}const Nr=100;class sv{constructor(c,m=new dr(c.width+200,c.height+200,25),b=new dr(c.width+200,c.height+200,25)){this.transform=c,this.grid=m,this.ignoredGrid=b,this.pitchFactor=Math.cos(c.pitch*Math.PI/180)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+Nr,this.screenBottomBoundary=c.height+Nr,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(c,m,b,C,I,L,j,W,K,te,he,ue){const ge=this.projectAndGetPerspectiveRatio(c.anchorPointX+W[0],c.anchorPointY+W[1],I,te,ue),Oe=b*ge.perspectiveRatio;let Ie;if(L||j)Ie=this._projectCollisionBox(c,Oe,C,I,L,j,W,ge,te,he,ue);else{const Ke=ge.x+(he?he.x*Oe:0),Ze=ge.y+(he?he.y*Oe:0);Ie={allPointsOccluded:!1,box:[Ke+c.x1*Oe,Ze+c.y1*Oe,Ke+c.x2*Oe,Ze+c.y2*Oe]}}const[Le,De,je,He]=Ie.box,Fe=L?Ie.allPointsOccluded:ge.isOccluded;let We=Fe;return We||(We=ge.perspectiveRatio<this.perspectiveRatioCutoff),We||(We=!this.isInsideGrid(Le,De,je,He)),We||m!=="always"&&this.grid.hitTest(Le,De,je,He,m,K)?{box:[Le,De,je,He],placeable:!1,offscreen:!1,occluded:Fe}:{box:[Le,De,je,He],placeable:!0,offscreen:this.isOffscreen(Le,De,je,He),occluded:Fe}}placeCollisionCircles(c,m,b,C,I,L,j,W,K,te,he,ue,ge,Oe){const Ie=[],Le=new s.P(m.anchorX,m.anchorY),De=this.getPerspectiveRatio(Le.x,Le.y,L,Oe),je=(K?I*this.transform.getPitchedTextCorrection(m.anchorX,m.anchorY,L)/De:I*De)/s.aM,He={getElevation:Oe,pitchedLabelPlaneMatrix:j,lineVertexArray:b,pitchWithMap:K,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Le,unwrappedTileID:L,width:this.transform.width,height:this.transform.height,translation:ge},Fe=mc(je,C,m.lineOffsetX*je,m.lineOffsetY*je,!1,m,!1,He);let We=!1,Ke=!1,Ze=!0;if(Fe){const nt=.5*he*De+ue,yt=new s.P(-100,-100),ht=new s.P(this.screenRightBoundary,this.screenBottomBoundary),pt=new tn,gt=Fe.first,Kt=Fe.last;let en=[];for(let Jn=gt.path.length-1;Jn>=1;Jn--)en.push(gt.path[Jn]);for(let Jn=1;Jn<Kt.path.length;Jn++)en.push(Kt.path[Jn]);const zt=2.5*nt;if(K){const Jn=this.projectPathToScreenSpace(en,He);en=Jn.some((Hr=>Hr.signedDistanceFromCamera<=0))?[]:Jn.map((Hr=>Hr.point))}let ln=[];if(en.length>0){const Jn=en[0].clone(),Hr=en[0].clone();for(let vi=1;vi<en.length;vi++)Jn.x=Math.min(Jn.x,en[vi].x),Jn.y=Math.min(Jn.y,en[vi].y),Hr.x=Math.max(Hr.x,en[vi].x),Hr.y=Math.max(Hr.y,en[vi].y);ln=Jn.x>=yt.x&&Hr.x<=ht.x&&Jn.y>=yt.y&&Hr.y<=ht.y?[en]:Hr.x<yt.x||Jn.x>ht.x||Hr.y<yt.y||Jn.y>ht.y?[]:s.aJ([en],yt.x,yt.y,ht.x,ht.y)}for(const Jn of ln){pt.reset(Jn,.25*nt);let Hr=0;Hr=pt.length<=.5*nt?1:Math.ceil(pt.paddedLength/zt)+1;for(let vi=0;vi<Hr;vi++){const hi=vi/Math.max(Hr-1,1),Ei=pt.lerp(hi),ri=Ei.x+Nr,qi=Ei.y+Nr;Ie.push(ri,qi,nt,0);const Ai=ri-nt,ss=qi-nt,so=ri+nt,ao=qi+nt;if(Ze=Ze&&this.isOffscreen(Ai,ss,so,ao),Ke=Ke||this.isInsideGrid(Ai,ss,so,ao),c!=="always"&&this.grid.hitTestCircle(ri,qi,nt,c,te)&&(We=!0,!W))return{circles:[],offscreen:!1,collisionDetected:We}}}}return{circles:!W&&We||!Ke||De<this.perspectiveRatioCutoff?[]:Ie,offscreen:Ze,collisionDetected:We}}projectPathToScreenSpace(c,m){const b=(function(C,I){const L=s.N();return s.aB(L,I.pitchedLabelPlaneMatrix),C.map((j=>{const W=nr(j.x,j.y,L,I.getElevation),K=I.transform.projectTileCoordinates(W.point.x,W.point.y,I.unwrappedTileID,I.getElevation);return K.point.x=(.5*K.point.x+.5)*I.width,K.point.y=(.5*-K.point.y+.5)*I.height,K}))})(c,m);return(function(C){let I=0,L=0,j=0,W=0;for(let K=0;K<C.length;K++)C[K].isOccluded?(j=K+1,W=0):(W++,W>L&&(L=W,I=j));return C.slice(I,I+L)})(b)}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const m=[],b=new s.aa;for(const he of c){const ue=new s.P(he.x+Nr,he.y+Nr);b.extend(ue),m.push(ue)}const{minX:C,minY:I,maxX:L,maxY:j}=b,W=this.grid.query(C,I,L,j).concat(this.ignoredGrid.query(C,I,L,j)),K={},te={};for(const he of W){const ue=he.key;if(K[ue.bucketInstanceId]===void 0&&(K[ue.bucketInstanceId]={}),K[ue.bucketInstanceId][ue.featureIndex])continue;const ge=[new s.P(he.x1,he.y1),new s.P(he.x2,he.y1),new s.P(he.x2,he.y2),new s.P(he.x1,he.y2)];s.aK(m,ge)&&(K[ue.bucketInstanceId][ue.featureIndex]=!0,te[ue.bucketInstanceId]===void 0&&(te[ue.bucketInstanceId]=[]),te[ue.bucketInstanceId].push(ue.featureIndex))}return te}insertCollisionBox(c,m,b,C,I,L){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:I,collisionGroupID:L,overlapMode:m},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,m,b,C,I,L){const j=b?this.ignoredGrid:this.grid,W={bucketInstanceId:C,featureIndex:I,collisionGroupID:L,overlapMode:m};for(let K=0;K<c.length;K+=4)j.insertCircle(W,c[K],c[K+1],c[K+2])}projectAndGetPerspectiveRatio(c,m,b,C,I){if(I){let L;C?(L=[c,m,C(c,m),1],s.aH(L,L,I)):(L=[c,m,0,1],sl(L,L,I));const j=L[3];return{x:(L[0]/j+1)/2*this.transform.width+Nr,y:(-L[1]/j+1)/2*this.transform.height+Nr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/j*.5,isOccluded:!1,signedDistanceFromCamera:j}}{const L=this.transform.projectTileCoordinates(c,m,b,C);return{x:(L.point.x+1)/2*this.transform.width+Nr,y:(1-L.point.y)/2*this.transform.height+Nr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/L.signedDistanceFromCamera*.5,isOccluded:L.isOccluded,signedDistanceFromCamera:L.signedDistanceFromCamera}}}getPerspectiveRatio(c,m,b,C){const I=this.transform.projectTileCoordinates(c,m,b,C);return .5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5}isOffscreen(c,m,b,C){return b<Nr||c>=this.screenRightBoundary||C<Nr||m>this.screenBottomBoundary}isInsideGrid(c,m,b,C){return b>=0&&c<this.gridRightBoundary&&C>=0&&m<this.gridBottomBoundary}getViewportMatrix(){const c=s.ar([]);return s.O(c,c,[-100,-100,0]),c}_projectCollisionBox(c,m,b,C,I,L,j,W,K,te,he){let ue=1,ge=0,Oe=0,Ie=1;const Le=c.anchorPointX+j[0],De=c.anchorPointY+j[1];if(L&&!I){const en=this.projectAndGetPerspectiveRatio(Le+1,De,C,K,he),zt=en.x-W.x,ln=Math.atan((en.y-W.y)/zt)+(zt<0?Math.PI:0),Jn=Math.sin(ln),Hr=Math.cos(ln);ue=Hr,ge=Jn,Oe=-Jn,Ie=Hr}else if(!L&&I){const en=fc(this.transform);ue=en.vecEast[0],ge=en.vecEast[1],Oe=en.vecSouth[0],Ie=en.vecSouth[1]}let je=W.x,He=W.y,Fe=m;I&&(je=Le,He=De,Fe=Math.pow(2,-(this.transform.zoom-b.overscaledZ)),Fe*=this.transform.getPitchedTextCorrection(Le,De,C),te||(Fe*=s.an(.5+W.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),te&&(je+=ue*te.x*Fe+Oe*te.y*Fe,He+=ge*te.x*Fe+Ie*te.y*Fe);const We=c.x1*Fe,Ke=c.x2*Fe,Ze=(We+Ke)/2,nt=c.y1*Fe,yt=c.y2*Fe,ht=(nt+yt)/2,pt=[{offsetX:We,offsetY:nt},{offsetX:Ze,offsetY:nt},{offsetX:Ke,offsetY:nt},{offsetX:Ke,offsetY:ht},{offsetX:Ke,offsetY:yt},{offsetX:Ze,offsetY:yt},{offsetX:We,offsetY:yt},{offsetX:We,offsetY:ht}];let gt=[];for(const{offsetX:en,offsetY:zt}of pt)gt.push(new s.P(je+ue*en+Oe*zt,He+ge*en+Ie*zt));let Kt=!1;if(I){const en=gt.map((zt=>this.projectAndGetPerspectiveRatio(zt.x,zt.y,C,K,he)));Kt=en.some((zt=>!zt.isOccluded)),gt=en.map((zt=>new s.P(zt.x,zt.y)))}else Kt=!0;return{box:s.aL(gt),allPointsOccluded:!Kt}}}class Nb{constructor(c,m,b,C){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?m:-m))):C&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class ud{constructor(c,m,b,C,I){this.text=new Nb(c?c.text:null,m,b,I),this.icon=new Nb(c?c.icon:null,m,C,I)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class av{constructor(c,m,b){this.text=c,this.icon=m,this.skipFade=b}}class ym{constructor(c,m,b,C,I){this.bucketInstanceId=c,this.featureIndex=m,this.sourceLayerIndex=b,this.bucketIndex=C,this.tileID=I}}class Bb{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const m=++this.maxGroupID;this.collisionGroups[c]={ID:m,predicate:b=>b.collisionGroupID===m}}return this.collisionGroups[c]}}function na(P,c,m,b,C){const{horizontalAlign:I,verticalAlign:L}=s.aS(P);return new s.P(-(I-.5)*c+b[0]*C,-(L-.5)*m+b[1]*C)}class vm{constructor(c,m,b,C,I){this.transform=c.clone(),this.terrain=m,this.collisionIndex=new sv(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new Bb(C),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(c){const m=this.terrain;return m?(b,C)=>m.getElevation(c,b,C):null}getBucketParts(c,m,b,C){const I=b.getBucket(m),L=b.latestFeatureIndex;if(!I||!L||m.id!==I.layerIds[0])return;const j=b.collisionBoxArray,W=I.layers[0].layout,K=I.layers[0].paint,te=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),he=b.tileSize/s.a5,ue=b.tileID.toUnwrapped(),ge=W.get("text-rotation-alignment")==="map",Oe=s.aN(b,1,this.transform.zoom),Ie=s.aO(this.collisionIndex.transform,b,K.get("text-translate"),K.get("text-translate-anchor")),Le=s.aO(this.collisionIndex.transform,b,K.get("icon-translate"),K.get("icon-translate-anchor")),De=Ra(ge,this.transform,Oe);this.retainedQueryData[I.bucketInstanceId]=new ym(I.bucketInstanceId,L,I.sourceLayerIndex,I.index,b.tileID);const je={bucket:I,layout:W,translationText:Ie,translationIcon:Le,unwrappedTileID:ue,pitchedLabelPlaneMatrix:De,scale:te,textPixelRatio:he,holdingForFade:b.holdingForSymbolFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:s.ay(I.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(I.sourceID)};if(C)for(const He of I.sortKeyRanges){const{sortKey:Fe,symbolInstanceStart:We,symbolInstanceEnd:Ke}=He;c.push({sortKey:Fe,symbolInstanceStart:We,symbolInstanceEnd:Ke,parameters:je})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:I.symbolInstances.length,parameters:je})}attemptAnchorPlacement(c,m,b,C,I,L,j,W,K,te,he,ue,ge,Oe,Ie,Le,De,je,He,Fe){const We=s.aP[c.textAnchor],Ke=[c.textOffset0,c.textOffset1],Ze=na(We,b,C,Ke,I),nt=this.collisionIndex.placeCollisionBox(m,ue,W,K,te,j,L,Le,he.predicate,He,Ze,Fe);if((!je||this.collisionIndex.placeCollisionBox(je,ue,W,K,te,j,L,De,he.predicate,He,Ze,Fe).placeable)&&nt.placeable){let yt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ge.crossTileID]&&this.prevPlacement.placements[ge.crossTileID]&&this.prevPlacement.placements[ge.crossTileID].text&&(yt=this.prevPlacement.variableOffsets[ge.crossTileID].anchor),ge.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ge.crossTileID]={textOffset:Ke,width:b,height:C,anchor:We,textBoxScale:I,prevAnchor:yt},this.markUsedJustification(Oe,We,ge,Ie),Oe.allowVerticalPlacement&&(this.markUsedOrientation(Oe,Ie,ge),this.placedOrientations[ge.crossTileID]=Ie),{shift:Ze,placedGlyphBoxes:nt}}}placeLayerBucketPart(c,m,b){const{bucket:C,layout:I,translationText:L,translationIcon:j,unwrappedTileID:W,pitchedLabelPlaneMatrix:K,textPixelRatio:te,holdingForFade:he,collisionBoxArray:ue,partiallyEvaluatedTextSize:ge,collisionGroup:Oe}=c.parameters,Ie=I.get("text-optional"),Le=I.get("icon-optional"),De=s.aQ(I,"text-overlap","text-allow-overlap"),je=De==="always",He=s.aQ(I,"icon-overlap","icon-allow-overlap"),Fe=He==="always",We=I.get("text-rotation-alignment")==="map",Ke=I.get("text-pitch-alignment")==="map",Ze=I.get("icon-text-fit")!=="none",nt=I.get("symbol-z-order")==="viewport-y",yt=je&&(Fe||!C.hasIconData()||Le),ht=Fe&&(je||!C.hasTextData()||Ie);!C.collisionArrays&&ue&&C.deserializeCollisionBoxes(ue);const pt=this.retainedQueryData[C.bucketInstanceId].tileID,gt=this._getTerrainElevationFunc(pt),Kt=this.transform.getFastPathSimpleProjectionMatrix(pt),en=(zt,ln,Jn)=>{var Hr,vi;if(m[zt.crossTileID])return;if(he)return void(this.placements[zt.crossTileID]=new av(!1,!1,!1));let hi=!1,Ei=!1,ri=!0,qi=null,Ai={box:null,placeable:!1,offscreen:null,occluded:!1},ss={placeable:!1},so=null,ao=null,as=null,$c=0,zc=0,Gl=0;ln.textFeatureIndex?$c=ln.textFeatureIndex:zt.useRuntimeCollisionCircles&&($c=zt.featureIndex),ln.verticalTextFeatureIndex&&(zc=ln.verticalTextFeatureIndex);const _a=ln.textBox;if(_a){const ba=Yr=>{let di=s.az.horizontal;if(C.allowVerticalPlacement&&!Yr&&this.prevPlacement){const Mo=this.prevPlacement.placedOrientations[zt.crossTileID];Mo&&(this.placedOrientations[zt.crossTileID]=Mo,di=Mo,this.markUsedOrientation(C,di,zt))}return di},Qa=(Yr,di)=>{if(C.allowVerticalPlacement&&zt.numVerticalGlyphVertices>0&&ln.verticalTextBox){for(const Mo of C.writingModes)if(Mo===s.az.vertical?(Ai=di(),ss=Ai):Ai=Yr(),Ai&&Ai.placeable)break}else Ai=Yr()},yl=zt.textAnchorOffsetStartIndex,vl=zt.textAnchorOffsetEndIndex;if(vl===yl){const Yr=(di,Mo)=>{const Fo=this.collisionIndex.placeCollisionBox(di,De,te,pt,W,Ke,We,L,Oe.predicate,gt,void 0,Kt);return Fo&&Fo.placeable&&(this.markUsedOrientation(C,Mo,zt),this.placedOrientations[zt.crossTileID]=Mo),Fo};Qa((()=>Yr(_a,s.az.horizontal)),(()=>{const di=ln.verticalTextBox;return C.allowVerticalPlacement&&zt.numVerticalGlyphVertices>0&&di?Yr(di,s.az.vertical):{box:null,offscreen:null}})),ba(Ai&&Ai.placeable)}else{let Yr=s.aP[(vi=(Hr=this.prevPlacement)===null||Hr===void 0?void 0:Hr.variableOffsets[zt.crossTileID])===null||vi===void 0?void 0:vi.anchor];const di=(Fo,Ny,By)=>{const Sh=Fo.x2-Fo.x1,rx=Fo.y2-Fo.y1,Ch=zt.textBoxScale,Fy=Ze&&He==="never"?Ny:null;let xu=null,wu=De==="never"?1:2,Yl="never";Yr&&wu++;for(let jy=0;jy<wu;jy++){for(let eg=yl;eg<vl;eg++){const tg=C.textAnchorOffsets.get(eg);if(Yr&&tg.textAnchor!==Yr)continue;const ng=this.attemptAnchorPlacement(tg,Fo,Sh,rx,Ch,We,Ke,te,pt,W,Oe,Yl,zt,C,By,L,j,Fy,gt);if(ng&&(xu=ng.placedGlyphBoxes,xu&&xu.placeable))return hi=!0,qi=ng.shift,xu}Yr?Yr=null:Yl=De}return b&&!xu&&(xu={box:this.collisionIndex.placeCollisionBox(_a,"always",te,pt,W,Ke,We,L,Oe.predicate,gt,void 0,Kt).box,offscreen:!1,placeable:!1,occluded:!1}),xu};Qa((()=>di(_a,ln.iconBox,s.az.horizontal)),(()=>{const Fo=ln.verticalTextBox;return C.allowVerticalPlacement&&(!Ai||!Ai.placeable)&&zt.numVerticalGlyphVertices>0&&Fo?di(Fo,ln.verticalIconBox,s.az.vertical):{box:null,occluded:!0,offscreen:null}})),Ai&&(hi=Ai.placeable,ri=Ai.offscreen);const Mo=ba(Ai&&Ai.placeable);if(!hi&&this.prevPlacement){const Fo=this.prevPlacement.variableOffsets[zt.crossTileID];Fo&&(this.variableOffsets[zt.crossTileID]=Fo,this.markUsedJustification(C,Fo.anchor,zt,Mo))}}}if(so=Ai,hi=so&&so.placeable,ri=so&&so.offscreen,zt.useRuntimeCollisionCircles&&zt.centerJustifiedTextSymbolIndex>=0){const ba=C.text.placedSymbolArray.get(zt.centerJustifiedTextSymbolIndex),Qa=s.aA(C.textSizeData,ge,ba),yl=I.get("text-padding");ao=this.collisionIndex.placeCollisionCircles(De,ba,C.lineVertexArray,C.glyphOffsetArray,Qa,W,K,b,Ke,Oe.predicate,zt.collisionCircleDiameter,yl,L,gt),ao.circles.length&&ao.collisionDetected&&!b&&s.w("Collisions detected, but collision boxes are not shown"),hi=je||ao.circles.length>0&&!ao.collisionDetected,ri=ri&&ao.offscreen}if(ln.iconFeatureIndex&&(Gl=ln.iconFeatureIndex),ln.iconBox){const ba=Qa=>this.collisionIndex.placeCollisionBox(Qa,He,te,pt,W,Ke,We,j,Oe.predicate,gt,Ze&&qi?qi:void 0,Kt);ss&&ss.placeable&&ln.verticalIconBox?(as=ba(ln.verticalIconBox),Ei=as.placeable):(as=ba(ln.iconBox),Ei=as.placeable),ri=ri&&as.offscreen}const Dd=Ie||zt.numHorizontalGlyphVertices===0&&zt.numVerticalGlyphVertices===0,op=Le||zt.numIconVertices===0;Dd||op?op?Dd||(Ei=Ei&&hi):hi=Ei&&hi:Ei=hi=Ei&&hi;const Xl=Ei&&as.placeable;if(hi&&so.placeable&&this.collisionIndex.insertCollisionBox(so.box,De,I.get("text-ignore-placement"),C.bucketInstanceId,ss&&ss.placeable&&zc?zc:$c,Oe.ID),Xl&&this.collisionIndex.insertCollisionBox(as.box,He,I.get("icon-ignore-placement"),C.bucketInstanceId,Gl,Oe.ID),ao&&hi&&this.collisionIndex.insertCollisionCircles(ao.circles,De,I.get("text-ignore-placement"),C.bucketInstanceId,$c,Oe.ID),b&&this.storeCollisionData(C.bucketInstanceId,Jn,ln,so,as,ao),zt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(C.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[zt.crossTileID]=new av((hi||yt)&&!so?.occluded,(Ei||ht)&&!as?.occluded,ri||C.justReloaded),m[zt.crossTileID]=!0};if(nt){if(c.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const zt=C.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let ln=zt.length-1;ln>=0;--ln){const Jn=zt[ln];en(C.symbolInstances.get(Jn),C.collisionArrays[Jn],Jn)}}else for(let zt=c.symbolInstanceStart;zt<c.symbolInstanceEnd;zt++)en(C.symbolInstances.get(zt),C.collisionArrays[zt],zt);C.justReloaded=!1}storeCollisionData(c,m,b,C,I,L){if(b.textBox||b.iconBox){let j,W;this.collisionBoxArrays.has(c)?j=this.collisionBoxArrays.get(c):(j=new Map,this.collisionBoxArrays.set(c,j)),j.has(m)?W=j.get(m):(W={text:null,icon:null},j.set(m,W)),b.textBox&&(W.text=C.box),b.iconBox&&(W.icon=I.box)}if(L){let j=this.collisionCircleArrays[c];j===void 0&&(j=this.collisionCircleArrays[c]=[]);for(let W=0;W<L.circles.length;W+=4)j.push(L.circles[W+0]-Nr),j.push(L.circles[W+1]-Nr),j.push(L.circles[W+2]),j.push(L.collisionDetected?1:0)}}markUsedJustification(c,m,b,C){let I;I=C===s.az.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[s.aR(m)];const L=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const j of L)j>=0&&(c.text.placedSymbolArray.get(j).crossTileID=I>=0&&j!==I?0:b.crossTileID)}markUsedOrientation(c,m,b){const C=m===s.az.horizontal||m===s.az.horizontalOnly?m:0,I=m===s.az.vertical?m:0,L=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const j of L)c.text.placedSymbolArray.get(j).placedOrientation=C;b.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=I)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const m=this.prevPlacement;let b=!1;this.prevZoomAdjustment=m?m.zoomAdjustment(this.transform.zoom):0;const C=m?m.symbolFadeChange(c):1,I=m?m.opacities:{},L=m?m.variableOffsets:{},j=m?m.placedOrientations:{};for(const W in this.placements){const K=this.placements[W],te=I[W];te?(this.opacities[W]=new ud(te,C,K.text,K.icon),b=b||K.text!==te.text.placed||K.icon!==te.icon.placed):(this.opacities[W]=new ud(null,C,K.text,K.icon,K.skipFade),b=b||K.text||K.icon)}for(const W in I){const K=I[W];if(!this.opacities[W]){const te=new ud(K,C,!1,!1);te.isHidden()||(this.opacities[W]=te,b=b||K.text.placed||K.icon.placed)}}for(const W in L)this.variableOffsets[W]||!this.opacities[W]||this.opacities[W].isHidden()||(this.variableOffsets[W]=L[W]);for(const W in j)this.placedOrientations[W]||!this.opacities[W]||this.opacities[W].isHidden()||(this.placedOrientations[W]=j[W]);if(m&&m.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");b?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=m?m.lastPlacementChangeTime:c)}updateLayerOpacities(c,m){const b={};for(const C of m){const I=C.getBucket(c);I&&C.latestFeatureIndex&&c.id===I.layerIds[0]&&this.updateBucketOpacities(I,C.tileID,b,C.collisionBoxArray)}}updateBucketOpacities(c,m,b,C){c.hasTextData()&&(c.text.opacityVertexArray.clear(),c.text.hasVisibleVertices=!1),c.hasIconData()&&(c.icon.opacityVertexArray.clear(),c.icon.hasVisibleVertices=!1),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const I=c.layers[0],L=I.layout,j=new ud(null,0,!1,!1,!0),W=L.get("text-allow-overlap"),K=L.get("icon-allow-overlap"),te=I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"),he=L.get("text-rotation-alignment")==="map",ue=L.get("text-pitch-alignment")==="map",ge=L.get("icon-text-fit")!=="none",Oe=new ud(null,0,W&&(K||!c.hasIconData()||L.get("icon-optional")),K&&(W||!c.hasTextData()||L.get("text-optional")),!0);!c.collisionArrays&&C&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(C);const Ie=(De,je,He)=>{for(let Fe=0;Fe<je/4;Fe++)De.opacityVertexArray.emplaceBack(He);De.hasVisibleVertices=De.hasVisibleVertices||He!==dd},Le=this.collisionBoxArrays.get(c.bucketInstanceId);for(let De=0;De<c.symbolInstances.length;De++){const je=c.symbolInstances.get(De),{numHorizontalGlyphVertices:He,numVerticalGlyphVertices:Fe,crossTileID:We}=je;let Ke=this.opacities[We];b[We]?Ke=j:Ke||(Ke=Oe,this.opacities[We]=Ke),b[We]=!0;const Ze=je.numIconVertices>0,nt=this.placedOrientations[je.crossTileID],yt=nt===s.az.vertical,ht=nt===s.az.horizontal||nt===s.az.horizontalOnly;if(He>0||Fe>0){const gt=dy(Ke.text);Ie(c.text,He,yt?dd:gt),Ie(c.text,Fe,ht?dd:gt);const Kt=Ke.text.isHidden();[je.rightJustifiedTextSymbolIndex,je.centerJustifiedTextSymbolIndex,je.leftJustifiedTextSymbolIndex].forEach((ln=>{ln>=0&&(c.text.placedSymbolArray.get(ln).hidden=Kt||yt?1:0)})),je.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(je.verticalPlacedTextSymbolIndex).hidden=Kt||ht?1:0);const en=this.variableOffsets[je.crossTileID];en&&this.markUsedJustification(c,en.anchor,je,nt);const zt=this.placedOrientations[je.crossTileID];zt&&(this.markUsedJustification(c,"left",je,zt),this.markUsedOrientation(c,zt,je))}if(Ze){const gt=dy(Ke.icon),Kt=!(ge&&je.verticalPlacedIconSymbolIndex&&yt);je.placedIconSymbolIndex>=0&&(Ie(c.icon,je.numIconVertices,Kt?gt:dd),c.icon.placedSymbolArray.get(je.placedIconSymbolIndex).hidden=Ke.icon.isHidden()),je.verticalPlacedIconSymbolIndex>=0&&(Ie(c.icon,je.numVerticalIconVertices,Kt?dd:gt),c.icon.placedSymbolArray.get(je.verticalPlacedIconSymbolIndex).hidden=Ke.icon.isHidden())}const pt=Le&&Le.has(De)?Le.get(De):{text:null,icon:null};if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const gt=c.collisionArrays[De];if(gt){let Kt=new s.P(0,0);if(gt.textBox||gt.verticalTextBox){let en=!0;if(te){const zt=this.variableOffsets[We];zt?(Kt=na(zt.anchor,zt.width,zt.height,zt.textOffset,zt.textBoxScale),he&&Kt._rotate(ue?-this.transform.bearingInRadians:this.transform.bearingInRadians)):en=!1}if(gt.textBox||gt.verticalTextBox){let zt;gt.textBox&&(zt=yt),gt.verticalTextBox&&(zt=ht),hy(c.textCollisionBox.collisionVertexArray,Ke.text.placed,!en||zt,pt.text,Kt.x,Kt.y)}}if(gt.iconBox||gt.verticalIconBox){const en=!!(!ht&&gt.verticalIconBox);let zt;gt.iconBox&&(zt=en),gt.verticalIconBox&&(zt=!en),hy(c.iconCollisionBox.collisionVertexArray,Ke.icon.placed,zt,pt.icon,ge?Kt.x:0,ge?Kt.y:0)}}}}if(c.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.text.opacityVertexArray.length!==c.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${c.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${c.text.layoutVertexArray.length}) / 4`);if(c.icon.opacityVertexArray.length!==c.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${c.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${c.icon.layoutVertexArray.length}) / 4`);c.bucketInstanceId in this.collisionCircleArrays&&(c.collisionCircleArray=this.collisionCircleArrays[c.bucketInstanceId],delete this.collisionCircleArrays[c.bucketInstanceId])}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,m){const b=this.zoomAtLastRecencyCheck===m?1-this.zoomAdjustment(m):1;return this.zoomAtLastRecencyCheck=m,this.commitTime+this.fadeDuration*b>c}setStale(){this.stale=!0}}function hy(P,c,m,b,C,I){b&&b.length!==0||(b=[0,0,0,0]);const L=b[0]-Nr,j=b[1]-Nr,W=b[2]-Nr,K=b[3]-Nr;P.emplaceBack(c?1:0,m?1:0,C||0,I||0,L,j),P.emplaceBack(c?1:0,m?1:0,C||0,I||0,W,j),P.emplaceBack(c?1:0,m?1:0,C||0,I||0,W,K),P.emplaceBack(c?1:0,m?1:0,C||0,I||0,L,K)}const _m=Math.pow(2,25),oh=Math.pow(2,24),Fb=Math.pow(2,17),zf=Math.pow(2,16),lu=Math.pow(2,9),jb=Math.pow(2,8),hd=Math.pow(2,1);function dy(P){if(P.opacity===0&&!P.placed)return 0;if(P.opacity===1&&P.placed)return 4294967295;const c=P.placed?1:0,m=Math.floor(127*P.opacity);return m*_m+c*oh+m*Fb+c*zf+m*lu+c*jb+m*hd+c}const dd=0;class sh{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&!c.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,m,b,C,I){const L=this._bucketParts;for(;this._currentTileIndex<c.length;)if(m.getBucketParts(L,C,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,I())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,L.sort(((j,W)=>j.sortKey-W.sortKey)));this._currentPartIndex<L.length;)if(m.placeLayerBucketPart(L[this._currentPartIndex],this._seenCrossTileIDs,b),this._currentPartIndex++,I())return!0;return!1}}class Nf{constructor(c,m,b,C,I,L,j,W){this.placement=new vm(c,m,L,j,W),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=I,this._done=!1}isDone(){return this._done}continuePlacement(c,m,b){const C=A(),I=()=>!this._forceFullPlacement&&A()-C>2;for(;this._currentPlacementIndex>=0;){const L=m[c[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(L.type==="symbol"&&(!L.minzoom||L.minzoom<=j)&&(!L.maxzoom||L.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new sh(L)),this._inProgressLayer.continuePlacement(b[L.source],this.placement,this._showCollisionBoxes,L,I))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const cr=512/s.a5/2;class jl{constructor(c,m,b){this.tileID=c,this.bucketInstanceId=b,this._symbolsByKey={};const C=new Map;for(let I=0;I<m.length;I++){const L=m.get(I),j=L.key,W=C.get(j);W?W.push(L):C.set(j,[L])}for(const[I,L]of C){const j={positions:L.map((W=>({x:Math.floor(W.anchorX*cr),y:Math.floor(W.anchorY*cr)}))),crossTileIDs:L.map((W=>W.crossTileID))};if(j.positions.length>128){const W=new s.aT(j.positions.length,16,Uint16Array);for(const{x:K,y:te}of j.positions)W.add(K,te);W.finish(),delete j.positions,j.index=W}this._symbolsByKey[I]=j}}getScaledCoordinates(c,m){const{x:b,y:C,z:I}=this.tileID.canonical,{x:L,y:j,z:W}=m.canonical,K=cr/Math.pow(2,W-I),te=(j*s.a5+c.anchorY)*K,he=C*s.a5*cr;return{x:Math.floor((L*s.a5+c.anchorX)*K-b*s.a5*cr),y:Math.floor(te-he)}}findMatches(c,m,b){const C=this.tileID.canonical.z<m.canonical.z?1:Math.pow(2,this.tileID.canonical.z-m.canonical.z);for(let I=0;I<c.length;I++){const L=c.get(I);if(L.crossTileID)continue;const j=this._symbolsByKey[L.key];if(!j)continue;const W=this.getScaledCoordinates(L,m);if(j.index){const K=j.index.range(W.x-C,W.y-C,W.x+C,W.y+C).sort();for(const te of K){const he=j.crossTileIDs[te];if(!b[he]){b[he]=!0,L.crossTileID=he;break}}}else if(j.positions)for(let K=0;K<j.positions.length;K++){const te=j.positions[K],he=j.crossTileIDs[K];if(Math.abs(te.x-W.x)<=C&&Math.abs(te.y-W.y)<=C&&!b[he]){b[he]=!0,L.crossTileID=he;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:c})=>c))}}class lv{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class bm{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const m=Math.round((c-this.lng)/360);if(m!==0)for(const b in this.indexes){const C=this.indexes[b],I={};for(const L in C){const j=C[L];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+m),I[j.tileID.key]=j}this.indexes[b]=I}this.lng=c}addBucket(c,m,b){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===m.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let I=0;I<m.symbolInstances.length;I++)m.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const C=this.usedCrossTileIDs[c.overscaledZ];for(const I in this.indexes){const L=this.indexes[I];if(Number(I)>c.overscaledZ)for(const j in L){const W=L[j];W.tileID.isChildOf(c)&&W.findMatches(m.symbolInstances,c,C)}else{const j=L[c.scaledTo(Number(I)).key];j&&j.findMatches(m.symbolInstances,c,C)}}for(let I=0;I<m.symbolInstances.length;I++){const L=m.symbolInstances.get(I);L.crossTileID||(L.crossTileID=b.generate(),C[L.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new jl(c,m.symbolInstances,m.bucketInstanceId),!0}removeBucketCrossTileIDs(c,m){for(const b of m.getCrossTileIDsLists())for(const C of b)delete this.usedCrossTileIDs[c][C]}removeStaleBuckets(c){let m=!1;for(const b in this.indexes){const C=this.indexes[b];for(const I in C)c[C[I].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,C[I]),delete C[I],m=!0)}return m}}class Ho{constructor(){this.layerIndexes={},this.crossTileIDs=new lv,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,m,b){let C=this.layerIndexes[c.id];C===void 0&&(C=this.layerIndexes[c.id]=new bm);let I=!1;const L={};C.handleWrapJump(b);for(const j of m){const W=j.getBucket(c);W&&c.id===W.layerIds[0]&&(W.bucketInstanceId||(W.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(j.tileID,W,this.crossTileIDs)&&(I=!0),L[W.bucketInstanceId]=!0)}return C.removeStaleBuckets(L)&&(I=!0),I}pruneUnusedLayers(c){const m={};c.forEach((b=>{m[b]=!0}));for(const b in this.layerIndexes)m[b]||delete this.layerIndexes[b]}}var Ao="void main() {fragColor=vec4(1.0);}";const Di={prelude:Fn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Fn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Fn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Fn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Fn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Fn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Fn(Ao,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Fn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Fn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Fn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Fn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Fn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Fn(Ao,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Fn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Fn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Fn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Fn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Fn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Fn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Fn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Fn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Fn(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Fn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Fn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Fn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Fn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Fn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Fn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Fn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Fn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Fn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Fn(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Fn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Fn(P,c){const m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=c.match(/in ([\w]+) ([\w]+)/g),C=P.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),L=I?I.concat(C):C,j={};return{fragmentSource:P=P.replace(m,((W,K,te,he,ue)=>(j[ue]=!0,K==="define"?`
#ifndef HAS_UNIFORM_u_${ue}
in ${te} ${he} ${ue};
#else
uniform ${te} ${he} u_${ue};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ue}
    ${te} ${he} ${ue} = u_${ue};
#endif
`))),vertexSource:c=c.replace(m,((W,K,te,he,ue)=>{const ge=he==="float"?"vec2":"vec4",Oe=ue.match(/color/)?"color":ge;return j[ue]?K==="define"?`
#ifndef HAS_UNIFORM_u_${ue}
uniform lowp float u_${ue}_t;
in ${te} ${ge} a_${ue};
out ${te} ${he} ${ue};
#else
uniform ${te} ${he} u_${ue};
#endif
`:Oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ue}
    ${ue} = a_${ue};
#else
    ${te} ${he} ${ue} = u_${ue};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ue}
    ${ue} = unpack_mix_${Oe}(a_${ue}, u_${ue}_t);
#else
    ${te} ${he} ${ue} = u_${ue};
#endif
`:K==="define"?`
#ifndef HAS_UNIFORM_u_${ue}
uniform lowp float u_${ue}_t;
in ${te} ${ge} a_${ue};
#else
uniform ${te} ${he} u_${ue};
#endif
`:Oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ue}
    ${te} ${he} ${ue} = a_${ue};
#else
    ${te} ${he} ${ue} = u_${ue};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ue}
    ${te} ${he} ${ue} = unpack_mix_${Oe}(a_${ue}, u_${ue}_t);
#else
    ${te} ${he} ${ue} = u_${ue};
#endif
`})),staticAttributes:b,staticUniforms:L}}class ci{constructor(c,m,b){this.vertexBuffer=c,this.indexBuffer=m,this.segments=b}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var al=s.aU([{name:"a_pos",type:"Int16",components:2}]);const ro="#define PROJECTION_MERCATOR",ra="mercator";class Go{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return ra}get shaderDefine(){return ro}get shaderPreludeCode(){return Di.projectionMercator}get vertexShaderPreludeCode(){return Di.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(c){}getMeshFromTileID(c,m,b,C,I){if(this._cachedMesh)return this._cachedMesh;const L=new s.aW;L.emplaceBack(0,0),L.emplaceBack(s.a5,0),L.emplaceBack(0,s.a5),L.emplaceBack(s.a5,s.a5);const j=c.createVertexBuffer(L,al.members),W=s.aX.simpleSegment(0,0,4,2),K=new s.aY;K.emplaceBack(1,0,2),K.emplaceBack(1,2,3);const te=c.createIndexBuffer(K);return this._cachedMesh=new ci(j,te,W),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(c){}}class Ia{constructor(c=0,m=0,b=0,C=0){if(isNaN(c)||c<0||isNaN(m)||m<0||isNaN(b)||b<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=m,this.left=b,this.right=C}interpolate(c,m,b){return m.top!=null&&c.top!=null&&(this.top=s.G.number(c.top,m.top,b)),m.bottom!=null&&c.bottom!=null&&(this.bottom=s.G.number(c.bottom,m.bottom,b)),m.left!=null&&c.left!=null&&(this.left=s.G.number(c.left,m.left,b)),m.right!=null&&c.right!=null&&(this.right=s.G.number(c.right,m.right,b)),this}getCenter(c,m){const b=s.an((this.left+c-this.right)/2,0,c),C=s.an((this.top+m-this.bottom)/2,0,m);return new s.P(b,C)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new Ia(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function vc(P,c){if(!P.renderWorldCopies||P.lngRange)return;const m=c.lng-P.center.lng;c.lng+=m>180?-360:m<-180?360:0}function Li(P){return Math.max(0,Math.floor(P))}class ah{constructor(c,m){var b;this.applyConstrain=(C,I)=>this._constrainOverride!==null?this._constrainOverride(C,I):this._callbacks.defaultConstrain(C,I),this._callbacks=c,this._tileSize=512,this._renderWorldCopies=m?.renderWorldCopies===void 0||!!m?.renderWorldCopies,this._minZoom=m?.minZoom||0,this._maxZoom=m?.maxZoom||22,this._minPitch=m?.minPitch==null?0:m?.minPitch,this._maxPitch=m?.maxPitch==null?60:m?.maxPitch,this._constrainOverride=(b=m?.constrainOverride)!==null&&b!==void 0?b:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Li(this._zoom),this._scale=s.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ia,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(c,m,b){this._constrainOverride=c.constrainOverride,this._latRange=c.latRange,this._lngRange=c.lngRange,this._width=c.width,this._height=c.height,this._center=c.center,this._elevation=c.elevation,this._minElevationForCurrentTile=c.minElevationForCurrentTile,this._zoom=c.zoom,this._tileZoom=Li(this._zoom),this._scale=s.aq(this._zoom),this._bearingInRadians=c.bearingInRadians,this._fovInRadians=c.fovInRadians,this._pitchInRadians=c.pitchInRadians,this._rollInRadians=c.rollInRadians,this._unmodified=c.unmodified,this._edgeInsets=new Ia(c.padding.top,c.padding.bottom,c.padding.left,c.padding.right),this._minZoom=c.minZoom,this._maxZoom=c.maxZoom,this._minPitch=c.minPitch,this._maxPitch=c.maxPitch,this._renderWorldCopies=c.renderWorldCopies,this._cameraToCenterDistance=c.cameraToCenterDistance,this._nearZ=c.nearZ,this._farZ=c.farZ,this._autoCalculateNearFarZ=!b&&c.autoCalculateNearFarZ,m&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(c){this._minElevationForCurrentTile=c}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(c){this._minZoom!==c&&(this._minZoom=c,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(c){this._minPitch!==c&&(this._minPitch=c,this.setPitch(Math.max(this.pitch,c)))}get maxPitch(){return this._maxPitch}setMaxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.setPitch(Math.min(this.pitch,c)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get constrainOverride(){return this._constrainOverride}setConstrainOverride(c){c===void 0&&(c=null),this._constrainOverride!==c&&(this._constrainOverride=c,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(c){const m=s.W(c,-180,180)*Math.PI/180;var b,C,I,L,j,W,K,te,he;this._bearingInRadians!==m&&(this._unmodified=!1,this._bearingInRadians=m,this._calcMatrices(),this._rotationMatrix=f(),b=this._rotationMatrix,I=-this._bearingInRadians,L=(C=this._rotationMatrix)[0],j=C[1],W=C[2],K=C[3],te=Math.sin(I),he=Math.cos(I),b[0]=L*he+W*te,b[1]=j*he+K*te,b[2]=L*-te+W*he,b[3]=j*-te+K*he)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(c){const m=s.an(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==m&&(this._unmodified=!1,this._pitchInRadians=m,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(c){const m=c/180*Math.PI;this._rollInRadians!==m&&(this._unmodified=!1,this._rollInRadians=m,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aZ(this._fovInRadians)}setFov(c){c=s.an(c,.1,150),this.fov!==c&&(this._unmodified=!1,this._fovInRadians=s.ap(c),this._calcMatrices())}get zoom(){return this._zoom}setZoom(c){const m=this.applyConstrain(this._center,c).zoom;this._zoom!==m&&(this._unmodified=!1,this._zoom=m,this._tileZoom=Math.max(0,Math.floor(m)),this._scale=s.aq(m),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(c){c!==this._elevation&&(this._elevation=c,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(c,m){this._autoCalculateNearFarZ=!1,this._nearZ=c,this._farZ=m,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,m,b){this._unmodified=!1,this._edgeInsets.interpolate(c,m,b),this.constrainInternal(),this._calcMatrices()}resize(c,m,b=!0){this._width=c,this._height=m,b&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new vn([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(c){c?(this._lngRange=[c.getWest(),c.getEast()],this._latRange=[c.getSouth(),c.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-s.ao,s.ao])}getCameraQueryGeometry(c,m){if(m.length===1)return[m[0],c];{const{minX:b,minY:C,maxX:I,maxY:L}=s.aa.fromPoints(m).extend(c);return[new s.P(b,C),new s.P(I,C),new s.P(I,L),new s.P(b,L),new s.P(b,C)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const c=this._unmodified,{center:m,zoom:b}=this.applyConstrain(this.center,this.zoom);this.setCenter(m),this.setZoom(b),this._unmodified=c,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let c=s.ar(new Float64Array(16));s.Q(c,c,[this._width/2,-this._height/2,1]),s.O(c,c,[1,-1,0]),this._clipSpaceToPixelsMatrix=c,c=s.ar(new Float64Array(16)),s.Q(c,c,[1,-1,1]),s.O(c,c,[-1,-1,0]),s.Q(c,c,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=c,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(c,m,b,C){const I=b!==void 0?b:this.bearing,L=C=C!==void 0?C:this.pitch,{distanceToCenter:j,clampedElevation:W}=this._distanceToCenterFromAltElevationPitch(m,this.elevation,L),{x:K,y:te}=Ur(L,I),he=s.a9.fromLngLat(c,m);let ue,ge,Oe=s.a_(1,he.y),Ie=0;do{if(Ie+=1,Ie>10)break;ge=j/Oe,ue=new s.a9(he.x+K*ge,he.y+te*ge),Oe=1/ue.meterInMercatorCoordinateUnits()}while(Math.abs(j-ge*Oe)>1e-12);return{center:ue.toLngLat(),elevation:W,zoom:s.at(this.height/2/Math.tan(this.fovInRadians/2)/ge/this.tileSize)}}recalculateZoomAndCenter(c){if(this.elevation-c==0)return;const m=1/this.worldSize,b=s.as(1,this.center.lat)*this.worldSize,C=s.a9.fromLngLat(this.center,this.elevation),I=C.x/m,L=C.y/m,j=C.z/m,W=this.pitch,K=this.bearing,{x:te,y:he,z:ue}=Ur(W,K),ge=this.cameraToCenterDistance,Oe=I+ge*-te,Ie=L+ge*-he,Le=j+ge*ue,{distanceToCenter:De,clampedElevation:je}=this._distanceToCenterFromAltElevationPitch(Le/b,c,W),He=De*b,Fe=new s.a9((Oe+te*He)*m,(Ie+he*He)*m,0).toLngLat(),We=s.as(1,Fe.lat),Ke=s.at(this.height/2/Math.tan(this.fovInRadians/2)/De/We/this.tileSize);this._elevation=je,this._center=Fe,this.setZoom(Ke)}_distanceToCenterFromAltElevationPitch(c,m,b){const C=-Math.cos(s.ap(b)),I=c-m;let L,j=m;return C*I>=0||Math.abs(C)<.1?(L=1e4,j=c+L*C):L=-I/C,{distanceToCenter:L,clampedElevation:j}}getCameraPoint(){const c=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(c*Math.sin(this.rollInRadians),c*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const c=s.as(1,this.center.lat)*this.worldSize;return ut(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/c).toLngLat()}getMercatorTileCoordinates(c){if(!c)return[0,0,1,1];const m=c.canonical.z>=0?1<<c.canonical.z:Math.pow(2,c.canonical.z);return[c.canonical.x/m,c.canonical.y/m,1/m/s.a5,1/m/s.a5]}}class Da{constructor(c,m){this.min=c,this.max=m,this.center=s.a$([],s.b0([],this.min,this.max),.5)}quadrant(c){const m=[c%2==0,c<2],b=s.b1(this.min),C=s.b1(this.max);for(let I=0;I<m.length;I++)b[I]=m[I]?this.min[I]:this.center[I],C[I]=m[I]?this.center[I]:this.max[I];return C[2]=this.max[2],new Da(b,C)}distanceX(c){return Math.max(Math.min(this.max[0],c[0]),this.min[0])-c[0]}distanceY(c){return Math.max(Math.min(this.max[1],c[1]),this.min[1])-c[1]}intersectsFrustum(c){let m=!0;for(let b=0;b<c.planes.length;b++){const C=this.intersectsPlane(c.planes[b]);if(C===0)return 0;C===1&&(m=!1)}return m?2:c.aabb.min[0]>this.max[0]||c.aabb.min[1]>this.max[1]||c.aabb.min[2]>this.max[2]||c.aabb.max[0]<this.min[0]||c.aabb.max[1]<this.min[1]||c.aabb.max[2]<this.min[2]?0:1}intersectsPlane(c){let m=c[3],b=c[3];for(let C=0;C<3;C++)c[C]>0?(m+=c[C]*this.min[C],b+=c[C]*this.max[C]):(b+=c[C]*this.min[C],m+=c[C]*this.max[C]);return m>=0?2:b<0?0:1}}class fd{distanceToTile2d(c,m,b,C){const I=C.distanceX([c,m]),L=C.distanceY([c,m]);return Math.hypot(I,L)}getWrap(c,m,b){return b}getTileBoundingVolume(c,m,b,C){var I,L;let j=0,W=0;if(C?.terrain){const te=new s.a2(c.z,m,c.z,c.x,c.y),he=C.terrain.getMinMaxElevation(te);j=(I=he.minElevation)!==null&&I!==void 0?I:Math.min(0,b),W=(L=he.maxElevation)!==null&&L!==void 0?L:Math.max(0,b)}const K=1<<c.z;return new Da([m+c.x/K,c.y/K,j],[m+(c.x+1)/K,(c.y+1)/K,W])}allowVariableZoom(c,m){const b=c.fov*(Math.abs(Math.cos(c.rollInRadians))*c.height+Math.abs(Math.sin(c.rollInRadians))*c.width)/c.height,C=s.an(78.5-b/2,0,60);return!!m.terrain||c.pitch>C}allowWorldCopies(){return!0}prepareNextFrame(){}}class ia{constructor(c,m,b){this.points=c,this.planes=m,this.aabb=b}static fromInvProjectionMatrix(c,m=1,b=0,C,I){const L=I?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],j=Math.pow(2,b),W=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((ue=>(function(ge,Oe,Ie,Le){const De=s.aH([],ge,Oe),je=1/De[3]/Ie*Le;return s.b6(De,De,[je,je,1/De[3],je])})(ue,c,m,j)));C&&(function(ue,ge,Oe,Ie){const Le=Ie?4:0,De=Ie?0:4;let je=0;const He=[],Fe=[];for(let Ze=0;Ze<4;Ze++){const nt=s.b2([],ue[Ze+De],ue[Ze+Le]),yt=s.b7(nt);s.a$(nt,nt,1/yt),He.push(yt),Fe.push(nt)}for(let Ze=0;Ze<4;Ze++){const nt=s.b8(ue[Ze+Le],Fe[Ze],Oe);je=nt!==null&&nt>=0?Math.max(je,nt):Math.max(je,He[Ze])}const We=(function(Ze,nt){const yt=s.b2([],Ze[nt[0]],Ze[nt[1]]),ht=s.b2([],Ze[nt[2]],Ze[nt[1]]),pt=[0,0,0,0];return s.b3(pt,s.b4([],yt,ht)),pt[3]=-s.b5(pt,Ze[nt[0]]),pt})(ue,ge),Ke=(function(Ze,nt){const yt=s.b9(Ze),ht=s.ba([],Ze,1/yt),pt=s.b2([],nt,s.a$([],ht,s.b5(nt,ht))),gt=s.b9(pt);if(gt>0){const Kt=Math.sqrt(1-ht[3]*ht[3]),en=s.a$([],ht,-ht[3]),zt=s.b0([],en,s.a$([],pt,Kt/gt));return s.bb(nt,zt)}return null})(Oe,We);if(Ke!==null){const Ze=Ke/s.b5(Fe[0],We);je=Math.min(je,Ze)}for(let Ze=0;Ze<4;Ze++){const nt=Math.min(je,He[Ze]);ue[Ze+De]=[ue[Ze+Le][0]+Fe[Ze][0]*nt,ue[Ze+Le][1]+Fe[Ze][1]*nt,ue[Ze+Le][2]+Fe[Ze][2]*nt,1]}})(W,L[0],C,I);const K=L.map((ue=>{const ge=s.b2([],W[ue[0]],W[ue[1]]),Oe=s.b2([],W[ue[2]],W[ue[1]]),Ie=s.b3([],s.b4([],ge,Oe)),Le=-s.b5(Ie,W[ue[1]]);return Ie.concat(Le)})),te=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],he=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ue of W)for(let ge=0;ge<3;ge++)te[ge]=Math.min(te[ge],ue[ge]),he[ge]=Math.max(he[ge],ue[ge]);return new ia(W,K,new Da(te,he))}}class Bo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(c){this._helper.setMinZoom(c)}setMaxZoom(c){this._helper.setMaxZoom(c)}setMinPitch(c){this._helper.setMinPitch(c)}setMaxPitch(c){this._helper.setMaxPitch(c)}setRenderWorldCopies(c){this._helper.setRenderWorldCopies(c)}setBearing(c){this._helper.setBearing(c)}setPitch(c){this._helper.setPitch(c)}setRoll(c){this._helper.setRoll(c)}setFov(c){this._helper.setFov(c)}setZoom(c){this._helper.setZoom(c)}setCenter(c){this._helper.setCenter(c)}setElevation(c){this._helper.setElevation(c)}setMinElevationForCurrentTile(c){this._helper.setMinElevationForCurrentTile(c)}setPadding(c){this._helper.setPadding(c)}interpolatePadding(c,m,b){return this._helper.interpolatePadding(c,m,b)}isPaddingEqual(c){return this._helper.isPaddingEqual(c)}resize(c,m,b=!0){this._helper.resize(c,m,b)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(c){this._helper.setMaxBounds(c)}setConstrainOverride(c){this._helper.setConstrainOverride(c)}overrideNearFarZ(c,m){this._helper.overrideNearFarZ(c,m)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(c){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),c)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(c,m){}constructor(c){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(m,b)=>{b=s.an(+b,this.minZoom,this.maxZoom);const C={center:new s.V(m.lng,m.lat),zoom:b};let I=this._helper._lngRange;if(!this._helper._renderWorldCopies&&I===null){const Fe=179.9999999999;I=[-Fe,Fe]}const L=this.tileSize*s.aq(C.zoom);let j=0,W=L,K=0,te=L,he=0,ue=0;const{x:ge,y:Oe}=this.size;if(this._helper._latRange){const Fe=this._helper._latRange;j=s.X(Fe[1])*L,W=s.X(Fe[0])*L,W-j<Oe&&(he=Oe/(W-j))}I&&(K=s.W(s.Y(I[0])*L,0,L),te=s.W(s.Y(I[1])*L,0,L),te<K&&(te+=L),te-K<ge&&(ue=ge/(te-K)));const{x:Ie,y:Le}=an(L,m);let De,je;const He=Math.max(ue||0,he||0);if(He){const Fe=new s.P(ue?(te+K)/2:Ie,he?(W+j)/2:Le);return C.center=$n(L,Fe).wrap(),C.zoom+=s.at(He),C}if(this._helper._latRange){const Fe=Oe/2;Le-Fe<j&&(je=j+Fe),Le+Fe>W&&(je=W-Fe)}if(I){const Fe=(K+te)/2;let We=Ie;this._helper._renderWorldCopies&&(We=s.W(Ie,Fe-L/2,Fe+L/2));const Ke=ge/2;We-Ke<K&&(De=K+Ke),We+Ke>te&&(De=te-Ke)}if(De!==void 0||je!==void 0){const Fe=new s.P(De??Ie,je??Le);C.center=$n(L,Fe).wrap()}return C},this.applyConstrain=(m,b)=>this._helper.applyConstrain(m,b),this._helper=new ah({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(m,b)=>this.defaultConstrain(m,b)},c),this._coveringTilesDetailsProvider=new fd}clone(){const c=new Bo;return c.apply(this),c}apply(c,m,b){this._helper.apply(c,m,b)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(c){const m=[new s.bc(0,c)];if(this._helper._renderWorldCopies){const b=this.screenPointToMercatorCoordinate(new s.P(0,0)),C=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),I=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),L=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),j=Math.floor(Math.min(b.x,C.x,I.x,L.x)),W=Math.floor(Math.max(b.x,C.x,I.x,L.x)),K=1;for(let te=j-K;te<=W+K;te++)te!==0&&m.push(new s.bc(te,c))}return m}getCameraFrustum(){return ia.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(c){const m=this.screenPointToLocation(this.centerPoint,c),b=c?c.getElevationForLngLatZoom(m,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(b)}setLocationAtPoint(c,m){const b=s.as(this.elevation,this.center.lat),C=this.screenPointToMercatorCoordinateAtZ(m,b),I=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,b),L=s.a9.fromLngLat(c),j=new s.a9(L.x-(C.x-I.x),L.y-(C.y-I.y));this.setCenter(j?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(c,m){return m?this.coordinatePoint(s.a9.fromLngLat(c),m.getElevationForLngLat(c,this),this._pixelMatrix3D):this.coordinatePoint(s.a9.fromLngLat(c))}screenPointToLocation(c,m){var b;return(b=this.screenPointToMercatorCoordinate(c,m))===null||b===void 0?void 0:b.toLngLat()}screenPointToMercatorCoordinate(c,m){if(m){const b=m.pointCoordinate(c);if(b!=null)return b}return this.screenPointToMercatorCoordinateAtZ(c)}screenPointToMercatorCoordinateAtZ(c,m){const b=m||0,C=[c.x,c.y,0,1],I=[c.x,c.y,1,1];s.aH(C,C,this._pixelMatrixInverse),s.aH(I,I,this._pixelMatrixInverse);const L=C[3],j=I[3],W=C[1]/L,K=I[1]/j,te=C[2]/L,he=I[2]/j,ue=te===he?0:(b-te)/(he-te);return new s.a9(s.G.number(C[0]/L,I[0]/j,ue)/this.worldSize,s.G.number(W,K,ue)/this.worldSize,b)}coordinatePoint(c,m=0,b=this._pixelMatrix){const C=[c.x*this.worldSize,c.y*this.worldSize,m,1];return s.aH(C,C,b),new s.P(C[0]/C[3],C[1]/C[3])}getBounds(){const c=Math.max(0,this._helper._height/2-Er(this));return new vn().extend(this.screenPointToLocation(new s.P(0,c))).extend(this.screenPointToLocation(new s.P(this._helper._width,c))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(c,m){return m?m.pointCoordinate(c)!=null:c.y>this.height/2-Er(this)}calculatePosMatrix(c,m=!1,b){var C;const I=(C=c.key)!==null&&C!==void 0?C:s.bd(c.wrap,c.canonical.z,c.canonical.z,c.canonical.x,c.canonical.y),L=m?this._alignedPosMatrixCache:this._posMatrixCache;if(L.has(I)){const K=L.get(I);return b?K.f32:K.f64}const j=Tr(c,this.worldSize);s.S(j,m?this._alignedProjMatrix:this._viewProjMatrix,j);const W={f64:j,f32:new Float32Array(j)};return L.set(I,W),b?W.f32:W.f64}calculateFogMatrix(c){const m=c.key,b=this._fogMatrixCacheF32;if(b.has(m))return b.get(m);const C=Tr(c,this.worldSize);return s.S(C,this._fogMatrix,C),b.set(m,new Float32Array(C)),b.get(m)}calculateCenterFromCameraLngLatAlt(c,m,b,C){return this._helper.calculateCenterFromCameraLngLatAlt(c,m,b,C)}_calculateNearFarZIfNeeded(c,m,b){if(!this._helper.autoCalculateNearFarZ)return;const C=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),I=c-C*this._helper._pixelPerMeter/Math.cos(m),L=C<0?I:c,j=Math.PI/2+this.pitchInRadians,W=s.ap(this.fov)*(Math.abs(Math.cos(s.ap(this.roll)))*this.height+Math.abs(Math.sin(s.ap(this.roll)))*this.width)/this.height*(.5+b.y/this.height),K=Math.sin(W)*L/Math.sin(s.an(Math.PI-j-W,.01,Math.PI-.01)),te=Er(this),he=Math.atan(te/this._helper.cameraToCenterDistance),ue=s.ap(.75),ge=he>ue?2*he*(.5+b.y/(2*te)):ue,Oe=Math.sin(ge)*L/Math.sin(s.an(Math.PI-j-ge,.01,Math.PI-.01)),Ie=Math.min(K,Oe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-m)*Ie+L),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const c=this.centerOffset,m=an(this.worldSize,this.center),b=m.x,C=m.y;this._helper._pixelPerMeter=s.as(1,this.center.lat)*this.worldSize;const I=s.ap(Math.min(this.pitch,$t)),L=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(I));let j;this._calculateNearFarZIfNeeded(L,I,c),j=new Float64Array(16),s.be(j,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.aB(this._invProjMatrix,j),j[8]=2*-c.x/this._helper._width,j[9]=2*c.y/this._helper._height,this._projectionMatrix=s.bf(j),s.Q(j,j,[1,-1,1]),s.O(j,j,[0,0,-this._helper.cameraToCenterDistance]),s.bg(j,j,-this.rollInRadians),s.bh(j,j,this.pitchInRadians),s.bg(j,j,-this.bearingInRadians),s.O(j,j,[-b,-C,0]),this._mercatorMatrix=s.Q([],j,[this.worldSize,this.worldSize,this.worldSize]),s.Q(j,j,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,j),s.O(j,j,[0,0,-this.elevation]),this._viewProjMatrix=j,this._invViewProjMatrix=s.aB([],j);const W=[0,0,-1,1];s.aH(W,W,this._invViewProjMatrix),this._cameraPosition=[W[0]/W[3],W[1]/W[3],W[2]/W[3]],this._fogMatrix=new Float64Array(16),s.be(this._fogMatrix,this.fovInRadians,this.width/this.height,L,this._helper._farZ),this._fogMatrix[8]=2*-c.x/this.width,this._fogMatrix[9]=2*c.y/this.height,s.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.O(this._fogMatrix,this._fogMatrix,[-b,-C,0]),s.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,j);const K=this._helper._width%2/2,te=this._helper._height%2/2,he=Math.cos(this.bearingInRadians),ue=Math.sin(-this.bearingInRadians),ge=b-Math.round(b)+he*K+ue*te,Oe=C-Math.round(C)+he*te+ue*K,Ie=new Float64Array(j);if(s.O(Ie,Ie,[ge>.5?ge-1:ge,Oe>.5?Oe-1:Oe,0]),this._alignedProjMatrix=Ie,j=s.aB(new Float64Array(16),this._pixelMatrix),!j)throw new Error("failed to invert matrix");this._pixelMatrixInverse=j,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const c=this.screenPointToMercatorCoordinate(new s.P(0,0)),m=[c.x*this.worldSize,c.y*this.worldSize,0,1];return s.aH(m,m,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const c=s.as(1,this.center.lat)*this.worldSize;return ut(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/c).toLngLat()}lngLatToCameraDepth(c,m){const b=s.a9.fromLngLat(c),C=[b.x*this.worldSize,b.y*this.worldSize,m,1];return s.aH(C,C,this._viewProjMatrix),C[2]/C[3]}getProjectionData(c){const{overscaledTileID:m,aligned:b,applyTerrainMatrix:C}=c,I=this._helper.getMercatorTileCoordinates(m),L=m?this.calculatePosMatrix(m,b,!0):null;let j;return j=m&&m.terrainRttPosMatrix32f&&C?m.terrainRttPosMatrix32f:L||s.bi(),{mainMatrix:j,tileMercatorCoords:I,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:j}}isLocationOccluded(c){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(c,m,b){return 1}transformLightDirection(c){return s.b1(c)}getRayDirectionFromPixel(c){throw new Error("Not implemented.")}projectTileCoordinates(c,m,b,C){const I=this.calculatePosMatrix(b);let L;C?(L=[c,m,C(c,m),1],s.aH(L,L,I)):(L=[c,m,0,1],sl(L,L,I));const j=L[3];return{point:new s.P(L[0]/j,L[1]/j),signedDistanceFromCamera:j,isOccluded:!1}}populateCache(c){for(const m of c)this.calculatePosMatrix(m)}getMatrixForModel(c,m){const b=s.a9.fromLngLat(c,m),C=b.meterInMercatorCoordinateUnits(),I=s.bj();return s.O(I,I,[b.x,b.y,b.z]),s.bg(I,I,Math.PI),s.bh(I,I,Math.PI/2),s.Q(I,I,[-C,C,C]),I}getProjectionDataForCustomLayer(c=!0){const m=new s.a2(0,0,0,0,0),b=this.getProjectionData({overscaledTileID:m,applyGlobeMatrix:c}),C=Tr(m,this.worldSize);s.S(C,this._viewProjMatrix,C),b.tileMercatorCoords=[0,0,1,1];const I=[s.a5,s.a5,this.worldSize/this._helper.pixelsPerMeter],L=s.bk();return s.Q(L,C,I),b.fallbackMatrix=L,b.mainMatrix=L,b}getFastPathSimpleProjectionMatrix(c){return this.calculatePosMatrix(c)}}function oa(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function xm(P){if(P.useSlerp)if(P.k<1){const c=s.bl(P.startEulerAngles.roll,P.startEulerAngles.pitch,P.startEulerAngles.bearing),m=s.bl(P.endEulerAngles.roll,P.endEulerAngles.pitch,P.endEulerAngles.bearing),b=new Float64Array(4);s.bm(b,c,m,P.k);const C=s.bn(b);P.tr.setRoll(C.roll),P.tr.setPitch(C.pitch),P.tr.setBearing(C.bearing)}else P.tr.setRoll(P.endEulerAngles.roll),P.tr.setPitch(P.endEulerAngles.pitch),P.tr.setBearing(P.endEulerAngles.bearing);else P.tr.setRoll(s.G.number(P.startEulerAngles.roll,P.endEulerAngles.roll,P.k)),P.tr.setPitch(s.G.number(P.startEulerAngles.pitch,P.endEulerAngles.pitch,P.k)),P.tr.setBearing(s.G.number(P.startEulerAngles.bearing,P.endEulerAngles.bearing,P.k))}function pd(P,c,m,b,C){const I=C.padding,L=an(C.worldSize,m.getNorthWest()),j=an(C.worldSize,m.getNorthEast()),W=an(C.worldSize,m.getSouthEast()),K=an(C.worldSize,m.getSouthWest()),te=s.ap(-b),he=L.rotate(te),ue=j.rotate(te),ge=W.rotate(te),Oe=K.rotate(te),Ie=new s.P(Math.max(he.x,ue.x,Oe.x,ge.x),Math.max(he.y,ue.y,Oe.y,ge.y)),Le=new s.P(Math.min(he.x,ue.x,Oe.x,ge.x),Math.min(he.y,ue.y,Oe.y,ge.y)),De=Ie.sub(Le),je=(C.width-(I.left+I.right+c.left+c.right))/De.x,He=(C.height-(I.top+I.bottom+c.top+c.bottom))/De.y;if(He<0||je<0)return void oa();const Fe=Math.min(s.at(C.scale*Math.min(je,He)),P.maxZoom),We=s.P.convert(P.offset),Ke=new s.P((c.left-c.right)/2,(c.top-c.bottom)/2).rotate(s.ap(b)),Ze=We.add(Ke).mult(C.scale/s.aq(Fe));return{center:$n(C.worldSize,L.add(W).div(2).sub(Ze)),zoom:Fe,bearing:b}}class md{get useGlobeControls(){return!1}handlePanInertia(c,m){const b=c.mag(),C=Math.abs(Er(m));return{easingOffset:c.mult(Math.min(.75*C/b,1)),easingCenter:m.center}}handleMapControlsRollPitchBearingZoom(c,m){c.bearingDelta&&m.setBearing(m.bearing+c.bearingDelta),c.pitchDelta&&m.setPitch(m.pitch+c.pitchDelta),c.rollDelta&&m.setRoll(m.roll+c.rollDelta),c.zoomDelta&&m.setZoom(m.zoom+c.zoomDelta)}handleMapControlsPan(c,m,b){c.around.distSqr(m.centerPoint)<.01||m.setLocationAtPoint(b,c.around)}cameraForBoxAndBearing(c,m,b,C,I){return pd(c,m,b,C,I)}handleJumpToCenterZoom(c,m){c.zoom!==(m.zoom!==void 0?+m.zoom:c.zoom)&&c.setZoom(+m.zoom),m.center!==void 0&&c.setCenter(s.V.convert(m.center))}handleEaseTo(c,m){const b=c.zoom,C=c.padding,I={roll:c.roll,pitch:c.pitch,bearing:c.bearing},L={roll:m.roll===void 0?c.roll:m.roll,pitch:m.pitch===void 0?c.pitch:m.pitch,bearing:m.bearing===void 0?c.bearing:m.bearing},j=m.zoom!==void 0,W=!c.isPaddingEqual(m.padding);let K=!1;const te=j?+m.zoom:c.zoom;let he=c.centerPoint.add(m.offsetAsPoint);const ue=c.screenPointToLocation(he),{center:ge,zoom:Oe}=c.applyConstrain(s.V.convert(m.center||ue),te??b);vc(c,ge);const Ie=an(c.worldSize,ue),Le=an(c.worldSize,ge).sub(Ie),De=s.aq(Oe-b);return K=Oe!==b,{easeFunc:je=>{if(K&&c.setZoom(s.G.number(b,Oe,je)),s.bo(I,L)||xm({startEulerAngles:I,endEulerAngles:L,tr:c,k:je,useSlerp:I.roll!=L.roll}),W&&(c.interpolatePadding(C,m.padding,je),he=c.centerPoint.add(m.offsetAsPoint)),m.around)c.setLocationAtPoint(m.around,m.aroundPoint);else{const He=s.aq(c.zoom-b),Fe=Oe>b?Math.min(2,De):Math.max(.5,De),We=Math.pow(Fe,1-je),Ke=$n(c.worldSize,Ie.add(Le.mult(je*We)).mult(He));c.setLocationAtPoint(c.renderWorldCopies?Ke.wrap():Ke,he)}},isZooming:K,elevationCenter:ge}}handleFlyTo(c,m){const b=m.zoom!==void 0,C=c.zoom,I=c.applyConstrain(s.V.convert(m.center||m.locationAtOffset),b?+m.zoom:C),L=I.center,j=I.zoom;vc(c,L);const W=an(c.worldSize,m.locationAtOffset),K=an(c.worldSize,L).sub(W),te=K.mag(),he=s.aq(j-C);let ue;if(m.minZoom!==void 0){const ge=Math.min(+m.minZoom,C,j),Oe=c.applyConstrain(L,ge).zoom;ue=s.aq(Oe-C)}return{easeFunc:(ge,Oe,Ie,Le)=>{c.setZoom(ge===1?j:C+s.at(Oe));const De=ge===1?L:$n(c.worldSize,W.add(K.mult(Ie)).mult(Oe));c.setLocationAtPoint(c.renderWorldCopies?De.wrap():De,Le)},scaleOfZoom:he,targetCenter:L,scaleOfMinZoom:ue,pixelPathLength:te}}}class ni{constructor(c,m,b){this.blendFunction=c,this.blendColor=m,this.mask=b}}ni.Replace=[1,0],ni.disabled=new ni(ni.Replace,s.bp.transparent,[!1,!1,!1,!1]),ni.unblended=new ni(ni.Replace,s.bp.transparent,[!0,!0,!0,!0]),ni.alphaBlended=new ni([1,771],s.bp.transparent,[!0,!0,!0,!0]);const lh=2305;class vr{constructor(c,m,b){this.enable=c,this.mode=m,this.frontFace=b}}vr.disabled=new vr(!1,1029,lh),vr.backCCW=new vr(!0,1029,lh),vr.frontCCW=new vr(!0,1028,lh);class or{constructor(c,m,b){this.func=c,this.mask=m,this.range=b}}or.ReadOnly=!1,or.ReadWrite=!0,or.disabled=new or(519,or.ReadOnly,[0,1]);const gd=7680;class Rr{constructor(c,m,b,C,I,L){this.test=c,this.ref=m,this.mask=b,this.fail=C,this.depthFail=I,this.pass=L}}Rr.disabled=new Rr({func:519,mask:0},0,0,gd,gd,gd);const wm=new WeakMap;function ll(P){var c;if(wm.has(P))return wm.get(P);{const m=(c=P.getParameter(P.VERSION))===null||c===void 0?void 0:c.startsWith("WebGL 2.0");return wm.set(P,m),m}}class ch{get awaitingQuery(){return!!this._readbackQueue}constructor(c){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=c;const m=c.context,b=m.gl;this._texFormat=b.RGBA,this._texType=b.UNSIGNED_BYTE;const C=new s.aW;C.emplaceBack(-1,-1),C.emplaceBack(2,-1),C.emplaceBack(-1,2);const I=new s.aY;I.emplaceBack(0,1,2),this._fullscreenTriangle=new ci(m.createVertexBuffer(C,al.members),m.createIndexBuffer(I),s.aX.simpleSegment(0,0,C.length,I.length)),this._resultBuffer=new Uint8Array(4),m.activeTexture.set(b.TEXTURE1);const L=b.createTexture();b.bindTexture(b.TEXTURE_2D,L),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texImage2D(b.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=m.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(L),ll(b)&&(this._pbo=b.createBuffer(),b.bindBuffer(b.PIXEL_PACK_BUFFER,this._pbo),b.bufferData(b.PIXEL_PACK_BUFFER,4,b.STREAM_READ),b.bindBuffer(b.PIXEL_PACK_BUFFER,null))}destroy(){const c=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),c.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(c,m){const b=this._updateCount;return this._readbackQueue?b>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():b>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(c,m),this._updateCount++,this._measuredError}_bindFramebuffer(){const c=this._cachedRenderContext.context,m=c.gl;c.activeTexture.set(m.TEXTURE1),m.bindTexture(m.TEXTURE_2D,this._fbo.colorAttachment.get()),c.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(c,m){const b=this._cachedRenderContext.context,C=b.gl;if(this._bindFramebuffer(),b.viewport.set([0,0,this._texWidth,this._texHeight]),b.clear({color:s.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(b,C.TRIANGLES,or.disabled,Rr.disabled,ni.unblended,vr.disabled,((I,L)=>({u_input:I,u_output_expected:L}))(c,m),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ll(C)){C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.readBuffer(C.COLOR_ATTACHMENT0),C.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),C.bindBuffer(C.PIXEL_PACK_BUFFER,null);const I=C.fenceSync(C.SYNC_GPU_COMMANDS_COMPLETE,0);C.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:I}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const c=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ll(c)){const m=c.clientWaitSync(this._readbackQueue.sync,0,0);if(m===c.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(m===c.TIMEOUT_EXPIRED)return;c.bindBuffer(c.PIXEL_PACK_BUFFER,this._pbo),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),c.bindBuffer(c.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),c.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ch._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(c){let m=0;return m+=c[0]/256,m+=c[1]/65536,m+=c[2]/16777216,c[3]<127&&(m=-m),m/128}}const uh=s.a5/128;function Vb(P,c){const m=P.granularity!==void 0?Math.max(P.granularity,1):1,b=m+(P.generateBorders?2:0),C=m+(P.extendToNorthPole||P.generateBorders?1:0)+(P.extendToSouthPole||P.generateBorders?1:0),I=b+1,L=C+1,j=P.generateBorders?-1:0,W=P.generateBorders||P.extendToNorthPole?-1:0,K=m+(P.generateBorders?1:0),te=m+(P.generateBorders||P.extendToSouthPole?1:0),he=I*L,ue=b*C*6,ge=I*L>65536;if(ge&&c==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Oe=ge||c==="32bit",Ie=new Int16Array(2*he);let Le=0;for(let He=W;He<=te;He++)for(let Fe=j;Fe<=K;Fe++){let We=Fe/m*s.a5;Fe===-1&&(We=-uh),Fe===m+1&&(We=s.a5+uh);let Ke=He/m*s.a5;He===-1&&(Ke=P.extendToNorthPole?s.br:-uh),He===m+1&&(Ke=P.extendToSouthPole?s.bs:s.a5+uh),Ie[Le++]=We,Ie[Le++]=Ke}const De=Oe?new Uint32Array(ue):new Uint16Array(ue);let je=0;for(let He=0;He<C;He++)for(let Fe=0;Fe<b;Fe++){const We=Fe+1+He*I,Ke=Fe+(He+1)*I,Ze=Fe+1+(He+1)*I;De[je++]=Fe+He*I,De[je++]=Ke,De[je++]=We,De[je++]=We,De[je++]=Ke,De[je++]=Ze}return{vertices:Ie.buffer.slice(0),indices:De.buffer.slice(0),uses32bitIndices:Oe}}const Om=new s.aV({fill:new s.bt(128,2),line:new s.bt(512,0),tile:new s.bt(128,32),stencil:new s.bt(128,1),circle:3});class cv{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Di.projectionGlobe}get vertexShaderPreludeCode(){return Di.projectionMercator.vertexSource}get subdivisionGranularity(){return Om}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(c){this._errorMeasurement||(this._errorMeasurement=new ch(c));const m=s.X(this._errorQueryLatitudeDegrees),b=2*Math.atan(Math.exp(Math.PI-m*Math.PI*2))-.5*Math.PI,C=this._errorMeasurement.updateErrorLoop(m,b),I=A();C!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=C,this._errorMeasurementLastChangeTime=I);const L=Math.min(Math.max((I-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bv(L))}_getMeshKey(c){return`${c.granularity.toString(36)}_${c.generateBorders?"b":""}${c.extendToNorthPole?"n":""}${c.extendToSouthPole?"s":""}`}getMeshFromTileID(c,m,b,C,I){const L=(I==="stencil"?Om.stencil:Om.tile).getGranularityForZoomLevel(m.z);return this._getMesh(c,{granularity:L,generateBorders:b,extendToNorthPole:m.y===0&&C,extendToSouthPole:m.y===(1<<m.z)-1&&C})}_getMesh(c,m){const b=this._getMeshKey(m);if(b in this._tileMeshCache)return this._tileMeshCache[b];const C=(function(I,L){const j=Vb(L,"16bit"),W=s.aW.deserialize({arrayBuffer:j.vertices,length:j.vertices.byteLength/2/2}),K=s.aY.deserialize({arrayBuffer:j.indices,length:j.indices.byteLength/2/3});return new ci(I.createVertexBuffer(W,al.members),I.createIndexBuffer(K),s.aX.simpleSegment(0,0,W.length,K.length))})(c,m);return this._tileMeshCache[b]=C,C}recalculate(c){}hasTransition(){const c=A();let m=!1;return m=m||(c-this._errorMeasurementLastChangeTime)/1e3<.7,m=m||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,m}setErrorQueryLatitudeDegrees(c){this._errorQueryLatitudeDegrees=c}}const qO=new s.t({type:new s.D(s.u.projection.type)});class uv extends s.E{constructor(c){super(),this._transitionable=new s.x(qO,void 0),this.setProjection(c),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.H(0)),this._mercatorProjection=new Go,this._verticalPerspectiveProjection=new cv}get transitionState(){const c=this.properties.get("type");if(typeof c=="string"&&c==="mercator")return 0;if(typeof c=="string"&&c==="vertical-perspective")return 1;if(c instanceof s.bw){if(c.from==="vertical-perspective"&&c.to==="mercator")return 1-c.transition;if(c.from==="mercator"&&c.to==="vertical-perspective")return c.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(c){this._mercatorProjection.updateGPUdependent(c),this._verticalPerspectiveProjection.updateGPUdependent(c)}getMeshFromTileID(c,m,b,C,I){return this.currentProjection.getMeshFromTileID(c,m,b,C,I)}setProjection(c){this._transitionable.setValue("type",c?.type||"mercator")}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}setErrorQueryLatitudeDegrees(c){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(c),this._mercatorProjection.setErrorQueryLatitudeDegrees(c)}}function sa(P){const c=yd(P.worldSize,P.center.lat);return 2*Math.PI*c}function _c(P,c,m,b,C){const I=1/(1<<C),L=c/s.a5*I+b*I,j=s.by((P/s.a5*I+m*I)*Math.PI*2+Math.PI,2*Math.PI),W=2*Math.atan(Math.exp(Math.PI-L*Math.PI*2))-.5*Math.PI,K=Math.cos(W),te=new Float64Array(3);return te[0]=Math.sin(j)*K,te[1]=Math.sin(W),te[2]=Math.cos(j)*K,te}function $i(P){return(function(c,m){const b=Math.cos(m),C=new Float64Array(3);return C[0]=Math.sin(c)*b,C[1]=Math.sin(m),C[2]=Math.cos(c)*b,C})(P.lng*Math.PI/180,P.lat*Math.PI/180)}function yd(P,c){return P/(2*Math.PI)/Math.cos(c*Math.PI/180)}function Sm(P){const c=Math.asin(P[1])/Math.PI*180,m=Math.sqrt(P[0]*P[0]+P[2]*P[2]);if(m>1e-6){const b=P[0]/m,C=Math.acos(P[2]/m),I=(b>0?C:-C)/Math.PI*180;return new s.V(s.W(I,-180,180),c)}return new s.V(0,c)}function Cm(P){return Math.cos(P*Math.PI/180)}function io(P,c){const m=Cm(P),b=Cm(c);return s.at(b/m)}function Qb(P,c){const m=P.rotate(c.bearingInRadians),b=c.zoom+io(c.center.lat,0),C=s.bu(1/Cm(c.center.lat),1/Cm(Math.min(Math.abs(c.center.lat),60)),s.bx(b,7,3,0,1)),I=360/sa({worldSize:c.worldSize,center:{lat:c.center.lat}});return new s.V(c.center.lng-m.x*I*C,s.an(c.center.lat+m.y*I,-s.ao,s.ao))}function fy(P){const c=.5*P,m=Math.sin(c),b=Math.cos(c);return Math.log(m+b)-Math.log(b-m)}function Ub(P,c,m,b){const C=P.lat+m*b;if(Math.abs(m)>1){const I=(Math.sign(P.lat+m)!==Math.sign(P.lat)?-Math.abs(P.lat):Math.abs(P.lat))*Math.PI/180,L=Math.abs(P.lat+m)*Math.PI/180,j=fy(I+b*(L-I)),W=fy(I),K=fy(L);return new s.V(P.lng+c*((j-W)/(K-W)),C)}return new s.V(P.lng+c*b,C)}class WO{constructor(c){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=c}swapBuffers(){if(!this._hadAnyChanges)return;const c=this._cachePrevious;this._cachePrevious=this._cache,this._cache=c,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(c,m,b,C){const I=`${c.z}_${c.x}_${c.y}_${C?.terrain?"t":""}`,L=this._cache.get(I);if(L)return L;const j=this._cachePrevious.get(I);if(j)return this._cache.set(I,j),j;const W=this._boundingVolumeFactory(c,m,b,C);return this._cache.set(I,W),this._hadAnyChanges=!0,W}}class Bf{constructor(c,m,b,C){this.min=b,this.max=C,this.points=c,this.planes=m}static fromAabb(c,m){const b=[];for(let C=0;C<8;C++)b.push([1&~C?c[0]:m[0],(C>>1&1)==1?m[1]:c[1],(C>>2&1)==1?m[2]:c[2]]);return new Bf(b,[[-1,0,0,m[0]],[1,0,0,-c[0]],[0,-1,0,m[1]],[0,1,0,-c[1]],[0,0,-1,m[2]],[0,0,1,-c[2]]],c,m)}static fromCenterSizeAngles(c,m,b){const C=s.bB([],b[0],b[1],b[2]),I=s.bC([],[m[0],0,0],C),L=s.bC([],[0,m[1],0],C),j=s.bC([],[0,0,m[2]],C),W=[...c],K=[...c];for(let he=0;he<8;he++)for(let ue=0;ue<3;ue++){const ge=c[ue]+I[ue]*(1&~he?-1:1)+L[ue]*((he>>1&1)==1?1:-1)+j[ue]*((he>>2&1)==1?1:-1);W[ue]=Math.min(W[ue],ge),K[ue]=Math.max(K[ue],ge)}const te=[];for(let he=0;he<8;he++){const ue=[...c];s.b0(ue,ue,s.a$([],I,1&~he?-1:1)),s.b0(ue,ue,s.a$([],L,(he>>1&1)==1?1:-1)),s.b0(ue,ue,s.a$([],j,(he>>2&1)==1?1:-1)),te.push(ue)}return new Bf(te,[[...I,-s.b5(I,te[0])],[...L,-s.b5(L,te[0])],[...j,-s.b5(j,te[0])],[-I[0],-I[1],-I[2],-s.b5(I,te[7])],[-L[0],-L[1],-L[2],-s.b5(L,te[7])],[-j[0],-j[1],-j[2],-s.b5(j,te[7])]],W,K)}intersectsFrustum(c){let m=!0;const b=this.points.length,C=this.planes.length,I=c.planes.length,L=c.points.length;for(let j=0;j<I;j++){const W=c.planes[j];let K=0;for(let te=0;te<b;te++){const he=this.points[te];W[0]*he[0]+W[1]*he[1]+W[2]*he[2]+W[3]>=0&&K++}if(K===0)return 0;K<b&&(m=!1)}if(m)return 2;for(let j=0;j<C;j++){const W=this.planes[j];let K=0;for(let te=0;te<L;te++){const he=c.points[te];W[0]*he[0]+W[1]*he[1]+W[2]*he[2]+W[3]>=0&&K++}if(K===0)return 0}return 1}intersectsPlane(c){const m=this.points.length;let b=0;for(let C=0;C<m;C++){const I=this.points[C];c[0]*I[0]+c[1]*I[1]+c[2]*I[2]+c[3]>=0&&b++}return b===m?2:b===0?0:1}}function py(P,c,m){const b=P-c;return b<0?-b:Math.max(0,b-m)}function Ff(P,c,m,b,C){const I=P-m;let L;return L=I<0?Math.min(-I,1+I-C):I>1?Math.min(Math.max(I-C,0),1-I):0,Math.max(L,py(c,b,C))}class hv{constructor(){this._boundingVolumeCache=new WO(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(c,m,b,C){const I=1<<b.z,L=1/I,j=b.x/I,W=b.y/I;let K=2;return K=Math.min(K,Ff(c,m,j,W,L)),K=Math.min(K,Ff(c,m,j+.5,-W-L,L)),K=Math.min(K,Ff(c,m,j+.5,2-W-L,L)),K}getWrap(c,m,b){const C=1<<m.z,I=1/C,L=m.x/C,j=py(c.x,L,I),W=py(c.x,L-1,I),K=py(c.x,L+1,I),te=Math.min(j,W,K);return te===K?1:te===W?-1:0}allowVariableZoom(c,m){return ti(c,m)>4}allowWorldCopies(){return!1}getTileBoundingVolume(c,m,b,C){return this._boundingVolumeCache.getTileBoundingVolume(c,m,b,C)}_computeTileBoundingVolume(c,m,b,C){var I,L;let j=0,W=0;if(C?.terrain){const K=new s.a2(c.z,m,c.z,c.x,c.y),te=C.terrain.getMinMaxElevation(K);j=(I=te.minElevation)!==null&&I!==void 0?I:Math.min(0,b),W=(L=te.maxElevation)!==null&&L!==void 0?L:Math.max(0,b)}if(j/=s.bE,W/=s.bE,j+=1,W+=1,c.z<=0)return Bf.fromAabb([-W,-W,-W],[W,W,W]);if(c.z===1)return Bf.fromAabb([c.x===0?-W:0,c.y===0?0:-W,-W],[c.x===0?0:W,c.y===0?W:0,W]);{const K=[_c(0,0,c.x,c.y,c.z),_c(s.a5,0,c.x,c.y,c.z),_c(s.a5,s.a5,c.x,c.y,c.z),_c(0,s.a5,c.x,c.y,c.z)],te=[];for(const pt of K)te.push(s.a$([],pt,W));if(W!==j)for(const pt of K)te.push(s.a$([],pt,j));c.y===0&&te.push([0,1,0]),c.y===(1<<c.z)-1&&te.push([0,-1,0]);const he=[1,1,1],ue=[-1,-1,-1];for(const pt of te)for(let gt=0;gt<3;gt++)he[gt]=Math.min(he[gt],pt[gt]),ue[gt]=Math.max(ue[gt],pt[gt]);const ge=_c(s.a5/2,s.a5/2,c.x,c.y,c.z),Oe=s.b4([],[0,1,0],ge);s.b3(Oe,Oe);const Ie=s.b4([],ge,Oe);s.b3(Ie,Ie);const Le=s.b4([],K[2],K[1]);s.b3(Le,Le);const De=s.b4([],K[0],K[3]);s.b3(De,De),te.push(s.a$([],ge,W)),c.y>=(1<<c.z)/2&&te.push(s.a$([],_c(s.a5/2,0,c.x,c.y,c.z),W)),c.y<(1<<c.z)/2&&te.push(s.a$([],_c(s.a5/2,s.a5,c.x,c.y,c.z),W));const je=Tm(ge,te),He=Tm(Ie,te),Fe=[-ge[0],-ge[1],-ge[2],je.max],We=[ge[0],ge[1],ge[2],-je.min],Ke=[-Ie[0],-Ie[1],-Ie[2],He.max],Ze=[Ie[0],Ie[1],Ie[2],-He.min],nt=[...Le,0],yt=[...De,0],ht=[];return c.y===0?ht.push(s.bD(yt,nt,Fe),s.bD(yt,nt,We)):ht.push(s.bD(Ke,nt,Fe),s.bD(Ke,nt,We),s.bD(Ke,yt,Fe),s.bD(Ke,yt,We)),c.y===(1<<c.z)-1?ht.push(s.bD(yt,nt,Fe),s.bD(yt,nt,We)):ht.push(s.bD(Ze,nt,Fe),s.bD(Ze,nt,We),s.bD(Ze,yt,Fe),s.bD(Ze,yt,We)),new Bf(ht,[Fe,We,Ke,Ze,nt,yt],he,ue)}}}function Tm(P,c){let m=1/0,b=-1/0;for(const C of c){const I=s.b5(P,C);m=Math.min(m,I),b=Math.max(b,I)}return{min:m,max:b}}class jf{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(c){this._helper.setMinZoom(c)}setMaxZoom(c){this._helper.setMaxZoom(c)}setMinPitch(c){this._helper.setMinPitch(c)}setMaxPitch(c){this._helper.setMaxPitch(c)}setRenderWorldCopies(c){this._helper.setRenderWorldCopies(c)}setBearing(c){this._helper.setBearing(c)}setPitch(c){this._helper.setPitch(c)}setRoll(c){this._helper.setRoll(c)}setFov(c){this._helper.setFov(c)}setZoom(c){this._helper.setZoom(c)}setCenter(c){this._helper.setCenter(c)}setElevation(c){this._helper.setElevation(c)}setMinElevationForCurrentTile(c){this._helper.setMinElevationForCurrentTile(c)}setPadding(c){this._helper.setPadding(c)}interpolatePadding(c,m,b){return this._helper.interpolatePadding(c,m,b)}isPaddingEqual(c){return this._helper.isPaddingEqual(c)}resize(c,m){this._helper.resize(c,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(c){this._helper.setMaxBounds(c)}setConstrainOverride(c){this._helper.setConstrainOverride(c)}overrideNearFarZ(c,m){this._helper.overrideNearFarZ(c,m)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(c){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),c)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(c){}constructor(c){this._cachedClippingPlane=s.bF(),this._projectionMatrix=s.bj(),this._globeViewProjMatrix32f=s.bi(),this._globeViewProjMatrixNoCorrection=s.bj(),this._globeViewProjMatrixNoCorrectionInverted=s.bj(),this._globeProjMatrixInverted=s.bj(),this._cameraPosition=s.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(m,b)=>{const C=s.an(m.lat,-s.ao,s.ao),I=s.an(+b,this.minZoom+io(0,C),this.maxZoom);return{center:new s.V(m.lng,C),zoom:I}},this.applyConstrain=(m,b)=>this._helper.applyConstrain(m,b),this._helper=new ah({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(m,b)=>this.defaultConstrain(m,b)},c),this._coveringTilesDetailsProvider=new hv}clone(){const c=new jf;return c.apply(this),c}apply(c,m){this._globeLatitudeErrorCorrectionRadians=m||0,this._helper.apply(c)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const c=s.bz();return c[0]=this._cameraPosition[0],c[1]=this._cameraPosition[1],c[2]=this._cameraPosition[2],c}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(c){const{overscaledTileID:m,applyGlobeMatrix:b}=c,C=this._helper.getMercatorTileCoordinates(m);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:C,clippingPlane:this._cachedClippingPlane,projectionTransition:b?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(c){const m=this.pitchInRadians,b=this.cameraToCenterDistance/c,C=Math.sin(m)*b,I=Math.cos(m)*b+1,L=1/Math.sqrt(C*C+I*I)*1;let j=-C,W=I;const K=Math.sqrt(j*j+W*W);j/=K,W/=K;const te=[0,j,W];s.bG(te,te,[0,0,0],-this.bearingInRadians),s.bH(te,te,[0,0,0],-1*this.center.lat*Math.PI/180),s.bI(te,te,[0,0,0],this.center.lng*Math.PI/180);const he=1/s.b7(te);return s.a$(te,te,he),[...te,-L*he]}isLocationOccluded(c){return!this.isSurfacePointVisible($i(c))}transformLightDirection(c){const m=this._helper._center.lng*Math.PI/180,b=this._helper._center.lat*Math.PI/180,C=Math.cos(b),I=[Math.sin(m)*C,Math.sin(b),Math.cos(m)*C],L=[I[2],0,-I[0]],j=[0,0,0];s.b4(j,L,I),s.b3(L,L),s.b3(j,j);const W=[0,0,0];return s.b3(W,[L[0]*c[0]+j[0]*c[1]+I[0]*c[2],L[1]*c[0]+j[1]*c[1]+I[1]*c[2],L[2]*c[0]+j[2]*c[1]+I[2]*c[2]]),W}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(c,m,b){const C=(function(j,W,K){const te=1/(1<<K.z);return new s.a9(j/s.a5*te+K.x*te,W/s.a5*te+K.y*te)})(c,m,b.canonical),I=(L=C.y,[s.by(C.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-L*Math.PI*2))-.5*Math.PI]);var L;return this.getCircleRadiusCorrection()/Math.cos(I[1])}projectTileCoordinates(c,m,b,C){const I=b.canonical,L=_c(c,m,I.x,I.y,I.z),j=1+(C?C(c,m):0)/s.bE,W=[L[0]*j,L[1]*j,L[2]*j,1];s.aH(W,W,this._globeViewProjMatrixNoCorrection);const K=this._cachedClippingPlane,te=K[0]*L[0]+K[1]*L[1]+K[2]*L[2]+K[3]<0;return{point:new s.P(W[0]/W[3],W[1]/W[3]),signedDistanceFromCamera:W[3],isOccluded:te}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const c=yd(this.worldSize,this.center.lat),m=s.bk(),b=s.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*c),s.be(m,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const C=this.centerOffset;m[8]=2*-C.x/this._helper._width,m[9]=2*C.y/this._helper._height,this._projectionMatrix=s.bf(m),this._globeProjMatrixInverted=s.bk(),s.aB(this._globeProjMatrixInverted,m),s.O(m,m,[0,0,-this.cameraToCenterDistance]),s.bg(m,m,this.rollInRadians),s.bh(m,m,-this.pitchInRadians),s.bg(m,m,this.bearingInRadians),s.O(m,m,[0,0,-c]);const I=s.bz();I[0]=c,I[1]=c,I[2]=c,s.bh(b,m,this.center.lat*Math.PI/180),s.bJ(b,b,-this.center.lng*Math.PI/180),s.Q(b,b,I),this._globeViewProjMatrixNoCorrection=b,s.bh(m,m,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bJ(m,m,-this.center.lng*Math.PI/180),s.Q(m,m,I),this._globeViewProjMatrix32f=new Float32Array(m),this._globeViewProjMatrixNoCorrectionInverted=s.bk(),s.aB(this._globeViewProjMatrixNoCorrectionInverted,b);const L=s.bz();this._cameraPosition=s.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/c,s.bG(this._cameraPosition,this._cameraPosition,L,-this.rollInRadians),s.bH(this._cameraPosition,this._cameraPosition,L,this.pitchInRadians),s.bG(this._cameraPosition,this._cameraPosition,L,-this.bearingInRadians),s.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bH(this._cameraPosition,this._cameraPosition,L,-this.center.lat*Math.PI/180),s.bI(this._cameraPosition,this._cameraPosition,L,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(c);const j=s.bf(this._globeViewProjMatrixNoCorrectionInverted);s.Q(j,j,[1,1,-1]),this._cachedFrustum=ia.fromInvProjectionMatrix(j,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(c){s.w("calculateFogMatrix is not supported on globe projection.");const m=s.bk();return s.ar(m),m}getVisibleUnwrappedCoordinates(c){return[new s.bc(0,c)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(c){c&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(c,m){if(!this._globeViewProjMatrixNoCorrection)return 1;const b=$i(c);s.a$(b,b,1+m/s.bE);const C=s.bF();return s.aH(C,[b[0],b[1],b[2],1],this._globeViewProjMatrixNoCorrection),C[2]/C[3]}populateCache(c){}getBounds(){const c=.5*this.width,m=.5*this.height,b=[new s.P(0,0),new s.P(c,0),new s.P(this.width,0),new s.P(this.width,m),new s.P(this.width,this.height),new s.P(c,this.height),new s.P(0,this.height),new s.P(0,m)],C=[];for(const he of b)C.push(this.unprojectScreenPoint(he));let I=0,L=0,j=0,W=0;const K=this.center;for(const he of C){const ue=s.bK(K.lng,he.lng),ge=s.bK(K.lat,he.lat);ue<L&&(L=ue),ue>I&&(I=ue),ge<W&&(W=ge),ge>j&&(j=ge)}const te=[K.lng+L,K.lat+W,K.lng+I,K.lat+j];return this.isSurfacePointOnScreen([0,1,0])&&(te[3]=90,te[0]=-180,te[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(te[1]=-90,te[0]=-180,te[2]=180),new vn(te)}calculateCenterFromCameraLngLatAlt(c,m,b,C){return this._helper.calculateCenterFromCameraLngLatAlt(c,m,b,C)}setLocationAtPoint(c,m){const b=$i(this.unprojectScreenPoint(m)),C=$i(c),I=s.bz();s.bL(I);const L=s.bz();s.bI(L,b,I,-this.center.lng*Math.PI/180),s.bH(L,L,I,this.center.lat*Math.PI/180);const j=C[0]*C[0]+C[2]*C[2],W=L[0]*L[0];if(j<W)return;const K=Math.sqrt(j-W),te=-K,he=s.bM(C[0],C[2],L[0],K),ue=s.bM(C[0],C[2],L[0],te),ge=s.bz();s.bI(ge,C,I,-he);const Oe=s.bM(ge[1],ge[2],L[1],L[2]),Ie=s.bz();s.bI(Ie,C,I,-ue);const Le=s.bM(Ie[1],Ie[2],L[1],L[2]),De=.5*Math.PI,je=Oe>=-De&&Oe<=De,He=Le>=-De&&Le<=De;let Fe,We;if(je&&He){const yt=this.center.lng*Math.PI/180,ht=this.center.lat*Math.PI/180;s.bN(he,yt)+s.bN(Oe,ht)<s.bN(ue,yt)+s.bN(Le,ht)?(Fe=he,We=Oe):(Fe=ue,We=Le)}else if(je)Fe=he,We=Oe;else{if(!He)return;Fe=ue,We=Le}const Ke=Fe/Math.PI*180,Ze=We/Math.PI*180,nt=this.center.lat;this.setCenter(new s.V(Ke,s.an(Ze,-90,90))),this.setZoom(this.zoom+io(nt,this.center.lat))}locationToScreenPoint(c,m){const b=$i(c);if(m){const C=m.getElevationForLngLatZoom(c,this._helper._tileZoom);s.a$(b,b,1+C/s.bE)}return this._projectSurfacePointToScreen(b)}_projectSurfacePointToScreen(c){const m=s.bF();return s.aH(m,[...c,1],this._globeViewProjMatrixNoCorrection),m[0]/=m[3],m[1]/=m[3],new s.P((.5*m[0]+.5)*this.width,(.5*-m[1]+.5)*this.height)}screenPointToMercatorCoordinate(c,m){if(m){const b=m.pointCoordinate(c);if(b)return b}return s.a9.fromLngLat(this.unprojectScreenPoint(c))}screenPointToLocation(c,m){var b;return(b=this.screenPointToMercatorCoordinate(c,m))===null||b===void 0?void 0:b.toLngLat()}isPointOnMapSurface(c,m){const b=this._cameraPosition,C=this.getRayDirectionFromPixel(c);return!!this.rayPlanetIntersection(b,C)}getRayDirectionFromPixel(c){const m=s.bF();m[0]=c.x/this.width*2-1,m[1]=-1*(c.y/this.height*2-1),m[2]=1,m[3]=1,s.aH(m,m,this._globeViewProjMatrixNoCorrectionInverted),m[0]/=m[3],m[1]/=m[3],m[2]/=m[3];const b=s.bz();b[0]=m[0]-this._cameraPosition[0],b[1]=m[1]-this._cameraPosition[1],b[2]=m[2]-this._cameraPosition[2];const C=s.bz();return s.b3(C,b),C}isSurfacePointVisible(c){const m=this._cachedClippingPlane;return m[0]*c[0]+m[1]*c[1]+m[2]*c[2]+m[3]>=0}isSurfacePointOnScreen(c){if(!this.isSurfacePointVisible(c))return!1;const m=s.bF();return s.aH(m,[...c,1],this._globeViewProjMatrixNoCorrection),m[0]/=m[3],m[1]/=m[3],m[2]/=m[3],m[0]>-1&&m[0]<1&&m[1]>-1&&m[1]<1&&m[2]>-1&&m[2]<1}rayPlanetIntersection(c,m){const b=s.b5(c,m),C=s.bz(),I=s.bz();s.a$(I,m,b),s.b2(C,c,I);const L=1-s.b5(C,C);if(L<0)return null;const j=s.b5(c,c)-1,W=-b+(b<0?1:-1)*Math.sqrt(L),K=j/W,te=W;return{tMin:Math.min(K,te),tMax:Math.max(K,te)}}unprojectScreenPoint(c){const m=this._cameraPosition,b=this.getRayDirectionFromPixel(c),C=this.rayPlanetIntersection(m,b);if(C){const te=s.bz();s.b0(te,m,[b[0]*C.tMin,b[1]*C.tMin,b[2]*C.tMin]);const he=s.bz();return s.b3(he,te),Sm(he)}const I=this._cachedClippingPlane,L=I[0]*b[0]+I[1]*b[1]+I[2]*b[2],j=-s.bb(I,m)/L,W=s.bz();if(j>0)s.b0(W,m,[b[0]*j,b[1]*j,b[2]*j]);else{const te=s.bz();s.b0(te,m,[2*b[0],2*b[1],2*b[2]]);const he=s.bb(this._cachedClippingPlane,te);s.b2(W,te,[this._cachedClippingPlane[0]*he,this._cachedClippingPlane[1]*he,this._cachedClippingPlane[2]*he])}const K=(function(te){const he=s.bz();return he[0]=te[0]*-te[3],he[1]=te[1]*-te[3],he[2]=te[2]*-te[3],{center:he,radius:Math.sqrt(1-te[3]*te[3])}})(I);return Sm((function(te,he,ue){const ge=s.bz();s.b2(ge,ue,te);const Oe=s.bz();return s.bA(Oe,te,ge,he/s.b9(ge)),Oe})(K.center,K.radius,W))}getMatrixForModel(c,m){const b=s.V.convert(c),C=1/s.bE,I=s.bj();return s.bJ(I,I,b.lng/180*Math.PI),s.bh(I,I,-b.lat/180*Math.PI),s.O(I,I,[0,0,1+m/s.bE]),s.bh(I,I,.5*Math.PI),s.Q(I,I,[C,C,C]),I}getProjectionDataForCustomLayer(c=!0){const m=this.getProjectionData({overscaledTileID:new s.a2(0,0,0,0,0),applyGlobeMatrix:c});return m.tileMercatorCoords=[0,0,1,1],m}getFastPathSimpleProjectionMatrix(c){}}class Vf{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(c){this._helper.setMinZoom(c)}setMaxZoom(c){this._helper.setMaxZoom(c)}setMinPitch(c){this._helper.setMinPitch(c)}setMaxPitch(c){this._helper.setMaxPitch(c)}setRenderWorldCopies(c){this._helper.setRenderWorldCopies(c)}setBearing(c){this._helper.setBearing(c)}setPitch(c){this._helper.setPitch(c)}setRoll(c){this._helper.setRoll(c)}setFov(c){this._helper.setFov(c)}setZoom(c){this._helper.setZoom(c)}setCenter(c){this._helper.setCenter(c)}setElevation(c){this._helper.setElevation(c)}setMinElevationForCurrentTile(c){this._helper.setMinElevationForCurrentTile(c)}setPadding(c){this._helper.setPadding(c)}interpolatePadding(c,m,b){return this._helper.interpolatePadding(c,m,b)}isPaddingEqual(c){return this._helper.isPaddingEqual(c)}resize(c,m,b=!0){this._helper.resize(c,m,b)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(c){this._helper.setMaxBounds(c)}setConstrainOverride(c){this._helper.setConstrainOverride(c)}overrideNearFarZ(c,m){this._helper.overrideNearFarZ(c,m)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(c){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),c)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(c,m){this._globeness=c,this._globeLatitudeErrorCorrectionRadians=m,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(c){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(m,b)=>this.currentTransform.defaultConstrain(m,b),this.applyConstrain=(m,b)=>this._helper.applyConstrain(m,b),this._helper=new ah({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(m,b)=>this.defaultConstrain(m,b)},c),this._globeness=1,this._mercatorTransform=new Bo,this._verticalPerspectiveTransform=new jf}clone(){const c=new Vf;return c._globeness=this._globeness,c._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,c.apply(this),c}apply(c){this._helper.apply(c),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(c){const m=this._mercatorTransform.getProjectionData(c),b=this._verticalPerspectiveTransform.getProjectionData(c);return{mainMatrix:this.isGlobeRendering?b.mainMatrix:m.mainMatrix,clippingPlane:b.clippingPlane,tileMercatorCoords:b.tileMercatorCoords,projectionTransition:c.applyGlobeMatrix?this._globeness:0,fallbackMatrix:m.fallbackMatrix}}isLocationOccluded(c){return this.currentTransform.isLocationOccluded(c)}transformLightDirection(c){return this.currentTransform.transformLightDirection(c)}getPixelScale(){return s.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(c,m,b){const C=this._mercatorTransform.getPitchedTextCorrection(c,m,b),I=this._verticalPerspectiveTransform.getPitchedTextCorrection(c,m,b);return s.bu(C,I,this._globeness)}projectTileCoordinates(c,m,b,C){return this.currentTransform.projectTileCoordinates(c,m,b,C)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(c){return this.currentTransform.calculateFogMatrix(c)}getVisibleUnwrappedCoordinates(c){return this.currentTransform.getVisibleUnwrappedCoordinates(c)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(c){this._mercatorTransform.recalculateZoomAndCenter(c),this._verticalPerspectiveTransform.recalculateZoomAndCenter(c)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(c,m){return this.currentTransform.lngLatToCameraDepth(c,m)}populateCache(c){this._mercatorTransform.populateCache(c),this._verticalPerspectiveTransform.populateCache(c)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(c,m,b,C){return this._helper.calculateCenterFromCameraLngLatAlt(c,m,b,C)}setLocationAtPoint(c,m){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(c,m),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(c,m),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(c,m){return this.currentTransform.locationToScreenPoint(c,m)}screenPointToMercatorCoordinate(c,m){return this.currentTransform.screenPointToMercatorCoordinate(c,m)}screenPointToLocation(c,m){return this.currentTransform.screenPointToLocation(c,m)}isPointOnMapSurface(c,m){return this.currentTransform.isPointOnMapSurface(c,m)}getRayDirectionFromPixel(c){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(c)}getMatrixForModel(c,m){return this.currentTransform.getMatrixForModel(c,m)}getProjectionDataForCustomLayer(c=!0){const m=this._mercatorTransform.getProjectionDataForCustomLayer(c);if(!this.isGlobeRendering)return m;const b=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(c);return b.fallbackMatrix=m.mainMatrix,b}getFastPathSimpleProjectionMatrix(c){return this.currentTransform.getFastPathSimpleProjectionMatrix(c)}}class yo{get useGlobeControls(){return!0}handlePanInertia(c,m){const b=Qb(c,m);return Math.abs(b.lng-m.center.lng)>180&&(b.lng=m.center.lng+179.5*Math.sign(b.lng-m.center.lng)),{easingCenter:b,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(c,m){const b=c.around,C=m.screenPointToLocation(b);c.bearingDelta&&m.setBearing(m.bearing+c.bearingDelta),c.pitchDelta&&m.setPitch(m.pitch+c.pitchDelta),c.rollDelta&&m.setRoll(m.roll+c.rollDelta);const I=m.zoom;c.zoomDelta&&m.setZoom(m.zoom+c.zoomDelta);const L=m.zoom-I;if(L===0)return;const j=s.bK(m.center.lng,C.lng),W=j/(Math.abs(j/180)+1),K=s.bK(m.center.lat,C.lat),te=m.getRayDirectionFromPixel(b),he=m.cameraPosition,ue=-1*s.b5(he,te),ge=s.bz();s.b0(ge,he,[te[0]*ue,te[1]*ue,te[2]*ue]);const Oe=s.b7(ge)-1,Ie=Math.exp(.5*-Math.max(Oe-.3,0)),Le=yd(m.worldSize,m.center.lat)/Math.min(m.width,m.height),De=s.bx(Le,.9,.5,1,.25),je=(1-s.aq(-L))*Math.min(Ie,De),He=m.center.lat,Fe=m.zoom,We=new s.V(m.center.lng+W*je,s.an(m.center.lat+K*je,-s.ao,s.ao));m.setLocationAtPoint(C,b);const Ke=m.center,Ze=s.bx(Math.abs(j),45,85,0,1),nt=s.bx(Le,.75,.35,0,1),yt=Math.pow(Math.max(Ze,nt),.25),ht=s.bK(Ke.lng,We.lng),pt=s.bK(Ke.lat,We.lat);m.setCenter(new s.V(Ke.lng+ht*yt,Ke.lat+pt*yt).wrap()),m.setZoom(Fe+io(He,m.center.lat))}handleMapControlsPan(c,m,b){if(!c.panDelta)return;const C=m.center.lat,I=m.zoom;m.setCenter(Qb(c.panDelta,m).wrap()),m.setZoom(I+io(C,m.center.lat))}cameraForBoxAndBearing(c,m,b,C,I){const L=pd(c,m,b,C,I),j=m.left/I.width*2-1,W=(I.width-m.right)/I.width*2-1,K=m.top/I.height*-2+1,te=(I.height-m.bottom)/I.height*-2+1,he=s.bK(b.getWest(),b.getEast())<0,ue=he?b.getEast():b.getWest(),ge=he?b.getWest():b.getEast(),Oe=Math.max(b.getNorth(),b.getSouth()),Ie=Math.min(b.getNorth(),b.getSouth()),Le=ue+.5*s.bK(ue,ge),De=Oe+.5*s.bK(Oe,Ie),je=I.clone();je.setCenter(L.center),je.setBearing(L.bearing),je.setPitch(0),je.setRoll(0),je.setZoom(L.zoom);const He=je.modelViewProjectionMatrix,Fe=[$i(b.getNorthWest()),$i(b.getNorthEast()),$i(b.getSouthWest()),$i(b.getSouthEast()),$i(new s.V(ge,De)),$i(new s.V(ue,De)),$i(new s.V(Le,Oe)),$i(new s.V(Le,Ie))],We=$i(L.center);let Ke=Number.POSITIVE_INFINITY;for(const Ze of Fe)j<0&&(Ke=yo.getLesserNonNegativeNonNull(Ke,yo.solveVectorScale(Ze,We,He,"x",j))),W>0&&(Ke=yo.getLesserNonNegativeNonNull(Ke,yo.solveVectorScale(Ze,We,He,"x",W))),K>0&&(Ke=yo.getLesserNonNegativeNonNull(Ke,yo.solveVectorScale(Ze,We,He,"y",K))),te<0&&(Ke=yo.getLesserNonNegativeNonNull(Ke,yo.solveVectorScale(Ze,We,He,"y",te)));if(Number.isFinite(Ke)&&Ke!==0)return L.zoom=je.zoom+s.at(Ke),L;oa()}handleJumpToCenterZoom(c,m){const b=c.center.lat,C=c.applyConstrain(m.center?s.V.convert(m.center):c.center,c.zoom).center;c.setCenter(C.wrap());const I=m.zoom!==void 0?+m.zoom:c.zoom+io(b,C.lat);c.zoom!==I&&c.setZoom(I)}handleEaseTo(c,m){const b=c.zoom,C=c.center,I=c.padding,L={roll:c.roll,pitch:c.pitch,bearing:c.bearing},j={roll:m.roll===void 0?c.roll:m.roll,pitch:m.pitch===void 0?c.pitch:m.pitch,bearing:m.bearing===void 0?c.bearing:m.bearing},W=m.zoom!==void 0,K=!c.isPaddingEqual(m.padding);let te=!1;const he=m.center?s.V.convert(m.center):C,ue=c.applyConstrain(he,b).center;vc(c,ue);const ge=c.clone();ge.setCenter(ue),ge.setZoom(W?+m.zoom:b+io(C.lat,he.lat)),ge.setBearing(m.bearing);const Oe=new s.P(s.an(c.centerPoint.x+m.offsetAsPoint.x,0,c.width),s.an(c.centerPoint.y+m.offsetAsPoint.y,0,c.height));ge.setLocationAtPoint(ue,Oe);const Ie=(m.offset&&m.offsetAsPoint.mag())>0?ge.center:ue,Le=W?+m.zoom:b+io(C.lat,Ie.lat),De=b+io(C.lat,0),je=Le+io(Ie.lat,0),He=s.bK(C.lng,Ie.lng),Fe=s.bK(C.lat,Ie.lat),We=s.aq(je-De);return te=Le!==b,{easeFunc:Ke=>{if(s.bo(L,j)||xm({startEulerAngles:L,endEulerAngles:j,tr:c,k:Ke,useSlerp:L.roll!=j.roll}),K&&c.interpolatePadding(I,m.padding,Ke),m.around)s.w("Easing around a point is not supported under globe projection."),c.setLocationAtPoint(m.around,m.aroundPoint);else{const Ze=je>De?Math.min(2,We):Math.max(.5,We),nt=Math.pow(Ze,1-Ke),yt=Ub(C,He,Fe,Ke*nt);c.setCenter(yt.wrap())}if(te){const Ze=s.G.number(De,je,Ke)+io(0,c.center.lat);c.setZoom(Ze)}},isZooming:te,elevationCenter:Ie}}handleFlyTo(c,m){const b=m.zoom!==void 0,C=c.center,I=c.zoom,L=c.padding,j=!c.isPaddingEqual(m.padding),W=c.applyConstrain(s.V.convert(m.center||m.locationAtOffset),I).center,K=b?+m.zoom:c.zoom+io(c.center.lat,W.lat),te=c.clone();te.setCenter(W),te.setZoom(K),te.setBearing(m.bearing);const he=new s.P(s.an(c.centerPoint.x+m.offsetAsPoint.x,0,c.width),s.an(c.centerPoint.y+m.offsetAsPoint.y,0,c.height));te.setLocationAtPoint(W,he);const ue=te.center;vc(c,ue);const ge=(function(Fe,We,Ke){const Ze=$i(We),nt=$i(Ke),yt=s.b5(Ze,nt),ht=Math.acos(yt),pt=sa(Fe);return ht/(2*Math.PI)*pt})(c,C,ue),Oe=I+io(C.lat,0),Ie=K+io(ue.lat,0),Le=s.aq(Ie-Oe);let De;if(typeof m.minZoom=="number"){const Fe=+m.minZoom+io(ue.lat,0),We=Math.min(Fe,Oe,Ie)+io(0,ue.lat),Ke=c.applyConstrain(ue,We).zoom+io(ue.lat,0);De=s.aq(Ke-Oe)}const je=s.bK(C.lng,ue.lng),He=s.bK(C.lat,ue.lat);return{easeFunc:(Fe,We,Ke,Ze)=>{const nt=Ub(C,je,He,Ke);j&&c.interpolatePadding(L,m.padding,Fe);const yt=Fe===1?ue:nt;c.setCenter(yt.wrap());const ht=Oe+s.at(We);c.setZoom(Fe===1?K:ht+io(0,yt.lat))},scaleOfZoom:Le,targetCenter:ue,scaleOfMinZoom:De,pixelPathLength:ge}}static solveVectorScale(c,m,b,C,I){const L=C==="x"?[b[0],b[4],b[8],b[12]]:[b[1],b[5],b[9],b[13]],j=[b[3],b[7],b[11],b[15]],W=c[0]*L[0]+c[1]*L[1]+c[2]*L[2],K=c[0]*j[0]+c[1]*j[1]+c[2]*j[2],te=m[0]*L[0]+m[1]*L[1]+m[2]*L[2],he=m[0]*j[0]+m[1]*j[1]+m[2]*j[2];return te+I*K===W+I*he||j[3]*(W-te)+L[3]*(he-K)+W*he==te*K?null:(te+L[3]-I*he-I*j[3])/(te-W-I*he+I*K)}static getLesserNonNegativeNonNull(c,m){return m!==null&&m>=0&&m<c?m:c}}class Qf{constructor(c){this._globe=c,this._mercatorCameraHelper=new md,this._verticalPerspectiveCameraHelper=new yo}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(c,m){return this.currentHelper.handlePanInertia(c,m)}handleMapControlsRollPitchBearingZoom(c,m){return this.currentHelper.handleMapControlsRollPitchBearingZoom(c,m)}handleMapControlsPan(c,m,b){this.currentHelper.handleMapControlsPan(c,m,b)}cameraForBoxAndBearing(c,m,b,C,I){return this.currentHelper.cameraForBoxAndBearing(c,m,b,C,I)}handleJumpToCenterZoom(c,m){this.currentHelper.handleJumpToCenterZoom(c,m)}handleEaseTo(c,m){return this.currentHelper.handleEaseTo(c,m)}handleFlyTo(c,m){return this.currentHelper.handleFlyTo(c,m)}}const Uf=(P,c)=>s.B(P,c&&c.filter((m=>m.identifier!=="source.canvas"))),Zf=s.bO();class hh extends s.E{constructor(c,m={}){var b,C;super(),this._rtlPluginLoaded=()=>{for(const L in this.tileManagers){const j=this.tileManagers[L].getSource().type;j!=="vector"&&j!=="geojson"||this.tileManagers[L].reload()}},this.map=c,this.dispatcher=new Tt(At(),c._getMapId()),this.dispatcher.registerMessageHandler("GG",((L,j)=>this.getGlyphs(L,j))),this.dispatcher.registerMessageHandler("GI",((L,j)=>this.getImages(L,j))),this.dispatcher.registerMessageHandler("GDA",((L,j)=>this.getDashes(L,j))),this.imageManager=new re,this.imageManager.setEventedParent(this);const I=((b=c._container)===null||b===void 0?void 0:b.lang)||typeof document<"u"&&((C=document.documentElement)===null||C===void 0?void 0:C.lang)||void 0;this.glyphManager=new ke(c._requestManager,m.localIdeographFontFamily,I),this.lineAtlas=new Ee(256,512),this.crossTileSymbolIndex=new Ho,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",s.bP()),tt().on($e,this._rtlPluginLoaded),this.on("data",(L=>{if(L.dataType!=="source"||L.sourceDataType!=="metadata")return;const j=this.tileManagers[L.sourceId];if(!j)return;const W=j.getSource();if(W&&W.vectorLayerIds)for(const K in this._layers){const te=this._layers[K];te.source===W.id&&this._validateLayer(te)}}))}_setInitialValues(){var c;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new s.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((c=this.crossTileSymbolIndex)===null||c===void 0?void 0:c.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(c,m){var b,C,I;this._checkLoaded();const L=m===null?(I=(C=(b=this.stylesheet.state)===null||b===void 0?void 0:b[c])===null||C===void 0?void 0:C.default)!==null&&I!==void 0?I:null:m;if(s.bR(L,this._globalState[c]))return this;this._globalState[c]=L,this._applyGlobalStateChanges([c])}getGlobalState(){return this._globalState}setGlobalState(c){this._checkLoaded();const m=[];for(const b in c)!s.bR(this._globalState[b],c[b].default)&&(m.push(b),this._globalState[b]=c[b].default);this._applyGlobalStateChanges(m)}_applyGlobalStateChanges(c){if(c.length===0)return;const m=new Set,b={};for(const C of c){b[C]=this._globalState[C];for(const I in this._layers){const L=this._layers[I],j=L.getLayoutAffectingGlobalStateRefs(),W=L.getPaintAffectingGlobalStateRefs(),K=L.getVisibilityAffectingGlobalStateRefs();if(j.has(C)&&m.add(L.source),W.has(C))for(const{name:te,value:he}of W.get(C))this._updatePaintProperty(L,te,he);K?.has(C)&&(L.recalculateVisibility(),this._updateLayer(L))}}this.dispatcher.broadcast("UGS",b);for(const C in this.tileManagers)m.has(C)&&(this._reloadSource(C),this._changed=!0)}loadURL(c,m={},b){this.fire(new s.l("dataloading",{dataType:"style"})),m.validate=typeof m.validate!="boolean"||m.validate;const C=this.map._requestManager.transformRequest(c,"Style");this._loadStyleRequest=new AbortController;const I=this._loadStyleRequest;s.j(C,this._loadStyleRequest).then((L=>{this._loadStyleRequest=null,this._load(L.data,m,b)})).catch((L=>{this._loadStyleRequest=null,L&&!I.signal.aborted&&this.fire(new s.k(L))}))}loadJSON(c,m={},b){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,S.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,m.validate=m.validate!==!1,this._load(c,m,b)})).catch((()=>{}))}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(Zf,{validate:!1})}_load(c,m,b){var C,I;let L=m.transformStyle?m.transformStyle(b,c):c;if(!m.validate||!Uf(this,s.C(L))){L=Object.assign({},L),this._loaded=!0,this.stylesheet=L;for(const j in L.sources)this.addSource(j,L.sources[j],{validate:!1});L.sprite?this._loadSprite(L.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(L.glyphs),this._createLayers(),this.light=new Se(this.stylesheet.light),this._setProjectionInternal(((C=this.stylesheet.projection)===null||C===void 0?void 0:C.type)||"mercator"),this.sky=new Xe(this.stylesheet.sky),this.map.setTerrain((I=this.stylesheet.terrain)!==null&&I!==void 0?I:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){var c,m,b;const C=s.bS(this.stylesheet.layers);this.setGlobalState((c=this.stylesheet.state)!==null&&c!==void 0?c:null),this.dispatcher.broadcast("SL",C),this._order=C.map((I=>I.id)),this._layers={},this._serializedLayers=null;for(const I of C){const L=s.bT(I,this._globalState);if(L.setEventedParent(this,{layer:{id:I.id}}),this._layers[I.id]=L,s.bU(L)&&this.tileManagers[L.source]){const j=(b=(m=I.paint)===null||m===void 0?void 0:m["raster-fade-duration"])!==null&&b!==void 0?b:L.paint.get("raster-fade-duration");this.tileManagers[L.source].setRasterFadeDuration(j)}}}_loadSprite(c,m=!1,b=void 0){this.imageManager.setLoaded(!1);const C=new AbortController;let I;this._spriteRequest=C,(function(L,j,W,K){return s._(this,void 0,void 0,(function*(){const te=ie(L),he=W>1?"@2x":"",ue={},ge={};for(const{id:Oe,url:Ie}of te){const Le=j.transformRequest(ce(Ie,he,".json"),"SpriteJSON");ue[Oe]=s.j(Le,K);const De=j.transformRequest(ce(Ie,he,".png"),"SpriteImage");ge[Oe]=H.getImage(De,K)}return yield Promise.all([...Object.values(ue),...Object.values(ge)]),(function(Oe,Ie){return s._(this,void 0,void 0,(function*(){const Le={};for(const De in Oe){Le[De]={};const je=S.getImageCanvasContext((yield Ie[De]).data),He=(yield Oe[De]).data;for(const Fe in He){const{width:We,height:Ke,x:Ze,y:nt,sdf:yt,pixelRatio:ht,stretchX:pt,stretchY:gt,content:Kt,textFitWidth:en,textFitHeight:zt}=He[Fe];Le[De][Fe]={data:null,pixelRatio:ht,sdf:yt,stretchX:pt,stretchY:gt,content:Kt,textFitWidth:en,textFitHeight:zt,spriteData:{width:We,height:Ke,x:Ze,y:nt,context:je}}}}return Le}))})(ue,ge)}))})(c,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((L=>{if(this._spriteRequest=null,L)for(const j in L){this._spritesImagesIds[j]=[];const W=this._spritesImagesIds[j]?this._spritesImagesIds[j].filter((K=>!(K in L))):[];for(const K of W)this.imageManager.removeImage(K),this._changedImages[K]=!0;for(const K in L[j]){const te=j==="default"?K:`${j}:${K}`;this._spritesImagesIds[j].push(te),te in this.imageManager.images?this.imageManager.updateImage(te,L[j][K],!1):this.imageManager.addImage(te,L[j][K]),m&&(this._changedImages[te]=!0)}}})).catch((L=>{this._spriteRequest=null,I=L,C.signal.aborted||this.fire(new s.k(I))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),m&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),b&&b(I)}))}_unloadSprite(){for(const c of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(c),this._changedImages[c]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(c){const m=this.tileManagers[c.source];if(!m)return;const b=c.sourceLayer;if(!b)return;const C=m.getSource();(C.type==="geojson"||C.vectorLayerIds&&C.vectorLayerIds.indexOf(b)===-1)&&this.fire(new s.k(new Error(`Source layer "${b}" does not exist on source "${C.id}" as specified by style layer "${c.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this.tileManagers)if(!this.tileManagers[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(c,m=!1){const b=this._serializedAllLayers();if(!c||c.length===0)return Object.values(m?s.bV(b):b);const C=[];for(const I of c)if(b[I]){const L=m?s.bV(b[I]):b[I];C.push(L)}return C}_serializedAllLayers(){let c=this._serializedLayers;if(c)return c;c=this._serializedLayers={};const m=Object.keys(this._layers);for(const b of m){const C=this._layers[b];C.type!=="custom"&&(c[b]=C.serialize())}return c}hasTransitions(){var c,m,b;if(!((c=this.light)===null||c===void 0)&&c.hasTransition()||!((m=this.sky)===null||m===void 0)&&m.hasTransition()||!((b=this.projection)===null||b===void 0)&&b.hasTransition())return!0;for(const C in this.tileManagers)if(this.tileManagers[C].hasTransition())return!0;for(const C in this._layers)if(this._layers[C].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(c){if(!this._loaded)return;const m=this._changed;if(m){const C=Object.keys(this._updatedLayers),I=Object.keys(this._removedLayers);(C.length||I.length)&&this._updateWorkerLayers(C,I);for(const L in this._updatedSources){const j=this._updatedSources[L];if(j==="reload")this._reloadSource(L);else{if(j!=="clear")throw new Error(`Invalid action ${j}`);this._clearSource(L)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const L in this._updatedPaintProps)this._layers[L].updateTransitions(c);this.light.updateTransitions(c),this.sky.updateTransitions(c),this._resetUpdates()}const b={};for(const C in this.tileManagers){const I=this.tileManagers[C];b[C]=I.used,I.used=!1}for(const C of this._order){const I=this._layers[C];I.recalculate(c,this._availableImages),!I.isHidden(c.zoom)&&I.source&&(this.tileManagers[I.source].used=!0)}for(const C in b){const I=this.tileManagers[C];!!b[C]!=!!I.used&&I.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:C}))}this.light.recalculate(c),this.sky.recalculate(c),this.projection.recalculate(c),this.z=c.zoom,m&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const m in this.tileManagers)this.tileManagers[m].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const c in this.tileManagers)this.tileManagers[c].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(c,m){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(c,!1),removedIds:m})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(c,m={}){var b;this._checkLoaded();const C=this.serialize();if(c=m.transformStyle?m.transformStyle(C,c):c,((b=m.validate)===null||b===void 0||b)&&Uf(this,s.C(c)))return!1;(c=s.bV(c)).layers=s.bS(c.layers);const I=s.bW(C,c),L=this._getOperationsToPerform(I);if(L.unimplemented.length>0)throw new Error(`Unimplemented: ${L.unimplemented.join(", ")}.`);if(L.operations.length===0)return!1;for(const j of L.operations)j();return this.stylesheet=c,this._serializedLayers=null,!0}_getOperationsToPerform(c){const m=[],b=[];for(const C of c)switch(C.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":m.push((()=>this.addLayer.apply(this,C.args)));break;case"removeLayer":m.push((()=>this.removeLayer.apply(this,C.args)));break;case"setPaintProperty":m.push((()=>this.setPaintProperty.apply(this,C.args)));break;case"setLayoutProperty":m.push((()=>this.setLayoutProperty.apply(this,C.args)));break;case"setFilter":m.push((()=>this.setFilter.apply(this,C.args)));break;case"addSource":m.push((()=>this.addSource.apply(this,C.args)));break;case"removeSource":m.push((()=>this.removeSource.apply(this,C.args)));break;case"setLayerZoomRange":m.push((()=>this.setLayerZoomRange.apply(this,C.args)));break;case"setLight":m.push((()=>this.setLight.apply(this,C.args)));break;case"setGeoJSONSourceData":m.push((()=>this.setGeoJSONSourceData.apply(this,C.args)));break;case"setGlyphs":m.push((()=>this.setGlyphs.apply(this,C.args)));break;case"setSprite":m.push((()=>this.setSprite.apply(this,C.args)));break;case"setTerrain":m.push((()=>this.map.setTerrain.apply(this,C.args)));break;case"setSky":m.push((()=>this.setSky.apply(this,C.args)));break;case"setProjection":this.setProjection.apply(this,C.args);break;case"setGlobalState":m.push((()=>this.setGlobalState.apply(this,C.args)));break;case"setTransition":m.push((()=>{}));break;default:b.push(C.command)}return{operations:m,unimplemented:b}}addImage(c,m){if(this.getImage(c))return this.fire(new s.k(new Error(`An image named "${c}" already exists.`)));this.imageManager.addImage(c,m),this._afterImageUpdated(c)}updateImage(c,m){this.imageManager.updateImage(c,m)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){if(!this.getImage(c))return this.fire(new s.k(new Error(`An image named "${c}" does not exist.`)));this.imageManager.removeImage(c),this._afterImageUpdated(c)}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(c,m,b={}){if(this._checkLoaded(),this.tileManagers[c]!==void 0)throw new Error(`Source "${c}" already exists.`);if(!m.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(m).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(m.type)>=0&&this._validate(s.C.source,`sources.${c}`,m,null,b))return;this.map&&this.map._collectResourceTiming&&(m.collectResourceTiming=!0);const C=this.tileManagers[c]=new yi(c,m,this.dispatcher);C.style=this,C.setEventedParent(this,(()=>({isSourceLoaded:C.loaded(),source:C.serialize(),sourceId:c}))),C.onAdd(this.map),this._changed=!0}removeSource(c){if(this._checkLoaded(),this.tileManagers[c]===void 0)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===c)return this.fire(new s.k(new Error(`Source "${c}" cannot be removed while layer "${b}" is using it.`)));const m=this.tileManagers[c];delete this.tileManagers[c],delete this._updatedSources[c],m.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),m.setEventedParent(null),m.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(c,m){if(this._checkLoaded(),this.tileManagers[c]===void 0)throw new Error(`There is no source with this ID=${c}`);const b=this.tileManagers[c].getSource();if(b.type!=="geojson")throw new Error(`geojsonSource.type is ${b.type}, which is !== 'geojson`);b.setData(m),this._changed=!0}getSource(c){return this.tileManagers[c]&&this.tileManagers[c].getSource()}addLayer(c,m,b={}){this._checkLoaded();const C=c.id;if(this.getLayer(C))return void this.fire(new s.k(new Error(`Layer "${C}" already exists on this map.`)));let I;if(c.type==="custom"){if(Uf(this,s.bX(c)))return;I=s.bT(c,this._globalState)}else{if("source"in c&&typeof c.source=="object"&&(this.addSource(C,c.source),c=s.bV(c),c=s.e(c,{source:C})),this._validate(s.C.layer,`layers.${C}`,c,{arrayIndex:-1},b))return;I=s.bT(c,this._globalState),this._validateLayer(I),I.setEventedParent(this,{layer:{id:C}})}const L=m?this._order.indexOf(m):this._order.length;if(m&&L===-1)this.fire(new s.k(new Error(`Cannot add layer "${C}" before non-existing layer "${m}".`)));else{if(this._order.splice(L,0,C),this._layerOrderChanged=!0,this._layers[C]=I,this._removedLayers[C]&&I.source&&I.type!=="custom"){const j=this._removedLayers[C];delete this._removedLayers[C],j.type!==I.type?this._updatedSources[I.source]="clear":(this._updatedSources[I.source]="reload",this.tileManagers[I.source].pause())}this._updateLayer(I),I.onAdd&&I.onAdd(this.map)}}moveLayer(c,m){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new s.k(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===m)return;const b=this._order.indexOf(c);this._order.splice(b,1);const C=m?this._order.indexOf(m):this._order.length;m&&C===-1?this.fire(new s.k(new Error(`Cannot move layer "${c}" before non-existing layer "${m}".`))):(this._order.splice(C,0,c),this._layerOrderChanged=!0)}removeLayer(c){this._checkLoaded();const m=this._layers[c];if(!m)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${c}".`)));m.setEventedParent(null);const b=this._order.indexOf(c);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=m,delete this._layers[c],this._serializedLayers&&delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],m.onRemove&&m.onRemove(this.map)}getLayer(c){return this._layers[c]}getLayersOrder(){return[...this._order]}hasLayer(c){return c in this._layers}setLayerZoomRange(c,m,b){this._checkLoaded();const C=this.getLayer(c);C?C.minzoom===m&&C.maxzoom===b||(m!=null&&(C.minzoom=m),b!=null&&(C.maxzoom=b),this._updateLayer(C)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${c}".`)))}setFilter(c,m,b={}){this._checkLoaded();const C=this.getLayer(c);if(C){if(!s.bR(C.filter,m))return m==null?(C.setFilter(void 0),void this._updateLayer(C)):void(this._validate(s.C.filter,`layers.${C.id}.filter`,m,null,b)||(C.setFilter(s.bV(m)),this._updateLayer(C)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${c}".`)))}getFilter(c){return s.bV(this.getLayer(c).filter)}setLayoutProperty(c,m,b,C={}){this._checkLoaded();const I=this.getLayer(c);I?s.bR(I.getLayoutProperty(m),b)||(I.setLayoutProperty(m,b,C),this._updateLayer(I)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${c}".`)))}getLayoutProperty(c,m){const b=this.getLayer(c);if(b)return b.getLayoutProperty(m);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${c}".`)))}setPaintProperty(c,m,b,C={}){this._checkLoaded();const I=this.getLayer(c);I?s.bR(I.getPaintProperty(m),b)||this._updatePaintProperty(I,m,b,C):this.fire(new s.k(new Error(`Cannot style non-existing layer "${c}".`)))}_updatePaintProperty(c,m,b,C={}){c.setPaintProperty(m,b,C)&&this._updateLayer(c),s.bU(c)&&m==="raster-fade-duration"&&this.tileManagers[c.source].setRasterFadeDuration(b),this._changed=!0,this._updatedPaintProps[c.id]=!0,this._serializedLayers=null}getPaintProperty(c,m){return this.getLayer(c).getPaintProperty(m)}setFeatureState(c,m){this._checkLoaded();const b=c.source,C=c.sourceLayer,I=this.tileManagers[b];if(I===void 0)return void this.fire(new s.k(new Error(`The source '${b}' does not exist in the map's style.`)));const L=I.getSource().type;L==="geojson"&&C?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):L!=="vector"||C?(c.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),I.setFeatureState(C,c.id,m)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(c,m){this._checkLoaded();const b=c.source,C=this.tileManagers[b];if(C===void 0)return void this.fire(new s.k(new Error(`The source '${b}' does not exist in the map's style.`)));const I=C.getSource().type,L=I==="vector"?c.sourceLayer:void 0;I!=="vector"||L?m&&typeof c.id!="string"&&typeof c.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):C.removeFeatureState(L,c.id,m):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(c){this._checkLoaded();const m=c.source,b=c.sourceLayer,C=this.tileManagers[m];if(C!==void 0)return C.getSource().type!=="vector"||b?(c.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),C.getFeatureState(b,c.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${m}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const c=s.bY(this.tileManagers,(I=>I.serialize())),m=this._serializeByIds(this._order,!0),b=this.map.getTerrain()||void 0,C=this.stylesheet;return s.bZ({version:C.version,name:C.name,metadata:C.metadata,light:C.light,sky:C.sky,center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,sprite:C.sprite,glyphs:C.glyphs,transition:C.transition,projection:C.projection,sources:c,layers:m,terrain:b},(I=>I!==void 0))}_updateLayer(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&this.tileManagers[c.source].getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",this.tileManagers[c.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(c){const m=L=>this._layers[L].type==="fill-extrusion",b={},C=[];for(let L=this._order.length-1;L>=0;L--){const j=this._order[L];if(m(j)){b[j]=L;for(const W of c){const K=W[j];if(K)for(const te of K)C.push(te)}}}C.sort(((L,j)=>j.intersectionZ-L.intersectionZ));const I=[];for(let L=this._order.length-1;L>=0;L--){const j=this._order[L];if(m(j))for(let W=C.length-1;W>=0;W--){const K=C[W].feature;if(b[K.layer.id]<L)break;I.push(K),C.pop()}else for(const W of c){const K=W[j];if(K)for(const te of K)I.push(te.feature)}}return I}queryRenderedFeatures(c,m,b){m&&m.filter&&this._validate(s.C.filter,"queryRenderedFeatures.filter",m.filter,null,m);const C={};if(m&&m.layers){if(!(Array.isArray(m.layers)||m.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const K of m.layers){const te=this._layers[K];if(!te)return this.fire(new s.k(new Error(`The layer '${K}' does not exist in the map's style and cannot be queried for features.`))),[];C[te.source]=!0}}const I=[];m.availableImages=this._availableImages;const L=this._serializedAllLayers(),j=m.layers instanceof Set?m.layers:Array.isArray(m.layers)?new Set(m.layers):null,W=Object.assign(Object.assign({},m),{layers:j,globalState:this._globalState});for(const K in this.tileManagers)m.layers&&!C[K]||I.push(An(this.tileManagers[K],this._layers,L,c,W,b,this.map.terrain?(te,he,ue)=>this.map.terrain.getElevation(te,he,ue):void 0));return this.placement&&I.push((function(K,te,he,ue,ge,Oe,Ie){const Le={},De=Oe.queryRenderedSymbols(ue),je=[];for(const He of Object.keys(De).map(Number))je.push(Ie[He]);je.sort(rn);for(const He of je){const Fe=He.featureIndex.lookupSymbolFeatures(De[He.bucketInstanceId],te,He.bucketIndex,He.sourceLayerIndex,{filterSpec:ge.filter,globalState:ge.globalState},ge.layers,ge.availableImages,K);for(const We in Fe){const Ke=Le[We]=Le[We]||[],Ze=Fe[We];Ze.sort(((nt,yt)=>{const ht=He.featureSortOrder;if(ht){const pt=ht.indexOf(nt.featureIndex);return ht.indexOf(yt.featureIndex)-pt}return yt.featureIndex-nt.featureIndex}));for(const nt of Ze)Ke.push(nt)}}return(function(He,Fe,We){for(const Ke in He)for(const Ze of He[Ke])Jt(Ze,We[Fe[Ke].source]);return He})(Le,K,he)})(this._layers,L,this.tileManagers,c,W,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(I)}querySourceFeatures(c,m){m?.filter&&this._validate(s.C.filter,"querySourceFeatures.filter",m.filter,null,m);const b=this.tileManagers[c];return b?(function(C,I){const L=C.getRenderableIds().map((K=>C.getTileByID(K))),j=[],W={};for(let K=0;K<L.length;K++){const te=L[K],he=te.tileID.canonical.key;W[he]||(W[he]=!0,te.querySourceFeatures(j,I))}return j})(b,m?Object.assign(Object.assign({},m),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(c,m={}){this._checkLoaded();const b=this.light.getLight();let C=!1;for(const L in c)if(!s.bR(c[L],b[L])){C=!0;break}if(!C)return;const I={now:A(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,m),this.light.updateTransitions(I)}getProjection(){var c;return(c=this.stylesheet)===null||c===void 0?void 0:c.projection}setProjection(c){if(this._checkLoaded(),this.projection){if(this.projection.name===c.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=c,this._setProjectionInternal(c.type)}getSky(){var c;return(c=this.stylesheet)===null||c===void 0?void 0:c.sky}setSky(c,m={}){this._checkLoaded();const b=this.getSky();let C=!1;if(!c&&!b)return;if(c&&!b)C=!0;else if(!c&&b)C=!0;else for(const L in c)if(!s.bR(c[L],b[L])){C=!0;break}if(!C)return;const I={now:A(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=c,this.sky.setSky(c,m),this.sky.updateTransitions(I)}_setProjectionInternal(c){const m=(function(b,C){const I={constrainOverride:C};if(Array.isArray(b)){const L=new uv({type:b});return{projection:L,transform:new Vf(I),cameraHelper:new Qf(L)}}switch(b){case"mercator":return{projection:new Go,transform:new Bo(I),cameraHelper:new md};case"globe":{const L=new uv({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:L,transform:new Vf(I),cameraHelper:new Qf(L)}}case"vertical-perspective":return{projection:new cv,transform:new jf(I),cameraHelper:new yo};default:return s.w(`Unknown projection name: ${b}. Falling back to mercator projection.`),{projection:new Go,transform:new Bo(I),cameraHelper:new md}}})(c,this.map.transformConstrain);this.projection=m.projection,this.map.migrateProjection(m.transform,m.cameraHelper);for(const b in this.tileManagers)this.tileManagers[b].reload()}_validate(c,m,b,C,I={}){return(!I||I.validate!==!1)&&Uf(this,c.call(s.C,s.e({key:m,style:this.serialize(),value:b,styleSpec:s.u},C)))}_remove(c=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),tt().off($e,this._rtlPluginLoaded);for(const m in this._layers)this._layers[m].setEventedParent(null);for(const m in this.tileManagers){const b=this.tileManagers[m];b.setEventedParent(null),b.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),c&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(c)}_clearSource(c){this.tileManagers[c].clearTiles()}_reloadSource(c){this.tileManagers[c].resume(),this.tileManagers[c].reload()}_updateSources(c){for(const m in this.tileManagers)this.tileManagers[m].update(c,this.map.terrain)}_generateCollisionBoxes(){for(const c in this.tileManagers)this._reloadSource(c)}_updatePlacement(c,m,b,C,I=!1){let L=!1,j=!1;const W={};for(const K of this._order){const te=this._layers[K];if(te.type!=="symbol")continue;if(!W[te.source]){const ue=this.tileManagers[te.source];W[te.source]=ue.getRenderableIds(!0).map((ge=>ue.getTileByID(ge))).sort(((ge,Oe)=>Oe.tileID.overscaledZ-ge.tileID.overscaledZ||(ge.tileID.isLessThan(Oe.tileID)?-1:1)))}const he=this.crossTileSymbolIndex.addLayer(te,W[te.source],c.center.lng);L=L||he}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((I=I||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A(),c.zoom))&&(this.pauseablePlacement=new Nf(c,this.map.terrain,this._order,I,m,b,C,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,W),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A()),j=!0),L&&this.pauseablePlacement.placement.setStale()),j||L)for(const K of this._order){const te=this._layers[K];te.type==="symbol"&&this.placement.updateLayerOpacities(te,W[te.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A())}_releaseSymbolFadeTiles(){for(const c in this.tileManagers)this.tileManagers[c].releaseSymbolFadeTiles()}getImages(c,m){return s._(this,void 0,void 0,(function*(){const b=yield this.imageManager.getImages(m.icons);this._updateTilesForChangedImages();const C=this.tileManagers[m.source];return C&&C.setDependencies(m.tileID.key,m.type,m.icons),b}))}getGlyphs(c,m){return s._(this,void 0,void 0,(function*(){const b=yield this.glyphManager.getGlyphs(m.stacks),C=this.tileManagers[m.source];return C&&C.setDependencies(m.tileID.key,m.type,[""]),b}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(c,m={}){this._checkLoaded(),c&&this._validate(s.C.glyphs,"glyphs",c,null,m)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=c,this.glyphManager.entries={},this.glyphManager.setURL(c))}getDashes(c,m){return s._(this,void 0,void 0,(function*(){const b={};for(const[C,I]of Object.entries(m.dashes))b[C]=this.lineAtlas.getDash(I.dasharray,I.round);return b}))}addSprite(c,m,b={},C){this._checkLoaded();const I=[{id:c,url:m}],L=[...ie(this.stylesheet.sprite),...I];this._validate(s.C.sprite,"sprite",L,null,b)||(this.stylesheet.sprite=L,this._loadSprite(I,!0,C))}removeSprite(c){this._checkLoaded();const m=ie(this.stylesheet.sprite);if(m.find((b=>b.id===c))){if(this._spritesImagesIds[c])for(const b of this._spritesImagesIds[c])this.imageManager.removeImage(b),this._changedImages[b]=!0;m.splice(m.findIndex((b=>b.id===c)),1),this.stylesheet.sprite=m.length>0?m:void 0,delete this._spritesImagesIds[c],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${c}" doesn't exists on this map.`)))}getSprite(){return ie(this.stylesheet.sprite)}setSprite(c,m={},b){this._checkLoaded(),c&&this._validate(s.C.sprite,"sprite",c,null,m)||(this.stylesheet.sprite=c,c?this._loadSprite(c,!0,b):(this._unloadSprite(),b&&b(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const c in this.tileManagers){const m=this.tileManagers[c];m.setEventedParent(null),m.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const c in this._layers){const m=this._layers[c];m.setEventedParent(null),m.onRemove&&m.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var Zb=s.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class km{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(c,m,b,C,I,L,j,W,K){this.context=c;let te=this.boundPaintVertexBuffers.length!==C.length;for(let he=0;!te&&he<C.length;he++)this.boundPaintVertexBuffers[he]!==C[he]&&(te=!0);!this.vao||this.boundProgram!==m||this.boundLayoutVertexBuffer!==b||te||this.boundIndexBuffer!==I||this.boundVertexOffset!==L||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==W||this.boundDynamicVertexBuffer3!==K?this.freshBind(m,b,C,I,L,j,W,K):(c.bindVertexArray.set(this.vao),j&&j.bind(),I&&I.dynamicDraw&&I.bind(),W&&W.bind(),K&&K.bind())}freshBind(c,m,b,C,I,L,j,W){const K=c.numAttributes,te=this.context,he=te.gl;this.vao&&this.destroy(),this.vao=te.createVertexArray(),te.bindVertexArray.set(this.vao),this.boundProgram=c,this.boundLayoutVertexBuffer=m,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=C,this.boundVertexOffset=I,this.boundDynamicVertexBuffer=L,this.boundDynamicVertexBuffer2=j,this.boundDynamicVertexBuffer3=W,m.enableAttributes(he,c);for(const ue of b)ue.enableAttributes(he,c);L&&L.enableAttributes(he,c),j&&j.enableAttributes(he,c),W&&W.enableAttributes(he,c),m.bind(),m.setVertexAttribPointers(he,c,I);for(const ue of b)ue.bind(),ue.setVertexAttribPointers(he,c,I);L&&(L.bind(),L.setVertexAttribPointers(he,c,I)),C&&C.bind(),j&&(j.bind(),j.setVertexAttribPointers(he,c,I)),W&&(W.bind(),W.setVertexAttribPointers(he,c,I)),te.currentNumAttributes=K}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const qb=(P,c,m,b,C)=>({u_texture:0,u_ele_delta:P,u_fog_matrix:c,u_fog_color:m?m.properties.get("fog-color"):s.bp.white,u_fog_ground_blend:m?m.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:C?0:m?m.calculateFogBlendOpacity(b):0,u_horizon_color:m?m.properties.get("horizon-color"):s.bp.white,u_horizon_fog_blend:m?m.properties.get("horizon-fog-blend"):1,u_is_globe_mode:C?1:0}),Vl={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function my(P){const c=[];for(let m=0;m<P.length;m++){if(P[m]===null)continue;const b=P[m].split(" ");c.push(b.pop())}return c}class Wb{constructor(c,m,b,C,I,L,j,W,K=[]){const te=c.gl;this.program=te.createProgram();const he=my(m.staticAttributes),ue=b?b.getBinderAttributes():[],ge=he.concat(ue),Oe=Di.prelude.staticUniforms?my(Di.prelude.staticUniforms):[],Ie=j.staticUniforms?my(j.staticUniforms):[],Le=m.staticUniforms?my(m.staticUniforms):[],De=b?b.getBinderUniforms():[],je=Oe.concat(Ie).concat(Le).concat(De),He=[];for(const ht of je)He.indexOf(ht)<0&&He.push(ht);const Fe=b?b.defines():[];ll(te)&&Fe.unshift("#version 300 es"),I&&Fe.push("#define OVERDRAW_INSPECTOR;"),L&&Fe.push("#define TERRAIN3D;"),W&&Fe.push(W),K&&Fe.push(...K);let We=Fe.concat(Di.prelude.fragmentSource,j.fragmentSource,m.fragmentSource).join(`
`),Ke=Fe.concat(Di.prelude.vertexSource,j.vertexSource,m.vertexSource).join(`
`);ll(te)||(We=(function(ht){return ht.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(We),Ke=(function(ht){return ht.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Ke));const Ze=te.createShader(te.FRAGMENT_SHADER);if(te.isContextLost())return void(this.failedToCreate=!0);if(te.shaderSource(Ze,We),te.compileShader(Ze),!te.getShaderParameter(Ze,te.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${te.getShaderInfoLog(Ze)}`);te.attachShader(this.program,Ze);const nt=te.createShader(te.VERTEX_SHADER);if(te.isContextLost())return void(this.failedToCreate=!0);if(te.shaderSource(nt,Ke),te.compileShader(nt),!te.getShaderParameter(nt,te.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${te.getShaderInfoLog(nt)}`);te.attachShader(this.program,nt),this.attributes={};const yt={};this.numAttributes=ge.length;for(let ht=0;ht<this.numAttributes;ht++)ge[ht]&&(te.bindAttribLocation(this.program,ht,ge[ht]),this.attributes[ge[ht]]=ht);if(te.linkProgram(this.program),!te.getProgramParameter(this.program,te.LINK_STATUS))throw new Error(`Program failed to link: ${te.getProgramInfoLog(this.program)}`);te.deleteShader(nt),te.deleteShader(Ze);for(let ht=0;ht<He.length;ht++){const pt=He[ht];if(pt&&!yt[pt]){const gt=te.getUniformLocation(this.program,pt);gt&&(yt[pt]=gt)}}this.fixedUniforms=C(c,yt),this.terrainUniforms=((ht,pt)=>({u_depth:new s.b_(ht,pt.u_depth),u_terrain:new s.b_(ht,pt.u_terrain),u_terrain_dim:new s.bq(ht,pt.u_terrain_dim),u_terrain_matrix:new s.c0(ht,pt.u_terrain_matrix),u_terrain_unpack:new s.c1(ht,pt.u_terrain_unpack),u_terrain_exaggeration:new s.bq(ht,pt.u_terrain_exaggeration)}))(c,yt),this.projectionUniforms=((ht,pt)=>({u_projection_matrix:new s.c0(ht,pt.u_projection_matrix),u_projection_tile_mercator_coords:new s.c1(ht,pt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.c1(ht,pt.u_projection_clipping_plane),u_projection_transition:new s.bq(ht,pt.u_projection_transition),u_projection_fallback_matrix:new s.c0(ht,pt.u_projection_fallback_matrix)}))(c,yt),this.binderUniforms=b?b.getUniforms(c,yt):[]}draw(c,m,b,C,I,L,j,W,K,te,he,ue,ge,Oe,Ie,Le,De,je,He){const Fe=c.gl;if(this.failedToCreate)return;if(c.program.set(this.program),c.setDepthMode(b),c.setStencilMode(C),c.setColorMode(I),c.setCullFace(L),W){c.activeTexture.set(Fe.TEXTURE2),Fe.bindTexture(Fe.TEXTURE_2D,W.depthTexture),c.activeTexture.set(Fe.TEXTURE3),Fe.bindTexture(Fe.TEXTURE_2D,W.texture);for(const Ke in this.terrainUniforms)this.terrainUniforms[Ke].set(W[Ke])}if(K)for(const Ke in K)this.projectionUniforms[Vl[Ke]].set(K[Ke]);if(j)for(const Ke in this.fixedUniforms)this.fixedUniforms[Ke].set(j[Ke]);Le&&Le.setUniforms(c,this.binderUniforms,Oe,{zoom:Ie});let We=0;switch(m){case Fe.LINES:We=2;break;case Fe.TRIANGLES:We=3;break;case Fe.LINE_STRIP:We=1}for(const Ke of ge.get()){const Ze=Ke.vaos||(Ke.vaos={});(Ze[te]||(Ze[te]=new km)).bind(c,this,he,Le?Le.getPaintVertexBuffers():[],ue,Ke.vertexOffset,De,je,He),Fe.drawElements(m,Ke.primitiveLength*We,Fe.UNSIGNED_SHORT,Ke.primitiveOffset*We*2)}}}function Hb(P,c,m){const b=1/s.aN(m,1,c.transform.tileZoom),C=Math.pow(2,m.tileID.overscaledZ),I=m.tileSize*Math.pow(2,c.transform.tileZoom)/C,L=I*(m.tileID.canonical.x+m.tileID.wrap*C),j=I*m.tileID.canonical.y;return{u_image:0,u_texsize:m.imageAtlasTexture.size,u_scale:[b,P.fromScale,P.toScale],u_fade:P.t,u_pixel_coord_upper:[L>>16,j>>16],u_pixel_coord_lower:[65535&L,65535&j]}}const gy=(P,c,m,b)=>{const C=P.style.light,I=C.properties.get("position"),L=[I.x,I.y,I.z],j=s.c4();C.properties.get("anchor")==="viewport"&&s.c5(j,P.transform.bearingInRadians),s.c6(L,L,j);const W=P.transform.transformLightDirection(L),K=C.properties.get("color");return{u_lightpos:L,u_lightpos_globe:W,u_lightintensity:C.properties.get("intensity"),u_lightcolor:[K.r,K.g,K.b],u_vertical_gradient:+c,u_opacity:m,u_fill_translate:b}},yy=(P,c,m,b,C,I,L)=>s.e(gy(P,c,m,b),Hb(I,P,L),{u_height_factor:-Math.pow(2,C.overscaledZ)/L.tileSize/8}),vd=(P,c,m,b)=>s.e(Hb(c,P,m),{u_fill_translate:b}),qf=(P,c)=>({u_world:P,u_fill_translate:c}),Gb=(P,c,m,b,C)=>s.e(vd(P,c,m,C),{u_world:b}),Em=(P,c,m,b,C)=>{const I=P.transform;let L,j,W=0;if(m.paint.get("circle-pitch-alignment")==="map"){const K=s.aN(c,1,I.zoom);L=!0,j=[K,K],W=K/(s.a5*Math.pow(2,c.tileID.overscaledZ))*2*Math.PI*C}else L=!1,j=I.pixelsToGLUnits;return{u_camera_to_center_distance:I.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+L,u_device_pixel_ratio:P.pixelRatio,u_extrude_scale:j,u_globe_extrude_scale:W,u_translate:b}},dh=P=>({u_pixel_extrude_scale:[1/P.width,1/P.height]}),dv=P=>({u_viewport_size:[P.width,P.height]}),Am=(P,c=1)=>({u_color:P,u_overlay:0,u_overlay_scale:c}),fh=(P,c,m,b)=>{const C=s.aN(P,1,c)/(s.a5*Math.pow(2,P.tileID.overscaledZ))*2*Math.PI*b;return{u_extrude_scale:s.aN(P,1,c),u_intensity:m,u_globe_extrude_scale:C}},fv=(P,c,m,b)=>{const C=s.N();s.c7(C,0,P.width,P.height,0,0,1);const I=P.context.gl;return{u_matrix:C,u_world:[I.drawingBufferWidth,I.drawingBufferHeight],u_image:m,u_color_ramp:b,u_opacity:c.paint.get("heatmap-opacity")}},Pm=(P,c,m)=>{const b=m.paint.get("hillshade-accent-color");let C;switch(m.paint.get("hillshade-method")){case"basic":C=4;break;case"combined":C=1;break;case"igor":C=2;break;case"multidirectional":C=3;break;default:C=0}const I=m.getIlluminationProperties();for(let L=0;L<I.directionRadians.length;L++)m.paint.get("hillshade-illumination-anchor")==="viewport"&&(I.directionRadians[L]+=P.transform.bearingInRadians);return{u_image:0,u_latrange:HO(0,c.tileID),u_exaggeration:m.paint.get("hillshade-exaggeration"),u_altitudes:I.altitudeRadians,u_azimuths:I.directionRadians,u_accent:b,u_method:C,u_highlights:I.highlightColor,u_shadows:I.shadowColor}},Xb=(P,c)=>{const m=c.stride,b=s.N();return s.c7(b,0,s.a5,-s.a5,0,0,1),s.O(b,b,[0,-s.a5,0]),{u_matrix:b,u_image:1,u_dimension:[m,m],u_zoom:P.overscaledZ,u_unpack:c.getUnpackVector()}};function HO(P,c){const m=Math.pow(2,c.canonical.z),b=c.canonical.y;return[new s.a9(0,b/m).toLngLat().lat,new s.a9(0,(b+1)/m).toLngLat().lat]}const Yb=(P,c,m=0)=>({u_image:0,u_unpack:c.getUnpackVector(),u_dimension:[c.stride,c.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:m,u_opacity:P.paint.get("color-relief-opacity")}),Mm=(P,c,m,b)=>{const C=P.transform;return{u_translation:Rm(P,c,m),u_ratio:b/s.aN(c,1,C.zoom),u_device_pixel_ratio:P.pixelRatio,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},Kb=(P,c,m,b,C)=>s.e(Mm(P,c,m,b),{u_image:0,u_image_height:C}),pv=(P,c,m,b,C)=>{const I=P.transform,L=cl(c,I);return{u_translation:Rm(P,c,m),u_texsize:c.imageAtlasTexture.size,u_ratio:b/s.aN(c,1,I.zoom),u_device_pixel_ratio:P.pixelRatio,u_image:0,u_scale:[L,C.fromScale,C.toScale],u_fade:C.t,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},pa=(P,c,m,b,C)=>{const I=cl(c,P.transform);return s.e(Mm(P,c,m,b),{u_tileratio:I,u_crossfade_from:C.fromScale,u_crossfade_to:C.toScale,u_image:0,u_mix:C.t,u_lineatlas_width:P.lineAtlas.width,u_lineatlas_height:P.lineAtlas.height})},ph=(P,c,m,b,C,I)=>{const L=cl(c,P.transform);return s.e(Mm(P,c,m,b),{u_image:0,u_image_height:I,u_tileratio:L,u_crossfade_from:C.fromScale,u_crossfade_to:C.toScale,u_image_dash:1,u_mix:C.t,u_lineatlas_width:P.lineAtlas.width,u_lineatlas_height:P.lineAtlas.height})};function cl(P,c){return 1/s.aN(P,1,c.tileZoom)}function Rm(P,c,m){return s.aO(P.transform,c,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}const vy=(P,c,m,b,C)=>{return{u_tl_parent:P,u_scale_parent:c,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(L=b.paint.get("raster-saturation"),L>0?1-1/(1.001-L):-L),u_contrast_factor:(I=b.paint.get("raster-contrast"),I>0?1/(1-I):1+I),u_spin_weights:_y(b.paint.get("raster-hue-rotate")),u_coords_top:[C[0].x,C[0].y,C[1].x,C[1].y],u_coords_bottom:[C[3].x,C[3].y,C[2].x,C[2].y]};var I,L};function _y(P){P*=Math.PI/180;const c=Math.sin(P),m=Math.cos(P);return[(2*m+1)/3,(-Math.sqrt(3)*c-m+1)/3,(Math.sqrt(3)*c-m+1)/3]}const Im=(P,c,m,b,C,I,L,j,W,K,te,he,ue)=>{const ge=L.transform;return{u_is_size_zoom_constant:+(P==="constant"||P==="source"),u_is_size_feature_constant:+(P==="constant"||P==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:ge.cameraToCenterDistance,u_pitch:ge.pitch/360*2*Math.PI,u_rotate_symbol:+m,u_aspect_ratio:ge.width/ge.height,u_fade_change:L.options.fadeDuration?L.symbolFadeChange:1,u_label_plane_matrix:j,u_coord_matrix:W,u_is_text:+te,u_pitch_with_map:+b,u_is_along_line:C,u_is_variable_anchor:I,u_texsize:he,u_texture:0,u_translation:K,u_pitched_scale:ue}},by=(P,c,m,b,C,I,L,j,W,K,te,he,ue,ge)=>{const Oe=L.transform;return s.e(Im(P,c,m,b,C,I,L,j,W,K,te,he,ge),{u_gamma_scale:b?Math.cos(Oe.pitch*Math.PI/180)*Oe.cameraToCenterDistance:1,u_device_pixel_ratio:L.pixelRatio,u_is_halo:1})},ul=(P,c,m,b,C,I,L,j,W,K,te,he,ue)=>s.e(by(P,c,m,b,C,I,L,j,W,K,!0,te,0,ue),{u_texsize_icon:he,u_texture_icon:1}),Dm=(P,c)=>({u_opacity:P,u_color:c}),Lm=(P,c,m,b,C)=>s.e((function(I,L,j,W){const K=j.imageManager.getPattern(I.from.toString()),te=j.imageManager.getPattern(I.to.toString()),{width:he,height:ue}=j.imageManager.getPixelSize(),ge=Math.pow(2,W.tileID.overscaledZ),Oe=W.tileSize*Math.pow(2,j.transform.tileZoom)/ge,Ie=Oe*(W.tileID.canonical.x+W.tileID.wrap*ge),Le=Oe*W.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:K.tl,u_pattern_br_a:K.br,u_pattern_tl_b:te.tl,u_pattern_br_b:te.br,u_texsize:[he,ue],u_mix:L.t,u_pattern_size_a:K.displaySize,u_pattern_size_b:te.displaySize,u_scale_a:L.fromScale,u_scale_b:L.toScale,u_tile_units_to_pixels:1/s.aN(W,1,j.transform.tileZoom),u_pixel_coord_upper:[Ie>>16,Le>>16],u_pixel_coord_lower:[65535&Ie,65535&Le]}})(m,C,c,b),{u_opacity:P}),xy=(P,c)=>{},Jb={fillExtrusion:(P,c)=>({u_lightpos:new s.c2(P,c.u_lightpos),u_lightpos_globe:new s.c2(P,c.u_lightpos_globe),u_lightintensity:new s.bq(P,c.u_lightintensity),u_lightcolor:new s.c2(P,c.u_lightcolor),u_vertical_gradient:new s.bq(P,c.u_vertical_gradient),u_opacity:new s.bq(P,c.u_opacity),u_fill_translate:new s.c3(P,c.u_fill_translate)}),fillExtrusionPattern:(P,c)=>({u_lightpos:new s.c2(P,c.u_lightpos),u_lightpos_globe:new s.c2(P,c.u_lightpos_globe),u_lightintensity:new s.bq(P,c.u_lightintensity),u_lightcolor:new s.c2(P,c.u_lightcolor),u_vertical_gradient:new s.bq(P,c.u_vertical_gradient),u_height_factor:new s.bq(P,c.u_height_factor),u_opacity:new s.bq(P,c.u_opacity),u_fill_translate:new s.c3(P,c.u_fill_translate),u_image:new s.b_(P,c.u_image),u_texsize:new s.c3(P,c.u_texsize),u_pixel_coord_upper:new s.c3(P,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(P,c.u_pixel_coord_lower),u_scale:new s.c2(P,c.u_scale),u_fade:new s.bq(P,c.u_fade)}),fill:(P,c)=>({u_fill_translate:new s.c3(P,c.u_fill_translate)}),fillPattern:(P,c)=>({u_image:new s.b_(P,c.u_image),u_texsize:new s.c3(P,c.u_texsize),u_pixel_coord_upper:new s.c3(P,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(P,c.u_pixel_coord_lower),u_scale:new s.c2(P,c.u_scale),u_fade:new s.bq(P,c.u_fade),u_fill_translate:new s.c3(P,c.u_fill_translate)}),fillOutline:(P,c)=>({u_world:new s.c3(P,c.u_world),u_fill_translate:new s.c3(P,c.u_fill_translate)}),fillOutlinePattern:(P,c)=>({u_world:new s.c3(P,c.u_world),u_image:new s.b_(P,c.u_image),u_texsize:new s.c3(P,c.u_texsize),u_pixel_coord_upper:new s.c3(P,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(P,c.u_pixel_coord_lower),u_scale:new s.c2(P,c.u_scale),u_fade:new s.bq(P,c.u_fade),u_fill_translate:new s.c3(P,c.u_fill_translate)}),circle:(P,c)=>({u_camera_to_center_distance:new s.bq(P,c.u_camera_to_center_distance),u_scale_with_map:new s.b_(P,c.u_scale_with_map),u_pitch_with_map:new s.b_(P,c.u_pitch_with_map),u_extrude_scale:new s.c3(P,c.u_extrude_scale),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_globe_extrude_scale:new s.bq(P,c.u_globe_extrude_scale),u_translate:new s.c3(P,c.u_translate)}),collisionBox:(P,c)=>({u_pixel_extrude_scale:new s.c3(P,c.u_pixel_extrude_scale)}),collisionCircle:(P,c)=>({u_viewport_size:new s.c3(P,c.u_viewport_size)}),debug:(P,c)=>({u_color:new s.b$(P,c.u_color),u_overlay:new s.b_(P,c.u_overlay),u_overlay_scale:new s.bq(P,c.u_overlay_scale)}),depth:xy,clippingMask:xy,heatmap:(P,c)=>({u_extrude_scale:new s.bq(P,c.u_extrude_scale),u_intensity:new s.bq(P,c.u_intensity),u_globe_extrude_scale:new s.bq(P,c.u_globe_extrude_scale)}),heatmapTexture:(P,c)=>({u_matrix:new s.c0(P,c.u_matrix),u_world:new s.c3(P,c.u_world),u_image:new s.b_(P,c.u_image),u_color_ramp:new s.b_(P,c.u_color_ramp),u_opacity:new s.bq(P,c.u_opacity)}),hillshade:(P,c)=>({u_image:new s.b_(P,c.u_image),u_latrange:new s.c3(P,c.u_latrange),u_exaggeration:new s.bq(P,c.u_exaggeration),u_altitudes:new s.c9(P,c.u_altitudes),u_azimuths:new s.c9(P,c.u_azimuths),u_accent:new s.b$(P,c.u_accent),u_method:new s.b_(P,c.u_method),u_shadows:new s.c8(P,c.u_shadows),u_highlights:new s.c8(P,c.u_highlights)}),hillshadePrepare:(P,c)=>({u_matrix:new s.c0(P,c.u_matrix),u_image:new s.b_(P,c.u_image),u_dimension:new s.c3(P,c.u_dimension),u_zoom:new s.bq(P,c.u_zoom),u_unpack:new s.c1(P,c.u_unpack)}),colorRelief:(P,c)=>({u_image:new s.b_(P,c.u_image),u_unpack:new s.c1(P,c.u_unpack),u_dimension:new s.c3(P,c.u_dimension),u_elevation_stops:new s.b_(P,c.u_elevation_stops),u_color_stops:new s.b_(P,c.u_color_stops),u_color_ramp_size:new s.b_(P,c.u_color_ramp_size),u_opacity:new s.bq(P,c.u_opacity)}),line:(P,c)=>({u_translation:new s.c3(P,c.u_translation),u_ratio:new s.bq(P,c.u_ratio),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_units_to_pixels:new s.c3(P,c.u_units_to_pixels)}),lineGradient:(P,c)=>({u_translation:new s.c3(P,c.u_translation),u_ratio:new s.bq(P,c.u_ratio),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_units_to_pixels:new s.c3(P,c.u_units_to_pixels),u_image:new s.b_(P,c.u_image),u_image_height:new s.bq(P,c.u_image_height)}),linePattern:(P,c)=>({u_translation:new s.c3(P,c.u_translation),u_texsize:new s.c3(P,c.u_texsize),u_ratio:new s.bq(P,c.u_ratio),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_image:new s.b_(P,c.u_image),u_units_to_pixels:new s.c3(P,c.u_units_to_pixels),u_scale:new s.c2(P,c.u_scale),u_fade:new s.bq(P,c.u_fade)}),lineSDF:(P,c)=>({u_translation:new s.c3(P,c.u_translation),u_ratio:new s.bq(P,c.u_ratio),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_units_to_pixels:new s.c3(P,c.u_units_to_pixels),u_image:new s.b_(P,c.u_image),u_mix:new s.bq(P,c.u_mix),u_tileratio:new s.bq(P,c.u_tileratio),u_crossfade_from:new s.bq(P,c.u_crossfade_from),u_crossfade_to:new s.bq(P,c.u_crossfade_to),u_lineatlas_width:new s.bq(P,c.u_lineatlas_width),u_lineatlas_height:new s.bq(P,c.u_lineatlas_height)}),lineGradientSDF:(P,c)=>({u_translation:new s.c3(P,c.u_translation),u_ratio:new s.bq(P,c.u_ratio),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_units_to_pixels:new s.c3(P,c.u_units_to_pixels),u_image:new s.b_(P,c.u_image),u_image_height:new s.bq(P,c.u_image_height),u_tileratio:new s.bq(P,c.u_tileratio),u_crossfade_from:new s.bq(P,c.u_crossfade_from),u_crossfade_to:new s.bq(P,c.u_crossfade_to),u_image_dash:new s.b_(P,c.u_image_dash),u_mix:new s.bq(P,c.u_mix),u_lineatlas_width:new s.bq(P,c.u_lineatlas_width),u_lineatlas_height:new s.bq(P,c.u_lineatlas_height)}),raster:(P,c)=>({u_tl_parent:new s.c3(P,c.u_tl_parent),u_scale_parent:new s.bq(P,c.u_scale_parent),u_buffer_scale:new s.bq(P,c.u_buffer_scale),u_fade_t:new s.bq(P,c.u_fade_t),u_opacity:new s.bq(P,c.u_opacity),u_image0:new s.b_(P,c.u_image0),u_image1:new s.b_(P,c.u_image1),u_brightness_low:new s.bq(P,c.u_brightness_low),u_brightness_high:new s.bq(P,c.u_brightness_high),u_saturation_factor:new s.bq(P,c.u_saturation_factor),u_contrast_factor:new s.bq(P,c.u_contrast_factor),u_spin_weights:new s.c2(P,c.u_spin_weights),u_coords_top:new s.c1(P,c.u_coords_top),u_coords_bottom:new s.c1(P,c.u_coords_bottom)}),symbolIcon:(P,c)=>({u_is_size_zoom_constant:new s.b_(P,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(P,c.u_is_size_feature_constant),u_size_t:new s.bq(P,c.u_size_t),u_size:new s.bq(P,c.u_size),u_camera_to_center_distance:new s.bq(P,c.u_camera_to_center_distance),u_pitch:new s.bq(P,c.u_pitch),u_rotate_symbol:new s.b_(P,c.u_rotate_symbol),u_aspect_ratio:new s.bq(P,c.u_aspect_ratio),u_fade_change:new s.bq(P,c.u_fade_change),u_label_plane_matrix:new s.c0(P,c.u_label_plane_matrix),u_coord_matrix:new s.c0(P,c.u_coord_matrix),u_is_text:new s.b_(P,c.u_is_text),u_pitch_with_map:new s.b_(P,c.u_pitch_with_map),u_is_along_line:new s.b_(P,c.u_is_along_line),u_is_variable_anchor:new s.b_(P,c.u_is_variable_anchor),u_texsize:new s.c3(P,c.u_texsize),u_texture:new s.b_(P,c.u_texture),u_translation:new s.c3(P,c.u_translation),u_pitched_scale:new s.bq(P,c.u_pitched_scale)}),symbolSDF:(P,c)=>({u_is_size_zoom_constant:new s.b_(P,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(P,c.u_is_size_feature_constant),u_size_t:new s.bq(P,c.u_size_t),u_size:new s.bq(P,c.u_size),u_camera_to_center_distance:new s.bq(P,c.u_camera_to_center_distance),u_pitch:new s.bq(P,c.u_pitch),u_rotate_symbol:new s.b_(P,c.u_rotate_symbol),u_aspect_ratio:new s.bq(P,c.u_aspect_ratio),u_fade_change:new s.bq(P,c.u_fade_change),u_label_plane_matrix:new s.c0(P,c.u_label_plane_matrix),u_coord_matrix:new s.c0(P,c.u_coord_matrix),u_is_text:new s.b_(P,c.u_is_text),u_pitch_with_map:new s.b_(P,c.u_pitch_with_map),u_is_along_line:new s.b_(P,c.u_is_along_line),u_is_variable_anchor:new s.b_(P,c.u_is_variable_anchor),u_texsize:new s.c3(P,c.u_texsize),u_texture:new s.b_(P,c.u_texture),u_gamma_scale:new s.bq(P,c.u_gamma_scale),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_is_halo:new s.b_(P,c.u_is_halo),u_translation:new s.c3(P,c.u_translation),u_pitched_scale:new s.bq(P,c.u_pitched_scale)}),symbolTextAndIcon:(P,c)=>({u_is_size_zoom_constant:new s.b_(P,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(P,c.u_is_size_feature_constant),u_size_t:new s.bq(P,c.u_size_t),u_size:new s.bq(P,c.u_size),u_camera_to_center_distance:new s.bq(P,c.u_camera_to_center_distance),u_pitch:new s.bq(P,c.u_pitch),u_rotate_symbol:new s.b_(P,c.u_rotate_symbol),u_aspect_ratio:new s.bq(P,c.u_aspect_ratio),u_fade_change:new s.bq(P,c.u_fade_change),u_label_plane_matrix:new s.c0(P,c.u_label_plane_matrix),u_coord_matrix:new s.c0(P,c.u_coord_matrix),u_is_text:new s.b_(P,c.u_is_text),u_pitch_with_map:new s.b_(P,c.u_pitch_with_map),u_is_along_line:new s.b_(P,c.u_is_along_line),u_is_variable_anchor:new s.b_(P,c.u_is_variable_anchor),u_texsize:new s.c3(P,c.u_texsize),u_texsize_icon:new s.c3(P,c.u_texsize_icon),u_texture:new s.b_(P,c.u_texture),u_texture_icon:new s.b_(P,c.u_texture_icon),u_gamma_scale:new s.bq(P,c.u_gamma_scale),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_is_halo:new s.b_(P,c.u_is_halo),u_translation:new s.c3(P,c.u_translation),u_pitched_scale:new s.bq(P,c.u_pitched_scale)}),background:(P,c)=>({u_opacity:new s.bq(P,c.u_opacity),u_color:new s.b$(P,c.u_color)}),backgroundPattern:(P,c)=>({u_opacity:new s.bq(P,c.u_opacity),u_image:new s.b_(P,c.u_image),u_pattern_tl_a:new s.c3(P,c.u_pattern_tl_a),u_pattern_br_a:new s.c3(P,c.u_pattern_br_a),u_pattern_tl_b:new s.c3(P,c.u_pattern_tl_b),u_pattern_br_b:new s.c3(P,c.u_pattern_br_b),u_texsize:new s.c3(P,c.u_texsize),u_mix:new s.bq(P,c.u_mix),u_pattern_size_a:new s.c3(P,c.u_pattern_size_a),u_pattern_size_b:new s.c3(P,c.u_pattern_size_b),u_scale_a:new s.bq(P,c.u_scale_a),u_scale_b:new s.bq(P,c.u_scale_b),u_pixel_coord_upper:new s.c3(P,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(P,c.u_pixel_coord_lower),u_tile_units_to_pixels:new s.bq(P,c.u_tile_units_to_pixels)}),terrain:(P,c)=>({u_texture:new s.b_(P,c.u_texture),u_ele_delta:new s.bq(P,c.u_ele_delta),u_fog_matrix:new s.c0(P,c.u_fog_matrix),u_fog_color:new s.b$(P,c.u_fog_color),u_fog_ground_blend:new s.bq(P,c.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.bq(P,c.u_fog_ground_blend_opacity),u_horizon_color:new s.b$(P,c.u_horizon_color),u_horizon_fog_blend:new s.bq(P,c.u_horizon_fog_blend),u_is_globe_mode:new s.bq(P,c.u_is_globe_mode)}),terrainDepth:(P,c)=>({u_ele_delta:new s.bq(P,c.u_ele_delta)}),terrainCoords:(P,c)=>({u_texture:new s.b_(P,c.u_texture),u_terrain_coords_id:new s.bq(P,c.u_terrain_coords_id),u_ele_delta:new s.bq(P,c.u_ele_delta)}),projectionErrorMeasurement:(P,c)=>({u_input:new s.bq(P,c.u_input),u_output_expected:new s.bq(P,c.u_output_expected)}),atmosphere:(P,c)=>({u_sun_pos:new s.c2(P,c.u_sun_pos),u_atmosphere_blend:new s.bq(P,c.u_atmosphere_blend),u_globe_position:new s.c2(P,c.u_globe_position),u_globe_radius:new s.bq(P,c.u_globe_radius),u_inv_proj_matrix:new s.c0(P,c.u_inv_proj_matrix)}),sky:(P,c)=>({u_sky_color:new s.b$(P,c.u_sky_color),u_horizon_color:new s.b$(P,c.u_horizon_color),u_horizon:new s.c3(P,c.u_horizon),u_horizon_normal:new s.c3(P,c.u_horizon_normal),u_sky_horizon_blend:new s.bq(P,c.u_sky_horizon_blend),u_sky_blend:new s.bq(P,c.u_sky_blend)})};class _d{constructor(c,m,b){this.context=c;const C=c.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const m=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),m.bufferSubData(m.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const bd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class mv{constructor(c,m,b,C){this.length=m.length,this.attributes=b,this.itemSize=m.bytesPerElement,this.dynamicDraw=C,this.context=c;const I=c.gl;this.buffer=I.createBuffer(),c.bindVertexBuffer.set(this.buffer),I.bufferData(I.ARRAY_BUFFER,m.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete m.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){if(c.length!==this.length)throw new Error(`Length of new data is ${c.length}, which doesn't match current length of ${this.length}`);const m=this.context.gl;this.bind(),m.bufferSubData(m.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,m){for(let b=0;b<this.attributes.length;b++){const C=m.attributes[this.attributes[b].name];C!==void 0&&c.enableVertexAttribArray(C)}}setVertexAttribPointers(c,m,b){for(let C=0;C<this.attributes.length;C++){const I=this.attributes[C],L=m.attributes[I.name];L!==void 0&&c.vertexAttribPointer(L,I.components,c[bd[I.type]],!1,this.itemSize,I.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Br{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class bc extends Br{getDefault(){return s.bp.transparent}set(c){const m=this.current;(c.r!==m.r||c.g!==m.g||c.b!==m.b||c.a!==m.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class $m extends Br{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class zm extends Br{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class wy extends Br{getDefault(){return[!0,!0,!0,!0]}set(c){const m=this.current;(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||c[3]!==m[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class xd extends Br{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class Nm extends Br{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class Wf extends Br{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const m=this.current;(c.func!==m.func||c.ref!==m.ref||c.mask!==m.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class La extends Br{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const m=this.current;(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class gv extends Br{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;c?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this.current=c,this.dirty=!1}}class Oy extends Br{getDefault(){return[0,1]}set(c){const m=this.current;(c[0]!==m[0]||c[1]!==m[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class $a extends Br{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;c?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this.current=c,this.dirty=!1}}class xc extends Br{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class aa extends Br{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;c?m.enable(m.BLEND):m.disable(m.BLEND),this.current=c,this.dirty=!1}}class cu extends Br{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const m=this.current;(c[0]!==m[0]||c[1]!==m[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class wd extends Br{getDefault(){return s.bp.transparent}set(c){const m=this.current;(c.r!==m.r||c.g!==m.g||c.b!==m.b||c.a!==m.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Od extends Br{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class Bm extends Br{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;c?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this.current=c,this.dirty=!1}}class mh extends Br{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class hl extends Br{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class yv extends Br{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class Hf extends Br{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class sr extends Br{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const m=this.current;(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||c[3]!==m[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Sy extends Br{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class za extends Br{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.bindRenderbuffer(m.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Cy extends Br{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.bindTexture(m.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class Na extends Br{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.bindBuffer(m.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class ex extends Br{getDefault(){return null}set(c){const m=this.gl;m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Ty extends Br{getDefault(){return null}set(c){var m;if(c===this.current&&!this.dirty)return;const b=this.gl;ll(b)?b.bindVertexArray(c):(m=b.getExtension("OES_vertex_array_object"))===null||m===void 0||m.bindVertexArrayOES(c),this.current=c,this.dirty=!1}}class gh extends Br{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class vv extends Br{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class ky extends Br{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const m=this.gl;m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class yh extends Br{constructor(c,m){super(c),this.context=c,this.parent=m}getDefault(){return null}}class Gf extends yh{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class la extends yh{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class vh extends yh{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const m=this.gl;m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,c),this.current=c,this.dirty=!1}}const _h="Framebuffer is not complete";class Sd{constructor(c,m,b,C,I){this.context=c,this.width=m,this.height=b;const L=c.gl,j=this.framebuffer=L.createFramebuffer();if(this.colorAttachment=new Gf(c,j),C)this.depthAttachment=I?new vh(c,j):new la(c,j);else if(I)throw new Error("Stencil cannot be set without depth");if(L.checkFramebufferStatus(L.FRAMEBUFFER)!==L.FRAMEBUFFER_COMPLETE)throw new Error(_h)}destroy(){const c=this.context.gl,m=this.colorAttachment.get();if(m&&c.deleteTexture(m),this.depthAttachment){const b=this.depthAttachment.get();b&&c.deleteRenderbuffer(b)}c.deleteFramebuffer(this.framebuffer)}}class bh{constructor(c){var m,b;if(this.gl=c,this.clearColor=new bc(this),this.clearDepth=new $m(this),this.clearStencil=new zm(this),this.colorMask=new wy(this),this.depthMask=new xd(this),this.stencilMask=new Nm(this),this.stencilFunc=new Wf(this),this.stencilOp=new La(this),this.stencilTest=new gv(this),this.depthRange=new Oy(this),this.depthTest=new $a(this),this.depthFunc=new xc(this),this.blend=new aa(this),this.blendFunc=new cu(this),this.blendColor=new wd(this),this.blendEquation=new Od(this),this.cullFace=new Bm(this),this.cullFaceSide=new mh(this),this.frontFace=new hl(this),this.program=new yv(this),this.activeTexture=new Hf(this),this.viewport=new sr(this),this.bindFramebuffer=new Sy(this),this.bindRenderbuffer=new za(this),this.bindTexture=new Cy(this),this.bindVertexBuffer=new Na(this),this.bindElementBuffer=new ex(this),this.bindVertexArray=new Ty(this),this.pixelStoreUnpack=new gh(this),this.pixelStoreUnpackPremultiplyAlpha=new vv(this),this.pixelStoreUnpackFlipY=new ky(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE),ll(c)){this.HALF_FLOAT=c.HALF_FLOAT;const C=c.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(m=c.RGBA16F)!==null&&m!==void 0?m:C?.RGBA16F_EXT,this.RGB16F=(b=c.RGB16F)!==null&&b!==void 0?b:C?.RGB16F_EXT,c.getExtension("EXT_color_buffer_float")}else{c.getExtension("EXT_color_buffer_half_float"),c.getExtension("OES_texture_half_float_linear");const C=c.getExtension("OES_texture_half_float");this.HALF_FLOAT=C?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,m){return new _d(this,c,m)}createVertexBuffer(c,m,b){return new mv(this,c,m,b)}createRenderbuffer(c,m,b){const C=this.gl,I=C.createRenderbuffer();return this.bindRenderbuffer.set(I),C.renderbufferStorage(C.RENDERBUFFER,c,m,b),this.bindRenderbuffer.set(null),I}createFramebuffer(c,m,b,C){return new Sd(this,c,m,b,C)}clear({color:c,depth:m,stencil:b}){const C=this.gl;let I=0;c&&(I|=C.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(I|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),b!==void 0&&(I|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),C.clear(I)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){s.bR(c.blendFunction,ni.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}createVertexArray(){var c;return ll(this.gl)?this.gl.createVertexArray():(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.createVertexArrayOES()}deleteVertexArray(c){var m;return ll(this.gl)?this.gl.deleteVertexArray(c):(m=this.gl.getExtension("OES_vertex_array_object"))===null||m===void 0?void 0:m.deleteVertexArrayOES(c)}unbindVAO(){this.bindVertexArray.set(null)}}let Xo;function is(P,c,m,b,C){const I=P.context,L=P.transform,j=I.gl,W=P.useProgram("collisionBox"),K=[];let te=0,he=0;for(let De=0;De<b.length;De++){const je=b[De],He=c.getTile(je).getBucket(m);if(!He)continue;const Fe=C?He.textCollisionBox:He.iconCollisionBox,We=He.collisionCircleArray;We.length>0&&(K.push({circleArray:We,circleOffset:he,coord:je}),te+=We.length/4,he=te),Fe&&W.draw(I,j.LINES,or.disabled,Rr.disabled,P.colorModeForRenderPass(),vr.disabled,dh(P.transform),P.style.map.terrain&&P.style.map.terrain.getTerrainData(je),L.getProjectionData({overscaledTileID:je,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),m.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,null,P.transform.zoom,null,null,Fe.collisionVertexBuffer)}if(!C||!K.length)return;const ue=P.useProgram("collisionCircle"),ge=new s.ca;ge.resize(4*te),ge._trim();let Oe=0;for(const De of K)for(let je=0;je<De.circleArray.length/4;je++){const He=4*je,Fe=De.circleArray[He+0],We=De.circleArray[He+1],Ke=De.circleArray[He+2],Ze=De.circleArray[He+3];ge.emplace(Oe++,Fe,We,Ke,Ze,0),ge.emplace(Oe++,Fe,We,Ke,Ze,1),ge.emplace(Oe++,Fe,We,Ke,Ze,2),ge.emplace(Oe++,Fe,We,Ke,Ze,3)}(!Xo||Xo.length<2*te)&&(Xo=(function(De){const je=2*De,He=new s.cc;He.resize(je),He._trim();for(let Fe=0;Fe<je;Fe++){const We=6*Fe;He.uint16[We+0]=4*Fe+0,He.uint16[We+1]=4*Fe+1,He.uint16[We+2]=4*Fe+2,He.uint16[We+3]=4*Fe+2,He.uint16[We+4]=4*Fe+3,He.uint16[We+5]=4*Fe+0}return He})(te));const Ie=I.createIndexBuffer(Xo,!0),Le=I.createVertexBuffer(ge,s.cb.members,!0);for(const De of K){const je=dv(P.transform);ue.draw(I,j.TRIANGLES,or.disabled,Rr.disabled,P.colorModeForRenderPass(),vr.disabled,je,P.style.map.terrain&&P.style.map.terrain.getTerrainData(De.coord),null,m.id,Le,Ie,s.aX.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,P.transform.zoom,null,null,null)}Le.destroy(),Ie.destroy()}const wc=s.ar(new Float32Array(16));function Oc(P,c,m,b,C,I){const{horizontalAlign:L,verticalAlign:j}=s.aS(P);return new s.P((-(L-.5)*c/C+b[0])*I,(-(j-.5)*m/C+b[1])*I)}function ma(P,c,m,b,C,I){const L=c.tileAnchorPoint.add(new s.P(c.translation[0],c.translation[1]));if(c.pitchWithMap){let j=b.mult(I);m||(j=j.rotate(-C));const W=L.add(j);return nr(W.x,W.y,c.pitchedLabelPlaneMatrix,c.getElevation).point}if(m){const j=Mr(c.tileAnchorPoint.x+1,c.tileAnchorPoint.y,c).point.sub(P),W=Math.atan(j.y/j.x)+(j.x<0?Math.PI:0);return P.add(b.rotate(W))}return P.add(b)}function uu(P,c,m,b,C,I,L,j,W,K,te,he){const ue=P.text.placedSymbolArray,ge=P.text.dynamicLayoutVertexArray,Oe=P.icon.dynamicLayoutVertexArray,Ie={};ge.clear();for(let Le=0;Le<ue.length;Le++){const De=ue.get(Le),je=De.hidden||!De.crossTileID||P.allowVerticalPlacement&&!De.placedOrientation?null:b[De.crossTileID];if(je){const He=new s.P(De.anchorX,De.anchorY),Fe={getElevation:he,width:C.width,height:C.height,pitchedLabelPlaneMatrix:I,pitchWithMap:m,transform:C,tileAnchorPoint:He,translation:K,unwrappedTileID:te},We=m?Lf(He.x,He.y,Fe):Mr(He.x,He.y,Fe),Ke=cd(C.cameraToCenterDistance,We.signedDistanceFromCamera);let Ze=s.aA(P.textSizeData,j,De)*Ke/s.aM;m&&(Ze*=P.tilePixelRatio/L);const{width:nt,height:yt,anchor:ht,textOffset:pt,textBoxScale:gt}=je,Kt=Oc(ht,nt,yt,pt,gt,Ze),en=C.getPitchedTextCorrection(He.x+K[0],He.y+K[1],te),zt=ma(We.point,Fe,c,Kt,-C.bearingInRadians,en),ln=P.allowVerticalPlacement&&De.placedOrientation===s.az.vertical?Math.PI/2:0;for(let Jn=0;Jn<De.numGlyphs;Jn++)s.aG(ge,zt,ln);W&&De.associatedIconIndex>=0&&(Ie[De.associatedIconIndex]={shiftedAnchor:zt,angle:ln})}else yc(De.numGlyphs,ge)}if(W){Oe.clear();const Le=P.icon.placedSymbolArray;for(let De=0;De<Le.length;De++){const je=Le.get(De);if(je.hidden)yc(je.numGlyphs,Oe);else{const He=Ie[De];if(He)for(let Fe=0;Fe<je.numGlyphs;Fe++)s.aG(Oe,He.shiftedAnchor,He.angle);else yc(je.numGlyphs,Oe)}}P.icon.dynamicLayoutVertexBuffer.updateData(Oe)}P.text.dynamicLayoutVertexBuffer.updateData(ge)}function _v(P,c,m){return m.iconsInText&&c?"symbolTextAndIcon":P?"symbolSDF":"symbolIcon"}function Cd(P,c,m,b,C,I,L,j,W,K,te,he,ue){const ge=P.context,Oe=ge.gl,Ie=P.transform,Le=j==="map",De=W==="map",je=j!=="viewport"&&m.layout.get("symbol-placement")!=="point",He=Le&&!De&&!je,Fe=!m.layout.get("symbol-sort-key").isConstant();let We=!1;const Ke=P.getDepthModeForSublayer(0,or.ReadOnly),Ze=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),nt=[],yt=Ie.getCircleRadiusCorrection();for(const ht of b){const pt=c.getTile(ht),gt=pt.getBucket(m);if(!gt)continue;const Kt=C?gt.text:gt.icon;if(!Kt||!Kt.segments.get().length||!Kt.hasVisibleVertices)continue;const en=Kt.programConfigurations.get(m.id),zt=C||gt.sdfIcons,ln=C?gt.textSizeData:gt.iconSizeData,Jn=De||Ie.pitch!==0,Hr=P.useProgram(_v(zt,C,gt),en),vi=s.ay(ln,Ie.zoom),hi=P.style.map.terrain&&P.style.map.terrain.getTerrainData(ht);let Ei,ri,qi,Ai,ss=[0,0],so=null;if(C)ri=pt.glyphAtlasTexture,qi=Oe.LINEAR,Ei=pt.glyphAtlasTexture.size,gt.iconsInText&&(ss=pt.imageAtlasTexture.size,so=pt.imageAtlasTexture,Ai=Jn||P.options.rotating||P.options.zooming||ln.kind==="composite"||ln.kind==="camera"?Oe.LINEAR:Oe.NEAREST);else{const Yr=m.layout.get("icon-size").constantOr(0)!==1||gt.iconsNeedLinear;ri=pt.imageAtlasTexture,qi=zt||P.options.rotating||P.options.zooming||Yr||Jn?Oe.LINEAR:Oe.NEAREST,Ei=pt.imageAtlasTexture.size}const ao=s.aN(pt,1,P.transform.zoom),as=Ra(Le,P.transform,ao),$c=s.N();s.aB($c,as);const zc=uy(De,Le,P.transform,ao),Gl=s.aO(Ie,pt,I,L),_a=Ie.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!ue,applyTerrainMatrix:!0}),Dd=Ze&&gt.hasTextData(),op=m.layout.get("icon-text-fit")!=="none"&&Dd&&gt.hasIconData();if(je){const Yr=P.style.map.terrain?(Mo,Fo)=>P.style.map.terrain.getElevation(ht,Mo,Fo):null,di=m.layout.get("text-rotation-alignment")==="map";su(gt,P,C,as,$c,De,K,di,ht.toUnwrapped(),Ie.width,Ie.height,Gl,Yr)}const Xl=C&&Ze||op,ba=je||Xl?wc:De?as:P.transform.clipSpaceToPixelsMatrix,Qa=zt&&m.paint.get(C?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let yl;yl=zt?gt.iconsInText?ul(ln.kind,vi,He,De,je,Xl,P,ba,zc,Gl,Ei,ss,yt):by(ln.kind,vi,He,De,je,Xl,P,ba,zc,Gl,C,Ei,0,yt):Im(ln.kind,vi,He,De,je,Xl,P,ba,zc,Gl,C,Ei,yt);const vl={program:Hr,buffers:Kt,uniformValues:yl,projectionData:_a,atlasTexture:ri,atlasTextureIcon:so,atlasInterpolation:qi,atlasInterpolationIcon:Ai,isSDF:zt,hasHalo:Qa};if(Fe&&gt.canOverlap){We=!0;const Yr=Kt.segments.get();for(const di of Yr)nt.push({segments:new s.aX([di]),sortKey:di.sortKey,state:vl,terrainData:hi})}else nt.push({segments:Kt.segments,sortKey:0,state:vl,terrainData:hi})}We&&nt.sort(((ht,pt)=>ht.sortKey-pt.sortKey));for(const ht of nt){const pt=ht.state;if(ge.activeTexture.set(Oe.TEXTURE0),pt.atlasTexture.bind(pt.atlasInterpolation,Oe.CLAMP_TO_EDGE),pt.atlasTextureIcon&&(ge.activeTexture.set(Oe.TEXTURE1),pt.atlasTextureIcon&&pt.atlasTextureIcon.bind(pt.atlasInterpolationIcon,Oe.CLAMP_TO_EDGE)),pt.isSDF){const gt=pt.uniformValues;pt.hasHalo&&(gt.u_is_halo=1,Xf(pt.buffers,ht.segments,m,P,pt.program,Ke,te,he,gt,pt.projectionData,ht.terrainData)),gt.u_is_halo=0}Xf(pt.buffers,ht.segments,m,P,pt.program,Ke,te,he,pt.uniformValues,pt.projectionData,ht.terrainData)}}function Xf(P,c,m,b,C,I,L,j,W,K,te){const he=b.context;C.draw(he,he.gl.TRIANGLES,I,L,j,vr.backCCW,W,te,K,m.id,P.layoutVertexBuffer,P.indexBuffer,c,m.paint,b.transform.zoom,P.programConfigurations.get(m.id),P.dynamicLayoutVertexBuffer,P.opacityVertexBuffer)}function bv(P,c,m,b,C){const I=P.context,L=I.gl,j=Rr.disabled,W=new ni([L.ONE,L.ONE],s.bp.transparent,[!0,!0,!0,!0]),K=c.getBucket(m);if(!K)return;const te=b.key;let he=m.heatmapFbos.get(te);he||(he=ui(I,c.tileSize,c.tileSize),m.heatmapFbos.set(te,he)),I.bindFramebuffer.set(he.framebuffer),I.viewport.set([0,0,c.tileSize,c.tileSize]),I.clear({color:s.bp.transparent});const ue=K.programConfigurations.get(m.id),ge=P.useProgram("heatmap",ue,!C),Oe=P.transform.getProjectionData({overscaledTileID:c.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ie=P.style.map.terrain.getTerrainData(b);ge.draw(I,L.TRIANGLES,or.disabled,j,W,vr.disabled,fh(c,P.transform.zoom,m.paint.get("heatmap-intensity"),1),Ie,Oe,m.id,K.layoutVertexBuffer,K.indexBuffer,K.segments,m.paint,P.transform.zoom,ue)}function os(P,c,m,b,C){const I=P.context,L=I.gl,j=P.transform;I.setColorMode(P.colorModeForRenderPass());const W=kr(I,c),K=m.key,te=c.heatmapFbos.get(K);if(!te)return;I.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,te.colorAttachment.get()),I.activeTexture.set(L.TEXTURE1),W.bind(L.LINEAR,L.CLAMP_TO_EDGE);const he=j.getProjectionData({overscaledTileID:m,applyTerrainMatrix:C,applyGlobeMatrix:!b});P.useProgram("heatmapTexture").draw(I,L.TRIANGLES,or.disabled,Rr.disabled,P.colorModeForRenderPass(),vr.disabled,fv(P,c,0,1),null,he,c.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments,c.paint,j.zoom),te.destroy(),c.heatmapFbos.delete(K)}function ui(P,c,m){var b,C;const I=P.gl,L=I.createTexture();I.bindTexture(I.TEXTURE_2D,L),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR);const j=(b=P.HALF_FLOAT)!==null&&b!==void 0?b:I.UNSIGNED_BYTE,W=(C=P.RGBA16F)!==null&&C!==void 0?C:I.RGBA;I.texImage2D(I.TEXTURE_2D,0,W,c,m,0,I.RGBA,j,null);const K=P.createFramebuffer(c,m,!1,!1);return K.colorAttachment.set(L),K}function kr(P,c){return c.colorRampTexture||(c.colorRampTexture=new s.T(P,c.colorRamp,P.gl.RGBA)),c.colorRampTexture}function hu(P,c,m,b,C,I,L,j){let W=256;if(C.stepInterpolant){const K=c.getSource().maxzoom,te=L.canonical.z===K?Math.ceil(1<<P.transform.maxZoom-L.canonical.z):1;W=s.an(s.ce(I.maxLineLength/s.a5*1024*te),256,m.maxTextureSize)}return j.gradient=s.cf({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:W,image:j.gradient||void 0,clips:I.lineClipsArray}),j.texture?j.texture.update(j.gradient):j.texture=new s.T(m,j.gradient,b.RGBA),j.version=C.gradientVersion,j.texture}function Ba(P,c,m,b,C){P.activeTexture.set(c.TEXTURE0),m.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),b.updatePaintBuffers(C)}function Ui(P,c,m,b,C,I){(C||P.lineAtlas.dirty)&&(c.activeTexture.set(m.TEXTURE0),P.lineAtlas.bind(c)),b.updatePaintBuffers(I)}function ga(P,c,m,b,C,I,L){const j=I.gradients[C.id];let W=j.texture;C.gradientVersion!==j.version&&(W=hu(P,c,m,b,C,I,L,j)),m.activeTexture.set(b.TEXTURE0),W.bind(C.stepInterpolant?b.NEAREST:b.LINEAR,b.CLAMP_TO_EDGE)}function ya(P,c,m,b,C,I,L,j,W){const K=I.gradients[C.id];let te=K.texture;C.gradientVersion!==K.version&&(te=hu(P,c,m,b,C,I,L,K)),m.activeTexture.set(b.TEXTURE0),te.bind(C.stepInterpolant?b.NEAREST:b.LINEAR,b.CLAMP_TO_EDGE),m.activeTexture.set(b.TEXTURE1),P.lineAtlas.bind(m),j.updatePaintBuffers(W)}function Fm(P,c,m,b,C){if(!m||!b||!b.imageAtlas)return;const I=b.imageAtlas.patternPositions;let L=I[m.to.toString()],j=I[m.from.toString()];if(!L&&j&&(L=j),!j&&L&&(j=L),!L||!j){const W=C.getPaintProperty(c);L=I[W],j=I[W]}L&&j&&P.setConstantPatternPositions(L,j)}function Sc(P,c,m,b,C,I,L,j){const W=P.context.gl,K="fill-pattern",te=m.paint.get(K),he=te&&te.constantOr(1),ue=m.getCrossfadeParameters();let ge,Oe,Ie,Le,De;const je=P.transform,He=m.paint.get("fill-translate"),Fe=m.paint.get("fill-translate-anchor");L?(Oe=he&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ge=W.LINES):(Oe=he?"fillPattern":"fill",ge=W.TRIANGLES);const We=te.constantOr(null);for(const Ke of b){const Ze=c.getTile(Ke);if(he&&!Ze.patternsLoaded())continue;const nt=Ze.getBucket(m);if(!nt)continue;const yt=nt.programConfigurations.get(m.id),ht=P.useProgram(Oe,yt),pt=P.style.map.terrain&&P.style.map.terrain.getTerrainData(Ke);he&&(P.context.activeTexture.set(W.TEXTURE0),Ze.imageAtlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),yt.updatePaintBuffers(ue)),Fm(yt,K,We,Ze,m);const gt=je.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),Kt=s.aO(je,Ze,He,Fe);if(L){Le=nt.indexBuffer2,De=nt.segments2;const zt=[W.drawingBufferWidth,W.drawingBufferHeight];Ie=Oe==="fillOutlinePattern"&&he?Gb(P,ue,Ze,zt,Kt):qf(zt,Kt)}else Le=nt.indexBuffer,De=nt.segments,Ie=he?vd(P,ue,Ze,Kt):{u_fill_translate:Kt};const en=P.stencilModeForClipping(Ke);ht.draw(P.context,ge,C,en,I,vr.backCCW,Ie,pt,gt,m.id,nt.layoutVertexBuffer,Le,De,m.paint,P.transform.zoom,yt)}}function Cc(P,c,m,b,C,I,L,j){const W=P.context,K=W.gl,te="fill-extrusion-pattern",he=m.paint.get(te),ue=he.constantOr(1),ge=m.getCrossfadeParameters(),Oe=m.paint.get("fill-extrusion-opacity"),Ie=he.constantOr(null),Le=P.transform;for(const De of b){const je=c.getTile(De),He=je.getBucket(m);if(!He)continue;const Fe=P.style.map.terrain&&P.style.map.terrain.getTerrainData(De),We=He.programConfigurations.get(m.id),Ke=P.useProgram(ue?"fillExtrusionPattern":"fillExtrusion",We);ue&&(P.context.activeTexture.set(K.TEXTURE0),je.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),We.updatePaintBuffers(ge));const Ze=Le.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!j,applyTerrainMatrix:!0});Fm(We,te,Ie,je,m);const nt=s.aO(Le,je,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),yt=m.paint.get("fill-extrusion-vertical-gradient"),ht=ue?yy(P,yt,Oe,nt,De,ge,je):gy(P,yt,Oe,nt);Ke.draw(W,W.gl.TRIANGLES,C,I,L,vr.backCCW,ht,Fe,Ze,m.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,m.paint,P.transform.zoom,We,P.style.map.terrain&&He.centroidVertexBuffer)}}function Tc(P,c,m,b,C,I,L,j,W){var K;const te=P.style.projection,he=P.context,ue=P.transform,ge=he.gl,Oe=[`#define NUM_ILLUMINATION_SOURCES ${m.paint.get("hillshade-highlight-color").values.length}`],Ie=P.useProgram("hillshade",null,!1,Oe),Le=!P.options.moving;for(const De of b){const je=c.getTile(De),He=je.fbo;if(!He)continue;const Fe=te.getMeshFromTileID(he,De.canonical,j,!0,"raster"),We=(K=P.style.map.terrain)===null||K===void 0?void 0:K.getTerrainData(De);he.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,He.colorAttachment.get());const Ke=ue.getProjectionData({overscaledTileID:De,aligned:Le,applyGlobeMatrix:!W,applyTerrainMatrix:!0});Ie.draw(he,ge.TRIANGLES,I,C[De.overscaledZ],L,vr.backCCW,Pm(P,je,m),We,Ke,m.id,Fe.vertexBuffer,Fe.indexBuffer,Fe.segments)}}function du(P,c,m,b,C,I,L,j,W){var K;const te=P.style.projection,he=P.context,ue=P.transform,ge=he.gl,Oe=P.useProgram("colorRelief"),Ie=!P.options.moving;let Le=!0,De=0;for(const je of b){const He=c.getTile(je),Fe=He.dem;if(Le){const ht=ge.getParameter(ge.MAX_TEXTURE_SIZE),{elevationTexture:pt,colorTexture:gt}=m.getColorRampTextures(he,ht,Fe.getUnpackVector());he.activeTexture.set(ge.TEXTURE1),pt.bind(ge.NEAREST,ge.CLAMP_TO_EDGE),he.activeTexture.set(ge.TEXTURE4),gt.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Le=!1,De=pt.size[0]}if(!Fe||!Fe.data)continue;const We=Fe.stride,Ke=Fe.getPixels();if(he.activeTexture.set(ge.TEXTURE0),he.pixelStoreUnpackPremultiplyAlpha.set(!1),He.demTexture=He.demTexture||P.getTileTexture(We),He.demTexture){const ht=He.demTexture;ht.update(Ke,{premultiply:!1}),ht.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)}else He.demTexture=new s.T(he,Ke,ge.RGBA,{premultiply:!1}),He.demTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE);const Ze=te.getMeshFromTileID(he,je.canonical,j,!0,"raster"),nt=(K=P.style.map.terrain)===null||K===void 0?void 0:K.getTerrainData(je),yt=ue.getProjectionData({overscaledTileID:je,aligned:Ie,applyGlobeMatrix:!W,applyTerrainMatrix:!0});Oe.draw(he,ge.TRIANGLES,I,C[je.overscaledZ],L,vr.backCCW,Yb(m,He.dem,De),nt,yt,m.id,Ze.vertexBuffer,Ze.indexBuffer,Ze.segments)}}const fu=[new s.P(0,0),new s.P(s.a5,0),new s.P(s.a5,s.a5),new s.P(0,s.a5)];function dl(P,c,m,b,C,I,L,j,W=!1,K=!1){const te=b[b.length-1].overscaledZ,he=P.context,ue=he.gl,ge=P.useProgram("raster"),Oe=P.transform,Ie=P.style.projection,Le=P.colorModeForRenderPass(),De=!P.options.moving,je=m.paint.get("raster-opacity"),He=m.paint.get("raster-resampling"),Fe=m.paint.get("raster-fade-duration"),We=!!P.style.map.terrain;for(const Ke of b){const Ze=P.getDepthModeForSublayer(Ke.overscaledZ-te,je===1?or.ReadWrite:or.ReadOnly,ue.LESS),nt=c.getTile(Ke),yt=He==="nearest"?ue.NEAREST:ue.LINEAR;he.activeTexture.set(ue.TEXTURE0),nt.texture.bind(yt,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST),he.activeTexture.set(ue.TEXTURE1);const{parentTile:ht,parentScaleBy:pt,parentTopLeft:gt,fadeValues:Kt}=kc(nt,c,Fe,We);nt.fadeOpacity=Kt.tileOpacity,ht?(ht.fadeOpacity=Kt.parentTileOpacity,ht.texture.bind(yt,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST)):nt.texture.bind(yt,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST),nt.texture.useMipmap&&he.extTextureFilterAnisotropic&&P.transform.pitch>20&&ue.texParameterf(ue.TEXTURE_2D,he.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,he.extTextureFilterAnisotropicMax);const en=P.style.map.terrain&&P.style.map.terrain.getTerrainData(Ke),zt=Oe.getProjectionData({overscaledTileID:Ke,aligned:De,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),ln=vy(gt,pt,Kt.fadeMix,m,j),Jn=Ie.getMeshFromTileID(he,Ke.canonical,I,L,"raster");ge.draw(he,ue.TRIANGLES,Ze,C?C[Ke.overscaledZ]:Rr.disabled,Le,W?vr.frontCCW:vr.backCCW,ln,en,zt,m.id,Jn.vertexBuffer,Jn.indexBuffer,Jn.segments)}}function kc(P,c,m,b){const C={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(m===0||b)return C;if(P.fadingParentID){const I=c.getLoadedTile(P.fadingParentID);if(!I)return C;const L=Math.pow(2,I.tileID.overscaledZ-P.tileID.overscaledZ),j=[P.tileID.canonical.x*L%1,P.tileID.canonical.y*L%1],W=(function(K,te,he){const ue=A(),ge=(ue-te.timeAdded)/he,Oe=K.fadingDirection===at.Incoming,Ie=s.an((ue-K.timeAdded)/he,0,1),Le=s.an(1-ge,0,1),De=Oe?Ie:Le;return{tileOpacity:De,parentTileOpacity:Oe?Le:Ie,fadeMix:{opacity:1,mix:1-De}}})(P,I,m);return{parentTile:I,parentScaleBy:L,parentTopLeft:j,fadeValues:W}}if(P.selfFading){const I=(function(L,j){const W=(A()-L.timeAdded)/j,K=s.an(W,0,1);return{tileOpacity:K,fadeMix:{opacity:K,mix:0}}})(P,m);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:I}}return C}const pu=new s.bp(1,0,0,1),Ec=new s.bp(0,1,0,1),Ey=new s.bp(0,0,1,1),Ay=new s.bp(1,0,1,1),Fa=new s.bp(0,1,1,1);function Yf(P,c,m,b){Po(P,0,c+m/2,P.transform.width,m,b)}function mu(P,c,m,b){Po(P,c-m/2,0,m,P.transform.height,b)}function Po(P,c,m,b,C,I){const L=P.context,j=L.gl;j.enable(j.SCISSOR_TEST),j.scissor(c*P.pixelRatio,m*P.pixelRatio,b*P.pixelRatio,C*P.pixelRatio),L.clear({color:I}),j.disable(j.SCISSOR_TEST)}function jm(P,c,m){const b=P.context,C=b.gl,I=P.useProgram("debug"),L=or.disabled,j=Rr.disabled,W=P.colorModeForRenderPass(),K="$debug",te=P.style.map.terrain&&P.style.map.terrain.getTerrainData(m);b.activeTexture.set(C.TEXTURE0);const he=c.getTileByID(m.key).latestRawTileData,ue=Math.floor((he&&he.byteLength||0)/1024),ge=c.getTile(m).tileSize,Oe=512/Math.min(ge,512)*(m.overscaledZ/P.transform.zoom)*.5;let Ie=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(Ie+=` => ${m.overscaledZ}`),(function(De,je){De.initDebugOverlayCanvas();const He=De.debugOverlayCanvas,Fe=De.context.gl,We=De.debugOverlayCanvas.getContext("2d");We.clearRect(0,0,He.width,He.height),We.shadowColor="white",We.shadowBlur=2,We.lineWidth=1.5,We.strokeStyle="white",We.textBaseline="top",We.font="bold 36px Open Sans, sans-serif",We.fillText(je,5,5),We.strokeText(je,5,5),De.debugOverlayTexture.update(He),De.debugOverlayTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE)})(P,`${Ie} ${ue}kB`);const Le=P.transform.getProjectionData({overscaledTileID:m,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(b,C.TRIANGLES,L,j,ni.alphaBlended,vr.disabled,Am(s.bp.transparent,Oe),null,Le,K,P.debugBuffer,P.quadTriangleIndexBuffer,P.debugSegments),I.draw(b,C.LINE_STRIP,L,j,W,vr.disabled,Am(s.bp.red),te,Le,K,P.debugBuffer,P.tileBorderIndexBuffer,P.debugSegments)}function Py(P,c,m,b){const{isRenderingGlobe:C}=b,I=P.context,L=I.gl,j=P.transform,W=P.colorModeForRenderPass(),K=P.getDepthModeFor3D(),te=P.useProgram("terrain");I.bindFramebuffer.set(null),I.viewport.set([0,0,P.width,P.height]);for(const he of m){const ue=c.getTerrainMesh(he.tileID),ge=P.renderToTexture.getTexture(he),Oe=c.getTerrainData(he.tileID);I.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,ge.texture);const Ie=c.getMeshFrameDelta(j.zoom),Le=j.calculateFogMatrix(he.tileID.toUnwrapped()),De=qb(Ie,Le,P.style.sky,j.pitch,C),je=j.getProjectionData({overscaledTileID:he.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});te.draw(I,L.TRIANGLES,K,Rr.disabled,W,vr.backCCW,De,Oe,je,"terrain",ue.vertexBuffer,ue.indexBuffer,ue.segments)}}function xv(P,c){if(!c.mesh){const m=new s.aW;m.emplaceBack(-1,-1),m.emplaceBack(1,-1),m.emplaceBack(1,1),m.emplaceBack(-1,1);const b=new s.aY;b.emplaceBack(0,1,2),b.emplaceBack(0,2,3),c.mesh=new ci(P.createVertexBuffer(m,al.members),P.createIndexBuffer(b),s.aX.simpleSegment(0,0,m.length,b.length))}return c.mesh}class tx{constructor(c,m){this.context=new bh(c),this.transform=m,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=yi.maxOverzooming+yi.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ho}resize(c,m,b){if(this.width=Math.floor(c*b),this.height=Math.floor(m*b),this.pixelRatio=b,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const C of this.style._order)this.style._layers[C].resize()}setup(){const c=this.context,m=new s.aW;m.emplaceBack(0,0),m.emplaceBack(s.a5,0),m.emplaceBack(0,s.a5),m.emplaceBack(s.a5,s.a5),this.tileExtentBuffer=c.createVertexBuffer(m,al.members),this.tileExtentSegments=s.aX.simpleSegment(0,0,4,2);const b=new s.aW;b.emplaceBack(0,0),b.emplaceBack(s.a5,0),b.emplaceBack(0,s.a5),b.emplaceBack(s.a5,s.a5),this.debugBuffer=c.createVertexBuffer(b,al.members),this.debugSegments=s.aX.simpleSegment(0,0,4,5);const C=new s.ch;C.emplaceBack(0,0,0,0),C.emplaceBack(s.a5,0,s.a5,0),C.emplaceBack(0,s.a5,0,s.a5),C.emplaceBack(s.a5,s.a5,s.a5,s.a5),this.rasterBoundsBuffer=c.createVertexBuffer(C,Zb.members),this.rasterBoundsSegments=s.aX.simpleSegment(0,0,4,2);const I=new s.aW;I.emplaceBack(0,0),I.emplaceBack(s.a5,0),I.emplaceBack(0,s.a5),I.emplaceBack(s.a5,s.a5),this.rasterBoundsBufferPosOnly=c.createVertexBuffer(I,al.members),this.rasterBoundsSegmentsPosOnly=s.aX.simpleSegment(0,0,4,5);const L=new s.aW;L.emplaceBack(0,0),L.emplaceBack(1,0),L.emplaceBack(0,1),L.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(L,al.members),this.viewportSegments=s.aX.simpleSegment(0,0,4,2);const j=new s.ci;j.emplaceBack(0),j.emplaceBack(1),j.emplaceBack(3),j.emplaceBack(2),j.emplaceBack(0),this.tileBorderIndexBuffer=c.createIndexBuffer(j);const W=new s.aY;W.emplaceBack(1,0,2),W.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(W);const K=this.context.gl;this.stencilClearMode=new Rr({func:K.ALWAYS,mask:0},0,255,K.ZERO,K.ZERO,K.ZERO),this.tileExtentMesh=new ci(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const c=this.context,m=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const b=s.N();s.c7(b,0,this.width,this.height,0,0,1),s.Q(b,b,[m.drawingBufferWidth,m.drawingBufferHeight,0]);const C={mainMatrix:b,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:b};this.useProgram("clippingMask",null,!0).draw(c,m.TRIANGLES,or.disabled,this.stencilClearMode,ni.disabled,vr.disabled,null,null,C,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(c,m,b){if(this.currentStencilSource===c.source||!c.isTileClipped()||!m||!m.length)return;this.currentStencilSource=c.source,this.nextStencilID+m.length>256&&this.clearStencil();const C=this.context;C.setColorMode(ni.disabled),C.setDepthMode(or.disabled);const I={};for(const L of m)I[L.key]=this.nextStencilID++;this._renderTileMasks(I,m,b,!0),this._renderTileMasks(I,m,b,!1),this._tileClippingMaskIDs=I}_renderTileMasks(c,m,b,C){const I=this.context,L=I.gl,j=this.style.projection,W=this.transform,K=this.useProgram("clippingMask");for(const te of m){const he=c[te.key],ue=this.style.map.terrain&&this.style.map.terrain.getTerrainData(te),ge=j.getMeshFromTileID(this.context,te.canonical,C,!0,"stencil"),Oe=W.getProjectionData({overscaledTileID:te,applyGlobeMatrix:!b,applyTerrainMatrix:!0});K.draw(I,L.TRIANGLES,or.disabled,new Rr({func:L.ALWAYS,mask:0},he,255,L.KEEP,L.KEEP,L.REPLACE),ni.disabled,b?vr.disabled:vr.backCCW,null,ue,Oe,"$clipping",ge.vertexBuffer,ge.indexBuffer,ge.segments)}}_renderTilesDepthBuffer(){const c=this.context,m=c.gl,b=this.style.projection,C=this.transform,I=this.useProgram("depth"),L=this.getDepthModeFor3D(),j=to(C,{tileSize:C.tileSize});for(const W of j){const K=this.style.map.terrain&&this.style.map.terrain.getTerrainData(W),te=b.getMeshFromTileID(this.context,W.canonical,!0,!0,"raster"),he=C.getProjectionData({overscaledTileID:W,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(c,m.TRIANGLES,L,Rr.disabled,ni.disabled,vr.backCCW,null,K,he,"$clipping",te.vertexBuffer,te.indexBuffer,te.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,m=this.context.gl;return new Rr({func:m.NOTEQUAL,mask:255},c,255,m.KEEP,m.KEEP,m.REPLACE)}stencilModeForClipping(c){const m=this.context.gl;return new Rr({func:m.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,m.KEEP,m.KEEP,m.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(c){const m=this.context.gl,b=c.sort(((L,j)=>j.overscaledZ-L.overscaledZ)),C=b[b.length-1].overscaledZ,I=b[0].overscaledZ-C+1;if(I>1){this.currentStencilSource=void 0,this.nextStencilID+I>256&&this.clearStencil();const L={};for(let j=0;j<I;j++)L[j+C]=new Rr({func:m.GEQUAL,mask:255},j+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=I,[L,b]}return[{[C]:Rr.disabled},b]}stencilConfigForOverlapTwoPass(c){const m=this.context.gl,b=c.sort(((L,j)=>j.overscaledZ-L.overscaledZ)),C=b[b.length-1].overscaledZ,I=b[0].overscaledZ-C+1;if(this.clearStencil(),I>1){const L={},j={};for(let W=0;W<I;W++)L[W+C]=new Rr({func:m.GREATER,mask:255},I+1+W,255,m.KEEP,m.KEEP,m.REPLACE),j[W+C]=new Rr({func:m.GREATER,mask:255},1+W,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID=2*I+1,[L,j,b]}return this.nextStencilID=3,[{[C]:new Rr({func:m.GREATER,mask:255},2,255,m.KEEP,m.KEEP,m.REPLACE)},{[C]:new Rr({func:m.GREATER,mask:255},1,255,m.KEEP,m.KEEP,m.REPLACE)},b]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new ni([c.CONSTANT_COLOR,c.ONE],new s.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ni.unblended:ni.alphaBlended}getDepthModeForSublayer(c,m,b){if(!this.opaquePassEnabledForLayer())return or.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new or(b||this.context.gl.LEQUAL,m,[C,C])}getDepthModeFor3D(){return new or(this.context.gl.LEQUAL,or.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,m){var b,C;this.style=c,this.options=m,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(A()),this.imageManager.beginFrame();const I=this.style._order,L=this.style.tileManagers,j={},W={},K={},te={isRenderingToTexture:!1,isRenderingGlobe:((b=c.projection)===null||b===void 0?void 0:b.transitionState)>0};for(const ue in L){const ge=L[ue];ge.used&&ge.prepare(this.context),j[ue]=ge.getVisibleCoordinates(!1),W[ue]=j[ue].slice().reverse(),K[ue]=ge.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ue=0;ue<I.length;ue++)if(this.style._layers[I[ue]].is3D()){this.opaquePassCutoff=ue;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const ue of I){const ge=this.style._layers[ue];if(!ge.hasOffscreenPass()||ge.isHidden(this.transform.zoom))continue;const Oe=W[ge.source];(ge.type==="custom"||Oe.length)&&this.renderLayer(this,L[ge.source],ge,Oe,te)}if((C=this.style.projection)===null||C===void 0||C.updateGPUdependent({context:this.context,useProgram:ue=>this.useProgram(ue)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:m.showOverdrawInspector?s.bp.black:s.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(ue,ge){const Oe=ue.context,Ie=Oe.gl,Le=((Ke,Ze,nt)=>{const yt=Math.cos(Ze.rollInRadians),ht=Math.sin(Ze.rollInRadians),pt=Er(Ze),gt=Ze.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ke.properties.get("sky-color"),u_horizon_color:Ke.properties.get("horizon-color"),u_horizon:[(Ze.width/2-pt*ht)*nt,(Ze.height/2+pt*yt)*nt],u_horizon_normal:[-ht,yt],u_sky_horizon_blend:Ke.properties.get("sky-horizon-blend")*Ze.height/2*nt,u_sky_blend:gt}})(ge,ue.style.map.transform,ue.pixelRatio),De=new or(Ie.LEQUAL,or.ReadWrite,[0,1]),je=Rr.disabled,He=ue.colorModeForRenderPass(),Fe=ue.useProgram("sky"),We=xv(Oe,ge);Fe.draw(Oe,Ie.TRIANGLES,De,je,He,vr.disabled,Le,null,void 0,"sky",We.vertexBuffer,We.indexBuffer,We.segments)})(this,this.style.sky),this._showOverdrawInspector=m.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const ue=this.style._layers[I[this.currentLayer]],ge=L[ue.source],Oe=j[ue.source];this._renderTileClippingMasks(ue,Oe,!1),this.renderLayer(this,ge,ue,Oe,te)}this.renderPass="translucent";let he=!1;for(this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const ue=this.style._layers[I[this.currentLayer]],ge=L[ue.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ue,te))continue;this.opaquePassEnabledForLayer()||he||(he=!0,te.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Oe=(ue.type==="symbol"?K:W)[ue.source];this._renderTileClippingMasks(ue,j[ue.source],!!this.renderToTexture),this.renderLayer(this,ge,ue,Oe,te)}if(te.isRenderingGlobe&&(function(ue,ge,Oe){const Ie=ue.context,Le=Ie.gl,De=ue.useProgram("atmosphere"),je=new or(Le.LEQUAL,or.ReadOnly,[0,1]),He=ue.transform,Fe=(function(gt,Kt){const en=gt.properties.get("position"),zt=[-en.x,-en.y,-en.z],ln=s.ar(new Float64Array(16));return gt.properties.get("anchor")==="map"&&(s.bg(ln,ln,Kt.rollInRadians),s.bh(ln,ln,-Kt.pitchInRadians),s.bg(ln,ln,Kt.bearingInRadians),s.bh(ln,ln,Kt.center.lat*Math.PI/180),s.bJ(ln,ln,-Kt.center.lng*Math.PI/180)),s.cg(zt,zt,ln),zt})(Oe,ue.transform),We=He.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ke=ge.properties.get("atmosphere-blend")*We.projectionTransition;if(Ke===0)return;const Ze=yd(He.worldSize,He.center.lat),nt=He.inverseProjectionMatrix,yt=new Float64Array(4);yt[3]=1,s.aH(yt,yt,He.modelViewProjectionMatrix),yt[0]/=yt[3],yt[1]/=yt[3],yt[2]/=yt[3],yt[3]=1,s.aH(yt,yt,nt),yt[0]/=yt[3],yt[1]/=yt[3],yt[2]/=yt[3],yt[3]=1;const ht=((gt,Kt,en,zt,ln)=>({u_sun_pos:gt,u_atmosphere_blend:Kt,u_globe_position:en,u_globe_radius:zt,u_inv_proj_matrix:ln}))(Fe,Ke,[yt[0],yt[1],yt[2]],Ze,nt),pt=xv(Ie,ge);De.draw(Ie,Le.TRIANGLES,je,Rr.disabled,ni.alphaBlended,vr.disabled,ht,null,null,"atmosphere",pt.vertexBuffer,pt.indexBuffer,pt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const ue=(function(ge,Oe){let Ie=null;const Le=Object.values(ge._layers).flatMap((Fe=>Fe.source&&!Fe.isHidden(Oe)?[ge.tileManagers[Fe.source]]:[])),De=Le.filter((Fe=>Fe.getSource().type==="vector")),je=Le.filter((Fe=>Fe.getSource().type!=="vector")),He=Fe=>{(!Ie||Ie.getSource().maxzoom<Fe.getSource().maxzoom)&&(Ie=Fe)};return De.forEach((Fe=>He(Fe))),Ie||je.forEach((Fe=>He(Fe))),Ie})(this.style,this.transform.zoom);ue&&(function(ge,Oe,Ie){for(let Le=0;Le<Ie.length;Le++)jm(ge,Oe,Ie[Le])})(this,ue,ue.getVisibleCoordinates())}this.options.showPadding&&(function(ue){const ge=ue.transform.padding;Yf(ue,ue.transform.height-(ge.top||0),3,pu),Yf(ue,ge.bottom||0,3,Ec),mu(ue,ge.left||0,3,Ey),mu(ue,ue.transform.width-(ge.right||0),3,Ay);const Oe=ue.transform.centerPoint;(function(Ie,Le,De,je){Po(Ie,Le-1,De-10,2,20,je),Po(Ie,Le-10,De-1,20,2,je)})(ue,Oe.x,ue.transform.height-Oe.y,Fa)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(c){if(!this.style||!this.style.map||!this.style.map.terrain)return;const m=this.terrainFacilitator.matrix,b=this.transform.modelViewProjectionMatrix;let C=this.terrainFacilitator.dirty;C||(C=c?!s.cj(m,b):!s.ck(m,b)),C||(C=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),C&&(s.cl(m,b),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(I,L){const j=I.context,W=j.gl,K=I.transform,te=ni.unblended,he=new or(W.LEQUAL,or.ReadWrite,[0,1]),ue=L.tileManager.getRenderableTiles(),ge=I.useProgram("terrainDepth");j.bindFramebuffer.set(L.getFramebuffer("depth").framebuffer),j.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),j.clear({color:s.bp.transparent,depth:1});for(const Oe of ue){const Ie=L.getTerrainMesh(Oe.tileID),Le=L.getTerrainData(Oe.tileID),De=K.getProjectionData({overscaledTileID:Oe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),je={u_ele_delta:L.getMeshFrameDelta(K.zoom)};ge.draw(j,W.TRIANGLES,he,Rr.disabled,te,vr.backCCW,je,Le,De,"terrain",Ie.vertexBuffer,Ie.indexBuffer,Ie.segments)}j.bindFramebuffer.set(null),j.viewport.set([0,0,I.width,I.height])})(this,this.style.map.terrain),(function(I,L){const j=I.context,W=j.gl,K=I.transform,te=ni.unblended,he=new or(W.LEQUAL,or.ReadWrite,[0,1]),ue=L.getCoordsTexture(),ge=L.tileManager.getRenderableTiles(),Oe=I.useProgram("terrainCoords");j.bindFramebuffer.set(L.getFramebuffer("coords").framebuffer),j.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),j.clear({color:s.bp.transparent,depth:1}),L.coordsIndex=[];for(const Ie of ge){const Le=L.getTerrainMesh(Ie.tileID),De=L.getTerrainData(Ie.tileID);j.activeTexture.set(W.TEXTURE0),W.bindTexture(W.TEXTURE_2D,ue.texture);const je={u_terrain_coords_id:(255-L.coordsIndex.length)/255,u_texture:0,u_ele_delta:L.getMeshFrameDelta(K.zoom)},He=K.getProjectionData({overscaledTileID:Ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Oe.draw(j,W.TRIANGLES,he,Rr.disabled,te,vr.backCCW,je,De,He,"terrain",Le.vertexBuffer,Le.indexBuffer,Le.segments),L.coordsIndex.push(Ie.tileID.key)}j.bindFramebuffer.set(null),j.viewport.set([0,0,I.width,I.height])})(this,this.style.map.terrain))}renderLayer(c,m,b,C,I){b.isHidden(this.transform.zoom)||(b.type==="background"||b.type==="custom"||(C||[]).length)&&(this.id=b.id,s.cm(b)?(function(L,j,W,K,te,he){if(L.renderPass!=="translucent")return;const{isRenderingToTexture:ue}=he,ge=Rr.disabled,Oe=L.colorModeForRenderPass();(W._unevaluatedLayout.hasValue("text-variable-anchor")||W._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Ie,Le,De,je,He,Fe,We,Ke,Ze){const nt=Le.transform,yt=Le.style.map.terrain,ht=He==="map",pt=Fe==="map";for(const gt of Ie){const Kt=je.getTile(gt),en=Kt.getBucket(De);if(!en||!en.text||!en.text.segments.get().length)continue;const zt=s.ay(en.textSizeData,nt.zoom),ln=s.aN(Kt,1,Le.transform.zoom),Jn=Ra(ht,Le.transform,ln),Hr=De.layout.get("icon-text-fit")!=="none"&&en.hasIconData();if(zt){const vi=Math.pow(2,nt.zoom-Kt.tileID.overscaledZ),hi=yt?(Ei,ri)=>yt.getElevation(gt,Ei,ri):null;uu(en,ht,pt,Ze,nt,Jn,vi,zt,Hr,s.aO(nt,Kt,We,Ke),gt.toUnwrapped(),hi)}}})(K,L,W,j,W.layout.get("text-rotation-alignment"),W.layout.get("text-pitch-alignment"),W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),te),W.paint.get("icon-opacity").constantOr(1)!==0&&Cd(L,j,W,K,!1,W.paint.get("icon-translate"),W.paint.get("icon-translate-anchor"),W.layout.get("icon-rotation-alignment"),W.layout.get("icon-pitch-alignment"),W.layout.get("icon-keep-upright"),ge,Oe,ue),W.paint.get("text-opacity").constantOr(1)!==0&&Cd(L,j,W,K,!0,W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),W.layout.get("text-rotation-alignment"),W.layout.get("text-pitch-alignment"),W.layout.get("text-keep-upright"),ge,Oe,ue),j.map.showCollisionBoxes&&(is(L,j,W,K,!0),is(L,j,W,K,!1))})(c,m,b,C,this.style.placement.variableOffsets,I):s.cn(b)?(function(L,j,W,K,te){if(L.renderPass!=="translucent")return;const{isRenderingToTexture:he}=te,ue=W.paint.get("circle-opacity"),ge=W.paint.get("circle-stroke-width"),Oe=W.paint.get("circle-stroke-opacity"),Ie=!W.layout.get("circle-sort-key").isConstant();if(ue.constantOr(1)===0&&(ge.constantOr(1)===0||Oe.constantOr(1)===0))return;const Le=L.context,De=Le.gl,je=L.transform,He=L.getDepthModeForSublayer(0,or.ReadOnly),Fe=Rr.disabled,We=L.colorModeForRenderPass(),Ke=[],Ze=je.getCircleRadiusCorrection();for(let nt=0;nt<K.length;nt++){const yt=K[nt],ht=j.getTile(yt),pt=ht.getBucket(W);if(!pt)continue;const gt=W.paint.get("circle-translate"),Kt=W.paint.get("circle-translate-anchor"),en=s.aO(je,ht,gt,Kt),zt=pt.programConfigurations.get(W.id),ln=L.useProgram("circle",zt),Jn=pt.layoutVertexBuffer,Hr=pt.indexBuffer,vi=L.style.map.terrain&&L.style.map.terrain.getTerrainData(yt),hi={programConfiguration:zt,program:ln,layoutVertexBuffer:Jn,indexBuffer:Hr,uniformValues:Em(L,ht,W,en,Ze),terrainData:vi,projectionData:je.getProjectionData({overscaledTileID:yt,applyGlobeMatrix:!he,applyTerrainMatrix:!0})};if(Ie){const Ei=pt.segments.get();for(const ri of Ei)Ke.push({segments:new s.aX([ri]),sortKey:ri.sortKey,state:hi})}else Ke.push({segments:pt.segments,sortKey:0,state:hi})}Ie&&Ke.sort(((nt,yt)=>nt.sortKey-yt.sortKey));for(const nt of Ke){const{programConfiguration:yt,program:ht,layoutVertexBuffer:pt,indexBuffer:gt,uniformValues:Kt,terrainData:en,projectionData:zt}=nt.state;ht.draw(Le,De.TRIANGLES,He,Fe,We,vr.backCCW,Kt,en,zt,W.id,pt,gt,nt.segments,W.paint,L.transform.zoom,yt)}})(c,m,b,C,I):s.co(b)?(function(L,j,W,K,te){if(W.paint.get("heatmap-opacity")===0)return;const he=L.context,{isRenderingToTexture:ue,isRenderingGlobe:ge}=te;if(L.style.map.terrain){for(const Oe of K){const Ie=j.getTile(Oe);j.hasRenderableParent(Oe)||(L.renderPass==="offscreen"?bv(L,Ie,W,Oe,ge):L.renderPass==="translucent"&&os(L,W,Oe,ue,ge))}he.viewport.set([0,0,L.width,L.height])}else L.renderPass==="offscreen"?(function(Oe,Ie,Le,De){const je=Oe.context,He=je.gl,Fe=Oe.transform,We=Rr.disabled,Ke=new ni([He.ONE,He.ONE],s.bp.transparent,[!0,!0,!0,!0]);(function(Ze,nt,yt){const ht=Ze.gl;Ze.activeTexture.set(ht.TEXTURE1),Ze.viewport.set([0,0,nt.width/4,nt.height/4]);let pt=yt.heatmapFbos.get(s.cd);pt?(ht.bindTexture(ht.TEXTURE_2D,pt.colorAttachment.get()),Ze.bindFramebuffer.set(pt.framebuffer)):(pt=ui(Ze,nt.width/4,nt.height/4),yt.heatmapFbos.set(s.cd,pt))})(je,Oe,Le),je.clear({color:s.bp.transparent});for(let Ze=0;Ze<De.length;Ze++){const nt=De[Ze];if(Ie.hasRenderableParent(nt))continue;const yt=Ie.getTile(nt),ht=yt.getBucket(Le);if(!ht)continue;const pt=ht.programConfigurations.get(Le.id),gt=Oe.useProgram("heatmap",pt),Kt=Fe.getProjectionData({overscaledTileID:nt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),en=Fe.getCircleRadiusCorrection();gt.draw(je,He.TRIANGLES,or.disabled,We,Ke,vr.backCCW,fh(yt,Fe.zoom,Le.paint.get("heatmap-intensity"),en),null,Kt,Le.id,ht.layoutVertexBuffer,ht.indexBuffer,ht.segments,Le.paint,Fe.zoom,pt)}je.viewport.set([0,0,Oe.width,Oe.height])})(L,j,W,K):L.renderPass==="translucent"&&(function(Oe,Ie){const Le=Oe.context,De=Le.gl;Le.setColorMode(Oe.colorModeForRenderPass());const je=Ie.heatmapFbos.get(s.cd);je&&(Le.activeTexture.set(De.TEXTURE0),De.bindTexture(De.TEXTURE_2D,je.colorAttachment.get()),Le.activeTexture.set(De.TEXTURE1),kr(Le,Ie).bind(De.LINEAR,De.CLAMP_TO_EDGE),Oe.useProgram("heatmapTexture").draw(Le,De.TRIANGLES,or.disabled,Rr.disabled,Oe.colorModeForRenderPass(),vr.disabled,fv(Oe,Ie,0,1),null,null,Ie.id,Oe.viewportBuffer,Oe.quadTriangleIndexBuffer,Oe.viewportSegments,Ie.paint,Oe.transform.zoom))})(L,W)})(c,m,b,C,I):s.cp(b)?(function(L,j,W,K,te){if(L.renderPass!=="translucent")return;const{isRenderingToTexture:he}=te,ue=W.paint.get("line-opacity"),ge=W.paint.get("line-width");if(ue.constantOr(1)===0||ge.constantOr(1)===0)return;const Oe=L.getDepthModeForSublayer(0,or.ReadOnly),Ie=L.colorModeForRenderPass(),Le=W.paint.get("line-dasharray"),De=Le.constantOr(1),je=W.paint.get("line-pattern"),He=je.constantOr(1),Fe=W.paint.get("line-gradient"),We=W.getCrossfadeParameters();let Ke;Ke=He?"linePattern":De&&Fe?"lineGradientSDF":De?"lineSDF":Fe?"lineGradient":"line";const Ze=L.context,nt=Ze.gl,yt=L.transform;let ht=!0;for(const pt of K){const gt=j.getTile(pt);if(He&&!gt.patternsLoaded())continue;const Kt=gt.getBucket(W);if(!Kt)continue;const en=Kt.programConfigurations.get(W.id),zt=L.context.program.get(),ln=L.useProgram(Ke,en),Jn=ht||ln.program!==zt,Hr=L.style.map.terrain&&L.style.map.terrain.getTerrainData(pt),vi=je.constantOr(null),hi=Le&&Le.constantOr(null);if(vi&&gt.imageAtlas){const ss=gt.imageAtlas,so=ss.patternPositions[vi.to.toString()],ao=ss.patternPositions[vi.from.toString()];so&&ao&&en.setConstantPatternPositions(so,ao)}else if(hi){const ss=W.layout.get("line-cap")==="round",so=L.lineAtlas.getDash(hi.to,ss),ao=L.lineAtlas.getDash(hi.from,ss);en.setConstantDashPositions(so,ao)}const Ei=yt.getProjectionData({overscaledTileID:pt,applyGlobeMatrix:!he,applyTerrainMatrix:!0}),ri=yt.getPixelScale();let qi;He?(qi=pv(L,gt,W,ri,We),Ba(Ze,nt,gt,en,We)):De&&Fe?(qi=ph(L,gt,W,ri,We,Kt.lineClipsArray.length),ya(L,j,Ze,nt,W,Kt,pt,en,We)):De?(qi=pa(L,gt,W,ri,We),Ui(L,Ze,nt,en,Jn,We)):Fe?(qi=Kb(L,gt,W,ri,Kt.lineClipsArray.length),ga(L,j,Ze,nt,W,Kt,pt)):qi=Mm(L,gt,W,ri);const Ai=L.stencilModeForClipping(pt);ln.draw(Ze,nt.TRIANGLES,Oe,Ai,Ie,vr.disabled,qi,Hr,Ei,W.id,Kt.layoutVertexBuffer,Kt.indexBuffer,Kt.segments,W.paint,L.transform.zoom,en,Kt.layoutVertexBuffer2),ht=!1}})(c,m,b,C,I):s.cq(b)?(function(L,j,W,K,te){const he=W.paint.get("fill-color"),ue=W.paint.get("fill-opacity");if(ue.constantOr(1)===0)return;const{isRenderingToTexture:ge}=te,Oe=L.colorModeForRenderPass(),Ie=W.paint.get("fill-pattern"),Le=L.opaquePassEnabledForLayer()&&!Ie.constantOr(1)&&he.constantOr(s.bp.transparent).a===1&&ue.constantOr(0)===1?"opaque":"translucent";if(L.renderPass===Le){const De=L.getDepthModeForSublayer(1,L.renderPass==="opaque"?or.ReadWrite:or.ReadOnly);Sc(L,j,W,K,De,Oe,!1,ge)}if(L.renderPass==="translucent"&&W.paint.get("fill-antialias")){const De=L.getDepthModeForSublayer(W.getPaintProperty("fill-outline-color")?2:0,or.ReadOnly);Sc(L,j,W,K,De,Oe,!0,ge)}})(c,m,b,C,I):s.cr(b)?(function(L,j,W,K,te){const he=W.paint.get("fill-extrusion-opacity");if(he===0)return;const{isRenderingToTexture:ue}=te;if(L.renderPass==="translucent"){const ge=new or(L.context.gl.LEQUAL,or.ReadWrite,L.depthRangeFor3D);if(he!==1||W.paint.get("fill-extrusion-pattern").constantOr(1))Cc(L,j,W,K,ge,Rr.disabled,ni.disabled,ue),Cc(L,j,W,K,ge,L.stencilModeFor3D(),L.colorModeForRenderPass(),ue);else{const Oe=L.colorModeForRenderPass();Cc(L,j,W,K,ge,Rr.disabled,Oe,ue)}}})(c,m,b,C,I):s.cs(b)?(function(L,j,W,K,te){if(L.renderPass!=="offscreen"&&L.renderPass!=="translucent")return;const{isRenderingToTexture:he}=te,ue=L.context,ge=L.style.projection.useSubdivision,Oe=L.getDepthModeForSublayer(0,or.ReadOnly),Ie=L.colorModeForRenderPass();if(L.renderPass==="offscreen")(function(Le,De,je,He,Fe,We,Ke){const Ze=Le.context,nt=Ze.gl;for(const yt of je){const ht=De.getTile(yt),pt=ht.dem;if(!pt||!pt.data||!ht.needsHillshadePrepare)continue;const gt=pt.dim,Kt=pt.stride,en=pt.getPixels();if(Ze.activeTexture.set(nt.TEXTURE1),Ze.pixelStoreUnpackPremultiplyAlpha.set(!1),ht.demTexture=ht.demTexture||Le.getTileTexture(Kt),ht.demTexture){const ln=ht.demTexture;ln.update(en,{premultiply:!1}),ln.bind(nt.NEAREST,nt.CLAMP_TO_EDGE)}else ht.demTexture=new s.T(Ze,en,nt.RGBA,{premultiply:!1}),ht.demTexture.bind(nt.NEAREST,nt.CLAMP_TO_EDGE);Ze.activeTexture.set(nt.TEXTURE0);let zt=ht.fbo;if(!zt){const ln=new s.T(Ze,{width:gt,height:gt,data:null},nt.RGBA);ln.bind(nt.LINEAR,nt.CLAMP_TO_EDGE),zt=ht.fbo=Ze.createFramebuffer(gt,gt,!0,!1),zt.colorAttachment.set(ln.texture)}Ze.bindFramebuffer.set(zt.framebuffer),Ze.viewport.set([0,0,gt,gt]),Le.useProgram("hillshadePrepare").draw(Ze,nt.TRIANGLES,Fe,We,Ke,vr.disabled,Xb(ht.tileID,pt),null,null,He.id,Le.rasterBoundsBuffer,Le.quadTriangleIndexBuffer,Le.rasterBoundsSegments),ht.needsHillshadePrepare=!1}})(L,j,K,W,Oe,Rr.disabled,Ie),ue.viewport.set([0,0,L.width,L.height]);else if(L.renderPass==="translucent")if(ge){const[Le,De,je]=L.stencilConfigForOverlapTwoPass(K);Tc(L,j,W,je,Le,Oe,Ie,!1,he),Tc(L,j,W,je,De,Oe,Ie,!0,he)}else{const[Le,De]=L.getStencilConfigForOverlapAndUpdateStencilID(K);Tc(L,j,W,De,Le,Oe,Ie,!1,he)}})(c,m,b,C,I):s.ct(b)?(function(L,j,W,K,te){if(L.renderPass!=="translucent"||!K.length)return;const{isRenderingToTexture:he}=te,ue=L.style.projection.useSubdivision,ge=L.getDepthModeForSublayer(0,or.ReadOnly),Oe=L.colorModeForRenderPass();if(ue){const[Ie,Le,De]=L.stencilConfigForOverlapTwoPass(K);du(L,j,W,De,Ie,ge,Oe,!1,he),du(L,j,W,De,Le,ge,Oe,!0,he)}else{const[Ie,Le]=L.getStencilConfigForOverlapAndUpdateStencilID(K);du(L,j,W,Le,Ie,ge,Oe,!1,he)}})(c,m,b,C,I):s.bU(b)?(function(L,j,W,K,te){if(L.renderPass!=="translucent"||W.paint.get("raster-opacity")===0||!K.length)return;const{isRenderingToTexture:he}=te,ue=j.getSource(),ge=L.style.projection.useSubdivision;if(ue instanceof Vt)dl(L,j,W,K,null,!1,!1,ue.tileCoords,ue.flippedWindingOrder,he);else if(ge){const[Oe,Ie,Le]=L.stencilConfigForOverlapTwoPass(K);dl(L,j,W,Le,Oe,!1,!0,fu,!1,he),dl(L,j,W,Le,Ie,!0,!0,fu,!1,he)}else{const[Oe,Ie]=L.getStencilConfigForOverlapAndUpdateStencilID(K);dl(L,j,W,Ie,Oe,!1,!0,fu,!1,he)}})(c,m,b,C,I):s.cu(b)?(function(L,j,W,K,te){const he=W.paint.get("background-color"),ue=W.paint.get("background-opacity");if(ue===0)return;const{isRenderingToTexture:ge}=te,Oe=L.context,Ie=Oe.gl,Le=L.style.projection,De=L.transform,je=De.tileSize,He=W.paint.get("background-pattern");if(L.isPatternMissing(He))return;const Fe=!He&&he.a===1&&ue===1&&L.opaquePassEnabledForLayer()?"opaque":"translucent";if(L.renderPass!==Fe)return;const We=Rr.disabled,Ke=L.getDepthModeForSublayer(0,Fe==="opaque"?or.ReadWrite:or.ReadOnly),Ze=L.colorModeForRenderPass(),nt=L.useProgram(He?"backgroundPattern":"background"),yt=K||to(De,{tileSize:je,terrain:L.style.map.terrain});He&&(Oe.activeTexture.set(Ie.TEXTURE0),L.imageManager.bind(L.context));const ht=W.getCrossfadeParameters();for(const pt of yt){const gt=De.getProjectionData({overscaledTileID:pt,applyGlobeMatrix:!ge,applyTerrainMatrix:!0}),Kt=He?Lm(ue,L,He,{tileID:pt,tileSize:je},ht):Dm(ue,he),en=L.style.map.terrain&&L.style.map.terrain.getTerrainData(pt),zt=Le.getMeshFromTileID(Oe,pt.canonical,!1,!0,"raster");nt.draw(Oe,Ie.TRIANGLES,Ke,We,Ze,vr.backCCW,Kt,en,gt,W.id,zt.vertexBuffer,zt.indexBuffer,zt.segments)}})(c,0,b,C,I):s.cv(b)&&(function(L,j,W,K){const{isRenderingGlobe:te}=K,he=L.context,ue=W.implementation,ge=L.style.projection,Oe=L.transform,Ie=Oe.getProjectionDataForCustomLayer(te),Le={farZ:Oe.farZ,nearZ:Oe.nearZ,fov:Oe.fov*Math.PI/180,modelViewProjectionMatrix:Oe.modelViewProjectionMatrix,projectionMatrix:Oe.projectionMatrix,shaderData:{variantName:ge.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ge.shaderPreludeCode.vertexSource}`,define:ge.shaderDefine},defaultProjectionData:Ie},De=ue.renderingMode?ue.renderingMode:"2d";if(L.renderPass==="offscreen"){const je=ue.prerender;je&&(L.setCustomLayerDefaults(),he.setColorMode(L.colorModeForRenderPass()),je.call(ue,he.gl,Le),he.setDirty(),L.setBaseState())}else if(L.renderPass==="translucent"){L.setCustomLayerDefaults(),he.setColorMode(L.colorModeForRenderPass()),he.setStencilMode(Rr.disabled);const je=De==="3d"?L.getDepthModeFor3D():L.getDepthModeForSublayer(0,or.ReadOnly);he.setDepthMode(je),ue.render(he.gl,Le),he.setDirty(),L.setBaseState(),he.bindFramebuffer.set(null)}})(c,0,b,I))}saveTileTexture(c){const m=this._tileTextures[c.size[0]];m?m.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const m=this._tileTextures[c];return m&&m.length>0?m.pop():null}isPatternMissing(c){if(!c)return!1;if(!c.from||!c.to)return!0;const m=this.imageManager.getPattern(c.from.toString()),b=this.imageManager.getPattern(c.to.toString());return!m||!b}useProgram(c,m,b=!1,C=[]){this.cache=this.cache||{};const I=!!this.style.map.terrain,L=this.style.projection,j=b?Di.projectionMercator:L.shaderPreludeCode,W=b?ro:L.shaderDefine,K=c+(m?m.cacheKey:"")+`/${b?ra:L.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(I?"/terrain":"")+(C?`/${C.join("/")}`:"");return this.cache[K]||(this.cache[K]=new Wb(this.context,Di[c],m,Jb[c],this._showOverdrawInspector,I,j,W,C)),this.cache[K]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var c,m;if(this._tileTextures){for(const b in this._tileTextures){const C=this._tileTextures[b];if(C)for(const I of C)I.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((c=this.tileExtentMesh.vertexBuffer)===null||c===void 0||c.destroy()),this.tileExtentMesh&&((m=this.tileExtentMesh.indexBuffer)===null||m===void 0||m.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const b in this.cache){const C=this.cache[b];C&&C.program&&this.context.gl.deleteProgram(C.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:c,drawingBufferHeight:m}=this.context.gl;return this.width!==c||this.height!==m}}function wv(P,c){let m,b=!1,C=null,I=null;const L=()=>{C=null,b&&(P.apply(I,m),C=setTimeout(L,c),b=!1)};return(...j)=>(b=!0,I=this,m=j,C||L(),C)}class vo{constructor(c){this._getCurrentHash=()=>{const m=window.location.hash.replace("#","");if(this._hashName){let b;return m.split("&").map((C=>C.split("="))).forEach((C=>{C[0]===this._hashName&&(b=C)})),(b&&b[1]||"").split("/")}return m.split("/")},this._onHashChange=()=>{const m=this._getCurrentHash();if(!this._isValidHash(m))return!1;const b=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(m[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:b,pitch:+(m[4]||0)}),!0},this._updateHashUnthrottled=()=>{const m=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,m)},this._removeHash=()=>{const m=this._getCurrentHash();if(m.length===0)return;const b=m.join("/");let C=b;C.split("&").length>0&&(C=C.split("&")[0]),this._hashName&&(C=`${this._hashName}=${b}`);let I=window.location.hash.replace(C,"");I.startsWith("#&")?I=I.slice(0,1)+I.slice(2):I==="#"&&(I="");let L=window.location.href.replace(/(#.+)?$/,I);L=L.replace("&&","&"),window.history.replaceState(window.history.state,null,L)},this._updateHash=wv(this._updateHashUnthrottled,300),this._hashName=c&&encodeURIComponent(c)}addTo(c){return this._map=c,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(c){const m=this._map.getCenter(),b=Math.round(100*this._map.getZoom())/100,C=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),I=Math.pow(10,C),L=Math.round(m.lng*I)/I,j=Math.round(m.lat*I)/I,W=this._map.getBearing(),K=this._map.getPitch();let te="";if(te+=c?`/${L}/${j}/${b}`:`${b}/${j}/${L}`,(W||K)&&(te+="/"+Math.round(10*W)/10),K&&(te+=`/${Math.round(K)}`),this._hashName){const he=this._hashName;let ue=!1;const ge=window.location.hash.slice(1).split("&").map((Oe=>{const Ie=Oe.split("=")[0];return Ie===he?(ue=!0,`${Ie}=${te}`):Oe})).filter((Oe=>Oe));return ue||ge.push(`${he}=${te}`),`#${ge.join("&")}`}return`#${te}`}_isValidHash(c){if(c.length<3||c.some(isNaN))return!1;try{new s.V(+c[2],+c[1])}catch{return!1}const m=+c[0],b=+(c[3]||0),C=+(c[4]||0);return m>=this._map.getMinZoom()&&m<=this._map.getMaxZoom()&&b>=-180&&b<=180&&C>=this._map.getMinPitch()&&C<=this._map.getMaxPitch()}}const Ac={linearity:.3,easing:s.cw(0,0,.3,1)},Kf=s.e({deceleration:2500,maxSpeed:1400},Ac),$s=s.e({deceleration:20,maxSpeed:1400},Ac),ja=s.e({deceleration:1e3,maxSpeed:360},Ac),Td=s.e({deceleration:1e3,maxSpeed:90},Ac),zs=s.e({deceleration:1e3,maxSpeed:360},Ac);class GO{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,m=A();for(;c.length>0&&m-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const m={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:I}of this._inertiaBuffer)m.zoom+=I.zoomDelta||0,m.bearing+=I.bearingDelta||0,m.pitch+=I.pitchDelta||0,m.roll+=I.rollDelta||0,I.panDelta&&m.pan._add(I.panDelta),I.around&&(m.around=I.around),I.pinchAround&&(m.pinchAround=I.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,C={};if(m.pan.mag()){const I=Vm(m.pan.mag(),b,s.e({},Kf,c||{})),L=m.pan.mult(I.amount/m.pan.mag()),j=this._map.cameraHelper.handlePanInertia(L,this._map.transform);C.center=j.easingCenter,C.offset=j.easingOffset,Jf(C,I)}if(m.zoom){const I=Vm(m.zoom,b,$s);C.zoom=this._map.transform.zoom+I.amount,Jf(C,I)}if(m.bearing){const I=Vm(m.bearing,b,ja);C.bearing=this._map.transform.bearing+s.an(I.amount,-179,179),Jf(C,I)}if(m.pitch){const I=Vm(m.pitch,b,Td);C.pitch=this._map.transform.pitch+I.amount,Jf(C,I)}if(m.roll){const I=Vm(m.roll,b,zs);C.roll=this._map.transform.roll+s.an(I.amount,-179,179),Jf(C,I)}if(C.zoom||C.bearing){const I=m.pinchAround===void 0?m.around:m.pinchAround;C.around=I?this._map.unproject(I):this._map.getCenter()}return this.clear(),s.e(C,{noMoveStart:!0})}}function Jf(P,c){(!P.duration||P.duration<c.duration)&&(P.duration=c.duration,P.easing=c.easing)}function Vm(P,c,m){const{maxSpeed:b,linearity:C,deceleration:I}=m,L=s.an(P*C/(c/1e3),-b,b),j=Math.abs(L)/(I*C);return{easing:m.easing,duration:1e3*j,amount:L*(j/2)}}class Yo extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,m,b,C={}){b=b instanceof MouseEvent?b:new MouseEvent(c,b);const I=R.mousePos(m.getCanvas(),b),L=m.unproject(I);super(c,s.e({point:I,lngLat:L,originalEvent:b},C)),this._defaultPrevented=!1,this.target=m}}class Ql extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,m,b){const C=c==="touchend"?b.changedTouches:b.touches,I=R.touchPos(m.getCanvasContainer(),C),L=I.map((W=>m.unproject(W))),j=I.reduce(((W,K,te,he)=>W.add(K.div(he.length))),new s.P(0,0));super(c,{points:I,point:j,lngLats:L,lngLat:m.unproject(j),originalEvent:b}),this._defaultPrevented=!1}}class My extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,m,b){super(c,{originalEvent:b}),this._defaultPrevented=!1}}class Ry{constructor(c,m){this._map=c,this._clickTolerance=m.clickTolerance}reset(){delete this._mousedownPos}wheel(c){return this._firePreventable(new My(c.type,this._map,c))}mousedown(c,m){return this._mousedownPos=m,this._firePreventable(new Yo(c.type,this._map,c))}mouseup(c){this._map.fire(new Yo(c.type,this._map,c))}click(c,m){this._mousedownPos&&this._mousedownPos.dist(m)>=this._clickTolerance||this._map.fire(new Yo(c.type,this._map,c))}dblclick(c){return this._firePreventable(new Yo(c.type,this._map,c))}mouseover(c){this._map.fire(new Yo(c.type,this._map,c))}mouseout(c){this._map.fire(new Yo(c.type,this._map,c))}touchstart(c){return this._firePreventable(new Ql(c.type,this._map,c))}touchmove(c){this._map.fire(new Ql(c.type,this._map,c))}touchend(c){this._map.fire(new Ql(c.type,this._map,c))}touchcancel(c){this._map.fire(new Ql(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class nx{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(c){this._map.fire(new Yo(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Yo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._ignoreContextMenu||this._map.fire(new Yo(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ul{constructor(c){this._map=c}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(c){return this.transform.screenPointToLocation(s.P.convert(c),this._map.terrain)}}class xh{constructor(c,m){this._map=c,this._tr=new Ul(c),this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=m.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,m){this.isEnabled()&&c.shiftKey&&c.button===0&&(R.disableDrag(),this._startPos=this._lastPos=m,this._active=!0)}mousemoveWindow(c,m){if(!this._active)return;const b=m;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const C=this._startPos;this._lastPos=b,this._box||(this._box=R.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",c));const I=Math.min(C.x,b.x),L=Math.max(C.x,b.x),j=Math.min(C.y,b.y),W=Math.max(C.y,b.y);R.setTransform(this._box,`translate(${I}px,${j}px)`),this._box.style.width=L-I+"px",this._box.style.height=W-j+"px"}mouseupWindow(c,m){if(!this._active||c.button!==0)return;const b=this._startPos,C=m;if(this.reset(),R.suppressClick(),b.x!==C.x||b.y!==C.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:c})),{cameraAnimation:I=>I.fitScreenCoordinates(b,C,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",c)}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(R.remove(this._box),this._box=null),R.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(c,m){return this._map.fire(new s.l(c,{originalEvent:m}))}}function va(P,c){if(P.length!==c.length)throw new Error(`The number of touches and points are not equal - touches ${P.length}, points ${c.length}`);const m={};for(let b=0;b<P.length;b++)m[P[b].identifier]=c[b];return m}class pn{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(c,m,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=c.timeStamp),b.length===this.numTouches&&(this.centroid=(function(C){const I=new s.P(0,0);for(const L of C)I._add(L);return I.div(C.length)})(m),this.touches=va(b,m)))}touchmove(c,m,b){if(this.aborted||!this.centroid)return;const C=va(b,m);for(const I in this.touches){const L=C[I];(!L||L.dist(this.touches[I])>30)&&(this.aborted=!0)}}touchend(c,m,b){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const C=!this.aborted&&this.centroid;if(this.reset(),C)return C}}}class Qm{constructor(c){this.singleTap=new pn(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(c,m,b){this.singleTap.touchstart(c,m,b)}touchmove(c,m,b){this.singleTap.touchmove(c,m,b)}touchend(c,m,b){const C=this.singleTap.touchend(c,m,b);if(C){const I=c.timeStamp-this.lastTime<500,L=!this.lastTap||this.lastTap.dist(C)<30;if(I&&L||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}}}class Iy{constructor(c){this._tr=new Ul(c),this._zoomIn=new Qm({numTouches:1,numTaps:2}),this._zoomOut=new Qm({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,m,b){this._zoomIn.touchstart(c,m,b),this._zoomOut.touchstart(c,m,b)}touchmove(c,m,b){this._zoomIn.touchmove(c,m,b),this._zoomOut.touchmove(c,m,b)}touchend(c,m,b){const C=this._zoomIn.touchend(c,m,b),I=this._zoomOut.touchend(c,m,b),L=this._tr;return C?(this._active=!0,c.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:L.zoom+1,around:L.unproject(C)},{originalEvent:c})}):I?(this._active=!0,c.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:j=>j.easeTo({duration:300,zoom:L.zoom-1,around:L.unproject(I)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fl{constructor(c){this._enabled=!!c.enable,this._moveStateManager=c.moveStateManager,this._clickTolerance=c.clickTolerance||1,this._moveFunction=c.move,this._activateOnStart=!!c.activateOnStart,c.assignEvents(this),this.reset()}reset(c){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(c)}_move(...c){const m=this._moveFunction(...c);if(m.bearingDelta||m.pitchDelta||m.rollDelta||m.around||m.panDelta)return this._active=!0,m}dragStart(c,m){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(c)&&(this._moveStateManager.startMove(c),this._lastPoint=Array.isArray(m)?m[0]:m,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(c,m){if(!this.isEnabled())return;const b=this._lastPoint;if(!b)return;if(c.preventDefault(),!this._moveStateManager.isValidMoveEvent(c))return void this.reset(c);const C=Array.isArray(m)?m[0]:m;return!this._moved&&C.dist(b)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=C,this._move(b,C))}dragEnd(c){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(c)&&(this._moved&&R.suppressClick(),this.reset(c))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Zl=0,ep=2,Dy={[Zl]:1,[ep]:2};class Pc{constructor(c){this._correctEvent=c.checkCorrectEvent}startMove(c){const m=R.mouseButton(c);this._eventButton=m}endMove(c){delete this._eventButton}isValidStartEvent(c){return this._correctEvent(c)}isValidMoveEvent(c){return!(function(m,b){const C=Dy[b];return m.buttons===void 0||(m.buttons&C)!==C})(c,this._eventButton)}isValidEndEvent(c){return R.mouseButton(c)===this._eventButton}}class kd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(c){return c.targetTouches.length===1}_isSameTouchEvent(c){return c.targetTouches[0].identifier===this._firstTouch}startMove(c){this._firstTouch=c.targetTouches[0].identifier}endMove(c){delete this._firstTouch}isValidStartEvent(c){return this._isOneFingerTouch(c)}isValidMoveEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}isValidEndEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}}class Um{constructor(c=new Pc({checkCorrectEvent:()=>!0}),m=new kd){this.mouseMoveStateManager=c,this.oneFingerTouchMoveStateManager=m}_executeRelevantHandler(c,m,b){return c instanceof MouseEvent?m(c):typeof TouchEvent<"u"&&c instanceof TouchEvent?b(c):void 0}startMove(c){this._executeRelevantHandler(c,(m=>this.mouseMoveStateManager.startMove(m)),(m=>this.oneFingerTouchMoveStateManager.startMove(m)))}endMove(c){this._executeRelevantHandler(c,(m=>this.mouseMoveStateManager.endMove(m)),(m=>this.oneFingerTouchMoveStateManager.endMove(m)))}isValidStartEvent(c){return this._executeRelevantHandler(c,(m=>this.mouseMoveStateManager.isValidStartEvent(m)),(m=>this.oneFingerTouchMoveStateManager.isValidStartEvent(m)))}isValidMoveEvent(c){return this._executeRelevantHandler(c,(m=>this.mouseMoveStateManager.isValidMoveEvent(m)),(m=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(m)))}isValidEndEvent(c){return this._executeRelevantHandler(c,(m=>this.mouseMoveStateManager.isValidEndEvent(m)),(m=>this.oneFingerTouchMoveStateManager.isValidEndEvent(m)))}}const Mc=P=>{P.mousedown=P.dragStart,P.mousemoveWindow=P.dragMove,P.mouseup=P.dragEnd,P.contextmenu=c=>{c.preventDefault()}};class Ly{constructor(c,m){this._clickTolerance=c.clickTolerance||1,this._map=m,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(c){return c<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(c,m,b){return this._calculateTransform(c,m,b)}touchmove(c,m,b){if(this._active){if(!this._shouldBePrevented(b.length))return c.preventDefault(),this._calculateTransform(c,m,b);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",c)}}touchend(c,m,b){this._calculateTransform(c,m,b),this._active&&this._shouldBePrevented(b.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,m,b){b.length>0&&(this._active=!0);const C=va(b,m),I=new s.P(0,0),L=new s.P(0,0);let j=0;for(const K in C){const te=C[K],he=this._touches[K];he&&(I._add(te),L._add(te.sub(he)),j++,C[K]=te)}if(this._touches=C,this._shouldBePrevented(j)||!L.mag())return;const W=L.div(j);return this._sum._add(W),this._sum.mag()<this._clickTolerance?void 0:{around:I.div(j),panDelta:W}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zm{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(c,m,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([m[0],m[1]]))}touchmove(c,m,b){if(!this._firstTwoTouches)return;c.preventDefault();const[C,I]=this._firstTwoTouches,L=Rc(b,m,C),j=Rc(b,m,I);if(!L||!j)return;const W=this._aroundCenter?null:L.add(j).div(2);return this._move([L,j],W,c)}touchend(c,m,b){if(!this._firstTwoTouches)return;const[C,I]=this._firstTwoTouches,L=Rc(b,m,C),j=Rc(b,m,I);L&&j||(this._active&&R.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Rc(P,c,m){for(let b=0;b<P.length;b++)if(P[b].identifier===m)return c[b]}function Ov(P,c){return Math.log(P/c)/Math.LN2}class Ic extends Zm{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,m){const b=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Ov(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ov(this._distance,b),pinchAround:m}}}function $y(P,c){return 180*P.angleWith(c)/Math.PI}class qm extends Zm{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,m,b){const C=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$y(this._vector,C),pinchAround:m}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const m=25/(Math.PI*this._minDiameter)*360,b=$y(c,this._startVector);return Math.abs(b)<m}}function Dc(P){return Math.abs(P.y)>Math.abs(P.x)}class gu extends Zm{constructor(c){super(),this._currentTouchCount=0,this._map=c}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(c,m,b){super.touchstart(c,m,b),this._currentTouchCount=b.length}_start(c){this._lastPoints=c,Dc(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,m,b){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const C=c[0].sub(this._lastPoints[0]),I=c[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(C,I,b.timeStamp),this._valid?(this._lastPoints=c,this._active=!0,{pitchDelta:(C.y+I.y)/2*-.5}):void 0}gestureBeginsVertically(c,m,b){if(this._valid!==void 0)return this._valid;const C=c.mag()>=2,I=m.mag()>=2;if(!C&&!I)return;if(!C||!I)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;const L=c.y>0==m.y>0;return Dc(c)&&Dc(m)&&L}}const pl={panStep:100,bearingStep:15,pitchStep:10};class Xr{constructor(c){this._tr=new Ul(c);const m=pl;this._panStep=m.panStep,this._bearingStep=m.bearingStep,this._pitchStep=m.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let m=0,b=0,C=0,I=0,L=0;switch(c.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:c.shiftKey?b=-1:(c.preventDefault(),I=-1);break;case 39:c.shiftKey?b=1:(c.preventDefault(),I=1);break;case 38:c.shiftKey?C=1:(c.preventDefault(),L=-1);break;case 40:c.shiftKey?C=-1:(c.preventDefault(),L=1);break;default:return}return this._rotationDisabled&&(b=0,C=0),{cameraAnimation:j=>{const W=this._tr;j.easeTo({duration:300,easeId:"keyboardHandler",easing:Sv,zoom:m?Math.round(W.zoom)+m*(c.shiftKey?2:1):W.zoom,bearing:W.bearing+b*this._bearingStep,pitch:W.pitch+C*this._pitchStep,offset:[-I*this._panStep,-L*this._panStep],center:W.center},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Sv(P){return P*(2-P)}const yu=4.000244140625,wh=1/450;class Wm{constructor(c,m){this._onTimeout=b=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(b)},this._map=c,this._tr=new Ul(c),this._triggerRenderFrame=m,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=wh}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(c){return!!this._map.cooperativeGestures.isEnabled()&&!(c.ctrlKey||this._map.cooperativeGestures.isBypassed(c))}wheel(c){if(!this.isEnabled())return;if(this._shouldBePrevented(c))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",c);let m=c.deltaMode===WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const b=A(),C=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,m!==0&&m%yu==0?this._type="wheel":m!==0&&Math.abs(m)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=m,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(C*m)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,m+=this._lastValue)),c.shiftKey&&m&&(m/=4),this._type&&(this._lastWheelEvent=c,this._delta-=m,this._active||this._start(c)),c.preventDefault()}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const m=R.mousePos(this._map.getCanvas(),c),b=this._tr;this._aroundPoint=this._aroundCenter?b.transform.locationToScreenPoint(s.V.convert(b.center)):m,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const j=c.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=j),typeof this._targetZoom=="number"&&(this._targetZoom+=j)}if(this._delta!==0){const j=this._type==="wheel"&&Math.abs(this._delta)>yu?this._wheelZoomRate:this._defaultZoomRate;let W=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&W!==0&&(W=1/W);const K=typeof this._targetZoom!="number"?c.scale:s.aq(this._targetZoom);this._targetZoom=c.applyConstrain(c.getCameraLngLat(),s.at(K*W)).zoom,this._type==="wheel"&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const m=typeof this._targetZoom!="number"?c.zoom:this._targetZoom,b=this._startZoom,C=this._easing;let I,L=!1;if(this._type==="wheel"&&b&&C){const j=A()-this._lastWheelEventTime,W=Math.min((j+5)/200,1),K=C(W);I=s.G.number(b,m,K),W<1?this._frameId||(this._frameId=!0):L=!0}else I=m,L=!0;return this._active=!0,L&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=I,{noInertia:!0,needsRenderFrame:!L,zoomDelta:I-c.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let m=s.cy;if(this._prevEase){const b=this._prevEase,C=(A()-b.start)/b.duration,I=b.easing(C+.01)-b.easing(C),L=.27/Math.sqrt(I*I+1e-4)*.01,j=Math.sqrt(.0729-L*L);m=s.cw(L,j,.25,1)}return this._prevEase={start:A(),duration:c,easing:m},m}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class zy{constructor(c,m){this._clickZoom=c,this._tapZoom=m}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ed{constructor(c){this._tr=new Ul(c),this.reset()}reset(){this._active=!1}dblclick(c,m){return c.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:this._tr.zoom+(c.shiftKey?-1:1),around:this._tr.unproject(m)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hm{constructor(){this._tap=new Qm({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(c,m,b){if(!this._swipePoint)if(this._tapTime){const C=m[0],I=c.timeStamp-this._tapTime<500,L=this._tapPoint.dist(C)<30;I&&L?b.length>0&&(this._swipePoint=C,this._swipeTouch=b[0].identifier):this.reset()}else this._tap.touchstart(c,m,b)}touchmove(c,m,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const C=m[0],I=C.y-this._swipePoint.y;return this._swipePoint=C,c.preventDefault(),this._active=!0,{zoomDelta:I/128}}}else this._tap.touchmove(c,m,b)}touchend(c,m,b){if(this._tapTime)this._swipePoint&&b.length===0&&this.reset();else{const C=this._tap.touchend(c,m,b);C&&(this._tapTime=c.timeStamp,this._tapPoint=C)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cv{constructor(c,m,b){this._el=c,this._mousePan=m,this._touchPan=b}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Va{constructor(c,m,b,C){this._pitchWithRotate=c.pitchWithRotate,this._rollEnabled=c.rollEnabled,this._mouseRotate=m,this._mousePitch=b,this._mouseRoll=C}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Ad{constructor(c,m,b,C){this._el=c,this._touchZoom=m,this._touchRotate=b,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class yn{constructor(c,m){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=c,this._options=m,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const c=this._map.getCanvasContainer();c.classList.add("maplibregl-cooperative-gestures"),this._container=R.create("div","maplibregl-cooperative-gesture-screen",c);let m=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(m=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const b=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),C=document.createElement("div");C.className="maplibregl-desktop-message",C.textContent=m,this._container.appendChild(C);const I=document.createElement("div");I.className="maplibregl-mobile-message",I.textContent=b,this._container.appendChild(I),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(R.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(c){return c[this._bypassKey]}notifyGestureBlocked(c,m){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:c,originalEvent:m})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Tn=P=>P.zoom||P.drag||P.roll||P.pitch||P.rotate;class ml extends s.l{}function tp(P){return P.panDelta&&P.panDelta.mag()||P.zoomDelta||P.bearingDelta||P.pitchDelta||P.rollDelta}class Gm{constructor(c,m){this.handleWindowEvent=C=>{this.handleEvent(C,`${C.type}Window`)},this.handleEvent=(C,I)=>{if(C.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const L=C.type==="renderFrame"?void 0:C,j={needsRenderFrame:!1},W={},K={};for(const{handlerName:ue,handler:ge,allowed:Oe}of this._handlers){if(!ge.isEnabled())continue;let Ie;if(this._blockedByActive(K,Oe,ue))ge.reset();else if(ge[I||C.type]){if(s.cz(C,I||C.type)){const Le=R.mousePos(this._map.getCanvas(),C);Ie=ge[I||C.type](C,Le)}else if(s.cA(C,I||C.type)){const Le=this._getMapTouches(C.touches),De=R.touchPos(this._map.getCanvas(),Le);Ie=ge[I||C.type](C,De,Le)}else s.cB(I||C.type)||(Ie=ge[I||C.type](C));this.mergeHandlerResult(j,W,Ie,ue,L),Ie&&Ie.needsRenderFrame&&this._triggerRenderFrame()}(Ie||ge.isActive())&&(K[ue]=ge)}const te={};for(const ue in this._previousActiveHandlers)K[ue]||(te[ue]=L);this._previousActiveHandlers=K,(Object.keys(te).length||tp(j))&&(this._changes.push([j,W,te]),this._triggerRenderFrame()),(Object.keys(K).length||tp(j))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:he}=j;he&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],he(this._map))},this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new GO(c),this._bearingSnap=m.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(m);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[C,I,L]of this._listeners)R.addEventListener(C,I,C===document?this.handleWindowEvent:this.handleEvent,L)}destroy(){for(const[c,m,b]of this._listeners)R.removeEventListener(c,m,c===document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(c){const m=this._map,b=m.getCanvasContainer();this._add("mapEvent",new Ry(m,c));const C=m.boxZoom=new xh(m,c);this._add("boxZoom",C),c.interactive&&c.boxZoom&&C.enable();const I=m.cooperativeGestures=new yn(m,c.cooperativeGestures);this._add("cooperativeGestures",I),c.cooperativeGestures&&I.enable();const L=new Iy(m),j=new Ed(m);m.doubleClickZoom=new zy(j,L),this._add("tapZoom",L),this._add("clickZoom",j),c.interactive&&c.doubleClickZoom&&m.doubleClickZoom.enable();const W=new Hm;this._add("tapDragZoom",W);const K=m.touchPitch=new gu(m);this._add("touchPitch",K),c.interactive&&c.touchPitch&&m.touchPitch.enable(c.touchPitch);const te=()=>m.project(m.getCenter()),he=(function({enable:Fe,clickTolerance:We,aroundCenter:Ke=!0,minPixelCenterThreshold:Ze=100,rotateDegreesPerPixelMoved:nt=.8},yt){const ht=new Pc({checkCorrectEvent:pt=>R.mouseButton(pt)===0&&pt.ctrlKey||R.mouseButton(pt)===2&&!pt.ctrlKey});return new fl({clickTolerance:We,move:(pt,gt)=>{const Kt=yt();if(Ke&&Math.abs(Kt.y-pt.y)>Ze)return{bearingDelta:s.cx(new s.P(pt.x,gt.y),gt,Kt)};let en=(gt.x-pt.x)*nt;return Ke&&gt.y<Kt.y&&(en=-en),{bearingDelta:en}},moveStateManager:ht,enable:Fe,assignEvents:Mc})})(c,te),ue=(function({enable:Fe,clickTolerance:We,pitchDegreesPerPixelMoved:Ke=-.5}){const Ze=new Pc({checkCorrectEvent:nt=>R.mouseButton(nt)===0&&nt.ctrlKey||R.mouseButton(nt)===2});return new fl({clickTolerance:We,move:(nt,yt)=>({pitchDelta:(yt.y-nt.y)*Ke}),moveStateManager:Ze,enable:Fe,assignEvents:Mc})})(c),ge=(function({enable:Fe,clickTolerance:We,rollDegreesPerPixelMoved:Ke=.3},Ze){const nt=new Pc({checkCorrectEvent:yt=>R.mouseButton(yt)===2&&yt.ctrlKey});return new fl({clickTolerance:We,move:(yt,ht)=>{const pt=Ze();let gt=(ht.x-yt.x)*Ke;return ht.y<pt.y&&(gt=-gt),{rollDelta:gt}},moveStateManager:nt,enable:Fe,assignEvents:Mc})})(c,te);m.dragRotate=new Va(c,he,ue,ge),this._add("mouseRotate",he,["mousePitch"]),this._add("mousePitch",ue,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ge,["mousePitch"]),c.interactive&&c.dragRotate&&m.dragRotate.enable();const Oe=(function({enable:Fe,clickTolerance:We}){const Ke=new Pc({checkCorrectEvent:Ze=>R.mouseButton(Ze)===0&&!Ze.ctrlKey});return new fl({clickTolerance:We,move:(Ze,nt)=>({around:nt,panDelta:nt.sub(Ze)}),activateOnStart:!0,moveStateManager:Ke,enable:Fe,assignEvents:Mc})})(c),Ie=new Ly(c,m);m.dragPan=new Cv(b,Oe,Ie),this._add("mousePan",Oe),this._add("touchPan",Ie,["touchZoom","touchRotate"]),c.interactive&&c.dragPan&&m.dragPan.enable(c.dragPan);const Le=new qm,De=new Ic;m.touchZoomRotate=new Ad(b,De,Le,W),this._add("touchRotate",Le,["touchPan","touchZoom"]),this._add("touchZoom",De,["touchPan","touchRotate"]),c.interactive&&c.touchZoomRotate&&m.touchZoomRotate.enable(c.touchZoomRotate),this._add("blockableMapEvent",new nx(m));const je=m.scrollZoom=new Wm(m,(()=>this._triggerRenderFrame()));this._add("scrollZoom",je,["mousePan"]),c.interactive&&c.scrollZoom&&m.scrollZoom.enable(c.scrollZoom);const He=m.keyboard=new Xr(m);this._add("keyboard",He),c.interactive&&c.keyboard&&m.keyboard.enable()}_add(c,m,b){this._handlers.push({handlerName:c,handler:m,allowed:b}),this._handlersById[c]=m}stop(c){if(!this._updatingCamera){for(const{handler:m}of this._handlers)m.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Tn(this._eventsInProgress)||this.isZooming()}_blockedByActive(c,m,b){for(const C in c)if(C!==b&&(!m||m.indexOf(C)<0))return!0;return!1}_getMapTouches(c){const m=[];for(const b of c)this._el.contains(b.target)&&m.push(b);return m}mergeHandlerResult(c,m,b,C,I){if(!b)return;s.e(c,b);const L={handlerName:C,originalEvent:b.originalEvent||I};b.zoomDelta!==void 0&&(m.zoom=L),b.panDelta!==void 0&&(m.drag=L),b.rollDelta!==void 0&&(m.roll=L),b.pitchDelta!==void 0&&(m.pitch=L),b.bearingDelta!==void 0&&(m.rotate=L)}_applyChanges(){const c={},m={},b={};for(const[C,I,L]of this._changes)C.panDelta&&(c.panDelta=(c.panDelta||new s.P(0,0))._add(C.panDelta)),C.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+C.zoomDelta),C.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+C.bearingDelta),C.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+C.pitchDelta),C.rollDelta&&(c.rollDelta=(c.rollDelta||0)+C.rollDelta),C.around!==void 0&&(c.around=C.around),C.pinchAround!==void 0&&(c.pinchAround=C.pinchAround),C.noInertia&&(c.noInertia=C.noInertia),s.e(m,I),s.e(b,L);this._updateMapTransform(c,m,b),this._changes=[]}_updateMapTransform(c,m,b){const C=this._map,I=C._getTransformForUpdate(),L=C.terrain;if(!(tp(c)||L&&this._terrainMovement))return this._fireEvents(m,b,!0);C._stop(!0);let{panDelta:j,zoomDelta:W,bearingDelta:K,pitchDelta:te,rollDelta:he,around:ue,pinchAround:ge}=c;ge!==void 0&&(ue=ge),ue=ue||C.transform.centerPoint,L&&!I.isPointOnMapSurface(ue)&&(ue=I.centerPoint);const Oe={panDelta:j,zoomDelta:W,rollDelta:he,pitchDelta:te,bearingDelta:K,around:ue};this._map.cameraHelper.useGlobeControls&&!I.isPointOnMapSurface(ue)&&(ue=I.centerPoint);const Ie=ue.distSqr(I.centerPoint)<.01?I.center:I.screenPointToLocation(j?ue.sub(j):ue);this._handleMapControls({terrain:L,tr:I,deltasForHelper:Oe,preZoomAroundLoc:Ie,combinedEventsInProgress:m,panDelta:j}),C._applyUpdatedTransform(I),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(m,b,!0)}_handleMapControls({terrain:c,tr:m,deltasForHelper:b,preZoomAroundLoc:C,combinedEventsInProgress:I,panDelta:L}){const j=this._map.cameraHelper;if(j.handleMapControlsRollPitchBearingZoom(b,m),c)return j.useGlobeControls?(this._terrainMovement||!I.drag&&!I.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void j.handleMapControlsPan(b,m,C)):this._terrainMovement||!I.drag&&!I.zoom?void(I.drag&&this._terrainMovement&&L?m.setCenter(m.screenPointToLocation(m.centerPoint.sub(L))):j.handleMapControlsPan(b,m,C)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void j.handleMapControlsPan(b,m,C));j.handleMapControlsPan(b,m,C)}_fireEvents(c,m,b){const C=Tn(this._eventsInProgress),I=Tn(c),L={};for(const he in c){const{originalEvent:ue}=c[he];this._eventsInProgress[he]||(L[`${he}start`]=ue),this._eventsInProgress[he]=c[he]}!C&&I&&this._fireEvent("movestart",I.originalEvent);for(const he in L)this._fireEvent(he,L[he]);I&&this._fireEvent("move",I.originalEvent);for(const he in c){const{originalEvent:ue}=c[he];this._fireEvent(he,ue)}const j={};let W;for(const he in this._eventsInProgress){const{handlerName:ue,originalEvent:ge}=this._eventsInProgress[he];this._handlersById[ue].isActive()||(delete this._eventsInProgress[he],W=m[ue]||ge,j[`${he}end`]=W)}for(const he in j)this._fireEvent(he,j[he]);const K=Tn(this._eventsInProgress),te=(C||I)&&!K;if(te&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const he=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&he.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(he)}if(b&&te){this._updatingCamera=!0;const he=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ue=ge=>ge!==0&&-this._bearingSnap<ge&&ge<this._bearingSnap;!he||!he.essential&&S.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:W})),ue(this._map.getBearing())&&this._map.resetNorth()):(ue(he.bearing||this._map.getBearing())&&(he.bearing=0),he.freezeElevation=!0,this._map.easeTo(he,{originalEvent:W})),this._updatingCamera=!1}}_fireEvent(c,m){this._map.fire(new s.l(c,m?{originalEvent:m}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((c=>{delete this._frameId,this.handleEvent(new ml("renderFrame",{timeStamp:c})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class _o extends s.E{constructor(c,m,b){super(),this._renderFrameCallback=()=>{const C=Math.min((A()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(C)),C<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=b.bearingSnap,this.cameraHelper=m,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(c,m){c.apply(this.transform),this.transform=c,this.cameraHelper=m}getCenter(){return new s.V(this.transform.center.lng,this.transform.center.lat)}setCenter(c,m){return this.jumpTo({center:c},m)}getCenterElevation(){return this.transform.elevation}setCenterElevation(c,m){return this.jumpTo({elevation:c},m),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(c){this._centerClampedToGround=c}panBy(c,m,b){return c=s.P.convert(c).mult(-1),this.panTo(this.transform.center,s.e({offset:c},m),b)}panTo(c,m,b){return this.easeTo(s.e({center:c},m),b)}getZoom(){return this.transform.zoom}setZoom(c,m){return this.jumpTo({zoom:c},m),this}zoomTo(c,m,b){return this.easeTo(s.e({zoom:c},m),b)}zoomIn(c,m){return this.zoomTo(this.getZoom()+1,c,m),this}zoomOut(c,m){return this.zoomTo(this.getZoom()-1,c,m),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(c,m){return c!=this.transform.fov&&(this.transform.setFov(c),this.fire(new s.l("movestart",m)).fire(new s.l("move",m)).fire(new s.l("moveend",m))),this}getBearing(){return this.transform.bearing}setBearing(c,m){return this.jumpTo({bearing:c},m),this}getPadding(){return this.transform.padding}setPadding(c,m){return this.jumpTo({padding:c},m),this}rotateTo(c,m,b){return this.easeTo(s.e({bearing:c},m),b)}resetNorth(c,m){return this.rotateTo(0,s.e({duration:1e3},c),m),this}resetNorthPitch(c,m){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},c),m),this}snapToNorth(c,m){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,m):this}getPitch(){return this.transform.pitch}setPitch(c,m){return this.jumpTo({pitch:c},m),this}getRoll(){return this.transform.roll}setRoll(c,m){return this.jumpTo({roll:c},m),this}cameraForBounds(c,m){c=vn.convert(c).adjustAntiMeridian();const b=m&&m.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),b,m)}_cameraForBoxAndBearing(c,m,b,C){const I={top:0,bottom:0,right:0,left:0};if(typeof(C=s.e({padding:I,offset:[0,0],maxZoom:this.transform.maxZoom},C)).padding=="number"){const K=C.padding;C.padding={top:K,bottom:K,right:K,left:K}}const L=s.e(I,C.padding);C.padding=L;const j=this.transform,W=new vn(c,m);return this.cameraHelper.cameraForBoxAndBearing(C,L,W,b,j)}fitBounds(c,m,b){return this._fitInternal(this.cameraForBounds(c,m),m,b)}fitScreenCoordinates(c,m,b,C,I){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(c)),this.transform.screenPointToLocation(s.P.convert(m)),b,C),C,I)}_fitInternal(c,m,b){return c?(delete(m=s.e(c,m)).padding,m.linear?this.easeTo(m,b):this.flyTo(m,b)):this}jumpTo(c,m){this.stop();const b=this._getTransformForUpdate();let C=!1,I=!1,L=!1;const j=b.zoom;this.cameraHelper.handleJumpToCenterZoom(b,c);const W=b.zoom!==j;return"elevation"in c&&b.elevation!==+c.elevation&&b.setElevation(+c.elevation),"bearing"in c&&b.bearing!==+c.bearing&&(C=!0,b.setBearing(+c.bearing)),"pitch"in c&&b.pitch!==+c.pitch&&(I=!0,b.setPitch(+c.pitch)),"roll"in c&&b.roll!==+c.roll&&(L=!0,b.setRoll(+c.roll)),c.padding==null||b.isPaddingEqual(c.padding)||b.setPadding(c.padding),this._applyUpdatedTransform(b),this.fire(new s.l("movestart",m)).fire(new s.l("move",m)),W&&this.fire(new s.l("zoomstart",m)).fire(new s.l("zoom",m)).fire(new s.l("zoomend",m)),C&&this.fire(new s.l("rotatestart",m)).fire(new s.l("rotate",m)).fire(new s.l("rotateend",m)),I&&this.fire(new s.l("pitchstart",m)).fire(new s.l("pitch",m)).fire(new s.l("pitchend",m)),L&&this.fire(new s.l("rollstart",m)).fire(new s.l("roll",m)).fire(new s.l("rollend",m)),this.fire(new s.l("moveend",m))}calculateCameraOptionsFromTo(c,m,b,C=0){const I=s.a9.fromLngLat(c,m),L=s.a9.fromLngLat(b,C),j=L.x-I.x,W=L.y-I.y,K=L.z-I.z,te=Math.hypot(j,W,K);if(te===0)throw new Error("Can't calculate camera options with same From and To");const he=Math.hypot(j,W),ue=s.at(this.transform.cameraToCenterDistance/te/this.transform.tileSize),ge=180*Math.atan2(j,-W)/Math.PI;let Oe=180*Math.acos(he/te)/Math.PI;return Oe=K<0?90-Oe:90+Oe,{center:L.toLngLat(),elevation:C,zoom:ue,pitch:Oe,bearing:ge}}calculateCameraOptionsFromCameraLngLatAltRotation(c,m,b,C,I){const L=this.transform.calculateCenterFromCameraLngLatAlt(c,m,b,C);return{center:L.center,elevation:L.elevation,zoom:L.zoom,bearing:b,pitch:C,roll:I}}easeTo(c,m){this._stop(!1,c.easeId),((c=s.e({offset:[0,0],duration:500,easing:s.cy},c)).animate===!1||!c.essential&&S.prefersReducedMotion)&&(c.duration=0);const b=this._getTransformForUpdate(),C=this.getBearing(),I=b.pitch,L=b.roll,j="bearing"in c?this._normalizeBearing(c.bearing,C):C,W="pitch"in c?+c.pitch:I,K="roll"in c?this._normalizeBearing(c.roll,L):L,te="padding"in c?c.padding:b.padding,he=s.P.convert(c.offset);let ue,ge;c.around&&(ue=s.V.convert(c.around),ge=b.locationToScreenPoint(ue));const Oe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ie=this.cameraHelper.handleEaseTo(b,{bearing:j,pitch:W,roll:K,padding:te,around:ue,aroundPoint:ge,offsetAsPoint:he,offset:c.offset,zoom:c.zoom,center:c.center});return this._rotating=this._rotating||C!==j,this._pitching=this._pitching||W!==I,this._rolling=this._rolling||K!==L,this._padding=!b.isPaddingEqual(te),this._zooming=this._zooming||Ie.isZooming,this._easeId=c.easeId,this._prepareEase(m,c.noMoveStart,Oe),this.terrain&&this._prepareElevation(Ie.elevationCenter),this._ease((Le=>{Ie.easeFunc(Le),this.terrain&&!c.freezeElevation&&this._updateElevation(Le),this._applyUpdatedTransform(b),this._fireMoveEvents(m)}),(Le=>{this.terrain&&c.freezeElevation&&this._finalizeElevation(),this._afterEase(m,Le)}),c),this}_prepareEase(c,m,b={}){this._moving=!0,m||b.moving||this.fire(new s.l("movestart",c)),this._zooming&&!b.zooming&&this.fire(new s.l("zoomstart",c)),this._rotating&&!b.rotating&&this.fire(new s.l("rotatestart",c)),this._pitching&&!b.pitching&&this.fire(new s.l("pitchstart",c)),this._rolling&&!b.rolling&&this.fire(new s.l("rollstart",c))}_prepareElevation(c){this._elevationCenter=c,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(c){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const m=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(c<1&&m!==this._elevationTarget){const b=this._elevationTarget-this._elevationStart;this._elevationStart+=c*(b-(m-(b*c+this._elevationStart))/(1-c)),this._elevationTarget=m}this.transform.setElevation(s.G.number(this._elevationStart,this._elevationTarget,c))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(c){if(!this.terrain&&c.elevation>=0&&c.pitch<=90)return{};const m=c.getCameraLngLat(),b=c.getCameraAltitude(),C=this.terrain?this.terrain.getElevationForLngLatZoom(m,c.zoom):0;if(b<C){const I=this.calculateCameraOptionsFromTo(m,C,c.center,c.elevation);return{pitch:I.pitch,zoom:I.zoom}}return{}}_applyUpdatedTransform(c){const m=[];if(m.push((C=>this._elevateCameraIfInsideTerrain(C))),this.transformCameraUpdate&&m.push((C=>this.transformCameraUpdate(C))),!m.length)return;const b=c.clone();for(const C of m){const I=b.clone(),{center:L,zoom:j,roll:W,pitch:K,bearing:te,elevation:he}=C(I);L&&I.setCenter(L),he!==void 0&&I.setElevation(he),j!==void 0&&I.setZoom(j),W!==void 0&&I.setRoll(W),K!==void 0&&I.setPitch(K),te!==void 0&&I.setBearing(te),b.apply(I)}this.transform.apply(b)}_fireMoveEvents(c){this.fire(new s.l("move",c)),this._zooming&&this.fire(new s.l("zoom",c)),this._rotating&&this.fire(new s.l("rotate",c)),this._pitching&&this.fire(new s.l("pitch",c)),this._rolling&&this.fire(new s.l("roll",c))}_afterEase(c,m){if(this._easeId&&m&&this._easeId===m)return;delete this._easeId;const b=this._zooming,C=this._rotating,I=this._pitching,L=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,b&&this.fire(new s.l("zoomend",c)),C&&this.fire(new s.l("rotateend",c)),I&&this.fire(new s.l("pitchend",c)),L&&this.fire(new s.l("rollend",c)),this.fire(new s.l("moveend",c))}flyTo(c,m){if(!c.essential&&S.prefersReducedMotion){const gt=s.U(c,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(gt,m)}this.stop(),c=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.cy},c);const b=this._getTransformForUpdate(),C=b.bearing,I=b.pitch,L=b.roll,j=b.padding,W="bearing"in c?this._normalizeBearing(c.bearing,C):C,K="pitch"in c?+c.pitch:I,te="roll"in c?this._normalizeBearing(c.roll,L):L,he="padding"in c?c.padding:b.padding,ue=s.P.convert(c.offset);let ge=b.centerPoint.add(ue);const Oe=b.screenPointToLocation(ge),Ie=this.cameraHelper.handleFlyTo(b,{bearing:W,pitch:K,roll:te,padding:he,locationAtOffset:Oe,offsetAsPoint:ue,center:c.center,minZoom:c.minZoom,zoom:c.zoom});let Le=c.curve;const De=Math.max(b.width,b.height),je=De/Ie.scaleOfZoom,He=Ie.pixelPathLength;typeof Ie.scaleOfMinZoom=="number"&&(Le=Math.sqrt(De/Ie.scaleOfMinZoom/He*2));const Fe=Le*Le;function We(gt){const Kt=(je*je-De*De+(gt?-1:1)*Fe*Fe*He*He)/(2*(gt?je:De)*Fe*He);return Math.log(Math.sqrt(Kt*Kt+1)-Kt)}function Ke(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function Ze(gt){return(Math.exp(gt)+Math.exp(-gt))/2}const nt=We(!1);let yt=function(gt){return Ze(nt)/Ze(nt+Le*gt)},ht=function(gt){return De*((Ze(nt)*(Ke(Kt=nt+Le*gt)/Ze(Kt))-Ke(nt))/Fe)/He;var Kt},pt=(We(!0)-nt)/Le;if(Math.abs(He)<2e-6||!isFinite(pt)){if(Math.abs(De-je)<1e-6)return this.easeTo(c,m);const gt=je<De?-1:1;pt=Math.abs(Math.log(je/De))/Le,ht=()=>0,yt=Kt=>Math.exp(gt*Le*Kt)}return c.duration="duration"in c?+c.duration:1e3*pt/("screenSpeed"in c?+c.screenSpeed/Le:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=C!==W,this._pitching=K!==I,this._rolling=te!==L,this._padding=!b.isPaddingEqual(he),this._prepareEase(m,!1),this.terrain&&this._prepareElevation(Ie.targetCenter),this._ease((gt=>{const Kt=gt*pt,en=1/yt(Kt),zt=ht(Kt);this._rotating&&b.setBearing(s.G.number(C,W,gt)),this._pitching&&b.setPitch(s.G.number(I,K,gt)),this._rolling&&b.setRoll(s.G.number(L,te,gt)),this._padding&&(b.interpolatePadding(j,he,gt),ge=b.centerPoint.add(ue)),Ie.easeFunc(gt,en,zt,ge),this.terrain&&!c.freezeElevation&&this._updateElevation(gt),this._applyUpdatedTransform(b),this._fireMoveEvents(m)}),(()=>{this.terrain&&c.freezeElevation&&this._finalizeElevation(),this._afterEase(m)}),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,m){var b;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const C=this._onEaseEnd;delete this._onEaseEnd,C.call(this,m)}return c||(b=this.handlers)===null||b===void 0||b.stop(!1),this}_ease(c,m,b){b.animate===!1||b.duration===0?(c(1),m()):(this._easeStart=A(),this._easeOptions=b,this._onEaseFrame=c,this._onEaseEnd=m,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(c,m){c=s.W(c,-180,180);const b=Math.abs(c-m);return Math.abs(c-360-m)<b&&(c-=360),Math.abs(c+360-m)<b&&(c+=360),c}queryTerrainElevation(c){return this.terrain?this.terrain.getElevationForLngLat(s.V.convert(c),this.transform):null}}const Zi={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class oo{constructor(c=Zi){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=m=>{!m||m.sourceDataType!=="metadata"&&m.sourceDataType!=="visibility"&&m.dataType!=="style"&&m.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=c}getDefaultPosition(){return"bottom-right"}onAdd(c){return this._map=c,this._compact=this.options.compact,this._container=R.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=R.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=R.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){R.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(c,m){const b=this._map._getUIString(`AttributionControl.${m}`);c.title=b,c.setAttribute("aria-label",b)}_updateAttributions(){if(!this._map.style)return;let c=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=c.concat(this.options.customAttribution.map((C=>typeof C!="string"?"":C))):typeof this.options.customAttribution=="string"&&c.push(this.options.customAttribution)),this._map.style.stylesheet){const C=this._map.style.stylesheet;this.styleOwner=C.owner,this.styleId=C.id}const m=this._map.style.tileManagers;for(const C in m){const I=m[C];if(I.used||I.usedForTerrain){const L=I.getSource();L.attribution&&c.indexOf(L.attribution)<0&&c.push(L.attribution)}}c=c.filter((C=>String(C).trim())),c.sort(((C,I)=>C.length-I.length)),c=c.filter(((C,I)=>{for(let L=I+1;L<c.length;L++)if(c[L].indexOf(C)>=0)return!1;return!0}));const b=c.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,c.length?(this._innerContainer.innerHTML=R.sanitize(b),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Xm{constructor(c={}){this._updateCompact=()=>{const m=this._container.children;if(m.length){const b=m[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&b.classList.add("maplibregl-compact"):b.classList.remove("maplibregl-compact")}},this.options=c}getDefaultPosition(){return"bottom-left"}onAdd(c){this._map=c,this._compact=this.options&&this.options.compact,this._container=R.create("div","maplibregl-ctrl");const m=R.create("a","maplibregl-ctrl-logo");return m.target="_blank",m.rel="noopener nofollow",m.href="https://maplibre.org/",m.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),m.setAttribute("rel","noopener nofollow"),this._container.appendChild(m),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){R.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class vu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const m=++this._id;return this._queue.push({callback:c,id:m,cancelled:!1}),m}remove(c){const m=this._currentlyRunning,b=m?this._queue.concat(m):this._queue;for(const C of b)if(C.id===c)return void(C.cancelled=!0)}run(c=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const m=this._currentlyRunning=this._queue;this._queue=[];for(const b of m)if(!b.cancelled&&(b.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var yr=s.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Wr extends s.E{constructor(c){super(),this._lastTilesetChange=A(),this.tileManager=c,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=c._source.tileSize*2**this.deltaZoom,c.usedForTerrain=!0,c.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(c,m){this.tileManager.update(c,m),this._renderableTilesKeys=[];const b={};for(const C of to(c,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:m,calculateTileZoom:this.tileManager._source.calculateTileZoom}))b[C.key]=!0,this._renderableTilesKeys.push(C.key),this._tiles[C.key]||(C.terrainRttPosMatrix32f=new Float64Array(16),s.c7(C.terrainRttPosMatrix32f,0,s.a5,s.a5,0,0,1),this._tiles[C.key]=new Ot(C,this.tileSize),this._lastTilesetChange=A());for(const C in this._tiles)b[C]||delete this._tiles[C]}freeRtt(c){for(const m in this._tiles){const b=this._tiles[m];(!c||b.tileID.equals(c)||b.tileID.isChildOf(c)||c.isChildOf(b.tileID))&&(b.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((c=>this.getTileByID(c)))}getTileByID(c){return this._tiles[c]}getTerrainCoords(c,m){return m?this._getTerrainCoordsForTileRanges(c,m):this._getTerrainCoordsForRegularTile(c)}_getTerrainCoordsForRegularTile(c){const m={};for(const b of this._renderableTilesKeys){const C=this._tiles[b].tileID,I=c.clone(),L=s.bk();if(C.canonical.equals(c.canonical))s.c7(L,0,s.a5,s.a5,0,0,1);else if(C.canonical.isChildOf(c.canonical)){const j=C.canonical.z-c.canonical.z,W=C.canonical.x-(C.canonical.x>>j<<j),K=C.canonical.y-(C.canonical.y>>j<<j),te=s.a5>>j;s.c7(L,0,te,te,0,0,1),s.O(L,L,[-W*te,-K*te,0])}else{if(!c.canonical.isChildOf(C.canonical))continue;{const j=c.canonical.z-C.canonical.z,W=c.canonical.x-(c.canonical.x>>j<<j),K=c.canonical.y-(c.canonical.y>>j<<j),te=s.a5>>j;s.c7(L,0,s.a5,s.a5,0,0,1),s.O(L,L,[W*te,K*te,0]),s.Q(L,L,[1/2**j,1/2**j,0])}}I.terrainRttPosMatrix32f=new Float32Array(L),m[b]=I}return m}_getTerrainCoordsForTileRanges(c,m){const b={};for(const C of this._renderableTilesKeys){const I=this._tiles[C].tileID;if(!this._isWithinTileRanges(I,m))continue;const L=c.clone(),j=s.bk();if(I.canonical.z===c.canonical.z){const W=c.canonical.x-I.canonical.x,K=c.canonical.y-I.canonical.y;s.c7(j,0,s.a5,s.a5,0,0,1),s.O(j,j,[W*s.a5,K*s.a5,0])}else if(I.canonical.z>c.canonical.z){const W=I.canonical.z-c.canonical.z,K=I.canonical.x-(I.canonical.x>>W<<W),te=I.canonical.y-(I.canonical.y>>W<<W),he=c.canonical.x-(I.canonical.x>>W),ue=c.canonical.y-(I.canonical.y>>W),ge=s.a5>>W;s.c7(j,0,ge,ge,0,0,1),s.O(j,j,[-K*ge+he*s.a5,-te*ge+ue*s.a5,0])}else{const W=c.canonical.z-I.canonical.z,K=c.canonical.x-(c.canonical.x>>W<<W),te=c.canonical.y-(c.canonical.y>>W<<W),he=(c.canonical.x>>W)-I.canonical.x,ue=(c.canonical.y>>W)-I.canonical.y,ge=s.a5<<W;s.c7(j,0,ge,ge,0,0,1),s.O(j,j,[K*s.a5+he*ge,te*s.a5+ue*ge,0])}L.terrainRttPosMatrix32f=new Float32Array(j),b[C]=L}return b}getSourceTile(c,m){const b=this.tileManager._source;let C=c.overscaledZ-this.deltaZoom;if(C>b.maxzoom&&(C=b.maxzoom),C<b.minzoom)return;this._sourceTileCache[c.key]||(this._sourceTileCache[c.key]=c.scaledTo(C).key);let I=this.findTileInCaches(this._sourceTileCache[c.key]);if(!I?.dem&&m)for(;C>=b.minzoom&&!I?.dem;)I=this.findTileInCaches(c.scaledTo(C--).key);return I}findTileInCaches(c){let m=this.tileManager.getTileByID(c);return m||(m=this.tileManager._outOfViewCache.getByKey(c),m)}anyTilesAfterTime(c=Date.now()){return this._lastTilesetChange>=c}_isWithinTileRanges(c,m){return m[c.canonical.z]&&c.canonical.x>=m[c.canonical.z].minTileX&&c.canonical.x<=m[c.canonical.z].maxTileX&&c.canonical.y>=m[c.canonical.z].minTileY&&c.canonical.y<=m[c.canonical.z].maxTileY}}class mr{constructor(c,m,b){this._meshCache={},this.painter=c,this.tileManager=new Wr(m),this.options=b,this.exaggeration=typeof b.exaggeration=="number"?b.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(c,m,b,C=s.a5){var I;if(!(m>=0&&m<C&&b>=0&&b<C))return 0;const L=this.getTerrainData(c),j=(I=L.tile)===null||I===void 0?void 0:I.dem;if(!j)return 0;const W=s.cC([],[m/C*s.a5,b/C*s.a5],L.u_terrain_matrix),K=[W[0]*j.dim,W[1]*j.dim],te=Math.floor(K[0]),he=Math.floor(K[1]),ue=K[0]-te,ge=K[1]-he;return j.get(te,he)*(1-ue)*(1-ge)+j.get(te+1,he)*ue*(1-ge)+j.get(te,he+1)*(1-ue)*ge+j.get(te+1,he+1)*ue*ge}getElevationForLngLatZoom(c,m){if(!s.cD(m,c.wrap()))return 0;const{tileID:b,mercatorX:C,mercatorY:I}=this._getOverscaledTileIDFromLngLatZoom(c,m);return this.getElevation(b,C%s.a5,I%s.a5,s.a5)}getElevationForLngLat(c,m){const b=to(m,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let C=0;for(const I of b)I.canonical.z>C&&(C=Math.min(I.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(c,C)}getElevation(c,m,b,C=s.a5){return this.getDEMElevation(c,m,b,C)*this.exaggeration}getTerrainData(c){if(!this._emptyDemTexture){const C=this.painter.context,I=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new s.T(C,I,C.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new s.T(C,new s.R({width:1,height:1}),C.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ar([])}const m=this.tileManager.getSourceTile(c,!0);if(m&&m.dem&&(!m.demTexture||m.needsTerrainPrepare)){const C=this.painter.context;m.demTexture=this.painter.getTileTexture(m.dem.stride),m.demTexture?m.demTexture.update(m.dem.getPixels(),{premultiply:!1}):m.demTexture=new s.T(C,m.dem.getPixels(),C.gl.RGBA,{premultiply:!1}),m.demTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),m.needsTerrainPrepare=!1}const b=m&&m.toString()+m.tileID.key+c.key;if(b&&!this._demMatrixCache[b]){const C=this.tileManager.getSource().maxzoom;let I=c.canonical.z-m.tileID.canonical.z;c.overscaledZ>c.canonical.z&&(c.canonical.z>=C?I=c.canonical.z-C:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const L=c.canonical.x-(c.canonical.x>>I<<I),j=c.canonical.y-(c.canonical.y>>I<<I),W=s.cE(new Float64Array(16),[1/(s.a5<<I),1/(s.a5<<I),0]);s.O(W,W,[L*s.a5,j*s.a5,0]),this._demMatrixCache[c.key]={matrix:W,coord:c}}return{u_depth:2,u_terrain:3,u_terrain_dim:m&&m.dem&&m.dem.dim||1,u_terrain_matrix:b?this._demMatrixCache[c.key].matrix:this._emptyDemMatrix,u_terrain_unpack:m&&m.dem&&m.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(m&&m.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:m}}getFramebuffer(c){const m=this.painter,b=m.width/devicePixelRatio,C=m.height/devicePixelRatio;return!this._fbo||this._fbo.width===b&&this._fbo.height===C||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new s.T(m.context,{width:b,height:C,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new s.T(m.context,{width:b,height:C,data:null},m.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(m.context.gl.NEAREST,m.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=m.context.createFramebuffer(b,C,!0,!1),this._fbo.depthAttachment.set(m.context.createRenderbuffer(m.context.gl.DEPTH_COMPONENT16,b,C))),this._fbo.colorAttachment.set(c==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const c=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const m=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let I=0,L=0;I<this._coordsTextureSize;I++)for(let j=0;j<this._coordsTextureSize;j++,L+=4)m[L+0]=255&j,m[L+1]=255&I,m[L+2]=j>>8<<4|I>>8,m[L+3]=0;const b=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(m.buffer)),C=new s.T(c,b,c.gl.RGBA,{premultiply:!1});return C.bind(c.gl.NEAREST,c.gl.CLAMP_TO_EDGE),this._coordsTexture=C,C}pointCoordinate(c){this.painter.maybeDrawDepthAndCoords(!0);const m=new Uint8Array(4),b=this.painter.context,C=b.gl,I=Math.round(c.x*this.painter.pixelRatio/devicePixelRatio),L=Math.round(c.y*this.painter.pixelRatio/devicePixelRatio),j=Math.round(this.painter.height/devicePixelRatio);b.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),C.readPixels(I,j-L-1,1,1,C.RGBA,C.UNSIGNED_BYTE,m),b.bindFramebuffer.set(null);const W=m[0]+(m[2]>>4<<8),K=m[1]+((15&m[2])<<8),te=this.coordsIndex[255-m[3]],he=te&&this.tileManager.getTileByID(te);if(!he)return null;const ue=this._coordsTextureSize,ge=(1<<he.tileID.canonical.z)*ue;return new s.a9((he.tileID.canonical.x*ue+W)/ge+he.tileID.wrap,(he.tileID.canonical.y*ue+K)/ge,this.getElevation(he.tileID,W,K,ue))}depthAtPoint(c){const m=new Uint8Array(4),b=this.painter.context,C=b.gl;return b.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),C.readPixels(c.x,this.painter.height/devicePixelRatio-c.y-1,1,1,C.RGBA,C.UNSIGNED_BYTE,m),b.bindFramebuffer.set(null),(m[0]/16777216+m[1]/65536+m[2]/256+m[3])/256}getTerrainMesh(c){var m;const b=((m=this.painter.style.projection)===null||m===void 0?void 0:m.transitionState)>0,C=b&&c.canonical.y===0,I=b&&c.canonical.y===(1<<c.canonical.z)-1,L=`m_${C?"n":""}_${I?"s":""}`;if(this._meshCache[L])return this._meshCache[L];const j=this.painter.context,W=new s.cF,K=new s.aY,te=this.meshSize,he=s.a5/te,ue=te*te;for(let Ze=0;Ze<=te;Ze++)for(let nt=0;nt<=te;nt++)W.emplaceBack(nt*he,Ze*he,0);for(let Ze=0;Ze<ue;Ze+=te+1)for(let nt=0;nt<te;nt++)K.emplaceBack(nt+Ze,te+nt+Ze+1,te+nt+Ze+2),K.emplaceBack(nt+Ze,te+nt+Ze+2,nt+Ze+1);const ge=W.length,Oe=ge+(te+1),Ie=(te+1)*te,Le=C?s.br:0,De=C?0:1,je=I?s.bs:s.a5,He=I?0:1;for(let Ze=0;Ze<=te;Ze++)W.emplaceBack(Ze*he,Le,De);for(let Ze=0;Ze<=te;Ze++)W.emplaceBack(Ze*he,je,He);for(let Ze=0;Ze<te;Ze++)K.emplaceBack(Ie+Ze,Oe+Ze,Oe+Ze+1),K.emplaceBack(Ie+Ze,Oe+Ze+1,Ie+Ze+1),K.emplaceBack(0+Ze,ge+Ze+1,ge+Ze),K.emplaceBack(0+Ze,0+Ze+1,ge+Ze+1);const Fe=W.length,We=Fe+2*(te+1);for(const Ze of[0,1])for(let nt=0;nt<=te;nt++)for(const yt of[0,1])W.emplaceBack(Ze*s.a5,nt*he,yt);for(let Ze=0;Ze<2*te;Ze+=2)K.emplaceBack(Fe+Ze,Fe+Ze+1,Fe+Ze+3),K.emplaceBack(Fe+Ze,Fe+Ze+3,Fe+Ze+2),K.emplaceBack(We+Ze,We+Ze+3,We+Ze+1),K.emplaceBack(We+Ze,We+Ze+2,We+Ze+3);const Ke=new ci(j.createVertexBuffer(W,yr.members),j.createIndexBuffer(K),s.aX.simpleSegment(0,0,W.length,K.length));return this._meshCache[L]=Ke,Ke}getMeshFrameDelta(c){return 2*Math.PI*s.bE/Math.pow(2,Math.max(c,0))/5}getMinTileElevationForLngLatZoom(c,m){var b;if(!s.cD(m,c.wrap()))return 0;const{tileID:C}=this._getOverscaledTileIDFromLngLatZoom(c,m);return(b=this.getMinMaxElevation(C).minElevation)!==null&&b!==void 0?b:0}getMinMaxElevation(c){const m=this.getTerrainData(c).tile,b={minElevation:null,maxElevation:null};return m&&m.dem&&(b.minElevation=m.dem.min*this.exaggeration,b.maxElevation=m.dem.max*this.exaggeration),b}_getOverscaledTileIDFromLngLatZoom(c,m){const b=s.a9.fromLngLat(c.wrap()),C=(1<<m)*s.a5,I=b.x*C,L=b.y*C,j=Math.floor(I/s.a5),W=Math.floor(L/s.a5);return{tileID:new s.a2(m,0,m,j,W),mercatorX:I,mercatorY:L}}}class zi{constructor(c,m,b){this._context=c,this._size=m,this._tileSize=b,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const c of this._objects)c.texture.destroy(),c.fbo.destroy()}_createObject(c){const m=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),b=new s.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return b.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),m.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),m.colorAttachment.set(b.texture),{id:c,fbo:m,texture:b,stamp:-1,inUse:!1}}getObjectForId(c){return this._objects[c]}useObject(c){c.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((m=>c.id!==m)),this._recentlyUsed.push(c.id)}stampObject(c){c.stamp=++this._stamp}getOrCreateFreeObject(){for(const m of this._recentlyUsed)if(!this._objects[m].inUse)return this._objects[m];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const c=this._createObject(this._objects.length);return this._objects.push(c),c}freeObject(c){c.inUse=!1}freeAllObjects(){for(const c of this._objects)this.freeObject(c)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((c=>!c.inUse))===!1}}const gl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class ql{constructor(c,m){this.painter=c,this.terrain=m,this.pool=new zi(c.context,30,m.tileManager.tileSize*m.qualityFactor)}destruct(){this.pool.destruct()}getTexture(c){return this.pool.getObjectForId(c.rtt[this._stacks.length-1].id).texture}prepareForRender(c,m){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=c._order.filter((b=>!c._layers[b].isHidden(m))),this._coordsAscending={};for(const b in c.tileManagers){this._coordsAscending[b]={};const C=c.tileManagers[b].getVisibleCoordinates(),I=c.tileManagers[b].getSource(),L=I instanceof Vt?I.terrainTileRanges:null;for(const j of C){const W=this.terrain.tileManager.getTerrainCoords(j,L);for(const K in W)this._coordsAscending[b][K]||(this._coordsAscending[b][K]=[]),this._coordsAscending[b][K].push(W[K])}}this._coordsAscendingStr={};for(const b of c._order){const C=c._layers[b],I=C.source;if(gl[C.type]&&!this._coordsAscendingStr[I]){this._coordsAscendingStr[I]={};for(const L in this._coordsAscending[I])this._coordsAscendingStr[I][L]=this._coordsAscending[I][L].map((j=>j.key)).sort().join()}}for(const b of this._renderableTiles)for(const C in this._coordsAscendingStr){const I=this._coordsAscendingStr[C][b.tileID.key];I&&I!==b.rttCoords[C]&&(b.rtt=[])}}renderLayer(c,m){if(c.isHidden(this.painter.transform.zoom))return!1;const b=Object.assign(Object.assign({},m),{isRenderingToTexture:!0}),C=c.type,I=this.painter,L=this._renderableLayerIds[this._renderableLayerIds.length-1]===c.id;if(gl[C]&&(this._prevType&&gl[this._prevType]||this._stacks.push([]),this._prevType=C,this._stacks[this._stacks.length-1].push(c.id),!L))return!0;if(gl[this._prevType]||gl[C]&&L){this._prevType=C;const j=this._stacks.length-1,W=this._stacks[j]||[];for(const K of this._renderableTiles){if(this.pool.isFull()&&(Py(this.painter,this.terrain,this._rttTiles,b),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(K),K.rtt[j]){const he=this.pool.getObjectForId(K.rtt[j].id);if(he.stamp===K.rtt[j].stamp){this.pool.useObject(he);continue}}const te=this.pool.getOrCreateFreeObject();this.pool.useObject(te),this.pool.stampObject(te),K.rtt[j]={id:te.id,stamp:te.stamp},I.context.bindFramebuffer.set(te.fbo.framebuffer),I.context.clear({color:s.bp.transparent,stencil:0}),I.currentStencilSource=void 0;for(let he=0;he<W.length;he++){const ue=I.style._layers[W[he]],ge=ue.source?this._coordsAscending[ue.source][K.tileID.key]:[K.tileID];I.context.viewport.set([0,0,te.fbo.width,te.fbo.height]),I._renderTileClippingMasks(ue,ge,!0),I.renderLayer(I,I.style.tileManagers[ue.source],ue,ge,b),ue.source&&(K.rttCoords[ue.source]=this._coordsAscendingStr[ue.source][K.tileID.key])}}return Py(this.painter,this.terrain,this._rttTiles,b),this._rttTiles=[],this.pool.freeAllObjects(),gl[C]}return!1}}const Pd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Md=u,_u={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Zi,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Tv={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ki{constructor(c,m,b=!1){this.mousedown=I=>{this.startMove(I,R.mousePos(this.element,I)),R.addEventListener(window,"mousemove",this.mousemove),R.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.move(I,R.mousePos(this.element,I))},this.mouseup=I=>{this._rotatePitchHandler.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=R.touchPos(this.element,I.targetTouches)[0],this.startMove(I,this._startPos),R.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=R.touchPos(this.element,I.targetTouches)[0],this.move(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=m;const C=new Um;this._rotatePitchHandler=new fl({clickTolerance:3,move:(I,L)=>{const j=m.getBoundingClientRect(),W=new s.P((j.bottom-j.top)/2,(j.right-j.left)/2);return{bearingDelta:s.cx(new s.P(I.x,L.y),L,W),pitchDelta:b?-.5*(L.y-I.y):void 0}},moveStateManager:C,enable:!0,assignEvents:()=>{}}),this.map=c,R.addEventListener(m,"mousedown",this.mousedown),R.addEventListener(m,"touchstart",this.touchstart,{passive:!1}),R.addEventListener(m,"touchcancel",this.reset)}startMove(c,m){this._rotatePitchHandler.dragStart(c,m),R.disableDrag()}move(c,m){const b=this.map,{bearingDelta:C,pitchDelta:I}=this._rotatePitchHandler.dragMove(c,m)||{};C&&b.setBearing(b.getBearing()+C),I&&b.setPitch(b.getPitch()+I)}off(){const c=this.element;R.removeEventListener(c,"mousedown",this.mousedown),R.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),R.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.removeEventListener(window,"touchend",this.touchend),R.removeEventListener(c,"touchcancel",this.reset),this.offTemp()}offTemp(){R.enableDrag(),R.removeEventListener(window,"mousemove",this.mousemove),R.removeEventListener(window,"mouseup",this.mouseup),R.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),R.removeEventListener(window,"touchend",this.touchend)}}let Wl;function np(P,c,m,b=!1){if(b||!m.getCoveringTilesDetailsProvider().allowWorldCopies())return P?.wrap();const C=new s.V(P.lng,P.lat);if(P=new s.V(P.lng,P.lat),c){const I=new s.V(P.lng-360,P.lat),L=new s.V(P.lng+360,P.lat),j=m.locationToScreenPoint(P).distSqr(c);m.locationToScreenPoint(I).distSqr(c)<j?P=I:m.locationToScreenPoint(L).distSqr(c)<j&&(P=L)}for(;Math.abs(P.lng-m.center.lng)>180;){const I=m.locationToScreenPoint(P);if(I.x>=0&&I.y>=0&&I.x<=m.width&&I.y<=m.height)break;P.lng>m.center.lng?P.lng-=360:P.lng+=360}return P.lng!==C.lng&&m.isPointOnMapSurface(m.locationToScreenPoint(P))?P:C}const rp={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ym(P,c,m){const b=P.classList;for(const C in rp)b.remove(`maplibregl-${m}-anchor-${C}`);b.add(`maplibregl-${m}-anchor-${c}`)}class Km extends s.E{constructor(c){if(super(),this._onKeyPress=m=>{const b=m.code,C=m.charCode||m.keyCode;b!=="Space"&&b!=="Enter"&&C!==32&&C!==13||this.togglePopup()},this._onMapClick=m=>{const b=m.originalEvent.target,C=this._element;this._popup&&(b===C||C.contains(b))&&this.togglePopup()},this._update=m=>{if(!this._map)return;const b=this._map.loaded()&&!this._map.isMoving();(m?.type==="terrain"||m?.type==="render"&&!b)&&this._map.once("render",this._update),this._lngLat=np(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let C="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?C=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(C=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||m&&m.type!=="moveend"||(this._pos=this._pos.round()),R.setTransform(this._element,`${rp[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${C}`),S.frameAsync(new AbortController).then((()=>{this._updateOpacity(m&&m.type==="moveend")})).catch((()=>{}))},this._onMove=m=>{if(!this._isDragging){const b=this._clickTolerance||this._map._clickTolerance;this._isDragging=m.point.dist(this._pointerdownPos)>=b}this._isDragging&&(this._pos=m.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=m=>{this._element.contains(m.originalEvent.target)&&(m.preventDefault(),this._positionDelta=m.point.sub(this._pos).add(this._offset),this._pointerdownPos=m.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._subpixelPositioning=c&&c.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment!=="auto"?c.pitchAlignment:this._rotationAlignment,this.setOpacity(c?.opacity,c?.opacityWhenCovered),c&&c.element)this._element=c.element,this._offset=s.P.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=R.create("div");const m=R.createNS("http://www.w3.org/2000/svg","svg"),b=41,C=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${b}px`),m.setAttributeNS(null,"width",`${C}px`),m.setAttributeNS(null,"viewBox",`0 0 ${C} ${b}`);const I=R.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"stroke","none"),I.setAttributeNS(null,"stroke-width","1"),I.setAttributeNS(null,"fill","none"),I.setAttributeNS(null,"fill-rule","evenodd");const L=R.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill-rule","nonzero");const j=R.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const W=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const De of W){const je=R.createNS("http://www.w3.org/2000/svg","ellipse");je.setAttributeNS(null,"opacity","0.04"),je.setAttributeNS(null,"cx","10.5"),je.setAttributeNS(null,"cy","5.80029008"),je.setAttributeNS(null,"rx",De.rx),je.setAttributeNS(null,"ry",De.ry),j.appendChild(je)}const K=R.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill",this._color);const te=R.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),K.appendChild(te);const he=R.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"fill","#000000");const ue=R.createNS("http://www.w3.org/2000/svg","path");ue.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),he.appendChild(ue);const ge=R.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ge.setAttributeNS(null,"fill","#FFFFFF");const Oe=R.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ie=R.createNS("http://www.w3.org/2000/svg","circle");Ie.setAttributeNS(null,"fill","#000000"),Ie.setAttributeNS(null,"opacity","0.25"),Ie.setAttributeNS(null,"cx","5.5"),Ie.setAttributeNS(null,"cy","5.5"),Ie.setAttributeNS(null,"r","5.4999962");const Le=R.createNS("http://www.w3.org/2000/svg","circle");Le.setAttributeNS(null,"fill","#FFFFFF"),Le.setAttributeNS(null,"cx","5.5"),Le.setAttributeNS(null,"cy","5.5"),Le.setAttributeNS(null,"r","5.4999962"),Oe.appendChild(Ie),Oe.appendChild(Le),L.appendChild(j),L.appendChild(K),L.appendChild(he),L.appendChild(ge),L.appendChild(Oe),m.appendChild(L),m.setAttributeNS(null,"height",b*this._scale+"px"),m.setAttributeNS(null,"width",C*this._scale+"px"),this._element.appendChild(m),this._offset=s.P.convert(c&&c.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(m=>{m.preventDefault()})),this._element.addEventListener("mousedown",(m=>{m.preventDefault()})),Ym(this._element,this._anchor,"marker"),c&&c.className)for(const m of c.className.split(" "))this._element.classList.add(m);this._popup=null}addTo(c){return this.remove(),this._map=c,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",c._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),c.on("terrain",this._update),c.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),R.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=s.V.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const C=Math.abs(13.5)/Math.SQRT2;c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[C,-1*(38.1-13.5+C)],"bottom-right":[-C,-1*(38.1-13.5+C)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(c){return this._subpixelPositioning=c,this}getPopup(){return this._popup}togglePopup(){const c=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:c?(c.isOpen()?c.remove():(c.setLngLat(this._lngLat),c.addTo(this._map)),this):this}_updateOpacity(c=!1){var m,b;const C=(m=this._map)===null||m===void 0?void 0:m.terrain,I=this._map.transform.isLocationOccluded(this._lngLat);if(!C||I){const ge=I?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ge&&(this._element.style.opacity=ge))}if(c)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const L=this._map,j=L.terrain.depthAtPoint(this._pos),W=L.terrain.getElevationForLngLat(this._lngLat,L.transform);if(L.transform.lngLatToCameraDepth(this._lngLat,W)-j<.006)return void(this._element.style.opacity=this._opacity);const K=-this._offset.y/L.transform.pixelsPerMeter,te=Math.sin(L.getPitch()*Math.PI/180)*K,he=L.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),ue=L.transform.lngLatToCameraDepth(this._lngLat,W+te)-he>.006;!((b=this._popup)===null||b===void 0)&&b.isOpen()&&ue&&this._popup.remove(),this._element.style.opacity=ue?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(c){return this._offset=s.P.convert(c),this._update(),this}addClassName(c){this._element.classList.add(c)}removeClassName(c){this._element.classList.remove(c)}toggleClassName(c){return this._element.classList.toggle(c)}setDraggable(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c&&c!=="auto"?c:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(c,m){return(this._opacity===void 0||c===void 0&&m===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),c!==void 0&&(this._opacity=c),m!==void 0&&(this._opacityWhenCovered=m),this._map&&this._updateOpacity(!0),this}}const Jm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Oh=0,bu=!1;const ws={maxWidth:100,unit:"metric"};function Ni(P,c,m){const b=m&&m.maxWidth||100,C=P._container.clientHeight/2,I=P._container.clientWidth/2,L=P.unproject([I-b/2,C]),j=P.unproject([I+b/2,C]),W=Math.round(P.project(j).x-P.project(L).x),K=Math.min(b,W,P._container.clientWidth),te=L.distanceTo(j);if(m&&m.unit==="imperial"){const he=3.2808*te;he>5280?Lc(c,K,he/5280,P._getUIString("ScaleControl.Miles")):Lc(c,K,he,P._getUIString("ScaleControl.Feet"))}else m&&m.unit==="nautical"?Lc(c,K,te/1852,P._getUIString("ScaleControl.NauticalMiles")):te>=1e3?Lc(c,K,te/1e3,P._getUIString("ScaleControl.Kilometers")):Lc(c,K,te,P._getUIString("ScaleControl.Meters"))}function Lc(P,c,m,b){const C=(function(I){const L=Math.pow(10,`${Math.floor(I)}`.length-1);let j=I/L;return j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:(function(W){const K=Math.pow(10,Math.ceil(-Math.log(W)/Math.LN10));return Math.round(W*K)/K})(j),L*j})(m);P.style.width=c*(C/m)+"px",P.innerHTML=`${C}&nbsp;${b}`}const Rd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Id=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ip(P){if(P){if(typeof P=="number"){const c=Math.round(Math.abs(P)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,P),"top-left":new s.P(c,c),"top-right":new s.P(-c,c),bottom:new s.P(0,-P),"bottom-left":new s.P(c,-c),"bottom-right":new s.P(-c,-c),left:new s.P(P,0),right:new s.P(-P,0)}}if(P instanceof s.P||Array.isArray(P)){const c=s.P.convert(P);return{center:c,top:c,"top-left":c,"top-right":c,bottom:c,"bottom-left":c,"bottom-right":c,left:c,right:c}}return{center:s.P.convert(P.center||[0,0]),top:s.P.convert(P.top||[0,0]),"top-left":s.P.convert(P["top-left"]||[0,0]),"top-right":s.P.convert(P["top-right"]||[0,0]),bottom:s.P.convert(P.bottom||[0,0]),"bottom-left":s.P.convert(P["bottom-left"]||[0,0]),"bottom-right":s.P.convert(P["bottom-right"]||[0,0]),left:s.P.convert(P.left||[0,0]),right:s.P.convert(P.right||[0,0])}}return ip(new s.P(0,0))}const Hl=u;a.AJAXError=s.cI,a.Event=s.l,a.Evented=s.E,a.LngLat=s.V,a.MercatorCoordinate=s.a9,a.Point=s.P,a.addProtocol=s.cJ,a.config=s.c,a.removeProtocol=s.cK,a.AttributionControl=oo,a.BoxZoomHandler=xh,a.CanvasSource=ae,a.CooperativeGesturesHandler=yn,a.DoubleClickZoomHandler=zy,a.DragPanHandler=Cv,a.DragRotateHandler=Va,a.EdgeInsets=Ia,a.FullscreenControl=class extends s.E{constructor(P={}){super(),this._onFullscreenChange=()=>{var c;let m=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((c=m?.shadowRoot)===null||c===void 0)&&c.fullscreenElement;)m=m.shadowRoot.fullscreenElement;m===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,P&&P.container&&(P.container instanceof HTMLElement?this._container=P.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(P){return this._map=P,this._container||(this._container=this._map.getContainer()),this._controlContainer=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){R.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const P=this._fullscreenButton=R.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);R.create("span","maplibregl-ctrl-icon",P).setAttribute("aria-hidden","true"),P.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const P=this._getTitle();this._fullscreenButton.setAttribute("aria-label",P),this._fullscreenButton.title=P}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=Et,a.GeolocateControl=class extends s.E{constructor(P){super(),this._onSuccess=c=>{if(this._map){if(this._isOutOfMapMaxBounds(c))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",c)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=c,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(c),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(c),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",c)),this._finish()}},this._updateCamera=c=>{const m=new s.V(c.coords.longitude,c.coords.latitude),b=c.coords.accuracy,C=this._map.getBearing(),I=s.e({bearing:C},this.options.fitBoundsOptions),L=vn.fromLngLat(m,b);this._map.fitBounds(L,I,{geolocateSource:!0})},this._updateMarker=c=>{if(c){const m=new s.V(c.coords.longitude,c.coords.latitude);this._accuracyCircleMarker.setLngLat(m).addTo(this._map),this._userLocationDotMarker.setLngLat(m).addTo(this._map),this._accuracy=c.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=c=>{if(this._map){if(c.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(c.code===3&&bu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",c)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(c=>c.preventDefault())),this._geolocateButton=R.create("button","maplibregl-ctrl-geolocate",this._container),R.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=c=>{if(this._map){if(c===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const m=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}else{const m=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=m,this._geolocateButton.setAttribute("aria-label",m)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=R.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Km({element:this._dotElement}),this._circleElement=R.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Km({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(m=>{const b=m?.[0]instanceof ResizeObserverEntry;m.geolocateSource||this._watchState!=="ACTIVE_LOCK"||b||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))}))}},this.options=s.e({},Jm,P)}onAdd(P){return this._map=P,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return s._(this,arguments,void 0,(function*(c=!1){if(Wl!==void 0&&!c)return Wl;if(window.navigator.permissions===void 0)return Wl=!!window.navigator.geolocation,Wl;try{Wl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Wl=!!window.navigator.geolocation}return Wl}))})().then((c=>this._finishSetupUI(c))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),R.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Oh=0,bu=!1}_isOutOfMapMaxBounds(P){const c=this._map.getMaxBounds(),m=P.coords;return c&&(m.longitude<c.getWest()||m.longitude>c.getEast()||m.latitude<c.getSouth()||m.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const P=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&P))return;const c=this._map.project(P),m=this._map.unproject([c.x+100,c.y]),b=P.distanceTo(m)/100,C=2*this._accuracy/b;this._circleElement.style.width=`${C.toFixed(2)}px`,this._circleElement.style.height=`${C.toFixed(2)}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Oh--,bu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let P;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Oh++,Oh>1?(P={maximumAge:6e5,timeout:0},bu=!0):(P=this.options.positionOptions,bu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,P)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.GlobeControl=class{constructor(){this._toggleProjection=()=>{var P;const c=(P=this._map.getProjection())===null||P===void 0?void 0:P.type;this._map.setProjection(c!=="mercator"&&c?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var P;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((P=this._map.getProjection())===null||P===void 0?void 0:P.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(P){return this._map=P,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=R.create("button","maplibregl-ctrl-globe",this._container),R.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){R.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},a.Hash=vo,a.ImageSource=Vt,a.KeyboardHandler=Xr,a.LngLatBounds=vn,a.LogoControl=Xm,a.Map=class extends _o{constructor(P){var c,m;s.cG.mark(s.cH.create);const b=Object.assign(Object.assign(Object.assign({},_u),P),{canvasContextAttributes:Object.assign(Object.assign({},_u.canvasContextAttributes),P.canvasContextAttributes)});if(b.minZoom!=null&&b.maxZoom!=null&&b.minZoom>b.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(b.minPitch!=null&&b.maxPitch!=null&&b.minPitch>b.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(b.minPitch!=null&&b.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(b.maxPitch!=null&&b.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const C=new Bo,I=new md;if(b.minZoom!==void 0&&C.setMinZoom(b.minZoom),b.maxZoom!==void 0&&C.setMaxZoom(b.maxZoom),b.minPitch!==void 0&&C.setMinPitch(b.minPitch),b.maxPitch!==void 0&&C.setMaxPitch(b.maxPitch),b.renderWorldCopies!==void 0&&C.setRenderWorldCopies(b.renderWorldCopies),b.transformConstrain!==null&&C.setConstrainOverride(b.transformConstrain),super(C,I,{bearingSnap:b.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new vu,this._controls=[],this._mapId=s.af(),this._lostContextStyle={style:null,images:null},this._contextLost=j=>{j.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const W of Object.values(this.style._layers))if(W.type==="custom"&&console.warn(`Custom layer with id '${W.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),W._listeners)for(const[K]of Object.entries(W._listeners))console.warn(`Custom layer with id '${W.id}' had event listeners for event '${K}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new s.l("webglcontextlost",{originalEvent:j}))},this._contextRestored=j=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:j}))},this._onMapScroll=j=>{if(j.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=b.interactive,this._maxTileCacheSize=b.maxTileCacheSize,this._maxTileCacheZoomLevels=b.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},b.canvasContextAttributes),this._trackResize=b.trackResize===!0,this._bearingSnap=b.bearingSnap,this._centerClampedToGround=b.centerClampedToGround,this._refreshExpiredTiles=b.refreshExpiredTiles===!0,this._fadeDuration=b.fadeDuration,this._crossSourceCollisions=b.crossSourceCollisions===!0,this._collectResourceTiming=b.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Pd),b.locale),this._clickTolerance=b.clickTolerance,this._overridePixelRatio=b.pixelRatio,this._maxCanvasSize=b.maxCanvasSize,this._zoomLevelsToOverscale=b.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=b.transformCameraUpdate,this.transformConstrain=b.transformConstrain,this.cancelPendingTileRequestsWhileZooming=b.cancelPendingTileRequestsWhileZooming===!0,b.reduceMotion!==void 0&&(S.prefersReducedMotion=b.reduceMotion),this._imageQueueHandle=H.addThrottleControl((()=>this.isMoving())),this._requestManager=new ne(b.transformRequest),typeof b.container=="string"){if(this._container=document.getElementById(b.container),!this._container)throw new Error(`Container '${b.container}' not found.`)}else{if(!(b.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=b.container}if(b.maxBounds&&this.setMaxBounds(b.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let j=!1;const W=wv((K=>{this._trackResize&&!this._removed&&(this.resize(K),this.redraw())}),50);this._resizeObserver=new ResizeObserver((K=>{j?W(K):j=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Gm(this,b),this._hash=b.hash&&new vo(typeof b.hash=="string"&&b.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:b.center,elevation:b.elevation,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch,roll:b.roll}),b.bounds&&(this.resize(),this.fitBounds(b.bounds,s.e({},b.fitBoundsOptions,{duration:0}))));const L=typeof b.style=="string"||((m=(c=b.style)===null||c===void 0?void 0:c.projection)===null||m===void 0?void 0:m.type)!=="globe";this.resize(null,L),this._localIdeographFontFamily=b.localIdeographFontFamily,this._validateStyle=b.validateStyle,b.style&&this.setStyle(b.style,{localIdeographFontFamily:b.localIdeographFontFamily}),b.attributionControl&&this.addControl(new oo(typeof b.attributionControl=="boolean"?void 0:b.attributionControl)),b.maplibreLogo&&this.addControl(new Xm,b.logoPosition),this.on("style.load",(()=>{if(L||this._resizeTransform(),this.transform.unmodified){const j=s.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(j)}})),this.on("data",(j=>{this._update(j.dataType==="style"),this.fire(new s.l(`${j.dataType}data`,j))})),this.on("dataloading",(j=>{this.fire(new s.l(`${j.dataType}dataloading`,j))})),this.on("dataabort",(j=>{this.fire(new s.l("sourcedataabort",j))}))}_getMapId(){return this._mapId}setGlobalStateProperty(P,c){return this.style.setGlobalStateProperty(P,c),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(P,c){if(c===void 0&&(c=P.getDefaultPosition?P.getDefaultPosition():"top-right"),!P||!P.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const m=P.onAdd(this);this._controls.push(P);const b=this._controlPositions[c];return c.indexOf("bottom")!==-1?b.insertBefore(m,b.firstChild):b.appendChild(m),this}removeControl(P){if(!P||!P.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(P);return c>-1&&this._controls.splice(c,1),P.onRemove(this),this}hasControl(P){return this._controls.indexOf(P)>-1}coveringTiles(P){return to(this.transform,P)}calculateCameraOptionsFromTo(P,c,m,b){return b==null&&this.terrain&&(b=this.terrain.getElevationForLngLat(m,this.transform)),super.calculateCameraOptionsFromTo(P,c,m,b)}resize(P,c=!0){const[m,b]=this._containerDimensions(),C=this._getClampedPixelRatio(m,b);if(this._resizeCanvas(m,b,C),this.painter.resize(m,b,C),this.painter.overLimit()){const L=this.painter.context.gl;this._maxCanvasSize=[L.drawingBufferWidth,L.drawingBufferHeight];const j=this._getClampedPixelRatio(m,b);this._resizeCanvas(m,b,j),this.painter.resize(m,b,j)}this._resizeTransform(c);const I=!this._moving;return I&&(this.stop(),this.fire(new s.l("movestart",P)).fire(new s.l("move",P))),this.fire(new s.l("resize",P)),I&&this.fire(new s.l("moveend",P)),this}_resizeTransform(P=!0){var c;const[m,b]=this._containerDimensions();this.transform.resize(m,b,P),(c=this._requestedCameraState)===null||c===void 0||c.resize(m,b,P)}_getClampedPixelRatio(P,c){const{0:m,1:b}=this._maxCanvasSize,C=this.getPixelRatio(),I=P*C,L=c*C;return Math.min(I>m?m/I:1,L>b?b/L:1)*C}getPixelRatio(){var P;return(P=this._overridePixelRatio)!==null&&P!==void 0?P:devicePixelRatio}setPixelRatio(P){this._overridePixelRatio=P,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(P){return this.transform.setMaxBounds(vn.convert(P)),this._update()}setMinZoom(P){if((P=P??-2)>=-2&&P<=this.transform.maxZoom){const c=this._getTransformForUpdate();return c.setMinZoom(P),this._applyUpdatedTransform(c),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(P){if((P=P??22)>=this.transform.minZoom){const c=this._getTransformForUpdate();return c.setMaxZoom(P),this._applyUpdatedTransform(c),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(P){if((P=P??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(P>=0&&P<=this.transform.maxPitch)return this.transform.setMinPitch(P),this._update(),this.getPitch()<P&&this.setPitch(P),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(P){if((P=P??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(P>=this.transform.minPitch)return this.transform.setMaxPitch(P),this._update(),this.getPitch()>P&&this.setPitch(P),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(P){return this.transform.setRenderWorldCopies(P),this._update()}setTransformConstrain(P){return this.transform.setConstrainOverride(P),this._update()}project(P){return this.transform.locationToScreenPoint(s.V.convert(P),this.style&&this.terrain)}unproject(P){return this.transform.screenPointToLocation(s.P.convert(P),this.terrain)}isMoving(){var P;return this._moving||((P=this.handlers)===null||P===void 0?void 0:P.isMoving())}isZooming(){var P;return this._zooming||((P=this.handlers)===null||P===void 0?void 0:P.isZooming())}isRotating(){var P;return this._rotating||((P=this.handlers)===null||P===void 0?void 0:P.isRotating())}_createDelegatedListener(P,c,m){if(P==="mouseenter"||P==="mouseover"){let b=!1;return{layers:c,listener:m,delegates:{mousemove:I=>{const L=c.filter((W=>this.getLayer(W))),j=L.length!==0?this.queryRenderedFeatures(I.point,{layers:L}):[];j.length?b||(b=!0,m.call(this,new Yo(P,this,I.originalEvent,{features:j}))):b=!1},mouseout:()=>{b=!1}}}}if(P==="mouseleave"||P==="mouseout"){let b=!1;return{layers:c,listener:m,delegates:{mousemove:L=>{const j=c.filter((W=>this.getLayer(W)));(j.length!==0?this.queryRenderedFeatures(L.point,{layers:j}):[]).length?b=!0:b&&(b=!1,m.call(this,new Yo(P,this,L.originalEvent)))},mouseout:L=>{b&&(b=!1,m.call(this,new Yo(P,this,L.originalEvent)))}}}}{const b=C=>{const I=c.filter((j=>this.getLayer(j))),L=I.length!==0?this.queryRenderedFeatures(C.point,{layers:I}):[];L.length&&(C.features=L,m.call(this,C),delete C.features)};return{layers:c,listener:m,delegates:{[P]:b}}}}_saveDelegatedListener(P,c){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[P]=this._delegatedListeners[P]||[],this._delegatedListeners[P].push(c)}_removeDelegatedListener(P,c,m){if(!this._delegatedListeners||!this._delegatedListeners[P])return;const b=this._delegatedListeners[P];for(let C=0;C<b.length;C++){const I=b[C];if(I.listener===m&&I.layers.length===c.length&&I.layers.every((L=>c.includes(L)))){for(const L in I.delegates)this.off(L,I.delegates[L]);return void b.splice(C,1)}}}on(P,c,m){if(m===void 0)return super.on(P,c);const b=typeof c=="string"?[c]:c,C=this._createDelegatedListener(P,b,m);this._saveDelegatedListener(P,C);for(const I in C.delegates)this.on(I,C.delegates[I]);return{unsubscribe:()=>{this._removeDelegatedListener(P,b,m)}}}once(P,c,m){if(m===void 0)return super.once(P,c);const b=typeof c=="string"?[c]:c,C=this._createDelegatedListener(P,b,m);for(const I in C.delegates){const L=C.delegates[I];C.delegates[I]=(...j)=>{this._removeDelegatedListener(P,b,m),L(...j)}}this._saveDelegatedListener(P,C);for(const I in C.delegates)this.once(I,C.delegates[I]);return this}off(P,c,m){return m===void 0?super.off(P,c):(this._removeDelegatedListener(P,typeof c=="string"?[c]:c,m),this)}queryRenderedFeatures(P,c){if(!this.style)return[];let m;const b=P instanceof s.P||Array.isArray(P),C=b?P:[[0,0],[this.transform.width,this.transform.height]];if(c=c||(b?{}:P)||{},C instanceof s.P||typeof C[0]=="number")m=[s.P.convert(C)];else{const I=s.P.convert(C[0]),L=s.P.convert(C[1]);m=[I,new s.P(L.x,I.y),L,new s.P(I.x,L.y),I]}return this.style.queryRenderedFeatures(m,c,this.transform)}querySourceFeatures(P,c){return this.style.querySourceFeatures(P,c)}setStyle(P,c){return(c=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&P?(this._diffStyle(P,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._updateStyle(P,c))}setTransformRequest(P){return this._requestManager.setTransformRequest(P),this}_getUIString(P){const c=this._locale[P];if(c==null)throw new Error(`Missing UI string '${P}'`);return c}_updateStyle(P,c){var m,b;if(c.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(P,c)));const C=this.style&&c.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!P)),P?(this.style=new hh(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof P=="string"?this.style.loadURL(P,c,C):this.style.loadJSON(P,c,C),this):((b=(m=this.style)===null||m===void 0?void 0:m.projection)===null||b===void 0||b.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new hh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(P,c){if(typeof P=="string"){const m=this._requestManager.transformRequest(P,"Style");s.j(m,new AbortController).then((b=>{this._updateDiff(b.data,c)})).catch((b=>{b&&this.fire(new s.k(b))}))}else typeof P=="object"&&this._updateDiff(P,c)}_updateDiff(P,c){try{this.style.setState(P,c)&&this._update(!0)}catch(m){s.w(`Unable to perform style diff: ${m.message||m.error||m}.  Rebuilding the style from scratch.`),this._updateStyle(P,c)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(P,c){return this._lazyInitEmptyStyle(),this.style.addSource(P,c),this._update(!0)}isSourceLoaded(P){const c=this.style&&this.style.tileManagers[P];if(c!==void 0)return c.loaded();this.fire(new s.k(new Error(`There is no tile manager with ID '${P}'`)))}setTerrain(P){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),P){const c=this.style.tileManagers[P.source];if(!c)throw new Error(`cannot load terrain, because there exists no source with ID: ${P.source}`);this.terrain===null&&c.reload();for(const m in this.style._layers){const b=this.style._layers[m];b.type==="hillshade"&&b.source===P.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),b.type==="color-relief"&&b.source===P.source&&s.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new mr(this.painter,c,P),this.painter.renderToTexture=new ql(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=m=>{var b;m.dataType==="style"?this.terrain.tileManager.freeRtt():m.dataType==="source"&&m.tile&&(m.sourceId!==P.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((b=m.source)===null||b===void 0?void 0:b.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(m.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:P})),this}getTerrain(){var P,c;return(c=(P=this.terrain)===null||P===void 0?void 0:P.options)!==null&&c!==void 0?c:null}areTilesLoaded(){const P=this.style&&this.style.tileManagers;for(const c of Object.values(P))if(!c.areTilesLoaded())return!1;return!0}removeSource(P){return this.style.removeSource(P),this._update(!0)}getSource(P){return this.style.getSource(P)}setSourceTileLodParams(P,c,m){if(m){const b=this.getSource(m);if(!b)throw new Error(`There is no source with ID "${m}", cannot set LOD parameters`);b.calculateTileZoom=Cn(Math.max(1,P),Math.max(1,c))}else for(const b in this.style.tileManagers)this.style.tileManagers[b].getSource().calculateTileZoom=Cn(Math.max(1,P),Math.max(1,c));return this._update(!0),this}refreshTiles(P,c){const m=this.style.tileManagers[P];if(!m)throw new Error(`There is no tile manager with ID "${P}", cannot refresh tile`);c===void 0?m.reload(!0):m.refreshTiles(c.map((b=>new s.ac(b.z,b.x,b.y))))}addImage(P,c,m={}){const{pixelRatio:b=1,sdf:C=!1,stretchX:I,stretchY:L,content:j,textFitWidth:W,textFitHeight:K}=m;if(this._lazyInitEmptyStyle(),!(c instanceof HTMLImageElement||s.b(c))){if(c.width===void 0||c.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:te,height:he,data:ue}=c,ge=c;return this.style.addImage(P,{data:new s.R({width:te,height:he},new Uint8Array(ue)),pixelRatio:b,stretchX:I,stretchY:L,content:j,textFitWidth:W,textFitHeight:K,sdf:C,version:0,userImage:ge}),ge.onAdd&&ge.onAdd(this,P),this}}{const{width:te,height:he,data:ue}=S.getImageData(c);this.style.addImage(P,{data:new s.R({width:te,height:he},ue),pixelRatio:b,stretchX:I,stretchY:L,content:j,textFitWidth:W,textFitHeight:K,sdf:C,version:0})}}updateImage(P,c){const m=this.style.getImage(P);if(!m)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=c instanceof HTMLImageElement||s.b(c)?S.getImageData(c):c,{width:C,height:I,data:L}=b;if(C===void 0||I===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(C!==m.data.width||I!==m.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const j=!(c instanceof HTMLImageElement||s.b(c));return m.data.replace(L,j),this.style.updateImage(P,m),this}getImage(P){return this.style.getImage(P)}hasImage(P){return P?!!this.style.getImage(P):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(P){this.style.removeImage(P)}loadImage(P){return H.getImage(this._requestManager.transformRequest(P,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(P,c){return this._lazyInitEmptyStyle(),this.style.addLayer(P,c),this._update(!0)}moveLayer(P,c){return this.style.moveLayer(P,c),this._update(!0)}removeLayer(P){return this.style.removeLayer(P),this._update(!0)}getLayer(P){return this.style.getLayer(P)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(P,c,m){return this.style.setLayerZoomRange(P,c,m),this._update(!0)}setFilter(P,c,m={}){return this.style.setFilter(P,c,m),this._update(!0)}getFilter(P){return this.style.getFilter(P)}setPaintProperty(P,c,m,b={}){return this.style.setPaintProperty(P,c,m,b),this._update(!0)}getPaintProperty(P,c){return this.style.getPaintProperty(P,c)}setLayoutProperty(P,c,m,b={}){return this.style.setLayoutProperty(P,c,m,b),this._update(!0)}getLayoutProperty(P,c){return this.style.getLayoutProperty(P,c)}setGlyphs(P,c={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(P,c),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(P,c,m={}){return this._lazyInitEmptyStyle(),this.style.addSprite(P,c,m,(b=>{b||this._update(!0)})),this}removeSprite(P){return this._lazyInitEmptyStyle(),this.style.removeSprite(P),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(P,c={}){return this._lazyInitEmptyStyle(),this.style.setSprite(P,c,(m=>{m||this._update(!0)})),this}setLight(P,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(P,c),this._update(!0)}getLight(){return this.style.getLight()}setSky(P,c={}){return this._lazyInitEmptyStyle(),this.style.setSky(P,c),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(P,c){return this.style.setFeatureState(P,c),this._update()}removeFeatureState(P,c){return this.style.removeFeatureState(P,c),this._update()}getFeatureState(P){return this.style.getFeatureState(P)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let P=0,c=0;return this._container&&(P=this._container.clientWidth||400,c=this._container.clientHeight||300),[P,c]}_setupContainer(){const P=this._container;P.classList.add("maplibregl-map");const c=this._canvasContainer=R.create("div","maplibregl-canvas-container",P);this._interactive&&c.classList.add("maplibregl-interactive"),this._canvas=R.create("canvas","maplibregl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const m=this._containerDimensions(),b=this._getClampedPixelRatio(m[0],m[1]);this._resizeCanvas(m[0],m[1],b);const C=this._controlContainer=R.create("div","maplibregl-control-container",P),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((L=>{I[L]=R.create("div",`maplibregl-ctrl-${L} `,C)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(P,c,m){this._canvas.width=Math.floor(m*P),this._canvas.height=Math.floor(m*c),this._canvas.style.width=`${P}px`,this._canvas.style.height=`${c}px`}_setupPainter(){const P=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let c=null;this._canvas.addEventListener("webglcontextcreationerror",(b=>{c={requestedAttributes:P},b&&(c.statusMessage=b.statusMessage,c.type=b.type)}),{once:!0});let m=null;if(m=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,P):this._canvas.getContext("webgl2",P)||this._canvas.getContext("webgl",P),!m){const b="Failed to initialize WebGL";throw c?(c.message=b,new Error(JSON.stringify(c))):new Error(b)}this.painter=new tx(m,this.transform),$.testSupport(m)}migrateProjection(P,c){super.migrateProjection(P,c),this.painter.transform=P,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(P){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||P,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(P){return this._update(),this._renderTaskQueue.add(P)}_cancelRenderFrame(P){this._renderTaskQueue.remove(P)}_render(P){var c,m,b,C,I;const L=this._idleTriggered?this._fadeDuration:0,j=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(P),this._removed)return;let W=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const he=this.transform.zoom,ue=A();this.style.zoomHistory.update(he,ue);const ge=new s.H(he,{now:ue,fadeDuration:L,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Oe=ge.crossFadingFactor();Oe===1&&Oe===this._crossFadingFactor||(W=!0,this._crossFadingFactor=Oe),this.style.update(ge)}const K=((m=this.style.projection)===null||m===void 0?void 0:m.transitionState)>0!==j;(b=this.style.projection)===null||b===void 0||b.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((C=this.style.projection)===null||C===void 0?void 0:C.transitionState,(I=this.style.projection)===null||I===void 0?void 0:I.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||K)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,L,this._crossSourceCollisions,K),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:L,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cG.mark(s.cH.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||W)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const te=this._sourcesDirty||this._styleDirty||this._placementDirty;return te||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||te||(this._fullyLoaded=!0,s.cG.mark(s.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var P;this._hash&&this._hash.remove();for(const m of this._controls)m.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(P=this._resizeObserver)===null||P===void 0||P.disconnect();const c=this.painter.context.gl.getExtension("WEBGL_lose_context");c?.loseContext&&c.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),R.remove(this._canvasContainer),R.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cG.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,S.frame(this._frameRequest,(P=>{s.cG.frame(P),this._frameRequest=null;try{this._render(P)}catch(c){if(!s.Z(c)&&!(function(m){return m.message===_h})(c))throw c}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(P){this._showTileBoundaries!==P&&(this._showTileBoundaries=P,this._update())}get showPadding(){return!!this._showPadding}set showPadding(P){this._showPadding!==P&&(this._showPadding=P,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(P){this._showCollisionBoxes!==P&&(this._showCollisionBoxes=P,P?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(P){this._showOverdrawInspector!==P&&(this._showOverdrawInspector=P,this._update())}get repaint(){return!!this._repaint}set repaint(P){this._repaint!==P&&(this._repaint=P,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(P){this._vertices=P,this._update()}get version(){return Md}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(P){return this._lazyInitEmptyStyle(),this.style.setProjection(P),this._update(!0)}},a.MapMouseEvent=Yo,a.MapTouchEvent=Ql,a.MapWheelEvent=My,a.Marker=Km,a.NavigationControl=class{constructor(P){this._updateZoomButtons=()=>{const c=this._map.getZoom(),m=c===this._map.getMaxZoom(),b=c===this._map.getMinZoom();this._zoomInButton.disabled=m,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",m.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(c,m)=>{const b=this._map._getUIString(`NavigationControl.${m}`);c.title=b,c.setAttribute("aria-label",b)},this.options=s.e({},Tv,P),this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(c=>c.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(c=>this._map.zoomIn({},{originalEvent:c}))),R.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(c=>this._map.zoomOut({},{originalEvent:c}))),R.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(c=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:c}):this._map.resetNorth({},{originalEvent:c})})),this._compassIcon=R.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(P){return this._map=P,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ki(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){R.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(P,c){const m=R.create("button",P,this._container);return m.type="button",m.addEventListener("click",c),m}},a.Popup=class extends s.E{constructor(P){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&R.remove(this._content),this._container&&(R.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=c=>{this._update(c.point)},this._onMouseMove=c=>{this._update(c.point)},this._onDrag=c=>{this._update(c.point)},this._update=c=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=R.create("div","maplibregl-popup",this._map.getContainer()),this._tip=R.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const L of this.options.className.split(" "))this._container.classList.add(L);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=np(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!c)return;const m=this._flatPos=this._pos=this._trackPointer&&c?c:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&c?c:this._map.transform.locationToScreenPoint(this._lngLat));let b=this.options.anchor;const C=ip(this.options.offset);if(!b){const L=this._container.offsetWidth,j=this._container.offsetHeight;let W;W=m.y+C.bottom.y<j?["top"]:m.y>this._map.transform.height-j?["bottom"]:[],m.x<L/2?W.push("left"):m.x>this._map.transform.width-L/2&&W.push("right"),b=W.length===0?"bottom":W.join("-")}let I=m.add(C[b]);this.options.subpixelPositioning||(I=I.round()),R.setTransform(this._container,`${rp[b]} translate(${I.x}px,${I.y}px)`),Ym(this._container,b,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Rd),P)}addTo(P){return this._map&&this.remove(),this._map=P,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(P){return this._lngLat=s.V.convert(P),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(P){return this.setDOMContent(document.createTextNode(P))}setHTML(P){const c=document.createDocumentFragment(),m=document.createElement("body");let b;for(m.innerHTML=P;b=m.firstChild,b;)c.appendChild(b);return this.setDOMContent(c)}getMaxWidth(){var P;return(P=this._container)===null||P===void 0?void 0:P.style.maxWidth}setMaxWidth(P){return this.options.maxWidth=P,this._update(),this}setDOMContent(P){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=R.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(P),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(P){return this._container&&this._container.classList.add(P),this}removeClassName(P){return this._container&&this._container.classList.remove(P),this}setOffset(P){return this.options.offset=P,this._update(),this}toggleClassName(P){if(this._container)return this._container.classList.toggle(P)}setSubpixelPositioning(P){this.options.subpixelPositioning=P}_createCloseButton(){this.options.closeButton&&(this._closeButton=R.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const P=this._container.querySelector(Id);P&&P.focus()}},a.RasterDEMTileSource=Ue,a.RasterTileSource=rr,a.ScaleControl=class{constructor(P){this._onMove=()=>{Ni(this._map,this._container,this.options)},this.setUnit=c=>{this.options.unit=c,Ni(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ws),P)}getDefaultPosition(){return"bottom-left"}onAdd(P){return this._map=P,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-scale",P.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){R.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=Wm,a.Style=hh,a.TerrainControl=class{constructor(P){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=P}onAdd(P){return this._map=P,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=R.create("button","maplibregl-ctrl-terrain",this._container),R.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){R.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=gu,a.TwoFingersTouchRotateHandler=qm,a.TwoFingersTouchZoomHandler=Ic,a.TwoFingersTouchZoomRotateHandler=Ad,a.VectorTileSource=lr,a.VideoSource=we,a.addSourceType=(P,c)=>s._(void 0,void 0,void 0,(function*(){if(be(P))throw new Error(`A source type called "${P}" already exists.`);((m,b)=>{Y[m]=b})(P,c)})),a.clearPrewarmedResources=function(){const P=st;P&&(P.isPreloaded()&&P.numActive()===1?(P.release(ft),st=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.createTileMesh=Vb,a.getMaxParallelImageRequests=function(){return s.c.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return tt().getRTLTextPluginStatus()},a.getVersion=function(){return Hl},a.getWorkerCount=function(){return mt.workerCount},a.getWorkerUrl=function(){return s.c.WORKER_URL},a.importScriptInWorkers=function(P){return Wt().broadcast("IS",P)},a.isTimeFrozen=function(){return E.isFrozen()},a.now=A,a.prewarm=function(){At().acquire(ft)},a.restoreNow=function(){E.restoreNow()},a.setMaxParallelImageRequests=function(P){s.c.MAX_PARALLEL_IMAGE_REQUESTS=P},a.setNow=function(P){E.setNow(P)},a.setRTLTextPlugin=function(P,c){return tt().setRTLTextPlugin(P,c)},a.setWorkerCount=function(P){mt.workerCount=P},a.setWorkerUrl=function(P){s.c.WORKER_URL=P}}));var o=n;return o}))})(eP)),eP.exports}var xG=Yhe();const wG=aO(xG),Khe=eG({__proto__:null,default:wG},[xG]),CC={black:"#000",white:"#fff"},o1={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},s1={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},a1={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},l1={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},c1={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},t2={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Jhe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Vg(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}const PM="$$material";function Co(){return Co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Co.apply(null,arguments)}function ede(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function tde(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var nde=(function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(tde(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=ede(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t})(),Tl="-ms-",BP="-moz-",wi="-webkit-",OG="comm",T6="rule",k6="decl",rde="@import",SG="@keyframes",ide="@layer",ode=Math.abs,MM=String.fromCharCode,sde=Object.assign;function ade(t,e){return Ja(t,0)^45?(((e<<2^Ja(t,0))<<2^Ja(t,1))<<2^Ja(t,2))<<2^Ja(t,3):0}function CG(t){return t.trim()}function lde(t,e){return(t=e.exec(t))?t[0]:t}function Oi(t,e,n){return t.replace(e,n)}function qL(t,e){return t.indexOf(e)}function Ja(t,e){return t.charCodeAt(e)|0}function TC(t,e,n){return t.slice(e,n)}function Mp(t){return t.length}function E6(t){return t.length}function $E(t,e){return e.push(t),t}function cde(t,e){return t.map(e).join("")}var RM=1,yw=1,TG=0,ru=0,Us=0,hO="";function IM(t,e,n,r,i,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:RM,column:yw,length:a,return:""}}function n2(t,e){return sde(IM("",null,null,"",null,null,0),t,{length:-t.length},e)}function ude(){return Us}function hde(){return Us=ru>0?Ja(hO,--ru):0,yw--,Us===10&&(yw=1,RM--),Us}function Hu(){return Us=ru<TG?Ja(hO,ru++):0,yw++,Us===10&&(yw=1,RM++),Us}function Wp(){return Ja(hO,ru)}function tP(){return ru}function NT(t,e){return TC(hO,t,e)}function kC(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function kG(t){return RM=yw=1,TG=Mp(hO=t),ru=0,[]}function EG(t){return hO="",t}function nP(t){return CG(NT(ru-1,WL(t===91?t+2:t===40?t+1:t)))}function dde(t){for(;(Us=Wp())&&Us<33;)Hu();return kC(t)>2||kC(Us)>3?"":" "}function fde(t,e){for(;--e&&Hu()&&!(Us<48||Us>102||Us>57&&Us<65||Us>70&&Us<97););return NT(t,tP()+(e<6&&Wp()==32&&Hu()==32))}function WL(t){for(;Hu();)switch(Us){case t:return ru;case 34:case 39:t!==34&&t!==39&&WL(Us);break;case 40:t===41&&WL(t);break;case 92:Hu();break}return ru}function pde(t,e){for(;Hu()&&t+Us!==57;)if(t+Us===84&&Wp()===47)break;return"/*"+NT(e,ru-1)+"*"+MM(t===47?t:Hu())}function mde(t){for(;!kC(Wp());)Hu();return NT(t,ru)}function gde(t){return EG(rP("",null,null,null,[""],t=kG(t),0,[0],t))}function rP(t,e,n,r,i,o,a,s,u){for(var f=0,g=0,_=a,w=0,S=0,E=0,A=1,R=1,$=1,z=0,B="",F=i,U=o,q=r,H=B;R;)switch(E=z,z=Hu()){case 40:if(E!=108&&Ja(H,_-1)==58){qL(H+=Oi(nP(z),"&","&\f"),"&\f")!=-1&&($=-1);break}case 34:case 39:case 91:H+=nP(z);break;case 9:case 10:case 13:case 32:H+=dde(E);break;case 92:H+=fde(tP()-1,7);continue;case 47:switch(Wp()){case 42:case 47:$E(yde(pde(Hu(),tP()),e,n),u);break;default:H+="/"}break;case 123*A:s[f++]=Mp(H)*$;case 125*A:case 59:case 0:switch(z){case 0:case 125:R=0;case 59+g:$==-1&&(H=Oi(H,/\f/g,"")),S>0&&Mp(H)-_&&$E(S>32?$F(H+";",r,n,_-1):$F(Oi(H," ","")+";",r,n,_-2),u);break;case 59:H+=";";default:if($E(q=LF(H,e,n,f,g,i,s,B,F=[],U=[],_),o),z===123)if(g===0)rP(H,e,q,q,F,o,_,s,U);else switch(w===99&&Ja(H,3)===110?100:w){case 100:case 108:case 109:case 115:rP(t,q,q,r&&$E(LF(t,q,q,0,0,i,s,B,i,F=[],_),U),i,U,_,s,r?F:U);break;default:rP(H,q,q,q,[""],U,0,s,U)}}f=g=S=0,A=$=1,B=H="",_=a;break;case 58:_=1+Mp(H),S=E;default:if(A<1){if(z==123)--A;else if(z==125&&A++==0&&hde()==125)continue}switch(H+=MM(z),z*A){case 38:$=g>0?1:(H+="\f",-1);break;case 44:s[f++]=(Mp(H)-1)*$,$=1;break;case 64:Wp()===45&&(H+=nP(Hu())),w=Wp(),g=_=Mp(B=H+=mde(tP())),z++;break;case 45:E===45&&Mp(H)==2&&(A=0)}}return o}function LF(t,e,n,r,i,o,a,s,u,f,g){for(var _=i-1,w=i===0?o:[""],S=E6(w),E=0,A=0,R=0;E<r;++E)for(var $=0,z=TC(t,_+1,_=ode(A=a[E])),B=t;$<S;++$)(B=CG(A>0?w[$]+" "+z:Oi(z,/&\f/g,w[$])))&&(u[R++]=B);return IM(t,e,n,i===0?T6:s,u,f,g)}function yde(t,e,n){return IM(t,e,n,OG,MM(ude()),TC(t,2,-2),0)}function $F(t,e,n,r){return IM(t,e,n,k6,TC(t,0,r),TC(t,r+1,-1),r)}function G1(t,e){for(var n="",r=E6(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function vde(t,e,n,r){switch(t.type){case ide:if(t.children.length)break;case rde:case k6:return t.return=t.return||t.value;case OG:return"";case SG:return t.return=t.value+"{"+G1(t.children,r)+"}";case T6:t.value=t.props.join(",")}return Mp(n=G1(t.children,r))?t.return=t.value+"{"+n+"}":""}function _de(t){var e=E6(t);return function(n,r,i,o){for(var a="",s=0;s<e;s++)a+=t[s](n,r,i,o)||"";return a}}function bde(t){return function(e){e.root||(e=e.return)&&t(e)}}function AG(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var xde=function(e,n,r){for(var i=0,o=0;i=o,o=Wp(),i===38&&o===12&&(n[r]=1),!kC(o);)Hu();return NT(e,ru)},wde=function(e,n){var r=-1,i=44;do switch(kC(i)){case 0:i===38&&Wp()===12&&(n[r]=1),e[r]+=xde(ru-1,n,r);break;case 2:e[r]+=nP(i);break;case 4:if(i===44){e[++r]=Wp()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=MM(i)}while(i=Hu());return e},Ode=function(e,n){return EG(wde(kG(e),n))},zF=new WeakMap,Sde=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!zF.get(r))&&!i){zF.set(e,!0);for(var o=[],a=Ode(n,o),s=r.props,u=0,f=0;u<a.length;u++)for(var g=0;g<s.length;g++,f++)e.props[f]=o[u]?a[u].replace(/&\f/g,s[g]):s[g]+" "+a[u]}}},Cde=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function PG(t,e){switch(ade(t,e)){case 5103:return wi+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return wi+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return wi+t+BP+t+Tl+t+t;case 6828:case 4268:return wi+t+Tl+t+t;case 6165:return wi+t+Tl+"flex-"+t+t;case 5187:return wi+t+Oi(t,/(\w+).+(:[^]+)/,wi+"box-$1$2"+Tl+"flex-$1$2")+t;case 5443:return wi+t+Tl+"flex-item-"+Oi(t,/flex-|-self/,"")+t;case 4675:return wi+t+Tl+"flex-line-pack"+Oi(t,/align-content|flex-|-self/,"")+t;case 5548:return wi+t+Tl+Oi(t,"shrink","negative")+t;case 5292:return wi+t+Tl+Oi(t,"basis","preferred-size")+t;case 6060:return wi+"box-"+Oi(t,"-grow","")+wi+t+Tl+Oi(t,"grow","positive")+t;case 4554:return wi+Oi(t,/([^-])(transform)/g,"$1"+wi+"$2")+t;case 6187:return Oi(Oi(Oi(t,/(zoom-|grab)/,wi+"$1"),/(image-set)/,wi+"$1"),t,"")+t;case 5495:case 3959:return Oi(t,/(image-set\([^]*)/,wi+"$1$`$1");case 4968:return Oi(Oi(t,/(.+:)(flex-)?(.*)/,wi+"box-pack:$3"+Tl+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+wi+t+t;case 4095:case 3583:case 4068:case 2532:return Oi(t,/(.+)-inline(.+)/,wi+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Mp(t)-1-e>6)switch(Ja(t,e+1)){case 109:if(Ja(t,e+4)!==45)break;case 102:return Oi(t,/(.+:)(.+)-([^]+)/,"$1"+wi+"$2-$3$1"+BP+(Ja(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~qL(t,"stretch")?PG(Oi(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ja(t,e+1)!==115)break;case 6444:switch(Ja(t,Mp(t)-3-(~qL(t,"!important")&&10))){case 107:return Oi(t,":",":"+wi)+t;case 101:return Oi(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+wi+(Ja(t,14)===45?"inline-":"")+"box$3$1"+wi+"$2$3$1"+Tl+"$2box$3")+t}break;case 5936:switch(Ja(t,e+11)){case 114:return wi+t+Tl+Oi(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return wi+t+Tl+Oi(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return wi+t+Tl+Oi(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return wi+t+Tl+t+t}return t}var Tde=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case k6:e.return=PG(e.value,e.length);break;case SG:return G1([n2(e,{value:Oi(e.value,"@","@"+wi)})],i);case T6:if(e.length)return cde(e.props,function(o){switch(lde(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return G1([n2(e,{props:[Oi(o,/:(read-\w+)/,":"+BP+"$1")]})],i);case"::placeholder":return G1([n2(e,{props:[Oi(o,/:(plac\w+)/,":"+wi+"input-$1")]}),n2(e,{props:[Oi(o,/:(plac\w+)/,":"+BP+"$1")]}),n2(e,{props:[Oi(o,/:(plac\w+)/,Tl+"input-$1")]})],i)}return""})}},kde=[Tde],Ede=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(A){var R=A.getAttribute("data-emotion");R.indexOf(" ")!==-1&&(document.head.appendChild(A),A.setAttribute("data-s",""))})}var i=e.stylisPlugins||kde,o={},a,s=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(A){for(var R=A.getAttribute("data-emotion").split(" "),$=1;$<R.length;$++)o[R[$]]=!0;s.push(A)});var u,f=[Sde,Cde];{var g,_=[vde,bde(function(A){g.insert(A)})],w=_de(f.concat(i,_)),S=function(R){return G1(gde(R),w)};u=function(R,$,z,B){g=z,S(R?R+"{"+$.styles+"}":$.styles),B&&(E.inserted[$.name]=!0)}}var E={key:n,sheet:new nde({key:n,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:u};return E.sheet.hydrate(s),E},o3={exports:{}},Pi={};var NF;function Ade(){if(NF)return Pi;NF=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,a=t?Symbol.for("react.provider"):60109,s=t?Symbol.for("react.context"):60110,u=t?Symbol.for("react.async_mode"):60111,f=t?Symbol.for("react.concurrent_mode"):60111,g=t?Symbol.for("react.forward_ref"):60112,_=t?Symbol.for("react.suspense"):60113,w=t?Symbol.for("react.suspense_list"):60120,S=t?Symbol.for("react.memo"):60115,E=t?Symbol.for("react.lazy"):60116,A=t?Symbol.for("react.block"):60121,R=t?Symbol.for("react.fundamental"):60117,$=t?Symbol.for("react.responder"):60118,z=t?Symbol.for("react.scope"):60119;function B(U){if(typeof U=="object"&&U!==null){var q=U.$$typeof;switch(q){case e:switch(U=U.type,U){case u:case f:case r:case o:case i:case _:return U;default:switch(U=U&&U.$$typeof,U){case s:case g:case E:case S:case a:return U;default:return q}}case n:return q}}}function F(U){return B(U)===f}return Pi.AsyncMode=u,Pi.ConcurrentMode=f,Pi.ContextConsumer=s,Pi.ContextProvider=a,Pi.Element=e,Pi.ForwardRef=g,Pi.Fragment=r,Pi.Lazy=E,Pi.Memo=S,Pi.Portal=n,Pi.Profiler=o,Pi.StrictMode=i,Pi.Suspense=_,Pi.isAsyncMode=function(U){return F(U)||B(U)===u},Pi.isConcurrentMode=F,Pi.isContextConsumer=function(U){return B(U)===s},Pi.isContextProvider=function(U){return B(U)===a},Pi.isElement=function(U){return typeof U=="object"&&U!==null&&U.$$typeof===e},Pi.isForwardRef=function(U){return B(U)===g},Pi.isFragment=function(U){return B(U)===r},Pi.isLazy=function(U){return B(U)===E},Pi.isMemo=function(U){return B(U)===S},Pi.isPortal=function(U){return B(U)===n},Pi.isProfiler=function(U){return B(U)===o},Pi.isStrictMode=function(U){return B(U)===i},Pi.isSuspense=function(U){return B(U)===_},Pi.isValidElementType=function(U){return typeof U=="string"||typeof U=="function"||U===r||U===f||U===o||U===i||U===_||U===w||typeof U=="object"&&U!==null&&(U.$$typeof===E||U.$$typeof===S||U.$$typeof===a||U.$$typeof===s||U.$$typeof===g||U.$$typeof===R||U.$$typeof===$||U.$$typeof===z||U.$$typeof===A)},Pi.typeOf=B,Pi}var BF;function Pde(){return BF||(BF=1,o3.exports=Ade()),o3.exports}var s3,FF;function Mde(){if(FF)return s3;FF=1;var t=Pde(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[t.ForwardRef]=r,o[t.Memo]=i;function a(E){return t.isMemo(E)?i:o[E.$$typeof]||e}var s=Object.defineProperty,u=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,_=Object.getPrototypeOf,w=Object.prototype;function S(E,A,R){if(typeof A!="string"){if(w){var $=_(A);$&&$!==w&&S(E,$,R)}var z=u(A);f&&(z=z.concat(f(A)));for(var B=a(E),F=a(A),U=0;U<z.length;++U){var q=z[U];if(!n[q]&&!(R&&R[q])&&!(F&&F[q])&&!(B&&B[q])){var H=g(A,q);try{s(E,q,H)}catch{}}}}return E}return s3=S,s3}Mde();var Rde=!0;function MG(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var A6=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||Rde===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},P6=function(e,n,r){A6(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function Ide(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Dde={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Lde=/[A-Z]|^ms/g,$de=/_EMO_([^_]+?)_([^]*?)_EMO_/g,RG=function(e){return e.charCodeAt(1)===45},jF=function(e){return e!=null&&typeof e!="boolean"},a3=AG(function(t){return RG(t)?t:t.replace(Lde,"-$&").toLowerCase()}),VF=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace($de,function(r,i,o){return Rp={name:i,styles:o,next:Rp},i})}return Dde[e]!==1&&!RG(e)&&typeof n=="number"&&n!==0?n+"px":n};function EC(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Rp={name:i.name,styles:i.styles,next:Rp},i.name;var o=n;if(o.styles!==void 0){var a=o.next;if(a!==void 0)for(;a!==void 0;)Rp={name:a.name,styles:a.styles,next:Rp},a=a.next;var s=o.styles+";";return s}return zde(t,e,n)}case"function":{if(t!==void 0){var u=Rp,f=n(t);return Rp=u,EC(t,e,f)}break}}var g=n;if(e==null)return g;var _=e[g];return _!==void 0?_:g}function zde(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=EC(t,e,n[i])+";";else for(var o in n){var a=n[o];if(typeof a!="object"){var s=a;e!=null&&e[s]!==void 0?r+=o+"{"+e[s]+"}":jF(s)&&(r+=a3(o)+":"+VF(o,s)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var u=0;u<a.length;u++)jF(a[u])&&(r+=a3(o)+":"+VF(o,a[u])+";");else{var f=EC(t,e,a);switch(o){case"animation":case"animationName":{r+=a3(o)+":"+f+";";break}default:r+=o+"{"+f+"}"}}}return r}var QF=/label:\s*([^\s;{]+)\s*(;|$)/g,Rp;function BT(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Rp=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=EC(n,e,o);else{var a=o;i+=a[0]}for(var s=1;s<t.length;s++)if(i+=EC(n,e,t[s]),r){var u=o;i+=u[s]}QF.lastIndex=0;for(var f="",g;(g=QF.exec(i))!==null;)f+="-"+g[1];var _=Ide(i)+f;return{name:_,styles:i,next:Rp}}var Nde=function(e){return e()},IG=OC.useInsertionEffect?OC.useInsertionEffect:!1,DG=IG||Nde,UF=IG||Q.useLayoutEffect,LG=Q.createContext(typeof HTMLElement<"u"?Ede({key:"css"}):null);LG.Provider;var M6=function(e){return Q.forwardRef(function(n,r){var i=Q.useContext(LG);return e(n,i,r)})},DM=Q.createContext({}),R6={}.hasOwnProperty,HL="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Bde=function(e,n){var r={};for(var i in n)R6.call(n,i)&&(r[i]=n[i]);return r[HL]=e,r},Fde=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return A6(n,r,i),DG(function(){return P6(n,r,i)}),null},jde=M6(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[HL],o=[r],a="";typeof t.className=="string"?a=MG(e.registered,o,t.className):t.className!=null&&(a=t.className+" ");var s=BT(o,void 0,Q.useContext(DM));a+=e.key+"-"+s.name;var u={};for(var f in t)R6.call(t,f)&&f!=="css"&&f!==HL&&(u[f]=t[f]);return u.className=a,n&&(u.ref=n),Q.createElement(Q.Fragment,null,Q.createElement(Fde,{cache:e,serialized:s,isStringTag:typeof i=="string"}),Q.createElement(i,u))}),Vde=jde,ZF=function(e,n){var r=arguments;if(n==null||!R6.call(n,"css"))return Q.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=Vde,o[1]=Bde(e,n);for(var a=2;a<i;a++)o[a]=r[a];return Q.createElement.apply(null,o)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(ZF||(ZF={}));var Qde=M6(function(t,e){var n=t.styles,r=BT([n],void 0,Q.useContext(DM)),i=Q.useRef();return UF(function(){var o=e.key+"-global",a=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),s=!1,u=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),u!==null&&(s=!0,u.setAttribute("data-emotion",o),a.hydrate([u])),i.current=[a,s],function(){a.flush()}},[e]),UF(function(){var o=i.current,a=o[0],s=o[1];if(s){o[1]=!1;return}if(r.next!==void 0&&P6(e,r.next,!0),a.tags.length){var u=a.tags[a.tags.length-1].nextElementSibling;a.before=u,a.flush()}e.insert("",r,a,!1)},[e,r.name]),null});function I6(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return BT(e)}function FT(){var t=I6.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Ude=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Zde=AG(function(t){return Ude.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),qde=Zde,Wde=function(e){return e!=="theme"},qF=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?qde:Wde},WF=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(a){return e.__emotion_forwardProp(a)&&o(a)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},Hde=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return A6(n,r,i),DG(function(){return P6(n,r,i)}),null},Gde=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,a;n!==void 0&&(o=n.label,a=n.target);var s=WF(e,n,r),u=s||qF(i),f=!u("as");return function(){var g=arguments,_=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&_.push("label:"+o+";"),g[0]==null||g[0].raw===void 0)_.push.apply(_,g);else{var w=g[0];_.push(w[0]);for(var S=g.length,E=1;E<S;E++)_.push(g[E],w[E])}var A=M6(function(R,$,z){var B=f&&R.as||i,F="",U=[],q=R;if(R.theme==null){q={};for(var H in R)q[H]=R[H];q.theme=Q.useContext(DM)}typeof R.className=="string"?F=MG($.registered,U,R.className):R.className!=null&&(F=R.className+" ");var ne=BT(_.concat(U),$.registered,q);F+=$.key+"-"+ne.name,a!==void 0&&(F+=" "+a);var ie=f&&s===void 0?qF(B):u,ce={};for(var xe in R)f&&xe==="as"||ie(xe)&&(ce[xe]=R[xe]);return ce.className=F,z&&(ce.ref=z),Q.createElement(Q.Fragment,null,Q.createElement(Hde,{cache:$,serialized:ne,isStringTag:typeof B=="string"}),Q.createElement(B,ce))});return A.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",A.defaultProps=e.defaultProps,A.__emotion_real=A,A.__emotion_base=i,A.__emotion_styles=_,A.__emotion_forwardProp=s,Object.defineProperty(A,"toString",{value:function(){return"."+a}}),A.withComponent=function(R,$){var z=t(R,Co({},n,$,{shouldForwardProp:WF(A,$,!0)}));return z.apply(void 0,_)},A}},Xde=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],GL=Gde.bind(null);Xde.forEach(function(t){GL[t]=GL(t)});var l3={exports:{}},c3,HF;function Yde(){if(HF)return c3;HF=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return c3=t,c3}var u3,GF;function Kde(){if(GF)return u3;GF=1;var t=Yde();function e(){}function n(){}return n.resetWarningCache=e,u3=function(){function r(a,s,u,f,g,_){if(_!==t){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},u3}var XF;function Jde(){return XF||(XF=1,l3.exports=Kde()()),l3.exports}var efe=Jde();const gn=aO(efe);function tfe(t){return t==null||Object.keys(t).length===0}function nfe(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(tfe(i)?n:i):e;return J.jsx(Qde,{styles:r})}function $G(t,e){return GL(t,e)}function rfe(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const YF=[];function k0(t){return YF[0]=t,BT(YF)}var h3={exports:{}},Hi={};var KF;function ife(){if(KF)return Hi;KF=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.view_transition"),S=Symbol.for("react.client.reference");function E(A){if(typeof A=="object"&&A!==null){var R=A.$$typeof;switch(R){case t:switch(A=A.type,A){case n:case i:case r:case u:case f:case w:return A;default:switch(A=A&&A.$$typeof,A){case a:case s:case _:case g:return A;case o:return A;default:return R}}case e:return R}}}return Hi.ContextConsumer=o,Hi.ContextProvider=a,Hi.Element=t,Hi.ForwardRef=s,Hi.Fragment=n,Hi.Lazy=_,Hi.Memo=g,Hi.Portal=e,Hi.Profiler=i,Hi.StrictMode=r,Hi.Suspense=u,Hi.SuspenseList=f,Hi.isContextConsumer=function(A){return E(A)===o},Hi.isContextProvider=function(A){return E(A)===a},Hi.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===t},Hi.isForwardRef=function(A){return E(A)===s},Hi.isFragment=function(A){return E(A)===n},Hi.isLazy=function(A){return E(A)===_},Hi.isMemo=function(A){return E(A)===g},Hi.isPortal=function(A){return E(A)===e},Hi.isProfiler=function(A){return E(A)===i},Hi.isStrictMode=function(A){return E(A)===r},Hi.isSuspense=function(A){return E(A)===u},Hi.isSuspenseList=function(A){return E(A)===f},Hi.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===u||A===f||typeof A=="object"&&A!==null&&(A.$$typeof===_||A.$$typeof===g||A.$$typeof===a||A.$$typeof===o||A.$$typeof===s||A.$$typeof===S||A.getModuleId!==void 0)},Hi.typeOf=E,Hi}var JF;function ofe(){return JF||(JF=1,h3.exports=ife()),h3.exports}var zG=ofe();function Lp(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function NG(t){if(Q.isValidElement(t)||zG.isValidElementType(t)||!Lp(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=NG(t[n])}),e}function Pa(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return Lp(t)&&Lp(e)&&Object.keys(e).forEach(i=>{Q.isValidElement(e[i])||zG.isValidElementType(e[i])?r[i]=e[i]:Lp(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&Lp(t[i])?r[i]=Pa(t[i],e[i],n):n.clone?r[i]=Lp(e[i])?NG(e[i]):e[i]:r[i]=e[i]}),r}const sfe=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function afe(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,o=sfe(e),a=Object.keys(o);function s(w){return`@media (min-width:${typeof e[w]=="number"?e[w]:w}${n})`}function u(w){return`@media (max-width:${(typeof e[w]=="number"?e[w]:w)-r/100}${n})`}function f(w,S){const E=a.indexOf(S);return`@media (min-width:${typeof e[w]=="number"?e[w]:w}${n}) and (max-width:${(E!==-1&&typeof e[a[E]]=="number"?e[a[E]]:S)-r/100}${n})`}function g(w){return a.indexOf(w)+1<a.length?f(w,a[a.indexOf(w)+1]):s(w)}function _(w){const S=a.indexOf(w);return S===0?s(a[1]):S===a.length-1?u(a[S]):f(w,a[a.indexOf(w)+1]).replace("@media","@media not all and")}return{keys:a,values:o,up:s,down:u,between:f,only:g,not:_,unit:n,...i}}function e7(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{const o=/min-width:\s*([0-9.]+)/;return+(r.match(o)?.[1]||0)-+(i.match(o)?.[1]||0)});return n.length?n.reduce((r,i)=>{const o=e[i];return delete r[i],r[i]=o,r},{...e}):e}function lfe(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function cfe(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(o)}function ufe(t){const e=(o,a)=>o.replace("@media",a?`@container ${a}`:"@container");function n(o,a){o.up=(...s)=>e(t.breakpoints.up(...s),a),o.down=(...s)=>e(t.breakpoints.down(...s),a),o.between=(...s)=>e(t.breakpoints.between(...s),a),o.only=(...s)=>e(t.breakpoints.only(...s),a),o.not=(...s)=>{const u=e(t.breakpoints.not(...s),a);return u.includes("not all and")?u.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):u}}const r={},i=o=>(n(r,o),r);return n(i),{...t,containerQueries:i}}const hfe={borderRadius:4};function X2(t,e){return e?Pa(t,e,{clone:!1}):t}const LM={xs:0,sm:600,md:900,lg:1200,xl:1536},t7={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${LM[t]}px)`},dfe={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:LM[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function gf(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||t7;return e.reduce((a,s,u)=>(a[o.up(o.keys[u])]=n(e[u]),a),{})}if(typeof e=="object"){const o=r.breakpoints||t7;return Object.keys(e).reduce((a,s)=>{if(lfe(o.keys,s)){const u=cfe(r.containerQueries?r:dfe,s);u&&(a[u]=n(e[s],s))}else if(Object.keys(o.values||LM).includes(s)){const u=o.up(s);a[u]=n(e[s],s)}else{const u=s;a[u]=e[u]}return a},{})}return n(e)}function BG(t={}){return t.keys?.reduce((n,r)=>{const i=t.up(r);return n[i]={},n},{})||{}}function XL(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function ffe(t,...e){const n=BG(t),r=[n,...e].reduce((i,o)=>Pa(i,o),{});return XL(Object.keys(n),r)}function pfe(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,o)=>{o<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function d3({values:t,breakpoints:e,base:n}){const r=n||pfe(t,e),i=Object.keys(r);if(i.length===0)return t;let o;return i.reduce((a,s,u)=>(Array.isArray(t)?(a[s]=t[u]!=null?t[u]:t[o],o=u):typeof t=="object"?(a[s]=t[s]!=null?t[s]:t[o],o=s):a[s]=t,a),{})}function Zt(t){if(typeof t!="string")throw new Error(Vg(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Ip(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function FP(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Ip(t,n)||r,e&&(i=e(i,r,t)),i}function Ps(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=a=>{if(a[e]==null)return null;const s=a[e],u=a.theme,f=Ip(u,r)||{};return gf(a,s,_=>{let w=FP(f,i,_);return _===w&&typeof _=="string"&&(w=FP(f,i,`${e}${_==="default"?"":Zt(_)}`,_)),n===!1?w:{[n]:w}})};return o.propTypes={},o.filterProps=[e],o}function mfe(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const gfe={m:"margin",p:"padding"},yfe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},n7={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},vfe=mfe(t=>{if(t.length>2)if(n7[t])t=n7[t];else return[t];const[e,n]=t.split(""),r=gfe[e],i=yfe[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),D6=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],L6=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...D6,...L6];function jT(t,e,n,r){const i=Ip(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?i.startsWith("var(")&&o===0?0:i.startsWith("var(")&&o===1?i:`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const a=Math.abs(o),s=i[a];return o>=0?s:typeof s=="number"?-s:typeof s=="string"&&s.startsWith("var(")?`calc(-1 * ${s})`:`-${s}`}:typeof i=="function"?i:()=>{}}function $M(t){return jT(t,"spacing",8)}function tb(t,e){return typeof e=="string"||e==null?e:t(e)}function _fe(t,e){return n=>t.reduce((r,i)=>(r[i]=tb(e,n),r),{})}function bfe(t,e,n,r){if(!e.includes(n))return null;const i=vfe(n),o=_fe(i,r),a=t[n];return gf(t,a,o)}function FG(t,e){const n=$M(t.theme);return Object.keys(t).map(r=>bfe(t,e,r,n)).reduce(X2,{})}function gs(t){return FG(t,D6)}gs.propTypes={};gs.filterProps=D6;function ys(t){return FG(t,L6)}ys.propTypes={};ys.filterProps=L6;function jG(t=8,e=$M({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(o=>{const a=e(o);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}function zM(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>e[o]?X2(i,e[o](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Lh(t){return typeof t!="number"?t:`${t}px solid`}function nd(t,e){return Ps({prop:t,themeKey:"borders",transform:e})}const xfe=nd("border",Lh),wfe=nd("borderTop",Lh),Ofe=nd("borderRight",Lh),Sfe=nd("borderBottom",Lh),Cfe=nd("borderLeft",Lh),Tfe=nd("borderColor"),kfe=nd("borderTopColor"),Efe=nd("borderRightColor"),Afe=nd("borderBottomColor"),Pfe=nd("borderLeftColor"),Mfe=nd("outline",Lh),Rfe=nd("outlineColor"),NM=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=jT(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:tb(e,r)});return gf(t,t.borderRadius,n)}return null};NM.propTypes={};NM.filterProps=["borderRadius"];zM(xfe,wfe,Ofe,Sfe,Cfe,Tfe,kfe,Efe,Afe,Pfe,NM,Mfe,Rfe);const BM=t=>{if(t.gap!==void 0&&t.gap!==null){const e=jT(t.theme,"spacing",8),n=r=>({gap:tb(e,r)});return gf(t,t.gap,n)}return null};BM.propTypes={};BM.filterProps=["gap"];const FM=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=jT(t.theme,"spacing",8),n=r=>({columnGap:tb(e,r)});return gf(t,t.columnGap,n)}return null};FM.propTypes={};FM.filterProps=["columnGap"];const jM=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=jT(t.theme,"spacing",8),n=r=>({rowGap:tb(e,r)});return gf(t,t.rowGap,n)}return null};jM.propTypes={};jM.filterProps=["rowGap"];const Ife=Ps({prop:"gridColumn"}),Dfe=Ps({prop:"gridRow"}),Lfe=Ps({prop:"gridAutoFlow"}),$fe=Ps({prop:"gridAutoColumns"}),zfe=Ps({prop:"gridAutoRows"}),Nfe=Ps({prop:"gridTemplateColumns"}),Bfe=Ps({prop:"gridTemplateRows"}),Ffe=Ps({prop:"gridTemplateAreas"}),jfe=Ps({prop:"gridArea"});zM(BM,FM,jM,Ife,Dfe,Lfe,$fe,zfe,Nfe,Bfe,Ffe,jfe);function X1(t,e){return e==="grey"?e:t}const Vfe=Ps({prop:"color",themeKey:"palette",transform:X1}),Qfe=Ps({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:X1}),Ufe=Ps({prop:"backgroundColor",themeKey:"palette",transform:X1});zM(Vfe,Qfe,Ufe);function Fu(t){return t<=1&&t!==0?`${t*100}%`:t}const Zfe=Ps({prop:"width",transform:Fu}),$6=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{const r=t.theme?.breakpoints?.values?.[n]||LM[n];return r?t.theme?.breakpoints?.unit!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Fu(n)}};return gf(t,t.maxWidth,e)}return null};$6.filterProps=["maxWidth"];const qfe=Ps({prop:"minWidth",transform:Fu}),Wfe=Ps({prop:"height",transform:Fu}),Hfe=Ps({prop:"maxHeight",transform:Fu}),Gfe=Ps({prop:"minHeight",transform:Fu});Ps({prop:"size",cssProperty:"width",transform:Fu});Ps({prop:"size",cssProperty:"height",transform:Fu});const Xfe=Ps({prop:"boxSizing"});zM(Zfe,$6,qfe,Wfe,Hfe,Gfe,Xfe);const VT={border:{themeKey:"borders",transform:Lh},borderTop:{themeKey:"borders",transform:Lh},borderRight:{themeKey:"borders",transform:Lh},borderBottom:{themeKey:"borders",transform:Lh},borderLeft:{themeKey:"borders",transform:Lh},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Lh},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:NM},color:{themeKey:"palette",transform:X1},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:X1},backgroundColor:{themeKey:"palette",transform:X1},p:{style:ys},pt:{style:ys},pr:{style:ys},pb:{style:ys},pl:{style:ys},px:{style:ys},py:{style:ys},padding:{style:ys},paddingTop:{style:ys},paddingRight:{style:ys},paddingBottom:{style:ys},paddingLeft:{style:ys},paddingX:{style:ys},paddingY:{style:ys},paddingInline:{style:ys},paddingInlineStart:{style:ys},paddingInlineEnd:{style:ys},paddingBlock:{style:ys},paddingBlockStart:{style:ys},paddingBlockEnd:{style:ys},m:{style:gs},mt:{style:gs},mr:{style:gs},mb:{style:gs},ml:{style:gs},mx:{style:gs},my:{style:gs},margin:{style:gs},marginTop:{style:gs},marginRight:{style:gs},marginBottom:{style:gs},marginLeft:{style:gs},marginX:{style:gs},marginY:{style:gs},marginInline:{style:gs},marginInlineStart:{style:gs},marginInlineEnd:{style:gs},marginBlock:{style:gs},marginBlockStart:{style:gs},marginBlockEnd:{style:gs},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:BM},rowGap:{style:jM},columnGap:{style:FM},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Fu},maxWidth:{style:$6},minWidth:{transform:Fu},height:{transform:Fu},maxHeight:{transform:Fu},minHeight:{transform:Fu},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Yfe(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function Kfe(t,e){return typeof t=="function"?t(e):t}function Jfe(){function t(n,r,i,o){const a={[n]:r,theme:i},s=o[n];if(!s)return{[n]:r};const{cssProperty:u=n,themeKey:f,transform:g,style:_}=s;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[n]:r};const w=Ip(i,f)||{};return _?_(a):gf(a,r,E=>{let A=FP(w,g,E);return E===A&&typeof E=="string"&&(A=FP(w,g,`${n}${E==="default"?"":Zt(E)}`,E)),u===!1?A:{[u]:A}})}function e(n){const{sx:r,theme:i={},nested:o}=n||{};if(!r)return null;const a=i.unstable_sxConfig??VT;function s(u){let f=u;if(typeof u=="function")f=u(i);else if(typeof u!="object")return u;if(!f)return null;const g=BG(i.breakpoints),_=Object.keys(g);let w=g;return Object.keys(f).forEach(S=>{const E=Kfe(f[S],i);if(E!=null)if(typeof E=="object")if(a[S])w=X2(w,t(S,E,i,a));else{const A=gf({theme:i},E,R=>({[S]:R}));Yfe(A,E)?w[S]=e({sx:E,theme:i,nested:!0}):w=X2(w,A)}else w=X2(w,t(S,E,i,a))}),!o&&i.modularCssLayers?{"@layer sx":e7(i,XL(_,w))}:e7(i,XL(_,w))}return Array.isArray(r)?r.map(s):s(r)}return e}const nb=Jfe();nb.filterProps=["sx"];function epe(t,e){const n=this;if(n.vars){if(!n.colorSchemes?.[t]||typeof n.getColorSchemeSelector!="function")return{};let r=n.getColorSchemeSelector(t);return r==="&"?e:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:e})}return n.palette.mode===t?e:{}}function dO(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:o={},...a}=t,s=afe(n),u=jG(i);let f=Pa({breakpoints:s,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:u,shape:{...hfe,...o}},a);return f=ufe(f),f.applyStyles=epe,f=e.reduce((g,_)=>Pa(g,_),f),f.unstable_sxConfig={...VT,...a?.unstable_sxConfig},f.unstable_sx=function(_){return nb({sx:_,theme:this})},f}function tpe(t){return Object.keys(t).length===0}function npe(t=null){const e=Q.useContext(DM);return!e||tpe(e)?t:e}const rpe=dO();function QT(t=rpe){return npe(t)}function f3(t){const e=k0(t);return t!==e&&e.styles?(e.styles.match(/^@layer\s+[^{]*$/)||(e.styles=`@layer global{${e.styles}}`),e):t}function ipe({styles:t,themeId:e,defaultTheme:n={}}){const r=QT(n),i=e&&r[e]||r;let o=typeof t=="function"?t(i):t;return i.modularCssLayers&&(Array.isArray(o)?o=o.map(a=>f3(typeof a=="function"?a(i):a)):o=f3(o)),J.jsx(nfe,{styles:o})}const ope=t=>{const e={systemProps:{},otherProps:{}},n=t?.theme?.unstable_sxConfig??VT;return Object.keys(t).forEach(r=>{n[r]?e.systemProps[r]=t[r]:e.otherProps[r]=t[r]}),e};function VM(t){const{sx:e,...n}=t,{systemProps:r,otherProps:i}=ope(n);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...a)=>{const s=e(...a);return Lp(s)?{...r,...s}:r}:o={...r,...e},{...i,sx:o}}const r7=t=>t,spe=()=>{let t=r7;return{configure(e){t=e},generate(e){return t(e)},reset(){t=r7}}},VG=spe();function QG(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=QG(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function bn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=QG(t))&&(r&&(r+=" "),r+=e);return r}function ape(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,o=$G("div",{shouldForwardProp:s=>s!=="theme"&&s!=="sx"&&s!=="as"})(nb);return Q.forwardRef(function(u,f){const g=QT(n),{className:_,component:w="div",...S}=VM(u);return J.jsx(o,{as:w,ref:f,className:bn(_,i?i(r):r),theme:e&&g[e]||g,...S})})}const lpe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Un(t,e,n="Mui"){const r=lpe[e];return r?`${n}-${r}`:`${VG.generate(t)}-${e}`}function Yn(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Un(t,i,n)}),r}function UG(t){const{variants:e,...n}=t,r={variants:e,style:k0(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=k0(i.style))}),r}const cpe=dO();function p3(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function $_(t,e){return e&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${e}{${String(t.styles)}}`),t}function upe(t){return t?(e,n)=>n[t]:null}function hpe(t,e,n){t.theme=fpe(t.theme)?n:t.theme[e]||t.theme}function iP(t,e,n){const r=typeof e=="function"?e(t):e;if(Array.isArray(r))return r.flatMap(i=>iP(t,i,n));if(Array.isArray(r?.variants)){let i;if(r.isProcessed)i=n?$_(r.style,n):r.style;else{const{variants:o,...a}=r;i=n?$_(k0(a),n):a}return ZG(t,r.variants,[i],n)}return r?.isProcessed?n?$_(k0(r.style),n):r.style:n?$_(k0(r),n):r}function ZG(t,e,n=[],r=void 0){let i;e:for(let o=0;o<e.length;o+=1){const a=e[o];if(typeof a.props=="function"){if(i??={...t,...t.ownerState,ownerState:t.ownerState},!a.props(i))continue}else for(const s in a.props)if(t[s]!==a.props[s]&&t.ownerState?.[s]!==a.props[s])continue e;typeof a.style=="function"?(i??={...t,...t.ownerState,ownerState:t.ownerState},n.push(r?$_(k0(a.style(i)),r):a.style(i))):n.push(r?$_(k0(a.style),r):a.style)}return n}function qG(t={}){const{themeId:e,defaultTheme:n=cpe,rootShouldForwardProp:r=p3,slotShouldForwardProp:i=p3}=t;function o(s){hpe(s,e,n)}return(s,u={})=>{rfe(s,q=>q.filter(H=>H!==nb));const{name:f,slot:g,skipVariantsResolver:_,skipSx:w,overridesResolver:S=upe(mpe(g)),...E}=u,A=f&&f.startsWith("Mui")||g?"components":"custom",R=_!==void 0?_:g&&g!=="Root"&&g!=="root"||!1,$=w||!1;let z=p3;g==="Root"||g==="root"?z=r:g?z=i:ppe(s)&&(z=void 0);const B=$G(s,{shouldForwardProp:z,label:dpe(),...E}),F=q=>{if(q.__emotion_real===q)return q;if(typeof q=="function")return function(ne){return iP(ne,q,ne.theme.modularCssLayers?A:void 0)};if(Lp(q)){const H=UG(q);return function(ie){return H.variants?iP(ie,H,ie.theme.modularCssLayers?A:void 0):ie.theme.modularCssLayers?$_(H.style,A):H.style}}return q},U=(...q)=>{const H=[],ne=q.map(F),ie=[];if(H.push(o),f&&S&&ie.push(function(me){const ye=me.theme.components?.[f]?.styleOverrides;if(!ye)return null;const _e={};for(const ke in ye)_e[ke]=iP(me,ye[ke],me.theme.modularCssLayers?"theme":void 0);return S(me,_e)}),f&&!R&&ie.push(function(me){const ye=me.theme?.components?.[f]?.variants;return ye?ZG(me,ye,[],me.theme.modularCssLayers?"theme":void 0):null}),$||ie.push(nb),Array.isArray(ne[0])){const re=ne.shift(),me=new Array(H.length).fill(""),Te=new Array(ie.length).fill("");let ye;ye=[...me,...re,...Te],ye.raw=[...me,...re.raw,...Te],H.unshift(ye)}const ce=[...H,...ne,...ie],xe=B(...ce);return s.muiName&&(xe.muiName=s.muiName),xe};return B.withConfig&&(U.withConfig=B.withConfig),U}}function dpe(t,e){return void 0}function fpe(t){for(const e in t)return!1;return!0}function ppe(t){return typeof t=="string"&&t.charCodeAt(0)>96}function mpe(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const z6=qG();function AC(t,e,n=!1){const r={...e};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=i;if(o==="components"||o==="slots")r[o]={...t[o],...r[o]};else if(o==="componentsProps"||o==="slotProps"){const a=t[o],s=e[o];if(!s)r[o]=a||{};else if(!a)r[o]=s;else{r[o]={...s};for(const u in a)if(Object.prototype.hasOwnProperty.call(a,u)){const f=u;r[o][f]=AC(a[f],s[f],n)}}}else o==="className"&&n&&e.className?r.className=bn(t?.className,e?.className):o==="style"&&n&&e.style?r.style={...t?.style,...e?.style}:r[o]===void 0&&(r[o]=t[o])}return r}function gpe(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:AC(e.components[n].defaultProps,r)}function N6({props:t,name:e,defaultTheme:n,themeId:r}){let i=QT(n);return r&&(i=i[r]||i),gpe({theme:i,name:e,props:t})}const yf=typeof window<"u"?Q.useLayoutEffect:Q.useEffect;function ype(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function B6(t,e=0,n=1){return ype(t,e,n)}function vpe(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function I0(t){if(t.type)return t;if(t.charAt(0)==="#")return I0(vpe(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Vg(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(Vg(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const _pe=t=>{const e=I0(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},P2=(t,e)=>{try{return _pe(t)}catch{return t}};function QM(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,o)=>o<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function WG(t){t=I0(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),a=(f,g=(f+n/30)%12)=>i-o*Math.max(Math.min(g-3,9-g,1),-1);let s="rgb";const u=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return t.type==="hsla"&&(s+="a",u.push(e[3])),QM({type:s,values:u})}function YL(t){t=I0(t);let e=t.type==="hsl"||t.type==="hsla"?I0(WG(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function bpe(t,e){const n=YL(t),r=YL(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function PC(t,e){return t=I0(t),e=B6(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,QM(t)}function g_(t,e,n){try{return PC(t,e)}catch{return t}}function UM(t,e){if(t=I0(t),e=B6(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return QM(t)}function ji(t,e,n){try{return UM(t,e)}catch{return t}}function ZM(t,e){if(t=I0(t),e=B6(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return QM(t)}function Vi(t,e,n){try{return ZM(t,e)}catch{return t}}function xpe(t,e=.15){return YL(t)>.5?UM(t,e):ZM(t,e)}function zE(t,e,n){try{return xpe(t,e)}catch{return t}}const wpe=Q.createContext(),qM=()=>Q.useContext(wpe)??!1,Ope=Q.createContext(void 0);function Spe(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?AC(i.defaultProps,r,e.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?AC(i,r,e.components.mergeClassNameAndStyle):r}function Cpe({props:t,name:e}){const n=Q.useContext(Ope);return Spe({props:t,name:e,theme:{components:n}})}let i7=0;function Tpe(t){const[e,n]=Q.useState(t),r=t||e;return Q.useEffect(()=>{e==null&&(i7+=1,n(`mui-${i7}`))},[e]),r}const kpe={...OC},o7=kpe.useId;function fO(t){if(o7!==void 0){const e=o7();return t??e}return Tpe(t)}const s7={theme:void 0};function Epe(t){let e,n;return function(i){let o=e;return(o===void 0||i.theme!==n)&&(s7.theme=i.theme,o=UG(t(s7)),e=o,n=i.theme),o}}function Ape(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const a7=(t,e,n,r=[])=>{let i=t;e.forEach((o,a)=>{a===e.length-1?Array.isArray(i)?i[Number(o)]=n:i&&typeof i=="object"&&(i[o]=n):i&&typeof i=="object"&&(i[o]||(i[o]=r.includes(o)?[]:{}),i=i[o])})},Ppe=(t,e,n)=>{function r(i,o=[],a=[]){Object.entries(i).forEach(([s,u])=>{(!n||n&&!n([...o,s]))&&u!=null&&(typeof u=="object"&&Object.keys(u).length>0?r(u,[...o,s],Array.isArray(u)?[...a,s]:a):e([...o,s],u,a))})}r(t)},Mpe=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function m3(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},o={},a={};return Ppe(t,(s,u,f)=>{if((typeof u=="string"||typeof u=="number")&&(!r||!r(s,u))){const g=`--${n?`${n}-`:""}${s.join("-")}`,_=Mpe(s,u);Object.assign(i,{[g]:_}),a7(o,s,`var(${g})`,f),a7(a,s,`var(${g}, ${_})`,f)}},s=>s[0]==="vars"),{css:i,vars:o,varsWithDefaults:a}}function Rpe(t,e={}){const{getSelector:n=$,disableCssColorScheme:r,colorSchemeSelector:i,enableContrastVars:o}=e,{colorSchemes:a={},components:s,defaultColorScheme:u="light",...f}=t,{vars:g,css:_,varsWithDefaults:w}=m3(f,e);let S=w;const E={},{[u]:A,...R}=a;if(Object.entries(R||{}).forEach(([F,U])=>{const{vars:q,css:H,varsWithDefaults:ne}=m3(U,e);S=Pa(S,ne),E[F]={css:H,vars:q}}),A){const{css:F,vars:U,varsWithDefaults:q}=m3(A,e);S=Pa(S,q),E[u]={css:F,vars:U}}function $(F,U){let q=i;if(i==="class"&&(q=".%s"),i==="data"&&(q="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(q=`[${i}="%s"]`),F){if(q==="media")return t.defaultColorScheme===F?":root":{[`@media (prefers-color-scheme: ${a[F]?.palette?.mode||F})`]:{":root":U}};if(q)return t.defaultColorScheme===F?`:root, ${q.replace("%s",String(F))}`:q.replace("%s",String(F))}return":root"}return{vars:S,generateThemeVars:()=>{let F={...g};return Object.entries(E).forEach(([,{vars:U}])=>{F=Pa(F,U)}),F},generateStyleSheets:()=>{const F=[],U=t.defaultColorScheme||"light";function q(ie,ce){Object.keys(ce).length&&F.push(typeof ie=="string"?{[ie]:{...ce}}:ie)}q(n(void 0,{..._}),_);const{[U]:H,...ne}=E;if(H){const{css:ie}=H,ce=a[U]?.palette?.mode,xe=!r&&ce?{colorScheme:ce,...ie}:{...ie};q(n(U,{...xe}),xe)}return Object.entries(ne).forEach(([ie,{css:ce}])=>{const xe=a[ie]?.palette?.mode,re=!r&&xe?{colorScheme:xe,...ce}:{...ce};q(n(ie,{...re}),re)}),o&&F.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),F}}}function Ipe(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}function Zn(t,e,n=void 0){const r={};for(const i in t){const o=t[i];let a="",s=!0;for(let u=0;u<o.length;u+=1){const f=o[u];f&&(a+=(s===!0?"":" ")+e(f),s=!1,n&&n[f]&&(a+=" "+n[f]))}r[i]=a}return r}const Dpe=dO(),Lpe=z6("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${Zt(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),$pe=t=>N6({props:t,name:"MuiContainer",defaultTheme:Dpe}),zpe=(t,e)=>{const n=u=>Un(e,u),{classes:r,fixed:i,disableGutters:o,maxWidth:a}=t,s={root:["root",a&&`maxWidth${Zt(String(a))}`,i&&"fixed",o&&"disableGutters"]};return Zn(s,n,r)};function Npe(t={}){const{createStyledComponent:e=Lpe,useThemeProps:n=$pe,componentName:r="MuiContainer"}=t,i=e(({theme:a,ownerState:s})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!s.disableGutters&&{paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}}}),({theme:a,ownerState:s})=>s.fixed&&Object.keys(a.breakpoints.values).reduce((u,f)=>{const g=f,_=a.breakpoints.values[g];return _!==0&&(u[a.breakpoints.up(g)]={maxWidth:`${_}${a.breakpoints.unit}`}),u},{}),({theme:a,ownerState:s})=>({...s.maxWidth==="xs"&&{[a.breakpoints.up("xs")]:{maxWidth:Math.max(a.breakpoints.values.xs,444)}},...s.maxWidth&&s.maxWidth!=="xs"&&{[a.breakpoints.up(s.maxWidth)]:{maxWidth:`${a.breakpoints.values[s.maxWidth]}${a.breakpoints.unit}`}}}));return Q.forwardRef(function(s,u){const f=n(s),{className:g,component:_="div",disableGutters:w=!1,fixed:S=!1,maxWidth:E="lg",classes:A,...R}=f,$={...f,component:_,disableGutters:w,fixed:S,maxWidth:E},z=zpe($,r);return J.jsx(i,{as:_,ownerState:$,className:bn(z.root,g),ref:u,...R})})}function Y2(t,e){return Q.isValidElement(t)&&e.indexOf(t.type.muiName??t.type?._payload?.value?.muiName)!==-1}const Bpe=(t,e)=>t.filter(n=>e.includes(n)),pO=(t,e,n)=>{const r=t.keys[0];Array.isArray(e)?e.forEach((i,o)=>{n((a,s)=>{o<=t.keys.length-1&&(o===0?Object.assign(a,s):a[t.up(t.keys[o])]=s)},i)}):e&&typeof e=="object"?(Object.keys(e).length>t.keys.length?t.keys:Bpe(t.keys,Object.keys(e))).forEach(o=>{if(t.keys.includes(o)){const a=e[o];a!==void 0&&n((s,u)=>{r===o?Object.assign(s,u):s[t.up(o)]=u},a)}}):(typeof e=="number"||typeof e=="string")&&n((i,o)=>{Object.assign(i,o)},e)};function jP(t){return`--Grid-${t}Spacing`}function WM(t){return`--Grid-parent-${t}Spacing`}const l7="--Grid-columns",Y1="--Grid-parent-columns",Fpe=({theme:t,ownerState:e})=>{const n={};return pO(t.breakpoints,e.size,(r,i)=>{let o={};i==="grow"&&(o={flexBasis:0,flexGrow:1,maxWidth:"100%"}),i==="auto"&&(o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof i=="number"&&(o={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${i} / var(${Y1}) - (var(${Y1}) - ${i}) * (var(${WM("column")}) / var(${Y1})))`}),r(n,o)}),n},jpe=({theme:t,ownerState:e})=>{const n={};return pO(t.breakpoints,e.offset,(r,i)=>{let o={};i==="auto"&&(o={marginLeft:"auto"}),typeof i=="number"&&(o={marginLeft:i===0?"0px":`calc(100% * ${i} / var(${Y1}) + var(${WM("column")}) * ${i} / var(${Y1}))`}),r(n,o)}),n},Vpe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={[l7]:12};return pO(t.breakpoints,e.columns,(r,i)=>{const o=i??12;r(n,{[l7]:o,"> *":{[Y1]:o}})}),n},Qpe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return pO(t.breakpoints,e.rowSpacing,(r,i)=>{const o=typeof i=="string"?i:t.spacing?.(i);r(n,{[jP("row")]:o,"> *":{[WM("row")]:o}})}),n},Upe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return pO(t.breakpoints,e.columnSpacing,(r,i)=>{const o=typeof i=="string"?i:t.spacing?.(i);r(n,{[jP("column")]:o,"> *":{[WM("column")]:o}})}),n},Zpe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return pO(t.breakpoints,e.direction,(r,i)=>{r(n,{flexDirection:i})}),n},qpe=({ownerState:t})=>({minWidth:0,boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",...t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},gap:`var(${jP("row")}) var(${jP("column")})`}}),Wpe=t=>{const e=[];return Object.entries(t).forEach(([n,r])=>{r!==!1&&r!==void 0&&e.push(`grid-${n}-${String(r)}`)}),e},Hpe=(t,e="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(t))return[`spacing-${e}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const r=[];return Object.entries(t).forEach(([i,o])=>{n(o)&&r.push(`spacing-${i}-${String(o)}`)}),r}return[]},Gpe=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([e,n])=>`direction-${e}-${n}`):[`direction-xs-${String(t)}`];function Xpe(t,e){t.item!==void 0&&delete t.item,t.zeroMinWidth!==void 0&&delete t.zeroMinWidth,e.keys.forEach(n=>{t[n]!==void 0&&delete t[n]})}const Ype=dO(),Kpe=z6("div",{name:"MuiGrid",slot:"Root"});function Jpe(t){return N6({props:t,name:"MuiGrid",defaultTheme:Ype})}function eme(t={}){const{createStyledComponent:e=Kpe,useThemeProps:n=Jpe,useTheme:r=QT,componentName:i="MuiGrid"}=t,o=(f,g)=>{const{container:_,direction:w,spacing:S,wrap:E,size:A}=f,R={root:["root",_&&"container",E!=="wrap"&&`wrap-xs-${String(E)}`,...Gpe(w),...Wpe(A),..._?Hpe(S,g.breakpoints.keys[0]):[]]};return Zn(R,$=>Un(i,$),{})};function a(f,g,_=()=>!0){const w={};return f===null||(Array.isArray(f)?f.forEach((S,E)=>{S!==null&&_(S)&&g.keys[E]&&(w[g.keys[E]]=S)}):typeof f=="object"?Object.keys(f).forEach(S=>{const E=f[S];E!=null&&_(E)&&(w[S]=E)}):w[g.keys[0]]=f),w}const s=e(Vpe,Upe,Qpe,Fpe,Zpe,qpe,jpe),u=Q.forwardRef(function(g,_){const w=r(),S=n(g),E=VM(S);Xpe(E,w.breakpoints);const{className:A,children:R,columns:$=12,container:z=!1,component:B="div",direction:F="row",wrap:U="wrap",size:q={},offset:H={},spacing:ne=0,rowSpacing:ie=ne,columnSpacing:ce=ne,unstable_level:xe=0,...re}=E,me=a(q,w.breakpoints,Me=>Me!==!1),Te=a(H,w.breakpoints),ye=g.columns??(xe?void 0:$),_e=g.spacing??(xe?void 0:ne),ke=g.rowSpacing??g.spacing??(xe?void 0:ie),Ne=g.columnSpacing??g.spacing??(xe?void 0:ce),Qe={...E,level:xe,columns:ye,container:z,direction:F,wrap:U,spacing:_e,rowSpacing:ke,columnSpacing:Ne,size:me,offset:Te},Se=o(Qe,w);return J.jsx(s,{ref:_,as:B,ownerState:Qe,className:bn(Se.root,A),...re,children:Q.Children.map(R,Me=>Q.isValidElement(Me)&&Y2(Me,["Grid"])&&z&&Me.props.container?Q.cloneElement(Me,{unstable_level:Me.props?.unstable_level??xe+1}):Me)})});return u.muiName="Grid",u}const tme=dO(),nme=z6("div",{name:"MuiStack",slot:"Root"});function rme(t){return N6({props:t,name:"MuiStack",defaultTheme:tme})}function ime(t,e){const n=Q.Children.toArray(t).filter(Boolean);return n.reduce((r,i,o)=>(r.push(i),o<n.length-1&&r.push(Q.cloneElement(e,{key:`separator-${o}`})),r),[])}const ome=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],sme=({ownerState:t,theme:e})=>{let n={display:"flex",flexDirection:"column",...gf({theme:e},d3({values:t.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r}))};if(t.spacing){const r=$M(e),i=Object.keys(e.breakpoints.values).reduce((u,f)=>((typeof t.spacing=="object"&&t.spacing[f]!=null||typeof t.direction=="object"&&t.direction[f]!=null)&&(u[f]=!0),u),{}),o=d3({values:t.direction,base:i}),a=d3({values:t.spacing,base:i});typeof o=="object"&&Object.keys(o).forEach((u,f,g)=>{if(!o[u]){const w=f>0?o[g[f-1]]:"column";o[u]=w}}),n=Pa(n,gf({theme:e},a,(u,f)=>t.useFlexGap?{gap:tb(r,u)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${ome(f?o[f]:t.direction)}`]:tb(r,u)}}))}return n=ffe(e.breakpoints,n),n};function ame(t={}){const{createStyledComponent:e=nme,useThemeProps:n=rme,componentName:r="MuiStack"}=t,i=()=>Zn({root:["root"]},u=>Un(r,u),{}),o=e(sme);return Q.forwardRef(function(u,f){const g=n(u),_=VM(g),{component:w="div",direction:S="column",spacing:E=0,divider:A,children:R,className:$,useFlexGap:z=!1,...B}=_,F={direction:S,spacing:E,useFlexGap:z},U=i();return J.jsx(o,{as:w,ownerState:F,ref:f,className:bn(U.root,$),...B,children:A?ime(R,A):R})})}function HG(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:CC.white,default:CC.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const GG=HG();function XG(){return{text:{primary:CC.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:CC.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const KL=XG();function c7(t,e,n,r){const i=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=ZM(t.main,i):e==="dark"&&(t.dark=UM(t.main,o)))}function u7(t,e,n,r,i){const o=i.light||i,a=i.dark||i*1.5;e[n]||(e.hasOwnProperty(r)?e[n]=e[r]:n==="light"?e.light=`color-mix(in ${t}, ${e.main}, #fff ${(o*100).toFixed(0)}%)`:n==="dark"&&(e.dark=`color-mix(in ${t}, ${e.main}, #000 ${(a*100).toFixed(0)}%)`))}function lme(t="light"){return t==="dark"?{main:a1[200],light:a1[50],dark:a1[400]}:{main:a1[700],light:a1[400],dark:a1[800]}}function cme(t="light"){return t==="dark"?{main:s1[200],light:s1[50],dark:s1[400]}:{main:s1[500],light:s1[300],dark:s1[700]}}function ume(t="light"){return t==="dark"?{main:o1[500],light:o1[300],dark:o1[700]}:{main:o1[700],light:o1[400],dark:o1[800]}}function hme(t="light"){return t==="dark"?{main:l1[400],light:l1[300],dark:l1[700]}:{main:l1[700],light:l1[500],dark:l1[900]}}function dme(t="light"){return t==="dark"?{main:c1[400],light:c1[300],dark:c1[700]}:{main:c1[800],light:c1[500],dark:c1[900]}}function fme(t="light"){return t==="dark"?{main:t2[400],light:t2[300],dark:t2[700]}:{main:"#ed6c02",light:t2[500],dark:t2[900]}}function pme(t){return`oklch(from ${t} var(--__l) 0 h / var(--__a))`}function F6(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,colorSpace:i,...o}=t,a=t.primary||lme(e),s=t.secondary||cme(e),u=t.error||ume(e),f=t.info||hme(e),g=t.success||dme(e),_=t.warning||fme(e);function w(R){return i?pme(R):bpe(R,KL.text.primary)>=n?KL.text.primary:GG.text.primary}const S=({color:R,name:$,mainShade:z=500,lightShade:B=300,darkShade:F=700})=>{if(R={...R},!R.main&&R[z]&&(R.main=R[z]),!R.hasOwnProperty("main"))throw new Error(Vg(11,$?` (${$})`:"",z));if(typeof R.main!="string")throw new Error(Vg(12,$?` (${$})`:"",JSON.stringify(R.main)));return i?(u7(i,R,"light",B,r),u7(i,R,"dark",F,r)):(c7(R,"light",B,r),c7(R,"dark",F,r)),R.contrastText||(R.contrastText=w(R.main)),R};let E;return e==="light"?E=HG():e==="dark"&&(E=XG()),Pa({common:{...CC},mode:e,primary:S({color:a,name:"primary"}),secondary:S({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:S({color:u,name:"error"}),warning:S({color:_,name:"warning"}),info:S({color:f,name:"info"}),success:S({color:g,name:"success"}),grey:Jhe,contrastThreshold:n,getContrastText:w,augmentColor:S,tonalOffset:r,...E},o)}function mme(t){const e={};return Object.entries(t).forEach(r=>{const[i,o]=r;typeof o=="object"&&(e[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),e}function gme(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function yme(t){return Math.round(t*1e5)/1e5}const h7={textTransform:"uppercase"},d7='"Roboto", "Helvetica", "Arial", sans-serif';function vme(t,e){const{fontFamily:n=d7,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:s=700,htmlFontSize:u=16,allVariants:f,pxToRem:g,..._}=typeof e=="function"?e(t):e,w=r/14,S=g||(R=>`${R/u*w}rem`),E=(R,$,z,B,F)=>({fontFamily:n,fontWeight:R,fontSize:S($),lineHeight:z,...n===d7?{letterSpacing:`${yme(B/$)}em`}:{},...F,...f}),A={h1:E(i,96,1.167,-1.5),h2:E(i,60,1.2,-.5),h3:E(o,48,1.167,0),h4:E(o,34,1.235,.25),h5:E(o,24,1.334,0),h6:E(a,20,1.6,.15),subtitle1:E(o,16,1.75,.15),subtitle2:E(a,14,1.57,.1),body1:E(o,16,1.5,.15),body2:E(o,14,1.43,.15),button:E(a,14,1.75,.4,h7),caption:E(o,12,1.66,.4),overline:E(o,12,2.66,1,h7),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Pa({htmlFontSize:u,pxToRem:S,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:s,...A},_,{clone:!1})}const _me=.2,bme=.14,xme=.12;function Qo(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${_me})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${bme})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${xme})`].join(",")}const wme=["none",Qo(0,2,1,-1,0,1,1,0,0,1,3,0),Qo(0,3,1,-2,0,2,2,0,0,1,5,0),Qo(0,3,3,-2,0,3,4,0,0,1,8,0),Qo(0,2,4,-1,0,4,5,0,0,1,10,0),Qo(0,3,5,-1,0,5,8,0,0,1,14,0),Qo(0,3,5,-1,0,6,10,0,0,1,18,0),Qo(0,4,5,-2,0,7,10,1,0,2,16,1),Qo(0,5,5,-3,0,8,10,1,0,3,14,2),Qo(0,5,6,-3,0,9,12,1,0,3,16,2),Qo(0,6,6,-3,0,10,14,1,0,4,18,3),Qo(0,6,7,-4,0,11,15,1,0,4,20,3),Qo(0,7,8,-4,0,12,17,2,0,5,22,4),Qo(0,7,8,-4,0,13,19,2,0,5,24,4),Qo(0,7,9,-4,0,14,21,2,0,5,26,4),Qo(0,8,9,-5,0,15,22,2,0,6,28,5),Qo(0,8,10,-5,0,16,24,2,0,6,30,5),Qo(0,8,11,-5,0,17,26,2,0,6,32,5),Qo(0,9,11,-5,0,18,28,2,0,7,34,6),Qo(0,9,12,-6,0,19,29,2,0,7,36,6),Qo(0,10,13,-6,0,20,31,3,0,8,38,7),Qo(0,10,13,-6,0,21,33,3,0,8,40,7),Qo(0,10,14,-6,0,22,35,3,0,8,42,7),Qo(0,11,14,-7,0,23,36,3,0,9,44,8),Qo(0,11,15,-7,0,24,38,3,0,9,46,8)],Ome={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},YG={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function f7(t){return`${Math.round(t)}ms`}function Sme(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function Cme(t){const e={...Ome,...t.easing},n={...YG,...t.duration};return{getAutoHeightDuration:Sme,create:(i=["all"],o={})=>{const{duration:a=n.standard,easing:s=e.easeInOut,delay:u=0,...f}=o;return(Array.isArray(i)?i:[i]).map(g=>`${g} ${typeof a=="string"?a:f7(a)} ${s} ${typeof u=="string"?u:f7(u)}`).join(",")},...t,easing:e,duration:n}}const Tme={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function kme(t){return Lp(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function KG(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let o=0;o<i.length;o++){const[a,s]=i[o];!kme(s)||a.startsWith("unstable_")?delete r[a]:Lp(s)&&(r[a]={...s},n(r[a]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function p7(t){return typeof t=="number"?`${(t*100).toFixed(0)}%`:`calc((${t}) * 100%)`}const Eme=t=>{if(!Number.isNaN(+t))return+t;const e=t.match(/\d*\.?\d+/g);if(!e)return 0;let n=0;for(let r=0;r<e.length;r+=1)n+=+e[r];return n};function Ame(t){Object.assign(t,{alpha(e,n){const r=this||t;return r.colorSpace?`oklch(from ${e} l c h / ${typeof n=="string"?`calc(${n})`:n})`:r.vars?`rgba(${e.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof n=="string"?`calc(${n})`:n})`:PC(e,Eme(n))},lighten(e,n){const r=this||t;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${e}, #fff ${p7(n)})`:ZM(e,n)},darken(e,n){const r=this||t;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${e}, #000 ${p7(n)})`:UM(e,n)}})}function JL(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:o={},transitions:a={},typography:s={},shape:u,colorSpace:f,...g}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(Vg(20));const _=F6({...o,colorSpace:f}),w=dO(t);let S=Pa(w,{mixins:gme(w.breakpoints,r),palette:_,shadows:wme.slice(),typography:vme(_,s),transitions:Cme(a),zIndex:{...Tme}});return S=Pa(S,g),S=e.reduce((E,A)=>Pa(E,A),S),S.unstable_sxConfig={...VT,...g?.unstable_sxConfig},S.unstable_sx=function(A){return nb({sx:A,theme:this})},S.toRuntimeSource=KG,Ame(S),S}function e$(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const Pme=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=e$(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function JG(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function eX(t){return t==="dark"?Pme:[]}function Mme(t){const{palette:e={mode:"light"},opacity:n,overlays:r,colorSpace:i,...o}=t,a=F6({...e,colorSpace:i});return{palette:a,opacity:{...JG(a.mode),...n},overlays:r||eX(a.mode),...o}}function Rme(t){return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!t[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Ime=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],Dme=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const a={};return Ime(t.cssVarPrefix).forEach(s=>{a[s]=n[s],delete n[s]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:a}}:o?{[o.replace("%s",e)]:a,[`${r}, ${o.replace("%s",e)}`]:n}:{[r]:{...n,...a}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(o)return o.replace("%s",String(e))}return r};function Lme(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function Nt(t,e,n){!t[e]&&n&&(t[e]=n)}function M2(t){return typeof t!="string"||!t.startsWith("hsl")?t:WG(t)}function pg(t,e){`${e}Channel`in t||(t[`${e}Channel`]=P2(M2(t[e])))}function $me(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const wp=t=>{try{return t()}catch{}},zme=(t="mui")=>Ape(t);function g3(t,e,n,r,i){if(!n)return;n=n===!0?{}:n;const o=i==="dark"?"dark":"light";if(!r){e[i]=Mme({...n,palette:{mode:o,...n?.palette},colorSpace:t});return}const{palette:a,...s}=JL({...r,palette:{mode:o,...n?.palette},colorSpace:t});return e[i]={...n,palette:a,opacity:{...JG(o),...n?.opacity},overlays:n?.overlays||eX(o)},s}function Nme(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",nativeColor:a=!1,shouldSkipGeneratingVar:s=Rme,colorSchemeSelector:u=n.light&&n.dark?"media":void 0,rootSelector:f=":root",...g}=t,_=Object.keys(n)[0],w=r||(n.light&&_!=="light"?"light":_),S=zme(o),{[w]:E,light:A,dark:R,...$}=n,z={...$};let B=E;if((w==="dark"&&!("dark"in n)||w==="light"&&!("light"in n))&&(B=!0),!B)throw new Error(Vg(21,w));let F;a&&(F="oklch");const U=g3(F,z,B,g,w);A&&!z.light&&g3(F,z,A,void 0,"light"),R&&!z.dark&&g3(F,z,R,void 0,"dark");let q={defaultColorScheme:w,...U,cssVarPrefix:o,colorSchemeSelector:u,rootSelector:f,getCssVar:S,colorSchemes:z,font:{...mme(U.typography),...U.font},spacing:$me(g.spacing)};Object.keys(q.colorSchemes).forEach(xe=>{const re=q.colorSchemes[xe].palette,me=ye=>{const _e=ye.split("-"),ke=_e[1],Ne=_e[2];return S(ye,re[ke][Ne])};re.mode==="light"&&(Nt(re.common,"background","#fff"),Nt(re.common,"onBackground","#000")),re.mode==="dark"&&(Nt(re.common,"background","#000"),Nt(re.common,"onBackground","#fff"));function Te(ye,_e,ke){if(F){let Ne;return ye===g_&&(Ne=`transparent ${((1-ke)*100).toFixed(0)}%`),ye===ji&&(Ne=`#000 ${(ke*100).toFixed(0)}%`),ye===Vi&&(Ne=`#fff ${(ke*100).toFixed(0)}%`),`color-mix(in ${F}, ${_e}, ${Ne})`}return ye(_e,ke)}if(Lme(re,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),re.mode==="light"){Nt(re.Alert,"errorColor",Te(ji,re.error.light,.6)),Nt(re.Alert,"infoColor",Te(ji,re.info.light,.6)),Nt(re.Alert,"successColor",Te(ji,re.success.light,.6)),Nt(re.Alert,"warningColor",Te(ji,re.warning.light,.6)),Nt(re.Alert,"errorFilledBg",me("palette-error-main")),Nt(re.Alert,"infoFilledBg",me("palette-info-main")),Nt(re.Alert,"successFilledBg",me("palette-success-main")),Nt(re.Alert,"warningFilledBg",me("palette-warning-main")),Nt(re.Alert,"errorFilledColor",wp(()=>re.getContrastText(re.error.main))),Nt(re.Alert,"infoFilledColor",wp(()=>re.getContrastText(re.info.main))),Nt(re.Alert,"successFilledColor",wp(()=>re.getContrastText(re.success.main))),Nt(re.Alert,"warningFilledColor",wp(()=>re.getContrastText(re.warning.main))),Nt(re.Alert,"errorStandardBg",Te(Vi,re.error.light,.9)),Nt(re.Alert,"infoStandardBg",Te(Vi,re.info.light,.9)),Nt(re.Alert,"successStandardBg",Te(Vi,re.success.light,.9)),Nt(re.Alert,"warningStandardBg",Te(Vi,re.warning.light,.9)),Nt(re.Alert,"errorIconColor",me("palette-error-main")),Nt(re.Alert,"infoIconColor",me("palette-info-main")),Nt(re.Alert,"successIconColor",me("palette-success-main")),Nt(re.Alert,"warningIconColor",me("palette-warning-main")),Nt(re.AppBar,"defaultBg",me("palette-grey-100")),Nt(re.Avatar,"defaultBg",me("palette-grey-400")),Nt(re.Button,"inheritContainedBg",me("palette-grey-300")),Nt(re.Button,"inheritContainedHoverBg",me("palette-grey-A100")),Nt(re.Chip,"defaultBorder",me("palette-grey-400")),Nt(re.Chip,"defaultAvatarColor",me("palette-grey-700")),Nt(re.Chip,"defaultIconColor",me("palette-grey-700")),Nt(re.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Nt(re.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Nt(re.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Nt(re.LinearProgress,"primaryBg",Te(Vi,re.primary.main,.62)),Nt(re.LinearProgress,"secondaryBg",Te(Vi,re.secondary.main,.62)),Nt(re.LinearProgress,"errorBg",Te(Vi,re.error.main,.62)),Nt(re.LinearProgress,"infoBg",Te(Vi,re.info.main,.62)),Nt(re.LinearProgress,"successBg",Te(Vi,re.success.main,.62)),Nt(re.LinearProgress,"warningBg",Te(Vi,re.warning.main,.62)),Nt(re.Skeleton,"bg",F?Te(g_,re.text.primary,.11):`rgba(${me("palette-text-primaryChannel")} / 0.11)`),Nt(re.Slider,"primaryTrack",Te(Vi,re.primary.main,.62)),Nt(re.Slider,"secondaryTrack",Te(Vi,re.secondary.main,.62)),Nt(re.Slider,"errorTrack",Te(Vi,re.error.main,.62)),Nt(re.Slider,"infoTrack",Te(Vi,re.info.main,.62)),Nt(re.Slider,"successTrack",Te(Vi,re.success.main,.62)),Nt(re.Slider,"warningTrack",Te(Vi,re.warning.main,.62));const ye=F?Te(ji,re.background.default,.6825):zE(re.background.default,.8);Nt(re.SnackbarContent,"bg",ye),Nt(re.SnackbarContent,"color",wp(()=>F?KL.text.primary:re.getContrastText(ye))),Nt(re.SpeedDialAction,"fabHoverBg",zE(re.background.paper,.15)),Nt(re.StepConnector,"border",me("palette-grey-400")),Nt(re.StepContent,"border",me("palette-grey-400")),Nt(re.Switch,"defaultColor",me("palette-common-white")),Nt(re.Switch,"defaultDisabledColor",me("palette-grey-100")),Nt(re.Switch,"primaryDisabledColor",Te(Vi,re.primary.main,.62)),Nt(re.Switch,"secondaryDisabledColor",Te(Vi,re.secondary.main,.62)),Nt(re.Switch,"errorDisabledColor",Te(Vi,re.error.main,.62)),Nt(re.Switch,"infoDisabledColor",Te(Vi,re.info.main,.62)),Nt(re.Switch,"successDisabledColor",Te(Vi,re.success.main,.62)),Nt(re.Switch,"warningDisabledColor",Te(Vi,re.warning.main,.62)),Nt(re.TableCell,"border",Te(Vi,Te(g_,re.divider,1),.88)),Nt(re.Tooltip,"bg",Te(g_,re.grey[700],.92))}if(re.mode==="dark"){Nt(re.Alert,"errorColor",Te(Vi,re.error.light,.6)),Nt(re.Alert,"infoColor",Te(Vi,re.info.light,.6)),Nt(re.Alert,"successColor",Te(Vi,re.success.light,.6)),Nt(re.Alert,"warningColor",Te(Vi,re.warning.light,.6)),Nt(re.Alert,"errorFilledBg",me("palette-error-dark")),Nt(re.Alert,"infoFilledBg",me("palette-info-dark")),Nt(re.Alert,"successFilledBg",me("palette-success-dark")),Nt(re.Alert,"warningFilledBg",me("palette-warning-dark")),Nt(re.Alert,"errorFilledColor",wp(()=>re.getContrastText(re.error.dark))),Nt(re.Alert,"infoFilledColor",wp(()=>re.getContrastText(re.info.dark))),Nt(re.Alert,"successFilledColor",wp(()=>re.getContrastText(re.success.dark))),Nt(re.Alert,"warningFilledColor",wp(()=>re.getContrastText(re.warning.dark))),Nt(re.Alert,"errorStandardBg",Te(ji,re.error.light,.9)),Nt(re.Alert,"infoStandardBg",Te(ji,re.info.light,.9)),Nt(re.Alert,"successStandardBg",Te(ji,re.success.light,.9)),Nt(re.Alert,"warningStandardBg",Te(ji,re.warning.light,.9)),Nt(re.Alert,"errorIconColor",me("palette-error-main")),Nt(re.Alert,"infoIconColor",me("palette-info-main")),Nt(re.Alert,"successIconColor",me("palette-success-main")),Nt(re.Alert,"warningIconColor",me("palette-warning-main")),Nt(re.AppBar,"defaultBg",me("palette-grey-900")),Nt(re.AppBar,"darkBg",me("palette-background-paper")),Nt(re.AppBar,"darkColor",me("palette-text-primary")),Nt(re.Avatar,"defaultBg",me("palette-grey-600")),Nt(re.Button,"inheritContainedBg",me("palette-grey-800")),Nt(re.Button,"inheritContainedHoverBg",me("palette-grey-700")),Nt(re.Chip,"defaultBorder",me("palette-grey-700")),Nt(re.Chip,"defaultAvatarColor",me("palette-grey-300")),Nt(re.Chip,"defaultIconColor",me("palette-grey-300")),Nt(re.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Nt(re.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Nt(re.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Nt(re.LinearProgress,"primaryBg",Te(ji,re.primary.main,.5)),Nt(re.LinearProgress,"secondaryBg",Te(ji,re.secondary.main,.5)),Nt(re.LinearProgress,"errorBg",Te(ji,re.error.main,.5)),Nt(re.LinearProgress,"infoBg",Te(ji,re.info.main,.5)),Nt(re.LinearProgress,"successBg",Te(ji,re.success.main,.5)),Nt(re.LinearProgress,"warningBg",Te(ji,re.warning.main,.5)),Nt(re.Skeleton,"bg",F?Te(g_,re.text.primary,.13):`rgba(${me("palette-text-primaryChannel")} / 0.13)`),Nt(re.Slider,"primaryTrack",Te(ji,re.primary.main,.5)),Nt(re.Slider,"secondaryTrack",Te(ji,re.secondary.main,.5)),Nt(re.Slider,"errorTrack",Te(ji,re.error.main,.5)),Nt(re.Slider,"infoTrack",Te(ji,re.info.main,.5)),Nt(re.Slider,"successTrack",Te(ji,re.success.main,.5)),Nt(re.Slider,"warningTrack",Te(ji,re.warning.main,.5));const ye=F?Te(Vi,re.background.default,.985):zE(re.background.default,.98);Nt(re.SnackbarContent,"bg",ye),Nt(re.SnackbarContent,"color",wp(()=>F?GG.text.primary:re.getContrastText(ye))),Nt(re.SpeedDialAction,"fabHoverBg",zE(re.background.paper,.15)),Nt(re.StepConnector,"border",me("palette-grey-600")),Nt(re.StepContent,"border",me("palette-grey-600")),Nt(re.Switch,"defaultColor",me("palette-grey-300")),Nt(re.Switch,"defaultDisabledColor",me("palette-grey-600")),Nt(re.Switch,"primaryDisabledColor",Te(ji,re.primary.main,.55)),Nt(re.Switch,"secondaryDisabledColor",Te(ji,re.secondary.main,.55)),Nt(re.Switch,"errorDisabledColor",Te(ji,re.error.main,.55)),Nt(re.Switch,"infoDisabledColor",Te(ji,re.info.main,.55)),Nt(re.Switch,"successDisabledColor",Te(ji,re.success.main,.55)),Nt(re.Switch,"warningDisabledColor",Te(ji,re.warning.main,.55)),Nt(re.TableCell,"border",Te(ji,Te(g_,re.divider,1),.68)),Nt(re.Tooltip,"bg",Te(g_,re.grey[700],.92))}pg(re.background,"default"),pg(re.background,"paper"),pg(re.common,"background"),pg(re.common,"onBackground"),pg(re,"divider"),Object.keys(re).forEach(ye=>{const _e=re[ye];ye!=="tonalOffset"&&_e&&typeof _e=="object"&&(_e.main&&Nt(re[ye],"mainChannel",P2(M2(_e.main))),_e.light&&Nt(re[ye],"lightChannel",P2(M2(_e.light))),_e.dark&&Nt(re[ye],"darkChannel",P2(M2(_e.dark))),_e.contrastText&&Nt(re[ye],"contrastTextChannel",P2(M2(_e.contrastText))),ye==="text"&&(pg(re[ye],"primary"),pg(re[ye],"secondary")),ye==="action"&&(_e.active&&pg(re[ye],"active"),_e.selected&&pg(re[ye],"selected")))})}),q=e.reduce((xe,re)=>Pa(xe,re),q);const H={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:s,getSelector:Dme(q),enableContrastVars:a},{vars:ne,generateThemeVars:ie,generateStyleSheets:ce}=Rpe(q,H);return q.vars=ne,Object.entries(q.colorSchemes[q.defaultColorScheme]).forEach(([xe,re])=>{q[xe]=re}),q.generateThemeVars=ie,q.generateStyleSheets=ce,q.generateSpacing=function(){return jG(g.spacing,$M(this))},q.getColorSchemeSelector=Ipe(u),q.spacing=q.generateSpacing(),q.shouldSkipGeneratingVar=s,q.unstable_sxConfig={...VT,...g?.unstable_sxConfig},q.unstable_sx=function(re){return nb({sx:re,theme:this})},q.toRuntimeSource=KG,q}function m7(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:F6({...n===!0?{}:n.palette,mode:e})})}function tX(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:o=n?.mode,...a}=t,s=o||"light",u=i?.[s],f={...i,...n?{[s]:{...typeof u!="boolean"&&u,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return JL(t,...e);let g=n;"palette"in t||f[s]&&(f[s]!==!0?g=f[s].palette:s==="dark"&&(g={mode:"dark"}));const _=JL({...t,palette:g},...e);return _.defaultColorScheme=s,_.colorSchemes=f,_.palette.mode==="light"&&(_.colorSchemes.light={...f.light!==!0&&f.light,palette:_.palette},m7(_,"dark",f.dark)),_.palette.mode==="dark"&&(_.colorSchemes.dark={...f.dark!==!0&&f.dark,palette:_.palette},m7(_,"light",f.light)),_}return!n&&!("light"in f)&&s==="light"&&(f.light=!0),Nme({...a,colorSchemes:f,defaultColorScheme:s,...typeof r!="boolean"&&r},...e)}const j6=tX();function hm(){const t=QT(j6);return t[PM]||t}function nX(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const uc=t=>nX(t)&&t!=="classes",Yt=qG({themeId:PM,defaultTheme:j6,rootShouldForwardProp:uc});function g7(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function Bme(t){return J.jsx(ipe,{...t,defaultTheme:j6,themeId:PM})}function V6(t){return function(n){return J.jsx(Bme,{styles:typeof t=="function"?r=>t({theme:r,...n}):t})}}function Fme(){return VM}const ar=Epe;function Hn(t){return Cpe(t)}function jme(t){return Un("MuiSvgIcon",t)}Yn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Vme=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${Zt(e)}`,`fontSize${Zt(n)}`]};return Zn(i,jme,r)},Qme=Yt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Zt(n.color)}`],e[`fontSize${Zt(n.fontSize)}`]]}})(ar(({theme:t})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,e])=>e&&e.main).map(([e])=>({props:{color:e},style:{color:(t.vars??t).palette?.[e]?.main}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),t$=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:a="inherit",component:s="svg",fontSize:u="medium",htmlColor:f,inheritViewBox:g=!1,titleAccess:_,viewBox:w="0 0 24 24",...S}=r,E=Q.isValidElement(i)&&i.type==="svg",A={...r,color:a,component:s,fontSize:u,instanceFontSize:e.fontSize,inheritViewBox:g,viewBox:w,hasSvgAsChild:E},R={};g||(R.viewBox=w);const $=Vme(A);return J.jsxs(Qme,{as:s,className:bn($.root,o),focusable:"false",color:f,"aria-hidden":_?void 0:!0,role:_?"img":void 0,ref:n,...R,...S,...E&&i.props,ownerState:A,children:[E?i.props.children:i,_?J.jsx("title",{children:_}):null]})});t$.muiName="SvgIcon";function No(t,e){function n(r,i){return J.jsx(t$,{"data-testid":void 0,ref:i,...r,children:t})}return n.muiName=t$.muiName,Q.memo(Q.forwardRef(n))}function Q6(t,e=166){let n;function r(...i){const o=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(o,e)}return r.clear=()=>{clearTimeout(n)},r}function Yu(t){return t&&t.ownerDocument||document}function vf(t){return Yu(t).defaultView||window}function y7(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function VP(t){const{controlled:e,default:n,name:r,state:i="value"}=t,{current:o}=Q.useRef(e!==void 0),[a,s]=Q.useState(n),u=o?e:a,f=Q.useCallback(g=>{o||s(g)},[]);return[u,f]}function zg(t){const e=Q.useRef(t);return yf(()=>{e.current=t}),Q.useRef((...n)=>(0,e.current)(...n)).current}function ts(...t){const e=Q.useRef(void 0),n=Q.useCallback(r=>{const i=t.map(o=>{if(o==null)return null;if(typeof o=="function"){const a=o,s=a(r);return typeof s=="function"?s:()=>{a(null)}}return o.current=r,()=>{o.current=null}});return()=>{i.forEach(o=>o?.())}},t);return Q.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}function Ume(t,e){const n=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&n>=65&&n<=90&&typeof e=="function"}function rX(t,e){if(!t)return e;function n(a,s){const u={};return Object.keys(s).forEach(f=>{Ume(f,s[f])&&typeof a[f]=="function"&&(u[f]=(...g)=>{a[f](...g),s[f](...g)})}),u}if(typeof t=="function"||typeof e=="function")return a=>{const s=typeof e=="function"?e(a):e,u=typeof t=="function"?t({...a,...s}):t,f=bn(a?.className,s?.className,u?.className),g=n(u,s);return{...s,...u,...g,...!!f&&{className:f},...s?.style&&u?.style&&{style:{...s.style,...u.style}},...s?.sx&&u?.sx&&{sx:[...Array.isArray(s.sx)?s.sx:[s.sx],...Array.isArray(u.sx)?u.sx:[u.sx]]}}};const r=e,i=n(t,r),o=bn(r?.className,t?.className);return{...e,...t,...i,...!!o&&{className:o},...r?.style&&t?.style&&{style:{...r.style,...t.style}},...r?.sx&&t?.sx&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function z_(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function n$(t,e){return n$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},n$(t,e)}function iX(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n$(t,e)}const v7={disabled:!1},QP=se.createContext(null);var Zme=function(e){return e.scrollTop},R2="unmounted",C_="exited",T_="entering",k1="entered",r$="exiting",rd=(function(t){iX(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var a=i,s=a&&!a.isMounting?r.enter:r.appear,u;return o.appearStatus=null,r.in?s?(u=C_,o.appearStatus=T_):u=k1:r.unmountOnExit||r.mountOnEnter?u=R2:u=C_,o.state={status:u},o.nextCallback=null,o}e.getDerivedStateFromProps=function(i,o){var a=i.in;return a&&o.status===R2?{status:C_}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==T_&&a!==k1&&(o=T_):(a===T_||a===k1)&&(o=r$)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,a,s;return o=a=s=i,i!=null&&typeof i!="number"&&(o=i.exit,a=i.enter,s=i.appear!==void 0?i.appear:a),{exit:o,enter:a,appear:s}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===T_){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:A2.findDOMNode(this);a&&Zme(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===C_&&this.setState({status:R2})},n.performEnter=function(i){var o=this,a=this.props.enter,s=this.context?this.context.isMounting:i,u=this.props.nodeRef?[s]:[A2.findDOMNode(this),s],f=u[0],g=u[1],_=this.getTimeouts(),w=s?_.appear:_.enter;if(!i&&!a||v7.disabled){this.safeSetState({status:k1},function(){o.props.onEntered(f)});return}this.props.onEnter(f,g),this.safeSetState({status:T_},function(){o.props.onEntering(f,g),o.onTransitionEnd(w,function(){o.safeSetState({status:k1},function(){o.props.onEntered(f,g)})})})},n.performExit=function(){var i=this,o=this.props.exit,a=this.getTimeouts(),s=this.props.nodeRef?void 0:A2.findDOMNode(this);if(!o||v7.disabled){this.safeSetState({status:C_},function(){i.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:r$},function(){i.props.onExiting(s),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:C_},function(){i.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,a=!0;return this.nextCallback=function(s){a&&(a=!1,o.nextCallback=null,i(s))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var a=this.props.nodeRef?this.props.nodeRef.current:A2.findDOMNode(this),s=i==null&&!this.props.addEndListener;if(!a||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],f=u[0],g=u[1];this.props.addEndListener(f,g)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===R2)return null;var o=this.props,a=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var s=z_(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return se.createElement(QP.Provider,{value:null},typeof a=="function"?a(i,s):se.cloneElement(se.Children.only(a),s))},e})(se.Component);rd.contextType=QP;rd.propTypes={};function u1(){}rd.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:u1,onEntering:u1,onEntered:u1,onExit:u1,onExiting:u1,onExited:u1};rd.UNMOUNTED=R2;rd.EXITED=C_;rd.ENTERING=T_;rd.ENTERED=k1;rd.EXITING=r$;function qme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U6(t,e){var n=function(o){return e&&Q.isValidElement(o)?e(o):o},r=Object.create(null);return t&&Q.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Wme(t,e){t=t||{},e=e||{};function n(g){return g in e?e[g]:t[g]}var r=Object.create(null),i=[];for(var o in t)o in e?i.length&&(r[o]=i,i=[]):i.push(o);var a,s={};for(var u in e){if(r[u])for(a=0;a<r[u].length;a++){var f=r[u][a];s[r[u][a]]=n(f)}s[u]=n(u)}for(a=0;a<i.length;a++)s[i[a]]=n(i[a]);return s}function N_(t,e,n){return n[e]!=null?n[e]:t.props[e]}function Hme(t,e){return U6(t.children,function(n){return Q.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:N_(n,"appear",t),enter:N_(n,"enter",t),exit:N_(n,"exit",t)})})}function Gme(t,e,n){var r=U6(t.children),i=Wme(e,r);return Object.keys(i).forEach(function(o){var a=i[o];if(Q.isValidElement(a)){var s=o in e,u=o in r,f=e[o],g=Q.isValidElement(f)&&!f.props.in;u&&(!s||g)?i[o]=Q.cloneElement(a,{onExited:n.bind(null,a),in:!0,exit:N_(a,"exit",t),enter:N_(a,"enter",t)}):!u&&s&&!g?i[o]=Q.cloneElement(a,{in:!1}):u&&s&&Q.isValidElement(f)&&(i[o]=Q.cloneElement(a,{onExited:n.bind(null,a),in:f.props.in,exit:N_(a,"exit",t),enter:N_(a,"enter",t)}))}}),i}var Xme=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},Yme={component:"div",childFactory:function(e){return e}},Z6=(function(t){iX(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var a=o.handleExited.bind(qme(o));return o.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,o){var a=o.children,s=o.handleExited,u=o.firstRender;return{children:u?Hme(i,s):Gme(i,a,s),firstRender:!1}},n.handleExited=function(i,o){var a=U6(this.props.children);i.key in a||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(s){var u=Co({},s.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,o=i.component,a=i.childFactory,s=z_(i,["component","childFactory"]),u=this.state.contextValue,f=Xme(this.state.children).map(a);return delete s.appear,delete s.enter,delete s.exit,o===null?se.createElement(QP.Provider,{value:u},f):se.createElement(QP.Provider,{value:u},se.createElement(o,s,f))},e})(se.Component);Z6.propTypes={};Z6.defaultProps=Yme;const _7={};function oX(t,e){const n=Q.useRef(_7);return n.current===_7&&(n.current=t(e)),n}const Kme=[];function Jme(t){Q.useEffect(t,Kme)}class HM{static create(){return new HM}currentId=null;start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function B_(){const t=oX(HM.create).current;return Jme(t.disposeEffect),t}const q6=t=>t.scrollTop;function D0(t,e){const{timeout:n,easing:r,style:i={}}=t;return{duration:i.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:i.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:i.transitionDelay}}function vw(t){return typeof t=="string"}function sX(t,e,n){return t===void 0||vw(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function aX(t,e,n){return typeof t=="function"?t(e,n):t}function lX(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function b7(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function cX(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=t;if(!e){const S=bn(n?.className,o,i?.className,r?.className),E={...n?.style,...i?.style,...r?.style},A={...n,...i,...r};return S.length>0&&(A.className=S),Object.keys(E).length>0&&(A.style=E),{props:A,internalRef:void 0}}const a=lX({...i,...r}),s=b7(r),u=b7(i),f=e(a),g=bn(f?.className,n?.className,o,i?.className,r?.className),_={...f?.style,...n?.style,...i?.style,...r?.style},w={...f,...n,...u,...s};return g.length>0&&(w.className=g),Object.keys(_).length>0&&(w.style=_),{props:w,internalRef:f.ref}}function Xn(t,e){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,internalForwardedProps:a,shouldForwardComponentProp:s=!1,...u}=e,{component:f,slots:g={[t]:void 0},slotProps:_={[t]:void 0},...w}=o,S=g[t]||r,E=aX(_[t],i),{props:{component:A,...R},internalRef:$}=cX({className:n,...u,externalForwardedProps:t==="root"?w:void 0,externalSlotProps:E}),z=ts($,E?.ref,e.ref),B=t==="root"?A||f:A,F=sX(S,{...t==="root"&&!f&&!g[t]&&a,...t!=="root"&&!g[t]&&a,...R,...B&&!s&&{as:B},...B&&s&&{component:B},ref:z},i);return[S,F]}function ege(t){return Un("MuiCollapse",t)}Yn("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const tge=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return Zn(r,ege,n)},nge=Yt("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(ar(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),rge=Yt("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),ige=Yt("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),i$=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiCollapse"}),{addEndListener:i,children:o,className:a,collapsedSize:s="0px",component:u,easing:f,in:g,onEnter:_,onEntered:w,onEntering:S,onExit:E,onExited:A,onExiting:R,orientation:$="vertical",slots:z={},slotProps:B={},style:F,timeout:U=YG.standard,TransitionComponent:q=rd,...H}=r,ne={...r,orientation:$,collapsedSize:s},ie=tge(ne),ce=hm(),xe=B_(),re=Q.useRef(null),me=Q.useRef(),Te=typeof s=="number"?`${s}px`:s,ye=$==="horizontal",_e=ye?"width":"height",ke=Q.useRef(null),Ne=ts(n,ke),Qe=Jt=>Mn=>{if(Jt){const vn=ke.current;Mn===void 0?Jt(vn):Jt(vn,Mn)}},Se=()=>re.current?re.current[ye?"clientWidth":"clientHeight"]:0,Me=Qe((Jt,Mn)=>{re.current&&ye&&(re.current.style.position="absolute"),Jt.style[_e]=Te,_&&_(Jt,Mn)}),Xe=Qe((Jt,Mn)=>{const vn=Se();re.current&&ye&&(re.current.style.position="");const{duration:Nn,easing:lr}=D0({style:F,timeout:U,easing:f},{mode:"enter"});if(U==="auto"){const rr=ce.transitions.getAutoHeightDuration(vn);Jt.style.transitionDuration=`${rr}ms`,me.current=rr}else Jt.style.transitionDuration=typeof Nn=="string"?Nn:`${Nn}ms`;Jt.style[_e]=`${vn}px`,Jt.style.transitionTimingFunction=lr,S&&S(Jt,Mn)}),Ee=Qe((Jt,Mn)=>{Jt.style[_e]="auto",w&&w(Jt,Mn)}),ft=Qe(Jt=>{Jt.style[_e]=`${Se()}px`,E&&E(Jt)}),mt=Qe(A),ct=Qe(Jt=>{const Mn=Se(),{duration:vn,easing:Nn}=D0({style:F,timeout:U,easing:f},{mode:"exit"});if(U==="auto"){const lr=ce.transitions.getAutoHeightDuration(Mn);Jt.style.transitionDuration=`${lr}ms`,me.current=lr}else Jt.style.transitionDuration=typeof vn=="string"?vn:`${vn}ms`;Jt.style[_e]=Te,Jt.style.transitionTimingFunction=Nn,R&&R(Jt)}),st=Jt=>{U==="auto"&&xe.start(me.current||0,Jt),i&&i(ke.current,Jt)},bt={slots:z,slotProps:B,component:u},[At,Tt]=Xn("root",{ref:Ne,className:bn(ie.root,a),elementType:nge,externalForwardedProps:bt,ownerState:ne,additionalProps:{style:{[ye?"minWidth":"minHeight"]:Te,...F}}}),[Wt,nn]=Xn("wrapper",{ref:re,className:ie.wrapper,elementType:rge,externalForwardedProps:bt,ownerState:ne}),[An,rn]=Xn("wrapperInner",{className:ie.wrapperInner,elementType:ige,externalForwardedProps:bt,ownerState:ne});return J.jsx(q,{in:g,onEnter:Me,onEntered:Ee,onEntering:Xe,onExit:ft,onExited:mt,onExiting:ct,addEndListener:st,nodeRef:ke,timeout:U==="auto"?null:U,...H,children:(Jt,{ownerState:Mn,...vn})=>{const Nn={...ne,state:Jt};return J.jsx(At,{...Tt,className:bn(Tt.className,{entered:ie.entered,exited:!g&&Te==="0px"&&ie.hidden}[Jt]),ownerState:Nn,...vn,children:J.jsx(Wt,{...nn,ownerState:Nn,children:J.jsx(An,{...rn,ownerState:Nn,children:o})})})}})});i$&&(i$.muiSupportAuto=!0);function oge(t){return Un("MuiPaper",t)}Yn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const sge=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,o={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return Zn(o,oge,i)},age=Yt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(ar(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),hc=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiPaper"}),i=hm(),{className:o,component:a="div",elevation:s=1,square:u=!1,variant:f="elevation",...g}=r,_={...r,component:a,elevation:s,square:u,variant:f},w=sge(_);return J.jsx(age,{as:a,ownerState:_,className:bn(w.root,o),ref:n,...g,style:{...f==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[s],...i.vars&&{"--Paper-overlay":i.vars.overlays?.[s]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${PC("#fff",e$(s))}, ${PC("#fff",e$(s))})`}},...g.style}})});function _w(t){try{return t.matches(":focus-visible")}catch{}return!1}class UP{static create(){return new UP}static use(){const e=oX(UP.create).current,[n,r]=Q.useState(!1);return e.shouldMount=n,e.setShouldMount=r,Q.useEffect(e.mountEffect,[n]),e}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=cge(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...e){this.mount().then(()=>this.ref.current?.start(...e))}stop(...e){this.mount().then(()=>this.ref.current?.stop(...e))}pulsate(...e){this.mount().then(()=>this.ref.current?.pulsate(...e))}}function lge(){return UP.use()}function cge(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n}function uge(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:a,in:s,onExited:u,timeout:f}=t,[g,_]=Q.useState(!1),w=bn(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),S={width:a,height:a,top:-(a/2)+o,left:-(a/2)+i},E=bn(n.child,g&&n.childLeaving,r&&n.childPulsate);return!s&&!g&&_(!0),Q.useEffect(()=>{if(!s&&u!=null){const A=setTimeout(u,f);return()=>{clearTimeout(A)}}},[u,s,f]),J.jsx("span",{className:w,style:S,children:J.jsx("span",{className:E})})}const Dh=Yn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),o$=550,hge=80,dge=FT`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,fge=FT`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,pge=FT`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,mge=Yt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),gge=Yt(uge,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Dh.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${dge};
    animation-duration: ${o$}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${Dh.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${Dh.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Dh.childLeaving} {
    opacity: 0;
    animation-name: ${fge};
    animation-duration: ${o$}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${Dh.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${pge};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,yge=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:a,...s}=r,[u,f]=Q.useState([]),g=Q.useRef(0),_=Q.useRef(null);Q.useEffect(()=>{_.current&&(_.current(),_.current=null)},[u]);const w=Q.useRef(!1),S=B_(),E=Q.useRef(null),A=Q.useRef(null),R=Q.useCallback(F=>{const{pulsate:U,rippleX:q,rippleY:H,rippleSize:ne,cb:ie}=F;f(ce=>[...ce,J.jsx(gge,{classes:{ripple:bn(o.ripple,Dh.ripple),rippleVisible:bn(o.rippleVisible,Dh.rippleVisible),ripplePulsate:bn(o.ripplePulsate,Dh.ripplePulsate),child:bn(o.child,Dh.child),childLeaving:bn(o.childLeaving,Dh.childLeaving),childPulsate:bn(o.childPulsate,Dh.childPulsate)},timeout:o$,pulsate:U,rippleX:q,rippleY:H,rippleSize:ne},g.current)]),g.current+=1,_.current=ie},[o]),$=Q.useCallback((F={},U={},q=()=>{})=>{const{pulsate:H=!1,center:ne=i||U.pulsate,fakeElement:ie=!1}=U;if(F?.type==="mousedown"&&w.current){w.current=!1;return}F?.type==="touchstart"&&(w.current=!0);const ce=ie?null:A.current,xe=ce?ce.getBoundingClientRect():{width:0,height:0,left:0,top:0};let re,me,Te;if(ne||F===void 0||F.clientX===0&&F.clientY===0||!F.clientX&&!F.touches)re=Math.round(xe.width/2),me=Math.round(xe.height/2);else{const{clientX:ye,clientY:_e}=F.touches&&F.touches.length>0?F.touches[0]:F;re=Math.round(ye-xe.left),me=Math.round(_e-xe.top)}if(ne)Te=Math.sqrt((2*xe.width**2+xe.height**2)/3),Te%2===0&&(Te+=1);else{const ye=Math.max(Math.abs((ce?ce.clientWidth:0)-re),re)*2+2,_e=Math.max(Math.abs((ce?ce.clientHeight:0)-me),me)*2+2;Te=Math.sqrt(ye**2+_e**2)}F?.touches?E.current===null&&(E.current=()=>{R({pulsate:H,rippleX:re,rippleY:me,rippleSize:Te,cb:q})},S.start(hge,()=>{E.current&&(E.current(),E.current=null)})):R({pulsate:H,rippleX:re,rippleY:me,rippleSize:Te,cb:q})},[i,R,S]),z=Q.useCallback(()=>{$({},{pulsate:!0})},[$]),B=Q.useCallback((F,U)=>{if(S.clear(),F?.type==="touchend"&&E.current){E.current(),E.current=null,S.start(0,()=>{B(F,U)});return}E.current=null,f(q=>q.length>0?q.slice(1):q),_.current=U},[S]);return Q.useImperativeHandle(n,()=>({pulsate:z,start:$,stop:B}),[z,$,B]),J.jsx(mge,{className:bn(Dh.root,o.root,a),ref:A,...s,children:J.jsx(Z6,{component:null,exit:!0,children:u})})});function vge(t){return Un("MuiButtonBase",t)}const _ge=Yn("MuiButtonBase",["root","disabled","focusVisible"]),bge=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,a=Zn({root:["root",e&&"disabled",n&&"focusVisible"]},vge,i);return n&&r&&(a.root+=` ${r}`),a},xge=Yt("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${_ge.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),rb=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:a,className:s,component:u="button",disabled:f=!1,disableRipple:g=!1,disableTouchRipple:_=!1,focusRipple:w=!1,focusVisibleClassName:S,LinkComponent:E="a",onBlur:A,onClick:R,onContextMenu:$,onDragLeave:z,onFocus:B,onFocusVisible:F,onKeyDown:U,onKeyUp:q,onMouseDown:H,onMouseLeave:ne,onMouseUp:ie,onTouchEnd:ce,onTouchMove:xe,onTouchStart:re,tabIndex:me=0,TouchRippleProps:Te,touchRippleRef:ye,type:_e,...ke}=r,Ne=Q.useRef(null),Qe=lge(),Se=ts(Qe.ref,ye),[Me,Xe]=Q.useState(!1);f&&Me&&Xe(!1),Q.useImperativeHandle(i,()=>({focusVisible:()=>{Xe(!0),Ne.current.focus()}}),[]);const Ee=Qe.shouldMount&&!g&&!f;Q.useEffect(()=>{Me&&w&&!g&&Qe.pulsate()},[g,w,Me,Qe]);const ft=mg(Qe,"start",H,_),mt=mg(Qe,"stop",$,_),ct=mg(Qe,"stop",z,_),st=mg(Qe,"stop",ie,_),bt=mg(Qe,"stop",Je=>{Me&&Je.preventDefault(),ne&&ne(Je)},_),At=mg(Qe,"start",re,_),Tt=mg(Qe,"stop",ce,_),Wt=mg(Qe,"stop",xe,_),nn=mg(Qe,"stop",Je=>{_w(Je.target)||Xe(!1),A&&A(Je)},!1),An=zg(Je=>{Ne.current||(Ne.current=Je.currentTarget),_w(Je.target)&&(Xe(!0),F&&F(Je)),B&&B(Je)}),rn=()=>{const Je=Ne.current;return u&&u!=="button"&&!(Je.tagName==="A"&&Je.href)},Jt=zg(Je=>{w&&!Je.repeat&&Me&&Je.key===" "&&Qe.stop(Je,()=>{Qe.start(Je)}),Je.target===Je.currentTarget&&rn()&&Je.key===" "&&Je.preventDefault(),U&&U(Je),Je.target===Je.currentTarget&&rn()&&Je.key==="Enter"&&!f&&(Je.preventDefault(),R&&R(Je))}),Mn=zg(Je=>{w&&Je.key===" "&&Me&&!Je.defaultPrevented&&Qe.stop(Je,()=>{Qe.pulsate(Je)}),q&&q(Je),R&&Je.target===Je.currentTarget&&rn()&&Je.key===" "&&!Je.defaultPrevented&&R(Je)});let vn=u;vn==="button"&&(ke.href||ke.to)&&(vn=E);const Nn={};if(vn==="button"){const Je=!!ke.formAction;Nn.type=_e===void 0&&!Je?"button":_e,Nn.disabled=f}else!ke.href&&!ke.to&&(Nn.role="button"),f&&(Nn["aria-disabled"]=f);const lr=ts(n,Ne),rr={...r,centerRipple:o,component:u,disabled:f,disableRipple:g,disableTouchRipple:_,focusRipple:w,tabIndex:me,focusVisible:Me},Ue=bge(rr);return J.jsxs(xge,{as:vn,className:bn(Ue.root,s),ownerState:rr,onBlur:nn,onClick:R,onContextMenu:mt,onFocus:An,onKeyDown:Jt,onKeyUp:Mn,onMouseDown:ft,onMouseLeave:bt,onMouseUp:st,onDragLeave:ct,onTouchEnd:Tt,onTouchMove:Wt,onTouchStart:At,ref:lr,tabIndex:f?-1:me,type:_e,...Nn,...ke,children:[a,Ee?J.jsx(yge,{ref:Se,center:o,...Te}):null]})});function mg(t,e,n,r=!1){return zg(i=>(n&&n(i),r||t[e](i),!0))}function wge(t){return typeof t.main=="string"}function Oge(t,e=[]){if(!wge(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function Hs(t=[]){return([,e])=>e&&Oge(e,t)}function Sge(t){return Un("MuiAlert",t)}const x7=Yn("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function Cge(t){return Un("MuiCircularProgress",t)}Yn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Kd=44,s$=FT`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,a$=FT`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Tge=typeof s$!="string"?I6`
        animation: ${s$} 1.4s linear infinite;
      `:null,kge=typeof a$!="string"?I6`
        animation: ${a$} 1.4s ease-in-out infinite;
      `:null,Ege=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,o={root:["root",n,`color${Zt(r)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Zt(n)}`,i&&"circleDisableShrink"]};return Zn(o,Cge,e)},Age=Yt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${Zt(n.color)}`]]}})(ar(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Tge||{animation:`${s$} 1.4s linear infinite`}},...Object.entries(t.palette).filter(Hs()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),Pge=Yt("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Mge=Yt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${Zt(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(ar(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:kge||{animation:`${a$} 1.4s ease-in-out infinite`}}]}))),Rge=Yt("circle",{name:"MuiCircularProgress",slot:"Track"})(ar(({theme:t})=>({stroke:"currentColor",opacity:(t.vars||t).palette.action.activatedOpacity}))),Ku=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:a=!1,enableTrackSlot:s=!1,size:u=40,style:f,thickness:g=3.6,value:_=0,variant:w="indeterminate",...S}=r,E={...r,color:o,disableShrink:a,size:u,thickness:g,value:_,variant:w,enableTrackSlot:s},A=Ege(E),R={},$={},z={};if(w==="determinate"){const B=2*Math.PI*((Kd-g)/2);R.strokeDasharray=B.toFixed(3),z["aria-valuenow"]=Math.round(_),R.strokeDashoffset=`${((100-_)/100*B).toFixed(3)}px`,$.transform="rotate(-90deg)"}return J.jsx(Age,{className:bn(A.root,i),style:{width:u,height:u,...$,...f},ownerState:E,ref:n,role:"progressbar",...z,...S,children:J.jsxs(Pge,{className:A.svg,ownerState:E,viewBox:`${Kd/2} ${Kd/2} ${Kd} ${Kd}`,children:[s?J.jsx(Rge,{className:A.track,ownerState:E,cx:Kd,cy:Kd,r:(Kd-g)/2,fill:"none",strokeWidth:g,"aria-hidden":"true"}):null,J.jsx(Mge,{className:A.circle,style:R,ownerState:E,cx:Kd,cy:Kd,r:(Kd-g)/2,fill:"none",strokeWidth:g})]})})});function Ige(t){return Un("MuiIconButton",t)}const w7=Yn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Dge=t=>{const{classes:e,disabled:n,color:r,edge:i,size:o,loading:a}=t,s={root:["root",a&&"loading",n&&"disabled",r!=="default"&&`color${Zt(r)}`,i&&`edge${Zt(i)}`,`size${Zt(o)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Zn(s,Ige,e)},Lge=Yt(rb,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.loading&&e.loading,n.color!=="default"&&e[`color${Zt(n.color)}`],n.edge&&e[`edge${Zt(n.edge)}`],e[`size${Zt(n.size)}`]]}})(ar(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),ar(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(Hs()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette).filter(Hs()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${w7.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${w7.loading}`]:{color:"transparent"}}))),$ge=Yt("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),oP=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiIconButton"}),{edge:i=!1,children:o,className:a,color:s="default",disabled:u=!1,disableFocusRipple:f=!1,size:g="medium",id:_,loading:w=null,loadingIndicator:S,...E}=r,A=fO(_),R=S??J.jsx(Ku,{"aria-labelledby":A,color:"inherit",size:16}),$={...r,edge:i,color:s,disabled:u,disableFocusRipple:f,loading:w,loadingIndicator:R,size:g},z=Dge($);return J.jsxs(Lge,{id:w?A:_,className:bn(z.root,a),centerRipple:!0,focusRipple:!f,disabled:u||w,ref:n,...E,ownerState:$,children:[typeof w=="boolean"&&J.jsx("span",{className:z.loadingWrapper,style:{display:"contents"},children:J.jsx($ge,{className:z.loadingIndicator,ownerState:$,children:w&&R})}),o]})}),zge=No(J.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),Nge=No(J.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),Bge=No(J.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Fge=No(J.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),jge=No(J.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Vge=t=>{const{variant:e,color:n,severity:r,classes:i}=t,o={root:["root",`color${Zt(n||r)}`,`${e}${Zt(n||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return Zn(o,Sge,i)},Qge=Yt(hc,{name:"MuiAlert",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Zt(n.color||n.severity)}`]]}})(ar(({theme:t})=>{const e=t.palette.mode==="light"?t.darken:t.lighten,n=t.palette.mode==="light"?t.lighten:t.darken;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(Hs(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${r}StandardBg`]:n(t.palette[r].light,.9),[`& .${x7.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(Hs(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${x7.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(Hs(["dark"])).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert[`${r}FilledColor`],backgroundColor:t.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[r].dark:t.palette[r].main,color:t.palette.getContrastText(t.palette[r].main)}}}))]}})),Uge=Yt("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Zge=Yt("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),qge=Yt("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),O7={success:J.jsx(zge,{fontSize:"inherit"}),warning:J.jsx(Nge,{fontSize:"inherit"}),error:J.jsx(Bge,{fontSize:"inherit"}),info:J.jsx(Fge,{fontSize:"inherit"})},Z_=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiAlert"}),{action:i,children:o,className:a,closeText:s="Close",color:u,components:f={},componentsProps:g={},icon:_,iconMapping:w=O7,onClose:S,role:E="alert",severity:A="success",slotProps:R={},slots:$={},variant:z="standard",...B}=r,F={...r,color:u,severity:A,variant:z,colorSeverity:u||A},U=Vge(F),q={slots:{closeButton:f.CloseButton,closeIcon:f.CloseIcon,...$},slotProps:{...g,...R}},[H,ne]=Xn("root",{ref:n,shouldForwardComponentProp:!0,className:bn(U.root,a),elementType:Qge,externalForwardedProps:{...q,...B},ownerState:F,additionalProps:{role:E,elevation:0}}),[ie,ce]=Xn("icon",{className:U.icon,elementType:Uge,externalForwardedProps:q,ownerState:F}),[xe,re]=Xn("message",{className:U.message,elementType:Zge,externalForwardedProps:q,ownerState:F}),[me,Te]=Xn("action",{className:U.action,elementType:qge,externalForwardedProps:q,ownerState:F}),[ye,_e]=Xn("closeButton",{elementType:oP,externalForwardedProps:q,ownerState:F}),[ke,Ne]=Xn("closeIcon",{elementType:jge,externalForwardedProps:q,ownerState:F});return J.jsxs(H,{...ne,children:[_!==!1?J.jsx(ie,{...ce,children:_||w[A]||O7[A]}):null,J.jsx(xe,{...re,children:o}),i!=null?J.jsx(me,{...Te,children:i}):null,i==null&&S?J.jsx(me,{...Te,children:J.jsx(ye,{size:"small","aria-label":s,title:s,color:"inherit",onClick:S,..._e,children:J.jsx(ke,{fontSize:"small",...Ne})})}):null]})});function Wge(t){return Un("MuiTypography",t)}const S7=Yn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Hge={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Gge=Fme(),Xge=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:a}=t,s={root:["root",o,t.align!=="inherit"&&`align${Zt(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Zn(s,Wge,a)},Yge=Yt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Zt(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(ar(({theme:t})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([e,n])=>e!=="inherit"&&n&&typeof n=="object").map(([e,n])=>({props:{variant:e},style:n})),...Object.entries(t.palette).filter(Hs()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette?.text||{}).filter(([,e])=>typeof e=="string").map(([e])=>({props:{color:`text${Zt(e)}`},style:{color:(t.vars||t).palette.text[e]}})),{props:({ownerState:e})=>e.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:e})=>e.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:e})=>e.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:e})=>e.paragraph,style:{marginBottom:16}}]}))),C7={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},br=Q.forwardRef(function(e,n){const{color:r,...i}=Hn({props:e,name:"MuiTypography"}),o=!Hge[r],a=Gge({...i,...o&&{color:r}}),{align:s="inherit",className:u,component:f,gutterBottom:g=!1,noWrap:_=!1,paragraph:w=!1,variant:S="body1",variantMapping:E=C7,...A}=a,R={...a,align:s,color:r,className:u,component:f,gutterBottom:g,noWrap:_,paragraph:w,variant:S,variantMapping:E},$=f||(w?"p":E[S]||C7[S])||"span",z=Xge(R);return J.jsx(Yge,{as:$,ref:n,className:bn(z.root,u),...A,ownerState:R,style:{...s!=="inherit"&&{"--Typography-textAlign":s},...A.style}})});function Kge(t){return Un("MuiAppBar",t)}Yn("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Jge=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${Zt(e)}`,`position${Zt(n)}`]};return Zn(i,Kge,r)},T7=(t,e)=>t?`${t?.replace(")","")}, ${e})`:e,eye=Yt(hc,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${Zt(n.position)}`],e[`color${Zt(n.color)}`]]}})(ar(({theme:t})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100]),...t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])})}},...Object.entries(t.palette).filter(Hs(["contrastText"])).map(([e])=>({props:{color:e},style:{"--AppBar-background":(t.vars??t).palette[e].main,"--AppBar-color":(t.vars??t).palette[e].contrastText}})),{props:e=>e.enableColorOnDark===!0&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>e.enableColorOnDark===!1&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundColor:t.vars?T7(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?T7(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundImage:"none"})}}]}))),tye=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:a=!1,position:s="fixed",...u}=r,f={...r,color:o,position:s,enableColorOnDark:a},g=Jge(f);return J.jsx(eye,{square:!0,component:"header",ownerState:f,elevation:4,className:bn(g.root,i,s==="fixed"&&"mui-fixed"),ref:n,...u})});function uX(t){const e=Q.useRef({});return Q.useEffect(()=>{e.current=t}),e.current}var eu="top",Xh="bottom",Yh="right",tu="left",W6="auto",UT=[eu,Xh,Yh,tu],bw="start",MC="end",nye="clippingParents",hX="viewport",r2="popper",rye="reference",k7=UT.reduce(function(t,e){return t.concat([e+"-"+bw,e+"-"+MC])},[]),dX=[].concat(UT,[W6]).reduce(function(t,e){return t.concat([e,e+"-"+bw,e+"-"+MC])},[]),iye="beforeRead",oye="read",sye="afterRead",aye="beforeMain",lye="main",cye="afterMain",uye="beforeWrite",hye="write",dye="afterWrite",fye=[iye,oye,sye,aye,lye,cye,uye,hye,dye];function nm(t){return t?(t.nodeName||"").toLowerCase():null}function Ju(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ib(t){var e=Ju(t).Element;return t instanceof e||t instanceof Element}function Zh(t){var e=Ju(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function H6(t){if(typeof ShadowRoot>"u")return!1;var e=Ju(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function pye(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!Zh(o)||!nm(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(a){var s=i[a];s===!1?o.removeAttribute(a):o.setAttribute(a,s===!0?"":s)}))})}function mye(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),s=a.reduce(function(u,f){return u[f]="",u},{});!Zh(i)||!nm(i)||(Object.assign(i.style,s),Object.keys(o).forEach(function(u){i.removeAttribute(u)}))})}}const gye={name:"applyStyles",enabled:!0,phase:"write",fn:pye,effect:mye,requires:["computeStyles"]};function Hp(t){return t.split("-")[0]}var q_=Math.max,ZP=Math.min,xw=Math.round;function l$(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function fX(){return!/^((?!chrome|android).)*safari/i.test(l$())}function ww(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&Zh(t)&&(i=t.offsetWidth>0&&xw(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&xw(r.height)/t.offsetHeight||1);var a=ib(t)?Ju(t):window,s=a.visualViewport,u=!fX()&&n,f=(r.left+(u&&s?s.offsetLeft:0))/i,g=(r.top+(u&&s?s.offsetTop:0))/o,_=r.width/i,w=r.height/o;return{width:_,height:w,top:g,right:f+_,bottom:g+w,left:f,x:f,y:g}}function G6(t){var e=ww(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function pX(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&H6(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Qg(t){return Ju(t).getComputedStyle(t)}function yye(t){return["table","td","th"].indexOf(nm(t))>=0}function H0(t){return((ib(t)?t.ownerDocument:t.document)||window.document).documentElement}function GM(t){return nm(t)==="html"?t:t.assignedSlot||t.parentNode||(H6(t)?t.host:null)||H0(t)}function E7(t){return!Zh(t)||Qg(t).position==="fixed"?null:t.offsetParent}function vye(t){var e=/firefox/i.test(l$()),n=/Trident/i.test(l$());if(n&&Zh(t)){var r=Qg(t);if(r.position==="fixed")return null}var i=GM(t);for(H6(i)&&(i=i.host);Zh(i)&&["html","body"].indexOf(nm(i))<0;){var o=Qg(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function ZT(t){for(var e=Ju(t),n=E7(t);n&&yye(n)&&Qg(n).position==="static";)n=E7(n);return n&&(nm(n)==="html"||nm(n)==="body"&&Qg(n).position==="static")?e:n||vye(t)||e}function X6(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function K2(t,e,n){return q_(t,ZP(e,n))}function _ye(t,e,n){var r=K2(t,e,n);return r>n?n:r}function mX(){return{top:0,right:0,bottom:0,left:0}}function gX(t){return Object.assign({},mX(),t)}function yX(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var bye=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,gX(typeof e!="number"?e:yX(e,UT))};function xye(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=Hp(n.placement),u=X6(s),f=[tu,Yh].indexOf(s)>=0,g=f?"height":"width";if(!(!o||!a)){var _=bye(i.padding,n),w=G6(o),S=u==="y"?eu:tu,E=u==="y"?Xh:Yh,A=n.rects.reference[g]+n.rects.reference[u]-a[u]-n.rects.popper[g],R=a[u]-n.rects.reference[u],$=ZT(o),z=$?u==="y"?$.clientHeight||0:$.clientWidth||0:0,B=A/2-R/2,F=_[S],U=z-w[g]-_[E],q=z/2-w[g]/2+B,H=K2(F,q,U),ne=u;n.modifiersData[r]=(e={},e[ne]=H,e.centerOffset=H-q,e)}}function wye(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||pX(e.elements.popper,i)&&(e.elements.arrow=i))}const Oye={name:"arrow",enabled:!0,phase:"main",fn:xye,effect:wye,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ow(t){return t.split("-")[1]}var Sye={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Cye(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:xw(n*i)/i||0,y:xw(r*i)/i||0}}function A7(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,a=t.offsets,s=t.position,u=t.gpuAcceleration,f=t.adaptive,g=t.roundOffsets,_=t.isFixed,w=a.x,S=w===void 0?0:w,E=a.y,A=E===void 0?0:E,R=typeof g=="function"?g({x:S,y:A}):{x:S,y:A};S=R.x,A=R.y;var $=a.hasOwnProperty("x"),z=a.hasOwnProperty("y"),B=tu,F=eu,U=window;if(f){var q=ZT(n),H="clientHeight",ne="clientWidth";if(q===Ju(n)&&(q=H0(n),Qg(q).position!=="static"&&s==="absolute"&&(H="scrollHeight",ne="scrollWidth")),q=q,i===eu||(i===tu||i===Yh)&&o===MC){F=Xh;var ie=_&&q===U&&U.visualViewport?U.visualViewport.height:q[H];A-=ie-r.height,A*=u?1:-1}if(i===tu||(i===eu||i===Xh)&&o===MC){B=Yh;var ce=_&&q===U&&U.visualViewport?U.visualViewport.width:q[ne];S-=ce-r.width,S*=u?1:-1}}var xe=Object.assign({position:s},f&&Sye),re=g===!0?Cye({x:S,y:A},Ju(n)):{x:S,y:A};if(S=re.x,A=re.y,u){var me;return Object.assign({},xe,(me={},me[F]=z?"0":"",me[B]=$?"0":"",me.transform=(U.devicePixelRatio||1)<=1?"translate("+S+"px, "+A+"px)":"translate3d("+S+"px, "+A+"px, 0)",me))}return Object.assign({},xe,(e={},e[F]=z?A+"px":"",e[B]=$?S+"px":"",e.transform="",e))}function Tye(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,a=o===void 0?!0:o,s=n.roundOffsets,u=s===void 0?!0:s,f={placement:Hp(e.placement),variation:Ow(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,A7(Object.assign({},f,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,A7(Object.assign({},f,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const kye={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Tye,data:{}};var NE={passive:!0};function Eye(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,a=r.resize,s=a===void 0?!0:a,u=Ju(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&f.forEach(function(g){g.addEventListener("scroll",n.update,NE)}),s&&u.addEventListener("resize",n.update,NE),function(){o&&f.forEach(function(g){g.removeEventListener("scroll",n.update,NE)}),s&&u.removeEventListener("resize",n.update,NE)}}const Aye={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Eye,data:{}};var Pye={left:"right",right:"left",bottom:"top",top:"bottom"};function sP(t){return t.replace(/left|right|bottom|top/g,function(e){return Pye[e]})}var Mye={start:"end",end:"start"};function P7(t){return t.replace(/start|end/g,function(e){return Mye[e]})}function Y6(t){var e=Ju(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function K6(t){return ww(H0(t)).left+Y6(t).scrollLeft}function Rye(t,e){var n=Ju(t),r=H0(t),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,u=0;if(i){o=i.width,a=i.height;var f=fX();(f||!f&&e==="fixed")&&(s=i.offsetLeft,u=i.offsetTop)}return{width:o,height:a,x:s+K6(t),y:u}}function Iye(t){var e,n=H0(t),r=Y6(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=q_(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=q_(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+K6(t),u=-r.scrollTop;return Qg(i||n).direction==="rtl"&&(s+=q_(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:u}}function J6(t){var e=Qg(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function vX(t){return["html","body","#document"].indexOf(nm(t))>=0?t.ownerDocument.body:Zh(t)&&J6(t)?t:vX(GM(t))}function J2(t,e){var n;e===void 0&&(e=[]);var r=vX(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=Ju(r),a=i?[o].concat(o.visualViewport||[],J6(r)?r:[]):r,s=e.concat(a);return i?s:s.concat(J2(GM(a)))}function c$(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Dye(t,e){var n=ww(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function M7(t,e,n){return e===hX?c$(Rye(t,n)):ib(e)?Dye(e,n):c$(Iye(H0(t)))}function Lye(t){var e=J2(GM(t)),n=["absolute","fixed"].indexOf(Qg(t).position)>=0,r=n&&Zh(t)?ZT(t):t;return ib(r)?e.filter(function(i){return ib(i)&&pX(i,r)&&nm(i)!=="body"}):[]}function $ye(t,e,n,r){var i=e==="clippingParents"?Lye(t):[].concat(e),o=[].concat(i,[n]),a=o[0],s=o.reduce(function(u,f){var g=M7(t,f,r);return u.top=q_(g.top,u.top),u.right=ZP(g.right,u.right),u.bottom=ZP(g.bottom,u.bottom),u.left=q_(g.left,u.left),u},M7(t,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function _X(t){var e=t.reference,n=t.element,r=t.placement,i=r?Hp(r):null,o=r?Ow(r):null,a=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,u;switch(i){case eu:u={x:a,y:e.y-n.height};break;case Xh:u={x:a,y:e.y+e.height};break;case Yh:u={x:e.x+e.width,y:s};break;case tu:u={x:e.x-n.width,y:s};break;default:u={x:e.x,y:e.y}}var f=i?X6(i):null;if(f!=null){var g=f==="y"?"height":"width";switch(o){case bw:u[f]=u[f]-(e[g]/2-n[g]/2);break;case MC:u[f]=u[f]+(e[g]/2-n[g]/2);break}}return u}function RC(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,a=o===void 0?t.strategy:o,s=n.boundary,u=s===void 0?nye:s,f=n.rootBoundary,g=f===void 0?hX:f,_=n.elementContext,w=_===void 0?r2:_,S=n.altBoundary,E=S===void 0?!1:S,A=n.padding,R=A===void 0?0:A,$=gX(typeof R!="number"?R:yX(R,UT)),z=w===r2?rye:r2,B=t.rects.popper,F=t.elements[E?z:w],U=$ye(ib(F)?F:F.contextElement||H0(t.elements.popper),u,g,a),q=ww(t.elements.reference),H=_X({reference:q,element:B,placement:i}),ne=c$(Object.assign({},B,H)),ie=w===r2?ne:q,ce={top:U.top-ie.top+$.top,bottom:ie.bottom-U.bottom+$.bottom,left:U.left-ie.left+$.left,right:ie.right-U.right+$.right},xe=t.modifiersData.offset;if(w===r2&&xe){var re=xe[i];Object.keys(ce).forEach(function(me){var Te=[Yh,Xh].indexOf(me)>=0?1:-1,ye=[eu,Xh].indexOf(me)>=0?"y":"x";ce[me]+=re[ye]*Te})}return ce}function zye(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,f=u===void 0?dX:u,g=Ow(r),_=g?s?k7:k7.filter(function(E){return Ow(E)===g}):UT,w=_.filter(function(E){return f.indexOf(E)>=0});w.length===0&&(w=_);var S=w.reduce(function(E,A){return E[A]=RC(t,{placement:A,boundary:i,rootBoundary:o,padding:a})[Hp(A)],E},{});return Object.keys(S).sort(function(E,A){return S[E]-S[A]})}function Nye(t){if(Hp(t)===W6)return[];var e=sP(t);return[P7(t),e,P7(e)]}function Bye(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!0:a,u=n.fallbackPlacements,f=n.padding,g=n.boundary,_=n.rootBoundary,w=n.altBoundary,S=n.flipVariations,E=S===void 0?!0:S,A=n.allowedAutoPlacements,R=e.options.placement,$=Hp(R),z=$===R,B=u||(z||!E?[sP(R)]:Nye(R)),F=[R].concat(B).reduce(function(ft,mt){return ft.concat(Hp(mt)===W6?zye(e,{placement:mt,boundary:g,rootBoundary:_,padding:f,flipVariations:E,allowedAutoPlacements:A}):mt)},[]),U=e.rects.reference,q=e.rects.popper,H=new Map,ne=!0,ie=F[0],ce=0;ce<F.length;ce++){var xe=F[ce],re=Hp(xe),me=Ow(xe)===bw,Te=[eu,Xh].indexOf(re)>=0,ye=Te?"width":"height",_e=RC(e,{placement:xe,boundary:g,rootBoundary:_,altBoundary:w,padding:f}),ke=Te?me?Yh:tu:me?Xh:eu;U[ye]>q[ye]&&(ke=sP(ke));var Ne=sP(ke),Qe=[];if(o&&Qe.push(_e[re]<=0),s&&Qe.push(_e[ke]<=0,_e[Ne]<=0),Qe.every(function(ft){return ft})){ie=xe,ne=!1;break}H.set(xe,Qe)}if(ne)for(var Se=E?3:1,Me=function(mt){var ct=F.find(function(st){var bt=H.get(st);if(bt)return bt.slice(0,mt).every(function(At){return At})});if(ct)return ie=ct,"break"},Xe=Se;Xe>0;Xe--){var Ee=Me(Xe);if(Ee==="break")break}e.placement!==ie&&(e.modifiersData[r]._skip=!0,e.placement=ie,e.reset=!0)}}const Fye={name:"flip",enabled:!0,phase:"main",fn:Bye,requiresIfExists:["offset"],data:{_skip:!1}};function R7(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function I7(t){return[eu,Yh,Xh,tu].some(function(e){return t[e]>=0})}function jye(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,a=RC(e,{elementContext:"reference"}),s=RC(e,{altBoundary:!0}),u=R7(a,r),f=R7(s,i,o),g=I7(u),_=I7(f);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:f,isReferenceHidden:g,hasPopperEscaped:_},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":_})}const Vye={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:jye};function Qye(t,e,n){var r=Hp(t),i=[tu,eu].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[tu,Yh].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function Uye(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,a=dX.reduce(function(g,_){return g[_]=Qye(_,e.rects,o),g},{}),s=a[e.placement],u=s.x,f=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=f),e.modifiersData[r]=a}const Zye={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Uye};function qye(t){var e=t.state,n=t.name;e.modifiersData[n]=_X({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Wye={name:"popperOffsets",enabled:!0,phase:"read",fn:qye,data:{}};function Hye(t){return t==="x"?"y":"x"}function Gye(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!1:a,u=n.boundary,f=n.rootBoundary,g=n.altBoundary,_=n.padding,w=n.tether,S=w===void 0?!0:w,E=n.tetherOffset,A=E===void 0?0:E,R=RC(e,{boundary:u,rootBoundary:f,padding:_,altBoundary:g}),$=Hp(e.placement),z=Ow(e.placement),B=!z,F=X6($),U=Hye(F),q=e.modifiersData.popperOffsets,H=e.rects.reference,ne=e.rects.popper,ie=typeof A=="function"?A(Object.assign({},e.rects,{placement:e.placement})):A,ce=typeof ie=="number"?{mainAxis:ie,altAxis:ie}:Object.assign({mainAxis:0,altAxis:0},ie),xe=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,re={x:0,y:0};if(q){if(o){var me,Te=F==="y"?eu:tu,ye=F==="y"?Xh:Yh,_e=F==="y"?"height":"width",ke=q[F],Ne=ke+R[Te],Qe=ke-R[ye],Se=S?-ne[_e]/2:0,Me=z===bw?H[_e]:ne[_e],Xe=z===bw?-ne[_e]:-H[_e],Ee=e.elements.arrow,ft=S&&Ee?G6(Ee):{width:0,height:0},mt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:mX(),ct=mt[Te],st=mt[ye],bt=K2(0,H[_e],ft[_e]),At=B?H[_e]/2-Se-bt-ct-ce.mainAxis:Me-bt-ct-ce.mainAxis,Tt=B?-H[_e]/2+Se+bt+st+ce.mainAxis:Xe+bt+st+ce.mainAxis,Wt=e.elements.arrow&&ZT(e.elements.arrow),nn=Wt?F==="y"?Wt.clientTop||0:Wt.clientLeft||0:0,An=(me=xe?.[F])!=null?me:0,rn=ke+At-An-nn,Jt=ke+Tt-An,Mn=K2(S?ZP(Ne,rn):Ne,ke,S?q_(Qe,Jt):Qe);q[F]=Mn,re[F]=Mn-ke}if(s){var vn,Nn=F==="x"?eu:tu,lr=F==="x"?Xh:Yh,rr=q[U],Ue=U==="y"?"height":"width",Je=rr+R[Nn],xt=rr-R[lr],Et=[eu,tu].indexOf($)!==-1,Vt=(vn=xe?.[U])!=null?vn:0,we=Et?Je:rr-H[Ue]-ne[Ue]-Vt+ce.altAxis,ae=Et?rr+H[Ue]+ne[Ue]-Vt-ce.altAxis:xt,Y=S&&Et?_ye(we,rr,ae):K2(S?we:Je,rr,S?ae:xt);q[U]=Y,re[U]=Y-rr}e.modifiersData[r]=re}}const Xye={name:"preventOverflow",enabled:!0,phase:"main",fn:Gye,requiresIfExists:["offset"]};function Yye(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Kye(t){return t===Ju(t)||!Zh(t)?Y6(t):Yye(t)}function Jye(t){var e=t.getBoundingClientRect(),n=xw(e.width)/t.offsetWidth||1,r=xw(e.height)/t.offsetHeight||1;return n!==1||r!==1}function e0e(t,e,n){n===void 0&&(n=!1);var r=Zh(e),i=Zh(e)&&Jye(e),o=H0(e),a=ww(t,i,n),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((nm(e)!=="body"||J6(o))&&(s=Kye(e)),Zh(e)?(u=ww(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):o&&(u.x=K6(o))),{x:a.left+s.scrollLeft-u.x,y:a.top+s.scrollTop-u.y,width:a.width,height:a.height}}function t0e(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var u=e.get(s);u&&i(u)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function n0e(t){var e=t0e(t);return fye.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function r0e(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function i0e(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var D7={placement:"bottom",modifiers:[],strategy:"absolute"};function L7(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function o0e(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?D7:i;return function(s,u,f){f===void 0&&(f=o);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},D7,o),modifiersData:{},elements:{reference:s,popper:u},attributes:{},styles:{}},_=[],w=!1,S={state:g,setOptions:function($){var z=typeof $=="function"?$(g.options):$;A(),g.options=Object.assign({},o,g.options,z),g.scrollParents={reference:ib(s)?J2(s):s.contextElement?J2(s.contextElement):[],popper:J2(u)};var B=n0e(i0e([].concat(r,g.options.modifiers)));return g.orderedModifiers=B.filter(function(F){return F.enabled}),E(),S.update()},forceUpdate:function(){if(!w){var $=g.elements,z=$.reference,B=$.popper;if(L7(z,B)){g.rects={reference:e0e(z,ZT(B),g.options.strategy==="fixed"),popper:G6(B)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(ce){return g.modifiersData[ce.name]=Object.assign({},ce.data)});for(var F=0;F<g.orderedModifiers.length;F++){if(g.reset===!0){g.reset=!1,F=-1;continue}var U=g.orderedModifiers[F],q=U.fn,H=U.options,ne=H===void 0?{}:H,ie=U.name;typeof q=="function"&&(g=q({state:g,options:ne,name:ie,instance:S})||g)}}}},update:r0e(function(){return new Promise(function(R){S.forceUpdate(),R(g)})}),destroy:function(){A(),w=!0}};if(!L7(s,u))return S;S.setOptions(f).then(function(R){!w&&f.onFirstUpdate&&f.onFirstUpdate(R)});function E(){g.orderedModifiers.forEach(function(R){var $=R.name,z=R.options,B=z===void 0?{}:z,F=R.effect;if(typeof F=="function"){var U=F({state:g,name:$,instance:S,options:B}),q=function(){};_.push(U||q)}})}function A(){_.forEach(function(R){return R()}),_=[]}return S}}var s0e=[Aye,Wye,kye,gye,Zye,Fye,Xye,Oye,Vye],a0e=o0e({defaultModifiers:s0e});function bX(t){const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...o}=t,a=i?{}:aX(n,r),{props:s,internalRef:u}=cX({...o,externalSlotProps:a}),f=ts(u,a?.ref,t.additionalProps?.ref);return sX(e,{...s,ref:f},r)}function Pb(t){return parseInt(Q.version,10)>=19?t?.props?.ref||null:t?.ref||null}function l0e(t){return typeof t=="function"?t():t}const xX=Q.forwardRef(function(e,n){const{children:r,container:i,disablePortal:o=!1}=e,[a,s]=Q.useState(null),u=ts(Q.isValidElement(r)?Pb(r):null,n);if(yf(()=>{o||s(l0e(i)||document.body)},[i,o]),yf(()=>{if(a&&!o)return y7(n,a),()=>{y7(n,null)}},[n,a,o]),o){if(Q.isValidElement(r)){const f={ref:u};return Q.cloneElement(r,f)}return r}return a&&tm.createPortal(r,a)});function c0e(t){return Un("MuiPopper",t)}Yn("MuiPopper",["root"]);function u0e(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function u$(t){return typeof t=="function"?t():t}function h0e(t){return t.nodeType!==void 0}const d0e=t=>{const{classes:e}=t;return Zn({root:["root"]},c0e,e)},f0e={},p0e=Q.forwardRef(function(e,n){const{anchorEl:r,children:i,direction:o,disablePortal:a,modifiers:s,open:u,placement:f,popperOptions:g,popperRef:_,slotProps:w={},slots:S={},TransitionProps:E,ownerState:A,...R}=e,$=Q.useRef(null),z=ts($,n),B=Q.useRef(null),F=ts(B,_),U=Q.useRef(F);yf(()=>{U.current=F},[F]),Q.useImperativeHandle(_,()=>B.current,[]);const q=u0e(f,o),[H,ne]=Q.useState(q),[ie,ce]=Q.useState(u$(r));Q.useEffect(()=>{B.current&&B.current.forceUpdate()}),Q.useEffect(()=>{r&&ce(u$(r))},[r]),yf(()=>{if(!ie||!u)return;const ye=Ne=>{ne(Ne.placement)};let _e=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Ne})=>{ye(Ne)}}];s!=null&&(_e=_e.concat(s)),g&&g.modifiers!=null&&(_e=_e.concat(g.modifiers));const ke=a0e(ie,$.current,{placement:q,...g,modifiers:_e});return U.current(ke),()=>{ke.destroy(),U.current(null)}},[ie,a,s,u,g,q]);const xe={placement:H};E!==null&&(xe.TransitionProps=E);const re=d0e(e),me=S.root??"div",Te=bX({elementType:me,externalSlotProps:w.root,externalForwardedProps:R,additionalProps:{role:"tooltip",ref:z},ownerState:e,className:re.root});return J.jsx(me,{...Te,children:typeof i=="function"?i(xe):i})}),m0e=Q.forwardRef(function(e,n){const{anchorEl:r,children:i,container:o,direction:a="ltr",disablePortal:s=!1,keepMounted:u=!1,modifiers:f,open:g,placement:_="bottom",popperOptions:w=f0e,popperRef:S,style:E,transition:A=!1,slotProps:R={},slots:$={},...z}=e,[B,F]=Q.useState(!0),U=()=>{F(!1)},q=()=>{F(!0)};if(!u&&!g&&(!A||B))return null;let H;if(o)H=o;else if(r){const ce=u$(r);H=ce&&h0e(ce)?Yu(ce).body:Yu(null).body}const ne=!g&&u&&(!A||B)?"none":void 0,ie=A?{in:g,onEnter:U,onExited:q}:void 0;return J.jsx(xX,{disablePortal:s,container:H,children:J.jsx(p0e,{anchorEl:r,direction:a,disablePortal:s,modifiers:f,ref:n,open:A?!B:g,placement:_,popperOptions:w,popperRef:S,slotProps:R,slots:$,...z,style:{position:"fixed",top:0,left:0,display:ne,...E},TransitionProps:ie,children:i})})}),g0e=Yt(m0e,{name:"MuiPopper",slot:"Root"})({}),wX=Q.forwardRef(function(e,n){const r=qM(),i=Hn({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:s,componentsProps:u,container:f,disablePortal:g,keepMounted:_,modifiers:w,open:S,placement:E,popperOptions:A,popperRef:R,transition:$,slots:z,slotProps:B,...F}=i,U=z?.root??s?.Root,q={anchorEl:o,container:f,disablePortal:g,keepMounted:_,modifiers:w,open:S,placement:E,popperOptions:A,popperRef:R,transition:$,...F};return J.jsx(g0e,{as:a,direction:r?"rtl":"ltr",slots:{root:U},slotProps:B??u,...q,ref:n})});function y0e(t){return Un("MuiListSubheader",t)}Yn("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const v0e=t=>{const{classes:e,color:n,disableGutters:r,inset:i,disableSticky:o}=t,a={root:["root",n!=="default"&&`color${Zt(n)}`,!r&&"gutters",i&&"inset",!o&&"sticky"]};return Zn(a,y0e,e)},_0e=Yt("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${Zt(n.color)}`],!n.disableGutters&&e.gutters,n.inset&&e.inset,!n.disableSticky&&e.sticky]}})(ar(({theme:t})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(t.vars||t).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:72}},{props:({ownerState:e})=>!e.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper}}]}))),h$=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiListSubheader"}),{className:i,color:o="default",component:a="li",disableGutters:s=!1,disableSticky:u=!1,inset:f=!1,...g}=r,_={...r,color:o,component:a,disableGutters:s,disableSticky:u,inset:f},w=v0e(_);return J.jsx(_0e,{as:a,className:bn(w.root,i),ref:n,ownerState:_,...g})});h$&&(h$.muiSkipListHighlight=!0);const b0e=No(J.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function x0e(t){return Un("MuiChip",t)}const Zr=Yn("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),w0e=t=>{const{classes:e,disabled:n,size:r,color:i,iconColor:o,onDelete:a,clickable:s,variant:u}=t,f={root:["root",u,n&&"disabled",`size${Zt(r)}`,`color${Zt(i)}`,s&&"clickable",s&&`clickableColor${Zt(i)}`,a&&"deletable",a&&`deletableColor${Zt(i)}`,`${u}${Zt(i)}`],label:["label",`label${Zt(r)}`],avatar:["avatar",`avatar${Zt(r)}`,`avatarColor${Zt(i)}`],icon:["icon",`icon${Zt(r)}`,`iconColor${Zt(o)}`],deleteIcon:["deleteIcon",`deleteIcon${Zt(r)}`,`deleteIconColor${Zt(i)}`,`deleteIcon${Zt(u)}Color${Zt(i)}`]};return Zn(f,x0e,e)},O0e=Yt("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:i,clickable:o,onDelete:a,size:s,variant:u}=n;return[{[`& .${Zr.avatar}`]:e.avatar},{[`& .${Zr.avatar}`]:e[`avatar${Zt(s)}`]},{[`& .${Zr.avatar}`]:e[`avatarColor${Zt(r)}`]},{[`& .${Zr.icon}`]:e.icon},{[`& .${Zr.icon}`]:e[`icon${Zt(s)}`]},{[`& .${Zr.icon}`]:e[`iconColor${Zt(i)}`]},{[`& .${Zr.deleteIcon}`]:e.deleteIcon},{[`& .${Zr.deleteIcon}`]:e[`deleteIcon${Zt(s)}`]},{[`& .${Zr.deleteIcon}`]:e[`deleteIconColor${Zt(r)}`]},{[`& .${Zr.deleteIcon}`]:e[`deleteIcon${Zt(u)}Color${Zt(r)}`]},e.root,e[`size${Zt(s)}`],e[`color${Zt(r)}`],o&&e.clickable,o&&r!=="default"&&e[`clickableColor${Zt(r)}`],a&&e.deletable,a&&r!=="default"&&e[`deletableColor${Zt(r)}`],e[u],e[`${u}${Zt(r)}`]]}})(ar(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,lineHeight:1.5,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Zr.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Zr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:e,fontSize:t.typography.pxToRem(12)},[`& .${Zr.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${Zr.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${Zr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${Zr.icon}`]:{marginLeft:5,marginRight:-6},[`& .${Zr.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:t.alpha((t.vars||t).palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.alpha((t.vars||t).palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${Zr.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${Zr.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(Hs(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText,[`& .${Zr.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[n].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${Zr.icon}`]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:e}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${Zr.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${Zr.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}}},...Object.entries(t.palette).filter(Hs(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${Zr.focusVisible}`]:{background:(t.vars||t).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)},[`&.${Zr.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(Hs(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${Zr.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${Zr.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${Zr.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${Zr.avatar}`]:{marginLeft:4},[`& .${Zr.avatarSmall}`]:{marginLeft:2},[`& .${Zr.icon}`]:{marginLeft:4},[`& .${Zr.iconSmall}`]:{marginLeft:2},[`& .${Zr.deleteIcon}`]:{marginRight:5},[`& .${Zr.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(t.palette).filter(Hs()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(t.vars||t).palette[n].main,border:`1px solid ${t.alpha((t.vars||t).palette[n].main,.7)}`,[`&.${Zr.clickable}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.hoverOpacity)},[`&.${Zr.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.focusOpacity)},[`& .${Zr.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[n].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].main}}}}))]}})),S0e=Yt("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${Zt(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function $7(t){return t.key==="Backspace"||t.key==="Delete"}const qP=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiChip"}),{avatar:i,className:o,clickable:a,color:s="default",component:u,deleteIcon:f,disabled:g=!1,icon:_,label:w,onClick:S,onDelete:E,onKeyDown:A,onKeyUp:R,size:$="medium",variant:z="filled",tabIndex:B,skipFocusWhenDisabled:F=!1,slots:U={},slotProps:q={},...H}=r,ne=Q.useRef(null),ie=ts(ne,n),ce=ct=>{ct.stopPropagation(),E&&E(ct)},xe=ct=>{ct.currentTarget===ct.target&&$7(ct)&&ct.preventDefault(),A&&A(ct)},re=ct=>{ct.currentTarget===ct.target&&E&&$7(ct)&&E(ct),R&&R(ct)},me=a!==!1&&S?!0:a,Te=me||E?rb:u||"div",ye={...r,component:Te,disabled:g,size:$,color:s,iconColor:Q.isValidElement(_)&&_.props.color||s,onDelete:!!E,clickable:me,variant:z},_e=w0e(ye),ke=Te===rb?{component:u||"div",focusVisibleClassName:_e.focusVisible,...E&&{disableRipple:!0}}:{};let Ne=null;E&&(Ne=f&&Q.isValidElement(f)?Q.cloneElement(f,{className:bn(f.props.className,_e.deleteIcon),onClick:ce}):J.jsx(b0e,{className:_e.deleteIcon,onClick:ce}));let Qe=null;i&&Q.isValidElement(i)&&(Qe=Q.cloneElement(i,{className:bn(_e.avatar,i.props.className)}));let Se=null;_&&Q.isValidElement(_)&&(Se=Q.cloneElement(_,{className:bn(_e.icon,_.props.className)}));const Me={slots:U,slotProps:q},[Xe,Ee]=Xn("root",{elementType:O0e,externalForwardedProps:{...Me,...H},ownerState:ye,shouldForwardComponentProp:!0,ref:ie,className:bn(_e.root,o),additionalProps:{disabled:me&&g?!0:void 0,tabIndex:F&&g?-1:B,...ke},getSlotProps:ct=>({...ct,onClick:st=>{ct.onClick?.(st),S?.(st)},onKeyDown:st=>{ct.onKeyDown?.(st),xe(st)},onKeyUp:st=>{ct.onKeyUp?.(st),re(st)}})}),[ft,mt]=Xn("label",{elementType:S0e,externalForwardedProps:Me,ownerState:ye,className:_e.label});return J.jsxs(Xe,{as:Te,...Ee,children:[Qe||Se,J.jsx(ft,{...mt,children:w}),Ne]})});function BE(t){return parseInt(t,10)||0}const C0e={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function T0e(t){for(const e in t)return!1;return!0}function z7(t){return T0e(t)||t.outerHeightStyle===0&&!t.overflowing}const k0e=Q.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:o=1,style:a,value:s,...u}=e,{current:f}=Q.useRef(s!=null),g=Q.useRef(null),_=ts(n,g),w=Q.useRef(null),S=Q.useRef(null),E=Q.useCallback(()=>{const B=g.current,F=S.current;if(!B||!F)return;const q=vf(B).getComputedStyle(B);if(q.width==="0px")return{outerHeightStyle:0,overflowing:!1};F.style.width=q.width,F.value=B.value||e.placeholder||"x",F.value.slice(-1)===`
`&&(F.value+=" ");const H=q.boxSizing,ne=BE(q.paddingBottom)+BE(q.paddingTop),ie=BE(q.borderBottomWidth)+BE(q.borderTopWidth),ce=F.scrollHeight;F.value="x";const xe=F.scrollHeight;let re=ce;o&&(re=Math.max(Number(o)*xe,re)),i&&(re=Math.min(Number(i)*xe,re)),re=Math.max(re,xe);const me=re+(H==="border-box"?ne+ie:0),Te=Math.abs(re-ce)<=1;return{outerHeightStyle:me,overflowing:Te}},[i,o,e.placeholder]),A=zg(()=>{const B=g.current,F=E();if(!B||!F||z7(F))return!1;const U=F.outerHeightStyle;return w.current!=null&&w.current!==U}),R=Q.useCallback(()=>{const B=g.current,F=E();if(!B||!F||z7(F))return;const U=F.outerHeightStyle;w.current!==U&&(w.current=U,B.style.height=`${U}px`),B.style.overflow=F.overflowing?"hidden":""},[E]),$=Q.useRef(-1);yf(()=>{const B=Q6(R),F=g?.current;if(!F)return;const U=vf(F);U.addEventListener("resize",B);let q;return typeof ResizeObserver<"u"&&(q=new ResizeObserver(()=>{A()&&(q.unobserve(F),cancelAnimationFrame($.current),R(),$.current=requestAnimationFrame(()=>{q.observe(F)}))}),q.observe(F)),()=>{B.clear(),cancelAnimationFrame($.current),U.removeEventListener("resize",B),q&&q.disconnect()}},[E,R,A]),yf(()=>{R()});const z=B=>{f||R();const F=B.target,U=F.value.length,q=F.value.endsWith(`
`),H=F.selectionStart===U;q&&H&&F.setSelectionRange(U,U),r&&r(B)};return J.jsxs(Q.Fragment,{children:[J.jsx("textarea",{value:s,onChange:z,ref:_,rows:o,style:a,...u}),J.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:S,tabIndex:-1,style:{...C0e.shadow,...a,paddingTop:0,paddingBottom:0}})]})});function Mb({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const eN=Q.createContext(void 0);function G0(){return Q.useContext(eN)}function N7(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function WP(t,e=!1){return t&&(N7(t.value)&&t.value!==""||e&&N7(t.defaultValue)&&t.defaultValue!=="")}function E0e(t){return t.startAdornment}function A0e(t){return Un("MuiInputBase",t)}const Sw=Yn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var B7;const XM=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${Zt(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},YM=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},P0e=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:o,focused:a,formControl:s,fullWidth:u,hiddenLabel:f,multiline:g,readOnly:_,size:w,startAdornment:S,type:E}=t,A={root:["root",`color${Zt(n)}`,r&&"disabled",i&&"error",u&&"fullWidth",a&&"focused",s&&"formControl",w&&w!=="medium"&&`size${Zt(w)}`,g&&"multiline",S&&"adornedStart",o&&"adornedEnd",f&&"hiddenLabel",_&&"readOnly"],input:["input",r&&"disabled",E==="search"&&"inputTypeSearch",g&&"inputMultiline",w==="small"&&"inputSizeSmall",f&&"inputHiddenLabel",S&&"inputAdornedStart",o&&"inputAdornedEnd",_&&"readOnly"]};return Zn(A,A0e,e)},KM=Yt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:XM})(ar(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Sw.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:n})=>e.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),JM=Yt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:YM})(ar(({theme:t})=>{const e=t.palette.mode==="light",n={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},r={opacity:"0 !important"},i=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Sw.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${Sw.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:o})=>!o.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:o})=>o.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),F7=V6({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),tN=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:a,className:s,color:u,components:f={},componentsProps:g={},defaultValue:_,disabled:w,disableInjectingGlobalStyles:S,endAdornment:E,error:A,fullWidth:R=!1,id:$,inputComponent:z="input",inputProps:B={},inputRef:F,margin:U,maxRows:q,minRows:H,multiline:ne=!1,name:ie,onBlur:ce,onChange:xe,onClick:re,onFocus:me,onKeyDown:Te,onKeyUp:ye,placeholder:_e,readOnly:ke,renderSuffix:Ne,rows:Qe,size:Se,slotProps:Me={},slots:Xe={},startAdornment:Ee,type:ft="text",value:mt,...ct}=r,st=B.value!=null?B.value:mt,{current:bt}=Q.useRef(st!=null),At=Q.useRef(),Tt=Q.useCallback(ze=>{},[]),Wt=ts(At,F,B.ref,Tt),[nn,An]=Q.useState(!1),rn=G0(),Jt=Mb({props:r,muiFormControl:rn,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Jt.focused=rn?rn.focused:nn,Q.useEffect(()=>{!rn&&w&&nn&&(An(!1),ce&&ce())},[rn,w,nn,ce]);const Mn=rn&&rn.onFilled,vn=rn&&rn.onEmpty,Nn=Q.useCallback(ze=>{WP(ze)?Mn&&Mn():vn&&vn()},[Mn,vn]);yf(()=>{bt&&Nn({value:st})},[st,Nn,bt]);const lr=ze=>{me&&me(ze),B.onFocus&&B.onFocus(ze),rn&&rn.onFocus?rn.onFocus(ze):An(!0)},rr=ze=>{ce&&ce(ze),B.onBlur&&B.onBlur(ze),rn&&rn.onBlur?rn.onBlur(ze):An(!1)},Ue=(ze,...rt)=>{if(!bt){const tt=ze.target||At.current;if(tt==null)throw new Error(Vg(1));Nn({value:tt.value})}B.onChange&&B.onChange(ze,...rt),xe&&xe(ze,...rt)};Q.useEffect(()=>{Nn(At.current)},[]);const Je=ze=>{At.current&&ze.currentTarget===ze.target&&At.current.focus(),re&&re(ze)};let xt=z,Et=B;ne&&xt==="input"&&(Qe?Et={type:void 0,minRows:Qe,maxRows:Qe,...Et}:Et={type:void 0,maxRows:q,minRows:H,...Et},xt=k0e);const Vt=ze=>{Nn(ze.animationName==="mui-auto-fill-cancel"?At.current:{value:"x"})};Q.useEffect(()=>{rn&&rn.setAdornedStart(!!Ee)},[rn,Ee]);const we={...r,color:Jt.color||"primary",disabled:Jt.disabled,endAdornment:E,error:Jt.error,focused:Jt.focused,formControl:rn,fullWidth:R,hiddenLabel:Jt.hiddenLabel,multiline:ne,size:Jt.size,startAdornment:Ee,type:ft},ae=P0e(we),Y=Xe.root||f.Root||KM,be=Me.root||g.root||{},$e=Xe.input||f.Input||JM;return Et={...Et,...Me.input??g.input},J.jsxs(Q.Fragment,{children:[!S&&typeof F7=="function"&&(B7||(B7=J.jsx(F7,{}))),J.jsxs(Y,{...be,ref:n,onClick:Je,...ct,...!vw(Y)&&{ownerState:{...we,...be.ownerState}},className:bn(ae.root,be.className,s,ke&&"MuiInputBase-readOnly"),children:[Ee,J.jsx(eN.Provider,{value:null,children:J.jsx($e,{"aria-invalid":Jt.error,"aria-describedby":i,autoComplete:o,autoFocus:a,defaultValue:_,disabled:Jt.disabled,id:$,onAnimationStart:Vt,name:ie,placeholder:_e,readOnly:ke,required:Jt.required,rows:Qe,value:st,onKeyDown:Te,onKeyUp:ye,type:ft,...Et,...!vw($e)&&{as:xt,ownerState:{...we,...Et.ownerState}},ref:Wt,className:bn(ae.input,Et.className,ke&&"MuiInputBase-readOnly"),onBlur:rr,onChange:Ue,onFocus:lr})}),E,Ne?Ne({...Jt,startAdornment:Ee}):null]})]})});function M0e(t){return Un("MuiInput",t)}const i2={...Sw,...Yn("MuiInput",["root","underline","input"])};function R0e(t){return Un("MuiOutlinedInput",t)}const Op={...Sw,...Yn("MuiOutlinedInput",["root","notchedOutline","input"])};function I0e(t){return Un("MuiFilledInput",t)}const y_={...Sw,...Yn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},D0e=No(J.jsx("path",{d:"M7 10l5 5 5-5z"})),L0e=No(J.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function $0e(t){return Un("MuiAvatar",t)}Yn("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const z0e=t=>{const{classes:e,variant:n,colorDefault:r}=t;return Zn({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},$0e,e)},N0e=Yt("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],n.colorDefault&&e.colorDefault]}})(ar(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(t.vars||t).palette.background.default,...t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:t.palette.grey[400],...t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})}}}]}))),B0e=Yt("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),F0e=Yt(L0e,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function j0e({crossOrigin:t,referrerPolicy:e,src:n,srcSet:r}){const[i,o]=Q.useState(!1);return Q.useEffect(()=>{if(!n&&!r)return;o(!1);let a=!0;const s=new Image;return s.onload=()=>{a&&o("loaded")},s.onerror=()=>{a&&o("error")},s.crossOrigin=t,s.referrerPolicy=e,s.src=n,r&&(s.srcset=r),()=>{a=!1}},[t,e,n,r]),i}const eR=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiAvatar"}),{alt:i,children:o,className:a,component:s="div",slots:u={},slotProps:f={},imgProps:g,sizes:_,src:w,srcSet:S,variant:E="circular",...A}=r;let R=null;const $={...r,component:s,variant:E},z=j0e({...g,...typeof f.img=="function"?f.img($):f.img,src:w,srcSet:S}),B=w||S,F=B&&z!=="error";$.colorDefault=!F,delete $.ownerState;const U=z0e($),[q,H]=Xn("root",{ref:n,className:bn(U.root,a),elementType:N0e,externalForwardedProps:{slots:u,slotProps:f,component:s,...A},ownerState:$}),[ne,ie]=Xn("img",{className:U.img,elementType:B0e,externalForwardedProps:{slots:u,slotProps:{img:{...g,...f.img}}},additionalProps:{alt:i,src:w,srcSet:S,sizes:_},ownerState:$}),[ce,xe]=Xn("fallback",{className:U.fallback,elementType:F0e,externalForwardedProps:{slots:u,slotProps:f},shouldForwardComponentProp:!0,ownerState:$});return F?R=J.jsx(ne,{...ie}):o||o===0?R=o:B&&i?R=i[0]:R=J.jsx(ce,{...xe}),J.jsx(q,{...H,children:R})}),V0e={entering:{opacity:1},entered:{opacity:1}},d$=Q.forwardRef(function(e,n){const r=hm(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:s,easing:u,in:f,onEnter:g,onEntered:_,onEntering:w,onExit:S,onExited:E,onExiting:A,style:R,timeout:$=i,TransitionComponent:z=rd,...B}=e,F=Q.useRef(null),U=ts(F,Pb(s),n),q=Te=>ye=>{if(Te){const _e=F.current;ye===void 0?Te(_e):Te(_e,ye)}},H=q(w),ne=q((Te,ye)=>{q6(Te);const _e=D0({style:R,timeout:$,easing:u},{mode:"enter"});Te.style.webkitTransition=r.transitions.create("opacity",_e),Te.style.transition=r.transitions.create("opacity",_e),g&&g(Te,ye)}),ie=q(_),ce=q(A),xe=q(Te=>{const ye=D0({style:R,timeout:$,easing:u},{mode:"exit"});Te.style.webkitTransition=r.transitions.create("opacity",ye),Te.style.transition=r.transitions.create("opacity",ye),S&&S(Te)}),re=q(E),me=Te=>{o&&o(F.current,Te)};return J.jsx(z,{appear:a,in:f,nodeRef:F,onEnter:ne,onEntered:ie,onEntering:H,onExit:xe,onExited:re,onExiting:ce,addEndListener:me,timeout:$,...B,children:(Te,{ownerState:ye,..._e})=>Q.cloneElement(s,{style:{opacity:0,visibility:Te==="exited"&&!f?"hidden":void 0,...V0e[Te],...R,...s.props.style},ref:U,..._e})})});function Q0e(t){return Un("MuiBackdrop",t)}Yn("MuiBackdrop",["root","invisible"]);const U0e=t=>{const{classes:e,invisible:n}=t;return Zn({root:["root",n&&"invisible"]},Q0e,e)},Z0e=Yt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),OX=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiBackdrop"}),{children:i,className:o,component:a="div",invisible:s=!1,open:u,components:f={},componentsProps:g={},slotProps:_={},slots:w={},TransitionComponent:S,transitionDuration:E,...A}=r,R={...r,component:a,invisible:s},$=U0e(R),z={transition:S,root:f.Root,...w},B={...g,..._},F={component:a,slots:z,slotProps:B},[U,q]=Xn("root",{elementType:Z0e,externalForwardedProps:F,className:bn($.root,o),ownerState:R}),[H,ne]=Xn("transition",{elementType:d$,externalForwardedProps:F,ownerState:R});return J.jsx(H,{in:u,timeout:E,...A,...ne,children:J.jsx(U,{"aria-hidden":!0,...q,classes:$,ref:n,children:i})})});function q0e(t){const{badgeContent:e,invisible:n=!1,max:r=99,showZero:i=!1}=t,o=uX({badgeContent:e,max:r});let a=n;n===!1&&e===0&&!i&&(a=!0);const{badgeContent:s,max:u=r}=a?o:t,f=s&&Number(s)>u?`${u}+`:s;return{badgeContent:s,invisible:a,max:u,displayValue:f}}function W0e(t){return Un("MuiBadge",t)}const c0=Yn("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),y3=10,v3=4,H0e=t=>{const{color:e,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:a={}}=t,s={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${Zt(n.vertical)}${Zt(n.horizontal)}`,`anchorOrigin${Zt(n.vertical)}${Zt(n.horizontal)}${Zt(i)}`,`overlap${Zt(i)}`,e!=="default"&&`color${Zt(e)}`]};return Zn(s,W0e,a)},G0e=Yt("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),X0e=Yt("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.badge,e[n.variant],e[`anchorOrigin${Zt(n.anchorOrigin.vertical)}${Zt(n.anchorOrigin.horizontal)}${Zt(n.overlap)}`],n.color!=="default"&&e[`color${Zt(n.color)}`],n.invisible&&e.invisible]}})(ar(({theme:t})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:y3*2,lineHeight:1,padding:"0 6px",height:y3*2,borderRadius:y3,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.entries(t.palette).filter(Hs(["contrastText"])).map(([e])=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}})),{props:{variant:"dot"},style:{borderRadius:v3,height:v3*2,minWidth:v3*2,padding:0}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${c0.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${c0.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${c0.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${c0.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${c0.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${c0.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${c0.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${c0.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]})));function j7(t){return{vertical:t?.vertical??"top",horizontal:t?.horizontal??"right"}}const Y0e=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiBadge"}),{anchorOrigin:i,className:o,classes:a,component:s,components:u={},componentsProps:f={},children:g,overlap:_="rectangular",color:w="default",invisible:S=!1,max:E=99,badgeContent:A,slots:R,slotProps:$,showZero:z=!1,variant:B="standard",...F}=r,{badgeContent:U,invisible:q,max:H,displayValue:ne}=q0e({max:E,invisible:S,badgeContent:A,showZero:z}),ie=uX({anchorOrigin:j7(i),color:w,overlap:_,variant:B,badgeContent:A}),ce=q||U==null&&B!=="dot",{color:xe=w,overlap:re=_,anchorOrigin:me,variant:Te=B}=ce?ie:r,ye=j7(me),_e=Te!=="dot"?ne:void 0,ke={...r,badgeContent:U,invisible:ce,max:H,displayValue:_e,showZero:z,anchorOrigin:ye,color:xe,overlap:re,variant:Te},Ne=H0e(ke),Qe={slots:{root:R?.root??u.Root,badge:R?.badge??u.Badge},slotProps:{root:$?.root??f.root,badge:$?.badge??f.badge}},[Se,Me]=Xn("root",{elementType:G0e,externalForwardedProps:{...Qe,...F},ownerState:ke,className:bn(Ne.root,o),ref:n,additionalProps:{as:s}}),[Xe,Ee]=Xn("badge",{elementType:X0e,externalForwardedProps:Qe,ownerState:ke,className:Ne.badge});return J.jsxs(Se,{...Me,children:[g,J.jsx(Xe,{...Ee,children:_e})]})}),K0e=Yn("MuiBox",["root"]),J0e=tX(),er=ape({themeId:PM,defaultTheme:J0e,defaultClassName:K0e.root,generateClassName:VG.generate});function eve(t){return Un("MuiButton",t)}const v_=Yn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),tve=Q.createContext({}),nve=Q.createContext(void 0),rve=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:o,loading:a,loadingPosition:s,classes:u}=t,f={root:["root",a&&"loading",o,`${o}${Zt(e)}`,`size${Zt(i)}`,`${o}Size${Zt(i)}`,`color${Zt(e)}`,n&&"disableElevation",r&&"fullWidth",a&&`loadingPosition${Zt(s)}`],startIcon:["icon","startIcon",`iconSize${Zt(i)}`],endIcon:["icon","endIcon",`iconSize${Zt(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},g=Zn(f,eve,u);return{...u,...g}},SX=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],ive=Yt(rb,{shouldForwardProp:t=>uc(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Zt(n.color)}`],e[`size${Zt(n.size)}`],e[`${n.variant}Size${Zt(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,n.loading&&e.loading]}})(ar(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],n=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${v_.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${v_.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${v_.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${v_.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(Hs()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.alpha((t.vars||t).palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${v_.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${v_.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${v_.loading}`]:{color:"transparent"}}}]}})),ove=Yt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,n.loading&&e.startIconLoadingStart,e[`iconSize${Zt(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...SX]})),sve=Yt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,n.loading&&e.endIconLoadingEnd,e[`iconSize${Zt(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...SX]})),ave=Yt("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),V7=Yt("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Zs=Q.forwardRef(function(e,n){const r=Q.useContext(tve),i=Q.useContext(nve),o=AC(r,e),a=Hn({props:o,name:"MuiButton"}),{children:s,color:u="primary",component:f="button",className:g,disabled:_=!1,disableElevation:w=!1,disableFocusRipple:S=!1,endIcon:E,focusVisibleClassName:A,fullWidth:R=!1,id:$,loading:z=null,loadingIndicator:B,loadingPosition:F="center",size:U="medium",startIcon:q,type:H,variant:ne="text",...ie}=a,ce=fO($),xe=B??J.jsx(Ku,{"aria-labelledby":ce,color:"inherit",size:16}),re={...a,color:u,component:f,disabled:_,disableElevation:w,disableFocusRipple:S,fullWidth:R,loading:z,loadingIndicator:xe,loadingPosition:F,size:U,type:H,variant:ne},me=rve(re),Te=(q||z&&F==="start")&&J.jsx(ove,{className:me.startIcon,ownerState:re,children:q||J.jsx(V7,{className:me.loadingIconPlaceholder,ownerState:re})}),ye=(E||z&&F==="end")&&J.jsx(sve,{className:me.endIcon,ownerState:re,children:E||J.jsx(V7,{className:me.loadingIconPlaceholder,ownerState:re})}),_e=i||"",ke=typeof z=="boolean"?J.jsx("span",{className:me.loadingWrapper,style:{display:"contents"},children:z&&J.jsx(ave,{className:me.loadingIndicator,ownerState:re,children:xe})}):null;return J.jsxs(ive,{ownerState:re,className:bn(r.className,me.root,g,_e),component:f,disabled:_||z,focusRipple:!S,focusVisibleClassName:bn(me.focusVisible,A),ref:n,type:H,id:z?ce:$,...ie,classes:me,children:[Te,F!=="end"&&ke,s,F==="end"&&ke,ye]})});function lve(t){return Un("MuiCard",t)}Yn("MuiCard",["root"]);const cve=t=>{const{classes:e}=t;return Zn({root:["root"]},lve,e)},uve=Yt(hc,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),hve=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiCard"}),{className:i,raised:o=!1,...a}=r,s={...r,raised:o},u=cve(s);return J.jsx(uve,{className:bn(u.root,i),elevation:o?8:void 0,ref:n,ownerState:s,...a})});function dve(t){return Un("MuiCardActions",t)}Yn("MuiCardActions",["root","spacing"]);const fve=t=>{const{classes:e,disableSpacing:n}=t;return Zn({root:["root",!n&&"spacing"]},dve,e)},pve=Yt("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),mve=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:o,...a}=r,s={...r,disableSpacing:i},u=fve(s);return J.jsx(pve,{className:bn(u.root,o),ownerState:s,ref:n,...a})});function gve(t){return Un("MuiCardContent",t)}Yn("MuiCardContent",["root"]);const yve=t=>{const{classes:e}=t;return Zn({root:["root"]},gve,e)},vve=Yt("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),_ve=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiCardContent"}),{className:i,component:o="div",...a}=r,s={...r,component:o},u=yve(s);return J.jsx(vve,{as:o,className:bn(u.root,i),ownerState:s,ref:n,...a})});function bve(t){return Un("PrivateSwitchBase",t)}Yn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const xve=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${Zt(i)}`],input:["input"]};return Zn(o,bve,e)},wve=Yt(rb,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:t,ownerState:e})=>t==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:t,ownerState:e})=>t==="end"&&e.size!=="small",style:{marginRight:-12}}]}),Ove=Yt("input",{name:"MuiSwitchBase",shouldForwardProp:uc})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Sve=Q.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:o,defaultChecked:a,disabled:s,disableFocusRipple:u=!1,edge:f=!1,icon:g,id:_,inputProps:w,inputRef:S,name:E,onBlur:A,onChange:R,onFocus:$,readOnly:z,required:B=!1,tabIndex:F,type:U,value:q,slots:H={},slotProps:ne={},...ie}=e,[ce,xe]=VP({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),re=G0(),me=mt=>{$&&$(mt),re&&re.onFocus&&re.onFocus(mt)},Te=mt=>{A&&A(mt),re&&re.onBlur&&re.onBlur(mt)},ye=mt=>{if(mt.nativeEvent.defaultPrevented)return;const ct=mt.target.checked;xe(ct),R&&R(mt,ct)};let _e=s;re&&typeof _e>"u"&&(_e=re.disabled);const ke=U==="checkbox"||U==="radio",Ne={...e,checked:ce,disabled:_e,disableFocusRipple:u,edge:f},Qe=xve(Ne),Se={slots:H,slotProps:{input:w,...ne}},[Me,Xe]=Xn("root",{ref:n,elementType:wve,className:Qe.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Se,component:"span",...ie},getSlotProps:mt=>({...mt,onFocus:ct=>{mt.onFocus?.(ct),me(ct)},onBlur:ct=>{mt.onBlur?.(ct),Te(ct)}}),ownerState:Ne,additionalProps:{centerRipple:!0,focusRipple:!u,disabled:_e,role:void 0,tabIndex:null}}),[Ee,ft]=Xn("input",{ref:S,elementType:Ove,className:Qe.input,externalForwardedProps:Se,getSlotProps:mt=>({...mt,onChange:ct=>{mt.onChange?.(ct),ye(ct)}}),ownerState:Ne,additionalProps:{autoFocus:r,checked:i,defaultChecked:a,disabled:_e,id:ke?_:void 0,name:E,readOnly:z,required:B,tabIndex:F,type:U,...U==="checkbox"&&q===void 0?{}:{value:q}}});return J.jsxs(Me,{...Xe,children:[J.jsx(Ee,{...ft}),ce?o:g]})}),Cw=Npe({createStyledComponent:Yt("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${Zt(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>Hn({props:t,name:"MuiContainer"})}),f$=typeof V6({})=="function",Cve=(t,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!t.vars&&{colorScheme:t.palette.mode}}),Tve=t=>({color:(t.vars||t).palette.text.primary,...t.typography.body1,backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),CX=(t,e=!1)=>{const n={};e&&t.colorSchemes&&typeof t.getColorSchemeSelector=="function"&&Object.entries(t.colorSchemes).forEach(([o,a])=>{const s=t.getColorSchemeSelector(o);s.startsWith("@")?n[s]={":root":{colorScheme:a.palette?.mode}}:n[s.replace(/\s*&/,"")]={colorScheme:a.palette?.mode}});let r={html:Cve(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:{margin:0,...Tve(t),"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}},...n};const i=t.components?.MuiCssBaseline?.styleOverrides;return i&&(r=[r,i]),r},aP="mui-ecs",kve=t=>{const e=CX(t,!1),n=Array.isArray(e)?e[0]:e;return!t.vars&&n&&(n.html[`:root:has(${aP})`]={colorScheme:t.palette.mode}),t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([r,i])=>{const o=t.getColorSchemeSelector(r);o.startsWith("@")?n[o]={[`:root:not(:has(.${aP}))`]:{colorScheme:i.palette?.mode}}:n[o.replace(/\s*&/,"")]={[`&:not(:has(.${aP}))`]:{colorScheme:i.palette?.mode}}}),e},Eve=V6(f$?({theme:t,enableColorScheme:e})=>CX(t,e):({theme:t})=>kve(t));function Ave(t){const e=Hn({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return J.jsxs(Q.Fragment,{children:[f$&&J.jsx(Eve,{enableColorScheme:r}),!f$&&!r&&J.jsx("span",{className:aP,style:{display:"none"}}),n]})}function TX(t=window){const e=t.document.documentElement.clientWidth;return t.innerWidth-e}function Pve(t){const e=Yu(t);return e.body===t?vf(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function eC(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function Q7(t){return parseInt(vf(t).getComputedStyle(t).paddingRight,10)||0}function Mve(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function U7(t,e,n,r,i){const o=[e,n,...r];[].forEach.call(t.children,a=>{const s=!o.includes(a),u=!Mve(a);s&&u&&eC(a,i)})}function _3(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function Rve(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(Pve(r)){const a=TX(vf(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${Q7(r)+a}px`;const s=Yu(r).querySelectorAll(".mui-fixed");[].forEach.call(s,u=>{n.push({value:u.style.paddingRight,property:"padding-right",el:u}),u.style.paddingRight=`${Q7(u)+a}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=Yu(r).body;else{const a=r.parentElement,s=vf(r);o=a?.nodeName==="HTML"&&s.getComputedStyle(a).overflowY==="scroll"?a:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{n.forEach(({value:o,el:a,property:s})=>{o?a.style.setProperty(s,o):a.style.removeProperty(s)})}}function Ive(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class Dve{constructor(){this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&eC(e.modalRef,!1);const i=Ive(n);U7(n,e.mount,e.modalRef,i,!0);const o=_3(this.containers,a=>a.container===n);return o!==-1?(this.containers[o].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=_3(this.containers,o=>o.modals.includes(e)),i=this.containers[r];i.restore||(i.restore=Rve(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=_3(this.containers,a=>a.modals.includes(e)),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&eC(e.modalRef,n),U7(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const a=o.modals[o.modals.length-1];a.modalRef&&eC(a.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function I2(t){let e=t.activeElement;for(;e?.shadowRoot?.activeElement!=null;)e=e.shadowRoot.activeElement;return e}const Lve=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function $ve(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function zve(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function Nve(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||zve(t))}function Bve(t){const e=[],n=[];return Array.from(t.querySelectorAll(Lve)).forEach((r,i)=>{const o=$ve(r);o===-1||!Nve(r)||(o===0?e.push(r):n.push({documentOrder:i,tabIndex:o,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function Fve(){return!0}function jve(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=Bve,isEnabled:a=Fve,open:s}=t,u=Q.useRef(!1),f=Q.useRef(null),g=Q.useRef(null),_=Q.useRef(null),w=Q.useRef(null),S=Q.useRef(!1),E=Q.useRef(null),A=ts(Pb(e),E),R=Q.useRef(null);Q.useEffect(()=>{!s||!E.current||(S.current=!n)},[n,s]),Q.useEffect(()=>{if(!s||!E.current)return;const B=Yu(E.current),F=I2(B);return E.current.contains(F)||(E.current.hasAttribute("tabIndex")||E.current.setAttribute("tabIndex","-1"),S.current&&E.current.focus()),()=>{i||(_.current&&_.current.focus&&(u.current=!0,_.current.focus()),_.current=null)}},[s]),Q.useEffect(()=>{if(!s||!E.current)return;const B=Yu(E.current),F=I2(B),U=ne=>{R.current=ne,!(r||!a()||ne.key!=="Tab")&&F===E.current&&ne.shiftKey&&(u.current=!0,g.current&&g.current.focus())},q=()=>{const ne=E.current;if(ne===null)return;const ie=I2(B);if(!B.hasFocus()||!a()||u.current){u.current=!1;return}if(ne.contains(ie)||r&&ie!==f.current&&ie!==g.current)return;if(ie!==w.current)w.current=null;else if(w.current!==null)return;if(!S.current)return;let ce=[];if((ie===f.current||ie===g.current)&&(ce=o(E.current)),ce.length>0){const xe=!!(R.current?.shiftKey&&R.current?.key==="Tab"),re=ce[0],me=ce[ce.length-1];typeof re!="string"&&typeof me!="string"&&(xe?me.focus():re.focus())}else ne.focus()};B.addEventListener("focusin",q),B.addEventListener("keydown",U,!0);const H=setInterval(()=>{const ne=I2(B);ne&&ne.tagName==="BODY"&&q()},50);return()=>{clearInterval(H),B.removeEventListener("focusin",q),B.removeEventListener("keydown",U,!0)}},[n,r,i,a,s,o]);const $=B=>{_.current===null&&(_.current=B.relatedTarget),S.current=!0,w.current=B.target;const F=e.props.onFocus;F&&F(B)},z=B=>{_.current===null&&(_.current=B.relatedTarget),S.current=!0};return J.jsxs(Q.Fragment,{children:[J.jsx("div",{tabIndex:s?0:-1,onFocus:z,ref:f,"data-testid":"sentinelStart"}),Q.cloneElement(e,{ref:A,onFocus:$}),J.jsx("div",{tabIndex:s?0:-1,onFocus:z,ref:g,"data-testid":"sentinelEnd"})]})}function Vve(t){return typeof t=="function"?t():t}function Qve(t){return t?t.props.hasOwnProperty("in"):!1}const Z7=()=>{},FE=new Dve;function Uve(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:o,onTransitionExited:a,children:s,onClose:u,open:f,rootRef:g}=t,_=Q.useRef({}),w=Q.useRef(null),S=Q.useRef(null),E=ts(S,g),[A,R]=Q.useState(!f),$=Qve(s);let z=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(z=!1);const B=()=>Yu(w.current),F=()=>(_.current.modalRef=S.current,_.current.mount=w.current,_.current),U=()=>{FE.mount(F(),{disableScrollLock:r}),S.current&&(S.current.scrollTop=0)},q=zg(()=>{const ye=Vve(e)||B().body;FE.add(F(),ye),S.current&&U()}),H=()=>FE.isTopModal(F()),ne=zg(ye=>{w.current=ye,ye&&(f&&H()?U():S.current&&eC(S.current,z))}),ie=Q.useCallback(()=>{FE.remove(F(),z)},[z]);Q.useEffect(()=>()=>{ie()},[ie]),Q.useEffect(()=>{f?q():(!$||!i)&&ie()},[f,ie,$,i,q]);const ce=ye=>_e=>{ye.onKeyDown?.(_e),!(_e.key!=="Escape"||_e.which===229||!H())&&(n||(_e.stopPropagation(),u&&u(_e,"escapeKeyDown")))},xe=ye=>_e=>{ye.onClick?.(_e),_e.target===_e.currentTarget&&u&&u(_e,"backdropClick")};return{getRootProps:(ye={})=>{const _e=lX(t);delete _e.onTransitionEnter,delete _e.onTransitionExited;const ke={..._e,...ye};return{role:"presentation",...ke,onKeyDown:ce(ke),ref:E}},getBackdropProps:(ye={})=>{const _e=ye;return{"aria-hidden":!0,..._e,onClick:xe(_e),open:f}},getTransitionProps:()=>{const ye=()=>{R(!1),o&&o()},_e=()=>{R(!0),a&&a(),i&&ie()};return{onEnter:g7(ye,s?.props.onEnter??Z7),onExited:g7(_e,s?.props.onExited??Z7)}},rootRef:E,portalRef:ne,isTopModal:H,exited:A,hasTransition:$}}function Zve(t){return Un("MuiModal",t)}Yn("MuiModal",["root","hidden","backdrop"]);const qve=t=>{const{open:e,exited:n,classes:r}=t;return Zn({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},Zve,r)},Wve=Yt("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(ar(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),Hve=Yt(OX,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),nN=Q.forwardRef(function(e,n){const r=Hn({name:"MuiModal",props:e}),{BackdropComponent:i=Hve,BackdropProps:o,classes:a,className:s,closeAfterTransition:u=!1,children:f,container:g,component:_,components:w={},componentsProps:S={},disableAutoFocus:E=!1,disableEnforceFocus:A=!1,disableEscapeKeyDown:R=!1,disablePortal:$=!1,disableRestoreFocus:z=!1,disableScrollLock:B=!1,hideBackdrop:F=!1,keepMounted:U=!1,onClose:q,onTransitionEnter:H,onTransitionExited:ne,open:ie,slotProps:ce={},slots:xe={},theme:re,...me}=r,Te={...r,closeAfterTransition:u,disableAutoFocus:E,disableEnforceFocus:A,disableEscapeKeyDown:R,disablePortal:$,disableRestoreFocus:z,disableScrollLock:B,hideBackdrop:F,keepMounted:U},{getRootProps:ye,getBackdropProps:_e,getTransitionProps:ke,portalRef:Ne,isTopModal:Qe,exited:Se,hasTransition:Me}=Uve({...Te,rootRef:n}),Xe={...Te,exited:Se},Ee=qve(Xe),ft={};if(f.props.tabIndex===void 0&&(ft.tabIndex="-1"),Me){const{onEnter:Tt,onExited:Wt}=ke();ft.onEnter=Tt,ft.onExited=Wt}const mt={slots:{root:w.Root,backdrop:w.Backdrop,...xe},slotProps:{...S,...ce}},[ct,st]=Xn("root",{ref:n,elementType:Wve,externalForwardedProps:{...mt,...me,component:_},getSlotProps:ye,ownerState:Xe,className:bn(s,Ee?.root,!Xe.open&&Xe.exited&&Ee?.hidden)}),[bt,At]=Xn("backdrop",{ref:o?.ref,elementType:i,externalForwardedProps:mt,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:Tt=>_e({...Tt,onClick:Wt=>{Tt?.onClick&&Tt.onClick(Wt)}}),className:bn(o?.className,Ee?.backdrop),ownerState:Xe});return!U&&!ie&&(!Me||Se)?null:J.jsx(xX,{ref:Ne,container:g,disablePortal:$,children:J.jsxs(ct,{...st,children:[!F&&i?J.jsx(bt,{...At}):null,J.jsx(jve,{disableEnforceFocus:A,disableAutoFocus:E,disableRestoreFocus:z,isEnabled:Qe,open:ie,children:Q.cloneElement(f,ft)})]})})});function Gve(t){return Un("MuiDialog",t)}const b3=Yn("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),kX=Q.createContext({}),Xve=Yt(OX,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),Yve=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=t,a={root:["root"],container:["container",`scroll${Zt(n)}`],paper:["paper",`paperScroll${Zt(n)}`,`paperWidth${Zt(String(r))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return Zn(a,Gve,e)},Kve=Yt(nN,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),Jve=Yt("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${Zt(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),e_e=Yt(hc,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${Zt(n.scroll)}`],e[`paperWidth${Zt(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(ar(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${b3.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${b3.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${b3.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),t_e=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiDialog"}),i=hm(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":s,"aria-modal":u=!0,BackdropComponent:f,BackdropProps:g,children:_,className:w,disableEscapeKeyDown:S=!1,fullScreen:E=!1,fullWidth:A=!1,maxWidth:R="sm",onClick:$,onClose:z,open:B,PaperComponent:F=hc,PaperProps:U={},scroll:q="paper",slots:H={},slotProps:ne={},TransitionComponent:ie=d$,transitionDuration:ce=o,TransitionProps:xe,...re}=r,me={...r,disableEscapeKeyDown:S,fullScreen:E,fullWidth:A,maxWidth:R,scroll:q},Te=Yve(me),ye=Q.useRef(),_e=An=>{ye.current=An.target===An.currentTarget},ke=An=>{$&&$(An),ye.current&&(ye.current=null,z&&z(An,"backdropClick"))},Ne=fO(s),Qe=Q.useMemo(()=>({titleId:Ne}),[Ne]),Se={transition:ie,...H},Me={transition:xe,paper:U,backdrop:g,...ne},Xe={slots:Se,slotProps:Me},[Ee,ft]=Xn("root",{elementType:Kve,shouldForwardComponentProp:!0,externalForwardedProps:Xe,ownerState:me,className:bn(Te.root,w),ref:n}),[mt,ct]=Xn("backdrop",{elementType:Xve,shouldForwardComponentProp:!0,externalForwardedProps:Xe,ownerState:me}),[st,bt]=Xn("paper",{elementType:e_e,shouldForwardComponentProp:!0,externalForwardedProps:Xe,ownerState:me,className:bn(Te.paper,U.className)}),[At,Tt]=Xn("container",{elementType:Jve,externalForwardedProps:Xe,ownerState:me,className:Te.container}),[Wt,nn]=Xn("transition",{elementType:d$,externalForwardedProps:Xe,ownerState:me,additionalProps:{appear:!0,in:B,timeout:ce,role:"presentation"}});return J.jsx(Ee,{closeAfterTransition:!0,slots:{backdrop:mt},slotProps:{backdrop:{transitionDuration:ce,as:f,...ct}},disableEscapeKeyDown:S,onClose:z,open:B,onClick:ke,...ft,...re,children:J.jsx(Wt,{...nn,children:J.jsx(At,{onMouseDown:_e,...Tt,children:J.jsx(st,{as:F,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":Ne,"aria-modal":u,...bt,children:J.jsx(kX.Provider,{value:Qe,children:_})})})})})});function n_e(t){return Un("MuiDialogActions",t)}Yn("MuiDialogActions",["root","spacing"]);const r_e=t=>{const{classes:e,disableSpacing:n}=t;return Zn({root:["root",!n&&"spacing"]},n_e,e)},i_e=Yt("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),o_e=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:o=!1,...a}=r,s={...r,disableSpacing:o},u=r_e(s);return J.jsx(i_e,{className:bn(u.root,i),ownerState:s,ref:n,...a})});function s_e(t){return Un("MuiDialogContent",t)}Yn("MuiDialogContent",["root","dividers"]);function a_e(t){return Un("MuiDialogTitle",t)}const l_e=Yn("MuiDialogTitle",["root"]),c_e=t=>{const{classes:e,dividers:n}=t;return Zn({root:["root",n&&"dividers"]},s_e,e)},u_e=Yt("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(ar(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${l_e.root} + &`]:{paddingTop:0}}}]}))),h_e=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiDialogContent"}),{className:i,dividers:o=!1,...a}=r,s={...r,dividers:o},u=c_e(s);return J.jsx(u_e,{className:bn(u.root,i),ownerState:s,ref:n,...a})}),d_e=t=>{const{classes:e}=t;return Zn({root:["root"]},a_e,e)},f_e=Yt(br,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),p_e=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiDialogTitle"}),{className:i,id:o,...a}=r,s=r,u=d_e(s),{titleId:f=o}=Q.useContext(kX);return J.jsx(f_e,{component:"h2",className:bn(u.root,i),ownerState:s,ref:n,variant:"h6",id:o??f,...a})});function m_e(t){return Un("MuiDivider",t)}const q7=Yn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),g_e=t=>{const{absolute:e,children:n,classes:r,flexItem:i,light:o,orientation:a,textAlign:s,variant:u}=t;return Zn({root:["root",e&&"absolute",u,o&&"light",a==="vertical"&&"vertical",i&&"flexItem",n&&"withChildren",n&&a==="vertical"&&"withChildrenVertical",s==="right"&&a!=="vertical"&&"textAlignRight",s==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},m_e,r)},y_e=Yt("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,n.orientation==="vertical"&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&n.orientation==="vertical"&&e.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&e.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&e.textAlignLeft]}})(ar(({theme:t})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.alpha((t.vars||t).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),v_e=Yt("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,n.orientation==="vertical"&&e.wrapperVertical]}})(ar(({theme:t})=>({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}}]}))),df=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiDivider"}),{absolute:i=!1,children:o,className:a,orientation:s="horizontal",component:u=o||s==="vertical"?"div":"hr",flexItem:f=!1,light:g=!1,role:_=u!=="hr"?"separator":void 0,textAlign:w="center",variant:S="fullWidth",...E}=r,A={...r,absolute:i,component:u,flexItem:f,light:g,orientation:s,role:_,textAlign:w,variant:S},R=g_e(A);return J.jsx(y_e,{as:u,className:bn(R.root,a),role:_,ref:n,ownerState:A,"aria-orientation":_==="separator"&&(u!=="hr"||s==="vertical")?s:void 0,...E,children:o?J.jsx(v_e,{className:R.wrapper,ownerState:A,children:o}):null})});df&&(df.muiSkipListHighlight=!0);function __e(t,e,n){const r=e.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=vf(e);let a;if(e.fakeTransform)a=e.fakeTransform;else{const f=o.getComputedStyle(e);a=f.getPropertyValue("-webkit-transform")||f.getPropertyValue("transform")}let s=0,u=0;if(a&&a!=="none"&&typeof a=="string"){const f=a.split("(")[1].split(")")[0].split(",");s=parseInt(f[4],10),u=parseInt(f[5],10)}return t==="left"?i?`translateX(${i.right+s-r.left}px)`:`translateX(${o.innerWidth+s-r.left}px)`:t==="right"?i?`translateX(-${r.right-i.left-s}px)`:`translateX(-${r.left+r.width-s}px)`:t==="up"?i?`translateY(${i.bottom+u-r.top}px)`:`translateY(${o.innerHeight+u-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-u}px)`:`translateY(-${r.top+r.height-u}px)`}function b_e(t){return typeof t=="function"?t():t}function jE(t,e,n){const r=b_e(n),i=__e(t,e,r);i&&(e.style.webkitTransform=i,e.style.transform=i)}const x_e=Q.forwardRef(function(e,n){const r=hm(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:s=!0,children:u,container:f,direction:g="down",easing:_=i,in:w,onEnter:S,onEntered:E,onEntering:A,onExit:R,onExited:$,onExiting:z,style:B,timeout:F=o,TransitionComponent:U=rd,...q}=e,H=Q.useRef(null),ne=ts(Pb(u),H,n),ie=Ne=>Qe=>{Ne&&(Qe===void 0?Ne(H.current):Ne(H.current,Qe))},ce=ie((Ne,Qe)=>{jE(g,Ne,f),q6(Ne),S&&S(Ne,Qe)}),xe=ie((Ne,Qe)=>{const Se=D0({timeout:F,style:B,easing:_},{mode:"enter"});Ne.style.webkitTransition=r.transitions.create("-webkit-transform",{...Se}),Ne.style.transition=r.transitions.create("transform",{...Se}),Ne.style.webkitTransform="none",Ne.style.transform="none",A&&A(Ne,Qe)}),re=ie(E),me=ie(z),Te=ie(Ne=>{const Qe=D0({timeout:F,style:B,easing:_},{mode:"exit"});Ne.style.webkitTransition=r.transitions.create("-webkit-transform",Qe),Ne.style.transition=r.transitions.create("transform",Qe),jE(g,Ne,f),R&&R(Ne)}),ye=ie(Ne=>{Ne.style.webkitTransition="",Ne.style.transition="",$&&$(Ne)}),_e=Ne=>{a&&a(H.current,Ne)},ke=Q.useCallback(()=>{H.current&&jE(g,H.current,f)},[g,f]);return Q.useEffect(()=>{if(w||g==="down"||g==="right")return;const Ne=Q6(()=>{H.current&&jE(g,H.current,f)}),Qe=vf(H.current);return Qe.addEventListener("resize",Ne),()=>{Ne.clear(),Qe.removeEventListener("resize",Ne)}},[g,w,f]),Q.useEffect(()=>{w||ke()},[w,ke]),J.jsx(U,{nodeRef:H,onEnter:ce,onEntered:re,onEntering:xe,onExit:Te,onExited:ye,onExiting:me,addEndListener:_e,appear:s,in:w,timeout:F,...q,children:(Ne,{ownerState:Qe,...Se})=>Q.cloneElement(u,{ref:ne,style:{visibility:Ne==="exited"&&!w?"hidden":void 0,...B,...u.props.style},...Se})})});function w_e(t){return Un("MuiDrawer",t)}Yn("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const EX=(t,e)=>{const{ownerState:n}=t;return[e.root,(n.variant==="permanent"||n.variant==="persistent")&&e.docked,e.modal]},O_e=t=>{const{classes:e,anchor:n,variant:r}=t,i={root:["root",`anchor${Zt(n)}`],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Zt(n)}`,r!=="temporary"&&`paperAnchorDocked${Zt(n)}`]};return Zn(i,w_e,e)},S_e=Yt(nN,{name:"MuiDrawer",slot:"Root",overridesResolver:EX})(ar(({theme:t})=>({zIndex:(t.vars||t).zIndex.drawer}))),C_e=Yt("div",{shouldForwardProp:uc,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:EX})({flex:"0 0 auto"}),T_e=Yt(hc,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`paperAnchor${Zt(n.anchor)}`],n.variant!=="temporary"&&e[`paperAnchorDocked${Zt(n.anchor)}`]]}})(ar(({theme:t})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:e})=>e.anchor==="left"&&e.variant!=="temporary",style:{borderRight:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="top"&&e.variant!=="temporary",style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="right"&&e.variant!=="temporary",style:{borderLeft:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="bottom"&&e.variant!=="temporary",style:{borderTop:`1px solid ${(t.vars||t).palette.divider}`}}]}))),AX={left:"right",right:"left",top:"down",bottom:"up"};function k_e(t){return["left","right"].includes(t)}function E_e({direction:t},e){return t==="rtl"&&k_e(e)?AX[e]:e}const A_e=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiDrawer"}),i=hm(),o=qM(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:u,children:f,className:g,elevation:_=16,hideBackdrop:w=!1,ModalProps:{BackdropProps:S,...E}={},onClose:A,open:R=!1,PaperProps:$={},SlideProps:z,TransitionComponent:B,transitionDuration:F=a,variant:U="temporary",slots:q={},slotProps:H={},...ne}=r,ie=Q.useRef(!1);Q.useEffect(()=>{ie.current=!0},[]);const ce=E_e({direction:o?"rtl":"ltr"},s),re={...r,anchor:s,elevation:_,open:R,variant:U,...ne},me=O_e(re),Te={slots:{transition:B,...q},slotProps:{paper:$,transition:z,...H,backdrop:rX(H.backdrop||{...u,...S},{transitionDuration:F})}},[ye,_e]=Xn("root",{ref:n,elementType:S_e,className:bn(me.root,me.modal,g),shouldForwardComponentProp:!0,ownerState:re,externalForwardedProps:{...Te,...ne,...E},additionalProps:{open:R,onClose:A,hideBackdrop:w,slots:{backdrop:Te.slots.backdrop},slotProps:{backdrop:Te.slotProps.backdrop}}}),[ke,Ne]=Xn("paper",{elementType:T_e,shouldForwardComponentProp:!0,className:bn(me.paper,$.className),ownerState:re,externalForwardedProps:Te,additionalProps:{elevation:U==="temporary"?_:0,square:!0,...U==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[Qe,Se]=Xn("docked",{elementType:C_e,ref:n,className:bn(me.root,me.docked,g),ownerState:re,externalForwardedProps:Te,additionalProps:ne}),[Me,Xe]=Xn("transition",{elementType:x_e,ownerState:re,externalForwardedProps:Te,additionalProps:{in:R,direction:AX[ce],timeout:F,appear:ie.current}}),Ee=J.jsx(ke,{...Ne,children:f});if(U==="permanent")return J.jsx(Qe,{...Se,children:Ee});const ft=J.jsx(Me,{...Xe,children:Ee});return U==="persistent"?J.jsx(Qe,{...Se,children:ft}):J.jsx(ye,{..._e,children:ft})}),P_e=t=>{const{classes:e,disableUnderline:n,startAdornment:r,endAdornment:i,size:o,hiddenLabel:a,multiline:s}=t,u={root:["root",!n&&"underline",r&&"adornedStart",i&&"adornedEnd",o==="small"&&`size${Zt(o)}`,a&&"hiddenLabel",s&&"multiline"],input:["input"]},f=Zn(u,I0e,e);return{...e,...f}},M_e=Yt(KM,{shouldForwardProp:t=>uc(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...XM(t,e),!n.disableUnderline&&e.underline]}})(ar(({theme:t})=>{const e=t.palette.mode==="light",n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${y_.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${y_.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:o},variants:[{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${y_.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${y_.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline):n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${y_.disabled}, .${y_.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${y_.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Hs()).map(([a])=>({props:{disableUnderline:!1,color:a},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[a]?.main}`}}})),{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:12}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:12}},{props:({ownerState:a})=>a.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:a,size:s})=>a.multiline&&s==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel&&a.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),R_e=Yt(JM,{name:"MuiFilledInput",slot:"Input",overridesResolver:YM})(ar(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),rN=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:o={},componentsProps:a,fullWidth:s=!1,hiddenLabel:u,inputComponent:f="input",multiline:g=!1,slotProps:_,slots:w={},type:S="text",...E}=r,A={...r,disableUnderline:i,fullWidth:s,inputComponent:f,multiline:g,type:S},R=P_e(r),$={root:{ownerState:A},input:{ownerState:A}},z=_??a?Pa($,_??a):$,B=w.root??o.Root??M_e,F=w.input??o.Input??R_e;return J.jsx(tN,{slots:{root:B,input:F},slotProps:z,fullWidth:s,inputComponent:f,multiline:g,ref:n,type:S,...E,classes:R})});rN.muiName="Input";function I_e(t){return Un("MuiFormControl",t)}Yn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const D_e=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${Zt(n)}`,r&&"fullWidth"]};return Zn(i,I_e,e)},L_e=Yt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`margin${Zt(n.margin)}`],n.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),$_e=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiFormControl"}),{children:i,className:o,color:a="primary",component:s="div",disabled:u=!1,error:f=!1,focused:g,fullWidth:_=!1,hiddenLabel:w=!1,margin:S="none",required:E=!1,size:A="medium",variant:R="outlined",...$}=r,z={...r,color:a,component:s,disabled:u,error:f,fullWidth:_,hiddenLabel:w,margin:S,required:E,size:A,variant:R},B=D_e(z),[F,U]=Q.useState(()=>{let ye=!1;return i&&Q.Children.forEach(i,_e=>{if(!Y2(_e,["Input","Select"]))return;const ke=Y2(_e,["Select"])?_e.props.input:_e;ke&&E0e(ke.props)&&(ye=!0)}),ye}),[q,H]=Q.useState(()=>{let ye=!1;return i&&Q.Children.forEach(i,_e=>{Y2(_e,["Input","Select"])&&(WP(_e.props,!0)||WP(_e.props.inputProps,!0))&&(ye=!0)}),ye}),[ne,ie]=Q.useState(!1);u&&ne&&ie(!1);const ce=g!==void 0&&!u?g:ne;let xe;Q.useRef(!1);const re=Q.useCallback(()=>{H(!0)},[]),me=Q.useCallback(()=>{H(!1)},[]),Te=Q.useMemo(()=>({adornedStart:F,setAdornedStart:U,color:a,disabled:u,error:f,filled:q,focused:ce,fullWidth:_,hiddenLabel:w,size:A,onBlur:()=>{ie(!1)},onFocus:()=>{ie(!0)},onEmpty:me,onFilled:re,registerEffect:xe,required:E,variant:R}),[F,a,u,f,q,ce,_,w,xe,me,re,E,A,R]);return J.jsx(eN.Provider,{value:Te,children:J.jsx(L_e,{as:s,ownerState:z,className:bn(B.root,o),ref:n,...$,children:i})})});function z_e(t){return Un("MuiFormControlLabel",t)}const D2=Yn("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),N_e=t=>{const{classes:e,disabled:n,labelPlacement:r,error:i,required:o}=t,a={root:["root",n&&"disabled",`labelPlacement${Zt(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return Zn(a,z_e,e)},B_e=Yt("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${D2.label}`]:e.label},e.root,e[`labelPlacement${Zt(n.labelPlacement)}`]]}})(ar(({theme:t})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${D2.disabled}`]:{cursor:"default"},[`& .${D2.label}`]:{[`&.${D2.disabled}`]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),F_e=Yt("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(ar(({theme:t})=>({[`&.${D2.error}`]:{color:(t.vars||t).palette.error.main}}))),iN=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiFormControlLabel"}),{checked:i,className:o,componentsProps:a={},control:s,disabled:u,disableTypography:f,inputRef:g,label:_,labelPlacement:w="end",name:S,onChange:E,required:A,slots:R={},slotProps:$={},value:z,...B}=r,F=G0(),U=u??s.props.disabled??F?.disabled,q=A??s.props.required,H={disabled:U,required:q};["checked","name","onChange","value","inputRef"].forEach(ye=>{typeof s.props[ye]>"u"&&typeof r[ye]<"u"&&(H[ye]=r[ye])});const ne=Mb({props:r,muiFormControl:F,states:["error"]}),ie={...r,disabled:U,labelPlacement:w,required:q,error:ne.error},ce=N_e(ie),xe={slots:R,slotProps:{...a,...$}},[re,me]=Xn("typography",{elementType:br,externalForwardedProps:xe,ownerState:ie});let Te=_;return Te!=null&&Te.type!==br&&!f&&(Te=J.jsx(re,{component:"span",...me,className:bn(ce.label,me?.className),children:Te})),J.jsxs(B_e,{className:bn(ce.root,o),ownerState:ie,ref:n,...B,children:[Q.cloneElement(s,H),q?J.jsxs("div",{children:[Te,J.jsxs(F_e,{ownerState:ie,"aria-hidden":!0,className:ce.asterisk,children:["","*"]})]}):Te]})});function j_e(t){return Un("MuiFormHelperText",t)}const W7=Yn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var H7;const V_e=t=>{const{classes:e,contained:n,size:r,disabled:i,error:o,filled:a,focused:s,required:u}=t,f={root:["root",i&&"disabled",o&&"error",r&&`size${Zt(r)}`,n&&"contained",s&&"focused",a&&"filled",u&&"required"]};return Zn(f,j_e,e)},Q_e=Yt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${Zt(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(ar(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${W7.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${W7.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),U_e=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiFormHelperText"}),{children:i,className:o,component:a="p",disabled:s,error:u,filled:f,focused:g,margin:_,required:w,variant:S,...E}=r,A=G0(),R=Mb({props:r,muiFormControl:A,states:["variant","size","disabled","error","filled","focused","required"]}),$={...r,component:a,contained:R.variant==="filled"||R.variant==="outlined",variant:R.variant,size:R.size,disabled:R.disabled,error:R.error,filled:R.filled,focused:R.focused,required:R.required};delete $.ownerState;const z=V_e($);return J.jsx(Q_e,{as:a,className:bn(z.root,o),ref:n,...E,ownerState:$,children:i===" "?H7||(H7=J.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})});function Z_e(t){return Un("MuiFormLabel",t)}const tC=Yn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),q_e=t=>{const{classes:e,color:n,focused:r,disabled:i,error:o,filled:a,required:s}=t,u={root:["root",`color${Zt(n)}`,i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]};return Zn(u,Z_e,e)},W_e=Yt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled]}})(ar(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(Hs()).map(([e])=>({props:{color:e},style:{[`&.${tC.focused}`]:{color:(t.vars||t).palette[e].main}}})),{props:{},style:{[`&.${tC.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${tC.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),H_e=Yt("span",{name:"MuiFormLabel",slot:"Asterisk"})(ar(({theme:t})=>({[`&.${tC.error}`]:{color:(t.vars||t).palette.error.main}}))),G_e=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiFormLabel"}),{children:i,className:o,color:a,component:s="label",disabled:u,error:f,filled:g,focused:_,required:w,...S}=r,E=G0(),A=Mb({props:r,muiFormControl:E,states:["color","required","focused","disabled","error","filled"]}),R={...r,color:A.color||"primary",component:s,disabled:A.disabled,error:A.error,filled:A.filled,focused:A.focused,required:A.required},$=q_e(R);return J.jsxs(W_e,{as:s,ownerState:R,className:bn($.root,o),ref:n,...S,children:[i,A.required&&J.jsxs(H_e,{ownerState:R,"aria-hidden":!0,className:$.asterisk,children:["","*"]})]})}),A_=eme({createStyledComponent:Yt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.container&&e.container]}}),componentName:"MuiGrid",useThemeProps:t=>Hn({props:t,name:"MuiGrid"}),useTheme:hm});function p$(t){return`scale(${t}, ${t**2})`}const X_e={entering:{opacity:1,transform:p$(1)},entered:{opacity:1,transform:"none"}},x3=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),HP=Q.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:a,in:s,onEnter:u,onEntered:f,onEntering:g,onExit:_,onExited:w,onExiting:S,style:E,timeout:A="auto",TransitionComponent:R=rd,...$}=e,z=B_(),B=Q.useRef(),F=hm(),U=Q.useRef(null),q=ts(U,Pb(o),n),H=ye=>_e=>{if(ye){const ke=U.current;_e===void 0?ye(ke):ye(ke,_e)}},ne=H(g),ie=H((ye,_e)=>{q6(ye);const{duration:ke,delay:Ne,easing:Qe}=D0({style:E,timeout:A,easing:a},{mode:"enter"});let Se;A==="auto"?(Se=F.transitions.getAutoHeightDuration(ye.clientHeight),B.current=Se):Se=ke,ye.style.transition=[F.transitions.create("opacity",{duration:Se,delay:Ne}),F.transitions.create("transform",{duration:x3?Se:Se*.666,delay:Ne,easing:Qe})].join(","),u&&u(ye,_e)}),ce=H(f),xe=H(S),re=H(ye=>{const{duration:_e,delay:ke,easing:Ne}=D0({style:E,timeout:A,easing:a},{mode:"exit"});let Qe;A==="auto"?(Qe=F.transitions.getAutoHeightDuration(ye.clientHeight),B.current=Qe):Qe=_e,ye.style.transition=[F.transitions.create("opacity",{duration:Qe,delay:ke}),F.transitions.create("transform",{duration:x3?Qe:Qe*.666,delay:x3?ke:ke||Qe*.333,easing:Ne})].join(","),ye.style.opacity=0,ye.style.transform=p$(.75),_&&_(ye)}),me=H(w),Te=ye=>{A==="auto"&&z.start(B.current||0,ye),r&&r(U.current,ye)};return J.jsx(R,{appear:i,in:s,nodeRef:U,onEnter:ie,onEntered:ce,onEntering:ne,onExit:re,onExited:me,onExiting:xe,addEndListener:Te,timeout:A==="auto"?null:A,...$,children:(ye,{ownerState:_e,...ke})=>Q.cloneElement(o,{style:{opacity:0,transform:p$(.75),visibility:ye==="exited"&&!s?"hidden":void 0,...X_e[ye],...E,...o.props.style},ref:q,...ke})})});HP&&(HP.muiSupportAuto=!0);const Y_e=t=>{const{classes:e,disableUnderline:n}=t,i=Zn({root:["root",!n&&"underline"],input:["input"]},M0e,e);return{...e,...i}},K_e=Yt(KM,{shouldForwardProp:t=>uc(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...XM(t,e),!n.disableUnderline&&e.underline]}})(ar(({theme:t})=>{let n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${i2.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${i2.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${i2.disabled}, .${i2.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${i2.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(Hs()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}}))]}})),J_e=Yt(JM,{name:"MuiInput",slot:"Input",overridesResolver:YM})({}),oN=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiInput"}),{disableUnderline:i=!1,components:o={},componentsProps:a,fullWidth:s=!1,inputComponent:u="input",multiline:f=!1,slotProps:g,slots:_={},type:w="text",...S}=r,E=Y_e(r),R={root:{ownerState:{disableUnderline:i}}},$=g??a?Pa(g??a,R):R,z=_.root??o.Root??K_e,B=_.input??o.Input??J_e;return J.jsx(tN,{slots:{root:z,input:B},slotProps:$,fullWidth:s,inputComponent:u,multiline:f,ref:n,type:w,...S,classes:E})});oN.muiName="Input";function ebe(t){return Un("MuiInputLabel",t)}Yn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const tbe=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:o,variant:a,required:s}=t,u={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&r!=="medium"&&`size${Zt(r)}`,a],asterisk:[s&&"asterisk"]},f=Zn(u,ebe,e);return{...e,...f}},nbe=Yt(G_e,{shouldForwardProp:t=>uc(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${tC.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(ar(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:n,size:r})=>e==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),rbe=Q.forwardRef(function(e,n){const r=Hn({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,margin:o,shrink:a,variant:s,className:u,...f}=r,g=G0();let _=a;typeof _>"u"&&g&&(_=g.filled||g.focused||g.adornedStart);const w=Mb({props:r,muiFormControl:g,states:["size","variant","required","focused"]}),S={...r,disableAnimation:i,formControl:g,shrink:_,size:w.size,variant:w.variant,required:w.required,focused:w.focused},E=tbe(S);return J.jsx(nbe,{"data-shrink":_,ref:n,className:bn(E.root,u),...f,ownerState:S,classes:E})});function ibe(t){return Un("MuiLink",t)}const obe=Yn("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),sbe=({theme:t,ownerState:e})=>{const n=e.color;if("colorSpace"in t&&t.colorSpace){const o=Ip(t,`palette.${n}.main`)||Ip(t,`palette.${n}`)||e.color;return t.alpha(o,.4)}const r=Ip(t,`palette.${n}.main`,!1)||Ip(t,`palette.${n}`,!1)||e.color,i=Ip(t,`palette.${n}.mainChannel`)||Ip(t,`palette.${n}Channel`);return"vars"in t&&i?`rgba(${i} / 0.4)`:PC(r,.4)},G7={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},abe=t=>{const{classes:e,component:n,focusVisible:r,underline:i}=t,o={root:["root",`underline${Zt(i)}`,n==="button"&&"button",r&&"focusVisible"]};return Zn(o,ibe,e)},lbe=Yt(br,{name:"MuiLink",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`underline${Zt(n.underline)}`],n.component==="button"&&e.button]}})(ar(({theme:t})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:e,ownerState:n})=>e==="always"&&n.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},{props:({underline:e,ownerState:n})=>e==="always"&&n.color==="inherit",style:t.colorSpace?{textDecorationColor:t.alpha("currentColor",.4)}:null},...Object.entries(t.palette).filter(Hs()).map(([e])=>({props:{underline:"always",color:e},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette[e].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(t.vars||t).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${obe.focusVisible}`]:{outline:"auto"}}}]}))),X7=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiLink"}),i=hm(),{className:o,color:a="primary",component:s="a",onBlur:u,onFocus:f,TypographyClasses:g,underline:_="always",variant:w="inherit",sx:S,...E}=r,[A,R]=Q.useState(!1),$=U=>{_w(U.target)||R(!1),u&&u(U)},z=U=>{_w(U.target)&&R(!0),f&&f(U)},B={...r,color:a,component:s,focusVisible:A,underline:_,variant:w},F=abe(B);return J.jsx(lbe,{color:a,className:bn(F.root,o),classes:g,component:s,onBlur:$,onFocus:z,ref:n,ownerState:B,variant:w,...E,sx:[...G7[a]===void 0?[{color:a}]:[],...Array.isArray(S)?S:[S]],style:{...E.style,..._==="always"&&a!=="inherit"&&!G7[a]&&{"--Link-underlineColor":sbe({theme:i,ownerState:B})}}})}),qh=Q.createContext({});function cbe(t){return Un("MuiList",t)}Yn("MuiList",["root","padding","dense","subheader"]);const ube=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return Zn({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},cbe,e)},hbe=Yt("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),mO=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiList"}),{children:i,className:o,component:a="ul",dense:s=!1,disablePadding:u=!1,subheader:f,...g}=r,_=Q.useMemo(()=>({dense:s}),[s]),w={...r,component:a,dense:s,disablePadding:u},S=ube(w);return J.jsx(qh.Provider,{value:_,children:J.jsxs(hbe,{as:a,className:bn(S.root,o),ref:n,ownerState:w,...g,children:[f,i]})})});function dbe(t){return Un("MuiListItem",t)}Yn("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function fbe(t){return Un("MuiListItemButton",t)}const E1=Yn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),pbe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},mbe=t=>{const{alignItems:e,classes:n,dense:r,disabled:i,disableGutters:o,divider:a,selected:s}=t,f=Zn({root:["root",r&&"dense",!o&&"gutters",a&&"divider",i&&"disabled",e==="flex-start"&&"alignItemsFlexStart",s&&"selected"]},fbe,n);return{...n,...f}},gbe=Yt(rb,{shouldForwardProp:t=>uc(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:pbe})(ar(({theme:t})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${E1.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),[`&.${E1.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}},[`&.${E1.selected}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity)}},[`&.${E1.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${E1.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),sN=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:a="div",children:s,dense:u=!1,disableGutters:f=!1,divider:g=!1,focusVisibleClassName:_,selected:w=!1,className:S,...E}=r,A=Q.useContext(qh),R=Q.useMemo(()=>({dense:u||A.dense||!1,alignItems:i,disableGutters:f}),[i,A.dense,u,f]),$=Q.useRef(null);yf(()=>{o&&$.current&&$.current.focus()},[o]);const z={...r,alignItems:i,dense:R.dense,disableGutters:f,divider:g,selected:w},B=mbe(z),F=ts($,n);return J.jsx(qh.Provider,{value:R,children:J.jsx(gbe,{ref:F,href:E.href||E.to,component:(E.href||E.to)&&a==="div"?"button":a,focusVisibleClassName:bn(B.focusVisible,_),ownerState:z,className:bn(B.root,S),...E,classes:B,children:s})})});function ybe(t){return Un("MuiListItemSecondaryAction",t)}Yn("MuiListItemSecondaryAction",["root","disableGutters"]);const vbe=t=>{const{disableGutters:e,classes:n}=t;return Zn({root:["root",e&&"disableGutters"]},ybe,n)},_be=Yt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:t})=>t.disableGutters,style:{right:0}}]}),PX=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiListItemSecondaryAction"}),{className:i,...o}=r,a=Q.useContext(qh),s={...r,disableGutters:a.disableGutters},u=vbe(s);return J.jsx(_be,{className:bn(u.root,i),ownerState:s,ref:n,...o})});PX.muiName="ListItemSecondaryAction";const bbe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.hasSecondaryAction&&e.secondaryAction]},xbe=t=>{const{alignItems:e,classes:n,dense:r,disableGutters:i,disablePadding:o,divider:a,hasSecondaryAction:s}=t;return Zn({root:["root",r&&"dense",!i&&"gutters",!o&&"padding",a&&"divider",e==="flex-start"&&"alignItemsFlexStart",s&&"secondaryAction"],container:["container"],secondaryAction:["secondaryAction"]},dbe,n)},wbe=Yt("div",{name:"MuiListItem",slot:"Root",overridesResolver:bbe})(ar(({theme:t})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${E1.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),Obe=Yt("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),GP=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiListItem"}),{alignItems:i="center",children:o,className:a,component:s,components:u={},componentsProps:f={},ContainerComponent:g="li",ContainerProps:{className:_,...w}={},dense:S=!1,disableGutters:E=!1,disablePadding:A=!1,divider:R=!1,secondaryAction:$,slotProps:z={},slots:B={},...F}=r,U=Q.useContext(qh),q=Q.useMemo(()=>({dense:S||U.dense||!1,alignItems:i,disableGutters:E}),[i,U.dense,S,E]),H=Q.useRef(null),ne=Q.Children.toArray(o),ie=ne.length&&Y2(ne[ne.length-1],["ListItemSecondaryAction"]),ce={...r,alignItems:i,dense:q.dense,disableGutters:E,disablePadding:A,divider:R,hasSecondaryAction:ie},xe=xbe(ce),re=ts(H,n),me={slots:B,slotProps:z},[Te,ye]=Xn("secondaryAction",{elementType:PX,externalForwardedProps:me,ownerState:ce,className:xe.secondaryAction}),_e=B.root||u.Root||wbe,ke=z.root||f.root||{},Ne={className:bn(xe.root,ke.className,a),...F};let Qe=s||"li";return ie?(Qe=!Ne.component&&!s?"div":Qe,g==="li"&&(Qe==="li"?Qe="div":Ne.component==="li"&&(Ne.component="div")),J.jsx(qh.Provider,{value:q,children:J.jsxs(Obe,{as:g,className:bn(xe.container,_),ref:re,ownerState:ce,...w,children:[J.jsx(_e,{...ke,...!vw(_e)&&{as:Qe,ownerState:{...ce,...ke.ownerState}},...Ne,children:ne}),ne.pop()]})})):J.jsx(qh.Provider,{value:q,children:J.jsxs(_e,{...ke,as:Qe,ref:re,...!vw(_e)&&{ownerState:{...ce,...ke.ownerState}},...Ne,children:[ne,$&&J.jsx(Te,{...ye,children:$})]})})});function Sbe(t){return Un("MuiListItemAvatar",t)}Yn("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Cbe=t=>{const{alignItems:e,classes:n}=t;return Zn({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},Sbe,n)},Tbe=Yt("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),kbe=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiListItemAvatar"}),{className:i,...o}=r,a=Q.useContext(qh),s={...r,alignItems:a.alignItems},u=Cbe(s);return J.jsx(Tbe,{className:bn(u.root,i),ownerState:s,ref:n,...o})});function Ebe(t){return Un("MuiListItemIcon",t)}const Y7=Yn("MuiListItemIcon",["root","alignItemsFlexStart"]),Abe=t=>{const{alignItems:e,classes:n}=t;return Zn({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},Ebe,n)},Pbe=Yt("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(ar(({theme:t})=>({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),MX=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiListItemIcon"}),{className:i,...o}=r,a=Q.useContext(qh),s={...r,alignItems:a.alignItems},u=Abe(s);return J.jsx(Pbe,{className:bn(u.root,i),ownerState:s,ref:n,...o})});function Mbe(t){return Un("MuiListItemText",t)}const B1=Yn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Rbe=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:o}=t;return Zn({root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Mbe,e)},Ibe=Yt("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${B1.primary}`]:e.primary},{[`& .${B1.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${S7.root}:where(& .${B1.primary})`]:{display:"block"},[`.${S7.root}:where(& .${B1.secondary})`]:{display:"block"},variants:[{props:({ownerState:t})=>t.primary&&t.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:56}}]}),Tw=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiListItemText"}),{children:i,className:o,disableTypography:a=!1,inset:s=!1,primary:u,primaryTypographyProps:f,secondary:g,secondaryTypographyProps:_,slots:w={},slotProps:S={},...E}=r,{dense:A}=Q.useContext(qh);let R=u??i,$=g;const z={...r,disableTypography:a,inset:s,primary:!!R,secondary:!!$,dense:A},B=Rbe(z),F={slots:w,slotProps:{primary:f,secondary:_,...S}},[U,q]=Xn("root",{className:bn(B.root,o),elementType:Ibe,externalForwardedProps:{...F,...E},ownerState:z,ref:n}),[H,ne]=Xn("primary",{className:B.primary,elementType:br,externalForwardedProps:F,ownerState:z}),[ie,ce]=Xn("secondary",{className:B.secondary,elementType:br,externalForwardedProps:F,ownerState:z});return R!=null&&R.type!==br&&!a&&(R=J.jsx(H,{variant:A?"body2":"body1",component:ne?.variant?void 0:"span",...ne,children:R})),$!=null&&$.type!==br&&!a&&($=J.jsx(ie,{variant:"body2",color:"textSecondary",...ce,children:$})),J.jsxs(U,{...q,children:[R,$]})});function w3(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function K7(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function RX(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.startsWith(e.keys.join(""))}function o2(t,e,n,r,i,o){let a=!1,s=i(t,e,e?n:!1);for(;s;){if(s===t.firstChild){if(a)return!1;a=!0}const u=r?!1:s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||!RX(s,o)||u)s=i(t,s,n);else return s.focus(),!0}return!1}const Dbe=Q.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:a,className:s,disabledItemsFocusable:u=!1,disableListWrap:f=!1,onKeyDown:g,variant:_="selectedMenu",...w}=e,S=Q.useRef(null),E=Q.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});yf(()=>{i&&S.current.focus()},[i]),Q.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(B,{direction:F})=>{const U=!S.current.style.width;if(B.clientHeight<S.current.clientHeight&&U){const q=`${TX(vf(B))}px`;S.current.style[F==="rtl"?"paddingLeft":"paddingRight"]=q,S.current.style.width=`calc(100% + ${q})`}return S.current}}),[]);const A=B=>{const F=S.current,U=B.key;if(B.ctrlKey||B.metaKey||B.altKey){g&&g(B);return}const H=I2(Yu(F));if(U==="ArrowDown")B.preventDefault(),o2(F,H,f,u,w3);else if(U==="ArrowUp")B.preventDefault(),o2(F,H,f,u,K7);else if(U==="Home")B.preventDefault(),o2(F,null,f,u,w3);else if(U==="End")B.preventDefault(),o2(F,null,f,u,K7);else if(U.length===1){const ne=E.current,ie=U.toLowerCase(),ce=performance.now();ne.keys.length>0&&(ce-ne.lastTime>500?(ne.keys=[],ne.repeating=!0,ne.previousKeyMatched=!0):ne.repeating&&ie!==ne.keys[0]&&(ne.repeating=!1)),ne.lastTime=ce,ne.keys.push(ie);const xe=H&&!ne.repeating&&RX(H,ne);ne.previousKeyMatched&&(xe||o2(F,H,!1,u,w3,ne))?B.preventDefault():ne.previousKeyMatched=!1}g&&g(B)},R=ts(S,n);let $=-1;Q.Children.forEach(a,(B,F)=>{if(!Q.isValidElement(B)){$===F&&($+=1,$>=a.length&&($=-1));return}B.props.disabled||(_==="selectedMenu"&&B.props.selected||$===-1)&&($=F),$===F&&(B.props.disabled||B.props.muiSkipListHighlight||B.type.muiSkipListHighlight)&&($+=1,$>=a.length&&($=-1))});const z=Q.Children.map(a,(B,F)=>{if(F===$){const U={};return o&&(U.autoFocus=!0),B.props.tabIndex===void 0&&_==="selectedMenu"&&(U.tabIndex=0),Q.cloneElement(B,U)}return B});return J.jsx(mO,{role:"menu",ref:R,className:s,onKeyDown:A,tabIndex:i?0:-1,...w,children:z})});function Lbe(t){return Un("MuiPopover",t)}Yn("MuiPopover",["root","paper"]);function J7(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function ej(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function tj(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function VE(t){return typeof t=="function"?t():t}const $be=t=>{const{classes:e}=t;return Zn({root:["root"],paper:["paper"]},Lbe,e)},zbe=Yt(nN,{name:"MuiPopover",slot:"Root"})({}),IX=Yt(hc,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),DX=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiPopover"}),{action:i,anchorEl:o,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:s,anchorReference:u="anchorEl",children:f,className:g,container:_,elevation:w=8,marginThreshold:S=16,open:E,PaperProps:A={},slots:R={},slotProps:$={},transformOrigin:z={vertical:"top",horizontal:"left"},TransitionComponent:B,transitionDuration:F="auto",TransitionProps:U={},disableScrollLock:q=!1,...H}=r,ne=Q.useRef(),ie={...r,anchorOrigin:a,anchorReference:u,elevation:w,marginThreshold:S,transformOrigin:z,TransitionComponent:B,transitionDuration:F,TransitionProps:U},ce=$be(ie),xe=Q.useCallback(()=>{if(u==="anchorPosition")return s;const Tt=VE(o),nn=(Tt&&Tt.nodeType===1?Tt:Yu(ne.current).body).getBoundingClientRect();return{top:nn.top+J7(nn,a.vertical),left:nn.left+ej(nn,a.horizontal)}},[o,a.horizontal,a.vertical,s,u]),re=Q.useCallback(Tt=>({vertical:J7(Tt,z.vertical),horizontal:ej(Tt,z.horizontal)}),[z.horizontal,z.vertical]),me=Q.useCallback(Tt=>{const Wt={width:Tt.offsetWidth,height:Tt.offsetHeight},nn=re(Wt);if(u==="none")return{top:null,left:null,transformOrigin:tj(nn)};const An=xe();let rn=An.top-nn.vertical,Jt=An.left-nn.horizontal;const Mn=rn+Wt.height,vn=Jt+Wt.width,Nn=vf(VE(o)),lr=Nn.innerHeight-S,rr=Nn.innerWidth-S;if(S!==null&&rn<S){const Ue=rn-S;rn-=Ue,nn.vertical+=Ue}else if(S!==null&&Mn>lr){const Ue=Mn-lr;rn-=Ue,nn.vertical+=Ue}if(S!==null&&Jt<S){const Ue=Jt-S;Jt-=Ue,nn.horizontal+=Ue}else if(vn>rr){const Ue=vn-rr;Jt-=Ue,nn.horizontal+=Ue}return{top:`${Math.round(rn)}px`,left:`${Math.round(Jt)}px`,transformOrigin:tj(nn)}},[o,u,xe,re,S]),[Te,ye]=Q.useState(E),_e=Q.useCallback(()=>{const Tt=ne.current;if(!Tt)return;const Wt=me(Tt);Wt.top!==null&&Tt.style.setProperty("top",Wt.top),Wt.left!==null&&(Tt.style.left=Wt.left),Tt.style.transformOrigin=Wt.transformOrigin,ye(!0)},[me]);Q.useEffect(()=>(q&&window.addEventListener("scroll",_e),()=>window.removeEventListener("scroll",_e)),[o,q,_e]);const ke=()=>{_e()},Ne=()=>{ye(!1)};Q.useEffect(()=>{E&&_e()}),Q.useImperativeHandle(i,()=>E?{updatePosition:()=>{_e()}}:null,[E,_e]),Q.useEffect(()=>{if(!E)return;const Tt=Q6(()=>{_e()}),Wt=vf(VE(o));return Wt.addEventListener("resize",Tt),()=>{Tt.clear(),Wt.removeEventListener("resize",Tt)}},[o,E,_e]);let Qe=F;const Se={slots:{transition:B,...R},slotProps:{transition:U,paper:A,...$}},[Me,Xe]=Xn("transition",{elementType:HP,externalForwardedProps:Se,ownerState:ie,getSlotProps:Tt=>({...Tt,onEntering:(Wt,nn)=>{Tt.onEntering?.(Wt,nn),ke()},onExited:Wt=>{Tt.onExited?.(Wt),Ne()}}),additionalProps:{appear:!0,in:E}});F==="auto"&&!Me.muiSupportAuto&&(Qe=void 0);const Ee=_||(o?Yu(VE(o)).body:void 0),[ft,{slots:mt,slotProps:ct,...st}]=Xn("root",{ref:n,elementType:zbe,externalForwardedProps:{...Se,...H},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:R.backdrop},slotProps:{backdrop:rX(typeof $.backdrop=="function"?$.backdrop(ie):$.backdrop,{invisible:!0})},container:Ee,open:E},ownerState:ie,className:bn(ce.root,g)}),[bt,At]=Xn("paper",{ref:ne,className:ce.paper,elementType:IX,externalForwardedProps:Se,shouldForwardComponentProp:!0,additionalProps:{elevation:w,style:Te?void 0:{opacity:0}},ownerState:ie});return J.jsx(ft,{...st,...!vw(ft)&&{slots:mt,slotProps:ct,disableScrollLock:q},children:J.jsx(Me,{...Xe,timeout:Qe,children:J.jsx(bt,{...At,children:f})})})});function Nbe(t){return Un("MuiMenu",t)}Yn("MuiMenu",["root","paper","list"]);const Bbe={vertical:"top",horizontal:"right"},Fbe={vertical:"top",horizontal:"left"},jbe=t=>{const{classes:e}=t;return Zn({root:["root"],paper:["paper"],list:["list"]},Nbe,e)},Vbe=Yt(DX,{shouldForwardProp:t=>uc(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),Qbe=Yt(IX,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Ube=Yt(Dbe,{name:"MuiMenu",slot:"List"})({outline:0}),LX=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:o,className:a,disableAutoFocusItem:s=!1,MenuListProps:u={},onClose:f,open:g,PaperProps:_={},PopoverClasses:w,transitionDuration:S="auto",TransitionProps:{onEntering:E,...A}={},variant:R="selectedMenu",slots:$={},slotProps:z={},...B}=r,F=qM(),U={...r,autoFocus:i,disableAutoFocusItem:s,MenuListProps:u,onEntering:E,PaperProps:_,transitionDuration:S,TransitionProps:A,variant:R},q=jbe(U),H=i&&!s&&g,ne=Q.useRef(null),ie=(Qe,Se)=>{ne.current&&ne.current.adjustStyleForScrollbar(Qe,{direction:F?"rtl":"ltr"}),E&&E(Qe,Se)},ce=Qe=>{Qe.key==="Tab"&&(Qe.preventDefault(),f&&f(Qe,"tabKeyDown"))};let xe=-1;Q.Children.map(o,(Qe,Se)=>{Q.isValidElement(Qe)&&(Qe.props.disabled||(R==="selectedMenu"&&Qe.props.selected||xe===-1)&&(xe=Se))});const re={slots:$,slotProps:{list:u,transition:A,paper:_,...z}},me=bX({elementType:$.root,externalSlotProps:z.root,ownerState:U,className:[q.root,a]}),[Te,ye]=Xn("paper",{className:q.paper,elementType:Qbe,externalForwardedProps:re,shouldForwardComponentProp:!0,ownerState:U}),[_e,ke]=Xn("list",{className:bn(q.list,u.className),elementType:Ube,shouldForwardComponentProp:!0,externalForwardedProps:re,getSlotProps:Qe=>({...Qe,onKeyDown:Se=>{ce(Se),Qe.onKeyDown?.(Se)}}),ownerState:U}),Ne=typeof re.slotProps.transition=="function"?re.slotProps.transition(U):re.slotProps.transition;return J.jsx(Vbe,{onClose:f,anchorOrigin:{vertical:"bottom",horizontal:F?"right":"left"},transformOrigin:F?Bbe:Fbe,slots:{root:$.root,paper:Te,backdrop:$.backdrop,...$.transition&&{transition:$.transition}},slotProps:{root:me,paper:ye,backdrop:typeof z.backdrop=="function"?z.backdrop(U):z.backdrop,transition:{...Ne,onEntering:(...Qe)=>{ie(...Qe),Ne?.onEntering?.(...Qe)}}},open:g,ref:n,transitionDuration:S,ownerState:U,...B,classes:w,children:J.jsx(_e,{actions:ne,autoFocus:i&&(xe===-1||s),autoFocusItem:H,variant:R,...ke,children:o})})});function Zbe(t){return Un("MuiMenuItem",t)}const s2=Yn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),qbe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},Wbe=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:o,classes:a}=t,u=Zn({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},Zbe,a);return{...a,...u}},Hbe=Yt(rb,{shouldForwardProp:t=>uc(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:qbe})(ar(({theme:t})=>({...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${s2.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),[`&.${s2.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}},[`&.${s2.selected}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity)}},[`&.${s2.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${s2.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${q7.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${q7.inset}`]:{marginLeft:52},[`& .${B1.root}`]:{marginTop:0,marginBottom:0},[`& .${B1.inset}`]:{paddingLeft:36},[`& .${Y7.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${Y7.root} svg`]:{fontSize:"1.25rem"}}}]}))),nj=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:a=!1,divider:s=!1,disableGutters:u=!1,focusVisibleClassName:f,role:g="menuitem",tabIndex:_,className:w,...S}=r,E=Q.useContext(qh),A=Q.useMemo(()=>({dense:a||E.dense||!1,disableGutters:u}),[E.dense,a,u]),R=Q.useRef(null);yf(()=>{i&&R.current&&R.current.focus()},[i]);const $={...r,dense:A.dense,divider:s,disableGutters:u},z=Wbe(r),B=ts(R,n);let F;return r.disabled||(F=_!==void 0?_:-1),J.jsx(qh.Provider,{value:A,children:J.jsx(Hbe,{ref:B,role:g,tabIndex:F,component:o,focusVisibleClassName:bn(z.focusVisible,f),className:bn(z.root,w),...S,ownerState:$,classes:z})})});function Gbe(t){return Un("MuiNativeSelect",t)}const aN=Yn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Xbe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:a}=t,s={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${Zt(n)}`,o&&"iconOpen",r&&"disabled"]};return Zn(s,Gbe,e)},$X=Yt("select",{name:"MuiNativeSelect"})(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${aN.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Ybe=Yt($X,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:uc,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${aN.multiple}`]:e.multiple}]}})({}),zX=Yt("svg",{name:"MuiNativeSelect"})(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${aN.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Kbe=Yt(zX,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Zt(n.variant)}`],n.open&&e.iconOpen]}})({}),Jbe=Q.forwardRef(function(e,n){const{className:r,disabled:i,error:o,IconComponent:a,inputRef:s,variant:u="standard",...f}=e,g={...e,disabled:i,variant:u,error:o},_=Xbe(g);return J.jsxs(Q.Fragment,{children:[J.jsx(Ybe,{ownerState:g,className:bn(_.select,r),disabled:i,ref:s||n,...f}),e.multiple?null:J.jsx(Kbe,{as:a,ownerState:g,className:_.icon})]})});var rj;const exe=Yt("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:uc})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),txe=Yt("legend",{name:"MuiNotchedOutlined",shouldForwardProp:uc})(ar(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function nxe(t){const{children:e,classes:n,className:r,label:i,notched:o,...a}=t,s=i!=null&&i!=="",u={...t,notched:o,withLabel:s};return J.jsx(exe,{"aria-hidden":!0,className:r,ownerState:u,...a,children:J.jsx(txe,{ownerState:u,children:s?J.jsx("span",{children:i}):rj||(rj=J.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const rxe=t=>{const{classes:e}=t,r=Zn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},R0e,e);return{...e,...r}},ixe=Yt(KM,{shouldForwardProp:t=>uc(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:XM})(ar(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${Op.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${Op.notchedOutline}`]:{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):e}},[`&.${Op.focused} .${Op.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(Hs()).map(([n])=>({props:{color:n},style:{[`&.${Op.focused} .${Op.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}})),{props:{},style:{[`&.${Op.error} .${Op.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${Op.disabled} .${Op.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),oxe=Yt(nxe,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(ar(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):e}})),sxe=Yt(JM,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:YM})(ar(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),lN=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:o=!1,inputComponent:a="input",label:s,multiline:u=!1,notched:f,slots:g={},slotProps:_={},type:w="text",...S}=r,E=rxe(r),A=G0(),R=Mb({props:r,muiFormControl:A,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),$={...r,color:R.color||"primary",disabled:R.disabled,error:R.error,focused:R.focused,formControl:A,fullWidth:o,hiddenLabel:R.hiddenLabel,multiline:u,size:R.size,type:w},z=g.root??i.Root??ixe,B=g.input??i.Input??sxe,[F,U]=Xn("notchedOutline",{elementType:oxe,className:E.notchedOutline,shouldForwardComponentProp:!0,ownerState:$,externalForwardedProps:{slots:g,slotProps:_},additionalProps:{label:s!=null&&s!==""&&R.required?J.jsxs(Q.Fragment,{children:[s,"","*"]}):s}});return J.jsx(tN,{slots:{root:z,input:B},slotProps:_,renderSuffix:q=>J.jsx(F,{...U,notched:typeof f<"u"?f:!!(q.startAdornment||q.filled||q.focused)}),fullWidth:o,inputComponent:a,multiline:u,ref:n,type:w,...S,classes:{...E,notchedOutline:null}})});lN.muiName="Input";function NX(t){return Un("MuiSelect",t)}const a2=Yn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var ij;const axe=Yt($X,{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${a2.select}`]:e.select},{[`&.${a2.select}`]:e[n.variant]},{[`&.${a2.error}`]:e.error},{[`&.${a2.multiple}`]:e.multiple}]}})({[`&.${a2.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),lxe=Yt(zX,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Zt(n.variant)}`],n.open&&e.iconOpen]}})({}),cxe=Yt("input",{shouldForwardProp:t=>nX(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function oj(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function uxe(t){return t==null||typeof t=="string"&&!t.trim()}const hxe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:a}=t,s={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${Zt(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Zn(s,NX,e)},dxe=Q.forwardRef(function(e,n){const{"aria-describedby":r,"aria-label":i,autoFocus:o,autoWidth:a,children:s,className:u,defaultOpen:f,defaultValue:g,disabled:_,displayEmpty:w,error:S=!1,IconComponent:E,inputRef:A,labelId:R,MenuProps:$={},multiple:z,name:B,onBlur:F,onChange:U,onClose:q,onFocus:H,onKeyDown:ne,onMouseDown:ie,onOpen:ce,open:xe,readOnly:re,renderValue:me,required:Te,SelectDisplayProps:ye={},tabIndex:_e,type:ke,value:Ne,variant:Qe="standard",...Se}=e,[Me,Xe]=VP({controlled:Ne,default:g,name:"Select"}),[Ee,ft]=VP({controlled:xe,default:f,name:"Select"}),mt=Q.useRef(null),ct=Q.useRef(null),[st,bt]=Q.useState(null),{current:At}=Q.useRef(xe!=null),[Tt,Wt]=Q.useState(),nn=ts(n,A),An=Q.useCallback(ot=>{ct.current=ot,ot&&bt(ot)},[]),rn=st?.parentNode;Q.useImperativeHandle(nn,()=>({focus:()=>{ct.current.focus()},node:mt.current,value:Me}),[Me]),Q.useEffect(()=>{f&&Ee&&st&&!At&&(Wt(a?null:rn.clientWidth),ct.current.focus())},[st,a]),Q.useEffect(()=>{o&&ct.current.focus()},[o]),Q.useEffect(()=>{if(!R)return;const ot=Yu(ct.current).getElementById(R);if(ot){const $t=()=>{getSelection().isCollapsed&&ct.current.focus()};return ot.addEventListener("click",$t),()=>{ot.removeEventListener("click",$t)}}},[R]);const Jt=(ot,$t)=>{ot?ce&&ce($t):q&&q($t),At||(Wt(a?null:rn.clientWidth),ft(ot))},Mn=ot=>{ie?.(ot),ot.button===0&&(ot.preventDefault(),ct.current.focus(),Jt(!0,ot))},vn=ot=>{Jt(!1,ot)},Nn=Q.Children.toArray(s),lr=ot=>{const $t=Nn.find(an=>an.props.value===ot.target.value);$t!==void 0&&(Xe($t.props.value),U&&U(ot,$t))},rr=ot=>$t=>{let an;if($t.currentTarget.hasAttribute("tabindex")){if(z){an=Array.isArray(Me)?Me.slice():[];const $n=Me.indexOf(ot.props.value);$n===-1?an.push(ot.props.value):an.splice($n,1)}else an=ot.props.value;if(ot.props.onClick&&ot.props.onClick($t),Me!==an&&(Xe(an),U)){const $n=$t.nativeEvent||$t,Er=new $n.constructor($n.type,$n);Object.defineProperty(Er,"target",{writable:!0,value:{value:an,name:B}}),U(Er,ot)}z||Jt(!1,$t)}},Ue=ot=>{re||([" ","ArrowUp","ArrowDown","Enter"].includes(ot.key)&&(ot.preventDefault(),Jt(!0,ot)),ne?.(ot))},Je=st!==null&&Ee,xt=ot=>{!Je&&F&&(Object.defineProperty(ot,"target",{writable:!0,value:{value:Me,name:B}}),F(ot))};delete Se["aria-invalid"];let Et,Vt;const we=[];let ae=!1;(WP({value:Me})||w)&&(me?Et=me(Me):ae=!0);const Y=Nn.map(ot=>{if(!Q.isValidElement(ot))return null;let $t;if(z){if(!Array.isArray(Me))throw new Error(Vg(2));$t=Me.some(an=>oj(an,ot.props.value)),$t&&ae&&we.push(ot.props.children)}else $t=oj(Me,ot.props.value),$t&&ae&&(Vt=ot.props.children);return Q.cloneElement(ot,{"aria-selected":$t?"true":"false",onClick:rr(ot),onKeyUp:an=>{an.key===" "&&an.preventDefault(),ot.props.onKeyUp&&ot.props.onKeyUp(an)},role:"option",selected:$t,value:void 0,"data-value":ot.props.value})});ae&&(z?we.length===0?Et=null:Et=we.reduce((ot,$t,an)=>(ot.push($t),an<we.length-1&&ot.push(", "),ot),[]):Et=Vt);let be=Tt;!a&&At&&st&&(be=rn.clientWidth);let $e;typeof _e<"u"?$e=_e:$e=_?null:0;const ze=ye.id||(B?`mui-component-select-${B}`:void 0),rt={...e,variant:Qe,value:Me,open:Je,error:S},tt=hxe(rt),Ye={...$.PaperProps,...typeof $.slotProps?.paper=="function"?$.slotProps.paper(rt):$.slotProps?.paper},at={...$.MenuListProps,...typeof $.slotProps?.list=="function"?$.slotProps.list(rt):$.slotProps?.list},Ot=fO();return J.jsxs(Q.Fragment,{children:[J.jsx(axe,{as:"div",ref:An,tabIndex:$e,role:"combobox","aria-controls":Je?Ot:void 0,"aria-disabled":_?"true":void 0,"aria-expanded":Je?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[R,ze].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":Te?"true":void 0,"aria-invalid":S?"true":void 0,onKeyDown:Ue,onMouseDown:_||re?null:Mn,onBlur:xt,onFocus:H,...ye,ownerState:rt,className:bn(ye.className,tt.select,u),id:ze,children:uxe(Et)?ij||(ij=J.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):Et}),J.jsx(cxe,{"aria-invalid":S,value:Array.isArray(Me)?Me.join(","):Me,name:B,ref:mt,"aria-hidden":!0,onChange:lr,tabIndex:-1,disabled:_,className:tt.nativeInput,autoFocus:o,required:Te,...Se,ownerState:rt}),J.jsx(lxe,{as:E,className:tt.icon,ownerState:rt}),J.jsx(LX,{id:`menu-${B||""}`,anchorEl:rn,open:Je,onClose:vn,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...$,slotProps:{...$.slotProps,list:{"aria-labelledby":R,role:"listbox","aria-multiselectable":z?"true":void 0,disableListWrap:!0,id:Ot,...at},paper:{...Ye,style:{minWidth:be,...Ye!=null?Ye.style:null}}},children:Y})]})}),fxe=t=>{const{classes:e}=t,r=Zn({root:["root"]},NX,e);return{...e,...r}},cN={name:"MuiSelect",slot:"Root",shouldForwardProp:t=>uc(t)&&t!=="variant"},pxe=Yt(oN,cN)(""),mxe=Yt(lN,cN)(""),gxe=Yt(rN,cN)(""),BX=Q.forwardRef(function(e,n){const r=Hn({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:a={},className:s,defaultOpen:u=!1,displayEmpty:f=!1,IconComponent:g=D0e,id:_,input:w,inputProps:S,label:E,labelId:A,MenuProps:R,multiple:$=!1,native:z=!1,onClose:B,onOpen:F,open:U,renderValue:q,SelectDisplayProps:H,variant:ne="outlined",...ie}=r,ce=z?Jbe:dxe,xe=G0(),re=Mb({props:r,muiFormControl:xe,states:["variant","error"]}),me=re.variant||ne,Te={...r,variant:me,classes:a},ye=fxe(Te),{root:_e,...ke}=ye,Ne=w||{standard:J.jsx(pxe,{ownerState:Te}),outlined:J.jsx(mxe,{label:E,ownerState:Te}),filled:J.jsx(gxe,{ownerState:Te})}[me],Qe=ts(n,Pb(Ne));return J.jsx(Q.Fragment,{children:Q.cloneElement(Ne,{inputComponent:ce,inputProps:{children:o,error:re.error,IconComponent:g,variant:me,type:void 0,multiple:$,...z?{id:_}:{autoWidth:i,defaultOpen:u,displayEmpty:f,labelId:A,MenuProps:R,onClose:B,onOpen:F,open:U,renderValue:q,SelectDisplayProps:{id:_,...H}},...S,classes:S?Pa(ke,S.classes):ke,...w?w.props.inputProps:{}},...($&&z||f)&&me==="outlined"?{notched:!0}:{},ref:Qe,className:bn(Ne.props.className,s,ye.root),...!w&&{variant:me},...ie})})});BX.muiName="Select";function yxe(t){return Un("MuiTooltip",t)}const vs=Yn("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function vxe(t){return Math.round(t*1e5)/1e5}const _xe=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:o}=t,a={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${Zt(o.split("-")[0])}`],arrow:["arrow"]};return Zn(a,yxe,e)},bxe=Yt(wX,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(ar(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${vs.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${vs.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${vs.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${vs.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${vs.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${vs.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${vs.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${vs.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),xxe=Yt("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${Zt(n.placement.split("-")[0])}`]]}})(ar(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${vs.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${vs.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${vs.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${vs.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${vxe(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${vs.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${vs.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${vs.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${vs.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${vs.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${vs.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${vs.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${vs.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${vs.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${vs.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),wxe=Yt("span",{name:"MuiTooltip",slot:"Arrow"})(ar(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let QE=!1;const sj=new HM;let l2={x:0,y:0};function UE(t,e){return(n,...r)=>{e&&e(n,...r),t(n,...r)}}const Oxe=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiTooltip"}),{arrow:i=!1,children:o,classes:a,components:s={},componentsProps:u={},describeChild:f=!1,disableFocusListener:g=!1,disableHoverListener:_=!1,disableInteractive:w=!1,disableTouchListener:S=!1,enterDelay:E=100,enterNextDelay:A=0,enterTouchDelay:R=700,followCursor:$=!1,id:z,leaveDelay:B=0,leaveTouchDelay:F=1500,onClose:U,onOpen:q,open:H,placement:ne="bottom",PopperComponent:ie,PopperProps:ce={},slotProps:xe={},slots:re={},title:me,TransitionComponent:Te,TransitionProps:ye,..._e}=r,ke=Q.isValidElement(o)?o:J.jsx("span",{children:o}),Ne=hm(),Qe=qM(),[Se,Me]=Q.useState(),[Xe,Ee]=Q.useState(null),ft=Q.useRef(!1),mt=w||$,ct=B_(),st=B_(),bt=B_(),At=B_(),[Tt,Wt]=VP({controlled:H,default:!1,name:"Tooltip",state:"open"});let nn=Tt;const An=fO(z),rn=Q.useRef(),Jt=zg(()=>{rn.current!==void 0&&(document.body.style.WebkitUserSelect=rn.current,rn.current=void 0),At.clear()});Q.useEffect(()=>Jt,[Jt]);const Mn=Cn=>{sj.clear(),QE=!0,Wt(!0),q&&!nn&&q(Cn)},vn=zg(Cn=>{sj.start(800+B,()=>{QE=!1}),Wt(!1),U&&nn&&U(Cn),ct.start(Ne.transitions.duration.shortest,()=>{ft.current=!1})}),Nn=Cn=>{ft.current&&Cn.type!=="touchstart"||(Se&&Se.removeAttribute("title"),st.clear(),bt.clear(),E||QE&&A?st.start(QE?A:E,()=>{Mn(Cn)}):Mn(Cn))},lr=Cn=>{st.clear(),bt.start(B,()=>{vn(Cn)})},[,rr]=Q.useState(!1),Ue=Cn=>{_w(Cn.target)||(rr(!1),lr(Cn))},Je=Cn=>{Se||Me(Cn.currentTarget),_w(Cn.target)&&(rr(!0),Nn(Cn))},xt=Cn=>{ft.current=!0;const gi=ke.props;gi.onTouchStart&&gi.onTouchStart(Cn)},Et=Cn=>{xt(Cn),bt.clear(),ct.clear(),Jt(),rn.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",At.start(R,()=>{document.body.style.WebkitUserSelect=rn.current,Nn(Cn)})},Vt=Cn=>{ke.props.onTouchEnd&&ke.props.onTouchEnd(Cn),Jt(),bt.start(F,()=>{vn(Cn)})};Q.useEffect(()=>{if(!nn)return;function Cn(gi){gi.key==="Escape"&&vn(gi)}return document.addEventListener("keydown",Cn),()=>{document.removeEventListener("keydown",Cn)}},[vn,nn]);const we=ts(Pb(ke),Me,n);!me&&me!==0&&(nn=!1);const ae=Q.useRef(),Y=Cn=>{const gi=ke.props;gi.onMouseMove&&gi.onMouseMove(Cn),l2={x:Cn.clientX,y:Cn.clientY},ae.current&&ae.current.update()},be={},$e=typeof me=="string";f?(be.title=!nn&&$e&&!_?me:null,be["aria-describedby"]=nn?An:null):(be["aria-label"]=$e?me:null,be["aria-labelledby"]=nn&&!$e?An:null);const ze={...be,..._e,...ke.props,className:bn(_e.className,ke.props.className),onTouchStart:xt,ref:we,...$?{onMouseMove:Y}:{}},rt={};S||(ze.onTouchStart=Et,ze.onTouchEnd=Vt),_||(ze.onMouseOver=UE(Nn,ze.onMouseOver),ze.onMouseLeave=UE(lr,ze.onMouseLeave),mt||(rt.onMouseOver=Nn,rt.onMouseLeave=lr)),g||(ze.onFocus=UE(Je,ze.onFocus),ze.onBlur=UE(Ue,ze.onBlur),mt||(rt.onFocus=Je,rt.onBlur=Ue));const tt={...r,isRtl:Qe,arrow:i,disableInteractive:mt,placement:ne,PopperComponentProp:ie,touch:ft.current},Ye=typeof xe.popper=="function"?xe.popper(tt):xe.popper,at=Q.useMemo(()=>{let Cn=[{name:"arrow",enabled:!!Xe,options:{element:Xe,padding:4}}];return ce.popperOptions?.modifiers&&(Cn=Cn.concat(ce.popperOptions.modifiers)),Ye?.popperOptions?.modifiers&&(Cn=Cn.concat(Ye.popperOptions.modifiers)),{...ce.popperOptions,...Ye?.popperOptions,modifiers:Cn}},[Xe,ce.popperOptions,Ye?.popperOptions]),Ot=_xe(tt),ot=typeof xe.transition=="function"?xe.transition(tt):xe.transition,$t={slots:{popper:s.Popper,transition:s.Transition??Te,tooltip:s.Tooltip,arrow:s.Arrow,...re},slotProps:{arrow:xe.arrow??u.arrow,popper:{...ce,...Ye??u.popper},tooltip:xe.tooltip??u.tooltip,transition:{...ye,...ot??u.transition}}},[an,$n]=Xn("popper",{elementType:bxe,externalForwardedProps:$t,ownerState:tt,className:bn(Ot.popper,ce?.className)}),[Er,Tr]=Xn("transition",{elementType:HP,externalForwardedProps:$t,ownerState:tt}),[ut,Ur]=Xn("tooltip",{elementType:xxe,className:Ot.tooltip,externalForwardedProps:$t,ownerState:tt}),[eo,Gn]=Xn("arrow",{elementType:wxe,className:Ot.arrow,externalForwardedProps:$t,ownerState:tt,ref:Ee});return J.jsxs(Q.Fragment,{children:[Q.cloneElement(ke,ze),J.jsx(an,{as:ie??wX,placement:ne,anchorEl:$?{getBoundingClientRect:()=>({top:l2.y,left:l2.x,right:l2.x,bottom:l2.y,width:0,height:0})}:Se,popperRef:ae,open:Se?nn:!1,id:An,transition:!0,...rt,...$n,popperOptions:at,children:({TransitionProps:Cn})=>J.jsx(Er,{timeout:Ne.transitions.duration.shorter,...Cn,...Tr,children:J.jsxs(ut,{...Ur,children:[me,i?J.jsx(eo,{...Gn}):null]})})})]})}),Ng=ame({createStyledComponent:Yt("div",{name:"MuiStack",slot:"Root"}),useThemeProps:t=>Hn({props:t,name:"MuiStack"})});function Sxe(t){return Un("MuiSwitch",t)}const rc=Yn("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Cxe=t=>{const{classes:e,edge:n,size:r,color:i,checked:o,disabled:a}=t,s={root:["root",n&&`edge${Zt(n)}`,`size${Zt(r)}`],switchBase:["switchBase",`color${Zt(i)}`,o&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},u=Zn(s,Sxe,e);return{...e,...u}},Txe=Yt("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.edge&&e[`edge${Zt(n.edge)}`],e[`size${Zt(n.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${rc.thumb}`]:{width:16,height:16},[`& .${rc.switchBase}`]:{padding:4,[`&.${rc.checked}`]:{transform:"translateX(16px)"}}}}]}),kxe=Yt(Sve,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.switchBase,{[`& .${rc.input}`]:e.input},n.color!=="default"&&e[`color${Zt(n.color)}`]]}})(ar(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${rc.checked}`]:{transform:"translateX(20px)"},[`&.${rc.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${rc.checked} + .${rc.track}`]:{opacity:.5},[`&.${rc.disabled} + .${rc.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${rc.input}`]:{left:"-100%",width:"300%"}})),ar(({theme:t})=>({"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(Hs(["light"])).map(([e])=>({props:{color:e},style:{[`&.${rc.checked}`]:{color:(t.vars||t).palette[e].main,"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${rc.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${e}DisabledColor`]:`${t.palette.mode==="light"?t.lighten(t.palette[e].main,.62):t.darken(t.palette[e].main,.55)}`}},[`&.${rc.checked} + .${rc.track}`]:{backgroundColor:(t.vars||t).palette[e].main}}}))]}))),Exe=Yt("span",{name:"MuiSwitch",slot:"Track"})(ar(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`}))),Axe=Yt("span",{name:"MuiSwitch",slot:"Thumb"})(ar(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),uN=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiSwitch"}),{className:i,color:o="primary",edge:a=!1,size:s="medium",sx:u,slots:f={},slotProps:g={},..._}=r,w={...r,color:o,edge:a,size:s},S=Cxe(w),E={slots:f,slotProps:g},[A,R]=Xn("root",{className:bn(S.root,i),elementType:Txe,externalForwardedProps:E,ownerState:w,additionalProps:{sx:u}}),[$,z]=Xn("thumb",{className:S.thumb,elementType:Axe,externalForwardedProps:E,ownerState:w}),B=J.jsx($,{...z}),[F,U]=Xn("track",{className:S.track,elementType:Exe,externalForwardedProps:E,ownerState:w});return J.jsxs(A,{...R,children:[J.jsx(kxe,{type:"checkbox",icon:B,checkedIcon:B,ref:n,ownerState:w,..._,classes:{...S,root:S.switchBase},slots:{...f.switchBase&&{root:f.switchBase},...f.input&&{input:f.input}},slotProps:{...g.switchBase&&{root:typeof g.switchBase=="function"?g.switchBase(w):g.switchBase},input:{role:"switch"},...g.input&&{input:typeof g.input=="function"?g.input(w):g.input}}}),J.jsx(F,{...U})]})});function Pxe(t){return Un("MuiToolbar",t)}Yn("MuiToolbar",["root","gutters","regular","dense"]);const Mxe=t=>{const{classes:e,disableGutters:n,variant:r}=t;return Zn({root:["root",!n&&"gutters",r]},Pxe,e)},Rxe=Yt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(ar(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}))),hN=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:a=!1,variant:s="regular",...u}=r,f={...r,component:o,disableGutters:a,variant:s},g=Mxe(f);return J.jsx(Rxe,{as:o,className:bn(g.root,i),ref:n,ownerState:f,...u})});function Ixe(t){return Un("MuiTextField",t)}Yn("MuiTextField",["root"]);const Dxe={standard:oN,filled:rN,outlined:lN},Lxe=t=>{const{classes:e}=t;return Zn({root:["root"]},Ixe,e)},$xe=Yt($_e,{name:"MuiTextField",slot:"Root"})({}),Gp=Q.forwardRef(function(e,n){const r=Hn({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:a,className:s,color:u="primary",defaultValue:f,disabled:g=!1,error:_=!1,FormHelperTextProps:w,fullWidth:S=!1,helperText:E,id:A,InputLabelProps:R,inputProps:$,InputProps:z,inputRef:B,label:F,maxRows:U,minRows:q,multiline:H=!1,name:ne,onBlur:ie,onChange:ce,onFocus:xe,placeholder:re,required:me=!1,rows:Te,select:ye=!1,SelectProps:_e,slots:ke={},slotProps:Ne={},type:Qe,value:Se,variant:Me="outlined",...Xe}=r,Ee={...r,autoFocus:o,color:u,disabled:g,error:_,fullWidth:S,multiline:H,required:me,select:ye,variant:Me},ft=Lxe(Ee),mt=fO(A),ct=E&&mt?`${mt}-helper-text`:void 0,st=F&&mt?`${mt}-label`:void 0,bt=Dxe[Me],At={slots:ke,slotProps:{input:z,inputLabel:R,htmlInput:$,formHelperText:w,select:_e,...Ne}},Tt={},Wt=At.slotProps.inputLabel;Me==="outlined"&&(Wt&&typeof Wt.shrink<"u"&&(Tt.notched=Wt.shrink),Tt.label=F),ye&&((!_e||!_e.native)&&(Tt.id=void 0),Tt["aria-describedby"]=void 0);const[nn,An]=Xn("root",{elementType:$xe,shouldForwardComponentProp:!0,externalForwardedProps:{...At,...Xe},ownerState:Ee,className:bn(ft.root,s),ref:n,additionalProps:{disabled:g,error:_,fullWidth:S,required:me,color:u,variant:Me}}),[rn,Jt]=Xn("input",{elementType:bt,externalForwardedProps:At,additionalProps:Tt,ownerState:Ee}),[Mn,vn]=Xn("inputLabel",{elementType:rbe,externalForwardedProps:At,ownerState:Ee}),[Nn,lr]=Xn("htmlInput",{elementType:"input",externalForwardedProps:At,ownerState:Ee}),[rr,Ue]=Xn("formHelperText",{elementType:U_e,externalForwardedProps:At,ownerState:Ee}),[Je,xt]=Xn("select",{elementType:BX,externalForwardedProps:At,ownerState:Ee}),Et=J.jsx(rn,{"aria-describedby":ct,autoComplete:i,autoFocus:o,defaultValue:f,fullWidth:S,multiline:H,name:ne,rows:Te,maxRows:U,minRows:q,type:Qe,value:Se,id:mt,inputRef:B,onBlur:ie,onChange:ce,onFocus:xe,placeholder:re,inputProps:lr,slots:{input:ke.htmlInput?Nn:void 0},...Jt});return J.jsxs(nn,{...An,children:[F!=null&&F!==""&&J.jsx(Mn,{htmlFor:mt,id:st,...vn,children:F}),ye?J.jsx(Je,{"aria-describedby":ct,id:mt,labelId:st,value:Se,input:Et,...xt,children:a}):Et,E&&J.jsx(rr,{id:ct,...Ue,children:E})]})}),zxe=No(J.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"})),Nxe=No(J.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"})),dN=No(J.jsx("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"})),fN=No(J.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"})),IC=No(J.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"}));var zh=function(){return zh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},zh.apply(this,arguments)};function gO(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Bxe(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(g){try{f(r.next(g))}catch(_){a(_)}}function u(g){try{f(r.throw(g))}catch(_){a(_)}}function f(g){g.done?o(g.value):i(g.value).then(s,u)}f((r=r.apply(t,e||[])).next())})}function Fxe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}const jxe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class pN extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Vxe extends pN{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class aj extends pN{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lj extends pN{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var m$;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(m$||(m$={}));class Qxe{constructor(e,{headers:n={},customFetch:r,region:i=m$.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=jxe(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Bxe(this,arguments,void 0,function*(n,r={}){var i;let o,a;try{const{headers:s,method:u,body:f,signal:g,timeout:_}=r;let w={},{region:S}=r;S||(S=this.region);const E=new URL(`${this.url}/${n}`);S&&S!=="any"&&(w["x-region"]=S,E.searchParams.set("forceFunctionRegion",S));let A;f&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",A=f):typeof f=="string"?(w["Content-Type"]="text/plain",A=f):typeof FormData<"u"&&f instanceof FormData?A=f:(w["Content-Type"]="application/json",A=JSON.stringify(f)):A=f;let R=g;_&&(a=new AbortController,o=setTimeout(()=>a.abort(),_),g?(R=a.signal,g.addEventListener("abort",()=>a.abort())):R=a.signal);const $=yield this.fetch(E.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),s),body:A,signal:R}).catch(U=>{throw new Vxe(U)}),z=$.headers.get("x-relay-error");if(z&&z==="true")throw new aj($);if(!$.ok)throw new lj($);let B=((i=$.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),F;return B==="application/json"?F=yield $.json():B==="application/octet-stream"||B==="application/pdf"?F=yield $.blob():B==="text/event-stream"?F=$:B==="multipart/form-data"?F=yield $.formData():F=yield $.text(),{data:F,error:null,response:$}}catch(s){return{data:null,error:s,response:s instanceof lj||s instanceof aj?s.context:void 0}}finally{o&&clearTimeout(o)}})}}var Uxe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Zxe=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let a=null,s=null,u=null,f=o.status,g=o.statusText;if(o.ok){var _,w;if(n.method!=="HEAD"){var S;const $=await o.text();$===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((S=n.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?s=$:s=JSON.parse($))}const A=(_=n.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),R=(w=o.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");A&&R&&R.length>1&&(u=parseInt(R[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(s)&&(s.length>1?(a={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,u=null,f=406,g="Not Acceptable"):s.length===1?s=s[0]:s=null)}else{var E;const A=await o.text();try{a=JSON.parse(A),Array.isArray(a)&&o.status===404&&(s=[],a=null,f=200,g="OK")}catch{o.status===404&&A===""?(f=204,g="No Content"):a={message:A}}if(a&&n.isMaybeSingle&&(!(a==null||(E=a.details)===null||E===void 0)&&E.includes("0 rows"))&&(a=null,f=200,g="OK"),a&&n.shouldThrowOnError)throw new Uxe(a)}return{error:a,data:s,count:u,status:f,statusText:g}});return this.shouldThrowOnError||(i=i.catch(o=>{var a;let s="";const u=o?.cause;if(u){var f,g,_,w;const E=(f=u?.message)!==null&&f!==void 0?f:"",A=(g=u?.code)!==null&&g!==void 0?g:"";s=`${(_=o?.name)!==null&&_!==void 0?_:"FetchError"}: ${o?.message}`,s+=`

Caused by: ${(w=u?.name)!==null&&w!==void 0?w:"Error"}: ${E}`,A&&(s+=` (${A})`),u?.stack&&(s+=`
${u.stack}`)}else{var S;s=(S=o?.stack)!==null&&S!==void 0?S:""}return{error:{message:`${(a=o?.name)!==null&&a!==void 0?a:"FetchError"}: ${o?.message}`,details:s,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},qxe=class extends Zxe{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const s=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${s};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const cj=new RegExp("[,()]");var A1=class extends qxe{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&cj.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&cj.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Wxe=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(s=>/\s/.test(s)&&!o?"":(s==='"'&&(o=!o),s)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new A1({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,s)=>a.concat(Object.keys(s)),[]);if(o.length>0){const a=[...new Set(o)].map(s=>`"${s}"`);this.url.searchParams.set("columns",a.join(","))}}return new A1({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(s.length>0){const u=[...new Set(s)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new A1({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new A1({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new A1({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Hxe=class FX{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Wxe(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new FX(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var a;let s;const u=new URL(`${this.url}/rpc/${e}`);let f;r||i?(s=r?"HEAD":"GET",Object.entries(n).filter(([_,w])=>w!==void 0).map(([_,w])=>[_,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([_,w])=>{u.searchParams.append(_,w)})):(s="POST",f=n);const g=new Headers(this.headers);return o&&g.set("Prefer",`count=${o}`),new A1({method:s,url:u,headers:g,schema:this.schemaName,body:f,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class Gxe{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Xxe="2.89.0",Yxe=`realtime-js/${Xxe}`,jX="1.0.0",Kxe="2.0.0",uj=jX,g$=1e4,Jxe=1e3,e1e=100;var g0;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(g0||(g0={}));var ua;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ua||(ua={}));var af;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(af||(af={}));var y$;(function(t){t.websocket="websocket"})(y$||(y$={}));var P_;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(P_||(P_={}));class t1e{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var i,o;const a=e.topic,s=(i=e.ref)!==null&&i!==void 0?i:"",u=(o=e.join_ref)!==null&&o!==void 0?o:"",f=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(g).length===0?"":JSON.stringify(g);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+s.length+a.length+f.length+_.length,S=new ArrayBuffer(this.HEADER_LENGTH+w);let E=new DataView(S),A=0;E.setUint8(A++,this.KINDS.userBroadcastPush),E.setUint8(A++,u.length),E.setUint8(A++,s.length),E.setUint8(A++,a.length),E.setUint8(A++,f.length),E.setUint8(A++,_.length),E.setUint8(A++,n),Array.from(u,$=>E.setUint8(A++,$.charCodeAt(0))),Array.from(s,$=>E.setUint8(A++,$.charCodeAt(0))),Array.from(a,$=>E.setUint8(A++,$.charCodeAt(0))),Array.from(f,$=>E.setUint8(A++,$.charCodeAt(0))),Array.from(_,$=>E.setUint8(A++,$.charCodeAt(0)));var R=new Uint8Array(S.byteLength+r.byteLength);return R.set(new Uint8Array(S),0),R.set(new Uint8Array(r),S.byteLength),R.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,a,s,u]=r;return n({join_ref:i,ref:o,topic:a,event:s,payload:u})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,i)}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),s=n.getUint8(4);let u=this.HEADER_LENGTH+4;const f=r.decode(e.slice(u,u+i));u=u+i;const g=r.decode(e.slice(u,u+o));u=u+o;const _=r.decode(e.slice(u,u+a));u=u+a;const w=e.slice(u,e.byteLength),S=s===this.JSON_ENCODING?JSON.parse(r.decode(w)):w,E={type:this.BROADCAST_EVENT,event:g,payload:S};return a>0&&(E.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class VX{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oo;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Oo||(Oo={}));const hj=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=n1e(a,t,e,i),o),{}):{}},n1e=(t,e,n,r)=>{const i=e.find(s=>s.name===t),o=i?.type,a=n[t];return o&&!r.includes(o)?QX(o,a):v$(a)},QX=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return s1e(e,n)}switch(t){case Oo.bool:return r1e(e);case Oo.float4:case Oo.float8:case Oo.int2:case Oo.int4:case Oo.int8:case Oo.numeric:case Oo.oid:return i1e(e);case Oo.json:case Oo.jsonb:return o1e(e);case Oo.timestamp:return a1e(e);case Oo.abstime:case Oo.date:case Oo.daterange:case Oo.int4range:case Oo.int8range:case Oo.money:case Oo.reltime:case Oo.text:case Oo.time:case Oo.timestamptz:case Oo.timetz:case Oo.tsrange:case Oo.tstzrange:return v$(e);default:return v$(e)}},v$=t=>t,r1e=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},i1e=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},o1e=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},s1e=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>QX(e,s))}return t},a1e=t=>typeof t=="string"?t.replace(" ","T"):t,UX=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class O3{constructor(e,n,r={},i=g$){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dj;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(dj||(dj={}));class nC{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=nC.syncState(this.state,i,o,a),this.pendingDiffs.forEach(u=>{this.state=nC.syncDiff(this.state,u,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=nC.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),a=this.transformState(n),s={},u={};return this.map(o,(f,g)=>{a[f]||(u[f]=g)}),this.map(a,(f,g)=>{const _=o[f];if(_){const w=g.map(R=>R.presence_ref),S=_.map(R=>R.presence_ref),E=g.filter(R=>S.indexOf(R.presence_ref)<0),A=_.filter(R=>w.indexOf(R.presence_ref)<0);E.length>0&&(s[f]=E),A.length>0&&(u[f]=A)}else s[f]=g}),this.syncDiff(o,{joins:s,leaves:u},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(s,u)=>{var f;const g=(f=e[s])!==null&&f!==void 0?f:[];if(e[s]=this.cloneDeep(u),g.length>0){const _=e[s].map(S=>S.presence_ref),w=g.filter(S=>_.indexOf(S.presence_ref)<0);e[s].unshift(...w)}r(s,g,u)}),this.map(a,(s,u)=>{let f=e[s];if(!f)return;const g=u.map(_=>_.presence_ref);f=f.filter(_=>g.indexOf(_.presence_ref)<0),e[s]=f,i(s,f,u),f.length===0&&delete e[s]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fj;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(fj||(fj={}));var rC;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(rC||(rC={}));var Sg;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Sg||(Sg={}));class F1{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ua.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new O3(this,af.join,this.params,this.timeout),this.rejoinTimer=new VX(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ua.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ua.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ua.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ua.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ua.errored,this.rejoinTimer.scheduleTimeout())}),this._on(af.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new nC(this),this.broadcastEndpointURL=UX(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==ua.closed){const{config:{broadcast:a,presence:s,private:u}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(S=>S.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[rC.PRESENCE]&&this.bindings[rC.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,_={},w={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:g}),postgres_changes:f,private:u};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(S=>e?.(Sg.CHANNEL_ERROR,S)),this._onClose(()=>e?.(Sg.CLOSED)),this.updateJoinPayload(Object.assign({config:w},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){e?.(Sg.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,R=(E=A?.length)!==null&&E!==void 0?E:0,$=[];for(let z=0;z<R;z++){const B=A[z],{filter:{event:F,schema:U,table:q,filter:H}}=B,ne=S&&S[z];if(ne&&ne.event===F&&F1.isFilterValueEqual(ne.schema,U)&&F1.isFilterValueEqual(ne.table,q)&&F1.isFilterValueEqual(ne.filter,H))$.push(Object.assign(Object.assign({},B),{id:ne.id}));else{this.unsubscribe(),this.state=ua.errored,e?.(Sg.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=$,e&&e(Sg.SUBSCRIBED);return}}).receive("error",S=>{this.state=ua.errored,e?.(Sg.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{e?.(Sg.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ua.joined&&e===rC.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let u=s.statusText;try{const f=await s.json();u=f.error||f.message||u}catch{}return Promise.reject(new Error(u))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,u;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||u===void 0)&&u.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ua.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(af.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new O3(this,af.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ua.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new O3(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>e1e){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const a=e.toLocaleLowerCase(),{close:s,error:u,leave:f,join:g}=af;if(r&&[s,u,f,g].indexOf(a)>=0&&r!==this._joinRef())return;let w=this._onMessage(a,n,r);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(S=>{var E,A,R;return((E=S.filter)===null||E===void 0?void 0:E.event)==="*"||((R=(A=S.filter)===null||A===void 0?void 0:A.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===a}).map(S=>S.callback(w,r)):(o=this.bindings[a])===null||o===void 0||o.filter(S=>{var E,A,R,$,z,B;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in S){const F=S.id,U=(E=S.filter)===null||E===void 0?void 0:E.event;return F&&((A=n.ids)===null||A===void 0?void 0:A.includes(F))&&(U==="*"||U?.toLocaleLowerCase()===((R=n.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const F=(z=($=S?.filter)===null||$===void 0?void 0:$.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return F==="*"||F===((B=n?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===a}).map(S=>{if(typeof w=="object"&&"ids"in w){const E=w.data,{schema:A,table:R,commit_timestamp:$,type:z,errors:B}=E;w=Object.assign(Object.assign({},{schema:A,table:R,commit_timestamp:$,eventType:z,new:{},old:{},errors:B}),this._getPayloadRecords(E))}S.callback(w,r)})}_isClosed(){return this.state===ua.closed}_isJoined(){return this.state===ua.joined}_isJoining(){return this.state===ua.joining}_isLeaving(){return this.state===ua.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&F1.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(af.close,{},e)}_onError(e){this._on(af.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ua.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=hj(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=hj(e.columns,e.old_record)),n}}const S3=()=>{},ZE={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},l1e=[1e3,2e3,5e3,1e4],c1e=1e4,u1e=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class h1e{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=g$,this.transport=null,this.heartbeatIntervalMs=ZE.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=S3,this.ref=0,this.reconnectTimer=null,this.vsn=uj,this.logger=S3,this.conn=null,this.sendBuffer=[],this.serializer=new t1e,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${y$.websocket}`,this.httpEndpoint=UX(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gxe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case g0.connecting:return P_.Connecting;case g0.open:return P_.Open;case g0.closing:return P_.Closing;default:return P_.Closed}}isConnected(){return this.connectionState()===P_.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new F1(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,a=()=>{this.encode(e,s=>{var u;(u=this.conn)===null||u===void 0||u.send(s)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Jxe,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ZE.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:a}=n,s=a?`(${a})`:"",u=o.status||"";this.log("receive",`${u} ${r} ${i} ${s}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===g0.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===g0.open||this.conn.readyState===g0.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(af.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([u1e],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:Yxe};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(af.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new VX(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ZE.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,a,s,u,f,g,_,w,S;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:g$,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:ZE.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=e?.heartbeatCallback)!==null&&s!==void 0?s:S3,this.vsn=(u=e?.vsn)!==null&&u!==void 0?u:uj,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(E=>l1e[E-1]||c1e),this.vsn){case jX:this.encode=(g=e?.encode)!==null&&g!==void 0?g:((E,A)=>A(JSON.stringify(E))),this.decode=(_=e?.decode)!==null&&_!==void 0?_:((E,A)=>A(JSON.parse(E)));break;case Kxe:this.encode=(w=e?.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(S=e?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var DC=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function d1e(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function f1e(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function p1e(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:a}){const s=d1e(t.baseUrl,r,i),u=await f1e(t.auth),f=await e(s,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...u,...a},body:o?JSON.stringify(o):void 0}),g=await f.text(),_=(f.headers.get("content-type")||"").includes("application/json"),w=_&&g?JSON.parse(g):g;if(!f.ok){const S=_?w:void 0,E=S?.error;throw new DC(E?.message??`Request failed with status ${f.status}`,{status:f.status,icebergType:E?.type,icebergCode:E?.code,details:S})}return{status:f.status,headers:f.headers,data:w}}}}function qE(t){return t.join("")}var m1e=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:qE(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${qE(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qE(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${qE(t.namespace)}`}),!0}catch(e){if(e instanceof DC&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof DC&&n.status===409)return;throw n}}};function h1(t){return t.join("")}var g1e=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${h1(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${h1(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${h1(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${h1(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${h1(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${h1(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof DC&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof DC&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},y1e=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=p1e({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new m1e(this.client,e),this.tableOps=new g1e(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},tR=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Jo(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var v1e=class extends tR{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},_$=class extends tR{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const mN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_1e=()=>Response,b$=t=>{if(Array.isArray(t))return t.map(n=>b$(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=b$(r)}),e},b1e=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},x1e=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function LC(t){"@babel/helpers - typeof";return LC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LC(t)}function w1e(t,e){if(LC(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(LC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O1e(t){var e=w1e(t,"string");return LC(e)=="symbol"?e:e+""}function S1e(t,e,n){return(e=O1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pj(Object(n),!0).forEach(function(r){S1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const C3=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},C1e=async(t,e,n)=>{t instanceof await _1e()&&!n?.noResolveJson?t.json().then(r=>{const i=t.status||500,o=r?.statusCode||i+"";e(new v1e(C3(r),i,o))}).catch(r=>{e(new _$(C3(r),r))}):e(new _$(C3(t),t))},T1e=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!r?i:(b1e(r)?(i.headers=hr({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),hr(hr({},i),n))};async function qT(t,e,n,r,i,o){return new Promise((a,s)=>{t(n,T1e(e,r,i,o)).then(u=>{if(!u.ok)throw u;return r?.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>C1e(u,s,r))})}async function $C(t,e,n,r){return qT(t,"GET",e,n,r)}async function rf(t,e,n,r,i){return qT(t,"POST",e,r,i,n)}async function x$(t,e,n,r,i){return qT(t,"PUT",e,r,i,n)}async function k1e(t,e,n,r){return qT(t,"HEAD",e,hr(hr({},n),{},{noResolveJson:!0}),r)}async function gN(t,e,n,r,i){return qT(t,"DELETE",e,r,i,n)}var E1e=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Jo(e))return{data:null,error:e};throw e}}};let ZX;ZX=Symbol.toStringTag;var A1e=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[ZX]="BlobDownloadBuilder",this.promise=null}asStream(){return new E1e(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Jo(e))return{data:null,error:e};throw e}}};const P1e={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mj={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var M1e=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=mN(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let o;const a=hr(hr({},mj),r);let s=hr(hr({},i.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),u&&o.append("metadata",i.encodeMetadata(u)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),u&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(u))):(o=n,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,u&&(s["x-metadata"]=i.toBase64(i.encodeMetadata(u))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),r?.headers&&(s=hr(hr({},s),r.headers));const f=i._removeEmptyFolders(e),g=i._getFinalPath(f),_=await(t=="PUT"?x$:rf)(i.fetch,`${i.url}/object/${g}`,o,hr({headers:s},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:f,id:_.Id,fullPath:_.Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Jo(o))return{data:null,error:o};throw o}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const o=i._removeEmptyFolders(t),a=i._getFinalPath(o),s=new URL(i.url+`/object/upload/sign/${a}`);s.searchParams.set("token",e);try{let u;const f=hr({upsert:mj.upsert},r),g=hr(hr({},i.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",f.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",f.cacheControl)):(u=n,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType),{data:{path:o,fullPath:(await x$(i.fetch,s.toString(),u,{headers:g})).Key},error:null}}catch(u){if(i.shouldThrowOnError)throw u;if(Jo(u))return{data:null,error:u};throw u}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=hr({},n.headers);e?.upsert&&(i["x-upsert"]="true");const o=await rf(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(n.url+o.url),s=a.searchParams.get("token");if(!s)throw new tR("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:s},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Jo(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await rf(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Jo(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await rf(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Jo(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),o=await rf(r.fetch,`${r.url}/object/sign/${i}`,hr({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${r.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Jo(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await rf(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>hr(hr({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Jo(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),i=r?`?${r}`:"",o=this._getFinalPath(t),a=()=>$C(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new A1e(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:b$(await $C(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Jo(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await k1e(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Jo(r)&&r instanceof _$){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof e?.transform<"u"?"render/image":"object",a=this.transformOptsToQueryString(e?.transform||{});a!==""&&r.push(a);let s=r.join("&");return s!==""&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${s}`)}}}async remove(t){var e=this;try{return{data:await gN(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Jo(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=hr(hr(hr({},P1e),e),{},{prefix:t||""});return{data:await rf(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Jo(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=hr({},t);return{data:await rf(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Jo(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const qX="2.89.0",WX={"X-Client-Info":`storage-js/${qX}`};var R1e=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=hr(hr({},WX),e),this.fetch=mN(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await $C(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Jo(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await $C(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Jo(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await rf(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Jo(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await x$(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Jo(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await rf(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Jo(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await gN(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Jo(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},I1e=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=hr(hr({},WX),e),this.fetch=mN(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await rf(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Jo(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await $C(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Jo(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await gN(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Jo(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!x1e(t))throw new tR("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new y1e({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const a=i[o];return typeof a!="function"?a:async(...s)=>{try{return{data:await a.apply(i,s),error:null}}catch(u){if(r)throw u;return{data:null,error:u}}}}})}};const yN={"X-Client-Info":`storage-js/${qX}`,"Content-Type":"application/json"};var HX=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ju(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var T3=class extends HX{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},D1e=class extends HX{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const vN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),L1e=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gj=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),$1e=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=o?.statusCode||o?.code||r+"";e(new T3(gj(o),r,a))}).catch(()=>{const o=r+"";e(new T3(i.statusText||`HTTP ${r} error`,r,o))});else{const o=r+"";e(new T3(i.statusText||`HTTP ${r} error`,r,o))}}else e(new D1e(gj(t),t))},z1e=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return r?(L1e(r)?(i.headers=hr({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,hr(hr({},i),n)):i};async function N1e(t,e,n,r,i,o){return new Promise((a,s)=>{t(n,z1e(e,r,i,o)).then(u=>{if(!u.ok)throw u;if(r?.noResolveJson)return u;const f=u.headers.get("content-type");return!f||!f.includes("application/json")?{}:u.json()}).then(u=>a(u)).catch(u=>$1e(u,s,r))})}async function Vu(t,e,n,r,i){return N1e(t,"POST",e,r,i,n)}var B1e=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=hr(hr({},yN),e),this.fetch=vN(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Vu(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ju(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await Vu(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ju(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await Vu(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ju(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await Vu(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ju(r))return{data:null,error:r};throw r}}},F1e=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=hr(hr({},yN),e),this.fetch=vN(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Vu(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ju(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await Vu(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ju(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Vu(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ju(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await Vu(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ju(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Vu(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ju(n))return{data:null,error:n};throw n}}},j1e=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=hr(hr({},yN),e),this.fetch=vN(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Vu(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ju(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Vu(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ju(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await Vu(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ju(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Vu(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ju(n))return{data:null,error:n};throw n}}},V1e=class extends j1e{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Q1e(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},Q1e=class extends B1e{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,hr(hr({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,hr(hr({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new U1e(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},U1e=class extends F1e{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,hr(hr({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,hr(hr({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,hr(hr({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,hr(hr({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,hr(hr({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Z1e=class extends R1e{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new M1e(this.url,this.headers,t,this.fetch)}get vectors(){return new V1e(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new I1e(this.url+"/iceberg",this.headers,this.fetch)}};const GX="2.89.0",P1=30*1e3,w$=3,k3=w$*P1,q1e="http://localhost:9999",W1e="supabase.auth.token",H1e={"X-Client-Info":`gotrue-js/${GX}`},O$="X-Supabase-Api-Version",XX={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},G1e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,X1e=600*1e3;class zC extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Vn(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Y1e extends zC{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function K1e(t){return Vn(t)&&t.name==="AuthApiError"}class M_ extends zC{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ty extends zC{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Iu extends ty{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function J1e(t){return Vn(t)&&t.name==="AuthSessionMissingError"}class d1 extends ty{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class WE extends ty{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class HE extends ty{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ewe(t){return Vn(t)&&t.name==="AuthImplicitGrantRedirectError"}class yj extends ty{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class twe extends ty{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class S$ extends ty{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function E3(t){return Vn(t)&&t.name==="AuthRetryableFetchError"}class vj extends ty{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class C$ extends ty{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const XP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_j=` 	
\r=`.split(""),nwe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<_j.length;e+=1)t[_j[e].charCodeAt(0)]=-2;for(let e=0;e<XP.length;e+=1)t[XP[e].charCodeAt(0)]=e;return t})();function bj(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(XP[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(XP[r]),e.queuedBits-=6}}function YX(t,e,n){const r=nwe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function xj(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{owe(a,r,n)};for(let a=0;a<t.length;a+=1)YX(t.charCodeAt(a),i,o);return e.join("")}function rwe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function iwe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}rwe(r,e)}}function owe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function K1(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)YX(t.charCodeAt(i),n,r);return new Uint8Array(e)}function swe(t){const e=[];return iwe(t,n=>e.push(n)),new Uint8Array(e)}function F_(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>bj(i,n,r)),bj(null,n,r),e.join("")}function awe(t){return Math.round(Date.now()/1e3)+t}function lwe(){return Symbol("auth-callback")}const Ya=()=>typeof window<"u"&&typeof document<"u",__={tested:!1,writable:!1},KX=()=>{if(!Ya())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(__.tested)return __.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),__.tested=!0,__.writable=!0}catch{__.tested=!0,__.writable=!1}return __.writable};function cwe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const JX=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uwe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",M1=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},b_=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ga=async(t,e)=>{await t.removeItem(e)};class nR{constructor(){this.promise=new nR.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}nR.promiseConstructor=Promise;function A3(t){const e=t.split(".");if(e.length!==3)throw new C$("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!G1e.test(e[r]))throw new C$("JWT not in base64url format");return{header:JSON.parse(xj(e[0])),payload:JSON.parse(xj(e[1])),signature:K1(e[2]),raw:{header:e[0],payload:e[1]}}}async function hwe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function dwe(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function fwe(t){return("0"+t.toString(16)).substr(-2)}function pwe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,fwe).join("")}async function mwe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function gwe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await mwe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function f1(t,e,n=!1){const r=pwe();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await M1(t,`${e}-code-verifier`,i);const o=await gwe(r);return[o,r===o?"plain":"s256"]}const ywe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vwe(t){const e=t.headers.get(O$);if(!e||!e.match(ywe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _we(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function bwe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xwe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function p1(t){if(!xwe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function P3(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wwe(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function wj(t){return JSON.parse(JSON.stringify(t))}const k_=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Owe=[502,503,504];async function Oj(t){var e;if(!uwe(t))throw new S$(k_(t),0);if(Owe.includes(t.status))throw new S$(k_(t),t.status);let n;try{n=await t.json()}catch(o){throw new M_(k_(o),o)}let r;const i=vwe(t);if(i&&i.getTime()>=XX["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new vj(k_(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Iu}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new vj(k_(n),t.status,n.weak_password.reasons);throw new Y1e(k_(n),t.status||500,r)}const Swe=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ur(t,e,n,r){var i;const o=Object.assign({},r?.headers);o[O$]||(o[O$]=XX["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await Cwe(t,e,n+s,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(u):{data:Object.assign({},u),error:null}}async function Cwe(t,e,n,r,i,o){const a=Swe(e,r,i,o);let s;try{s=await t(n,Object.assign({},a))}catch(u){throw console.error(u),new S$(k_(u),0)}if(s.ok||await Oj(s),r?.noResolveJson)return s;try{return await s.json()}catch(u){await Oj(u)}}function tf(t){var e;let n=null;Ewe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=awe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Sj(t){const e=tf(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function _0(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Twe(t){return{data:t,error:null}}function kwe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,a=gO(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},u=Object.assign({},a);return{data:{properties:s,user:u},error:null}}function Cj(t){return t}function Ewe(t){return t.access_token&&t.refresh_token&&t.expires_in}const M3=["global","local","others"];class Awe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=JX(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=M3[0]){if(M3.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${M3.join(", ")}`);try{return await ur(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Vn(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ur(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_0})}catch(r){if(Vn(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=gO(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await ur(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:kwe,redirectTo:n?.redirectTo})}catch(n){if(Vn(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ur(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_0})}catch(n){if(Vn(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,a,s,u;try{const f={nextPage:null,lastPage:0,total:0},g=await ur(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Cj});if(g.error)throw g.error;const _=await g.json(),w=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,S=(u=(s=g.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&u!==void 0?u:[];return S.length>0&&(S.forEach(E=>{const A=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(E.split(";")[1].split("=")[1]);f[`${R}Page`]=A}),f.total=parseInt(w)),{data:Object.assign(Object.assign({},_),f),error:null}}catch(f){if(Vn(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){p1(e);try{return await ur(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_0})}catch(n){if(Vn(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){p1(e);try{return await ur(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:_0})}catch(r){if(Vn(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){p1(e);try{return await ur(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:_0})}catch(r){if(Vn(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){p1(e.userId);try{const{data:n,error:r}=await ur(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Vn(n))return{data:null,error:n};throw n}}async _deleteFactor(e){p1(e.userId),p1(e.id);try{return{data:await ur(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Vn(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,a,s,u;try{const f={nextPage:null,lastPage:0,total:0},g=await ur(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Cj});if(g.error)throw g.error;const _=await g.json(),w=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,S=(u=(s=g.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&u!==void 0?u:[];return S.length>0&&(S.forEach(E=>{const A=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(E.split(";")[1].split("=")[1]);f[`${R}Page`]=A}),f.total=parseInt(w)),{data:Object.assign(Object.assign({},_),f),error:null}}catch(f){if(Vn(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await ur(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Vn(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ur(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Vn(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ur(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Vn(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ur(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Vn(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ur(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Vn(n))return{data:null,error:n};throw n}}}function Tj(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const m1={debug:!!(globalThis&&KX()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class eY extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Pwe extends eY{}async function Mwe(t,e,n){m1.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),m1.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){m1.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{m1.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw m1.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Pwe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(m1.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Rwe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function tY(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Iwe(t){return parseInt(t,16)}function Dwe(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Lwe(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:u,resources:f,scheme:g,uri:_,version:w}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const S=tY(t.address),E=g?`${g}://${r}`:r,A=t.statement?`${t.statement}
`:"",R=`${E} wants you to sign in with your Ethereum account:
${S}

${A}`;let $=`URI: ${_}
Version: ${w}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&($+=`
Expiration Time: ${i.toISOString()}`),s&&($+=`
Not Before: ${s.toISOString()}`),u&&($+=`
Request ID: ${u}`),f){let z=`
Resources:`;for(const B of f){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);z+=`
- ${B}`}$+=z}return`${R}
${$}`}class Vs extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class YP extends Vs{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function $we({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Vs({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Vs({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Vs({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Vs({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Vs({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Vs({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new Vs({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Vs({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(nY(a)){if(o.rp.id!==a)return new Vs({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Vs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Vs({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Vs({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Vs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function zwe({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Vs({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Vs({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(nY(r)){if(n.rpId!==r)return new Vs({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Vs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Vs({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Vs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Nwe{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Bwe=new Nwe;function Fwe(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=gO(t,["challenge","user","excludeCredentials"]),o=K1(e).buffer,a=Object.assign(Object.assign({},n),{id:K1(n.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){s.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const f=r[u];s.excludeCredentials[u]=Object.assign(Object.assign({},f),{id:K1(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return s}function jwe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=gO(t,["challenge","allowCredentials"]),i=K1(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const s=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:K1(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function Vwe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:F_(new Uint8Array(t.response.attestationObject)),clientDataJSON:F_(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Qwe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:F_(new Uint8Array(i.authenticatorData)),clientDataJSON:F_(new Uint8Array(i.clientDataJSON)),signature:F_(new Uint8Array(i.signature)),userHandle:i.userHandle?F_(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function nY(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function kj(){var t,e;return!!(Ya()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Uwe(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new YP("Browser returned unexpected credential type",e)}:{data:null,error:new YP("Empty credential response",e)}}catch(e){return{data:null,error:$we({error:e,options:t})}}}async function Zwe(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new YP("Browser returned unexpected credential type",e)}:{data:null,error:new YP("Empty credential response",e)}}catch(e){return{data:null,error:zwe({error:e,options:t})}}}const qwe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Wwe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function KP(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(e(a)){const s=r[o];e(s)?r[o]=KP(s,a):r[o]=KP(a)}else r[o]=a}return r}function Hwe(t,e){return KP(qwe,t,e||{})}function Gwe(t,e){return KP(Wwe,t,e||{})}class Xwe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){try{const{data:a,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:s};const u=i??Bwe.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:f}=a.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(a.webauthn.type){case"create":{const f=Hwe(a.webauthn.credential_options.publicKey,o?.create),{data:g,error:_}=await Uwe({publicKey:f,signal:u});return g?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:g}},error:null}:{data:null,error:_}}case"request":{const f=Gwe(a.webauthn.credential_options.publicKey,o?.request),{data:g,error:_}=await Zwe(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:f,signal:u}));return g?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:g}},error:null}:{data:null,error:_}}}}catch(a){return Vn(a)?{data:null,error:a}:{data:null,error:new M_("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new zC("rpId is required for WebAuthn authentication")};try{if(!kj())return{data:null,error:new M_("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:s};const{webauthn:u}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(a){return Vn(a)?{data:null,error:a}:{data:null,error:new M_("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new zC("rpId is required for WebAuthn registration")};try{if(!kj())return{data:null,error:new M_("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(g=>{var _;return(_=g.data)===null||_===void 0?void 0:_.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:s};const{data:u,error:f}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:f}}catch(a){return Vn(a)?{data:null,error:a}:{data:null,error:new M_("Unexpected error in register",a)}}}}Rwe();const Ywe={url:q1e,storageKey:W1e,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:H1e,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Ej(t,e,n){return await n()}const g1={};class NC{get jwks(){var e,n;return(n=(e=g1[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){g1[this.storageKey]=Object.assign(Object.assign({},g1[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=g1[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){g1[this.storageKey]=Object.assign(Object.assign({},g1[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},Ywe),e);if(this.storageKey=o.storageKey,this.instanceID=(n=NC.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,NC.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Ya()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Awe({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=JX(o.fetch),this.lock=o.lock||Ej,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Ya()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Mwe:this.lock=Ej,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Xwe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:KX()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tj(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Tj(this.memoryStorage)),Ya()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${GX}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Ya()&&(n=cwe(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Ya()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),ewe(o)){const u=(e=o.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Vn(n)?this._returnResult({error:n}):this._returnResult({error:new M_("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await ur(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:tf}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const u=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:f,session:u},error:null})}catch(o){if(Vn(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:g,password:_,options:w}=e;let S=null,E=null;this.flowType==="pkce"&&([S,E]=await f1(this.storage,this.storageKey)),o=await ur(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:g,password:_,data:(n=w?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:S,code_challenge_method:E},xform:tf})}else if("phone"in e){const{phone:g,password:_,options:w}=e;o=await ur(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:_,data:(r=w?.data)!==null&&r!==void 0?r:{},channel:(i=w?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:tf})}else throw new WE("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return await Ga(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:s});const u=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:f,session:u},error:null})}catch(o){if(await Ga(this.storage,`${this.storageKey}-code-verifier`),Vn(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:a,options:s}=e;n=await ur(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Sj})}else if("phone"in e){const{phone:o,password:a,options:s}=e;n=await ur(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Sj})}else throw new WE("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new d1;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Vn(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,a,s,u,f,g,_,w;let S,E;if("message"in e)S=e.message,E=e.signature;else{const{chain:A,wallet:R,statement:$,options:z}=e;let B;if(Ya())if(typeof R=="object")B=R;else{const ie=window;if("ethereum"in ie&&typeof ie.ethereum=="object"&&"request"in ie.ethereum&&typeof ie.ethereum.request=="function")B=ie.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=R}const F=new URL((n=z?.url)!==null&&n!==void 0?n:window.location.href),U=await B.request({method:"eth_requestAccounts"}).then(ie=>ie).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const q=tY(U[0]);let H=(r=z?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!H){const ie=await B.request({method:"eth_chainId"});H=Iwe(ie)}const ne={domain:F.host,address:q,statement:$,uri:F.href,version:"1",chainId:H,nonce:(i=z?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=z?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=z?.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(u=z?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(f=z?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(g=z?.signInWithEthereum)===null||g===void 0?void 0:g.resources};S=Lwe(ne),E=await B.request({method:"personal_sign",params:[Dwe(S),q]})}try{const{data:A,error:R}=await ur(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:E},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:tf});if(R)throw R;if(!A||!A.session||!A.user){const $=new d1;return this._returnResult({data:{user:null,session:null},error:$})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:R})}catch(A){if(Vn(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var n,r,i,o,a,s,u,f,g,_,w,S;let E,A;if("message"in e)E=e.message,A=e.signature;else{const{chain:R,wallet:$,statement:z,options:B}=e;let F;if(Ya())if(typeof $=="object")F=$;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))F=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=$}const U=new URL((n=B?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in F&&F.signIn){const q=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B?.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),z?{statement:z}:null));let H;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")H=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)H=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)E=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),A=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${U.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(i=(r=B?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=B?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((a=B?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((s=B?.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((u=B?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((f=B?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((_=(g=B?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||_===void 0)&&_.length?["Resources",...B.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const q=await F.signMessage(new TextEncoder().encode(E),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=q}}try{const{data:R,error:$}=await ur(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:F_(A)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:tf});if($)throw $;if(!R||!R.session||!R.user){const z=new d1;return this._returnResult({data:{user:null,session:null},error:z})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:$})}catch(R){if(Vn(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(e){const n=await b_(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new twe;const{data:o,error:a}=await ur(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:tf});if(await Ga(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new d1;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(await Ga(this.storage,`${this.storageKey}-code-verifier`),Vn(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=e,s=await ur(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:tf}),{data:u,error:f}=s;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!u||!u.session||!u.user){const g=new d1;return this._returnResult({data:{user:null,session:null},error:g})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:f})}catch(n){if(Vn(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,a;try{if("email"in e){const{email:s,options:u}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await f1(this.storage,this.storageKey));const{error:_}=await ur(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=u?.data)!==null&&n!==void 0?n:{},create_user:(r=u?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:s,options:u}=e,{data:f,error:g}=await ur(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(o=u?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(a=u?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:g})}throw new WE("You must provide either an email or phone number.")}catch(s){if(await Ga(this.storage,`${this.storageKey}-code-verifier`),Vn(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:s}=await ur(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:tf});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,f=a.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:f,session:u},error:null})}catch(i){if(Vn(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,a;try{let s=null,u=null;this.flowType==="pkce"&&([s,u]=await f1(this.storage,this.storageKey));const f=await ur(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:u}),headers:this.headers,xform:Twe});return!((o=f.data)===null||o===void 0)&&o.url&&Ya()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(s){if(await Ga(this.storage,`${this.storageKey}-code-verifier`),Vn(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Iu;const{error:i}=await ur(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Vn(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:a}=await ur(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:a,error:s}=await ur(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:s})}throw new WE("You must provide either an email or phone number and a type")}catch(n){if(Vn(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await b_(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<k3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await b_(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=P3()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=wwe(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ur(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_0}):await this._useSession(async n=>{var r,i,o;const{data:a,error:s}=n;if(s)throw s;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Iu}:await ur(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:_0})})}catch(n){if(Vn(n))return J1e(n)&&(await this._removeSession(),await Ga(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Iu;const a=i.session;let s=null,u=null;this.flowType==="pkce"&&e.email!=null&&([s,u]=await f1(this.storage,this.storageKey));const{data:f,error:g}=await ur(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:u}),jwt:a.access_token,xform:_0});if(g)throw g;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await Ga(this.storage,`${this.storageKey}-code-verifier`),Vn(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Iu;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=A3(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:s,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:u}=await this._getUser(e.access_token);if(u)throw u;o={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(Vn(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:s}=n;if(s)throw s;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Iu;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Vn(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Ya())throw new HE("No browser detected.");if(e.error||e.error_description||e.error_code)throw new HE(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new yj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new HE("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yj("No code detected.");const{data:z,error:B}=await this._exchangeCodeForSession(e.code);if(B)throw B;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:u,token_type:f}=e;if(!o||!s||!a||!f)throw new HE("No session defined in URL");const g=Math.round(Date.now()/1e3),_=parseInt(s);let w=g+_;u&&(w=parseInt(u));const S=w-g;S*1e3<=P1&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${_}s`);const E=w-_;g-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,w,g):g-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,w,g);const{data:A,error:R}=await this._getUser(o);if(R)throw R;const $={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:_,expires_at:w,refresh_token:a,token_type:f,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:$,redirectType:e.type},error:null})}catch(r){if(Vn(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await b_(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({error:o});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&!(K1e(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await Ga(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=lwe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await f1(this.storage,this.storageKey,!0));try{return await ur(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Ga(this.storage,`${this.storageKey}-code-verifier`),Vn(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Vn(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,s,u,f,g;const{data:_,error:w}=o;if(w)throw w;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await ur(this.fetch,"GET",S,{headers:this.headers,jwt:(g=(f=_.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return Ya()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(Vn(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:s,token:u,access_token:f,nonce:g}=e,_=await ur(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:s,id_token:u,access_token:f,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:tf}),{data:w,error:S}=_;return S?this._returnResult({data:{user:null,session:null},error:S}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new d1}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:S}))}catch(i){if(await Ga(this.storage,`${this.storageKey}-code-verifier`),Vn(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await ur(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Vn(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await dwe(async i=>(i>0&&await hwe(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ur(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:tf})),(i,o)=>{const a=200*Math.pow(2,i);return o&&E3(o)&&Date.now()+a-r<P1})}catch(r){if(this._debug(n,"error",r),Vn(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ya()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await b_(this.storage,this.storageKey);if(i&&this.userStorage){let a=await b_(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await M1(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a?.user)!==null&&e!==void 0?e:P3()}else if(i&&!i.user&&!i.user){const a=await b_(this.storage,this.storageKey+"-user");a&&a?.user?(i.user=a.user,await Ga(this.storage,this.storageKey+"-user"),await M1(this.storage,this.storageKey,i)):i.user=P3()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<k3;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${k3}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),E3(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(i.access_token);!s&&a?.user?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Iu;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new nR;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Iu;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),Vn(o)){const a={data:null,error:o};return E3(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,n)}catch(u){o.push(u)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ga(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await M1(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=wj(i);await M1(this.storage,this.storageKey,o)}else{const i=wj(n);await M1(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ga(this.storage,this.storageKey),await Ga(this.storage,this.storageKey+"-code-verifier"),await Ga(this.storage,this.storageKey+"-user"),this.userStorage&&await Ga(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ya()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),P1);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/P1);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${P1}ms, refresh threshold is ${w$} ticks`),i<=w$&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof eY)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ya()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await f1(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await ur(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Vn(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:f}=await ur(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&u.type==="totp"&&(!((i=u?.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(Vn(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Vwe(e.webauthn.credential_response):Qwe(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:u}=await ur(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:u}))})}catch(n){if(Vn(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await ur(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:Fwe(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:jwe(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Vn(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n?.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=A3(r.access_token);let a=null;o.aal&&(a=o.aal);let s=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(s="aal2");const f=o.amr||[];return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ur(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Iu})})}catch(n){if(Vn(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Iu});const a=await ur(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Ya()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Vn(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Iu});const a=await ur(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Ya()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Vn(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ur(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Iu})})}catch(e){if(Vn(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await ur(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Iu})})}catch(n){if(Vn(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(s=>s.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(s=>s.kid===e),r&&this.jwks_cached_at+X1e>i)return r;const{data:o,error:a}=await ur(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(s=>s.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:S,error:E}=await this.getSession();if(E||!S.session)return this._returnResult({data:null,error:E});r=S.session.access_token}const{header:i,payload:o,signature:a,raw:{header:s,payload:u}}=A3(r);n?.allowExpired||_we(o.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!f){const{error:S}=await this.getUser(r);if(S)throw S;return{data:{claims:o,header:i,signature:a},error:null}}const g=bwe(i.alg),_=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,_,a,swe(`${s}.${u}`)))throw new C$("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if(Vn(r))return this._returnResult({data:null,error:r});throw r}}}NC.nextInstanceID={};const Kwe=NC,Jwe="2.89.0";let L2="";typeof Deno<"u"?L2="deno":typeof document<"u"?L2="web":typeof navigator<"u"&&navigator.product==="ReactNative"?L2="react-native":L2="node";const eOe={"X-Client-Info":`supabase-js-${L2}/${Jwe}`},tOe={headers:eOe},nOe={schema:"public"},rOe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iOe={};function BC(t){"@babel/helpers - typeof";return BC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BC(t)}function oOe(t,e){if(BC(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(BC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sOe(t){var e=oOe(t,"string");return BC(e)=="symbol"?e:e+""}function aOe(t,e,n){return(e=sOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Aj(Object(n),!0).forEach(function(r){aOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Aj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const lOe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cOe=()=>Headers,uOe=(t,e,n)=>{const r=lOe(n),i=cOe();return async(o,a)=>{var s;const u=(s=await e())!==null&&s!==void 0?s:t;let f=new i(a?.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${u}`),r(o,_s(_s({},a),{},{headers:f}))}};function hOe(t){return t.endsWith("/")?t:t+"/"}function dOe(t,e){var n,r;const{db:i,auth:o,realtime:a,global:s}=t,{db:u,auth:f,realtime:g,global:_}=e,w={db:_s(_s({},u),i),auth:_s(_s({},f),o),realtime:_s(_s({},g),a),storage:{},global:_s(_s(_s({},_),s),{},{headers:_s(_s({},(n=_?.headers)!==null&&n!==void 0?n:{}),(r=s?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?w.accessToken=t.accessToken:delete w.accessToken,w}function fOe(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(hOe(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var pOe=class extends Kwe{constructor(t){super(t)}},mOe=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const o=fOe(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a=`sb-${o.hostname.split(".")[0]}-auth-token`,s={db:nOe,realtime:iOe,auth:_s(_s({},rOe),{},{storageKey:a}),global:tOe},u=dOe(n??{},s);if(this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(g,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=u.auth)!==null&&f!==void 0?f:{},this.headers,u.global.fetch)}this.fetch=uOe(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(_s({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new Hxe(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Z1e(this.storageUrl.href,this.headers,this.fetch,n?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Qxe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:a,lock:s,debug:u,throwOnError:f},g,_){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pOe({url:this.authUrl.href,headers:_s(_s({},w),g),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:s,debug:u,throwOnError:f,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new h1e(this.realtimeUrl.href,_s(_s({},t),{},{params:_s(_s({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const gOe=(t,e,n)=>new mOe(t,e,n);function yOe(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}yOe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const vOe="https://llgcvbswrfgswttnevud.supabase.co",_Oe="sb_publishable_6OnPZh7s5SgKVm6eagWfYQ_PQU-qJzK",Si=gOe(vOe,_Oe),rY=Q.createContext(void 0),bOe=({children:t})=>{const[e,n]=Q.useState(null),[r,i]=Q.useState(null),[o,a]=Q.useState(null),[s,u]=Q.useState([]),[f,g]=Q.useState(null),[_,w]=Q.useState(null),[S,E]=Q.useState(!0),A=async()=>{try{const{data:q,error:H}=await Si.from("check_in").select("*").order("created_at",{ascending:!1}).limit(1).single();H?(H.code!=="PGRST116"&&console.error("Error fetching latest check-in:",H),a(null)):a(q);const{data:ne,error:ie}=await Si.from("check_in").select("status");if(ie)console.error("Error fetching visited stops:",ie),u([]);else if(ne){const ce=[...new Set(ne.map(xe=>xe.status))];u(ce)}}catch(q){console.error("Unexpected error fetching check-ins:",q)}},R=async q=>{try{const{data:H,error:ne}=await Si.from("user_profile").select("*").eq("id",q).single();ne?(ne.code!=="PGRST116"&&console.error("Error fetching user profile:",ne),g(null)):g(H)}catch(H){console.error("Unexpected error fetching profile:",H)}},$=async q=>{try{const{data:H,error:ne}=await Si.from("user_role").select("role").eq("user_id",q).maybeSingle();ne?(console.error("Error fetching user role:",ne),w(null)):w(H?H.role:null)}catch(H){console.error("Unexpected error fetching role:",H),w(null)}};Q.useEffect(()=>{let q=!0;const H=async ce=>{try{await Promise.all([A(),R(ce),$(ce)])}catch(xe){console.error("Error fetching user data:",xe)}},ie=(async()=>{const{data:{session:ce}}=await Si.auth.getSession();q&&(i(ce),n(ce?.user??null),ce&&await H(ce.user.id),E(!1));const{data:{subscription:xe}}=Si.auth.onAuthStateChange(async(re,me)=>{q&&(re==="SIGNED_OUT"?(i(null),n(null),a(null),u([]),g(null),w(null),E(!1)):me&&(re==="SIGNED_IN"||re==="TOKEN_REFRESHED"||re==="INITIAL_SESSION")&&(i(me),n(me.user),(re==="SIGNED_IN"||re==="INITIAL_SESSION")&&await H(me.user.id),E(!1)))});return xe})();return()=>{q=!1,ie.then(ce=>ce?.unsubscribe())}},[]);const z=async()=>{try{const{error:q}=await Si.auth.signOut();q&&console.error("Error signing out:",q)}catch(q){console.error("Unexpected error during sign out:",q)}finally{i(null),n(null),a(null),u([]),g(null),w(null),E(!1)}},B=async()=>{await A()},F=async()=>{e&&await R(e.id)},U=async()=>{e&&await $(e.id)};return J.jsx(rY.Provider,{value:{user:e,session:r,latestCheckIn:o,visitedStops:s,profile:f,role:_,loading:S,signOut:z,refreshCheckIn:B,refreshProfile:F,refreshRole:U},children:t})},yO=()=>{const t=Q.useContext(rY);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Jr={Zrich:[8.5417,47.3769],Tokyo:[139.6917,35.6895],Osaka:[135.5022,34.6937],Papeete:[-149.5667,-17.5333],Auckland:[174.7633,-36.8485],Tahiti:[-149.4068,-17.6509],"Bora-Bora":[-151.7415,-16.5004],Queenstown:[168.6626,-45.0312],Christchurch:[172.6362,-43.5321],Wellington:[174.7762,-41.2865],Sydney:[151.2093,-33.8688],Singapore:[103.8198,1.3521],Frankfurt:[8.6821,50.1109]},_N=[{category:"Stop",key:"Zrich",section:null,name:"Zrich",geolocation:Jr.Zrich,startDate:new Date("2025-12-28"),endDate:new Date("2025-12-28")},{key:"ZRH-TYO",category:"Trip",section:null,name:"LX999 ZRH-TYO",startLocation:"Zrich",endLocation:"Tokyo",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[Jr.Zrich,Jr.Tokyo]},startDateTime:new Date("2025-12-28 13:00 CET"),endTime:new Date("2025-12-29 10:15 JST")},{key:"TYO-OSA",category:"Trip",section:"Japan ",startLocation:"Tokyo",endLocation:"Osaka",transportationMode:"Train",geometricShape:{type:"LineString",coordinates:[Jr.Tokyo,Jr.Osaka]},startDateTime:new Date("2025-12-29 13:48 JST"),endTime:new Date("2025-12-29 16:15 JST")},{category:"Stop",key:"Osaka",section:"Japan ",name:"Osaka",geolocation:Jr.Osaka,startDate:new Date("2025-12-29"),endDate:new Date("2026-01-03")},{key:"OSA-TYO",category:"Trip",section:"Japan ",startLocation:"Osaka",endLocation:"Tokyo",transportationMode:"Train",geometricShape:{type:"LineString",coordinates:[Jr.Osaka,Jr.Tokyo]},startDateTime:new Date("2026-01-03 11:51 JST"),endTime:new Date("2026-01-03 14:21 JST")},{category:"Stop",key:"Tokyo",section:"Japan ",name:"Tokyo",geolocation:Jr.Tokyo,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{key:"TYO-PPT",category:"Trip",section:null,startLocation:"Tokyo",endLocation:"Papeete",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[Jr.Tokyo,Jr.Papeete]},startDateTime:new Date("2026-01-06 20:00 JST"),endTime:new Date("2026-01-06 11:40 GMT-10")},{key:"PPT-AKL",category:"Trip",section:null,startLocation:"Papeete",endLocation:"Auckland",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[Jr.Papeete,Jr.Auckland]},startDateTime:new Date("2026-01-24 09:10 GMT-10"),endTime:new Date("2026-01-25 13:40 GMT+13")},{category:"Stop",key:"Tahiti",section:"French Polynesia ",name:"Tahiti",geolocation:Jr.Tahiti,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{category:"Stop",key:"Bora-Bora",section:"French Polynesia ",name:"Bora-Bora",geolocation:Jr["Bora-Bora"],startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{category:"Stop",key:"Queenstown",section:"South Island ",name:"Queenstown",geolocation:Jr.Queenstown,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{category:"Stop",key:"Christchurch",section:"South Island ",name:"Christchurch",geolocation:Jr.Christchurch,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{category:"Stop",key:"Auckland",section:"North Island ",name:"Auckland",geolocation:Jr.Auckland,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{category:"Stop",key:"Wellington",section:"Cruise ",name:"Wellington",geolocation:Jr.Wellington,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{category:"Stop",key:"Sydney",section:"Cruise ",name:"Sydney",geolocation:Jr.Sydney,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{key:"SYD-SIN",category:"Trip",section:null,startLocation:"Sydney",endLocation:"Singapore",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[Jr.Sydney,Jr.Singapore]},startDateTime:new Date("2026-01-26 15:50 AEDT"),endTime:new Date("2026-01-26 21:00 SGT")},{category:"Stop",key:"Singapore",section:"Singapore ",name:"Singapore",geolocation:Jr.Singapore,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{key:"SIN-FRA",category:"Trip",section:null,startLocation:"Singapore",endLocation:"Frankfurt",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[Jr.Singapore,Jr.Frankfurt]},startDateTime:new Date("2026-01-26 23:55 SGT"),endTime:new Date("2026-01-27 06:05 CET")},{key:"FRA-ZRH",category:"Trip",section:null,startLocation:"Frankfurt",endLocation:"Zrich",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[Jr.Frankfurt,Jr.Zrich]},startDateTime:new Date("2026-01-27 08:00 CET"),endTime:new Date("2026-01-27 08:50 CET")},{key:"AKL-ZQN",category:"Trip",section:"South Island ",startLocation:"Auckland",endLocation:"Queenstown",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[Jr.Auckland,Jr.Queenstown]},startDateTime:new Date("2026-01-20 09:00 NZDT"),endTime:new Date("2026-01-20 10:50 NZDT")},{key:"CHC-AKL",category:"Trip",section:"North Island ",startLocation:"Christchurch",endLocation:"Auckland",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[Jr.Christchurch,Jr.Auckland]},startDateTime:new Date("2026-01-23 16:00 NZDT"),endTime:new Date("2026-01-23 17:25 NZDT")},{key:"PPT-BOB",category:"Trip",section:"French Polynesia ",startLocation:"Papeete",endLocation:"Bora-Bora",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[Jr.Papeete,Jr["Bora-Bora"]]},startDateTime:new Date("2026-01-08 10:00 GMT-10"),endTime:new Date("2026-01-08 10:50 GMT-10")},{key:"BOB-PPT",category:"Trip",section:"French Polynesia ",startLocation:"Bora-Bora",endLocation:"Papeete",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[Jr["Bora-Bora"],Jr.Papeete]},startDateTime:new Date("2026-01-22 14:00 GMT-10"),endTime:new Date("2026-01-22 14:50 GMT-10")},{key:"CHC-DUN",category:"Trip",section:"South Island ",startLocation:"Christchurch",endLocation:"Dunedin",transportationMode:"Boat",geometricShape:{type:"LineString",coordinates:[[172.719,-43.603],[172.95,-43.65],[173.2,-43.9],[172.4,-44.6],[171.4,-45.3],[170.75,-45.77],[170.619,-45.818]]},startDateTime:new Date("2026-01-20 08:00 NZDT"),endTime:new Date("2026-01-20 18:00 NZDT")},{category:"Stop",key:"Dunedin",section:"South Island ",name:"Dunedin",geolocation:[170.5027,-45.8742],startDate:new Date("2026-01-20"),endDate:new Date("2026-01-22")}],GE=43200,Pj=1440,Mj=Symbol.for("constructDateFrom");function bN(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Mj in t?t[Mj](e):t instanceof Date?new t.constructor(e):new Date(e)}function L0(t,e){return bN(t,t)}let xOe={};function wOe(){return xOe}function Rj(t){const e=L0(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function xN(t,...e){const n=bN.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function lP(t,e){const n=+L0(t)-+L0(e);return n<0?-1:n>0?1:n}function OOe(t){return bN(t,Date.now())}function SOe(t,e,n){const[r,i]=xN(n?.in,t,e),o=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return o*12+a}function COe(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function TOe(t,e){return+L0(t)-+L0(e)}function kOe(t,e){const n=L0(t);return n.setHours(23,59,59,999),n}function EOe(t,e){const n=L0(t),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function AOe(t,e){const n=L0(t);return+kOe(n)==+EOe(n)}function POe(t,e,n){const[r,i,o]=xN(n?.in,t,t,e),a=lP(i,o),s=Math.abs(SOe(i,o));if(s<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*s);let u=lP(i,o)===-a;AOe(r)&&s===1&&lP(r,o)===1&&(u=!1);const f=a*(s-+u);return f===0?0:f}function MOe(t,e,n){const r=TOe(t,e)/1e3;return COe(n?.roundingMethod)(r)}const ROe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},IOe=(t,e,n)=>{let r;const i=ROe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function R3(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const DOe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},LOe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$Oe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zOe={date:R3({formats:DOe,defaultWidth:"full"}),time:R3({formats:LOe,defaultWidth:"full"}),dateTime:R3({formats:$Oe,defaultWidth:"full"})},NOe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},BOe=(t,e,n,r)=>NOe[t];function c2(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,s=n?.width?String(n.width):a;i=t.formattingValues[s]||t.formattingValues[a]}else{const a=t.defaultWidth,s=n?.width?String(n.width):t.defaultWidth;i=t.values[s]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}const FOe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},jOe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},VOe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},QOe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},UOe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ZOe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qOe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},WOe={ordinalNumber:qOe,era:c2({values:FOe,defaultWidth:"wide"}),quarter:c2({values:jOe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:c2({values:VOe,defaultWidth:"wide"}),day:c2({values:QOe,defaultWidth:"wide"}),dayPeriod:c2({values:UOe,defaultWidth:"wide",formattingValues:ZOe,defaultFormattingWidth:"wide"})};function u2(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const a=o[0],s=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(s)?GOe(s,_=>_.test(a)):HOe(s,_=>_.test(a));let f;f=t.valueCallback?t.valueCallback(u):u,f=n.valueCallback?n.valueCallback(f):f;const g=e.slice(a.length);return{value:f,rest:g}}}function HOe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function GOe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function XOe(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const s=e.slice(i.length);return{value:a,rest:s}}}const YOe=/^(\d+)(th|st|nd|rd)?/i,KOe=/\d+/i,JOe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},eSe={any:[/^b/i,/^(a|c)/i]},tSe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},nSe={any:[/1/i,/2/i,/3/i,/4/i]},rSe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},iSe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oSe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},sSe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},aSe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},lSe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cSe={ordinalNumber:XOe({matchPattern:YOe,parsePattern:KOe,valueCallback:t=>parseInt(t,10)}),era:u2({matchPatterns:JOe,defaultMatchWidth:"wide",parsePatterns:eSe,defaultParseWidth:"any"}),quarter:u2({matchPatterns:tSe,defaultMatchWidth:"wide",parsePatterns:nSe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:u2({matchPatterns:rSe,defaultMatchWidth:"wide",parsePatterns:iSe,defaultParseWidth:"any"}),day:u2({matchPatterns:oSe,defaultMatchWidth:"wide",parsePatterns:sSe,defaultParseWidth:"any"}),dayPeriod:u2({matchPatterns:aSe,defaultMatchWidth:"any",parsePatterns:lSe,defaultParseWidth:"any"})},uSe={code:"en-US",formatDistance:IOe,formatLong:zOe,formatRelative:BOe,localize:WOe,match:cSe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function hSe(t,e,n){const r=wOe(),i=n?.locale??r.locale??uSe,o=2520,a=lP(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const s=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:a}),[u,f]=xN(n?.in,...a>0?[e,t]:[t,e]),g=MOe(f,u),_=(Rj(f)-Rj(u))/1e3,w=Math.round((g-_)/60);let S;if(w<2)return n?.includeSeconds?g<5?i.formatDistance("lessThanXSeconds",5,s):g<10?i.formatDistance("lessThanXSeconds",10,s):g<20?i.formatDistance("lessThanXSeconds",20,s):g<40?i.formatDistance("halfAMinute",0,s):g<60?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",1,s):w===0?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",w,s);if(w<45)return i.formatDistance("xMinutes",w,s);if(w<90)return i.formatDistance("aboutXHours",1,s);if(w<Pj){const E=Math.round(w/60);return i.formatDistance("aboutXHours",E,s)}else{if(w<o)return i.formatDistance("xDays",1,s);if(w<GE){const E=Math.round(w/Pj);return i.formatDistance("xDays",E,s)}else if(w<GE*2)return S=Math.round(w/GE),i.formatDistance("aboutXMonths",S,s)}if(S=POe(f,u),S<12){const E=Math.round(w/GE);return i.formatDistance("xMonths",E,s)}else{const E=S%12,A=Math.trunc(S/12);return E<3?i.formatDistance("aboutXYears",A,s):E<9?i.formatDistance("overXYears",A,s):i.formatDistance("almostXYears",A+1,s)}}function iY(t,e){return hSe(t,OOe(t),e)}const dSe=t=>{switch(t){case"Plane":return"";case"Train":return"";case"Boat":return"";case"Car":return"";default:return""}},fSe=({onMenuClick:t})=>{const{user:e,profile:n,latestCheckIn:r,signOut:i,role:o}=yO(),a=$T(),[s,u]=Q.useState(null),[f,g]=Q.useState(null),[_,w]=Q.useState([]),S=async()=>{try{const[F,U,q]=await Promise.all([Si.from("check_in").select("*").order("created_at",{ascending:!1}).limit(4),Si.from("blog_post").select("*").order("created_date",{ascending:!1}).limit(4),Si.from("photo_album").select("*").order("created_at",{ascending:!1}).limit(4)]),H=[...(F.data||[]).map(ne=>({id:`checkin-${ne.id}`,type:"check-in",title:ne.message||`Checked in: ${ne.status}`,date:new Date(ne.created_at),icon:J.jsx(dN,{color:"primary"}),link:"/"})),...(U.data||[]).map(ne=>({id:`blog-${ne.id}`,type:"blog",title:`New Post: ${ne.title}`,date:new Date(ne.created_date),icon:J.jsx(fN,{color:"secondary"}),link:`/blog?id=${ne.id}`})),...(q.data||[]).map(ne=>({id:`photo-${ne.id}`,type:"photo",title:`Photo Album: ${ne.title}`,date:new Date(ne.created_at),icon:J.jsx(IC,{sx:{color:"#10b981"}}),link:ne.icloud_link,external:!0}))].sort((ne,ie)=>ie.date.getTime()-ne.date.getTime()).slice(0,4);w(H)}catch(F){console.error("Error fetching notifications:",F)}};Q.useEffect(()=>{e&&S()},[e]);const E=F=>{u(F.currentTarget)},A=()=>{u(null)},R=async()=>{await i(),A(),a("/")},$=F=>{g(F.currentTarget)},z=()=>{g(null)},B=Q.useMemo(()=>{if(!r)return null;const F=_N.find(H=>H.key===r.status);if(!F)return null;let U="";F.category==="Stop"?U=`Now in ${F.name}!`:U=`Now in ${dSe(F.transportationMode)} ${F.startLocation} -> ${F.endLocation}!`;const q="".repeat(U.length*1.5);return`${U}${q}`},[r]);return J.jsx(tye,{position:"fixed",sx:{zIndex:F=>F.zIndex.drawer+1},children:J.jsxs(hN,{children:[J.jsx(oP,{color:"inherit","aria-label":"open drawer",onClick:t,edge:"start",sx:{mr:2},children:J.jsx(zxe,{})}),J.jsx(br,{variant:"h6",noWrap:!0,component:"div",sx:{mr:4},children:"Pacific Trip 2026"}),J.jsxs(er,{sx:{display:"flex",gap:2},children:[J.jsx(Zs,{color:"inherit",component:sf,to:"/blog",children:"Blog"}),J.jsx(Zs,{color:"inherit",component:sf,to:"/photos",children:"Photos"}),J.jsx(Zs,{color:"inherit",component:sf,to:"/map",children:"Map"}),o==="admin"&&J.jsx(Zs,{color:"inherit",component:sf,to:"/admin",children:"Admin"})]}),J.jsx(er,{sx:{flexGrow:1,display:"flex",justifyContent:"center"},children:e&&B&&J.jsx(er,{sx:{display:"flex",alignItems:"center",bgcolor:"#ef4444",color:"white",px:1.5,py:.5,borderRadius:1,overflow:"hidden",width:{xs:150,sm:250,md:350},position:"relative"},children:J.jsx(br,{sx:{whiteSpace:"nowrap",fontSize:"0.85rem",fontWeight:600,animation:"ticker 5s linear","@keyframes ticker":{"0%":{transform:"translateX(100%)"},"100%":{}},"&:hover":{animationPlayState:"paused"}},children:B})})}),e?J.jsxs(er,{sx:{display:"flex",alignItems:"center",gap:2},children:[J.jsx(oP,{color:"inherit",onClick:$,children:J.jsx(Y0e,{badgeContent:_.length,color:"error",children:J.jsx(Nxe,{})})}),J.jsxs(DX,{open:!!f,anchorEl:f,onClose:z,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:320,borderRadius:2,mt:1.5}},children:[J.jsx(er,{sx:{p:2,bgcolor:"primary.main",color:"white"},children:J.jsx(br,{variant:"subtitle1",fontWeight:"bold",children:"Recent Updates"})}),J.jsx(df,{}),J.jsx(mO,{sx:{p:0},children:_.length>0?_.map((F,U)=>J.jsxs(se.Fragment,{children:[J.jsxs(GP,{component:F.external?"a":sf,...F.external?{href:F.link,target:"_blank",rel:"noopener noreferrer"}:{to:F.link},onClick:z,sx:{"&:hover":{bgcolor:"action.hover"},textDecoration:"none",color:"inherit",display:"flex",alignItems:"center"},children:[J.jsx(MX,{sx:{minWidth:40},children:F.icon}),J.jsx(Tw,{primary:F.title,secondary:iY(F.date,{addSuffix:!0}),primaryTypographyProps:{variant:"body2",fontWeight:500},secondaryTypographyProps:{variant:"caption"}})]}),U<_.length-1&&J.jsx(df,{})]},F.id)):J.jsx(GP,{children:J.jsx(Tw,{primary:"No recent activity",primaryTypographyProps:{variant:"body2",textAlign:"center",py:2}})})}),J.jsx(df,{}),J.jsx(Zs,{fullWidth:!0,component:sf,to:"/updates",onClick:z,sx:{textTransform:"none",py:1,borderRadius:0},children:"View All Updates"})]}),J.jsxs(er,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[J.jsx(br,{variant:"body2",sx:{display:{xs:"none",sm:"block"},fontWeight:500},children:n?.display_name||e.email}),J.jsx(Oxe,{title:"Account settings",children:J.jsx(oP,{onClick:E,sx:{p:0},children:J.jsx(eR,{alt:n?.display_name||e.email||"",src:n?.avatar_url||e.user_metadata?.avatar_url,children:(n?.display_name||e.email||"U")[0].toUpperCase()})})})]}),J.jsxs(LX,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!s,onClose:A,children:[J.jsx(nj,{onClick:()=>{A(),a("/profile")},children:"Profile"}),J.jsx(nj,{onClick:R,children:"Logout"})]})]}):J.jsx(Zs,{color:"inherit",component:sf,to:"/login",children:"Login"})]})})},oY=No(J.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),pSe=No(J.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})),mSe=No(J.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),gSe=No(J.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),ySe=No(J.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),vSe=No(J.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"})),_Se=No(J.jsx("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"})),bSe=No(J.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"})),xSe=No(J.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),wSe=No(J.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"})),wN=No(J.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),OSe=No(J.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),JP=280,SSe=({node:t,onSectionClick:e,onStopClick:n,activeKey:r,visitedStops:i,showTransits:o})=>{const[a,s]=Q.useState(!1);Q.useEffect(()=>{r&&t.children.some(w=>w.key===r)&&s(!0)},[r,t.children]);const u=()=>{s(!a),e(t)},f=r?t.children.some(w=>w.key===r):!1,g=i&&t.children.length>0?t.children.every(w=>i.includes(w.key)):!1;let _="";return f?_="":g&&(_=""),J.jsxs(J.Fragment,{children:[J.jsxs(sN,{onClick:u,sx:{pl:2},children:[J.jsx(er,{component:"span",sx:{mr:2,width:24,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0,fontSize:"1.2rem",lineHeight:1,transition:"all 0.3s ease",textShadow:f?"0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px currentColor":"none",filter:f?"brightness(1.2)":"none",transform:f?"scale(1.2)":"scale(1)"},children:_}),J.jsx(Tw,{primary:t.name,primaryTypographyProps:{noWrap:!0,fontWeight:"medium"}}),a?J.jsx(gSe,{}):J.jsx(ySe,{})]}),J.jsx(i$,{in:a,timeout:"auto",unmountOnExit:!0,children:J.jsx(mO,{component:"div",disablePadding:!0,sx:{pl:2},children:t.children.map(w=>J.jsx(sY,{node:w,onStopClick:n,active:r===w.key,visited:i?.includes(w.key),showTransits:o},w.key))})})]})},CSe=t=>{switch(t){case"Plane":return"";case"Train":return"";case"Boat":return"";case"Car":return"";default:return""}},sY=({node:t,onStopClick:e,active:n,visited:r,indent:i=4,showTransits:o})=>{if(t.category==="Trip"&&!n&&!o)return null;const a=_=>{_.stopPropagation(),t.category==="Stop"&&e(t)};let s="";t.category==="Trip"?s=CSe(t.transportationMode):n?s="":r?s="":s="";const u={"@keyframes move-horizontal":{"0%":{transform:"translateX(-2px)"},"50%":{transform:"translateX(2px)"},"100%":{transform:"translateX(-2px)"}}},f=t.category==="Trip"?t.name:null,g=t.category==="Trip";return J.jsx(J.Fragment,{children:J.jsxs(sN,{onClick:a,sx:{pl:i,py:1,justifyContent:"flex-start",alignItems:"center",minHeight:48},children:[J.jsxs(er,{sx:{position:"relative",mr:2,display:"flex",flexDirection:"column",alignItems:"center",width:24,flexShrink:0},children:[g&&J.jsx(er,{sx:{position:"absolute",top:-24,bottom:-24,width:"2px",bgcolor:"divider",zIndex:0}}),J.jsx(er,{component:"span",sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.paper",fontSize:g?"1.5rem":"1.2rem",lineHeight:1,transition:"all 0.3s ease",animation:n&&g?"move-horizontal 2s infinite ease-in-out":"none",...u},children:s})]}),(f||!g)&&J.jsx(Tw,{primary:g?f:t.name,primaryTypographyProps:{fontWeight:n?"bold":"normal",color:n?"primary.main":"text.primary",noWrap:!0}})]})})},TSe=({open:t,onClose:e,variant:n,onStopClick:r,onSectionClick:i,activeKey:o,visitedStops:a})=>{const[s,u]=Q.useState(!1),f=se.useMemo(()=>{const g=[],_=new Map;return _N.forEach((w,S)=>{if(w.section){let E=_.get(w.section);E||(E={type:"section",id:w.section,name:w.section,children:[]},_.set(w.section,E),g.push(E)),E.children.push(w)}else g.push({type:"item",node:w})}),g},[]);return J.jsxs(A_e,{variant:n,open:t,onClose:e,sx:{width:JP,flexShrink:0,"& .MuiDrawer-paper":{width:JP,boxSizing:"border-box",display:"flex",flexDirection:"column"}},children:[J.jsx(hN,{})," ",J.jsx(df,{}),J.jsx(mO,{sx:{flexGrow:1,overflowY:"auto"},children:f.map((g,_)=>g.type==="section"?J.jsx(SSe,{node:g,onSectionClick:i,onStopClick:r,activeKey:o,visitedStops:a,showTransits:s},g.id):J.jsx(sY,{node:g.node,onStopClick:r,active:o===g.node.key,visited:a?.includes(g.node.key),indent:2,showTransits:s},g.node.key+_))}),J.jsx(df,{}),J.jsx(er,{sx:{p:2},children:J.jsx(iN,{control:J.jsx(uN,{checked:s,onChange:g=>u(g.target.checked),size:"small"}),label:"Show Transits"})})]})},kSe=({children:t,onStopClick:e,onSectionClick:n,activeKey:r,visitedStops:i})=>{const[o,a]=Q.useState(!0),s=()=>{a(!o)};return J.jsxs(er,{sx:{display:"flex"},children:[J.jsx(Ave,{}),J.jsx(fSe,{onMenuClick:s}),J.jsx(TSe,{open:o,onClose:s,variant:"persistent",onStopClick:e,onSectionClick:n,activeKey:r,visitedStops:i}),J.jsxs(er,{component:"main",sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden",width:{sm:`calc(100% - ${JP}px)`},marginLeft:o?0:`-${JP}px`,transition:u=>u.transitions.create("margin",{easing:u.transitions.easing.sharp,duration:u.transitions.duration.leavingScreen}),...o&&{transition:u=>u.transitions.create("margin",{easing:u.transitions.easing.easeOut,duration:u.transitions.duration.enteringScreen}),marginLeft:0}},children:[J.jsx(hN,{})," ",J.jsx(er,{sx:{flexGrow:1,position:"relative",overflowY:"auto"},children:t})]})]})},ESe="modulepreload",ASe=function(t){return"/"+t},Ij={},It=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),s=a?.nonce||a?.getAttribute("nonce");i=u(n.map(f=>{if(f=ASe(f),f in Ij)return;Ij[f]=!0;const g=f.endsWith(".css"),_=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${_}`))return;const w=document.createElement("link");if(w.rel=g?"stylesheet":ESe,g||(w.as="script"),w.crossOrigin="",w.href=f,s&&w.setAttribute("nonce",s),document.head.appendChild(w),g)return new Promise((S,E)=>{w.addEventListener("load",S),w.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return i.then(a=>{for(const s of a||[])s.status==="rejected"&&o(s.reason);return e().catch(o)})},PSe=Q.createContext(null);function MSe(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===o}function qc(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!qc(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!qc(t[i],e[i]))return!1;return!0}return!1}function Dj(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function Lj(t,e){const n=e.viewState||e,r={};if("longitude"in n&&"latitude"in n&&(n.longitude!==t.center.lng||n.latitude!==t.center.lat)){const i=t.center.constructor;r.center=new i(n.longitude,n.latitude)}return"zoom"in n&&n.zoom!==t.zoom&&(r.zoom=n.zoom),"bearing"in n&&n.bearing!==t.bearing&&(r.bearing=n.bearing),"pitch"in n&&n.pitch!==t.pitch&&(r.pitch=n.pitch),n.padding&&t.padding&&!qc(n.padding,t.padding)&&(r.padding=n.padding),r}const RSe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function $j(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{let i=null;"interactive"in r&&(i=Object.assign({},r),delete i.interactive);const o=e[r.ref];if(o){i=i||Object.assign({},r),delete i.ref;for(const a of RSe)a in o&&(i[a]=o[a])}return i||r});return{...t,layers:n}}const zj={version:8,sources:{},layers:[]},Nj={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Bj={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Fj={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},ISe=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],DSe=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class kw{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=i=>{const o=this.props[Fj[i.type]];o?o(i):i.type==="error"&&console.error(i.error)},this._onCameraEvent=i=>{if(this._internalUpdate)return;i.viewState=this._propsedCameraUpdate||Dj(this._map.transform);const o=this.props[Bj[i.type]];o&&o(i)},this._onCameraUpdate=i=>this._internalUpdate?i:(this._propsedCameraUpdate=Dj(i),Lj(i,this.props)),this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const o=this.props[Nj[i.type]];o&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),o(i),delete i.features)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n),i=this._updateSize(e),o=this._updateViewState(e);this._updateStyle(e,n),this._updateStyleComponents(e),this._updateHandlers(e,n),(r||i||o&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=kw.savedMaps.pop();if(!r)return null;const i=r.map,o=i.getContainer();for(n.className=o.className;o.childNodes.length>0;)n.appendChild(o.childNodes[0]);i._container=n;const a=i._resizeObserver;a&&(a.disconnect(),a.observe(n)),r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:s}=e;return s&&(s.bounds?i.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):r._updateViewState(s)),i.isStyleLoaded()?i.fire("load"):i.once("style.load",()=>i.fire("load")),i._update(),r}_initialize(e){const{props:n}=this,{mapStyle:r=zj}=n,i={...n,...n.initialViewState,container:e,style:$j(r)},o=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[o.longitude||0,o.latitude||0],zoom:o.zoom||0,pitch:o.pitch||0,bearing:o.bearing||0}),n.gl){const s=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=s,n.gl)}const a=new this._MapClass(i);o.padding&&a.setPadding(o.padding),n.cursor&&(a.getCanvas().style.cursor=n.cursor),a.transformCameraUpdate=this._onCameraUpdate,a.on("style.load",()=>{this._styleComponents={light:a.getLight(),sky:a.getSky(),projection:a.getProjection?.(),terrain:a.getTerrain()},this._updateStyleComponents(this.props)}),a.on("sourcedata",()=>{this._updateStyleComponents(this.props)});for(const s in Nj)a.on(s,this._onPointerEvent);for(const s in Bj)a.on(s,this._onCameraEvent);for(const s in Fj)a.on(s,this._onEvent);this._map=a}recycle(){this.map.getContainer().querySelector("[mapboxgl-children]")?.remove(),kw.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e){const n=this._map,r=n.transform;if(!n.isMoving()){const o=Lj(r,e);if(Object.keys(o).length>0)return this._internalUpdate=!0,n.jumpTo(o),this._internalUpdate=!1,!0}return!1}_updateSettings(e,n){const r=this._map;let i=!1;for(const o of ISe)o in e&&!qc(e[o],n[o])&&(i=!0,r[`set${o[0].toUpperCase()}${o.slice(1)}`]?.call(r,e[o]));return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:r=zj,styleDiffing:i=!0}=e,o={diff:i};"localIdeographFontFamily"in e&&(o.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle($j(r),o)}}_updateStyleComponents({light:e,projection:n,sky:r,terrain:i}){const o=this._map,a=this._styleComponents;o.style._loaded&&(e&&!qc(e,a.light)&&(a.light=e,o.setLight(e)),n&&!qc(n,a.projection)&&n!==a.projection?.type&&(a.projection=typeof n=="string"?{type:n}:n,o.setProjection?.(a.projection)),r&&!qc(r,a.sky)&&(a.sky=r,o.setSky(r)),i!==void 0&&!qc(i,a.terrain)&&(!i||o.getSource(i.source))&&(a.terrain=i,o.setTerrain(i)))}_updateHandlers(e,n){const r=this._map;for(const i of DSe){const o=e[i]??!0,a=n[i]??!0;qc(o,a)||(o?r[i].enable(o):r[i].disable())}}_queryRenderedFeatures(e){const n=this._map,{interactiveLayerIds:r=[]}=this.props;try{return n.queryRenderedFeatures(e,{layers:r.filter(n.getLayer.bind(n))})}catch{return[]}}_updateHover(e){const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const i=e.type,o=this._hoveredFeatures?.length>0,a=this._queryRenderedFeatures(e.point),s=a.length>0;!s&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,s&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=i}else this._hoveredFeatures=null}}kw.savedMaps=[];const LSe=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function $Se(t){if(!t)return null;const e=t.map,n={getMap:()=>e};for(const r of zSe(e))!(r in n)&&!LSe.includes(r)&&(n[r]=e[r].bind(e));return n}function zSe(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const NSe=typeof document<"u"?Q.useLayoutEffect:Q.useEffect;function BSe(t,e){const{RTLTextPlugin:n,maxParallelImageRequests:r,workerCount:i,workerUrl:o}=e;if(n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"){const{pluginUrl:a,lazy:s=!0}=typeof n=="string"?{pluginUrl:n}:n;t.setRTLTextPlugin(a,u=>{u&&console.error(u)},s)}r!==void 0&&t.setMaxParallelImageRequests(r),i!==void 0&&t.setWorkerCount(i),o!==void 0&&t.setWorkerUrl(o)}const vO=Q.createContext(null);function FSe(t,e){const n=Q.useContext(PSe),[r,i]=Q.useState(null),o=Q.useRef(),{current:a}=Q.useRef({mapLib:null,map:null});Q.useEffect(()=>{const f=t.mapLib;let g=!0,_;return Promise.resolve(f||It(()=>Promise.resolve().then(()=>Khe),[])).then(w=>{if(!g)return;if(!w)throw new Error("Invalid mapLib");const S="Map"in w?w:w.default;if(!S.Map)throw new Error("Invalid mapLib");BSe(S,t),t.reuseMaps&&(_=kw.reuse(t,o.current)),_||(_=new kw(S.Map,t,o.current)),a.map=$Se(_),a.mapLib=S,i(_),n?.onMapMount(a.map,t.id)}).catch(w=>{const{onError:S}=t;S?S({type:"error",target:null,originalEvent:null,error:w}):console.error(w)}),()=>{g=!1,_&&(n?.onMapUnmount(t.id),t.reuseMaps?_.recycle():_.destroy())}},[]),NSe(()=>{r&&r.setProps(t)}),Q.useImperativeHandle(e,()=>a.map,[r]);const s=Q.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),u={height:"100%"};return Q.createElement("div",{id:t.id,ref:o,style:s},r&&Q.createElement(vO.Provider,{value:a},Q.createElement("div",{"mapboxgl-children":"",style:u},t.children)))}const jSe=Q.forwardRef(FSe),VSe=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ny(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!VSe.test(r)?n[r]=`${i}px`:n[r]=i}}function aY(t,e){if(t===e)return null;const n=jj(t),r=jj(e),i=[];for(const o of r)n.has(o)||i.push(o);for(const o of n)r.has(o)||i.push(o);return i.length===0?null:i}function jj(t){return new Set(t?t.trim().split(/\s+/):[])}Q.memo(Q.forwardRef((t,e)=>{const{map:n,mapLib:r}=Q.useContext(vO),i=Q.useRef({props:t}),o=Q.useMemo(()=>{let $=!1;Q.Children.forEach(t.children,F=>{F&&($=!0)});const z={...t,element:$?document.createElement("div"):void 0},B=new r.Marker(z);return B.setLngLat([t.longitude,t.latitude]),B.getElement().addEventListener("click",F=>{i.current.props.onClick?.({type:"click",target:B,originalEvent:F})}),B.on("dragstart",F=>{const U=F;U.lngLat=o.getLngLat(),i.current.props.onDragStart?.(U)}),B.on("drag",F=>{const U=F;U.lngLat=o.getLngLat(),i.current.props.onDrag?.(U)}),B.on("dragend",F=>{const U=F;U.lngLat=o.getLngLat(),i.current.props.onDragEnd?.(U)}),B},[]);Q.useEffect(()=>(o.addTo(n.getMap()),()=>{o.remove()}),[]);const{longitude:a,latitude:s,offset:u,style:f,draggable:g=!1,popup:_=null,rotation:w=0,rotationAlignment:S="auto",pitchAlignment:E="auto"}=t;Q.useEffect(()=>{ny(o.getElement(),f)},[f]),Q.useImperativeHandle(e,()=>o,[]);const A=i.current.props;(o.getLngLat().lng!==a||o.getLngLat().lat!==s)&&o.setLngLat([a,s]),u&&!MSe(o.getOffset(),u)&&o.setOffset(u),o.isDraggable()!==g&&o.setDraggable(g),o.getRotation()!==w&&o.setRotation(w),o.getRotationAlignment()!==S&&o.setRotationAlignment(S),o.getPitchAlignment()!==E&&o.setPitchAlignment(E),o.getPopup()!==_&&o.setPopup(_);const R=aY(A.className,t.className);if(R)for(const $ of R)o.toggleClassName($);return i.current.props=t,tm.createPortal(t.children,o.getElement())}));const QSe=Q.memo(Q.forwardRef((t,e)=>{const{map:n,mapLib:r}=Q.useContext(vO),i=Q.useMemo(()=>document.createElement("div"),[]),o=Q.useRef({props:t}),a=Q.useMemo(()=>{const s={...t},u=new r.Popup(s);return u.setLngLat([t.longitude,t.latitude]),u.once("open",f=>{o.current.props.onOpen?.(f)}),u},[]);if(Q.useEffect(()=>{const s=u=>{o.current.props.onClose?.(u)};return a.on("close",s),a.setDOMContent(i).addTo(n.getMap()),()=>{a.off("close",s),a.isOpen()&&a.remove()}},[]),Q.useEffect(()=>{ny(a.getElement(),t.style)},[t.style]),Q.useImperativeHandle(e,()=>a,[]),a.isOpen()){const s=o.current.props;(a.getLngLat().lng!==t.longitude||a.getLngLat().lat!==t.latitude)&&a.setLngLat([t.longitude,t.latitude]),t.offset&&!qc(s.offset,t.offset)&&a.setOffset(t.offset),(s.anchor!==t.anchor||s.maxWidth!==t.maxWidth)&&(a.options.anchor=t.anchor,a.setMaxWidth(t.maxWidth));const u=aY(s.className,t.className);if(u)for(const f of u)a.toggleClassName(f);o.current.props=t}return tm.createPortal(t.children,i)}));function Rb(t,e,n,r){const i=Q.useContext(vO),o=Q.useMemo(()=>t(i),[]);return Q.useEffect(()=>{const a=e,s=null,u=typeof e=="function"?e:null,{map:f}=i;return f.hasControl(o)||(f.addControl(o,a?.position),s&&s(i)),()=>{u&&u(i),f.hasControl(o)&&f.removeControl(o)}},[]),o}function USe(t){const e=Rb(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return Q.useEffect(()=>{ny(e._container,t.style)},[t.style]),null}Q.memo(USe);function ZSe(t){const e=Rb(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return Q.useEffect(()=>{ny(e._controlContainer,t.style)},[t.style]),null}const qSe=Q.memo(ZSe);function WSe(t,e){const n=Q.useRef({props:t}),r=Rb(({mapLib:i})=>{const o=new i.GeolocateControl(t),a=o._setupUI;return o._setupUI=()=>{o._container.hasChildNodes()||a()},o.on("geolocate",s=>{n.current.props.onGeolocate?.(s)}),o.on("error",s=>{n.current.props.onError?.(s)}),o.on("outofmaxbounds",s=>{n.current.props.onOutOfMaxBounds?.(s)}),o.on("trackuserlocationstart",s=>{n.current.props.onTrackUserLocationStart?.(s)}),o.on("trackuserlocationend",s=>{n.current.props.onTrackUserLocationEnd?.(s)}),o},{position:t.position});return n.current.props=t,Q.useImperativeHandle(e,()=>r,[]),Q.useEffect(()=>{ny(r._container,t.style)},[t.style]),null}Q.memo(Q.forwardRef(WSe));function HSe(t){const e=Rb(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return Q.useEffect(()=>{ny(e._container,t.style)},[t.style]),null}const GSe=Q.memo(HSe);function XSe(t){const e=Rb(({mapLib:o})=>new o.ScaleControl(t),{position:t.position}),n=Q.useRef(t),r=n.current;n.current=t;const{style:i}=t;return t.maxWidth!==void 0&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==r.unit&&e.setUnit(t.unit),Q.useEffect(()=>{ny(e._container,i)},[i]),null}Q.memo(XSe);function YSe(t){const e=Rb(({mapLib:n})=>new n.TerrainControl(t),{position:t.position});return Q.useEffect(()=>{ny(e._container,t.style)},[t.style]),null}Q.memo(YSe);function KSe(t){const e=Rb(({mapLib:n})=>new n.LogoControl(t),{position:t.position});return Q.useEffect(()=>{ny(e._container,t.style)},[t.style]),null}Q.memo(KSe);function e5(t,e){if(!t)throw new Error(e)}let JSe=0;function e2e(t,e,n){if(t.style&&t.style._loaded){const r={...n};return delete r.id,delete r.children,t.addSource(e,r),t.getSource(e)}return null}function t2e(t,e,n){e5(e.id===n.id,"source id changed"),e5(e.type===n.type,"source type changed");let r="",i=0;for(const a in e)a!=="children"&&a!=="id"&&!qc(n[a],e[a])&&(r=a,i++);if(!i)return;const o=e.type;if(o==="geojson")t.setData(e.data);else if(o==="image")t.updateImage({url:e.url,coordinates:e.coordinates});else switch(r){case"coordinates":t.setCoordinates?.(e.coordinates);break;case"url":t.setUrl?.(e.url);break;case"tiles":t.setTiles?.(e.tiles);break;default:console.warn(`Unable to update <Source> prop: ${r}`)}}function Vj(t){const e=Q.useContext(vO).map.getMap(),n=Q.useRef(t),[,r]=Q.useState(0),i=Q.useMemo(()=>t.id||`jsx-source-${JSe++}`,[]);Q.useEffect(()=>{if(e){const a=()=>setTimeout(()=>r(s=>s+1),0);return e.on("styledata",a),a(),()=>{if(e.off("styledata",a),e.style&&e.style._loaded&&e.getSource(i)){const s=e.getStyle()?.layers;if(s)for(const u of s)u.source===i&&e.removeLayer(u.id);e.removeSource(i)}}}},[e]);let o=e&&e.style&&e.getSource(i);return o?t2e(o,t,n.current):o=e2e(e,i,t),n.current=t,o&&Q.Children.map(t.children,a=>a&&Q.cloneElement(a,{source:i}))||null}function n2e(t,e,n,r){if(e5(n.id===r.id,"layer id changed"),e5(n.type===r.type,"layer type changed"),n.type==="custom"||r.type==="custom")return;const{layout:i={},paint:o={},filter:a,minzoom:s,maxzoom:u,beforeId:f}=n;if(f!==r.beforeId&&t.moveLayer(e,f),i!==r.layout){const g=r.layout||{};for(const _ in i)qc(i[_],g[_])||t.setLayoutProperty(e,_,i[_]);for(const _ in g)i.hasOwnProperty(_)||t.setLayoutProperty(e,_,void 0)}if(o!==r.paint){const g=r.paint||{};for(const _ in o)qc(o[_],g[_])||t.setPaintProperty(e,_,o[_]);for(const _ in g)o.hasOwnProperty(_)||t.setPaintProperty(e,_,void 0)}qc(a,r.filter)||t.setFilter(e,a),(s!==r.minzoom||u!==r.maxzoom)&&t.setLayerZoomRange(e,s,u)}function r2e(t,e,n){if(t.style&&t.style._loaded&&(!("source"in n)||t.getSource(n.source))){const r={...n,id:e};delete r.beforeId,t.addLayer(r,n.beforeId)}}let i2e=0;function h2(t){const e=Q.useContext(vO).map.getMap(),n=Q.useRef(t),[,r]=Q.useState(0),i=Q.useMemo(()=>t.id||`jsx-layer-${i2e++}`,[]);if(Q.useEffect(()=>{if(e){const a=()=>r(s=>s+1);return e.on("styledata",a),a(),()=>{e.off("styledata",a),e.style&&e.style._loaded&&e.getLayer(i)&&e.removeLayer(i)}}},[e]),e&&e.style&&e.getLayer(i))try{n2e(e,i,t,n.current)}catch(a){console.warn(a)}else r2e(e,i,t);return n.current=t,null}const o2e=t=>({version:8,projection:{type:t},sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"&copy; OpenStreetMap Contributors",maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]}),s2e=t=>{switch(t){case"Plane":return"#3b82f6";case"Train":return"#22c55e";case"Boat":return"#06b6d4";case"Car":return"#f59e0b";default:return"#64748b"}},a2e=t=>{switch(t){case"Plane":return"";case"Train":return"";case"Boat":return"";case"Car":return"";default:return""}},l2e={id:"trip-layer",type:"line",paint:{"line-color":["get","color"],"line-width":4,"line-opacity":.8},layout:{"line-join":"round","line-cap":"round"}},c2e={id:"trip-symbol-layer",type:"symbol",layout:{"symbol-placement":"line","symbol-spacing":50,"text-field":["get","symbol"],"text-size":20,"text-keep-upright":!1,"text-rotation-alignment":"map","symbol-avoid-edges":!1,"text-allow-overlap":!0,"text-ignore-placement":!1,"text-rotate":0,"text-offset":[0,.5]},paint:{"text-color":["get","color"],"text-halo-color":"#fff","text-halo-width":1}},u2e={id:"stops-layer",type:"circle",paint:{"circle-radius":6,"circle-color":"#fff","circle-stroke-color":"#000","circle-stroke-width":2}},Ih=t=>t>-130?t-360:t,h2e=({stop:t})=>{const[e,n]=Q.useState(null),[r,i]=Q.useState(!0);return Q.useEffect(()=>{(async()=>{try{i(!0);const[a,s,u]=await Promise.all([Si.from("check_in").select("created_at").eq("status",t.key).order("created_at",{ascending:!1}).limit(1),Si.from("blog_post").select("id",{count:"exact",head:!0}).contains("tags",[t.key]),Si.from("photo_album").select("id",{count:"exact",head:!0}).contains("tags",[t.key])]),[f,g]=await Promise.all([Si.from("blog_post").select("id").contains("tags",[t.key]).order("created_date",{ascending:!1}).limit(1),Si.from("photo_album").select("icloud_link").contains("tags",[t.key]).order("created_at",{ascending:!1}).limit(1)]);n({lastCheckIn:a.data?.[0]?new Date(a.data[0].created_at):null,blogCount:s.count||0,photoCount:u.count||0,latestBlogId:f.data?.[0]?.id,latestPhotoLink:g.data?.[0]?.icloud_link})}catch(a){console.error("Error fetching stop stats:",a)}finally{i(!1)}})()},[t.key]),r?J.jsx(er,{sx:{display:"flex",justifyContent:"center",p:2,minWidth:150},children:J.jsx(Ku,{size:20})}):e?J.jsxs(er,{sx:{p:.5,minWidth:160},children:[J.jsx(br,{variant:"subtitle2",fontWeight:"bold",sx:{mb:1,color:"primary.main"},children:t.name}),J.jsx(df,{sx:{mb:1.5}}),J.jsxs(Ng,{spacing:1.5,children:[e.lastCheckIn&&J.jsxs(er,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[J.jsx(vSe,{sx:{fontSize:18,color:"text.secondary"}}),J.jsxs(br,{variant:"caption",sx:{fontWeight:500},children:["Last check-in: ",e.lastCheckIn.toLocaleDateString()]})]}),J.jsxs(er,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[J.jsx(fN,{sx:{fontSize:18,color:"secondary.main"}}),e.blogCount>0?J.jsxs(X7,{component:sf,to:`/blog?id=${e.latestBlogId}`,variant:"caption",sx:{fontWeight:500,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:[e.blogCount," Blog posts"]}):J.jsxs(br,{variant:"caption",sx:{fontWeight:500},children:[e.blogCount," Blog posts"]})]}),J.jsxs(er,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[J.jsx(IC,{sx:{fontSize:18,color:"#10b981"}}),e.photoCount>0?J.jsxs(X7,{href:e.latestPhotoLink,target:"_blank",rel:"noopener noreferrer",variant:"caption",sx:{fontWeight:500,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:[e.photoCount," Photo albums"]}):J.jsxs(br,{variant:"caption",sx:{fontWeight:500},children:[e.photoCount," Photo albums"]})]})]})]}):null},lY=Q.forwardRef(({items:t},e)=>{const{latestCheckIn:n}=yO(),r=n?.status,[i,o]=Q.useState(null),[a,s]=Q.useState("auto"),[u,f]=Q.useState("globe"),[g,_]=Q.useState(0),w=Q.useMemo(()=>o2e(u),[u]);Q.useEffect(()=>{let U;const q=()=>{_(H=>(H+1)%2),U=requestAnimationFrame(()=>setTimeout(q,500))};return U=requestAnimationFrame(q),()=>cancelAnimationFrame(U)},[]);const{stopsGeoJson:S,tripsGeoJson:E}=Q.useMemo(()=>{const U=t.filter(ie=>ie.category==="Stop"),q=t.filter(ie=>ie.category==="Trip"),H=U.map(ie=>({type:"Feature",properties:ie,geometry:{type:"Point",coordinates:[Ih(ie.geolocation[0]),ie.geolocation[1]]}})),ne=q.map(ie=>{const ce=ie.geometricShape,xe=ce.coordinates.map(re=>[Ih(re[0]),re[1]]);return{type:"Feature",properties:{key:ie.key,color:s2e(ie.transportationMode),symbol:a2e(ie.transportationMode),mode:ie.transportationMode,description:`${ie.startLocation} to ${ie.endLocation} (${ie.transportationMode})`},geometry:{...ce,coordinates:xe}}});return{stopsGeoJson:{type:"FeatureCollection",features:H},tripsGeoJson:{type:"FeatureCollection",features:ne}}},[t]),A=Q.useMemo(()=>{const U=t.find(H=>H.key===r);if(U){if(U.category==="Stop")return{longitude:Ih(U.geolocation[0]),latitude:U.geolocation[1],zoom:3};if(U.category==="Trip"){const H=U.geometricShape.coordinates[0];return{longitude:Ih(H[0]),latitude:H[1],zoom:3}}}const q=t.find(H=>H.category==="Stop");return q?{longitude:Ih(q.geolocation[0]),latitude:q.geolocation[1],zoom:2}:{longitude:0,latitude:0,zoom:1}},[t,r]);Q.useEffect(()=>{if(!r||!e||!e.current)return;const U=t.find(H=>H.key===r);if(!U)return;const q=e.current;if(U.category==="Stop")q.flyTo({center:[Ih(U.geolocation[0]),U.geolocation[1]],zoom:10,essential:!0});else if(U.category==="Trip"){const H=U.geometricShape.coordinates;if(H.length>0){let ne=Ih(H[0][0]),ie=Ih(H[0][0]),ce=H[0][1],xe=H[0][1];H.forEach(re=>{const me=Ih(re[0]),Te=re[1];ne=Math.min(ne,me),ie=Math.max(ie,me),ce=Math.min(ce,Te),xe=Math.max(xe,Te)}),q.fitBounds([[ne,ce],[ie,xe]],{padding:80,maxZoom:10,essential:!0})}}},[r,t,e]);const R=Q.useCallback(U=>{const q=U.features?.[0];if(q){const H=q.geometry;o({...q.properties,geolocation:H.coordinates})}},[]),$=Q.useCallback(()=>s("pointer"),[]),z=Q.useCallback(()=>s("auto"),[]),B=Q.useMemo(()=>({id:"stops-label",type:"symbol",layout:{"text-field":["get","name"],"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-justify":"auto","text-size":["case",["==",["get","key"],r||""],18,14],"text-font":["case",["==",["get","key"],r||""],["literal",["Noto Sans Regular"]],["literal",["Noto Sans Regular"]]]},paint:{"text-color":["case",["==",["get","key"],r||""],"#ef4444","#000"],"text-halo-color":"#fff","text-halo-width":["case",["==",["get","key"],r||""],2,2]}}),[r]),F=Q.useMemo(()=>({id:"active-trip-layer",type:"line",filter:["==",["get","key"],r||""],paint:{"line-color":"#ffffff","line-width":2,"line-dasharray":[2+g,4+g],"line-opacity":.9},layout:{"line-join":"round","line-cap":"round"}}),[r,g]);return J.jsxs("div",{className:"h-full w-full",style:{height:"100%"},children:[J.jsxs(jSe,{ref:e,initialViewState:A,style:{width:"100%",height:"100%"},mapStyle:w,renderWorldCopies:!0,interactiveLayerIds:["stops-layer","stops-label"],onClick:R,cursor:a,onMouseEnter:$,onMouseLeave:z,children:[J.jsx(qSe,{position:"top-right"}),J.jsx(GSe,{position:"top-right"}),J.jsxs(Vj,{id:"trips",type:"geojson",data:E,children:[J.jsx(h2,{...l2e}),J.jsx(h2,{...F}),J.jsx(h2,{...c2e})]}),J.jsxs(Vj,{id:"stops",type:"geojson",data:S,children:[J.jsx(h2,{...u2e}),J.jsx(h2,{...B})]}),i&&i.category==="Stop"&&J.jsx(QSe,{anchor:"top",longitude:i.geolocation[0],latitude:i.geolocation[1],onClose:()=>o(null),closeButton:!1,maxWidth:"300px",children:J.jsx(h2e,{stop:i})})]}),J.jsxs(hc,{elevation:3,sx:{position:"absolute",bottom:24,left:24,p:"2px 12px",borderRadius:2,display:"flex",alignItems:"center",gap:1,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(4px)",zIndex:10},children:[J.jsx(dN,{fontSize:"small",color:u==="mercator"?"primary":"disabled"}),J.jsx(iN,{control:J.jsx(uN,{size:"small",checked:u==="globe",onChange:U=>f(U.target.checked?"globe":"mercator")}),label:"",sx:{m:0}}),J.jsx(wSe,{fontSize:"small",color:u==="globe"?"primary":"disabled"})]})]})});lY.displayName="MapComponent";const d2e=()=>{const{user:t,role:e}=yO(),[n,r]=Q.useState([]),[i,o]=Q.useState(!0),[a,s]=Q.useState(null),[u,f]=Q.useState(!1),[g,_]=Q.useState(!1),[w,S]=Q.useState({title:"",icloud_link:"",tags:""}),E=async()=>{try{o(!0);const{data:R,error:$}=await Si.from("photo_album").select("*").order("created_at",{ascending:!1});if($)throw $;r(R||[])}catch(R){s(R.message)}finally{o(!1)}};Q.useEffect(()=>{E()},[]);const A=async()=>{if(t){if(!w.title||!w.icloud_link){s("Please provide at least a title and a link.");return}try{_(!0);const R=w.tags.split(",").map(z=>z.trim()).filter(Boolean),{error:$}=await Si.from("photo_album").insert([{title:w.title,icloud_link:w.icloud_link,tags:R,owner_id:t.id}]);if($)throw $;f(!1),S({title:"",icloud_link:"",tags:""}),E()}catch(R){s(R.message)}finally{_(!1)}}};return i?J.jsx(er,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:J.jsx(Ku,{})}):J.jsxs(Cw,{maxWidth:"lg",sx:{py:4},children:[J.jsxs(er,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:2},children:[J.jsxs(er,{children:[J.jsx(br,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Photo Albums"}),J.jsx(br,{variant:"body1",color:"text.secondary",children:"Capturing the best moments of our journey across the Pacific."})]}),t&&(e==="admin"||e==="editor")&&J.jsx(Zs,{variant:"contained",startIcon:J.jsx(oY,{}),onClick:()=>f(!0),sx:{borderRadius:2,textTransform:"none",px:3,mt:1},children:"Add Album"})]}),a&&J.jsxs(Z_,{severity:"error",sx:{mb:4,borderRadius:2},children:["Error loading albums: ",a]}),!a&&n.length===0&&J.jsxs(er,{sx:{textAlign:"center",py:8},children:[J.jsx(IC,{sx:{fontSize:64,color:"text.disabled",mb:2}}),J.jsx(br,{variant:"h6",color:"text.secondary",children:"No photo albums found."})]}),J.jsx(A_,{container:!0,spacing:3,children:n.map(R=>J.jsx(A_,{size:{xs:12,sm:6,md:4},children:J.jsxs(hve,{elevation:3,sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:3,transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:6}},children:[J.jsxs(_ve,{sx:{flexGrow:1,py:4,textAlign:"center"},children:[J.jsx(IC,{color:"primary",sx:{fontSize:48,mb:2}}),J.jsx(br,{variant:"h5",component:"h2",fontWeight:"bold",gutterBottom:!0,children:R.title}),J.jsx(Ng,{direction:"row",spacing:1,sx:{mt:1,mb:1,flexWrap:"wrap",justifyContent:"center",gap:1},children:R.tags?.map($=>J.jsx(qP,{label:$,size:"small",variant:"outlined"},$))}),J.jsxs(br,{variant:"body2",color:"text.secondary",children:["Added on ",new Date(R.created_at).toLocaleDateString()]})]}),J.jsx(mve,{sx:{p:2,pt:0,justifyContent:"center"},children:J.jsx(Zs,{variant:"contained",fullWidth:!0,startIcon:J.jsx(bSe,{}),href:R.icloud_link,target:"_blank",rel:"noopener noreferrer",sx:{borderRadius:2,textTransform:"none",py:1},children:"View Album"})})]})},R.id))}),J.jsxs(t_e,{open:u,onClose:()=>f(!1),fullWidth:!0,maxWidth:"sm",children:[J.jsx(p_e,{sx:{fontWeight:"bold"},children:"Add New Photo Album"}),J.jsx(h_e,{dividers:!0,children:J.jsxs(Ng,{spacing:3,sx:{mt:1},children:[J.jsx(Gp,{fullWidth:!0,label:"Album Title",value:w.title,onChange:R=>S({...w,title:R.target.value}),placeholder:"e.g. Sunset in Tahiti"}),J.jsx(Gp,{fullWidth:!0,label:"iCloud Album Link",value:w.icloud_link,onChange:R=>S({...w,icloud_link:R.target.value}),placeholder:"https://www.icloud.com/sharedalbum/..."}),J.jsx(Gp,{fullWidth:!0,label:"Tags (comma separated)",value:w.tags,onChange:R=>S({...w,tags:R.target.value}),placeholder:"e.g. islands, beach, nature",helperText:"Add location keys like 'Auckland' to link with the map"})]})}),J.jsxs(o_e,{sx:{p:3},children:[J.jsx(Zs,{onClick:()=>f(!1),color:"inherit",children:"Cancel"}),J.jsx(Zs,{variant:"contained",onClick:A,disabled:g,startIcon:g?J.jsx(Ku,{size:20}):J.jsx(wN,{}),children:g?"Saving...":"Save Album"})]})]})]})};var f2e=Object.defineProperty,p2e=(t,e,n)=>e in t?f2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xg=(t,e,n)=>p2e(t,typeof e!="symbol"?e+"":e,n);let m2e=class cY{constructor(e=new Map){this.map=e}clone(){return new cY(new Map(this.map))}increment(e){const n=this.map.get(e)??0;this.map.set(e,n+1)}decrement(e,n){let r=this.map.get(e);r!==void 0&&(r-=1,this.map.set(e,r),r===0&&n())}},XE=class{constructor(){xg(this,"map",new Map)}getOrCreate(e){let n=this.map.get(e);return n===void 0&&(n=new Set,this.map.set(e,n)),n}get(e){return this.map.get(e)}use(e,n){const r=this.get(e);r!==void 0&&n(r)}delete(e){return this.map.delete(e)}};function J1(t,e){return e(t),t}function ON(){}const uY="cell";function Qj(t,e){return t===e}const rR=new Map;let g2e=class{constructor(e={}){xg(this,"subscriptions",new XE),xg(this,"singletonSubscriptions",new Map),xg(this,"graph",new XE),xg(this,"state",new Map),xg(this,"distinctNodes",new Map),xg(this,"executionMaps",new Map),xg(this,"definitionRegistry",new Set),xg(this,"combinedCells",[]);for(const n of Object.getOwnPropertySymbols(e))this.state.set(n,e[n])}cellInstance(e,n=!0,r=Symbol()){return this.state.has(r)||this.state.set(r,e),n!==!1&&!this.distinctNodes.has(r)&&this.distinctNodes.set(r,n===!0?Qj:n),r}signalInstance(e=!0,n=Symbol()){return e!==!1&&this.distinctNodes.set(n,e===!0?Qj:e),n}sub(e,n){this.register(e);const r=this.subscriptions.getOrCreate(e);return r.add(n),()=>r.delete(n)}singletonSub(e,n){return this.register(e),n===void 0?this.singletonSubscriptions.delete(e):this.singletonSubscriptions.set(e,n),()=>this.singletonSubscriptions.delete(e)}resetSingletonSubs(){this.singletonSubscriptions.clear()}subMultiple(e,n){const r=this.signalInstance();return this.connect({map:i=>(...o)=>{i(o)},sink:r,sources:e}),this.sub(r,n)}pubIn(e){var n;const r=Reflect.ownKeys(e),i=this.getExecutionMap(r),o=i.refCount.clone(),a=i.participatingNodes.slice(),s=new Map(this.state),u=f=>{this.graph.use(f,g=>{for(const{sources:_,sink:w}of g)_.has(f)&&o.decrement(w,()=>{a.splice(a.indexOf(w),1),u(w)})})};for(;;){const f=a.shift();if(f===void 0)break;const g=f;let _=!1;const w=S=>{const E=this.distinctNodes.get(g);if(E!=null&&E(s.get(g),S)){_=!1;return}_=!0,s.set(g,S),this.state.has(g)&&this.state.set(g,S)};if(Object.prototype.hasOwnProperty.call(e,g)?w(e[g]):i.projections.use(g,S=>{for(const E of S){const A=[...Array.from(E.sources),...Array.from(E.pulls)].map(R=>s.get(R));E.map(w)(...A)}}),_){const S=s.get(g);this.inContext(()=>{this.subscriptions.use(g,E=>{for(const A of E)A(S)})}),(n=this.singletonSubscriptions.get(g))==null||n(S)}else u(g)}}connect({sources:e,pulls:n=[],map:r,sink:i}){const o={map:r,pulls:new Set(n),sink:this.register(i),sources:new Set(e)};for(const a of[...e,...n])this.register(a),this.graph.getOrCreate(a).add(o);this.executionMaps.clear()}pub(e,n){this.pubIn({[e]:n})}pipe(e,...n){return this.combineOperators(...n)(e)}transformer(...e){return n=>J1(this.signalInstance(),r=>(this.link(this.pipe(r,...e),n),r))}link(e,n){this.connect({map:r=>i=>{r(i)},sink:n,sources:[e]})}combine(...e){return J1(this.signalInstance(),n=>{this.connect({map:r=>(...i)=>{r(i)},sink:n,sources:e})})}combineCells(...e){const n=this.combinedCells.find(i=>e.length===i.sources.length&&e.every((o,a)=>o===i.sources[a]));if(n)return n.cell;const r=this.cellInstance(e.map(i=>this.getValue(i)),!0);return this.connect({map:i=>(...o)=>{i(o)},sink:r,sources:e}),this.combinedCells.push({sources:e,cell:r}),r}getValue(e){return this.register(e),this.state.get(e)}getValues(e){return e.map(n=>this.getValue(n))}register(e){const n=rR.get(e);return n===void 0||this.definitionRegistry.has(e)?e:(this.definitionRegistry.add(e),J1(n.type===uY?this.cellInstance(n.initial,n.distinct,e):this.signalInstance(n.distinct,e),r=>{this.inContext(()=>{n.init(this,r)})}))}inContext(e){return e()}changeWith(e,n,r){this.connect({sources:[n],pulls:[e],sink:e,map:i=>(o,a)=>{i(r(a,o))}})}calculateExecutionMap(e){const n=[],r=new Set,i=new XE,o=new m2e,a=new XE,s=(u,f=0)=>{o.increment(u),!r.has(u)&&(this.register(u),i.use(u,g=>{f=Math.max(...Array.from(g).map(_=>n.indexOf(_)))+1}),this.graph.use(u,g=>{for(const _ of g)_.sources.has(u)?(a.getOrCreate(_.sink).add(_),s(_.sink,f)):i.getOrCreate(_.sink).add(u)}),r.add(u),n.splice(f,0,u))};return e.forEach(s),{participatingNodes:n,pendingPulls:i,projections:a,refCount:o}}getExecutionMap(e){let n=e;if(e.length===1){n=e[0];const i=this.executionMaps.get(n);if(i!==void 0)return i}else for(const[i,o]of this.executionMaps.entries())if(Array.isArray(i)&&i.length===e.length&&i.every(a=>e.includes(a)))return o;const r=this.calculateExecutionMap(e);return this.executionMaps.set(n,r),r}combineOperators(...e){return n=>{for(const r of e)n=r(n,this);return n}}};function kn(t,e=ON,n=!0){return J1(Symbol(),r=>{rR.set(r,{type:uY,distinct:n,initial:t,init:e})})}function bs(t=ON,e=!1){return J1(Symbol(),n=>{rR.set(n,{type:"signal",distinct:e,init:t})})}function dm(t=ON){return J1(Symbol(),e=>{rR.set(e,{type:"signal",distinct:!1,init:t})})}const hY=Q.createContext(null);function _O(){const t=Q.useContext(hY);if(t===null)throw new Error("useRealm must be used within a RealmContextProvider");return t}function Es(t){const e=_O();e.register(t);const n=Q.useCallback(r=>e.sub(t,r),[e,t]);return Q.useSyncExternalStore(n,()=>e.getValue(t),()=>e.getValue(t))}function Wo(...t){const e=_O(),n=Q.useMemo(()=>e.combineCells.apply(e,t),[e,...t]);return Es(n)}function Ri(t){const e=_O();return e.register(t),Q.useCallback(n=>{e.pub(t,n)},[e,t])}function Ug(t){return(e,n)=>{const r=n.signalInstance();return n.connect({map:i=>o=>{i(t(o))},sink:r,sources:[e]}),r}}function $o(...t){return(e,n)=>{const r=n.signalInstance();return n.connect({map:i=>(...o)=>{i(o)},pulls:t,sink:r,sources:[e]}),r}}function dY(t){return(e,n)=>{const r=n.signalInstance();return n.connect({map:i=>()=>{i(t)},sink:r,sources:[e]}),r}}function WT(t){return(e,n)=>{const r=n.signalInstance();return n.connect({map:i=>o=>{t(o)&&i(o)},sink:r,sources:[e]}),r}}function fY(t,e){return(n,r)=>{const i=r.signalInstance();return r.connect({map:o=>a=>{o(e=t(e,a))},sink:i,sources:[n]}),i}}function y2e(t,e){return e(t),t}function E0(){}function Dl(t){return function(e){return{init:n=>{var r;return(r=t.init)==null?void 0:r.call(t,n,e)},postInit:n=>{var r;return(r=t.postInit)==null?void 0:r.call(t,n,e)},update:n=>{var r;return(r=t.update)==null?void 0:r.call(t,n,e)}}}}function v2e({children:t,plugins:e}){const n=se.useMemo(()=>y2e(new g2e,r=>{var i,o;for(const a of e)(i=a.init)==null||i.call(a,r);for(const a of e)(o=a.postInit)==null||o.call(a,r)}),[]);return se.useEffect(()=>{var r;for(const i of e)(r=i.update)==null||r.call(i,n)}),se.createElement(hY.Provider,{value:n},t)}const t5=Q.createContext(null);function pY(t,e){let n=null;return t!=null&&(n=t[1]),{getTheme:function(){return e??(n!=null?n.getTheme():null)}}}function Ll(){const t=Q.useContext(t5);return t==null&&(function(e,...n){const r=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",e);for(const o of n)i.append("v",o);throw r.search=i.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(8),t}function on(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const i of e)r.append("v",i);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Tf=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,_2e=Tf&&"documentMode"in document?document.documentMode:null,Dp=Tf&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),ob=Tf&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),n5=!(!Tf||!("InputEvent"in window)||_2e)&&"getTargetRanges"in new window.InputEvent("input"),FC=Tf&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Ew=Tf&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,b2e=Tf&&/Android/.test(navigator.userAgent),mY=Tf&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Uj=Tf&&b2e&&mY,r5=Tf&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!mY;function gY(...t){const e=[];for(const n of t)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))e.push(r);return e}const x2e=1,w2e=3,O2e=9,S2e=11,sb=0,yY=1,Aw=2,C2e=0,T2e=1,k2e=2,i5=4,o5=8,SN=128,E2e=1792|(112|(3|i5|o5)|SN),CN=1,TN=2,kN=3,EN=4,AN=5,PN=6,iR=FC||Ew||r5?"":"",Zg=`

`,A2e=ob?"":iR,ab={bold:1,capitalize:1024,code:16,highlight:SN,italic:2,lowercase:256,strikethrough:i5,subscript:32,superscript:64,underline:o5,uppercase:512},P2e={directionless:1,unmergeable:2},Zj={center:TN,end:PN,justify:EN,left:CN,right:kN,start:AN},M2e={[TN]:"center",[PN]:"end",[EN]:"justify",[CN]:"left",[kN]:"right",[AN]:"start"},R2e={normal:0,segmented:2,token:1},I2e={[C2e]:"normal",[k2e]:"segmented",[T2e]:"token"},qj="$config";function vY(t,e,n,r,i,o){let a=t.getFirstChild();for(;a!==null;){const s=a.__key;a.__parent===e&&(Rt(a)&&vY(a,s,n,r,i,o),n.has(s)||o.delete(s),i.push(s)),a=a.getNextSibling()}}const D2e=100;let T$=!1,MN=0;function L2e(t){MN=t.timeStamp}function I3(t,e,n){const r=t.nodeName==="BR",i=e.__lexicalLineBreak;return i&&(t===i||r&&t.previousSibling===i)||r&&SR(t,n)!==void 0}function $2e(t,e,n){const r=bf(Kh(n));let i=null,o=null;r!==null&&r.anchorNode===t&&(i=r.anchorOffset,o=r.focusOffset);const a=t.nodeValue;a!==null&&JN(e,a,i,o,!1)}function z2e(t,e,n){if(Ht(t)){const r=t.anchor.getNode();if(r.is(n)&&t.format!==r.getFormat())return!1}return iy(e)&&n.isAttached()}function N2e(t,e,n,r){for(let i=t;i&&!kCe(i);i=nk(i)){const o=SR(i,e);if(o!==void 0){const a=Ii(o,n);if(a)return _i(a)||!qo(i)?void 0:[i,a]}else if(i===r)return[r,nK(n)]}}function _Y(t,e,n){T$=!0;const r=performance.now()-MN>D2e;try{zu(t,(()=>{const i=sn()||(function(w){return w.getEditorState().read((()=>{const S=sn();return S!==null?S.clone():null}))})(t),o=new Map,a=t.getRootElement(),s=t._editorState,u=t._blockCursorElement;let f=!1,g="";for(let w=0;w<e.length;w++){const S=e[w],E=S.type,A=S.target,R=N2e(A,t,s,a);if(!R)continue;const[$,z]=R;if(E==="characterData")r&&hn(z)&&iy(A)&&z2e(i,A,z)&&$2e(A,z,t);else if(E==="childList"){f=!0;const B=S.addedNodes;for(let q=0;q<B.length;q++){const H=B[q],ne=eK(H),ie=H.parentNode;if(ie!=null&&H!==u&&ne===null&&!I3(H,ie,t)){if(ob){const ce=(qo(H)?H.innerText:null)||H.nodeValue;ce&&(g+=ce)}ie.removeChild(H)}}const F=S.removedNodes,U=F.length;if(U>0){let q=0;for(let H=0;H<U;H++){const ne=F[H];(I3(ne,A,t)||u===ne)&&(A.appendChild(ne),q++)}U!==q&&o.set($,z)}}}if(o.size>0)for(const[w,S]of o)S.reconcileObservedMutation(w,t);const _=n.takeRecords();if(_.length>0){for(let w=0;w<_.length;w++){const S=_[w],E=S.addedNodes,A=S.target;for(let R=0;R<E.length;R++){const $=E[R],z=$.parentNode;z==null||$.nodeName!=="BR"||I3($,A,t)||z.removeChild($)}}n.takeRecords()}i!==null&&(f&&rs(i),ob&&sK(t)&&i.insertRawText(g))}))}finally{T$=!1}}function bY(t){const e=t._observer;e!==null&&_Y(t,e.takeRecords(),e)}function xY(t){(function(e){MN===0&&Kh(e).addEventListener("textInput",L2e,!0)})(t),t._observer=new MutationObserver(((e,n)=>{_Y(t,e,n)}))}function k$(t){const e=new Map,n=new Set;for(let r=typeof t=="function"?t:t.replace;r.prototype&&r.prototype.getType!==void 0;r=Object.getPrototypeOf(r)){const{ownNodeConfig:i}=kR(r);if(i&&i.stateConfigs)for(const o of i.stateConfigs){let a;"stateConfig"in o?(a=o.stateConfig,o.flat&&n.add(a.key)):a=o,e.set(a.key,a)}}return{flatKeys:n,sharedConfigMap:e}}let B2e=class wY{constructor(e,n,r=void 0,i=new Map,o=void 0){this.node=e,this.sharedNodeState=n,this.unknownState=r,this.knownState=i;const{sharedConfigMap:a}=this.sharedNodeState,s=o!==void 0?o:(function(u,f,g){let _=g.size;if(f)for(const w in f){const S=u.get(w);S&&g.has(S)||_++}return _})(a,r,i);this.size=s}getValue(e){const n=this.knownState.get(e);if(n!==void 0)return n;this.sharedNodeState.sharedConfigMap.set(e.key,e);let r=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){const i=this.unknownState[e.key];i!==void 0&&(r=e.parse(i)),this.updateFromKnown(e,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const e={...this.unknownState},n={};for(const[r,i]of this.knownState)r.isEqual(i,r.defaultValue)?delete e[r.key]:e[r.key]=r.unparse(i);for(const r of this.sharedNodeState.flatKeys)r in e&&(n[r]=e[r],delete e[r]);return Wj(e)&&(n.$=e),n}getWritable(e){if(this.node===e)return this;const{sharedNodeState:n,unknownState:r}=this,i=new Map(this.knownState);return new wY(e,n,(function(o,a,s){let u;if(s)for(const[f,g]of Object.entries(s)){const _=o.get(f);_?a.has(_)||a.set(_,_.parse(g)):(u=u||{},u[f]=g)}return u})(n.sharedConfigMap,i,r),i,this.size)}updateFromKnown(e,n){const r=e.key;this.sharedNodeState.sharedConfigMap.set(r,e);const{knownState:i,unknownState:o}=this;i.has(e)||o&&r in o||(o&&(delete o[r],this.unknownState=Wj(o)),this.size++),i.set(e,n)}updateFromUnknown(e,n){const r=this.sharedNodeState.sharedConfigMap.get(e);r?this.updateFromKnown(r,r.parse(n)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=n)}updateFromJSON(e){const{knownState:n}=this;for(const r of n.keys())n.set(r,r.defaultValue);if(this.size=n.size,this.unknownState=void 0,e)for(const[r,i]of Object.entries(e))this.updateFromUnknown(r,i)}};function F2e(t){const e=t.getWritable(),n=e.__state?e.__state.getWritable(e):new B2e(e,OY(e));return e.__state=n,n}function OY(t){return t.__state?t.__state.sharedNodeState:YY(TR(),t.getType()).sharedNodeState}function Wj(t){if(t)for(const e in t)return t}function Hj(t,e,n){for(const[r,i]of e.knownState){if(t.has(r.key))continue;t.add(r.key);const o=n?n.getValue(r):r.defaultValue;if(o!==i&&!r.isEqual(o,i))return!0}return!1}function Gj(t,e,n){const{unknownState:r}=e,i=n?n.unknownState:void 0;if(r){for(const[o,a]of Object.entries(r))if(!t.has(o)&&(t.add(o),a!==(i?i[o]:void 0)))return!0}return!1}function Xj(t,e){const n=t.__state;return n&&n.node===t?n.getWritable(e):n}function Yj(t,e){const n=t.__mode,r=t.__format,i=t.__style,o=e.__mode,a=e.__format,s=e.__style,u=t.__state,f=e.__state;return(n===null||n===o)&&(r===null||r===a)&&(i===null||i===s)&&(t.__state===null||u===f||(function(g,_){if(g===_)return!0;if(g&&_&&g.size!==_.size)return!1;const w=new Set;return!(g&&Hj(w,g,_)||_&&Hj(w,_,g)||g&&Gj(w,g,_)||_&&Gj(w,_,g))})(u,f))}function Kj(t,e){const n=t.mergeWithSibling(e),r=ns()._normalizedNodes;return r.add(t.__key),r.add(e.__key),n}function Jj(t){let e,n,r=t;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(e=r.getPreviousSibling())!==null&&hn(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==""){if(Yj(e,r)){r=Kj(e,r);break}break}e.remove()}for(;(n=r.getNextSibling())!==null&&hn(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(n.__text!==""){if(Yj(r,n)){r=Kj(r,n);break}break}n.remove()}}else r.remove()}function lb(t){return eV(t.anchor),eV(t.focus),t}function eV(t){for(;t.type==="element";){const e=t.getNode(),n=t.offset;let r,i;if(n===e.getChildrenSize()?(r=e.getChildAtIndex(n-1),i=!0):(r=e.getChildAtIndex(n),i=!1),hn(r)){t.set(r.__key,i?r.getTextContentSize():0,"text",!0);break}if(!Rt(r))break;t.set(r.__key,i?r.getChildrenSize():0,"element",!0)}}let cb,Pl,jC,oR,E$,A$,ub,ff,P$,VC,ha="",Ap=null,Pp="",kg="",R1=!1,s5=!1;function a5(t,e){const n=ub.get(t);if(e!==null){const r=D$(t);r.parentNode===e&&e.removeChild(r)}if(ff.has(t)||Pl._keyToDOMMap.delete(t),Rt(n)){const r=c5(n,ub);M$(r,0,r.length-1,null)}n!==void 0&&e8(VC,jC,oR,n,"destroyed")}function M$(t,e,n,r){let i=e;for(;i<=n;++i){const o=t[i];o!==void 0&&a5(o,r)}}function x_(t,e){t.setProperty("text-align",e)}const j2e="40px";function SY(t,e){const n=cb.theme.indent;if(typeof n=="string"){const i=t.classList.contains(n);e>0&&!i?t.classList.add(n):e<1&&i&&t.classList.remove(n)}const r=getComputedStyle(t).getPropertyValue("--lexical-indent-base-value")||j2e;t.style.setProperty("padding-inline-start",e===0?"":`calc(${e} * ${r})`)}function CY(t,e){const n=t.style;e===0?x_(n,""):e===CN?x_(n,"left"):e===TN?x_(n,"center"):e===kN?x_(n,"right"):e===EN?x_(n,"justify"):e===AN?x_(n,"start"):e===PN&&x_(n,"end")}function R$(t,e){const n=(function(r){const i=r.__dir;if(i!==null)return i;if(Gs(r))return null;const o=r.getParentOrThrow();return Gs(o)&&o.__dir===null?"auto":null})(e);n!==null?t.dir=n:t.removeAttribute("dir")}function l5(t,e){const n=ff.get(t);n===void 0&&on(60);const r=n.createDOM(cb,Pl);if((function(i,o,a){const s=a._keyToDOMMap;(function(u,f,g){const _=`__lexicalKey_${f._key}`;u[_]=g})(o,a,i),s.set(i,o)})(t,r,Pl),hn(n)?r.setAttribute("data-lexical-text","true"):_i(n)&&r.setAttribute("data-lexical-decorator","true"),Rt(n)){const i=n.__indent,o=n.__size;if(R$(r,n),i!==0&&SY(r,i),o!==0){const s=o-1;I$(c5(n,ff),n,0,s,n.getDOMSlot(r))}const a=n.__format;a!==0&&CY(r,a),n.isInline()||TY(null,n,r),CR(n)&&(ha+=Zg,kg+=Zg)}else{const i=n.getTextContent();if(_i(n)){const o=n.decorate(Pl,cb);o!==null&&kY(t,o),r.contentEditable="false"}ha+=i,kg+=i}return e!==null&&e.insertChild(r),e8(VC,jC,oR,n,"created"),r}function I$(t,e,n,r,i){const o=ha;ha="";let a=n;for(;a<=r;++a){l5(t[a],i);const s=ff.get(t[a]);s!==null&&hn(s)&&(Ap===null&&(Ap=s.getFormat()),Pp===""&&(Pp=s.getStyle()))}CR(e)&&(ha+=Zg),i.element.__lexicalTextContent=ha,ha=o+ha}function tV(t,e){if(t){const n=t.__last;if(n){const r=e.get(n);if(r)return pf(r)?"line-break":_i(r)&&r.isInline()?"decorator":null}return"empty"}return null}function TY(t,e,n){const r=tV(t,ub),i=tV(e,ff);r!==i&&e.getDOMSlot(n).setManagedLineBreak(i)}function V2e(t,e,n){var r;Ap=null,Pp="",(function(i,o,a){const s=ha,u=i.__size,f=o.__size;ha="";const g=a.element;if(u===1&&f===1){const _=i.__first,w=o.__first;if(_===w)$2(_,g);else{const E=D$(_),A=l5(w,null);try{g.replaceChild(A,E)}catch(R){if(typeof R=="object"&&R!=null){const $=`${R.toString()} Parent: ${g.tagName}, new child: {tag: ${A.tagName} key: ${w}}, old child: {tag: ${E.tagName}, key: ${_}}.`;throw new Error($)}throw R}a5(_,null)}const S=ff.get(w);hn(S)&&(Ap===null&&(Ap=S.getFormat()),Pp===""&&(Pp=S.getStyle()))}else{const _=c5(i,ub),w=c5(o,ff);if(_.length!==u&&on(227),w.length!==f&&on(228),u===0)f!==0&&I$(w,o,0,f-1,a);else if(f===0){if(u!==0){const S=a.after==null&&a.before==null&&a.element.__lexicalLineBreak==null;M$(_,0,u-1,S?null:g),S&&(g.textContent="")}}else(function(S,E,A,R,$,z){const B=R-1,F=$-1;let U,q,H=z.getFirstChild(),ne=0,ie=0;for(;ne<=B&&ie<=F;){const re=E[ne],me=A[ie];if(re===me)H=D3($2(me,z.element)),ne++,ie++;else{U===void 0&&(U=new Set(E)),q===void 0&&(q=new Set(A));const ye=q.has(re),_e=U.has(me);if(ye)if(_e){const ke=hb(Pl,me);ke===H?H=D3($2(me,z.element)):(z.withBefore(H).insertChild(ke),$2(me,z.element)),ne++,ie++}else l5(me,z.withBefore(H)),ie++;else H=D3(D$(re)),a5(re,z.element),ne++}const Te=ff.get(me);Te!==null&&hn(Te)&&(Ap===null&&(Ap=Te.getFormat()),Pp===""&&(Pp=Te.getStyle()))}const ce=ne>B,xe=ie>F;if(ce&&!xe){const re=A[F+1],me=re===void 0?null:Pl.getElementByKey(re);I$(A,S,ie,F,z.withBefore(me))}else xe&&!ce&&M$(E,ne,B,z.element)})(o,_,w,u,f,a)}CR(o)&&(ha+=Zg),g.__lexicalTextContent=ha,ha=s+ha})(t,e,e.getDOMSlot(n)),r=e,Ap==null||Ap===r.__textFormat||s5||r.setTextFormat(Ap),(function(i){Pp===""||Pp===i.__textStyle||s5||i.setTextStyle(Pp)})(e)}function c5(t,e){const n=[];let r=t.__first;for(;r!==null;){const i=e.get(r);i===void 0&&on(101),n.push(r),r=i.__next}return n}function $2(t,e){const n=ub.get(t);let r=ff.get(t);n!==void 0&&r!==void 0||on(61);const i=R1||A$.has(t)||E$.has(t),o=hb(Pl,t);if(n===r&&!i){if(Rt(n)){const a=o.__lexicalTextContent;a!==void 0&&(ha+=a,kg+=a)}else{const a=n.getTextContent();kg+=a,ha+=a}return o}if(n!==r&&i&&e8(VC,jC,oR,r,"updated"),r.updateDOM(n,o,cb)){const a=l5(t,null);return e===null&&on(62),e.replaceChild(a,o),a5(t,null),a}if(Rt(n)&&Rt(r)){const a=r.__indent;(R1||a!==n.__indent)&&SY(o,a);const s=r.__format;if((R1||s!==n.__format)&&CY(o,s),i&&(V2e(n,r,o),Gs(r)||r.isInline()||TY(n,r,o)),CR(r)&&(ha+=Zg,kg+=Zg),(R1||r.__dir!==n.__dir)&&(R$(o,r),Gs(r)&&!R1))for(const u of r.getChildren())Rt(u)&&R$(hb(Pl,u.getKey()),u)}else{const a=r.getTextContent();if(_i(r)){const s=r.decorate(Pl,cb);s!==null&&kY(t,s)}ha+=a,kg+=a}if(!s5&&Gs(r)&&r.__cachedText!==kg){const a=r.getWritable();a.__cachedText=kg,r=a}return o}function kY(t,e){let n=Pl._pendingDecorators;const r=Pl._decorators;if(n===null){if(r[t]===e)return;n=tK(Pl)}n[t]=e}function D3(t){let e=t.nextSibling;return e!==null&&e===Pl._blockCursorElement&&(e=e.nextSibling),e}function Q2e(t,e,n,r,i,o){ha="",kg="",R1=r===Aw,Pl=n,cb=n._config,jC=n._nodes,oR=Pl._listeners.mutation,E$=i,A$=o,ub=t._nodeMap,ff=e._nodeMap,s5=e._readOnly,P$=new Map(n._keyToDOMMap);const a=new Map;return VC=a,$2("root",null),Pl=void 0,jC=void 0,E$=void 0,A$=void 0,ub=void 0,ff=void 0,cb=void 0,P$=void 0,VC=void 0,a}function D$(t){const e=P$.get(t);return e===void 0&&on(75,t),e}function Kn(t){return{type:t}}const HT=Kn("SELECTION_CHANGE_COMMAND"),U2e=Kn("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),sR=Kn("CLICK_COMMAND"),W_=Kn("DELETE_CHARACTER_COMMAND"),ew=Kn("INSERT_LINE_BREAK_COMMAND"),QC=Kn("INSERT_PARAGRAPH_COMMAND"),tw=Kn("CONTROLLED_TEXT_INSERTION_COMMAND"),GT=Kn("PASTE_COMMAND"),L$=Kn("REMOVE_TEXT_COMMAND"),UC=Kn("DELETE_WORD_COMMAND"),ZC=Kn("DELETE_LINE_COMMAND"),Mg=Kn("FORMAT_TEXT_COMMAND"),aR=Kn("UNDO_COMMAND"),lR=Kn("REDO_COMMAND"),cR=Kn("KEYDOWN_COMMAND"),EY=Kn("KEY_ARROW_RIGHT_COMMAND"),Z2e=Kn("MOVE_TO_END"),RN=Kn("KEY_ARROW_LEFT_COMMAND"),q2e=Kn("MOVE_TO_START"),IN=Kn("KEY_ARROW_UP_COMMAND"),DN=Kn("KEY_ARROW_DOWN_COMMAND"),Pw=Kn("KEY_ENTER_COMMAND"),LN=Kn("KEY_SPACE_COMMAND"),uR=Kn("KEY_BACKSPACE_COMMAND"),XT=Kn("KEY_ESCAPE_COMMAND"),$N=Kn("KEY_DELETE_COMMAND"),hR=Kn("KEY_TAB_COMMAND"),AY=Kn("INSERT_TAB_COMMAND"),u5=Kn("INDENT_CONTENT_COMMAND"),$$=Kn("OUTDENT_CONTENT_COMMAND"),zN=Kn("DROP_COMMAND"),W2e=Kn("FORMAT_ELEMENT_COMMAND"),dR=Kn("DRAGSTART_COMMAND"),NN=Kn("DRAGOVER_COMMAND"),H2e=Kn("DRAGEND_COMMAND"),fR=Kn("COPY_COMMAND"),BN=Kn("CUT_COMMAND"),z$=Kn("SELECT_ALL_COMMAND"),G2e=Kn("CLEAR_EDITOR_COMMAND"),X2e=Kn("CLEAR_HISTORY_COMMAND"),z2=Kn("CAN_REDO_COMMAND"),N2=Kn("CAN_UNDO_COMMAND"),pR=Kn("FOCUS_COMMAND"),mR=Kn("BLUR_COMMAND"),Y2e=Kn("KEY_MODIFIER_COMMAND"),gg=Object.freeze({}),N$=30,B$=[["keydown",function(t,e){if(iC=t.timeStamp,PY=t.key,!e.isComposing()&&!Rn(e,cR,t)&&t.key!=null){if(L3&&AV(t))return zu(e,(()=>{YE(e,$3)})),L3=!1,void($3="");if((function(n){return Qi(n,"ArrowRight",{shiftKey:"any"})})(t))Rn(e,EY,t);else if((function(n){return Qi(n,"ArrowRight",wg)})(t))Rn(e,Z2e,t);else if((function(n){return Qi(n,"ArrowLeft",{shiftKey:"any"})})(t))Rn(e,RN,t);else if((function(n){return Qi(n,"ArrowLeft",wg)})(t))Rn(e,q2e,t);else if((function(n){return Qi(n,"ArrowUp",{altKey:"any",shiftKey:"any"})})(t))Rn(e,IN,t);else if((function(n){return Qi(n,"ArrowDown",{altKey:"any",shiftKey:"any"})})(t))Rn(e,DN,t);else if((function(n){return Qi(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})})(t))oC=!0,Rn(e,Pw,t);else if((function(n){return n.key===" "})(t))Rn(e,LN,t);else if((function(n){return Dp&&Qi(n,"o",{ctrlKey:!0})})(t))t.preventDefault(),oC=!0,Rn(e,ew,!0);else if((function(n){return Qi(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})})(t))oC=!1,Rn(e,Pw,t);else if((function(n){return Qi(n,"Backspace",{shiftKey:"any"})||Dp&&Qi(n,"h",{ctrlKey:!0})})(t))AV(t)?Rn(e,uR,t):(t.preventDefault(),Rn(e,W_,!0));else if((function(n){return n.key==="Escape"})(t))Rn(e,XT,t);else if((function(n){return Qi(n,"Delete",{})||Dp&&Qi(n,"d",{ctrlKey:!0})})(t))(function(n){return n.key==="Delete"})(t)?Rn(e,$N,t):(t.preventDefault(),Rn(e,W_,!1));else if((function(n){return Qi(n,"Backspace",EV)})(t))t.preventDefault(),Rn(e,UC,!0);else if((function(n){return Qi(n,"Delete",EV)})(t))t.preventDefault(),Rn(e,UC,!1);else if((function(n){return Dp&&Qi(n,"Backspace",{metaKey:!0})})(t))t.preventDefault(),Rn(e,ZC,!0);else if((function(n){return Dp&&(Qi(n,"Delete",{metaKey:!0})||Qi(n,"k",{ctrlKey:!0}))})(t))t.preventDefault(),Rn(e,ZC,!1);else if((function(n){return Qi(n,"b",wg)})(t))t.preventDefault(),Rn(e,Mg,"bold");else if((function(n){return Qi(n,"u",wg)})(t))t.preventDefault(),Rn(e,Mg,"underline");else if((function(n){return Qi(n,"i",wg)})(t))t.preventDefault(),Rn(e,Mg,"italic");else if((function(n){return Qi(n,"Tab",{shiftKey:"any"})})(t))Rn(e,hR,t);else if((function(n){return Qi(n,"z",wg)})(t))t.preventDefault(),Rn(e,aR,void 0);else if((function(n){return Dp?Qi(n,"z",{metaKey:!0,shiftKey:!0}):Qi(n,"y",{ctrlKey:!0})||Qi(n,"z",{ctrlKey:!0,shiftKey:!0})})(t))t.preventDefault(),Rn(e,lR,void 0);else{const n=e._editorState._selection;n===null||Ht(n)?PV(t)&&(t.preventDefault(),Rn(e,z$,t)):(function(r){return Qi(r,"c",wg)})(t)?(t.preventDefault(),Rn(e,fR,t)):(function(r){return Qi(r,"x",wg)})(t)?(t.preventDefault(),Rn(e,BN,t)):PV(t)&&(t.preventDefault(),Rn(e,z$,t))}(function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey})(t)&&Rn(e,Y2e,t)}}],["pointerdown",function(t,e){const n=t.target,r=t.pointerType;CO(n)&&r!=="touch"&&r!=="pen"&&t.button===0&&zu(e,(()=>{CV(n)||(j$=!0)}))}],["compositionstart",function(t,e){zu(e,(()=>{const n=sn();if(Ht(n)&&!e.isComposing()){const r=n.anchor,i=n.anchor.getNode();tl(r.key),(t.timeStamp<iC+N$||r.type==="element"||!n.isCollapsed()||i.getFormat()!==n.format||hn(i)&&i.getStyle()!==n.style)&&Rn(e,tw,A2e)}}))}],["compositionend",function(t,e){ob?d2=!0:Ew||!FC&&!r5?zu(e,(()=>{YE(e,t.data)})):(L3=!0,$3=t.data)}],["input",function(t,e){t.stopPropagation(),zu(e,(()=>{if(qo(t.target)&&CV(t.target))return;const n=sn(),r=t.data,i=LY(t);if(r!=null&&Ht(n)&&IY(n,i,r,t.timeStamp,!1)){d2&&(YE(e,r),d2=!1);const o=n.anchor.getNode(),a=bf(Kh(e));if(a===null)return;const s=n.isBackward(),u=s?n.anchor.offset:n.focus.offset,f=s?n.focus.offset:n.anchor.offset;n5&&!n.isCollapsed()&&hn(o)&&a.anchorNode!==null&&o.getTextContent().slice(0,u)+r+o.getTextContent().slice(u+f)===oK(a.anchorNode)||Rn(e,tw,r);const g=r.length;ob&&g>1&&t.inputType==="insertCompositionText"&&!e.isComposing()&&(n.anchor.offset-=g),FC||Ew||r5||!e.isComposing()||(iC=0,tl(null))}else KN(!1,e,r!==null?r:void 0),d2&&(YE(e,r||void 0),d2=!1);(function(){el();const o=ns();bY(o)})()}),{event:t}),I1=null}],["click",function(t,e){zu(e,(()=>{const n=sn(),r=bf(Kh(e)),i=Db();if(r){if(Ht(n)){const o=n.anchor,a=o.getNode();if(o.type==="element"&&o.offset===0&&n.isCollapsed()&&!Gs(a)&&zr().getChildrenSize()===1&&a.getTopLevelElementOrThrow().isEmpty()&&i!==null&&n.is(i))r.removeAllRanges(),n.dirty=!0;else if(t.detail===3&&!n.isCollapsed()&&a!==n.focus.getNode()){const s=(function(u,f){let g=u;for(;g!==zr()&&g!=null;){if(f(g))return g;g=g.getParent()}return null})(a,(u=>Rt(u)&&!u.isInline()));Rt(s)&&s.select(0)}}else if(t.pointerType==="touch"||t.pointerType==="pen"){const o=r.anchorNode;(qo(o)||iy(o))&&rs(VN(i,r,e,t))}}Rn(e,sR,t)}))}],["cut",gg],["copy",gg],["dragstart",gg],["dragover",gg],["dragend",gg],["paste",gg],["focus",gg],["blur",gg],["drop",gg]];n5&&B$.push(["beforeinput",(t,e)=>(function(n,r){const i=n.inputType,o=LY(n);i==="deleteCompositionText"||ob&&sK(r)||i!=="insertCompositionText"&&zu(r,(()=>{const a=sn();if(i==="deleteContentBackward"){if(a===null){const S=Db();if(!Ht(S))return;rs(S.clone())}if(Ht(a)){const S=a.anchor.key===a.focus.key;if(s=n.timeStamp,PY==="MediaLast"&&s<iC+N$&&r.isComposing()&&S){if(tl(null),iC=0,setTimeout((()=>{zu(r,(()=>{tl(null)}))}),N$),Ht(a)){const E=a.anchor.getNode();E.markDirty(),hn(E)||on(142),DY(a,E)}}else{tl(null),n.preventDefault();const E=a.anchor.getNode(),A=E.getTextContent(),R=E.canInsertTextAfter(),$=a.anchor.offset===0&&a.focus.offset===A.length;let z=Uj&&S&&!$&&R;if(z&&a.isCollapsed()&&(z=!_i(Z$(a.anchor,!0))),!z){Rn(r,W_,!0);const B=sn();Uj&&Ht(B)&&B.isCollapsed()&&(R_=B,setTimeout((()=>R_=null)))}}return}}var s;if(!Ht(a))return;const u=n.data;I1!==null&&KN(!1,r,I1),a.dirty&&I1===null||!a.isCollapsed()||Gs(a.anchor.getNode())||o===null||a.applyDOMRange(o),I1=null;const f=a.anchor,g=a.focus,_=f.getNode(),w=g.getNode();if(i!=="insertText"&&i!=="insertTranspose")switch(n.preventDefault(),i){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Rn(r,tw,n);break;case"insertFromComposition":tl(null),Rn(r,tw,n);break;case"insertLineBreak":tl(null),Rn(r,ew,!1);break;case"insertParagraph":tl(null),oC&&!Ew?(oC=!1,Rn(r,ew,!1)):Rn(r,QC,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Rn(r,GT,n);break;case"deleteByComposition":(function(S,E){return S!==E||Rt(S)||Rt(E)||!H_(S)||!H_(E)})(_,w)&&Rn(r,L$,n);break;case"deleteByDrag":case"deleteByCut":Rn(r,L$,n);break;case"deleteContent":Rn(r,W_,!1);break;case"deleteWordBackward":Rn(r,UC,!0);break;case"deleteWordForward":Rn(r,UC,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Rn(r,ZC,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Rn(r,ZC,!1);break;case"formatStrikeThrough":Rn(r,Mg,"strikethrough");break;case"formatBold":Rn(r,Mg,"bold");break;case"formatItalic":Rn(r,Mg,"italic");break;case"formatUnderline":Rn(r,Mg,"underline");break;case"historyUndo":Rn(r,aR,void 0);break;case"historyRedo":Rn(r,lR,void 0)}else{if(u===`
`)n.preventDefault(),Rn(r,ew,!1);else if(u===Zg)n.preventDefault(),Rn(r,QC,void 0);else if(u==null&&n.dataTransfer){const S=n.dataTransfer.getData("text/plain");n.preventDefault(),a.insertRawText(S)}else u!=null&&IY(a,o,u,n.timeStamp,!0)?(n.preventDefault(),Rn(r,tw,u)):I1=u;MY=n.timeStamp}}))})(t,e)]);let iC=0,PY=null,MY=0,I1=null;const h5=new WeakMap;let F$=!1,j$=!1,oC=!1,d2=!1,L3=!1,$3="",R_=null,RY=[0,"",0,"root",0];function IY(t,e,n,r,i){const o=t.anchor,a=t.focus,s=o.getNode(),u=ns(),f=bf(Kh(u)),g=f!==null?f.anchorNode:null,_=o.key,w=u.getElementByKey(_),S=n.length;return _!==a.key||!hn(s)||(!i&&(!n5||MY<r+50)||s.isDirty()&&S<2||rK(n))&&o.offset!==a.offset&&!s.isComposing()||Cg(s)||s.isDirty()&&S>1||(i||!n5)&&w!==null&&!s.isComposing()&&g!==Mw(w)||f!==null&&e!==null&&(!e.collapsed||e.startContainer!==f.anchorNode||e.startOffset!==f.anchorOffset)||s.getFormat()!==t.format||s.getStyle()!==t.style||(function(E,A){if(A.isSegmented())return!0;if(!E.isCollapsed())return!1;const R=E.anchor.offset,$=A.getParentOrThrow(),z=H_(A);return R===0?!A.canInsertTextBefore()||!$.canInsertTextBefore()&&!A.isComposing()||z||(function(B){const F=B.getPreviousSibling();return(hn(F)||Rt(F)&&F.isInline())&&!F.canInsertTextAfter()})(A):R===A.getTextContentSize()&&(!A.canInsertTextAfter()||!$.canInsertTextAfter()&&!A.isComposing()||z)})(t,s)}function nV(t,e){return iy(t)&&t.nodeValue!==null&&e!==0&&e!==t.nodeValue.length}function rV(t,e,n){const{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}=t;F$&&(F$=!1,nV(r,i)&&nV(o,a)&&!R_)||zu(e,(()=>{if(!n)return void rs(null);if(!tk(e,r,o))return;let s=sn();if(R_&&Ht(s)&&s.isCollapsed()){const u=s.anchor,f=R_.anchor;(u.key===f.key&&u.offset===f.offset+1||u.offset===1&&f.getNode().is(u.getNode().getPreviousSibling()))&&(s=R_.clone(),rs(s))}if(R_=null,Ht(s)){const u=s.anchor,f=u.getNode();if(s.isCollapsed()){t.type==="Range"&&t.anchorNode===t.focusNode&&(s.dirty=!0);const g=Kh(e).event,_=g?g.timeStamp:performance.now(),[w,S,E,A,R]=RY,$=zr(),z=e.isComposing()===!1&&$.getTextContent()==="";if(_<R+200&&u.offset===E&&u.key===A)cP(s,w,S);else if(u.type==="text")hn(f)||on(141),DY(s,f);else if(u.type==="element"&&!z){Rt(f)||on(259);const B=u.getNode();B.isEmpty()?(function(F,U){const q=U.getTextFormat(),H=U.getTextStyle();cP(F,q,H)})(s,B):cP(s,0,"")}}else{const g=u.key,_=s.focus.key,w=s.getNodes(),S=w.length,E=s.isBackward(),A=E?a:i,R=E?i:a,$=E?_:g,z=E?g:_;let B=E2e,F=!1;for(let U=0;U<S;U++){const q=w[U],H=q.getTextContentSize();if(hn(q)&&H!==0&&!(U===0&&q.__key===$&&A===H||U===S-1&&q.__key===z&&R===0)&&(F=!0,B&=q.getFormat(),B===0))break}s.format=F?B:0}}Rn(e,HT,void 0)}))}function cP(t,e,n){t.format===e&&t.style===n||(t.format=e,t.style=n,t.dirty=!0)}function DY(t,e){cP(t,e.getFormat(),e.getStyle())}function LY(t){if(!t.getTargetRanges)return null;const e=t.getTargetRanges();return e.length===0?null:e[0]}function YE(t,e){const n=t._compositionKey;if(tl(null),n!==null&&e!=null){if(e===""){const r=Ii(n),i=Mw(t.getElementByKey(n));return void(i!==null&&i.nodeValue!==null&&hn(r)&&JN(r,i.nodeValue,null,null,!0))}if(e[e.length-1]===`
`){const r=sn();if(Ht(r)){const i=r.focus;return r.anchor.set(i.key,i.offset,i.type),void Rn(t,Pw,null)}}}KN(!0,t,e)}function $Y(t){let e=t.__lexicalEventHandles;return e===void 0&&(e=[],t.__lexicalEventHandles=e),e}const nw=new Map;function zY(t){const e=CCe(t.target);if(e===null)return;const n=XN(e.anchorNode);if(n===null)return;j$&&(j$=!1,zu(n,(()=>{const u=Db(),f=e.anchorNode;(qo(f)||iy(f))&&rs(VN(u,e,n,t))})));const r=YN(n),i=r[r.length-1],o=i._key,a=nw.get(o),s=a||i;s!==n&&rV(e,s,!1),rV(e,n,!0),n!==i?nw.set(o,n):a&&nw.delete(o)}function iV(t){t._lexicalHandled=!0}function oV(t){return t._lexicalHandled===!0}function K2e(t){const e=t.ownerDocument,n=h5.get(e);if(n===void 0)return;const r=n-1;r>=0||on(164),h5.set(e,r),r===0&&e.removeEventListener("selectionchange",zY);const i=OR(t);GN(i)?((function(a){if(a._parentEditor!==null){const s=YN(a),u=s[s.length-1]._key;nw.get(u)===a&&nw.delete(u)}else nw.delete(a._key)})(i),t.__lexicalEditor=null):i&&on(198);const o=$Y(t);for(let a=0;a<o.length;a++)o[a]();t.__lexicalEventHandles=[]}function V$(t,e,n){el();const r=t.__key,i=t.getParent();if(i===null)return;const o=(function(s){const u=sn();if(!Ht(u)||!Rt(s))return u;const{anchor:f,focus:g}=u,_=f.getNode(),w=g.getNode();return q$(_,s)&&f.set(s.__key,0,"element"),q$(w,s)&&g.set(s.__key,0,"element"),u})(t);let a=!1;if(Ht(o)&&e){const s=o.anchor,u=o.focus;s.key===r&&(p5(s,t,i,t.getPreviousSibling(),t.getNextSibling()),a=!0),u.key===r&&(p5(u,t,i,t.getPreviousSibling(),t.getNextSibling()),a=!0)}else es(o)&&e&&t.isSelected()&&t.selectPrevious();if(Ht(o)&&e&&!a){const s=t.getIndexWithinParent();G_(t),f5(o,i,s,-1)}else G_(t);n||Ys(i)||i.canBeEmpty()||!i.isEmpty()||V$(i,e),e&&o&&Gs(i)&&i.isEmpty()&&i.selectEnd()}class bO{static getType(){const{ownNodeType:e}=kR(this);return e===void 0&&on(64,this.name),e}static clone(e){on(65,this.name)}$config(){return{}}config(e,n){const r=n.extends||Object.getPrototypeOf(this.constructor);return Object.assign(n,{extends:r,type:e}),{[e]:n}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),JY(this,e)}getType(){return this.__type}isInline(){on(137,this.constructor.name)}isAttached(){let e=this.__key;for(;e!==null;){if(e==="root")return!0;const n=Ii(e);if(n===null)break;e=n.__parent}return!1}isSelected(e){const n=e||sn();if(n==null)return!1;const r=n.getNodes().some((i=>i.__key===this.__key));if(hn(this))return r;if(Ht(n)&&n.anchor.type==="element"&&n.focus.type==="element"){if(n.isCollapsed())return!1;const i=this.getParent();if(_i(this)&&this.isInline()&&i){const o=n.isBackward()?n.focus:n.anchor;if(i.is(o.getNode())&&o.offset===i.getChildrenSize()&&this.is(i.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(e===null)return-1;let n=e.getFirstChild(),r=0;for(;n!==null;){if(this.is(n))return r;r++,n=n.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return e===null?null:Ii(e)}getParentOrThrow(){const e=this.getParent();return e===null&&on(66,this.__key),e}getTopLevelElement(){let e=this;for(;e!==null;){const n=e.getParent();if(Ys(n))return Rt(e)||e===this&&_i(e)||on(194),e;e=n}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();return e===null&&on(67,this.__key),e}getParents(){const e=[];let n=this.getParent();for(;n!==null;)e.push(n),n=n.getParent();return e}getParentKeys(){const e=[];let n=this.getParent();for(;n!==null;)e.push(n.__key),n=n.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return e===null?null:Ii(e)}getPreviousSiblings(){const e=[],n=this.getParent();if(n===null)return e;let r=n.getFirstChild();for(;r!==null&&!r.is(this);)e.push(r),r=r.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return e===null?null:Ii(e)}getNextSiblings(){const e=[];let n=this.getNextSibling();for(;n!==null;)e.push(n),n=n.getNextSibling();return e}getCommonAncestor(e){const n=Rt(this)?this:this.getParent(),r=Rt(e)?e:e.getParent(),i=n&&r?dP(n,r):null;return i?i.commonAncestor:null}is(e){return e!=null&&this.__key===e.__key}isBefore(e){const n=dP(this,e);return n!==null&&(n.type==="descendant"||(n.type==="branch"?fK(n)===-1:(n.type!=="same"&&n.type!=="ancestor"&&on(279),!1)))}isParentOf(e){const n=dP(this,e);return n!==null&&n.type==="ancestor"}getNodesBetween(e){const n=this.isBefore(e),r=[],i=new Set;let o=this;for(;o!==null;){const a=o.__key;if(i.has(a)||(i.add(a),r.push(o)),o===e)break;const s=Rt(o)?n?o.getFirstChild():o.getLastChild():null;if(s!==null){o=s;continue}const u=n?o.getNextSibling():o.getPreviousSibling();if(u!==null){o=u;continue}const f=o.getParentOrThrow();if(i.has(f.__key)||r.push(f),f===e)break;let g=null,_=f;do{if(_===null&&on(68),g=n?_.getNextSibling():_.getPreviousSibling(),_=_.getParent(),_===null)break;g!==null||i.has(_.__key)||r.push(_)}while(g===null);o=g}return n||r.reverse(),r}isDirty(){const e=ns()._dirtyLeaves;return e!==null&&e.has(this.__key)}getLatest(){const e=Ii(this.__key);return e===null&&on(113),e}getWritable(){el();const e=X0(),n=ns(),r=e._nodeMap,i=this.__key,o=this.getLatest(),a=n._cloneNotNeeded,s=sn();if(s!==null&&s.setCachedNodes(null),a.has(i))return v5(o),o;const u=n8(o);return a.add(i),v5(u),r.set(i,u),u}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,n){on(70)}updateDOM(e,n,r){on(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){const e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){on(18,this.name)}updateFromJSON(e){return(function(n,r){const i=n.getWritable(),o=r.$;let a=o;for(const s of OY(i).flatKeys)s in r&&(a!==void 0&&a!==o||(a={...o}),a[s]=r[s]);return(i.__state||a)&&F2e(n).updateFromJSON(a),i})(this,e)}static transform(){return null}remove(e){V$(this,!0,e)}replace(e,n){el();let r=sn();r!==null&&(r=r.clone()),V3(this,e);const i=this.getLatest(),o=this.__key,a=e.__key,s=e.getWritable(),u=this.getParentOrThrow().getWritable(),f=u.__size;G_(s);const g=i.getPreviousSibling(),_=i.getNextSibling(),w=i.__prev,S=i.__next,E=i.__parent;if(V$(i,!1,!0),g===null?u.__first=a:g.getWritable().__next=a,s.__prev=w,_===null?u.__last=a:_.getWritable().__prev=a,s.__next=S,s.__parent=E,u.__size=f,n&&(Rt(this)&&Rt(s)||on(139),this.getChildren().forEach((A=>{s.append(A)}))),Ht(r)){rs(r);const A=r.anchor,R=r.focus;A.key===o&&cV(A,s),R.key===o&&cV(R,s)}return x0()===o&&tl(a),s}insertAfter(e,n=!0){el(),V3(this,e);const r=this.getWritable(),i=e.getWritable(),o=i.getParent(),a=sn();let s=!1,u=!1;if(o!==null){const S=e.getIndexWithinParent();if(G_(i),Ht(a)){const E=o.__key,A=a.anchor,R=a.focus;s=A.type==="element"&&A.key===E&&A.offset===S+1,u=R.type==="element"&&R.key===E&&R.offset===S+1}}const f=this.getNextSibling(),g=this.getParentOrThrow().getWritable(),_=i.__key,w=r.__next;if(f===null?g.__last=_:f.getWritable().__prev=_,g.__size++,r.__next=_,i.__next=w,i.__prev=r.__key,i.__parent=r.__parent,n&&Ht(a)){const S=this.getIndexWithinParent();f5(a,g,S+1);const E=g.__key;s&&a.anchor.set(E,S+2,"element"),u&&a.focus.set(E,S+2,"element")}return e}insertBefore(e,n=!0){el(),V3(this,e);const r=this.getWritable(),i=e.getWritable(),o=i.__key;G_(i);const a=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),u=r.__prev,f=this.getIndexWithinParent();a===null?s.__first=o:a.getWritable().__next=o,s.__size++,r.__prev=o,i.__prev=u,i.__next=r.__key,i.__parent=r.__parent;const g=sn();return n&&Ht(g)&&f5(g,this.getParentOrThrow(),f),e}isParentRequired(){return!1}createParentElementNode(){return mi()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,n){el();const r=this.getPreviousSibling(),i=this.getParentOrThrow();if(r===null)return i.select(0,0);if(Rt(r))return r.select();if(!hn(r)){const o=r.getIndexWithinParent()+1;return i.select(o,o)}return r.select(e,n)}selectNext(e,n){el();const r=this.getNextSibling(),i=this.getParentOrThrow();if(r===null)return i.select();if(Rt(r))return r.select(0,0);if(!hn(r)){const o=r.getIndexWithinParent();return i.select(o,o)}return r.select(e,n)}markDirty(){this.getWritable()}reconcileObservedMutation(e,n){this.markDirty()}}class YT extends bO{static getType(){return"linebreak"}static clone(e){return new YT(e.__key)}constructor(e){super(e)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>(function(n){const r=n.parentElement;if(r!==null&&_5(r)){const i=r.firstChild;if(i===n||i.nextSibling===n&&KE(i)){const o=r.lastChild;if(o===n||o.previousSibling===n&&KE(o))return!0}}return!1})(e)||(function(n){const r=n.parentElement;if(r!==null&&_5(r)){const i=r.firstChild;if(i===n||i.nextSibling===n&&KE(i))return!1;const o=r.lastChild;if(o===n||o.previousSibling===n&&KE(o))return!0}return!1})(e)?null:{conversion:J2e,priority:0}}}static importJSON(e){return _f().updateFromJSON(e)}}function J2e(t){return{node:_f()}}function _f(){return nh(new YT)}function pf(t){return t instanceof YT}function KE(t){return iy(t)&&/^( |\t|\r?\n)+$/.test(t.textContent||"")}function z3(t,e){return 16&e?"code":e&SN?"mark":32&e?"sub":64&e?"sup":null}function N3(t,e){return 1&e?"strong":2&e?"em":"span"}function NY(t,e,n,r,i){const o=r.classList;let a=rw(i,"base");a!==void 0&&o.add(...a),a=rw(i,"underlineStrikethrough");let s=!1;const u=e&o5&&e&i5;a!==void 0&&(n&o5&&n&i5?(s=!0,u||o.add(...a)):u&&o.remove(...a));for(const f in ab){const g=ab[f];if(a=rw(i,f),a!==void 0)if(n&g){if(s&&(f==="underline"||f==="strikethrough")){e&g&&o.remove(...a);continue}e&g&&(!u||f!=="underline")&&f!=="strikethrough"||o.add(...a)}else e&g&&o.remove(...a)}}function BY(t,e,n){const r=e.firstChild,i=n.isComposing(),o=t+(i?iR:"");if(r==null)e.textContent=o;else{const a=r.nodeValue;if(a!==o)if(i||ob){const[s,u,f]=(function(g,_){const w=g.length,S=_.length;let E=0,A=0;for(;E<w&&E<S&&g[E]===_[E];)E++;for(;A+E<w&&A+E<S&&g[w-A-1]===_[S-A-1];)A++;return[E,w-E-A,_.slice(E,S-A)]})(a,o);u!==0&&r.deleteData(s,u),r.insertData(s,f)}else r.nodeValue=o}}function sV(t,e,n,r,i,o){BY(i,t,e);const a=o.theme.text;a!==void 0&&NY(0,0,r,t,a)}function JE(t,e){const n=document.createElement(e);return n.appendChild(t),n}class fm extends bO{static getType(){return"text"}static clone(e){return new fm(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",n){super(n),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const e=this.getLatest();return I2e[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===x0()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){const n=ab[e];return!!(this.getFormat()&n)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(e,n){return y5(this.getLatest().__format,e,n)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,n){const r=this.__format,i=z3(0,r),o=N3(0,r),a=i===null?o:i,s=document.createElement(a);let u=s;this.hasFormat("code")&&s.setAttribute("spellcheck","false"),i!==null&&(u=document.createElement(o),s.appendChild(u)),sV(u,this,0,r,this.__text,e);const f=this.__style;return f!==""&&(s.style.cssText=f),s}updateDOM(e,n,r){const i=this.__text,o=e.__format,a=this.__format,s=z3(0,o),u=z3(0,a),f=N3(0,o),g=N3(0,a);if((s===null?f:s)!==(u===null?g:u))return!0;if(s===u&&f!==g){const A=n.firstChild;A==null&&on(48);const R=document.createElement(g);return sV(R,this,0,a,i,r),n.replaceChild(R,A),!1}let _=n;u!==null&&s!==null&&(_=n.firstChild,_==null&&on(49)),BY(i,_,this);const w=r.theme.text;w!==void 0&&o!==a&&NY(0,o,a,_,w);const S=e.__style,E=this.__style;return S!==E&&(n.style.cssText=E),!1}static importDOM(){return{"#text":()=>({conversion:rCe,priority:0}),b:()=>({conversion:tCe,priority:0}),code:()=>({conversion:yg,priority:0}),em:()=>({conversion:yg,priority:0}),i:()=>({conversion:yg,priority:0}),mark:()=>({conversion:yg,priority:0}),s:()=>({conversion:yg,priority:0}),span:()=>({conversion:eCe,priority:0}),strong:()=>({conversion:yg,priority:0}),sub:()=>({conversion:yg,priority:0}),sup:()=>({conversion:yg,priority:0}),u:()=>({conversion:yg,priority:0})}}static importJSON(e){return Yi().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:n}=super.exportDOM(e);return qo(n)||on(132),n.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?n.style.textTransform="lowercase":this.hasFormat("uppercase")?n.style.textTransform="uppercase":this.hasFormat("capitalize")&&(n.style.textTransform="capitalize"),this.hasFormat("bold")&&(n=JE(n,"b")),this.hasFormat("italic")&&(n=JE(n,"i")),this.hasFormat("strikethrough")&&(n=JE(n,"s")),this.hasFormat("underline")&&(n=JE(n,"u")),{element:n}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,n){}setFormat(e){const n=this.getWritable();return n.__format=typeof e=="string"?ab[e]:e,n}setDetail(e){const n=this.getWritable();return n.__detail=typeof e=="string"?P2e[e]:e,n}setStyle(e){const n=this.getWritable();return n.__style=e,n}toggleFormat(e){const n=y5(this.getFormat(),e,null);return this.setFormat(n)}toggleDirectionless(){const e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){const e=this.getWritable();return e.__detail^=2,e}setMode(e){const n=R2e[e];if(this.__mode===n)return this;const r=this.getWritable();return r.__mode=n,r}setTextContent(e){if(this.__text===e)return this;const n=this.getWritable();return n.__text=e,n}select(e,n){el();let r=e,i=n;const o=sn(),a=this.getTextContent(),s=this.__key;if(typeof a=="string"){const u=a.length;r===void 0&&(r=u),i===void 0&&(i=u)}else r=0,i=0;if(!Ht(o))return VY(s,r,s,i,"text","text");{const u=x0();u!==o.anchor.key&&u!==o.focus.key||tl(s),o.setTextNodeRange(this,r,this,i)}return o}selectStart(){return this.select(0,0)}selectEnd(){const e=this.getTextContentSize();return this.select(e,e)}spliceText(e,n,r,i){const o=this.getWritable(),a=o.__text,s=r.length;let u=e;u<0&&(u=s+u,u<0&&(u=0));const f=sn();if(i&&Ht(f)){const _=e+s;f.setTextNodeRange(o,_,o,_)}const g=a.slice(0,u)+r+a.slice(u+n);return o.__text=g,o}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){el();const n=this.getLatest(),r=n.getTextContent();if(r==="")return[];const i=n.__key,o=x0(),a=r.length;e.sort(((ne,ie)=>ne-ie)),e.push(a);const s=[],u=e.length;for(let ne=0,ie=0;ne<a&&ie<=u;ie++){const ce=e[ie];ce>ne&&(s.push(r.slice(ne,ce)),ne=ce)}const f=s.length;if(f===1)return[n];const g=s[0],_=n.getParent();let w;const S=n.getFormat(),E=n.getStyle(),A=n.__detail;let R=!1,$=null,z=null;const B=sn();if(Ht(B)){const[ne,ie]=B.isBackward()?[B.focus,B.anchor]:[B.anchor,B.focus];ne.type==="text"&&ne.key===i&&($=ne),ie.type==="text"&&ie.key===i&&(z=ie)}n.isSegmented()?(w=Yi(g),w.__format=S,w.__style=E,w.__detail=A,w.__state=Xj(n,w),R=!0):w=n.setTextContent(g);const F=[w];for(let ne=1;ne<f;ne++){const ie=Yi(s[ne]);ie.__format=S,ie.__style=E,ie.__detail=A,ie.__state=Xj(n,ie);const ce=ie.__key;o===i&&tl(ce),F.push(ie)}const U=$?$.offset:null,q=z?z.offset:null;let H=0;for(const ne of F){if(!$&&!z)break;const ie=H+ne.getTextContentSize();if($!==null&&U!==null&&U<=ie&&U>=H&&($.set(ne.getKey(),U-H,"text"),U<ie&&($=null)),z!==null&&q!==null&&q<=ie&&q>=H){z.set(ne.getKey(),q-H,"text");break}H=ie}if(_!==null){(function(ce){const xe=ce.getPreviousSibling(),re=ce.getNextSibling();xe!==null&&v5(xe),re!==null&&v5(re)})(this);const ne=_.getWritable(),ie=this.getIndexWithinParent();R?(ne.splice(ie,0,F),this.remove()):ne.splice(ie,1,F),Ht(B)&&f5(B,_,ie,f-1)}return F}mergeWithSibling(e){const n=e===this.getPreviousSibling();n||e===this.getNextSibling()||on(50);const r=this.__key,i=e.__key,o=this.__text,a=o.length;x0()===i&&tl(r);const s=sn();if(Ht(s)){const _=s.anchor,w=s.focus;_!==null&&_.key===i&&gV(_,n,r,e,a),w!==null&&w.key===i&&gV(w,n,r,e,a)}const u=e.__text,f=n?u+o:o+u;this.setTextContent(f);const g=this.getWritable();return e.remove(),g}isTextEntity(){return!1}}function eCe(t){return{forChild:FN(t.style),node:null}}function tCe(t){const e=t,n=e.style.fontWeight==="normal";return{forChild:FN(e.style,n?void 0:"bold"),node:null}}const aV=new WeakMap;function nCe(t){if(!qo(t))return!1;if(t.nodeName==="PRE")return!0;const e=t.style.whiteSpace;return typeof e=="string"&&e.startsWith("pre")}function rCe(t){const e=t;t.parentElement===null&&on(129);let n=e.textContent||"";if((function(r){let i,o=r.parentNode;const a=[r];for(;o!==null&&(i=aV.get(o))===void 0&&!nCe(o);)a.push(o),o=o.parentNode;const s=i===void 0?o:i;for(let u=0;u<a.length;u++)aV.set(a[u],s);return s})(e)!==null){const r=n.split(/(\r?\n|\t)/),i=[],o=r.length;for(let a=0;a<o;a++){const s=r[a];s===`
`||s===`\r
`?i.push(_f()):s==="	"?i.push(xO()):s!==""&&i.push(Yi(s))}return{node:i}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),n==="")return{node:null};if(n[0]===" "){let r=e,i=!0;for(;r!==null&&(r=lV(r,!1))!==null;){const o=r.textContent||"";if(o.length>0){/[ \t\n]$/.test(o)&&(n=n.slice(1)),i=!1;break}}i&&(n=n.slice(1))}if(n[n.length-1]===" "){let r=e,i=!0;for(;r!==null&&(r=lV(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){i=!1;break}i&&(n=n.slice(0,n.length-1))}return n===""?{node:null}:{node:Yi(n)}}function lV(t,e){let n=t;for(;;){let r;for(;(r=e?n.nextSibling:n.previousSibling)===null;){const o=n.parentElement;if(o===null)return null;n=o}if(n=r,qo(n)){const o=n.style.display;if(o===""&&!G$(n)||o!==""&&!o.startsWith("inline"))return null}let i=n;for(;(i=e?n.firstChild:n.lastChild)!==null;)n=i;if(iy(n))return n;if(n.nodeName==="BR")return null}}const iCe={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function yg(t){const e=iCe[t.nodeName.toLowerCase()];return e===void 0?{node:null}:{forChild:FN(t.style,e),node:null}}function Yi(t=""){return nh(new fm(t))}function hn(t){return t instanceof fm}function FN(t,e){const n=t.fontWeight,r=t.textDecoration.split(" "),i=n==="700"||n==="bold",o=r.includes("line-through"),a=t.fontStyle==="italic",s=r.includes("underline"),u=t.verticalAlign;return f=>(hn(f)&&(i&&!f.hasFormat("bold")&&f.toggleFormat("bold"),o&&!f.hasFormat("strikethrough")&&f.toggleFormat("strikethrough"),a&&!f.hasFormat("italic")&&f.toggleFormat("italic"),s&&!f.hasFormat("underline")&&f.toggleFormat("underline"),u!=="sub"||f.hasFormat("subscript")||f.toggleFormat("subscript"),u!=="super"||f.hasFormat("superscript")||f.toggleFormat("superscript"),e&&!f.hasFormat(e)&&f.toggleFormat(e)),f)}class KT extends fm{static getType(){return"tab"}static clone(e){return new KT(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){const n=super.createDOM(e),r=rw(e.theme,"tab");return r!==void 0&&n.classList.add(...r),n}static importJSON(e){return xO().updateFromJSON(e)}setTextContent(e){return e!=="	"&&e!==""&&on(126),super.setTextContent("	")}spliceText(e,n,r,i){return r===""&&n===0||r==="	"&&n===1||on(286),this}setDetail(e){return e!==2&&on(127),this}setMode(e){return e!=="normal"&&on(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function xO(){return nh(new KT)}function gR(t){return t instanceof KT}class oCe{constructor(e,n,r){this._selection=null,this.key=e,this.offset=n,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:dK(Uu(om(this,"next")),Uu(om(e,"next")))<0}getNode(){const e=Ii(this.key);return e===null&&on(20),e}set(e,n,r,i){const o=this._selection,a=this.key;i&&this.key===e&&this.offset===n&&this.type===r||(this.key=e,this.offset=n,this.type=r,JT()||(x0()===a&&tl(e),o!==null&&(o.setCachedNodes(null),o.dirty=!0)))}}function rm(t,e,n){return new oCe(t,e,n)}function B3(t,e){let n=e.__key,r=t.offset,i="element";if(hn(e)){i="text";const o=e.getTextContentSize();r>o&&(r=o)}else if(!Rt(e)){const o=e.getNextSibling();if(hn(o))n=o.__key,r=0,i="text";else{const a=e.getParent();a&&(n=a.__key,r=e.getIndexWithinParent()+1)}}t.set(n,r,i)}function cV(t,e){if(Rt(e)){const n=e.getLastDescendant();Rt(n)||hn(n)?B3(t,n):B3(t,e)}else B3(t,e)}class yR{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!es(e))return!1;const n=this._nodes,r=e._nodes;return n.size===r.size&&Array.from(n).every((i=>r.has(i)))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new yR(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const n=this.getNodes(),r=n.length,i=n[r-1];let o;if(hn(i))o=i.select();else{const a=i.getIndexWithinParent()+1;o=i.getParentOrThrow().select(a,a)}o.insertNodes(e);for(let a=0;a<r;a++)n[a].remove()}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const n=this._nodes,r=[];for(const i of n){const o=Ii(i);o!==null&&r.push(o)}return JT()||(this._cachedNodes=r),r}getTextContent(){const e=this.getNodes();let n="";for(let r=0;r<e.length;r++)n+=e[r].getTextContent();return n}deleteNodes(){const e=this.getNodes();if((sn()||Db())===this&&e[0]){const n=Ks(e[0],"next");pK($0(n,n))}for(const n of e)n.remove()}}function Ht(t){return t instanceof Ib}class Ib{constructor(e,n,r,i){this.anchor=e,this.focus=n,e._selection=this,n._selection=this,this._cachedNodes=null,this.format=r,this.style=i,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!Ht(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const n=(function(r){const i=[],[o,a]=r.getTextSlices();o&&i.push(o.caret.origin);const s=new Set,u=new Set;for(const f of r)if(Wh(f)){const{origin:g}=f;i.length===0?s.add(g):(u.add(g),i.push(g))}else{const{origin:g}=f;Rt(g)&&u.has(g)||i.push(g)}if(a&&i.push(a.caret.origin),Rw(r.focus)&&Rt(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let f=Jh(r.focus.origin,"previous");Wh(f)&&s.has(f.origin)&&!f.origin.isEmpty()&&f.origin.is(i[i.length-1]);f=ER(f))s.delete(f.origin),i.pop();for(;i.length>1;){const f=i[i.length-1];if(!Rt(f)||u.has(f)||f.isEmpty()||s.has(f))break;i.pop()}if(i.length===0&&r.isCollapsed()){const f=Uu(r.anchor),g=Uu(r.anchor.getFlipped()),_=S=>Xp(S)?S.origin:S.getNodeAtCaret(),w=_(f)||_(g)||(r.anchor.getNodeAtCaret()?f.origin:g.origin);i.push(w)}return i})(gK($V(this),"next"));return JT()||(this._cachedNodes=n),n}setTextNodeRange(e,n,r,i){this.anchor.set(e.__key,n,"text"),this.focus.set(r.__key,i,"text")}getTextContent(){const e=this.getNodes();if(e.length===0)return"";const n=e[0],r=e[e.length-1],i=this.anchor,o=this.focus,a=i.isBefore(o),[s,u]=Q$(this);let f="",g=!0;for(let _=0;_<e.length;_++){const w=e[_];if(Rt(w)&&!w.isInline())g||(f+=`
`),g=!w.isEmpty();else if(g=!1,hn(w)){let S=w.getTextContent();w===n?w===r?i.type==="element"&&o.type==="element"&&o.offset!==i.offset||(S=s<u?S.slice(s,u):S.slice(u,s)):S=a?S.slice(s):S.slice(u):w===r&&(S=a?S.slice(0,u):S.slice(0,s)),f+=S}else!_i(w)&&!pf(w)||w===r&&this.isCollapsed()||(f+=w.getTextContent())}return f}applyDOMRange(e){const n=ns(),r=n.getEditorState()._selection,i=jY(e.startContainer,e.startOffset,e.endContainer,e.endOffset,n,r);if(i===null)return;const[o,a]=i;this.anchor.set(o.key,o.offset,o.type,!0),this.focus.set(a.key,a.offset,a.type,!0),lb(this)}clone(){const e=this.anchor,n=this.focus;return new Ib(rm(e.key,e.offset,e.type),rm(n.key,n.offset,n.type),this.format,this.style)}toggleFormat(e){this.format=y5(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const n=ab[e];return!!(this.format&n)}insertRawText(e){const n=e.split(/(\r?\n|\t)/),r=[],i=n.length;for(let o=0;o<i;o++){const a=n[o];a===`
`||a===`\r
`?r.push(_f()):a==="	"?r.push(xO()):r.push(Yi(a))}this.insertNodes(r)}insertText(e){const n=this.anchor,r=this.focus,i=this.format,o=this.style;let a=n,s=r;!this.isCollapsed()&&r.isBefore(n)&&(a=r,s=n),a.type==="element"&&(function(R,$,z,B){const F=R.getNode(),U=F.getChildAtIndex(R.offset),q=Yi();if(q.setFormat(z),q.setStyle(B),bR(U))U.splice(0,0,[q]);else{const H=Gs(F)?mi().append(q):q;U===null?F.append(H):U.insertBefore(H)}R.is($)&&$.set(q.__key,0,"text"),R.set(q.__key,0,"text")})(a,s,i,o),s.type==="element"&&mb(s,Uu(om(s,"next")));const u=a.offset;let f=s.offset;const g=this.getNodes(),_=g.length;let w=g[0];hn(w)||on(26);const S=w.getTextContent().length,E=w.getParentOrThrow();let A=g[_-1];if(_===1&&s.type==="element"&&(f=S,s.set(a.key,f,"text")),this.isCollapsed()&&u===S&&(Cg(w)||!w.canInsertTextAfter()||!E.canInsertTextAfter()&&w.getNextSibling()===null)){let R=w.getNextSibling();if(hn(R)&&R.canInsertTextBefore()&&!Cg(R)||(R=Yi(),R.setFormat(i),R.setStyle(o),E.canInsertTextAfter()?w.insertAfter(R):E.insertAfter(R)),R.select(0,0),w=R,e!=="")return void this.insertText(e)}else if(this.isCollapsed()&&u===0&&(Cg(w)||!w.canInsertTextBefore()||!E.canInsertTextBefore()&&w.getPreviousSibling()===null)){let R=w.getPreviousSibling();if(hn(R)&&!Cg(R)||(R=Yi(),R.setFormat(i),E.canInsertTextBefore()?w.insertBefore(R):E.insertBefore(R)),R.select(),w=R,e!=="")return void this.insertText(e)}else if(w.isSegmented()&&u!==S){const R=Yi(w.getTextContent());R.setFormat(i),w.replace(R),w=R}else if(!this.isCollapsed()&&e!==""){const R=A.getParent();if(!E.canInsertTextBefore()||!E.canInsertTextAfter()||Rt(R)&&(!R.canInsertTextBefore()||!R.canInsertTextAfter()))return this.insertText(""),FY(this.anchor,this.focus,null),void this.insertText(e)}if(_===1){if(H_(w)){const B=Yi(e);return B.select(),void w.replace(B)}const R=w.getFormat(),$=w.getStyle();if(u!==f||R===i&&$===o){if(gR(w)){const B=Yi(e);return B.setFormat(i),B.setStyle(o),B.select(),void w.replace(B)}}else{if(w.getTextContent()!==""){const B=Yi(e);if(B.setFormat(i),B.setStyle(o),B.select(),u===0)w.insertBefore(B,!1);else{const[F]=w.splitText(u);F.insertAfter(B,!1)}return void(B.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length))}w.setFormat(i),w.setStyle(o)}const z=f-u;w=w.spliceText(u,z,e,!0),w.getTextContent()===""?w.remove():this.anchor.type==="text"&&(w.isComposing()?this.anchor.offset-=e.length:(this.format=R,this.style=$))}else{const R=new Set([...w.getParentKeys(),...A.getParentKeys()]),$=Rt(w)?w:w.getParentOrThrow();let z=Rt(A)?A:A.getParentOrThrow(),B=A;if(!$.is(z)&&z.isInline())do B=z,z=z.getParentOrThrow();while(z.isInline());if(s.type==="text"&&(f!==0||A.getTextContent()==="")||s.type==="element"&&A.getIndexWithinParent()<f)if(hn(A)&&!H_(A)&&f!==A.getTextContentSize()){if(A.isSegmented()){const ne=Yi(A.getTextContent());A.replace(ne),A=ne}Gs(s.getNode())||s.type!=="text"||(A=A.spliceText(0,f,"")),R.add(A.__key)}else{const ne=A.getParentOrThrow();ne.canBeEmpty()||ne.getChildrenSize()!==1?A.remove():ne.remove()}else R.add(A.__key);const F=z.getChildren(),U=new Set(g),q=$.is(z),H=$.isInline()&&w.getNextSibling()===null?$:w;for(let ne=F.length-1;ne>=0;ne--){const ie=F[ne];if(ie.is(w)||Rt(ie)&&ie.isParentOf(w))break;ie.isAttached()&&(!U.has(ie)||ie.is(B)?q||H.insertAfter(ie,!1):ie.remove())}if(!q){let ne=z,ie=null;for(;ne!==null;){const ce=ne.getChildren(),xe=ce.length;(xe===0||ce[xe-1].is(ie))&&(R.delete(ne.__key),ie=ne),ne=ne.getParent()}}if(H_(w))if(u===S)w.select();else{const ne=Yi(e);ne.select(),w.replace(ne)}else w=w.spliceText(u,S-u,e,!0),w.getTextContent()===""?w.remove():w.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length);for(let ne=1;ne<_;ne++){const ie=g[ne],ce=ie.__key;R.has(ce)||ie.remove()}}}removeText(){const e=sn()===this;fP(this,$Ce($V(this))),e&&sn()!==this&&rs(this)}formatText(e,n=null){if(this.isCollapsed())return this.toggleFormat(e),void tl(null);const r=this.getNodes(),i=[];for(const F of r)hn(F)&&i.push(F);const o=F=>{r.forEach((U=>{if(Rt(U)){const q=U.getFormatFlags(e,F);U.setTextFormat(q)}}))},a=i.length;if(a===0)return this.toggleFormat(e),tl(null),void o(n);const s=this.anchor,u=this.focus,f=this.isBackward(),g=f?u:s,_=f?s:u;let w=0,S=i[0],E=g.type==="element"?0:g.offset;if(g.type==="text"&&E===S.getTextContentSize()&&(w=1,S=i[1],E=0),S==null)return;const A=S.getFormatFlags(e,n);o(A);const R=a-1;let $=i[R];const z=_.type==="text"?_.offset:$.getTextContentSize();if(S.is($)){if(E===z)return;if(Cg(S)||E===0&&z===S.getTextContentSize())S.setFormat(A);else{const F=S.splitText(E,z),U=E===0?F[0]:F[1];U.setFormat(A),g.type==="text"&&g.set(U.__key,0,"text"),_.type==="text"&&_.set(U.__key,z-E,"text")}return void(this.format=A)}E===0||Cg(S)||([,S]=S.splitText(E),E=0),S.setFormat(A);const B=$.getFormatFlags(e,A);z>0&&(z===$.getTextContentSize()||Cg($)||([$]=$.splitText(z)),$.setFormat(B));for(let F=w+1;F<R;F++){const U=i[F],q=U.getFormatFlags(e,B);U.setFormat(q)}g.type==="text"&&g.set(S.__key,E,"text"),_.type==="text"&&_.set($.__key,z,"text"),this.format=A|B}insertNodes(e){if(e.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const E=sn();return Ht(E)||on(134),E.insertNodes(e)}const n=(this.isBackward()?this.focus:this.anchor).getNode(),r=U3(n,Nh),i=e[e.length-1];if(Rt(r)&&"__language"in r){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const E=F3(this);r.splice(E,0,e),i.selectEnd()}return}if(!e.some((E=>(Rt(E)||_i(E))&&!E.isInline()))){Rt(r)||on(211,n.constructor.name,n.getType());const E=F3(this);return r.splice(E,0,e),void i.selectEnd()}const o=(function(E){const A=mi();let R=null;for(let $=0;$<E.length;$++){const z=E[$],B=pf(z);if(B||_i(z)&&z.isInline()||Rt(z)&&z.isInline()||hn(z)||z.isParentRequired()){if(R===null&&(R=z.createParentElementNode(),A.append(R),B))continue;R!==null&&R.append(z)}else A.append(z),R=null}return A})(e),a=o.getLastDescendant(),s=o.getChildren(),u=!Rt(r)||!r.isEmpty()?this.insertParagraph():null,f=s[s.length-1];let g=s[0];var _;Rt(_=g)&&Nh(_)&&!_.isEmpty()&&Rt(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(Rt(r)||on(211,n.constructor.name,n.getType()),r.append(...g.getChildren()),g=s[1]),g&&(r===null&&on(212,n.constructor.name,n.getType()),(function(E,A,R){const $=A.getParentOrThrow().getLastChild();let z=A;const B=[A];for(;z!==$;)z.getNextSibling()||on(140),z=z.getNextSibling(),B.push(z);let F=E;for(const U of B)F=F.insertAfter(U)})(r,g));const w=U3(a,Nh);u&&Rt(w)&&(u.canMergeWhenEmpty()||Nh(f))&&(w.append(...u.getChildren()),u.remove()),Rt(r)&&r.isEmpty()&&r.remove(),a.selectEnd();const S=Rt(r)?r.getLastChild():null;pf(S)&&w!==r&&S.remove()}insertParagraph(){if(this.anchor.key==="root"){const a=mi();return zr().splice(this.anchor.offset,0,[a]),a.select(),a}const e=F3(this),n=U3(this.anchor.getNode(),Nh);Rt(n)||on(213);const r=n.getChildAtIndex(e),i=r?[r,...r.getNextSiblings()]:[],o=n.insertNewAfter(this,!1);return o?(o.append(...i),o.selectStart(),o):null}insertLineBreak(e){const n=_f();if(this.insertNodes([n]),e){const r=n.getParentOrThrow(),i=n.getIndexWithinParent();r.select(i,i)}}extract(){const e=this.getNodes(),n=e.length,r=n-1,i=this.anchor,o=this.focus;let a=e[0],s=e[r];const[u,f]=Q$(this);if(n===0)return[];if(n===1){if(hn(a)&&!this.isCollapsed()){const _=u>f?f:u,w=u>f?u:f,S=a.splitText(_,w),E=_===0?S[0]:S[1];return E!=null?[E]:[]}return[a]}const g=i.isBefore(o);if(hn(a)){const _=g?u:f;_===a.getTextContentSize()?e.shift():_!==0&&([,a]=a.splitText(_),e[0]=a)}if(hn(s)){const _=s.getTextContent().length,w=g?f:u;w===0?e.pop():w!==_&&([s]=s.splitText(w),e[r]=s)}return e}modify(e,n,r){if(yV(this,e,n,r))return;const i=e==="move",o=ns(),a=bf(Kh(o));if(!a)return;const s=o._blockCursorElement,u=o._rootElement,f=this.focus.getNode();if(u===null||s===null||!Rt(f)||f.isInline()||f.canBeEmpty()||W$(s,o,u),this.dirty){let g=hb(o,this.anchor.key),_=hb(o,this.focus.key);this.anchor.type==="text"&&(g=Mw(g)),this.focus.type==="text"&&(_=Mw(_)),g&&_&&QY(a,g,this.anchor.offset,_,this.focus.offset)}if((function(g,_,w,S){g.modify(_,w,S)})(a,e,n?"backward":"forward",r),a.rangeCount>0){const g=a.getRangeAt(0),_=this.anchor.getNode(),w=Gs(_)?_:wCe(_);if(this.applyDOMRange(g),this.dirty=!0,!i){const S=this.getNodes(),E=[];let A=!1;for(let R=0;R<S.length;R++){const $=S[R];q$($,w)?E.push($):A=!0}if(A&&E.length>0)if(n){const R=E[0];Rt(R)?R.selectStart():R.getParentOrThrow().selectStart()}else{const R=E[E.length-1];Rt(R)?R.selectEnd():R.getParentOrThrow().selectEnd()}a.anchorNode===g.startContainer&&a.anchorOffset===g.startOffset||(function(R){const $=R.focus,z=R.anchor,B=z.key,F=z.offset,U=z.type;z.set($.key,$.offset,$.type,!0),$.set(B,F,U,!0)})(this)}}r==="lineboundary"&&yV(this,e,n,r,"decorators")}forwardDeletion(e,n,r){if(!r&&(e.type==="element"&&Rt(n)&&e.offset===n.getChildrenSize()||e.type==="text"&&e.offset===n.getTextContentSize())){const i=n.getParent(),o=n.getNextSibling()||(i===null?null:i.getNextSibling());if(Rt(o)&&o.isShadowRoot())return!0}return!1}deleteCharacter(e){const n=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let i=r.getNode();if(this.forwardDeletion(r,i,e))return;const o=a8(om(r,e?"previous":"next"));if(o.getTextSlices().every((s=>s===null||s.distance===0))){let s={type:"initial"};for(const u of o.iterNodeCarets("shadowRoot"))if(Wh(u)){if(!u.origin.isInline()){if(u.origin.isShadowRoot()){if(s.type==="merge-block")break;if(Rt(o.anchor.origin)&&o.anchor.origin.isEmpty()){const f=Uu(u);fP(this,$0(f,f)),o.anchor.origin.remove()}return}s.type!=="merge-next-block"&&s.type!=="merge-block"||(s={block:s.block,caret:u,type:"merge-block"})}}else{if(s.type==="merge-block")break;if(Rw(u)){if(Rt(u.origin)){if(u.origin.isInline()){if(!u.origin.isParentOf(o.anchor.origin))break}else s={block:u.origin,type:"merge-next-block"};continue}if(_i(u.origin)){if(!u.origin.isIsolated())if(s.type==="merge-next-block"&&(u.origin.isKeyboardSelectable()||!u.origin.isInline())&&Rt(o.anchor.origin)&&o.anchor.origin.isEmpty()){o.anchor.origin.remove();const f=jN();f.add(u.origin.getKey()),rs(f)}else u.origin.remove();return}break}}if(s.type==="merge-block"){const{caret:u,block:f}=s;return fP(this,$0(!u.origin.isEmpty()&&f.isEmpty()?rk(Ks(f,u.direction)):o.anchor,u)),this.removeText()}}const a=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&r.offset===0&&hV(this,r.getNode()))return}else{const s=a.type==="text"?a.getNode():null;if(i=r.type==="text"?r.getNode():null,s!==null&&s.isSegmented()){const u=a.offset,f=s.getTextContentSize();if(s.is(i)||e&&u!==f||!e&&u!==0)return void dV(s,e,u)}else if(i!==null&&i.isSegmented()){const u=r.offset,f=i.getTextContentSize();if(i.is(s)||e&&u!==0||!e&&u!==f)return void dV(i,e,u)}(function(u,f){const g=u.anchor,_=u.focus,w=g.getNode(),S=_.getNode();if(w===S&&g.type==="text"&&_.type==="text"){const E=g.offset,A=_.offset,R=E<A,$=R?E:A,z=R?A:E,B=z-1;$!==B&&(function(F){return!(rK(F)||sCe(F))})(w.getTextContent().slice($,z))&&(f?_.set(_.key,B,_.type):g.set(g.key,B,g.type))}})(this,e)}}if(this.removeText(),e&&!n&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&Gs(r.getParent())&&r.getPreviousSibling()===null&&hV(this,r)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){const n=this.anchor,r=n.getNode();if(this.forwardDeletion(n,r,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function es(t){return t instanceof yR}function uV(t){const e=t.offset;if(t.type==="text")return e;const n=t.getNode();return e===n.getChildrenSize()?n.getTextContent().length:0}function Q$(t){const e=t.getStartEndPoints();if(e===null)return[0,0];const[n,r]=e;return n.type==="element"&&r.type==="element"&&n.key===r.key&&n.offset===r.offset?[0,0]:[uV(n),uV(r)]}function hV(t,e){for(let n=e;n;n=n.getParent()){if(Rt(n)){if(n.collapseAtStart(t))return!0;if(Ys(n))break}if(n.getPreviousSibling())break}return!1}const sCe=(()=>{try{const t=new RegExp("\\p{Emoji}","u"),e=t.test.bind(t);if(e("")&&e("#")&&e(""))return e}catch{}return()=>!1})();function dV(t,e,n){const r=t,i=r.getTextContent().split(/(?=\s)/g),o=i.length;let a=0,s=0;for(let f=0;f<o;f++){const g=f===o-1;if(s=a,a+=i[f].length,e&&a===n||a>n||g){i.splice(f,1),g&&(s=void 0);break}}const u=i.join("").trim();u===""?r.remove():(r.setTextContent(u),r.select(s,s))}function fV(t,e,n,r){let i,o=e;if(qo(t)){let a=!1;const s=t.childNodes,u=s.length,f=r._blockCursorElement;o===u&&(a=!0,o=u-1);let g=s[o],_=!1;if(g===f)g=s[o+1],_=!0;else if(f!==null){const w=f.parentNode;t===w&&e>Array.prototype.indexOf.call(w.children,f)&&o--}if(i=j1(g),hn(i))o=Yp(i,a?"next":"previous");else{let w=j1(t);if(w===null)return null;if(Rt(w)){const S=r.getElementByKey(w.getKey());S===null&&on(214),[w,o]=w.getDOMSlot(S).resolveChildIndex(w,S,t,e),Rt(w)||on(215),a&&o>=w.getChildrenSize()&&(o=Math.max(0,w.getChildrenSize()-1));let A=w.getChildAtIndex(o);if(Rt(A)&&(function(R,$,z){const B=R.getParent();return z===null||B===null||!B.canBeEmpty()||B!==z.getNode()})(A,0,n)){const R=a?A.getLastDescendant():A.getFirstDescendant();R===null?w=A:(A=R,w=Rt(A)?A:A.getParentOrThrow()),o=0}hn(A)?(i=A,w=null,o=Yp(A,a?"next":"previous")):A!==w&&a&&!_&&(Rt(w)||on(216),o=Math.min(w.getChildrenSize(),o+1))}else{const S=w.getIndexWithinParent();o=e===0&&_i(w)&&j1(t)===w?S:S+1,w=w.getParentOrThrow()}if(Rt(w))return rm(w.__key,o,"element")}}else i=j1(t);return hn(i)?rm(i.__key,Yp(i,o,"clamp"),"text"):null}function pV(t,e,n){const r=t.offset,i=t.getNode();if(r===0){const o=i.getPreviousSibling(),a=i.getParent();if(e){if((n||!e)&&o===null&&Rt(a)&&a.isInline()){const s=a.getPreviousSibling();hn(s)&&t.set(s.__key,s.getTextContent().length,"text")}}else Rt(o)&&!n&&o.isInline()?t.set(o.__key,o.getChildrenSize(),"element"):hn(o)&&t.set(o.__key,o.getTextContent().length,"text")}else if(r===i.getTextContent().length){const o=i.getNextSibling(),a=i.getParent();if(e&&Rt(o)&&o.isInline())t.set(o.__key,0,"element");else if((n||e)&&o===null&&Rt(a)&&a.isInline()&&!a.canInsertTextAfter()){const s=a.getNextSibling();hn(s)&&t.set(s.__key,0,"text")}}}function FY(t,e,n){if(t.type==="text"&&e.type==="text"){const r=t.isBefore(e),i=t.is(e);pV(t,r,i),pV(e,!r,i),i&&e.set(t.key,t.offset,t.type);const o=ns();if(o.isComposing()&&o._compositionKey!==t.key&&Ht(n)){const a=n.anchor,s=n.focus;t.set(a.key,a.offset,a.type,!0),e.set(s.key,s.offset,s.type,!0)}}}function jY(t,e,n,r,i,o){if(t===null||n===null||!tk(i,t,n))return null;const a=fV(t,e,Ht(o)?o.anchor:null,i);if(a===null)return null;const s=fV(n,r,Ht(o)?o.focus:null,i);if(s===null)return null;if(a.type==="element"&&s.type==="element"){const u=j1(t),f=j1(n);if(_i(u)&&_i(f))return null}return FY(a,s,o),[a,s]}function d5(t){return Rt(t)&&!t.isInline()}function VY(t,e,n,r,i,o){const a=X0(),s=new Ib(rm(t,e,i),rm(n,r,o),0,"");return s.dirty=!0,a._selection=s,s}function wO(){const t=rm("root",0,"element"),e=rm("root",0,"element");return new Ib(t,e,0,"")}function jN(){return new yR(new Set)}function VN(t,e,n,r){const i=n._window;if(i===null)return null;const o=r||i.event,a=o?o.type:void 0,s=a==="selectionchange",u=!T$&&(s||a==="beforeinput"||a==="compositionstart"||a==="compositionend"||a==="click"&&o&&o.detail===3||a==="drop"||a===void 0);let f,g,_,w;if(Ht(t)&&!u)return t.clone();if(e===null)return null;if(f=e.anchorNode,g=e.focusNode,_=e.anchorOffset,w=e.focusOffset,s&&Ht(t)&&!tk(n,f,g))return t.clone();const S=jY(f,_,g,w,n,t);if(S===null)return null;const[E,A]=S;return new Ib(E,A,Ht(t)?t.format:0,Ht(t)?t.style:"")}function sn(){return X0()._selection}function Db(){return ns()._editorState._selection}function f5(t,e,n,r=1){const i=t.anchor,o=t.focus,a=i.getNode(),s=o.getNode();if(!e.is(a)&&!e.is(s))return;const u=e.__key;if(t.isCollapsed()){const f=i.offset;if(n<=f&&r>0||n<f&&r<0){const g=Math.max(0,f+r);i.set(u,g,"element"),o.set(u,g,"element"),mV(t)}}else{const f=t.isBackward(),g=f?o:i,_=g.getNode(),w=f?i:o,S=w.getNode();if(e.is(_)){const E=g.offset;(n<=E&&r>0||n<E&&r<0)&&g.set(u,Math.max(0,E+r),"element")}if(e.is(S)){const E=w.offset;(n<=E&&r>0||n<E&&r<0)&&w.set(u,Math.max(0,E+r),"element")}}mV(t)}function mV(t){const e=t.anchor,n=e.offset,r=t.focus,i=r.offset,o=e.getNode(),a=r.getNode();if(t.isCollapsed()){if(!Rt(o))return;const s=o.getChildrenSize(),u=n>=s,f=u?o.getChildAtIndex(s-1):o.getChildAtIndex(n);if(hn(f)){let g=0;u&&(g=f.getTextContentSize()),e.set(f.__key,g,"text"),r.set(f.__key,g,"text")}}else{if(Rt(o)){const s=o.getChildrenSize(),u=n>=s,f=u?o.getChildAtIndex(s-1):o.getChildAtIndex(n);if(hn(f)){let g=0;u&&(g=f.getTextContentSize()),e.set(f.__key,g,"text")}}if(Rt(a)){const s=a.getChildrenSize(),u=i>=s,f=u?a.getChildAtIndex(s-1):a.getChildAtIndex(i);if(hn(f)){let g=0;u&&(g=f.getTextContentSize()),r.set(f.__key,g,"text")}}}}function p5(t,e,n,r,i){let o=null,a=0,s=null;r!==null?(o=r.__key,hn(r)?(a=r.getTextContentSize(),s="text"):Rt(r)&&(a=r.getChildrenSize(),s="element")):i!==null&&(o=i.__key,hn(i)?s="text":Rt(i)&&(s="element")),o!==null&&s!==null?t.set(o,a,s):(a=e.getIndexWithinParent(),a===-1&&(a=n.getChildrenSize()),t.set(n.__key,a,"element"))}function gV(t,e,n,r,i){t.type==="text"?t.set(n,t.offset+(e?0:i),"text"):t.offset>r.getIndexWithinParent()&&t.set(t.key,t.offset-1,"element")}function QY(t,e,n,r,i){try{t.setBaseAndExtent(e,n,r,i)}catch{}}function aCe(t,e,n,r,i,o,a){const s=r.anchorNode,u=r.focusNode,f=r.anchorOffset,g=r.focusOffset,_=document.activeElement;if(i.has(GY)&&_!==o||_!==null&&HN(_))return;if(!Ht(e))return void(t!==null&&tk(n,s,u)&&r.removeAllRanges());const w=e.anchor,S=e.focus,E=w.key,A=S.key,R=hb(n,E),$=hb(n,A),z=w.offset,B=S.offset,F=e.format,U=e.style,q=e.isCollapsed();let H=R,ne=$,ie=!1;if(w.type==="text"){H=Mw(R);const ye=w.getNode();ie=ye.getFormat()!==F||ye.getStyle()!==U}else Ht(t)&&t.anchor.type==="text"&&(ie=!0);var ce,xe,re,me,Te;if(S.type==="text"&&(ne=Mw($)),H!==null&&ne!==null&&(q&&(t===null||ie||Ht(t)&&(t.format!==F||t.style!==U))&&(ce=F,xe=U,re=z,me=E,Te=performance.now(),RY=[ce,xe,re,me,Te]),f!==z||g!==B||s!==H||u!==ne||r.type==="Range"&&q||(_!==null&&o.contains(_)||o.focus({preventScroll:!0}),w.type==="element"))){if(QY(r,H,z,ne,B),!i.has(fCe)&&e.isCollapsed()&&o!==null&&o===document.activeElement){const ye=Ht(e)&&e.anchor.type==="element"?H.childNodes[z]||null:r.rangeCount>0?r.getRangeAt(0):null;if(ye!==null){let _e;if(ye instanceof Text){const ke=document.createRange();ke.selectNode(ye),_e=ke.getBoundingClientRect()}else _e=ye.getBoundingClientRect();(function(ke,Ne,Qe){const Se=aK(Qe),Me=t8(Se);if(Se===null||Me===null)return;let{top:Xe,bottom:Ee}=Ne,ft=0,mt=0,ct=Qe;for(;ct!==null;){const st=ct===Se.body;if(st)ft=0,mt=Kh(ke).innerHeight;else{const At=ct.getBoundingClientRect();ft=At.top,mt=At.bottom}let bt=0;if(Xe<ft?bt=-(ft-Xe):Ee>mt&&(bt=Ee-mt),bt!==0)if(st)Me.scrollBy(0,bt);else{const At=ct.scrollTop;ct.scrollTop+=bt;const Tt=ct.scrollTop-At;Xe-=Tt,Ee-=Tt}if(st)break;ct=nk(ct)}})(n,_e,o)}}F$=!0}}function OO(t){let e=sn()||Db();e===null&&(e=zr().selectEnd()),e.insertNodes(t)}function F3(t){let e=t;t.isCollapsed()||e.removeText();const n=sn();Ht(n)&&(e=n),Ht(e)||on(161);const r=e.anchor;let i=r.getNode(),o=r.offset;for(;!Nh(i);){const a=i;if([i,o]=lCe(i,o),a.is(i))break}return o}function lCe(t,e){const n=t.getParent();if(!n){const i=mi();return zr().append(i),i.select(),[zr(),0]}if(hn(t)){const i=t.splitText(e);if(i.length===0)return[n,t.getIndexWithinParent()];const o=e===0?0:1;return[n,i[0].getIndexWithinParent()+o]}if(!Rt(t)||e===0)return[n,t.getIndexWithinParent()];const r=t.getChildAtIndex(e);if(r){const i=new Ib(rm(t.__key,e,"element"),rm(t.__key,e,"element"),0,""),o=t.insertNewAfter(i);o&&o.append(r,...r.getNextSiblings())}return[n,t.getIndexWithinParent()+1]}function yV(t,e,n,r,i="decorators-and-blocks"){if(e==="move"&&r==="character"&&!t.isCollapsed()){const[g,_]=n===t.isBackward()?[t.focus,t.anchor]:[t.anchor,t.focus];return _.set(g.key,g.offset,g.type),!0}const o=om(t.focus,n?"previous":"next"),a=r==="lineboundary",s=e==="move";let u=o,f=i==="decorators-and-blocks";if(!mK(u)){for(const g of u){f=!1;const{origin:_}=g;if(!_i(_)||_.isIsolated()||(u=g,!a||!_.isInline()))break}if(f)for(const g of a8(o).iterNodeCarets(e==="extend"?"shadowRoot":"root")){if(Wh(g))g.origin.isInline()||(u=g);else{if(Rt(g.origin))continue;_i(g.origin)&&!g.origin.isInline()&&(u=g)}break}}if(u===o)return!1;if(s&&!a&&_i(u.origin)&&u.origin.isKeyboardSelectable()){const g=jN();return g.add(u.origin.getKey()),rs(g),!0}return u=Uu(u),s&&mb(t.anchor,u),mb(t.focus,u),f||!a}let ka=null,Ea=null,nu=!1,j3=!1,uP=0;const vV={characterData:!0,childList:!0,subtree:!0};function JT(){return nu||ka!==null&&ka._readOnly}function el(){nu&&on(13)}function UY(){uP>99&&on(14)}function X0(){return ka===null&&on(195,ZY()),ka}function ns(){return Ea===null&&on(196,ZY()),Ea}function ZY(){let t=0;const e=new Set,n=xR.version;if(typeof window<"u")for(const i of document.querySelectorAll("[contenteditable]")){const o=OR(i);if(GN(o))t++;else if(o){let a=String(o.constructor.version||"<0.17.1");a===n&&(a+=" (separately built, likely a bundler configuration issue)"),e.add(a)}}let r=` Detected on the page: ${t} compatible editor(s) with version ${n}`;return e.size&&(r+=` and incompatible editors with versions ${Array.from(e).join(", ")}`),r}function cCe(){return Ea}function _V(t,e,n){const r=e.__type,i=YY(t,r);let o=n.get(r);o===void 0&&(o=Array.from(i.transforms),n.set(r,o));const a=o.length;for(let s=0;s<a&&(o[s](e),e.isAttached());s++);}function bV(t,e){return t!==void 0&&t.__key!==e&&t.isAttached()}function qY(t,e){if(!e)return;const n=t._updateTags;let r=e;Array.isArray(e)||(r=[e]);for(const i of r)n.add(i)}function uCe(t){return QN(t,ns()._nodes)}function QN(t,e){const n=t.type,r=e.get(n);r===void 0&&on(17,n);const i=r.klass;t.type!==i.getType()&&on(18,i.name);const o=i.importJSON(t),a=t.children;if(Rt(o)&&Array.isArray(a))for(let s=0;s<a.length;s++){const u=QN(a[s],e);o.append(u)}return o}function xV(t,e,n){const r=ka,i=nu,o=Ea;ka=e,nu=!0,Ea=t;try{return n()}finally{ka=r,nu=i,Ea=o}}function Ag(t,e){const n=t._pendingEditorState,r=t._rootElement,i=t._headless||r===null;if(n===null)return;const o=t._editorState,a=o._selection,s=n._selection,u=t._dirtyType!==sb,f=ka,g=nu,_=Ea,w=t._updating,S=t._observer;let E=null;if(t._pendingEditorState=null,t._editorState=n,!i&&u&&S!==null){Ea=t,ka=n,nu=!1,t._updating=!0;try{const q=t._dirtyType,H=t._dirtyElements,ne=t._dirtyLeaves;S.disconnect(),E=Q2e(o,n,t,q,H,ne)}catch(q){if(q instanceof Error&&t._onError(q),j3)throw q;return XY(t,null,r,n),xY(t),t._dirtyType=Aw,j3=!0,Ag(t,o),void(j3=!1)}finally{S.observe(r,vV),t._updating=w,ka=f,nu=g,Ea=_}}n._readOnly||(n._readOnly=!0);const A=t._dirtyLeaves,R=t._dirtyElements,$=t._normalizedNodes,z=t._updateTags,B=t._deferred;u&&(t._dirtyType=sb,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements=new Map,t._normalizedNodes=new Set,t._updateTags=new Set),(function(q,H){const ne=q._decorators;let ie=q._pendingDecorators||ne;const ce=H._nodeMap;let xe;for(xe in ie)ce.has(xe)||(ie===ne&&(ie=tK(q)),delete ie[xe])})(t,n);const F=i?null:bf(Kh(t));if(t._editable&&F!==null&&(u||s===null||s.dirty)&&r!==null&&!z.has(pCe)){Ea=t,ka=n;try{if(S!==null&&S.disconnect(),u||s===null||s.dirty){const q=t._blockCursorElement;q!==null&&W$(q,t,r),aCe(a,s,t,F,z,r)}(function(q,H,ne){let ie=q._blockCursorElement;if(Ht(ne)&&ne.isCollapsed()&&ne.anchor.type==="element"&&H.contains(document.activeElement)){const ce=ne.anchor,xe=ce.getNode(),re=ce.offset;let me=!1,Te=null;if(re===xe.getChildrenSize())Q3(xe.getChildAtIndex(re-1))&&(me=!0);else{const ye=xe.getChildAtIndex(re);if(ye!==null&&Q3(ye)){const _e=ye.getPreviousSibling();(_e===null||Q3(_e))&&(me=!0,Te=q.getElementByKey(ye.__key))}}if(me){const ye=q.getElementByKey(xe.__key);return ie===null&&(q._blockCursorElement=ie=(function(_e){const ke=_e.theme,Ne=document.createElement("div");Ne.contentEditable="false",Ne.setAttribute("data-lexical-cursor","true");let Qe=ke.blockCursor;if(Qe!==void 0){if(typeof Qe=="string"){const Se=gY(Qe);Qe=ke.blockCursor=Se}Qe!==void 0&&Ne.classList.add(...Qe)}return Ne})(q._config)),H.style.caretColor="transparent",void(Te===null?ye.appendChild(ie):ye.insertBefore(ie,Te))}}ie!==null&&W$(ie,q,H)})(t,r,s)}finally{S!==null&&S.observe(r,vV),Ea=_,ka=f}}E!==null&&(function(q,H,ne,ie,ce){const xe=Array.from(q._listeners.mutation),re=xe.length;for(let me=0;me<re;me++){const[Te,ye]=xe[me];for(const _e of ye){const ke=H.get(_e);ke!==void 0&&Te(ke,{dirtyLeaves:ie,prevEditorState:ce,updateTags:ne})}}})(t,E,z,A,o),Ht(s)||s===null||a!==null&&a.is(s)||t.dispatchCommand(HT,void 0);const U=t._pendingDecorators;U!==null&&(t._decorators=U,t._pendingDecorators=null,sC("decorator",t,!0,U)),(function(q,H,ne){const ie=TV(H),ce=TV(ne);ie!==ce&&sC("textcontent",q,!0,ce)})(t,e||o,n),sC("update",t,!0,{dirtyElements:R,dirtyLeaves:A,editorState:n,mutatedNodes:E,normalizedNodes:$,prevEditorState:e||o,tags:z}),(function(q,H){if(q._deferred=[],H.length!==0){const ne=q._updating;q._updating=!0;try{for(let ie=0;ie<H.length;ie++)H[ie]()}finally{q._updating=ne}}})(t,B),(function(q){const H=q._updates;if(H.length!==0){const ne=H.shift();if(ne){const[ie,ce]=ne;vR(q,ie,ce)}}})(t)}function sC(t,e,n,...r){const i=e._updating;e._updating=n;try{const o=Array.from(e._listeners[t]);for(let a=0;a<o.length;a++)o[a].apply(null,r)}finally{e._updating=i}}function wV(t,e){const n=t._updates;let r=e||!1;for(;n.length!==0;){const i=n.shift();if(i){const[o,a]=i,s=t._pendingEditorState;let u;a!==void 0&&(u=a.onUpdate,a.skipTransforms&&(r=!0),a.discrete&&(s===null&&on(191),s._flushSync=!0),u&&t._deferred.push(u),qY(t,a.tag)),s==null?vR(t,o,a):o()}}return r}function vR(t,e,n){const r=t._updateTags;let i,o=!1,a=!1;n!==void 0&&(i=n.onUpdate,qY(t,n.tag),o=n.skipTransforms||!1,a=n.discrete||!1),i&&t._deferred.push(i);const s=t._editorState;let u=t._pendingEditorState,f=!1;(u===null||u._readOnly)&&(u=t._pendingEditorState=WY(u||s),f=!0),u._flushSync=a;const g=ka,_=nu,w=Ea,S=t._updating;ka=u,nu=!1,t._updating=!0,Ea=t;const E=t._headless||t.getRootElement()===null;WN(null);try{f&&(E?s._selection!==null&&(u._selection=s._selection.clone()):u._selection=(function(z,B){const F=z.getEditorState()._selection,U=bf(Kh(z));return Ht(F)||F==null?VN(F,U,z,B):F.clone()})(t,n&&n.event||null));const R=t._compositionKey;e(),o=wV(t,o),(function(z,B){const F=B.getEditorState()._selection,U=z._selection;if(Ht(U)){const q=U.anchor,H=U.focus;let ne;if(q.type==="text"&&(ne=q.getNode(),ne.selectionTransform(F,U)),H.type==="text"){const ie=H.getNode();ne!==ie&&ie.selectionTransform(F,U)}}})(u,t),t._dirtyType!==sb&&(o?(function(z,B){const F=B._dirtyLeaves,U=z._nodeMap;for(const q of F){const H=U.get(q);hn(H)&&H.isAttached()&&H.isSimpleText()&&!H.isUnmergeable()&&Jj(H)}})(u,t):(function(z,B){const F=B._dirtyLeaves,U=B._dirtyElements,q=z._nodeMap,H=x0(),ne=new Map;let ie=F,ce=ie.size,xe=U,re=xe.size;for(;ce>0||re>0;){if(ce>0){B._dirtyLeaves=new Set;for(const me of ie){const Te=q.get(me);hn(Te)&&Te.isAttached()&&Te.isSimpleText()&&!Te.isUnmergeable()&&Jj(Te),Te!==void 0&&bV(Te,H)&&_V(B,Te,ne),F.add(me)}if(ie=B._dirtyLeaves,ce=ie.size,ce>0){uP++;continue}}B._dirtyLeaves=new Set,B._dirtyElements=new Map,xe.delete("root")&&xe.set("root",!0);for(const me of xe){const Te=me[0],ye=me[1];if(U.set(Te,ye),!ye)continue;const _e=q.get(Te);_e!==void 0&&bV(_e,H)&&_V(B,_e,ne)}ie=B._dirtyLeaves,ce=ie.size,xe=B._dirtyElements,re=xe.size,uP++}B._dirtyLeaves=F,B._dirtyElements=U})(u,t),wV(t),(function(z,B,F,U){const q=z._nodeMap,H=B._nodeMap,ne=[];for(const[ie]of U){const ce=H.get(ie);ce!==void 0&&(ce.isAttached()||(Rt(ce)&&vY(ce,ie,q,H,ne,U),q.has(ie)||U.delete(ie),ne.push(ie)))}for(const ie of ne)H.delete(ie);for(const ie of F){const ce=H.get(ie);ce===void 0||ce.isAttached()||(q.has(ie)||F.delete(ie),H.delete(ie))}})(s,u,t._dirtyLeaves,t._dirtyElements)),R!==t._compositionKey&&(u._flushSync=!0);const $=u._selection;if(Ht($)){const z=u._nodeMap,B=$.anchor.key,F=$.focus.key;z.get(B)!==void 0&&z.get(F)!==void 0||on(19)}else es($)&&$._nodes.size===0&&(u._selection=null)}catch(R){return R instanceof Error&&t._onError(R),t._pendingEditorState=s,t._dirtyType=Aw,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),void Ag(t)}finally{ka=g,nu=_,Ea=w,t._updating=S,uP=0}t._dirtyType!==sb||t._deferred.length>0||(function(R,$){const z=$.getEditorState()._selection,B=R._selection;if(B!==null){if(B.dirty||!B.is(z))return!0}else if(z!==null)return!0;return!1})(u,t)?u._flushSync?(u._flushSync=!1,Ag(t)):f&&yCe((()=>{Ag(t)})):(u._flushSync=!1,f&&(r.clear(),t._deferred=[],t._pendingEditorState=null))}function zu(t,e,n){Ea===t&&n===void 0?e():vR(t,e,n)}class aC{constructor(e,n,r){this.element=e,this.before=n||null,this.after=r||null}withBefore(e){return new aC(this.element,e,this.after)}withAfter(e){return new aC(this.element,this.before,e)}withElement(e){return this.element===e?this:new aC(e,this.before,this.after)}insertChild(e){const n=this.before||this.getManagedLineBreak();return n!==null&&n.parentElement!==this.element&&on(222),this.element.insertBefore(e,n),this}removeChild(e){return e.parentElement!==this.element&&on(223),this.element.removeChild(e),this}replaceChild(e,n){return n.parentElement!==this.element&&on(224),this.element.replaceChild(e,n),this}getFirstChild(){const e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){if(e===null)this.removeManagedLineBreak();else{const n=e==="decorator"&&(Ew||FC);this.insertManagedLineBreak(n)}}removeManagedLineBreak(){const e=this.getManagedLineBreak();if(e){const n=this.element,r=e.nodeName==="IMG"?e.nextSibling:null;r&&n.removeChild(r),n.removeChild(e),n.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){const n=this.getManagedLineBreak();if(n){if(e===(n.nodeName==="IMG"))return;this.removeManagedLineBreak()}const r=this.element,i=this.before,o=document.createElement("br");if(r.insertBefore(o,i),e){const a=document.createElement("img");a.setAttribute("data-lexical-linebreak","true"),a.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",a.alt="",r.insertBefore(a,o),r.__lexicalLineBreak=a}else r.__lexicalLineBreak=o}getFirstChildOffset(){let e=0;for(let n=this.after;n!==null;n=n.previousSibling)e++;return e}resolveChildIndex(e,n,r,i){if(r===this.element){const u=this.getFirstChildOffset();return[e,Math.min(u+e.getChildrenSize(),Math.max(u,i))]}const o=OV(n,r);o.push(i);const a=OV(n,this.element);let s=e.getIndexWithinParent();for(let u=0;u<a.length;u++){const f=o[u],g=a[u];if(f===void 0||f<g)break;if(f>g){s+=1;break}}return[e.getParentOrThrow(),s]}}function OV(t,e){const n=[];let r=e;for(;r!==t&&r!==null;r=r.parentNode){let i=0;for(let o=r.previousSibling;o!==null;o=o.previousSibling)i++;n.push(i)}return r!==t&&on(225),n.reverse()}class iu extends bO{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const e=this.getFormat();return M2e[e]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const e=[];let n=this.getFirstChild();for(;n!==null;)e.push(n),n=n.getNextSibling();return e}getChildrenKeys(){const e=[];let n=this.getFirstChild();for(;n!==null;)e.push(n.__key),n=n.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const e=ns()._dirtyElements;return e!==null&&e.has(this.__key)}isLastChild(){const e=this.getLatest(),n=this.getParentOrThrow().getLastChild();return n!==null&&n.is(e)}getAllTextNodes(){const e=[];let n=this.getFirstChild();for(;n!==null;){if(hn(n)&&e.push(n),Rt(n)){const r=n.getAllTextNodes();e.push(...r)}n=n.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;Rt(e);){const n=e.getFirstChild();if(n===null)break;e=n}return e}getLastDescendant(){let e=this.getLastChild();for(;Rt(e);){const n=e.getLastChild();if(n===null)break;e=n}return e}getDescendantByIndex(e){const n=this.getChildren(),r=n.length;if(e>=r){const o=n[r-1];return Rt(o)&&o.getLastDescendant()||o||null}const i=n[e];return Rt(i)&&i.getFirstDescendant()||i||null}getFirstChild(){const e=this.getLatest().__first;return e===null?null:Ii(e)}getFirstChildOrThrow(){const e=this.getFirstChild();return e===null&&on(45,this.__key),e}getLastChild(){const e=this.getLatest().__last;return e===null?null:Ii(e)}getLastChildOrThrow(){const e=this.getLastChild();return e===null&&on(96,this.__key),e}getChildAtIndex(e){const n=this.getChildrenSize();let r,i;if(e<n/2){for(r=this.getFirstChild(),i=0;r!==null&&i<=e;){if(i===e)return r;r=r.getNextSibling(),i++}return null}for(r=this.getLastChild(),i=n-1;r!==null&&i>=e;){if(i===e)return r;r=r.getPreviousSibling(),i--}return null}getTextContent(){let e="";const n=this.getChildren(),r=n.length;for(let i=0;i<r;i++){const o=n[i];e+=o.getTextContent(),Rt(o)&&i!==r-1&&!o.isInline()&&(e+=Zg)}return e}getTextContentSize(){let e=0;const n=this.getChildren(),r=n.length;for(let i=0;i<r;i++){const o=n[i];e+=o.getTextContentSize(),Rt(o)&&i!==r-1&&!o.isInline()&&(e+=Zg.length)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(e!==""){const n=Zj[e];return!!(this.getFormat()&n)}return!1}hasTextFormat(e){const n=ab[e];return!!(this.getTextFormat()&n)}getFormatFlags(e,n){return y5(this.getLatest().__textFormat,e,n)}getTextStyle(){return this.getLatest().__textStyle}select(e,n){el();const r=sn();let i=e,o=n;const a=this.getChildrenSize();if(!this.canBeEmpty()){if(e===0&&n===0){const u=this.getFirstChild();if(hn(u)||Rt(u))return u.select(0,0)}else if(!(e!==void 0&&e!==a||n!==void 0&&n!==a)){const u=this.getLastChild();if(hn(u)||Rt(u))return u.select()}}i===void 0&&(i=a),o===void 0&&(o=a);const s=this.__key;return Ht(r)?(r.anchor.set(s,i,"element"),r.focus.set(s,o,"element"),r.dirty=!0,r):VY(s,i,s,o,"element","element")}selectStart(){const e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){const e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){const e=this.getWritable();return this.getChildren().forEach((n=>n.remove())),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){const n=this.getWritable();return n.__dir=e,n}setFormat(e){return this.getWritable().__format=e!==""?Zj[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){const n=this.getWritable();return n.__textFormat=e,n}setTextStyle(e){const n=this.getWritable();return n.__textStyle=e,n}setIndent(e){return this.getWritable().__indent=e,this}splice(e,n,r){const i=r.length,o=this.getChildrenSize(),a=this.getWritable();e+n<=o||on(226,String(e),String(n),String(o));const s=a.__key,u=[],f=[],g=this.getChildAtIndex(e+n);let _=null,w=o-n+i;if(e!==0)if(e===o)_=this.getLastChild();else{const E=this.getChildAtIndex(e);E!==null&&(_=E.getPreviousSibling())}if(n>0){let E=_===null?this.getFirstChild():_.getNextSibling();for(let A=0;A<n;A++){E===null&&on(100);const R=E.getNextSibling(),$=E.__key;G_(E.getWritable()),f.push($),E=R}}let S=_;for(let E=0;E<i;E++){const A=r[E];S!==null&&A.is(S)&&(_=S=S.getPreviousSibling());const R=A.getWritable();R.__parent===s&&w--,G_(R);const $=A.__key;if(S===null)a.__first=$,R.__prev=null;else{const z=S.getWritable();z.__next=$,R.__prev=z.__key}A.__key===s&&on(76),R.__parent=s,u.push($),S=A}if(e+n===o)S!==null&&(S.getWritable().__next=null,a.__last=S.__key);else if(g!==null){const E=g.getWritable();if(S!==null){const A=S.getWritable();E.__prev=S.__key,A.__next=g.__key}else E.__prev=null}if(a.__size=w,f.length){const E=sn();if(Ht(E)){const A=new Set(f),R=new Set(u),{anchor:$,focus:z}=E;SV($,A,R)&&p5($,$.getNode(),this,_,g),SV(z,A,R)&&p5(z,z.getNode(),this,_,g),w!==0||this.canBeEmpty()||Ys(this)||this.remove()}}return a}getDOMSlot(e){return new aC(e)}exportDOM(e){const{element:n}=super.exportDOM(e);if(qo(n)){const r=this.getIndent();r>0&&(n.style.paddingInlineStart=40*r+"px");const i=this.getDirection();i&&(n.dir=i)}return{element:n}}exportJSON(){const e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},n=this.getTextFormat(),r=this.getTextStyle();return n!==0&&(e.textFormat=n),r!==""&&(e.textStyle=r),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,n){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,n,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,n){const r=this.getDOMSlot(e);let i=r.getFirstChild();for(let o=this.getFirstChild();o;o=o.getNextSibling()){const a=n.getElementByKey(o.getKey());a!==null&&(i==null?(r.insertChild(a),i=a):i!==a&&r.replaceChild(a,i),i=i.nextSibling)}}}function Rt(t){return t instanceof iu}function SV(t,e,n){let r=t.getNode();for(;r;){const i=r.__key;if(e.has(i)&&!n.has(i))return!0;r=r.getParent()}return!1}class ry extends bO{decorate(e,n){on(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function _i(t){return t instanceof ry}class ek extends iu{static getType(){return"root"}static clone(){return new ek}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){on(51)}getTextContent(){const e=this.__cachedText;return!JT()&&ns()._dirtyType!==sb||e===null?super.getTextContent():e}remove(){on(52)}replace(e){on(53)}insertBefore(e){on(54)}insertAfter(e){on(55)}updateDOM(e,n){return!1}splice(e,n,r){for(const i of r)Rt(i)||_i(i)||on(282);return super.splice(e,n,r)}static importJSON(e){return zr().updateFromJSON(e)}collapseAtStart(){return!0}}function Gs(t){return t instanceof ek}function WY(t){return new _R(new Map(t._nodeMap))}function UN(){return new _R(new Map([["root",new ek]]))}function HY(t){const e=t.exportJSON(),n=t.constructor;if(e.type!==n.getType()&&on(130,n.name),Rt(t)){const r=e.children;Array.isArray(r)||on(59,n.name);const i=t.getChildren();for(let o=0;o<i.length;o++){const a=HY(i[o]);r.push(a)}}return e}class _R{constructor(e,n){this._nodeMap=e,this._selection=n||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(e,n){return xV(n&&n.editor||null,this,e)}clone(e){const n=new _R(this._nodeMap,e===void 0?this._selection:e);return n._readOnly=!0,n}toJSON(){return xV(null,this,(()=>({root:HY(zr())})))}}const m5="historic",hCe="history-push",hP="history-merge",dCe="paste",GY="collaboration",fCe="skip-scroll-into-view",pCe="skip-dom-selection";class ZN extends iu{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class SO extends iu{static getType(){return"paragraph"}static clone(e){return new SO(e.__key)}createDOM(e){const n=document.createElement("p"),r=rw(e.theme,"paragraph");return r!==void 0&&n.classList.add(...r),n}updateDOM(e,n,r){return!1}static importDOM(){return{p:e=>({conversion:mCe,priority:0})}}exportDOM(e){const{element:n}=super.exportDOM(e);if(qo(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r)}return{element:n}}static importJSON(e){return mi().updateFromJSON(e)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(e,n){const r=mi();r.setTextFormat(e.format),r.setTextStyle(e.style);const i=this.getDirection();return r.setDirection(i),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,n),r}collapseAtStart(){const e=this.getChildren();if(e.length===0||hn(e[0])&&e[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function mCe(t){const e=mi();return t.style&&(e.setFormat(t.style.textAlign),r8(t,e)),{node:e}}function mi(){return nh(new SO)}function bR(t){return t instanceof SO}const Ar=0,mo=1,g5=3,eh=4;function XY(t,e,n,r){const i=t._keyToDOMMap;i.clear(),t._editorState=UN(),t._pendingEditorState=r,t._compositionKey=null,t._dirtyType=sb,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),t._normalizedNodes=new Set,t._updateTags=new Set,t._updates=[],t._blockCursorElement=null;const o=t._observer;o!==null&&(o.disconnect(),t._observer=null),e!==null&&(e.textContent=""),n!==null&&(n.textContent="",i.set("root",n))}function qN(t){const e=t||{},n=cCe(),r=e.theme||{},i=t===void 0?n:e.parentEditor||null,o=e.disableEvents||!1,a=UN(),s=e.namespace||(i!==null?i._config.namespace:iK()),u=e.editorState,f=[ek,fm,YT,KT,SO,ZN,...e.nodes||[]],{onError:g,html:_}=e,w=e.editable===void 0||e.editable;let S;if(t===void 0&&n!==null)S=n._nodes;else{S=new Map;for(let A=0;A<f.length;A++){let R=f[A],$=null,z=null;if(typeof R!="function"){const H=R;R=H.replace,$=H.with,z=H.withKlass||null}const{ownNodeConfig:B}=kR(R),F=R.getType(),U=R.transform(),q=new Set;B&&B.$transform&&q.add(B.$transform),U!==null&&q.add(U),S.set(F,{exportDOM:_&&_.export?_.export.get(R):void 0,klass:R,replace:$,replaceWithKlass:z,sharedNodeState:k$(f[A]),transforms:q})}}const E=new xR(a,i,S,{disableEvents:o,namespace:s,theme:r},g||console.error,(function(A,R){const $=new Map,z=new Set,B=F=>{Object.keys(F).forEach((U=>{let q=$.get(U);q===void 0&&(q=[],$.set(U,q)),q.push(F[U])}))};return A.forEach((F=>{const U=F.klass.importDOM;if(U==null||z.has(U))return;z.add(U);const q=U.call(F.klass);q!==null&&B(q)})),R&&B(R),$})(S,_?_.import:void 0),w,t);return u!==void 0&&(E._pendingEditorState=u,E._dirtyType=Aw),E}class xR{constructor(e,n,r,i,o,a,s,u){this._createEditorArgs=u,this._parentEditor=n,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=sb,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=iK(),this._onError=o,this._htmlConversions=a,this._editable=s,this._headless=n!==null&&n._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(e){const n=this._listeners.update;return n.add(e),()=>{n.delete(e)}}registerEditableListener(e){const n=this._listeners.editable;return n.add(e),()=>{n.delete(e)}}registerDecoratorListener(e){const n=this._listeners.decorator;return n.add(e),()=>{n.delete(e)}}registerTextContentListener(e){const n=this._listeners.textcontent;return n.add(e),()=>{n.delete(e)}}registerRootListener(e){const n=this._listeners.root;return e(this._rootElement,null),n.add(e),()=>{e(null,this._rootElement),n.delete(e)}}registerCommand(e,n,r){r===void 0&&on(35);const i=this._commands;i.has(e)||i.set(e,[new Set,new Set,new Set,new Set,new Set]);const o=i.get(e);o===void 0&&on(36,String(e));const a=o[r];return a.add(n),()=>{a.delete(n),o.every((s=>s.size===0))&&i.delete(e)}}registerMutationListener(e,n,r){const i=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,o=this._listeners.mutation;let a=o.get(n);a===void 0&&(a=new Set,o.set(n,a)),a.add(i);const s=r&&r.skipInitialization;return s!==void 0&&s||this.initializeMutationListener(n,i),()=>{a.delete(i),a.size===0&&o.delete(n)}}getRegisteredNode(e){const n=this._nodes.get(e.getType());return n===void 0&&on(37,e.name),n}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,n){const r=this._editorState,i=IV(r).get(n.getType());if(!i)return;const o=new Map;for(const a of i.keys())o.set(a,"created");o.size>0&&e(o,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,n){const r=this.getRegisteredNode(e);return r.transforms.add(n),r}registerNodeTransform(e,n){const r=this.registerNodeTransformToKlass(e,n),i=[r],o=r.replaceWithKlass;if(o!=null){const a=this.registerNodeTransformToKlass(o,n);i.push(a)}return(function(a,s){const u=IV(a.getEditorState()),f=[];for(const g of s){const _=u.get(g);_&&f.push(_)}f.length!==0&&a.update((()=>{for(const g of f)for(const _ of g.keys()){const w=Ii(_);w&&w.markDirty()}}),a._pendingEditorState===null?{tag:hP}:void 0)})(this,i.map((a=>a.klass.getType()))),()=>{i.forEach((a=>a.transforms.delete(n)))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,n){return Rn(this,e,n)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const n=this._rootElement;if(e!==n){const r=rw(this._config.theme,"root"),i=this._pendingEditorState||this._editorState;if(this._rootElement=e,XY(this,n,e,i),n!==null&&(this._config.disableEvents||K2e(n),r!=null&&n.classList.remove(...r)),e!==null){const o=t8(e),a=e.style;a.userSelect="text",a.whiteSpace="pre-wrap",a.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=o,this._dirtyType=Aw,xY(this),this._updateTags.add(hP),Ag(this),this._config.disableEvents||(function(s,u){const f=s.ownerDocument,g=h5.get(f);(g===void 0||g<1)&&f.addEventListener("selectionchange",zY),h5.set(f,(g||0)+1),s.__lexicalEditor=u;const _=$Y(s);for(let w=0;w<B$.length;w++){const[S,E]=B$[w],A=typeof E=="function"?R=>{oV(R)||(iV(R),(u.isEditable()||S==="click")&&E(R,u))}:R=>{if(oV(R))return;iV(R);const $=u.isEditable();switch(S){case"cut":return $&&Rn(u,BN,R);case"copy":return Rn(u,fR,R);case"paste":return $&&Rn(u,GT,R);case"dragstart":return $&&Rn(u,dR,R);case"dragover":return $&&Rn(u,NN,R);case"dragend":return $&&Rn(u,H2e,R);case"focus":return $&&Rn(u,pR,R);case"blur":return $&&Rn(u,mR,R);case"drop":return $&&Rn(u,zN,R)}};s.addEventListener(S,A),_.push((()=>{s.removeEventListener(S,A)}))}})(e,this),r!=null&&e.classList.add(...r)}else this._window=null,this._updateTags.add(hP),Ag(this);sC("root",this,!1,e,n)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,n){e.isEmpty()&&on(38);let r=e;r._readOnly&&(r=WY(e),r._selection=e._selection?e._selection.clone():null),bY(this);const i=this._pendingEditorState,o=this._updateTags,a=n!==void 0?n.tag:null;i===null||i.isEmpty()||(a!=null&&o.add(a),Ag(this)),this._pendingEditorState=r,this._dirtyType=Aw,this._dirtyElements.set("root",!1),this._compositionKey=null,a!=null&&o.add(a),this._updating||Ag(this)}parseEditorState(e,n){return(function(r,i,o){const a=UN(),s=ka,u=nu,f=Ea,g=i._dirtyElements,_=i._dirtyLeaves,w=i._cloneNotNeeded,S=i._dirtyType;i._dirtyElements=new Map,i._dirtyLeaves=new Set,i._cloneNotNeeded=new Set,i._dirtyType=0,ka=a,nu=!1,Ea=i,WN(null);try{const E=i._nodes;QN(r.root,E),o&&o(),a._readOnly=!0}catch(E){E instanceof Error&&i._onError(E)}finally{i._dirtyElements=g,i._dirtyLeaves=_,i._cloneNotNeeded=w,i._dirtyType=S,ka=s,nu=u,Ea=f}return a})(typeof e=="string"?JSON.parse(e):e,this,n)}read(e){return Ag(this),this.getEditorState().read(e,{editor:this})}update(e,n){(function(r,i,o){r._updating?r._updates.push([i,o]):vR(r,i,o)})(this,e,n)}focus(e,n={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),zu(this,(()=>{const i=sn(),o=zr();i!==null?i.dirty||rs(i.clone()):o.getChildrenSize()!==0&&(n.defaultSelection==="rootStart"?o.selectStart():o.selectEnd()),lK("focus"),xCe((()=>{r.removeAttribute("autocapitalize"),e&&e()}))})),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;e!==null&&e.blur();const n=bf(this._window);n!==null&&n.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,sC("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}xR.version="0.35.0+prod.esm";let U$=null;function WN(t){U$=t}let gCe=1;function YY(t,e){const n=wR(t,e);return n===void 0&&on(30,e),n}function wR(t,e){return t._nodes.get(e)}const yCe=typeof queueMicrotask=="function"?queueMicrotask:t=>{Promise.resolve().then(t)};function CV(t){return _i(im(t))}function HN(t){const e=document.activeElement;if(!qo(e))return!1;const n=e.nodeName;return _i(im(t))&&(n==="INPUT"||n==="TEXTAREA"||e.contentEditable==="true"&&OR(e)==null)}function tk(t,e,n){const r=t.getRootElement();try{return r!==null&&r.contains(e)&&r.contains(n)&&e!==null&&!HN(e)&&XN(e)===t}catch{return!1}}function GN(t){return t instanceof xR}function XN(t){let e=t;for(;e!=null;){const n=OR(e);if(GN(n))return n;e=nk(e)}return null}function OR(t){return t?t.__lexicalEditor:null}function H_(t){return gR(t)||t.isToken()}function Cg(t){return H_(t)||t.isSegmented()}function iy(t){return CO(t)&&t.nodeType===w2e}function vCe(t){return CO(t)&&t.nodeType===O2e}function Mw(t){let e=t;for(;e!=null;){if(iy(e))return e;e=e.firstChild}return null}function y5(t,e,n){const r=ab[e];if(n!==null&&(t&r)==(n&r))return t;let i=t^r;return e==="subscript"?i&=-65:e==="superscript"?i&=-33:e==="lowercase"?(i&=-513,i&=-1025):e==="uppercase"?(i&=-257,i&=-1025):e==="capitalize"&&(i&=-257,i&=-513),i}function KY(t){return hn(t)||pf(t)||_i(t)}function JY(t,e){const n=(function(){const a=U$;return U$=null,a})();if((e=e||n&&n.__key)!=null)return void(t.__key=e);el(),UY();const r=ns(),i=X0(),o=""+gCe++;i._nodeMap.set(o,t),Rt(t)?r._dirtyElements.set(o,!0):r._dirtyLeaves.add(o),r._cloneNotNeeded.add(o),r._dirtyType=yY,t.__key=o}function G_(t){const e=t.getParent();if(e!==null){const n=t.getWritable(),r=e.getWritable(),i=t.getPreviousSibling(),o=t.getNextSibling(),a=o!==null?o.__key:null,s=i!==null?i.__key:null,u=i!==null?i.getWritable():null,f=o!==null?o.getWritable():null;i===null&&(r.__first=a),o===null&&(r.__last=s),u!==null&&(u.__next=a),f!==null&&(f.__prev=s),n.__prev=null,n.__next=null,n.__parent=null,r.__size--}}function v5(t){UY();const e=t.getLatest(),n=e.__parent,r=X0(),i=ns(),o=r._nodeMap,a=i._dirtyElements;n!==null&&(function(u,f,g){let _=u;for(;_!==null;){if(g.has(_))return;const w=f.get(_);if(w===void 0)break;g.set(_,!1),_=w.__parent}})(n,o,a);const s=e.__key;i._dirtyType=yY,Rt(t)?a.set(s,!0):i._dirtyLeaves.add(s)}function tl(t){el();const e=ns(),n=e._compositionKey;if(t!==n){if(e._compositionKey=t,n!==null){const r=Ii(n);r!==null&&r.getWritable()}if(t!==null){const r=Ii(t);r!==null&&r.getWritable()}}}function x0(){return JT()?null:ns()._compositionKey}function Ii(t,e){const n=(e||X0())._nodeMap.get(t);return n===void 0?null:n}function eK(t,e){const n=SR(t,ns());return n!==void 0?Ii(n,e):null}function SR(t,e){return t[`__lexicalKey_${e._key}`]}function im(t,e){let n=t;for(;n!=null;){const r=eK(n,e);if(r!==null)return r;n=nk(n)}return null}function tK(t){const e=t._decorators,n=Object.assign({},e);return t._pendingDecorators=n,n}function TV(t){return t.read((()=>zr().getTextContent()))}function zr(){return nK(X0())}function nK(t){return t._nodeMap.get("root")}function rs(t){el();const e=X0();t!==null&&(t.dirty=!0,t.setCachedNodes(null)),e._selection=t}function j1(t){const e=ns(),n=(function(r,i){let o=r;for(;o!=null;){const a=SR(o,i);if(a!==void 0)return a;o=nk(o)}return null})(t,e);return n===null?t===e.getRootElement()?Ii("root"):null:Ii(n)}function rK(t){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(t)}function YN(t){const e=[];let n=t;for(;n!==null;)e.push(n),n=n._parentEditor;return e}function iK(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function oK(t){return iy(t)?t.nodeValue:null}function KN(t,e,n){const r=bf(Kh(e));if(r===null)return;const i=r.anchorNode;let{anchorOffset:o,focusOffset:a}=r;if(i!==null){let s=oK(i);const u=im(i);if(s!==null&&hn(u)){if(s===iR&&n){const f=n.length;s=n,o=f,a=f}s!==null&&JN(u,s,o,a,t)}}}function JN(t,e,n,r,i){let o=t;if(o.isAttached()&&(i||!o.isDirty())){const a=o.isComposing();let s=e;(a||i)&&e[e.length-1]===iR&&(s=e.slice(0,-1));const u=o.getTextContent();if(i||s!==u){if(s===""){if(tl(null),FC||Ew||r5)o.remove();else{const A=ns();setTimeout((()=>{A.update((()=>{o.isAttached()&&o.remove()}))}),20)}return}const f=o.getParent(),g=Db(),_=o.getTextContentSize(),w=x0(),S=o.getKey();if(o.isToken()||w!==null&&S===w&&!a||Ht(g)&&(f!==null&&!f.canInsertTextBefore()&&g.anchor.offset===0||g.anchor.key===t.__key&&g.anchor.offset===0&&!o.canInsertTextBefore()&&!a||g.focus.key===t.__key&&g.focus.offset===_&&!o.canInsertTextAfter()&&!a))return void o.markDirty();const E=sn();if(!Ht(E)||n===null||r===null)return void kV(o,s,E);if(E.setTextNodeRange(o,n,o,r),o.isSegmented()){const A=Yi(o.getTextContent());o.replace(A),o=A}kV(o,s,E)}}}function kV(t,e,n){if(t.setTextContent(e),Ht(n)){const r=t.getKey();for(const i of["anchor","focus"]){const o=n[i];o.type==="text"&&o.key===r&&(o.offset=Yp(t,o.offset,"clamp"))}}}function eA(t,e,n){const r=e[n]||!1;return r==="any"||r===t[n]}function _Ce(t,e){return eA(t,e,"altKey")&&eA(t,e,"ctrlKey")&&eA(t,e,"shiftKey")&&eA(t,e,"metaKey")}function Qi(t,e,n){return _Ce(t,n)&&t.key.toLowerCase()===e.toLowerCase()}const wg={ctrlKey:!Dp,metaKey:Dp},EV={altKey:Dp,ctrlKey:!Dp};function AV(t){return t.key==="Backspace"}function PV(t){return Qi(t,"a",wg)}function bCe(t){const e=zr();if(Ht(t)){const n=t.anchor,r=t.focus,i=n.getNode().getTopLevelElementOrThrow().getParentOrThrow();return n.set(i.getKey(),0,"element"),r.set(i.getKey(),i.getChildrenSize(),"element"),lb(t),t}{const n=e.select(0,e.getChildrenSize());return rs(lb(n)),n}}function rw(t,e){t.__lexicalClassNameCache===void 0&&(t.__lexicalClassNameCache={});const n=t.__lexicalClassNameCache,r=n[e];if(r!==void 0)return r;const i=t[e];if(typeof i=="string"){const o=gY(i);return n[e]=o,o}return i}function e8(t,e,n,r,i){if(n.size===0)return;const o=r.__type,a=r.__key,s=e.get(o);s===void 0&&on(33,o);const u=s.klass;let f=t.get(u);f===void 0&&(f=new Map,t.set(u,f));const g=f.get(a),_=g==="destroyed"&&i==="created";(g===void 0||_)&&f.set(a,_?"updated":i)}function MV(t,e,n){const r=t.getParent();let i=n,o=t;return r!==null&&(e&&n===0?(i=o.getIndexWithinParent(),o=r):e||n!==o.getChildrenSize()||(i=o.getIndexWithinParent()+1,o=r)),o.getChildAtIndex(e?i-1:i)}function Z$(t,e){const n=t.offset;if(t.type==="element")return MV(t.getNode(),e,n);{const r=t.getNode();if(e&&n===0||!e&&n===r.getTextContentSize()){const i=e?r.getPreviousSibling():r.getNextSibling();return i===null?MV(r.getParentOrThrow(),e,r.getIndexWithinParent()+(e?0:1)):i}}return null}function sK(t){const e=Kh(t).event,n=e&&e.inputType;return n==="insertFromPaste"||n==="insertFromPasteAsQuotation"}function Rn(t,e,n){return(function(r,i,o){const a=YN(r);for(let s=4;s>=0;s--)for(let u=0;u<a.length;u++){const f=a[u],g=f._commands.get(i);if(g!==void 0){const _=g[s];if(_!==void 0){const w=Array.from(_),S=w.length;let E=!1;if(zu(f,(()=>{for(let A=0;A<S;A++)if(w[A](o,r))return void(E=!0)})),E)return E}}}return!1})(t,e,n)}function CR(t){return!Gs(t)&&!t.isLastChild()&&!t.isInline()}function hb(t,e){const n=t._keyToDOMMap.get(e);return n===void 0&&on(75,e),n}function nk(t){const e=t.assignedSlot||t.parentElement;return H$(e)?e.host:e}function aK(t){return vCe(t)?t:qo(t)?t.ownerDocument:null}function lK(t){el(),ns()._updateTags.add(t)}function xCe(t){el(),ns()._deferred.push(t)}function q$(t,e){let n=t.getParent();for(;n!==null;){if(n.is(e))return!0;n=n.getParent()}return!1}function t8(t){const e=aK(t);return e?e.defaultView:null}function Kh(t){const e=t._window;return e===null&&on(78),e}function wCe(t){let e=t.getParentOrThrow();for(;e!==null;){if(Ys(e))return e;e=e.getParentOrThrow()}return e}function Ys(t){return Gs(t)||Rt(t)&&t.isShadowRoot()}function OCe(t){const e=t.constructor.clone(t);return JY(e,null),e.afterCloneFrom(t),e}function nh(t){const e=ns(),n=t.getType(),r=wR(e,n);r===void 0&&on(200,t.constructor.name,n);const{replace:i,replaceWithKlass:o}=r;if(i!==null){const a=i(t),s=a.constructor;return o!==null?a instanceof o||on(201,o.name,o.getType(),s.name,s.getType(),t.constructor.name,n):a instanceof t.constructor&&s!==t.constructor||on(202,s.name,s.getType(),t.constructor.name,n),a.__key===t.__key&&on(203,t.constructor.name,n,s.name,s.getType()),a}return t}function V3(t,e){!Gs(t.getParent())||Rt(e)||_i(e)||on(99)}function SCe(t){const e=Ii(t);return e===null&&on(63,t),e}function Q3(t){return(_i(t)||Rt(t)&&!t.canBeEmpty())&&!t.isInline()}function W$(t,e,n){n.style.removeProperty("caret-color"),e._blockCursorElement=null;const r=t.parentElement;r!==null&&r.removeChild(t)}function bf(t){return Tf?(t||window).getSelection():null}function CCe(t){const e=t8(t);return e?e.getSelection():null}function cK(t){return qo(t)&&t.tagName==="A"}function qo(t){return CO(t)&&t.nodeType===x2e}function CO(t){return typeof t=="object"&&t!==null&&"nodeType"in t&&typeof t.nodeType=="number"}function H$(t){return CO(t)&&t.nodeType===S2e}function G$(t){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return t.nodeName.match(e)!==null}function _5(t){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return t.nodeName.match(e)!==null}function Nh(t){if(_i(t)&&!t.isInline())return!0;if(!Rt(t)||Ys(t))return!1;const e=t.getFirstChild(),n=e===null||pf(e)||hn(e)||e.isInline();return!t.isInline()&&t.canBeEmpty()!==!1&&n}function U3(t,e){let n=t;for(;n!==null&&n.getParent()!==null&&!e(n);)n=n.getParentOrThrow();return e(n)?n:null}function TR(){return ns()}const RV=new WeakMap,TCe=new Map;function IV(t){if(!t._readOnly&&t.isEmpty())return TCe;t._readOnly||on(192);let e=RV.get(t);return e||(e=(function(n){const r=new Map;for(const[i,o]of n._nodeMap){const a=o.__type;let s=r.get(a);s||(s=new Map,r.set(a,s)),s.set(i,o)}return r})(t),RV.set(t,e)),e}function n8(t){const e=t.constructor.clone(t);return e.afterCloneFrom(t),e}function r8(t,e){const n=parseInt(t.style.paddingInlineStart,10)||0,r=Math.round(n/40);e.setIndent(r)}function kCe(t){return t.__lexicalUnmanaged===!0}function f2(t,e){return(function(n,r){return Object.prototype.hasOwnProperty.call(n,r)})(t,e)&&t[e]!==bO[e]}function kR(t){const e=qj in t.prototype?t.prototype[qj]():void 0,n=(function(a){return a===ry||a===iu||a===bO})(t),r=!n&&f2(t,"getType")?t.getType():void 0;let i,o=r;if(e)if(r)i=e[r];else for(const[a,s]of Object.entries(e))o=a,i=s;if(!n&&o&&(f2(t,"getType")||(t.getType=()=>o),f2(t,"clone")||(t.clone=a=>(WN(a),new t)),f2(t,"importJSON")||(t.importJSON=i&&i.$importJSON||(a=>new t().updateFromJSON(a))),!f2(t,"importDOM")&&i)){const{importDOM:a}=i;a&&(t.importDOM=()=>a)}return{ownNodeConfig:i,ownNodeType:o}}function ECe(t){const e=TR();return el(),new(e.resolveRegisteredNodeAfterReplacements(e.getRegisteredNode(t))).klass}const ACe={next:"previous",previous:"next"};class i8{constructor(e){this.origin=e}[Symbol.iterator](){return hK({hasNext:Rw,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return Ks(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return Ks(this.origin,this.direction)}remove(){const e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,n){const r=this.getNodeAtCaret();return e.is(this.origin)||e.is(r)||(r===null?this.insert(e):r.replace(e,n)),this}splice(e,n,r="next"){const i=r===this.direction?n:Array.from(n).reverse();let o=this;const a=this.getParentAtCaret(),s=new Map;for(let u=o.getAdjacentCaret();u!==null&&s.size<e;u=u.getAdjacentCaret()){const f=u.origin.getWritable();s.set(f.getKey(),f)}for(const u of i){if(s.size>0){const f=o.getNodeAtCaret();if(f){if(s.delete(f.getKey()),s.delete(u.getKey()),!(f.is(u)||o.origin.is(u))){const g=u.getParent();g&&g.is(a)&&u.remove(),f.replace(u)}}else f===null&&on(263,Array.from(s).join(" "))}else o.insert(u);o=Ks(u,this.direction)}for(const u of s.values())u.remove();return this}}class qC extends i8{type="child";getLatest(){const e=this.origin.getLatest();return e===this.origin?this:Jh(e,this.direction)}getParentCaret(e="root"){return Ks(o8(this.getParentAtCaret(),e),this.direction)}getFlipped(){const e=Lb(this.direction);return Ks(this.getNodeAtCaret(),e)||Jh(this.origin,e)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(e){return e instanceof qC&&this.direction===e.direction&&this.origin.is(e.origin)}isSamePointCaret(e){return this.isSameNodeCaret(e)}}const PCe={root:Gs,shadowRoot:Ys};function Lb(t){return ACe[t]}function o8(t,e="root"){return PCe[e](t)?null:t}class db extends i8{type="sibling";getLatest(){const e=this.origin.getLatest();return e===this.origin?this:Ks(e,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return Rt(this.origin)?Jh(this.origin,this.direction):null}getParentCaret(e="root"){return Ks(o8(this.getParentAtCaret(),e),this.direction)}getFlipped(){const e=Lb(this.direction);return Ks(this.getNodeAtCaret(),e)||Jh(this.origin.getParentOrThrow(),e)}isSamePointCaret(e){return e instanceof db&&this.direction===e.direction&&this.origin.is(e.origin)}isSameNodeCaret(e){return(e instanceof db||e instanceof fb)&&this.direction===e.direction&&this.origin.is(e.origin)}}class fb extends i8{type="text";constructor(e,n){super(e),this.offset=n}getLatest(){const e=this.origin.getLatest();return e===this.origin?this:pb(e,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(e="root"){return Ks(o8(this.getParentAtCaret(),e),this.direction)}getFlipped(){return pb(this.origin,Lb(this.direction),this.offset)}isSamePointCaret(e){return e instanceof fb&&this.direction===e.direction&&this.origin.is(e.origin)&&this.offset===e.offset}isSameNodeCaret(e){return(e instanceof db||e instanceof fb)&&this.direction===e.direction&&this.origin.is(e.origin)}getSiblingCaret(){return Ks(this.origin,this.direction)}}function Xp(t){return t instanceof fb}function Rw(t){return t instanceof db}function Wh(t){return t instanceof qC}const MCe={next:class extends fb{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends fb{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},RCe={next:class extends db{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends db{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},ICe={next:class extends qC{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(t){return this.origin.splice(0,0,[t]),this}},previous:class extends qC{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(t){return this.origin.splice(this.origin.getChildrenSize(),0,[t]),this}}};function Ks(t,e){return t?new RCe[e](t):null}function pb(t,e,n){return t?new MCe[e](t,Yp(t,n)):null}function Yp(t,e,n="error"){const r=t.getTextContentSize();let i=e==="next"?r:e==="previous"?0:e;return(i<0||i>r)&&(n!=="clamp"&&(function(o,...a){const s=new URL("https://lexical.dev/docs/error"),u=new URLSearchParams;u.append("code",o);for(const f of a)u.append("v",f);s.search=u.toString(),console.warn(`Minified Lexical warning #${o}; visit ${s.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(284,String(e),String(r),t.getKey()),i=i<0?0:r),i}function DV(t,e){return new LCe(t,e)}function Jh(t,e){return Rt(t)?new ICe[e](t):null}function DCe(t){return t&&t.getChildCaret()||t}function ER(t){return t&&DCe(t.getAdjacentCaret())}class s8{type="node-caret-range";constructor(e,n,r){this.anchor=e,this.focus=n,this.direction=r}getLatest(){const e=this.anchor.getLatest(),n=this.focus.getLatest();return e===this.anchor&&n===this.focus?this:new s8(e,n,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const e=i=>{const o=this[i].getLatest();return Xp(o)?(function(a,s){const{direction:u,origin:f}=a,g=Yp(f,s==="focus"?Lb(u):u);return DV(a,g-a.offset)})(o,i):null},n=e("anchor"),r=e("focus");if(n&&r){const{caret:i}=n,{caret:o}=r;if(i.isSameNodeCaret(o))return[DV(i,o.offset-i.offset),null]}return[n,r]}iterNodeCarets(e="root"){const n=Xp(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),i=Xp(r),o=a=>a.isSameNodeCaret(r)?null:ER(a)||a.getParentCaret(e);return hK({hasNext:a=>a!==null&&!(i&&r.isSameNodeCaret(a)),initial:n.isSameNodeCaret(r)?null:o(n),map:a=>a,step:o})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class LCe{type="slice";constructor(e,n){this.caret=e,this.distance=n}getSliceIndices(){const{distance:e,caret:{offset:n}}=this,r=n+e;return r<n?[r,n]:[n,r]}getTextContent(){const[e,n]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,n)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:e,direction:n}}=this,[r,i]=this.getSliceIndices(),o=e.getTextContent();return pb(e.setTextContent(o.slice(0,r)+o.slice(i)),n,r)}}function a8(t){return $0(t,Ks(zr(),t.direction))}function uK(t){return $0(t,t)}function $0(t,e){return t.direction!==e.direction&&on(265),new s8(t,e,t.direction)}function hK(t){const{initial:e,hasNext:n,step:r,map:i}=t;let o=e;return{[Symbol.iterator](){return this},next(){if(!n(o))return{done:!0,value:void 0};const a={done:!1,value:i(o)};return o=r(o),a}}}function dK(t,e){const n=dP(t.origin,e.origin);switch(n===null&&on(275,t.origin.getKey(),e.origin.getKey()),n.type){case"same":{const r=t.type==="text",i=e.type==="text";return r&&i?(function(o,a){return Math.sign(o-a)})(t.offset,e.offset):t.type===e.type?0:r?-1:i?1:t.type==="child"?-1:1}case"ancestor":return t.type==="child"?-1:1;case"descendant":return e.type==="child"?1:-1;case"branch":return fK(n)}}function fK(t){const{a:e,b:n}=t,r=e.__key,i=n.__key;let o=e,a=n;for(;o&&a;o=o.getNextSibling(),a=a.getNextSibling()){if(o.__key===i)return-1;if(a.__key===r)return 1}return o===null?1:-1}function tA(t,e){return e.is(t)}function LV(t){return Rt(t)?[t.getLatest(),null]:[t.getParent(),t.getLatest()]}function dP(t,e){if(t.is(e))return{commonAncestor:t,type:"same"};const n=new Map;for(let[r,i]=LV(t);r;i=r,r=r.getParent())n.set(r,i);for(let[r,i]=LV(e);r;i=r,r=r.getParent()){const o=n.get(r);if(o!==void 0)return o===null?(tA(t,r)||on(276),{commonAncestor:r,type:"ancestor"}):i===null?(tA(e,r)||on(277),{commonAncestor:r,type:"descendant"}):((Rt(o)||tA(t,o))&&(Rt(i)||tA(e,i))&&r.is(o.getParent())&&r.is(i.getParent())||on(278),{a:o,b:i,commonAncestor:r,type:"branch"})}return null}function om(t,e){const{type:n,key:r,offset:i}=t,o=SCe(t.key);return n==="text"?(hn(o)||on(266,o.getType(),r),pb(o,e,i)):(Rt(o)||on(267,o.getType(),r),zCe(o,t.offset,e))}function mb(t,e){const{origin:n,direction:r}=e,i=r==="next";Xp(e)?t.set(n.getKey(),e.offset,"text"):Rw(e)?hn(n)?t.set(n.getKey(),Yp(n,r),"text"):t.set(n.getParentOrThrow().getKey(),n.getIndexWithinParent()+(i?1:0),"element"):(Wh(e)&&Rt(n)||on(268),t.set(n.getKey(),i?0:n.getChildrenSize(),"element"))}function pK(t){const e=sn(),n=Ht(e)?e:wO();return fP(n,t),rs(n),n}function fP(t,e){mb(t.anchor,e.anchor),mb(t.focus,e.focus)}function $V(t){const{anchor:e,focus:n}=t,r=om(e,"next"),i=om(n,"next"),o=dK(r,i)<=0?"next":"previous";return $0(qg(r,o),qg(i,o))}function rk(t){const{direction:e,origin:n}=t,r=Ks(n,Lb(e)).getNodeAtCaret();return r?Ks(r,e):Jh(n.getParentOrThrow(),e)}function zV(t,e="root"){const n=[t];for(let r=Wh(t)?t.getParentCaret(e):t.getSiblingCaret();r!==null;r=r.getParentCaret(e))n.push(rk(r));return n}function Z3(t){return!!t&&t.origin.isAttached()}function $Ce(t,e="removeEmptySlices"){if(t.isCollapsed())return t;const n="root",r="next";let i=e;const o=gK(t,r),a=zV(o.anchor,n),s=zV(o.focus.getFlipped(),n),u=new Set,f=[];for(const E of o.iterNodeCarets(n))if(Wh(E))u.add(E.origin.getKey());else if(Rw(E)){const{origin:A}=E;Rt(A)&&!u.has(A.getKey())||f.push(A)}for(const E of f)E.remove();for(const E of o.getTextSlices()){if(!E)continue;const{origin:A}=E.caret,R=A.getTextContentSize(),$=rk(Ks(A,r)),z=A.getMode();if(Math.abs(E.distance)===R&&i==="removeEmptySlices"||z==="token"&&E.distance!==0)$.remove();else if(E.distance!==0){i="removeEmptySlices";let B=E.removeTextSlice();const F=E.caret.origin;if(z==="segmented"){const U=B.origin,q=Yi(U.getTextContent()).setStyle(U.getStyle()).setFormat(U.getFormat());$.replaceOrInsert(q),B=pb(q,r,B.offset)}F.is(a[0].origin)&&(a[0]=B),F.is(s[0].origin)&&(s[0]=B.getFlipped())}}let g,_;for(const E of a)if(Z3(E)){g=Uu(E);break}for(const E of s)if(Z3(E)){_=Uu(E);break}const w=(function(E,A,R){if(!E||!A)return null;const $=E.getParentAtCaret(),z=A.getParentAtCaret();if(!$||!z)return null;const B=$.getParents().reverse();B.push($);const F=z.getParents().reverse();F.push(z);const U=Math.min(B.length,F.length);let q;for(q=0;q<U&&B[q]===F[q];q++);const H=(ce,xe)=>{let re;for(let me=q;me<ce.length;me++){const Te=ce[me];if(Ys(Te))return;!re&&xe(Te)&&(re=Te)}return re},ne=H(B,Nh),ie=ne&&H(F,(ce=>R.has(ce.getKey())&&Nh(ce)));return ne&&ie?[ne,ie]:null})(g,_,u);if(w){const[E,A]=w;Jh(E,"previous").splice(0,A.getChildren()),A.remove()}const S=[g,_,...a,...s].find(Z3);if(S)return uK(qg(Uu(S),t.direction));on(269,JSON.stringify(a.map((E=>E.origin.__key))))}function Uu(t){const e=(function(i){let o=i;for(;Wh(o);){const a=ER(o);if(!Wh(a))break;o=a}return o})(t.getLatest()),{direction:n}=e;if(hn(e.origin))return Xp(e)?e:pb(e.origin,n,n);const r=e.getAdjacentCaret();return Rw(r)&&hn(r.origin)?pb(r.origin,n,Lb(n)):e}function mK(t){return Xp(t)&&t.offset!==Yp(t.origin,t.direction)}function qg(t,e){return t.direction===e?t:t.getFlipped()}function gK(t,e){return t.direction===e?t:$0(qg(t.focus,e),qg(t.anchor,e))}function zCe(t,e,n){let r=Jh(t,"next");for(let i=0;i<e;i++){const o=r.getAdjacentCaret();if(o===null)break;r=o}return qg(r,n)}function NCe(t){const{origin:e,offset:n,direction:r}=t;if(n===Yp(e,r))return t.getSiblingCaret();if(n===Yp(e,Lb(r)))return rk(t.getSiblingCaret());const[i]=e.splitText(n);return hn(i)||on(281),qg(Ks(i,"next"),r)}function BCe(t,e){return!0}function FCe(t,{$copyElementNode:e=OCe,$splitTextPointCaretNext:n=NCe,rootMode:r="shadowRoot",$shouldSplit:i=BCe}={}){if(Xp(t))return n(t);const o=t.getParentCaret(r);if(o){const{origin:a}=o;if(Wh(t)&&(!a.canBeEmpty()||!i(a,"first")))return rk(o);const s=(function(u){const f=[];for(let g=u.getAdjacentCaret();g;g=g.getAdjacentCaret())f.push(g.origin);return f})(t);(s.length>0||a.canBeEmpty()&&i(a,"last"))&&o.insert(e(a).splice(0,0,s))}return o}function jCe(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const i of e)r.append("v",i);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const X$=new Map;function yK(t){const e={};if(!t)return e;const n=t.split(";");for(const r of n)if(r!==""){const[i,o]=r.split(/:([^]+)/);i&&o&&(e[i.trim()]=o.trim())}return e}function NV(t){let e=X$.get(t);return e===void 0&&(e=yK(t),X$.set(t,e)),e}function vK(t){const e=TR().getElementByKey(t.getKey());if(e===null)return null;const n=e.ownerDocument.defaultView;return n===null?null:n.getComputedStyle(e)}function _K(t){return vK(Gs(t)?t:t.getParentOrThrow())}function BV(t){const e=_K(t);return e!==null&&e.direction==="rtl"}function bK(t,e){const n=t.getStartEndPoints();if(e.isSelected(t)&&!Cg(e)&&n!==null){const[r,i]=n,o=t.isBackward(),a=r.getNode(),s=i.getNode(),u=e.is(a),f=e.is(s);if(u||f){const[g,_]=Q$(t),w=a.is(s),S=e.is(o?s:a),E=e.is(o?a:s);let A,R=0;w?(R=g>_?_:g,A=g>_?g:_):S?(R=o?_:g,A=void 0):E&&(R=0,A=o?g:_),e.__text=e.__text.slice(R,A)}}return e}function FV(t){if(t.type==="text")return t.offset===t.getNode().getTextContentSize();const e=t.getNode();return Rt(e)||jCe(177),t.offset===e.getChildrenSize()}function VCe(t){const e=t.getStyle(),n=yK(e);X$.set(e,n)}function QCe(t,e){const n=t.getFormatType(),r=t.getIndent();n!==e.getFormatType()&&e.setFormat(n),r!==e.getIndent()&&e.setIndent(r)}function UCe(t,e,n=QCe){if(t===null)return;const r=t.getStartEndPoints(),i=new Map;let o=null;if(r){const[a,s]=r;o=wO(),o.anchor.set(a.key,a.offset,a.type),o.focus.set(s.key,s.offset,s.type);const u=q3(a.getNode(),Nh),f=q3(s.getNode(),Nh);Rt(u)&&i.set(u.getKey(),u),Rt(f)&&i.set(f.getKey(),f)}for(const a of t.getNodes())if(Rt(a)&&Nh(a))i.set(a.getKey(),a);else if(r===null){const s=q3(a,Nh);Rt(s)&&i.set(s.getKey(),s)}for(const[a,s]of i){const u=e();n(s,u),s.replace(u,!0),o&&(a===o.anchor.key&&o.anchor.set(u.getKey(),o.anchor.offset,o.anchor.type),a===o.focus.key&&o.focus.set(u.getKey(),o.focus.offset,o.focus.type))}o&&t.is(sn())&&rs(o)}function xK(t){const e=wK(t);return e!==null&&e.writingMode==="vertical-rl"}function wK(t){const e=t.anchor.getNode();return Rt(e)?vK(e):_K(e)}function jV(t,e){let n=xK(t)?!e:e;OK(t)&&(n=!n);const r=om(t.focus,n?"previous":"next");if(mK(r))return!1;for(const i of a8(r)){if(Wh(i))return!i.origin.isInline();if(!Rt(i.origin)){if(_i(i.origin))return!0;break}}return!1}function ZCe(t,e,n,r){t.modify(e?"extend":"move",n,r)}function OK(t){const e=wK(t);return e!==null&&e.direction==="rtl"}function VV(t,e,n){const r=OK(t);let i;i=xK(t)||r?!n:n,ZCe(t,e,i,"character")}function q3(t,e){let n=t;for(;n!==null&&n.getParent()!==null&&!e(n);)n=n.getParentOrThrow();return e(n)?n:null}function SK(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const i of e)r.append("v",i);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const AR=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,qCe=AR&&"documentMode"in document?document.documentMode:null,WCe=AR&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);!(!AR||!("InputEvent"in window)||qCe)&&"getTargetRanges"in new window.InputEvent("input");function CK(...t){const e=[];for(const n of t)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))e.push(r);return e}function $l(...t){return()=>{for(let e=t.length-1;e>=0;e--)t[e]();t.length=0}}const HCe=AR,GCe=WCe;function xf(t,...e){const n=CK(...e);n.length>0&&t.classList.add(...n)}function PR(t,...e){const n=CK(...e);n.length>0&&t.classList.remove(...n)}function XCe(t){return t?t.getAdjacentCaret():null}function TK(t,e){let n=t;for(;n!=null;){if(n instanceof e)return n;n=n.getParent()}return null}function Y$(t){const e=mf(t,(n=>Rt(n)&&!n.isInline()));return Rt(e)||SK(4,t.__key),e}const mf=(t,e)=>{let n=t;for(;n!==zr()&&n!=null;){if(e(n))return n;n=n.getParent()}return null};function kK(t){const e=sn()||Db();let n;if(Ht(e))n=om(e.focus,"next");else{if(e!=null){const a=e.getNodes(),s=a[a.length-1];s&&(n=Ks(s,"next"))}n=n||Jh(zr(),"previous").getFlipped().insert(mi())}const r=YCe(t,n),i=ER(r),o=Wh(i)?Uu(i):r;return pK(uK(o)),t.getLatest()}function YCe(t,e,n){let r=qg(e,"next");for(let i=r;i;i=FCe(i,n))r=i;return Xp(r)&&SK(283),r.insert(t.isInline()?mi().append(t):t),qg(Ks(t.getLatest(),"next"),e.direction)}function l8(t,e){const n=e();return t.replace(n),n.append(t),n}function w0(t,e){return t!==null&&Object.getPrototypeOf(t).constructor.name===e.name}function KCe(t,e){const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i!==null&&n.push(i)}return n}let W3=!(GCe||!HCe)&&void 0;function JCe(t){let e=1;if((function(){if(W3===void 0){const n=document.createElement("div");n.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(n);const r=n.getBoundingClientRect();n.style.setProperty("zoom","2"),W3=n.getBoundingClientRect().width===r.width,document.body.removeChild(n)}return W3})())for(;t;)e*=Number(window.getComputedStyle(t).getPropertyValue("zoom")),t=t.parentElement;return e}const nA=0,K$=1,J$=2,of=0,eTe=1,QV=2,tTe=3,nTe=4;function rTe(t,e,n,r,i){if(t===null||n.size===0&&r.size===0&&!i)return of;const o=e._selection,a=t._selection;if(i)return eTe;if(!(Ht(o)&&Ht(a)&&a.isCollapsed()&&o.isCollapsed()))return of;const s=(function($,z,B){const F=$._nodeMap,U=[];for(const q of z){const H=F.get(q);H!==void 0&&U.push(H)}for(const[q,H]of B){if(!H)continue;const ne=F.get(q);ne===void 0||Gs(ne)||U.push(ne)}return U})(e,n,r);if(s.length===0)return of;if(s.length>1){const $=e._nodeMap,z=$.get(o.anchor.key),B=$.get(a.anchor.key);return z&&B&&!t._nodeMap.has(z.__key)&&hn(z)&&z.__text.length===1&&o.anchor.offset===1?QV:of}const u=s[0],f=t._nodeMap.get(u.__key);if(!hn(f)||!hn(u)||f.__mode!==u.__mode)return of;const g=f.__text,_=u.__text;if(g===_)return of;const w=o.anchor,S=a.anchor;if(w.key!==S.key||w.type!=="text")return of;const E=w.offset,A=S.offset,R=_.length-g.length;return R===1&&A===E-1?QV:R===-1&&A===E+1?tTe:R===-1&&A===E?nTe:of}function iTe(t,e){let n=Date.now(),r=of;return(i,o,a,s,u,f)=>{const g=Date.now();if(f.has(m5))return r=of,n=g,J$;const _=rTe(i,o,s,u,t.isComposing()),w=(()=>{const S=a===null||a.editor===t,E=f.has(hCe);if(!E&&S&&f.has(hP))return nA;if(i===null)return K$;const A=o._selection;return s.size>0||u.size>0?E===!1&&_!==of&&_===r&&g<n+e&&S||s.size===1&&(function(R,$,z){const B=$._nodeMap.get(R),F=z._nodeMap.get(R),U=$._selection,q=z._selection;return!(Ht(U)&&Ht(q)&&U.anchor.type==="element"&&U.focus.type==="element"&&q.anchor.type==="text"&&q.focus.type==="text"||!hn(B)||!hn(F)||B.__parent!==F.__parent)&&JSON.stringify($.read((()=>B.exportJSON())))===JSON.stringify(z.read((()=>F.exportJSON())))})(Array.from(s)[0],i,o)?nA:K$:A!==null?nA:J$})();return n=g,r=_,w}}function UV(t){t.undoStack=[],t.redoStack=[],t.current=null}function oTe(t,e,n){const r=iTe(t,n);return $l(t.registerCommand(aR,(()=>((function(o,a){const s=a.redoStack,u=a.undoStack;if(u.length!==0){const f=a.current,g=u.pop();f!==null&&(s.push(f),o.dispatchCommand(z2,!0)),u.length===0&&o.dispatchCommand(N2,!1),a.current=g||null,g&&g.editor.setEditorState(g.editorState,{tag:m5})}})(t,e),!0)),Ar),t.registerCommand(lR,(()=>((function(o,a){const s=a.redoStack,u=a.undoStack;if(s.length!==0){const f=a.current;f!==null&&(u.push(f),o.dispatchCommand(N2,!0));const g=s.pop();s.length===0&&o.dispatchCommand(z2,!1),a.current=g||null,g&&g.editor.setEditorState(g.editorState,{tag:m5})}})(t,e),!0)),Ar),t.registerCommand(G2e,(()=>(UV(e),!1)),Ar),t.registerCommand(X2e,(()=>(UV(e),t.dispatchCommand(z2,!1),t.dispatchCommand(N2,!1),!0)),Ar),t.registerUpdateListener((({editorState:o,prevEditorState:a,dirtyLeaves:s,dirtyElements:u,tags:f})=>{const g=e.current,_=e.redoStack,w=e.undoStack,S=g===null?null:g.editorState;if(g!==null&&o===S)return;const E=r(a,o,g,s,u,f);if(E===K$)_.length!==0&&(e.redoStack=[],t.dispatchCommand(z2,!1)),g!==null&&(w.push({...g}),t.dispatchCommand(N2,!0));else if(E===J$)return;e.current={editor:t,editorState:o}})))}function EK(){return{current:null,redoStack:[],undoStack:[]}}function AK({delay:t,externalHistoryState:e}){const[n]=Ll();return(function(r,i,o=1e3){const a=Q.useMemo((()=>i||EK()),[i]);Q.useEffect((()=>oTe(r,a,o)),[o,r,a])})(n,e,t),null}function sTe(t,e){const n=e.body?e.body.childNodes:[];let r=[];const i=[];for(let o=0;o<n.length;o++){const a=n[o];if(!MK.has(a.nodeName)){const s=RK(a,t,i,!1);s!==null&&(r=r.concat(s))}}return(function(o){for(const a of o)a.getNextSibling()instanceof ZN&&a.insertAfter(_f());for(const a of o){const s=a.getChildren();for(const u of s)a.insertBefore(u);a.remove()}})(i),r}function aTe(t,e){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),r=zr().getChildren();for(let i=0;i<r.length;i++)PK(t,r[i],n,e);return n.innerHTML}function PK(t,e,n,r=null){let i=r===null||e.isSelected(r);const o=Rt(e)&&e.excludeFromCopy("html");let a=e;if(r!==null){let S=n8(e);S=hn(S)&&r!==null?bK(r,S):S,a=S}const s=Rt(a)?a.getChildren():[],u=wR(t,a.getType());let f;f=u&&u.exportDOM!==void 0?u.exportDOM(t,a):a.exportDOM(t);const{element:g,after:_}=f;if(!g)return!1;const w=document.createDocumentFragment();for(let S=0;S<s.length;S++){const E=s[S],A=PK(t,E,w,r);!i&&Rt(e)&&A&&e.extractWithChild(E,r,"html")&&(i=!0)}if(i&&!o){if((qo(g)||H$(g))&&g.append(w),n.append(g),_){const S=_.call(a,g);S&&(H$(g)?g.replaceChildren(S):g.replaceWith(S))}}else n.append(w);return i}const MK=new Set(["STYLE","SCRIPT"]);function RK(t,e,n,r,i=new Map,o){let a=[];if(MK.has(t.nodeName))return a;let s=null;const u=(function(E,A){const{nodeName:R}=E,$=A._htmlConversions.get(R.toLowerCase());let z=null;if($!==void 0)for(const B of $){const F=B(E);F!==null&&(z===null||(z.priority||0)<=(F.priority||0))&&(z=F)}return z!==null?z.conversion:null})(t,e),f=u?u(t):null;let g=null;if(f!==null){g=f.after;const E=f.node;if(s=Array.isArray(E)?E[E.length-1]:E,s!==null){for(const[,A]of i)if(s=A(s,o),!s)break;s&&a.push(...Array.isArray(E)?E:[s])}f.forChild!=null&&i.set(t.nodeName,f.forChild)}const _=t.childNodes;let w=[];const S=(s==null||!Ys(s))&&(s!=null&&d5(s)||r);for(let E=0;E<_.length;E++)w.push(...RK(_[E],e,n,S,new Map(i),s));return g!=null&&(w=g(w)),_5(t)&&(w=lTe(t,w,S?()=>{const E=new ZN;return n.push(E),E}:mi)),s==null?w.length>0?a=a.concat(w):_5(t)&&(function(E){return E.nextSibling==null||E.previousSibling==null?!1:G$(E.nextSibling)&&G$(E.previousSibling)})(t)&&(a=a.concat(_f())):Rt(s)&&s.append(...w),a}function lTe(t,e,n){const r=t.style.textAlign,i=[];let o=[];for(let a=0;a<e.length;a++){const s=e[a];if(d5(s))r&&!s.getFormat()&&s.setFormat(r),i.push(s);else if(o.push(s),a===e.length-1||a<e.length-1&&d5(e[a+1])){const u=n();u.setFormat(r),u.append(...o),i.push(u),o=[]}}return i}function b5(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const i of e)r.append("v",i);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function cTe(t,e=sn()){return e==null&&b5(166),Ht(e)&&e.isCollapsed()||e.getNodes().length===0?"":aTe(t,e)}function uTe(t,e=sn()){return e==null&&b5(166),Ht(e)&&e.isCollapsed()||e.getNodes().length===0?null:JSON.stringify(hTe(t,e))}function ZV(t,e,n){const r=t.getData("application/x-lexical-editor");if(r)try{const s=JSON.parse(r);if(s.namespace===n._config.namespace&&Array.isArray(s.nodes))return qV(n,dTe(s.nodes),e)}catch{}const i=t.getData("text/html"),o=t.getData("text/plain");if(i&&o!==i)try{const s=new DOMParser().parseFromString((function(u){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:f=>f}).createHTML(u):u})(i),"text/html");return qV(n,sTe(n,s),e)}catch{}const a=o||t.getData("text/uri-list");if(a!=null)if(Ht(e)){const s=a.split(/(\r?\n|\t)/);s[s.length-1]===""&&s.pop();for(let u=0;u<s.length;u++){const f=sn();if(Ht(f)){const g=s[u];g===`
`||g===`\r
`?f.insertParagraph():g==="	"?f.insertNodes([xO()]):f.insertText(g)}}}else e.insertRawText(a)}function qV(t,e,n){t.dispatchCommand(U2e,{nodes:e,selection:n})||(n.insertNodes(e),(function(r){if(Ht(r)&&r.isCollapsed()){const i=r.anchor;let o=null;const a=om(i,"previous");if(a)if(Xp(a))o=a.origin;else{const s=$0(a,Jh(zr(),"next").getFlipped());for(const u of s){if(hn(u.origin)){o=u.origin;break}if(Rt(u.origin)&&!u.origin.isInline())break}}if(o&&hn(o)){const s=o.getFormat(),u=o.getStyle();r.format===s&&r.style===u||(r.format=s,r.style=u,r.dirty=!0)}}})(n))}function IK(t,e,n,r=[]){let i=e===null||n.isSelected(e);const o=Rt(n)&&n.excludeFromCopy("html");let a=n;if(e!==null){let f=n8(n);f=hn(f)&&e!==null?bK(e,f):f,a=f}const s=Rt(a)?a.getChildren():[],u=(function(f){const g=f.exportJSON(),_=f.constructor;if(g.type!==_.getType()&&b5(58,_.name),Rt(f)){const w=g.children;Array.isArray(w)||b5(59,_.name)}return g})(a);if(hn(a)){const f=a.__text;f.length>0?u.text=f:i=!1}for(let f=0;f<s.length;f++){const g=s[f],_=IK(t,e,g,u.children);!i&&Rt(n)&&_&&n.extractWithChild(g,e,"clone")&&(i=!0)}if(i&&!o)r.push(u);else if(Array.isArray(u.children))for(let f=0;f<u.children.length;f++){const g=u.children[f];r.push(g)}return i}function hTe(t,e){const n=[],r=zr().getChildren();for(let i=0;i<r.length;i++)IK(t,e,r[i],n);return{namespace:t._config.namespace,nodes:n}}function dTe(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],i=uCe(r);hn(i)&&VCe(i),e.push(i)}return e}let y1=null;async function WV(t,e,n){if(y1!==null)return!1;if(e!==null)return new Promise(((f,g)=>{t.update((()=>{f(HV(t,e,n))}))}));const r=t.getRootElement(),i=t._window||window,o=window.document,a=bf(i);if(r===null||a===null)return!1;const s=o.createElement("span");s.style.cssText="position: fixed; top: -1000px;",s.append(o.createTextNode("#")),r.append(s);const u=new Range;return u.setStart(s,0),u.setEnd(s,1),a.removeAllRanges(),a.addRange(u),new Promise(((f,g)=>{const _=t.registerCommand(fR,(w=>(w0(w,ClipboardEvent)&&(_(),y1!==null&&(window.clearTimeout(y1),y1=null),f(HV(t,w,n))),!0)),eh);y1=window.setTimeout((()=>{_(),y1=null,f(!1)}),50),o.execCommand("copy"),s.remove()}))}function HV(t,e,n){if(n===void 0){const i=bf(t._window);if(!i)return!1;const o=i.anchorNode,a=i.focusNode;if(o!==null&&a!==null&&!tk(t,o,a))return!1;const s=sn();if(s===null)return!1;n=pTe(s)}e.preventDefault();const r=e.clipboardData;return r!==null&&(mTe(r,n),!0)}const fTe=[["text/html",cTe],["application/x-lexical-editor",uTe]];function pTe(t=sn()){const e={"text/plain":t?t.getTextContent():""};if(t){const n=TR();for(const[r,i]of fTe){const o=i(n,t);o!==null&&(e[r]=o)}}return e}function mTe(t,e){for(const n in e){const r=e[n];r!==void 0&&t.setData(n,r)}}function GV(t,e){if(document.caretRangeFromPoint!==void 0){const n=document.caretRangeFromPoint(t,e);return n===null?null:{node:n.startContainer,offset:n.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const n=document.caretPositionFromPoint(t,e);return n===null?null:{node:n.offsetNode,offset:n.offset}}return null}const TO=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,gTe=TO&&"documentMode"in document?document.documentMode:null,yTe=!(!TO||!("InputEvent"in window)||gTe)&&"getTargetRanges"in new window.InputEvent("input"),vTe=TO&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),XV=TO&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,_Te=TO&&/^(?=.*Chrome).*/i.test(navigator.userAgent),bTe=TO&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!_Te,YV=Kn("DRAG_DROP_PASTE_FILE");let MR=class DK extends iu{static getType(){return"quote"}static clone(e){return new DK(e.__key)}createDOM(e){const n=document.createElement("blockquote");return xf(n,e.theme.quote),n}updateDOM(e,n){return!1}static importDOM(){return{blockquote:e=>({conversion:xTe,priority:0})}}exportDOM(e){const{element:n}=super.exportDOM(e);if(qo(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r);const i=this.getDirection();i&&(n.dir=i)}return{element:n}}static importJSON(e){return ik().updateFromJSON(e)}insertNewAfter(e,n){const r=mi(),i=this.getDirection();return r.setDirection(i),this.insertAfter(r,n),r}collapseAtStart(){const e=mi();return this.getChildren().forEach((n=>e.append(n))),this.replace(e),!0}canMergeWhenEmpty(){return!0}};function ik(){return nh(new MR)}function e4(t){return t instanceof MR}let ok=class LK extends iu{static getType(){return"heading"}static clone(e){return new LK(e.__tag,e.__key)}constructor(e,n){super(n),this.__tag=e}getTag(){return this.__tag}setTag(e){const n=this.getWritable();return this.__tag=e,n}createDOM(e){const n=this.__tag,r=document.createElement(n),i=e.theme.heading;if(i!==void 0){const o=i[n];xf(r,o)}return r}updateDOM(e,n,r){return e.__tag!==this.__tag}static importDOM(){return{h1:e=>({conversion:v1,priority:0}),h2:e=>({conversion:v1,priority:0}),h3:e=>({conversion:v1,priority:0}),h4:e=>({conversion:v1,priority:0}),h5:e=>({conversion:v1,priority:0}),h6:e=>({conversion:v1,priority:0}),p:e=>{const n=e.firstChild;return n!==null&&KV(n)?{conversion:()=>({node:null}),priority:3}:null},span:e=>KV(e)?{conversion:n=>({node:jp("h1")}),priority:3}:null}}exportDOM(e){const{element:n}=super.exportDOM(e);if(qo(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r);const i=this.getDirection();i&&(n.dir=i)}return{element:n}}static importJSON(e){return jp(e.tag).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTag(e.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(e,n=!0){const r=e?e.anchor.offset:0,i=this.getLastDescendant(),o=!i||e&&e.anchor.key===i.getKey()&&r===i.getTextContentSize()||!e?mi():jp(this.getTag()),a=this.getDirection();if(o.setDirection(a),this.insertAfter(o,n),r===0&&!this.isEmpty()&&e){const s=mi();s.select(),this.replace(s,!0)}return o}collapseAtStart(){const e=this.isEmpty()?mi():jp(this.getTag());return this.getChildren().forEach((n=>e.append(n))),this.replace(e),!0}extractWithChild(){return!0}};function KV(t){return t.nodeName.toLowerCase()==="span"&&t.style.fontSize==="26pt"}function v1(t){const e=t.nodeName.toLowerCase();let n=null;return e!=="h1"&&e!=="h2"&&e!=="h3"&&e!=="h4"&&e!=="h5"&&e!=="h6"||(n=jp(e),t.style!==null&&(r8(t,n),n.setFormat(t.style.textAlign))),{node:n}}function xTe(t){const e=ik();return t.style!==null&&(e.setFormat(t.style.textAlign),r8(t,e)),{node:e}}function jp(t="h1"){return nh(new ok(t))}function Iw(t){return t instanceof ok}function rA(t){let e=null;if(w0(t,DragEvent)?e=t.dataTransfer:w0(t,ClipboardEvent)&&(e=t.clipboardData),e===null)return[!1,[],!1];const n=e.types,r=n.includes("Files"),i=n.includes("text/html")||n.includes("text/plain");return[r,Array.from(e.files),i]}function JV(t){const e=sn();if(!Ht(e))return!1;const n=new Set,r=e.getNodes();for(let i=0;i<r.length;i++){const o=r[i],a=o.getKey();if(n.has(a))continue;const s=mf(o,(f=>Rt(f)&&!f.isInline()));if(s===null)continue;const u=s.getKey();s.canIndent()&&!n.has(u)&&(n.add(u),t(s))}return n.size>0}function eQ(t){const e=im(t);return _i(e)}function H3(t){for(const e of["lowercase","uppercase","capitalize"])t.hasFormat(e)&&t.toggleFormat(e)}function wTe(t){return $l(t.registerCommand(sR,(e=>{const n=sn();return!!es(n)&&(n.clear(),!0)}),Ar),t.registerCommand(W_,(e=>{const n=sn();return Ht(n)?(n.deleteCharacter(e),!0):!!es(n)&&(n.deleteNodes(),!0)}),Ar),t.registerCommand(UC,(e=>{const n=sn();return!!Ht(n)&&(n.deleteWord(e),!0)}),Ar),t.registerCommand(ZC,(e=>{const n=sn();return!!Ht(n)&&(n.deleteLine(e),!0)}),Ar),t.registerCommand(tw,(e=>{const n=sn();if(typeof e=="string")n!==null&&n.insertText(e);else{if(n===null)return!1;const r=e.dataTransfer;if(r!=null)ZV(r,n,t);else if(Ht(n)){const i=e.data;return i&&n.insertText(i),!0}}return!0}),Ar),t.registerCommand(L$,(()=>{const e=sn();return!!Ht(e)&&(e.removeText(),!0)}),Ar),t.registerCommand(Mg,(e=>{const n=sn();return!!Ht(n)&&(n.formatText(e),!0)}),Ar),t.registerCommand(W2e,(e=>{const n=sn();if(!Ht(n)&&!es(n))return!1;const r=n.getNodes();for(const i of r){const o=mf(i,(a=>Rt(a)&&!a.isInline()));o!==null&&o.setFormat(e)}return!0}),Ar),t.registerCommand(ew,(e=>{const n=sn();return!!Ht(n)&&(n.insertLineBreak(e),!0)}),Ar),t.registerCommand(QC,(()=>{const e=sn();return!!Ht(e)&&(e.insertParagraph(),!0)}),Ar),t.registerCommand(AY,(()=>(OO([xO()]),!0)),Ar),t.registerCommand(u5,(()=>JV((e=>{const n=e.getIndent();e.setIndent(n+1)}))),Ar),t.registerCommand($$,(()=>JV((e=>{const n=e.getIndent();n>0&&e.setIndent(Math.max(0,n-1))}))),Ar),t.registerCommand(IN,(e=>{const n=sn();if(es(n)){const r=n.getNodes();if(r.length>0)return r[0].selectPrevious(),!0}else if(Ht(n)){const r=Z$(n.focus,!0);if(!e.shiftKey&&_i(r)&&!r.isIsolated()&&!r.isInline())return r.selectPrevious(),e.preventDefault(),!0}return!1}),Ar),t.registerCommand(DN,(e=>{const n=sn();if(es(n)){const r=n.getNodes();if(r.length>0)return r[0].selectNext(0,0),!0}else if(Ht(n)){if((function(i){const o=i.focus;return o.key==="root"&&o.offset===zr().getChildrenSize()})(n))return e.preventDefault(),!0;const r=Z$(n.focus,!1);if(!e.shiftKey&&_i(r)&&!r.isIsolated()&&!r.isInline())return r.selectNext(),e.preventDefault(),!0}return!1}),Ar),t.registerCommand(RN,(e=>{const n=sn();if(es(n)){const r=n.getNodes();if(r.length>0)return e.preventDefault(),BV(r[0])?r[0].selectNext(0,0):r[0].selectPrevious(),!0}if(!Ht(n))return!1;if(jV(n,!0)){const r=e.shiftKey;return e.preventDefault(),VV(n,r,!0),!0}return!1}),Ar),t.registerCommand(EY,(e=>{const n=sn();if(es(n)){const i=n.getNodes();if(i.length>0)return e.preventDefault(),BV(i[0])?i[0].selectPrevious():i[0].selectNext(0,0),!0}if(!Ht(n))return!1;const r=e.shiftKey;return!!jV(n,!1)&&(e.preventDefault(),VV(n,r,!1),!0)}),Ar),t.registerCommand(uR,(e=>{if(eQ(e.target))return!1;const n=sn();if(Ht(n)){if((function(r){if(!r.isCollapsed())return!1;const{anchor:i}=r;if(i.offset!==0)return!1;const o=i.getNode();if(Gs(o))return!1;const a=Y$(o);return a.getIndent()>0&&(a.is(o)||o.is(a.getFirstDescendant()))})(n))return e.preventDefault(),t.dispatchCommand($$,void 0);if(XV&&navigator.language==="ko-KR")return!1}else if(!es(n))return!1;return e.preventDefault(),t.dispatchCommand(W_,!0)}),Ar),t.registerCommand($N,(e=>{if(eQ(e.target))return!1;const n=sn();return!(!Ht(n)&&!es(n))&&(e.preventDefault(),t.dispatchCommand(W_,!1))}),Ar),t.registerCommand(Pw,(e=>{const n=sn();if(!Ht(n))return!1;if(H3(n),e!==null){if((XV||vTe||bTe)&&yTe)return!1;if(e.preventDefault(),e.shiftKey)return t.dispatchCommand(ew,!1)}return t.dispatchCommand(QC,void 0)}),Ar),t.registerCommand(XT,(()=>{const e=sn();return!!Ht(e)&&(t.blur(),!0)}),Ar),t.registerCommand(zN,(e=>{const[,n]=rA(e);if(n.length>0){const i=GV(e.clientX,e.clientY);if(i!==null){const{offset:o,node:a}=i,s=im(a);if(s!==null){const u=wO();if(hn(s))u.anchor.set(s.getKey(),o,"text"),u.focus.set(s.getKey(),o,"text");else{const g=s.getParentOrThrow().getKey(),_=s.getIndexWithinParent()+1;u.anchor.set(g,_,"element"),u.focus.set(g,_,"element")}const f=lb(u);rs(f)}t.dispatchCommand(YV,n)}return e.preventDefault(),!0}const r=sn();return!!Ht(r)}),Ar),t.registerCommand(dR,(e=>{const[n]=rA(e),r=sn();return!(n&&!Ht(r))}),Ar),t.registerCommand(NN,(e=>{const[n]=rA(e),r=sn();if(n&&!Ht(r))return!1;const i=GV(e.clientX,e.clientY);if(i!==null){const o=im(i.node);_i(o)&&e.preventDefault()}return!0}),Ar),t.registerCommand(z$,(()=>(bCe(),!0)),Ar),t.registerCommand(fR,(e=>(WV(t,w0(e,ClipboardEvent)?e:null),!0)),Ar),t.registerCommand(BN,(e=>((async function(n,r){await WV(r,w0(n,ClipboardEvent)?n:null),r.update((()=>{const i=sn();Ht(i)?i.removeText():es(i)&&i.getNodes().forEach((o=>o.remove()))}))})(e,t),!0)),Ar),t.registerCommand(GT,(e=>{const[,n,r]=rA(e);return n.length>0&&!r?(t.dispatchCommand(YV,n),!0):CO(e.target)&&HN(e.target)?!1:sn()!==null&&((function(i,o){i.preventDefault(),o.update((()=>{const a=sn(),s=w0(i,InputEvent)||w0(i,KeyboardEvent)?null:i.clipboardData;s!=null&&a!==null&&ZV(s,a,o)}),{tag:dCe})})(e,t),!0)}),Ar),t.registerCommand(LN,(e=>{const n=sn();return Ht(n)&&H3(n),!1}),Ar),t.registerCommand(hR,(e=>{const n=sn();return Ht(n)&&H3(n),!1}),Ar))}function Ml(t,e,n,r){const i=t.length;let o=0,a;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);o<r.length;)a=r.slice(o,o+1e4),a.unshift(e,0),t.splice(...a),o+=1e4,e+=1e4}function $h(t,e){return t.length>0?(Ml(t,t.length,0,e),t):e}const Bh=Y0(/[A-Za-z]/),Zu=Y0(/[\dA-Za-z]/),OTe=Y0(/[#-'*+\--9=?A-Z^-~]/);function t4(t){return t!==null&&(t<32||t===127)}const n4=Y0(/\d/),STe=Y0(/[\dA-Fa-f]/),CTe=Y0(/[!-/:-@[-`{-~]/);function Sn(t){return t!==null&&t<-2}function Ci(t){return t!==null&&(t<0||t===32)}function pr(t){return t===-2||t===-1||t===32}const TTe=Y0(new RegExp("\\p{P}|\\p{S}","u")),Og=Y0(/\s/);function Y0(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function z0(t){if(t===null||Ci(t)||Og(t))return 1;if(TTe(t))return 2}function sk(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const o=t[i].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}function kTe(t){let n={}.singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,s){let u=-1;for(;++u<a.length;)if(a[u][0]==="enter"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._close){let f=u;for(;f--;)if(a[f][0]==="exit"&&a[f][1].type==="strikethroughSequenceTemporary"&&a[f][1]._open&&a[u][1].end.offset-a[u][1].start.offset===a[f][1].end.offset-a[f][1].start.offset){a[u][1].type="strikethroughSequence",a[f][1].type="strikethroughSequence";const g={type:"strikethrough",start:Object.assign({},a[f][1].start),end:Object.assign({},a[u][1].end)},_={type:"strikethroughText",start:Object.assign({},a[f][1].end),end:Object.assign({},a[u][1].start)},w=[["enter",g,s],["enter",a[f][1],s],["exit",a[f][1],s],["enter",_,s]],S=s.parser.constructs.insideSpan.null;S&&Ml(w,w.length,0,sk(S,a.slice(f+1,u),s)),Ml(w,w.length,0,[["exit",_,s],["enter",a[u][1],s],["exit",a[u][1],s],["exit",g,s]]),Ml(a,f-1,u-f+3,w),u=f+w.length-2;break}}for(u=-1;++u<a.length;)a[u][1].type==="strikethroughSequenceTemporary"&&(a[u][1].type="data");return a}function o(a,s,u){const f=this.previous,g=this.events;let _=0;return w;function w(E){return f===126&&g[g.length-1][1].type!=="characterEscape"?u(E):(a.enter("strikethroughSequenceTemporary"),S(E))}function S(E){const A=z0(f);if(E===126)return _>1?u(E):(a.consume(E),_++,S);if(_<2&&!n)return u(E);const R=a.exit("strikethroughSequenceTemporary"),$=z0(E);return R._open=!$||$===2&&!!A,R._close=!A||A===2&&!!$,s(E)}}}const ETe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];$K.peek=ITe;function ATe(){return{canContainEols:["delete"],enter:{strikethrough:MTe},exit:{strikethrough:RTe}}}function PTe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:ETe}],handlers:{delete:$K}}}function MTe(t){this.enter({type:"delete",children:[]},t)}function RTe(t){this.exit(t)}function $K(t,e,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(t,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),o(),a}function ITe(){return"~"}zK.peek=BTe;var DTe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],LTe={canContainEols:["highlight"],enter:{highlight:$Te},exit:{highlight:zTe}};function $Te(t){this.enter({type:"highlight",children:[]},t)}function zTe(t){this.exit(t)}var NTe={unsafe:[{character:"=",inConstruct:"phrasing",notInConstruct:DTe}],handlers:{highlight:zK}};function zK(t,e,n,r){const o=n.createTracker(r),a=n.enter("highlight");let s=o.move("==");return s+=o.move(n.containerPhrasing(t,{before:s,after:"=",...o.current()})),s+=o.move("=="),a(),s}function BTe(){return"="}function x5(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}const FTe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],tQ={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};function NK(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=48&&e<=57}function jTe(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=97&&e<=102||e>=65&&e<=70||e>=48&&e<=57}function VTe(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=97&&e<=122||e>=65&&e<=90}function nQ(t){return VTe(t)||NK(t)}const rQ=document.createElement("i");function WC(t){const e="&"+t+";";rQ.innerHTML=e;const n=rQ.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}const QTe=["","Named character references must be terminated by a semicolon","Numeric character references must be terminated by a semicolon","Named character references cannot be empty","Numeric character references cannot be empty","Named character references must be known","Numeric character references cannot be disallowed","Numeric character references cannot be outside the permissible Unicode range"];function RR(t,e){const n=e||{},r=typeof n.additional=="string"?n.additional.charCodeAt(0):n.additional,i=[];let o=0,a=-1,s="",u,f;n.position&&("start"in n.position||"indent"in n.position?(f=n.position.indent,u=n.position.start):u=n.position);let g=(u?u.line:0)||1,_=(u?u.column:0)||1,w=E(),S;for(o--;++o<=t.length;)if(S===10&&(_=(f?f[a]:0)||1),S=t.charCodeAt(o),S===38){const $=t.charCodeAt(o+1);if($===9||$===10||$===12||$===32||$===38||$===60||Number.isNaN($)||r&&$===r){s+=String.fromCharCode(S),_++;continue}const z=o+1;let B=z,F=z,U;if($===35){F=++B;const me=t.charCodeAt(F);me===88||me===120?(U="hexadecimal",F=++B):U="decimal"}else U="named";let q="",H="",ne="";const ie=U==="named"?nQ:U==="decimal"?NK:jTe;for(F--;++F<=t.length;){const me=t.charCodeAt(F);if(!ie(me))break;ne+=String.fromCharCode(me),U==="named"&&FTe.includes(ne)&&(q=ne,H=WC(ne))}let ce=t.charCodeAt(F)===59;if(ce){F++;const me=U==="named"?WC(ne):!1;me&&(q=ne,H=me)}let xe=1+F-z,re="";if(!(!ce&&n.nonTerminated===!1))if(!ne)U!=="named"&&A(4,xe);else if(U==="named"){if(ce&&!H)A(5,1);else if(q!==ne&&(F=B+q.length,xe=1+F-B,ce=!1),!ce){const me=q?1:3;if(n.attribute){const Te=t.charCodeAt(F);Te===61?(A(me,xe),H=""):nQ(Te)?H="":A(me,xe)}else A(me,xe)}re=H}else{ce||A(2,xe);let me=Number.parseInt(ne,U==="hexadecimal"?16:10);if(UTe(me))A(7,xe),re="";else if(me in tQ)A(6,xe),re=tQ[me];else{let Te="";ZTe(me)&&A(6,xe),me>65535&&(me-=65536,Te+=String.fromCharCode(me>>>10|55296),me=56320|me&1023),re=Te+String.fromCharCode(me)}}if(re){R(),w=E(),o=F-1,_+=F-z+1,i.push(re);const me=E();me.offset++,n.reference&&n.reference.call(n.referenceContext||void 0,re,{start:w,end:me},t.slice(z-1,F)),w=me}else ne=t.slice(z-1,F),s+=ne,_+=ne.length,o=F-1}else S===10&&(g++,a++,_=0),Number.isNaN(S)?R():(s+=String.fromCharCode(S),_++);return i.join("");function E(){return{line:g,column:_,offset:o+((u?u.offset:0)||0)}}function A($,z){let B;n.warning&&(B=E(),B.column+=z,B.offset+=z,n.warning.call(n.warningContext||void 0,QTe[$],B,$))}function R(){s&&(i.push(s),n.text&&n.text.call(n.textContext||void 0,s,{start:w,end:E()}),s="")}}function UTe(t){return t>=55296&&t<=57343||t>1114111}function ZTe(t){return t>=1&&t<=8||t===11||t>=13&&t<=31||t>=127&&t<=159||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534}const qTe=/["&'<>`]/g,WTe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,HTe=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,GTe=/[|\\{}()[\]^$+*?.]/g,iQ=new WeakMap;function XTe(t,e){if(t=t.replace(e.subset?YTe(e.subset):qTe,r),e.subset||e.escapeOnly)return t;return t.replace(WTe,n).replace(HTe,r);function n(i,o,a){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,a.charCodeAt(o+2),e)}function r(i,o,a){return e.format(i.charCodeAt(0),a.charCodeAt(o+1),e)}}function YTe(t){let e=iQ.get(t);return e||(e=KTe(t),iQ.set(t,e)),e}function KTe(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(GTe,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}function JTe(t){return"&#x"+t.toString(16).toUpperCase()+";"}function BK(t,e){return XTe(t,Object.assign({format:JTe},e))}function Rg(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?oQ(t.position):"start"in t||"end"in t?oQ(t):"line"in t||"column"in t?r4(t):""}function r4(t){return sQ(t&&t.line)+":"+sQ(t&&t.column)}function oQ(t){return r4(t&&t.start)+"-"+r4(t&&t.end)}function sQ(t){return t&&typeof t=="number"?t:1}class Ki extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},a=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?i=e:!o.cause&&e&&(a=!0,i=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?o.ruleId=r:(o.source=r.slice(0,u),o.ruleId=r.slice(u+1))}if(!o.place&&o.ancestors&&o.ancestors){const u=o.ancestors[o.ancestors.length-1];u&&(o.place=u.position)}const s=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=s?s.line:void 0,this.name=Rg(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=a&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ki.prototype.file="";Ki.prototype.name="";Ki.prototype.reason="";Ki.prototype.message="";Ki.prototype.stack="";Ki.prototype.column=void 0;Ki.prototype.line=void 0;Ki.prototype.ancestors=void 0;Ki.prototype.cause=void 0;Ki.prototype.fatal=void 0;Ki.prototype.place=void 0;Ki.prototype.ruleId=void 0;Ki.prototype.source=void 0;const FK="  ";function eke(){return{canContainEols:["mdxJsxTextElement"],enter:{mdxJsxFlowTag:r,mdxJsxFlowTagClosingMarker:i,mdxJsxFlowTagAttribute:_,mdxJsxFlowTagExpressionAttribute:w,mdxJsxFlowTagAttributeValueLiteral:t,mdxJsxFlowTagAttributeValueExpression:t,mdxJsxFlowTagSelfClosingMarker:a,mdxJsxTextTag:r,mdxJsxTextTagClosingMarker:i,mdxJsxTextTagAttribute:_,mdxJsxTextTagExpressionAttribute:w,mdxJsxTextTagAttributeValueLiteral:t,mdxJsxTextTagAttributeValueExpression:t,mdxJsxTextTagSelfClosingMarker:a},exit:{mdxJsxFlowTagClosingMarker:s,mdxJsxFlowTagNamePrimary:u,mdxJsxFlowTagNameMember:f,mdxJsxFlowTagNameLocal:g,mdxJsxFlowTagExpressionAttribute:S,mdxJsxFlowTagExpressionAttributeValue:n,mdxJsxFlowTagAttributeNamePrimary:E,mdxJsxFlowTagAttributeNameLocal:A,mdxJsxFlowTagAttributeValueLiteral:R,mdxJsxFlowTagAttributeValueLiteralValue:n,mdxJsxFlowTagAttributeValueExpression:$,mdxJsxFlowTagAttributeValueExpressionValue:n,mdxJsxFlowTagSelfClosingMarker:z,mdxJsxFlowTag:B,mdxJsxTextTagClosingMarker:s,mdxJsxTextTagNamePrimary:u,mdxJsxTextTagNameMember:f,mdxJsxTextTagNameLocal:g,mdxJsxTextTagExpressionAttribute:S,mdxJsxTextTagExpressionAttributeValue:n,mdxJsxTextTagAttributeNamePrimary:E,mdxJsxTextTagAttributeNameLocal:A,mdxJsxTextTagAttributeValueLiteral:R,mdxJsxTextTagAttributeValueLiteralValue:n,mdxJsxTextTagAttributeValueExpression:$,mdxJsxTextTagAttributeValueExpressionValue:n,mdxJsxTextTagSelfClosingMarker:z,mdxJsxTextTag:B}};function t(){this.buffer()}function e(H){return{line:H.line,column:H.column,offset:H.offset}}function n(H){this.config.enter.data.call(this,H),this.config.exit.data.call(this,H)}function r(H){const ne={name:void 0,attributes:[],close:!1,selfClosing:!1,start:H.start,end:H.end};this.data.mdxJsxTagStack||(this.data.mdxJsxTagStack=[]),this.data.mdxJsxTag=ne,this.buffer()}function i(H){if(this.data.mdxJsxTagStack.length===0)throw new Ki("Unexpected closing slash `/` in tag, expected an open tag first",{start:H.start,end:H.end},"mdast-util-mdx-jsx:unexpected-closing-slash")}function o(H){if(this.data.mdxJsxTag.close)throw new Ki("Unexpected attribute in closing tag, expected the end of the tag",{start:H.start,end:H.end},"mdast-util-mdx-jsx:unexpected-attribute")}function a(H){if(this.data.mdxJsxTag.close)throw new Ki("Unexpected self-closing slash `/` in closing tag, expected the end of the tag",{start:H.start,end:H.end},"mdast-util-mdx-jsx:unexpected-self-closing-slash")}function s(){const H=this.data.mdxJsxTag;H.close=!0}function u(H){const ne=this.data.mdxJsxTag;ne.name=this.sliceSerialize(H)}function f(H){const ne=this.data.mdxJsxTag;ne.name+="."+this.sliceSerialize(H)}function g(H){const ne=this.data.mdxJsxTag;ne.name+=":"+this.sliceSerialize(H)}function _(H){const ne=this.data.mdxJsxTag;o.call(this,H),ne.attributes.push({type:"mdxJsxAttribute",name:"",value:null,position:{start:e(H.start),end:void 0}})}function w(H){const ne=this.data.mdxJsxTag;o.call(this,H),ne.attributes.push({type:"mdxJsxExpressionAttribute",value:"",position:{start:e(H.start),end:void 0}}),this.buffer()}function S(H){const ne=this.data.mdxJsxTag,ie=ne.attributes[ne.attributes.length-1];ie.type;const ce=H.estree;ie.value=this.resume(),ie.position,ie.position.end=e(H.end),ce&&(ie.data={estree:ce})}function E(H){const ne=this.data.mdxJsxTag,ie=ne.attributes[ne.attributes.length-1];ie.type,ie.name=this.sliceSerialize(H),ie.position,ie.position.end=e(H.end)}function A(H){const ne=this.data.mdxJsxTag,ie=ne.attributes[ne.attributes.length-1];ie.type,ie.name+=":"+this.sliceSerialize(H),ie.position,ie.position.end=e(H.end)}function R(H){const ne=this.data.mdxJsxTag,ie=ne.attributes[ne.attributes.length-1];ie.value=RR(this.resume(),{nonTerminated:!1}),ie.position,ie.position.end=e(H.end)}function $(H){const ne=this.data.mdxJsxTag,ie=ne.attributes[ne.attributes.length-1];ie.type;const ce={type:"mdxJsxAttributeValueExpression",value:this.resume()},xe=H.estree;xe&&(ce.data={estree:xe}),ie.value=ce,ie.position,ie.position.end=e(H.end)}function z(){const H=this.data.mdxJsxTag;H.selfClosing=!0}function B(H){const ne=this.data.mdxJsxTag,ie=this.data.mdxJsxTagStack,ce=ie[ie.length-1];if(ne.close&&ce.name!==ne.name)throw new Ki("Unexpected closing tag `"+q(ne)+"`, expected corresponding closing tag for `"+q(ce)+"` ("+Rg(ce)+")",{start:H.start,end:H.end},"mdast-util-mdx-jsx:end-tag-mismatch");this.resume(),ne.close?ie.pop():this.enter({type:H.type==="mdxJsxTextTag"?"mdxJsxTextElement":"mdxJsxFlowElement",name:ne.name||null,attributes:ne.attributes,children:[]},H,F),ne.selfClosing||ne.close?this.exit(H,U):ie.push(ne)}function F(H,ne){const ie=this.data.mdxJsxTagStack,ce=ie[ie.length-1],xe=H?" before the end of `"+H.type+"`":"",re=H?{start:H.start,end:H.end}:void 0;throw new Ki("Expected a closing tag for `"+q(ce)+"` ("+Rg({start:ne.start,end:ne.end})+")"+xe,re,"mdast-util-mdx-jsx:end-tag-mismatch")}function U(H,ne){const ie=this.data.mdxJsxTag;throw new Ki("Expected the closing tag `"+q(ie)+"` either after the end of `"+ne.type+"` ("+Rg(ne.end)+") or another opening tag after the start of `"+ne.type+"` ("+Rg(ne.start)+")",{start:H.start,end:H.end},"mdast-util-mdx-jsx:end-tag-mismatch")}function q(H){return"<"+(H.close?"/":"")+(H.name||"")+">"}}function tke(t){const e={},n=e.quote||'"',r=e.quoteSmart||!1,i=e.tightSelfClosing||!1,o=e.printWidth||Number.POSITIVE_INFINITY,a=n==='"'?"'":'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize attribute values with `"+n+"` for `options.quote`, expected `\"`, or `'`");return s.peek=rke,{handlers:{mdxJsxFlowElement:s,mdxJsxTextElement:s},unsafe:[{character:"<",inConstruct:["phrasing"]},{atBreak:!0,character:"<"}],fences:!0,resourceLink:!0};function s(u,f,g,_){const w=u.type==="mdxJsxFlowElement",S=u.name?!u.children||u.children.length===0:!1,E=jK(g),A=VK(E),R=g.createTracker(_),$=g.createTracker(_),z=[],B=(w?A:"")+"<"+(u.name||""),F=g.enter(u.type);if(R.move(B),$.move(B),u.attributes&&u.attributes.length>0){if(!u.name)throw new Error("Cannot serialize fragment w/ attributes");let ie=-1;for(;++ie<u.attributes.length;){const ce=u.attributes[ie];let xe;if(ce.type==="mdxJsxExpressionAttribute")xe="{"+(ce.value||"")+"}";else{if(!ce.name)throw new Error("Cannot serialize attribute w/o name");const re=ce.value,me=ce.name;let Te="";if(re!=null)if(typeof re=="object")Te="{"+(re.value||"")+"}";else{const ye=r&&x5(re,n)>x5(re,a)?a:n;Te=ye+BK(re,{subset:[ye]})+ye}xe=me+(Te?"=":"")+Te}z.push(xe)}}let U=!1;const q=z.join(" ");w&&(/\r?\n|\r/.test(q)||R.current().now.column+q.length+(S?i?2:3:1)>o)&&(U=!0);let H=R,ne=B;if(U){H=$;let ie=-1;for(;++ie<z.length;)z[ie]=A+FK+z[ie];ne+=H.move(`
`+z.join(`
`)+`
`+A)}else q&&(ne+=H.move(" "+q));return S&&(ne+=H.move((i||U?"":" ")+"/")),ne+=H.move(">"),u.children&&u.children.length>0&&(u.type==="mdxJsxTextElement"?ne+=H.move(g.containerPhrasing(u,{...H.current(),before:">",after:"<"})):(H.shift(2),ne+=H.move(`
`),ne+=H.move(nke(u,g,H.current())),ne+=H.move(`
`))),S||(ne+=H.move((w?A:"")+"</"+(u.name||"")+">")),F(),ne}}function nke(t,e,n){const r=e.indexStack,i=t.children,o=e.createTracker(n),a=VK(jK(e)),s=[];let u=-1;for(r.push(-1);++u<i.length;){const f=i[u];r[r.length-1]=u;const g={before:`
`,after:`
`,...o.current()},_=e.handle(f,t,e,g),w=f.type==="mdxJsxFlowElement"?_:e.indentLines(_,function(S,E,A){return(A?"":a)+S});s.push(o.move(w)),f.type!=="list"&&(e.bulletLastUsed=void 0),u<i.length-1&&s.push(o.move(`

`))}return r.pop(),s.join("")}function jK(t){let e=0,n=t.stack.length;for(;--n>-1;){const r=t.stack[n];if(r==="blockquote"||r==="listItem")break;r==="mdxJsxFlowElement"&&e++}return e}function VK(t){return FK.repeat(t)}function rke(){return"<"}var aQ=Object.prototype.hasOwnProperty;function lQ(t,e,n){for(n of t.keys())if(lC(n,e))return n}function lC(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&lC(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(i=r,i&&typeof i=="object"&&(i=lQ(e,i),!i)||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(i=r[0],i&&typeof i=="object"&&(i=lQ(e,i),!i)||!lC(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(aQ.call(t,n)&&++r&&!aQ.call(e,n)||!(n in e)||!lC(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}var ike={};let i4,QK,UK,ZK,qK=!0;typeof process<"u"&&({FORCE_COLOR:i4,NODE_DISABLE_COLORS:QK,NO_COLOR:UK,TERM:ZK}=ike||{},qK=process.stdout&&process.stdout.isTTY);const ei={enabled:!QK&&UK==null&&ZK!=="dumb"&&(i4!=null&&i4!=="0"||qK),reset:wo(0,0),bold:wo(1,22),dim:wo(2,22),italic:wo(3,23),underline:wo(4,24),inverse:wo(7,27),hidden:wo(8,28),strikethrough:wo(9,29),black:wo(30,39),red:wo(31,39),green:wo(32,39),yellow:wo(33,39),blue:wo(34,39),magenta:wo(35,39),cyan:wo(36,39),white:wo(37,39),gray:wo(90,39),grey:wo(90,39),bgBlack:wo(40,49),bgRed:wo(41,49),bgGreen:wo(42,49),bgYellow:wo(43,49),bgBlue:wo(44,49),bgMagenta:wo(45,49),bgCyan:wo(46,49),bgWhite:wo(47,49)};function cQ(t,e){let n=0,r,i="",o="";for(;n<t.length;n++)r=t[n],i+=r.open,o+=r.close,~e.indexOf(r.close)&&(e=e.replace(r.rgx,r.close+r.open));return i+e+o}function oke(t,e){let n={has:t,keys:e};return n.reset=ei.reset.bind(n),n.bold=ei.bold.bind(n),n.dim=ei.dim.bind(n),n.italic=ei.italic.bind(n),n.underline=ei.underline.bind(n),n.inverse=ei.inverse.bind(n),n.hidden=ei.hidden.bind(n),n.strikethrough=ei.strikethrough.bind(n),n.black=ei.black.bind(n),n.red=ei.red.bind(n),n.green=ei.green.bind(n),n.yellow=ei.yellow.bind(n),n.blue=ei.blue.bind(n),n.magenta=ei.magenta.bind(n),n.cyan=ei.cyan.bind(n),n.white=ei.white.bind(n),n.gray=ei.gray.bind(n),n.grey=ei.grey.bind(n),n.bgBlack=ei.bgBlack.bind(n),n.bgRed=ei.bgRed.bind(n),n.bgGreen=ei.bgGreen.bind(n),n.bgYellow=ei.bgYellow.bind(n),n.bgBlue=ei.bgBlue.bind(n),n.bgMagenta=ei.bgMagenta.bind(n),n.bgCyan=ei.bgCyan.bind(n),n.bgWhite=ei.bgWhite.bind(n),n}function wo(t,e){let n={open:`\x1B[${t}m`,close:`\x1B[${e}m`,rgx:new RegExp(`\\x1b\\[${e}m`,"g")};return function(r){return this!==void 0&&this.has!==void 0?(~this.has.indexOf(t)||(this.has.push(t),this.keys.push(n)),r===void 0?this:ei.enabled?cQ(this.keys,r+""):r+""):r===void 0?oke([t],[n]):ei.enabled?cQ([n],r+""):r+""}}function K0(){}K0.prototype={diff:function(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={}),this.options=i;var a=this;function s(F){return o?(setTimeout(function(){o(void 0,F)},0),!0):F}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var u=n.length,f=e.length,g=1,_=u+f;i.maxEditLength&&(_=Math.min(_,i.maxEditLength));var w=(r=i.timeout)!==null&&r!==void 0?r:1/0,S=Date.now()+w,E=[{oldPos:-1,lastComponent:void 0}],A=this.extractCommon(E[0],n,e,0);if(E[0].oldPos+1>=f&&A+1>=u)return s([{value:this.join(n),count:n.length}]);var R=-1/0,$=1/0;function z(){for(var F=Math.max(R,-g);F<=Math.min($,g);F+=2){var U=void 0,q=E[F-1],H=E[F+1];q&&(E[F-1]=void 0);var ne=!1;if(H){var ie=H.oldPos-F;ne=H&&0<=ie&&ie<u}var ce=q&&q.oldPos+1<f;if(!ne&&!ce){E[F]=void 0;continue}if(!ce||ne&&q.oldPos+1<H.oldPos?U=a.addToPath(H,!0,void 0,0):U=a.addToPath(q,void 0,!0,1),A=a.extractCommon(U,n,e,F),U.oldPos+1>=f&&A+1>=u)return s(ske(a,U.lastComponent,n,e,a.useLongestToken));E[F]=U,U.oldPos+1>=f&&($=Math.min($,F-1)),A+1>=u&&(R=Math.max(R,F+1))}g++}if(o)(function F(){setTimeout(function(){if(g>_||Date.now()>S)return o();z()||F()},0)})();else for(;g<=_&&Date.now()<=S;){var B=z();if(B)return B}},addToPath:function(e,n,r,i){var o=e.lastComponent;return o&&o.added===n&&o.removed===r?{oldPos:e.oldPos+i,lastComponent:{count:o.count+1,added:n,removed:r,previousComponent:o.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:o}}},extractCommon:function(e,n,r,i){for(var o=n.length,a=r.length,s=e.oldPos,u=s-i,f=0;u+1<o&&s+1<a&&this.equals(n[u+1],r[s+1]);)u++,s++,f++;return f&&(e.lastComponent={count:f,previousComponent:e.lastComponent}),e.oldPos=s,u},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function ske(t,e,n,r,i){for(var o=[],a;e;)o.push(e),a=e.previousComponent,delete e.previousComponent,e=a;o.reverse();for(var s=0,u=o.length,f=0,g=0;s<u;s++){var _=o[s];if(_.removed){if(_.value=t.join(r.slice(g,g+_.count)),g+=_.count,s&&o[s-1].added){var S=o[s-1];o[s-1]=o[s],o[s]=S}}else{if(!_.added&&i){var w=n.slice(f,f+_.count);w=w.map(function(A,R){var $=r[g+R];return $.length>A.length?$:A}),_.value=t.join(w)}else _.value=t.join(n.slice(f,f+_.count));f+=_.count,_.added||(g+=_.count)}}var E=o[u-1];return u>1&&typeof E.value=="string"&&(E.added||E.removed)&&t.equals("",E.value)&&(o[u-2].value+=E.value,o.pop()),o}var uQ=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,hQ=/\S/,WK=new K0;WK.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!hQ.test(t)&&!hQ.test(e)};WK.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&uQ.test(e[n])&&uQ.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};var HK=new K0;HK.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};var ake=new K0;ake.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var lke=new K0;lke.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function pP(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pP=function(e){return typeof e}:pP=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pP(t)}var cke=Object.prototype.toString,HC=new K0;HC.useLongestToken=!0;HC.tokenize=HK.tokenize;HC.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(o,a){return typeof a>"u"?n:a}:r;return typeof t=="string"?t:JSON.stringify(o4(t,null,null,i),i,"  ")};HC.equals=function(t,e){return K0.prototype.equals.call(HC,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function o4(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return n[o];var a;if(cke.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),n.push(a),o=0;o<t.length;o+=1)a[o]=o4(t[o],e,n,r,i);return e.pop(),n.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),pP(t)==="object"&&t!==null){e.push(t),a={},n.push(a);var s=[],u;for(u in t)t.hasOwnProperty(u)&&s.push(u);for(s.sort(),o=0;o<s.length;o+=1)u=s[o],a[u]=o4(t[u],e,n,r,u);e.pop(),n.pop()}else a=t;return a}var s4=new K0;s4.tokenize=function(t){return t.slice()};s4.join=s4.removeEmpty=function(t){return t};ei.red,ei.grey,ei.green;ei.dim().italic;ei.dim("");ei.dim("");ei.dim("");function w5(t){t=t.replace(/\r?\n/g,`
`);let e=t.match(/^[ \t]*(?=\S)/gm),n=0,r=1/0,i=(e||[]).length;for(;n<i;n++)r=Math.min(r,e[n].length);return i&&r?t.replace(new RegExp(`^[ \\t]{${r}}`,"gm"),""):t}class uke extends Error{constructor(e={}){super(e.message),this.name="Assertion",this.code="ERR_ASSERTION",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.details=e.details||!1,this.generated=!!e.generated,this.operator=e.operator,this.expects=e.expects,this.actual=e.actual}}function Hh(t,e,n,r,i,o,a){if(t)return;let s=a||o;if(a instanceof Error)throw a;let u=i;throw new uke({actual:e,expects:n,operator:r,message:s,details:u,generated:!a})}function hke(t,e){Hh(!!t,!1,!0,"ok",!1,"Expected value to be truthy",e)}function Wg(t,e){Hh(!t,!0,!1,"not",!1,"Expected value to be falsey",e)}Wg.ok=Wg;Wg.equal=function(t,e,n){Hh(!lC(t,e),t,e,"not.equal",!1,"Expected values not to be deeply equal",n)};Wg.type=function(t,e,n){let r=typeof t;Hh(r!==e,r,e,"not.type",!1,`Expected "${r}" not to be "${e}"`,n)};Wg.instance=function(t,e,n){let r="`"+(e.name||e.constructor.name)+"`";Hh(!(t instanceof e),t,e,"not.instance",!1,`Expected value not to be an instance of ${r}`,n)};Wg.snapshot=function(t,e,n){t=w5(t),e=w5(e),Hh(t!==e,t,e,"not.snapshot",!1,"Expected value not to match snapshot",n)};Wg.fixture=function(t,e,n){t=w5(t),e=w5(e),Hh(t!==e,t,e,"not.fixture",!1,"Expected value not to match fixture",n)};Wg.match=function(t,e,n){typeof e=="string"?Hh(!t.includes(e),t,e,"not.match",!1,`Expected value not to include "${e}" substring`,n):Hh(!e.test(t),t,e,"not.match",!1,`Expected value not to match \`${String(e)}\` pattern`,n)};Wg.throws=function(t,e,n){!n&&typeof e=="string"&&(n=e,e=null);try{t()}catch(r){typeof e=="function"?Hh(!e(r),!0,!1,"not.throws",!1,"Expected function not to throw matching exception",n):e instanceof RegExp?Hh(!e.test(r.message),!0,!1,"not.throws",!1,`Expected function not to throw exception matching \`${String(e)}\` pattern`,n):e||Hh(!1,!0,!1,"not.throws",!1,"Expected function not to throw",n)}};const kl={eof:null,exclamationMark:33,dash:45,equalsTo:61,greaterThan:62},dQ={attentionSideAfter:2},Tg={data:"data",lineEnding:"lineEnding",linePrefix:"linePrefix",characterEscape:"characterEscape"};var p2="highlightSequenceTemporary",fQ="highlightSequence",dke="highlight",fke="highlightText";function pke(){const t={name:"highlight",tokenize:n,resolveAll:e};return{text:{[kl.equalsTo]:t},insideSpan:{null:[t]},attentionMarkers:{null:[kl.equalsTo]}};function e(r,i){let o=-1;for(;++o<r.length;)if(r[o][0]==="enter"&&r[o][1].type===p2&&r[o][1]._close){let a=o;for(;a--;)if(r[a][0]==="exit"&&r[a][1].type===p2&&r[a][1]._open&&r[o][1].end.offset-r[o][1].start.offset===r[a][1].end.offset-r[a][1].start.offset){r[o][1].type=fQ,r[a][1].type=fQ;const s={type:dke,start:Object.assign({},r[a][1].start),end:Object.assign({},r[o][1].end)},u={type:fke,start:Object.assign({},r[a][1].end),end:Object.assign({},r[o][1].start)},f=[["enter",s,i],["enter",r[a][1],i],["exit",r[a][1],i],["enter",u,i]],g=i.parser.constructs.insideSpan.null;g&&Ml(f,f.length,0,sk(g,r.slice(a+1,o),i)),Ml(f,f.length,0,[["exit",u,i],["enter",r[o][1],i],["exit",r[o][1],i],["exit",s,i]]),Ml(r,a-1,o-a+3,f),o=a+f.length-2;break}}for(o=-1;++o<r.length;)r[o][1].type===p2&&(r[o][1].type=Tg.data);return r}function n(r,i,o){const a=this.previous,s=this.events;let u=0;return f;function f(_){return hke(_===kl.equalsTo,"expected `=`"),a===kl.equalsTo&&s[s.length-1][1].type!==Tg.characterEscape?o(_):(r.enter(p2),g(_))}function g(_){const w=z0(a);if(_===kl.equalsTo)return u>1?o(_):(r.consume(_),u++,g);if(u<2)return o(_);const S=r.exit(p2),E=z0(_);return S._open=!E||E===dQ.attentionSideAfter&&!!w,S._close=!w||w===dQ.attentionSideAfter&&!!E,i(_)}}}const mke=/[$_\p{ID_Start}]/u,gke=/[$_\u{200C}\u{200D}\p{ID_Continue}]/u,yke=/[-$_\u{200C}\u{200D}\p{ID_Continue}]/u,vke={};function Jd(t){return t?mke.test(String.fromCodePoint(t)):!1}function m2(t,e){const r=(e||vke).jsx?yke:gke;return t?r.test(String.fromCodePoint(t)):!1}function Cr(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return a;function a(u){return pr(u)?(t.enter(n),s(u)):e(u)}function s(u){return pr(u)&&o++<i?(t.consume(u),s):(t.exit(n),e(u))}}const _ke={}.hasOwnProperty,bke=Symbol("continue"),G3=Symbol("exit"),xke=Symbol("skip");function wke(t,e){let n,r;typeof e=="function"?n=e:e&&typeof e=="object"&&(e.enter&&(n=e.enter),e.leave&&(r=e.leave)),i(t,void 0,void 0,[])();function i(o,a,s,u){return X3(o)&&(f.displayName="node ("+o.type+")"),f;function f(){const g=n?pQ(n(o,a,s,u)):[];if(g[0]===G3)return g;if(g[0]!==xke){let _;for(_ in o)if(_ke.call(o,_)&&o[_]&&typeof o[_]=="object"&&_!=="data"&&_!=="position"){const w=u.concat(o),S=o[_];if(Array.isArray(S)){const E=S;let A=0;for(;A>-1&&A<E.length;){const R=E[A];if(X3(R)){const $=i(R,_,A,w)();if($[0]===G3)return $;A=typeof $[1]=="number"?$[1]:A+1}else A++}}else if(X3(S)){const E=i(S,_,void 0,w)();if(E[0]===G3)return E}}}return r?pQ(r(o,a,s,u)):g}}}function pQ(t){return Array.isArray(t)?t:typeof t=="number"?[bke,t]:[t]}function X3(t){return!!(t&&typeof t=="object"&&"type"in t&&typeof t.type=="string"&&t.type.length>0)}function Oke(t,e){const n=e.prefix||"",r=e.suffix||"",i=Object.assign({},e.acornOptions),o=[],a=[],s=i.onComment,u=i.onToken;let f=!1,g,_;const w=Object.assign({},i,{onComment:o,preserveParens:!0});u&&(w.onToken=a);const S=Ske(t,e.tokenTypes),E=S.value,A=n+E+r,R=mQ(E);if(R&&!e.allowEmpty)throw new Ki("Unexpected empty expression",{place:z(0),ruleId:"unexpected-empty-expression",source:"micromark-extension-mdx-expression"});try{g=e.expression&&!R?e.acorn.parseExpressionAt(A,0,w):e.acorn.parse(A,w)}catch(B){const F=B,U=z(F.pos);F.message=String(F.message).replace(/ \(\d+:\d+\)$/,""),F.pos=U.offset,F.loc={line:U.line,column:U.column-1},_=F,f=F.raisedAt>=n.length+E.length||F.message==="Unterminated comment"}if(g&&e.expression&&!R)if(mQ(A.slice(g.end,A.length-r.length)))g={type:"Program",start:0,end:n.length+E.length,body:[{type:"ExpressionStatement",expression:g,start:0,end:n.length+E.length}],sourceType:"module",comments:[]};else{const B=z(g.end),F=new Error("Unexpected content after expression");F.pos=B.offset,F.loc={line:B.line,column:B.column-1},_=F,g=void 0}if(g){if(g.comments=o,wke(g,function(B,F,U,q){let H=q[q.length-1],ne=F;B.type==="ParenthesizedExpression"&&H&&ne&&(typeof U=="number"&&(H=H[ne],ne=U),H[ne]=B.expression),$(B)}),Array.isArray(s))s.push(...o);else if(typeof s=="function")for(const B of o)s(B.type==="Block",B.value,B.start,B.end,B.loc.start,B.loc.end);for(const B of a)B.end<=n.length||B.start-n.length>=E.length||($(B),Array.isArray(u)?u.push(B):u(B))}return{estree:g,error:_,swallow:f};function $(B){const F=z(B.start),U=z(B.end);B.start=F.offset,B.end=U.offset,B.loc={start:{line:F.line,column:F.column-1,offset:F.offset},end:{line:U.line,column:U.column-1,offset:U.offset}},B.range=[B.start,B.end]}function z(B){let F=B-n.length;F<0?F=0:F>E.length&&(F=E.length);let U=Cke(S.stops,F);return U||(U={line:e.start.line,column:e.start.column,offset:e.start.offset}),U}}function mQ(t){return/^\s*$/.test(t.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/[^\r\n]*(\r\n|\n|\r)/g,""))}function Ske(t,e){const n={value:"",stops:[]};let r=-1;for(;++r<t.length;){const i=t[r];if(i[0]==="enter"){const o=i[1].type;if(o==="lineEnding"||e.includes(o)){const a=i[2].sliceStream(i[1]);for(;a.length>0&&a[0]===-1;)a.shift();const s=Tke(a);n.stops.push([n.value.length,i[1].start]),n.value+=s,n.stops.push([n.value.length,i[1].end])}}}return n}function Cke(t,e){let n=0;for(;n<t.length&&t[n][0]<=e;)n+=1;if(n===0)return;const[r,i]=t[n-1],o=e-r;return{line:i.line,column:i.column+o,offset:i.offset+o}}function Tke(t){let e=-1;const n=[];let r;for(;++e<t.length;){const i=t[e];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o="	";break}case-1:{if(r)continue;o=" ";break}default:o=String.fromCharCode(i)}r=i===-2,n.push(o)}return n.join("")}function Y3(t){const e=t||{},n=e.loc||{},r=e.range||[void 0,void 0],i=gQ(n.start,r[0]||e.start),o=gQ(n.end,r[1]||e.end);if(i&&o)return{start:i,end:o}}function gQ(t,e){if(t&&typeof t=="object"){const n="line"in t?K3(t.line):void 0,r="column"in t?K3(t.column):void 0;if(n&&r!==void 0)return{line:n,column:r+1,offset:K3(e)}}}function K3(t){return typeof t=="number"&&t>-1?t:void 0}const kke=2,V1="https://github.com/micromark/micromark-extension-mdx-expression/tree/main/packages/micromark-extension-mdx-expression",Eke="#unexpected-end-of-file-in-expression-expected-a-corresponding-closing-brace-for-",Ake="#unexpected-lazy-line-in-expression-in-container-expected-line-to-be-prefixed",yQ="#unexpected-type-in-code-expected-an-object-spread-spread",Pke="#unexpected-extra-content-in-spread-only-a-single-spread-is-supported",Mke="#could-not-parse-expression-with-acorn";function vQ(t,e,n,r,i,o,a,s,u,f,g){const _=this,w=this.events.length+3;let S=0,E,A;return R;function R(F){return t.enter(n),t.enter(r),t.consume(F),t.exit(r),E=_.now(),$}function $(F){if(F===null){if(A)throw A;const U=new Ki("Unexpected end of file in expression, expected a corresponding closing brace for `{`",{place:_.now(),ruleId:"unexpected-eof",source:"micromark-extension-mdx-expression"});throw U.url=V1+Eke,U}if(Sn(F))return t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),B;if(F===125&&S===0){const U=o?Rke.call(_,o,a,i,w,E,f||!1,u||!1):{type:"ok",estree:void 0};if(U.type==="ok"){t.enter(r),t.consume(F),t.exit(r);const q=t.exit(n);return s&&U.estree&&Object.assign(q,{estree:U.estree}),e}return A=U.message,t.enter(i),t.consume(F),z}return t.enter(i),z(F)}function z(F){return F===125&&S===0||F===null||Sn(F)?(t.exit(i),$(F)):(F===123&&!o?S+=1:F===125&&(S-=1),t.consume(F),z)}function B(F){const U=_.now();if(U.line!==E.line&&!g&&_.parser.lazy[U.line]){const q=new Ki("Unexpected lazy line in expression in container, expected line to be prefixed with `>` when in a block quote, whitespace when in a list, etc",{place:_.now(),ruleId:"unexpected-lazy",source:"micromark-extension-mdx-expression"});throw q.url=V1+Ake,q}return pr(F)?Cr(t,$,"linePrefix",kke+1)(F):$(F)}}function Rke(t,e,n,r,i,o,a){const s=Oke(this.events.slice(r),{acorn:t,tokenTypes:[n],acornOptions:e,start:i,expression:!0,allowEmpty:o,prefix:a?"({":"",suffix:a?"})":""}),u=s.estree;if(a&&u){const f=u.body[0];if(f.type!=="ExpressionStatement"||f.expression.type!=="ObjectExpression"){const g=Y3(f),_=new Ki("Unexpected `"+f.type+"` in code: expected an object spread (`{...spread}`)",{place:g.start,ruleId:"non-spread",source:"micromark-extension-mdx-expression"});throw _.url=V1+yQ,_}if(f.expression.properties[1]){const g=Y3(f.expression.properties[1]),_=new Ki("Unexpected extra content in spread: only a single spread is supported",{place:g.start,ruleId:"spread-extra",source:"micromark-extension-mdx-expression"});throw _.url=V1+Pke,_}if(f.expression.properties[0]&&f.expression.properties[0].type!=="SpreadElement"){const g=Y3(f.expression.properties[0]),_=new Ki("Unexpected `"+f.expression.properties[0].type+"` in code: only spread elements are supported",{place:g.start,ruleId:"non-spread",source:"micromark-extension-mdx-expression"});throw _.url=V1+yQ,_}}if(s.error){const f=new Ki("Could not parse expression with acorn",{cause:s.error,place:{line:s.error.loc.line,column:s.error.loc.column+1,offset:s.error.pos},ruleId:"acorn",source:"micromark-extension-mdx-expression"});return f.url=V1+Mke,{type:"nok",message:f}}return{type:"ok",estree:u}}const _Q="https://github.com/micromark/micromark-extension-mdx-jsx";function GK(t,e,n,r,i,o,a,s,u,f,g,_,w,S,E,A,R,$,z,B,F,U,q,H,ne,ie,ce,xe,re,me,Te,ye){const _e=this;let ke,Ne;return Qe;function Qe(Y){return t.enter(s),t.enter(u),t.consume(Y),t.exit(u),Se}function Se(Y){return Ci(Y)?n(Y):(ke=Me,Et(Y))}function Me(Y){if(Y===47)return t.enter(f),t.consume(Y),t.exit(f),ke=Xe,Et;if(Y===62)return xt(Y);if(Y!==null&&Y>=0&&Jd(Y))return t.enter(_),t.enter(w),t.consume(Y),Ee;ae(Y,"before name","a character that can start a name, such as a letter, `$`, or `_`"+(Y===33?" (note: to create a comment in MDX, use `{/* text */}`)":""))}function Xe(Y){if(Y===62)return xt(Y);if(Y!==null&&Y>=0&&Jd(Y))return t.enter(_),t.enter(w),t.consume(Y),Ee;ae(Y,"before name","a character that can start a name, such as a letter, `$`, or `_`"+(Y===42||Y===47?" (note: JS comments in JSX tags are not supported in MDX)":""))}function Ee(Y){if(Y!==null&&Y>=0&&m2(Y,{jsx:!0}))return t.consume(Y),Ee;if(Y===46||Y===47||Y===58||Y===62||Y===123||Ci(Y)||Og(Y))return t.exit(w),ke=ft,Et(Y);ae(Y,"in name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag"+(Y===64?" (note: to create a link in MDX, use `[text](url)`)":""))}function ft(Y){if(Y===46)return t.enter(S),t.consume(Y),t.exit(S),ke=mt,Et;if(Y===58)return t.enter(A),t.consume(Y),t.exit(A),ke=bt,Et;if(Y===47||Y===62||Y===123||Y!==null&&Y>=0&&Jd(Y))return t.exit(_),Wt(Y);ae(Y,"after name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function mt(Y){if(Y!==null&&Y>=0&&Jd(Y))return t.enter(E),t.consume(Y),ct;ae(Y,"before member name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function ct(Y){if(Y!==null&&Y>=0&&m2(Y,{jsx:!0}))return t.consume(Y),ct;if(Y===46||Y===47||Y===62||Y===123||Ci(Y)||Og(Y))return t.exit(E),ke=st,Et(Y);ae(Y,"in member name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag"+(Y===64?" (note: to create a link in MDX, use `[text](url)`)":""))}function st(Y){if(Y===46)return t.enter(S),t.consume(Y),t.exit(S),ke=mt,Et;if(Y===47||Y===62||Y===123||Y!==null&&Y>=0&&Jd(Y))return t.exit(_),Wt(Y);ae(Y,"after member name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function bt(Y){if(Y!==null&&Y>=0&&Jd(Y))return t.enter(R),t.consume(Y),At;ae(Y,"before local name","a character that can start a name, such as a letter, `$`, or `_`"+(Y===43||Y!==null&&Y>46&&Y<58?" (note: to create a link in MDX, use `[text](url)`)":""))}function At(Y){if(Y!==null&&Y>=0&&m2(Y,{jsx:!0}))return t.consume(Y),At;if(Y===47||Y===62||Y===123||Ci(Y)||Og(Y))return t.exit(R),ke=Tt,Et(Y);ae(Y,"in local name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag")}function Tt(Y){if(Y===47||Y===62||Y===123||Y!==null&&Y>=0&&Jd(Y))return t.exit(_),Wt(Y);ae(Y,"after local name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function Wt(Y){if(Y===47)return t.enter(g),t.consume(Y),t.exit(g),ke=Je,Et;if(Y===62)return xt(Y);if(Y===123)return vQ.call(_e,t,nn,$,z,B,r,i,o,!0,!1,a)(Y);if(Y!==null&&Y>=0&&Jd(Y))return t.enter(F),t.enter(U),t.enter(q),t.consume(Y),An;ae(Y,"before attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function nn(Y){return ke=Wt,Et(Y)}function An(Y){if(Y!==null&&Y>=0&&m2(Y,{jsx:!0}))return t.consume(Y),An;if(Y===47||Y===58||Y===61||Y===62||Y===123||Ci(Y)||Og(Y))return t.exit(q),ke=rn,Et(Y);ae(Y,"in attribute name","an attribute name character such as letters, digits, `$`, or `_`; `=` to initialize a value; whitespace before attributes; or the end of the tag")}function rn(Y){if(Y===58)return t.enter(H),t.consume(Y),t.exit(H),ke=Jt,Et;if(Y===61)return t.exit(U),t.enter(ie),t.consume(Y),t.exit(ie),ke=Nn,Et;if(Y===47||Y===62||Y===123||Ci(Y)||Og(Y)||Y!==null&&Y>=0&&Jd(Y))return t.exit(U),t.exit(F),ke=Wt,Et(Y);ae(Y,"after attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function Jt(Y){if(Y!==null&&Y>=0&&Jd(Y))return t.enter(ne),t.consume(Y),Mn;ae(Y,"before local attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function Mn(Y){if(Y!==null&&Y>=0&&m2(Y,{jsx:!0}))return t.consume(Y),Mn;if(Y===47||Y===61||Y===62||Y===123||Ci(Y)||Og(Y))return t.exit(ne),t.exit(U),ke=vn,Et(Y);ae(Y,"in local attribute name","an attribute name character such as letters, digits, `$`, or `_`; `=` to initialize a value; whitespace before attributes; or the end of the tag")}function vn(Y){if(Y===61)return t.enter(ie),t.consume(Y),t.exit(ie),ke=Nn,Et;if(Y===47||Y===62||Y===123||Y!==null&&Y>=0&&Jd(Y))return t.exit(F),Wt(Y);ae(Y,"after local attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function Nn(Y){if(Y===34||Y===39)return t.enter(ce),t.enter(xe),t.consume(Y),t.exit(xe),Ne=Y,rr;if(Y===123)return vQ.call(_e,t,lr,me,Te,ye,r,i,o,!1,!1,a)(Y);ae(Y,"before attribute value","a character that can start an attribute value, such as `\"`, `'`, or `{`"+(Y===60?" (note: to use an element or fragment as a prop value in MDX, use `{<element />}`)":""))}function lr(Y){return t.exit(F),ke=Wt,Et(Y)}function rr(Y){return Y===null&&ae(Y,"in attribute value","a corresponding closing quote `"+String.fromCodePoint(Ne)+"`"),Y===Ne?(t.enter(xe),t.consume(Y),t.exit(xe),t.exit(ce),t.exit(F),Ne=void 0,ke=Wt,Et):Sn(Y)?(ke=rr,Et(Y)):(t.enter(re),Ue(Y))}function Ue(Y){return Y===null||Y===Ne||Sn(Y)?(t.exit(re),rr(Y)):(t.consume(Y),Ue)}function Je(Y){if(Y===62)return xt(Y);ae(Y,"after self-closing slash","`>` to end the tag"+(Y===42||Y===47?" (note: JS comments in JSX tags are not supported in MDX)":""))}function xt(Y){return t.enter(u),t.consume(Y),t.exit(u),t.exit(s),e}function Et(Y){return Sn(Y)?(t.enter("lineEnding"),t.consume(Y),t.exit("lineEnding"),we):pr(Y)||Og(Y)?(t.enter("esWhitespace"),Vt(Y)):ke(Y)}function Vt(Y){return Sn(Y)?(t.exit("esWhitespace"),Et(Y)):pr(Y)||Og(Y)?(t.consume(Y),Vt):(t.exit("esWhitespace"),ke(Y))}function we(Y){if(!a&&_e.parser.lazy[_e.now().line]){const be=new Ki("Unexpected lazy line in container, expected line to be prefixed with `>` when in a block quote, whitespace when in a list, etc",_e.now(),"micromark-extension-mdx-jsx:unexpected-lazy");throw be.url=_Q+"#unexpected-lazy-line-in-container-expected-line-to-be",be}return Et(Y)}function ae(Y,be,$e){const ze=new Ki("Unexpected "+(Y===null?"end of file":"character `"+(Y===96?"` ` `":String.fromCodePoint(Y))+"` ("+Ike(Y)+")")+" "+be+", expected "+$e,_e.now(),"micromark-extension-mdx-jsx:unexpected-"+(Y===null?"eof":"character"));throw ze.url=_Q+(Y===null?"#unexpected-end-of-file-at-expected-expect":"#unexpected-character-at-expected-expect"),ze}}function Ike(t){return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function Dke(t,e){return{name:"mdxJsxTextTag",tokenize:n};function n(r,i,o){return GK.call(this,r,i,o,t,e.acornOptions,e.addResult,!0,"mdxJsxTextTag","mdxJsxTextTagMarker","mdxJsxTextTagClosingMarker","mdxJsxTextTagSelfClosingMarker","mdxJsxTextTagName","mdxJsxTextTagNamePrimary","mdxJsxTextTagNameMemberMarker","mdxJsxTextTagNameMember","mdxJsxTextTagNamePrefixMarker","mdxJsxTextTagNameLocal","mdxJsxTextTagExpressionAttribute","mdxJsxTextTagExpressionAttributeMarker","mdxJsxTextTagExpressionAttributeValue","mdxJsxTextTagAttribute","mdxJsxTextTagAttributeName","mdxJsxTextTagAttributeNamePrimary","mdxJsxTextTagAttributeNamePrefixMarker","mdxJsxTextTagAttributeNameLocal","mdxJsxTextTagAttributeInitializerMarker","mdxJsxTextTagAttributeValueLiteral","mdxJsxTextTagAttributeValueLiteralMarker","mdxJsxTextTagAttributeValueLiteralValue","mdxJsxTextTagAttributeValueExpression","mdxJsxTextTagAttributeValueExpressionMarker","mdxJsxTextTagAttributeValueExpressionValue")}}function Lke(t,e){return{concrete:!0,name:"mdxJsxFlowTag",tokenize:n};function n(r,i,o){const a=this;return s;function s(_){return u(_)}function u(_){return GK.call(a,r,f,o,t,e.acornOptions,e.addResult,!1,"mdxJsxFlowTag","mdxJsxFlowTagMarker","mdxJsxFlowTagClosingMarker","mdxJsxFlowTagSelfClosingMarker","mdxJsxFlowTagName","mdxJsxFlowTagNamePrimary","mdxJsxFlowTagNameMemberMarker","mdxJsxFlowTagNameMember","mdxJsxFlowTagNamePrefixMarker","mdxJsxFlowTagNameLocal","mdxJsxFlowTagExpressionAttribute","mdxJsxFlowTagExpressionAttributeMarker","mdxJsxFlowTagExpressionAttributeValue","mdxJsxFlowTagAttribute","mdxJsxFlowTagAttributeName","mdxJsxFlowTagAttributeNamePrimary","mdxJsxFlowTagAttributeNamePrefixMarker","mdxJsxFlowTagAttributeNameLocal","mdxJsxFlowTagAttributeInitializerMarker","mdxJsxFlowTagAttributeValueLiteral","mdxJsxFlowTagAttributeValueLiteralMarker","mdxJsxFlowTagAttributeValueLiteralValue","mdxJsxFlowTagAttributeValueExpression","mdxJsxFlowTagAttributeValueExpressionMarker","mdxJsxFlowTagAttributeValueExpressionValue")(_)}function f(_){return pr(_)?Cr(r,g,"whitespace")(_):g(_)}function g(_){const w=a.parser.constructs.flow[123],S=Array.isArray(w)?w:w?[w]:[];let E;for(const A of S)if(A.name==="mdxFlowExpression"){E=A;break}return _===60?s(_):_===123&&E?r.attempt(E,g,o)(_):_===null||Sn(_)?i(_):o(_)}}}function $ke(t){const e={},n=e.acorn;let r;if(n){if(!n.parse||!n.parseExpressionAt)throw new Error("Expected a proper `acorn` instance passed in as `options.acorn`");r=Object.assign({ecmaVersion:2024,sourceType:"module"},e.acornOptions,{locations:!0})}else if(e.acornOptions||e.addResult)throw new Error("Expected an `acorn` instance passed in as `options.acorn`");return{flow:{60:Lke(n||void 0,{acornOptions:r,addResult:e.addResult||void 0})},text:{60:Dke(n||void 0,{acornOptions:r,addResult:e.addResult||void 0})}}}function zke(){return{disable:{null:["autolink","codeIndented","htmlFlow","htmlText"]}}}const bQ={}.hasOwnProperty;function Nke(t,e){const n=e||{};function r(i,...o){let a=r.invalid;const s=r.handlers;if(i&&bQ.call(i,t)){const u=String(i[t]);a=bQ.call(s,u)?s[u]:r.unknown}if(a)return a.call(this,i,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Bke={}.hasOwnProperty;function XK(t,e){let n=-1,r;if(e.extensions)for(;++n<e.extensions.length;)XK(t,e.extensions[n]);for(r in e)if(Bke.call(e,r))switch(r){case"extensions":break;case"unsafe":{xQ(t[r],e[r]);break}case"join":{xQ(t[r],e[r]);break}case"handlers":{Fke(t[r],e[r]);break}default:t.options[r]=e[r]}return t}function xQ(t,e){e&&t.push(...e)}function Fke(t,e){e&&Object.assign(t,e)}function jke(t,e,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const a=n.indentLines(n.containerFlow(t,o.current()),Vke);return i(),a}function Vke(t,e,n){return">"+(n?"":" ")+t}function YK(t,e){return wQ(t,e.inConstruct,!0)&&!wQ(t,e.notInConstruct,!1)}function wQ(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function OQ(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&YK(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Qke(t,e){const n=String(t);let r=n.indexOf(e),i=r,o=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>a&&(a=o):o=1,i=r+e.length,r=n.indexOf(e,i);return a}function a4(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Uke(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Zke(t,e,n,r){const i=Uke(n),o=t.value||"",a=i==="`"?"GraveAccent":"Tilde";if(a4(t,n)){const _=n.enter("codeIndented"),w=n.indentLines(o,qke);return _(),w}const s=n.createTracker(r),u=i.repeat(Math.max(Qke(o,i)+1,3)),f=n.enter("codeFenced");let g=s.move(u);if(t.lang){const _=n.enter(`codeFencedLang${a}`);g+=s.move(n.safe(t.lang,{before:g,after:" ",encode:["`"],...s.current()})),_()}if(t.lang&&t.meta){const _=n.enter(`codeFencedMeta${a}`);g+=s.move(" "),g+=s.move(n.safe(t.meta,{before:g,after:`
`,encode:["`"],...s.current()})),_()}return g+=s.move(`
`),o&&(g+=s.move(o+`
`)),g+=s.move(u),f(),g}function qke(t,e,n){return(n?"":"    ")+t}function c8(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Wke(t,e,n,r){const i=c8(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let s=n.enter("label");const u=n.createTracker(r);let f=u.move("[");return f+=u.move(n.safe(n.associationId(t),{before:f,after:"]",...u.current()})),f+=u.move("]: "),s(),!t.url||/[\0- \u007F]/.test(t.url)?(s=n.enter("destinationLiteral"),f+=u.move("<"),f+=u.move(n.safe(t.url,{before:f,after:">",...u.current()})),f+=u.move(">")):(s=n.enter("destinationRaw"),f+=u.move(n.safe(t.url,{before:f,after:t.title?" ":`
`,...u.current()}))),s(),t.title&&(s=n.enter(`title${o}`),f+=u.move(" "+i),f+=u.move(n.safe(t.title,{before:f,after:i,...u.current()})),f+=u.move(i),s()),a(),f}function Hke(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function N0(t){return"&#x"+t.toString(16).toUpperCase()+";"}function O5(t,e,n){const r=z0(t),i=z0(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}KK.peek=Gke;function KK(t,e,n,r){const i=Hke(n),o=n.enter("emphasis"),a=n.createTracker(r),s=a.move(i);let u=a.move(n.containerPhrasing(t,{after:i,before:s,...a.current()}));const f=u.charCodeAt(0),g=O5(r.before.charCodeAt(r.before.length-1),f,i);g.inside&&(u=N0(f)+u.slice(1));const _=u.charCodeAt(u.length-1),w=O5(r.after.charCodeAt(0),_,i);w.inside&&(u=u.slice(0,-1)+N0(_));const S=a.move(i);return o(),n.attentionEncodeSurroundingInfo={after:w.outside,before:g.outside},s+u+S}function Gke(t,e,n){return n.options.emphasis||"*"}const u8=(function(t){if(t==null)return Jke;if(typeof t=="function")return IR(t);if(typeof t=="object")return Array.isArray(t)?Xke(t):Yke(t);if(typeof t=="string")return Kke(t);throw new Error("Expected function, string, or object as test")});function Xke(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=u8(t[n]);return IR(r);function r(...i){let o=-1;for(;++o<e.length;)if(e[o].apply(this,i))return!0;return!1}}function Yke(t){const e=t;return IR(n);function n(r){const i=r;let o;for(o in t)if(i[o]!==e[o])return!1;return!0}}function Kke(t){return IR(e);function e(n){return n&&n.type===t}}function IR(t){return e;function e(n,r,i){return!!(eEe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Jke(){return!0}function eEe(t){return t!==null&&typeof t=="object"&&"type"in t}const JK=[],tEe=!0,l4=!1,nEe="skip";function eJ(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const o=u8(i),a=r?-1:1;s(t,void 0,[])();function s(u,f,g){const _=u&&typeof u=="object"?u:{};if(typeof _.type=="string"){const S=typeof _.tagName=="string"?_.tagName:typeof _.name=="string"?_.name:void 0;Object.defineProperty(w,"name",{value:"node ("+(u.type+(S?"<"+S+">":""))+")"})}return w;function w(){let S=JK,E,A,R;if((!e||o(u,f,g[g.length-1]||void 0))&&(S=rEe(n(u,g)),S[0]===l4))return S;if("children"in u&&u.children){const $=u;if($.children&&S[0]!==nEe)for(A=(r?$.children.length:-1)+a,R=g.concat($);A>-1&&A<$.children.length;){const z=$.children[A];if(E=s(z,A,R)(),E[0]===l4)return E;A=typeof E[1]=="number"?E[1]:A+a}}return S}}}function rEe(t){return Array.isArray(t)?t:typeof t=="number"?[tEe,t]:t==null?JK:[t]}function iEe(t,e,n,r){let i,o,a;typeof e=="function"&&typeof n!="function"?(o=void 0,a=e,i=n):(o=e,a=n,i=r),eJ(t,o,s,i);function s(u,f){const g=f[f.length-1],_=g?g.children.indexOf(u):void 0;return a(u,_,g)}}const oEe={};function h8(t,e){const n=oEe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return tJ(t,r,i)}function tJ(t,e,n){if(sEe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return SQ(t.children,e,n)}return Array.isArray(t)?SQ(t,e,n):""}function SQ(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=tJ(t[i],e,n);return r.join("")}function sEe(t){return!!(t&&typeof t=="object")}function nJ(t,e){let n=!1;return iEe(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,l4}),!!((!t.depth||t.depth<3)&&h8(t)&&(e.options.setext||n))}function aEe(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),o=n.createTracker(r);if(nJ(t,n)){const g=n.enter("headingSetext"),_=n.enter("phrasing"),w=n.containerPhrasing(t,{...o.current(),before:`
`,after:`
`});return _(),g(),w+`
`+(i===1?"=":"-").repeat(w.length-(Math.max(w.lastIndexOf("\r"),w.lastIndexOf(`
`))+1))}const a="#".repeat(i),s=n.enter("headingAtx"),u=n.enter("phrasing");o.move(a+" ");let f=n.containerPhrasing(t,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(f)&&(f=N0(f.charCodeAt(0))+f.slice(1)),f=f?a+" "+f:a,n.options.closeAtx&&(f+=" "+a),u(),s(),f}rJ.peek=lEe;function rJ(t){return t.value||""}function lEe(){return"<"}iJ.peek=cEe;function iJ(t,e,n,r){const i=c8(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let s=n.enter("label");const u=n.createTracker(r);let f=u.move("![");return f+=u.move(n.safe(t.alt,{before:f,after:"]",...u.current()})),f+=u.move("]("),s(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(s=n.enter("destinationLiteral"),f+=u.move("<"),f+=u.move(n.safe(t.url,{before:f,after:">",...u.current()})),f+=u.move(">")):(s=n.enter("destinationRaw"),f+=u.move(n.safe(t.url,{before:f,after:t.title?" ":")",...u.current()}))),s(),t.title&&(s=n.enter(`title${o}`),f+=u.move(" "+i),f+=u.move(n.safe(t.title,{before:f,after:i,...u.current()})),f+=u.move(i),s()),f+=u.move(")"),a(),f}function cEe(){return"!"}oJ.peek=uEe;function oJ(t,e,n,r){const i=t.referenceType,o=n.enter("imageReference");let a=n.enter("label");const s=n.createTracker(r);let u=s.move("![");const f=n.safe(t.alt,{before:u,after:"]",...s.current()});u+=s.move(f+"]["),a();const g=n.stack;n.stack=[],a=n.enter("reference");const _=n.safe(n.associationId(t),{before:u,after:"]",...s.current()});return a(),n.stack=g,o(),i==="full"||!f||f!==_?u+=s.move(_+"]"):i==="shortcut"?u=u.slice(0,-1):u+=s.move("]"),u}function uEe(){return"!"}sJ.peek=hEe;function sJ(t,e,n){let r=t.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const a=n.unsafe[o],s=n.compilePattern(a);let u;if(a.atBreak)for(;u=s.exec(r);){let f=u.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(u.index+1)}}return i+r+i}function hEe(){return"`"}function aJ(t,e){const n=h8(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}lJ.peek=dEe;function lJ(t,e,n,r){const i=c8(n),o=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let s,u;if(aJ(t,n)){const g=n.stack;n.stack=[],s=n.enter("autolink");let _=a.move("<");return _+=a.move(n.containerPhrasing(t,{before:_,after:">",...a.current()})),_+=a.move(">"),s(),n.stack=g,_}s=n.enter("link"),u=n.enter("label");let f=a.move("[");return f+=a.move(n.containerPhrasing(t,{before:f,after:"](",...a.current()})),f+=a.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),f+=a.move("<"),f+=a.move(n.safe(t.url,{before:f,after:">",...a.current()})),f+=a.move(">")):(u=n.enter("destinationRaw"),f+=a.move(n.safe(t.url,{before:f,after:t.title?" ":")",...a.current()}))),u(),t.title&&(u=n.enter(`title${o}`),f+=a.move(" "+i),f+=a.move(n.safe(t.title,{before:f,after:i,...a.current()})),f+=a.move(i),u()),f+=a.move(")"),s(),f}function dEe(t,e,n){return aJ(t,n)?"<":"["}cJ.peek=fEe;function cJ(t,e,n,r){const i=t.referenceType,o=n.enter("linkReference");let a=n.enter("label");const s=n.createTracker(r);let u=s.move("[");const f=n.containerPhrasing(t,{before:u,after:"]",...s.current()});u+=s.move(f+"]["),a();const g=n.stack;n.stack=[],a=n.enter("reference");const _=n.safe(n.associationId(t),{before:u,after:"]",...s.current()});return a(),n.stack=g,o(),i==="full"||!f||f!==_?u+=s.move(_+"]"):i==="shortcut"?u=u.slice(0,-1):u+=s.move("]"),u}function fEe(){return"["}function d8(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function pEe(t){const e=d8(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function mEe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function uJ(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function gEe(t,e,n,r){const i=n.enter("list"),o=n.bulletCurrent;let a=t.ordered?mEe(n):d8(n);const s=t.ordered?a==="."?")":".":pEe(n);let u=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){const g=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&g&&(!g.children||!g.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),uJ(n)===a&&g){let _=-1;for(;++_<t.children.length;){const w=t.children[_];if(w&&w.type==="listItem"&&w.children&&w.children[0]&&w.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(a=s),n.bulletCurrent=a;const f=n.containerFlow(t,r);return n.bulletLastUsed=a,n.bulletCurrent=o,i(),f}function yEe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function vEe(t,e,n,r){const i=yEe(n);let o=n.bulletCurrent||d8(n);e&&e.type==="list"&&e.ordered&&(o=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+o);let a=o.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);const s=n.createTracker(r);s.move(o+" ".repeat(a-o.length)),s.shift(a);const u=n.enter("listItem"),f=n.indentLines(n.containerFlow(t,s.current()),g);return u(),f;function g(_,w,S){return w?(S?"":" ".repeat(a))+_:(S?o:o+" ".repeat(a-o.length))+_}}function _Ee(t,e,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),a=n.containerPhrasing(t,r);return o(),i(),a}const bEe=u8(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function xEe(t,e,n,r){return(t.children.some(function(a){return bEe(a)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function wEe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}hJ.peek=OEe;function hJ(t,e,n,r){const i=wEe(n),o=n.enter("strong"),a=n.createTracker(r),s=a.move(i+i);let u=a.move(n.containerPhrasing(t,{after:i,before:s,...a.current()}));const f=u.charCodeAt(0),g=O5(r.before.charCodeAt(r.before.length-1),f,i);g.inside&&(u=N0(f)+u.slice(1));const _=u.charCodeAt(u.length-1),w=O5(r.after.charCodeAt(0),_,i);w.inside&&(u=u.slice(0,-1)+N0(_));const S=a.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:w.outside,before:g.outside},s+u+S}function OEe(t,e,n){return n.options.strong||"*"}function SEe(t,e,n,r){return n.safe(t.value,r)}function CEe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function TEe(t,e,n){const r=(uJ(n)+(n.options.ruleSpaces?" ":"")).repeat(CEe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const f8={blockquote:jke,break:OQ,code:Zke,definition:Wke,emphasis:KK,hardBreak:OQ,heading:aEe,html:rJ,image:iJ,imageReference:oJ,inlineCode:sJ,link:lJ,linkReference:cJ,list:gEe,listItem:vEe,paragraph:_Ee,root:xEe,strong:hJ,text:SEe,thematicBreak:TEe},kEe=[EEe];function EEe(t,e,n,r){if(e.type==="code"&&a4(e,r)&&(t.type==="list"||t.type===e.type&&a4(t,r)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===e.type||e.type==="definition"||e.type==="heading"&&nJ(e,r))?void 0:n.spread?1:0}const w_=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],AEe=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:w_},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:w_},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:w_},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:w_},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:w_},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:w_},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:w_},{atBreak:!0,character:"~"}];function dJ(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const PEe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function fJ(t){return t.replace(PEe,MEe)}function MEe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return dJ(n.slice(o?2:1),o?16:10)}return WC(n)||t}function REe(t){return t.label||!t.identifier?t.label||"":fJ(t.identifier)}function IEe(t){if(!t._compiled){const e=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function DEe(t,e,n){const r=e.indexStack,i=t.children||[],o=[];let a=-1,s=n.before,u;r.push(-1);let f=e.createTracker(n);for(;++a<i.length;){const g=i[a];let _;if(r[r.length-1]=a,a+1<i.length){let E=e.handle.handlers[i[a+1].type];E&&E.peek&&(E=E.peek),_=E?E(i[a+1],t,e,{before:"",after:"",...f.current()}).charAt(0):""}else _=n.after;o.length>0&&(s==="\r"||s===`
`)&&g.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),s=" ",f=e.createTracker(n),f.move(o.join("")));let w=e.handle(g,t,e,{...f.current(),after:_,before:s});u&&u===w.slice(0,1)&&(w=N0(u.charCodeAt(0))+w.slice(1));const S=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,u=void 0,S&&(o.length>0&&S.before&&s===o[o.length-1].slice(-1)&&(o[o.length-1]=o[o.length-1].slice(0,-1)+N0(s.charCodeAt(0))),S.after&&(u=_)),f.move(w),o.push(w),s=w.slice(-1)}return r.pop(),o.join("")}function LEe(t,e,n){const r=e.indexStack,i=t.children||[],o=e.createTracker(n),a=[];let s=-1;for(r.push(-1);++s<i.length;){const u=i[s];r[r.length-1]=s,a.push(o.move(e.handle(u,t,e,{before:`
`,after:`
`,...o.current()}))),u.type!=="list"&&(e.bulletLastUsed=void 0),s<i.length-1&&a.push(o.move($Ee(u,i[s+1],t,e)))}return r.pop(),a.join("")}function $Ee(t,e,n,r){let i=r.join.length;for(;i--;){const o=r.join[i](t,e,n,r);if(o===!0||o===1)break;if(typeof o=="number")return`
`.repeat(1+o);if(o===!1)return`

<!---->

`}return`

`}const zEe=/\r?\n|\r/g;function NEe(t,e){const n=[];let r=0,i=0,o;for(;o=zEe.exec(t);)a(t.slice(r,o.index)),n.push(o[0]),r=o.index+o[0].length,i++;return a(t.slice(r)),n.join("");function a(s){n.push(e(s,i,!s))}}function BEe(t,e,n){const r=(n.before||"")+(e||"")+(n.after||""),i=[],o=[],a={};let s=-1;for(;++s<t.unsafe.length;){const g=t.unsafe[s];if(!YK(t.stack,g))continue;const _=t.compilePattern(g);let w;for(;w=_.exec(r);){const S="before"in g||!!g.atBreak,E="after"in g,A=w.index+(S?w[1].length:0);i.includes(A)?(a[A].before&&!S&&(a[A].before=!1),a[A].after&&!E&&(a[A].after=!1)):(i.push(A),a[A]={before:S,after:E})}}i.sort(FEe);let u=n.before?n.before.length:0;const f=r.length-(n.after?n.after.length:0);for(s=-1;++s<i.length;){const g=i[s];g<u||g>=f||g+1<f&&i[s+1]===g+1&&a[g].after&&!a[g+1].before&&!a[g+1].after||i[s-1]===g-1&&a[g].before&&!a[g-1].before&&!a[g-1].after||(u!==g&&o.push(CQ(r.slice(u,g),"\\")),u=g,/[!-/:-@[-`{-~]/.test(r.charAt(g))&&(!n.encode||!n.encode.includes(r.charAt(g)))?o.push("\\"):(o.push(N0(r.charCodeAt(g))),u++))}return o.push(CQ(r.slice(u,f),n.after)),o.join("")}function FEe(t,e){return t-e}function CQ(t,e){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],o=t+e;let a=-1,s=0,u;for(;u=n.exec(o);)r.push(u.index);for(;++a<r.length;)s!==r[a]&&i.push(t.slice(s,r[a])),i.push("\\"),s=r[a];return i.push(t.slice(s)),i.join("")}function jEe(t){const e=t||{},n=e.now||{};let r=e.lineShift||0,i=n.line||1,o=n.column||1;return{move:u,current:a,shift:s};function a(){return{now:{line:i,column:o},lineShift:r}}function s(f){r+=f}function u(f){const g=f||"",_=g.split(/\r?\n|\r/g),w=_[_.length-1];return i+=_.length-1,o=_.length===1?o+w.length:1+w.length+r,g}}function pJ(t,e){const n=e||{},r={associationId:REe,containerPhrasing:ZEe,containerFlow:qEe,createTracker:jEe,compilePattern:IEe,enter:o,handlers:{...f8},handle:void 0,indentLines:NEe,indexStack:[],join:[...kEe],options:{},safe:WEe,stack:[],unsafe:[...AEe]};XK(r,n),r.options.tightDefinitions&&r.join.push(UEe),r.handle=Nke("type",{invalid:VEe,unknown:QEe,handlers:r.handlers});let i=r.handle(t,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function o(a){return r.stack.push(a),s;function s(){r.stack.pop()}}}function VEe(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function QEe(t){const e=t;throw new Error("Cannot handle unknown node `"+e.type+"`")}function UEe(t,e){if(t.type==="definition"&&t.type===e.type)return 0}function ZEe(t,e){return DEe(t,this,e)}function qEe(t,e){return LEe(t,this,e)}function WEe(t,e){return BEe(this,t,e)}const HEe=["mdxJsxTextElement","mdxJsxFlowElement"];function mJ(t){return HEe.includes(t.type)&&GEe.includes(t.name.toLowerCase())}const GEe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function XEe(t,e){const n=TQ(t),r=TQ(e),i={...n,...r};return YEe(i)}function TQ(t){const e={};return t.split(";").filter(r=>r.trim()!=="").forEach(r=>{const[i,o]=r.split(":").map(a=>a.trim());e[i]=o}),e}function YEe(t){return Object.entries(t).map(([e,n])=>`${e}: ${n}`).join("; ")}function KEe(t){return t.children instanceof Array}function p8({root:t,visitors:e,jsxComponentDescriptors:n,jsxIsAvailable:r,addImportStatements:i=!0}){let o=null;const a=new Set,s=new Map;e=e.sort(($,z)=>(z.priority??0)-($.priority??0)),_(t,null);function u($,z){a.add($),z&&s.set($,{...z})}function f($,z){if(o===null)return o=z,o;if(!KEe($))throw new Error("Attempting to append children to a non-parent");const B=$.children,F=B.at(-1);if(F){const U=e.find(q=>{var H;return(H=q.shouldJoin)==null?void 0:H.call(q,F,z)});if(U){const q=U.join(F,z);return B.splice(B.length-1,1,q),q}}return B.push(z),z}function g($,z){$.getChildren().forEach(B=>{_(B,z)})}function _($,z,B=null){var F;const U=e.find((q,H)=>{var ne;return B?.has(H)?!1:(ne=q.testLexicalNode)==null?void 0:ne.call(q,$)});if(!U)throw new Error(`no lexical visitor found for ${$.getType()}`,{cause:$});(F=U.visitLexicalNode)==null||F.call(U,{lexicalNode:$,mdastParent:z,actions:{addAndStepInto(q,H={},ne=!0){const ie={type:q,...H,...ne?{children:[]}:{}};f(z,ie),Rt($)&&ne&&g($,ie)},appendToParent:f,visitChildren:g,visit:_,registerReferredComponent:u,nextVisitor(){_($,z,(B??new Set).add(e.indexOf(U)))}}})}if(o===null)throw new Error("traversal ended with no root element");const w=new Map,S=new Map;for(const $ of a){const z=n.find(B=>B.name===$)??s.get($)??n.find(B=>B.name==="*");if(!z)throw new Error(`Component ${$} is used but not imported`);if(z.source)if(z.defaultExport)S.set($,z.source);else{const{source:B}=z,F=w.get(B);F?F.push($):w.set(B,[$])}}if(!i){for(const[$,z]of w.entries()){const B=z.filter(F=>s.has(F));B.length>0?w.set($,B):w.delete($)}for(const $ of S.keys())s.has($)||S.delete($)}const E=Array.from(w).map(([$,z])=>({type:"mdxjsEsm",value:`import { ${z.join(", ")} } from '${$}'`}));E.push(...Array.from(S).map(([$,z])=>({type:"mdxjsEsm",value:`import ${$} from '${z}'`})));const A=o,R=A.children.find($=>$.type==="yaml");return R?A.children.splice(A.children.indexOf(R)+1,0,...E):A.children.unshift(...E),mP(A,[]),gJ(A),r||yJ(A),A}function gJ(t){if("children"in t&&t.children.length>0){if(mJ(t)&&t.children.length===1){const e=t.children[0];e.type==="mdxJsxTextElement"&&e.name==="span"&&(e.attributes.forEach(n=>{if(n.type==="mdxJsxAttribute"){const r=t.attributes.find(i=>i.type==="mdxJsxAttribute"&&i.name===n.name);if(r)if(n.name==="className"){const i=new Set([...r.value.split(" "),...n.value.split(" ")]);r.value=Array.from(i).join(" ")}else n.name==="style"&&(r.value=XEe(r.value,n.value));else t.attributes.push(n)}}),t.children=e.children)}t.children.forEach(e=>{gJ(e)})}}function yJ(t){if(Object.hasOwn(t,"children")){const e=t,n=[];e.children.forEach(r=>{r.type==="mdxJsxTextElement"&&r.name==="u"?n.push({type:"html",value:"<u>"},...r.children,{type:"html",value:"</u>"}):(n.push(r),yJ(r))}),e.children=n}}const kQ=/\s+$/,EQ=/^\s+/;function mP(t,e){if(t.type==="strong"||t.type==="emphasis"){const n=t.children.at(-1);if(n?.type==="text"){const i=kQ.exec(n.value);if(i){n.value=n.value.replace(kQ,"");const o=e.at(-1);o&&(o.children.splice(o.children.indexOf(t)+1,0,{type:"text",value:i[0]}),mP(o,e.slice(0,-1)))}}const r=t.children.at(0);if(r?.type==="text"){const i=EQ.exec(r.value);if(i){r.value=r.value.replace(EQ,"");const o=e.at(-1);o&&(o.children.splice(o.children.indexOf(t),0,{type:"text",value:i[0]}),mP(o,e.slice(0,-1)))}}}if("children"in t&&t.children.length>0){const n=t;n.children.forEach(r=>{mP(r,[...e,n])})}}function JEe({root:t,toMarkdownOptions:e,toMarkdownExtensions:n,visitors:r,jsxComponentDescriptors:i,jsxIsAvailable:o}){return pJ(p8({root:t,visitors:r,jsxComponentDescriptors:i,jsxIsAvailable:o}),{extensions:n,...e})+`
`}const AQ={}.hasOwnProperty;function eAe(t){const e={};let n=-1;for(;++n<t.length;)tAe(e,t[n]);return e}function tAe(t,e){let n;for(n in e){const i=(AQ.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let a;if(o)for(a in o){AQ.call(i,a)||(i[a]=[]);const s=o[a];nAe(i[a],Array.isArray(s)?s:s?[s]:[])}}}function nAe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Ml(t,0,0,r)}function iw(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const rAe={tokenize:iAe};function iAe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),Cr(t,e,"linePrefix")}function i(s){return t.enter("paragraph"),o(s)}function o(s){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,a(s)}function a(s){if(s===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(s);return}return Sn(s)?(t.consume(s),t.exit("chunkText"),o):(t.consume(s),a)}}const oAe={tokenize:sAe},PQ={tokenize:aAe};function sAe(t){const e=this,n=[];let r=0,i,o,a;return s;function s(B){if(r<n.length){const F=n[r];return e.containerState=F[1],t.attempt(F[0].continuation,u,f)(B)}return f(B)}function u(B){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&z();const F=e.events.length;let U=F,q;for(;U--;)if(e.events[U][0]==="exit"&&e.events[U][1].type==="chunkFlow"){q=e.events[U][1].end;break}$(r);let H=F;for(;H<e.events.length;)e.events[H][1].end={...q},H++;return Ml(e.events,U+1,0,e.events.slice(F)),e.events.length=H,f(B)}return s(B)}function f(B){if(r===n.length){if(!i)return w(B);if(i.currentConstruct&&i.currentConstruct.concrete)return E(B);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(PQ,g,_)(B)}function g(B){return i&&z(),$(r),w(B)}function _(B){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,E(B)}function w(B){return e.containerState={},t.attempt(PQ,S,E)(B)}function S(B){return r++,n.push([e.currentConstruct,e.containerState]),w(B)}function E(B){if(B===null){i&&z(),$(0),t.consume(B);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),A(B)}function A(B){if(B===null){R(t.exit("chunkFlow"),!0),$(0),t.consume(B);return}return Sn(B)?(t.consume(B),R(t.exit("chunkFlow")),r=0,e.interrupt=void 0,s):(t.consume(B),A)}function R(B,F){const U=e.sliceStream(B);if(F&&U.push(null),B.previous=o,o&&(o.next=B),o=B,i.defineSkip(B.start),i.write(U),e.parser.lazy[B.start.line]){let q=i.events.length;for(;q--;)if(i.events[q][1].start.offset<a&&(!i.events[q][1].end||i.events[q][1].end.offset>a))return;const H=e.events.length;let ne=H,ie,ce;for(;ne--;)if(e.events[ne][0]==="exit"&&e.events[ne][1].type==="chunkFlow"){if(ie){ce=e.events[ne][1].end;break}ie=!0}for($(r),q=H;q<e.events.length;)e.events[q][1].end={...ce},q++;Ml(e.events,ne+1,0,e.events.slice(H)),e.events.length=q}}function $(B){let F=n.length;for(;F-- >B;){const U=n[F];e.containerState=U[1],U[0].exit.call(e,t)}n.length=B}function z(){i.write([null]),o=void 0,i=void 0,e.containerState._closeFlow=void 0}}function aAe(t,e,n){return Cr(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const c4={name:"attention",resolveAll:lAe,tokenize:cAe};function lAe(t,e){let n=-1,r,i,o,a,s,u,f,g;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const _={...t[r][1].end},w={...t[n][1].start};MQ(_,-u),MQ(w,u),a={type:u>1?"strongSequence":"emphasisSequence",start:_,end:{...t[r][1].end}},s={type:u>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:w},o={type:u>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:u>1?"strong":"emphasis",start:{...a.start},end:{...s.end}},t[r][1].end={...a.start},t[n][1].start={...s.end},f=[],t[r][1].end.offset-t[r][1].start.offset&&(f=$h(f,[["enter",t[r][1],e],["exit",t[r][1],e]])),f=$h(f,[["enter",i,e],["enter",a,e],["exit",a,e],["enter",o,e]]),f=$h(f,sk(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),f=$h(f,[["exit",o,e],["enter",s,e],["exit",s,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(g=2,f=$h(f,[["enter",t[n][1],e],["exit",t[n][1],e]])):g=0,Ml(t,r-1,n-r+3,f),n=r+f.length-g-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function cAe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=z0(r);let o;return a;function a(u){return o=u,t.enter("attentionSequence"),s(u)}function s(u){if(u===o)return t.consume(u),s;const f=t.exit("attentionSequence"),g=z0(u),_=!g||g===2&&i||n.includes(u),w=!i||i===2&&g||n.includes(r);return f._open=!!(o===42?_:_&&(i||!w)),f._close=!!(o===42?w:w&&(g||!_)),e(u)}}function MQ(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const uAe={name:"autolink",tokenize:hAe};function hAe(t,e,n){let r=0;return i;function i(S){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(S),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(S){return Bh(S)?(t.consume(S),a):S===64?n(S):f(S)}function a(S){return S===43||S===45||S===46||Zu(S)?(r=1,s(S)):f(S)}function s(S){return S===58?(t.consume(S),r=0,u):(S===43||S===45||S===46||Zu(S))&&r++<32?(t.consume(S),s):(r=0,f(S))}function u(S){return S===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(S),t.exit("autolinkMarker"),t.exit("autolink"),e):S===null||S===32||S===60||t4(S)?n(S):(t.consume(S),u)}function f(S){return S===64?(t.consume(S),g):OTe(S)?(t.consume(S),f):n(S)}function g(S){return Zu(S)?_(S):n(S)}function _(S){return S===46?(t.consume(S),r=0,g):S===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(S),t.exit("autolinkMarker"),t.exit("autolink"),e):w(S)}function w(S){if((S===45||Zu(S))&&r++<63){const E=S===45?w:_;return t.consume(S),E}return n(S)}}const DR={partial:!0,tokenize:dAe};function dAe(t,e,n){return r;function r(o){return pr(o)?Cr(t,i,"linePrefix")(o):i(o)}function i(o){return o===null||Sn(o)?e(o):n(o)}}const vJ={continuation:{tokenize:pAe},exit:mAe,name:"blockQuote",tokenize:fAe};function fAe(t,e,n){const r=this;return i;function i(a){if(a===62){const s=r.containerState;return s.open||(t.enter("blockQuote",{_container:!0}),s.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),o}return n(a)}function o(a){return pr(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function pAe(t,e,n){const r=this;return i;function i(a){return pr(a)?Cr(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):o(a)}function o(a){return t.attempt(vJ,e,n)(a)}}function mAe(t){t.exit("blockQuote")}const _J={name:"characterEscape",tokenize:gAe};function gAe(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),i}function i(o){return CTe(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const bJ={name:"characterReference",tokenize:yAe};function yAe(t,e,n){const r=this;let i=0,o,a;return s;function s(_){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(_),t.exit("characterReferenceMarker"),u}function u(_){return _===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(_),t.exit("characterReferenceMarkerNumeric"),f):(t.enter("characterReferenceValue"),o=31,a=Zu,g(_))}function f(_){return _===88||_===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(_),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,a=STe,g):(t.enter("characterReferenceValue"),o=7,a=n4,g(_))}function g(_){if(_===59&&i){const w=t.exit("characterReferenceValue");return a===Zu&&!WC(r.sliceSerialize(w))?n(_):(t.enter("characterReferenceMarker"),t.consume(_),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(_)&&i++<o?(t.consume(_),g):n(_)}}const RQ={partial:!0,tokenize:_Ae},IQ={concrete:!0,name:"codeFenced",tokenize:vAe};function vAe(t,e,n){const r=this,i={partial:!0,tokenize:U};let o=0,a=0,s;return u;function u(q){return f(q)}function f(q){const H=r.events[r.events.length-1];return o=H&&H[1].type==="linePrefix"?H[2].sliceSerialize(H[1],!0).length:0,s=q,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),g(q)}function g(q){return q===s?(a++,t.consume(q),g):a<3?n(q):(t.exit("codeFencedFenceSequence"),pr(q)?Cr(t,_,"whitespace")(q):_(q))}function _(q){return q===null||Sn(q)?(t.exit("codeFencedFence"),r.interrupt?e(q):t.check(RQ,A,F)(q)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),w(q))}function w(q){return q===null||Sn(q)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),_(q)):pr(q)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Cr(t,S,"whitespace")(q)):q===96&&q===s?n(q):(t.consume(q),w)}function S(q){return q===null||Sn(q)?_(q):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),E(q))}function E(q){return q===null||Sn(q)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),_(q)):q===96&&q===s?n(q):(t.consume(q),E)}function A(q){return t.attempt(i,F,R)(q)}function R(q){return t.enter("lineEnding"),t.consume(q),t.exit("lineEnding"),$}function $(q){return o>0&&pr(q)?Cr(t,z,"linePrefix",o+1)(q):z(q)}function z(q){return q===null||Sn(q)?t.check(RQ,A,F)(q):(t.enter("codeFlowValue"),B(q))}function B(q){return q===null||Sn(q)?(t.exit("codeFlowValue"),z(q)):(t.consume(q),B)}function F(q){return t.exit("codeFenced"),e(q)}function U(q,H,ne){let ie=0;return ce;function ce(ye){return q.enter("lineEnding"),q.consume(ye),q.exit("lineEnding"),xe}function xe(ye){return q.enter("codeFencedFence"),pr(ye)?Cr(q,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ye):re(ye)}function re(ye){return ye===s?(q.enter("codeFencedFenceSequence"),me(ye)):ne(ye)}function me(ye){return ye===s?(ie++,q.consume(ye),me):ie>=a?(q.exit("codeFencedFenceSequence"),pr(ye)?Cr(q,Te,"whitespace")(ye):Te(ye)):ne(ye)}function Te(ye){return ye===null||Sn(ye)?(q.exit("codeFencedFence"),H(ye)):ne(ye)}}}function _Ae(t,e,n){const r=this;return i;function i(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o)}function o(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const J3={name:"codeIndented",tokenize:xAe},bAe={partial:!0,tokenize:wAe};function xAe(t,e,n){const r=this;return i;function i(f){return t.enter("codeIndented"),Cr(t,o,"linePrefix",5)(f)}function o(f){const g=r.events[r.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?a(f):n(f)}function a(f){return f===null?u(f):Sn(f)?t.attempt(bAe,a,u)(f):(t.enter("codeFlowValue"),s(f))}function s(f){return f===null||Sn(f)?(t.exit("codeFlowValue"),a(f)):(t.consume(f),s)}function u(f){return t.exit("codeIndented"),e(f)}}function wAe(t,e,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):Sn(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i):Cr(t,o,"linePrefix",5)(a)}function o(a){const s=r.events[r.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(a):Sn(a)?i(a):n(a)}}const OAe={name:"codeText",previous:CAe,resolve:SAe,tokenize:TAe};function SAe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function CAe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function TAe(t,e,n){let r=0,i,o;return a;function a(_){return t.enter("codeText"),t.enter("codeTextSequence"),s(_)}function s(_){return _===96?(t.consume(_),r++,s):(t.exit("codeTextSequence"),u(_))}function u(_){return _===null?n(_):_===32?(t.enter("space"),t.consume(_),t.exit("space"),u):_===96?(o=t.enter("codeTextSequence"),i=0,g(_)):Sn(_)?(t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),u):(t.enter("codeTextData"),f(_))}function f(_){return _===null||_===32||_===96||Sn(_)?(t.exit("codeTextData"),u(_)):(t.consume(_),f)}function g(_){return _===96?(t.consume(_),i++,g):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(_)):(o.type="codeTextData",f(_))}}class kAe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&g2(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),g2(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),g2(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);g2(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);g2(this.left,n.reverse())}}}function g2(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function xJ(t){const e={};let n=-1,r,i,o,a,s,u,f;const g=new kAe(t);for(;++n<g.length;){for(;n in e;)n=e[n];if(r=g.get(n),n&&r[1].type==="chunkFlow"&&g.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,o=0,o<u.length&&u[o][1].type==="lineEndingBlank"&&(o+=2),o<u.length&&u[o][1].type==="content"))for(;++o<u.length&&u[o][1].type!=="content";)u[o][1].type==="chunkText"&&(u[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,EAe(g,n)),n=e[n],f=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(a=g.get(o),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(g.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=o);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...g.get(i)[1].start},s=g.slice(i,n),s.unshift(r),g.splice(i,n-i+1,s))}}return Ml(t,0,Number.POSITIVE_INFINITY,g.slice(0)),!f}function EAe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const o=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const s=a.events,u=[],f={};let g,_,w=-1,S=n,E=0,A=0;const R=[A];for(;S;){for(;t.get(++i)[1]!==S;);o.push(i),S._tokenizer||(g=r.sliceStream(S),S.next||g.push(null),_&&a.defineSkip(S.start),S._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(g),S._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),_=S,S=S.next}for(S=n;++w<s.length;)s[w][0]==="exit"&&s[w-1][0]==="enter"&&s[w][1].type===s[w-1][1].type&&s[w][1].start.line!==s[w][1].end.line&&(A=w+1,R.push(A),S._tokenizer=void 0,S.previous=void 0,S=S.next);for(a.events=[],S?(S._tokenizer=void 0,S.previous=void 0):R.pop(),w=R.length;w--;){const $=s.slice(R[w],R[w+1]),z=o.pop();u.push([z,z+$.length-1]),t.splice(z,2,$)}for(u.reverse(),w=-1;++w<u.length;)f[E+u[w][0]]=E+u[w][1],E+=u[w][1]-u[w][0]-1;return f}const AAe={resolve:MAe,tokenize:RAe},PAe={partial:!0,tokenize:IAe};function MAe(t){return xJ(t),t}function RAe(t,e){let n;return r;function r(s){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?o(s):Sn(s)?t.check(PAe,a,o)(s):(t.consume(s),i)}function o(s){return t.exit("chunkContent"),t.exit("content"),e(s)}function a(s){return t.consume(s),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function IAe(t,e,n){const r=this;return i;function i(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Cr(t,o,"linePrefix")}function o(a){if(a===null||Sn(a))return n(a);const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}function wJ(t,e,n,r,i,o,a,s,u){const f=u||Number.POSITIVE_INFINITY;let g=0;return _;function _($){return $===60?(t.enter(r),t.enter(i),t.enter(o),t.consume($),t.exit(o),w):$===null||$===32||$===41||t4($)?n($):(t.enter(r),t.enter(a),t.enter(s),t.enter("chunkString",{contentType:"string"}),A($))}function w($){return $===62?(t.enter(o),t.consume($),t.exit(o),t.exit(i),t.exit(r),e):(t.enter(s),t.enter("chunkString",{contentType:"string"}),S($))}function S($){return $===62?(t.exit("chunkString"),t.exit(s),w($)):$===null||$===60||Sn($)?n($):(t.consume($),$===92?E:S)}function E($){return $===60||$===62||$===92?(t.consume($),S):S($)}function A($){return!g&&($===null||$===41||Ci($))?(t.exit("chunkString"),t.exit(s),t.exit(a),t.exit(r),e($)):g<f&&$===40?(t.consume($),g++,A):$===41?(t.consume($),g--,A):$===null||$===32||$===40||t4($)?n($):(t.consume($),$===92?R:A)}function R($){return $===40||$===41||$===92?(t.consume($),A):A($)}}function OJ(t,e,n,r,i,o){const a=this;let s=0,u;return f;function f(S){return t.enter(r),t.enter(i),t.consume(S),t.exit(i),t.enter(o),g}function g(S){return s>999||S===null||S===91||S===93&&!u||S===94&&!s&&"_hiddenFootnoteSupport"in a.parser.constructs?n(S):S===93?(t.exit(o),t.enter(i),t.consume(S),t.exit(i),t.exit(r),e):Sn(S)?(t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),g):(t.enter("chunkString",{contentType:"string"}),_(S))}function _(S){return S===null||S===91||S===93||Sn(S)||s++>999?(t.exit("chunkString"),g(S)):(t.consume(S),u||(u=!pr(S)),S===92?w:_)}function w(S){return S===91||S===92||S===93?(t.consume(S),s++,_):_(S)}}function SJ(t,e,n,r,i,o){let a;return s;function s(w){return w===34||w===39||w===40?(t.enter(r),t.enter(i),t.consume(w),t.exit(i),a=w===40?41:w,u):n(w)}function u(w){return w===a?(t.enter(i),t.consume(w),t.exit(i),t.exit(r),e):(t.enter(o),f(w))}function f(w){return w===a?(t.exit(o),u(a)):w===null?n(w):Sn(w)?(t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),Cr(t,f,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),g(w))}function g(w){return w===a||w===null||Sn(w)?(t.exit("chunkString"),f(w)):(t.consume(w),w===92?_:g)}function _(w){return w===a||w===92?(t.consume(w),g):g(w)}}function Ig(t,e){let n;return r;function r(i){return Sn(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):pr(i)?Cr(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const DAe={name:"definition",tokenize:$Ae},LAe={partial:!0,tokenize:zAe};function $Ae(t,e,n){const r=this;let i;return o;function o(S){return t.enter("definition"),a(S)}function a(S){return OJ.call(r,t,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(S)}function s(S){return i=iw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),S===58?(t.enter("definitionMarker"),t.consume(S),t.exit("definitionMarker"),u):n(S)}function u(S){return Ci(S)?Ig(t,f)(S):f(S)}function f(S){return wJ(t,g,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(S)}function g(S){return t.attempt(LAe,_,_)(S)}function _(S){return pr(S)?Cr(t,w,"whitespace")(S):w(S)}function w(S){return S===null||Sn(S)?(t.exit("definition"),r.parser.defined.push(i),e(S)):n(S)}}function zAe(t,e,n){return r;function r(s){return Ci(s)?Ig(t,i)(s):n(s)}function i(s){return SJ(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function o(s){return pr(s)?Cr(t,a,"whitespace")(s):a(s)}function a(s){return s===null||Sn(s)?e(s):n(s)}}const NAe={name:"hardBreakEscape",tokenize:BAe};function BAe(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),i}function i(o){return Sn(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const FAe={name:"headingAtx",resolve:jAe,tokenize:VAe};function jAe(t,e){let n=t.length-2,r=3,i,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Ml(t,r,n-r+1,[["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e]])),t}function VAe(t,e,n){let r=0;return i;function i(g){return t.enter("atxHeading"),o(g)}function o(g){return t.enter("atxHeadingSequence"),a(g)}function a(g){return g===35&&r++<6?(t.consume(g),a):g===null||Ci(g)?(t.exit("atxHeadingSequence"),s(g)):n(g)}function s(g){return g===35?(t.enter("atxHeadingSequence"),u(g)):g===null||Sn(g)?(t.exit("atxHeading"),e(g)):pr(g)?Cr(t,s,"whitespace")(g):(t.enter("atxHeadingText"),f(g))}function u(g){return g===35?(t.consume(g),u):(t.exit("atxHeadingSequence"),s(g))}function f(g){return g===null||g===35||Ci(g)?(t.exit("atxHeadingText"),s(g)):(t.consume(g),f)}}const QAe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],DQ=["pre","script","style","textarea"],UAe={concrete:!0,name:"htmlFlow",resolveTo:WAe,tokenize:HAe},ZAe={partial:!0,tokenize:XAe},qAe={partial:!0,tokenize:GAe};function WAe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function HAe(t,e,n){const r=this;let i,o,a,s,u;return f;function f(Ee){return g(Ee)}function g(Ee){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(Ee),_}function _(Ee){return Ee===33?(t.consume(Ee),w):Ee===47?(t.consume(Ee),o=!0,A):Ee===63?(t.consume(Ee),i=3,r.interrupt?e:Se):Bh(Ee)?(t.consume(Ee),a=String.fromCharCode(Ee),R):n(Ee)}function w(Ee){return Ee===45?(t.consume(Ee),i=2,S):Ee===91?(t.consume(Ee),i=5,s=0,E):Bh(Ee)?(t.consume(Ee),i=4,r.interrupt?e:Se):n(Ee)}function S(Ee){return Ee===45?(t.consume(Ee),r.interrupt?e:Se):n(Ee)}function E(Ee){const ft="CDATA[";return Ee===ft.charCodeAt(s++)?(t.consume(Ee),s===ft.length?r.interrupt?e:re:E):n(Ee)}function A(Ee){return Bh(Ee)?(t.consume(Ee),a=String.fromCharCode(Ee),R):n(Ee)}function R(Ee){if(Ee===null||Ee===47||Ee===62||Ci(Ee)){const ft=Ee===47,mt=a.toLowerCase();return!ft&&!o&&DQ.includes(mt)?(i=1,r.interrupt?e(Ee):re(Ee)):QAe.includes(a.toLowerCase())?(i=6,ft?(t.consume(Ee),$):r.interrupt?e(Ee):re(Ee)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(Ee):o?z(Ee):B(Ee))}return Ee===45||Zu(Ee)?(t.consume(Ee),a+=String.fromCharCode(Ee),R):n(Ee)}function $(Ee){return Ee===62?(t.consume(Ee),r.interrupt?e:re):n(Ee)}function z(Ee){return pr(Ee)?(t.consume(Ee),z):ce(Ee)}function B(Ee){return Ee===47?(t.consume(Ee),ce):Ee===58||Ee===95||Bh(Ee)?(t.consume(Ee),F):pr(Ee)?(t.consume(Ee),B):ce(Ee)}function F(Ee){return Ee===45||Ee===46||Ee===58||Ee===95||Zu(Ee)?(t.consume(Ee),F):U(Ee)}function U(Ee){return Ee===61?(t.consume(Ee),q):pr(Ee)?(t.consume(Ee),U):B(Ee)}function q(Ee){return Ee===null||Ee===60||Ee===61||Ee===62||Ee===96?n(Ee):Ee===34||Ee===39?(t.consume(Ee),u=Ee,H):pr(Ee)?(t.consume(Ee),q):ne(Ee)}function H(Ee){return Ee===u?(t.consume(Ee),u=null,ie):Ee===null||Sn(Ee)?n(Ee):(t.consume(Ee),H)}function ne(Ee){return Ee===null||Ee===34||Ee===39||Ee===47||Ee===60||Ee===61||Ee===62||Ee===96||Ci(Ee)?U(Ee):(t.consume(Ee),ne)}function ie(Ee){return Ee===47||Ee===62||pr(Ee)?B(Ee):n(Ee)}function ce(Ee){return Ee===62?(t.consume(Ee),xe):n(Ee)}function xe(Ee){return Ee===null||Sn(Ee)?re(Ee):pr(Ee)?(t.consume(Ee),xe):n(Ee)}function re(Ee){return Ee===45&&i===2?(t.consume(Ee),_e):Ee===60&&i===1?(t.consume(Ee),ke):Ee===62&&i===4?(t.consume(Ee),Me):Ee===63&&i===3?(t.consume(Ee),Se):Ee===93&&i===5?(t.consume(Ee),Qe):Sn(Ee)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(ZAe,Xe,me)(Ee)):Ee===null||Sn(Ee)?(t.exit("htmlFlowData"),me(Ee)):(t.consume(Ee),re)}function me(Ee){return t.check(qAe,Te,Xe)(Ee)}function Te(Ee){return t.enter("lineEnding"),t.consume(Ee),t.exit("lineEnding"),ye}function ye(Ee){return Ee===null||Sn(Ee)?me(Ee):(t.enter("htmlFlowData"),re(Ee))}function _e(Ee){return Ee===45?(t.consume(Ee),Se):re(Ee)}function ke(Ee){return Ee===47?(t.consume(Ee),a="",Ne):re(Ee)}function Ne(Ee){if(Ee===62){const ft=a.toLowerCase();return DQ.includes(ft)?(t.consume(Ee),Me):re(Ee)}return Bh(Ee)&&a.length<8?(t.consume(Ee),a+=String.fromCharCode(Ee),Ne):re(Ee)}function Qe(Ee){return Ee===93?(t.consume(Ee),Se):re(Ee)}function Se(Ee){return Ee===62?(t.consume(Ee),Me):Ee===45&&i===2?(t.consume(Ee),Se):re(Ee)}function Me(Ee){return Ee===null||Sn(Ee)?(t.exit("htmlFlowData"),Xe(Ee)):(t.consume(Ee),Me)}function Xe(Ee){return t.exit("htmlFlow"),e(Ee)}}function GAe(t,e,n){const r=this;return i;function i(a){return Sn(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o):n(a)}function o(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}function XAe(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(DR,e,n)}}const YAe={name:"htmlText",tokenize:KAe};function KAe(t,e,n){const r=this;let i,o,a;return s;function s(Se){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(Se),u}function u(Se){return Se===33?(t.consume(Se),f):Se===47?(t.consume(Se),U):Se===63?(t.consume(Se),B):Bh(Se)?(t.consume(Se),ne):n(Se)}function f(Se){return Se===45?(t.consume(Se),g):Se===91?(t.consume(Se),o=0,E):Bh(Se)?(t.consume(Se),z):n(Se)}function g(Se){return Se===45?(t.consume(Se),S):n(Se)}function _(Se){return Se===null?n(Se):Se===45?(t.consume(Se),w):Sn(Se)?(a=_,ke(Se)):(t.consume(Se),_)}function w(Se){return Se===45?(t.consume(Se),S):_(Se)}function S(Se){return Se===62?_e(Se):Se===45?w(Se):_(Se)}function E(Se){const Me="CDATA[";return Se===Me.charCodeAt(o++)?(t.consume(Se),o===Me.length?A:E):n(Se)}function A(Se){return Se===null?n(Se):Se===93?(t.consume(Se),R):Sn(Se)?(a=A,ke(Se)):(t.consume(Se),A)}function R(Se){return Se===93?(t.consume(Se),$):A(Se)}function $(Se){return Se===62?_e(Se):Se===93?(t.consume(Se),$):A(Se)}function z(Se){return Se===null||Se===62?_e(Se):Sn(Se)?(a=z,ke(Se)):(t.consume(Se),z)}function B(Se){return Se===null?n(Se):Se===63?(t.consume(Se),F):Sn(Se)?(a=B,ke(Se)):(t.consume(Se),B)}function F(Se){return Se===62?_e(Se):B(Se)}function U(Se){return Bh(Se)?(t.consume(Se),q):n(Se)}function q(Se){return Se===45||Zu(Se)?(t.consume(Se),q):H(Se)}function H(Se){return Sn(Se)?(a=H,ke(Se)):pr(Se)?(t.consume(Se),H):_e(Se)}function ne(Se){return Se===45||Zu(Se)?(t.consume(Se),ne):Se===47||Se===62||Ci(Se)?ie(Se):n(Se)}function ie(Se){return Se===47?(t.consume(Se),_e):Se===58||Se===95||Bh(Se)?(t.consume(Se),ce):Sn(Se)?(a=ie,ke(Se)):pr(Se)?(t.consume(Se),ie):_e(Se)}function ce(Se){return Se===45||Se===46||Se===58||Se===95||Zu(Se)?(t.consume(Se),ce):xe(Se)}function xe(Se){return Se===61?(t.consume(Se),re):Sn(Se)?(a=xe,ke(Se)):pr(Se)?(t.consume(Se),xe):ie(Se)}function re(Se){return Se===null||Se===60||Se===61||Se===62||Se===96?n(Se):Se===34||Se===39?(t.consume(Se),i=Se,me):Sn(Se)?(a=re,ke(Se)):pr(Se)?(t.consume(Se),re):(t.consume(Se),Te)}function me(Se){return Se===i?(t.consume(Se),i=void 0,ye):Se===null?n(Se):Sn(Se)?(a=me,ke(Se)):(t.consume(Se),me)}function Te(Se){return Se===null||Se===34||Se===39||Se===60||Se===61||Se===96?n(Se):Se===47||Se===62||Ci(Se)?ie(Se):(t.consume(Se),Te)}function ye(Se){return Se===47||Se===62||Ci(Se)?ie(Se):n(Se)}function _e(Se){return Se===62?(t.consume(Se),t.exit("htmlTextData"),t.exit("htmlText"),e):n(Se)}function ke(Se){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(Se),t.exit("lineEnding"),Ne}function Ne(Se){return pr(Se)?Cr(t,Qe,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Se):Qe(Se)}function Qe(Se){return t.enter("htmlTextData"),a(Se)}}const m8={name:"labelEnd",resolveAll:nPe,resolveTo:rPe,tokenize:iPe},JAe={tokenize:oPe},ePe={tokenize:sPe},tPe={tokenize:aPe};function nPe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Ml(t,0,t.length,n),t}function rPe(t,e){let n=t.length,r=0,i,o,a,s;for(;n--;)if(i=t[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const u={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},f={type:"label",start:{...t[o][1].start},end:{...t[a][1].end}},g={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[a-2][1].start}};return s=[["enter",u,e],["enter",f,e]],s=$h(s,t.slice(o+1,o+r+3)),s=$h(s,[["enter",g,e]]),s=$h(s,sk(e.parser.constructs.insideSpan.null,t.slice(o+r+4,a-3),e)),s=$h(s,[["exit",g,e],t[a-2],t[a-1],["exit",f,e]]),s=$h(s,t.slice(a+1)),s=$h(s,[["exit",u,e]]),Ml(t,o,t.length,s),t}function iPe(t,e,n){const r=this;let i=r.events.length,o,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return s;function s(w){return o?o._inactive?_(w):(a=r.parser.defined.includes(iw(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(w),t.exit("labelMarker"),t.exit("labelEnd"),u):n(w)}function u(w){return w===40?t.attempt(JAe,g,a?g:_)(w):w===91?t.attempt(ePe,g,a?f:_)(w):a?g(w):_(w)}function f(w){return t.attempt(tPe,g,_)(w)}function g(w){return e(w)}function _(w){return o._balanced=!0,n(w)}}function oPe(t,e,n){return r;function r(_){return t.enter("resource"),t.enter("resourceMarker"),t.consume(_),t.exit("resourceMarker"),i}function i(_){return Ci(_)?Ig(t,o)(_):o(_)}function o(_){return _===41?g(_):wJ(t,a,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(_)}function a(_){return Ci(_)?Ig(t,u)(_):g(_)}function s(_){return n(_)}function u(_){return _===34||_===39||_===40?SJ(t,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(_):g(_)}function f(_){return Ci(_)?Ig(t,g)(_):g(_)}function g(_){return _===41?(t.enter("resourceMarker"),t.consume(_),t.exit("resourceMarker"),t.exit("resource"),e):n(_)}}function sPe(t,e,n){const r=this;return i;function i(s){return OJ.call(r,t,o,a,"reference","referenceMarker","referenceString")(s)}function o(s){return r.parser.defined.includes(iw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(s):n(s)}function a(s){return n(s)}}function aPe(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),i}function i(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const lPe={name:"labelStartImage",resolveAll:m8.resolveAll,tokenize:cPe};function cPe(t,e,n){const r=this;return i;function i(s){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(s),t.exit("labelImageMarker"),o}function o(s){return s===91?(t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelImage"),a):n(s)}function a(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):e(s)}}const uPe={name:"labelStartLink",resolveAll:m8.resolveAll,tokenize:hPe};function hPe(t,e,n){const r=this;return i;function i(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const eD={name:"lineEnding",tokenize:dPe};function dPe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Cr(t,e,"linePrefix")}}const gP={name:"thematicBreak",tokenize:fPe};function fPe(t,e,n){let r=0,i;return o;function o(f){return t.enter("thematicBreak"),a(f)}function a(f){return i=f,s(f)}function s(f){return f===i?(t.enter("thematicBreakSequence"),u(f)):r>=3&&(f===null||Sn(f))?(t.exit("thematicBreak"),e(f)):n(f)}function u(f){return f===i?(t.consume(f),r++,u):(t.exit("thematicBreakSequence"),pr(f)?Cr(t,s,"whitespace")(f):s(f))}}const jc={continuation:{tokenize:yPe},exit:_Pe,name:"list",tokenize:gPe},pPe={partial:!0,tokenize:bPe},mPe={partial:!0,tokenize:vPe};function gPe(t,e,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return s;function s(S){const E=r.containerState.type||(S===42||S===43||S===45?"listUnordered":"listOrdered");if(E==="listUnordered"?!r.containerState.marker||S===r.containerState.marker:n4(S)){if(r.containerState.type||(r.containerState.type=E,t.enter(E,{_container:!0})),E==="listUnordered")return t.enter("listItemPrefix"),S===42||S===45?t.check(gP,n,f)(S):f(S);if(!r.interrupt||S===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(S)}return n(S)}function u(S){return n4(S)&&++a<10?(t.consume(S),u):(!r.interrupt||a<2)&&(r.containerState.marker?S===r.containerState.marker:S===41||S===46)?(t.exit("listItemValue"),f(S)):n(S)}function f(S){return t.enter("listItemMarker"),t.consume(S),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||S,t.check(DR,r.interrupt?n:g,t.attempt(pPe,w,_))}function g(S){return r.containerState.initialBlankLine=!0,o++,w(S)}function _(S){return pr(S)?(t.enter("listItemPrefixWhitespace"),t.consume(S),t.exit("listItemPrefixWhitespace"),w):n(S)}function w(S){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(S)}}function yPe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(DR,i,o);function i(s){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Cr(t,e,"listItemIndent",r.containerState.size+1)(s)}function o(s){return r.containerState.furtherBlankLines||!pr(s)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(s)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(mPe,e,a)(s))}function a(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,Cr(t,t.attempt(jc,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function vPe(t,e,n){const r=this;return Cr(t,i,"listItemIndent",r.containerState.size+1);function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(o):n(o)}}function _Pe(t){t.exit(this.containerState.type)}function bPe(t,e,n){const r=this;return Cr(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const a=r.events[r.events.length-1];return!pr(o)&&a&&a[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const LQ={name:"setextUnderline",resolveTo:xPe,tokenize:wPe};function xPe(t,e){let n=t.length,r,i,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",o?(t.splice(i,0,["enter",a,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end={...t[o][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}function wPe(t,e,n){const r=this;let i;return o;function o(f){let g=r.events.length,_;for(;g--;)if(r.events[g][1].type!=="lineEnding"&&r.events[g][1].type!=="linePrefix"&&r.events[g][1].type!=="content"){_=r.events[g][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||_)?(t.enter("setextHeadingLine"),i=f,a(f)):n(f)}function a(f){return t.enter("setextHeadingLineSequence"),s(f)}function s(f){return f===i?(t.consume(f),s):(t.exit("setextHeadingLineSequence"),pr(f)?Cr(t,u,"lineSuffix")(f):u(f))}function u(f){return f===null||Sn(f)?(t.exit("setextHeadingLine"),e(f)):n(f)}}const OPe={tokenize:SPe};function SPe(t){const e=this,n=t.attempt(DR,r,t.attempt(this.parser.constructs.flowInitial,i,Cr(t,t.attempt(this.parser.constructs.flow,i,t.attempt(AAe,i)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const CPe={resolveAll:TJ()},TPe=CJ("string"),kPe=CJ("text");function CJ(t){return{resolveAll:TJ(t==="text"?EPe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],o=n.attempt(i,a,s);return a;function a(g){return f(g)?o(g):s(g)}function s(g){if(g===null){n.consume(g);return}return n.enter("data"),n.consume(g),u}function u(g){return f(g)?(n.exit("data"),o(g)):(n.consume(g),u)}function f(g){if(g===null)return!0;const _=i[g];let w=-1;if(_)for(;++w<_.length;){const S=_[w];if(!S.previous||S.previous.call(r,r.previous))return!0}return!1}}}function TJ(t){return e;function e(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return t?t(n,r):n}}function EPe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let o=i.length,a=-1,s=0,u;for(;o--;){const f=i[o];if(typeof f=="string"){for(a=f.length;f.charCodeAt(a-1)===32;)s++,a--;if(a)break;a=-1}else if(f===-2)u=!0,s++;else if(f!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(s=0),s){const f={type:n===t.length||u||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?a:r.start._bufferIndex+a,_index:r.start._index+o,line:r.end.line,column:r.end.column-s,offset:r.end.offset-s},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(t.splice(n,0,["enter",f,e],["exit",f,e]),n+=2)}n++}return t}const APe={42:jc,43:jc,45:jc,48:jc,49:jc,50:jc,51:jc,52:jc,53:jc,54:jc,55:jc,56:jc,57:jc,62:vJ},PPe={91:DAe},MPe={[-2]:J3,[-1]:J3,32:J3},RPe={35:FAe,42:gP,45:[LQ,gP],60:UAe,61:LQ,95:gP,96:IQ,126:IQ},IPe={38:bJ,92:_J},DPe={[-5]:eD,[-4]:eD,[-3]:eD,33:lPe,38:bJ,42:c4,60:[uAe,YAe],91:uPe,92:[NAe,_J],93:m8,95:c4,96:OAe},LPe={null:[c4,CPe]},$Pe={null:[42,95]},zPe={null:[]},NPe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:$Pe,contentInitial:PPe,disable:zPe,document:APe,flow:RPe,flowInitial:MPe,insideSpan:LPe,string:IPe,text:DPe},Symbol.toStringTag,{value:"Module"}));function BPe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let a=[],s=[];const u={attempt:H(U),check:H(q),consume:z,enter:B,exit:F,interrupt:H(q,{interrupt:!0})},f={code:null,containerState:{},defineSkip:A,events:[],now:E,parser:t,previous:null,sliceSerialize:w,sliceStream:S,write:_};let g=e.tokenize.call(f,u);return e.resolveAll&&o.push(e),f;function _(xe){return a=$h(a,xe),R(),a[a.length-1]!==null?[]:(ne(e,0),f.events=sk(o,f.events,f),f.events)}function w(xe,re){return jPe(S(xe),re)}function S(xe){return FPe(a,xe)}function E(){const{_bufferIndex:xe,_index:re,line:me,column:Te,offset:ye}=r;return{_bufferIndex:xe,_index:re,line:me,column:Te,offset:ye}}function A(xe){i[xe.line]=xe.column,ce()}function R(){let xe;for(;r._index<a.length;){const re=a[r._index];if(typeof re=="string")for(xe=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===xe&&r._bufferIndex<re.length;)$(re.charCodeAt(r._bufferIndex));else $(re)}}function $(xe){g=g(xe)}function z(xe){Sn(xe)?(r.line++,r.column=1,r.offset+=xe===-3?2:1,ce()):xe!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=xe}function B(xe,re){const me=re||{};return me.type=xe,me.start=E(),f.events.push(["enter",me,f]),s.push(me),me}function F(xe){const re=s.pop();return re.end=E(),f.events.push(["exit",re,f]),re}function U(xe,re){ne(xe,re.from)}function q(xe,re){re.restore()}function H(xe,re){return me;function me(Te,ye,_e){let ke,Ne,Qe,Se;return Array.isArray(Te)?Xe(Te):"tokenize"in Te?Xe([Te]):Me(Te);function Me(ct){return st;function st(bt){const At=bt!==null&&ct[bt],Tt=bt!==null&&ct.null,Wt=[...Array.isArray(At)?At:At?[At]:[],...Array.isArray(Tt)?Tt:Tt?[Tt]:[]];return Xe(Wt)(bt)}}function Xe(ct){return ke=ct,Ne=0,ct.length===0?_e:Ee(ct[Ne])}function Ee(ct){return st;function st(bt){return Se=ie(),Qe=ct,ct.partial||(f.currentConstruct=ct),ct.name&&f.parser.constructs.disable.null.includes(ct.name)?mt():ct.tokenize.call(re?Object.assign(Object.create(f),re):f,u,ft,mt)(bt)}}function ft(ct){return xe(Qe,Se),ye}function mt(ct){return Se.restore(),++Ne<ke.length?Ee(ke[Ne]):_e}}}function ne(xe,re){xe.resolveAll&&!o.includes(xe)&&o.push(xe),xe.resolve&&Ml(f.events,re,f.events.length-re,xe.resolve(f.events.slice(re),f)),xe.resolveTo&&(f.events=xe.resolveTo(f.events,f))}function ie(){const xe=E(),re=f.previous,me=f.currentConstruct,Te=f.events.length,ye=Array.from(s);return{from:Te,restore:_e};function _e(){r=xe,f.previous=re,f.currentConstruct=me,f.events.length=Te,s=ye,ce()}}function ce(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function FPe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,o=e.end._bufferIndex;let a;if(n===i)a=[t[n].slice(r,o)];else{if(a=t.slice(n,i),r>-1){const s=a[0];typeof s=="string"?a[0]=s.slice(r):a.shift()}o>0&&a.push(t[i].slice(0,o))}return a}function jPe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const o=t[n];let a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&i)continue;a=" ";break}default:a=String.fromCharCode(o)}i=o===-2,r.push(a)}return r.join("")}function VPe(t){const r={constructs:eAe([NPe,...(t||{}).extensions||[]]),content:i(rAe),defined:[],document:i(oAe),flow:i(OPe),lazy:{},string:i(TPe),text:i(kPe)};return r;function i(o){return a;function a(s){return BPe(r,o,s)}}}function QPe(t){for(;!xJ(t););return t}const $Q=/[\0\t\n\r]/g;function UPe(){let t=1,e="",n=!0,r;return i;function i(o,a,s){const u=[];let f,g,_,w,S;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(a||void 0).decode(o)),_=0,e="",n&&(o.charCodeAt(0)===65279&&_++,n=void 0);_<o.length;){if($Q.lastIndex=_,f=$Q.exec(o),w=f&&f.index!==void 0?f.index:o.length,S=o.charCodeAt(w),!f){e=o.slice(_);break}if(S===10&&_===w&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),_<w&&(u.push(o.slice(_,w)),t+=w-_),S){case 0:{u.push(65533),t++;break}case 9:{for(g=Math.ceil(t/4)*4,u.push(-2);t++<g;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:r=!0,t=1}_=w+1}return s&&(r&&u.push(-5),e&&u.push(e),u.push(null)),u}}const kJ={}.hasOwnProperty;function ZPe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),qPe(n)(QPe(VPe(n).document().write(UPe()(t,e,!0))))}function qPe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(lr),autolinkProtocol:ie,autolinkEmail:ie,atxHeading:o(Jt),blockQuote:o(Tt),characterEscape:ie,characterReference:ie,codeFenced:o(Wt),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(Wt,a),codeText:o(nn,a),codeTextData:ie,data:ie,codeFlowValue:ie,definition:o(An),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(rn),hardBreakEscape:o(Mn),hardBreakTrailing:o(Mn),htmlFlow:o(vn,a),htmlFlowData:ie,htmlText:o(vn,a),htmlTextData:ie,image:o(Nn),label:a,link:o(lr),listItem:o(Ue),listItemValue:w,listOrdered:o(rr,_),listUnordered:o(rr),paragraph:o(Je),reference:Ee,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(Jt),strong:o(xt),thematicBreak:o(Vt)},exit:{atxHeading:u(),atxHeadingSequence:U,autolink:u(),autolinkEmail:At,autolinkProtocol:bt,blockQuote:u(),characterEscapeValue:ce,characterReferenceMarkerHexadecimal:mt,characterReferenceMarkerNumeric:mt,characterReferenceValue:ct,characterReference:st,codeFenced:u(R),codeFencedFence:A,codeFencedFenceInfo:S,codeFencedFenceMeta:E,codeFlowValue:ce,codeIndented:u($),codeText:u(ye),codeTextData:ce,data:ce,definition:u(),definitionDestinationString:F,definitionLabelString:z,definitionTitleString:B,emphasis:u(),hardBreakEscape:u(re),hardBreakTrailing:u(re),htmlFlow:u(me),htmlFlowData:ce,htmlText:u(Te),htmlTextData:ce,image:u(ke),label:Qe,labelText:Ne,lineEnding:xe,link:u(_e),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ft,resourceDestinationString:Se,resourceTitleString:Me,resource:Xe,setextHeading:u(ne),setextHeadingLineSequence:H,setextHeadingText:q,strong:u(),thematicBreak:u()}};EJ(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(we){let ae={type:"root",children:[]};const Y={stack:[ae],tokenStack:[],config:e,enter:s,exit:f,buffer:a,resume:g,data:n},be=[];let $e=-1;for(;++$e<we.length;)if(we[$e][1].type==="listOrdered"||we[$e][1].type==="listUnordered")if(we[$e][0]==="enter")be.push($e);else{const ze=be.pop();$e=i(we,ze,$e)}for($e=-1;++$e<we.length;){const ze=e[we[$e][0]];kJ.call(ze,we[$e][1].type)&&ze[we[$e][1].type].call(Object.assign({sliceSerialize:we[$e][2].sliceSerialize},Y),we[$e][1])}if(Y.tokenStack.length>0){const ze=Y.tokenStack[Y.tokenStack.length-1];(ze[1]||zQ).call(Y,void 0,ze[0])}for(ae.position={start:u0(we.length>0?we[0][1].start:{line:1,column:1,offset:0}),end:u0(we.length>0?we[we.length-2][1].end:{line:1,column:1,offset:0})},$e=-1;++$e<e.transforms.length;)ae=e.transforms[$e](ae)||ae;return ae}function i(we,ae,Y){let be=ae-1,$e=-1,ze=!1,rt,tt,Ye,at;for(;++be<=Y;){const Ot=we[be];switch(Ot[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ot[0]==="enter"?$e++:$e--,at=void 0;break}case"lineEndingBlank":{Ot[0]==="enter"&&(rt&&!at&&!$e&&!Ye&&(Ye=be),at=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:at=void 0}if(!$e&&Ot[0]==="enter"&&Ot[1].type==="listItemPrefix"||$e===-1&&Ot[0]==="exit"&&(Ot[1].type==="listUnordered"||Ot[1].type==="listOrdered")){if(rt){let ot=be;for(tt=void 0;ot--;){const $t=we[ot];if($t[1].type==="lineEnding"||$t[1].type==="lineEndingBlank"){if($t[0]==="exit")continue;tt&&(we[tt][1].type="lineEndingBlank",ze=!0),$t[1].type="lineEnding",tt=ot}else if(!($t[1].type==="linePrefix"||$t[1].type==="blockQuotePrefix"||$t[1].type==="blockQuotePrefixWhitespace"||$t[1].type==="blockQuoteMarker"||$t[1].type==="listItemIndent"))break}Ye&&(!tt||Ye<tt)&&(rt._spread=!0),rt.end=Object.assign({},tt?we[tt][1].start:Ot[1].end),we.splice(tt||be,0,["exit",rt,Ot[2]]),be++,Y++}if(Ot[1].type==="listItemPrefix"){const ot={type:"listItem",_spread:!1,start:Object.assign({},Ot[1].start),end:void 0};rt=ot,we.splice(be,0,["enter",ot,Ot[2]]),be++,Y++,Ye=void 0,at=!0}}}return we[ae][1]._spread=ze,Y}function o(we,ae){return Y;function Y(be){s.call(this,we(be),be),ae&&ae.call(this,be)}}function a(){this.stack.push({type:"fragment",children:[]})}function s(we,ae,Y){this.stack[this.stack.length-1].children.push(we),this.stack.push(we),this.tokenStack.push([ae,Y||void 0]),we.position={start:u0(ae.start),end:void 0}}function u(we){return ae;function ae(Y){we&&we.call(this,Y),f.call(this,Y)}}function f(we,ae){const Y=this.stack.pop(),be=this.tokenStack.pop();if(be)be[0].type!==we.type&&(ae?ae.call(this,we,be[0]):(be[1]||zQ).call(this,we,be[0]));else throw new Error("Cannot close `"+we.type+"` ("+Rg({start:we.start,end:we.end})+"): its not open");Y.position.end=u0(we.end)}function g(){return h8(this.stack.pop())}function _(){this.data.expectingFirstListItemValue=!0}function w(we){if(this.data.expectingFirstListItemValue){const ae=this.stack[this.stack.length-2];ae.start=Number.parseInt(this.sliceSerialize(we),10),this.data.expectingFirstListItemValue=void 0}}function S(){const we=this.resume(),ae=this.stack[this.stack.length-1];ae.lang=we}function E(){const we=this.resume(),ae=this.stack[this.stack.length-1];ae.meta=we}function A(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function R(){const we=this.resume(),ae=this.stack[this.stack.length-1];ae.value=we.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function $(){const we=this.resume(),ae=this.stack[this.stack.length-1];ae.value=we.replace(/(\r?\n|\r)$/g,"")}function z(we){const ae=this.resume(),Y=this.stack[this.stack.length-1];Y.label=ae,Y.identifier=iw(this.sliceSerialize(we)).toLowerCase()}function B(){const we=this.resume(),ae=this.stack[this.stack.length-1];ae.title=we}function F(){const we=this.resume(),ae=this.stack[this.stack.length-1];ae.url=we}function U(we){const ae=this.stack[this.stack.length-1];if(!ae.depth){const Y=this.sliceSerialize(we).length;ae.depth=Y}}function q(){this.data.setextHeadingSlurpLineEnding=!0}function H(we){const ae=this.stack[this.stack.length-1];ae.depth=this.sliceSerialize(we).codePointAt(0)===61?1:2}function ne(){this.data.setextHeadingSlurpLineEnding=void 0}function ie(we){const Y=this.stack[this.stack.length-1].children;let be=Y[Y.length-1];(!be||be.type!=="text")&&(be=Et(),be.position={start:u0(we.start),end:void 0},Y.push(be)),this.stack.push(be)}function ce(we){const ae=this.stack.pop();ae.value+=this.sliceSerialize(we),ae.position.end=u0(we.end)}function xe(we){const ae=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Y=ae.children[ae.children.length-1];Y.position.end=u0(we.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ae.type)&&(ie.call(this,we),ce.call(this,we))}function re(){this.data.atHardBreak=!0}function me(){const we=this.resume(),ae=this.stack[this.stack.length-1];ae.value=we}function Te(){const we=this.resume(),ae=this.stack[this.stack.length-1];ae.value=we}function ye(){const we=this.resume(),ae=this.stack[this.stack.length-1];ae.value=we}function _e(){const we=this.stack[this.stack.length-1];if(this.data.inReference){const ae=this.data.referenceType||"shortcut";we.type+="Reference",we.referenceType=ae,delete we.url,delete we.title}else delete we.identifier,delete we.label;this.data.referenceType=void 0}function ke(){const we=this.stack[this.stack.length-1];if(this.data.inReference){const ae=this.data.referenceType||"shortcut";we.type+="Reference",we.referenceType=ae,delete we.url,delete we.title}else delete we.identifier,delete we.label;this.data.referenceType=void 0}function Ne(we){const ae=this.sliceSerialize(we),Y=this.stack[this.stack.length-2];Y.label=fJ(ae),Y.identifier=iw(ae).toLowerCase()}function Qe(){const we=this.stack[this.stack.length-1],ae=this.resume(),Y=this.stack[this.stack.length-1];if(this.data.inReference=!0,Y.type==="link"){const be=we.children;Y.children=be}else Y.alt=ae}function Se(){const we=this.resume(),ae=this.stack[this.stack.length-1];ae.url=we}function Me(){const we=this.resume(),ae=this.stack[this.stack.length-1];ae.title=we}function Xe(){this.data.inReference=void 0}function Ee(){this.data.referenceType="collapsed"}function ft(we){const ae=this.resume(),Y=this.stack[this.stack.length-1];Y.label=ae,Y.identifier=iw(this.sliceSerialize(we)).toLowerCase(),this.data.referenceType="full"}function mt(we){this.data.characterReferenceType=we.type}function ct(we){const ae=this.sliceSerialize(we),Y=this.data.characterReferenceType;let be;Y?(be=dJ(ae,Y==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):be=WC(ae);const $e=this.stack[this.stack.length-1];$e.value+=be}function st(we){const ae=this.stack.pop();ae.position.end=u0(we.end)}function bt(we){ce.call(this,we);const ae=this.stack[this.stack.length-1];ae.url=this.sliceSerialize(we)}function At(we){ce.call(this,we);const ae=this.stack[this.stack.length-1];ae.url="mailto:"+this.sliceSerialize(we)}function Tt(){return{type:"blockquote",children:[]}}function Wt(){return{type:"code",lang:null,meta:null,value:""}}function nn(){return{type:"inlineCode",value:""}}function An(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function rn(){return{type:"emphasis",children:[]}}function Jt(){return{type:"heading",depth:0,children:[]}}function Mn(){return{type:"break"}}function vn(){return{type:"html",value:""}}function Nn(){return{type:"image",title:null,url:"",alt:null}}function lr(){return{type:"link",title:null,url:"",children:[]}}function rr(we){return{type:"list",ordered:we.type==="listOrdered",start:null,spread:we._spread,children:[]}}function Ue(we){return{type:"listItem",spread:we._spread,checked:null,children:[]}}function Je(){return{type:"paragraph",children:[]}}function xt(){return{type:"strong",children:[]}}function Et(){return{type:"text",value:""}}function Vt(){return{type:"thematicBreak"}}}function u0(t){return{line:t.line,column:t.column,offset:t.offset}}function EJ(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?EJ(t,r):WPe(t,r)}}function WPe(t,e){let n;for(n in e)if(kJ.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function zQ(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Rg({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Rg({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Rg({start:e.start,end:e.end})+") is still open")}function y2(t){return t.children instanceof Array}class u4 extends Error{constructor(e,n){super(e),this.name="MarkdownParseError",this.cause=n}}class h4 extends Error{constructor(e){super(e),this.name="UnrecognizedMarkdownConstructError"}}function HPe(t){const e=new Map;return t.type!=="root"?{importDeclarations:{}}:(t.children.filter(r=>r.type==="mdxjsEsm").filter(r=>r.value.startsWith("import ")).forEach(r=>{var i,o;(((o=(i=r.data)==null?void 0:i.estree)==null?void 0:o.body)??[]).forEach(a=>{a.type==="ImportDeclaration"&&a.specifiers.forEach(s=>{e.set(s.local.name,{source:`${a.source.value}`,defaultExport:s.type==="ImportDefaultSpecifier"})})})}),{importDeclarations:Object.fromEntries(e.entries())})}function GPe({root:t,markdown:e,visitors:n,syntaxExtensions:r,mdastExtensions:i,...o}){var a;let s;try{s=ZPe(e,{extensions:r,mdastExtensions:i})}catch(u){throw u instanceof Error?new u4(`Error parsing markdown: ${u.message}`,u):new u4(`Error parsing markdown: ${u}`,u)}s.children.length===0&&s.children.push({type:"paragraph",children:[]}),((a=s.children.at(-1))==null?void 0:a.type)!=="paragraph"&&s.children.push({type:"paragraph",children:[]}),g8({root:t,mdastRoot:s,visitors:n,...o})}function g8({root:t,mdastRoot:e,visitors:n,...r}){const i=new WeakMap,o=new WeakMap,a=HPe(e);n=n.sort((f,g)=>(g.priority??0)-(f.priority??0));function s(f,g){if(!y2(f))throw new Error("Attempting to visit children of a non-parent");f.children.forEach(_=>{u(_,g,f)})}function u(f,g,_,w=null){const S=n.find((E,A)=>w?.has(A)?!1:typeof E.testNode=="string"?E.testNode===f.type:E.testNode(f,r));if(!S)try{throw new h4(`Unsupported markdown syntax: ${pJ(f)}`)}catch{throw new h4(`Parsing of the following markdown structure failed: ${JSON.stringify({type:f.type,name:"name"in f?f.name:"N/A"})}`)}S.visitNode({mdastNode:f,lexicalParent:g,mdastParent:_,descriptors:r,metaData:a,actions:{visitChildren:s,nextVisitor(){u(f,g,_,(w??new Set).add(n.indexOf(S)))},addAndStepInto(E){g.append(E),y2(f)&&s(f,E)},addFormatting(E,A){A||y2(f)&&(A=f),A&&i.set(A,E|(i.get(_)??0))},removeFormatting(E,A){A||y2(f)&&(A=f),A&&i.set(A,E^(i.get(_)??0))},getParentFormatting(){return i.get(_)??0},addStyle(E,A){A||y2(f)&&(A=f),A&&o.set(A,E)},getParentStyle(){return o.get(_)??""}}})}u(e,t,null)}var XPe=Object.defineProperty,YPe=(t,e,n)=>e in t?XPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tD=(t,e,n)=>(YPe(t,typeof e!="symbol"?e+"":e,n),n);const NQ="generic-html";class ak extends iu{constructor(e,n,r,i){super(i),tD(this,"__tag"),tD(this,"__nodeType"),tD(this,"__attributes"),this.__tag=e,this.__nodeType=n,this.__attributes=r}static getType(){return NQ}static clone(e){return new ak(e.__tag,e.__nodeType,e.__attributes,e.__key)}getTag(){return this.__tag}getNodeType(){return this.__nodeType}getAttributes(){return this.__attributes}updateAttributes(e){const n=this.getWritable();n.__attributes=e}getStyle(){var e;return(e=this.__attributes.find(n=>n.name==="style"))==null?void 0:e.value}createDOM(){const e=this.__tag,n=document.createElement(e);return this.__attributes.forEach(r=>{n.setAttribute(r.name,r.value)}),n}updateDOM(){return!1}static importDOM(){return{}}exportDOM(e){const{element:n}=super.exportDOM(e);return{element:n}}static importJSON(e){const n=AJ(e.tag,e.mdxType,e.attributes);return n.setFormat(e.format),n.setIndent(e.indent),n.setDirection(e.direction),n}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),attributes:this.__attributes,mdxType:this.__nodeType,type:NQ,version:1}}extractWithChild(){return!0}isInline(){return this.__nodeType==="mdxJsxTextElement"}}function AJ(t,e,n){return nh(new ak(t,e,n))}function KPe(t){return t instanceof ak}const JPe={testLexicalNode:KPe,visitLexicalNode({actions:t,lexicalNode:e}){t.addAndStepInto("mdxJsxTextElement",{name:e.getTag(),type:e.getNodeType(),attributes:e.getAttributes()})},priority:-100},e5e={testLexicalNode:pf,visitLexicalNode:({mdastParent:t,actions:e})=>{e.appendToParent(t,{type:"text",value:`
`})}},t5e={testLexicalNode:bR,visitLexicalNode:({actions:t})=>{t.addAndStepInto("paragraph")}},n5e={testLexicalNode:Gs,visitLexicalNode:({actions:t})=>{t.addAndStepInto("root")}},cC=1,uC=2,yP=4,hC=8,LR=16,vP=32,_P=64,bP=128;function BQ(t){return t.type==="text"}const r5e=["u","span","sub","sup"],i5e={shouldJoin:(t,e)=>{if(["text","emphasis","strong","highlight"].includes(t.type))return t.type===e.type;if(t.type==="mdxJsxTextElement"&&e.type==="mdxJsxTextElement"&&r5e.includes(e.name)){const n=e;return t.name===n.name&&JSON.stringify(t.attributes)===JSON.stringify(n.attributes)}return!1},join(t,e){return BQ(t)&&BQ(e)?{type:"text",value:t.value+e.value}:{...t,children:[...t.children,...e.children]}},testLexicalNode:hn,visitLexicalNode:({lexicalNode:t,mdastParent:e,actions:n})=>{const r=t.getPreviousSibling(),i=hn(r)?r.getFormat():0,o=t.getTextContent(),a=t.getFormat(),s=t.getStyle();let u=e;if(s&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"span",children:[],attributes:[{type:"mdxJsxAttribute",name:"style",value:s}]})),i&a&hC&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"u",children:[],attributes:[]})),i&a&_P&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"sup",children:[],attributes:[]})),i&a&vP&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"sub",children:[],attributes:[]})),i&a&uC&&(u=n.appendToParent(u,{type:"emphasis",children:[]})),i&a&cC&&(u=n.appendToParent(u,{type:"strong",children:[]})),i&a&yP&&(u=n.appendToParent(u,{type:"delete",children:[]})),i&a&bP&&(u=n.appendToParent(u,{type:"highlight",children:[]})),a&hC&&!(i&hC)&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"u",children:[],attributes:[]})),a&_P&&!(i&_P)&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"sup",children:[],attributes:[]})),a&vP&&!(i&vP)&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"sub",children:[],attributes:[]})),a&uC&&!(i&uC)&&(u=n.appendToParent(u,{type:"emphasis",children:[]})),a&cC&&!(i&cC)&&(u=n.appendToParent(u,{type:"strong",children:[]})),a&yP&&!(i&yP)&&(u=n.appendToParent(u,{type:"delete",children:[]})),a&bP&&!(i&bP)&&(u=n.appendToParent(u,{type:"highlight",children:[]})),a&LR){n.appendToParent(u,{type:"inlineCode",value:o});return}n.appendToParent(u,{type:"text",value:o})}},o5e={testNode:"break",visitNode:function({lexicalParent:t}){t.append(_f())}};function iA(t,e){return[{testNode:n=>n.type==="mdxJsxTextElement"&&n.name===t,visitNode({actions:n,mdastNode:r,lexicalParent:i}){n.addFormatting(e),n.visitChildren(r,i)}},{testNode:n=>n.type==="html"&&n.value===`<${t}>`,visitNode({actions:n,mdastParent:r}){n.addFormatting(e,r)}},{testNode:n=>n.type==="html"&&n.value===`</${t}>`,visitNode({actions:n,mdastParent:r}){n.removeFormatting(e,r)}}]}const s5e={testNode:"delete",visitNode({mdastNode:t,actions:e,lexicalParent:n}){e.addFormatting(yP),e.visitChildren(t,n)}},a5e={testNode:"highlight",visitNode({mdastNode:t,actions:e,lexicalParent:n}){e.addFormatting(bP),e.visitChildren(t,n)}},l5e={testNode:"inlineCode",visitNode({mdastNode:t,actions:e}){e.addAndStepInto(Yi(t.value).setFormat(e.getParentFormatting()|LR))}},c5e={testNode:"emphasis",visitNode({mdastNode:t,actions:e,lexicalParent:n}){e.addFormatting(uC),e.visitChildren(t,n)}},u5e={testNode:"strong",visitNode({mdastNode:t,actions:e,lexicalParent:n}){e.addFormatting(cC),e.visitChildren(t,n)}},h5e=[c5e,u5e,...iA("u",hC),...iA("code",LR),l5e,s5e,a5e,...iA("sup",_P),...iA("sub",vP)],d5e={testNode:mJ,visitNode:function({mdastNode:t,actions:e,lexicalParent:n}){t.name==="span"&&t.attributes.length===1&&t.attributes[0].type==="mdxJsxAttribute"&&t.attributes[0].name==="style"?(e.addStyle(t.attributes[0].value,t),e.visitChildren(t,n)):e.addAndStepInto(AJ(t.name,t.type,t.attributes))},priority:-100},f5e=["listitem","quote","admonition"],p5e={testNode:"paragraph",visitNode:function({mdastNode:t,lexicalParent:e,actions:n}){f5e.includes(e.getType())?n.visitChildren(t,e):n.addAndStepInto(mi())}},m5e={testNode:"root",visitNode({actions:t,mdastNode:e,lexicalParent:n}){t.visitChildren(e,n)}},g5e={testNode:"text",visitNode({mdastNode:t,actions:e}){const n=Yi(t.value);n.setFormat(e.getParentFormatting());const r=e.getParentStyle();r!==""&&n.setStyle(r),e.addAndStepInto(n)}},PJ=()=>se.createElement(AK,{externalHistoryState:Es(j5e)});function y5e(t){return{canContainEols:["comment"],enter:{comment(e){this.buffer()}},exit:{comment(e){this.resume()}}}}const FQ=(t,e,n)=>{return r;function r(E){return t.enter("comment"),t.consume(E),i}function i(E){return E===kl.exclamationMark?(t.consume(E),o):n(E)}function o(E){return E===kl.dash?(t.consume(E),a):n(E)}function a(E){return E===kl.dash?(t.consume(E),s):n(E)}function s(E){return E===kl.greaterThan?n(E):Sn(E)?g(E):(t.enter(Tg.data),E===kl.dash?(t.consume(E),u):f(E))}function u(E){return E===kl.greaterThan?n(E):f(E)}function f(E){return E===kl.eof?n(E):E===kl.dash?(t.consume(E),w):Sn(E)?(t.exit(Tg.data),g(E)):(t.consume(E),f)}function g(E){return t.enter(Tg.lineEnding),t.consume(E),t.exit(Tg.lineEnding),Cr(t,_,Tg.linePrefix)}function _(E){return Sn(E)?g(E):(t.enter(Tg.data),f(E))}function w(E){return E===kl.dash?(t.consume(E),S):f(E)}function S(E){return E===kl.greaterThan?(t.exit(Tg.data),t.enter("commentEnd"),t.consume(E),t.exit("commentEnd"),t.exit("comment"),e(E)):E===kl.dash?(t.consume(E),S):f(E)}},v5e={flow:{60:{tokenize:FQ,concrete:!0}},text:{60:{tokenize:FQ}}},_5e="_bold_1tncs_10",b5e="_italic_1tncs_14",x5e="_underline_1tncs_18",w5e="_strikethrough_1tncs_34",O5e="_underlineStrikethrough_1tncs_38",S5e="_subscript_1tncs_42",C5e="_superscript_1tncs_47",T5e="_code_1tncs_52",k5e="_nestedListItem_1tncs_59",E5e="_listitem_1tncs_69",A5e="_listItemChecked_1tncs_73",P5e="_listItemUnchecked_1tncs_74",M5e="_admonitionDanger_1tncs_151",R5e="_admonitionInfo_1tncs_152",I5e="_admonitionNote_1tncs_153",D5e="_admonitionTip_1tncs_154",L5e="_admonitionCaution_1tncs_155",Xa={bold:_5e,italic:b5e,underline:x5e,strikethrough:w5e,underlineStrikethrough:O5e,subscript:S5e,superscript:C5e,code:T5e,nestedListItem:k5e,listitem:E5e,listItemChecked:A5e,listItemUnchecked:P5e,admonitionDanger:M5e,admonitionInfo:R5e,admonitionNote:I5e,admonitionTip:D5e,admonitionCaution:L5e},$R={text:{bold:Xa.bold,italic:Xa.italic,underline:Xa.underline,code:Xa.code,strikethrough:Xa.strikethrough,subscript:Xa.subscript,superscript:Xa.superscript,underlineStrikethrough:Xa.underlineStrikethrough},list:{listitem:Xa.listitem,listitemChecked:Xa.listItemChecked,listitemUnchecked:Xa.listItemUnchecked,nested:{listitem:Xa.nestedListItem}},admonition:{danger:Xa.admonitionDanger,info:Xa.admonitionInfo,note:Xa.admonitionNote,tip:Xa.admonitionTip,caution:Xa.admonitionCaution}},gb=Kn("NESTED_EDITOR_UPDATED_COMMAND"),id=kn(null),zo=kn(null),d4=kn(""),f4=kn(!0),Ma=kn(!1,t=>{t.sub(t.pipe(Ma,$o(id)),([e,n])=>{n?.setEditable(!e)})}),p4=kn(""),jQ=kn(!1),GC=kn(!1),y8=kn(0),XC=kn(null),m4=bs(t=>{t.link(t.pipe(XC,WT(e=>e!==null)),m4)}),v8=bs(t=>{t.sub(t.pipe(v8,$o(zo)),([e,n])=>{n?.dispatchCommand(Mg,e)})}),Dw=kn(null,t=>{t.sub(t.pipe(Dw,$o(zo)),([e,n])=>{if(!e||!n)return;const r=e.anchor.getNode();let i=r.getKey()==="root"?r:mf(r,s=>{const u=s.getParent();return u!==null&&Ys(u)});i??(i=r.getTopLevelElementOrThrow());const o=i.getKey();if(n.getElementByKey(o)!==null){const s=Iw(i)?i.getTag():i.getType();t.pub(UJ,s)}})}),MJ=kn(""),sm=kn(""),S5=kn(!1),zR=bs(t=>{t.link(sm,zR),t.sub(MJ,e=>{t.pubIn({[S5]:!0,[sm]:e})})}),g4=bs(t=>{t.link(t.pipe(zR,$o(y4),WT(([,e])=>!e),Ug(([e])=>e)),g4)},!0),NR=kn([]),BR=kn([]),RJ=kn([]),IJ=kn([]),lk=kn([]),_8=kn([]),C5=kn({}),FR=kn(!1),ck=kn([]),Lw=kn([]),kO=kn([]),J0=kn(null),$5e=kn(null),DJ=kn(null),kf=dc(BR),ed=dc(NR),$w=dc(RJ),zw=dc(IJ),Ef=dc(lk),uk=dc(_8),y4=kn(!1),b8=bs(t=>{t.sub(t.pipe(b8,$o(sm,id,GC),WT(([e,n])=>e.trim()!==n.trim())),([e,,n,r])=>{t.pub(y4,!0),n?.update(()=>{zr().clear(),w8(t,zr(),e),r?n.focus():rs(null)},{onUpdate:()=>{t.pub(y4,!1)}})})}),LJ=bs(t=>{t.sub(t.pipe(LJ,$o(zo,GC)),([e,n,r])=>{n?.update(()=>{const i=sn();if(i!==null){const o={children:[],append(a){this.children.push(a)},getType(){return i.getNodes()[0].getType()}};w8(t,o,e),OO(o.children)}r?n.focus():rs(null)})})});function $J(){return fY((t,[e,n])=>(t.forEach(r=>{if(!r)throw new Error("You have a subscription that does not return a teardown");r()}),n?e.map(r=>r(n)):[]),[])}const z5e=kn(null),zJ=kn([],t=>{t.pipe(t.combine(zJ,zo),$J())}),NJ=kn([],t=>{t.pipe(t.combine(NJ,id),$J())}),x8=kn(null,E0,(t,e)=>!!(t&&e&&t.editorRef===e.editorRef)),YC=bs(),Ms=kn(t=>{throw new Error(`No icon component for ${t}`)});function dc(t,e){return bs((n,r)=>{n.changeWith(t,r,(i,o)=>{Array.isArray(o)||(o=[o]);let a=i;for(const s of o)i.includes(s)||(a=[...a,s]);return a}),e?.(n,r)})}function BJ(t){const e=sn();Ht(e)&&t.pubIn({[Dw]:e,[y8]:e.format})}const jR=dc(NJ,(t,e)=>{t.pub(e,[n=>n.registerCommand(HT,(r,i)=>(t.pubIn({[zo]:i,[GC]:!0}),i._parentEditor===null&&i.getEditorState().read(()=>{t.pub(x8,{rootNode:zr(),editorType:"lexical",editorRef:i})}),BJ(t),!1),eh),n=>n.registerUpdateListener(({dirtyElements:r,dirtyLeaves:i,editorState:o})=>{if(t.getValue(XC)!==null||r.size===0&&i.size===0)return;let s;o.read(()=>{zr().getLastChild()instanceof ry&&n.update(()=>{zr().append(mi())},{discrete:!0}),s=JEe({root:zr(),visitors:t.getValue(lk),jsxComponentDescriptors:t.getValue(ck),toMarkdownExtensions:t.getValue(_8),toMarkdownOptions:t.getValue(C5),jsxIsAvailable:t.getValue(FR)})}),t.pub(sm,s.trim()),t.pub(S5,!1)}),n=>n.registerCommand(pR,()=>(t.pub(GC,!0),!1),eh)])}),KC=dc(zJ,(t,e)=>{t.pub(e,[n=>n.registerUpdateListener(({editorState:r})=>{r.read(()=>{BJ(t)})}),n=>n.registerCommand(mR,r=>{var i;const o=t.getValue(id);return o&&!((i=o.getRootElement())!=null&&i.contains(r.relatedTarget))&&t.pubIn({[GC]:!1,[YC]:r}),!1},eh)])});function w8(t,e,n){try{GPe({root:e,visitors:t.getValue(NR),mdastExtensions:t.getValue(IJ),markdown:n,syntaxExtensions:t.getValue(RJ),jsxComponentDescriptors:t.getValue(ck),directiveDescriptors:t.getValue(Lw),codeBlockEditorDescriptors:t.getValue(kO)}),t.pub(XC,null)}catch(r){if(r instanceof u4||r instanceof h4)t.pubIn({[sm]:n,[XC]:{error:r.message,source:n}});else throw r}}const FJ=kn([]),$b=dc(FJ),jJ=kn([]),N5e=dc(jJ),VJ=kn([]),B5e=dc(VJ),QJ=kn([]),F5e=dc(QJ),O8=kn([]),S8=dc(O8),j5e=kn(EK()),UJ=kn("");bs();const T5=bs(t=>{t.sub(t.pipe(T5,$o(zo)),([e,n])=>{n?.update(()=>{const r=sn();Ht(r)&&(UCe(r,e),setTimeout(()=>{n.focus()}))})})}),VR=bs(t=>{t.sub(t.pipe(VR,$o(zo)),([e,n])=>{n?.focus(()=>{n.getEditorState().read(()=>{const r=sn();Ht(r)&&(n.update(()=>{const i=e();i.isInline()?(OO([i]),Ys(i.getParentOrThrow())&&l8(i,mi).selectEnd()):kK(i),setTimeout(()=>{"select"in i&&typeof i.select=="function"&&i.select()})}),setTimeout(()=>{n.dispatchCommand(gb,void 0)}))})},{defaultSelection:"rootEnd"})})}),yb=kn("rich-text",t=>{function e(){return fY((n,r)=>({current:n.next,next:r}),{current:"rich-text",next:"rich-text"})}t.sub(t.pipe(yb,e(),$o(vb)),([{current:n},r])=>{(n==="source"||n==="diff")&&t.pub(b8,r)}),t.sub(t.pipe(yb,e(),WT(n=>n.current==="rich-text"),$o(zo)),([,n])=>{n?.dispatchCommand(gb,void 0)})}),vb=kn("",t=>{t.link(sm,vb),t.link(vb,zR)},!0),C8=kn([]),EO=dc(C8),ZJ=kn(()=>{throw new Error("No translation function provided")}),k5=kn($R),V5e=Dl({init(t,e){const n=e?.initialMarkdown??"";t.register(jR),t.register(KC),t.register(zR),t.register(vb),t.pubIn({[MJ]:e?.trim?n.trim():n,[Ms]:e?.iconComponentFor,[ed]:[m5e,p5e,g5e,o5e,...h5e],[kf]:[SO,fm,ak],[Ef]:[n5e,t5e,i5e,e5e,JPe],[d4]:e?.contentEditableClassName,[f4]:e?.spellCheck,[C5]:e?.toMarkdownOptions,[jQ]:e?.autoFocus,[p4]:e?.placeholder,[Ma]:e?.readOnly,[ZJ]:e?.translation,[zw]:[ATe(),LTe],[$w]:[kTe(),pke()],[uk]:[tke(),PTe(),NTe],[k5]:e?.lexicalTheme??$R}),t.singletonSub(m4,e?.onError),t.singletonSub(g4,r=>{e?.onChange(r,t.getValue(S5))}),t.singletonSub(YC,e?.onBlur),e?.suppressHtmlProcessing||t.pubIn({[zw]:[eke(),y5e()],[$w]:[$ke(),zke(),v5e],[ed]:d5e}),e?.suppressSharedHistory||t.pub($b,PJ)},postInit(t,e){const n=qN({editable:e?.readOnly!==!0,namespace:e?.lexicalEditorNamespace??"MDXEditor",nodes:[...t.getValue(BR),...e?.additionalLexicalNodes??[]],onError:r=>{throw r},theme:t.getValue(k5)});e?.editorState!==null&&n.update(()=>{const r=e?.initialMarkdown.trim()??"";w8(t,zr(),r);const i=e?.autoFocus;if(i){if(i===!0){setTimeout(()=>{n.focus(E0,{defaultSelection:"rootStart"})});return}setTimeout(()=>{n.focus(E0,{defaultSelection:i.defaultSelection??"rootStart"})})}}),t.pub(id,n),t.pub(zo,n)},update(t,e){t.pubIn({[d4]:e?.contentEditableClassName,[f4]:e?.spellCheck,[C5]:e?.toMarkdownOptions,[jQ]:e?.autoFocus,[p4]:e?.placeholder,[Ma]:e?.readOnly}),t.singletonSub(g4,n=>{e?.onChange(n,t.getValue(S5))}),t.singletonSub(YC,e?.onBlur),t.singletonSub(m4,e?.onError)}});function xs(){return Es(ZJ)}function Q5e(){return zr().getTextContent()}function U5e(t,e=!0){if(t)return!1;let n=Q5e();return e&&(n=n.trim()),n===""}function Z5e(t){if(!U5e(t,!1))return!1;const e=zr().getChildren(),n=e.length;if(n>1)return!1;for(let r=0;r<n;r++){const i=e[r];if(_i(i))return!1;if(Rt(i)){if(!bR(i)||i.__indent!==0)return!1;const o=i.getChildren(),a=o.length;for(let s=0;s<a;s++){const u=o[r];if(!hn(u))return!1}}}return!0}function qJ(t){return()=>Z5e(t)}const WJ=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?Q.useLayoutEffect:Q.useEffect;function q5e({editor:t,ariaActiveDescendant:e,ariaAutoComplete:n,ariaControls:r,ariaDescribedBy:i,ariaErrorMessage:o,ariaExpanded:a,ariaInvalid:s,ariaLabel:u,ariaLabelledBy:f,ariaMultiline:g,ariaOwns:_,ariaRequired:w,autoCapitalize:S,className:E,id:A,role:R="textbox",spellCheck:$=!0,style:z,tabIndex:B,"data-testid":F,...U},q){const[H,ne]=Q.useState(t.isEditable()),ie=Q.useCallback((xe=>{xe&&xe.ownerDocument&&xe.ownerDocument.defaultView?t.setRootElement(xe):t.setRootElement(null)}),[t]),ce=Q.useMemo((()=>(function(...xe){return re=>{xe.forEach((me=>{typeof me=="function"?me(re):me!=null&&(me.current=re)}))}})(q,ie)),[ie,q]);return WJ((()=>(ne(t.isEditable()),t.registerEditableListener((xe=>{ne(xe)})))),[t]),J.jsx("div",{"aria-activedescendant":H?e:void 0,"aria-autocomplete":H?n:"none","aria-controls":H?r:void 0,"aria-describedby":i,...o!=null?{"aria-errormessage":o}:{},"aria-expanded":H&&R==="combobox"?!!a:void 0,...s!=null?{"aria-invalid":s}:{},"aria-label":u,"aria-labelledby":f,"aria-multiline":g,"aria-owns":H?_:void 0,"aria-readonly":!H||void 0,"aria-required":w,autoCapitalize:S,className:E,contentEditable:H,"data-testid":F,id:A,ref:ce,role:R,spellCheck:$,style:z,tabIndex:B,...U})}const W5e=Q.forwardRef(q5e);function VQ(t){return t.getEditorState().read(qJ(t.isComposing()))}const T8=Q.forwardRef(H5e);function H5e(t,e){const{placeholder:n,...r}=t,[i]=Ll();return J.jsxs(J.Fragment,{children:[J.jsx(W5e,{editor:i,...r,ref:e}),n!=null&&J.jsx(G5e,{editor:i,content:n})]})}function G5e({content:t,editor:e}){const n=(function(a){const[s,u]=Q.useState((()=>VQ(a)));return WJ((()=>{function f(){const g=VQ(a);u(g)}return f(),$l(a.registerUpdateListener((()=>{f()})),a.registerEditableListener((()=>{f()})))}),[a]),s})(e),[r,i]=Q.useState(e.isEditable());if(Q.useLayoutEffect((()=>(i(e.isEditable()),e.registerEditableListener((a=>{i(a)})))),[e]),!n)return null;let o=null;return typeof t=="function"?o=t(r):t!==null&&(o=t),o===null?null:J.jsx("div",{"aria-hidden":!0,children:o})}function v4(t,e){return v4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},v4(t,e)}var QQ={error:null},X5e=(function(t){var e,n;function r(){for(var o,a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return(o=t.call.apply(t,[this].concat(s))||this).state=QQ,o.resetErrorBoundary=function(){for(var f,g=arguments.length,_=new Array(g),w=0;w<g;w++)_[w]=arguments[w];o.props.onReset==null||(f=o.props).onReset.apply(f,_),o.reset()},o}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,v4(e,n),r.getDerivedStateFromError=function(o){return{error:o}};var i=r.prototype;return i.reset=function(){this.setState(QQ)},i.componentDidCatch=function(o,a){var s,u;(s=(u=this.props).onError)==null||s.call(u,o,a)},i.componentDidUpdate=function(o,a){var s,u,f,g,_=this.state.error,w=this.props.resetKeys;_!==null&&a.error!==null&&((f=o.resetKeys)===void 0&&(f=[]),(g=w)===void 0&&(g=[]),f.length!==g.length||f.some((function(S,E){return!Object.is(S,g[E])})))&&((s=(u=this.props).onResetKeysChange)==null||s.call(u,o.resetKeys,w),this.reset())},i.render=function(){var o=this.state.error,a=this.props,s=a.fallbackRender,u=a.FallbackComponent,f=a.fallback;if(o!==null){var g={error:o,resetErrorBoundary:this.resetErrorBoundary};if(Q.isValidElement(f))return f;if(typeof s=="function")return s(g);if(u)return Q.createElement(u,g);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},r})(Q.Component);function k8({children:t,onError:e}){return J.jsx(X5e,{fallback:J.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:e,children:t})}const Y5e=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?Q.useLayoutEffect:Q.useEffect;function K5e(t){return{initialValueFn:()=>t.isEditable(),subscribe:e=>t.registerEditableListener(e)}}function J5e(){return(function(t){const[e]=Ll(),n=Q.useMemo((()=>t(e)),[e,t]),[r,i]=Q.useState((()=>n.initialValueFn())),o=Q.useRef(r);return Y5e((()=>{const{initialValueFn:a,subscribe:s}=n,u=a();return o.current!==u&&(o.current=u,i(u)),s((f=>{o.current=f,i(f)}))}),[n,t]),r})(K5e)}function eMe(t){const e=window.location.origin,n=r=>{if(r.origin!==e)return;const i=t.getRootElement();if(document.activeElement!==i)return;const o=r.data;if(typeof o=="string"){let a;try{a=JSON.parse(o)}catch{return}if(a&&a.protocol==="nuanria_messaging"&&a.type==="request"){const s=a.payload;if(s&&s.functionId==="makeChanges"){const u=s.args;if(u){const[f,g,_,w,S,E]=u;t.update((()=>{const A=sn();if(Ht(A)){const R=A.anchor;let $=R.getNode(),z=0,B=0;if(hn($)&&f>=0&&g>=0&&(z=f,B=f+g,A.setTextNodeRange($,z,$,B)),z===B&&_===""||(A.insertRawText(_),$=R.getNode()),hn($)){z=w,B=w+S;const F=$.getTextContentSize();z=z>F?F:z,B=B>F?F:B,A.setTextNodeRange($,z,$,B)}r.stopImmediatePropagation()}}))}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}const _4=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?Q.useLayoutEffect:Q.useEffect;function UQ(t){return t.getEditorState().read(qJ(t.isComposing()))}function E8({contentEditable:t,placeholder:e=null,ErrorBoundary:n}){const[r]=Ll(),i=(function(o,a){const[s,u]=Q.useState((()=>o.getDecorators()));return _4((()=>o.registerDecoratorListener((f=>{tm.flushSync((()=>{u(f)}))}))),[o]),Q.useEffect((()=>{u(o.getDecorators())}),[o]),Q.useMemo((()=>{const f=[],g=Object.keys(s);for(let _=0;_<g.length;_++){const w=g[_],S=J.jsx(a,{onError:A=>o._onError(A),children:J.jsx(Q.Suspense,{fallback:null,children:s[w]})}),E=o.getElementByKey(w);E!==null&&f.push(tm.createPortal(S,E,w))}return f}),[a,s,o])})(r,n);return(function(o){_4((()=>$l(wTe(o),eMe(o))),[o])})(r),J.jsxs(J.Fragment,{children:[t,J.jsx(tMe,{content:e}),i]})}function tMe({content:t}){const[e]=Ll(),n=(function(i){const[o,a]=Q.useState((()=>UQ(i)));return _4((()=>{function s(){const u=UQ(i);a(u)}return s(),$l(i.registerUpdateListener((()=>{s()})),i.registerEditableListener((()=>{s()})))}),[i]),o})(e),r=J5e();return n?typeof t=="function"?t(r):t:null}var nD={exports:{}};var ZQ;function nMe(){return ZQ||(ZQ=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=i(o,r(s)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)e.call(o,s)&&o[s]&&(a=i(a,s));return a}function i(o,a){return a?o?o+" "+a:o+a:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(nD)),nD.exports}var rMe=nMe();const Gr=aO(rMe),iMe={undo:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M7.202 18.5V17H14.3788C15.4224 17 16.3205 16.6554 17.073 15.9663C17.8257 15.2773 18.202 14.4263 18.202 13.4135C18.202 12.4007 17.8257 11.5512 17.073 10.8652C16.3205 10.1794 15.4224 9.8365 14.3788 9.8365H7.35775L10.1402 12.6193L9.0865 13.673L4.5 9.0865L9.0865 4.5L10.1402 5.55375L7.35775 8.3365H14.3788C15.8416 8.3365 17.0945 8.82467 18.1375 9.801C19.1805 10.7773 19.702 11.9815 19.702 13.4135C19.702 14.8455 19.1805 16.0513 18.1375 17.0308C17.0945 18.0103 15.8416 18.5 14.3788 18.5H7.202Z",fill:"currentColor"})),redo:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M9.6211 18.5C8.15827 18.5 6.90535 18.0103 5.86235 17.0308C4.81935 16.0513 4.29785 14.8455 4.29785 13.4135C4.29785 11.9815 4.81935 10.7773 5.86235 9.801C6.90535 8.82467 8.15827 8.3365 9.6211 8.3365H16.6421L13.8596 5.55375L14.9134 4.5L19.4999 9.0865L14.9134 13.673L13.8596 12.6193L16.6421 9.8365H9.6211C8.57744 9.8365 7.67935 10.1794 6.92685 10.8652C6.17418 11.5512 5.79785 12.4007 5.79785 13.4135C5.79785 14.4263 6.17418 15.2773 6.92685 15.9663C7.67935 16.6554 8.57744 17 9.6211 17H16.7979V18.5H9.6211Z",fill:"currentColor"})),format_bold:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M7.33838 18.625V5.375H12.1999C13.219 5.375 14.1405 5.69233 14.9644 6.327C15.788 6.9615 16.1999 7.816 16.1999 8.8905C16.1999 9.63783 16.0194 10.2471 15.6584 10.7182C15.2975 11.1894 14.9088 11.5314 14.4921 11.7442C15.005 11.9211 15.4947 12.2708 15.9614 12.7933C16.428 13.3158 16.6614 14.0193 16.6614 14.9038C16.6614 16.1819 16.1902 17.1217 15.2479 17.723C14.3055 18.3243 13.3562 18.625 12.3999 18.625H7.33838ZM9.48838 16.6328H12.3191C13.1063 16.6328 13.6627 16.4142 13.9884 15.977C14.314 15.5398 14.4769 15.1206 14.4769 14.7192C14.4769 14.3179 14.314 13.8987 13.9884 13.4615C13.6627 13.0243 13.0909 12.8058 12.2729 12.8058H9.48838V16.6328ZM9.48838 10.875H12.0826C12.6903 10.875 13.172 10.7013 13.5279 10.3538C13.8835 10.0064 14.0614 9.59042 14.0614 9.10575C14.0614 8.59042 13.8733 8.16925 13.4971 7.84225C13.1208 7.51542 12.6595 7.352 12.1134 7.352H9.48838V10.875Z",fill:"currentColor"})),format_italic:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M5.39404 18.625V16.8173H9.21129L12.4518 7.18275H8.63454V5.375H17.7883V7.18275H14.2785L11.0383 16.8173H14.5478V18.625H5.39404Z",fill:"currentColor"})),format_underlined:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M5.34619 22.125V20.625H18.6537V22.125H5.34619ZM11.9999 18.5287C10.4448 18.5287 9.23102 18.0566 8.35869 17.1125C7.48619 16.1683 7.04994 14.9032 7.04994 13.3172V5.41345H8.90369V13.4095C8.90369 14.4198 9.17228 15.2295 9.70944 15.8385C10.2466 16.4475 11.0101 16.752 11.9999 16.752C12.9898 16.752 13.7533 16.4475 14.2904 15.8385C14.8276 15.2295 15.0962 14.4198 15.0962 13.4095V5.41345H16.9499V13.3172C16.9499 14.9032 16.5137 16.1683 15.6412 17.1125C14.7689 18.0566 13.5551 18.5287 11.9999 18.5287Z",fill:"currentColor"})),format_highlight:se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"},se.createElement("path",{d:"m9 11-6 6v3h9l3-3"}),se.createElement("path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4"})),code:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M7.99994 17.6537L2.34619 11.9999L7.99994 6.34619L9.06919 7.41544L4.46919 12.0154L9.05369 16.5999L7.99994 17.6537ZM15.9999 17.6537L14.9307 16.5844L19.5307 11.9844L14.9462 7.39994L15.9999 6.34619L21.6537 11.9999L15.9999 17.6537Z",fill:"currentColor"})),strikeThrough:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M12.15 19.6923C10.9732 19.6923 9.9315 19.359 9.025 18.6923C8.11867 18.0256 7.45525 17.1128 7.03475 15.9538L8.6385 15.2635C8.91667 16.0444 9.3545 16.6867 9.952 17.1905C10.5493 17.6944 11.2923 17.9463 12.1808 17.9463C12.9578 17.9463 13.6744 17.7508 14.3307 17.3598C14.9872 16.9686 15.3155 16.3487 15.3155 15.5C15.3155 15.123 15.2555 14.7968 15.1355 14.5213C15.0157 14.2456 14.8462 13.9885 14.627 13.75H16.677C16.7987 13.9705 16.8932 14.2256 16.9605 14.5153C17.0278 14.8051 17.0615 15.1334 17.0615 15.5C17.0615 16.8372 16.5747 17.8702 15.601 18.599C14.6272 19.3279 13.4768 19.6923 12.15 19.6923ZM2.25 11.75V10.25H21.75V11.75H2.25ZM12.05 4.19629C13.0475 4.19629 13.9123 4.42704 14.6443 4.88854C15.3763 5.35004 15.9673 6.05896 16.4173 7.01529L14.823 7.73079C14.6218 7.26029 14.2978 6.84462 13.851 6.48379C13.4042 6.12279 12.8141 5.94229 12.0808 5.94229C11.2244 5.94229 10.5392 6.16221 10.025 6.60204C9.51083 7.04171 9.264 7.59104 9.2845 8.25004H7.5385C7.50133 7.16421 7.89783 6.21712 8.728 5.40879C9.558 4.60046 10.6653 4.19629 12.05 4.19629Z",fill:"currentColor"})),superscript:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M16.6924 8V6.2115C16.6924 5.95383 16.7786 5.73875 16.9511 5.56625C17.1235 5.39392 17.3385 5.30775 17.5961 5.30775H19.5001V4.38475H16.6924V3.5H19.4809C19.7385 3.5 19.9536 3.58625 20.1261 3.75875C20.2985 3.93108 20.3846 4.14617 20.3846 4.404V5.2885C20.3846 5.54617 20.2985 5.76125 20.1261 5.93375C19.9536 6.10608 19.7385 6.19225 19.4809 6.19225H17.5771V7.1155H20.3846V8H16.6924ZM4.44238 18.5L8.84638 11.6287L4.77713 5.30775H6.74438L9.95963 10.404H10.0214L13.2501 5.30775H15.2329L11.1194 11.6287L15.5579 18.5H13.5751L10.0214 12.9308H9.95963L6.42513 18.5H4.44238Z",fill:"currentColor"})),subscript:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M16.6924 20.5V18.7115C16.6924 18.4538 16.7786 18.2387 16.9511 18.0662C17.1235 17.8939 17.3385 17.8077 17.5961 17.8077H19.5001V16.8845H16.6924V16H19.4809C19.7385 16 19.9536 16.0863 20.1261 16.2587C20.2985 16.4311 20.3846 16.6461 20.3846 16.9038V17.7885C20.3846 18.0462 20.2985 18.2612 20.1261 18.4337C19.9536 18.6061 19.7385 18.6923 19.4809 18.6923H17.5771V19.6152H20.3846V20.5H16.6924ZM4.44238 18.6923L8.84638 11.8212L4.77713 5.5H6.74438L9.95963 10.5962H10.0214L13.2501 5.5H15.2329L11.1194 11.8212L15.5579 18.6923H13.5751L10.0214 13.123H9.95963L6.42513 18.6923H4.44238Z",fill:"currentColor"})),format_list_bulleted:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M9.30775 18.75V17.25H20.5V18.75H9.30775ZM9.30775 12.75V11.25H20.5V12.75H9.30775ZM9.30775 6.75005V5.25005H20.5V6.75005H9.30775ZM5.1635 19.6635C4.706 19.6635 4.31442 19.5006 3.98875 19.1748C3.66292 18.8491 3.5 18.4575 3.5 18C3.5 17.5425 3.66292 17.151 3.98875 16.8253C4.31442 16.4995 4.706 16.3365 5.1635 16.3365C5.621 16.3365 6.01258 16.4995 6.33825 16.8253C6.66408 17.151 6.827 17.5425 6.827 18C6.827 18.4575 6.66408 18.8491 6.33825 19.1748C6.01258 19.5006 5.621 19.6635 5.1635 19.6635ZM5.1635 13.6635C4.706 13.6635 4.31442 13.5006 3.98875 13.1748C3.66292 12.8491 3.5 12.4575 3.5 12C3.5 11.5425 3.66292 11.151 3.98875 10.8253C4.31442 10.4995 4.706 10.3365 5.1635 10.3365C5.621 10.3365 6.01258 10.4995 6.33825 10.8253C6.66408 11.151 6.827 11.5425 6.827 12C6.827 12.4575 6.66408 12.8491 6.33825 13.1748C6.01258 13.5006 5.621 13.6635 5.1635 13.6635ZM5.1635 7.66355C4.706 7.66355 4.31442 7.50063 3.98875 7.1748C3.66292 6.84913 3.5 6.45755 3.5 6.00005C3.5 5.54255 3.66292 5.15096 3.98875 4.8253C4.31442 4.49946 4.706 4.33655 5.1635 4.33655C5.621 4.33655 6.01258 4.49946 6.33825 4.8253C6.66408 5.15096 6.827 5.54255 6.827 6.00005C6.827 6.45755 6.66408 6.84913 6.33825 7.1748C6.01258 7.50063 5.621 7.66355 5.1635 7.66355Z",fill:"currentColor"})),format_list_numbered:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M3.5 21.5V20.3078H6V19.25H4.5V18.0577H6V17H3.5V15.8077H6.34625C6.58592 15.8077 6.78683 15.8888 6.949 16.051C7.11117 16.2132 7.19225 16.4141 7.19225 16.6538V17.8462C7.19225 18.0859 7.11117 18.2868 6.949 18.449C6.78683 18.6112 6.58592 18.6923 6.34625 18.6923C6.58592 18.6923 6.78683 18.7733 6.949 18.9355C7.11117 19.0977 7.19225 19.2987 7.19225 19.5385V20.6538C7.19225 20.8936 7.11117 21.0946 6.949 21.2568C6.78683 21.4189 6.58592 21.5 6.34625 21.5H3.5ZM3.5 14.8463V12.25C3.5 12.0103 3.58108 11.8093 3.74325 11.647C3.90542 11.4848 4.10642 11.4038 4.34625 11.4038H6V10.3462H3.5V9.15375H6.34625C6.58592 9.15375 6.78683 9.23483 6.949 9.397C7.11117 9.55933 7.19225 9.76033 7.19225 10V11.75C7.19225 11.9897 7.11117 12.1907 6.949 12.353C6.78683 12.5152 6.58592 12.5963 6.34625 12.5963H4.69225V13.6538H7.19225V14.8463H3.5ZM5 8.19225V3.69225H3.5V2.5H6.19225V8.19225H5ZM9.30775 18.75V17.25H20.5V18.75H9.30775ZM9.30775 12.75V11.25H20.5V12.75H9.30775ZM9.30775 6.75V5.25H20.5V6.75H9.30775Z",fill:"currentColor"})),format_list_checked:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M5.69425 18.452L2.5 15.2578L3.54425 14.2135L5.66925 16.3385L9.91925 12.0885L10.9635 13.1578L5.69425 18.452ZM5.69425 10.8365L2.5 7.64227L3.54425 6.59802L5.66925 8.72302L9.91925 4.47302L10.9635 5.54227L5.69425 10.8365ZM13.0095 16.5578V15.0578H21.5095V16.5578H13.0095ZM13.0095 8.94227V7.44227H21.5095V8.94227H13.0095Z",fill:"currentColor"})),link:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M10.8077 16.5385H7.0385C5.78283 16.5385 4.7125 16.096 3.8275 15.211C2.9425 14.3262 2.5 13.256 2.5 12.0005C2.5 10.745 2.9425 9.67471 3.8275 8.78955C4.7125 7.90421 5.78283 7.46155 7.0385 7.46155H10.8077V8.96155H7.0385C6.19867 8.96155 5.48233 9.25805 4.8895 9.85105C4.2965 10.444 4 11.1604 4 12C4 12.8397 4.2965 13.556 4.8895 14.149C5.48233 14.742 6.19867 15.0385 7.0385 15.0385H10.8077V16.5385ZM8.25 12.75V11.25H15.75V12.75H8.25ZM13.1923 16.5385V15.0385H16.9615C17.8013 15.0385 18.5177 14.742 19.1105 14.149C19.7035 13.556 20 12.8397 20 12C20 11.1604 19.7035 10.444 19.1105 9.85105C18.5177 9.25805 17.8013 8.96155 16.9615 8.96155H13.1923V7.46155H16.9615C18.2172 7.46155 19.2875 7.90405 20.1725 8.78905C21.0575 9.67388 21.5 10.744 21.5 11.9995C21.5 13.255 21.0575 14.3254 20.1725 15.2105C19.2875 16.0959 18.2172 16.5385 16.9615 16.5385H13.1923Z",fill:"currentColor"})),add_photo:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M5.11537 20.5C4.6182 20.5 4.19262 20.323 3.83862 19.969C3.48462 19.615 3.30762 19.1894 3.30762 18.6922V5.30773C3.30762 4.81056 3.48462 4.38498 3.83862 4.03098C4.19262 3.67698 4.6182 3.49998 5.11537 3.49998H13.8076V4.99998H5.11537C5.02553 4.99998 4.95178 5.02881 4.89412 5.08648C4.83645 5.14415 4.80762 5.2179 4.80762 5.30773V18.6922C4.80762 18.7821 4.83645 18.8558 4.89412 18.9135C4.95178 18.9711 5.02553 19 5.11537 19H18.4999C18.5895 19 18.6633 18.9711 18.7211 18.9135C18.7788 18.8558 18.8076 18.7821 18.8076 18.6922V9.99998H20.3076V18.6922C20.3076 19.1894 20.1306 19.615 19.7766 19.969C19.4226 20.323 18.997 20.5 18.4999 20.5H5.11537ZM17.1921 8.61523V6.61523H15.1921V5.11548H17.1921V3.11548H18.6921V5.11548H20.6921V6.61523H18.6921V8.61523H17.1921ZM6.55762 16.75H17.1344L13.8459 12.3655L11.0384 16.0192L9.03837 13.4615L6.55762 16.75Z",fill:"currentColor"})),table:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M3.5 18.6923V5.30775C3.5 4.81058 3.677 4.385 4.031 4.031C4.385 3.677 4.81058 3.5 5.30775 3.5H18.6923C19.1894 3.5 19.615 3.677 19.969 4.031C20.323 4.385 20.5 4.81058 20.5 5.30775V18.6923C20.5 19.1894 20.323 19.615 19.969 19.969C19.615 20.323 19.1894 20.5 18.6923 20.5H5.30775C4.81058 20.5 4.385 20.323 4.031 19.969C3.677 19.615 3.5 19.1894 3.5 18.6923ZM5 9.077H19V5.30775C19 5.21792 18.9712 5.14417 18.9135 5.0865C18.8558 5.02883 18.7821 5 18.6923 5H5.30775C5.21792 5 5.14417 5.02883 5.0865 5.0865C5.02883 5.14417 5 5.21792 5 5.30775V9.077ZM10.1615 14.0385H13.8385V10.577H10.1615V14.0385ZM10.1615 19H13.8385V15.5385H10.1615V19ZM5 14.0385H8.6615V10.577H5V14.0385ZM15.3385 14.0385H19V10.577H15.3385V14.0385ZM5.30775 19H8.6615V15.5385H5V18.6923C5 18.7821 5.02883 18.8558 5.0865 18.9135C5.14417 18.9712 5.21792 19 5.30775 19ZM15.3385 19H18.6923C18.7821 19 18.8558 18.9712 18.9135 18.9135C18.9712 18.8558 19 18.7821 19 18.6923V15.5385H15.3385V19Z",fill:"currentColor"})),horizontal_rule:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M4.5 12.75V11.25H19.5V12.75H4.5Z",fill:"currentColor"})),frontmatter:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M4.5 8.75V7.25H8.5V8.75H4.5Z",fill:"currentColor"}),se.createElement("path",{d:"M4.5 14.75V13.25H8.5V14.75H4.5Z",fill:"currentColor"}),se.createElement("path",{d:"M9.5 8.75V7.25H13.5V8.75H9.5Z",fill:"currentColor"}),se.createElement("path",{d:"M9.5 14.75V13.25H13.5V14.75H9.5Z",fill:"currentColor"}),se.createElement("path",{d:"M14.5 8.75V7.25H18.5V8.75H14.5Z",fill:"currentColor"}),se.createElement("path",{d:"M14.5 14.75V13.25H18.5V14.75H14.5Z",fill:"currentColor"})),frame_source:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M8.6 15.2443L5.35575 12L8.6 8.75575L9.64425 9.825L7.46925 12L9.64425 14.175L8.6 15.2443ZM15.4 15.2443L14.3558 14.175L16.5307 12L14.3558 9.825L15.4 8.75575L18.6443 12L15.4 15.2443ZM5.30775 20.5C4.80258 20.5 4.375 20.325 4.025 19.975C3.675 19.625 3.5 19.1974 3.5 18.6923V15H5V18.6923C5 18.7692 5.03208 18.8398 5.09625 18.9038C5.16025 18.9679 5.23075 19 5.30775 19H9V20.5H5.30775ZM15 20.5V19H18.6923C18.7692 19 18.8398 18.9679 18.9038 18.9038C18.9679 18.8398 19 18.7692 19 18.6923V15H20.5V18.6923C20.5 19.1974 20.325 19.625 19.975 19.975C19.625 20.325 19.1974 20.5 18.6923 20.5H15ZM3.5 9V5.30775C3.5 4.80258 3.675 4.375 4.025 4.025C4.375 3.675 4.80258 3.5 5.30775 3.5H9V5H5.30775C5.23075 5 5.16025 5.03208 5.09625 5.09625C5.03208 5.16025 5 5.23075 5 5.30775V9H3.5ZM19 9V5.30775C19 5.23075 18.9679 5.16025 18.9038 5.09625C18.8398 5.03208 18.7692 5 18.6923 5H15V3.5H18.6923C19.1974 3.5 19.625 3.675 19.975 4.025C20.325 4.375 20.5 4.80258 20.5 5.30775V9H19Z",fill:"currentColor"})),arrow_drop_down:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M11.9999 14.6537L7.59619 10.25H16.4037L11.9999 14.6537Z",fill:"currentColor"})),admonition:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M12.0001 21.4C11.7654 21.4 11.5385 21.3548 11.3193 21.2645C11.1002 21.174 10.9002 21.0435 10.7193 20.873L3.1271 13.2807C2.9566 13.0999 2.8261 12.8999 2.7356 12.6807C2.64526 12.4616 2.6001 12.2346 2.6001 12C2.6001 11.7653 2.64526 11.5358 2.7356 11.3115C2.8261 11.0871 2.9566 10.8897 3.1271 10.7192L10.7193 3.12698C10.9002 2.94614 11.1002 2.81314 11.3193 2.72798C11.5385 2.64264 11.7654 2.59998 12.0001 2.59998C12.2348 2.59998 12.4643 2.64264 12.6886 2.72798C12.9129 2.81314 13.1103 2.94614 13.2808 3.12698L20.8731 10.7192C21.0539 10.8897 21.1869 11.0871 21.2721 11.3115C21.3574 11.5358 21.4001 11.7653 21.4001 12C21.4001 12.2346 21.3574 12.4616 21.2721 12.6807C21.1869 12.8999 21.0539 13.0999 20.8731 13.2807L13.2808 20.873C13.1103 21.0435 12.9129 21.174 12.6886 21.2645C12.4643 21.3548 12.2348 21.4 12.0001 21.4ZM12.2213 19.8037L19.8039 12.2212C19.8552 12.1699 19.8808 12.0961 19.8808 12C19.8808 11.9038 19.8552 11.8301 19.8039 11.7787L12.2213 4.19623C12.17 4.14489 12.0963 4.11923 12.0001 4.11923C11.9039 4.11923 11.8302 4.14489 11.7788 4.19623L4.19635 11.7787C4.14501 11.8301 4.11935 11.9038 4.11935 12C4.11935 12.0961 4.14501 12.1699 4.19635 12.2212L11.7788 19.8037C11.8302 19.8551 11.9039 19.8807 12.0001 19.8807C12.0963 19.8807 12.17 19.8551 12.2213 19.8037ZM11.2501 13.0865H12.7501V7.47123H11.2501V13.0865ZM12.0001 15.702C12.2258 15.702 12.4168 15.6237 12.5731 15.4672C12.7296 15.3109 12.8078 15.1199 12.8078 14.8942C12.8078 14.6686 12.7296 14.4776 12.5731 14.3212C12.4168 14.1647 12.2258 14.0865 12.0001 14.0865C11.7744 14.0865 11.5834 14.1647 11.4271 14.3212C11.2706 14.4776 11.1923 14.6686 11.1923 14.8942C11.1923 15.1199 11.2706 15.3109 11.4271 15.4672C11.5834 15.6237 11.7744 15.702 12.0001 15.702Z",fill:"currentColor"})),sandpack:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M12.9999 22.5C12.4947 22.5 12.0671 22.325 11.7171 21.975C11.3671 21.625 11.1921 21.1974 11.1921 20.6922V7.30775C11.1921 6.80258 11.3671 6.375 11.7171 6.025C12.0671 5.675 12.4947 5.5 12.9999 5.5H16.3844C16.8895 5.5 17.3171 5.675 17.6671 6.025C18.0171 6.375 18.1921 6.80258 18.1921 7.30775V20.6922C18.1921 21.1974 18.0171 21.625 17.6671 21.975C17.3171 22.325 16.8895 22.5 16.3844 22.5H12.9999ZM12.6921 7.30775V20.6922C12.6921 20.7692 12.7242 20.8398 12.7884 20.9038C12.8524 20.9679 12.9229 21 12.9999 21H16.3844C16.4614 21 16.5319 20.9679 16.5959 20.9038C16.66 20.8398 16.6921 20.7692 16.6921 20.6922V7.30775C16.6921 7.23075 16.66 7.16025 16.5959 7.09625C16.5319 7.03208 16.4614 7 16.3844 7H12.9999C12.9229 7 12.8524 7.03208 12.7884 7.09625C12.7242 7.16025 12.6921 7.23075 12.6921 7.30775ZM6.61537 18.5C6.1102 18.5 5.68262 18.325 5.33262 17.975C4.98262 17.625 4.80762 17.1974 4.80762 16.6923V3.30775C4.80762 2.80258 4.98262 2.375 5.33262 2.025C5.68262 1.675 6.1102 1.5 6.61537 1.5H9.99987C10.505 1.5 10.9326 1.675 11.2826 2.025C11.6326 2.375 11.8076 2.80258 11.8076 3.30775V16.6923C11.8076 17.1974 11.6326 17.625 11.2826 17.975C10.9326 18.325 10.505 18.5 9.99987 18.5H6.61537ZM6.30762 3.30775V16.6923C6.30762 16.7692 6.3397 16.8398 6.40387 16.9038C6.46787 16.9679 6.53837 17 6.61537 17H9.99987C10.0769 17 10.1474 16.9679 10.2114 16.9038C10.2755 16.8398 10.3076 16.7692 10.3076 16.6923V3.30775C10.3076 3.23075 10.2755 3.16025 10.2114 3.09625C10.1474 3.03208 10.0769 3 9.99987 3H6.61537C6.53837 3 6.46787 3.03208 6.40387 3.09625C6.3397 3.16025 6.30762 3.23075 6.30762 3.30775Z",fill:"currentColor"})),rich_text:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M5.30775 20.5C4.80258 20.5 4.375 20.325 4.025 19.975C3.675 19.625 3.5 19.1974 3.5 18.6923V5.30775C3.5 4.80258 3.675 4.375 4.025 4.025C4.375 3.675 4.80258 3.5 5.30775 3.5H18.6923C19.1974 3.5 19.625 3.675 19.975 4.025C20.325 4.375 20.5 4.80258 20.5 5.30775V18.6923C20.5 19.1974 20.325 19.625 19.975 19.975C19.625 20.325 19.1974 20.5 18.6923 20.5H5.30775ZM5.30775 19H18.6923C18.7692 19 18.8398 18.9679 18.9038 18.9038C18.9679 18.8398 19 18.7692 19 18.6923V5.30775C19 5.23075 18.9679 5.16025 18.9038 5.09625C18.8398 5.03208 18.7692 5 18.6923 5H5.30775C5.23075 5 5.16025 5.03208 5.09625 5.09625C5.03208 5.16025 5 5.23075 5 5.30775V18.6923C5 18.7692 5.03208 18.8398 5.09625 18.9038C5.16025 18.9679 5.23075 19 5.30775 19ZM6.75 17H17.3268L14 12.3655L11.2308 16.0192L9 13.4615L6.75 17Z",fill:"currentColor"}),se.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 12V6.5H9.1925C9.5925 6.5 9.9425 6.65 10.2425 6.95C10.5425 7.25 10.6925 7.6 10.6925 8V8.6925C10.6925 9.03733 10.605 9.32675 10.43 9.56075C10.255 9.79458 10.0168 9.97817 9.7155 10.1115L10.6155 12H9.404L8.504 10.1925H7.1925V12H6ZM9.1925 9H7.1925V7.6925H9.1925C9.26933 7.6925 9.33983 7.7245 9.404 7.7885C9.468 7.85267 9.5 7.92317 9.5 8V8.6925C9.5 8.76933 9.468 8.83983 9.404 8.904C9.33983 8.968 9.26933 9 9.1925 9Z",fill:"currentColor"}),se.createElement("path",{d:"M12.5 7H17.5V8.25H12.5V7Z",fill:"currentColor"}),se.createElement("path",{d:"M12.5 9.25H17.5V10.5H12.5V9.25Z",fill:"currentColor"})),difference:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.30775 20.5C4.80258 20.5 4.375 20.325 4.025 19.975C3.675 19.625 3.5 19.1974 3.5 18.6923V5.30775C3.5 4.80258 3.675 4.375 4.025 4.025C4.375 3.675 4.80258 3.5 5.30775 3.5H18.6923C19.1974 3.5 19.625 3.675 19.975 4.025C20.325 4.375 20.5 4.80258 20.5 5.30775V18.6923C20.5 19.1974 20.325 19.625 19.975 19.975C19.625 20.325 19.1974 20.5 18.6923 20.5H5.30775ZM18.6923 19H5.30775C5.23075 19 5.16025 18.9679 5.09625 18.9038C5.03208 18.8398 5 18.7692 5 18.6923V5.30775C5 5.23075 5.03208 5.16025 5.09625 5.09625C5.16025 5.03208 5.23075 5 5.30775 5H18.6923C18.7692 5 18.8398 5.03208 18.9038 5.09625C18.9679 5.16025 19 5.23075 19 5.30775V18.6923C19 18.7692 18.9679 18.8398 18.9038 18.9038C18.8398 18.9679 18.7692 19 18.6923 19Z",fill:"currentColor"}),se.createElement("rect",{x:"9",y:"10",width:"5.5",height:"1.5",fill:"currentColor"}),se.createElement("rect",{x:"9",y:"15",width:"5.5",height:"1.5",fill:"currentColor"}),se.createElement("rect",{x:"11",y:"8",width:"1.5",height:"5.5",fill:"currentColor"})),markdown:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.30775 20.5C4.80258 20.5 4.375 20.325 4.025 19.975C3.675 19.625 3.5 19.1974 3.5 18.6923V5.30775C3.5 4.80258 3.675 4.375 4.025 4.025C4.375 3.675 4.80258 3.5 5.30775 3.5H18.6923C19.1974 3.5 19.625 3.675 19.975 4.025C20.325 4.375 20.5 4.80258 20.5 5.30775V18.6923C20.5 19.1974 20.325 19.625 19.975 19.975C19.625 20.325 19.1974 20.5 18.6923 20.5H5.30775ZM18.6923 19H5.30775C5.23075 19 5.16025 18.9679 5.09625 18.9038C5.03208 18.8398 5 18.7692 5 18.6923V5.30775C5 5.23075 5.03208 5.16025 5.09625 5.09625C5.16025 5.03208 5.23075 5 5.30775 5H18.6923C18.7692 5 18.8398 5.03208 18.9038 5.09625C18.9679 5.16025 19 5.23075 19 5.30775V18.6923C19 18.7692 18.9679 18.8398 18.9038 18.9038C18.8398 18.9679 18.7692 19 18.6923 19Z",fill:"currentColor"}),se.createElement("path",{d:"M13 15H11.5V11L9.5 14L7.5 11V15H6V8H7.5L9.5 11L11.5 8H13V15Z",fill:"currentColor"}),se.createElement("path",{d:"M15.9921 15.5833L13.2886 12.8797L14.0546 12.1137L15.4504 13.5016V7.99597L16.5336 7.99993V13.5016L17.9296 12.1137L18.6954 12.8797L15.9921 15.5833Z",fill:"currentColor"})),open_in_new:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M5.30775 20.5C4.80258 20.5 4.375 20.325 4.025 19.975C3.675 19.625 3.5 19.1974 3.5 18.6923V5.30775C3.5 4.80258 3.675 4.375 4.025 4.025C4.375 3.675 4.80258 3.5 5.30775 3.5H11.6152V5H5.30775C5.23075 5 5.16025 5.03208 5.09625 5.09625C5.03208 5.16025 5 5.23075 5 5.30775V18.6923C5 18.7692 5.03208 18.8398 5.09625 18.9038C5.16025 18.9679 5.23075 19 5.30775 19H18.6923C18.7692 19 18.8398 18.9679 18.9038 18.9038C18.9679 18.8398 19 18.7692 19 18.6923V12.3848H20.5V18.6923C20.5 19.1974 20.325 19.625 19.975 19.975C19.625 20.325 19.1974 20.5 18.6923 20.5H5.30775ZM9.71925 15.3345L8.6655 14.2808L17.9462 5H14V3.5H20.5V10H19V6.05375L9.71925 15.3345Z",fill:"currentColor"})),link_off:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M18.8843 16.1038L17.7498 14.9385C18.4228 14.7552 18.9661 14.3946 19.3796 13.8568C19.7931 13.319 19.9998 12.7 19.9998 12C19.9998 11.1604 19.705 10.444 19.1153 9.85105C18.5255 9.25805 17.8139 8.96155 16.9806 8.96155H13.1728V7.46155H16.9806C18.2293 7.46155 19.2947 7.90422 20.1768 8.78955C21.0588 9.67472 21.4998 10.7449 21.4998 12C21.4998 12.8859 21.262 13.6951 20.7863 14.4278C20.3107 15.1606 19.6767 15.7193 18.8843 16.1038ZM15.5806 12.75L14.0806 11.25H15.7306V12.75H15.5806ZM20.1461 22.2538L1.74609 3.8538L2.79984 2.80005L21.1998 21.2L20.1461 22.2538ZM10.8268 16.5386H7.03834C5.78318 16.5386 4.71301 16.0959 3.82784 15.2105C2.94251 14.3254 2.49984 13.2552 2.49984 12C2.49984 10.8885 2.85784 9.91322 3.57384 9.07405C4.28984 8.23505 5.18826 7.72838 6.26909 7.55405H6.49984L7.90759 8.96155H7.03834C6.19851 8.96155 5.48218 9.25805 4.88934 9.85105C4.29634 10.444 3.99984 11.1604 3.99984 12C3.99984 12.8397 4.29634 13.556 4.88934 14.149C5.48218 14.742 6.19851 15.0385 7.03834 15.0385H10.8268V16.5386ZM8.26909 12.75V11.25H10.2113L11.6863 12.75H8.26909Z",fill:"currentColor"})),edit:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M5 19H6.2615L16.498 8.7635L15.2365 7.502L5 17.7385V19ZM3.5 20.5V17.1155L16.6905 3.93075C16.8417 3.79342 17.0086 3.68733 17.1913 3.6125C17.3741 3.5375 17.5658 3.5 17.7663 3.5C17.9668 3.5 18.1609 3.53558 18.3488 3.60675C18.5367 3.67792 18.7032 3.79108 18.848 3.94625L20.0693 5.18275C20.2244 5.32758 20.335 5.49425 20.401 5.68275C20.467 5.87125 20.5 6.05975 20.5 6.24825C20.5 6.44942 20.4657 6.64133 20.397 6.824C20.3283 7.00683 20.2191 7.17383 20.0693 7.325L6.8845 20.5H3.5ZM15.8562 8.14375L15.2365 7.502L16.498 8.7635L15.8562 8.14375Z",fill:"currentColor"})),content_copy:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M9.05775 17.5C8.55258 17.5 8.125 17.325 7.775 16.975C7.425 16.625 7.25 16.1974 7.25 15.6923V4.30775C7.25 3.80258 7.425 3.375 7.775 3.025C8.125 2.675 8.55258 2.5 9.05775 2.5H17.4423C17.9474 2.5 18.375 2.675 18.725 3.025C19.075 3.375 19.25 3.80258 19.25 4.30775V15.6923C19.25 16.1974 19.075 16.625 18.725 16.975C18.375 17.325 17.9474 17.5 17.4423 17.5H9.05775ZM9.05775 16H17.4423C17.5192 16 17.5898 15.9679 17.6538 15.9038C17.7179 15.8398 17.75 15.7692 17.75 15.6923V4.30775C17.75 4.23075 17.7179 4.16025 17.6538 4.09625C17.5898 4.03208 17.5192 4 17.4423 4H9.05775C8.98075 4 8.91025 4.03208 8.84625 4.09625C8.78208 4.16025 8.75 4.23075 8.75 4.30775V15.6923C8.75 15.7692 8.78208 15.8398 8.84625 15.9038C8.91025 15.9679 8.98075 16 9.05775 16ZM5.55775 21C5.05258 21 4.625 20.825 4.275 20.475C3.925 20.125 3.75 19.6974 3.75 19.1923V6.30775H5.25V19.1923C5.25 19.2693 5.28208 19.3398 5.34625 19.4038C5.41025 19.4679 5.48075 19.5 5.55775 19.5H15.4423V21H5.55775Z",fill:"currentColor"})),more_horiz:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M6.23096 13.5C5.81846 13.5 5.46537 13.3531 5.17171 13.0592C4.87787 12.7656 4.73096 12.4125 4.73096 12C4.73096 11.5875 4.87787 11.2344 5.17171 10.9408C5.46537 10.6469 5.81846 10.5 6.23096 10.5C6.64346 10.5 6.99662 10.6469 7.29046 10.9408C7.58412 11.2344 7.73096 11.5875 7.73096 12C7.73096 12.4125 7.58412 12.7656 7.29046 13.0592C6.99662 13.3531 6.64346 13.5 6.23096 13.5ZM12.0002 13.5C11.5877 13.5 11.2346 13.3531 10.941 13.0592C10.6471 12.7656 10.5002 12.4125 10.5002 12C10.5002 11.5875 10.6471 11.2344 10.941 10.9408C11.2346 10.6469 11.5877 10.5 12.0002 10.5C12.4127 10.5 12.7658 10.6469 13.0595 10.9408C13.3533 11.2344 13.5002 11.5875 13.5002 12C13.5002 12.4125 13.3533 12.7656 13.0595 13.0592C12.7658 13.3531 12.4127 13.5 12.0002 13.5ZM17.7695 13.5C17.357 13.5 17.0038 13.3531 16.71 13.0592C16.4163 12.7656 16.2695 12.4125 16.2695 12C16.2695 11.5875 16.4163 11.2344 16.71 10.9408C17.0038 10.6469 17.357 10.5 17.7695 10.5C18.182 10.5 18.535 10.6469 18.8287 10.9408C19.1225 11.2344 19.2695 11.5875 19.2695 12C19.2695 12.4125 19.1225 12.7656 18.8287 13.0592C18.535 13.3531 18.182 13.5 17.7695 13.5Z",fill:"currentColor"})),more_vert:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M12 19.2692C11.5875 19.2692 11.2344 19.1223 10.9408 18.8285C10.6469 18.5348 10.5 18.1817 10.5 17.7692C10.5 17.3567 10.6469 17.0035 10.9408 16.7097C11.2344 16.416 11.5875 16.2692 12 16.2692C12.4125 16.2692 12.7656 16.416 13.0592 16.7097C13.3531 17.0035 13.5 17.3567 13.5 17.7692C13.5 18.1817 13.3531 18.5348 13.0592 18.8285C12.7656 19.1223 12.4125 19.2692 12 19.2692ZM12 13.5C11.5875 13.5 11.2344 13.353 10.9408 13.0592C10.6469 12.7655 10.5 12.4125 10.5 12C10.5 11.5875 10.6469 11.2344 10.9408 10.9407C11.2344 10.6469 11.5875 10.5 12 10.5C12.4125 10.5 12.7656 10.6469 13.0592 10.9407C13.3531 11.2344 13.5 11.5875 13.5 12C13.5 12.4125 13.3531 12.7655 13.0592 13.0592C12.7656 13.353 12.4125 13.5 12 13.5ZM12 7.73071C11.5875 7.73071 11.2344 7.58388 10.9408 7.29021C10.6469 6.99638 10.5 6.64321 10.5 6.23071C10.5 5.81821 10.6469 5.46513 10.9408 5.17146C11.2344 4.87763 11.5875 4.73071 12 4.73071C12.4125 4.73071 12.7656 4.87763 13.0592 5.17146C13.3531 5.46513 13.5 5.81821 13.5 6.23071C13.5 6.64321 13.3531 6.99638 13.0592 7.29021C12.7656 7.58388 12.4125 7.73071 12 7.73071Z",fill:"currentColor"})),close:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M6.39994 18.6538L5.34619 17.6L10.9462 12L5.34619 6.4L6.39994 5.34625L11.9999 10.9463L17.5999 5.34625L18.6537 6.4L13.0537 12L18.6537 17.6L17.5999 18.6538L11.9999 13.0538L6.39994 18.6538Z",fill:"currentColor"})),settings:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M9.69225 21.5L9.3115 18.4538C9.04367 18.3641 8.769 18.2385 8.4875 18.077C8.20617 17.9153 7.95459 17.7422 7.73275 17.5577L4.9115 18.75L2.604 14.75L5.04425 12.9058C5.02125 12.7571 5.00492 12.6077 4.99525 12.4578C4.98559 12.3078 4.98075 12.1583 4.98075 12.0095C4.98075 11.8673 4.98559 11.7228 4.99525 11.576C5.00492 11.4292 5.02125 11.2686 5.04425 11.0943L2.604 9.25L4.9115 5.26925L7.723 6.452C7.96417 6.261 8.22159 6.08633 8.49525 5.928C8.76892 5.76967 9.03784 5.64242 9.302 5.54625L9.69225 2.5H14.3078L14.6885 5.55575C14.9885 5.66475 15.2599 5.792 15.5028 5.9375C15.7458 6.083 15.991 6.2545 16.2385 6.452L19.0885 5.26925L21.396 9.25L18.9173 11.123C18.9531 11.2845 18.9727 11.4355 18.976 11.576C18.9792 11.7163 18.9808 11.8577 18.9808 12C18.9808 12.1358 18.9775 12.274 18.971 12.4145C18.9647 12.5548 18.9417 12.7154 18.902 12.8963L21.3615 14.75L19.0538 18.75L16.2385 17.548C15.991 17.7455 15.7384 17.9202 15.4808 18.072C15.2231 18.224 14.959 18.3481 14.6885 18.4443L14.3078 21.5H9.69225ZM11 20H12.9655L13.325 17.3212C13.8353 17.1879 14.3017 16.9985 14.724 16.753C15.1465 16.5073 15.5539 16.1916 15.9463 15.8057L18.4308 16.85L19.4155 15.15L17.2463 13.5155C17.3296 13.2565 17.3863 13.0026 17.4163 12.7537C17.4464 12.5051 17.4615 12.2538 17.4615 12C17.4615 11.7397 17.4464 11.4884 17.4163 11.2463C17.3863 11.0039 17.3296 10.7564 17.2463 10.5038L19.4345 8.85L18.45 7.15L15.9365 8.2095C15.6018 7.85183 15.2009 7.53583 14.7338 7.2615C14.2664 6.98717 13.7937 6.79292 13.3155 6.67875L13 4H11.0155L10.6845 6.66925C10.1743 6.78975 9.70325 6.97433 9.27125 7.223C8.83909 7.47183 8.42684 7.79233 8.0345 8.1845L5.55 7.15L4.5655 8.85L6.725 10.4595C6.64167 10.6968 6.58334 10.9437 6.55 11.2C6.51667 11.4563 6.5 11.7262 6.5 12.0095C6.5 12.2698 6.51667 12.525 6.55 12.775C6.58334 13.025 6.6385 13.2718 6.7155 13.5155L4.5655 15.15L5.55 16.85L8.025 15.8C8.4045 16.1897 8.81025 16.5089 9.24225 16.7578C9.67442 17.0064 10.152 17.1974 10.675 17.3307L11 20ZM12.0115 15C12.8435 15 13.5515 14.708 14.1355 14.124C14.7195 13.54 15.0115 12.832 15.0115 12C15.0115 11.168 14.7195 10.46 14.1355 9.876C13.5515 9.292 12.8435 9 12.0115 9C11.1692 9 10.4586 9.292 9.87975 9.876C9.30092 10.46 9.0115 11.168 9.0115 12C9.0115 12.832 9.30092 13.54 9.87975 14.124C10.4586 14.708 11.1692 15 12.0115 15Z",fill:"currentColor"})),delete_big:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M7.30775 20.5C6.80908 20.5 6.38308 20.3234 6.02975 19.9702C5.67658 19.6169 5.5 19.1909 5.5 18.6922V5.99998H4.5V4.49998H9V3.61548H15V4.49998H19.5V5.99998H18.5V18.6922C18.5 19.1974 18.325 19.625 17.975 19.975C17.625 20.325 17.1974 20.5 16.6923 20.5H7.30775ZM17 5.99998H7V18.6922C7 18.7821 7.02883 18.8558 7.0865 18.9135C7.14417 18.9711 7.21792 19 7.30775 19H16.6923C16.7692 19 16.8398 18.9679 16.9038 18.9037C16.9679 18.8397 17 18.7692 17 18.6922V5.99998ZM9.404 17H10.9037V7.99998H9.404V17ZM13.0962 17H14.596V7.99998H13.0962V17Z",fill:"currentColor"})),delete_small:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M7.30775 20.5C6.80908 20.5 6.38308 20.3234 6.02975 19.9702C5.67658 19.6169 5.5 19.1909 5.5 18.6922V5.99998H4.5V4.49998H9V3.61548H15V4.49998H19.5V5.99998H18.5V18.6922C18.5 19.1974 18.325 19.625 17.975 19.975C17.625 20.325 17.1974 20.5 16.6923 20.5H7.30775ZM17 5.99998H7V18.6922C7 18.7821 7.02883 18.8558 7.0865 18.9135C7.14417 18.9711 7.21792 19 7.30775 19H16.6923C16.7692 19 16.8398 18.9679 16.9038 18.9037C16.9679 18.8397 17 18.7692 17 18.6922V5.99998ZM9.404 17H10.9037V7.99998H9.404V17ZM13.0962 17H14.596V7.99998H13.0962V17Z",fill:"currentColor"})),format_align_center:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M3.5 20.5V19H20.5V20.5H3.5ZM7.5 16.625V15.125H16.5V16.625H7.5ZM3.5 12.75V11.25H20.5V12.75H3.5ZM7.5 8.875V7.375H16.5V8.875H7.5ZM3.5 5V3.5H20.5V5H3.5Z",fill:"currentColor"})),format_align_left:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M3.5 20.5V19H20.5V20.5H3.5ZM3.5 16.625V15.125H14.5V16.625H3.5ZM3.5 12.75V11.25H20.5V12.75H3.5ZM3.5 8.875V7.375H14.5V8.875H3.5ZM3.5 5V3.5H20.5V5H3.5Z",fill:"currentColor"})),format_align_right:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M3.5 5V3.5H20.5V5H3.5ZM9.5 8.875V7.375H20.5V8.875H9.5ZM3.5 12.75V11.25H20.5V12.75H3.5ZM9.5 16.625V15.125H20.5V16.625H9.5ZM3.5 20.5V19H20.5V20.5H3.5Z",fill:"currentColor"})),add_row:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.025 10.2077C4.375 9.85775 4.80258 9.68275 5.30775 9.68275H6.5V11.1827H5.30775C5.21792 11.1827 5.14417 11.2116 5.0865 11.2693C5.02883 11.3269 5 11.4007 5 11.4905V16.1923C5 16.2821 5.02883 16.3558 5.0865 16.4135C5.14417 16.4712 5.21792 16.5 5.30775 16.5H18.6923C18.7821 16.5 18.8558 16.4712 18.9135 16.4135C18.9712 16.3558 19 16.2821 19 16.1923V11.4905C19 11.4007 18.9712 11.3269 18.9135 11.2693C18.8558 11.2116 18.7821 11.1827 18.6923 11.1827H17.6923V9.68275H18.6923C19.1974 9.68275 19.625 9.85775 19.975 10.2077C20.325 10.5577 20.5 10.9853 20.5 11.4905V16.1923C20.5 16.6974 20.325 17.125 19.975 17.475C19.625 17.825 19.1974 18 18.6923 18H5.30775C4.80258 18 4.375 17.825 4.025 17.475C3.675 17.125 3.5 16.6974 3.5 16.1923V11.4905C3.5 10.9853 3.675 10.5577 4.025 10.2077Z",fill:"currentColor"}),se.createElement("path",{d:"M11.3848 9.68275V7.5H12.8848V9.68275H15V11.1827H12.8848V13.2307H11.3848V11.1827H9.26925V9.68275H11.3848Z",fill:"currentColor"})),add_column:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.70775 4.025C9.35775 4.375 9.18275 4.80258 9.18275 5.30775V6.5H10.6827V5.30775C10.6827 5.21792 10.7116 5.14417 10.7693 5.0865C10.8269 5.02883 10.9007 5 10.9905 5H15.6923C15.7821 5 15.8558 5.02883 15.9135 5.0865C15.9712 5.14417 16 5.21792 16 5.30775V18.6923C16 18.7821 15.9712 18.8558 15.9135 18.9135C15.8558 18.9712 15.7821 19 15.6923 19H10.9905C10.9007 19 10.8269 18.9712 10.7693 18.9135C10.7116 18.8558 10.6827 18.7821 10.6827 18.6923V17.6923H9.18275V18.6923C9.18275 19.1974 9.35775 19.625 9.70775 19.975C10.0577 20.325 10.4853 20.5 10.9905 20.5H15.6923C16.1974 20.5 16.625 20.325 16.975 19.975C17.325 19.625 17.5 19.1974 17.5 18.6923V5.30775C17.5 4.80258 17.325 4.375 16.975 4.025C16.625 3.675 16.1974 3.5 15.6923 3.5H10.9905C10.4853 3.5 10.0577 3.675 9.70775 4.025Z",fill:"currentColor"}),se.createElement("path",{d:"M9.18275 11.3848H7V12.8848H9.18275V15H10.6827V12.8848H12.7307V11.3848H10.6827V9.26925H9.18275V11.3848Z",fill:"currentColor"})),insert_col_left:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M13.0001 20.1152H8.67713H8.75388H8.69238H13.0001ZM7.19238 19.8075C7.19238 20.3127 7.36738 20.7402 7.71738 21.0902C8.06738 21.4402 8.49497 21.6152 9.00013 21.6152H12.6924C13.1975 21.6152 13.6251 21.4402 13.9751 21.0902C14.3251 20.7402 14.5001 20.3127 14.5001 19.8075V10.423H13.0001V19.8075C13.0001 19.8973 12.9713 19.9711 12.9136 20.0287C12.856 20.0864 12.7822 20.1152 12.6924 20.1152H9.00013C8.9103 20.1152 8.83655 20.0864 8.77888 20.0287C8.72122 19.9711 8.69238 19.8973 8.69238 19.8075V4.69223C8.26422 4.74357 7.90722 4.93299 7.62138 5.26048C7.33538 5.58798 7.19238 5.97548 7.19238 6.42298V19.8075ZM13.0001 2.49998V4.61523H10.8846V6.11523H13.0001V8.23073H14.5001V6.11523H16.6154V4.61523H14.5001V2.49998H13.0001Z",fill:"currentColor"})),insert_row_above:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M20.1152 9.99987V14.3229V14.2461V14.3076V9.99987ZM19.8075 15.8076C20.3127 15.8076 20.7402 15.6326 21.0902 15.2826C21.4402 14.9326 21.6152 14.505 21.6152 13.9999V10.3076C21.6152 9.80245 21.4402 9.37487 21.0902 9.02487C20.7402 8.67487 20.3127 8.49987 19.8075 8.49987H10.423V9.99987H19.8075C19.8973 9.99987 19.9711 10.0287 20.0287 10.0864C20.0864 10.144 20.1152 10.2178 20.1152 10.3076V13.9999C20.1152 14.0897 20.0864 14.1635 20.0287 14.2211C19.9711 14.2788 19.8973 14.3076 19.8075 14.3076H4.69223C4.74357 14.7358 4.93299 15.0928 5.26048 15.3786C5.58798 15.6646 5.97548 15.8076 6.42298 15.8076H19.8075ZM2.49998 9.99987H4.61523V12.1154H6.11523V9.99987H8.23073V8.49987H6.11523V6.38462H4.61523V8.49987H2.49998V9.99987Z",fill:"currentColor"})),insert_row_below:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M20.1152 14.1924V9.86939V9.94614V9.88464V14.1924ZM19.8075 8.38464C20.3127 8.38464 20.7402 8.55964 21.0902 8.90964C21.4402 9.25964 21.6152 9.68723 21.6152 10.1924V13.8846C21.6152 14.3898 21.4402 14.8174 21.0902 15.1674C20.7402 15.5174 20.3127 15.6924 19.8075 15.6924H10.423V14.1924H19.8075C19.8973 14.1924 19.9711 14.1636 20.0287 14.1059C20.0864 14.0482 20.1152 13.9745 20.1152 13.8846V10.1924C20.1152 10.1026 20.0864 10.0288 20.0287 9.97114C19.9711 9.91348 19.8973 9.88464 19.8075 9.88464H4.69223C4.74357 9.45648 4.93299 9.09948 5.26048 8.81364C5.58798 8.52764 5.97548 8.38464 6.42298 8.38464H19.8075ZM2.49998 14.1924H4.61523V12.0769H6.11523V14.1924H8.23073V15.6924H6.11523V17.8076H4.61523V15.6924H2.49998V14.1924Z",fill:"currentColor"})),insert_col_right:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M10.8075 20.1152H15.1305H15.0537H15.1152H10.8075ZM16.6152 19.8075C16.6152 20.3127 16.4402 20.7402 16.0902 21.0902C15.7402 21.4402 15.3127 21.6152 14.8075 21.6152H11.1152C10.6101 21.6152 10.1825 21.4402 9.83248 21.0902C9.48248 20.7402 9.30748 20.3127 9.30748 19.8075V10.423H10.8075V19.8075C10.8075 19.8973 10.8363 19.9711 10.894 20.0287C10.9517 20.0864 11.0254 20.1152 11.1152 20.1152H14.8075C14.8973 20.1152 14.9711 20.0864 15.0287 20.0287C15.0864 19.9711 15.1152 19.8973 15.1152 19.8075V4.69223C15.5434 4.74357 15.9004 4.93299 16.1862 5.26048C16.4722 5.58798 16.6152 5.97548 16.6152 6.42298V19.8075ZM10.8075 2.49998V4.61523H12.923V6.11523H10.8075V8.23073H9.30748V6.11523H7.19223V4.61523H9.30748V2.49998H10.8075Z",fill:"currentColor"})),check:se.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se.createElement("path",{d:"M9.54983 17.6537L4.21533 12.3192L5.28433 11.25L9.54983 15.5155L18.7153 6.34998L19.7843 7.41923L9.54983 17.6537Z",fill:"currentColor"}))},oMe="_editorRoot_1e2ox_53",sMe="_editorWrapper_1e2ox_155",aMe="_toolbarRoot_1e2ox_162",lMe="_readOnlyToolbarRoot_1e2ox_189",cMe="_toolbarToggleItem_1e2ox_208",uMe="_toolbarGroupOfGroups_1e2ox_219",hMe="_toolbarToggleSingleGroup_1e2ox_224",dMe="_toolbarButton_1e2ox_239",fMe="_toolbarButtonDropdownContainer_1e2ox_286",pMe="_selectContainer_1e2ox_288",mMe="_selectItem_1e2ox_301",gMe="_toolbarButtonSelectTrigger_1e2ox_307",yMe="_selectTrigger_1e2ox_308",vMe="_selectDropdownArrow_1e2ox_374",_Me="_contentEditable_1e2ox_380",bMe="_codeMirrorWrapper_1e2ox_392",xMe="_codeMirrorToolbar_1e2ox_409",wMe="_propertyEditorTable_1e2ox_439",OMe="_iconButton_1e2ox_457",SMe="_propertyEditorInput_1e2ox_481",CMe="_primaryButton_1e2ox_507",TMe="_secondaryButton_1e2ox_508",kMe="_smallButton_1e2ox_523",EMe="_linkDialogEditForm_1e2ox_541",AMe="_linkDialogAnchor_1e2ox_587",PMe="_linkDialogPopoverContent_1e2ox_601",MMe="_tableColumnEditorPopoverContent_1e2ox_602",RMe="_dialogContent_1e2ox_603",IMe="_largeDialogContent_1e2ox_615",DMe="_dialogTitle_1e2ox_625",LMe="_dialogCloseButton_1e2ox_631",$Me="_popoverArrow_1e2ox_650",zMe="_linkDialogPreviewAnchor_1e2ox_654",NMe="_tooltipTrigger_1e2ox_677",BMe="_tooltipContent_1e2ox_681",FMe="_actionButton_1e2ox_695",jMe="_tableEditor_1e2ox_714",VMe="_toolCell_1e2ox_725",QMe="_tableColumnEditorTrigger_1e2ox_744",UMe="_addRowButton_1e2ox_746",ZMe="_addColumnButton_1e2ox_747",qMe="_tableColumnEditorToolbar_1e2ox_789",WMe="_toggleGroupRoot_1e2ox_802",HMe="_tableToolsColumn_1e2ox_820",GMe="_leftAlignedCell_1e2ox_829",XMe="_rightAlignedCell_1e2ox_833",YMe="_centeredCell_1e2ox_837",KMe="_dialogOverlay_1e2ox_870",JMe="_focusedImage_1e2ox_916",eRe="_imageWrapper_1e2ox_920",tRe="_editImageToolbar_1e2ox_933",nRe="_editImageButton_1e2ox_937",rRe="_nestedEditor_1e2ox_961",iRe="_imageControlWrapperResizing_1e2ox_1032",oRe="_imageResizer_1e2ox_1036",sRe="_imageResizerN_1e2ox_1045",aRe="_imageResizerNe_1e2ox_1051",lRe="_imageResizerE_1e2ox_1057",cRe="_imageResizerSe_1e2ox_1063",uRe="_imageResizerS_1e2ox_1063",hRe="_imageResizerSw_1e2ox_1075",dRe="_imageResizerW_1e2ox_1081",fRe="_imageResizerNw_1e2ox_1087",pRe="_imagePlaceholder_1e2ox_1093",mRe="_imageDimensionsContainer_1e2ox_1101",gRe="_placeholder_1e2ox_1106",yRe="_rootContentEditableWrapper_1e2ox_1119",vRe="_downshiftInputWrapper_1e2ox_1129",_Re="_downshiftInput_1e2ox_1129",bRe="_downshiftAutocompleteContainer_1e2ox_1160",xRe="_textInput_1e2ox_1206",wRe="_multiFieldForm_1e2ox_1214",ORe="_formField_1e2ox_1220",SRe="_markdownParseError_1e2ox_1231",CRe="_popupContainer_1e2ox_1240",jt={editorRoot:oMe,editorWrapper:sMe,toolbarRoot:aMe,readOnlyToolbarRoot:lMe,toolbarToggleItem:cMe,toolbarGroupOfGroups:uMe,toolbarToggleSingleGroup:hMe,toolbarButton:dMe,toolbarButtonDropdownContainer:fMe,selectContainer:pMe,selectItem:mMe,toolbarButtonSelectTrigger:gMe,selectTrigger:yMe,selectDropdownArrow:vMe,contentEditable:_Me,codeMirrorWrapper:bMe,codeMirrorToolbar:xMe,propertyEditorTable:wMe,iconButton:OMe,propertyEditorInput:SMe,primaryButton:CMe,secondaryButton:TMe,smallButton:kMe,linkDialogEditForm:EMe,linkDialogAnchor:AMe,linkDialogPopoverContent:PMe,tableColumnEditorPopoverContent:MMe,dialogContent:RMe,largeDialogContent:IMe,dialogTitle:DMe,dialogCloseButton:LMe,popoverArrow:$Me,linkDialogPreviewAnchor:zMe,tooltipTrigger:NMe,tooltipContent:BMe,actionButton:FMe,tableEditor:jMe,toolCell:VMe,tableColumnEditorTrigger:QMe,addRowButton:UMe,addColumnButton:ZMe,tableColumnEditorToolbar:qMe,toggleGroupRoot:WMe,tableToolsColumn:HMe,leftAlignedCell:GMe,rightAlignedCell:XMe,centeredCell:YMe,dialogOverlay:KMe,focusedImage:JMe,imageWrapper:eRe,editImageToolbar:tRe,editImageButton:nRe,nestedEditor:rRe,imageControlWrapperResizing:iRe,imageResizer:oRe,imageResizerN:sRe,imageResizerNe:aRe,imageResizerE:lRe,imageResizerSe:cRe,imageResizerS:uRe,imageResizerSw:hRe,imageResizerW:dRe,imageResizerNw:fRe,imagePlaceholder:pRe,imageDimensionsContainer:mRe,placeholder:gRe,rootContentEditableWrapper:yRe,downshiftInputWrapper:vRe,downshiftInput:_Re,downshiftAutocompleteContainer:bRe,textInput:xRe,multiFieldForm:wRe,formField:ORe,markdownParseError:SRe,popupContainer:CRe},TRe=new Set(["http:","https:","mailto:","sms:","tel:"]);class oy extends iu{static getType(){return"link"}static clone(e){return new oy(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e="",n={},r){super(r);const{target:i=null,rel:o=null,title:a=null}=n;this.__url=e,this.__target=i,this.__rel=o,this.__title=a}createDOM(e){const n=document.createElement("a");return this.updateLinkDOM(null,n,e),xf(n,e.theme.link),n}updateLinkDOM(e,n,r){if(cK(n)){e&&e.__url===this.__url||(n.href=this.sanitizeUrl(this.__url));for(const i of["target","rel","title"]){const o=`__${i}`,a=this[o];e&&e[o]===a||(a?n[i]=a:n.removeAttribute(i))}}}updateDOM(e,n,r){return this.updateLinkDOM(e,n,r),!1}static importDOM(){return{a:e=>({conversion:kRe,priority:1})}}static importJSON(e){return Hg().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null)}sanitizeUrl(e){e=HQ(e);try{const n=new URL(HQ(e));if(!TRe.has(n.protocol))return"about:blank"}catch{return e}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(e){const n=this.getWritable();return n.__url=e,n}getTarget(){return this.getLatest().__target}setTarget(e){const n=this.getWritable();return n.__target=e,n}getRel(){return this.getLatest().__rel}setRel(e){const n=this.getWritable();return n.__rel=e,n}getTitle(){return this.getLatest().__title}setTitle(e){const n=this.getWritable();return n.__title=e,n}insertNewAfter(e,n=!0){const r=Hg(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,n),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,n,r){if(!Ht(n))return!1;const i=n.anchor.getNode(),o=n.focus.getNode();return this.isParentOf(i)&&this.isParentOf(o)&&n.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function kRe(t){let e=null;if(cK(t)){const n=t.textContent;(n!==null&&n!==""||t.children.length>0)&&(e=Hg(t.getAttribute("href")||"",{rel:t.getAttribute("rel"),target:t.getAttribute("target"),title:t.getAttribute("title")}))}return{node:e}}function Hg(t="",e){return nh(new oy(t,e))}function Zc(t){return t instanceof oy}let QR=class HJ extends oy{constructor(e="",n={},r){super(e,n,r),this.__isUnlinked=n.isUnlinked!==void 0&&n.isUnlinked!==null&&n.isUnlinked}static getType(){return"autolink"}static clone(e){return new HJ(e.__url,{isUnlinked:e.__isUnlinked,rel:e.__rel,target:e.__target,title:e.__title},e.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(e){const n=this.getWritable();return n.__isUnlinked=e,n}createDOM(e){return this.__isUnlinked?document.createElement("span"):super.createDOM(e)}updateDOM(e,n,r){return super.updateDOM(e,n,r)||e.__isUnlinked!==this.__isUnlinked}static importJSON(e){return b4().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIsUnlinked(e.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(e,n=!0){const r=this.getParentOrThrow().insertNewAfter(e,n);if(Rt(r)){const i=b4(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return r.append(i),i}return null}};function b4(t="",e){return nh(new QR(t,e))}function lf(t){return t instanceof QR}const Nw=Kn("TOGGLE_LINK_COMMAND");function qQ(t,e){if(t.type==="element"){const n=t.getNode();return Rt(n)||(function(r,...i){const o=new URL("https://lexical.dev/docs/error"),a=new URLSearchParams;a.append("code",r);for(const s of i)a.append("v",s);throw o.search=a.toString(),Error(`Minified Lexical error #${r}; visit ${o.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(252),n.getChildren()[t.offset+e]||null}return null}function rD(t,e={}){const{target:n,title:r}=e,i=e.rel===void 0?"noreferrer":e.rel,o=sn();if(o===null||!Ht(o)&&!es(o))return;if(es(o)){const f=o.getNodes();return f.length===0?void 0:void f.forEach((g=>{if(t===null){const _=mf(g,(w=>!lf(w)&&Zc(w)));_&&(_.insertBefore(g),_.getChildren().length===0&&_.remove())}else{const _=mf(g,(w=>!lf(w)&&Zc(w)));if(_)_.setURL(t),n!==void 0&&_.setTarget(n),i!==void 0&&_.setRel(i);else{const w=Hg(t,{rel:i,target:n});g.insertBefore(w),w.append(g)}}}))}const a=o.extract();if(t===null)return void a.forEach((f=>{const g=mf(f,(_=>!lf(_)&&Zc(_)));if(g){const _=g.getChildren();for(let w=0;w<_.length;w++)g.insertBefore(_[w]);g.remove()}}));const s=new Set,u=f=>{s.has(f.getKey())||(s.add(f.getKey()),f.setURL(t),n!==void 0&&f.setTarget(n),i!==void 0&&f.setRel(i),r!==void 0&&f.setTitle(r))};if(a.length===1){const f=WQ(a[0],Zc);if(f!==null)return u(f)}(function(f){const g=sn();if(!Ht(g))return f();const _=lb(g),w=_.isBackward(),S=qQ(_.anchor,w?-1:0),E=qQ(_.focus,w?0:-1);if(f(),S||E){const A=sn();if(Ht(A)){const R=A.clone();if(S){const $=S.getParent();$&&R.anchor.set($.getKey(),S.getIndexWithinParent()+(w?1:0),"element")}if(E){const $=E.getParent();$&&R.focus.set($.getKey(),E.getIndexWithinParent()+(w?0:1),"element")}rs(lb(R))}}})((()=>{let f=null;for(const g of a){if(!g.isAttached())continue;const _=WQ(g,Zc);if(_){u(_);continue}if(Rt(g)){if(!g.isInline())continue;if(Zc(g)){if(!(lf(g)||f!==null&&f.getParentOrThrow().isParentOf(g))){u(g),f=g;continue}for(const S of g.getChildren())g.insertBefore(S);g.remove();continue}}const w=g.getPreviousSibling();Zc(w)&&w.is(f)?w.append(g):(f=Hg(t,{rel:i,target:n,title:r}),g.insertAfter(f),f.append(g))}}))}function WQ(t,e){let n=t;for(;n!==null&&n.getParent()!==null&&!e(n);)n=n.getParentOrThrow();return e(n)?n:null}const ERe=/^\+?[0-9\s()-]{5,}$/;function HQ(t){return t.match(/^[a-z][a-z0-9+.-]*:/i)||t.match(/^[/#.]/)?t:t.includes("@")?`mailto:${t}`:ERe.test(t)?`tel:${t}`:`https://${t}`}function O0(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const i of e)r.append("v",i);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function JC(t){let e=1,n=t.getParent();for(;n!=null;){if(Sr(n)){const r=n.getParent();if(tr(r)){e++,n=r.getParent();continue}O0(40)}return e}return e}function x4(t){let e=t.getParent();tr(e)||O0(40);let n=e;for(;n!==null;)n=n.getParent(),tr(n)&&(e=n);return e}function GJ(t){let e=[];const n=t.getChildren().filter(Sr);for(let r=0;r<n.length;r++){const i=n[r],o=i.getFirstChild();tr(o)?e=e.concat(GJ(o)):e.push(i)}return e}function $p(t){return Sr(t)&&tr(t.getFirstChild())}function GQ(t){return cc().append(t)}function XJ(t,e){return Sr(t)&&(e.length===0||e.length===1&&t.is(e[0])&&t.getChildrenSize()===0)}function w4(t){const e=sn();if(e!==null){let n=e.getNodes();if(Ht(e)){const i=e.getStartEndPoints();i===null&&O0(143);const[o]=i,a=o.getNode(),s=a.getParent();if(Ys(a)){const u=a.getFirstChild();if(u)n=u.selectStart().getNodes();else{const f=mi();a.append(f),n=f.select().getNodes()}}else if(XJ(a,n)){const u=ac(t);if(Ys(s)){a.replace(u);const f=cc();Rt(a)&&(f.setFormat(a.getFormatType()),f.setIndent(a.getIndent())),u.append(f)}else if(Sr(a)){const f=a.getParentOrThrow();_b(u,f.getChildren()),f.replace(u)}return}}const r=new Set;for(let i=0;i<n.length;i++){const o=n[i];if(Rt(o)&&o.isEmpty()&&!Sr(o)&&!r.has(o.getKey())){XQ(o,t);continue}let a=KY(o)?o.getParent():Sr(o)&&o.isEmpty()?o:null;for(;a!=null;){const s=a.getKey();if(tr(a)){if(!r.has(s)){const u=ac(t);_b(u,a.getChildren()),a.replace(u),r.add(s)}break}{const u=a.getParent();if(Ys(u)&&!r.has(s)){r.add(s),XQ(a,t);break}a=u}}}}}function _b(t,e){t.splice(t.getChildrenSize(),0,e)}function XQ(t,e){if(tr(t))return t;const n=t.getPreviousSibling(),r=t.getNextSibling(),i=cc();let o;if(_b(i,t.getChildren()),tr(n)&&e===n.getListType())n.append(i),tr(r)&&e===r.getListType()&&(_b(n,r.getChildren()),r.remove()),o=n;else if(tr(r)&&e===r.getListType())r.getFirstChildOrThrow().insertBefore(i),o=r;else{const a=ac(e);a.append(i),t.replace(a),o=a}return i.setFormat(t.getFormatType()),i.setIndent(t.getIndent()),t.remove(),o}function A8(t,e){const n=t.getLastChild(),r=e.getFirstChild();n&&r&&$p(n)&&$p(r)&&(A8(n.getFirstChild(),r.getFirstChild()),r.remove());const i=e.getChildren();i.length>0&&t.append(...i),e.remove()}function ARe(){const t=sn();if(Ht(t)){const e=new Set,n=t.getNodes(),r=t.anchor.getNode();if(XJ(r,n))e.add(x4(r));else for(let i=0;i<n.length;i++){const o=n[i];if(KY(o)){const a=TK(o,sy);a!=null&&e.add(x4(a))}}for(const i of e){let o=i;const a=GJ(i);for(const s of a){const u=mi().setTextStyle(t.style).setTextFormat(t.format);_b(u,s.getChildren()),o.insertAfter(u),o=u,s.__key===t.anchor.key&&mb(t.anchor,Uu(Jh(u,"next"))),s.__key===t.focus.key&&mb(t.focus,Uu(Jh(u,"next"))),s.remove()}i.remove()}}}function YJ(t){const e=t.getListType()!=="check";let n=t.getStart();for(const r of t.getChildren())Sr(r)&&(r.getValue()!==n&&r.setValue(n),e&&r.getLatest().__checked!=null&&r.setChecked(void 0),tr(r.getFirstChild())||n++)}function PRe(t){const e=new Set;if($p(t)||e.has(t.getKey()))return;const n=t.getParent(),r=t.getNextSibling(),i=t.getPreviousSibling();if($p(r)&&$p(i)){const o=i.getFirstChild();if(tr(o)){o.append(t);const a=r.getFirstChild();tr(a)&&(_b(o,a.getChildren()),r.remove(),e.add(r.getKey()))}}else if($p(r)){const o=r.getFirstChild();if(tr(o)){const a=o.getFirstChild();a!==null&&a.insertBefore(t)}}else if($p(i)){const o=i.getFirstChild();tr(o)&&o.append(t)}else if(tr(n)){const o=cc().setTextFormat(t.getTextFormat()).setTextStyle(t.getTextStyle()),a=ac(n.getListType()).setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle());o.append(a),a.append(t),i?i.insertAfter(o):r?r.insertBefore(o):n.append(o)}}function MRe(t){if($p(t))return;const e=t.getParent(),n=e?e.getParent():void 0;if(tr(n?n.getParent():void 0)&&Sr(n)&&tr(e)){const r=e?e.getFirstChild():void 0,i=e?e.getLastChild():void 0;if(t.is(r))n.insertBefore(t),e.isEmpty()&&n.remove();else if(t.is(i))n.insertAfter(t),e.isEmpty()&&n.remove();else{const o=e.getListType(),a=cc(),s=ac(o);a.append(s),t.getPreviousSiblings().forEach((g=>s.append(g)));const u=cc(),f=ac(o);u.append(f),_b(f,t.getNextSiblings()),n.insertBefore(a),n.insertAfter(u),n.replace(t)}}}function RRe(){const t=sn();if(!Ht(t)||!t.isCollapsed())return!1;const e=t.anchor.getNode();if(!Sr(e)||e.getChildrenSize()!==0)return!1;const n=x4(e),r=e.getParent();tr(r)||O0(40);const i=r.getParent();let o;if(Ys(i))o=mi(),n.insertAfter(o);else{if(!Sr(i))return!1;o=cc(),i.insertAfter(o)}o.setTextStyle(t.style).setTextFormat(t.format).select();const a=e.getNextSiblings();if(a.length>0){const s=ac(r.getListType());if(Sr(o)){const u=cc();u.append(s),o.insertAfter(u)}else o.insertAfter(s);s.append(...a)}return(function(s){let u=s;for(;u.getNextSibling()==null&&u.getPreviousSibling()==null;){const f=u.getParent();if(f==null||!Sr(f)&&!tr(f))break;u=f}u.remove()})(e),!0}function E5(...t){const e=[];for(const n of t)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))e.push(r);return e}let sy=class extends iu{$config(){return this.config("listitem",{$transform:e=>{if(e.__checked==null)return;const n=e.getParent();tr(n)&&n.getListType()!=="check"&&e.getChecked()!=null&&e.setChecked(void 0)},extends:iu,importDOM:{li:()=>({conversion:IRe,priority:0})}})}constructor(e=1,n=void 0,r){super(r),this.__value=e===void 0?1:e,this.__checked=n}afterCloneFrom(e){super.afterCloneFrom(e),this.__value=e.__value,this.__checked=e.__checked}createDOM(e){const n=document.createElement("li");return this.updateListItemDOM(null,n,e),n}updateListItemDOM(e,n,r){const i=this.getParent();tr(i)&&i.getListType()==="check"&&(function(s,u,f,g){tr(u.getFirstChild())?(s.removeAttribute("role"),s.removeAttribute("tabIndex"),s.removeAttribute("aria-checked")):(s.setAttribute("role","checkbox"),s.setAttribute("tabIndex","-1"),f&&u.__checked===f.__checked||s.setAttribute("aria-checked",u.getChecked()?"true":"false"))})(n,this,e),n.value=this.__value,(function(s,u,f){const g=[],_=[],w=u.list,S=w?w.listitem:void 0;let E;if(w&&w.nested&&(E=w.nested.listitem),S!==void 0&&g.push(...E5(S)),w){const A=f.getParent(),R=tr(A)&&A.getListType()==="check",$=f.getChecked();R&&!$||_.push(w.listitemUnchecked),R&&$||_.push(w.listitemChecked),R&&g.push($?w.listitemChecked:w.listitemUnchecked)}if(E!==void 0){const A=E5(E);f.getChildren().some((R=>tr(R)))?g.push(...A):_.push(...A)}_.length>0&&PR(s,..._),g.length>0&&xf(s,...g)})(n,r.theme,this);const o=e?e.__style:"",a=this.__style;o!==a&&(a===""?n.removeAttribute("style"):n.style.cssText=a),(function(s,u,f){const g=NV(u.__textStyle);for(const _ in g)s.style.setProperty(`--listitem-marker-${_}`,g[_]);if(f)for(const _ in NV(f.__textStyle))_ in g||s.style.removeProperty(`--listitem-marker-${_}`)})(n,this,e)}updateDOM(e,n,r){const i=n;return this.updateListItemDOM(e,i,r),!1}updateFromJSON(e){return super.updateFromJSON(e).setValue(e.value).setChecked(e.checked)}exportDOM(e){const n=this.createDOM(e._config),r=this.getFormatType();r&&(n.style.textAlign=r);const i=this.getDirection();return i&&(n.dir=i),{element:n}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...e){for(let n=0;n<e.length;n++){const r=e[n];if(Rt(r)&&this.canMergeWith(r)){const i=r.getChildren();this.append(...i),r.remove()}else super.append(r)}return this}replace(e,n){if(Sr(e))return super.replace(e);this.setIndent(0);const r=this.getParentOrThrow();if(!tr(r))return e;if(r.__first===this.getKey())r.insertBefore(e);else if(r.__last===this.getKey())r.insertAfter(e);else{const i=ac(r.getListType());let o=this.getNextSibling();for(;o;){const a=o;o=o.getNextSibling(),i.append(a)}r.insertAfter(e),e.insertAfter(i)}return n&&(Rt(e)||O0(139),this.getChildren().forEach((i=>{e.append(i)}))),this.remove(),r.getChildrenSize()===0&&r.remove(),e}insertAfter(e,n=!0){const r=this.getParentOrThrow();if(tr(r)||O0(39),Sr(e))return super.insertAfter(e,n);const i=this.getNextSiblings();if(r.insertAfter(e,n),i.length!==0){const o=ac(r.getListType());i.forEach((a=>o.append(a))),e.insertAfter(o,n)}return e}remove(e){const n=this.getPreviousSibling(),r=this.getNextSibling();super.remove(e),n&&r&&$p(n)&&$p(r)&&(A8(n.getFirstChild(),r.getFirstChild()),r.remove())}insertNewAfter(e,n=!0){const r=cc().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(r,n),r}collapseAtStart(e){const n=mi();this.getChildren().forEach((a=>n.append(a)));const r=this.getParentOrThrow(),i=r.getParentOrThrow(),o=Sr(i);if(r.getChildrenSize()===1)if(o)r.remove(),i.select();else{r.insertBefore(n),r.remove();const a=e.anchor,s=e.focus,u=n.getKey();a.type==="element"&&a.getNode().is(this)&&a.set(u,a.offset,"element"),s.type==="element"&&s.getNode().is(this)&&s.set(u,s.offset,"element")}else r.insertBefore(n),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(e){const n=this.getWritable();return n.__value=e,n}getChecked(){const e=this.getLatest();let n;const r=this.getParent();return tr(r)&&(n=r.getListType()),n==="check"?!!e.__checked:void 0}setChecked(e){const n=this.getWritable();return n.__checked=e,n}toggleChecked(){const e=this.getWritable();return e.setChecked(!e.__checked)}getIndent(){const e=this.getParent();if(e===null||!this.isAttached())return this.getLatest().__indent;let n=e.getParentOrThrow(),r=0;for(;Sr(n);)n=n.getParentOrThrow().getParentOrThrow(),r++;return r}setIndent(e){typeof e!="number"&&O0(117),(e=Math.floor(e))>=0||O0(199);let n=this.getIndent();for(;n!==e;)n<e?(PRe(this),n++):(MRe(this),n--);return this}canInsertAfter(e){return Sr(e)}canReplaceWith(e){return Sr(e)}canMergeWith(e){return Sr(e)||bR(e)}extractWithChild(e,n){if(!Ht(n))return!1;const r=n.anchor.getNode(),i=n.focus.getNode();return this.isParentOf(r)&&this.isParentOf(i)&&this.getTextContent().length===n.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return ac("bullet")}canMergeWhenEmpty(){return!0}};function IRe(t){if(t.classList.contains("task-list-item")){for(const n of t.children)if(n.tagName==="INPUT")return DRe(n)}const e=t.getAttribute("aria-checked");return{node:cc(e==="true"||e!=="false"&&void 0)}}function DRe(t){return t.getAttribute("type")!=="checkbox"?{node:null}:{node:cc(t.hasAttribute("checked"))}}function cc(t){return nh(new sy(void 0,t))}function Sr(t){return t instanceof sy}let ay=class extends iu{$config(){return this.config("list",{$transform:e=>{(function(n){const r=n.getNextSibling();tr(r)&&n.getListType()===r.getListType()&&A8(n,r)})(e),YJ(e)},extends:iu,importDOM:{ol:()=>({conversion:KQ,priority:0}),ul:()=>({conversion:KQ,priority:0})}})}constructor(e="number",n=1,r){super(r);const i=$Re[e]||e;this.__listType=i,this.__tag=i==="number"?"ol":"ul",this.__start=n}afterCloneFrom(e){super.afterCloneFrom(e),this.__listType=e.__listType,this.__tag=e.__tag,this.__start=e.__start}getTag(){return this.getLatest().__tag}setListType(e){const n=this.getWritable();return n.__listType=e,n.__tag=e==="number"?"ol":"ul",n}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(e){const n=this.getWritable();return n.__start=e,n}createDOM(e,n){const r=this.__tag,i=document.createElement(r);return this.__start!==1&&i.setAttribute("start",String(this.__start)),i.__lexicalListType=this.__listType,YQ(i,e.theme,this),i}updateDOM(e,n,r){return e.__tag!==this.__tag||(YQ(n,r.theme,this),!1)}updateFromJSON(e){return super.updateFromJSON(e).setListType(e.listType).setStart(e.start)}exportDOM(e){const n=this.createDOM(e._config,e);return qo(n)&&(this.__start!==1&&n.setAttribute("start",String(this.__start)),this.__listType==="check"&&n.setAttribute("__lexicalListType","check")),{element:n}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(e,n,r){let i=r;for(let o=0;o<r.length;o++){const a=r[o];Sr(a)||(i===r&&(i=[...r]),i[o]=cc().append(!Rt(a)||tr(a)||a.isInline()?a:Yi(a.getTextContent())))}return super.splice(e,n,i)}extractWithChild(e){return Sr(e)}};function YQ(t,e,n){const r=[],i=[],o=e.list;if(o!==void 0){const a=o[`${n.__tag}Depth`]||[],s=JC(n)-1,u=s%a.length,f=a[u],g=o[n.__tag];let _;const w=o.nested,S=o.checklist;if(w!==void 0&&w.list&&(_=w.list),g!==void 0&&r.push(g),S!==void 0&&n.__listType==="check"&&r.push(S),f!==void 0){r.push(...E5(f));for(let E=0;E<a.length;E++)E!==u&&i.push(n.__tag+E)}if(_!==void 0){const E=E5(_);s>1?r.push(...E):i.push(...E)}}i.length>0&&PR(t,...i),r.length>0&&xf(t,...r)}function LRe(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];if(Sr(r)){e.push(r);const i=r.getChildren();i.length>1&&i.forEach((o=>{tr(o)&&e.push(GQ(o))}))}else e.push(GQ(r))}return e}function KQ(t){const e=t.nodeName.toLowerCase();let n=null;return e==="ol"?n=ac("number",t.start):e==="ul"&&(n=(function(r){if(r.getAttribute("__lexicallisttype")==="check"||r.classList.contains("contains-task-list"))return!0;for(const i of r.childNodes)if(qo(i)&&i.hasAttribute("aria-checked"))return!0;return!1})(t)?ac("check"):ac("bullet")),{after:LRe,node:n}}const $Re={ol:"number",ul:"bullet"};function ac(t="number",e=1){return nh(new ay(t,e))}function tr(t){return t instanceof ay}const KJ=Kn("INSERT_CHECK_LIST_COMMAND");function zRe(t){return $l(t.registerCommand(KJ,(()=>(w4("check"),!0)),mo),t.registerCommand(DN,(e=>tU(e,t,!1)),mo),t.registerCommand(IN,(e=>tU(e,t,!0)),mo),t.registerCommand(XT,(()=>{if(O4()!=null){const e=t.getRootElement();return e?.focus(),!0}return!1}),mo),t.registerCommand(LN,(e=>{const n=O4();return!(n==null||!t.isEditable())&&(t.update((()=>{const r=im(n);Sr(r)&&(e.preventDefault(),r.toggleChecked())})),!0)}),mo),t.registerCommand(RN,(e=>t.getEditorState().read((()=>{const n=sn();if(Ht(n)&&n.isCollapsed()){const{anchor:r}=n,i=r.type==="element";if(i||r.offset===0){const o=r.getNode(),a=mf(o,(s=>Rt(s)&&!s.isInline()));if(Sr(a)){const s=a.getParent();if(tr(s)&&s.getListType()==="check"&&(i||a.getFirstDescendant()===o)){const u=t.getElementByKey(a.__key);if(u!=null&&document.activeElement!==u)return u.focus(),e.preventDefault(),!0}}}}return!1}))),mo),t.registerRootListener(((e,n)=>{e!==null&&(e.addEventListener("click",JQ),e.addEventListener("pointerdown",eU)),n!==null&&(n.removeEventListener("click",JQ),n.removeEventListener("pointerdown",eU))})))}function JJ(t,e){const n=t.target;if(!qo(n))return;const r=n.firstChild;if(qo(r)&&(r.tagName==="UL"||r.tagName==="OL"))return;const i=n.parentNode;if(!i||i.__lexicalListType!=="check")return;const o=n.getBoundingClientRect(),a=JCe(n),s=t.clientX/a,u=window.getComputedStyle?window.getComputedStyle(n,"::before"):{width:"0px"},f=parseFloat(u.width),g=t.pointerType==="touch"?32:0;(n.dir==="rtl"?s<o.right+g&&s>o.right-f-g:s>o.left-g&&s<o.left+f+g)&&e()}function JQ(t){JJ(t,(()=>{if(qo(t.target)){const e=t.target,n=XN(e);n!=null&&n.isEditable()&&n.update((()=>{const r=im(e);Sr(r)&&(e.focus(),r.toggleChecked())}))}}))}function eU(t){JJ(t,(()=>{t.preventDefault()}))}function O4(){const t=document.activeElement;return qo(t)&&t.tagName==="LI"&&t.parentNode!=null&&t.parentNode.__lexicalListType==="check"?t:null}function tU(t,e,n){const r=O4();return r!=null&&e.update((()=>{const i=im(r);if(!Sr(i))return;const o=(function(a,s){let u=s?a.getPreviousSibling():a.getNextSibling(),f=a;for(;u==null&&Sr(f);)f=f.getParentOrThrow().getParent(),f!=null&&(u=s?f.getPreviousSibling():f.getNextSibling());for(;Sr(u);){const g=s?u.getLastChild():u.getFirstChild();if(!tr(g))return u;u=s?g.getLastChild():g.getFirstChild()}return null})(i,n);if(o!=null){o.selectStart();const a=e.getElementByKey(o.__key);a!=null&&(t.preventDefault(),setTimeout((()=>{a.focus()}),0))}})),!1}const NRe=Kn("UPDATE_LIST_START_COMMAND"),eee=Kn("INSERT_UNORDERED_LIST_COMMAND"),tee=Kn("INSERT_ORDERED_LIST_COMMAND"),nee=Kn("REMOVE_LIST_COMMAND");function BRe(t){return $l(t.registerCommand(tee,(()=>(w4("number"),!0)),mo),t.registerCommand(NRe,(e=>{const{listNodeKey:n,newStart:r}=e,i=Ii(n);return!!tr(i)&&(i.getListType()==="number"&&(i.setStart(r),YJ(i)),!0)}),mo),t.registerCommand(eee,(()=>(w4("bullet"),!0)),mo),t.registerCommand(nee,(()=>(ARe(),!0)),mo),t.registerCommand(QC,(()=>RRe()),mo),t.registerNodeTransform(sy,(e=>{const n=e.getFirstChild();if(n){if(hn(n)){const r=n.getStyle(),i=n.getFormat();e.getTextStyle()!==r&&e.setTextStyle(r),e.getTextFormat()!==i&&e.setTextFormat(i)}}else{const r=sn();Ht(r)&&(r.style!==e.getTextStyle()||r.format!==e.getTextFormat())&&r.isCollapsed()&&e.is(r.anchor.getNode())&&e.setTextStyle(r.style).setTextFormat(r.format)}})),t.registerNodeTransform(fm,(e=>{const n=e.getParent();if(Sr(n)&&e.is(n.getFirstChild())){const r=e.getStyle(),i=e.getFormat();r===n.getTextStyle()&&i===n.getTextFormat()||n.setTextStyle(r).setTextFormat(i)}})))}function FRe(t){const e=n=>{const r=n.getParent();if(tr(n.getFirstChild())||!tr(r))return;const i=mf(n,(o=>Sr(o)&&tr(o.getParent())&&Sr(o.getPreviousSibling())));if(i===null&&n.getIndent()>0)n.setIndent(0);else if(Sr(i)){const o=i.getPreviousSibling();if(Sr(o)){const a=(function(u){let f=u,g=f.getFirstChild();for(;tr(g);){const _=g.getLastChild();if(!Sr(_))break;f=_,g=f.getFirstChild()}return f})(o),s=a.getParent();if(tr(s)){const u=JC(s);u+1<JC(r)&&n.setIndent(u)}}}};return t.registerNodeTransform(ay,(n=>{const r=[n];for(;r.length>0;){const i=r.shift();if(tr(i)){for(const o of i.getChildren())if(Sr(o)){e(o);const a=o.getFirstChild();tr(a)&&r.push(a)}}}}))}function jRe(t){try{const e=t.anchor,n=t.focus,r=t.anchor.getNode(),i=t.focus.getNode();return r===i?r:t.isBackward()?FV(n)?r:i:FV(e)?r:i}catch{return null}}const VRe=["transform","perspective","filter","backdrop-filter","contain","container-type"],QRe=["layout","paint","strict","content"];function URe(t){let e=t?.parentElement;for(;e;){const n=window.getComputedStyle(e),i=n.willChange.split(",").map(a=>a.trim()).some(a=>VRe.includes(a));if(n.transform!=="none"||n.perspective!=="none"||n.filter!=="none"||n.backdropFilter!=="none"||QRe.includes(n.contain)||n.containerType!=="normal"||n.contentVisibility==="auto"||i)return e;e=e.parentElement}return null}function ree(t){const e=sn(),n=window.getSelection(),r=document.activeElement,i=t.getRootElement();if(e!==null&&n!==null&&i!==null&&i.contains(n.anchorNode)&&t.isEditable()){const o=n.getRangeAt(0);let a;if(n.isCollapsed){let u=n.anchorNode;u?.nodeType==3&&(u=u.parentNode),a=u.getBoundingClientRect(),a.width=0}else if(n.anchorNode===i){let u=i;for(;u.firstElementChild!=null;)u=u.firstElementChild;a=u.getBoundingClientRect()}else a=o.getBoundingClientRect();const s=URe(i);if(s){const u=s.getBoundingClientRect();return{top:Math.round(a.top-u.top),left:Math.round(a.left-u.left),width:Math.round(a.width),height:Math.round(a.height)}}return{top:Math.round(a.top),left:Math.round(a.left),width:Math.round(a.width),height:Math.round(a.height)}}else if(r?.className!=="link-input")return null;return null}function ZRe(t,e){let n="";return t.getEditorState().read(()=>{const r=sn();if(!r||!Ht(r)||r.isCollapsed())return;const i=r.getNodes();if(i.length===0)return;const o=new Set;i.forEach(u=>{let f=u;for(;f;){if(Iw(f)||Sr(f)||f.getType()==="paragraph"||f.getType()==="quote"){Rt(f)&&o.add(f);break}f=f.getParent()}});const a=o.size>0?Array.from(o):i;function s(u){if(Iw(u)){const f=parseInt(u.getTag().replace("h","")),_=u.getChildren().map(w=>s(w)).join("");return"#".repeat(f)+" "+_+`

`}else if(Sr(u)){const f=u.getParent(),g=f&&tr(f)&&f.getListType()==="number"?"1. ":"- ",w=u.getChildren().map(S=>s(S)).join("");return g+w+`
`}else{if(tr(u))return u.getChildren().map(g=>s(g)).join("")+`
`;if(hn(u)){let f=u.getTextContent();const g=u.getFormat();return g&16?`\`${f}\``:(g&1&&(f=`**${f}**`),g&2&&(f=`*${f}*`),g&4&&(f=`~~${f}~~`),f)}else if(Zc(u)){const f=u.getURL(),g=u.getTitle(),w=u.getChildren().map(S=>s(S)).join("");return g?`[${w}](${f} "${g}")`:`[${w}](${f})`}else if(Rt(u))return u.getChildren().map(g=>s(g)).join("")}return u.getTextContent()}n=a.map(u=>s(u)).join("")}),n.trim()}const qRe=({children:t})=>{const e=Es(id),n=se.useMemo(()=>[e,pY(null,$R)],[e]);return se.createElement(t5.Provider,{value:n},t)},WRe=()=>{const t=xs(),e=Ri(DJ),n=Ri(z5e),r=_=>{n(_),e(_?{current:_}:null)},[i,o,a,s,u,f,g]=Wo(d4,f4,FJ,jJ,QJ,p4,VJ);return se.createElement(se.Fragment,null,s.map((_,w)=>se.createElement(_,{key:w})),se.createElement(iee,{wrappers:u},se.createElement("div",{className:Gr(jt.rootContentEditableWrapper,"mdxeditor-root-contenteditable")},se.createElement(E8,{contentEditable:se.createElement("div",{ref:r},se.createElement(T8,{className:Gr(jt.contentEditable,i),ariaLabel:t("contentArea.editableMarkdown","editable markdown"),spellCheck:o})),placeholder:se.createElement("div",{className:Gr(jt.contentEditable,jt.placeholder,i)},se.createElement("p",null,f)),ErrorBoundary:k8}))),a.map((_,w)=>se.createElement(_,{key:w})),g.map((_,w)=>se.createElement(_,{key:w})))},HRe={listItemIndent:"one"},GRe=t=>iMe[t];function XRe(t,e,n={}){let r=e;for(const[i,o]of Object.entries(n))r=r.replaceAll(`{{${i}}}`,String(o));return r}const iee=({wrappers:t,children:e})=>{if(t.length===0)return se.createElement(se.Fragment,null,e);const n=t[0];return se.createElement(n,null,se.createElement(iee,{wrappers:t.slice(1)},e))},YRe=({children:t,className:e,overlayContainer:n})=>{const r=se.useRef(null),i=se.useRef(null),o=Ri(J0),a=Ri($5e);return se.useEffect(()=>{const s=document.createElement("div");return s.classList.add("mdxeditor-popup-container",jt.editorRoot,jt.popupContainer,...(e??"").trim().split(" ").filter(Boolean)),(n??document.body).appendChild(s),r.current=s,o(r),a(i),()=>{s.remove()}},[e,r,n,o,a]),se.createElement("div",{className:Gr("mdxeditor",jt.editorRoot,jt.editorWrapper,e),ref:i},t)},KRe=({mdxRef:t})=>{const e=_O();return se.useImperativeHandle(t,()=>({getMarkdown:()=>{const n=e.getValue(yb);return n==="source"||n==="diff"?e.getValue(vb):e.getValue(sm)},setMarkdown:n=>{e.pub(b8,n)},insertMarkdown:n=>{e.pub(LJ,n)},focus:(n,r)=>{var i;(i=e.getValue(id))==null||i.focus(n,r)},getContentEditableHTML:()=>{var n;return((n=e.getValue(DJ))==null?void 0:n.current.innerHTML)??""},getSelectionMarkdown:()=>{const n=e.getValue(yb);if(n==="source"||n==="diff")return"";const r=e.getValue(zo);return r?(e.getValue(lk),e.getValue(_8),e.getValue(C5),e.getValue(ck),e.getValue(FR),ZRe(r)):""}}),[e]),null},JRe=se.forwardRef((t,e)=>se.createElement(v2e,{plugins:[V5e({contentEditableClassName:t.contentEditableClassName??"",spellCheck:t.spellCheck??!0,initialMarkdown:t.markdown,onChange:t.onChange??E0,onBlur:t.onBlur??E0,toMarkdownOptions:t.toMarkdownOptions??HRe,autoFocus:t.autoFocus??!1,placeholder:t.placeholder??"",readOnly:!!t.readOnly,iconComponentFor:t.iconComponentFor??GRe,suppressHtmlProcessing:t.suppressHtmlProcessing??!1,onError:t.onError??E0,translation:t.translation??XRe,trim:t.trim??!0,lexicalTheme:t.lexicalTheme,..."editorState"in t?{editorState:t.editorState}:{},suppressSharedHistory:t.suppressSharedHistory??!1,additionalLexicalNodes:t.additionalLexicalNodes??[],lexicalEditorNamespace:t.lexicalEditorNamespace??"MDXEditor"}),...t.plugins??[]]},se.createElement(YRe,{className:t.className,overlayContainer:t.overlayContainer},se.createElement(qRe,null,se.createElement(WRe,null))),se.createElement(KRe,{mdxRef:e}))),oee=typeof window<"u"&&typeof window.document.createElement<"u",A5=oee&&(()=>{var t;const e=(t=navigator.userAgentData)==null?void 0:t.platform;return e?/mac/i.test(e):/Mac|iPod|iPhone|iPad/.test(navigator.userAgent)})();function eIe(t,e){return A5?t:e}const tIe={testLexicalNode:Iw,visitLexicalNode:({lexicalNode:t,actions:e})=>{const n=parseInt(t.getTag()[1],10);e.addAndStepInto("heading",{depth:n})}},nIe={testNode:"heading",visitNode:function({mdastNode:t,actions:e}){e.addAndStepInto(jp(`h${t.depth}`))}},rIe=["Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6"],see=[1,2,3,4,5,6],iIe={Digit1:1,Digit2:2,Digit3:3,Digit4:4,Digit5:5,Digit6:6},UR=kn(see,t=>{t.pub(jR,e=>e.registerCommand(cR,n=>{const{code:r,ctrlKey:i,metaKey:o,altKey:a}=n;return rIe.includes(r)&&eIe(o,i)&&a?(n.preventDefault(),e.update(()=>{if(r==="Digit0")t.pub(T5,()=>mi());else{const s=t.getValue(UR),u=iIe[r];s.includes(u)&&t.pub(T5,()=>jp(`h${u}`))}}),!0):!1},mo))}),oIe=Dl({init(t){t.pubIn({[EO]:"headings",[ed]:nIe,[kf]:ok,[Ef]:tIe})},update(t,e){t.pub(UR,e?.allowedHeadingLevels??see)}});function nU(t,e){return t.getEditorState().read((()=>{const n=Ii(e);return n!==null&&n.isSelected()}))}function aee(t){const[e]=Ll(),[n,r]=Q.useState((()=>nU(e,t)));return Q.useEffect((()=>{let i=!0;const o=e.registerUpdateListener((()=>{i&&r(nU(e,t))}));return()=>{i=!1,o()}}),[e,t]),[n,Q.useCallback((i=>{e.update((()=>{let o=sn();es(o)||(o=jN(),rs(o)),es(o)&&(i?o.add(t):o.delete(t))}))}),[e,t]),Q.useCallback((()=>{e.update((()=>{const i=sn();es(i)&&i.clear()}))}),[e])]}const lee=Kn("INSERT_HORIZONTAL_RULE_COMMAND");function sIe({nodeKey:t}){const[e]=Ll(),[n,r,i]=aee(t);return Q.useEffect((()=>$l(e.registerCommand(sR,(o=>{const a=e.getElementByKey(t);return o.target===a&&(o.shiftKey||i(),r(!n),!0)}),mo))),[i,e,n,t,r]),Q.useEffect((()=>{const o=e.getElementByKey(t),a=e._config.theme.hrSelected??"selected";o!==null&&(n?xf(o,a):PR(o,a))}),[e,n,t]),null}let hk=class cee extends ry{static getType(){return"horizontalrule"}static clone(e){return new cee(e.__key)}static importJSON(e){return AO().updateFromJSON(e)}static importDOM(){return{hr:()=>({conversion:aIe,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(e){const n=document.createElement("hr");return xf(n,e.theme.hr),n}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}decorate(){return J.jsx(sIe,{nodeKey:this.__key})}};function aIe(){return{node:AO()}}function AO(){return nh(new hk)}function P8(t){return t instanceof hk}function lIe(){const[t]=Ll();return Q.useEffect((()=>t.registerCommand(lee,(e=>{const n=sn();if(!Ht(n))return!1;if(n.focus.getNode()!==null){const r=AO();kK(r)}return!0}),Ar)),[t]),null}const cIe={testLexicalNode:P8,visitLexicalNode({actions:t}){t.addAndStepInto("thematicBreak")}},uIe={testNode:"thematicBreak",visitNode({actions:t}){t.addAndStepInto(AO())}},uee=dm(t=>{t.sub(t.pipe(uee,$o(zo)),([,e])=>{e?.dispatchCommand(lee,void 0)})}),hIe=Dl({init(t){t.pubIn({[EO]:"thematicBreak",[ed]:uIe,[kf]:hk,[Ef]:cIe,[$b]:lIe})}}),dIe={testNode:"list",visitNode:function({mdastNode:t,lexicalParent:e,actions:n}){const r=t.children.some(o=>typeof o.checked=="boolean")?"check":t.ordered?"number":"bullet",i=ac(r);if(Sr(e)){const o=cc();o.append(i),e.insertAfter(o)}else e.append(i);n.visitChildren(t,i)}},fIe={testNode:"listItem",visitNode({mdastNode:t,actions:e,lexicalParent:n}){const r=n.getListType()==="check"?t.checked??!1:void 0;e.addAndStepInto(cc(r))}},pIe={testLexicalNode:tr,visitLexicalNode:({lexicalNode:t,actions:e})=>{e.addAndStepInto("list",{ordered:t.getListType()==="number",spread:!1})}},mIe={testLexicalNode:Sr,visitLexicalNode:({lexicalNode:t,mdastParent:e,actions:n})=>{const r=t.getChildren(),i=r[0];if(r.length===1&&tr(i)){const o=e.children.at(-1);o?n.visitChildren(t,o):n.visitChildren(i,e)}else{const o=t.getParent(),a=n.appendToParent(e,{type:"listItem",checked:o.getListType()==="check"?!!t.getChecked():void 0,spread:!1,children:[]});let s=null;for(const u of t.getChildren())hn(u)||pf(u)||u.isInline()&&(Rt(u)||_i(u))?(s??(s=n.appendToParent(a,{type:"paragraph",children:[]})),n.visit(u,s)):(s=null,n.visit(u,a))}}};function gIe(t,e){return $l(t.registerCommand(hR,(n=>{const r=sn();if(!Ht(r))return!1;n.preventDefault();const i=(function(o){const a=o.getNodes();if(KCe(a,(w=>d5(w)&&w.canIndent()?w:null)).length>0)return!0;const s=o.anchor,u=o.focus,f=u.isBefore(s)?u:s,g=f.getNode(),_=Y$(g);if(_.canIndent()){const w=_.getKey();let S=wO();if(S.anchor.set(w,0,"element"),S.focus.set(w,0,"element"),S=lb(S),S.anchor.is(f))return!0}return!1})(r)?n.shiftKey?$$:u5:AY;return t.dispatchCommand(i,void 0)}),Ar),t.registerCommand(u5,(()=>{if(e==null)return!1;const n=sn();if(!Ht(n))return!1;const r=n.getNodes().map((i=>Y$(i).getIndent()));return Math.max(...r)+1>=e}),eh))}function rU({maxIndent:t}){const[e]=Ll();return Q.useEffect((()=>gIe(e,t)),[e,t]),null}function iU(){const[t]=Ll();return Q.useEffect((()=>zRe(t)),[t]),null}function oU({hasStrictIndent:t=!1}){const[e]=Ll();return Q.useEffect((()=>{if(!e.hasNodes([ay,sy]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[e]),Q.useEffect((()=>{if(t)return FRe(e)}),[e,t]),(function(n){Q.useEffect((()=>BRe(n)),[n])})(e),null}const yIe={name:"tasklistCheck",tokenize:_Ie};function vIe(){return{text:{91:yIe}}}function _Ie(t,e,n){const r=this;return i;function i(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),o)}function o(u){return Ci(u)?(t.enter("taskListCheckValueUnchecked"),t.consume(u),t.exit("taskListCheckValueUnchecked"),a):u===88||u===120?(t.enter("taskListCheckValueChecked"),t.consume(u),t.exit("taskListCheckValueChecked"),a):n(u)}function a(u){return u===93?(t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),s):n(u)}function s(u){return Sn(u)?e(u):pr(u)?t.check({tokenize:bIe},e,n)(u):n(u)}}function bIe(t,e,n){return Cr(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function xIe(){return{exit:{taskListCheckValueChecked:sU,taskListCheckValueUnchecked:sU,paragraph:OIe}}}function wIe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:SIe}}}function sU(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function OIe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let o=-1,a;for(;++o<i.length;){const s=i[o];if(s.type==="paragraph"){a=s;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function SIe(t,e,n,r){const i=t.children[0],o=typeof t.checked=="boolean"&&i&&i.type==="paragraph",a="["+(t.checked?"x":" ")+"] ",s=n.createTracker(r);o&&s.move(a);let u=f8.listItem(t,e,n,{...r,...s.current()});return o&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),u;function f(g){return g+a}}const CIe=new Map([["number",tee],["bullet",eee],["check",KJ],["",nee]]),S4=kn("",t=>{t.sub(t.pipe(Dw,$o(zo)),([e,n])=>{if(!e||!n)return;const r=e.anchor.getNode();let i=r.getKey()==="root"?r:mf(r,s=>{const u=s.getParent();return u!==null&&Ys(u)});i??(i=r.getTopLevelElementOrThrow());const o=i.getKey();if(n.getElementByKey(o)!==null)if(tr(i)){const s=TK(r,ay),u=s?s.getListType():i.getListType();t.pub(S4,u)}else t.pub(S4,"")})}),hee=bs(t=>{t.sub(t.pipe(hee,$o(zo)),([e,n])=>{n?.dispatchCommand(CIe.get(e),void 0)})}),TIe=Dl({init(t){var e;(e=t.getValue(id))==null||e.registerCommand(u5,()=>!EIe(7),eh),t.pubIn({[EO]:"lists",[zw]:xIe(),[$w]:vIe(),[ed]:[dIe,fIe],[kf]:[sy,ay],[Ef]:[pIe,mIe],[uk]:wIe(),[$b]:[rU,oU,iU],[S8]:[rU,oU,iU]})}});function kIe(t){const e=t.getNodes();return e.length===0?new Set([t.anchor.getNode().getParentOrThrow(),t.focus.getNode().getParentOrThrow()]):new Set(e.map(n=>Rt(n)?n:n.getParentOrThrow()))}function EIe(t){const e=sn();if(!Ht(e))return!1;const n=kIe(e);let r=0;for(const i of n)if(tr(i))r=Math.max(JC(i)+1,r);else if(Sr(i)){const o=i.getParent();if(o?.getChildren().length===1){const a=o.getParent();if(Sr(a)&&a.getChildren().length===1)return!1}if(!tr(o))throw new Error("ListMaxIndentLevelPlugin: A ListItemNode must have a ListNode for a parent.");r=Math.max(JC(o)+1,r)}return r<=t}function AIe(t){return t.length}function PIe(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||AIe,o=[],a=[],s=[],u=[];let f=0,g=-1;for(;++g<t.length;){const A=[],R=[];let $=-1;for(t[g].length>f&&(f=t[g].length);++$<t[g].length;){const z=MIe(t[g][$]);if(n.alignDelimiters!==!1){const B=i(z);R[$]=B,(u[$]===void 0||B>u[$])&&(u[$]=B)}A.push(z)}a[g]=A,s[g]=R}let _=-1;if(typeof r=="object"&&"length"in r)for(;++_<f;)o[_]=aU(r[_]);else{const A=aU(r);for(;++_<f;)o[_]=A}_=-1;const w=[],S=[];for(;++_<f;){const A=o[_];let R="",$="";A===99?(R=":",$=":"):A===108?R=":":A===114&&($=":");let z=n.alignDelimiters===!1?1:Math.max(1,u[_]-R.length-$.length);const B=R+"-".repeat(z)+$;n.alignDelimiters!==!1&&(z=R.length+z+$.length,z>u[_]&&(u[_]=z),S[_]=z),w[_]=B}a.splice(1,0,w),s.splice(1,0,S),g=-1;const E=[];for(;++g<a.length;){const A=a[g],R=s[g];_=-1;const $=[];for(;++_<f;){const z=A[_]||"";let B="",F="";if(n.alignDelimiters!==!1){const U=u[_]-(R[_]||0),q=o[_];q===114?B=" ".repeat(U):q===99?U%2?(B=" ".repeat(U/2+.5),F=" ".repeat(U/2-.5)):(B=" ".repeat(U/2),F=B):F=" ".repeat(U)}n.delimiterStart!==!1&&!_&&$.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&z==="")&&(n.delimiterStart!==!1||_)&&$.push(" "),n.alignDelimiters!==!1&&$.push(B),$.push(z),n.alignDelimiters!==!1&&$.push(F),n.padding!==!1&&$.push(" "),(n.delimiterEnd!==!1||_!==f-1)&&$.push("|")}E.push(n.delimiterEnd===!1?$.join("").replace(/ +$/,""):$.join(""))}return E.join(`
`)}function MIe(t){return t==null?"":String(t)}function aU(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function RIe(){return{enter:{table:IIe,tableData:lU,tableHeader:lU,tableRow:LIe},exit:{codeText:$Ie,table:DIe,tableData:iD,tableHeader:iD,tableRow:iD}}}function IIe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function DIe(t){this.exit(t),this.data.inTable=void 0}function LIe(t){this.enter({type:"tableRow",children:[]},t)}function iD(t){this.exit(t)}function lU(t){this.enter({type:"tableCell",children:[]},t)}function $Ie(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,zIe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function zIe(t,e){return e==="|"?e:t}function NIe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:w,table:a,tableCell:u,tableRow:s}};function a(S,E,A,R){return f(g(S,A,R),S.align)}function s(S,E,A,R){const $=_(S,A,R),z=f([$]);return z.slice(0,z.indexOf(`
`))}function u(S,E,A,R){const $=A.enter("tableCell"),z=A.enter("phrasing"),B=A.containerPhrasing(S,{...R,before:o,after:o});return z(),$(),B}function f(S,E){return PIe(S,{align:E,alignDelimiters:r,padding:n,stringLength:i})}function g(S,E,A){const R=S.children;let $=-1;const z=[],B=E.enter("table");for(;++$<R.length;)z[$]=_(R[$],E,A);return B(),z}function _(S,E,A){const R=S.children;let $=-1;const z=[],B=E.enter("tableRow");for(;++$<R.length;)z[$]=u(R[$],S,E,A);return B(),z}function w(S,E,A){let R=f8.inlineCode(S,E,A);return A.stack.includes("tableCell")&&(R=R.replace(/\|/g,"\\$&")),R}}class BIe{constructor(){this.map=[]}add(e,n,r){FIe(this,e,n,r)}consume(e){if(this.map.sort(function(o,a){return o[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const o of i)e.push(o);i=r.pop()}this.map.length=0}}function FIe(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function jIe(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function VIe(){return{flow:{null:{name:"table",tokenize:QIe,resolveAll:UIe}}}}function QIe(t,e,n){const r=this;let i=0,o=0,a;return s;function s(ce){let xe=r.events.length-1;for(;xe>-1;){const Te=r.events[xe][1].type;if(Te==="lineEnding"||Te==="linePrefix")xe--;else break}const re=xe>-1?r.events[xe][1].type:null,me=re==="tableHead"||re==="tableRow"?q:u;return me===q&&r.parser.lazy[r.now().line]?n(ce):me(ce)}function u(ce){return t.enter("tableHead"),t.enter("tableRow"),f(ce)}function f(ce){return ce===124||(a=!0,o+=1),g(ce)}function g(ce){return ce===null?n(ce):Sn(ce)?o>1?(o=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(ce),t.exit("lineEnding"),S):n(ce):pr(ce)?Cr(t,g,"whitespace")(ce):(o+=1,a&&(a=!1,i+=1),ce===124?(t.enter("tableCellDivider"),t.consume(ce),t.exit("tableCellDivider"),a=!0,g):(t.enter("data"),_(ce)))}function _(ce){return ce===null||ce===124||Ci(ce)?(t.exit("data"),g(ce)):(t.consume(ce),ce===92?w:_)}function w(ce){return ce===92||ce===124?(t.consume(ce),_):_(ce)}function S(ce){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(ce):(t.enter("tableDelimiterRow"),a=!1,pr(ce)?Cr(t,E,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ce):E(ce))}function E(ce){return ce===45||ce===58?R(ce):ce===124?(a=!0,t.enter("tableCellDivider"),t.consume(ce),t.exit("tableCellDivider"),A):U(ce)}function A(ce){return pr(ce)?Cr(t,R,"whitespace")(ce):R(ce)}function R(ce){return ce===58?(o+=1,a=!0,t.enter("tableDelimiterMarker"),t.consume(ce),t.exit("tableDelimiterMarker"),$):ce===45?(o+=1,$(ce)):ce===null||Sn(ce)?F(ce):U(ce)}function $(ce){return ce===45?(t.enter("tableDelimiterFiller"),z(ce)):U(ce)}function z(ce){return ce===45?(t.consume(ce),z):ce===58?(a=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(ce),t.exit("tableDelimiterMarker"),B):(t.exit("tableDelimiterFiller"),B(ce))}function B(ce){return pr(ce)?Cr(t,F,"whitespace")(ce):F(ce)}function F(ce){return ce===124?E(ce):ce===null||Sn(ce)?!a||i!==o?U(ce):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(ce)):U(ce)}function U(ce){return n(ce)}function q(ce){return t.enter("tableRow"),H(ce)}function H(ce){return ce===124?(t.enter("tableCellDivider"),t.consume(ce),t.exit("tableCellDivider"),H):ce===null||Sn(ce)?(t.exit("tableRow"),e(ce)):pr(ce)?Cr(t,H,"whitespace")(ce):(t.enter("data"),ne(ce))}function ne(ce){return ce===null||ce===124||Ci(ce)?(t.exit("data"),H(ce)):(t.consume(ce),ce===92?ie:ne)}function ie(ce){return ce===92||ce===124?(t.consume(ce),ne):ne(ce)}}function UIe(t,e){let n=-1,r=!0,i=0,o=[0,0,0,0],a=[0,0,0,0],s=!1,u=0,f,g,_;const w=new BIe;for(;++n<t.length;){const S=t[n],E=S[1];S[0]==="enter"?E.type==="tableHead"?(s=!1,u!==0&&(cU(w,e,u,f,g),g=void 0,u=0),f={type:"table",start:Object.assign({},E.start),end:Object.assign({},E.end)},w.add(n,0,[["enter",f,e]])):E.type==="tableRow"||E.type==="tableDelimiterRow"?(r=!0,_=void 0,o=[0,0,0,0],a=[0,n+1,0,0],s&&(s=!1,g={type:"tableBody",start:Object.assign({},E.start),end:Object.assign({},E.end)},w.add(n,0,[["enter",g,e]])),i=E.type==="tableDelimiterRow"?2:g?3:1):i&&(E.type==="data"||E.type==="tableDelimiterMarker"||E.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(o[1]!==0&&(a[0]=a[1],_=oA(w,e,o,i,void 0,_),o=[0,0,0,0]),a[2]=n)):E.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(a[0]=a[1],_=oA(w,e,o,i,void 0,_)),o=a,a=[o[1],n,0,0])):E.type==="tableHead"?(s=!0,u=n):E.type==="tableRow"||E.type==="tableDelimiterRow"?(u=n,o[1]!==0?(a[0]=a[1],_=oA(w,e,o,i,n,_)):a[1]!==0&&(_=oA(w,e,a,i,n,_)),i=0):i&&(E.type==="data"||E.type==="tableDelimiterMarker"||E.type==="tableDelimiterFiller")&&(a[3]=n)}for(u!==0&&cU(w,e,u,f,g),w.consume(e.events),n=-1;++n<e.events.length;){const S=e.events[n];S[0]==="enter"&&S[1].type==="table"&&(S[1]._align=jIe(e.events,n))}return t}function oA(t,e,n,r,i,o){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",s="tableContent";n[0]!==0&&(o.end=Object.assign({},D1(e.events,n[0])),t.add(n[0],0,[["exit",o,e]]));const u=D1(e.events,n[1]);if(o={type:a,start:Object.assign({},u),end:Object.assign({},u)},t.add(n[1],0,[["enter",o,e]]),n[2]!==0){const f=D1(e.events,n[2]),g=D1(e.events,n[3]),_={type:s,start:Object.assign({},f),end:Object.assign({},g)};if(t.add(n[2],0,[["enter",_,e]]),r!==2){const w=e.events[n[2]],S=e.events[n[3]];if(w[1].end=Object.assign({},S[1].end),w[1].type="chunkText",w[1].contentType="text",n[3]>n[2]+1){const E=n[2]+1,A=n[3]-n[2]-1;t.add(E,A,[])}}t.add(n[3]+1,0,[["exit",_,e]])}return i!==void 0&&(o.end=Object.assign({},D1(e.events,i)),t.add(i,0,[["exit",o,e]]),o=void 0),o}function cU(t,e,n,r,i){const o=[],a=D1(e.events,n);i&&(i.end=Object.assign({},a),o.push(["exit",i,e])),r.end=Object.assign({},a),o.push(["exit",r,e]),t.add(n+1,0,o)}function D1(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const uU=[["Cat","rgb(125, 50, 0)"],["Dog","rgb(100, 0, 0)"],["Rabbit","rgb(150, 0, 0)"],["Frog","rgb(200, 0, 0)"],["Fox","rgb(200, 75, 0)"],["Hedgehog","rgb(0, 75, 0)"],["Pigeon","rgb(0, 125, 0)"],["Squirrel","rgb(75, 100, 0)"],["Bear","rgb(125, 100, 0)"],["Tiger","rgb(0, 0, 150)"],["Leopard","rgb(0, 0, 200)"],["Zebra","rgb(0, 0, 250)"],["Wolf","rgb(0, 100, 150)"],["Owl","rgb(0, 100, 100)"],["Gull","rgb(100, 0, 100)"],["Squid","rgb(150, 0, 150)"]],hU=uU[Math.floor(Math.random()*uU.length)],ZIe=Q.createContext({clientID:0,color:hU[1],isCollabActive:!1,name:hU[0],yjsDocMap:new Map});function qIe(t,e){return Q.useContext(ZIe)}function dU(t){const e=new Set,{ownNodeConfig:n}=kR(t),r=t.transform();if(n){const i=n.$transform;i&&e.add(i)}return r&&e.add(r),e}function dee({initialEditor:t,children:e,initialNodes:n,initialTheme:r,skipCollabChecks:i,skipEditableListener:o}){const a=Q.useRef(!1),s=Q.useContext(t5);s==null&&(function(E,...A){const R=new URL("https://lexical.dev/docs/error"),$=new URLSearchParams;$.append("code",E);for(const z of A)$.append("v",z);throw R.search=$.toString(),Error(`Minified Lexical error #${E}; visit ${R.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(9);const[u,{getTheme:f}]=s,g=Q.useMemo((()=>{const E=r||f()||void 0,A=pY(s,E);E!==void 0&&(t._config.theme=E),t._parentEditor=t._parentEditor||u;const R=t._createEditorArgs,$=R&&R.namespace;if(n){$||(t._config.namespace=u._config.namespace);for(let z of n){let B=null,F=null;if(typeof z!="function"){const q=z;z=q.replace,B=q.with,F=q.withKlass||null}const U=wR(t,z.getType());t._nodes.set(z.getType(),{exportDOM:U?U.exportDOM:void 0,klass:z,replace:B,replaceWithKlass:F,sharedNodeState:k$(z),transforms:dU(z)})}}else if(R&&R.nodes)$||(t._config.namespace=u._config.namespace);else{const z=t._nodes=new Map(u._nodes);$||(t._config.namespace=u._config.namespace);for(const[B,F]of z)t._nodes.set(B,{exportDOM:F.exportDOM,klass:F.klass,replace:F.replace,replaceWithKlass:F.replaceWithKlass,sharedNodeState:k$(F.klass),transforms:dU(F.klass)})}return[t,A]}),[]),{isCollabActive:_,yjsDocMap:w}=qIe(),S=i||a.current||w.has(t.getKey());return Q.useEffect((()=>{S&&(a.current=!0)}),[S]),Q.useEffect((()=>{if(!o){const E=A=>t.setEditable(A);return E(u.isEditable()),u.registerEditableListener(E)}}),[t,u,o]),J.jsx(t5.Provider,{value:g,children:!_||S?e:null})}function wr(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function fU(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function fee(...t){return e=>{let n=!1;const r=t.map(i=>{const o=fU(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():fU(t[i],null)}}}}function ko(...t){return Q.useCallback(fee(...t),t)}function WIe(t,e){const n=Q.createContext(e),r=o=>{const{children:a,...s}=o,u=Q.useMemo(()=>s,Object.values(s));return J.jsx(n.Provider,{value:u,children:a})};r.displayName=t+"Provider";function i(o){const a=Q.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,i]}function ly(t,e=[]){let n=[];function r(o,a){const s=Q.createContext(a),u=n.length;n=[...n,a];const f=_=>{const{scope:w,children:S,...E}=_,A=w?.[t]?.[u]||s,R=Q.useMemo(()=>E,Object.values(E));return J.jsx(A.Provider,{value:R,children:S})};f.displayName=o+"Provider";function g(_,w){const S=w?.[t]?.[u]||s,E=Q.useContext(S);if(E)return E;if(a!==void 0)return a;throw new Error(`\`${_}\` must be used within \`${o}\``)}return[f,g]}const i=()=>{const o=n.map(a=>Q.createContext(a));return function(s){const u=s?.[t]||o;return Q.useMemo(()=>({[`__scope${t}`]:{...s,[t]:u}}),[s,u])}};return i.scopeName=t,[r,HIe(i,...e)]}function HIe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:u,scopeName:f})=>{const _=u(o)[`__scope${f}`];return{...s,..._}},{});return Q.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Bw(t){const e=GIe(t),n=Q.forwardRef((r,i)=>{const{children:o,...a}=r,s=Q.Children.toArray(o),u=s.find(YIe);if(u){const f=u.props.children,g=s.map(_=>_===u?Q.Children.count(f)>1?Q.Children.only(null):Q.isValidElement(f)?f.props.children:null:_);return J.jsx(e,{...a,ref:i,children:Q.isValidElement(f)?Q.cloneElement(f,void 0,g):null})}return J.jsx(e,{...a,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}function GIe(t){const e=Q.forwardRef((n,r)=>{const{children:i,...o}=n;if(Q.isValidElement(i)){const a=JIe(i),s=KIe(o,i.props);return i.type!==Q.Fragment&&(s.ref=r?fee(r,a):a),Q.cloneElement(i,s)}return Q.Children.count(i)>1?Q.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var pee=Symbol("radix.slottable");function XIe(t){const e=({children:n})=>J.jsx(J.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=pee,e}function YIe(t){return Q.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===pee}function KIe(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...s)=>{const u=o(...s);return i(...s),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function JIe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var e3e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qr=e3e.reduce((t,e)=>{const n=Bw(`Primitive.${e}`),r=Q.forwardRef((i,o)=>{const{asChild:a,...s}=i,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),J.jsx(u,{...s,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function t3e(t,e){t&&tm.flushSync(()=>t.dispatchEvent(e))}function B0(t){const e=Q.useRef(t);return Q.useEffect(()=>{e.current=t}),Q.useMemo(()=>(...n)=>e.current?.(...n),[])}function n3e(t,e=globalThis?.document){const n=B0(t);Q.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var r3e="DismissableLayer",C4="dismissableLayer.update",i3e="dismissableLayer.pointerDownOutside",o3e="dismissableLayer.focusOutside",pU,mee=Q.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dk=Q.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:s,...u}=t,f=Q.useContext(mee),[g,_]=Q.useState(null),w=g?.ownerDocument??globalThis?.document,[,S]=Q.useState({}),E=ko(e,H=>_(H)),A=Array.from(f.layers),[R]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),$=A.indexOf(R),z=g?A.indexOf(g):-1,B=f.layersWithOutsidePointerEventsDisabled.size>0,F=z>=$,U=l3e(H=>{const ne=H.target,ie=[...f.branches].some(ce=>ce.contains(ne));!F||ie||(i?.(H),a?.(H),H.defaultPrevented||s?.())},w),q=c3e(H=>{const ne=H.target;[...f.branches].some(ce=>ce.contains(ne))||(o?.(H),a?.(H),H.defaultPrevented||s?.())},w);return n3e(H=>{z===f.layers.size-1&&(r?.(H),!H.defaultPrevented&&s&&(H.preventDefault(),s()))},w),Q.useEffect(()=>{if(g)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(pU=w.body.style.pointerEvents,w.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),mU(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(w.body.style.pointerEvents=pU)}},[g,w,n,f]),Q.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),mU())},[g,f]),Q.useEffect(()=>{const H=()=>S({});return document.addEventListener(C4,H),()=>document.removeEventListener(C4,H)},[]),J.jsx(Qr.div,{...u,ref:E,style:{pointerEvents:B?F?"auto":"none":void 0,...t.style},onFocusCapture:wr(t.onFocusCapture,q.onFocusCapture),onBlurCapture:wr(t.onBlurCapture,q.onBlurCapture),onPointerDownCapture:wr(t.onPointerDownCapture,U.onPointerDownCapture)})});dk.displayName=r3e;var s3e="DismissableLayerBranch",a3e=Q.forwardRef((t,e)=>{const n=Q.useContext(mee),r=Q.useRef(null),i=ko(e,r);return Q.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),J.jsx(Qr.div,{...t,ref:i})});a3e.displayName=s3e;function l3e(t,e=globalThis?.document){const n=B0(t),r=Q.useRef(!1),i=Q.useRef(()=>{});return Q.useEffect(()=>{const o=s=>{if(s.target&&!r.current){let u=function(){gee(i3e,n,f,{discrete:!0})};const f={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function c3e(t,e=globalThis?.document){const n=B0(t),r=Q.useRef(!1);return Q.useEffect(()=>{const i=o=>{o.target&&!r.current&&gee(o3e,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function mU(){const t=new CustomEvent(C4);document.dispatchEvent(t)}function gee(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?t3e(i,o):i.dispatchEvent(o)}var oD=0;function M8(){Q.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??gU()),document.body.insertAdjacentElement("beforeend",t[1]??gU()),oD++,()=>{oD===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),oD--}},[])}function gU(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var sD="focusScope.autoFocusOnMount",aD="focusScope.autoFocusOnUnmount",yU={bubbles:!1,cancelable:!0},u3e="FocusScope",ZR=Q.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...a}=t,[s,u]=Q.useState(null),f=B0(i),g=B0(o),_=Q.useRef(null),w=ko(e,A=>u(A)),S=Q.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Q.useEffect(()=>{if(r){let A=function(B){if(S.paused||!s)return;const F=B.target;s.contains(F)?_.current=F:m0(_.current,{select:!0})},R=function(B){if(S.paused||!s)return;const F=B.relatedTarget;F!==null&&(s.contains(F)||m0(_.current,{select:!0}))},$=function(B){if(document.activeElement===document.body)for(const U of B)U.removedNodes.length>0&&m0(s)};document.addEventListener("focusin",A),document.addEventListener("focusout",R);const z=new MutationObserver($);return s&&z.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",A),document.removeEventListener("focusout",R),z.disconnect()}}},[r,s,S.paused]),Q.useEffect(()=>{if(s){_U.add(S);const A=document.activeElement;if(!s.contains(A)){const $=new CustomEvent(sD,yU);s.addEventListener(sD,f),s.dispatchEvent($),$.defaultPrevented||(h3e(g3e(yee(s)),{select:!0}),document.activeElement===A&&m0(s))}return()=>{s.removeEventListener(sD,f),setTimeout(()=>{const $=new CustomEvent(aD,yU);s.addEventListener(aD,g),s.dispatchEvent($),$.defaultPrevented||m0(A??document.body,{select:!0}),s.removeEventListener(aD,g),_U.remove(S)},0)}}},[s,f,g,S]);const E=Q.useCallback(A=>{if(!n&&!r||S.paused)return;const R=A.key==="Tab"&&!A.altKey&&!A.ctrlKey&&!A.metaKey,$=document.activeElement;if(R&&$){const z=A.currentTarget,[B,F]=d3e(z);B&&F?!A.shiftKey&&$===F?(A.preventDefault(),n&&m0(B,{select:!0})):A.shiftKey&&$===B&&(A.preventDefault(),n&&m0(F,{select:!0})):$===z&&A.preventDefault()}},[n,r,S.paused]);return J.jsx(Qr.div,{tabIndex:-1,...a,ref:w,onKeyDown:E})});ZR.displayName=u3e;function h3e(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(m0(r,{select:e}),document.activeElement!==n)return}function d3e(t){const e=yee(t),n=vU(e,t),r=vU(e.reverse(),t);return[n,r]}function yee(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function vU(t,e){for(const n of t)if(!f3e(n,{upTo:e}))return n}function f3e(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function p3e(t){return t instanceof HTMLInputElement&&"select"in t}function m0(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&p3e(t)&&e&&t.select()}}var _U=m3e();function m3e(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=bU(t,e),t.unshift(e)},remove(e){t=bU(t,e),t[0]?.resume()}}}function bU(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function g3e(t){return t.filter(e=>e.tagName!=="A")}var Il=globalThis?.document?Q.useLayoutEffect:()=>{},y3e=OC[" useId ".trim().toString()]||(()=>{}),v3e=0;function Bg(t){const[e,n]=Q.useState(y3e());return Il(()=>{n(r=>r??String(v3e++))},[t]),t||(e?`radix-${e}`:"")}const _3e=["top","right","bottom","left"],F0=Math.min,Nu=Math.max,P5=Math.round,sA=Math.floor,Kp=t=>({x:t,y:t}),b3e={left:"right",right:"left",bottom:"top",top:"bottom"},x3e={start:"end",end:"start"};function T4(t,e,n){return Nu(t,F0(e,n))}function Gg(t,e){return typeof t=="function"?t(e):t}function Xg(t){return t.split("-")[0]}function PO(t){return t.split("-")[1]}function R8(t){return t==="x"?"y":"x"}function I8(t){return t==="y"?"height":"width"}const w3e=new Set(["top","bottom"]);function Vp(t){return w3e.has(Xg(t))?"y":"x"}function D8(t){return R8(Vp(t))}function O3e(t,e,n){n===void 0&&(n=!1);const r=PO(t),i=D8(t),o=I8(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=M5(a)),[a,M5(a)]}function S3e(t){const e=M5(t);return[k4(t),e,k4(e)]}function k4(t){return t.replace(/start|end/g,e=>x3e[e])}const xU=["left","right"],wU=["right","left"],C3e=["top","bottom"],T3e=["bottom","top"];function k3e(t,e,n){switch(t){case"top":case"bottom":return n?e?wU:xU:e?xU:wU;case"left":case"right":return e?C3e:T3e;default:return[]}}function E3e(t,e,n,r){const i=PO(t);let o=k3e(Xg(t),n==="start",r);return i&&(o=o.map(a=>a+"-"+i),e&&(o=o.concat(o.map(k4)))),o}function M5(t){return t.replace(/left|right|bottom|top/g,e=>b3e[e])}function A3e(t){return{top:0,right:0,bottom:0,left:0,...t}}function vee(t){return typeof t!="number"?A3e(t):{top:t,right:t,bottom:t,left:t}}function R5(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function OU(t,e,n){let{reference:r,floating:i}=t;const o=Vp(e),a=D8(e),s=I8(a),u=Xg(e),f=o==="y",g=r.x+r.width/2-i.width/2,_=r.y+r.height/2-i.height/2,w=r[s]/2-i[s]/2;let S;switch(u){case"top":S={x:g,y:r.y-i.height};break;case"bottom":S={x:g,y:r.y+r.height};break;case"right":S={x:r.x+r.width,y:_};break;case"left":S={x:r.x-i.width,y:_};break;default:S={x:r.x,y:r.y}}switch(PO(e)){case"start":S[a]-=w*(n&&f?-1:1);break;case"end":S[a]+=w*(n&&f?-1:1);break}return S}const P3e=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let f=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:g,y:_}=OU(f,r,u),w=r,S={},E=0;for(let A=0;A<s.length;A++){const{name:R,fn:$}=s[A],{x:z,y:B,data:F,reset:U}=await $({x:g,y:_,initialPlacement:r,placement:w,strategy:i,middlewareData:S,rects:f,platform:a,elements:{reference:t,floating:e}});g=z??g,_=B??_,S={...S,[R]:{...S[R],...F}},U&&E<=50&&(E++,typeof U=="object"&&(U.placement&&(w=U.placement),U.rects&&(f=U.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):U.rects),{x:g,y:_}=OU(f,w,u)),A=-1)}return{x:g,y:_,placement:w,strategy:i,middlewareData:S}};async function eT(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:g="viewport",elementContext:_="floating",altBoundary:w=!1,padding:S=0}=Gg(e,t),E=vee(S),R=s[w?_==="floating"?"reference":"floating":_],$=R5(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(R)))==null||n?R:R.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:f,rootBoundary:g,strategy:u})),z=_==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,B=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),F=await(o.isElement==null?void 0:o.isElement(B))?await(o.getScale==null?void 0:o.getScale(B))||{x:1,y:1}:{x:1,y:1},U=R5(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:z,offsetParent:B,strategy:u}):z);return{top:($.top-U.top+E.top)/F.y,bottom:(U.bottom-$.bottom+E.bottom)/F.y,left:($.left-U.left+E.left)/F.x,right:(U.right-$.right+E.right)/F.x}}const M3e=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:a,elements:s,middlewareData:u}=e,{element:f,padding:g=0}=Gg(t,e)||{};if(f==null)return{};const _=vee(g),w={x:n,y:r},S=D8(i),E=I8(S),A=await a.getDimensions(f),R=S==="y",$=R?"top":"left",z=R?"bottom":"right",B=R?"clientHeight":"clientWidth",F=o.reference[E]+o.reference[S]-w[S]-o.floating[E],U=w[S]-o.reference[S],q=await(a.getOffsetParent==null?void 0:a.getOffsetParent(f));let H=q?q[B]:0;(!H||!await(a.isElement==null?void 0:a.isElement(q)))&&(H=s.floating[B]||o.floating[E]);const ne=F/2-U/2,ie=H/2-A[E]/2-1,ce=F0(_[$],ie),xe=F0(_[z],ie),re=ce,me=H-A[E]-xe,Te=H/2-A[E]/2+ne,ye=T4(re,Te,me),_e=!u.arrow&&PO(i)!=null&&Te!==ye&&o.reference[E]/2-(Te<re?ce:xe)-A[E]/2<0,ke=_e?Te<re?Te-re:Te-me:0;return{[S]:w[S]+ke,data:{[S]:ye,centerOffset:Te-ye-ke,..._e&&{alignmentOffset:ke}},reset:_e}}}),R3e=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:u,elements:f}=e,{mainAxis:g=!0,crossAxis:_=!0,fallbackPlacements:w,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:A=!0,...R}=Gg(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const $=Xg(i),z=Vp(s),B=Xg(s)===s,F=await(u.isRTL==null?void 0:u.isRTL(f.floating)),U=w||(B||!A?[M5(s)]:S3e(s)),q=E!=="none";!w&&q&&U.push(...E3e(s,A,E,F));const H=[s,...U],ne=await eT(e,R),ie=[];let ce=((r=o.flip)==null?void 0:r.overflows)||[];if(g&&ie.push(ne[$]),_){const Te=O3e(i,a,F);ie.push(ne[Te[0]],ne[Te[1]])}if(ce=[...ce,{placement:i,overflows:ie}],!ie.every(Te=>Te<=0)){var xe,re;const Te=(((xe=o.flip)==null?void 0:xe.index)||0)+1,ye=H[Te];if(ye&&(!(_==="alignment"?z!==Vp(ye):!1)||ce.every(Ne=>Vp(Ne.placement)===z?Ne.overflows[0]>0:!0)))return{data:{index:Te,overflows:ce},reset:{placement:ye}};let _e=(re=ce.filter(ke=>ke.overflows[0]<=0).sort((ke,Ne)=>ke.overflows[1]-Ne.overflows[1])[0])==null?void 0:re.placement;if(!_e)switch(S){case"bestFit":{var me;const ke=(me=ce.filter(Ne=>{if(q){const Qe=Vp(Ne.placement);return Qe===z||Qe==="y"}return!0}).map(Ne=>[Ne.placement,Ne.overflows.filter(Qe=>Qe>0).reduce((Qe,Se)=>Qe+Se,0)]).sort((Ne,Qe)=>Ne[1]-Qe[1])[0])==null?void 0:me[0];ke&&(_e=ke);break}case"initialPlacement":_e=s;break}if(i!==_e)return{reset:{placement:_e}}}return{}}}};function SU(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function CU(t){return _3e.some(e=>t[e]>=0)}const I3e=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Gg(t,e);switch(r){case"referenceHidden":{const o=await eT(e,{...i,elementContext:"reference"}),a=SU(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:CU(a)}}}case"escaped":{const o=await eT(e,{...i,altBoundary:!0}),a=SU(o,n.floating);return{data:{escapedOffsets:a,escaped:CU(a)}}}default:return{}}}}},_ee=new Set(["left","top"]);async function D3e(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=Xg(n),s=PO(n),u=Vp(n)==="y",f=_ee.has(a)?-1:1,g=o&&u?-1:1,_=Gg(e,t);let{mainAxis:w,crossAxis:S,alignmentAxis:E}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:_.mainAxis||0,crossAxis:_.crossAxis||0,alignmentAxis:_.alignmentAxis};return s&&typeof E=="number"&&(S=s==="end"?E*-1:E),u?{x:S*g,y:w*f}:{x:w*f,y:S*g}}const L3e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:a,middlewareData:s}=e,u=await D3e(e,t);return a===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:o+u.y,data:{...u,placement:a}}}}},$3e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:R=>{let{x:$,y:z}=R;return{x:$,y:z}}},...u}=Gg(t,e),f={x:n,y:r},g=await eT(e,u),_=Vp(Xg(i)),w=R8(_);let S=f[w],E=f[_];if(o){const R=w==="y"?"top":"left",$=w==="y"?"bottom":"right",z=S+g[R],B=S-g[$];S=T4(z,S,B)}if(a){const R=_==="y"?"top":"left",$=_==="y"?"bottom":"right",z=E+g[R],B=E-g[$];E=T4(z,E,B)}const A=s.fn({...e,[w]:S,[_]:E});return{...A,data:{x:A.x-n,y:A.y-r,enabled:{[w]:o,[_]:a}}}}}},z3e=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:a}=e,{offset:s=0,mainAxis:u=!0,crossAxis:f=!0}=Gg(t,e),g={x:n,y:r},_=Vp(i),w=R8(_);let S=g[w],E=g[_];const A=Gg(s,e),R=typeof A=="number"?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(u){const B=w==="y"?"height":"width",F=o.reference[w]-o.floating[B]+R.mainAxis,U=o.reference[w]+o.reference[B]-R.mainAxis;S<F?S=F:S>U&&(S=U)}if(f){var $,z;const B=w==="y"?"width":"height",F=_ee.has(Xg(i)),U=o.reference[_]-o.floating[B]+(F&&(($=a.offset)==null?void 0:$[_])||0)+(F?0:R.crossAxis),q=o.reference[_]+o.reference[B]+(F?0:((z=a.offset)==null?void 0:z[_])||0)-(F?R.crossAxis:0);E<U?E=U:E>q&&(E=q)}return{[w]:S,[_]:E}}}},N3e=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:a,elements:s}=e,{apply:u=()=>{},...f}=Gg(t,e),g=await eT(e,f),_=Xg(i),w=PO(i),S=Vp(i)==="y",{width:E,height:A}=o.floating;let R,$;_==="top"||_==="bottom"?(R=_,$=w===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):($=_,R=w==="end"?"top":"bottom");const z=A-g.top-g.bottom,B=E-g.left-g.right,F=F0(A-g[R],z),U=F0(E-g[$],B),q=!e.middlewareData.shift;let H=F,ne=U;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(ne=B),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(H=z),q&&!w){const ce=Nu(g.left,0),xe=Nu(g.right,0),re=Nu(g.top,0),me=Nu(g.bottom,0);S?ne=E-2*(ce!==0||xe!==0?ce+xe:Nu(g.left,g.right)):H=A-2*(re!==0||me!==0?re+me:Nu(g.top,g.bottom))}await u({...e,availableWidth:ne,availableHeight:H});const ie=await a.getDimensions(s.floating);return E!==ie.width||A!==ie.height?{reset:{rects:!0}}:{}}}};function qR(){return typeof window<"u"}function MO(t){return bee(t)?(t.nodeName||"").toLowerCase():"#document"}function Gu(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function pm(t){var e;return(e=(bee(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function bee(t){return qR()?t instanceof Node||t instanceof Gu(t).Node:!1}function wf(t){return qR()?t instanceof Element||t instanceof Gu(t).Element:!1}function am(t){return qR()?t instanceof HTMLElement||t instanceof Gu(t).HTMLElement:!1}function TU(t){return!qR()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Gu(t).ShadowRoot}const B3e=new Set(["inline","contents"]);function fk(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Of(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!B3e.has(i)}const F3e=new Set(["table","td","th"]);function j3e(t){return F3e.has(MO(t))}const V3e=[":popover-open",":modal"];function WR(t){return V3e.some(e=>{try{return t.matches(e)}catch{return!1}})}const Q3e=["transform","translate","scale","rotate","perspective"],U3e=["transform","translate","scale","rotate","perspective","filter"],Z3e=["paint","layout","strict","content"];function L8(t){const e=$8(),n=wf(t)?Of(t):t;return Q3e.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||U3e.some(r=>(n.willChange||"").includes(r))||Z3e.some(r=>(n.contain||"").includes(r))}function q3e(t){let e=j0(t);for(;am(e)&&!Fw(e);){if(L8(e))return e;if(WR(e))return null;e=j0(e)}return null}function $8(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const W3e=new Set(["html","body","#document"]);function Fw(t){return W3e.has(MO(t))}function Of(t){return Gu(t).getComputedStyle(t)}function HR(t){return wf(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function j0(t){if(MO(t)==="html")return t;const e=t.assignedSlot||t.parentNode||TU(t)&&t.host||pm(t);return TU(e)?e.host:e}function xee(t){const e=j0(t);return Fw(e)?t.ownerDocument?t.ownerDocument.body:t.body:am(e)&&fk(e)?e:xee(e)}function tT(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=xee(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),a=Gu(i);if(o){const s=E4(a);return e.concat(a,a.visualViewport||[],fk(i)?i:[],s&&n?tT(s):[])}return e.concat(i,tT(i,[],n))}function E4(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function wee(t){const e=Of(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=am(t),o=i?t.offsetWidth:n,a=i?t.offsetHeight:r,s=P5(n)!==o||P5(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function z8(t){return wf(t)?t:t.contextElement}function ow(t){const e=z8(t);if(!am(e))return Kp(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=wee(e);let a=(o?P5(n.width):n.width)/r,s=(o?P5(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const H3e=Kp(0);function Oee(t){const e=Gu(t);return!$8()||!e.visualViewport?H3e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function G3e(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Gu(t)?!1:e}function bb(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=z8(t);let a=Kp(1);e&&(r?wf(r)&&(a=ow(r)):a=ow(t));const s=G3e(o,n,r)?Oee(o):Kp(0);let u=(i.left+s.x)/a.x,f=(i.top+s.y)/a.y,g=i.width/a.x,_=i.height/a.y;if(o){const w=Gu(o),S=r&&wf(r)?Gu(r):r;let E=w,A=E4(E);for(;A&&r&&S!==E;){const R=ow(A),$=A.getBoundingClientRect(),z=Of(A),B=$.left+(A.clientLeft+parseFloat(z.paddingLeft))*R.x,F=$.top+(A.clientTop+parseFloat(z.paddingTop))*R.y;u*=R.x,f*=R.y,g*=R.x,_*=R.y,u+=B,f+=F,E=Gu(A),A=E4(E)}}return R5({width:g,height:_,x:u,y:f})}function GR(t,e){const n=HR(t).scrollLeft;return e?e.left+n:bb(pm(t)).left+n}function See(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-GR(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function X3e(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",a=pm(r),s=e?WR(e.floating):!1;if(r===a||s&&o)return n;let u={scrollLeft:0,scrollTop:0},f=Kp(1);const g=Kp(0),_=am(r);if((_||!_&&!o)&&((MO(r)!=="body"||fk(a))&&(u=HR(r)),am(r))){const S=bb(r);f=ow(r),g.x=S.x+r.clientLeft,g.y=S.y+r.clientTop}const w=a&&!_&&!o?See(a,u):Kp(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-u.scrollLeft*f.x+g.x+w.x,y:n.y*f.y-u.scrollTop*f.y+g.y+w.y}}function Y3e(t){return Array.from(t.getClientRects())}function K3e(t){const e=pm(t),n=HR(t),r=t.ownerDocument.body,i=Nu(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Nu(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+GR(t);const s=-n.scrollTop;return Of(r).direction==="rtl"&&(a+=Nu(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}const kU=25;function J3e(t,e){const n=Gu(t),r=pm(t),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,u=0;if(i){o=i.width,a=i.height;const g=$8();(!g||g&&e==="fixed")&&(s=i.offsetLeft,u=i.offsetTop)}const f=GR(r);if(f<=0){const g=r.ownerDocument,_=g.body,w=getComputedStyle(_),S=g.compatMode==="CSS1Compat"&&parseFloat(w.marginLeft)+parseFloat(w.marginRight)||0,E=Math.abs(r.clientWidth-_.clientWidth-S);E<=kU&&(o-=E)}else f<=kU&&(o+=f);return{width:o,height:a,x:s,y:u}}const eDe=new Set(["absolute","fixed"]);function tDe(t,e){const n=bb(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=am(t)?ow(t):Kp(1),a=t.clientWidth*o.x,s=t.clientHeight*o.y,u=i*o.x,f=r*o.y;return{width:a,height:s,x:u,y:f}}function EU(t,e,n){let r;if(e==="viewport")r=J3e(t,n);else if(e==="document")r=K3e(pm(t));else if(wf(e))r=tDe(e,n);else{const i=Oee(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return R5(r)}function Cee(t,e){const n=j0(t);return n===e||!wf(n)||Fw(n)?!1:Of(n).position==="fixed"||Cee(n,e)}function nDe(t,e){const n=e.get(t);if(n)return n;let r=tT(t,[],!1).filter(s=>wf(s)&&MO(s)!=="body"),i=null;const o=Of(t).position==="fixed";let a=o?j0(t):t;for(;wf(a)&&!Fw(a);){const s=Of(a),u=L8(a);!u&&s.position==="fixed"&&(i=null),(o?!u&&!i:!u&&s.position==="static"&&!!i&&eDe.has(i.position)||fk(a)&&!u&&Cee(t,a))?r=r.filter(g=>g!==a):i=s,a=j0(a)}return e.set(t,r),r}function rDe(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?WR(e)?[]:nDe(e,this._c):[].concat(n),r],s=a[0],u=a.reduce((f,g)=>{const _=EU(e,g,i);return f.top=Nu(_.top,f.top),f.right=F0(_.right,f.right),f.bottom=F0(_.bottom,f.bottom),f.left=Nu(_.left,f.left),f},EU(e,s,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function iDe(t){const{width:e,height:n}=wee(t);return{width:e,height:n}}function oDe(t,e,n){const r=am(e),i=pm(e),o=n==="fixed",a=bb(t,!0,o,e);let s={scrollLeft:0,scrollTop:0};const u=Kp(0);function f(){u.x=GR(i)}if(r||!r&&!o)if((MO(e)!=="body"||fk(i))&&(s=HR(e)),r){const S=bb(e,!0,o,e);u.x=S.x+e.clientLeft,u.y=S.y+e.clientTop}else i&&f();o&&!r&&i&&f();const g=i&&!r&&!o?See(i,s):Kp(0),_=a.left+s.scrollLeft-u.x-g.x,w=a.top+s.scrollTop-u.y-g.y;return{x:_,y:w,width:a.width,height:a.height}}function lD(t){return Of(t).position==="static"}function AU(t,e){if(!am(t)||Of(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return pm(t)===n&&(n=n.ownerDocument.body),n}function Tee(t,e){const n=Gu(t);if(WR(t))return n;if(!am(t)){let i=j0(t);for(;i&&!Fw(i);){if(wf(i)&&!lD(i))return i;i=j0(i)}return n}let r=AU(t,e);for(;r&&j3e(r)&&lD(r);)r=AU(r,e);return r&&Fw(r)&&lD(r)&&!L8(r)?n:r||q3e(t)||n}const sDe=async function(t){const e=this.getOffsetParent||Tee,n=this.getDimensions,r=await n(t.floating);return{reference:oDe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function aDe(t){return Of(t).direction==="rtl"}const lDe={convertOffsetParentRelativeRectToViewportRelativeRect:X3e,getDocumentElement:pm,getClippingRect:rDe,getOffsetParent:Tee,getElementRects:sDe,getClientRects:Y3e,getDimensions:iDe,getScale:ow,isElement:wf,isRTL:aDe};function kee(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function cDe(t,e){let n=null,r;const i=pm(t);function o(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function a(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),o();const f=t.getBoundingClientRect(),{left:g,top:_,width:w,height:S}=f;if(s||e(),!w||!S)return;const E=sA(_),A=sA(i.clientWidth-(g+w)),R=sA(i.clientHeight-(_+S)),$=sA(g),B={rootMargin:-E+"px "+-A+"px "+-R+"px "+-$+"px",threshold:Nu(0,F0(1,u))||1};let F=!0;function U(q){const H=q[0].intersectionRatio;if(H!==u){if(!F)return a();H?a(!1,H):r=setTimeout(()=>{a(!1,1e-7)},1e3)}H===1&&!kee(f,t.getBoundingClientRect())&&a(),F=!1}try{n=new IntersectionObserver(U,{...B,root:i.ownerDocument})}catch{n=new IntersectionObserver(U,B)}n.observe(t)}return a(!0),o}function uDe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,f=z8(t),g=i||o?[...f?tT(f):[],...tT(e)]:[];g.forEach($=>{i&&$.addEventListener("scroll",n,{passive:!0}),o&&$.addEventListener("resize",n)});const _=f&&s?cDe(f,n):null;let w=-1,S=null;a&&(S=new ResizeObserver($=>{let[z]=$;z&&z.target===f&&S&&(S.unobserve(e),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var B;(B=S)==null||B.observe(e)})),n()}),f&&!u&&S.observe(f),S.observe(e));let E,A=u?bb(t):null;u&&R();function R(){const $=bb(t);A&&!kee(A,$)&&n(),A=$,E=requestAnimationFrame(R)}return n(),()=>{var $;g.forEach(z=>{i&&z.removeEventListener("scroll",n),o&&z.removeEventListener("resize",n)}),_?.(),($=S)==null||$.disconnect(),S=null,u&&cancelAnimationFrame(E)}}const hDe=L3e,dDe=$3e,fDe=R3e,pDe=N3e,mDe=I3e,PU=M3e,gDe=z3e,yDe=(t,e,n)=>{const r=new Map,i={platform:lDe,...n},o={...i.platform,_c:r};return P3e(t,e,{...i,platform:o})};var vDe=typeof document<"u",_De=function(){},xP=vDe?Q.useLayoutEffect:_De;function I5(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!I5(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!I5(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function Eee(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function MU(t,e){const n=Eee(t);return Math.round(e*n)/n}function cD(t){const e=Q.useRef(t);return xP(()=>{e.current=t}),e}function bDe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:u,open:f}=t,[g,_]=Q.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[w,S]=Q.useState(r);I5(w,r)||S(r);const[E,A]=Q.useState(null),[R,$]=Q.useState(null),z=Q.useCallback(Ne=>{Ne!==q.current&&(q.current=Ne,A(Ne))},[]),B=Q.useCallback(Ne=>{Ne!==H.current&&(H.current=Ne,$(Ne))},[]),F=o||E,U=a||R,q=Q.useRef(null),H=Q.useRef(null),ne=Q.useRef(g),ie=u!=null,ce=cD(u),xe=cD(i),re=cD(f),me=Q.useCallback(()=>{if(!q.current||!H.current)return;const Ne={placement:e,strategy:n,middleware:w};xe.current&&(Ne.platform=xe.current),yDe(q.current,H.current,Ne).then(Qe=>{const Se={...Qe,isPositioned:re.current!==!1};Te.current&&!I5(ne.current,Se)&&(ne.current=Se,tm.flushSync(()=>{_(Se)}))})},[w,e,n,xe,re]);xP(()=>{f===!1&&ne.current.isPositioned&&(ne.current.isPositioned=!1,_(Ne=>({...Ne,isPositioned:!1})))},[f]);const Te=Q.useRef(!1);xP(()=>(Te.current=!0,()=>{Te.current=!1}),[]),xP(()=>{if(F&&(q.current=F),U&&(H.current=U),F&&U){if(ce.current)return ce.current(F,U,me);me()}},[F,U,me,ce,ie]);const ye=Q.useMemo(()=>({reference:q,floating:H,setReference:z,setFloating:B}),[z,B]),_e=Q.useMemo(()=>({reference:F,floating:U}),[F,U]),ke=Q.useMemo(()=>{const Ne={position:n,left:0,top:0};if(!_e.floating)return Ne;const Qe=MU(_e.floating,g.x),Se=MU(_e.floating,g.y);return s?{...Ne,transform:"translate("+Qe+"px, "+Se+"px)",...Eee(_e.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Qe,top:Se}},[n,s,_e.floating,g.x,g.y]);return Q.useMemo(()=>({...g,update:me,refs:ye,elements:_e,floatingStyles:ke}),[g,me,ye,_e,ke])}const xDe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?PU({element:r.current,padding:i}).fn(n):{}:r?PU({element:r,padding:i}).fn(n):{}}}},wDe=(t,e)=>({...hDe(t),options:[t,e]}),ODe=(t,e)=>({...dDe(t),options:[t,e]}),SDe=(t,e)=>({...gDe(t),options:[t,e]}),CDe=(t,e)=>({...fDe(t),options:[t,e]}),TDe=(t,e)=>({...pDe(t),options:[t,e]}),kDe=(t,e)=>({...mDe(t),options:[t,e]}),EDe=(t,e)=>({...xDe(t),options:[t,e]});var ADe="Arrow",Aee=Q.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return J.jsx(Qr.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:J.jsx("polygon",{points:"0,0 30,0 15,10"})})});Aee.displayName=ADe;var PDe=Aee;function MDe(t){const[e,n]=Q.useState(void 0);return Il(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let a,s;if("borderBoxSize"in o){const u=o.borderBoxSize,f=Array.isArray(u)?u[0]:u;a=f.inlineSize,s=f.blockSize}else a=t.offsetWidth,s=t.offsetHeight;n({width:a,height:s})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var N8="Popper",[Pee,RO]=ly(N8),[RDe,Mee]=Pee(N8),Ree=t=>{const{__scopePopper:e,children:n}=t,[r,i]=Q.useState(null);return J.jsx(RDe,{scope:e,anchor:r,onAnchorChange:i,children:n})};Ree.displayName=N8;var Iee="PopperAnchor",Dee=Q.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=Mee(Iee,n),a=Q.useRef(null),s=ko(e,a),u=Q.useRef(null);return Q.useEffect(()=>{const f=u.current;u.current=r?.current||a.current,f!==u.current&&o.onAnchorChange(u.current)}),r?null:J.jsx(Qr.div,{...i,ref:s})});Dee.displayName=Iee;var B8="PopperContent",[IDe,DDe]=Pee(B8),Lee=Q.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:f=[],collisionPadding:g=0,sticky:_="partial",hideWhenDetached:w=!1,updatePositionStrategy:S="optimized",onPlaced:E,...A}=t,R=Mee(B8,n),[$,z]=Q.useState(null),B=ko(e,st=>z(st)),[F,U]=Q.useState(null),q=MDe(F),H=q?.width??0,ne=q?.height??0,ie=r+(o!=="center"?"-"+o:""),ce=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},xe=Array.isArray(f)?f:[f],re=xe.length>0,me={padding:ce,boundary:xe.filter($De),altBoundary:re},{refs:Te,floatingStyles:ye,placement:_e,isPositioned:ke,middlewareData:Ne}=bDe({strategy:"fixed",placement:ie,whileElementsMounted:(...st)=>uDe(...st,{animationFrame:S==="always"}),elements:{reference:R.anchor},middleware:[wDe({mainAxis:i+ne,alignmentAxis:a}),u&&ODe({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?SDe():void 0,...me}),u&&CDe({...me}),TDe({...me,apply:({elements:st,rects:bt,availableWidth:At,availableHeight:Tt})=>{const{width:Wt,height:nn}=bt.reference,An=st.floating.style;An.setProperty("--radix-popper-available-width",`${At}px`),An.setProperty("--radix-popper-available-height",`${Tt}px`),An.setProperty("--radix-popper-anchor-width",`${Wt}px`),An.setProperty("--radix-popper-anchor-height",`${nn}px`)}}),F&&EDe({element:F,padding:s}),zDe({arrowWidth:H,arrowHeight:ne}),w&&kDe({strategy:"referenceHidden",...me})]}),[Qe,Se]=Nee(_e),Me=B0(E);Il(()=>{ke&&Me?.()},[ke,Me]);const Xe=Ne.arrow?.x,Ee=Ne.arrow?.y,ft=Ne.arrow?.centerOffset!==0,[mt,ct]=Q.useState();return Il(()=>{$&&ct(window.getComputedStyle($).zIndex)},[$]),J.jsx("div",{ref:Te.setFloating,"data-radix-popper-content-wrapper":"",style:{...ye,transform:ke?ye.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:mt,"--radix-popper-transform-origin":[Ne.transformOrigin?.x,Ne.transformOrigin?.y].join(" "),...Ne.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:J.jsx(IDe,{scope:n,placedSide:Qe,onArrowChange:U,arrowX:Xe,arrowY:Ee,shouldHideArrow:ft,children:J.jsx(Qr.div,{"data-side":Qe,"data-align":Se,...A,ref:B,style:{...A.style,animation:ke?void 0:"none"}})})})});Lee.displayName=B8;var $ee="PopperArrow",LDe={top:"bottom",right:"left",bottom:"top",left:"right"},zee=Q.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=DDe($ee,r),a=LDe[o.placedSide];return J.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:J.jsx(PDe,{...i,ref:n,style:{...i.style,display:"block"}})})});zee.displayName=$ee;function $De(t){return t!==null}var zDe=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:i}=e,a=i.arrow?.centerOffset!==0,s=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[f,g]=Nee(n),_={start:"0%",center:"50%",end:"100%"}[g],w=(i.arrow?.x??0)+s/2,S=(i.arrow?.y??0)+u/2;let E="",A="";return f==="bottom"?(E=a?_:`${w}px`,A=`${-u}px`):f==="top"?(E=a?_:`${w}px`,A=`${r.floating.height+u}px`):f==="right"?(E=`${-u}px`,A=a?_:`${S}px`):f==="left"&&(E=`${r.floating.width+u}px`,A=a?_:`${S}px`),{data:{x:E,y:A}}}});function Nee(t){const[e,n="center"]=t.split("-");return[e,n]}var F8=Ree,XR=Dee,j8=Lee,V8=zee,NDe="Portal",pk=Q.forwardRef((t,e)=>{const{container:n,...r}=t,[i,o]=Q.useState(!1);Il(()=>o(!0),[]);const a=n||i&&globalThis?.document?.body;return a?A2.createPortal(J.jsx(Qr.div,{...r,ref:e}),a):null});pk.displayName=NDe;function BDe(t,e){return Q.useReducer((n,r)=>e[n][r]??n,t)}var ev=t=>{const{present:e,children:n}=t,r=FDe(e),i=typeof n=="function"?n({present:r.isPresent}):Q.Children.only(n),o=ko(r.ref,jDe(i));return typeof n=="function"||r.isPresent?Q.cloneElement(i,{ref:o}):null};ev.displayName="Presence";function FDe(t){const[e,n]=Q.useState(),r=Q.useRef(null),i=Q.useRef(t),o=Q.useRef("none"),a=t?"mounted":"unmounted",[s,u]=BDe(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Q.useEffect(()=>{const f=aA(r.current);o.current=s==="mounted"?f:"none"},[s]),Il(()=>{const f=r.current,g=i.current;if(g!==t){const w=o.current,S=aA(f);t?u("MOUNT"):S==="none"||f?.display==="none"?u("UNMOUNT"):u(g&&w!==S?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),Il(()=>{if(e){let f;const g=e.ownerDocument.defaultView??window,_=S=>{const A=aA(r.current).includes(CSS.escape(S.animationName));if(S.target===e&&A&&(u("ANIMATION_END"),!i.current)){const R=e.style.animationFillMode;e.style.animationFillMode="forwards",f=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=R)})}},w=S=>{S.target===e&&(o.current=aA(r.current))};return e.addEventListener("animationstart",w),e.addEventListener("animationcancel",_),e.addEventListener("animationend",_),()=>{g.clearTimeout(f),e.removeEventListener("animationstart",w),e.removeEventListener("animationcancel",_),e.removeEventListener("animationend",_)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:Q.useCallback(f=>{r.current=f?getComputedStyle(f):null,n(f)},[])}}function aA(t){return t?.animationName||"none"}function jDe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var VDe=OC[" useInsertionEffect ".trim().toString()]||Il;function Yg({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,o,a]=QDe({defaultProp:e,onChange:n}),s=t!==void 0,u=s?t:i;{const g=Q.useRef(t!==void 0);Q.useEffect(()=>{const _=g.current;_!==s&&console.warn(`${r} is changing from ${_?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=s},[s,r])}const f=Q.useCallback(g=>{if(s){const _=UDe(g)?g(t):g;_!==t&&a.current?.(_)}else o(g)},[s,t,o,a]);return[u,f]}function QDe({defaultProp:t,onChange:e}){const[n,r]=Q.useState(t),i=Q.useRef(n),o=Q.useRef(e);return VDe(()=>{o.current=e},[e]),Q.useEffect(()=>{i.current!==n&&(o.current?.(n),i.current=n)},[n,i]),[n,r,o]}function UDe(t){return typeof t=="function"}var ZDe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},_1=new WeakMap,lA=new WeakMap,cA={},uD=0,Bee=function(t){return t&&(t.host||Bee(t.parentNode))},qDe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Bee(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},WDe=function(t,e,n,r){var i=qDe(e,Array.isArray(t)?t:[t]);cA[n]||(cA[n]=new WeakMap);var o=cA[n],a=[],s=new Set,u=new Set(i),f=function(_){!_||s.has(_)||(s.add(_),f(_.parentNode))};i.forEach(f);var g=function(_){!_||u.has(_)||Array.prototype.forEach.call(_.children,function(w){if(s.has(w))g(w);else try{var S=w.getAttribute(r),E=S!==null&&S!=="false",A=(_1.get(w)||0)+1,R=(o.get(w)||0)+1;_1.set(w,A),o.set(w,R),a.push(w),A===1&&E&&lA.set(w,!0),R===1&&w.setAttribute(n,"true"),E||w.setAttribute(r,"true")}catch($){console.error("aria-hidden: cannot operate on ",w,$)}})};return g(e),s.clear(),uD++,function(){a.forEach(function(_){var w=_1.get(_)-1,S=o.get(_)-1;_1.set(_,w),o.set(_,S),w||(lA.has(_)||_.removeAttribute(r),lA.delete(_)),S||_.removeAttribute(n)}),uD--,uD||(_1=new WeakMap,_1=new WeakMap,lA=new WeakMap,cA={})}},Q8=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=ZDe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),WDe(r,i,n,"aria-hidden")):function(){return null}},wP="right-scroll-bar-position",OP="width-before-scroll-bar",HDe="with-scroll-bars-hidden",GDe="--removed-body-scroll-bar-size";function hD(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function XDe(t,e){var n=Q.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var YDe=typeof window<"u"?Q.useLayoutEffect:Q.useEffect,RU=new WeakMap;function KDe(t,e){var n=XDe(null,function(r){return t.forEach(function(i){return hD(i,r)})});return YDe(function(){var r=RU.get(n);if(r){var i=new Set(r),o=new Set(t),a=n.current;i.forEach(function(s){o.has(s)||hD(s,null)}),o.forEach(function(s){i.has(s)||hD(s,a)})}RU.set(n,t)},[t]),n}function JDe(t){return t}function eLe(t,e){e===void 0&&(e=JDe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var a=e(o,r);return n.push(a),function(){n=n.filter(function(s){return s!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(s){return o(s)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var s=n;n=[],s.forEach(o),a=n}var u=function(){var g=a;a=[],g.forEach(o)},f=function(){return Promise.resolve().then(u)};f(),n={push:function(g){a.push(g),f()},filter:function(g){return a=a.filter(g),n}}}};return i}function tLe(t){t===void 0&&(t={});var e=eLe(null);return e.options=zh({async:!0,ssr:!1},t),e}var Fee=function(t){var e=t.sideCar,n=gO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return Q.createElement(r,zh({},n))};Fee.isSideCarExport=!0;function nLe(t,e){return t.useMedium(e),Fee}var jee=tLe(),dD=function(){},YR=Q.forwardRef(function(t,e){var n=Q.useRef(null),r=Q.useState({onScrollCapture:dD,onWheelCapture:dD,onTouchMoveCapture:dD}),i=r[0],o=r[1],a=t.forwardProps,s=t.children,u=t.className,f=t.removeScrollBar,g=t.enabled,_=t.shards,w=t.sideCar,S=t.noRelative,E=t.noIsolation,A=t.inert,R=t.allowPinchZoom,$=t.as,z=$===void 0?"div":$,B=t.gapMode,F=gO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),U=w,q=KDe([n,e]),H=zh(zh({},F),i);return Q.createElement(Q.Fragment,null,g&&Q.createElement(U,{sideCar:jee,removeScrollBar:f,shards:_,noRelative:S,noIsolation:E,inert:A,setCallbacks:o,allowPinchZoom:!!R,lockRef:n,gapMode:B}),a?Q.cloneElement(Q.Children.only(s),zh(zh({},H),{ref:q})):Q.createElement(z,zh({},H,{className:u,ref:q}),s))});YR.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};YR.classNames={fullWidth:OP,zeroRight:wP};var rLe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iLe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=rLe();return e&&t.setAttribute("nonce",e),t}function oLe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function sLe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var aLe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=iLe())&&(oLe(e,n),sLe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},lLe=function(){var t=aLe();return function(e,n){Q.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Vee=function(){var t=lLe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},cLe={left:0,top:0,right:0,gap:0},fD=function(t){return parseInt(t||"",10)||0},uLe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[fD(n),fD(r),fD(i)]},hLe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return cLe;var e=uLe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},dLe=Vee(),sw="data-scroll-locked",fLe=function(t,e,n,r){var i=t.left,o=t.top,a=t.right,s=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(HDe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(sw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(wP,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(OP,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(wP," .").concat(wP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(OP," .").concat(OP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(sw,`] {
    `).concat(GDe,": ").concat(s,`px;
  }
`)},IU=function(){var t=parseInt(document.body.getAttribute(sw)||"0",10);return isFinite(t)?t:0},pLe=function(){Q.useEffect(function(){return document.body.setAttribute(sw,(IU()+1).toString()),function(){var t=IU()-1;t<=0?document.body.removeAttribute(sw):document.body.setAttribute(sw,t.toString())}},[])},mLe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;pLe();var o=Q.useMemo(function(){return hLe(i)},[i]);return Q.createElement(dLe,{styles:fLe(o,!e,i,n?"":"!important")})},A4=!1;if(typeof window<"u")try{var uA=Object.defineProperty({},"passive",{get:function(){return A4=!0,!0}});window.addEventListener("test",uA,uA),window.removeEventListener("test",uA,uA)}catch{A4=!1}var b1=A4?{passive:!1}:!1,gLe=function(t){return t.tagName==="TEXTAREA"},Qee=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!gLe(t)&&n[e]==="visible")},yLe=function(t){return Qee(t,"overflowY")},vLe=function(t){return Qee(t,"overflowX")},DU=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Uee(t,r);if(i){var o=Zee(t,r),a=o[1],s=o[2];if(a>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},_Le=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},bLe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Uee=function(t,e){return t==="v"?yLe(e):vLe(e)},Zee=function(t,e){return t==="v"?_Le(e):bLe(e)},xLe=function(t,e){return t==="h"&&e==="rtl"?-1:1},wLe=function(t,e,n,r,i){var o=xLe(t,window.getComputedStyle(e).direction),a=o*r,s=n.target,u=e.contains(s),f=!1,g=a>0,_=0,w=0;do{if(!s)break;var S=Zee(t,s),E=S[0],A=S[1],R=S[2],$=A-R-o*E;(E||$)&&Uee(t,s)&&(_+=$,w+=E);var z=s.parentNode;s=z&&z.nodeType===Node.DOCUMENT_FRAGMENT_NODE?z.host:z}while(!u&&s!==document.body||u&&(e.contains(s)||e===s));return(g&&Math.abs(_)<1||!g&&Math.abs(w)<1)&&(f=!0),f},hA=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},LU=function(t){return[t.deltaX,t.deltaY]},$U=function(t){return t&&"current"in t?t.current:t},OLe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},SLe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},CLe=0,x1=[];function TLe(t){var e=Q.useRef([]),n=Q.useRef([0,0]),r=Q.useRef(),i=Q.useState(CLe++)[0],o=Q.useState(Vee)[0],a=Q.useRef(t);Q.useEffect(function(){a.current=t},[t]),Q.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var A=Fxe([t.lockRef.current],(t.shards||[]).map($U),!0).filter(Boolean);return A.forEach(function(R){return R.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),A.forEach(function(R){return R.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var s=Q.useCallback(function(A,R){if("touches"in A&&A.touches.length===2||A.type==="wheel"&&A.ctrlKey)return!a.current.allowPinchZoom;var $=hA(A),z=n.current,B="deltaX"in A?A.deltaX:z[0]-$[0],F="deltaY"in A?A.deltaY:z[1]-$[1],U,q=A.target,H=Math.abs(B)>Math.abs(F)?"h":"v";if("touches"in A&&H==="h"&&q.type==="range")return!1;var ne=window.getSelection(),ie=ne&&ne.anchorNode,ce=ie?ie===q||ie.contains(q):!1;if(ce)return!1;var xe=DU(H,q);if(!xe)return!0;if(xe?U=H:(U=H==="v"?"h":"v",xe=DU(H,q)),!xe)return!1;if(!r.current&&"changedTouches"in A&&(B||F)&&(r.current=U),!U)return!0;var re=r.current||U;return wLe(re,R,A,re==="h"?B:F)},[]),u=Q.useCallback(function(A){var R=A;if(!(!x1.length||x1[x1.length-1]!==o)){var $="deltaY"in R?LU(R):hA(R),z=e.current.filter(function(U){return U.name===R.type&&(U.target===R.target||R.target===U.shadowParent)&&OLe(U.delta,$)})[0];if(z&&z.should){R.cancelable&&R.preventDefault();return}if(!z){var B=(a.current.shards||[]).map($U).filter(Boolean).filter(function(U){return U.contains(R.target)}),F=B.length>0?s(R,B[0]):!a.current.noIsolation;F&&R.cancelable&&R.preventDefault()}}},[]),f=Q.useCallback(function(A,R,$,z){var B={name:A,delta:R,target:$,should:z,shadowParent:kLe($)};e.current.push(B),setTimeout(function(){e.current=e.current.filter(function(F){return F!==B})},1)},[]),g=Q.useCallback(function(A){n.current=hA(A),r.current=void 0},[]),_=Q.useCallback(function(A){f(A.type,LU(A),A.target,s(A,t.lockRef.current))},[]),w=Q.useCallback(function(A){f(A.type,hA(A),A.target,s(A,t.lockRef.current))},[]);Q.useEffect(function(){return x1.push(o),t.setCallbacks({onScrollCapture:_,onWheelCapture:_,onTouchMoveCapture:w}),document.addEventListener("wheel",u,b1),document.addEventListener("touchmove",u,b1),document.addEventListener("touchstart",g,b1),function(){x1=x1.filter(function(A){return A!==o}),document.removeEventListener("wheel",u,b1),document.removeEventListener("touchmove",u,b1),document.removeEventListener("touchstart",g,b1)}},[]);var S=t.removeScrollBar,E=t.inert;return Q.createElement(Q.Fragment,null,E?Q.createElement(o,{styles:SLe(i)}):null,S?Q.createElement(mLe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function kLe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const ELe=nLe(jee,TLe);var KR=Q.forwardRef(function(t,e){return Q.createElement(YR,zh({},t,{ref:e,sideCar:ELe}))});KR.classNames=YR.classNames;var JR="Popover",[qee]=ly(JR,[RO]),mk=RO(),[ALe,tv]=qee(JR),Wee=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:a=!1}=t,s=mk(e),u=Q.useRef(null),[f,g]=Q.useState(!1),[_,w]=Yg({prop:r,defaultProp:i??!1,onChange:o,caller:JR});return J.jsx(F8,{...s,children:J.jsx(ALe,{scope:e,contentId:Bg(),triggerRef:u,open:_,onOpenChange:w,onOpenToggle:Q.useCallback(()=>w(S=>!S),[w]),hasCustomAnchor:f,onCustomAnchorAdd:Q.useCallback(()=>g(!0),[]),onCustomAnchorRemove:Q.useCallback(()=>g(!1),[]),modal:a,children:n})})};Wee.displayName=JR;var Hee="PopoverAnchor",Gee=Q.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=tv(Hee,n),o=mk(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:s}=i;return Q.useEffect(()=>(a(),()=>s()),[a,s]),J.jsx(XR,{...o,...r,ref:e})});Gee.displayName=Hee;var Xee="PopoverTrigger",U8=Q.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=tv(Xee,n),o=mk(n),a=ko(e,i.triggerRef),s=J.jsx(Qr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":tte(i.open),...r,ref:a,onClick:wr(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?s:J.jsx(XR,{asChild:!0,...o,children:s})});U8.displayName=Xee;var Z8="PopoverPortal",[PLe,MLe]=qee(Z8,{forceMount:void 0}),Yee=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,o=tv(Z8,e);return J.jsx(PLe,{scope:e,forceMount:n,children:J.jsx(ev,{present:n||o.open,children:J.jsx(pk,{asChild:!0,container:i,children:r})})})};Yee.displayName=Z8;var jw="PopoverContent",eI=Q.forwardRef((t,e)=>{const n=MLe(jw,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,o=tv(jw,t.__scopePopover);return J.jsx(ev,{present:r||o.open,children:o.modal?J.jsx(ILe,{...i,ref:e}):J.jsx(DLe,{...i,ref:e})})});eI.displayName=jw;var RLe=Bw("PopoverContent.RemoveScroll"),ILe=Q.forwardRef((t,e)=>{const n=tv(jw,t.__scopePopover),r=Q.useRef(null),i=ko(e,r),o=Q.useRef(!1);return Q.useEffect(()=>{const a=r.current;if(a)return Q8(a)},[]),J.jsx(KR,{as:RLe,allowPinchZoom:!0,children:J.jsx(Kee,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:wr(t.onCloseAutoFocus,a=>{a.preventDefault(),o.current||n.triggerRef.current?.focus()}),onPointerDownOutside:wr(t.onPointerDownOutside,a=>{const s=a.detail.originalEvent,u=s.button===0&&s.ctrlKey===!0,f=s.button===2||u;o.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:wr(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),DLe=Q.forwardRef((t,e)=>{const n=tv(jw,t.__scopePopover),r=Q.useRef(!1),i=Q.useRef(!1);return J.jsx(Kee,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=o.target;n.triggerRef.current?.contains(a)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),Kee=Q.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:g,..._}=t,w=tv(jw,n),S=mk(n);return M8(),J.jsx(ZR,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:J.jsx(dk,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:g,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:f,onDismiss:()=>w.onOpenChange(!1),children:J.jsx(j8,{"data-state":tte(w.open),role:"dialog",id:w.contentId,...S,..._,ref:e,style:{..._.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Jee="PopoverClose",LLe=Q.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=tv(Jee,n);return J.jsx(Qr.button,{type:"button",...r,ref:e,onClick:wr(t.onClick,()=>i.onOpenChange(!1))})});LLe.displayName=Jee;var $Le="PopoverArrow",ete=Q.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=mk(n);return J.jsx(V8,{...i,...r,ref:e})});ete.displayName=$Le;function tte(t){return t?"open":"closed"}var q8=Wee,zLe=Gee,W8=Yee,NLe=eI,H8=ete;function nte(t){const e=t+"CollectionProvider",[n,r]=ly(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=A=>{const{scope:R,children:$}=A,z=se.useRef(null),B=se.useRef(new Map).current;return J.jsx(i,{scope:R,itemMap:B,collectionRef:z,children:$})};a.displayName=e;const s=t+"CollectionSlot",u=Bw(s),f=se.forwardRef((A,R)=>{const{scope:$,children:z}=A,B=o(s,$),F=ko(R,B.collectionRef);return J.jsx(u,{ref:F,children:z})});f.displayName=s;const g=t+"CollectionItemSlot",_="data-radix-collection-item",w=Bw(g),S=se.forwardRef((A,R)=>{const{scope:$,children:z,...B}=A,F=se.useRef(null),U=ko(R,F),q=o(g,$);return se.useEffect(()=>(q.itemMap.set(F,{ref:F,...B}),()=>{q.itemMap.delete(F)})),J.jsx(w,{[_]:"",ref:U,children:z})});S.displayName=g;function E(A){const R=o(t+"CollectionConsumer",A);return se.useCallback(()=>{const z=R.collectionRef.current;if(!z)return[];const B=Array.from(z.querySelectorAll(`[${_}]`));return Array.from(R.itemMap.values()).sort((q,H)=>B.indexOf(q.ref.current)-B.indexOf(H.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:a,Slot:f,ItemSlot:S},E,r]}var BLe=Q.createContext(void 0);function tI(t){const e=Q.useContext(BLe);return t||e||"ltr"}var pD="rovingFocusGroup.onEntryFocus",FLe={bubbles:!1,cancelable:!0},gk="RovingFocusGroup",[P4,rte,jLe]=nte(gk),[VLe,nI]=ly(gk,[jLe]),[QLe,ULe]=VLe(gk),ite=Q.forwardRef((t,e)=>J.jsx(P4.Provider,{scope:t.__scopeRovingFocusGroup,children:J.jsx(P4.Slot,{scope:t.__scopeRovingFocusGroup,children:J.jsx(ZLe,{...t,ref:e})})}));ite.displayName=gk;var ZLe=Q.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:f,preventScrollOnEntryFocus:g=!1,..._}=t,w=Q.useRef(null),S=ko(e,w),E=tI(o),[A,R]=Yg({prop:a,defaultProp:s??null,onChange:u,caller:gk}),[$,z]=Q.useState(!1),B=B0(f),F=rte(n),U=Q.useRef(!1),[q,H]=Q.useState(0);return Q.useEffect(()=>{const ne=w.current;if(ne)return ne.addEventListener(pD,B),()=>ne.removeEventListener(pD,B)},[B]),J.jsx(QLe,{scope:n,orientation:r,dir:E,loop:i,currentTabStopId:A,onItemFocus:Q.useCallback(ne=>R(ne),[R]),onItemShiftTab:Q.useCallback(()=>z(!0),[]),onFocusableItemAdd:Q.useCallback(()=>H(ne=>ne+1),[]),onFocusableItemRemove:Q.useCallback(()=>H(ne=>ne-1),[]),children:J.jsx(Qr.div,{tabIndex:$||q===0?-1:0,"data-orientation":r,..._,ref:S,style:{outline:"none",...t.style},onMouseDown:wr(t.onMouseDown,()=>{U.current=!0}),onFocus:wr(t.onFocus,ne=>{const ie=!U.current;if(ne.target===ne.currentTarget&&ie&&!$){const ce=new CustomEvent(pD,FLe);if(ne.currentTarget.dispatchEvent(ce),!ce.defaultPrevented){const xe=F().filter(_e=>_e.focusable),re=xe.find(_e=>_e.active),me=xe.find(_e=>_e.id===A),ye=[re,me,...xe].filter(Boolean).map(_e=>_e.ref.current);ate(ye,g)}}U.current=!1}),onBlur:wr(t.onBlur,()=>z(!1))})})}),ote="RovingFocusGroupItem",ste=Q.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,children:a,...s}=t,u=Bg(),f=o||u,g=ULe(ote,n),_=g.currentTabStopId===f,w=rte(n),{onFocusableItemAdd:S,onFocusableItemRemove:E,currentTabStopId:A}=g;return Q.useEffect(()=>{if(r)return S(),()=>E()},[r,S,E]),J.jsx(P4.ItemSlot,{scope:n,id:f,focusable:r,active:i,children:J.jsx(Qr.span,{tabIndex:_?0:-1,"data-orientation":g.orientation,...s,ref:e,onMouseDown:wr(t.onMouseDown,R=>{r?g.onItemFocus(f):R.preventDefault()}),onFocus:wr(t.onFocus,()=>g.onItemFocus(f)),onKeyDown:wr(t.onKeyDown,R=>{if(R.key==="Tab"&&R.shiftKey){g.onItemShiftTab();return}if(R.target!==R.currentTarget)return;const $=HLe(R,g.orientation,g.dir);if($!==void 0){if(R.metaKey||R.ctrlKey||R.altKey||R.shiftKey)return;R.preventDefault();let B=w().filter(F=>F.focusable).map(F=>F.ref.current);if($==="last")B.reverse();else if($==="prev"||$==="next"){$==="prev"&&B.reverse();const F=B.indexOf(R.currentTarget);B=g.loop?GLe(B,F+1):B.slice(F+1)}setTimeout(()=>ate(B))}}),children:typeof a=="function"?a({isCurrentTabStop:_,hasTabStop:A!=null}):a})})});ste.displayName=ote;var qLe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function WLe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function HLe(t,e,n){const r=WLe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return qLe[r]}function ate(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function GLe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var lte=ite,G8=ste,XLe="Separator",zU="horizontal",YLe=["horizontal","vertical"],cte=Q.forwardRef((t,e)=>{const{decorative:n,orientation:r=zU,...i}=t,o=KLe(r)?r:zU,s=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return J.jsx(Qr.div,{"data-orientation":o,...s,...i,ref:e})});cte.displayName=XLe;function KLe(t){return YLe.includes(t)}var JLe=cte,ute="Toggle",hte=Q.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r,onPressedChange:i,...o}=t,[a,s]=Yg({prop:n,onChange:i,defaultProp:r??!1,caller:ute});return J.jsx(Qr.button,{type:"button","aria-pressed":a,"data-state":a?"on":"off","data-disabled":t.disabled?"":void 0,...o,ref:e,onClick:wr(t.onClick,()=>{t.disabled||s(!a)})})});hte.displayName=ute;var nv="ToggleGroup",[dte,fte]=ly(nv,[nI]),pte=nI(),X8=se.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single"){const i=r;return J.jsx(e$e,{...i,ref:e})}if(n==="multiple"){const i=r;return J.jsx(t$e,{...i,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${nv}\``)});X8.displayName=nv;var[mte,gte]=dte(nv),e$e=se.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=t,[a,s]=Yg({prop:n,defaultProp:r??"",onChange:i,caller:nv});return J.jsx(mte,{scope:t.__scopeToggleGroup,type:"single",value:se.useMemo(()=>a?[a]:[],[a]),onItemActivate:s,onItemDeactivate:se.useCallback(()=>s(""),[s]),children:J.jsx(yte,{...o,ref:e})})}),t$e=se.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=t,[a,s]=Yg({prop:n,defaultProp:r??[],onChange:i,caller:nv}),u=se.useCallback(g=>s((_=[])=>[..._,g]),[s]),f=se.useCallback(g=>s((_=[])=>_.filter(w=>w!==g)),[s]);return J.jsx(mte,{scope:t.__scopeToggleGroup,type:"multiple",value:a,onItemActivate:u,onItemDeactivate:f,children:J.jsx(yte,{...o,ref:e})})});X8.displayName=nv;var[n$e,r$e]=dte(nv),yte=se.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:i=!0,orientation:o,dir:a,loop:s=!0,...u}=t,f=pte(n),g=tI(a),_={role:"group",dir:g,...u};return J.jsx(n$e,{scope:n,rovingFocus:i,disabled:r,children:i?J.jsx(lte,{asChild:!0,...f,orientation:o,dir:g,loop:s,children:J.jsx(Qr.div,{..._,ref:e})}):J.jsx(Qr.div,{..._,ref:e})})}),D5="ToggleGroupItem",vte=se.forwardRef((t,e)=>{const n=gte(D5,t.__scopeToggleGroup),r=r$e(D5,t.__scopeToggleGroup),i=pte(t.__scopeToggleGroup),o=n.value.includes(t.value),a=r.disabled||t.disabled,s={...t,pressed:o,disabled:a},u=se.useRef(null);return r.rovingFocus?J.jsx(G8,{asChild:!0,...i,focusable:!a,active:o,ref:u,children:J.jsx(NU,{...s,ref:e})}):J.jsx(NU,{...s,ref:e})});vte.displayName=D5;var NU=se.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...i}=t,o=gte(D5,n),a={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},s=o.type==="single"?a:void 0;return J.jsx(hte,{...s,...i,ref:e,onPressedChange:u=>{u?o.onItemActivate(r):o.onItemDeactivate(r)}})}),i$e=X8,o$e=vte,Y8="Toolbar",[s$e]=ly(Y8,[nI,fte]),K8=nI(),_te=fte(),[a$e,bte]=s$e(Y8),xte=Q.forwardRef((t,e)=>{const{__scopeToolbar:n,orientation:r="horizontal",dir:i,loop:o=!0,...a}=t,s=K8(n),u=tI(i);return J.jsx(a$e,{scope:n,orientation:r,dir:u,children:J.jsx(lte,{asChild:!0,...s,orientation:r,dir:u,loop:o,children:J.jsx(Qr.div,{role:"toolbar","aria-orientation":r,dir:u,...a,ref:e})})})});xte.displayName=Y8;var wte="ToolbarSeparator",Ote=Q.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,i=bte(wte,n);return J.jsx(JLe,{orientation:i.orientation==="horizontal"?"vertical":"horizontal",...r,ref:e})});Ote.displayName=wte;var l$e="ToolbarButton",J8=Q.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,i=K8(n);return J.jsx(G8,{asChild:!0,...i,focusable:!t.disabled,children:J.jsx(Qr.button,{type:"button",...r,ref:e})})});J8.displayName=l$e;var c$e="ToolbarLink",u$e=Q.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,i=K8(n);return J.jsx(G8,{asChild:!0,...i,focusable:!0,children:J.jsx(Qr.a,{...r,ref:e,onKeyDown:wr(t.onKeyDown,o=>{o.key===" "&&o.currentTarget.click()})})})});u$e.displayName=c$e;var Ste="ToolbarToggleGroup",Cte=Q.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,i=bte(Ste,n),o=_te(n);return J.jsx(i$e,{"data-orientation":i.orientation,dir:i.dir,...o,...r,ref:e,rovingFocus:!1})});Cte.displayName=Ste;var h$e="ToolbarToggleItem",Tte=Q.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,i=_te(n),o={__scopeToolbar:t.__scopeToolbar};return J.jsx(J8,{asChild:!0,...o,children:J.jsx(o$e,{...i,...r,ref:e})})});Tte.displayName=h$e;var eB=xte,kte=Ote,A0=J8,rI=Cte,SP=Tte;function tB(t,e){return t===null||t===e?!1:t.dataset.editorDialog!==void 0||t.dataset.toolbarItem!==void 0||t.dataset.editorDropdown?!0:tB(t.parentElement,e)}function d$e(){const t=[...Array(256).keys()].map(n=>n.toString(16).padStart(2,"0")),e=crypto.getRandomValues(new Uint8Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,[...e.entries()].map(([n,r])=>[4,6,8,10].includes(n)?`-${t[r]}`:t[r]).join("")}const Ete=t=>t===0?"th":"td",Ate={center:jt.centeredCell,left:jt.leftAlignedCell,right:jt.rightAlignedCell},f$e=({mdastNode:t,parentEditor:e,lexicalTable:n})=>{const[r,i]=se.useState(null),[o,a]=Wo(Ms,Ma),s=se.useMemo(()=>A=>(A.__cacheKey??(A.__cacheKey=d$e()),A.__cacheKey),[]),u=se.useCallback(A=>{const R=n.getColCount();if(A===null){i(null);return}let[$,z]=A;if($>R-1&&($=0,z++),$<0&&($=R-1,z-=1),z>n.getRowCount()-1){i(null),e.update(()=>{if(n.getLatest().getNextSibling())n.getLatest().selectNext();else{const F=mi();n.insertAfter(F),F.select()}});return}if(z<0){i(null),e.update(()=>{n.getLatest().selectPrevious()});return}i([$,z])},[n,e]);se.useEffect(()=>{n.focusEmitter.subscribe(u)},[n,u]);const f=se.useCallback(A=>{A.preventDefault(),e.update(()=>{n.addRowToBottom(),i([0,n.getRowCount()])})},[e,n]),g=se.useCallback(A=>{A.preventDefault(),e.update(()=>{n.addColumnToRight(),i([n.getColCount(),0])})},[e,n]),[_,w]=se.useState([-1,-1]),S=se.useCallback(A=>{let R=A.target;for(;R&&!["TH","TD"].includes(R.tagName);){if(R===A.currentTarget)return;R=R.parentElement}if(R===null)return;const $=R.parentElement,B=$.parentElement.tagName==="TFOOT"?-1:Array.from($.children).indexOf(R),F=R.tagName==="TH"?-1:Array.from($.parentElement.children).indexOf($);w([B,F])},[]),E=xs();return se.createElement("table",{className:jt.tableEditor,onMouseOver:S,onMouseLeave:()=>{w([-1,-1])}},se.createElement("colgroup",null,a?null:se.createElement("col",null),Array.from({length:t.children[0].children.length},(A,R)=>{const z=(t.align??[])[R]??"left",B=Ate[z];return se.createElement("col",{key:R,className:B})}),a?null:se.createElement("col",null)),a||se.createElement("thead",null,se.createElement("tr",null,se.createElement("th",{className:jt.tableToolsColumn}),Array.from({length:t.children[0].children.length},(A,R)=>se.createElement("th",{key:R,"data-tool-cell":!0},se.createElement(g$e,{setActiveCellWithBoundaries:u,parentEditor:e,colIndex:R,highlightedCoordinates:_,lexicalTable:n,align:(t.align??[])[R]}))),se.createElement("th",{className:jt.tableToolsColumn,"data-tool-cell":!0},se.createElement("button",{className:jt.iconButton,type:"button",title:E("table.deleteTable","Delete table"),onClick:A=>{A.preventDefault(),e.update(()=>{n.selectNext(),n.remove()})}},o("delete_small"))))),se.createElement("tbody",null,t.children.map((A,R)=>{const $=Ete(R);return se.createElement("tr",{key:R},a||se.createElement($,{className:jt.toolCell,"data-tool-cell":!0},se.createElement(y$e,{setActiveCellWithBoundaries:u,parentEditor:e,rowIndex:R,highlightedCoordinates:_,lexicalTable:n})),A.children.map((z,B)=>{var F;return se.createElement(p$e,{align:(F=t.align)==null?void 0:F[B],key:s(z),contents:z.children,setActiveCell:u,rowIndex:R,colIndex:B,lexicalTable:n,parentEditor:e,activeCell:a?[-1,-1]:r})}),a||R===0&&se.createElement("th",{rowSpan:n.getRowCount(),"data-tool-cell":!0},se.createElement("button",{type:"button",className:jt.addColumnButton,onClick:g},o("add_column"))))})),a||se.createElement("tfoot",null,se.createElement("tr",null,se.createElement("th",null),se.createElement("th",{colSpan:n.getColCount()},se.createElement("button",{type:"button",className:jt.addRowButton,onClick:f},o("add_row"))),se.createElement("th",null))))},p$e=({align:t,...e})=>{const{activeCell:n,setActiveCell:r}=e,i=!!(n&&n[0]===e.colIndex&&n[1]===e.rowIndex),o=Ate[t??"left"],a=Ete(e.rowIndex);return se.createElement(a,{className:o,"data-active":i,onClick:()=>{r([e.colIndex,e.rowIndex])}},se.createElement(m$e,{...e,focus:i}))},m$e=({focus:t,setActiveCell:e,parentEditor:n,lexicalTable:r,contents:i,colIndex:o,rowIndex:a})=>{const[s,u,f,g,_,w,S,E,A]=Wo(NR,lk,BR,ck,Lw,kO,FR,id,O8),[R]=se.useState(()=>{const z=qN({nodes:f,theme:$R,namespace:"TableCellEditor"});return z.update(()=>{g8({root:zr(),mdastRoot:{type:"root",children:[{type:"paragraph",children:i}]},visitors:s,jsxComponentDescriptors:g,directiveDescriptors:_,codeBlockEditorDescriptors:w})}),z}),$=se.useCallback(z=>{R.getEditorState().read(()=>{const B=p8({root:zr(),jsxComponentDescriptors:g,visitors:u,jsxIsAvailable:S});n.update(()=>{r.updateCellContents(o,a,B.children[0].children)},{discrete:!0}),n.dispatchCommand(gb,void 0)}),e(z)},[o,R,u,g,S,r,n,a,e]);return se.useEffect(()=>$l(R.registerCommand(hR,z=>{z.preventDefault();const B=z.shiftKey?[o-1,a]:[o+1,a];return $(B),!0},eh),R.registerCommand(pR,()=>(e([o,a]),!1),mo),R.registerCommand(Pw,z=>{z?.preventDefault();const B=z?.shiftKey?[o,a-1]:[o,a+1];return $(B),!0},eh),R.registerCommand(mR,z=>{const B=z.relatedTarget;return tB(B,E.getRootElement())?!1:($(null),!0)},Ar),R.registerCommand(gb,()=>($(null),!0),Ar)),[o,R,E,a,$,e]),se.useEffect(()=>{t&&R.focus()},[t,R]),se.createElement(dee,{initialEditor:R},se.createElement(E8,{contentEditable:se.createElement(T8,null),placeholder:se.createElement("div",null),ErrorBoundary:k8}),A.map((z,B)=>se.createElement(z,{key:B})),se.createElement(AK,null))},g$e=({parentEditor:t,highlightedCoordinates:e,align:n,lexicalTable:r,colIndex:i,setActiveCellWithBoundaries:o})=>{const[a,s]=Wo(J0,Ms),u=se.useCallback(w=>{t.update(()=>{r.insertColumnAt(w)}),o([w,0])},[t,r,o]),f=se.useCallback(w=>{t.update(()=>{r.deleteColumnAt(w)})},[t,r]),g=se.useCallback((w,S)=>{t.update(()=>{r.setColumnAlign(w,S)})},[t,r]),_=xs();return se.createElement(q8,null,se.createElement(U8,{className:jt.tableColumnEditorTrigger,"data-active":e[0]===i+1,title:_("table.columnMenu","Column menu")},s("more_horiz")),se.createElement(W8,{container:a?.current},se.createElement(eI,{className:Gr(jt.tableColumnEditorPopoverContent),onOpenAutoFocus:w=>{w.preventDefault()},sideOffset:5,side:"top"},se.createElement(eB,{className:jt.tableColumnEditorToolbar},se.createElement(rI,{className:jt.toggleGroupRoot,onValueChange:w=>{g(i,w)},value:n??"left",type:"single","aria-label":_("table.textAlignment","Text alignment")},se.createElement(SP,{value:"left",title:_("table.alignLeft","Align left")},s("format_align_left")),se.createElement(SP,{value:"center",title:_("table.alignCenter","Align center")},s("format_align_center")),se.createElement(SP,{value:"right",title:_("table.alignRight","Align right")},s("format_align_right"))),se.createElement(kte,null),se.createElement(A0,{onClick:u.bind(null,i),title:_("table.insertColumnLeft","Insert a column to the left of this one")},s("insert_col_left")),se.createElement(A0,{onClick:u.bind(null,i+1),title:_("table.insertColumnRight","Insert a column to the right of this one")},s("insert_col_right")),se.createElement(A0,{onClick:f.bind(null,i),title:_("table.deleteColumn","Delete this column")},s("delete_small"))),se.createElement(H8,{className:jt.popoverArrow}))))},y$e=({parentEditor:t,highlightedCoordinates:e,lexicalTable:n,rowIndex:r,setActiveCellWithBoundaries:i})=>{const[o,a]=Wo(J0,Ms),s=se.useCallback(g=>{t.update(()=>{n.insertRowAt(g)}),i([0,g])},[t,n,i]),u=se.useCallback(g=>{t.update(()=>{n.deleteRowAt(g)})},[t,n]),f=xs();return se.createElement(q8,null,se.createElement(U8,{className:jt.tableColumnEditorTrigger,"data-active":e[1]===r,title:f("table.rowMenu","Row menu")},a("more_horiz")),se.createElement(W8,{container:o?.current},se.createElement(eI,{className:Gr(jt.tableColumnEditorPopoverContent),onOpenAutoFocus:g=>{g.preventDefault()},sideOffset:5,side:"bottom"},se.createElement(eB,{className:jt.tableColumnEditorToolbar},se.createElement(A0,{onClick:s.bind(null,r),title:f("table.insertRowAbove","Insert a row above this one")},a("insert_row_above")),se.createElement(A0,{onClick:s.bind(null,r+1),title:f("table.insertRowBelow","Insert a row below this one")},a("insert_row_below")),se.createElement(A0,{onClick:u.bind(null,r),title:f("table.deleteRow","Delete this row")},a("delete_small"))),se.createElement(H8,{className:jt.popoverArrow}))))};var v$e=Object.defineProperty,_$e=(t,e,n)=>e in t?v$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,BU=(t,e,n)=>(_$e(t,typeof e!="symbol"?e+"":e,n),n);const FU={type:"tableCell",children:[]};function b$e(){let t=E0;return{publish:e=>{t(e)},subscribe:e=>{t=e}}}class IO extends ry{constructor(e,n){super(n),BU(this,"__mdastNode"),BU(this,"focusEmitter",b$e()),this.__mdastNode=e??{type:"table",children:[]}}static getType(){return"table"}static clone(e){return new IO(structuredClone(e.__mdastNode),e.__key)}static importJSON(e){return nB(e.mdastNode)}static importDOM(){return{table:()=>({conversion:w$e,priority:3})}}exportJSON(){return{mdastNode:structuredClone(this.__mdastNode),type:"table",version:1}}getMdastNode(){return this.__mdastNode}getRowCount(){return this.__mdastNode.children.length}getColCount(){var e;return((e=this.__mdastNode.children[0])==null?void 0:e.children.length)||0}createDOM(){return document.createElement("div")}updateDOM(){return!1}updateCellContents(e,n,r){const o=this.getWritable().__mdastNode,a=o.children[n],s=a.children,u=s[e],f=Array.from(s),g={...u,children:r},_={...a,children:f};f[e]=g,o.children[n]=_}insertColumnAt(e){const r=this.getWritable().__mdastNode;for(let i=0;i<r.children.length;i++){const o=r.children[i],a=o.children,s=Array.from(a),u={...o,children:s};s.splice(e,0,structuredClone(FU)),r.children[i]=u}r.align&&r.align.length>0&&r.align.splice(e,0,"left")}deleteColumnAt(e){const r=this.getWritable().__mdastNode;for(let i=0;i<r.children.length;i++){const o=r.children[i],a=o.children,s=Array.from(a),u={...o,children:s};s.splice(e,1),r.children[i]=u}}insertRowAt(e){const r=this.getWritable().__mdastNode,i={type:"tableRow",children:Array.from({length:this.getColCount()},()=>structuredClone(FU))};r.children.splice(e,0,i)}deleteRowAt(e){this.getRowCount()===1?(this.selectNext(),this.remove()):this.getWritable().__mdastNode.children.splice(e,1)}addRowToBottom(){this.insertRowAt(this.getRowCount())}addColumnToRight(){this.insertColumnAt(this.getColCount())}setColumnAlign(e,n){const i=this.getWritable().__mdastNode;i.align??(i.align=[]),i.align[e]=n}decorate(e){return se.createElement(f$e,{lexicalTable:this,mdastNode:this.__mdastNode,parentEditor:e})}select(e){this.focusEmitter.publish(e??[0,0])}isInline(){return!1}}function x$e(t){return t instanceof IO}function nB(t){return new IO(t)}function w$e(t){const e=t.querySelectorAll("tr"),n=Array.from(e).map(r=>({type:"tableRow",children:Array.from(r.querySelectorAll("td, th")).map(i=>({type:"tableCell",children:[{type:"text",value:i.textContent}]}))}));return{node:new IO({type:"table",children:n})}}const O$e={testLexicalNode:x$e,visitLexicalNode({actions:t,mdastParent:e,lexicalNode:n}){t.appendToParent(e,n.getMdastNode())}},S$e={testNode:"table",visitNode({mdastNode:t,lexicalParent:e}){e.append(nB(t))}};function C$e(t=1,e=1){const n={type:"table",children:[]};for(let r=0;r<t;r++){const i={type:"tableRow",children:[]};for(let o=0;o<e;o++){const a={type:"tableCell",children:[]};i.children.push(a)}n.children.push(i)}return n}const Pte=bs(t=>{t.link(t.pipe(Pte,Ug(({rows:e,columns:n})=>()=>nB(C$e(e,n)))),VR)}),T$e=Dl({init(t,e){t.pubIn({[zw]:RIe(),[$w]:VIe(),[ed]:S$e,[kf]:IO,[Ef]:O$e,[uk]:NIe({tableCellPadding:e?.tableCellPadding??!0,tablePipeAlign:e?.tablePipeAlign??!0})})}}),k$e={testNode:"link",visitNode({mdastNode:t,actions:e}){e.addAndStepInto(Hg(t.url,{title:t.title}))}},E$e={testLexicalNode:Zc,visitLexicalNode:({lexicalNode:t,actions:e})=>{e.addAndStepInto("link",{url:t.getURL(),title:t.getTitle()})}};function A$e({validateUrl:t,attributes:e}){const[n]=Ll();return Q.useEffect((()=>{if(!n.hasNodes([oy]))throw new Error("LinkPlugin: LinkNode not registered on editor");return $l(n.registerCommand(Nw,(r=>{if(r===null)return rD(r),!0;if(typeof r=="string")return!(t!==void 0&&!t(r))&&(rD(r,e),!0);{const{url:i,target:o,rel:a,title:s}=r;return rD(i,{...e,rel:a,target:o,title:s}),!0}}),mo),t!==void 0?n.registerCommand(GT,(r=>{const i=sn();if(!Ht(i)||i.isCollapsed()||!w0(r,ClipboardEvent)||r.clipboardData===null)return!1;const o=r.clipboardData.getData("text");return!!t(o)&&!i.getNodes().some((a=>Rt(a)))&&(n.dispatchCommand(Nw,{...e,url:o}),r.preventDefault(),!0)}),mo):()=>{})}),[n,t,e]),null}function jU(t,e=(n=>n)){return n=>{const r=t.exec(n);return r===null?null:{index:r.index,length:r[0].length,text:r[0],url:e(r[0])}}}function Mte(t,e){for(let n=0;n<e.length;n++){const r=e[n](t);if(r)return r}return null}const P$e=/[.,;\s]/;function L5(t){return P$e.test(t)}function Rte(t){return L5(t[t.length-1])}function M4(t){return L5(t[0])}function Ite(t){let e=t.getPreviousSibling();return Rt(e)&&(e=e.getLastDescendant()),e===null||pf(e)||hn(e)&&Rte(e.getTextContent())}function Dte(t){let e=t.getNextSibling();return Rt(e)&&(e=e.getFirstDescendant()),e===null||pf(e)||hn(e)&&M4(e.getTextContent())}function M$e(t,e,n,r){return(t>0?L5(n[t-1]):Ite(r[0]))?e<n.length?L5(n[e]):Dte(r[r.length-1]):!1}function R$e(t,e,n){const r=[],i=[],o=[];let a=0,s=0;const u=[...t];for(;u.length>0;){const f=u[0],g=f.getTextContent().length,_=s;s+g<=e?(r.push(f),a+=g):_>=n?o.push(f):i.push(f),s+=g,u.shift()}return[a,r,i,o]}function I$e(t,e,n,r){const i=b4(r.url,r.attributes);if(t.length===1){let o,a=t[0];e===0?[o,a]=a.splitText(n):[,o,a]=a.splitText(e,n);const s=Yi(r.text);return s.setFormat(o.getFormat()),s.setDetail(o.getDetail()),s.setStyle(o.getStyle()),i.append(s),o.replace(i),a}if(t.length>1){const o=t[0];let a,s=o.getTextContent().length;e===0?a=o:[,a]=o.splitText(e);const u=[];let f;for(let S=1;S<t.length;S++){const E=t[S],A=E.getTextContent().length,R=s;if(R<n)if(s+A<=n)u.push(E);else{const[$,z]=E.splitText(n-R);u.push($),f=z}s+=A}const g=sn(),_=g?g.getNodes().find(hn):void 0,w=Yi(a.getTextContent());return w.setFormat(a.getFormat()),w.setDetail(a.getDetail()),w.setStyle(a.getStyle()),i.append(w,...u),_&&_===a&&(Ht(g)?w.select(g.anchor.offset,g.focus.offset):es(g)&&w.select(0,w.getTextContent().length)),a.replace(i),f}}function mD(t,e,n){const r=t.getChildren(),i=r.length;for(let u=0;u<i;u++){const f=r[u];if(!hn(f)||!f.isSimpleText())return CP(t),void n(null,t.getURL())}const o=t.getTextContent(),a=Mte(o,e);if(a===null||a.text!==o||!Ite(t)||!Dte(t))return CP(t),void n(null,t.getURL());const s=t.getURL();if(s!==a.url&&(t.setURL(a.url),n(a.url,s)),a.attributes){const u=t.getRel();u!==a.attributes.rel&&(t.setRel(a.attributes.rel||null),n(a.attributes.rel||null,u));const f=t.getTarget();f!==a.attributes.target&&(t.setTarget(a.attributes.target||null),n(a.attributes.target||null,f))}}function CP(t){const e=t.getChildren();for(let n=e.length-1;n>=0;n--)t.insertAfter(e[n]);return t.remove(),e.map((n=>n.getLatest()))}function D$e(t,e,n){Q.useEffect((()=>{t.hasNodes([QR])||(function(i,...o){const a=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",i);for(const u of o)s.append("v",u);throw a.search=s.toString(),Error(`Minified Lexical error #${i}; visit ${a.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(77);const r=(i,o)=>{n&&n(i,o)};return $l(t.registerNodeTransform(fm,(i=>{const o=i.getParentOrThrow(),a=i.getPreviousSibling();if(lf(o)&&!o.getIsUnlinked())mD(o,e,r);else if(!Zc(o)){if(i.isSimpleText()&&(M4(i.getTextContent())||!lf(a))){const s=(function(u){const f=[u];let g=u.getNextSibling();for(;g!==null&&hn(g)&&g.isSimpleText()&&(f.push(g),!/[\s]/.test(g.getTextContent()));)g=g.getNextSibling();return f})(i);(function(u,f,g){let _=[...u];const w=_.map((R=>R.getTextContent())).join("");let S,E=w,A=0;for(;(S=Mte(E,f))&&S!==null;){const R=S.index,$=R+S.length;if(M$e(A+R,A+$,w,_)){const[z,,B,F]=R$e(_,A+R,A+$),U=I$e(B,A+R-z,A+$-z,S);_=U?[U,...F]:F,g(S.url,null),A=0}else A+=$;E=E.substring($)}})(s,e,r)}(function(s,u,f){const g=s.getPreviousSibling(),_=s.getNextSibling(),w=s.getTextContent();var S;!lf(g)||g.getIsUnlinked()||M4(w)&&(S=w,!(g.isEmailURI()?/^\.[a-zA-Z]{2,}/.test(S):/^\.[a-zA-Z0-9]{1,}/.test(S)))||(g.append(s),mD(g,u,f),f(null,g.getURL())),!lf(_)||_.getIsUnlinked()||Rte(w)||(CP(_),mD(_,u,f),f(null,_.getURL()))})(i,e,r)}})),t.registerCommand(Nw,(i=>{const o=sn();return i!==null||!Ht(o)||o.extract().forEach((a=>{const s=a.getParent();lf(s)&&(s.setIsUnlinked(!s.getIsUnlinked()),s.markDirty())})),!1}),mo))}),[t,e,n])}function L$e({matchers:t,onChange:e}){const[n]=Ll();return D$e(n,t,e),null}const $$e=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,z$e=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,N$e=[jU($$e,t=>t.startsWith("http")?t:`https://${t}`),jU(z$e,t=>`mailto:${t}`)],B$e=()=>se.createElement(L$e,{matchers:N$e}),F$e=kn(!1),j$e=Dl({init(t,e){const n=!!e?.disableAutoLink,r=e?.validateUrl?{validateUrl:e.validateUrl}:{},i=()=>se.createElement(se.Fragment,null,se.createElement(A$e,{...r}),n?null:se.createElement(B$e,null));t.pubIn({[EO]:"link",[ed]:k$e,[kf]:[oy,QR],[Ef]:E$e,[F$e]:n,[S8]:i,[$b]:i})}});function V$e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Q$e=["color"],U$e=Q.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=V$e(t,Q$e);return Q.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),Q.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const VU=()=>se.createElement("div",{className:jt.imagePlaceholder},se.createElement(U$e,null));function R4(t){const{nodeKey:e,imageSource:n,initialImagePath:r,title:i,alt:o,width:a,height:s}=t,[u,f,g]=Wo(Dne,Ms,Ma),[_]=Ll(),w=Ri(Rne),S=xs();return se.createElement("div",{className:jt.editImageToolbar},se.createElement("button",{className:jt.iconButton,type:"button",title:S("imageEditor.deleteImage","Delete image"),disabled:g,onClick:E=>{E.preventDefault(),_.update(()=>{var A;(A=Ii(e))==null||A.remove()})}},f("delete_small")),!u&&se.createElement("button",{type:"button",className:Gr(jt.iconButton,jt.editImageButton),title:S("imageEditor.editImage","Edit image"),disabled:g,onClick:()=>{w({nodeKey:e,initialValues:{src:r??n,title:i,altText:o,width:Vw(a),height:Vw(s)}})}},f("settings")))}var iI="Dialog",[Lte]=ly(iI),[Z$e,Af]=Lte(iI),$te=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,s=Q.useRef(null),u=Q.useRef(null),[f,g]=Yg({prop:r,defaultProp:i??!1,onChange:o,caller:iI});return J.jsx(Z$e,{scope:e,triggerRef:s,contentRef:u,contentId:Bg(),titleId:Bg(),descriptionId:Bg(),open:f,onOpenChange:g,onOpenToggle:Q.useCallback(()=>g(_=>!_),[g]),modal:a,children:n})};$te.displayName=iI;var zte="DialogTrigger",q$e=Q.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Af(zte,n),o=ko(e,i.triggerRef);return J.jsx(Qr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":oB(i.open),...r,ref:o,onClick:wr(t.onClick,i.onOpenToggle)})});q$e.displayName=zte;var rB="DialogPortal",[W$e,Nte]=Lte(rB,{forceMount:void 0}),Bte=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,o=Af(rB,e);return J.jsx(W$e,{scope:e,forceMount:n,children:Q.Children.map(r,a=>J.jsx(ev,{present:n||o.open,children:J.jsx(pk,{asChild:!0,container:i,children:a})}))})};Bte.displayName=rB;var $5="DialogOverlay",Fte=Q.forwardRef((t,e)=>{const n=Nte($5,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=Af($5,t.__scopeDialog);return o.modal?J.jsx(ev,{present:r||o.open,children:J.jsx(G$e,{...i,ref:e})}):null});Fte.displayName=$5;var H$e=Bw("DialogOverlay.RemoveScroll"),G$e=Q.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Af($5,n);return J.jsx(KR,{as:H$e,allowPinchZoom:!0,shards:[i.contentRef],children:J.jsx(Qr.div,{"data-state":oB(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),xb="DialogContent",jte=Q.forwardRef((t,e)=>{const n=Nte(xb,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=Af(xb,t.__scopeDialog);return J.jsx(ev,{present:r||o.open,children:o.modal?J.jsx(X$e,{...i,ref:e}):J.jsx(Y$e,{...i,ref:e})})});jte.displayName=xb;var X$e=Q.forwardRef((t,e)=>{const n=Af(xb,t.__scopeDialog),r=Q.useRef(null),i=ko(e,n.contentRef,r);return Q.useEffect(()=>{const o=r.current;if(o)return Q8(o)},[]),J.jsx(Vte,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:wr(t.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:wr(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,s=a.button===0&&a.ctrlKey===!0;(a.button===2||s)&&o.preventDefault()}),onFocusOutside:wr(t.onFocusOutside,o=>o.preventDefault())})}),Y$e=Q.forwardRef((t,e)=>{const n=Af(xb,t.__scopeDialog),r=Q.useRef(!1),i=Q.useRef(!1);return J.jsx(Vte,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=o.target;n.triggerRef.current?.contains(a)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),Vte=Q.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...a}=t,s=Af(xb,n),u=Q.useRef(null),f=ko(e,u);return M8(),J.jsxs(J.Fragment,{children:[J.jsx(ZR,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:J.jsx(dk,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":oB(s.open),...a,ref:f,onDismiss:()=>s.onOpenChange(!1)})}),J.jsxs(J.Fragment,{children:[J.jsx(J$e,{titleId:s.titleId}),J.jsx(t4e,{contentRef:u,descriptionId:s.descriptionId})]})]})}),iB="DialogTitle",Qte=Q.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Af(iB,n);return J.jsx(Qr.h2,{id:i.titleId,...r,ref:e})});Qte.displayName=iB;var Ute="DialogDescription",K$e=Q.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Af(Ute,n);return J.jsx(Qr.p,{id:i.descriptionId,...r,ref:e})});K$e.displayName=Ute;var Zte="DialogClose",qte=Q.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Af(Zte,n);return J.jsx(Qr.button,{type:"button",...r,ref:e,onClick:wr(t.onClick,()=>i.onOpenChange(!1))})});qte.displayName=Zte;function oB(t){return t?"open":"closed"}var Wte="DialogTitleWarning",[LXe,Hte]=WIe(Wte,{contentName:xb,titleName:iB,docsSlug:"dialog"}),J$e=({titleId:t})=>{const e=Hte(Wte),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return Q.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},e4e="DialogDescriptionWarning",t4e=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Hte(e4e).contentName}}.`;return Q.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Gte=$te,Xte=Bte,Yte=Fte,Kte=jte,Jte=Qte,ene=qte,yk=t=>t.type==="checkbox",j_=t=>t instanceof Date,Uc=t=>t==null;const tne=t=>typeof t=="object";var Js=t=>!Uc(t)&&!Array.isArray(t)&&tne(t)&&!j_(t),nne=t=>Js(t)&&t.target?yk(t.target)?t.target.checked:t.target.value:t,n4e=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,rne=(t,e)=>t.has(n4e(e)),r4e=t=>{const e=t.constructor&&t.constructor.prototype;return Js(e)&&e.hasOwnProperty("isPrototypeOf")},sB=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Lo(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(sB&&(t instanceof Blob||e))return t;const n=Array.isArray(t);if(!n&&!(Js(t)&&r4e(t)))return t;const r=n?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=Lo(t[i]));return r}var oI=t=>/^\w*$/.test(t),To=t=>t===void 0,sI=t=>Array.isArray(t)?t.filter(Boolean):[],aB=t=>sI(t.replace(/["|']|\]/g,"").split(/\.|\[/)),wn=(t,e,n)=>{if(!e||!Js(t))return n;const r=(oI(e)?[e]:aB(e)).reduce((i,o)=>Uc(i)?i:i[o],t);return To(r)||r===t?To(t[e])?n:t[e]:r},$u=t=>typeof t=="boolean",oc=t=>typeof t=="function",Xi=(t,e,n)=>{let r=-1;const i=oI(e)?[e]:aB(e),o=i.length,a=o-1;for(;++r<o;){const s=i[r];let u=n;if(r!==a){const f=t[s];u=Js(f)||Array.isArray(f)?f:isNaN(+i[r+1])?{}:[]}if(s==="__proto__"||s==="constructor"||s==="prototype")return;t[s]=u,t=t[s]}};const z5={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Fh={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},vg={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ine=se.createContext(null);ine.displayName="HookFormContext";const aI=()=>se.useContext(ine);var one=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(i,o,{get:()=>{const a=o;return e._proxyFormState[a]!==Fh.all&&(e._proxyFormState[a]=!r||Fh.all),n&&(n[a]=!0),t[a]}});return i};const lI=typeof window<"u"?se.useLayoutEffect:se.useEffect;function i4e(t){const e=aI(),{control:n=e.control,disabled:r,name:i,exact:o}=t||{},[a,s]=se.useState(n._formState),u=se.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return lI(()=>n._subscribe({name:i,formState:u.current,exact:o,callback:f=>{!r&&s({...n._formState,...f})}}),[i,r,o]),se.useEffect(()=>{u.current.isValid&&n._setValid(!0)},[n]),se.useMemo(()=>one(a,n,u.current,!1),[a,n])}var Qu=t=>typeof t=="string",I4=(t,e,n,r,i)=>Qu(t)?(r&&e.watch.add(t),wn(n,t,i)):Array.isArray(t)?t.map(o=>(r&&e.watch.add(o),wn(n,o))):(r&&(e.watchAll=!0),n),D4=t=>Uc(t)||!tne(t);function cf(t,e,n=new WeakSet){if(D4(t)||D4(e))return Object.is(t,e);if(j_(t)&&j_(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const o of r){const a=t[o];if(!i.includes(o))return!1;if(o!=="ref"){const s=e[o];if(j_(a)&&j_(s)||Js(a)&&Js(s)||Array.isArray(a)&&Array.isArray(s)?!cf(a,s,n):!Object.is(a,s))return!1}}return!0}function o4e(t){const e=aI(),{control:n=e.control,name:r,defaultValue:i,disabled:o,exact:a,compute:s}=t||{},u=se.useRef(i),f=se.useRef(s),g=se.useRef(void 0),_=se.useRef(n),w=se.useRef(r);f.current=s;const[S,E]=se.useState(()=>{const F=n._getWatch(r,u.current);return f.current?f.current(F):F}),A=se.useCallback(F=>{const U=I4(r,n._names,F||n._formValues,!1,u.current);return f.current?f.current(U):U},[n._formValues,n._names,r]),R=se.useCallback(F=>{if(!o){const U=I4(r,n._names,F||n._formValues,!1,u.current);if(f.current){const q=f.current(U);cf(q,g.current)||(E(q),g.current=q)}else E(U)}},[n._formValues,n._names,o,r]);lI(()=>((_.current!==n||!cf(w.current,r))&&(_.current=n,w.current=r,R()),n._subscribe({name:r,formState:{values:!0},exact:a,callback:F=>{R(F.values)}})),[n,a,r,R]),se.useEffect(()=>n._removeUnmounted());const $=_.current!==n,z=w.current,B=se.useMemo(()=>{if(o)return null;const F=!$&&!cf(z,r);return $||F?A():null},[o,$,r,z,A]);return B!==null?B:S}function s4e(t){const e=aI(),{name:n,disabled:r,control:i=e.control,shouldUnregister:o,defaultValue:a,exact:s=!0}=t,u=rne(i._names.array,n),f=se.useMemo(()=>wn(i._formValues,n,wn(i._defaultValues,n,a)),[i,n,a]),g=o4e({control:i,name:n,defaultValue:f,exact:s}),_=i4e({control:i,name:n,exact:s}),w=se.useRef(t),S=se.useRef(void 0),E=se.useRef(i.register(n,{...t.rules,value:g,...$u(t.disabled)?{disabled:t.disabled}:{}}));w.current=t;const A=se.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!wn(_.errors,n)},isDirty:{enumerable:!0,get:()=>!!wn(_.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!wn(_.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!wn(_.validatingFields,n)},error:{enumerable:!0,get:()=>wn(_.errors,n)}}),[_,n]),R=se.useCallback(F=>E.current.onChange({target:{value:nne(F),name:n},type:z5.CHANGE}),[n]),$=se.useCallback(()=>E.current.onBlur({target:{value:wn(i._formValues,n),name:n},type:z5.BLUR}),[n,i._formValues]),z=se.useCallback(F=>{const U=wn(i._fields,n);U&&U._f&&F&&(U._f.ref={focus:()=>oc(F.focus)&&F.focus(),select:()=>oc(F.select)&&F.select(),setCustomValidity:q=>oc(F.setCustomValidity)&&F.setCustomValidity(q),reportValidity:()=>oc(F.reportValidity)&&F.reportValidity()})},[i._fields,n]),B=se.useMemo(()=>({name:n,value:g,...$u(r)||_.disabled?{disabled:_.disabled||r}:{},onChange:R,onBlur:$,ref:z}),[n,r,_.disabled,R,$,z,g]);return se.useEffect(()=>{const F=i._options.shouldUnregister||o,U=S.current;U&&U!==n&&!u&&i.unregister(U),i.register(n,{...w.current.rules,...$u(w.current.disabled)?{disabled:w.current.disabled}:{}});const q=(H,ne)=>{const ie=wn(i._fields,H);ie&&ie._f&&(ie._f.mount=ne)};if(q(n,!0),F){const H=Lo(wn(i._options.defaultValues,n,w.current.defaultValue));Xi(i._defaultValues,n,H),To(wn(i._formValues,n))&&Xi(i._formValues,n,H)}return!u&&i.register(n),S.current=n,()=>{(u?F&&!i._state.action:F)?i.unregister(n):q(n,!1)}},[n,i,u,o]),se.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),se.useMemo(()=>({field:B,formState:_,fieldState:A}),[B,_,A])}const a4e=t=>t.render(s4e(t));var l4e=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},Xc=t=>Array.isArray(t)?t:[t],QU=()=>{let t=[];return{get observers(){return t},next:i=>{for(const o of t)o.next&&o.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(o=>o!==i)}}),unsubscribe:()=>{t=[]}}};function sne(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],o=e[r];if(i&&Js(i)&&o){const a=sne(i,o);Js(a)&&(n[r]=a)}else t[r]&&(n[r]=o)}return n}var El=t=>Js(t)&&!Object.keys(t).length,lB=t=>t.type==="file",N5=t=>{if(!sB)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},ane=t=>t.type==="select-multiple",cB=t=>t.type==="radio",c4e=t=>cB(t)||yk(t),gD=t=>N5(t)&&t.isConnected;function u4e(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=To(t)?r++:t[e[r++]];return t}function h4e(t){for(const e in t)if(t.hasOwnProperty(e)&&!To(t[e]))return!1;return!0}function Ts(t,e){const n=Array.isArray(e)?e:oI(e)?[e]:aB(e),r=n.length===1?t:u4e(t,n),i=n.length-1,o=n[i];return r&&delete r[o],i!==0&&(Js(r)&&El(r)||Array.isArray(r)&&h4e(r))&&Ts(t,n.slice(0,-1)),t}var d4e=t=>{for(const e in t)if(oc(t[e]))return!0;return!1};function lne(t){return Array.isArray(t)||Js(t)&&!d4e(t)}function L4(t,e={}){for(const n in t){const r=t[n];lne(r)?(e[n]=Array.isArray(r)?[]:{},L4(r,e[n])):To(r)||(e[n]=!0)}return e}function L1(t,e,n){n||(n=L4(e));for(const r in t){const i=t[r];if(lne(i))To(e)||D4(n[r])?n[r]=L4(i,Array.isArray(i)?[]:{}):L1(i,Uc(e)?{}:e[r],n[r]);else{const o=e[r];n[r]=!cf(i,o)}}return n}const UU={value:!1,isValid:!1},ZU={value:!0,isValid:!0};var cne=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!To(t[0].attributes.value)?To(t[0].value)||t[0].value===""?ZU:{value:t[0].value,isValid:!0}:ZU:UU}return UU},une=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>To(t)?t:e?t===""?NaN:t&&+t:n&&Qu(t)?new Date(t):r?r(t):t;const qU={isValid:!1,value:null};var hne=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,qU):qU;function WU(t){const e=t.ref;return lB(e)?e.files:cB(e)?hne(t.refs).value:ane(e)?[...e.selectedOptions].map(({value:n})=>n):yk(e)?cne(t.refs).value:une(To(e.value)?t.ref.value:e.value,t)}var f4e=(t,e,n,r)=>{const i={};for(const o of t){const a=wn(e,o);a&&Xi(i,o,a._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},B5=t=>t instanceof RegExp,v2=t=>To(t)?t:B5(t)?t.source:Js(t)?B5(t.value)?t.value.source:t.value:t,Q1=t=>({isOnSubmit:!t||t===Fh.onSubmit,isOnBlur:t===Fh.onBlur,isOnChange:t===Fh.onChange,isOnAll:t===Fh.all,isOnTouch:t===Fh.onTouched});const HU="AsyncFunction";var p4e=t=>!!t&&!!t.validate&&!!(oc(t.validate)&&t.validate.constructor.name===HU||Js(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===HU)),m4e=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),$4=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const aw=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const o=wn(t,i);if(o){const{_f:a,...s}=o;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],i)&&!r)return!0;if(a.ref&&e(a.ref,a.name)&&!r)return!0;if(aw(s,e))break}else if(Js(s)&&aw(s,e))break}}};function GU(t,e,n){const r=wn(t,n);if(r||oI(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const o=i.join("."),a=wn(e,o),s=wn(t,o);if(a&&!Array.isArray(a)&&n!==o)return{name:n};if(s&&s.type)return{name:o,error:s};if(s&&s.root&&s.root.type)return{name:`${o}.root`,error:s.root};i.pop()}return{name:n}}var g4e=(t,e,n,r)=>{n(t);const{name:i,...o}=t;return El(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(a=>e[a]===(!r||Fh.all))},y4e=(t,e,n)=>!t||!e||t===e||Xc(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),v4e=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,_4e=(t,e)=>!sI(wn(t,e)).length&&Ts(t,e),dne=(t,e,n)=>{const r=Xc(wn(t,n));return Xi(r,"root",e[n]),Xi(t,n,r),t};function XU(t,e,n="validate"){if(Qu(t)||Array.isArray(t)&&t.every(Qu)||$u(t)&&!t)return{type:n,message:Qu(t)?t:"",ref:e}}var w1=t=>Js(t)&&!B5(t)?t:{value:t,message:""},z4=async(t,e,n,r,i,o)=>{const{ref:a,refs:s,required:u,maxLength:f,minLength:g,min:_,max:w,pattern:S,validate:E,name:A,valueAsNumber:R,mount:$}=t._f,z=wn(n,A);if(!$||e.has(A))return{};const B=s?s[0]:a,F=re=>{i&&B.reportValidity&&(B.setCustomValidity($u(re)?"":re||""),B.reportValidity())},U={},q=cB(a),H=yk(a),ne=q||H,ie=(R||lB(a))&&To(a.value)&&To(z)||N5(a)&&a.value===""||z===""||Array.isArray(z)&&!z.length,ce=l4e.bind(null,A,r,U),xe=(re,me,Te,ye=vg.maxLength,_e=vg.minLength)=>{const ke=re?me:Te;U[A]={type:re?ye:_e,message:ke,ref:a,...ce(re?ye:_e,ke)}};if(o?!Array.isArray(z)||!z.length:u&&(!ne&&(ie||Uc(z))||$u(z)&&!z||H&&!cne(s).isValid||q&&!hne(s).isValid)){const{value:re,message:me}=Qu(u)?{value:!!u,message:u}:w1(u);if(re&&(U[A]={type:vg.required,message:me,ref:B,...ce(vg.required,me)},!r))return F(me),U}if(!ie&&(!Uc(_)||!Uc(w))){let re,me;const Te=w1(w),ye=w1(_);if(!Uc(z)&&!isNaN(z)){const _e=a.valueAsNumber||z&&+z;Uc(Te.value)||(re=_e>Te.value),Uc(ye.value)||(me=_e<ye.value)}else{const _e=a.valueAsDate||new Date(z),ke=Se=>new Date(new Date().toDateString()+" "+Se),Ne=a.type=="time",Qe=a.type=="week";Qu(Te.value)&&z&&(re=Ne?ke(z)>ke(Te.value):Qe?z>Te.value:_e>new Date(Te.value)),Qu(ye.value)&&z&&(me=Ne?ke(z)<ke(ye.value):Qe?z<ye.value:_e<new Date(ye.value))}if((re||me)&&(xe(!!re,Te.message,ye.message,vg.max,vg.min),!r))return F(U[A].message),U}if((f||g)&&!ie&&(Qu(z)||o&&Array.isArray(z))){const re=w1(f),me=w1(g),Te=!Uc(re.value)&&z.length>+re.value,ye=!Uc(me.value)&&z.length<+me.value;if((Te||ye)&&(xe(Te,re.message,me.message),!r))return F(U[A].message),U}if(S&&!ie&&Qu(z)){const{value:re,message:me}=w1(S);if(B5(re)&&!z.match(re)&&(U[A]={type:vg.pattern,message:me,ref:a,...ce(vg.pattern,me)},!r))return F(me),U}if(E){if(oc(E)){const re=await E(z,n),me=XU(re,B);if(me&&(U[A]={...me,...ce(vg.validate,me.message)},!r))return F(me.message),U}else if(Js(E)){let re={};for(const me in E){if(!El(re)&&!r)break;const Te=XU(await E[me](z,n),B,me);Te&&(re={...Te,...ce(me,Te.message)},F(Te.message),r&&(U[A]=re))}if(!El(re)&&(U[A]={ref:B,...re},!r))return U}}return F(!0),U};const b4e={mode:Fh.onSubmit,reValidateMode:Fh.onChange,shouldFocusError:!0};function x4e(t={}){let e={...b4e,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:oc(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Js(e.defaultValues)||Js(e.values)?Lo(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:Lo(i),a={action:!1,mount:!1,watch:!1,keepIsValid:!1},s={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,f=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_={...g};let w={..._};const S={array:QU(),state:QU()},E=e.criteriaMode===Fh.all,A=Ue=>Je=>{clearTimeout(f),f=setTimeout(Ue,Je)},R=async Ue=>{if(!a.keepIsValid&&!e.disabled&&(_.isValid||w.isValid||Ue)){let Je;e.resolver?(Je=El((await ne()).errors),$()):Je=await ce(r,!0),Je!==n.isValid&&S.state.next({isValid:Je})}},$=(Ue,Je)=>{!e.disabled&&(_.isValidating||_.validatingFields||w.isValidating||w.validatingFields)&&((Ue||Array.from(s.mount)).forEach(xt=>{xt&&(Je?Xi(n.validatingFields,xt,Je):Ts(n.validatingFields,xt))}),S.state.next({validatingFields:n.validatingFields,isValidating:!El(n.validatingFields)}))},z=(Ue,Je=[],xt,Et,Vt=!0,we=!0)=>{if(Et&&xt&&!e.disabled){if(a.action=!0,we&&Array.isArray(wn(r,Ue))){const ae=xt(wn(r,Ue),Et.argA,Et.argB);Vt&&Xi(r,Ue,ae)}if(we&&Array.isArray(wn(n.errors,Ue))){const ae=xt(wn(n.errors,Ue),Et.argA,Et.argB);Vt&&Xi(n.errors,Ue,ae),_4e(n.errors,Ue)}if((_.touchedFields||w.touchedFields)&&we&&Array.isArray(wn(n.touchedFields,Ue))){const ae=xt(wn(n.touchedFields,Ue),Et.argA,Et.argB);Vt&&Xi(n.touchedFields,Ue,ae)}(_.dirtyFields||w.dirtyFields)&&(n.dirtyFields=L1(i,o)),S.state.next({name:Ue,isDirty:re(Ue,Je),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Xi(o,Ue,Je)},B=(Ue,Je)=>{Xi(n.errors,Ue,Je),S.state.next({errors:n.errors})},F=Ue=>{n.errors=Ue,S.state.next({errors:n.errors,isValid:!1})},U=(Ue,Je,xt,Et)=>{const Vt=wn(r,Ue);if(Vt){const we=wn(o,Ue,To(xt)?wn(i,Ue):xt);To(we)||Et&&Et.defaultChecked||Je?Xi(o,Ue,Je?we:WU(Vt._f)):ye(Ue,we),a.mount&&!a.action&&R()}},q=(Ue,Je,xt,Et,Vt)=>{let we=!1,ae=!1;const Y={name:Ue};if(!e.disabled){if(!xt||Et){(_.isDirty||w.isDirty)&&(ae=n.isDirty,n.isDirty=Y.isDirty=re(),we=ae!==Y.isDirty);const be=cf(wn(i,Ue),Je);ae=!!wn(n.dirtyFields,Ue),be?Ts(n.dirtyFields,Ue):Xi(n.dirtyFields,Ue,!0),Y.dirtyFields=n.dirtyFields,we=we||(_.dirtyFields||w.dirtyFields)&&ae!==!be}if(xt){const be=wn(n.touchedFields,Ue);be||(Xi(n.touchedFields,Ue,xt),Y.touchedFields=n.touchedFields,we=we||(_.touchedFields||w.touchedFields)&&be!==xt)}we&&Vt&&S.state.next(Y)}return we?Y:{}},H=(Ue,Je,xt,Et)=>{const Vt=wn(n.errors,Ue),we=(_.isValid||w.isValid)&&$u(Je)&&n.isValid!==Je;if(e.delayError&&xt?(u=A(()=>B(Ue,xt)),u(e.delayError)):(clearTimeout(f),u=null,xt?Xi(n.errors,Ue,xt):Ts(n.errors,Ue)),(xt?!cf(Vt,xt):Vt)||!El(Et)||we){const ae={...Et,...we&&$u(Je)?{isValid:Je}:{},errors:n.errors,name:Ue};n={...n,...ae},S.state.next(ae)}},ne=async Ue=>($(Ue,!0),await e.resolver(o,e.context,f4e(Ue||s.mount,r,e.criteriaMode,e.shouldUseNativeValidation))),ie=async Ue=>{const{errors:Je}=await ne(Ue);if($(Ue),Ue)for(const xt of Ue){const Et=wn(Je,xt);Et?Xi(n.errors,xt,Et):Ts(n.errors,xt)}else n.errors=Je;return Je},ce=async(Ue,Je,xt={valid:!0})=>{for(const Et in Ue){const Vt=Ue[Et];if(Vt){const{_f:we,...ae}=Vt;if(we){const Y=s.array.has(we.name),be=Vt._f&&p4e(Vt._f);be&&_.validatingFields&&$([we.name],!0);const $e=await z4(Vt,s.disabled,o,E,e.shouldUseNativeValidation&&!Je,Y);if(be&&_.validatingFields&&$([we.name]),$e[we.name]&&(xt.valid=!1,Je))break;!Je&&(wn($e,we.name)?Y?dne(n.errors,$e,we.name):Xi(n.errors,we.name,$e[we.name]):Ts(n.errors,we.name))}!El(ae)&&await ce(ae,Je,xt)}}return xt.valid},xe=()=>{for(const Ue of s.unMount){const Je=wn(r,Ue);Je&&(Je._f.refs?Je._f.refs.every(xt=>!gD(xt)):!gD(Je._f.ref))&&bt(Ue)}s.unMount=new Set},re=(Ue,Je)=>!e.disabled&&(Ue&&Je&&Xi(o,Ue,Je),!cf(Me(),i)),me=(Ue,Je,xt)=>I4(Ue,s,{...a.mount?o:To(Je)?i:Qu(Ue)?{[Ue]:Je}:Je},xt,Je),Te=Ue=>sI(wn(a.mount?o:i,Ue,e.shouldUnregister?wn(i,Ue,[]):[])),ye=(Ue,Je,xt={})=>{const Et=wn(r,Ue);let Vt=Je;if(Et){const we=Et._f;we&&(!we.disabled&&Xi(o,Ue,une(Je,we)),Vt=N5(we.ref)&&Uc(Je)?"":Je,ane(we.ref)?[...we.ref.options].forEach(ae=>ae.selected=Vt.includes(ae.value)):we.refs?yk(we.ref)?we.refs.forEach(ae=>{(!ae.defaultChecked||!ae.disabled)&&(Array.isArray(Vt)?ae.checked=!!Vt.find(Y=>Y===ae.value):ae.checked=Vt===ae.value||!!Vt)}):we.refs.forEach(ae=>ae.checked=ae.value===Vt):lB(we.ref)?we.ref.value="":(we.ref.value=Vt,we.ref.type||S.state.next({name:Ue,values:Lo(o)})))}(xt.shouldDirty||xt.shouldTouch)&&q(Ue,Vt,xt.shouldTouch,xt.shouldDirty,!0),xt.shouldValidate&&Se(Ue)},_e=(Ue,Je,xt)=>{for(const Et in Je){if(!Je.hasOwnProperty(Et))return;const Vt=Je[Et],we=Ue+"."+Et,ae=wn(r,we);(s.array.has(Ue)||Js(Vt)||ae&&!ae._f)&&!j_(Vt)?_e(we,Vt,xt):ye(we,Vt,xt)}},ke=(Ue,Je,xt={})=>{const Et=wn(r,Ue),Vt=s.array.has(Ue),we=Lo(Je);Xi(o,Ue,we),Vt?(S.array.next({name:Ue,values:Lo(o)}),(_.isDirty||_.dirtyFields||w.isDirty||w.dirtyFields)&&xt.shouldDirty&&S.state.next({name:Ue,dirtyFields:L1(i,o),isDirty:re(Ue,we)})):Et&&!Et._f&&!Uc(we)?_e(Ue,we,xt):ye(Ue,we,xt),$4(Ue,s)&&S.state.next({...n,name:Ue}),S.state.next({name:a.mount?Ue:void 0,values:Lo(o)})},Ne=async Ue=>{a.mount=!0;const Je=Ue.target;let xt=Je.name,Et=!0;const Vt=wn(r,xt),we=be=>{Et=Number.isNaN(be)||j_(be)&&isNaN(be.getTime())||cf(be,wn(o,xt,be))},ae=Q1(e.mode),Y=Q1(e.reValidateMode);if(Vt){let be,$e;const ze=Je.type?WU(Vt._f):nne(Ue),rt=Ue.type===z5.BLUR||Ue.type===z5.FOCUS_OUT,tt=!m4e(Vt._f)&&!e.resolver&&!wn(n.errors,xt)&&!Vt._f.deps||v4e(rt,wn(n.touchedFields,xt),n.isSubmitted,Y,ae),Ye=$4(xt,s,rt);Xi(o,xt,ze),rt?(!Je||!Je.readOnly)&&(Vt._f.onBlur&&Vt._f.onBlur(Ue),u&&u(0)):Vt._f.onChange&&Vt._f.onChange(Ue);const at=q(xt,ze,rt),Ot=!El(at)||Ye;if(!rt&&S.state.next({name:xt,type:Ue.type,values:Lo(o)}),tt)return(_.isValid||w.isValid)&&(e.mode==="onBlur"?rt&&R():rt||R()),Ot&&S.state.next({name:xt,...Ye?{}:at});if(!rt&&Ye&&S.state.next({...n}),e.resolver){const{errors:ot}=await ne([xt]);if($([xt]),we(ze),Et){const $t=GU(n.errors,r,xt),an=GU(ot,r,$t.name||xt);be=an.error,xt=an.name,$e=El(ot)}}else $([xt],!0),be=(await z4(Vt,s.disabled,o,E,e.shouldUseNativeValidation))[xt],$([xt]),we(ze),Et&&(be?$e=!1:(_.isValid||w.isValid)&&($e=await ce(r,!0)));Et&&(Vt._f.deps&&(!Array.isArray(Vt._f.deps)||Vt._f.deps.length>0)&&Se(Vt._f.deps),H(xt,$e,be,at))}},Qe=(Ue,Je)=>{if(wn(n.errors,Je)&&Ue.focus)return Ue.focus(),1},Se=async(Ue,Je={})=>{let xt,Et;const Vt=Xc(Ue);if(e.resolver){const we=await ie(To(Ue)?Ue:Vt);xt=El(we),Et=Ue?!Vt.some(ae=>wn(we,ae)):xt}else Ue?(Et=(await Promise.all(Vt.map(async we=>{const ae=wn(r,we);return await ce(ae&&ae._f?{[we]:ae}:ae)}))).every(Boolean),!(!Et&&!n.isValid)&&R()):Et=xt=await ce(r);return S.state.next({...!Qu(Ue)||(_.isValid||w.isValid)&&xt!==n.isValid?{}:{name:Ue},...e.resolver||!Ue?{isValid:xt}:{},errors:n.errors}),Je.shouldFocus&&!Et&&aw(r,Qe,Ue?Vt:s.mount),Et},Me=(Ue,Je)=>{let xt={...a.mount?o:i};return Je&&(xt=sne(Je.dirtyFields?n.dirtyFields:n.touchedFields,xt)),To(Ue)?xt:Qu(Ue)?wn(xt,Ue):Ue.map(Et=>wn(xt,Et))},Xe=(Ue,Je)=>({invalid:!!wn((Je||n).errors,Ue),isDirty:!!wn((Je||n).dirtyFields,Ue),error:wn((Je||n).errors,Ue),isValidating:!!wn(n.validatingFields,Ue),isTouched:!!wn((Je||n).touchedFields,Ue)}),Ee=Ue=>{Ue&&Xc(Ue).forEach(Je=>Ts(n.errors,Je)),S.state.next({errors:Ue?n.errors:{}})},ft=(Ue,Je,xt)=>{const Et=(wn(r,Ue,{_f:{}})._f||{}).ref,Vt=wn(n.errors,Ue)||{},{ref:we,message:ae,type:Y,...be}=Vt;Xi(n.errors,Ue,{...be,...Je,ref:Et}),S.state.next({name:Ue,errors:n.errors,isValid:!1}),xt&&xt.shouldFocus&&Et&&Et.focus&&Et.focus()},mt=(Ue,Je)=>oc(Ue)?S.state.subscribe({next:xt=>"values"in xt&&Ue(me(void 0,Je),xt)}):me(Ue,Je,!0),ct=Ue=>S.state.subscribe({next:Je=>{y4e(Ue.name,Je.name,Ue.exact)&&g4e(Je,Ue.formState||_,Nn,Ue.reRenderRoot)&&Ue.callback({values:{...o},...n,...Je,defaultValues:i})}}).unsubscribe,st=Ue=>(a.mount=!0,w={...w,...Ue.formState},ct({...Ue,formState:{...g,...Ue.formState}})),bt=(Ue,Je={})=>{for(const xt of Ue?Xc(Ue):s.mount)s.mount.delete(xt),s.array.delete(xt),Je.keepValue||(Ts(r,xt),Ts(o,xt)),!Je.keepError&&Ts(n.errors,xt),!Je.keepDirty&&Ts(n.dirtyFields,xt),!Je.keepTouched&&Ts(n.touchedFields,xt),!Je.keepIsValidating&&Ts(n.validatingFields,xt),!e.shouldUnregister&&!Je.keepDefaultValue&&Ts(i,xt);S.state.next({values:Lo(o)}),S.state.next({...n,...Je.keepDirty?{isDirty:re()}:{}}),!Je.keepIsValid&&R()},At=({disabled:Ue,name:Je})=>{($u(Ue)&&a.mount||Ue||s.disabled.has(Je))&&(Ue?s.disabled.add(Je):s.disabled.delete(Je))},Tt=(Ue,Je={})=>{let xt=wn(r,Ue);const Et=$u(Je.disabled)||$u(e.disabled);return Xi(r,Ue,{...xt||{},_f:{...xt&&xt._f?xt._f:{ref:{name:Ue}},name:Ue,mount:!0,...Je}}),s.mount.add(Ue),xt?At({disabled:$u(Je.disabled)?Je.disabled:e.disabled,name:Ue}):U(Ue,!0,Je.value),{...Et?{disabled:Je.disabled||e.disabled}:{},...e.progressive?{required:!!Je.required,min:v2(Je.min),max:v2(Je.max),minLength:v2(Je.minLength),maxLength:v2(Je.maxLength),pattern:v2(Je.pattern)}:{},name:Ue,onChange:Ne,onBlur:Ne,ref:Vt=>{if(Vt){Tt(Ue,Je),xt=wn(r,Ue);const we=To(Vt.value)&&Vt.querySelectorAll&&Vt.querySelectorAll("input,select,textarea")[0]||Vt,ae=c4e(we),Y=xt._f.refs||[];if(ae?Y.find(be=>be===we):we===xt._f.ref)return;Xi(r,Ue,{_f:{...xt._f,...ae?{refs:[...Y.filter(gD),we,...Array.isArray(wn(i,Ue))?[{}]:[]],ref:{type:we.type,name:Ue}}:{ref:we}}}),U(Ue,!1,void 0,we)}else xt=wn(r,Ue,{}),xt._f&&(xt._f.mount=!1),(e.shouldUnregister||Je.shouldUnregister)&&!(rne(s.array,Ue)&&a.action)&&s.unMount.add(Ue)}}},Wt=()=>e.shouldFocusError&&aw(r,Qe,s.mount),nn=Ue=>{$u(Ue)&&(S.state.next({disabled:Ue}),aw(r,(Je,xt)=>{const Et=wn(r,xt);Et&&(Je.disabled=Et._f.disabled||Ue,Array.isArray(Et._f.refs)&&Et._f.refs.forEach(Vt=>{Vt.disabled=Et._f.disabled||Ue}))},0,!1))},An=(Ue,Je)=>async xt=>{let Et;xt&&(xt.preventDefault&&xt.preventDefault(),xt.persist&&xt.persist());let Vt=Lo(o);if(S.state.next({isSubmitting:!0}),e.resolver){const{errors:we,values:ae}=await ne();$(),n.errors=we,Vt=Lo(ae)}else await ce(r);if(s.disabled.size)for(const we of s.disabled)Ts(Vt,we);if(Ts(n.errors,"root"),El(n.errors)){S.state.next({errors:{}});try{await Ue(Vt,xt)}catch(we){Et=we}}else Je&&await Je({...n.errors},xt),Wt(),setTimeout(Wt);if(S.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:El(n.errors)&&!Et,submitCount:n.submitCount+1,errors:n.errors}),Et)throw Et},rn=(Ue,Je={})=>{wn(r,Ue)&&(To(Je.defaultValue)?ke(Ue,Lo(wn(i,Ue))):(ke(Ue,Je.defaultValue),Xi(i,Ue,Lo(Je.defaultValue))),Je.keepTouched||Ts(n.touchedFields,Ue),Je.keepDirty||(Ts(n.dirtyFields,Ue),n.isDirty=Je.defaultValue?re(Ue,Lo(wn(i,Ue))):re()),Je.keepError||(Ts(n.errors,Ue),_.isValid&&R()),S.state.next({...n}))},Jt=(Ue,Je={})=>{const xt=Ue?Lo(Ue):i,Et=Lo(xt),Vt=El(Ue),we=Vt?i:Et;if(Je.keepDefaultValues||(i=xt),!Je.keepValues){if(Je.keepDirtyValues){const ae=new Set([...s.mount,...Object.keys(L1(i,o))]);for(const Y of Array.from(ae))wn(n.dirtyFields,Y)?Xi(we,Y,wn(o,Y)):ke(Y,wn(we,Y))}else{if(sB&&To(Ue))for(const ae of s.mount){const Y=wn(r,ae);if(Y&&Y._f){const be=Array.isArray(Y._f.refs)?Y._f.refs[0]:Y._f.ref;if(N5(be)){const $e=be.closest("form");if($e){$e.reset();break}}}}if(Je.keepFieldsRef)for(const ae of s.mount)ke(ae,wn(we,ae));else r={}}o=e.shouldUnregister?Je.keepDefaultValues?Lo(i):{}:Lo(we),S.array.next({values:{...we}}),S.state.next({values:{...we}})}s={mount:Je.keepDirtyValues?s.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!_.isValid||!!Je.keepIsValid||!!Je.keepDirtyValues||!e.shouldUnregister&&!El(we),a.watch=!!e.shouldUnregister,a.keepIsValid=!!Je.keepIsValid,a.action=!1,Je.keepErrors||(n.errors={}),S.state.next({submitCount:Je.keepSubmitCount?n.submitCount:0,isDirty:Vt?!1:Je.keepDirty?n.isDirty:!!(Je.keepDefaultValues&&!cf(Ue,i)),isSubmitted:Je.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Vt?{}:Je.keepDirtyValues?Je.keepDefaultValues&&o?L1(i,o):n.dirtyFields:Je.keepDefaultValues&&Ue?L1(i,Ue):Je.keepDirty?n.dirtyFields:{},touchedFields:Je.keepTouched?n.touchedFields:{},errors:Je.keepErrors?n.errors:{},isSubmitSuccessful:Je.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Mn=(Ue,Je)=>Jt(oc(Ue)?Ue(o):Ue,{...e.resetOptions,...Je}),vn=(Ue,Je={})=>{const xt=wn(r,Ue),Et=xt&&xt._f;if(Et){const Vt=Et.refs?Et.refs[0]:Et.ref;Vt.focus&&setTimeout(()=>{Vt.focus(),Je.shouldSelect&&oc(Vt.select)&&Vt.select()})}},Nn=Ue=>{n={...n,...Ue}},rr={control:{register:Tt,unregister:bt,getFieldState:Xe,handleSubmit:An,setError:ft,_subscribe:ct,_runSchema:ne,_updateIsValidating:$,_focusError:Wt,_getWatch:me,_getDirty:re,_setValid:R,_setFieldArray:z,_setDisabledField:At,_setErrors:F,_getFieldArray:Te,_reset:Jt,_resetDefaultValues:()=>oc(e.defaultValues)&&e.defaultValues().then(Ue=>{Mn(Ue,e.resetOptions),S.state.next({isLoading:!1})}),_removeUnmounted:xe,_disableForm:nn,_subjects:S,_proxyFormState:_,get _fields(){return r},get _formValues(){return o},get _state(){return a},set _state(Ue){a=Ue},get _defaultValues(){return i},get _names(){return s},set _names(Ue){s=Ue},get _formState(){return n},get _options(){return e},set _options(Ue){e={...e,...Ue}}},subscribe:st,trigger:Se,register:Tt,handleSubmit:An,watch:mt,setValue:ke,getValues:Me,reset:Mn,resetField:rn,clearErrors:Ee,unregister:bt,setError:ft,setFocus:vn,getFieldState:Xe};return{...rr,formControl:rr}}var h0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=(Math.random()*16+t)%16|0;return(e=="x"?n:n&3|8).toString(16)})},yD=(t,e,n={})=>n.shouldFocus||To(n.shouldFocus)?n.focusName||`${t}.${To(n.focusIndex)?e:n.focusIndex}.`:"",vD=(t,e)=>[...t,...Xc(e)],_D=t=>Array.isArray(t)?t.map(()=>{}):void 0;function bD(t,e,n){return[...t.slice(0,e),...Xc(n),...t.slice(e)]}var xD=(t,e,n)=>Array.isArray(t)?(To(t[n])&&(t[n]=void 0),t.splice(n,0,t.splice(e,1)[0]),t):[],wD=(t,e)=>[...Xc(e),...Xc(t)];function w4e(t,e){let n=0;const r=[...t];for(const i of e)r.splice(i-n,1),n++;return sI(r).length?r:[]}var OD=(t,e)=>To(e)?[]:w4e(t,Xc(e).sort((n,r)=>n-r)),SD=(t,e,n)=>{[t[e],t[n]]=[t[n],t[e]]},YU=(t,e,n)=>(t[e]=n,t);function O4e(t){const e=aI(),{control:n=e.control,name:r,keyName:i="id",shouldUnregister:o,rules:a}=t,[s,u]=se.useState(n._getFieldArray(r)),f=se.useRef(n._getFieldArray(r).map(h0)),g=se.useRef(!1);n._names.array.add(r),se.useMemo(()=>a&&s.length>=0&&n.register(r,a),[n,r,s.length,a]),lI(()=>n._subjects.array.subscribe({next:({values:F,name:U})=>{if(U===r||!U){const q=wn(F,r);Array.isArray(q)&&(u(q),f.current=q.map(h0))}}}).unsubscribe,[n,r]);const _=se.useCallback(F=>{g.current=!0,n._setFieldArray(r,F)},[n,r]),w=(F,U)=>{const q=Xc(Lo(F)),H=vD(n._getFieldArray(r),q);n._names.focus=yD(r,H.length-1,U),f.current=vD(f.current,q.map(h0)),_(H),u(H),n._setFieldArray(r,H,vD,{argA:_D(F)})},S=(F,U)=>{const q=Xc(Lo(F)),H=wD(n._getFieldArray(r),q);n._names.focus=yD(r,0,U),f.current=wD(f.current,q.map(h0)),_(H),u(H),n._setFieldArray(r,H,wD,{argA:_D(F)})},E=F=>{const U=OD(n._getFieldArray(r),F);f.current=OD(f.current,F),_(U),u(U),!Array.isArray(wn(n._fields,r))&&Xi(n._fields,r,void 0),n._setFieldArray(r,U,OD,{argA:F})},A=(F,U,q)=>{const H=Xc(Lo(U)),ne=bD(n._getFieldArray(r),F,H);n._names.focus=yD(r,F,q),f.current=bD(f.current,F,H.map(h0)),_(ne),u(ne),n._setFieldArray(r,ne,bD,{argA:F,argB:_D(U)})},R=(F,U)=>{const q=n._getFieldArray(r);SD(q,F,U),SD(f.current,F,U),_(q),u(q),n._setFieldArray(r,q,SD,{argA:F,argB:U},!1)},$=(F,U)=>{const q=n._getFieldArray(r);xD(q,F,U),xD(f.current,F,U),_(q),u(q),n._setFieldArray(r,q,xD,{argA:F,argB:U},!1)},z=(F,U)=>{const q=Lo(U),H=YU(n._getFieldArray(r),F,q);f.current=[...H].map((ne,ie)=>!ne||ie===F?h0():f.current[ie]),_(H),u([...H]),n._setFieldArray(r,H,YU,{argA:F,argB:q},!0,!1)},B=F=>{const U=Xc(Lo(F));f.current=U.map(h0),_([...U]),u([...U]),n._setFieldArray(r,[...U],q=>q,{},!0,!1)};return se.useEffect(()=>{if(n._state.action=!1,$4(r,n._names)&&n._subjects.state.next({...n._formState}),g.current&&(!Q1(n._options.mode).isOnSubmit||n._formState.isSubmitted)&&!Q1(n._options.reValidateMode).isOnSubmit)if(n._options.resolver)n._runSchema([r]).then(F=>{n._updateIsValidating([r]);const U=wn(F.errors,r),q=wn(n._formState.errors,r);(q?!U&&q.type||U&&(q.type!==U.type||q.message!==U.message):U&&U.type)&&(U?Xi(n._formState.errors,r,U):Ts(n._formState.errors,r),n._subjects.state.next({errors:n._formState.errors}))});else{const F=wn(n._fields,r);F&&F._f&&!(Q1(n._options.reValidateMode).isOnSubmit&&Q1(n._options.mode).isOnSubmit)&&z4(F,n._names.disabled,n._formValues,n._options.criteriaMode===Fh.all,n._options.shouldUseNativeValidation,!0).then(U=>!El(U)&&n._subjects.state.next({errors:dne(n._formState.errors,U,r)}))}n._subjects.state.next({name:r,values:Lo(n._formValues)}),n._names.focus&&aw(n._fields,(F,U)=>{if(n._names.focus&&U.startsWith(n._names.focus)&&F.focus)return F.focus(),1}),n._names.focus="",n._setValid(),g.current=!1},[s,r,n]),se.useEffect(()=>(!wn(n._formValues,r)&&n._setFieldArray(r),()=>{const F=(U,q)=>{const H=wn(n._fields,U);H&&H._f&&(H._f.mount=q)};n._options.shouldUnregister||o?n.unregister(r):F(r,!1)}),[r,n,i,o]),{swap:se.useCallback(R,[_,r,n]),move:se.useCallback($,[_,r,n]),prepend:se.useCallback(S,[_,r,n]),append:se.useCallback(w,[_,r,n]),remove:se.useCallback(E,[_,r,n]),insert:se.useCallback(A,[_,r,n]),update:se.useCallback(z,[_,r,n]),replace:se.useCallback(B,[_,r,n]),fields:se.useMemo(()=>s.map((F,U)=>({...F,[i]:f.current[U]||h0()})),[s,i])}}function uB(t={}){const e=se.useRef(void 0),n=se.useRef(void 0),[r,i]=se.useState({isDirty:!1,isValidating:!1,isLoading:oc(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:oc(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!oc(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:a,...s}=x4e(t);e.current={...s,formState:r}}const o=e.current.control;return o._options=t,lI(()=>{const a=o._subscribe({formState:o._proxyFormState,callback:()=>i({...o._formState}),reRenderRoot:!0});return i(s=>({...s,isReady:!0})),o._formState.isReady=!0,a},[o]),se.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),se.useEffect(()=>{t.mode&&(o._options.mode=t.mode),t.reValidateMode&&(o._options.reValidateMode=t.reValidateMode)},[o,t.mode,t.reValidateMode]),se.useEffect(()=>{t.errors&&(o._setErrors(t.errors),o._focusError())},[o,t.errors]),se.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,t.shouldUnregister]),se.useEffect(()=>{if(o._proxyFormState.isDirty){const a=o._getDirty();a!==r.isDirty&&o._subjects.state.next({isDirty:a})}},[o,r.isDirty]),se.useEffect(()=>{var a;t.values&&!cf(t.values,n.current)?(o._reset(t.values,{keepFieldsRef:!0,...o._options.resetOptions}),!((a=o._options.resetOptions)===null||a===void 0)&&a.keepIsValid||o._setValid(),n.current=t.values,i(s=>({...s}))):o._resetDefaultValues()},[o,t.values]),se.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=one(r,o),e.current}var CD={exports:{}},Gi={};var KU;function S4e(){if(KU)return Gi;KU=1;var t=60103,e=60106,n=60107,r=60108,i=60114,o=60109,a=60110,s=60112,u=60113,f=60120,g=60115,_=60116,w=60121,S=60122,E=60117,A=60129,R=60131;if(typeof Symbol=="function"&&Symbol.for){var $=Symbol.for;t=$("react.element"),e=$("react.portal"),n=$("react.fragment"),r=$("react.strict_mode"),i=$("react.profiler"),o=$("react.provider"),a=$("react.context"),s=$("react.forward_ref"),u=$("react.suspense"),f=$("react.suspense_list"),g=$("react.memo"),_=$("react.lazy"),w=$("react.block"),S=$("react.server.block"),E=$("react.fundamental"),A=$("react.debug_trace_mode"),R=$("react.legacy_hidden")}function z(me){if(typeof me=="object"&&me!==null){var Te=me.$$typeof;switch(Te){case t:switch(me=me.type,me){case n:case i:case r:case u:case f:return me;default:switch(me=me&&me.$$typeof,me){case a:case s:case _:case g:case o:return me;default:return Te}}case e:return Te}}}var B=o,F=t,U=s,q=n,H=_,ne=g,ie=e,ce=i,xe=r,re=u;return Gi.ContextConsumer=a,Gi.ContextProvider=B,Gi.Element=F,Gi.ForwardRef=U,Gi.Fragment=q,Gi.Lazy=H,Gi.Memo=ne,Gi.Portal=ie,Gi.Profiler=ce,Gi.StrictMode=xe,Gi.Suspense=re,Gi.isAsyncMode=function(){return!1},Gi.isConcurrentMode=function(){return!1},Gi.isContextConsumer=function(me){return z(me)===a},Gi.isContextProvider=function(me){return z(me)===o},Gi.isElement=function(me){return typeof me=="object"&&me!==null&&me.$$typeof===t},Gi.isForwardRef=function(me){return z(me)===s},Gi.isFragment=function(me){return z(me)===n},Gi.isLazy=function(me){return z(me)===_},Gi.isMemo=function(me){return z(me)===g},Gi.isPortal=function(me){return z(me)===e},Gi.isProfiler=function(me){return z(me)===i},Gi.isStrictMode=function(me){return z(me)===r},Gi.isSuspense=function(me){return z(me)===u},Gi.isValidElementType=function(me){return typeof me=="string"||typeof me=="function"||me===n||me===i||me===A||me===r||me===u||me===f||me===R||typeof me=="object"&&me!==null&&(me.$$typeof===_||me.$$typeof===g||me.$$typeof===o||me.$$typeof===a||me.$$typeof===s||me.$$typeof===E||me.$$typeof===w||me[0]===S)},Gi.typeOf=z,Gi}var JU;function C4e(){return JU||(JU=1,CD.exports=S4e()),CD.exports}C4e();let eZ=t=>typeof t=="object"&&t!=null&&t.nodeType===1,tZ=(t,e)=>(!e||t!=="hidden")&&t!=="visible"&&t!=="clip",TD=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){let n=getComputedStyle(t,null);return tZ(n.overflowY,e)||tZ(n.overflowX,e)||(r=>{let i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(t)}return!1},dA=(t,e,n,r,i,o,a,s)=>o<t&&a>e||o>t&&a<e?0:o<=t&&s<=n||a>=e&&s>=n?o-t-r:a>e&&s<n||o<t&&s>n?a-e+i:0,T4e=t=>{let e=t.parentElement;return e??(t.getRootNode().host||null)};var k4e=(t,e)=>{var n,r,i,o,a,s;if(typeof document>"u")return[];let{inline:u,boundary:f,skipOverflowHiddenElements:g}=e,_=typeof f=="function"?f:re=>re!==f;if(!eZ(t))throw new TypeError("Invalid target");let w=document.scrollingElement||document.documentElement,S=[],E=t;for(;eZ(E)&&_(E);){if(E=T4e(E),E===w){S.push(E);break}E!=null&&E===document.body&&TD(E)&&!TD(document.documentElement)||E!=null&&TD(E,g)&&S.push(E)}let A=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,R=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,$=(a=window.scrollX)!=null?a:pageXOffset,z=(s=window.scrollY)!=null?s:pageYOffset,{height:B,width:F,top:U,right:q,bottom:H,left:ne}=t.getBoundingClientRect(),ie=U,ce=u==="center"?ne+F/2:u==="end"?q:ne,xe=[];for(let re=0;re<S.length;re++){let me=S[re],{height:Te,width:ye,top:_e,right:ke,bottom:Ne,left:Qe}=me.getBoundingClientRect();if(U>=0&&ne>=0&&H<=R&&q<=A&&U>=_e&&H<=Ne&&ne>=Qe&&q<=ke)return xe;let Se=getComputedStyle(me),Me=parseInt(Se.borderLeftWidth,10),Xe=parseInt(Se.borderTopWidth,10),Ee=parseInt(Se.borderRightWidth,10),ft=parseInt(Se.borderBottomWidth,10),mt=0,ct=0,st="offsetWidth"in me?me.offsetWidth-me.clientWidth-Me-Ee:0,bt="offsetHeight"in me?me.offsetHeight-me.clientHeight-Xe-ft:0,At="offsetWidth"in me?me.offsetWidth===0?0:ye/me.offsetWidth:0,Tt="offsetHeight"in me?me.offsetHeight===0?0:Te/me.offsetHeight:0;if(w===me)mt=dA(z,z+R,R,Xe,ft,z+ie,z+ie+B,B),ct=u==="start"?ce:u==="center"?ce-A/2:u==="end"?ce-A:dA($,$+A,A,Me,Ee,$+ce,$+ce+F,F),mt=Math.max(0,mt+z),ct=Math.max(0,ct+$);else{mt=dA(_e,Ne,Te,Xe,ft+bt,ie,ie+B,B),ct=u==="start"?ce-Qe-Me:u==="center"?ce-(Qe+ye/2)+st/2:u==="end"?ce-ke+Ee+st:dA(Qe,ke,ye,Me,Ee+st,ce,ce+F,F);let{scrollLeft:Wt,scrollTop:nn}=me;mt=Math.max(0,Math.min(nn+mt/Tt,me.scrollHeight-Te/Tt+bt)),ct=Math.max(0,Math.min(Wt+ct/At,me.scrollWidth-ye/At+st)),ie+=nn-mt,ce+=Wt-ct}xe.push({el:me,top:mt,left:ct})}return xe},E4e=0;function fne(){}function A4e(t,e){if(t){var n=k4e(t,{boundary:e});n.forEach(function(r){var i=r.el,o=r.top,a=r.left;i.scrollTop=o,i.scrollLeft=a})}}function nZ(t,e,n){var r=t===e||e instanceof n.Node&&t.contains&&t.contains(e);return r}function pne(t,e){var n;function r(){n&&clearTimeout(n)}function i(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];r(),n=setTimeout(function(){n=null,t.apply(void 0,a)},e)}return i.cancel=r,i}function _g(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return e.some(function(s){return s&&s.apply(void 0,[r].concat(o)),r.preventDownshiftDefault||r.hasOwnProperty("nativeEvent")&&r.nativeEvent.preventDownshiftDefault})}}function fA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){e.forEach(function(i){typeof i=="function"?i(r):i&&(i.current=r)})}}function P4e(){return String(E4e++)}function M4e(t){var e=t.isOpen,n=t.resultCount,r=t.previousResultCount;return e?n?n!==r?n+" result"+(n===1?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":""}function N4(t,e){return Object.keys(t).reduce(function(n,r){return n[r]=mne(e,r)?e[r]:t[r],n},{})}function mne(t,e){return t[e]!==void 0}function R4e(t){var e=t.key,n=t.keyCode;return n>=37&&n<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function pA(t,e,n,r,i){if(i===void 0&&(i=!0),n===0)return-1;var o=n-1;(typeof e!="number"||e<0||e>=n)&&(e=t>0?-1:o+1);var a=e+t;a<0?a=i?o:0:a>o&&(a=i?0:o);var s=nT(t,a,n,r,i);return s===-1?e>=n?-1:e:s}function nT(t,e,n,r,i){var o=r(e);if(!o||!o.hasAttribute("disabled"))return e;if(t>0){for(var a=e+1;a<n;a++)if(!r(a).hasAttribute("disabled"))return a}else for(var s=e-1;s>=0;s--)if(!r(s).hasAttribute("disabled"))return s;return i?t>0?nT(1,0,n,r,!1):nT(-1,n-1,n,r,!1):-1}function rZ(t,e,n,r){return r===void 0&&(r=!0),e.some(function(i){return i&&(nZ(i,t,n)||r&&nZ(i,n.document.activeElement,n))})}var I4e=pne(function(t){gne(t).textContent=""},500);function D4e(t,e){var n=gne(e);t&&(n.textContent=t,I4e(e))}function gne(t){t===void 0&&(t=document);var e=t.getElementById("a11y-status-message");return e||(e=t.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),t.body.appendChild(e),e)}var L4e=["isInitialMount","highlightedIndex","items","environment"],yne={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function $4e(t,e,n){var r=t.props,i=t.type,o={};Object.keys(e).forEach(function(a){z4e(a,t,e,n),n[a]!==e[a]&&(o[a]=n[a])}),r.onStateChange&&Object.keys(o).length&&r.onStateChange(Co({type:i},o))}function z4e(t,e,n,r){var i=e.props,o=e.type,a="on"+hB(t)+"Change";i[a]&&r[t]!==void 0&&r[t]!==n[t]&&i[a](Co({type:o},r))}function N4e(t,e){return e.changes}function B4e(t){var e=t.selectedItem,n=t.itemToString;return e?n(e)+" has been selected.":""}var F4e=pne(function(t,e){D4e(t(),e)},200),j4e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Q.useLayoutEffect:Q.useEffect;function V4e(t){var e=t.id,n=e===void 0?"downshift-"+P4e():e,r=t.labelId,i=t.menuId,o=t.getItemId,a=t.toggleButtonId,s=t.inputId,u=Q.useRef({labelId:r||n+"-label",menuId:i||n+"-menu",getItemId:o||function(f){return n+"-item-"+f},toggleButtonId:a||n+"-toggle-button",inputId:s||n+"-input"});return u.current}function Q4e(t,e,n,r){var i,o;if(t===void 0){if(e===void 0)throw new Error(r);i=n[e],o=e}else o=e===void 0?n.indexOf(t):e,i=t;return[i,o]}function U4e(t){return t?String(t):""}function hB(t){return""+t.slice(0,1).toUpperCase()+t.slice(1)}function vne(t){var e=Q.useRef(t);return e.current=t,e}function Z4e(t,e,n){var r=Q.useRef(),i=Q.useRef(),o=Q.useCallback(function(w,S){i.current=S,w=N4(w,S.props);var E=t(w,S),A=S.props.stateReducer(w,Co({},S,{changes:E}));return A},[t]),a=Q.useReducer(o,e),s=a[0],u=a[1],f=vne(n),g=Q.useCallback(function(w){return u(Co({props:f.current},w))},[f]),_=i.current;return Q.useEffect(function(){_&&r.current&&r.current!==s&&$4e(_,N4(r.current,_.props),s),r.current=s},[s,n,_]),[s,g]}var dC={itemToString:U4e,stateReducer:N4e,getA11ySelectionMessage:B4e,scrollIntoView:A4e,environment:typeof window>"u"?{}:window};function Qp(t,e,n){n===void 0&&(n=yne);var r=t["default"+hB(e)];return r!==void 0?r:n[e]}function mA(t,e,n){n===void 0&&(n=yne);var r=t[e];if(r!==void 0)return r;var i=t["initial"+hB(e)];return i!==void 0?i:Qp(t,e,n)}function q4e(t){var e=mA(t,"selectedItem"),n=mA(t,"isOpen"),r=mA(t,"highlightedIndex"),i=mA(t,"inputValue");return{highlightedIndex:r<0&&e&&n?t.items.indexOf(e):r,isOpen:n,selectedItem:e,inputValue:i}}function fC(t,e,n){var r=t.items,i=t.initialHighlightedIndex,o=t.defaultHighlightedIndex,a=e.selectedItem,s=e.highlightedIndex;return r.length===0?-1:i!==void 0&&s===i?i:o!==void 0?o:a?r.indexOf(a):n===0?-1:n<0?r.length-1:0}function W4e(t,e,n,r){var i=Q.useRef({isMouseDown:!1,isTouchMove:!1});return Q.useEffect(function(){if(n?.addEventListener!=null){var o=function(){i.current.isMouseDown=!0},a=function(_){i.current.isMouseDown=!1,t&&!rZ(_.target,e.map(function(w){return w.current}),n)&&r()},s=function(){i.current.isTouchMove=!1},u=function(){i.current.isTouchMove=!0},f=function(_){t&&!i.current.isTouchMove&&!rZ(_.target,e.map(function(w){return w.current}),n,!1)&&r()};return n.addEventListener("mousedown",o),n.addEventListener("mouseup",a),n.addEventListener("touchstart",s),n.addEventListener("touchmove",u),n.addEventListener("touchend",f),function(){n.removeEventListener("mousedown",o),n.removeEventListener("mouseup",a),n.removeEventListener("touchstart",s),n.removeEventListener("touchmove",u),n.removeEventListener("touchend",f)}}},[t,n]),i}var H4e=function(){return fne};function iZ(t,e,n){var r=n.isInitialMount,i=n.highlightedIndex,o=n.items,a=n.environment,s=z_(n,L4e);Q.useEffect(function(){r||F4e(function(){return t(Co({highlightedIndex:i,highlightedItem:o[i],resultCount:o.length},s))},a.document)},e)}function G4e(t){var e=t.highlightedIndex,n=t.isOpen,r=t.itemRefs,i=t.getItemNodeFromIndex,o=t.menuElement,a=t.scrollIntoView,s=Q.useRef(!0);return j4e(function(){e<0||!n||!Object.keys(r.current).length||(s.current===!1?s.current=!0:a(i(e),o))},[e]),s}var X4e=fne;function oZ(t,e,n){var r;n===void 0&&(n=!0);var i=((r=t.items)==null?void 0:r.length)&&e>=0;return Co({isOpen:!1,highlightedIndex:-1},i&&Co({selectedItem:t.items[e],isOpen:Qp(t,"isOpen"),highlightedIndex:Qp(t,"highlightedIndex")},n&&{inputValue:t.itemToString(t.items[e])}))}function Y4e(t,e,n){var r=e.type,i=e.props,o;switch(r){case n.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case n.MenuMouseLeave:o={highlightedIndex:-1};break;case n.ToggleButtonClick:case n.FunctionToggleMenu:o={isOpen:!t.isOpen,highlightedIndex:t.isOpen?-1:fC(i,t,0)};break;case n.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:fC(i,t,0)};break;case n.FunctionCloseMenu:o={isOpen:!1};break;case n.FunctionSetHighlightedIndex:o={highlightedIndex:e.highlightedIndex};break;case n.FunctionSetInputValue:o={inputValue:e.inputValue};break;case n.FunctionReset:o={highlightedIndex:Qp(i,"highlightedIndex"),isOpen:Qp(i,"isOpen"),selectedItem:Qp(i,"selectedItem"),inputValue:Qp(i,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return Co({},t,o)}gn.array.isRequired,gn.func,gn.func,gn.func,gn.number,gn.number,gn.number,gn.bool,gn.bool,gn.bool,gn.any,gn.any,gn.any,gn.string,gn.string,gn.string,gn.func,gn.string,gn.func,gn.func,gn.func,gn.func,gn.func,gn.shape({addEventListener:gn.func,removeEventListener:gn.func,document:gn.shape({getElementById:gn.func,activeElement:gn.any,body:gn.any})});function K4e(t){var e=t.isOpen,n=t.resultCount,r=t.previousResultCount;return e?n?n!==r?"".concat(n," result").concat(n===1?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}zh(zh({},dC),{getA11yStatusMessage:K4e});var dB=0,fB=1,pB=2,mB=3,gB=4,yB=5,vB=6,_B=7,bB=8,F5=9,xB=10,_ne=11,bne=12,wB=13,xne=14,wne=15,One=16,Sne=17,Cne=18,OB=19,Tne=20,kne=21,SB=22,Ene=Object.freeze({__proto__:null,InputKeyDownArrowDown:dB,InputKeyDownArrowUp:fB,InputKeyDownEscape:pB,InputKeyDownHome:mB,InputKeyDownEnd:gB,InputKeyDownPageUp:yB,InputKeyDownPageDown:vB,InputKeyDownEnter:_B,InputChange:bB,InputBlur:F5,InputFocus:xB,MenuMouseLeave:_ne,ItemMouseMove:bne,ItemClick:wB,ToggleButtonClick:xne,FunctionToggleMenu:wne,FunctionOpenMenu:One,FunctionCloseMenu:Sne,FunctionSetHighlightedIndex:Cne,FunctionSelectItem:OB,FunctionSetInputValue:Tne,FunctionReset:kne,ControlledPropUpdatedSelectedItem:SB});function J4e(t){var e=q4e(t),n=e.selectedItem,r=e.inputValue;return r===""&&n&&t.defaultInputValue===void 0&&t.initialInputValue===void 0&&t.inputValue===void 0&&(r=t.itemToString(n)),Co({},e,{inputValue:r})}gn.array.isRequired,gn.func,gn.func,gn.func,gn.func,gn.number,gn.number,gn.number,gn.bool,gn.bool,gn.bool,gn.any,gn.any,gn.any,gn.string,gn.string,gn.string,gn.string,gn.string,gn.string,gn.func,gn.string,gn.string,gn.func,gn.func,gn.func,gn.func,gn.func,gn.func,gn.shape({addEventListener:gn.func,removeEventListener:gn.func,document:gn.shape({getElementById:gn.func,activeElement:gn.any,body:gn.any})});function eze(t,e,n){var r=Q.useRef(),i=Z4e(t,e,n),o=i[0],a=i[1];return Q.useEffect(function(){mne(n,"selectedItem")&&(n.selectedItemChanged(r.current,n.selectedItem)&&a({type:SB,inputValue:n.itemToString(n.selectedItem)}),r.current=o.selectedItem===r.current?n.selectedItem:o.selectedItem)},[o.selectedItem,n.selectedItem]),[N4(o,n),a]}var tze=Co({},dC,{selectedItemChanged:function(e,n){return e!==n},getA11yStatusMessage:M4e});function nze(t,e){var n,r=e.type,i=e.props,o=e.altKey,a;switch(r){case wB:a={isOpen:Qp(i,"isOpen"),highlightedIndex:Qp(i,"highlightedIndex"),selectedItem:i.items[e.index],inputValue:i.itemToString(i.items[e.index])};break;case dB:t.isOpen?a={highlightedIndex:pA(1,t.highlightedIndex,i.items.length,e.getItemNodeFromIndex,!0)}:a={highlightedIndex:o&&t.selectedItem==null?-1:fC(i,t,1,e.getItemNodeFromIndex),isOpen:i.items.length>=0};break;case fB:t.isOpen?o?a=oZ(i,t.highlightedIndex):a={highlightedIndex:pA(-1,t.highlightedIndex,i.items.length,e.getItemNodeFromIndex,!0)}:a={highlightedIndex:fC(i,t,-1,e.getItemNodeFromIndex),isOpen:i.items.length>=0};break;case _B:a=oZ(i,t.highlightedIndex);break;case pB:a=Co({isOpen:!1,highlightedIndex:-1},!t.isOpen&&{selectedItem:null,inputValue:""});break;case yB:a={highlightedIndex:pA(-10,t.highlightedIndex,i.items.length,e.getItemNodeFromIndex,!1)};break;case vB:a={highlightedIndex:pA(10,t.highlightedIndex,i.items.length,e.getItemNodeFromIndex,!1)};break;case mB:a={highlightedIndex:nT(1,0,i.items.length,e.getItemNodeFromIndex,!1)};break;case gB:a={highlightedIndex:nT(-1,i.items.length-1,i.items.length,e.getItemNodeFromIndex,!1)};break;case F5:a=Co({isOpen:!1,highlightedIndex:-1},t.highlightedIndex>=0&&((n=i.items)==null?void 0:n.length)&&e.selectItem&&{selectedItem:i.items[t.highlightedIndex],inputValue:i.itemToString(i.items[t.highlightedIndex])});break;case bB:a={isOpen:!0,highlightedIndex:Qp(i,"highlightedIndex"),inputValue:e.inputValue};break;case xB:a={isOpen:!0,highlightedIndex:fC(i,t,0)};break;case OB:a={selectedItem:e.selectedItem,inputValue:i.itemToString(e.selectedItem)};break;case SB:a={inputValue:e.inputValue};break;default:return Y4e(t,e,Ene)}return Co({},t,a)}var rze=["onMouseLeave","refKey","ref"],ize=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],oze=["onClick","onPress","refKey","ref"],sze=["onKeyDown","onChange","onInput","onFocus","onBlur","onChangeText","refKey","ref"];Ane.stateChangeTypes=Ene;function Ane(t){t===void 0&&(t={});var e=Co({},tze,t),n=e.initialIsOpen,r=e.defaultIsOpen,i=e.items,o=e.scrollIntoView,a=e.environment,s=e.getA11yStatusMessage,u=e.getA11ySelectionMessage,f=e.itemToString,g=J4e(e),_=eze(nze,g,e),w=_[0],S=_[1],E=w.isOpen,A=w.highlightedIndex,R=w.selectedItem,$=w.inputValue,z=Q.useRef(null),B=Q.useRef({}),F=Q.useRef(null),U=Q.useRef(null),q=Q.useRef(!0),H=V4e(e),ne=Q.useRef(),ie=vne({state:w,props:e}),ce=Q.useCallback(function(st){return B.current[H.getItemId(st)]},[H]);iZ(s,[E,A,$,i],Co({isInitialMount:q.current,previousResultCount:ne.current,items:i,environment:a,itemToString:f},w)),iZ(u,[R],Co({isInitialMount:q.current,previousResultCount:ne.current,items:i,environment:a,itemToString:f},w));var xe=G4e({menuElement:z.current,highlightedIndex:A,isOpen:E,itemRefs:B,scrollIntoView:o,getItemNodeFromIndex:ce});X4e({isInitialMount:q.current}),Q.useEffect(function(){var st=n||r||E;st&&F.current&&F.current.focus()},[]),Q.useEffect(function(){q.current||(ne.current=i.length)});var re=W4e(E,[F,z,U],a,function(){S({type:F5,selectItem:!1})}),me=H4e();Q.useEffect(function(){return q.current=!1,function(){q.current=!0}},[]),Q.useEffect(function(){var st;if(!E)B.current={};else if(((st=a.document)==null?void 0:st.activeElement)!==F.current){var bt;F==null||(bt=F.current)==null||bt.focus()}},[E,a]);var Te=Q.useMemo(function(){return{ArrowDown:function(bt){bt.preventDefault(),S({type:dB,altKey:bt.altKey,getItemNodeFromIndex:ce})},ArrowUp:function(bt){bt.preventDefault(),S({type:fB,altKey:bt.altKey,getItemNodeFromIndex:ce})},Home:function(bt){ie.current.state.isOpen&&(bt.preventDefault(),S({type:mB,getItemNodeFromIndex:ce}))},End:function(bt){ie.current.state.isOpen&&(bt.preventDefault(),S({type:gB,getItemNodeFromIndex:ce}))},Escape:function(bt){var At=ie.current.state;(At.isOpen||At.inputValue||At.selectedItem||At.highlightedIndex>-1)&&(bt.preventDefault(),S({type:pB}))},Enter:function(bt){var At=ie.current.state;!At.isOpen||bt.which===229||(bt.preventDefault(),S({type:_B,getItemNodeFromIndex:ce}))},PageUp:function(bt){ie.current.state.isOpen&&(bt.preventDefault(),S({type:yB,getItemNodeFromIndex:ce}))},PageDown:function(bt){ie.current.state.isOpen&&(bt.preventDefault(),S({type:vB,getItemNodeFromIndex:ce}))}}},[S,ie,ce]),ye=Q.useCallback(function(st){return Co({id:H.labelId,htmlFor:H.inputId},st)},[H]),_e=Q.useCallback(function(st,bt){var At,Tt=st===void 0?{}:st,Wt=Tt.onMouseLeave,nn=Tt.refKey,An=nn===void 0?"ref":nn,rn=Tt.ref,Jt=z_(Tt,rze),Mn=bt===void 0?{}:bt;return Mn.suppressRefError,Co((At={},At[An]=fA(rn,function(vn){z.current=vn}),At.id=H.menuId,At.role="listbox",At["aria-labelledby"]=Jt&&Jt["aria-label"]?void 0:""+H.labelId,At.onMouseLeave=_g(Wt,function(){S({type:_ne})}),At),Jt)},[S,me,H]),ke=Q.useCallback(function(st){var bt,At,Tt=st===void 0?{}:st,Wt=Tt.item,nn=Tt.index,An=Tt.refKey,rn=An===void 0?"ref":An,Jt=Tt.ref,Mn=Tt.onMouseMove,vn=Tt.onMouseDown,Nn=Tt.onClick;Tt.onPress;var lr=Tt.disabled,rr=z_(Tt,ize),Ue=ie.current,Je=Ue.props,xt=Ue.state,Et=Q4e(Wt,nn,Je.items,"Pass either item or index to getItemProps!"),Vt=Et[1],we="onClick",ae=Nn,Y=function(){Vt!==xt.highlightedIndex&&(xe.current=!1,S({type:bne,index:Vt,disabled:lr}))},be=function(){S({type:wB,index:Vt})},$e=function(rt){return rt.preventDefault()};return Co((bt={},bt[rn]=fA(Jt,function(ze){ze&&(B.current[H.getItemId(Vt)]=ze)}),bt.disabled=lr,bt.role="option",bt["aria-selected"]=""+(Vt===xt.highlightedIndex),bt.id=H.getItemId(Vt),bt),!lr&&(At={},At[we]=_g(ae,be),At),{onMouseMove:_g(Mn,Y),onMouseDown:_g(vn,$e)},rr)},[S,ie,xe,H]),Ne=Q.useCallback(function(st){var bt,At=st===void 0?{}:st,Tt=At.onClick;At.onPress;var Wt=At.refKey,nn=Wt===void 0?"ref":Wt,An=At.ref,rn=z_(At,oze),Jt=ie.current.state,Mn=function(){S({type:xne})};return Co((bt={},bt[nn]=fA(An,function(vn){U.current=vn}),bt["aria-controls"]=H.menuId,bt["aria-expanded"]=Jt.isOpen,bt.id=H.toggleButtonId,bt.tabIndex=-1,bt),!rn.disabled&&Co({},{onClick:_g(Tt,Mn)}),rn)},[S,ie,H]),Qe=Q.useCallback(function(st,bt){var At,Tt=st===void 0?{}:st,Wt=Tt.onKeyDown,nn=Tt.onChange,An=Tt.onInput,rn=Tt.onFocus,Jt=Tt.onBlur;Tt.onChangeText;var Mn=Tt.refKey,vn=Mn===void 0?"ref":Mn,Nn=Tt.ref,lr=z_(Tt,sze),rr=bt===void 0?{}:bt;rr.suppressRefError;var Ue=ie.current.state,Je=function($e){var ze=R4e($e);ze&&Te[ze]&&Te[ze]($e)},xt=function($e){S({type:bB,inputValue:$e.target.value})},Et=function($e){if(Ue.isOpen&&!re.current.isMouseDown){var ze=$e.relatedTarget===null&&a.document.activeElement!==a.document.body;S({type:F5,selectItem:!ze})}},Vt=function(){Ue.isOpen||S({type:xB})},we="onChange",ae={};if(!lr.disabled){var Y;ae=(Y={},Y[we]=_g(nn,An,xt),Y.onKeyDown=_g(Wt,Je),Y.onBlur=_g(Jt,Et),Y.onFocus=_g(rn,Vt),Y)}return Co((At={},At[vn]=fA(Nn,function(be){F.current=be}),At["aria-activedescendant"]=Ue.isOpen&&Ue.highlightedIndex>-1?H.getItemId(Ue.highlightedIndex):"",At["aria-autocomplete"]="list",At["aria-controls"]=H.menuId,At["aria-expanded"]=Ue.isOpen,At["aria-labelledby"]=lr&&lr["aria-label"]?void 0:""+H.labelId,At.autoComplete="off",At.id=H.inputId,At.role="combobox",At.value=Ue.inputValue,At),ae,lr)},[me,ie,H,Te,S,re,a]),Se=Q.useCallback(function(){S({type:wne})},[S]),Me=Q.useCallback(function(){S({type:Sne})},[S]),Xe=Q.useCallback(function(){S({type:One})},[S]),Ee=Q.useCallback(function(st){S({type:Cne,highlightedIndex:st})},[S]),ft=Q.useCallback(function(st){S({type:OB,selectedItem:st})},[S]),mt=Q.useCallback(function(st){S({type:Tne,inputValue:st})},[S]),ct=Q.useCallback(function(){S({type:kne})},[S]);return{getItemProps:ke,getLabelProps:ye,getMenuProps:_e,getInputProps:Qe,getToggleButtonProps:Ne,toggleMenu:Se,openMenu:Xe,closeMenu:Me,setHighlightedIndex:Ee,setInputValue:mt,selectItem:ft,reset:ct,highlightedIndex:A,isOpen:E,selectedItem:R,inputValue:$}}gn.array,gn.array,gn.array,gn.func,gn.func,gn.func,gn.number,gn.number,gn.number,gn.func,gn.func,gn.string,gn.string,gn.shape({addEventListener:gn.func,removeEventListener:gn.func,document:gn.shape({getElementById:gn.func,activeElement:gn.any,body:gn.any})});dC.itemToString,dC.stateReducer,dC.environment;const sZ=20,Pne=t=>t.suggestions.length>0?se.createElement(aze,{...t}):se.createElement("input",{className:jt.textInput,size:40,autoFocus:!0,...t.register(t.inputName)}),aze=({autofocus:t,suggestions:e,control:n,inputName:r,placeholder:i,initialInputValue:o,setValue:a})=>{const[s,u]=se.useState(e.slice(0,sZ)),f=Es(Ms),g=e.length>0,{isOpen:_,getToggleButtonProps:w,getMenuProps:S,getInputProps:E,highlightedIndex:A,getItemProps:R,selectedItem:$}=Ane({initialInputValue:o,onInputValueChange({inputValue:B=""}){a(r,B),B=B.toLowerCase()||"";const F=[];for(const U of e)if(U.toLowerCase().includes(B)&&(F.push(U),F.length>=sZ))break;u(F)},items:s,itemToString(B){return B??""}}),z=_&&s.length>0;return se.createElement("div",{className:jt.downshiftAutocompleteContainer},se.createElement("div",{"data-visible-dropdown":z,className:jt.downshiftInputWrapper},se.createElement(a4e,{name:r,control:n,render:({field:B})=>{const F=E();return se.createElement("input",{...F,name:B.name,placeholder:i,className:jt.downshiftInput,size:30,"data-editor-dialog":!0,autoFocus:t})}}),g&&se.createElement("button",{"aria-label":"toggle menu",type:"button",...w()},f("arrow_drop_down"))),se.createElement("div",{className:jt.downshiftAutocompleteContainer},se.createElement("ul",{...S(),"data-visible":z},s.map((B,F)=>se.createElement("li",{"data-selected":$===B,"data-highlighted":A===F,key:`${B}${F}`,...R({item:B,index:F})},B)))))},lze=()=>{const[t,e,n,r,i]=Wo(B4,X_,J0,S0,rT),o=Ri(Lne),a=Ri(Ine),s=xs(),{register:u,handleSubmit:f,control:g,setValue:_,reset:w}=uB({values:e.type==="editing"?e.initialValues:{}}),S=()=>{w({src:"",title:"",altText:"",width:void 0,height:void 0})};return e.type==="inactive"?null:se.createElement(Gte,{open:!0,onOpenChange:E=>{E||(a(),S())}},se.createElement(Xte,{container:n?.current},se.createElement(Yte,{className:jt.dialogOverlay}),se.createElement(Kte,{className:jt.dialogContent,onOpenAutoFocus:E=>{E.preventDefault()}},se.createElement(Jte,null,s("uploadImage.dialogTitle","Upload an image")),se.createElement("form",{onSubmit:async E=>{E.preventDefault(),E.stopPropagation(),await f(o)(E),S()},className:jt.multiFieldForm},r===null?se.createElement("input",{type:"hidden",accept:"image/*",...u("file")}):se.createElement("div",{className:jt.formField},se.createElement("label",{htmlFor:"file"},s("uploadImage.uploadInstructions","Upload an image from your device:")),se.createElement("input",{type:"file",accept:"image/*",...u("file")})),se.createElement("div",{className:jt.formField},se.createElement("label",{htmlFor:"src"},r!==null?s("uploadImage.addViaUrlInstructions","Or add an image from an URL:"):s("uploadImage.addViaUrlInstructionsNoUpload","Add an image from an URL:")),se.createElement(Pne,{register:u,initialInputValue:e.type==="editing"?e.initialValues.src??"":"",inputName:"src",suggestions:t,setValue:_,control:g,placeholder:s("uploadImage.autoCompletePlaceholder","Select or paste an image src")})),se.createElement("div",{className:jt.formField},se.createElement("label",{htmlFor:"alt"},s("uploadImage.alt","Alt:")),se.createElement("input",{type:"text",...u("altText"),className:jt.textInput})),se.createElement("div",{className:jt.formField},se.createElement("label",{htmlFor:"title"},s("uploadImage.title","Title:")),se.createElement("input",{type:"text",...u("title"),className:jt.textInput})),i&&se.createElement("div",{className:jt.imageDimensionsContainer},se.createElement("div",{className:jt.formField},se.createElement("label",{htmlFor:"width"},s("uploadImage.width","Width:")),se.createElement("input",{type:"number",min:0,...u("width"),className:jt.textInput})),se.createElement("div",{className:jt.formField},se.createElement("label",{htmlFor:"height"},s("uploadImage.height","Height:")),se.createElement("input",{type:"number",min:0,...u("height"),className:jt.textInput}))),se.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--spacing-2)"}},se.createElement("button",{type:"submit",title:s("dialogControls.save","Save"),"aria-label":s("dialogControls.save","Save"),className:Gr(jt.primaryButton)},s("dialogControls.save","Save")),se.createElement(ene,{asChild:!0},se.createElement("button",{type:"reset",title:s("dialogControls.cancel","Cancel"),"aria-label":s("dialogControls.cancel","Cancel"),className:Gr(jt.secondaryButton)},s("dialogControls.cancel","Cancel"))))))))};function kD(t,e,n){return Math.min(Math.max(t,e),n)}const ho={east:1,north:8,south:2,west:4};function cze({onResizeStart:t,onResizeEnd:e,imageRef:n,maxWidth:r,editor:i}){const o=Q.useRef(null),a=Q.useRef({priority:"",value:"default"}),s=Q.useRef({currentHeight:0,currentWidth:0,direction:0,isResizing:!1,ratio:0,startHeight:0,startWidth:0,startX:0,startY:0}),u=i.getRootElement(),f=r??(u!==null?u.getBoundingClientRect().width-20:100),g=u!==null?u.getBoundingClientRect().height-20:100,_=100,w=100,S=z=>{const B=z===ho.east||z===ho.west,F=z===ho.north||z===ho.south,U=z&ho.north&&z&ho.west||z&ho.south&&z&ho.east,q=B?"ew":F?"ns":U?"nwse":"nesw";u!==null&&u.style.setProperty("cursor",`${q}-resize`,"important"),document.body!==null&&(document.body.style.setProperty("cursor",`${q}-resize`,"important"),a.current.value=document.body.style.getPropertyValue("-webkit-user-select"),a.current.priority=document.body.style.getPropertyPriority("-webkit-user-select"),document.body.style.setProperty("-webkit-user-select","none","important"))},E=()=>{u!==null&&u.style.setProperty("cursor","text"),document.body!==null&&(document.body.style.setProperty("cursor","default"),document.body.style.setProperty("-webkit-user-select",a.current.value,a.current.priority))},A=(z,B)=>{if(!i.isEditable())return;const F=n.current,U=o.current;if(F!==null&&U!==null){z.preventDefault();const{width:q,height:H}=F.getBoundingClientRect(),ne=s.current;ne.startWidth=q,ne.startHeight=H,ne.ratio=q/H,ne.currentWidth=q,ne.currentHeight=H,ne.startX=z.clientX,ne.startY=z.clientY,ne.isResizing=!0,ne.direction=B,S(B),t(),U.classList.add(jt.imageControlWrapperResizing),F.style.height=`${H}px`,F.style.width=`${q}px`,document.addEventListener("pointermove",R),document.addEventListener("pointerup",$)}},R=z=>{const B=n.current,F=s.current,U=F.direction&(ho.east|ho.west),q=F.direction&(ho.south|ho.north);if(B!==null&&F.isResizing)if(U&&q){let H=Math.floor(F.startX-z.clientX);H=F.direction&ho.east?-H:H;const ne=kD(F.startWidth+H,_,f),ie=ne/F.ratio;B.style.width=`${ne}px`,B.style.height=`${ie}px`,F.currentHeight=ie,F.currentWidth=ne}else if(q){let H=Math.floor(F.startY-z.clientY);H=F.direction&ho.south?-H:H;const ne=kD(F.startHeight+H,w,g);B.style.height=`${ne}px`,F.currentHeight=ne}else{let H=Math.floor(F.startX-z.clientX);H=F.direction&ho.east?-H:H;const ne=kD(F.startWidth+H,_,f);B.style.width=`${ne}px`,F.currentWidth=ne}},$=()=>{const z=n.current,B=s.current,F=o.current;if(z!==null&&F!==null&&B.isResizing){const U=B.currentWidth,q=B.currentHeight;B.startWidth=0,B.startHeight=0,B.ratio=0,B.startX=0,B.startY=0,B.currentWidth=0,B.currentHeight=0,B.isResizing=!1,F.classList.remove(jt.imageControlWrapperResizing),E(),e(U,q),document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",$)}};return Q.createElement("div",{ref:o},Q.createElement("div",{className:Gr(jt.imageResizer,jt.imageResizerN),onPointerDown:z=>{A(z,ho.north)}}),Q.createElement("div",{className:Gr(jt.imageResizer,jt.imageResizerNe),onPointerDown:z=>{A(z,ho.north|ho.east)}}),Q.createElement("div",{className:Gr(jt.imageResizer,jt.imageResizerE),onPointerDown:z=>{A(z,ho.east)}}),Q.createElement("div",{className:Gr(jt.imageResizer,jt.imageResizerSe),onPointerDown:z=>{A(z,ho.south|ho.east)}}),Q.createElement("div",{className:Gr(jt.imageResizer,jt.imageResizerS),onPointerDown:z=>{A(z,ho.south)}}),Q.createElement("div",{className:Gr(jt.imageResizer,jt.imageResizerSw),onPointerDown:z=>{A(z,ho.south|ho.west)}}),Q.createElement("div",{className:Gr(jt.imageResizer,jt.imageResizerW),onPointerDown:z=>{A(z,ho.west)}}),Q.createElement("div",{className:Gr(jt.imageResizer,jt.imageResizerNw),onPointerDown:z=>{A(z,ho.north|ho.west)}}))}const uze="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`
    <svg id="imgLoadError" xmlns="http://www.w3.org/2000/svg" width="100" height="100">
      <rect x="0" y="0" width="100" height="100" fill="none" stroke="red" stroke-width="4" stroke-dasharray="4" />
      <text x="50" y="55" text-anchor="middle" font-size="20" fill="red"></text>
    </svg>
`),hze={__cache:{},read(t){if(this.__cache[t]||(this.__cache[t]=new Promise(e=>{const n=new Image;n.onerror=()=>{this.__cache[t]=uze,e()},n.onload=()=>{this.__cache[t]=t,e()},n.src=t})),this.__cache[t]instanceof Promise)throw this.__cache[t];return this.__cache[t]}};function dze({title:t,alt:e,className:n,imageRef:r,src:i,width:o,height:a}){return se.createElement("img",{className:n??void 0,alt:e,src:hze.read(i),title:t,ref:r,draggable:"false",width:o,height:a})}function fze({src:t,title:e,alt:n,nodeKey:r,width:i,height:o,rest:a}){const[s,u,f,g,_,w]=Wo(V4,F4,rT,j4,Ma,Q4),S=se.useRef(null),E=se.useRef(null),[A,R,$]=aee(r),[z]=Ll(),[B,F]=se.useState(null),U=se.useRef(null),[q,H]=se.useState(!1),[ne,ie]=se.useState(null),[ce,xe]=se.useState(null),re=se.useCallback(Se=>{if(A&&es(sn())){Se.preventDefault();const Xe=Ii(r);j5(Xe)&&Xe.remove()}return!1},[A,r]),me=se.useCallback(Se=>{const Me=sn(),Xe=E.current;return A&&es(Me)&&Me.getNodes().length===1&&Xe!==null&&Xe!==document.activeElement?(Se.preventDefault(),Xe.focus(),!0):!1},[A]),Te=se.useCallback(Se=>E.current===Se.target?(rs(null),z.update(()=>{R(!0);const Me=z.getRootElement();Me!==null&&Me.focus()}),!0):!1,[z,R]);se.useEffect(()=>{g?(async()=>{ce||xe(t);const Me=await g(t);ie(Me)})().catch(Me=>{console.error(Me)}):ie(t)},[t,g,ce]),se.useEffect(()=>{if(f&&S.current){const{current:Se}=S;aZ(Se,"width",i),aZ(Se,"height",o)}},[f,i,o]),se.useEffect(()=>{let Se=!0;const Me=$l(z.registerUpdateListener(({editorState:Xe})=>{Se&&F(Xe.read(()=>sn()))}),z.registerCommand(HT,(Xe,Ee)=>(U.current=Ee,!1),mo),z.registerCommand(sR,Xe=>{const Ee=Xe;return q?!0:Ee.target===S.current?(Ee.shiftKey?R(!A):($(),R(!0)),!0):!1},mo),z.registerCommand(dR,Xe=>Xe.target===S.current?(Xe.preventDefault(),!0):!1,mo),z.registerCommand($N,re,mo),z.registerCommand(uR,re,mo),z.registerCommand(Pw,me,mo),z.registerCommand(XT,Te,mo));return()=>{Se=!1,Me()}},[$,z,q,A,r,re,me,Te,R]);const ye=(Se,Me)=>{setTimeout(()=>{H(!1)},200),z.update(()=>{const Xe=Ii(r);j5(Xe)&&Xe.setWidthAndHeight(Se,Me)})},_e=()=>{H(!0)},ke=es(B),Ne=A,Qe=se.useMemo(()=>{if(a.length===0)return null;const Se=a.find(Me=>Me.type==="mdxJsxAttribute"&&(Me.name==="class"||Me.name==="className"));return Se?Se.value:null},[a]);return ne!==null?se.createElement(se.Suspense,{fallback:s?se.createElement(s,null):null},se.createElement("div",{className:jt.imageWrapper,"data-editor-block-type":"image"},se.createElement("div",{draggable:ke},se.createElement(dze,{width:i,height:o,className:Gr({[jt.focusedImage]:Ne},Qe),src:ne,title:e??"",alt:n??"",imageRef:S})),ke&&Ne&&!u&&se.createElement(cze,{editor:z,imageRef:S,onResizeStart:_e,onResizeEnd:ye}),_||se.createElement(w,{nodeKey:r,imageSource:ne,initialImagePath:ce,title:e??"",alt:n??"",width:i,height:o}))):null}const aZ=(t,e,n)=>{typeof n=="number"?t.style[e]=`${n}px`:t.style.removeProperty(e)};var pze=Object.defineProperty,mze=(t,e,n)=>e in t?pze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O1=(t,e,n)=>(mze(t,typeof e!="symbol"?e+"":e,n),n);function gze(t){if(t instanceof HTMLImageElement){const{alt:e,src:n,title:r,width:i,height:o}=t;return{node:zb({altText:e,src:n,title:r,width:i,height:o})}}return null}class vk extends ry{constructor(e,n,r,i,o,a,s){super(s),O1(this,"__src"),O1(this,"__altText"),O1(this,"__title"),O1(this,"__width"),O1(this,"__height"),O1(this,"__rest"),this.__src=e,this.__title=r,this.__altText=n,this.__width=i??"inherit",this.__height=o??"inherit",this.__rest=a??[]}static getType(){return"image"}static clone(e){return new vk(e.__src,e.__altText,e.__title,e.__width,e.__height,e.__rest,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__src=e.__src,this.__altText=e.__altText,this.__title=e.__title,this.__width=e.__width,this.__height=e.__height,this.__rest=e.__rest}static importJSON(e){const{altText:n,title:r,src:i,width:o,rest:a,height:s}=e;return zb({altText:n,title:r,src:i,height:s,width:o,rest:a})}exportDOM(){const e=document.createElement("img");return e.setAttribute("src",this.__src),e.setAttribute("alt",this.__altText),this.__title&&e.setAttribute("title",this.__title),this.__width&&e.setAttribute("width",this.__width.toString()),this.__height&&e.setAttribute("height",this.__height.toString()),{element:e}}static importDOM(){return{img:()=>({conversion:gze,priority:0})}}exportJSON(){return{altText:this.getAltText(),title:this.getTitle(),height:this.__height==="inherit"?0:this.__height,width:this.__width==="inherit"?0:this.__width,src:this.getSrc(),rest:this.__rest,type:"image",version:1}}setWidthAndHeight(e,n){const r=this.getWritable();r.__width=e,r.__height=n}createDOM(e,n){const r=document.createElement("span"),o=e.theme.image;return o!==void 0&&(r.className=o),r}updateDOM(){return!1}getSrc(){return this.__src}getAltText(){return this.__altText}getTitle(){return this.__title}getHeight(){return this.__height}getWidth(){return this.__width}getRest(){return this.__rest}setTitle(e){this.getWritable().__title=e}setSrc(e){this.getWritable().__src=e}setAltText(e){this.getWritable().__altText=e??""}shouldBeSerializedAsElement(){return this.__width!=="inherit"||this.__height!=="inherit"||this.__rest.length>0}decorate(e){return se.createElement(fze,{src:this.getSrc(),title:this.getTitle(),nodeKey:this.getKey(),width:this.__width,height:this.__height,alt:this.__altText,rest:this.__rest})}}function zb(t){const{altText:e,title:n,src:r,key:i,width:o,height:a,rest:s}=t;return new vk(r,e,n,o,a,s,i)}function j5(t){return t instanceof vk}const yze={testLexicalNode:j5,visitLexicalNode({mdastParent:t,lexicalNode:e,actions:n}){if(e.shouldBeSerializedAsElement()){const r=new Image;e.getHeight()!=="inherit"&&(r.height=e.getHeight()),e.getWidth()!=="inherit"&&(r.width=e.getWidth()),e.getAltText()&&(r.alt=e.getAltText()),e.getTitle()&&(r.title=e.getTitle());for(const i of e.getRest())i.type==="mdxJsxAttribute"&&typeof i.value=="string"&&r.setAttribute(i.name,i.value);n.appendToParent(t,{type:"html",value:r.outerHTML.replace(/>$/,` src="${e.getSrc()}" />`)})}else n.appendToParent(t,{type:"image",url:e.getSrc(),alt:e.getAltText(),title:e.getTitle()})}},vze={testNode:"image",visitNode({mdastNode:t,actions:e}){e.addAndStepInto(zb({src:t.url,altText:t.alt??"",title:t.title??""}))}},_ze={testNode:t=>t.type==="html"&&t.value.trim().startsWith("<img"),visitNode({mdastNode:t,lexicalParent:e}){const n=document.createElement("div");n.innerHTML=t.value;const r=n.querySelector("img");if(!r)throw new Error("Invalid HTML image");const i=r.src,o=r.alt,a=r.title,s=r.width,u=r.height,f=zb({src:i||"",altText:o,title:a,width:s,height:u});if(e.getType()==="root"){const g=mi();g.append(f),e.append(g)}else e.append(f)}};function _2(t,e){const n=t.attributes.find(r=>r.type==="mdxJsxAttribute"&&r.name===e);if(n)return n.value}const bze={testNode:t=>(t.type==="mdxJsxTextElement"||t.type==="mdxJsxFlowElement")&&t.name==="img",visitNode({mdastNode:t,lexicalParent:e}){const n=_2(t,"src");if(!n)return;const r=_2(t,"alt")??"",i=_2(t,"title"),o=_2(t,"height"),a=_2(t,"width"),s=t.attributes.filter(f=>f.type==="mdxJsxAttribute"&&!["src","alt","title","height","width"].includes(f.name)),u=zb({src:n,altText:r,title:i,width:a?parseInt(a,10):void 0,height:o?parseInt(o,10):void 0,rest:s});if(e.getType()==="root"){const f=mi();f.append(u),e.append(f)}else e.append(u)}},CB=bs(t=>{t.sub(t.pipe(CB,$o(zo)),([e,n])=>{n?.update(()=>{const r=zb({altText:e.altText??"",src:e.src,title:e.title??"",width:Vw(e.width),height:Vw(e.height)});OO([r]),Ys(r.getParentOrThrow())&&l8(r,mi).selectEnd()})})}),xze=bs(t=>{t.sub(t.pipe(xze,$o(S0)),([e,n])=>{const r=i=>{t.pub(CB,{...e,src:i})};"file"in e?n?.(e.file).then(r).catch(i=>{throw i}):r(e.src)})}),B4=kn([]),F4=kn(!1),S0=kn(null),j4=kn(null),V4=kn(null),X_=kn({type:"inactive"},t=>{t.sub(t.pipe(Lne,$o(zo,S0,X_,rT)),([e,n,r,i,o])=>{const a=i.type==="editing"?s=>{n?.update(()=>{const{nodeKey:u}=i,f=Ii(u);if(f.setTitle(e.title),f.setAltText(e.altText),f.setSrc(s),o){const g=Vw(e.width),_=Vw(e.height);f.setWidthAndHeight(g??"inherit",_??"inherit")}}),t.pub(X_,{type:"inactive"})}:s=>{t.pub(CB,{...e,src:s}),t.pub(X_,{type:"inactive"})};e.file&&e.file.length>0?r?.(e.file.item(0)).then(a).catch(s=>{throw s}):e.src&&a(e.src)}),t.pub(KC,e=>{const n=t.getValue(S0);return $l(e.registerCommand(V5,r=>{const i=zb(r);return OO([i]),Ys(i.getParentOrThrow())&&l8(i,mi).selectEnd(),!0},Ar),e.registerCommand(dR,r=>Cze(r),g5),e.registerCommand(NN,r=>Tze(r,!!n),mo),e.registerCommand(zN,r=>kze(r,e,t.getValue(S0)),g5),e.registerCommand(GT,r=>{var i,o;if(!n){let f=Array.from(((i=r.clipboardData)==null?void 0:i.items)??[]);return f=f.filter(g=>g.type.includes("text")),!f.length||f.length===0}const a=Array.from(((o=r.clipboardData)==null?void 0:o.items)??[]);if(a.some(f=>!f.type.includes("image"))||!a.length||a.length===0)return!1;const u=t.getValue(S0);return Promise.all(a.map(f=>u(f.getAsFile()))).then(f=>{f.forEach(g=>{e.dispatchCommand(V5,{src:g,altText:""})})}).catch(f=>{throw f}),!0},eh))})}),Mne=dm(t=>{t.link(t.pipe(Mne,dY({type:"new"})),X_)}),Rne=bs(t=>{t.link(t.pipe(Rne,Ug(e=>({type:"editing",...e}))),X_)}),Ine=dm(t=>{t.link(t.pipe(Ine,dY({type:"inactive"})),X_)}),Dne=kn(!1),rT=kn(!1),Lne=bs(),Q4=kn(R4),Vw=t=>{if(typeof t>"u")return;const e=parseInt(String(t),10);return Number.isNaN(e)?void 0:e},wze=Dl({init(t,e){t.pubIn({[ed]:[vze,_ze,bze],[kf]:vk,[Ef]:yze,[$b]:e?.ImageDialog??lze,[S0]:e?.imageUploadHandler??null,[B4]:e?.imageAutocompleteSuggestions??[],[F4]:!!e?.disableImageResize,[Dne]:!!e?.disableImageSettingsButton,[rT]:!!e?.allowSetImageDimensions,[j4]:e?.imagePreviewHandler??null,[Q4]:e?.EditImageToolbar??R4,[V4]:e?.imagePlaceholder??VU})},update(t,e){t.pubIn({[S0]:e?.imageUploadHandler??null,[B4]:e?.imageAutocompleteSuggestions??[],[F4]:!!e?.disableImageResize,[j4]:e?.imagePreviewHandler??null,[rT]:!!e?.allowSetImageDimensions,[Q4]:e?.EditImageToolbar??R4,[V4]:e?.imagePlaceholder??VU})}}),Oze=t=>oee?(t??window).getSelection():null,V5=Kn("INSERT_IMAGE_COMMAND"),Sze="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function Cze(t){const e=TB();if(!e)return!1;const n=t.dataTransfer;if(!n)return!1;n.setData("text/plain","_");const r=document.createElement("img");return r.src=Sze,n.setDragImage(r,0,0),n.setData("application/x-lexical-drag",JSON.stringify({data:{altText:e.__altText,title:e.__title,key:e.getKey(),src:e.__src},type:"image"})),!0}function Tze(t,e){var n;if(e){let i=Array.from(((n=t.dataTransfer)==null?void 0:n.items)??[]);if(i=i.filter(o=>o.type.includes("image")),i.length>0)return t.preventDefault(),!0}return TB()?($ne(t)||t.preventDefault(),!0):!1}function kze(t,e,n){var r;let i=Array.from(((r=t.dataTransfer)==null?void 0:r.items)??[]);if(i=i.filter(s=>s.type.includes("image")),i.length>0&&n!==null)return t.preventDefault(),Promise.all(i.map(s=>s.kind==="string"?new Promise(u=>{s.getAsString(u)}):n(s.getAsFile()))).then(s=>{s.forEach(u=>{e.dispatchCommand(V5,{src:u,altText:""})})}).catch(s=>{throw s}),!0;const o=TB();if(!o)return!1;const a=Eze(t);if(!a)return!1;if(t.preventDefault(),$ne(t)){const s=Aze(t);o.remove();const u=wO();s!=null&&u.applyDOMRange(s),rs(u),e.dispatchCommand(V5,a)}return!0}function TB(){const t=sn();if(!es(t))return null;const n=t.getNodes()[0];return j5(n)?n:null}function Eze(t){var e;const n=(e=t.dataTransfer)==null?void 0:e.getData("application/x-lexical-drag");if(!n)return null;const{type:r,data:i}=JSON.parse(n);return r!=="image"?null:i}function $ne(t){const e=t.target;return!!(e&&e instanceof HTMLElement&&e.parentElement)}function Aze(t){let e;const n=t.target,r=n==null?null:n.nodeType===9?n.defaultView:n.ownerDocument.defaultView,i=Oze(r);if(document.caretRangeFromPoint)e=document.caretRangeFromPoint(t.clientX,t.clientY);else if(t.rangeParent&&i!==null)i.collapse(t.rangeParent,t.rangeOffset??0),e=i.getRangeAt(0);else throw Error("Cannot get the selection when dragging");return e}var ED={exports:{}},lZ;function Pze(){return lZ||(lZ=1,(function(t){(function(){var e;e=t.exports=i,e.format=i,e.vsprintf=r,typeof console<"u"&&typeof console.log=="function"&&(e.printf=n);function n(){console.log(i.apply(null,arguments))}function r(o,a){return i.apply(null,[o].concat(a))}function i(o){for(var a=1,s=[].slice.call(arguments),u=0,f=o.length,g="",_,w=!1,S,E,A=!1,R,$=function(){return s[a++]},z=function(){for(var B="";/\d/.test(o[u]);)B+=o[u++],_=o[u];return B.length>0?parseInt(B):null};u<f;++u)if(_=o[u],w)switch(w=!1,_=="."?(A=!1,_=o[++u]):_=="0"&&o[u+1]=="."?(A=!0,u+=2,_=o[u]):A=!0,R=z(),_){case"b":g+=parseInt($(),10).toString(2);break;case"c":S=$(),typeof S=="string"||S instanceof String?g+=S:g+=String.fromCharCode(parseInt(S,10));break;case"d":g+=parseInt($(),10);break;case"f":E=String(parseFloat($()).toFixed(R||6)),g+=A?E:E.replace(/^0/,"");break;case"j":g+=JSON.stringify($());break;case"o":g+="0"+parseInt($(),10).toString(8);break;case"s":g+=$();break;case"x":g+="0x"+parseInt($(),10).toString(16);break;case"X":g+="0x"+parseInt($(),10).toString(16).toUpperCase();break;default:g+=_;break}else _==="%"?w=!0:g+=_;return g}})()})(ED)),ED.exports}var Mze=Pze();const Rze=aO(Mze),gA=Object.assign(O_(Error),{eval:O_(EvalError),range:O_(RangeError),reference:O_(ReferenceError),syntax:O_(SyntaxError),type:O_(TypeError),uri:O_(URIError)});function O_(t){return e.displayName=t.displayName||t.name,e;function e(n,...r){const i=n&&Rze(n,...r);return new t(i)}}const yA={}.hasOwnProperty,cZ={yaml:"-",toml:"+"};function kB(t){const e=[];let n=-1;const r=Array.isArray(t)?t:t?[t]:["yaml"];for(;++n<r.length;)e[n]=Ize(r[n]);return e}function Ize(t){let e=t;if(typeof e=="string"){if(!yA.call(cZ,e))throw gA("Missing matter definition for `%s`",e);e={type:e,marker:cZ[e]}}else if(typeof e!="object")throw gA("Expected matter to be an object, not `%j`",e);if(!yA.call(e,"type"))throw gA("Missing `type` in matter `%j`",e);if(!yA.call(e,"fence")&&!yA.call(e,"marker"))throw gA("Missing `marker` or `fence` in matter `%j`",e);return e}function Dze(t){const e=kB(t),n={};let r=-1;for(;++r<e.length;){const i=e[r],o=U4(i,"open").charCodeAt(0),a=Lze(i),s=n[o];Array.isArray(s)?s.push(a):n[o]=[a]}return{flow:n}}function Lze(t){const e=t.anywhere,n=t.type,r=n+"Fence",i=r+"Sequence",o=n+"Value",a={tokenize:g,partial:!0};let s,u=0;return{tokenize:f,concrete:!0};function f(_,w,S){const E=this;return A;function A(H){const ne=E.now();return ne.column===1&&(ne.line===1||e)&&(s=U4(t,"open"),u=0,H===s.charCodeAt(u))?(_.enter(n),_.enter(r),_.enter(i),R(H)):S(H)}function R(H){return u===s.length?(_.exit(i),pr(H)?(_.enter("whitespace"),$(H)):z(H)):H===s.charCodeAt(u++)?(_.consume(H),R):S(H)}function $(H){return pr(H)?(_.consume(H),$):(_.exit("whitespace"),z(H))}function z(H){return Sn(H)?(_.exit(r),_.enter("lineEnding"),_.consume(H),_.exit("lineEnding"),s=U4(t,"close"),u=0,_.attempt(a,q,B)):S(H)}function B(H){return H===null||Sn(H)?U(H):(_.enter(o),F(H))}function F(H){return H===null||Sn(H)?(_.exit(o),U(H)):(_.consume(H),F)}function U(H){return H===null?S(H):(_.enter("lineEnding"),_.consume(H),_.exit("lineEnding"),_.attempt(a,q,B))}function q(H){return _.exit(n),w(H)}}function g(_,w,S){let E=0;return A;function A(B){return B===s.charCodeAt(E)?(_.enter(r),_.enter(i),R(B)):S(B)}function R(B){return E===s.length?(_.exit(i),pr(B)?(_.enter("whitespace"),$(B)):z(B)):B===s.charCodeAt(E++)?(_.consume(B),R):S(B)}function $(B){return pr(B)?(_.consume(B),$):(_.exit("whitespace"),z(B))}function z(B){return B===null||Sn(B)?(_.exit(r),w(B)):S(B)}}}function U4(t,e){return t.marker?uZ(t.marker,e).repeat(3):uZ(t.fence,e)}function uZ(t,e){return typeof t=="string"?t:t[e]}function $ze(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function zze(t){const e=kB(t),n={},r={};let i=-1;for(;++i<e.length;){const o=e[i];n[o.type]=Nze(o),r[o.type]=Bze,r[o.type+"Value"]=Fze}return{enter:n,exit:r}}function Nze(t){return e;function e(n){this.enter({type:t.type,value:""},n),this.buffer()}}function Bze(t){const e=this.resume(),n=this.stack[this.stack.length-1];this.exit(t),n.value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,"")}function Fze(t){this.config.enter.data.call(this,t),this.config.exit.data.call(this,t)}function jze(t){const e=[],n={},r=kB(t);let i=-1;for(;++i<r.length;){const o=r[i];n[o.type]=Vze(o);const a=Z4(o,"open");e.push({atBreak:!0,character:a.charAt(0),after:$ze(a.charAt(1))})}return{unsafe:e,handlers:n}}function Vze(t){const e=Z4(t,"open"),n=Z4(t,"close");return r;function r(i){return e+(i.value?`
`+i.value:"")+`
`+n}}function Z4(t,e){return t.marker?hZ(t.marker,e).repeat(3):hZ(t.fence,e)}function hZ(t,e){return typeof t=="string"?t:t[e]}function zne(t){return typeof t>"u"||t===null}function Qze(t){return typeof t=="object"&&t!==null}function Uze(t){return Array.isArray(t)?t:zne(t)?[]:[t]}function Zze(t,e){var n,r,i,o;if(e)for(o=Object.keys(e),n=0,r=o.length;n<r;n+=1)i=o[n],t[i]=e[i];return t}function qze(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}function Wze(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Hze=zne,Gze=Qze,Xze=Uze,Yze=qze,Kze=Wze,Jze=Zze,da={isNothing:Hze,isObject:Gze,toArray:Xze,repeat:Yze,isNegativeZero:Kze,extend:Jze};function Nne(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}function iT(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Nne(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}iT.prototype=Object.create(Error.prototype);iT.prototype.constructor=iT;iT.prototype.toString=function(e){return this.name+": "+Nne(this,e)};var sc=iT;function AD(t,e,n,r,i){var o="",a="",s=Math.floor(i/2)-1;return r-e>s&&(o=" ... ",e=r-s+o.length),n-r>s&&(a=" ...",n=r+s-a.length),{str:o+t.slice(e,n).replace(/\t/g,"")+a,pos:r-e+o.length}}function PD(t,e){return da.repeat(" ",e-t.length)+t}function e6e(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,a=-1;o=n.exec(t.buffer);)i.push(o.index),r.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var s="",u,f,g=Math.min(t.line+e.linesAfter,i.length).toString().length,_=e.maxLength-(e.indent+g+3);for(u=1;u<=e.linesBefore&&!(a-u<0);u++)f=AD(t.buffer,r[a-u],i[a-u],t.position-(r[a]-r[a-u]),_),s=da.repeat(" ",e.indent)+PD((t.line-u+1).toString(),g)+" | "+f.str+`
`+s;for(f=AD(t.buffer,r[a],i[a],t.position,_),s+=da.repeat(" ",e.indent)+PD((t.line+1).toString(),g)+" | "+f.str+`
`,s+=da.repeat("-",e.indent+g+3+f.pos)+`^
`,u=1;u<=e.linesAfter&&!(a+u>=i.length);u++)f=AD(t.buffer,r[a+u],i[a+u],t.position-(r[a]-r[a+u]),_),s+=da.repeat(" ",e.indent)+PD((t.line+u+1).toString(),g)+" | "+f.str+`
`;return s.replace(/\n$/,"")}var t6e=e6e,n6e=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],r6e=["scalar","sequence","mapping"];function i6e(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}function o6e(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(n6e.indexOf(n)===-1)throw new sc('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=i6e(e.styleAliases||null),r6e.indexOf(this.kind)===-1)throw new sc('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var il=o6e;function dZ(t,e){var n=[];return t[e].forEach(function(r){var i=n.length;n.forEach(function(o,a){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=a)}),n[i]=r}),n}function s6e(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}function q4(t){return this.extend(t)}q4.prototype.extend=function(e){var n=[],r=[];if(e instanceof il)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new sc("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof il))throw new sc("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new sc("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new sc("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof il))throw new sc("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(q4.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=dZ(i,"implicit"),i.compiledExplicit=dZ(i,"explicit"),i.compiledTypeMap=s6e(i.compiledImplicit,i.compiledExplicit),i};var Bne=q4,Fne=new il("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),jne=new il("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Vne=new il("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Qne=new Bne({explicit:[Fne,jne,Vne]});function a6e(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function l6e(){return null}function c6e(t){return t===null}var Une=new il("tag:yaml.org,2002:null",{kind:"scalar",resolve:a6e,construct:l6e,predicate:c6e,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function u6e(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function h6e(t){return t==="true"||t==="True"||t==="TRUE"}function d6e(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Zne=new il("tag:yaml.org,2002:bool",{kind:"scalar",resolve:u6e,construct:h6e,predicate:d6e,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function f6e(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function p6e(t){return 48<=t&&t<=55}function m6e(t){return 48<=t&&t<=57}function g6e(t){if(t===null)return!1;var e=t.length,n=0,r=!1,i;if(!e)return!1;if(i=t[n],(i==="-"||i==="+")&&(i=t[++n]),i==="0"){if(n+1===e)return!0;if(i=t[++n],i==="b"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!f6e(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!p6e(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<e;n++)if(i=t[n],i!=="_"){if(!m6e(t.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function y6e(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function v6e(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!da.isNegativeZero(t)}var qne=new il("tag:yaml.org,2002:int",{kind:"scalar",resolve:g6e,construct:y6e,predicate:v6e,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),_6e=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function b6e(t){return!(t===null||!_6e.test(t)||t[t.length-1]==="_")}function x6e(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var w6e=/^[-+]?[0-9]+e/;function O6e(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(da.isNegativeZero(t))return"-0.0";return n=t.toString(10),w6e.test(n)?n.replace("e",".e"):n}function S6e(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||da.isNegativeZero(t))}var Wne=new il("tag:yaml.org,2002:float",{kind:"scalar",resolve:b6e,construct:x6e,predicate:S6e,represent:O6e,defaultStyle:"lowercase"}),Hne=Qne.extend({implicit:[Une,Zne,qne,Wne]}),Gne=Hne,Xne=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Yne=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function C6e(t){return t===null?!1:Xne.exec(t)!==null||Yne.exec(t)!==null}function T6e(t){var e,n,r,i,o,a,s,u=0,f=null,g,_,w;if(e=Xne.exec(t),e===null&&(e=Yne.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(o=+e[4],a=+e[5],s=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(g=+e[10],_=+(e[11]||0),f=(g*60+_)*6e4,e[9]==="-"&&(f=-f)),w=new Date(Date.UTC(n,r,i,o,a,s,u)),f&&w.setTime(w.getTime()-f),w}function k6e(t){return t.toISOString()}var Kne=new il("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:C6e,construct:T6e,instanceOf:Date,represent:k6e});function E6e(t){return t==="<<"||t===null}var Jne=new il("tag:yaml.org,2002:merge",{kind:"scalar",resolve:E6e}),EB=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function A6e(t){if(t===null)return!1;var e,n,r=0,i=t.length,o=EB;for(n=0;n<i;n++)if(e=o.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function P6e(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,o=EB,a=0,s=[];for(e=0;e<i;e++)e%4===0&&e&&(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)),a=a<<6|o.indexOf(r.charAt(e));return n=i%4*6,n===0?(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)):n===18?(s.push(a>>10&255),s.push(a>>2&255)):n===12&&s.push(a>>4&255),new Uint8Array(s)}function M6e(t){var e="",n=0,r,i,o=t.length,a=EB;for(r=0;r<o;r++)r%3===0&&r&&(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]),n=(n<<8)+t[r];return i=o%3,i===0?(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]):i===2?(e+=a[n>>10&63],e+=a[n>>4&63],e+=a[n<<2&63],e+=a[64]):i===1&&(e+=a[n>>2&63],e+=a[n<<4&63],e+=a[64],e+=a[64]),e}function R6e(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var ere=new il("tag:yaml.org,2002:binary",{kind:"scalar",resolve:A6e,construct:P6e,predicate:R6e,represent:M6e}),I6e=Object.prototype.hasOwnProperty,D6e=Object.prototype.toString;function L6e(t){if(t===null)return!0;var e=[],n,r,i,o,a,s=t;for(n=0,r=s.length;n<r;n+=1){if(i=s[n],a=!1,D6e.call(i)!=="[object Object]")return!1;for(o in i)if(I6e.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function $6e(t){return t!==null?t:[]}var tre=new il("tag:yaml.org,2002:omap",{kind:"sequence",resolve:L6e,construct:$6e}),z6e=Object.prototype.toString;function N6e(t){if(t===null)return!0;var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(r=a[e],z6e.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[e]=[i[0],r[i[0]]]}return!0}function B6e(t){if(t===null)return[];var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1)r=a[e],i=Object.keys(r),o[e]=[i[0],r[i[0]]];return o}var nre=new il("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:N6e,construct:B6e}),F6e=Object.prototype.hasOwnProperty;function j6e(t){if(t===null)return!0;var e,n=t;for(e in n)if(F6e.call(n,e)&&n[e]!==null)return!1;return!0}function V6e(t){return t!==null?t:{}}var rre=new il("tag:yaml.org,2002:set",{kind:"mapping",resolve:j6e,construct:V6e}),AB=Gne.extend({implicit:[Kne,Jne],explicit:[ere,tre,nre,rre]}),V0=Object.prototype.hasOwnProperty,Q5=1,ire=2,ore=3,U5=4,MD=1,Q6e=2,fZ=3,U6e=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Z6e=/[\x85\u2028\u2029]/,q6e=/[,\[\]\{\}]/,sre=/^(?:!|!!|![a-z\-]+!)$/i,are=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function pZ(t){return Object.prototype.toString.call(t)}function Jp(t){return t===10||t===13}function Y_(t){return t===9||t===32}function Yc(t){return t===9||t===32||t===10||t===13}function U1(t){return t===44||t===91||t===93||t===123||t===125}function W6e(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function H6e(t){return t===120?2:t===117?4:t===85?8:0}function G6e(t){return 48<=t&&t<=57?t-48:-1}function mZ(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}function X6e(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}function lre(t,e,n){e==="__proto__"?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[e]=n}var cre=new Array(256),ure=new Array(256);for(var S1=0;S1<256;S1++)cre[S1]=mZ(S1)?1:0,ure[S1]=mZ(S1);function Y6e(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||AB,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function hre(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=t6e(n),new sc(e,n)}function Wn(t,e){throw hre(t,e)}function Z5(t,e){t.onWarning&&t.onWarning.call(null,hre(t,e))}var gZ={YAML:function(e,n,r){var i,o,a;e.version!==null&&Wn(e,"duplication of %YAML directive"),r.length!==1&&Wn(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&Wn(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&Wn(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Z5(e,"unsupported YAML version of the document")},TAG:function(e,n,r){var i,o;r.length!==2&&Wn(e,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],sre.test(i)||Wn(e,"ill-formed tag handle (first argument) of the TAG directive"),V0.call(e.tagMap,i)&&Wn(e,'there is a previously declared suffix for "'+i+'" tag handle'),are.test(o)||Wn(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{Wn(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function P0(t,e,n,r){var i,o,a,s;if(e<n){if(s=t.input.slice(e,n),r)for(i=0,o=s.length;i<o;i+=1)a=s.charCodeAt(i),a===9||32<=a&&a<=1114111||Wn(t,"expected valid JSON character");else U6e.test(s)&&Wn(t,"the stream contains non-printable characters");t.result+=s}}function yZ(t,e,n,r){var i,o,a,s;for(da.isObject(n)||Wn(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),a=0,s=i.length;a<s;a+=1)o=i[a],V0.call(e,o)||(lre(e,o,n[o]),r[o]=!0)}function Z1(t,e,n,r,i,o,a,s,u){var f,g;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),f=0,g=i.length;f<g;f+=1)Array.isArray(i[f])&&Wn(t,"nested arrays are not supported inside keys"),typeof i=="object"&&pZ(i[f])==="[object Object]"&&(i[f]="[object Object]");if(typeof i=="object"&&pZ(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(f=0,g=o.length;f<g;f+=1)yZ(t,e,o[f],n);else yZ(t,e,o,n);else!t.json&&!V0.call(n,i)&&V0.call(e,i)&&(t.line=a||t.line,t.lineStart=s||t.lineStart,t.position=u||t.position,Wn(t,"duplicated mapping key")),lre(e,i,o),delete n[i];return e}function PB(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Wn(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Ws(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Y_(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Jp(i))for(PB(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&Z5(t,"deficient indentation"),r}function cI(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Yc(n)))}function MB(t,e){e===1?t.result+=" ":e>1&&(t.result+=da.repeat(`
`,e-1))}function K6e(t,e,n){var r,i,o,a,s,u,f,g,_=t.kind,w=t.result,S;if(S=t.input.charCodeAt(t.position),Yc(S)||U1(S)||S===35||S===38||S===42||S===33||S===124||S===62||S===39||S===34||S===37||S===64||S===96||(S===63||S===45)&&(i=t.input.charCodeAt(t.position+1),Yc(i)||n&&U1(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,s=!1;S!==0;){if(S===58){if(i=t.input.charCodeAt(t.position+1),Yc(i)||n&&U1(i))break}else if(S===35){if(r=t.input.charCodeAt(t.position-1),Yc(r))break}else{if(t.position===t.lineStart&&cI(t)||n&&U1(S))break;if(Jp(S))if(u=t.line,f=t.lineStart,g=t.lineIndent,Ws(t,!1,-1),t.lineIndent>=e){s=!0,S=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=u,t.lineStart=f,t.lineIndent=g;break}}s&&(P0(t,o,a,!1),MB(t,t.line-u),o=a=t.position,s=!1),Y_(S)||(a=t.position+1),S=t.input.charCodeAt(++t.position)}return P0(t,o,a,!1),t.result?!0:(t.kind=_,t.result=w,!1)}function J6e(t,e){var n,r,i;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(P0(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,i=t.position;else return!0;else Jp(n)?(P0(t,r,i,!0),MB(t,Ws(t,!1,e)),r=i=t.position):t.position===t.lineStart&&cI(t)?Wn(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Wn(t,"unexpected end of the stream within a single quoted scalar")}function eNe(t,e){var n,r,i,o,a,s;if(s=t.input.charCodeAt(t.position),s!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(s=t.input.charCodeAt(t.position))!==0;){if(s===34)return P0(t,n,t.position,!0),t.position++,!0;if(s===92){if(P0(t,n,t.position,!0),s=t.input.charCodeAt(++t.position),Jp(s))Ws(t,!1,e);else if(s<256&&cre[s])t.result+=ure[s],t.position++;else if((a=H6e(s))>0){for(i=a,o=0;i>0;i--)s=t.input.charCodeAt(++t.position),(a=W6e(s))>=0?o=(o<<4)+a:Wn(t,"expected hexadecimal character");t.result+=X6e(o),t.position++}else Wn(t,"unknown escape sequence");n=r=t.position}else Jp(s)?(P0(t,n,r,!0),MB(t,Ws(t,!1,e)),n=r=t.position):t.position===t.lineStart&&cI(t)?Wn(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Wn(t,"unexpected end of the stream within a double quoted scalar")}function tNe(t,e){var n=!0,r,i,o,a=t.tag,s,u=t.anchor,f,g,_,w,S,E=Object.create(null),A,R,$,z;if(z=t.input.charCodeAt(t.position),z===91)g=93,S=!1,s=[];else if(z===123)g=125,S=!0,s={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),z=t.input.charCodeAt(++t.position);z!==0;){if(Ws(t,!0,e),z=t.input.charCodeAt(t.position),z===g)return t.position++,t.tag=a,t.anchor=u,t.kind=S?"mapping":"sequence",t.result=s,!0;n?z===44&&Wn(t,"expected the node content, but found ','"):Wn(t,"missed comma between flow collection entries"),R=A=$=null,_=w=!1,z===63&&(f=t.input.charCodeAt(t.position+1),Yc(f)&&(_=w=!0,t.position++,Ws(t,!0,e))),r=t.line,i=t.lineStart,o=t.position,Qw(t,e,Q5,!1,!0),R=t.tag,A=t.result,Ws(t,!0,e),z=t.input.charCodeAt(t.position),(w||t.line===r)&&z===58&&(_=!0,z=t.input.charCodeAt(++t.position),Ws(t,!0,e),Qw(t,e,Q5,!1,!0),$=t.result),S?Z1(t,s,E,R,A,$,r,i,o):_?s.push(Z1(t,null,E,R,A,$,r,i,o)):s.push(A),Ws(t,!0,e),z=t.input.charCodeAt(t.position),z===44?(n=!0,z=t.input.charCodeAt(++t.position)):n=!1}Wn(t,"unexpected end of the stream within a flow collection")}function nNe(t,e){var n,r,i=MD,o=!1,a=!1,s=e,u=0,f=!1,g,_;if(_=t.input.charCodeAt(t.position),_===124)r=!1;else if(_===62)r=!0;else return!1;for(t.kind="scalar",t.result="";_!==0;)if(_=t.input.charCodeAt(++t.position),_===43||_===45)MD===i?i=_===43?fZ:Q6e:Wn(t,"repeat of a chomping mode identifier");else if((g=G6e(_))>=0)g===0?Wn(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?Wn(t,"repeat of an indentation width identifier"):(s=e+g-1,a=!0);else break;if(Y_(_)){do _=t.input.charCodeAt(++t.position);while(Y_(_));if(_===35)do _=t.input.charCodeAt(++t.position);while(!Jp(_)&&_!==0)}for(;_!==0;){for(PB(t),t.lineIndent=0,_=t.input.charCodeAt(t.position);(!a||t.lineIndent<s)&&_===32;)t.lineIndent++,_=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>s&&(s=t.lineIndent),Jp(_)){u++;continue}if(t.lineIndent<s){i===fZ?t.result+=da.repeat(`
`,o?1+u:u):i===MD&&o&&(t.result+=`
`);break}for(r?Y_(_)?(f=!0,t.result+=da.repeat(`
`,o?1+u:u)):f?(f=!1,t.result+=da.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=da.repeat(`
`,u):t.result+=da.repeat(`
`,o?1+u:u),o=!0,a=!0,u=0,n=t.position;!Jp(_)&&_!==0;)_=t.input.charCodeAt(++t.position);P0(t,n,t.position,!1)}return!0}function vZ(t,e){var n,r=t.tag,i=t.anchor,o=[],a,s=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Wn(t,"tab characters must not be used in indentation")),!(u!==45||(a=t.input.charCodeAt(t.position+1),!Yc(a))));){if(s=!0,t.position++,Ws(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(n=t.line,Qw(t,e,ore,!1,!0),o.push(t.result),Ws(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&u!==0)Wn(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return s?(t.tag=r,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function rNe(t,e,n){var r,i,o,a,s,u,f=t.tag,g=t.anchor,_={},w=Object.create(null),S=null,E=null,A=null,R=!1,$=!1,z;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=_),z=t.input.charCodeAt(t.position);z!==0;){if(!R&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Wn(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),o=t.line,(z===63||z===58)&&Yc(r))z===63?(R&&(Z1(t,_,w,S,E,null,a,s,u),S=E=A=null),$=!0,R=!0,i=!0):R?(R=!1,i=!0):Wn(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,z=r;else{if(a=t.line,s=t.lineStart,u=t.position,!Qw(t,n,ire,!1,!0))break;if(t.line===o){for(z=t.input.charCodeAt(t.position);Y_(z);)z=t.input.charCodeAt(++t.position);if(z===58)z=t.input.charCodeAt(++t.position),Yc(z)||Wn(t,"a whitespace character is expected after the key-value separator within a block mapping"),R&&(Z1(t,_,w,S,E,null,a,s,u),S=E=A=null),$=!0,R=!1,i=!1,S=t.tag,E=t.result;else if($)Wn(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=f,t.anchor=g,!0}else if($)Wn(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=f,t.anchor=g,!0}if((t.line===o||t.lineIndent>e)&&(R&&(a=t.line,s=t.lineStart,u=t.position),Qw(t,e,U5,!0,i)&&(R?E=t.result:A=t.result),R||(Z1(t,_,w,S,E,A,a,s,u),S=E=A=null),Ws(t,!0,-1),z=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&z!==0)Wn(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return R&&Z1(t,_,w,S,E,null,a,s,u),$&&(t.tag=f,t.anchor=g,t.kind="mapping",t.result=_),$}function iNe(t){var e,n=!1,r=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&Wn(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(n=!0,a=t.input.charCodeAt(++t.position)):a===33?(r=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,n){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):Wn(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Yc(a);)a===33&&(r?Wn(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),sre.test(i)||Wn(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),q6e.test(o)&&Wn(t,"tag suffix cannot contain flow indicator characters")}o&&!are.test(o)&&Wn(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{Wn(t,"tag name is malformed: "+o)}return n?t.tag=o:V0.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:Wn(t,'undeclared tag handle "'+i+'"'),!0}function oNe(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&Wn(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Yc(n)&&!U1(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Wn(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function sNe(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Yc(r)&&!U1(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Wn(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),V0.call(t.anchorMap,n)||Wn(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Ws(t,!0,-1),!0}function Qw(t,e,n,r,i){var o,a,s,u=1,f=!1,g=!1,_,w,S,E,A,R;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=s=U5===n||ore===n,r&&Ws(t,!0,-1)&&(f=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;iNe(t)||oNe(t);)Ws(t,!0,-1)?(f=!0,s=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):s=!1;if(s&&(s=f||i),(u===1||U5===n)&&(Q5===n||ire===n?A=e:A=e+1,R=t.position-t.lineStart,u===1?s&&(vZ(t,R)||rNe(t,R,A))||tNe(t,A)?g=!0:(a&&nNe(t,A)||J6e(t,A)||eNe(t,A)?g=!0:sNe(t)?(g=!0,(t.tag!==null||t.anchor!==null)&&Wn(t,"alias node should not have any properties")):K6e(t,A,Q5===n)&&(g=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(g=s&&vZ(t,R))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Wn(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),_=0,w=t.implicitTypes.length;_<w;_+=1)if(E=t.implicitTypes[_],E.resolve(t.result)){t.result=E.construct(t.result),t.tag=E.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(V0.call(t.typeMap[t.kind||"fallback"],t.tag))E=t.typeMap[t.kind||"fallback"][t.tag];else for(E=null,S=t.typeMap.multi[t.kind||"fallback"],_=0,w=S.length;_<w;_+=1)if(t.tag.slice(0,S[_].tag.length)===S[_].tag){E=S[_];break}E||Wn(t,"unknown tag !<"+t.tag+">"),t.result!==null&&E.kind!==t.kind&&Wn(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+E.kind+'", not "'+t.kind+'"'),E.resolve(t.result,t.tag)?(t.result=E.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Wn(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||g}function aNe(t){var e=t.position,n,r,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(Ws(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),n=t.position;a!==0&&!Yc(a);)a=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),i=[],r.length<1&&Wn(t,"directive name must not be less than one character in length");a!==0;){for(;Y_(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!Jp(a));break}if(Jp(a))break;for(n=t.position;a!==0&&!Yc(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(n,t.position))}a!==0&&PB(t),V0.call(gZ,r)?gZ[r](t,r,i):Z5(t,'unknown document directive "'+r+'"')}if(Ws(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Ws(t,!0,-1)):o&&Wn(t,"directives end mark is expected"),Qw(t,t.lineIndent-1,U5,!1,!0),Ws(t,!0,-1),t.checkLineBreaks&&Z6e.test(t.input.slice(e,t.position))&&Z5(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&cI(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Ws(t,!0,-1));return}if(t.position<t.length-1)Wn(t,"end of the stream or a document separator is expected");else return}function dre(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new Y6e(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,Wn(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)aNe(n);return n.documents}function lNe(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=dre(t,n);if(typeof e!="function")return r;for(var i=0,o=r.length;i<o;i+=1)e(r[i])}function cNe(t,e){var n=dre(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new sc("expected a single document in the stream, but found more")}}var uNe=lNe,hNe=cNe,fre={loadAll:uNe,load:hNe},pre=Object.prototype.toString,mre=Object.prototype.hasOwnProperty,RB=65279,dNe=9,oT=10,fNe=13,pNe=32,mNe=33,gNe=34,W4=35,yNe=37,vNe=38,_Ne=39,bNe=42,gre=44,xNe=45,q5=58,wNe=61,ONe=62,SNe=63,CNe=64,yre=91,vre=93,TNe=96,_re=123,kNe=124,bre=125,zl={};zl[0]="\\0";zl[7]="\\a";zl[8]="\\b";zl[9]="\\t";zl[10]="\\n";zl[11]="\\v";zl[12]="\\f";zl[13]="\\r";zl[27]="\\e";zl[34]='\\"';zl[92]="\\\\";zl[133]="\\N";zl[160]="\\_";zl[8232]="\\L";zl[8233]="\\P";var ENe=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],ANe=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function PNe(t,e){var n,r,i,o,a,s,u;if(e===null)return{};for(n={},r=Object.keys(e),i=0,o=r.length;i<o;i+=1)a=r[i],s=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),u=t.compiledTypeMap.fallback[a],u&&mre.call(u.styleAliases,s)&&(s=u.styleAliases[s]),n[a]=s;return n}function MNe(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new sc("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+da.repeat("0",r-e.length)+e}var RNe=1,sT=2;function INe(t){this.schema=t.schema||AB,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=da.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=PNe(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?sT:RNe,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function _Z(t,e){for(var n=da.repeat(" ",e),r=0,i=-1,o="",a,s=t.length;r<s;)i=t.indexOf(`
`,r),i===-1?(a=t.slice(r),r=s):(a=t.slice(r,i+1),r=i+1),a.length&&a!==`
`&&(o+=n),o+=a;return o}function H4(t,e){return`
`+da.repeat(" ",t.indent*e)}function DNe(t,e){var n,r,i;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(i=t.implicitTypes[n],i.resolve(e))return!0;return!1}function W5(t){return t===pNe||t===dNe}function aT(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==RB||65536<=t&&t<=1114111}function bZ(t){return aT(t)&&t!==RB&&t!==fNe&&t!==oT}function xZ(t,e,n){var r=bZ(t),i=r&&!W5(t);return(n?r:r&&t!==gre&&t!==yre&&t!==vre&&t!==_re&&t!==bre)&&t!==W4&&!(e===q5&&!i)||bZ(e)&&!W5(e)&&t===W4||e===q5&&i}function LNe(t){return aT(t)&&t!==RB&&!W5(t)&&t!==xNe&&t!==SNe&&t!==q5&&t!==gre&&t!==yre&&t!==vre&&t!==_re&&t!==bre&&t!==W4&&t!==vNe&&t!==bNe&&t!==mNe&&t!==kNe&&t!==wNe&&t!==ONe&&t!==_Ne&&t!==gNe&&t!==yNe&&t!==CNe&&t!==TNe}function $Ne(t){return!W5(t)&&t!==q5}function B2(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function xre(t){var e=/^\n* /;return e.test(t)}var wre=1,G4=2,Ore=3,Sre=4,$1=5;function zNe(t,e,n,r,i,o,a,s){var u,f=0,g=null,_=!1,w=!1,S=r!==-1,E=-1,A=LNe(B2(t,0))&&$Ne(B2(t,t.length-1));if(e||a)for(u=0;u<t.length;f>=65536?u+=2:u++){if(f=B2(t,u),!aT(f))return $1;A=A&&xZ(f,g,s),g=f}else{for(u=0;u<t.length;f>=65536?u+=2:u++){if(f=B2(t,u),f===oT)_=!0,S&&(w=w||u-E-1>r&&t[E+1]!==" ",E=u);else if(!aT(f))return $1;A=A&&xZ(f,g,s),g=f}w=w||S&&u-E-1>r&&t[E+1]!==" "}return!_&&!w?A&&!a&&!i(t)?wre:o===sT?$1:G4:n>9&&xre(t)?$1:a?o===sT?$1:G4:w?Sre:Ore}function NNe(t,e,n,r,i){t.dump=(function(){if(e.length===0)return t.quotingType===sT?'""':"''";if(!t.noCompatMode&&(ENe.indexOf(e)!==-1||ANe.test(e)))return t.quotingType===sT?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,n),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),s=r||t.flowLevel>-1&&n>=t.flowLevel;function u(f){return DNe(t,f)}switch(zNe(e,s,t.indent,a,u,t.quotingType,t.forceQuotes&&!r,i)){case wre:return e;case G4:return"'"+e.replace(/'/g,"''")+"'";case Ore:return"|"+wZ(e,t.indent)+OZ(_Z(e,o));case Sre:return">"+wZ(e,t.indent)+OZ(_Z(BNe(e,a),o));case $1:return'"'+FNe(e)+'"';default:throw new sc("impossible error: invalid scalar style")}})()}function wZ(t,e){var n=xre(t)?String(e):"",r=t[t.length-1]===`
`,i=r&&(t[t.length-2]===`
`||t===`
`),o=i?"+":r?"":"-";return n+o+`
`}function OZ(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function BNe(t,e){for(var n=/(\n+)([^\n]*)/g,r=(function(){var f=t.indexOf(`
`);return f=f!==-1?f:t.length,n.lastIndex=f,SZ(t.slice(0,f),e)})(),i=t[0]===`
`||t[0]===" ",o,a;a=n.exec(t);){var s=a[1],u=a[2];o=u[0]===" ",r+=s+(!i&&!o&&u!==""?`
`:"")+SZ(u,e),i=o}return r}function SZ(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,i=0,o,a=0,s=0,u="";r=n.exec(t);)s=r.index,s-i>e&&(o=a>i?a:s,u+=`
`+t.slice(i,o),i=o+1),a=s;return u+=`
`,t.length-i>e&&a>i?u+=t.slice(i,a)+`
`+t.slice(a+1):u+=t.slice(i),u.slice(1)}function FNe(t){for(var e="",n=0,r,i=0;i<t.length;n>=65536?i+=2:i++)n=B2(t,i),r=zl[n],!r&&aT(n)?(e+=t[i],n>=65536&&(e+=t[i+1])):e+=r||MNe(n);return e}function jNe(t,e,n){var r="",i=t.tag,o,a,s;for(o=0,a=n.length;o<a;o+=1)s=n[o],t.replacer&&(s=t.replacer.call(n,String(o),s)),(Kg(t,e,s,!1,!1)||typeof s>"u"&&Kg(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=i,t.dump="["+r+"]"}function CZ(t,e,n,r){var i="",o=t.tag,a,s,u;for(a=0,s=n.length;a<s;a+=1)u=n[a],t.replacer&&(u=t.replacer.call(n,String(a),u)),(Kg(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&Kg(t,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=H4(t,e)),t.dump&&oT===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function VNe(t,e,n){var r="",i=t.tag,o=Object.keys(n),a,s,u,f,g;for(a=0,s=o.length;a<s;a+=1)g="",r!==""&&(g+=", "),t.condenseFlow&&(g+='"'),u=o[a],f=n[u],t.replacer&&(f=t.replacer.call(n,u,f)),Kg(t,e,u,!1,!1)&&(t.dump.length>1024&&(g+="? "),g+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Kg(t,e,f,!1,!1)&&(g+=t.dump,r+=g));t.tag=i,t.dump="{"+r+"}"}function QNe(t,e,n,r){var i="",o=t.tag,a=Object.keys(n),s,u,f,g,_,w;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new sc("sortKeys must be a boolean or a function");for(s=0,u=a.length;s<u;s+=1)w="",(!r||i!=="")&&(w+=H4(t,e)),f=a[s],g=n[f],t.replacer&&(g=t.replacer.call(n,f,g)),Kg(t,e+1,f,!0,!0,!0)&&(_=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,_&&(t.dump&&oT===t.dump.charCodeAt(0)?w+="?":w+="? "),w+=t.dump,_&&(w+=H4(t,e)),Kg(t,e+1,g,!0,_)&&(t.dump&&oT===t.dump.charCodeAt(0)?w+=":":w+=": ",w+=t.dump,i+=w));t.tag=o,t.dump=i||"{}"}function TZ(t,e,n){var r,i,o,a,s,u;for(i=n?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(s=i[o],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof e=="object"&&e instanceof s.instanceOf)&&(!s.predicate||s.predicate(e))){if(n?s.multi&&s.representName?t.tag=s.representName(e):t.tag=s.tag:t.tag="?",s.represent){if(u=t.styleMap[s.tag]||s.defaultStyle,pre.call(s.represent)==="[object Function]")r=s.represent(e,u);else if(mre.call(s.represent,u))r=s.represent[u](e,u);else throw new sc("!<"+s.tag+'> tag resolver accepts not "'+u+'" style');t.dump=r}return!0}return!1}function Kg(t,e,n,r,i,o,a){t.tag=null,t.dump=n,TZ(t,n,!1)||TZ(t,n,!0);var s=pre.call(t.dump),u=r,f;r&&(r=t.flowLevel<0||t.flowLevel>e);var g=s==="[object Object]"||s==="[object Array]",_,w;if(g&&(_=t.duplicates.indexOf(n),w=_!==-1),(t.tag!==null&&t.tag!=="?"||w||t.indent!==2&&e>0)&&(i=!1),w&&t.usedDuplicates[_])t.dump="*ref_"+_;else{if(g&&w&&!t.usedDuplicates[_]&&(t.usedDuplicates[_]=!0),s==="[object Object]")r&&Object.keys(t.dump).length!==0?(QNe(t,e,t.dump,i),w&&(t.dump="&ref_"+_+t.dump)):(VNe(t,e,t.dump),w&&(t.dump="&ref_"+_+" "+t.dump));else if(s==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?CZ(t,e-1,t.dump,i):CZ(t,e,t.dump,i),w&&(t.dump="&ref_"+_+t.dump)):(jNe(t,e,t.dump),w&&(t.dump="&ref_"+_+" "+t.dump));else if(s==="[object String]")t.tag!=="?"&&NNe(t,t.dump,e,o,u);else{if(s==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new sc("unacceptable kind of an object to dump "+s)}t.tag!==null&&t.tag!=="?"&&(f=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",t.dump=f+" "+t.dump)}return!0}function UNe(t,e){var n=[],r=[],i,o;for(X4(t,n,r),i=0,o=r.length;i<o;i+=1)e.duplicates.push(n[r[i]]);e.usedDuplicates=new Array(o)}function X4(t,e,n){var r,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)X4(t[i],e,n);else for(r=Object.keys(t),i=0,o=r.length;i<o;i+=1)X4(t[r[i]],e,n)}function ZNe(t,e){e=e||{};var n=new INe(e);n.noRefs||UNe(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Kg(n,0,r,!0,!0)?n.dump+`
`:""}var qNe=ZNe,WNe={dump:qNe};function IB(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var HNe=il,GNe=Bne,XNe=Qne,YNe=Hne,KNe=Gne,JNe=AB,e8e=fre.load,t8e=fre.loadAll,n8e=WNe.dump,r8e=sc,i8e={binary:ere,float:Wne,map:Vne,null:Une,pairs:nre,set:rre,timestamp:Kne,bool:Zne,int:qne,merge:Jne,omap:tre,seq:jne,str:Fne},o8e=IB("safeLoad","load"),s8e=IB("safeLoadAll","loadAll"),a8e=IB("safeDump","dump"),kZ={Type:HNe,Schema:GNe,FAILSAFE_SCHEMA:XNe,JSON_SCHEMA:YNe,CORE_SCHEMA:KNe,DEFAULT_SCHEMA:JNe,load:e8e,loadAll:t8e,dump:n8e,YAMLException:r8e,types:i8e,safeLoad:o8e,safeLoadAll:s8e,safeDump:a8e};const l8e=({yaml:t,onChange:e})=>{const[n,r,i,o]=Wo(Ma,J0,Ms,H5),a=xs(),s=Ri(H5),u=Ri(Cre),f=se.useMemo(()=>t?Object.entries(kZ.load(t)).map(([$,z])=>({key:$,value:z})):[],[t]),{register:g,control:_,handleSubmit:w}=uB({defaultValues:{yamlConfig:f}}),{fields:S,append:E,remove:A}=O4e({control:_,name:"yamlConfig"}),R=se.useCallback(({yamlConfig:$})=>{if($.length===0){u(),s(!1);return}const z=$.reduce((B,{key:F,value:U})=>(F&&U&&(B[F]=U),B),{});e(kZ.dump(z).trim()),s(!1)},[e,s,u]);return se.createElement(se.Fragment,null,se.createElement(Gte,{open:o,onOpenChange:$=>{s($)}},se.createElement(Xte,{container:r?.current},se.createElement(Yte,{className:jt.dialogOverlay}),se.createElement(Kte,{className:jt.largeDialogContent,"data-editor-type":"frontmatter"},se.createElement(Jte,{className:jt.dialogTitle},a("frontmatterEditor.title","Edit document frontmatter")),se.createElement("form",{onSubmit:$=>{w(R)($),$.stopPropagation()},onReset:$=>{$.stopPropagation(),s(!1)}},se.createElement("table",{className:jt.propertyEditorTable},se.createElement("colgroup",null,se.createElement("col",null),se.createElement("col",null),se.createElement("col",null)),se.createElement("thead",null,se.createElement("tr",null,se.createElement("th",null,a("frontmatterEditor.key","Key")),se.createElement("th",null,a("frontmatterEditor.value","Value")),se.createElement("th",null))),se.createElement("tbody",null,S.map(($,z)=>se.createElement("tr",{key:$.id},se.createElement("td",null,se.createElement(EZ,{...g(`yamlConfig.${z}.key`,{required:!0}),autofocusIfEmpty:!0,readOnly:n})),se.createElement("td",null,se.createElement(EZ,{...g(`yamlConfig.${z}.value`,{required:!0}),readOnly:n})),se.createElement("td",null,se.createElement("button",{type:"button",onClick:()=>{A(z)},className:jt.iconButton,disabled:n},i("delete_big")))))),se.createElement("tfoot",null,se.createElement("tr",null,se.createElement("td",null,se.createElement("button",{disabled:n,className:Gr(jt.primaryButton,jt.smallButton),type:"button",onClick:()=>{E({key:"",value:""})}},a("frontmatterEditor.addEntry","Add entry")))))),se.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--spacing-2)"}},se.createElement("button",{type:"submit",className:jt.primaryButton},a("dialogControls.save","Save")),se.createElement("button",{type:"reset",className:jt.secondaryButton},a("dialogControls.cancel","Cancel")))),se.createElement(ene,{asChild:!0},se.createElement("button",{className:jt.dialogCloseButton,"aria-label":a("dialogControls.cancel","Cancel")},i("close")))))))},EZ=se.forwardRef(({className:t,autofocusIfEmpty:e,...n},r)=>se.createElement("input",{className:Gr(jt.propertyEditorInput,t),...n,ref:r}));var c8e=Object.defineProperty,u8e=(t,e,n)=>e in t?c8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h8e=(t,e,n)=>(u8e(t,e+"",n),n);class _k extends ry{constructor(e,n){super(n),h8e(this,"__yaml"),this.__yaml=e}static getType(){return"frontmatter"}static clone(e){return new _k(e.__yaml,e.__key)}static importJSON(e){const{yaml:n}=e;return uI(n)}exportJSON(){return{yaml:this.getYaml(),type:"frontmatter",version:1}}createDOM(e){return document.createElement("div")}updateDOM(){return!1}getYaml(){return this.getLatest().__yaml}setYaml(e){e!==this.__yaml&&(this.getWritable().__yaml=e)}decorate(e){return se.createElement(l8e,{yaml:this.getYaml(),onChange:n=>{e.update(()=>{this.setYaml(n)})}})}isKeyboardSelectable(){return!1}}function uI(t){return new _k(t)}function K_(t){return t instanceof _k}const d8e={testLexicalNode:K_,visitLexicalNode:({actions:t,lexicalNode:e})=>{t.addAndStepInto("yaml",{value:e.getYaml()})}},f8e={testNode:"yaml",visitNode({mdastNode:t,actions:e}){e.addAndStepInto(uI(t.value))}},H5=kn(!1),p8e=dm(t=>{t.sub(t.pipe(p8e,$o(id)),([,e])=>{e?.update(()=>{const n=zr().getFirstChild();if(!K_(n)){const r=uI('"": ""');n?n.insertBefore(r):zr().append(r)}}),t.pub(H5,!0)})}),Cre=dm(t=>{t.sub(t.pipe(Cre,$o(id)),([,e])=>{e?.update(()=>{const n=zr().getFirstChild();K_(n)&&n.remove()}),t.pub(H5,!1)})}),m8e=kn(!1,t=>{t.pub(jR,e=>e.registerUpdateListener(({editorState:n})=>{n.read(()=>{t.pub(m8e,K_(zr().getFirstChild()))})}))}),g8e=Dl({init:t=>{t.pubIn({[zw]:zze("yaml"),[$w]:Dze(),[kf]:_k,[ed]:f8e,[Ef]:d8e,[uk]:jze("yaml"),[jR]:e=>e.registerCommand(cR,n=>{let r=!1;return e.read(()=>{const i=sn();if(Ht(i))if(i.isCollapsed()&&i.anchor.offset===0&&i.focus.offset===0&&n.key==="Backspace"){let o=i.getNodes()[0];hn(o)&&(o=o.getParent());const a=o?.getPreviousSibling();K_(a)&&(r=!0,n.preventDefault())}else{const o=i.getNodes()[0];if(K_(o)){const a=o.getYaml();setTimeout(()=>{e.update(()=>{const s=zr().getFirstChild();K_(s)||zr().splice(0,0,[uI(a)])},{discrete:!0})})}}}),!!r},eh)})}}),y8e={testNode:"blockquote",visitNode({actions:t}){t.addAndStepInto(ik())}},v8e={testLexicalNode:e4,visitLexicalNode:({lexicalNode:t,mdastParent:e,actions:n})=>{const r={type:"paragraph",children:[]};n.appendToParent(e,{type:"blockquote",children:[r]}),n.visitChildren(t,r)}},_8e=Dl({init(t){t.pubIn({[EO]:"quote",[ed]:y8e,[kf]:MR,[Ef]:v8e})}}),Tre=se.createContext(void 0);function hI(){const t=se.useContext(Tre);if(!t)throw new Error("useNestedEditor must be used within a NestedEditorsProvider");return t}function b8e(){const{parentEditor:t,mdastNode:e,lexicalNode:n}=hI();return function(i){t.update(()=>{lK("history-push");const o=Ii(n.getKey());o&&o.setMdastNode({...e,...i})},{discrete:!0}),t.dispatchCommand(gb,void 0)}}function x8e(){const{parentEditor:t,lexicalNode:e}=hI();return()=>{t.update(()=>{const n=Ii(e.getKey());n.selectNext(),n.remove()})}}const w8e=function(t){const{getContent:e,getUpdatedMdastNode:n,contentEditableProps:r,block:i=!1}=t,{mdastNode:o,lexicalNode:a,focusEmitter:s}=hI(),u=b8e(),f=x8e(),g=e(o),_=_O(),[w,S,E,A,R,$,z,B,F,U]=Wo(id,NR,lk,BR,ck,Lw,kO,FR,O8,k5),q=Ri(x8),[H]=se.useState(()=>qN({nodes:A,theme:_.getValue(k5),namespace:"NestedEditor"}));return se.useEffect(()=>{s.subscribe(()=>{H.focus()})},[H,s]),se.useEffect(()=>{H.update(()=>{zr().clear();let ne=g;i?ne.length===0&&(ne=[{type:"paragraph",children:[]}]):ne=[{type:"paragraph",children:g}],g8({root:zr(),mdastRoot:{type:"root",children:ne},visitors:S,directiveDescriptors:$,codeBlockEditorDescriptors:z,jsxComponentDescriptors:R})})},[H,i,S]),se.useEffect(()=>{function ne(){H.getEditorState().read(()=>{const ie=p8({root:zr(),visitors:E,jsxComponentDescriptors:R,jsxIsAvailable:B,addImportStatements:!1}),ce=i?ie.children:ie.children[0].children;u(n(structuredClone(o),ce))})}return $l(H.registerCommand(pR,()=>(q({editorType:"lexical",rootNode:a,editorRef:H}),!1),mo),H.registerCommand(mR,ie=>{const ce=ie.relatedTarget;return tB(ce,w.getRootElement())?!1:(ne(),q(null),!0)},Ar),H.registerCommand(gb,()=>(ne(),!0),Ar),H.registerCommand(HT,()=>(q({editorType:"lexical",rootNode:a,editorRef:H}),!1),g5),H.registerCommand(uR,(ie,ce)=>{const xe=ce.getRootElement();return xe?.innerText===`
`?(f(),!0):!1},eh))},[i,H,E,n,R,B,a,o,f,q,u,w]),se.createElement(dee,{initialEditor:H,initialTheme:U},se.createElement(E8,{contentEditable:se.createElement(T8,{...r,className:Gr(jt.nestedEditor,r?.className)}),placeholder:null,ErrorBoundary:k8}),se.createElement(PJ,null),F.map((ne,ie)=>se.createElement(ne,{key:ie})))};function Y4(){let t=E0;return{publish:()=>{t()},subscribe:e=>{t=e}}}var O8e=Object.defineProperty,S8e=(t,e,n)=>e in t?O8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d0=(t,e,n)=>(S8e(t,typeof e!="symbol"?e+"":e,n),n);class DO extends ry{constructor(e,n,r,i){super(i),d0(this,"__code"),d0(this,"__meta"),d0(this,"__language"),d0(this,"__focusEmitter",Y4()),d0(this,"setCode",o=>{o!==this.__code&&(this.getWritable().__code=o)}),d0(this,"setMeta",o=>{o!==this.__meta&&(this.getWritable().__meta=o)}),d0(this,"setLanguage",o=>{o!==this.__language&&(this.getWritable().__language=o)}),d0(this,"select",()=>{this.__focusEmitter.publish()}),this.__code=e,this.__meta=r,this.__language=n}static getType(){return"codeblock"}static clone(e){return new DO(e.__code,e.__language,e.__meta,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__code=e.__code,this.__meta=e.__meta,this.__language=e.__language,this.__focusEmitter=Y4()}static importJSON(e){const{code:n,meta:r,language:i}=e;return bk({code:n,language:i,meta:r})}static importDOM(){return{pre:()=>({conversion:E8e,priority:3})}}exportJSON(){return{code:this.getCode(),language:this.getLanguage(),meta:this.getMeta(),type:"codeblock",version:1}}createDOM(e,n){return document.createElement("div")}updateDOM(){return!1}getCode(){return this.__code}getMeta(){return this.__meta}getLanguage(){return this.__language}decorate(e){return se.createElement(T8e,{parentEditor:e,code:this.getCode(),meta:this.getMeta(),language:this.getLanguage(),codeBlockNode:this,nodeKey:this.getKey(),focusEmitter:this.__focusEmitter})}isInline(){return!1}}const kre=se.createContext(null),C8e=({parentEditor:t,lexicalNode:e,children:n})=>{const r=se.useMemo(()=>({lexicalNode:e,parentEditor:t,setCode:i=>{t.update(()=>{e.setCode(i),setTimeout(()=>{t.dispatchCommand(gb,void 0)},0)})},setLanguage:i=>{t.update(()=>{e.setLanguage(i)})},setMeta:i=>{t.update(()=>{e.setMeta(i)})}}),[e,t]);return se.createElement(kre.Provider,{value:r},n)};function K4(){const t=se.useContext(kre);if(!t)throw new Error("useCodeBlockEditor must be used within a CodeBlockEditor");return t}const T8e=t=>{const e=Es(kO),n=Es(DB);let r=e.sort((u,f)=>f.priority-u.priority).find(u=>u.match(t.language||"",t.meta||""));if(r??(r=e.find(u=>u.match(n||"",t.meta||""))),!r)throw new Error(`No CodeBlockEditor registered for language=${t.language} meta=${t.meta}`);const i=r.Editor,{codeBlockNode:o,parentEditor:a,...s}=t;return se.createElement(C8e,{parentEditor:t.parentEditor,lexicalNode:t.codeBlockNode},se.createElement(i,{...s}))};function bk(t){const{code:e="",language:n="",meta:r=""}=t;return new DO(e,n,r)}function k8e(t){return t instanceof DO}function E8e(t){const e=t,n=e.textContent,r=t.getAttribute("class")??"",i=t.getAttribute("data-language")??"",o=/language-(\w+)/.exec(r),a=o?o[1]:i,s=e.getAttribute("data-meta")??"";return{node:bk({code:n,language:a,meta:s})}}const A8e={testLexicalNode:k8e,visitLexicalNode:({lexicalNode:t,actions:e})=>{e.addAndStepInto("code",{value:t.getCode(),lang:t.getLanguage(),meta:t.getMeta()})}},P8e={testNode:(t,{codeBlockEditorDescriptors:e})=>t.type==="code"?e.find(r=>r.match(t.lang,t.meta))!==void 0:!1,visitNode({mdastNode:t,actions:e}){e.addAndStepInto(bk({code:t.value,language:t.lang,meta:t.meta}))}},DB=kn(""),LB=bs(t=>{t.link(t.pipe(LB,$o(DB),Ug(([e,n])=>()=>bk({language:n,...e}))),VR)}),M8e=dc(kO),R8e=Dl({update(t,e){t.pub(DB,e?.defaultCodeBlockLanguage??"")},init(t,e){t.pubIn({[EO]:"codeblock",[kO]:e?.codeBlockEditorDescriptors??[],[ed]:P8e,[kf]:DO,[Ef]:A8e})}});let J4=[],Ere=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?Ere:J4).push(n=n+t[e])})();function I8e(t){if(t<768)return!1;for(let e=0,n=J4.length;;){let r=e+n>>1;if(t<J4[r])n=r;else if(t>=Ere[r])e=r+1;else return!0;if(e==n)return!1}}function AZ(t){return t>=127462&&t<=127487}const PZ=8205;function D8e(t,e,n=!0,r=!0){return(n?Are:L8e)(t,e,r)}function Are(t,e,n){if(e==t.length)return e;e&&Pre(t.charCodeAt(e))&&Mre(t.charCodeAt(e-1))&&e--;let r=RD(t,e);for(e+=MZ(r);e<t.length;){let i=RD(t,e);if(r==PZ||i==PZ||n&&I8e(i))e+=MZ(i),r=i;else if(AZ(i)){let o=0,a=e-2;for(;a>=0&&AZ(RD(t,a));)o++,a-=2;if(o%2==0)break;e+=2}else break}return e}function L8e(t,e,n){for(;e>0;){let r=Are(t,e-2,n);if(r<e)return r;e--}return 0}function RD(t,e){let n=t.charCodeAt(e);if(!Mre(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return Pre(r)?(n-55296<<10)+(r-56320)+65536:n}function Pre(t){return t>=56320&&t<57344}function Mre(t){return t>=55296&&t<56320}function MZ(t){return t<65536?1:2}let Ti=class Rre{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=Uw(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),zp.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Uw(this,e,n);let r=[];return this.decompose(e,n,r,0),zp.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new pC(this),o=new pC(e);for(let a=n,s=n;;){if(i.next(a),o.next(a),a=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(s+=i.value.length,i.done||s>=r)return!0}}iter(e=1){return new pC(this,e)}iterRange(e,n=this.length){return new Ire(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new Dre(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Rre.empty:e.length<=32?new ks(e):zp.from(ks.split(e,[]))}};class ks extends Ti{constructor(e,n=$8e(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let o=0;;o++){let a=this.text[o],s=i+a.length;if((n?r:s)>=e)return new z8e(i,s,r,a);i=s+1,r++}}decompose(e,n,r,i){let o=e<=0&&n>=this.length?this:new ks(RZ(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let a=r.pop(),s=TP(o.text,a.text.slice(),0,o.length);if(s.length<=32)r.push(new ks(s,a.length+o.length));else{let u=s.length>>1;r.push(new ks(s.slice(0,u)),new ks(s.slice(u)))}}else r.push(o)}replace(e,n,r){if(!(r instanceof ks))return super.replace(e,n,r);[e,n]=Uw(this,e,n);let i=TP(this.text,TP(r.text,RZ(this.text,0,e)),n),o=this.length+r.length-(n-e);return i.length<=32?new ks(i,o):zp.from(ks.split(i,[]),o)}sliceString(e,n=this.length,r=`
`){[e,n]=Uw(this,e,n);let i="";for(let o=0,a=0;o<=n&&a<this.text.length;a++){let s=this.text[a],u=o+s.length;o>e&&a&&(i+=r),e<u&&n>o&&(i+=s.slice(Math.max(0,e-o),n-o)),o=u+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let o of e)r.push(o),i+=o.length+1,r.length==32&&(n.push(new ks(r,i)),r=[],i=-1);return i>-1&&n.push(new ks(r,i)),n}}class zp extends Ti{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let o=0;;o++){let a=this.children[o],s=i+a.length,u=r+a.lines-1;if((n?u:s)>=e)return a.lineInner(e,n,r,i);i=s+1,r=u+1}}decompose(e,n,r,i){for(let o=0,a=0;a<=n&&o<this.children.length;o++){let s=this.children[o],u=a+s.length;if(e<=u&&n>=a){let f=i&((a<=e?1:0)|(u>=n?2:0));a>=e&&u<=n&&!f?r.push(s):s.decompose(e-a,n-a,r,f)}a=u+1}}replace(e,n,r){if([e,n]=Uw(this,e,n),r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let a=this.children[i],s=o+a.length;if(e>=o&&n<=s){let u=a.replace(e-o,n-o,r),f=this.lines-a.lines+u.lines;if(u.lines<f>>4&&u.lines>f>>6){let g=this.children.slice();return g[i]=u,new zp(g,this.length-(n-e)+r.length)}return super.replace(o,s,u)}o=s+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=Uw(this,e,n);let i="";for(let o=0,a=0;o<this.children.length&&a<=n;o++){let s=this.children[o],u=a+s.length;a>e&&o&&(i+=r),e<u&&n>a&&(i+=s.sliceString(e-a,n-a,r)),a=u+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof zp))return 0;let r=0,[i,o,a,s]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,o+=n){if(i==a||o==s)return r;let u=this.children[i],f=e.children[o];if(u!=f)return r+u.scanIdentical(f,n);r+=u.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let S of e)r+=S.lines;if(r<32){let S=[];for(let E of e)E.flatten(S);return new ks(S,n)}let i=Math.max(32,r>>5),o=i<<1,a=i>>1,s=[],u=0,f=-1,g=[];function _(S){let E;if(S.lines>o&&S instanceof zp)for(let A of S.children)_(A);else S.lines>a&&(u>a||!u)?(w(),s.push(S)):S instanceof ks&&u&&(E=g[g.length-1])instanceof ks&&S.lines+E.lines<=32?(u+=S.lines,f+=S.length+1,g[g.length-1]=new ks(E.text.concat(S.text),E.length+1+S.length)):(u+S.lines>i&&w(),u+=S.lines,f+=S.length+1,g.push(S))}function w(){u!=0&&(s.push(g.length==1?g[0]:zp.from(g,f)),f=-1,u=g.length=0)}for(let S of e)_(S);return w(),s.length==1?s[0]:new zp(s,n)}}Ti.empty=new ks([""],0);function $8e(t){let e=-1;for(let n of t)e+=n.length+1;return e}function TP(t,e,n=0,r=1e9){for(let i=0,o=0,a=!0;o<t.length&&i<=r;o++){let s=t[o],u=i+s.length;u>=n&&(u>r&&(s=s.slice(0,r-i)),i<n&&(s=s.slice(n-i)),a?(e[e.length-1]+=s,a=!1):e.push(s)),i=u+1}return e}function RZ(t,e,n){return TP(t,[""],e,n)}class pC{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof ks?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],o=this.offsets[r],a=o>>1,s=i instanceof ks?i.text.length:i.children.length;if(a==(n>0?s:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof ks){let u=i.text[a+(n<0?-1:0)];if(this.offsets[r]+=n,u.length>Math.max(0,e))return this.value=e==0?u:n>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=i.children[a+(n<0?-1:0)];e>u.length?(e-=u.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(u),this.offsets.push(n>0?1:(u instanceof ks?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Ire{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new pC(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Dre{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ti.prototype[Symbol.iterator]=function(){return this.iter()},pC.prototype[Symbol.iterator]=Ire.prototype[Symbol.iterator]=Dre.prototype[Symbol.iterator]=function(){return this});let z8e=class{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}};function Uw(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function fa(t,e,n=!0,r=!0){return D8e(t,e,n,r)}function N8e(t){return t>=56320&&t<57344}function B8e(t){return t>=55296&&t<56320}function Wc(t,e){let n=t.charCodeAt(e);if(!B8e(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return N8e(r)?(n-55296<<10)+(r-56320)+65536:n}function $B(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Np(t){return t<65536?1:2}const ez=/\r\n?|\n/;var rl=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(rl||(rl={}));class em{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let o=this.sections[n++],a=this.sections[n++];a<0?(e(r,i,o),i+=o):i+=a,r+=o}}iterChangedRanges(e,n=!1){tz(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new em(e)}composeDesc(e){return this.empty?e:e.empty?this:Lre(this,e)}mapDesc(e,n=!1){return e.empty?this:nz(this,e,n)}mapPos(e,n=-1,r=rl.Simple){let i=0,o=0;for(let a=0;a<this.sections.length;){let s=this.sections[a++],u=this.sections[a++],f=i+s;if(u<0){if(f>e)return o+(e-i);o+=s}else{if(r!=rl.Simple&&f>=e&&(r==rl.TrackDel&&i<e&&f>e||r==rl.TrackBefore&&i<e||r==rl.TrackAfter&&f>e))return null;if(f>e||f==e&&n<0&&!s)return e==i||n<0?o:o+u;o+=u}i=f}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let o=this.sections[r++],a=this.sections[r++],s=i+o;if(a>=0&&i<=n&&s>=e)return i<e&&s>n?"cover":!0;i=s}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new em(e)}static create(e){return new em(e)}}class Qs extends em{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return tz(this,(n,r,i,o,a)=>e=e.replace(i,i+(r-n),a),!1),e}mapDesc(e,n=!1){return nz(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,o=0;i<n.length;i+=2){let a=n[i],s=n[i+1];if(s>=0){n[i]=s,n[i+1]=a;let u=i>>1;for(;r.length<u;)r.push(Ti.empty);r.push(a?e.slice(o,o+a):Ti.empty)}o+=a}return new Qs(n,r)}compose(e){return this.empty?e:e.empty?this:Lre(this,e,!0)}map(e,n=!1){return e.empty?this:nz(this,e,n,!0)}iterChanges(e,n=!1){tz(this,e,n)}get desc(){return em.create(this.sections)}filter(e){let n=[],r=[],i=[],o=new lT(this);e:for(let a=0,s=0;;){let u=a==e.length?1e9:e[a++];for(;s<u||s==u&&o.len==0;){if(o.done)break e;let g=Math.min(o.len,u-s);Al(i,g,-1);let _=o.ins==-1?-1:o.off==0?o.ins:0;Al(n,g,_),_>0&&C0(r,n,o.text),o.forward(g),s+=g}let f=e[a++];for(;s<f;){if(o.done)break e;let g=Math.min(o.len,f-s);Al(n,g,-1),Al(i,g,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(g),s+=g}}return{changes:new Qs(n,r),filtered:em.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],o=[],a=0,s=null;function u(g=!1){if(!g&&!i.length)return;a<n&&Al(i,n-a,-1);let _=new Qs(i,o);s=s?s.compose(_.map(s)):_,i=[],o=[],a=0}function f(g){if(Array.isArray(g))for(let _ of g)f(_);else if(g instanceof Qs){if(g.length!=n)throw new RangeError(`Mismatched change set length (got ${g.length}, expected ${n})`);u(),s=s?s.compose(g.map(s)):g}else{let{from:_,to:w=_,insert:S}=g;if(_>w||_<0||w>n)throw new RangeError(`Invalid change range ${_} to ${w} (in doc of length ${n})`);let E=S?typeof S=="string"?Ti.of(S.split(r||ez)):S:Ti.empty,A=E.length;if(_==w&&A==0)return;_<a&&u(),_>a&&Al(i,_-a,-1),Al(i,w-_,A),C0(o,i,E),a=w}}return f(e),u(!s),s}static empty(e){return new Qs(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")n.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((a,s)=>s&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)n.push(o[0],0);else{for(;r.length<i;)r.push(Ti.empty);r[i]=Ti.of(o.slice(1)),n.push(o[0],r[i].length)}}}return new Qs(n,r)}static createSet(e,n){return new Qs(e,n)}}function Al(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function C0(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Ti.empty);t.push(n)}}function tz(t,e,n){let r=t.inserted;for(let i=0,o=0,a=0;a<t.sections.length;){let s=t.sections[a++],u=t.sections[a++];if(u<0)i+=s,o+=s;else{let f=i,g=o,_=Ti.empty;for(;f+=s,g+=u,u&&r&&(_=_.append(r[a-2>>1])),!(n||a==t.sections.length||t.sections[a+1]<0);)s=t.sections[a++],u=t.sections[a++];e(i,f,o,g,_),i=f,o=g}}}function nz(t,e,n,r=!1){let i=[],o=r?[]:null,a=new lT(t),s=new lT(e);for(let u=-1;;){if(a.done&&s.len||s.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&s.ins==-1){let f=Math.min(a.len,s.len);Al(i,f,-1),a.forward(f),s.forward(f)}else if(s.ins>=0&&(a.ins<0||u==a.i||a.off==0&&(s.len<a.len||s.len==a.len&&!n))){let f=s.len;for(Al(i,s.ins,-1);f;){let g=Math.min(a.len,f);a.ins>=0&&u<a.i&&a.len<=g&&(Al(i,0,a.ins),o&&C0(o,i,a.text),u=a.i),a.forward(g),f-=g}s.next()}else if(a.ins>=0){let f=0,g=a.len;for(;g;)if(s.ins==-1){let _=Math.min(g,s.len);f+=_,g-=_,s.forward(_)}else if(s.ins==0&&s.len<g)g-=s.len,s.next();else break;Al(i,f,u<a.i?a.ins:0),o&&u<a.i&&C0(o,i,a.text),u=a.i,a.forward(a.len-g)}else{if(a.done&&s.done)return o?Qs.createSet(i,o):em.create(i);throw new Error("Mismatched change set lengths")}}}function Lre(t,e,n=!1){let r=[],i=n?[]:null,o=new lT(t),a=new lT(e);for(let s=!1;;){if(o.done&&a.done)return i?Qs.createSet(r,i):em.create(r);if(o.ins==0)Al(r,o.len,0,s),o.next();else if(a.len==0&&!a.done)Al(r,0,a.ins,s),i&&C0(i,r,a.text),a.next();else{if(o.done||a.done)throw new Error("Mismatched change set lengths");{let u=Math.min(o.len2,a.len),f=r.length;if(o.ins==-1){let g=a.ins==-1?-1:a.off?0:a.ins;Al(r,u,g,s),i&&g&&C0(i,r,a.text)}else a.ins==-1?(Al(r,o.off?0:o.len,u,s),i&&C0(i,r,o.textBit(u))):(Al(r,o.off?0:o.len,a.off?0:a.ins,s),i&&!a.off&&C0(i,r,a.text));s=(o.ins>u||a.ins>=0&&a.len>u)&&(s||r.length>f),o.forward2(u),a.forward(u)}}}}class lT{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Ti.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Ti.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class V_{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new V_(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return Ft.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return Ft.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ft.range(e.anchor,e.head)}static create(e,n,r){return new V_(e,n,r)}}class Ft{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:Ft.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ft([this.main],0)}addRange(e,n=!0){return Ft.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,Ft.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ft(e.ranges.map(n=>V_.fromJSON(n)),e.main)}static single(e,n=e){return new Ft([Ft.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=r:o.from<r)return Ft.normalized(e.slice(),n);r=o.to}return new Ft(e,n)}static cursor(e,n=0,r,i){return V_.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let o=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?V_.create(n,e,48|o):V_.create(e,n,(n>e?8:0)|o)}static normalized(e,n=0){let r=e[n];e.sort((i,o)=>i.from-o.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let o=e[i],a=e[i-1];if(o.empty?o.from<=a.to:o.from<a.to){let s=a.from,u=Math.max(o.to,a.to);i<=n&&n--,e.splice(--i,2,o.anchor>o.head?Ft.range(u,s):Ft.range(s,u))}}return new Ft(e,n)}}function $re(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let zB=0;class En{constructor(e,n,r,i,o){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=zB++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new En(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:NB),!!e.static,e.enables)}of(e){return new kP([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new kP(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new kP(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function NB(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class kP{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=zB++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,o=this.id,a=e[o]>>1,s=this.type==2,u=!1,f=!1,g=[];for(let _ of this.dependencies)_=="doc"?u=!0:_=="selection"?f=!0:(((n=e[_.id])!==null&&n!==void 0?n:1)&1)==0&&g.push(e[_.id]);return{create(_){return _.values[a]=r(_),1},update(_,w){if(u&&w.docChanged||f&&(w.docChanged||w.selection)||rz(_,g)){let S=r(_);if(s?!IZ(S,_.values[a],i):!i(S,_.values[a]))return _.values[a]=S,1}return 0},reconfigure:(_,w)=>{let S,E=w.config.address[o];if(E!=null){let A=X5(w,E);if(this.dependencies.every(R=>R instanceof En?w.facet(R)===_.facet(R):R instanceof Rs?w.field(R,!1)==_.field(R,!1):!0)||(s?IZ(S=r(_),A,i):i(S=r(_),A)))return _.values[a]=A,0}else S=r(_);return _.values[a]=S,1}}}}function IZ(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function rz(t,e){let n=!1;for(let r of e)mC(t,r)&1&&(n=!0);return n}function F8e(t,e,n){let r=n.map(u=>t[u.id]),i=n.map(u=>u.type),o=r.filter(u=>!(u&1)),a=t[e.id]>>1;function s(u){let f=[];for(let g=0;g<r.length;g++){let _=X5(u,r[g]);if(i[g]==2)for(let w of _)f.push(w);else f.push(_)}return e.combine(f)}return{create(u){for(let f of r)mC(u,f);return u.values[a]=s(u),1},update(u,f){if(!rz(u,o))return 0;let g=s(u);return e.compare(g,u.values[a])?0:(u.values[a]=g,1)},reconfigure(u,f){let g=rz(u,r),_=f.config.facets[e.id],w=f.facet(e);if(_&&!g&&NB(n,_))return u.values[a]=w,0;let S=s(u);return e.compare(S,w)?(u.values[a]=w,0):(u.values[a]=S,1)}}}const vA=En.define({static:!0});class Rs{constructor(e,n,r,i,o){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let n=new Rs(zB++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(vA).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let o=r.values[n],a=this.updateF(o,i);return this.compareF(o,a)?0:(r.values[n]=a,1)},reconfigure:(r,i)=>{let o=r.facet(vA),a=i.facet(vA),s;return(s=o.find(u=>u.field==this))&&s!=a.find(u=>u.field==this)?(r.values[n]=s.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,vA.of({field:this,create:e})]}get extension(){return this}}const I_={lowest:4,low:3,default:2,high:1,highest:0};function b2(t){return e=>new zre(e,t)}const Pf={highest:b2(I_.highest),high:b2(I_.high),default:b2(I_.default),low:b2(I_.low),lowest:b2(I_.lowest)};class zre{constructor(e,n){this.inner=e,this.prec=n}}class LO{of(e){return new iz(this,e)}reconfigure(e){return LO.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class iz{constructor(e,n){this.compartment=e,this.inner=n}}class G5{constructor(e,n,r,i,o,a){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],o=Object.create(null),a=new Map;for(let w of j8e(e,n,a))w instanceof Rs?i.push(w):(o[w.facet.id]||(o[w.facet.id]=[])).push(w);let s=Object.create(null),u=[],f=[];for(let w of i)s[w.id]=f.length<<1,f.push(S=>w.slot(S));let g=r?.config.facets;for(let w in o){let S=o[w],E=S[0].facet,A=g&&g[w]||[];if(S.every(R=>R.type==0))if(s[E.id]=u.length<<1|1,NB(A,S))u.push(r.facet(E));else{let R=E.combine(S.map($=>$.value));u.push(r&&E.compare(R,r.facet(E))?r.facet(E):R)}else{for(let R of S)R.type==0?(s[R.id]=u.length<<1|1,u.push(R.value)):(s[R.id]=f.length<<1,f.push($=>R.dynamicSlot($)));s[E.id]=f.length<<1,f.push(R=>F8e(R,E,S))}}let _=f.map(w=>w(s));return new G5(e,a,_,s,u,o)}}function j8e(t,e,n){let r=[[],[],[],[],[]],i=new Map;function o(a,s){let u=i.get(a);if(u!=null){if(u<=s)return;let f=r[u].indexOf(a);f>-1&&r[u].splice(f,1),a instanceof iz&&n.delete(a.compartment)}if(i.set(a,s),Array.isArray(a))for(let f of a)o(f,s);else if(a instanceof iz){if(n.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let f=e.get(a.compartment)||a.inner;n.set(a.compartment,f),o(f,s)}else if(a instanceof zre)o(a.inner,a.prec);else if(a instanceof Rs)r[s].push(a),a.provides&&o(a.provides,s);else if(a instanceof kP)r[s].push(a),a.facet.extensions&&o(a.facet.extensions,I_.default);else{let f=a.extension;if(!f)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(f,s)}}return o(t,I_.default),r.reduce((a,s)=>a.concat(s))}function mC(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function X5(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const Nre=En.define(),oz=En.define({combine:t=>t.some(e=>e),static:!0}),Bre=En.define({combine:t=>t.length?t[0]:void 0,static:!0}),Fre=En.define(),jre=En.define(),Vre=En.define(),Qre=En.define({combine:t=>t.length?t[0]:!1});class cy{constructor(e,n){this.type=e,this.value=n}static define(){return new V8e}}class V8e{of(e){return new cy(this,e)}}class Q8e{constructor(e){this.map=e}of(e){return new fr(this,e)}}class fr{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new fr(this.type,n)}is(e){return this.type==e}static define(e={}){return new Q8e(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let o=i.map(n);o&&r.push(o)}return r}}fr.reconfigure=fr.define();fr.appendConfig=fr.define();class Xs{constructor(e,n,r,i,o,a){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,r&&$re(r,n.newLength),o.some(s=>s.type==Xs.time)||(this.annotations=o.concat(Xs.time.of(Date.now())))}static create(e,n,r,i,o,a){return new Xs(e,n,r,i,o,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Xs.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Xs.time=cy.define();Xs.userEvent=cy.define();Xs.addToHistory=cy.define();Xs.remote=cy.define();function U8e(t,e){let n=[];for(let r=0,i=0;;){let o,a;if(r<t.length&&(i==e.length||e[i]>=t[r]))o=t[r++],a=t[r++];else if(i<e.length)o=e[i++],a=e[i++];else return n;!n.length||n[n.length-1]<o?n.push(o,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function Ure(t,e,n){var r;let i,o,a;return n?(i=e.changes,o=Qs.empty(e.changes.length),a=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),a=t.changes.compose(i)),{changes:a,selection:e.selection?e.selection.map(o):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:fr.mapEffects(t.effects,i).concat(fr.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function sz(t,e,n){let r=e.selection,i=lw(e.annotations);return e.userEvent&&(i=i.concat(Xs.userEvent.of(e.userEvent))),{changes:e.changes instanceof Qs?e.changes:Qs.of(e.changes||[],n,t.facet(Bre)),selection:r&&(r instanceof Ft?r:Ft.single(r.anchor,r.head)),effects:lw(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Zre(t,e,n){let r=sz(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(n=!1);let a=!!e[o].sequential;r=Ure(r,sz(t,e[o],a?r.changes.newLength:t.doc.length),a)}let i=Xs.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return q8e(n?Z8e(i):i)}function Z8e(t){let e=t.startState,n=!0;for(let i of e.facet(Fre)){let o=i(t);if(o===!1){n=!1;break}Array.isArray(o)&&(n=n===!0?o:U8e(n,o))}if(n!==!0){let i,o;if(n===!1)o=t.changes.invertedDesc,i=Qs.empty(e.doc.length);else{let a=t.changes.filter(n);i=a.changes,o=a.filtered.mapDesc(a.changes).invertedDesc}t=Xs.create(e,i,t.selection&&t.selection.map(o),fr.mapEffects(t.effects,o),t.annotations,t.scrollIntoView)}let r=e.facet(jre);for(let i=r.length-1;i>=0;i--){let o=r[i](t);o instanceof Xs?t=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Xs?t=o[0]:t=Zre(e,lw(o),!1)}return t}function q8e(t){let e=t.startState,n=e.facet(Vre),r=t;for(let i=n.length-1;i>=0;i--){let o=n[i](t);o&&Object.keys(o).length&&(r=Ure(r,sz(e,o,t.changes.newLength),!0))}return r==t?t:Xs.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const W8e=[];function lw(t){return t==null?W8e:Array.isArray(t)?t:[t]}var Uo=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(Uo||(Uo={}));const H8e=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let az;try{az=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function G8e(t){if(az)return az.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||H8e.test(n)))return!0}return!1}function X8e(t){return e=>{if(!/\S/.test(e))return Uo.Space;if(G8e(e))return Uo.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Uo.Word;return Uo.Other}}class Pr{constructor(e,n,r,i,o,a){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,a&&(a._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)mC(this,s<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return mC(this,r),X5(this,r)}update(...e){return Zre(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let s of e.effects)s.is(LO.reconfigure)?(n&&(i=new Map,n.compartments.forEach((u,f)=>i.set(f,u)),n=null),i.set(s.value.compartment,s.value.extension)):s.is(fr.reconfigure)?(n=null,r=s.value):s.is(fr.appendConfig)&&(n=null,r=lw(r).concat(s.value));let o;n?o=e.startState.values.slice():(n=G5.resolve(r,i,this),o=new Pr(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(u,f)=>f.reconfigure(u,this),null).values);let a=e.startState.facet(oz)?e.newSelection:e.newSelection.asSingle();new Pr(n,e.newDoc,a,o,(s,u)=>u.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:Ft.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),o=[r.range],a=lw(r.effects);for(let s=1;s<n.ranges.length;s++){let u=e(n.ranges[s]),f=this.changes(u.changes),g=f.map(i);for(let w=0;w<s;w++)o[w]=o[w].map(g);let _=i.mapDesc(f,!0);o.push(u.range.map(_)),i=i.compose(g),a=fr.mapEffects(a,g).concat(fr.mapEffects(lw(u.effects),_))}return{changes:i,selection:Ft.create(o,n.mainIndex),effects:a}}changes(e=[]){return e instanceof Qs?e:Qs.of(e,this.doc.length,this.facet(Pr.lineSeparator))}toText(e){return Ti.of(e.split(this.facet(Pr.lineSeparator)||ez))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(mC(this,n),X5(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Rs&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let o in r)if(Object.prototype.hasOwnProperty.call(e,o)){let a=r[o],s=e[o];i.push(a.init(u=>a.spec.fromJSON(s,u)))}}return Pr.create({doc:e.doc,selection:Ft.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=G5.resolve(e.extensions||[],new Map),r=e.doc instanceof Ti?e.doc:Ti.of((e.doc||"").split(n.staticFacet(Pr.lineSeparator)||ez)),i=e.selection?e.selection instanceof Ft?e.selection:Ft.single(e.selection.anchor,e.selection.head):Ft.single(0);return $re(i,r.length),n.staticFacet(oz)||(i=i.asSingle()),new Pr(n,r,i,n.dynamicSlots.map(()=>null),(o,a)=>a.create(o),null)}get tabSize(){return this.facet(Pr.tabSize)}get lineBreak(){return this.facet(Pr.lineSeparator)||`
`}get readOnly(){return this.facet(Qre)}phrase(e,...n){for(let r of this.facet(Pr.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>n.length?r:n[o-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let o of this.facet(Nre))for(let a of o(this,n,r))Object.prototype.hasOwnProperty.call(a,e)&&i.push(a[e]);return i}charCategorizer(e){let n=this.languageDataAt("wordChars",e);return X8e(n.length?n[0]:"")}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),a=e-r,s=e-r;for(;a>0;){let u=fa(n,a,!1);if(o(n.slice(u,a))!=Uo.Word)break;a=u}for(;s<i;){let u=fa(n,s);if(o(n.slice(s,u))!=Uo.Word)break;s=u}return a==s?null:Ft.range(a+r,s+r)}}Pr.allowMultipleSelections=oz;Pr.tabSize=En.define({combine:t=>t.length?t[0]:4});Pr.lineSeparator=Bre;Pr.readOnly=Qre;Pr.phrases=En.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Pr.languageData=Nre;Pr.changeFilter=Fre;Pr.transactionFilter=jre;Pr.transactionExtender=Vre;LO.reconfigure=fr.define();function mm(t,e,n={}){let r={};for(let i of t)for(let o of Object.keys(i)){let a=i[o],s=r[o];if(s===void 0)r[o]=a;else if(!(s===a||a===void 0))if(Object.hasOwnProperty.call(n,o))r[o]=n[o](s,a);else throw new Error("Config merge conflict for field "+o)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Q0{eq(e){return this==e}range(e,n=e){return lz.create(e,n,this)}}Q0.prototype.startSide=Q0.prototype.endSide=0;Q0.prototype.point=!1;Q0.prototype.mapMode=rl.TrackDel;function BB(t,e){return t==e||t.constructor==e.constructor&&t.eq(e)}let lz=class qre{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new qre(e,n,r)}};function cz(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}let Y8e=class Wre{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let o=r?this.to:this.from;for(let a=i,s=o.length;;){if(a==s)return a;let u=a+s>>1,f=o[u]-e||(r?this.value[u].endSide:this.value[u].startSide)-n;if(u==a)return f>=0?a:s;f>=0?s=u:a=u+1}}between(e,n,r,i){for(let o=this.findIndex(n,-1e9,!0),a=this.findIndex(r,1e9,!1,o);o<a;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,n){let r=[],i=[],o=[],a=-1,s=-1;for(let u=0;u<this.value.length;u++){let f=this.value[u],g=this.from[u]+e,_=this.to[u]+e,w,S;if(g==_){let E=n.mapPos(g,f.startSide,f.mapMode);if(E==null||(w=S=E,f.startSide!=f.endSide&&(S=n.mapPos(g,f.endSide),S<w)))continue}else if(w=n.mapPos(g,f.startSide),S=n.mapPos(_,f.endSide),w>S||w==S&&f.startSide>0&&f.endSide<=0)continue;(S-w||f.endSide-f.startSide)<0||(a<0&&(a=w),f.point&&(s=Math.max(s,S-w)),r.push(f),i.push(w-a),o.push(S-a))}return{mapped:r.length?new Wre(i,o,r,s):null,pos:a}}};class qr{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new qr(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:o=this.length}=e,a=e.filter;if(n.length==0&&!a)return this;if(r&&(n=n.slice().sort(cz)),this.isEmpty)return n.length?qr.of(n):this;let s=new Hre(this,null,-1).goto(0),u=0,f=[],g=new ou;for(;s.value||u<n.length;)if(u<n.length&&(s.from-n[u].from||s.startSide-n[u].value.startSide)>=0){let _=n[u++];g.addInner(_.from,_.to,_.value)||f.push(_)}else s.rangeIndex==1&&s.chunkIndex<this.chunk.length&&(u==n.length||this.chunkEnd(s.chunkIndex)<n[u].from)&&(!a||i>this.chunkEnd(s.chunkIndex)||o<this.chunkPos[s.chunkIndex])&&g.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!a||i>s.to||o<s.from||a(s.from,s.to,s.value))&&(g.addInner(s.from,s.to,s.value)||f.push(lz.create(s.from,s.to,s.value))),s.next());return g.finishInner(this.nextLayer.isEmpty&&!f.length?qr.empty:this.nextLayer.update({add:f,filter:a,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let a=0;a<this.chunk.length;a++){let s=this.chunkPos[a],u=this.chunk[a],f=e.touchesRange(s,s+u.length);if(f===!1)i=Math.max(i,u.maxPoint),n.push(u),r.push(e.mapPos(s));else if(f===!0){let{mapped:g,pos:_}=u.map(s,e);g&&(i=Math.max(i,g.maxPoint),n.push(g),r.push(_))}}let o=this.nextLayer.map(e);return n.length==0?o:new qr(r,n,o||qr.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],a=this.chunk[i];if(n>=o&&e<=o+a.length&&a.between(o,e-o,n-o,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return cT.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return cT.from(e).goto(n)}static compare(e,n,r,i,o=-1){let a=e.filter(_=>_.maxPoint>0||!_.isEmpty&&_.maxPoint>=o),s=n.filter(_=>_.maxPoint>0||!_.isEmpty&&_.maxPoint>=o),u=DZ(a,s,r),f=new x2(a,u,o),g=new x2(s,u,o);r.iterGaps((_,w,S)=>LZ(f,_,g,w,S,i)),r.empty&&r.length==0&&LZ(f,0,g,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let o=e.filter(g=>!g.isEmpty&&n.indexOf(g)<0),a=n.filter(g=>!g.isEmpty&&e.indexOf(g)<0);if(o.length!=a.length)return!1;if(!o.length)return!0;let s=DZ(o,a),u=new x2(o,s,0).goto(r),f=new x2(a,s,0).goto(r);for(;;){if(u.to!=f.to||!uz(u.active,f.active)||u.point&&(!f.point||!BB(u.point,f.point)))return!1;if(u.to>i)return!0;u.next(),f.next()}}static spans(e,n,r,i,o=-1){let a=new x2(e,null,o).goto(n),s=n,u=a.openStart;for(;;){let f=Math.min(a.to,r);if(a.point){let g=a.activeForPoint(a.to),_=a.pointFrom<n?g.length+1:a.point.startSide<0?g.length:Math.min(g.length,u);i.point(s,f,a.point,g,_,a.pointRank),u=Math.min(a.openEnd(f),g.length)}else f>s&&(i.span(s,f,a.active,u),u=a.openEnd(f));if(a.to>r)return u+(a.point&&a.to>r?1:0);s=a.to,a.next()}}static of(e,n=!1){let r=new ou;for(let i of e instanceof lz?[e]:n?K8e(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return qr.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=qr.empty;i=i.nextLayer)n=new qr(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}qr.empty=new qr([],[],null,-1);function K8e(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(cz(e,r)>0)return t.slice().sort(cz);e=r}return t}qr.empty.nextLayer=qr.empty;class ou{finishChunk(e){this.chunks.push(new Y8e(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new ou)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(qr.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=qr.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function DZ(t,e,n){let r=new Map;for(let o of t)for(let a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<=0&&r.set(o.chunk[a],o.chunkPos[a]);let i=new Set;for(let o of e)for(let a=0;a<o.chunk.length;a++){let s=r.get(o.chunk[a]);s!=null&&(n?n.mapPos(s):s)==o.chunkPos[a]&&!n?.touchesRange(s,s+o.chunk[a].length)&&i.add(o.chunk[a])}return i}class Hre{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class cT{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let o=0;o<e.length;o++)for(let a=e[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&i.push(new Hre(a,n,r,o));return i.length==1?i[0]:new cT(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)ID(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)ID(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),ID(this.heap,0)}}}function ID(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class x2{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=cT.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){_A(this.active,e),_A(this.activeTo,e),_A(this.activeRank,e),this.minActive=$Z(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:o}=this.cursor;for(;n<this.activeRank.length&&(o-this.activeRank[n]||i-this.activeTo[n])>0;)n++;bA(this.active,n,r),bA(this.activeTo,n,i),bA(this.activeRank,n,o),e&&bA(e,n,this.cursor.from),this.minActive=$Z(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&_A(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function LZ(t,e,n,r,i,o){t.goto(e),n.goto(r);let a=r+i,s=r,u=r-e,f=!!o.boundChange;for(let g=!1;;){let _=t.to+u-n.to,w=_||t.endSide-n.endSide,S=w<0?t.to+u:n.to,E=Math.min(S,a);if(t.point||n.point?(t.point&&n.point&&BB(t.point,n.point)&&uz(t.activeForPoint(t.to),n.activeForPoint(n.to))||o.comparePoint(s,E,t.point,n.point),g=!1):(g&&o.boundChange(s),E>s&&!uz(t.active,n.active)&&o.compareRange(s,E,t.active,n.active),f&&E<a&&(_||t.openEnd(S)!=n.openEnd(S))&&(g=!0)),S>a)break;s=S,w<=0&&t.next(),w>=0&&n.next()}}function uz(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!BB(t[n],e[n]))return!1;return!0}function _A(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function bA(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function $Z(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Sf(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=fa(t,i));return r}function hz(t,e,n,r){for(let i=0,o=0;;){if(o>=e)return i;if(i==t.length)break;o+=t.charCodeAt(i)==9?n-o%n:1,i=fa(t,i)}return r===!0?-1:t.length}const dz="",zZ=typeof Symbol>"u"?"__"+dz:Symbol.for(dz),fz=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),NZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Jg{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function o(a,s,u,f){let g=[],_=/^@(\w+)\b/.exec(a[0]),w=_&&_[1]=="keyframes";if(_&&s==null)return u.push(a[0]+";");for(let S in s){let E=s[S];if(/&/.test(S))o(S.split(/,\s*/).map(A=>a.map(R=>A.replace(/&/,R))).reduce((A,R)=>A.concat(R)),E,u);else if(E&&typeof E=="object"){if(!_)throw new RangeError("The value of a property ("+S+") should be a primitive value.");o(i(S),E,g,w)}else E!=null&&g.push(S.replace(/_.*/,"").replace(/[A-Z]/g,A=>"-"+A.toLowerCase())+": "+E+";")}(g.length||w)&&u.push((r&&!_&&!f?a.map(r):a).join(", ")+" {"+g.join(" ")+"}")}for(let a in e)o(i(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=NZ[zZ]||1;return NZ[zZ]=e+1,dz+e.toString(36)}static mount(e,n,r){let i=e[fz],o=r&&r.nonce;i?o&&i.setNonce(o):i=new J8e(e,o),i.mount(Array.isArray(n)?n:[n],e)}}let BZ=new Map;class J8e{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let o=BZ.get(r);if(o)return e[fz]=o;this.sheet=new i.CSSStyleSheet,BZ.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[fz]=this}mount(e,n){let r=this.sheet,i=0,o=0;for(let a=0;a<e.length;a++){let s=e[a],u=this.modules.indexOf(s);if(u<o&&u>-1&&(this.modules.splice(u,1),o--,u=-1),u==-1){if(this.modules.splice(o++,0,s),r)for(let f=0;f<s.rules.length;f++)r.insertRule(s.rules[f],i++)}else{for(;o<u;)i+=this.modules[o++].rules.length;i+=s.rules.length,o++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let a="";for(let u=0;u<this.modules.length;u++)a+=this.modules[u].getRules()+`
`;this.styleTag.textContent=a;let s=n.head||n;this.styleTag.parentNode!=s&&s.insertBefore(this.styleTag,s.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var U0={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},uT={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},eBe=typeof navigator<"u"&&/Mac/.test(navigator.platform),tBe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var nl=0;nl<10;nl++)U0[48+nl]=U0[96+nl]=String(nl);for(var nl=1;nl<=24;nl++)U0[nl+111]="F"+nl;for(var nl=65;nl<=90;nl++)U0[nl]=String.fromCharCode(nl+32),uT[nl]=String.fromCharCode(nl);for(var DD in U0)uT.hasOwnProperty(DD)||(uT[DD]=U0[DD]);function nBe(t){var e=eBe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||tBe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?uT:U0)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function fo(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)Gre(t,arguments[e]);return t}function Gre(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)Gre(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}let ic=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},pz=typeof document<"u"?document:{documentElement:{style:{}}};const mz=/Edge\/(\d+)/.exec(ic.userAgent),Xre=/MSIE \d/.test(ic.userAgent),gz=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ic.userAgent),dI=!!(Xre||gz||mz),FZ=!dI&&/gecko\/(\d+)/i.test(ic.userAgent),LD=!dI&&/Chrome\/(\d+)/.exec(ic.userAgent),rBe="webkitFontSmoothing"in pz.documentElement.style,yz=!dI&&/Apple Computer/.test(ic.vendor),jZ=yz&&(/Mobile\/\w+/.test(ic.userAgent)||ic.maxTouchPoints>2);var Pn={mac:jZ||/Mac/.test(ic.platform),windows:/Win/.test(ic.platform),linux:/Linux|X11/.test(ic.platform),ie:dI,ie_version:Xre?pz.documentMode||6:gz?+gz[1]:mz?+mz[1]:0,gecko:FZ,gecko_version:FZ?+(/Firefox\/(\d+)/.exec(ic.userAgent)||[0,0])[1]:0,chrome:!!LD,chrome_version:LD?+LD[1]:0,ios:jZ,android:/Android\b/.test(ic.userAgent),webkit_version:rBe?+(/\bAppleWebKit\/(\d+)/.exec(ic.userAgent)||[0,0])[1]:0,safari:yz,safari_version:yz?+(/\bVersion\/(\d+(\.\d+)?)/.exec(ic.userAgent)||[0,0])[1]:0,tabSize:pz.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function FB(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Y5=Object.create(null);function jB(t,e,n){if(t==e)return!0;t||(t=Y5),e||(e=Y5);let r=Object.keys(t),i=Object.keys(e);if(r.length-0!=i.length-0)return!1;for(let o of r)if(o!=n&&(i.indexOf(o)==-1||t[o]!==e[o]))return!1;return!0}function iBe(t,e){for(let n=t.attributes.length-1;n>=0;n--){let r=t.attributes[n].name;e[r]==null&&t.removeAttribute(r)}for(let n in e){let r=e[n];n=="style"?t.style.cssText=r:t.getAttribute(n)!=r&&t.setAttribute(n,r)}}function VZ(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function oBe(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class od{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ol=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(ol||(ol={}));class zn extends Q0{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new xk(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new wb(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:o,end:a}=Yre(e,n);r=(o?n?-3e8:-1:5e8)-1,i=(a?n?2e8:1:-6e8)+1}return new wb(e,r,i,n,e.widget||null,!0)}static line(e){return new wk(e)}static set(e,n=!1){return qr.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}zn.none=qr.empty;class xk extends zn{constructor(e){let{start:n,end:r}=Yre(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?FB(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||Y5}eq(e){return this==e||e instanceof xk&&this.tagName==e.tagName&&jB(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}xk.prototype.point=!1;class wk extends zn{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof wk&&this.spec.class==e.spec.class&&jB(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}wk.prototype.mapMode=rl.TrackBefore;wk.prototype.point=!0;class wb extends zn{constructor(e,n,r,i,o,a){super(n,r,o,e),this.block=i,this.isReplace=a,this.mapMode=i?n<=0?rl.TrackBefore:rl.TrackAfter:rl.TrackDel}get type(){return this.startSide!=this.endSide?ol.WidgetRange:this.startSide<=0?ol.WidgetBefore:ol.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof wb&&sBe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}wb.prototype.point=!0;function Yre(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function sBe(t,e){return t==e||!!(t&&e&&t.compare(e))}function cw(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class hT extends Q0{constructor(e,n){super(),this.tagName=e,this.attributes=n}eq(e){return e==this||e instanceof hT&&this.tagName==e.tagName&&jB(this.attributes,e.attributes)}static create(e){return new hT(e.tagName,e.attributes||Y5)}static set(e,n=!1){return qr.of(e,n)}}hT.prototype.startSide=hT.prototype.endSide=-1;function dT(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function vz(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function EP(t,e){if(!e.anchorNode)return!1;try{return vz(t,e.anchorNode)}catch{return!1}}function AP(t){return t.nodeType==3?fT(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function gC(t,e,n,r){return n?QZ(t,e,n,r,-1)||QZ(t,e,n,r,1):!1}function Z0(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function K5(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function QZ(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:ey(t))){if(t.nodeName=="DIV")return!1;let o=t.parentNode;if(!o||o.nodeType!=1)return!1;e=Z0(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?ey(t):0}else return!1}}function ey(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function J5(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function aBe(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Kre(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function lBe(t,e,n,r,i,o,a,s){let u=t.ownerDocument,f=u.defaultView||window;for(let g=t,_=!1;g&&!_;)if(g.nodeType==1){let w,S=g==u.body,E=1,A=1;if(S)w=aBe(f);else{if(/^(fixed|sticky)$/.test(getComputedStyle(g).position)&&(_=!0),g.scrollHeight<=g.clientHeight&&g.scrollWidth<=g.clientWidth){g=g.assignedSlot||g.parentNode;continue}let z=g.getBoundingClientRect();({scaleX:E,scaleY:A}=Kre(g,z)),w={left:z.left,right:z.left+g.clientWidth*E,top:z.top,bottom:z.top+g.clientHeight*A}}let R=0,$=0;if(i=="nearest")e.top<w.top?($=e.top-(w.top+a),n>0&&e.bottom>w.bottom+$&&($=e.bottom-w.bottom+a)):e.bottom>w.bottom&&($=e.bottom-w.bottom+a,n<0&&e.top-$<w.top&&($=e.top-(w.top+a)));else{let z=e.bottom-e.top,B=w.bottom-w.top;$=(i=="center"&&z<=B?e.top+z/2-B/2:i=="start"||i=="center"&&n<0?e.top-a:e.bottom-B+a)-w.top}if(r=="nearest"?e.left<w.left?(R=e.left-(w.left+o),n>0&&e.right>w.right+R&&(R=e.right-w.right+o)):e.right>w.right&&(R=e.right-w.right+o,n<0&&e.left<w.left+R&&(R=e.left-(w.left+o))):R=(r=="center"?e.left+(e.right-e.left)/2-(w.right-w.left)/2:r=="start"==s?e.left-o:e.right-(w.right-w.left)+o)-w.left,R||$)if(S)f.scrollBy(R,$);else{let z=0,B=0;if($){let F=g.scrollTop;g.scrollTop+=$/A,B=(g.scrollTop-F)*A}if(R){let F=g.scrollLeft;g.scrollLeft+=R/E,z=(g.scrollLeft-F)*E}e={left:e.left-z,top:e.top-B,right:e.right-z,bottom:e.bottom-B},z&&Math.abs(z-R)<1&&(r="nearest"),B&&Math.abs(B-$)<1&&(i="nearest")}if(S)break;(e.top<w.top||e.bottom>w.bottom||e.left<w.left||e.right>w.right)&&(e={left:Math.max(e.left,w.left),right:Math.min(e.right,w.right),top:Math.max(e.top,w.top),bottom:Math.min(e.bottom,w.bottom)}),g=g.assignedSlot||g.parentNode}else if(g.nodeType==11)g=g.host;else break}function cBe(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class uBe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?ey(n):0),r,Math.min(e.focusOffset,r?ey(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let E_=null;Pn.safari&&Pn.safari_version>=26&&(E_=!1);function Jre(t){if(t.setActive)return t.setActive();if(E_)return t.focus(E_);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(E_==null?{get preventScroll(){return E_={preventScroll:!0},!0}}:void 0),!E_){E_=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],o=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=o&&(r.scrollLeft=o)}}}let UZ;function fT(t,e,n=e){let r=UZ||(UZ=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function uw(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,t.dispatchEvent(o);let a=new KeyboardEvent("keyup",i);return a.synthetic=!0,t.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function hBe(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function dBe(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,ey(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=ey(n))}else{if(n==t)return!0;r=Z0(n),n=n.parentNode}}function eie(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function tie(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=ey(n)}else if(n.parentNode&&!K5(n))r=Z0(n),n=n.parentNode;else return null}}function nie(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!K5(n))r=Z0(n)+1,n=n.parentNode;else return null}}class hf{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new hf(e.parentNode,Z0(e),n)}static after(e,n){return new hf(e.parentNode,Z0(e)+1,n)}}var go=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(go||(go={}));const Ob=go.LTR,VB=go.RTL;function rie(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const fBe=rie("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),pBe=rie("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),_z=Object.create(null),Sp=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);_z[e]=n,_z[n]=-e}function iie(t){return t<=247?fBe[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?pBe[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const mBe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Dg{get dir(){return this.level%2?VB:Ob}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let o=-1;for(let a=0;a<e.length;a++){let s=e[a];if(s.from<=n&&s.to>=n){if(s.level==r)return a;(o<0||(i!=0?i<0?s.from<n:s.to>n:e[o].level>s.level))&&(o=a)}}if(o<0)throw new RangeError("Index out of range");return o}}function oie(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!oie(r.inner,i.inner))return!1}return!0}const po=[];function gBe(t,e,n,r,i){for(let o=0;o<=r.length;o++){let a=o?r[o-1].to:e,s=o<r.length?r[o].from:n,u=o?256:i;for(let f=a,g=u,_=u;f<s;f++){let w=iie(t.charCodeAt(f));w==512?w=g:w==8&&_==4&&(w=16),po[f]=w==4?2:w,w&7&&(_=w),g=w}for(let f=a,g=u,_=u;f<s;f++){let w=po[f];if(w==128)f<s-1&&g==po[f+1]&&g&24?w=po[f]=g:po[f]=256;else if(w==64){let S=f+1;for(;S<s&&po[S]==64;)S++;let E=f&&g==8||S<n&&po[S]==8?_==1?1:8:256;for(let A=f;A<S;A++)po[A]=E;f=S-1}else w==8&&_==1&&(po[f]=1);g=w,w&7&&(_=w)}}}function yBe(t,e,n,r,i){let o=i==1?2:1;for(let a=0,s=0,u=0;a<=r.length;a++){let f=a?r[a-1].to:e,g=a<r.length?r[a].from:n;for(let _=f,w,S,E;_<g;_++)if(S=_z[w=t.charCodeAt(_)])if(S<0){for(let A=s-3;A>=0;A-=3)if(Sp[A+1]==-S){let R=Sp[A+2],$=R&2?i:R&4?R&1?o:i:0;$&&(po[_]=po[Sp[A]]=$),s=A;break}}else{if(Sp.length==189)break;Sp[s++]=_,Sp[s++]=w,Sp[s++]=u}else if((E=po[_])==2||E==1){let A=E==i;u=A?0:1;for(let R=s-3;R>=0;R-=3){let $=Sp[R+2];if($&2)break;if(A)Sp[R+2]|=2;else{if($&4)break;Sp[R+2]|=4}}}}}function vBe(t,e,n,r){for(let i=0,o=r;i<=n.length;i++){let a=i?n[i-1].to:t,s=i<n.length?n[i].from:e;for(let u=a;u<s;){let f=po[u];if(f==256){let g=u+1;for(;;)if(g==s){if(i==n.length)break;g=n[i++].to,s=i<n.length?n[i].from:e}else if(po[g]==256)g++;else break;let _=o==1,w=(g<e?po[g]:r)==1,S=_==w?_?1:2:r;for(let E=g,A=i,R=A?n[A-1].to:t;E>u;)E==R&&(E=n[--A].from,R=A?n[A-1].to:t),po[--E]=S;u=g}else o=f,u++}}}function bz(t,e,n,r,i,o,a){let s=r%2?2:1;if(r%2==i%2)for(let u=e,f=0;u<n;){let g=!0,_=!1;if(f==o.length||u<o[f].from){let A=po[u];A!=s&&(g=!1,_=A==16)}let w=!g&&s==1?[]:null,S=g?r:r+1,E=u;e:for(;;)if(f<o.length&&E==o[f].from){if(_)break e;let A=o[f];if(!g)for(let R=A.to,$=f+1;;){if(R==n)break e;if($<o.length&&o[$].from==R)R=o[$++].to;else{if(po[R]==s)break e;break}}if(f++,w)w.push(A);else{A.from>u&&a.push(new Dg(u,A.from,S));let R=A.direction==Ob!=!(S%2);xz(t,R?r+1:r,i,A.inner,A.from,A.to,a),u=A.to}E=A.to}else{if(E==n||(g?po[E]!=s:po[E]==s))break;E++}w?bz(t,u,E,r+1,i,w,a):u<E&&a.push(new Dg(u,E,S)),u=E}else for(let u=n,f=o.length;u>e;){let g=!0,_=!1;if(!f||u>o[f-1].to){let A=po[u-1];A!=s&&(g=!1,_=A==16)}let w=!g&&s==1?[]:null,S=g?r:r+1,E=u;e:for(;;)if(f&&E==o[f-1].to){if(_)break e;let A=o[--f];if(!g)for(let R=A.from,$=f;;){if(R==e)break e;if($&&o[$-1].to==R)R=o[--$].from;else{if(po[R-1]==s)break e;break}}if(w)w.push(A);else{A.to<u&&a.push(new Dg(A.to,u,S));let R=A.direction==Ob!=!(S%2);xz(t,R?r+1:r,i,A.inner,A.from,A.to,a),u=A.from}E=A.from}else{if(E==e||(g?po[E-1]!=s:po[E-1]==s))break;E--}w?bz(t,E,u,r+1,i,w,a):E<u&&a.push(new Dg(E,u,S)),u=E}}function xz(t,e,n,r,i,o,a){let s=e%2?2:1;gBe(t,i,o,r,s),yBe(t,i,o,r,s),vBe(i,o,r,s),bz(t,i,o,e,n,r,a)}function _Be(t,e,n){if(!t)return[new Dg(0,0,e==VB?1:0)];if(e==Ob&&!n.length&&!mBe.test(t))return sie(t.length);if(n.length)for(;t.length>po.length;)po[po.length]=256;let r=[],i=e==Ob?0:1;return xz(t,i,i,n,0,t.length,r),r}function sie(t){return[new Dg(0,t,0)]}let aie="";function bBe(t,e,n,r,i){var o;let a=r.head-t.from,s=Dg.find(e,a,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc),u=e[s],f=u.side(i,n);if(a==f){let w=s+=i?1:-1;if(w<0||w>=e.length)return null;u=e[s=w],a=u.side(!i,n),f=u.side(i,n)}let g=fa(t.text,a,u.forward(i,n));(g<u.from||g>u.to)&&(g=f),aie=t.text.slice(Math.min(a,g),Math.max(a,g));let _=s==(i?e.length-1:0)?null:e[s+(i?1:-1)];return _&&g==f&&_.level+(i?0:1)<u.level?Ft.cursor(_.side(!i,n)+t.from,_.forward(i,n)?1:-1,_.level):Ft.cursor(g+t.from,u.forward(i,n)?-1:1,u.level)}function xBe(t,e,n){for(let r=e;r<n;r++){let i=iie(t.charCodeAt(r));if(i==1)return Ob;if(i==2||i==4)return VB}return Ob}const lie=En.define(),cie=En.define(),uie=En.define(),hie=En.define(),wz=En.define(),die=En.define(),fie=En.define(),QB=En.define(),UB=En.define(),pie=En.define({combine:t=>t.some(e=>e)}),mie=En.define({combine:t=>t.some(e=>e)}),gie=En.define();class hw{constructor(e,n="nearest",r="nearest",i=5,o=5,a=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=o,this.isSnapshot=a}map(e){return e.empty?this:new hw(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new hw(Ft.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const xA=fr.define({map:(t,e)=>t.map(e)}),yie=fr.define();function Kc(t,e,n){let r=t.facet(hie);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Pg=En.define({combine:t=>t.length?t[0]:!0});let wBe=0;const q1=En.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class As{constructor(e,n,r,i,o){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(q1.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(q1.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:o,decorations:a}=n||{};return new As(wBe++,e,r,i,s=>{let u=[];return a&&u.push(pT.of(f=>{let g=f.plugin(s);return g?a(g):zn.none})),o&&u.push(o(s)),u})}static fromClass(e,n){return As.define((r,i)=>new e(r,i),n)}}class $D{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Kc(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){Kc(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Kc(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const vie=En.define(),ZB=En.define(),pT=En.define(),_ie=En.define(),bie=En.define(),Ok=En.define(),xie=En.define();function ZZ(t,e){let n=t.state.facet(xie);if(!n.length)return n;let r=n.map(o=>o instanceof Function?o(t):o),i=[];return qr.spans(r,e.from,e.to,{point(){},span(o,a,s,u){let f=o-e.from,g=a-e.from,_=i;for(let w=s.length-1;w>=0;w--,u--){let S=s[w].spec.bidiIsolate,E;if(S==null&&(S=xBe(e.text,f,g)),u>0&&_.length&&(E=_[_.length-1]).to==f&&E.direction==S)E.to=g,_=E.inner;else{let A={from:f,to:g,direction:S,inner:[]};_.push(A),_=A.inner}}}}),i}const wie=En.define();function qB(t){let e=0,n=0,r=0,i=0;for(let o of t.state.facet(wie)){let a=o(t);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(n=Math.max(n,a.right)),a.top!=null&&(r=Math.max(r,a.top)),a.bottom!=null&&(i=Math.max(i,a.bottom)))}return{left:e,right:n,top:r,bottom:i}}const F2=En.define();class jh{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new jh(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,o=0,a=0;;){let s=i<e.length?e[i].fromB:1e9,u=o<n.length?n[o]:1e9,f=Math.min(s,u);if(f==1e9)break;let g=f+a,_=f,w=g;for(;;)if(o<n.length&&n[o]<=_){let S=n[o+1];o+=2,_=Math.max(_,S);for(let E=i;E<e.length&&e[E].fromB<=_;E++)a=e[E].toA-e[E].toB;w=Math.max(w,S+a)}else if(i<e.length&&e[i].fromB<=_){let S=e[i++];_=Math.max(_,S.toB),w=Math.max(w,S.toA),a=S.toA-S.toB}else break;r.push(new jh(g,w,f,_))}return r}}class eM{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Qs.empty(this.startState.doc.length);for(let o of r)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,a,s,u)=>i.push(new jh(o,a,s,u))),this.changedRanges=i}static create(e,n,r){return new eM(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const OBe=[];class ea{constructor(e,n,r=0){this.dom=e,this.length=n,this.flags=r,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return OBe}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let n=this.domAttrs;n&&iBe(this.dom,n)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,n=this.posAtStart){let r=n;for(let i of this.children){if(i==e)return r;r+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,n){return null}domPosFor(e,n){let r=Z0(this.dom),i=this.length?e>0:n>0;return new hf(this.parent.dom,r+(i?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof pI)return e;return null}static get(e){return e.cmTile}}class fI extends ea{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let n=this.dom,r=null,i,o=e?.node==n?e:null,a=0;for(let s of this.children){if(s.sync(e),a+=s.length+s.breakAfter,i=r?r.nextSibling:n.firstChild,o&&i!=s.dom&&(o.written=!0),s.dom.parentNode==n)for(;i&&i!=s.dom;)i=qZ(i);else n.insertBefore(s.dom,i);r=s.dom}for(i=r?r.nextSibling:n.firstChild,o&&i&&(o.written=!0);i;)i=qZ(i);this.length=a}}function qZ(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class pI extends fI{constructor(e,n){super(n),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let n=ea.get(e);if(n&&this.owns(n))return n;e=e.parentNode}}blockTiles(e){for(let n=[],r=this,i=0,o=0;;)if(i==r.children.length){if(!n.length)return;r=r.parent,r.breakAfter&&o++,i=n.pop()}else{let a=r.children[i++];if(a instanceof M0)n.push(i),r=a,i=0;else{let s=o+a.length,u=e(a,o);if(u!==void 0)return u;o=s+a.breakAfter}}}resolveBlock(e,n){let r,i=-1,o,a=-1;if(this.blockTiles((s,u)=>{let f=u+s.length;if(e>=u&&e<=f){if(s.isWidget()&&n>=-1&&n<=1){if(s.flags&32)return!0;s.flags&16&&(r=void 0)}(u<e||e==f&&(n<-1?s.length:s.covers(1)))&&(!r||!s.isWidget()&&r.isWidget())&&(r=s,i=e-u),(f>e||e==u&&(n>1?s.length:s.covers(-1)))&&(!o||!s.isWidget()&&o.isWidget())&&(o=s,a=e-u)}}),!r&&!o)throw new Error("No tile at position "+e);return r&&n<0||!o?{tile:r,offset:i}:{tile:o,offset:a}}}class M0 extends fI{constructor(e,n){super(e),this.wrapper=n}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,n){let r=new M0(n||document.createElement(e.tagName),e);return n||(r.flags|=4),r}}class Zw extends fI{constructor(e,n){super(e),this.attrs=n}isLine(){return!0}static start(e,n,r){let i=new Zw(n||document.createElement("div"),e);return(!n||!r)&&(i.flags|=4),i}get domAttrs(){return this.attrs}resolveInline(e,n,r){let i=null,o=-1,a=null,s=-1;function u(g,_){for(let w=0,S=0;w<g.children.length&&S<=_;w++){let E=g.children[w],A=S+E.length;A>=_&&(E.isComposite()?u(E,_-S):(!a||a.isHidden&&(n>0||r&&CBe(a,E)))&&(A>_||E.flags&32)?(a=E,s=_-S):(S<_||E.flags&16&&!E.isHidden)&&(i=E,o=_-S)),S=A}}u(this,e);let f=(n<0?i:a)||i||a;return f?{tile:f,offset:f==i?o:s}:null}coordsIn(e,n){let r=this.resolveInline(e,n,!0);return r?r.tile.coordsIn(Math.max(0,r.offset),n):SBe(this)}domIn(e,n){let r=this.resolveInline(e,n);if(r){let{tile:i,offset:o}=r;if(this.dom.contains(i.dom))return i.isText()?new hf(i.dom,Math.min(i.dom.nodeValue.length,o)):i.domPosFor(o,i.flags&16?1:i.flags&32?-1:n);let a=r.tile.parent,s=!1;for(let u of a.children){if(s)return new hf(u.dom,0);u==r.tile&&(s=!0)}}return new hf(this.dom,0)}}function SBe(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=AP(e);return n[n.length-1]||null}function CBe(t,e){let n=t.coordsIn(0,1),r=e.coordsIn(0,1);return n&&r&&r.top<n.bottom}class Gc extends fI{constructor(e,n){super(e),this.mark=n}get domAttrs(){return this.mark.attrs}static of(e,n){let r=new Gc(n||document.createElement(e.tagName),e);return n||(r.flags|=4),r}}class Q_ extends ea{constructor(e,n){super(e,n.length),this.text=n}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,n){let r=this.dom.nodeValue.length;e>r&&(e=r);let i=e,o=e,a=0;e==0&&n<0||e==r&&n>=0?Pn.chrome||Pn.gecko||(e?(i--,a=1):o<r&&(o++,a=-1)):n<0?i--:o<r&&o++;let s=fT(this.dom,i,o).getClientRects();if(!s.length)return null;let u=s[(a?a<0:n>=0)?0:s.length-1];return Pn.safari&&!a&&u.width==0&&(u=Array.prototype.find.call(s,f=>f.width)||u),a?J5(u,a<0):u||null}static of(e,n){let r=new Q_(n||document.createTextNode(e),e);return n||(r.flags|=2),r}}class qw extends ea{constructor(e,n,r,i){super(e,n,i),this.widget=r}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,n){return this.coordsInWidget(e,n,!1)}coordsInWidget(e,n,r){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;if(r)return J5(this.dom.getBoundingClientRect(),this.length?e==0:n<=0);{let o=this.dom.getClientRects(),a=null;if(!o.length)return null;let s=this.flags&16?!0:this.flags&32?!1:e>0;for(let u=s?o.length-1:0;a=o[u],!(e>0?u==0:u==o.length-1||a.top<a.bottom);u+=s?-1:1);return J5(a,!s)}}get overrideDOMText(){if(!this.length)return Ti.empty;let{root:e}=this;if(!e)return Ti.empty;let n=this.posAtStart;return e.view.state.doc.slice(n,n+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,n,r,i,o){return o||(o=e.toDOM(n),e.editable||(o.contentEditable="false")),new qw(o,r,e,i)}}class tM extends ea{constructor(e){let n=document.createElement("img");n.className="cm-widgetBuffer",n.setAttribute("aria-hidden","true"),super(n,0,e)}get isHidden(){return!1}get overrideDOMText(){return Ti.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class TBe{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,n,r){let{tile:i,index:o,beforeBreak:a,parents:s}=this;for(;e||n>0;)if(i.isComposite())if(a){if(!e)break;r&&r.break(),e--,a=!1}else if(o==i.children.length){if(!e&&!s.length)break;r&&r.leave(i),a=!!i.breakAfter,{tile:i,index:o}=s.pop(),o++}else{let u=i.children[o],f=u.breakAfter;(n>0?u.length<=e:u.length<e)&&(!r||r.skip(u,0,u.length)!==!1||!u.isComposite)?(a=!!f,o++,e-=u.length):(s.push({tile:i,index:o}),i=u,o=0,r&&u.isComposite()&&r.enter(u))}else if(o==i.length)a=!!i.breakAfter,{tile:i,index:o}=s.pop(),o++;else if(e){let u=Math.min(e,i.length-o);r&&r.skip(i,o,o+u),e-=u,o+=u}else break;return this.tile=i,this.index=o,this.beforeBreak=a,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class kBe{constructor(e,n,r,i){this.from=e,this.to=n,this.wrapper=r,this.rank=i}}class EBe{constructor(e,n,r){this.cache=e,this.root=n,this.blockWrappers=r,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,n,r,i){var o;this.flushBuffer();let a=this.ensureMarks(n,r),s=a.lastChild;if(s&&s.isText()&&!(s.flags&8)){this.cache.reused.set(s,2);let u=a.children[a.children.length-1]=new Q_(s.dom,s.text+e);u.parent=a}else a.append(i||Q_.of(e,(o=this.cache.find(Q_))===null||o===void 0?void 0:o.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,n){let r=this.curLine;r.dom!=n.line.dom&&(r.setDOM(this.cache.reused.has(n.line)?zD(n.line.dom):n.line.dom),this.cache.reused.set(n.line,2));let i=r;for(let s=n.marks.length-1;s>=0;s--){let u=n.marks[s],f=i.lastChild;if(f instanceof Gc&&f.mark.eq(u.mark))f.dom!=u.dom&&f.setDOM(zD(u.dom)),i=f;else{if(this.cache.reused.get(u)){let _=ea.get(u.dom);_&&_.setDOM(zD(u.dom))}let g=Gc.of(u.mark,u.dom);i.append(g),i=g}this.cache.reused.set(u,2)}let o=ea.get(e.text);o&&this.cache.reused.set(o,2);let a=new Q_(e.text,e.text.nodeValue);a.flags|=8,i.append(a)}addInlineWidget(e,n,r){let i=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);i||this.flushBuffer();let o=this.ensureMarks(n,r);!i&&!(e.flags&16)&&o.append(this.getBuffer(1)),o.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,n,r){this.flushBuffer(),this.ensureMarks(n,r).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let n=this.afterWidget||this.lastBlock;n.length+=e,this.pos+=e}addLineStart(e,n){var r;e||(e=Oie);let i=Zw.start(e,n||((r=this.cache.find(Zw))===null||r===void 0?void 0:r.dom),!!n);this.getBlockPos().append(this.lastBlock=this.curLine=i)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,n){var r;let i=this.curLine;for(let o=e.length-1;o>=0;o--){let a=e[o],s;if(n>0&&(s=i.lastChild)&&s instanceof Gc&&s.mark.eq(a))i=s,n--;else{let u=Gc.of(a,(r=this.cache.find(Gc,f=>f.mark.eq(a)))===null||r===void 0?void 0:r.dom);i.append(u),i=u,n=0}}return i}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!WZ(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(Pn.ios&&WZ(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(ND,0,32)||new qw(ND.toDOM(),0,ND,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let n=new kBe(e.from,e.to,e.value,e.rank),r=this.wrappers.length;for(;r>0&&(this.wrappers[r-1].rank-n.rank||this.wrappers[r-1].to-n.to)<0;)r--;this.wrappers.splice(r,0,n)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let n=this.root;for(let r of this.wrappers){let i=n.lastChild;if(r.from<this.pos&&i instanceof M0&&i.wrapper.eq(r.wrapper))n=i;else{let o=M0.of(r.wrapper,(e=this.cache.find(M0,a=>a.wrapper.eq(r.wrapper)))===null||e===void 0?void 0:e.dom);n.append(o),n=o}}return n}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let n=2|(e<0?16:32),r=this.cache.find(tM,void 0,1);return r&&(r.flags=n),r||new tM(n)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class ABe{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:i,lineBreak:o,done:a}=this.cursor.next(this.skipCount);if(this.skipCount=0,a)throw new Error("Ran out of text content when drawing inline views");this.text=i;let s=this.textOff=Math.min(e,i.length);return o?null:i.slice(0,s)}let n=Math.min(this.text.length,this.textOff+e),r=this.text.slice(this.textOff,n);return this.textOff=n,r}}const nM=[qw,Zw,Q_,Gc,tM,M0,pI];for(let t=0;t<nM.length;t++)nM[t].bucket=t;class PBe{constructor(e){this.view=e,this.buckets=nM.map(()=>[]),this.index=nM.map(()=>0),this.reused=new Map}add(e){let n=e.constructor.bucket,r=this.buckets[n];r.length<6?r.push(e):r[this.index[n]=(this.index[n]+1)%6]=e}find(e,n,r=2){let i=e.bucket,o=this.buckets[i],a=this.index[i];for(let s=o.length-1;s>=0;s--){let u=(s+a)%o.length,f=o[u];if((!n||n(f))&&!this.reused.has(f))return o.splice(u,1),u<a&&this.index[i]--,this.reused.set(f,r),f}return null}findWidget(e,n,r){let i=this.buckets[0];if(i.length)for(let o=0,a=0;;o++){if(o==i.length){if(a)return null;a=1,o=0}let s=i[o];if(!this.reused.has(s)&&(a==0?s.widget.compare(e):s.widget.constructor==e.constructor&&e.updateDOM(s.dom,this.view)))return i.splice(o,1),o<this.index[0]&&this.index[0]--,this.reused.set(s,1),s.length=n,s.flags=s.flags&-498|r,s}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,n=2){if(!this.reused.has(e))return this.reused.set(e,n),e.dom}}class MBe{constructor(e,n,r,i,o){this.view=e,this.decorations=i,this.disallowBlockEffectsFor=o,this.openWidget=!1,this.openMarks=0,this.cache=new PBe(e),this.text=new ABe(e.state.doc),this.builder=new EBe(this.cache,new pI(e,e.contentDOM),qr.iter(r)),this.cache.reused.set(n,2),this.old=new TBe(n),this.reuseWalker={skip:(a,s,u)=>{if(this.cache.add(a),a.isComposite())return!1},enter:a=>this.cache.add(a),leave:()=>{},break:()=>{}}}run(e,n){let r=n&&this.getCompositionContext(n.text);for(let i=0,o=0,a=0;;){let s=a<e.length?e[a++]:null,u=s?s.fromA:this.old.root.length;if(u>i){let f=u-i;this.preserve(f,!a,!s),i=u,o+=f}if(!s)break;this.forward(s.fromA,s.toA),n&&s.fromA<=n.range.fromA&&s.toA>=n.range.toA?(this.emit(o,n.range.fromB),this.builder.addComposition(n,r),this.text.skip(n.range.toB-n.range.fromB),this.emit(n.range.toB,s.toB)):this.emit(o,s.toB),o=s.toB,i=s.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,n,r){let i=DBe(this.old),o=this.openMarks;this.old.advance(e,r?1:-1,{skip:(a,s,u)=>{if(a.isWidget())if(this.openWidget)this.builder.continueWidget(u-s);else{let f=u>0||s<a.length?qw.of(a.widget,this.view,u-s,a.flags&496,this.cache.maybeReuse(a)):this.cache.reuse(a);f.flags&256?(f.flags&=-2,this.builder.addBlockWidget(f)):(this.builder.ensureLine(null),this.builder.addInlineWidget(f,i,o),o=i.length)}else if(a.isText())this.builder.ensureLine(null),!s&&u==a.length?this.builder.addText(a.text,i,o,this.cache.reuse(a)):(this.cache.add(a),this.builder.addText(a.text.slice(s,u),i,o)),o=i.length;else if(a.isLine())a.flags&=-2,this.cache.reused.set(a,1),this.builder.addLine(a);else if(a instanceof tM)this.cache.add(a);else if(a instanceof Gc)this.builder.ensureLine(null),this.builder.addMark(a,i,o),this.cache.reused.set(a,1),o=i.length;else return!1;this.openWidget=!1},enter:a=>{a.isLine()?this.builder.addLineStart(a.attrs,this.cache.maybeReuse(a)):(this.cache.add(a),a instanceof Gc&&i.unshift(a.mark)),this.openWidget=!1},leave:a=>{a.isLine()?i.length&&(i.length=o=0):a instanceof Gc&&(i.shift(),o=Math.min(o,i.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,n){let r=null,i=this.builder,o=0,a=qr.spans(this.decorations,e,n,{point:(s,u,f,g,_,w)=>{if(f instanceof wb){if(this.disallowBlockEffectsFor[w]){if(f.block)throw new RangeError("Block decorations may not be specified via plugins");if(u>this.view.state.doc.lineAt(s).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(o=g.length,_>g.length)i.continueWidget(u-s);else{let S=f.widget||(f.block?Ww.block:Ww.inline),E=RBe(f),A=this.cache.findWidget(S,u-s,E)||qw.of(S,this.view,u-s,E);f.block?(f.startSide>0&&i.addLineStartIfNotCovered(r),i.addBlockWidget(A)):(i.ensureLine(r),i.addInlineWidget(A,g,_))}r=null}else r=IBe(r,f);u>s&&this.text.skip(u-s)},span:(s,u,f,g)=>{for(let _=s;_<u;){let w=this.text.next(Math.min(512,u-_));w==null?(i.addLineStartIfNotCovered(r),i.addBreak(),_++):(i.ensureLine(r),i.addText(w,f,g),_+=w.length),r=null}}});i.addLineStartIfNotCovered(r),this.openWidget=a>o,this.openMarks=a}forward(e,n){n-e<=10?this.old.advance(n-e,1,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(n-e-10,-1),this.old.advance(5,1,this.reuseWalker))}getCompositionContext(e){let n=[],r=null;for(let i=e.parentNode;;i=i.parentNode){let o=ea.get(i);if(i==this.view.contentDOM)break;o instanceof Gc?n.push(o):o?.isLine()?r=o:i.nodeName=="DIV"&&!r&&i!=this.view.contentDOM?r=new Zw(i,Oie):n.push(Gc.of(new xk({tagName:i.nodeName.toLowerCase(),attributes:oBe(i)}),i))}return{line:r,marks:n}}}function WZ(t,e){let n=r=>{for(let i of r.children)if((e?i.isText():i.length)||n(i))return!0;return!1};return n(t)}function RBe(t){let e=t.isReplace?(t.startSide<0?64:0)|(t.endSide>0?128:0):t.startSide>0?32:16;return t.block&&(e|=256),e}const Oie={class:"cm-line"};function IBe(t,e){let n=e.spec.attributes,r=e.spec.class;return!n&&!r||(t||(t={class:"cm-line"}),n&&FB(n,t),r&&(t.class+=" "+r)),t}function DBe(t){let e=[];for(let n=t.parents.length;n>1;n--){let r=n==t.parents.length?t.tile:t.parents[n].tile;r instanceof Gc&&e.push(r.mark)}return e}function zD(t){let e=ea.get(t);return e&&e.setDOM(t.cloneNode()),t}class Ww extends od{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ww.inline=new Ww("span");Ww.block=new Ww("div");const ND=new class extends od{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class HZ{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=zn.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new pI(e,e.contentDOM),this.updateInner([new jh(0,0,0,e.state.doc.length)],null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:g,toA:_})=>_<this.minWidthFrom||g>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!QBe(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let o=i>-1?$Be(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){let{from:g,to:_}=this.hasComposition;r=new jh(g,_,e.changes.mapPos(g,-1),e.changes.mapPos(_,1)).addToSet(r.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Pn.ie||Pn.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,s=this.blockWrappers;this.updateDeco();let u=BBe(a,this.decorations,e.changes);u.length&&(r=jh.extendWithRanges(r,u));let f=jBe(s,this.blockWrappers,e.changes);return f.length&&(r=jh.extendWithRanges(r,f)),o&&!r.some(g=>g.fromA<=o.range.fromA&&g.toA>=o.range.toA)&&(r=o.range.addToSet(r.slice())),this.tile.flags&2&&r.length==0?!1:(this.updateInner(r,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0;let{observer:r}=this.view;r.ignore(()=>{if(n||e.length){let a=this.tile,s=new MBe(this.view,a,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=s.run(e,n),Oz(a,s.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Pn.chrome||Pn.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(o),o&&(o.written||r.selectionRange.focusNode!=o.node||!this.tile.dom.contains(o.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.tile.children)o.isWidget()&&o.widget instanceof BD&&i.push(o.dom);r.updateGaps(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(yie)&&(this.editContextFormatting=r.value)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:r}=this.tile,i=this.view.root.activeElement,o=i==r,a=!o&&!(this.view.state.facet(Pg)||r.tabIndex>-1)&&EP(r,this.view.observer.selectionRange)&&!(i&&r.contains(i));if(!(o||n||a))return;let s=this.forceSelection;this.forceSelection=!1;let u=this.view.state.selection.main,f,g;if(u.empty?g=f=this.inlineDOMNearPos(u.anchor,u.assoc||1):(g=this.inlineDOMNearPos(u.head,u.head==u.from?1:-1),f=this.inlineDOMNearPos(u.anchor,u.anchor==u.from?1:-1)),Pn.gecko&&u.empty&&!this.hasComposition&&LBe(f)){let w=document.createTextNode("");this.view.observer.ignore(()=>f.node.insertBefore(w,f.node.childNodes[f.offset]||null)),f=g=new hf(w,0),s=!0}let _=this.view.observer.selectionRange;(s||!_.focusNode||(!gC(f.node,f.offset,_.anchorNode,_.anchorOffset)||!gC(g.node,g.offset,_.focusNode,_.focusOffset))&&!this.suppressWidgetCursorChange(_,u))&&(this.view.observer.ignore(()=>{Pn.android&&Pn.chrome&&r.contains(_.focusNode)&&VBe(_.focusNode,r)&&(r.blur(),r.focus({preventScroll:!0}));let w=dT(this.view.root);if(w)if(u.empty){if(Pn.gecko){let S=zBe(f.node,f.offset);if(S&&S!=3){let E=(S==1?tie:nie)(f.node,f.offset);E&&(f=new hf(E.node,E.offset))}}w.collapse(f.node,f.offset),u.bidiLevel!=null&&w.caretBidiLevel!==void 0&&(w.caretBidiLevel=u.bidiLevel)}else if(w.extend){w.collapse(f.node,f.offset);try{w.extend(g.node,g.offset)}catch{}}else{let S=document.createRange();u.anchor>u.head&&([f,g]=[g,f]),S.setEnd(g.node,g.offset),S.setStart(f.node,f.offset),w.removeAllRanges(),w.addRange(S)}a&&this.view.root.activeElement==r&&(r.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(f,g)),this.impreciseAnchor=f.precise?null:new hf(_.anchorNode,_.anchorOffset),this.impreciseHead=g.precise?null:new hf(_.focusNode,_.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&gC(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=dT(e.root),{anchorNode:i,anchorOffset:o}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let a=this.lineAt(n.head,n.assoc);if(!a)return;let s=a.posAtStart;if(n.head==s||n.head==s+a.length)return;let u=this.coordsAt(n.head,-1),f=this.coordsAt(n.head,1);if(!u||!f||u.bottom>f.top)return;let g=this.domAtPos(n.head+n.assoc,n.assoc);r.collapse(g.node,g.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let _=e.observer.selectionRange;e.docView.posFromDOM(_.anchorNode,_.anchorOffset)!=n.from&&r.collapse(i,o)}posFromDOM(e,n){let r=this.tile.nearest(e);if(!r)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let i=r.posAtStart;if(r.isComposite()){let o;if(e==r.dom)o=r.dom.childNodes[n];else{let a=ey(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==r.dom)break;a==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?a=-1:a=1),e=s}a<0?o=e:o=e.nextSibling}if(o==r.dom.firstChild)return i;for(;o&&!ea.get(o);)o=o.nextSibling;if(!o)return i+r.length;for(let a=0,s=i;;a++){let u=r.children[a];if(u.dom==o)return s;s+=u.length+u.breakAfter}}else return r.isText()?e==r.dom?i+n:i+(n?r.length:0):i}domAtPos(e,n){let{tile:r,offset:i}=this.tile.resolveBlock(e,n);return r.isWidget()?r.domPosFor(e,n):r.domIn(i,n)}inlineDOMNearPos(e,n){let r,i=-1,o=!1,a,s=-1,u=!1;return this.tile.blockTiles((f,g)=>{if(f.isWidget()){if(f.flags&32&&g>=e)return!0;f.flags&16&&(o=!0)}else{let _=g+f.length;if(g<=e&&(r=f,i=e-g,o=_<e),_>=e&&!a&&(a=f,s=e-g,u=g>e),g>e&&a)return!0}}),!r&&!a?this.domAtPos(e,n):(o&&a?r=null:u&&r&&(a=null),r&&n<0||!a?r.domIn(i,n):a.domIn(s,n))}coordsAt(e,n){let{tile:r,offset:i}=this.tile.resolveBlock(e,n);return r.isWidget()?r.widget instanceof BD?null:r.coordsInWidget(i,n,!0):r.coordsIn(i,n)}lineAt(e,n){let{tile:r}=this.tile.resolveBlock(e,n);return r.isLine()?r:null}coordsForChar(e){let{tile:n,offset:r}=this.tile.resolveBlock(e,1);if(!n.isLine())return null;function i(o,a){if(o.isComposite())for(let s of o.children){if(s.length>=a){let u=i(s,a);if(u)return u}if(a-=s.length,a<0)break}else if(o.isText()&&a<o.length){let s=fa(o.text,a);if(s==a)return null;let u=fT(o.dom,a,s).getClientRects();for(let f=0;f<u.length;f++){let g=u[f];if(f==u.length-1||g.top<g.bottom&&g.left<g.right)return g}}return null}return i(n,r)}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,o=this.view.contentDOM.clientWidth,a=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,u=this.view.textDirection==go.LTR,f=0,g=(_,w,S)=>{for(let E=0;E<_.children.length&&!(w>i);E++){let A=_.children[E],R=w+A.length,$=A.dom.getBoundingClientRect(),{height:z}=$;if(S&&!E&&(f+=$.top-S.top),A instanceof M0)R>r&&g(A,w,$);else if(w>=r&&(f>0&&n.push(-f),n.push(z+f),f=0,a)){let B=A.dom.lastChild,F=B?AP(B):[];if(F.length){let U=F[F.length-1],q=u?U.right-$.left:$.right-U.left;q>s&&(s=q,this.minWidth=o,this.minWidthFrom=w,this.minWidthTo=R)}}S&&E==_.children.length-1&&(f+=S.bottom-$.bottom),w=R+A.breakAfter}};return g(this.tile,0,null),n}textDirectionAt(e){let{tile:n}=this.tile.resolveBlock(e,1);return getComputedStyle(n.dom).direction=="rtl"?go.RTL:go.LTR}measureTextSize(){let e=this.tile.blockTiles(a=>{if(a.isLine()&&a.children.length&&a.length<=20){let s=0,u;for(let f of a.children){if(!f.isText()||/[^ -~]/.test(f.text))return;let g=AP(f.dom);if(g.length!=1)return;s+=g[0].width,u=g[0].height}if(s)return{lineHeight:a.dom.getBoundingClientRect().height,charWidth:s/a.length,textHeight:u}}});if(e)return e;let n=document.createElement("div"),r,i,o;return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(n);let a=AP(n.firstChild)[0];r=n.getBoundingClientRect().height,i=a&&a.width?a.width/27:7,o=a&&a.height?a.height:r,n.remove()}),{lineHeight:r,charWidth:i,textHeight:o}}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let o=i==n.viewports.length?null:n.viewports[i],a=o?o.from-1:this.view.state.doc.length;if(a>r){let s=(n.lineBlockAt(a).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(zn.replace({widget:new BD(s),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!o)break;r=o.to+1}return zn.set(e)}updateDeco(){let e=1,n=this.view.state.facet(pT).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),r=!1,i=this.view.state.facet(bie).map((o,a)=>{let s=typeof o=="function";return s&&(r=!0),s?o(this.view):o});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(qr.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(_ie).map(o=>typeof o=="function"?o(this.view):o)}scrollIntoView(e){if(e.isSnapshot){let f=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=f.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let f of this.view.state.facet(gie))try{if(f(this.view,e.range,e))return!0}catch(g){Kc(this.view.state,g,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let o=qB(this.view),a={left:r.left-o.left,top:r.top-o.top,right:r.right+o.right,bottom:r.bottom+o.bottom},{offsetWidth:s,offsetHeight:u}=this.view.scrollDOM;lBe(this.view.scrollDOM,a,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,u),-u),this.view.textDirection==go.LTR)}lineHasWidget(e){let n=r=>r.isWidget()||r.children.some(n);return n(this.tile.resolveBlock(e,1).tile)}destroy(){Oz(this.tile)}}function Oz(t,e){let n=e?.get(t);if(n!=1){n==null&&t.destroy();for(let r of t.children)Oz(r,e)}}function LBe(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function Sie(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=tie(n.focusNode,n.focusOffset),i=nie(n.focusNode,n.focusOffset),o=r||i;if(i&&r&&i.node!=r.node){let s=ea.get(i.node);if(!s||s.isText()&&s.text!=i.node.nodeValue)o=i;else if(t.docView.lastCompositionAfterCursor){let u=ea.get(r.node);!u||u.isText()&&u.text!=r.node.nodeValue||(o=i)}}if(t.docView.lastCompositionAfterCursor=o!=r,!o)return null;let a=e-o.offset;return{from:a,to:a+o.node.nodeValue.length,node:o.node}}function $Be(t,e,n){let r=Sie(t,n);if(!r)return null;let{node:i,from:o,to:a}=r,s=i.nodeValue;if(/[\n\r]/.test(s)||t.state.doc.sliceString(r.from,r.to)!=s)return null;let u=e.invertedDesc;return{range:new jh(u.mapPos(o),u.mapPos(a),o,a),text:i}}function zBe(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let NBe=class{constructor(){this.changes=[]}compareRange(e,n){cw(e,n,this.changes)}comparePoint(e,n){cw(e,n,this.changes)}boundChange(e){cw(e,e,this.changes)}};function BBe(t,e,n){let r=new NBe;return qr.compare(t,e,n,r),r.changes}class FBe{constructor(){this.changes=[]}compareRange(e,n){cw(e,n,this.changes)}comparePoint(){}boundChange(e){cw(e,e,this.changes)}}function jBe(t,e,n){let r=new FBe;return qr.compare(t,e,n,r),r.changes}function VBe(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function QBe(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}class BD extends od{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function UBe(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),o=e-i.from;if(i.length==0)return Ft.cursor(e);o==0?n=1:o==i.length&&(n=-1);let a=o,s=o;n<0?a=fa(i.text,o,!1):s=fa(i.text,o);let u=r(i.text.slice(a,s));for(;a>0;){let f=fa(i.text,a,!1);if(r(i.text.slice(f,a))!=u)break;a=f}for(;s<i.length;){let f=fa(i.text,s);if(r(i.text.slice(s,f))!=u)break;s=f}return Ft.range(a+i.from,s+i.from)}function ZBe(t,e,n,r,i){let o=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let s=t.viewState.heightOracle.textHeight,u=Math.floor((i-n.top-(t.defaultLineHeight-s)*.5)/s);o+=u*t.viewState.heightOracle.lineLength}let a=t.state.sliceDoc(n.from,n.to);return n.from+hz(a,o,t.state.tabSize)}function Sz(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let o of r.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!i||o.type==ol.Text&&(i.type!=o.type||(n<0?o.from<e:o.to>e)))&&(i=o)}}return i||r}return r}function qBe(t,e,n,r){let i=Sz(t,e.head,e.assoc||-1),o=!r||i.type!=ol.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let a=t.dom.getBoundingClientRect(),s=t.textDirectionAt(i.from),u=t.posAtCoords({x:n==(s==go.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(u!=null)return Ft.cursor(u,n?-1:1)}return Ft.cursor(n?i.to:i.from,n?-1:1)}function GZ(t,e,n,r){let i=t.state.doc.lineAt(e.head),o=t.bidiSpans(i),a=t.textDirectionAt(i.from);for(let s=e,u=null;;){let f=bBe(i,o,a,s,n),g=aie;if(!f){if(i.number==(n?t.state.doc.lines:1))return s;g=`
`,i=t.state.doc.line(i.number+(n?1:-1)),o=t.bidiSpans(i),f=t.visualLineSide(i,!n)}if(u){if(!u(g))return s}else{if(!r)return f;u=r(g)}s=f}}function WBe(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return o=>{let a=r(o);return i==Uo.Space&&(i=a),i==a}}function HBe(t,e,n,r){let i=e.head,o=n?1:-1;if(i==(n?t.state.doc.length:0))return Ft.cursor(i,e.assoc);let a=e.goalColumn,s,u=t.contentDOM.getBoundingClientRect(),f=t.coordsAtPos(i,e.assoc||-1),g=t.documentTop;if(f)a==null&&(a=f.left-u.left),s=o<0?f.top:f.bottom;else{let S=t.viewState.lineBlockAt(i);a==null&&(a=Math.min(u.right-u.left,t.defaultCharacterWidth*(i-S.from))),s=(o<0?S.top:S.bottom)+g}let _=u.left+a,w=r??t.viewState.heightOracle.textHeight>>1;for(let S=0;;S+=10){let E=s+(w+S)*o,A=Cz(t,{x:_,y:E},!1,o);return Ft.cursor(A.pos,A.assoc,void 0,a)}}function yC(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(o,a,s)=>{if(e>o&&e<a){let u=r||n||(e-o<a-e?-1:1);e=u<0?o:a,r=u}});if(!r)return e}}function Cie(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],o=null;if(i.empty){let a=yC(t,i.from,0);a!=i.from&&(o=Ft.cursor(a,-1))}else{let a=yC(t,i.from,-1),s=yC(t,i.to,1);(a!=i.from||s!=i.to)&&(o=Ft.range(i.from==i.anchor?a:s,i.from==i.head?a:s))}o&&(n||(n=e.ranges.slice()),n[r]=o)}return n?Ft.create(n,e.mainIndex):e}function FD(t,e,n){let r=yC(t.state.facet(Ok).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:Ft.cursor(r,r<n.from?1:-1)}class Bp{constructor(e,n){this.pos=e,this.assoc=n}}function Cz(t,e,n,r){let i=t.contentDOM.getBoundingClientRect(),o=i.top+t.viewState.paddingTop,{x:a,y:s}=e,u=s-o,f;for(;;){if(u<0)return new Bp(0,1);if(u>t.viewState.docHeight)return new Bp(t.state.doc.length,-1);if(f=t.elementAtHeight(u),r==null)break;if(f.type==ol.Text){let w=t.docView.coordsAt(r<0?f.from:f.to,r);if(w&&(r<0?w.top<=u+o:w.bottom>=u+o))break}let _=t.viewState.heightOracle.textHeight/2;u=r>0?f.bottom+_:f.top-_}if(t.viewport.from>=f.to||t.viewport.to<=f.from){if(n)return null;if(f.type==ol.Text){let _=ZBe(t,i,f,a,s);return new Bp(_,_==f.from?1:-1)}}if(f.type!=ol.Text)return u<(f.top+f.bottom)/2?new Bp(f.from,1):new Bp(f.to,-1);let g=t.docView.lineAt(f.from,2);return(!g||g.length!=f.length)&&(g=t.docView.lineAt(f.from,-2)),Tie(t,g,f.from,a,s)}function Tie(t,e,n,r,i){let o=-1,a=null,s=1e9,u=1e9,f=i,g=i,_=(w,S)=>{for(let E=0;E<w.length;E++){let A=w[E];if(A.top==A.bottom)continue;let R=A.left>r?A.left-r:A.right<r?r-A.right:0,$=A.top>i?A.top-i:A.bottom<i?i-A.bottom:0;A.top<=g&&A.bottom>=f&&(f=Math.min(A.top,f),g=Math.max(A.bottom,g),$=0),(o<0||($-u||R-s)<0)&&(o>=0&&u&&s<R&&a.top<=g-2&&a.bottom>=f+2?u=0:(o=S,s=R,u=$,a=A))}};if(e.isText()){for(let S=0;S<e.length;){let E=fa(e.text,S);if(_(fT(e.dom,S,E).getClientRects(),S),!s&&!u)break;S=E}return r>(a.left+a.right)/2==(XZ(t,o+n)==go.LTR)?new Bp(n+fa(e.text,o),-1):new Bp(n+o,1)}else{if(!e.length)return new Bp(n,1);for(let A=0;A<e.children.length;A++){let R=e.children[A];if(R.flags&48)continue;let $=(R.dom.nodeType==1?R.dom:fT(R.dom,0,R.length)).getClientRects();if(_($,A),!s&&!u)break}let w=e.children[o],S=e.posBefore(w,n);return w.isComposite()||w.isText()?Tie(t,w,S,Math.max(a.left,Math.min(a.right,r)),i):r>(a.left+a.right)/2==(XZ(t,o+n)==go.LTR)?new Bp(S+w.length,-1):new Bp(S,1)}}function XZ(t,e){let n=t.state.doc.lineAt(e);return t.bidiSpans(n)[Dg.find(t.bidiSpans(n),e-n.from,-1,1)].dir}const j2="";class GBe{constructor(e,n){this.points=e,this.view=n,this.text="",this.lineSeparator=n.state.facet(Pr.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=j2}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let o=this.text.length;this.readNode(i);let a=ea.get(i),s=i.nextSibling;if(s==n){a?.breakAfter&&!s&&r!=this.view.contentDOM&&this.lineBreak();break}let u=ea.get(s);(a&&u?a.breakAfter:(a?a.breakAfter:K5(i))||K5(s)&&(i.nodeName!="BR"||a?.isWidget())&&this.text.length>o)&&!YBe(s,n)&&this.lineBreak(),i=s}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,a=1,s;if(this.lineSeparator?(o=n.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(s=i.exec(n))&&(o=s.index,a=s[0].length),this.append(n.slice(r,o<0?n.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=a-1);r=o+a}}readNode(e){let n=ea.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(XBe(e,r.node,r.offset)?n:0))}}function XBe(t,e,n){for(;;){if(!e||n<ey(e))return!1;if(e==t)return!0;n=Z0(e)+1,e=e.parentNode}}function YBe(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let r=ea.get(t);if(!r?.isWidget())return!1;r&&(n||(n=[])).push(r)}if(n)for(let r of n){let i=r.overrideDOMText;if(i?.length)return!1}return!0}class YZ{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class KBe{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:o,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=kie(e.docView.tile,n,r,0))){let s=o||a?[]:e9e(e),u=new GBe(s,e);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=t9e(s,this.bounds.from)}else{let s=e.observer.selectionRange,u=o&&o.node==s.focusNode&&o.offset==s.focusOffset||!vz(e.contentDOM,s.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(s.focusNode,s.focusOffset),f=a&&a.node==s.anchorNode&&a.offset==s.anchorOffset||!vz(e.contentDOM,s.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(s.anchorNode,s.anchorOffset),g=e.viewport;if((Pn.ios||Pn.chrome)&&e.state.selection.main.empty&&u!=f&&(g.from>0||g.to<e.state.doc.length)){let _=Math.min(u,f),w=Math.max(u,f),S=g.from-_,E=g.to-w;(S==0||S==1||_==0)&&(E==0||E==-1||w==e.state.doc.length)&&(u=0,f=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(Ft.range(f,u)):this.newSel=Ft.single(f,u)}}}function kie(t,e,n,r){if(t.isComposite()){let i=-1,o=-1,a=-1,s=-1;for(let u=0,f=r,g=r;u<t.children.length;u++){let _=t.children[u],w=f+_.length;if(f<e&&w>n)return kie(_,e,n,f);if(w>=e&&i==-1&&(i=u,o=f),f>n&&_.dom.parentNode==t.dom){a=u,s=g;break}g=w,f=w+_.breakAfter}return{from:o,to:s<0?r+t.length:s,startDOM:(i?t.children[i-1].dom.nextSibling:null)||t.dom.firstChild,endDOM:a<t.children.length&&a>=0?t.children[a].dom:null}}else return t.isText()?{from:r,to:r+t.length,startDOM:t.dom,endDOM:t.dom.nextSibling}:null}function Eie(t,e){let n,{newSel:r}=e,i=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:s}=e.bounds,u=i.from,f=null;(o===8||Pn.android&&e.text.length<s-a)&&(u=i.to,f="end");let g=Aie(t.state.doc.sliceString(a,s,j2),e.text,u-a,f);g&&(Pn.chrome&&o==13&&g.toB==g.from+2&&e.text.slice(g.from,g.toB)==j2+j2&&g.toB--,n={from:a+g.from,to:a+g.toA,insert:Ti.of(e.text.slice(g.from,g.toB).split(j2))})}else r&&(!t.hasFocus&&t.state.facet(Pg)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(Pn.mac||Pn.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=Ft.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Ti.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:t.state.doc.lineAt(i.from).to<i.to&&t.docView.lineHasWidget(i.to)&&t.inputState.insertingTextAt>Date.now()-50?n={from:i.from,to:i.to,insert:t.state.toText(t.inputState.insertingText)}:Pn.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=Ft.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Ti.of([" "])}),n)return WB(t,n,r,o);if(r&&!r.main.eq(i)){let a=!1,s="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(a=!0),s=t.inputState.lastSelectionOrigin,s=="select.pointer"&&(r=Cie(t.state.facet(Ok).map(u=>u(t)),r))),t.dispatch({selection:r,scrollIntoView:a,userEvent:s}),!0}else return!1}function WB(t,e,n,r=-1){if(Pn.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(Pn.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&uw(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&uw(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&uw(t.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a,s=()=>a||(a=JBe(t,e,n));return t.state.facet(die).some(u=>u(t,e.from,e.to,o,s))||t.dispatch(s()),!0}function JBe(t,e,n){let r,i=t.state,o=i.selection.main,a=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let u=e.from<o.from?-1:1,f=u<0?o.from:o.to,g=yC(i.facet(Ok).map(_=>_(t)),f,u);e.from==g&&(a=g)}if(a>-1)r={changes:e,selection:Ft.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let u=o.from<e.from?i.sliceDoc(o.from,e.from):"",f=o.to>e.to?i.sliceDoc(e.to,o.to):"";r=i.replaceSelection(t.state.toText(u+e.insert.sliceString(0,void 0,t.state.lineBreak)+f))}else{let u=i.changes(e),f=n&&n.main.to<=u.newLength?n.main:void 0;if(i.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=o.to+10&&e.to>=o.to-10){let g=t.state.sliceDoc(e.from,e.to),_,w=n&&Sie(t,n.main.head);if(w){let E=e.insert.length-(e.to-e.from);_={from:w.from,to:w.to-E}}else _=t.state.doc.lineAt(o.head);let S=o.to-e.to;r=i.changeByRange(E=>{if(E.from==o.from&&E.to==o.to)return{changes:u,range:f||E.map(u)};let A=E.to-S,R=A-g.length;if(t.state.sliceDoc(R,A)!=g||A>=_.from&&R<=_.to)return{range:E};let $=i.changes({from:R,to:A,insert:e.insert}),z=E.to-o.to;return{changes:$,range:f?Ft.range(Math.max(0,f.anchor+z),Math.max(0,f.head+z)):E.map($)}})}else r={changes:u,selection:f&&i.selection.replaceRange(f)}}let s="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,s+=".compose",t.inputState.compositionFirstChange&&(s+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:s,scrollIntoView:!0})}function Aie(t,e,n,r){let i=Math.min(t.length,e.length),o=0;for(;o<i&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&t.length==e.length)return null;let a=t.length,s=e.length;for(;a>0&&s>0&&t.charCodeAt(a-1)==e.charCodeAt(s-1);)a--,s--;if(r=="end"){let u=Math.max(0,o-Math.min(a,s));n-=a+u-o}if(a<o&&t.length<e.length){let u=n<=o&&n>=a?o-n:0;o-=u,s=o+(s-a),a=o}else if(s<o){let u=n<=o&&n>=s?o-n:0;o-=u,a=o+(a-s),s=o}return{from:o,toA:a,toB:s}}function e9e(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new YZ(n,r)),(i!=n||o!=r)&&e.push(new YZ(i,o))),e}function t9e(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?Ft.single(n+e,r+e):null}class n9e{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Pn.safari&&e.contentDOM.addEventListener("input",()=>null),Pn.gecko&&y9e(e.contentDOM.ownerDocument)}handleEvent(e){!u9e(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=r9e(e),r=this.handlers,i=this.view.contentDOM;for(let o in n)if(o!="scroll"){let a=!n[o].handlers.length,s=r[o];s&&a!=!s.handlers.length&&(i.removeEventListener(o,this.handleEvent),s=null),s||i.addEventListener(o,this.handleEvent,{passive:a})}for(let o in r)o!="scroll"&&!n[o]&&i.removeEventListener(o,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Mie.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Pn.android&&Pn.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Pn.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=Pie.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||i9e.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,uw(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Pn.safari&&!Pn.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function KZ(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Kc(n.state,i)}}}function r9e(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,o=i&&i.plugin.domEventHandlers,a=i&&i.plugin.domEventObservers;if(o)for(let s in o){let u=o[s];u&&n(s).handlers.push(KZ(r.value,u))}if(a)for(let s in a){let u=a[s];u&&n(s).observers.push(KZ(r.value,u))}}for(let r in Cf)n(r).handlers.push(Cf[r]);for(let r in td)n(r).observers.push(td[r]);return e}const Pie=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],i9e="dthko",Mie=[16,17,18,20,91,92,224,225],wA=6;function OA(t){return Math.max(0,t)*.7+8}function o9e(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class s9e{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=cBe(e.contentDOM),this.atoms=e.state.facet(Ok).map(a=>a(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Pr.allowMultipleSelections)&&a9e(e,n),this.dragging=c9e(e,n)&&Die(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&o9e(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,o=0,a=this.view.win.innerWidth,s=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:s}=this.scrollParents.y.getBoundingClientRect());let u=qB(this.view);e.clientX-u.left<=i+wA?n=-OA(i-e.clientX):e.clientX+u.right>=a-wA&&(n=OA(e.clientX-a)),e.clientY-u.top<=o+wA?r=-OA(o-e.clientY):e.clientY+u.bottom>=s-wA&&(r=OA(e.clientY-s)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=Cie(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function a9e(t,e){let n=t.state.facet(lie);return n.length?n[0](e):Pn.mac?e.metaKey:e.ctrlKey}function l9e(t,e){let n=t.state.facet(cie);return n.length?n[0](e):Pn.mac?!e.altKey:!e.ctrlKey}function c9e(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=dT(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let a=i[o];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function u9e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=ea.get(n))&&r.isWidget()&&!r.isHidden&&r.widget.ignoreEvent(e))return!1;return!0}const Cf=Object.create(null),td=Object.create(null),Rie=Pn.ie&&Pn.ie_version<15||Pn.ios&&Pn.webkit_version<604;function h9e(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Iie(t,n.value)},50)}function mI(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function Iie(t,e){e=mI(t.state,QB,e);let{state:n}=t,r,i=1,o=n.toText(e),a=o.lines==n.selection.ranges.length;if(Tz!=null&&n.selection.ranges.every(u=>u.empty)&&Tz==o.toString()){let u=-1;r=n.changeByRange(f=>{let g=n.doc.lineAt(f.from);if(g.from==u)return{range:f};u=g.from;let _=n.toText((a?o.line(i++).text:e)+n.lineBreak);return{changes:{from:g.from,insert:_},range:Ft.cursor(f.from+_.length)}})}else a?r=n.changeByRange(u=>{let f=o.line(i++);return{changes:{from:u.from,to:u.to,insert:f.text},range:Ft.cursor(u.from+f.length)}}):r=n.replaceSelection(o);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}td.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Cf.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);td.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};td.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Cf.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(uie))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=f9e(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new s9e(t,e,n,r)),r&&t.observer.ignore(()=>{Jre(t.contentDOM);let o=t.root.activeElement;o&&!o.contains(t.contentDOM)&&o.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function JZ(t,e,n,r){if(r==1)return Ft.cursor(e,n);if(r==2)return UBe(t.state,e,n);{let i=t.docView.lineAt(e,n),o=t.state.doc.lineAt(i?i.posAtEnd:e),a=i?i.posAtStart:o.from,s=i?i.posAtEnd:o.to;return s<t.state.doc.length&&s==o.to&&s++,Ft.range(a,s)}}const d9e=Pn.ie&&Pn.ie_version<=11;let eq=null,tq=0,nq=0;function Die(t){if(!d9e)return t.detail;let e=eq,n=nq;return eq=t,nq=Date.now(),tq=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(tq+1)%3:1}function f9e(t,e){let n=t.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),r=Die(e),i=t.state.selection;return{update(o){o.docChanged&&(n.pos=o.changes.mapPos(n.pos),i=i.map(o.changes))},get(o,a,s){let u=t.posAndSideAtCoords({x:o.clientX,y:o.clientY},!1),f,g=JZ(t,u.pos,u.assoc,r);if(n.pos!=u.pos&&!a){let _=JZ(t,n.pos,n.assoc,r),w=Math.min(_.from,g.from),S=Math.max(_.to,g.to);g=w<g.from?Ft.range(w,S):Ft.range(S,w)}return a?i.replaceRange(i.main.extend(g.from,g.to)):s&&r==1&&i.ranges.length>1&&(f=p9e(i,u.pos))?f:s?i.addRange(g):Ft.create([g])}}}function p9e(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return Ft.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Cf.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.tile.nearest(e.target);if(i&&i.isWidget()){let o=i.posAtStart,a=o+i.length;(o>=n.to||a<=n.from)&&(n=Ft.range(o,a))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",mI(t.state,UB,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Cf.dragend=t=>(t.inputState.draggedContent=null,!1);function rq(t,e,n,r){if(n=mI(t.state,QB,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,a=r&&o&&l9e(t,e)?{from:o.from,to:o.to}:null,s={from:i,insert:n},u=t.state.changes(a?[a,s]:s);t.focus(),t.dispatch({changes:u,selection:{anchor:u.mapPos(i,-1),head:u.mapPos(i,1)},userEvent:a?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Cf.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,o=()=>{++i==n.length&&rq(t,e,r.filter(a=>a!=null).join(t.state.lineBreak),!1)};for(let a=0;a<n.length;a++){let s=new FileReader;s.onerror=o,s.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(s.result)||(r[a]=s.result),o()},s.readAsText(n[a])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return rq(t,e,r,!0),!0}return!1};Cf.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Rie?null:e.clipboardData;return n?(Iie(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(h9e(t),!1)};function m9e(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function g9e(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:o}of t.selection.ranges){let a=t.doc.lineAt(o);a.number>i&&(e.push(a.text),n.push({from:a.from,to:Math.min(t.doc.length,a.to+1)})),i=a.number}r=!0}return{text:mI(t,UB,e.join(t.lineBreak)),ranges:n,linewise:r}}let Tz=null;Cf.copy=Cf.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=g9e(t.state);if(!n&&!i)return!1;Tz=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=Rie?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(m9e(t,n),!1)};const Lie=cy.define();function $ie(t,e){let n=[];for(let r of t.facet(fie)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:Lie.of(!0)}):null}function zie(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=$ie(t.state,e);n?t.dispatch(n):t.update([])}},10)}td.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),zie(t)};td.blur=t=>{t.observer.clearSelectionRange(),zie(t)};td.compositionstart=td.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};td.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Pn.chrome&&Pn.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};td.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Cf.beforeinput=(t,e)=>{var n,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let o=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),a=e.getTargetRanges();if(o&&a.length){let s=a[0],u=t.posAtDOM(s.startContainer,s.startOffset),f=t.posAtDOM(s.endContainer,s.endOffset);return WB(t,{from:u,to:f,insert:t.state.toText(o)},null),!0}}let i;if(Pn.chrome&&Pn.android&&(i=Pie.find(o=>o.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let o=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Pn.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Pn.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>td.compositionend(t,e),20),!1};const iq=new Set;function y9e(t){iq.has(t)||(iq.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const oq=["pre-wrap","normal","pre-line","break-spaces"];let Hw=!1;function sq(){Hw=!1}class v9e{constructor(e){this.lineWrapping=e,this.doc=Ti.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return oq.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,o,a){let s=oq.indexOf(e)>-1,u=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=o,u){this.heightSamples={};for(let f=0;f<a.length;f++){let g=a[f];g<0?f++:this.heightSamples[Math.floor(g*10)]=!0}}return u}}class _9e{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class uf{constructor(e,n,r,i,o){this.from=e,this.length=n,this.top=r,this.height=i,this._content=o}get type(){return typeof this._content=="number"?ol.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof wb?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new uf(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var So=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(So||(So={}));const PP=.001;class lc{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>PP&&(Hw=!0),this.height=e)}replace(e,n,r){return lc.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let o=this,a=r.doc;for(let s=i.length-1;s>=0;s--){let{fromA:u,toA:f,fromB:g,toB:_}=i[s],w=o.lineAt(u,So.ByPosNoHeight,r.setDoc(n),0,0),S=w.to>=f?w:o.lineAt(f,So.ByPosNoHeight,r,0,0);for(_+=S.to-f,f=S.to;s>0&&w.from<=i[s-1].toA;)u=i[s-1].fromA,g=i[s-1].fromB,s--,u<w.from&&(w=o.lineAt(u,So.ByPosNoHeight,r,0,0));g+=w.from-u,u=w.from;let E=HB.build(r.setDoc(a),e,g,_);o=rM(o,o.replace(u,f,E))}return o.updateHeight(r,0)}static empty(){return new Du(0,0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,o=0;for(;;)if(n==r)if(i>o*2){let s=e[n-1];s.break?e.splice(--n,1,s.left,null,s.right):e.splice(--n,1,s.left,s.right),r+=1+s.break,i-=s.size}else if(o>i*2){let s=e[r];s.break?e.splice(r,1,s.left,null,s.right):e.splice(r,1,s.left,s.right),r+=2+s.break,o-=s.size}else break;else if(i<o){let s=e[n++];s&&(i+=s.size)}else{let s=e[--r];s&&(o+=s.size)}let a=0;return e[n-1]==null?(a=1,n--):e[n]==null&&(a=1,r++),new x9e(lc.of(e.slice(0,n)),a,lc.of(e.slice(r)))}}function rM(t,e){return t==e?t:(t.constructor!=e.constructor&&(Hw=!0),e)}lc.prototype.size=1;const b9e=zn.replace({});class Nie extends lc{constructor(e,n,r){super(e,n),this.deco=r,this.spaceAbove=0}mainBlock(e,n){return new uf(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,n,r,i){return this.spaceAbove&&e<r+this.spaceAbove?new uf(i,0,r,this.spaceAbove,b9e):this.mainBlock(r,i)}lineAt(e,n,r,i,o){let a=this.mainBlock(i,o);return this.spaceAbove?this.blockAt(0,r,i,o).join(a):a}forEachLine(e,n,r,i,o,a){e<=o+this.length&&n>=o&&a(this.lineAt(0,So.ByPos,r,i,o))}setMeasuredHeight(e){let n=e.heights[e.index++];n<0?(this.spaceAbove=-n,n=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(n)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setMeasuredHeight(i),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Du extends Nie{constructor(e,n,r){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=r}mainBlock(e,n){return new uf(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Du||i instanceof Ka&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Ka?i=new Du(i.length,this.height,this.spaceAbove):i.height=this.height,this.outdated||(i.outdated=!1),i):lc.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setMeasuredHeight(i):(r||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ka extends lc{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,o=i-r+1,a,s=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*o);a=u/o,this.length>o+1&&(s=(this.height-u)/(this.length-o-1))}else a=this.height/o;return{firstLine:r,lastLine:i,perLine:a,perChar:s}}blockAt(e,n,r,i){let{firstLine:o,lastLine:a,perLine:s,perChar:u}=this.heightMetrics(n,i);if(n.lineWrapping){let f=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),g=n.doc.lineAt(f),_=s+g.length*u,w=Math.max(r,e-_/2);return new uf(g.from,g.length,w,_,0)}else{let f=Math.max(0,Math.min(a-o,Math.floor((e-r)/s))),{from:g,length:_}=n.doc.line(o+f);return new uf(g,_,r+s*f,s,0)}}lineAt(e,n,r,i,o){if(n==So.ByHeight)return this.blockAt(e,r,i,o);if(n==So.ByPosNoHeight){let{from:S,to:E}=r.doc.lineAt(e);return new uf(S,E-S,0,0,0)}let{firstLine:a,perLine:s,perChar:u}=this.heightMetrics(r,o),f=r.doc.lineAt(e),g=s+f.length*u,_=f.number-a,w=i+s*_+u*(f.from-o-_);return new uf(f.from,f.length,Math.max(i,Math.min(w,i+this.height-g)),g,0)}forEachLine(e,n,r,i,o,a){e=Math.max(e,o),n=Math.min(n,o+this.length);let{firstLine:s,perLine:u,perChar:f}=this.heightMetrics(r,o);for(let g=e,_=i;g<=n;){let w=r.doc.lineAt(g);if(g==e){let E=w.number-s;_+=u*E+f*(e-o-E)}let S=u+f*w.length;a(new uf(w.from,w.length,_,S,0)),_+=S,g=w.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let o=r[r.length-1];o instanceof Ka?r[r.length-1]=new Ka(o.length+i):r.push(null,new Ka(i-1))}if(e>0){let o=r[0];o instanceof Ka?r[0]=new Ka(e+o.length):r.unshift(new Ka(e-1),null)}return lc.of(r)}decomposeLeft(e,n){n.push(new Ka(e-1),null)}decomposeRight(e,n){n.push(null,new Ka(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let o=n+this.length;if(i&&i.from<=n+this.length&&i.more){let a=[],s=Math.max(n,i.from),u=-1;for(i.from>n&&a.push(new Ka(i.from-n-1).updateHeight(e,n));s<=o&&i.more;){let g=e.doc.lineAt(s).length;a.length&&a.push(null);let _=i.heights[i.index++],w=0;_<0&&(w=-_,_=i.heights[i.index++]),u==-1?u=_:Math.abs(_-u)>=PP&&(u=-2);let S=new Du(g,_,w);S.outdated=!1,a.push(S),s+=g+1}s<=o&&a.push(null,new Ka(o-s).updateHeight(e,s));let f=lc.of(a);return(u<0||Math.abs(f.height-this.height)>=PP||Math.abs(u-this.heightMetrics(e,n).perLine)>=PP)&&(Hw=!0),rM(this,f)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class x9e extends lc{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let o=r+this.left.height;return e<o?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,o,i+this.left.length+this.break)}lineAt(e,n,r,i,o){let a=i+this.left.height,s=o+this.left.length+this.break,u=n==So.ByHeight?e<a:e<s,f=u?this.left.lineAt(e,n,r,i,o):this.right.lineAt(e,n,r,a,s);if(this.break||(u?f.to<s:f.from>s))return f;let g=n==So.ByPosNoHeight?So.ByPosNoHeight:So.ByPos;return u?f.join(this.right.lineAt(s,g,r,a,s)):this.left.lineAt(s,g,r,i,o).join(f)}forEachLine(e,n,r,i,o,a){let s=i+this.left.height,u=o+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,n,r,i,o,a),n>=u&&this.right.forEachLine(e,n,r,s,u,a);else{let f=this.lineAt(u,So.ByPos,r,i,o);e<f.from&&this.left.forEachLine(e,f.from-1,r,i,o,a),f.to>=e&&f.from<=n&&a(f),n>f.to&&this.right.forEachLine(f.to+1,n,r,s,u,a)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let o=[];e>0&&this.decomposeLeft(e,o);let a=o.length;for(let s of r)o.push(s);if(e>0&&aq(o,a-1),n<this.length){let s=o.length;this.decomposeRight(n,o),aq(o,s)}return lc.of(o)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?lc.of(this.break?[e,null,n]:[e,n]):(this.left=rM(this.left,e),this.right=rM(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:o,right:a}=this,s=n+o.length+this.break,u=null;return i&&i.from<=n+o.length&&i.more?u=o=o.updateHeight(e,n,r,i):o.updateHeight(e,n,r),i&&i.from<=s+a.length&&i.more?u=a=a.updateHeight(e,s,r,i):a.updateHeight(e,s,r),u?this.balanced(o,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function aq(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof Ka&&(r=t[e+1])instanceof Ka&&t.splice(e-1,3,new Ka(n.length+1+r.length))}const w9e=5;class HB{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Du?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Du(r-this.pos,-1,0)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,o=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let a=n-e;r.block?this.addBlock(new Nie(a,i,r)):(a||o||i>=w9e)&&this.addLineDeco(i,o,a)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Du(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,n){let r=new Ka(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Du)return e;let n=new Du(0,-1,0);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Du)&&!this.isCovered?this.nodes.push(new Du(0,-1,0)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Du&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let o=new HB(r,e);return qr.spans(n,r,i,o,0),o.finish(r)}}function O9e(t,e,n){let r=new S9e;return qr.compare(t,e,n,r,0),r.changes}class S9e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&cw(e,n,this.changes,5)}}function C9e(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),a=Math.min(i.innerWidth,n.right),s=Math.max(0,n.top),u=Math.min(i.innerHeight,n.bottom);for(let f=t.parentNode;f&&f!=r.body;)if(f.nodeType==1){let g=f,_=window.getComputedStyle(g);if((g.scrollHeight>g.clientHeight||g.scrollWidth>g.clientWidth)&&_.overflow!="visible"){let w=g.getBoundingClientRect();o=Math.max(o,w.left),a=Math.min(a,w.right),s=Math.max(s,w.top),u=Math.min(f==t.parentNode?i.innerHeight:u,w.bottom)}f=_.position=="absolute"||_.position=="fixed"?g.offsetParent:g.parentNode}else if(f.nodeType==11)f=f.host;else break;return{left:o-n.left,right:Math.max(o,a)-n.left,top:s-(n.top+e),bottom:Math.max(s,u)-(n.top+e)}}function T9e(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function k9e(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class jD{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e,n){return zn.replace({widget:new E9e(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class E9e extends od{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class lq{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=cq,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=go.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(ZB).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new v9e(n),this.stateDeco=e.facet(pT).filter(r=>typeof r!="function"),this.heightMap=lc.empty().applyChanges(this.stateDeco,Ti.empty,this.heightOracle.setDoc(e.doc),[new jh(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=zn.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:o,to:a})=>i>=o&&i<=a)){let{from:o,to:a}=this.lineBlockAt(i);e.push(new SA(o,a))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?cq:new GB(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(V2(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(pT).filter(g=>typeof g!="function");let i=e.changedRanges,o=jh.extendWithRanges(i,O9e(r,this.stateDeco,e?e.changes:Qs.empty(this.state.doc.length))),a=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);sq(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=a||Hw)&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let u=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<u.from||n.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,n));let f=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(f||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(mie)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?go.RTL:go.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),s=n.getBoundingClientRect(),u=a||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let f=0,g=0;if(s.width&&s.height){let{scaleX:F,scaleY:U}=Kre(n,s);(F>.005&&Math.abs(this.scaleX-F)>.005||U>.005&&Math.abs(this.scaleY-U)>.005)&&(this.scaleX=F,this.scaleY=U,f|=16,a=u=!0)}let _=(parseInt(r.paddingTop)||0)*this.scaleY,w=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=_||this.paddingBottom!=w)&&(this.paddingTop=_,this.paddingBottom=w,f|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,f|=16);let S=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=S&&(this.scrollAnchorHeight=-1,this.scrollTop=S),this.scrolledToBottom=eie(e.scrollDOM);let E=(this.printing?k9e:C9e)(n,this.paddingTop),A=E.top-this.pixelViewport.top,R=E.bottom-this.pixelViewport.bottom;this.pixelViewport=E;let $=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if($!=this.inView&&(this.inView=$,$&&(u=!0)),!this.inView&&!this.scrollTarget&&!T9e(e.dom))return 0;let z=s.width;if((this.contentDOMWidth!=z||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,f|=16),u){let F=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(F)&&(a=!0),a||i.lineWrapping&&Math.abs(z-this.contentDOMWidth)>i.charWidth){let{lineHeight:U,charWidth:q,textHeight:H}=e.docView.measureTextSize();a=U>0&&i.refresh(o,U,q,H,Math.max(5,z/q),F),a&&(e.docView.minWidth=0,f|=16)}A>0&&R>0?g=Math.max(A,R):A<0&&R<0&&(g=Math.min(A,R)),sq();for(let U of this.viewports){let q=U.from==this.viewport.from?F:e.docView.measureVisibleLineHeights(U);this.heightMap=(a?lc.empty().applyChanges(this.stateDeco,Ti.empty,this.heightOracle,[new jh(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,a,new _9e(U.from,q))}Hw&&(f|=2)}let B=!this.viewportIsAppropriate(this.viewport,g)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return B&&(f&2&&(f|=this.updateScaler()),this.viewport=this.getViewport(g,this.scrollTarget),f|=this.updateForViewport()),(f&2||B)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),f|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),f}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.heightOracle,{visibleTop:a,visibleBottom:s}=this,u=new SA(i.lineAt(a-r*1e3,So.ByHeight,o,0,0).from,i.lineAt(s+(1-r)*1e3,So.ByHeight,o,0,0).to);if(n){let{head:f}=n.range;if(f<u.from||f>u.to){let g=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),_=i.lineAt(f,So.ByPos,o,0,0),w;n.y=="center"?w=(_.top+_.bottom)/2-g/2:n.y=="start"||n.y=="nearest"&&f<u.from?w=_.top:w=_.bottom-g,u=new SA(i.lineAt(w-1e3/2,So.ByHeight,o,0,0).from,i.lineAt(w+g+1e3/2,So.ByHeight,o,0,0).to)}}return u}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new SA(this.heightMap.lineAt(r,So.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,So.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,So.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(n,So.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:s}=this;return(e==0||i<=a-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||o>=s+Math.max(10,Math.min(r,250)))&&i>a-2*1e3&&o<s+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new jD(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,o=i>>1,a=i<<1;if(this.defaultTextDirection!=go.LTR&&!r)return[];let s=[],u=(g,_,w,S)=>{if(_-g<o)return;let E=this.state.selection.main,A=[E.from];E.empty||A.push(E.to);for(let $ of A)if($>g&&$<_){u(g,$-10,w,S),u($+10,_,w,S);return}let R=P9e(e,$=>$.from>=w.from&&$.to<=w.to&&Math.abs($.from-g)<o&&Math.abs($.to-_)<o&&!A.some(z=>$.from<z&&$.to>z));if(!R){if(_<w.to&&n&&r&&n.visibleRanges.some(B=>B.from<=_&&B.to>=_)){let B=n.moveToLineBoundary(Ft.cursor(_),!1,!0).head;B>g&&(_=B)}let $=this.gapSize(w,g,_,S),z=r||$<2e6?$:2e6;R=new jD(g,_,$,z)}s.push(R)},f=g=>{if(g.length<a||g.type!=ol.Text)return;let _=A9e(g.from,g.to,this.stateDeco);if(_.total<a)return;let w=this.scrollTarget?this.scrollTarget.range.head:null,S,E;if(r){let A=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,R,$;if(w!=null){let z=TA(_,w),B=((this.visibleBottom-this.visibleTop)/2+A)/g.height;R=z-B,$=z+B}else R=(this.visibleTop-g.top-A)/g.height,$=(this.visibleBottom-g.top+A)/g.height;S=CA(_,R),E=CA(_,$)}else{let A=_.total*this.heightOracle.charWidth,R=i*this.heightOracle.charWidth,$=0;if(A>2e6)for(let q of e)q.from>=g.from&&q.from<g.to&&q.size!=q.displaySize&&q.from*this.heightOracle.charWidth+$<this.pixelViewport.left&&($=q.size-q.displaySize);let z=this.pixelViewport.left+$,B=this.pixelViewport.right+$,F,U;if(w!=null){let q=TA(_,w),H=((B-z)/2+R)/A;F=q-H,U=q+H}else F=(z-R)/A,U=(B+R)/A;S=CA(_,F),E=CA(_,U)}S>g.from&&u(g.from,S,g,_),E<g.to&&u(E,g.to,g,_)};for(let g of this.viewportLines)Array.isArray(g.type)?g.type.forEach(f):f(g);return s}gapSize(e,n,r,i){let o=TA(i,r)-TA(i,n);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){jD.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=zn.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];qr.spans(n,this.viewport.from,this.viewport.to,{span(o,a){r.push({from:o,to:a})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let o=0;o<r.length&&!(i&8);o++){let a=this.visibleRanges[o],s=r[o];(a.from!=s.from||a.to!=s.to)&&(i|=4,e&&e.mapPos(a.from,-1)==s.from&&e.mapPos(a.to,1)==s.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||V2(this.heightMap.lineAt(e,So.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||V2(this.heightMap.lineAt(this.scaler.fromDOM(e),So.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return V2(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let SA=class{constructor(e,n){this.from=e,this.to=n}};function A9e(t,e,n){let r=[],i=t,o=0;return qr.spans(n,t,e,{span(){},point(a,s){a>i&&(r.push({from:i,to:a}),o+=a-i),i=s}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function CA({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:o,to:a}=e[i],s=a-o;if(r<=s)return o+r;r-=s}}function TA(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function P9e(t,e){for(let n of t)if(e(n))return n}const cq={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class GB{constructor(e,n,r){let i=0,o=0,a=0;this.viewports=r.map(({from:s,to:u})=>{let f=n.lineAt(s,So.ByPos,e,0,0).top,g=n.lineAt(u,So.ByPos,e,0,0).bottom;return i+=g-f,{from:s,to:u,top:f,bottom:g,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let s of this.viewports)s.domTop=a+(s.top-o)*this.scale,a=s.domBottom=s.domTop+(s.bottom-s.top),o=s.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.top)return i+(e-r)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);r=o.bottom,i=o.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.domTop)return r+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);r=o.bottom,i=o.domBottom}}eq(e){return e instanceof GB?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function V2(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new uf(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>V2(i,e)):t._content)}const kA=En.define({combine:t=>t.join(" ")}),kz=En.define({combine:t=>t.indexOf(!0)>-1}),Ez=Jg.newName(),Bie=Jg.newName(),Fie=Jg.newName(),jie={"&light":"."+Bie,"&dark":"."+Fie};function Az(t,e,n){return new Jg(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const M9e=Az("."+Ez,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},jie),R9e={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},VD=Pn.ie&&Pn.ie_version<=11;class I9e{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new uBe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Pn.ie&&Pn.ie_version<=11||Pn.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Pn.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Pn.chrome&&Pn.chrome_version<126)&&(this.editContext=new L9e(e),e.state.facet(Pg)&&(e.contentDOM.editContext=this.editContext.editContext)),VD&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Pg)?r.root.activeElement!=this.dom:!EP(this.dom,i))return;let o=i.anchorNode&&r.docView.tile.nearest(i.anchorNode);if(o&&o.isWidget()&&o.widget.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Pn.ie&&Pn.ie_version<=11||Pn.android&&Pn.chrome)&&!r.state.selection.main.empty&&i.focusNode&&gC(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=dT(e.root);if(!n)return!1;let r=Pn.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&D9e(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=EP(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&dBe(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,R9e),VD&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),VD&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&uw(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let o of e){let a=this.readMutation(o);a&&(a.typeOver&&(i=!0),n==-1?{from:n,to:r}=a:(n=Math.min(a.from,n),r=Math.max(a.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&EP(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new KBe(this.view,e,n,r);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=Eie(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.tile.nearest(e.target);if(!n||n.isWidget())return null;if(n.markDirty(e.type=="attributes"),e.type=="childList"){let r=uq(n,e.previousSibling||e.target.previousSibling,-1),i=uq(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Pg)!=e.state.facet(Pg)&&(e.view.contentDOM.editContext=e.state.facet(Pg)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function uq(t,e,n){for(;e;){let r=ea.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function hq(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor,1);return gC(a.node,a.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function D9e(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return hq(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?hq(t,n):null}class L9e{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:o,head:a}=i,s=this.toEditorPos(r.updateRangeStart),u=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:s,drifted:!1});let f=u-s>r.text.length;s==this.from&&o<this.from?s=o:u==this.to&&o>this.to&&(u=o);let g=Aie(e.state.sliceDoc(s,u),r.text,(f?i.from:i.to)-s,f?"end":null);if(!g){let w=Ft.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));w.main.eq(i)||e.dispatch({selection:w,userEvent:"select"});return}let _={from:g.from+s,to:g.toA+s,insert:Ti.of(r.text.slice(g.from,g.toB).split(`
`))};if((Pn.mac||Pn.android)&&_.from==a-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(_={from:s,to:u,insert:Ti.of([r.text.replace("."," ")])}),this.pendingContextChange=_,!e.state.readOnly){let w=this.to-this.from+(_.to-_.from+_.insert.length);WB(e,_,Ft.single(this.toEditorPos(r.selectionStart,w),this.toEditorPos(r.selectionEnd,w)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),_.from<_.to&&!_.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],o=null;for(let a=this.toEditorPos(r.rangeStart),s=this.toEditorPos(r.rangeEnd);a<s;a++){let u=e.coordsForChar(a);o=u&&new DOMRect(u.left,u.top,u.right-u.left,u.bottom-u.top)||o||new DOMRect,i.push(o)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let o of r.getTextFormats()){let a=o.underlineStyle,s=o.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(s)){let u=this.toEditorPos(o.rangeStart),f=this.toEditorPos(o.rangeEnd);if(u<f){let g=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(s)?1:2}px`;i.push(zn.mark({attributes:{style:g}}).range(u,f))}}}e.dispatch({effects:yie.of(zn.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=dT(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((o,a,s,u,f)=>{if(r)return;let g=f.length-(a-o);if(i&&a>=i.to)if(i.from==o&&i.to==a&&i.insert.eq(f)){i=this.pendingContextChange=null,n+=g,this.to+=g;return}else i=null,this.revertPending(e.state);if(o+=n,a+=n,a<=this.from)this.from+=g,this.to+=g;else if(o<this.to){if(o<this.from||a>this.to||this.to-this.from+f.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(a),f.toString()),this.to+=g}n+=g}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class un{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(o=>r(o,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||hBe(e.parent)||document,this.viewState=new lq(e.state||Pr.create(e)),e.scrollTo&&e.scrollTo.is(xA)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(q1).map(i=>new $D(i));for(let i of this.plugins)i.update(this);this.observer=new I9e(this),this.inputState=new n9e(this),this.inputState.ensureHandlers(this.plugins),this.docView=new HZ(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Xs?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,o=this.state;for(let w of e){if(w.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=w.state}if(this.destroyed){this.viewState.state=o;return}let a=this.hasFocus,s=0,u=null;e.some(w=>w.annotation(Lie))?(this.inputState.notifiedFocused=a,s=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,u=$ie(o,a),u||(s=1));let f=this.observer.delayedAndroidKey,g=null;if(f?(this.observer.clearDelayedAndroidKey(),g=this.observer.readChange(),(g&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(g=null)):this.observer.clear(),o.facet(Pr.phrases)!=this.state.facet(Pr.phrases))return this.setState(o);i=eM.create(this,o,e),i.flags|=s;let _=this.viewState.scrollTarget;try{this.updateState=2;for(let w of e){if(_&&(_=_.map(w.changes)),w.scrollIntoView){let{main:S}=w.state.selection;_=new hw(S.empty?S:Ft.cursor(S.head,S.head>S.anchor?-1:1))}for(let S of w.effects)S.is(xA)&&(_=S.value.clip(this.state))}this.viewState.update(i,_),this.bidiCache=iM.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(F2)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(w=>w.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(kA)!=i.state.facet(kA)&&(this.viewState.mustMeasureContent=!0),(n||r||_||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let w of this.state.facet(wz))try{w(i)}catch(S){Kc(this.state,S,"update listener")}(u||g)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),g&&!Eie(this,g)&&f.force&&uw(this.contentDOM,f.key,f.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new lq(e),this.plugins=e.facet(q1).map(r=>new $D(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new HZ(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(q1),r=e.state.facet(q1);if(n!=r){let i=[];for(let o of r){let a=n.indexOf(o);if(a<0)i.push(new $D(o));else{let s=this.plugins[a];s.mustUpdate=e,i.push(s)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Kc(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:a}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let s=0;;s++){if(a<0)if(eie(r))o=-1,a=this.viewState.heightMap.height;else{let S=this.viewState.scrollAnchorAt(i);o=S.from,a=S.top}this.updateState=1;let u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(s>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];u&4||([this.measureRequests,f]=[f,this.measureRequests]);let g=f.map(S=>{try{return S.read(this)}catch(E){return Kc(this.state,E),dq}}),_=eM.create(this,this.state,[]),w=!1;_.flags|=u,n?n.flags|=u:n=_,this.updateState=2,_.empty||(this.updatePlugins(_),this.inputState.update(_),this.updateAttrs(),w=this.docView.update(_),w&&this.docViewUpdate());for(let S=0;S<f.length;S++)if(g[S]!=dq)try{let E=f[S];E.write&&E.write(g[S],this)}catch(E){Kc(this.state,E)}if(w&&this.docView.updateSelection(!0),!_.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let E=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-a;if(E>1||E<-1){i=i+E,r.scrollTop=i/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let s of this.state.facet(wz))s(n)}get themeClasses(){return Ez+" "+(this.state.facet(kz)?Fie:Bie)+" "+this.state.facet(kA)}updateAttrs(){let e=fq(this,vie,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Pg)?"true":"false",class:"cm-content",style:`${Pn.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),fq(this,ZB,n);let r=this.observer.ignore(()=>{let i=VZ(this.contentDOM,this.contentAttrs,n),o=VZ(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(un.announce)){n&&(this.announceDOM.textContent=""),n=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(F2);let e=this.state.facet(un.cspNonce);Jg.mount(this.root,this.styleModules.concat(M9e).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return FD(this,e,GZ(this,e,n,r))}moveByGroup(e,n){return FD(this,e,GZ(this,e,n,r=>WBe(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),o=r[n?r.length-1:0];return Ft.cursor(o.side(n,i)+e.from,o.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return qBe(this,e,n,r)}moveVertically(e,n,r){return FD(this,e,HBe(this,e,n,r))}domAtPos(e,n=1){return this.docView.domAtPos(e,n)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){this.readMeasured();let r=Cz(this,e,n);return r&&r.pos}posAndSideAtCoords(e,n=!0){return this.readMeasured(),Cz(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),a=o[Dg.find(o,e-i.from,-1,n)];return J5(r,a.dir==go.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(pie)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>$9e)return sie(e.length);let n=this.textDirectionAt(e.from),r;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==n&&(o.fresh||oie(o.isolates,r=ZZ(this,e))))return o.order;r||(r=ZZ(this,e));let i=_Be(e.text,n,r);return this.bidiCache.push(new iM(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Pn.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Jre(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return xA.of(new hw(typeof e=="number"?Ft.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return xA.of(new hw(Ft.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return As.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return As.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=Jg.newName(),i=[kA.of(r),F2.of(Az(`.${r}`,e))];return n&&n.dark&&i.push(kz.of(!0)),i}static baseTheme(e){return Pf.lowest(F2.of(Az("."+Ez,e,jie)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&ea.get(r)||ea.get(e);return((n=i?.root)===null||n===void 0?void 0:n.view)||null}}un.styleModule=F2;un.inputHandler=die;un.clipboardInputFilter=QB;un.clipboardOutputFilter=UB;un.scrollHandler=gie;un.focusChangeEffect=fie;un.perLineTextDirection=pie;un.exceptionSink=hie;un.updateListener=wz;un.editable=Pg;un.mouseSelectionStyle=uie;un.dragMovesSelection=cie;un.clickAddsSelectionRange=lie;un.decorations=pT;un.blockWrappers=_ie;un.outerDecorations=bie;un.atomicRanges=Ok;un.bidiIsolatedRanges=xie;un.scrollMargins=wie;un.darkTheme=kz;un.cspNonce=En.define({combine:t=>t.length?t[0]:""});un.contentAttributes=ZB;un.editorAttributes=vie;un.lineWrapping=un.contentAttributes.of({class:"cm-lineWrapping"});un.announce=fr.define();const $9e=4096,dq={};class iM{constructor(e,n,r,i,o,a){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=o,this.order=a}static update(e,n){if(n.empty&&!e.some(o=>o.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:go.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let a=e[o];a.dir==i&&!n.touchesRange(a.from,a.to)&&r.push(new iM(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return r}}function fq(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let o=r[i],a=typeof o=="function"?o(t):o;a&&FB(a,n)}return n}const z9e=Pn.mac?"mac":Pn.windows?"win":Pn.linux?"linux":"key";function N9e(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,o,a,s;for(let u=0;u<n.length-1;++u){const f=n[u];if(/^(cmd|meta|m)$/i.test(f))s=!0;else if(/^a(lt)?$/i.test(f))i=!0;else if(/^(c|ctrl|control)$/i.test(f))o=!0;else if(/^s(hift)?$/i.test(f))a=!0;else if(/^mod$/i.test(f))e=="mac"?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+f)}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),s&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function EA(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const B9e=Pf.default(un.domEventHandlers({keydown(t,e){return Qie(Vie(e.state),t,e,"editor")}})),$O=En.define({enables:B9e}),pq=new WeakMap;function Vie(t){let e=t.facet($O),n=pq.get(e);return n||pq.set(e,n=V9e(e.reduce((r,i)=>r.concat(i),[]))),n}function F9e(t,e,n){return Qie(Vie(t.state),e,t,n)}let b0=null;const j9e=4e3;function V9e(t,e=z9e){let n=Object.create(null),r=Object.create(null),i=(a,s)=>{let u=r[a];if(u==null)r[a]=s;else if(u!=s)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},o=(a,s,u,f,g)=>{var _,w;let S=n[a]||(n[a]=Object.create(null)),E=s.split(/ (?!$)/).map($=>N9e($,e));for(let $=1;$<E.length;$++){let z=E.slice(0,$).join(" ");i(z,!0),S[z]||(S[z]={preventDefault:!0,stopPropagation:!1,run:[B=>{let F=b0={view:B,prefix:z,scope:a};return setTimeout(()=>{b0==F&&(b0=null)},j9e),!0}]})}let A=E.join(" ");i(A,!1);let R=S[A]||(S[A]={preventDefault:!1,stopPropagation:!1,run:((w=(_=S._any)===null||_===void 0?void 0:_.run)===null||w===void 0?void 0:w.slice())||[]});u&&R.run.push(u),f&&(R.preventDefault=!0),g&&(R.stopPropagation=!0)};for(let a of t){let s=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let f of s){let g=n[f]||(n[f]=Object.create(null));g._any||(g._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:_}=a;for(let w in g)g[w].run.push(S=>_(S,Pz))}let u=a[e]||a.key;if(u)for(let f of s)o(f,u,a.run,a.preventDefault,a.stopPropagation),a.shift&&o(f,"Shift-"+u,a.shift,a.preventDefault,a.stopPropagation)}return n}let Pz=null;function Qie(t,e,n,r){Pz=e;let i=nBe(e),o=Wc(i,0),a=Np(o)==i.length&&i!=" ",s="",u=!1,f=!1,g=!1;b0&&b0.view==n&&b0.scope==r&&(s=b0.prefix+" ",Mie.indexOf(e.keyCode)<0&&(f=!0,b0=null));let _=new Set,w=R=>{if(R){for(let $ of R.run)if(!_.has($)&&(_.add($),$(n)))return R.stopPropagation&&(g=!0),!0;R.preventDefault&&(R.stopPropagation&&(g=!0),f=!0)}return!1},S=t[r],E,A;return S&&(w(S[s+EA(i,e,!a)])?u=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Pn.windows&&e.ctrlKey&&e.altKey)&&!(Pn.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(E=U0[e.keyCode])&&E!=i?(w(S[s+EA(E,e,!0)])||e.shiftKey&&(A=uT[e.keyCode])!=i&&A!=E&&w(S[s+EA(A,e,!1)]))&&(u=!0):a&&e.shiftKey&&w(S[s+EA(i,e,!0)])&&(u=!0),!u&&w(S._any)&&(u=!0)),f&&(u=!0),u&&g&&e.stopPropagation(),Pz=null,u}class Sk{constructor(e,n,r,i,o){this.className=e,this.left=n,this.top=r,this.width=i,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let o=Uie(e);return[new Sk(n,i.left-o.left,i.top-o.top,null,i.bottom-i.top)]}else return Q9e(e,n,r)}}function Uie(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==go.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function mq(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let o=t.dom.getBoundingClientRect(),a=(i.top+i.bottom)/2,s=t.posAtCoords({x:o.left+1,y:a}),u=t.posAtCoords({x:o.right-1,y:a});return s==null||u==null?r:{from:Math.max(r.from,Math.min(s,u)),to:Math.min(r.to,Math.max(s,u))}}function Q9e(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),o=t.textDirection==go.LTR,a=t.contentDOM,s=a.getBoundingClientRect(),u=Uie(t),f=a.querySelector(".cm-line"),g=f&&window.getComputedStyle(f),_=s.left+(g?parseInt(g.paddingLeft)+Math.min(0,parseInt(g.textIndent)):0),w=s.right-(g?parseInt(g.paddingRight):0),S=Sz(t,r,1),E=Sz(t,i,-1),A=S.type==ol.Text?S:null,R=E.type==ol.Text?E:null;if(A&&(t.lineWrapping||S.widgetLineBreaks)&&(A=mq(t,r,1,A)),R&&(t.lineWrapping||E.widgetLineBreaks)&&(R=mq(t,i,-1,R)),A&&R&&A.from==R.from&&A.to==R.to)return z(B(n.from,n.to,A));{let U=A?B(n.from,null,A):F(S,!1),q=R?B(null,n.to,R):F(E,!0),H=[];return(A||S).to<(R||E).from-(A&&R?1:0)||S.widgetLineBreaks>1&&U.bottom+t.defaultLineHeight/2<q.top?H.push($(_,U.bottom,w,q.top)):U.bottom<q.top&&t.elementAtHeight((U.bottom+q.top)/2).type==ol.Text&&(U.bottom=q.top=(U.bottom+q.top)/2),z(U).concat(H).concat(z(q))}function $(U,q,H,ne){return new Sk(e,U-u.left,q-u.top,H-U,ne-q)}function z({top:U,bottom:q,horizontal:H}){let ne=[];for(let ie=0;ie<H.length;ie+=2)ne.push($(H[ie],U,H[ie+1],q));return ne}function B(U,q,H){let ne=1e9,ie=-1e9,ce=[];function xe(Te,ye,_e,ke,Ne){let Qe=t.coordsAtPos(Te,Te==H.to?-2:2),Se=t.coordsAtPos(_e,_e==H.from?2:-2);!Qe||!Se||(ne=Math.min(Qe.top,Se.top,ne),ie=Math.max(Qe.bottom,Se.bottom,ie),Ne==go.LTR?ce.push(o&&ye?_:Qe.left,o&&ke?w:Se.right):ce.push(!o&&ke?_:Se.left,!o&&ye?w:Qe.right))}let re=U??H.from,me=q??H.to;for(let Te of t.visibleRanges)if(Te.to>re&&Te.from<me)for(let ye=Math.max(Te.from,re),_e=Math.min(Te.to,me);;){let ke=t.state.doc.lineAt(ye);for(let Ne of t.bidiSpans(ke)){let Qe=Ne.from+ke.from,Se=Ne.to+ke.from;if(Qe>=_e)break;Se>ye&&xe(Math.max(Qe,ye),U==null&&Qe<=re,Math.min(Se,_e),q==null&&Se>=me,Ne.dir)}if(ye=ke.to+1,ye>=_e)break}return ce.length==0&&xe(re,U==null,me,q==null,t.textDirection),{top:ne,bottom:ie,horizontal:ce}}function F(U,q){let H=s.top+(q?U.top:U.bottom);return{top:H,bottom:H,horizontal:[]}}}function U9e(t,e){return t.constructor==e.constructor&&t.eq(e)}class Z9e{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(MP)!=e.state.facet(MP)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(MP);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!U9e(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e,Pn.safari&&Pn.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const MP=En.define();function Zie(t){return[As.define(e=>new Z9e(e,t)),MP.of(t)]}const mT=En.define({combine(t){return mm(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function q9e(t={}){return[mT.of(t),W9e,H9e,G9e,mie.of(!0)]}function qie(t){return t.startState.facet(mT)!=t.state.facet(mT)}const W9e=Zie({above:!0,markers(t){let{state:e}=t,n=e.facet(mT),r=[];for(let i of e.selection.ranges){let o=i==e.selection.main;if(i.empty||n.drawRangeCursor){let a=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",s=i.empty?i:Ft.cursor(i.head,i.head>i.anchor?-1:1);for(let u of Sk.forRange(t,a,s))r.push(u)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=qie(t);return n&&gq(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){gq(e.state,t)},class:"cm-cursorLayer"});function gq(t,e){e.style.animationDuration=t.facet(mT).cursorBlinkRate+"ms"}const H9e=Zie({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Sk.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||qie(t)},class:"cm-selectionLayer"}),G9e=Pf.highest(un.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Wie=fr.define({map(t,e){return t==null?null:e.mapPos(t)}}),Q2=Rs.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(Wie)?r.value:n,t)}}),X9e=As.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Q2);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Q2)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Q2),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Q2)!=t&&this.view.dispatch({effects:Wie.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Y9e(){return[Q2,X9e]}function yq(t,e,n,r,i){e.lastIndex=0;for(let o=t.iterRange(n,r),a=n,s;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;s=e.exec(o.value);)i(a+s.index,s)}function K9e(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}class J9e{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:o,maxLength:a=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(s,u,f,g)=>i(g,f,f+s[0].length,s,u);else if(typeof r=="function")this.addMatch=(s,u,f,g)=>{let _=r(s,u,f);_&&g(f,f+s[0].length,_)};else if(r)this.addMatch=(s,u,f,g)=>g(f,f+s[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=a}createDeco(e){let n=new ou,r=n.add.bind(n);for(let{from:i,to:o}of K9e(e,this.maxLength))yq(e.state.doc,this.regexp,i,o,(a,s)=>this.addMatch(s,e,a,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((o,a,s,u)=>{u>=e.view.viewport.from&&s<=e.view.viewport.to&&(r=Math.min(s,r),i=Math.max(u,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let o of e.visibleRanges){let a=Math.max(o.from,r),s=Math.min(o.to,i);if(s>=a){let u=e.state.doc.lineAt(a),f=u.to<s?e.state.doc.lineAt(s):u,g=Math.max(o.from,u.from),_=Math.min(o.to,f.to);if(this.boundary){for(;a>u.from;a--)if(this.boundary.test(u.text[a-1-u.from])){g=a;break}for(;s<f.to;s++)if(this.boundary.test(f.text[s-f.from])){_=s;break}}let w=[],S,E=(A,R,$)=>w.push($.range(A,R));if(u==f)for(this.regexp.lastIndex=g-u.from;(S=this.regexp.exec(u.text))&&S.index<_-u.from;)this.addMatch(S,e,S.index+u.from,E);else yq(e.state.doc,this.regexp,g,_,(A,R)=>this.addMatch(R,e,A,E));n=n.update({filterFrom:g,filterTo:_,filter:(A,R)=>A<g||R>_,add:w})}}return n}}const Mz=/x/.unicode!=null?"gu":"g",eFe=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Mz),tFe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let QD=null;function nFe(){var t;if(QD==null&&typeof document<"u"&&document.body){let e=document.body.style;QD=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return QD||!1}const RP=En.define({combine(t){let e=mm(t,{render:null,specialChars:eFe,addSpecialChars:null});return(e.replaceTabs=!nFe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Mz)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Mz)),e}});function rFe(t={}){return[RP.of(t),iFe()]}let vq=null;function iFe(){return vq||(vq=As.fromClass(class{constructor(t){this.view=t,this.decorations=zn.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(RP)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new J9e({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,o=Wc(e[0],0);if(o==9){let a=i.lineAt(r),s=n.state.tabSize,u=Sf(a.text,s,r-a.from);return zn.replace({widget:new lFe((s-u%s)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=zn.replace({widget:new aFe(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(RP);t.startState.facet(RP)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const oFe="";function sFe(t){return t>=32?oFe:t==10?"":String.fromCharCode(9216+t)}class aFe extends od{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=sFe(this.code),r=e.state.phrase("Control character")+" "+(tFe[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let o=document.createElement("span");return o.textContent=n,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class lFe extends od{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function cFe(){return hFe}const uFe=zn.line({class:"cm-activeLine"}),hFe=As.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(uFe.range(i.from)),e=i.from)}return zn.set(n)}},{decorations:t=>t.decorations}),Rz=2e3;function dFe(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),o=[];if(e.off>Rz||n.off>Rz||e.col<0||n.col<0){let a=Math.min(e.off,n.off),s=Math.max(e.off,n.off);for(let u=r;u<=i;u++){let f=t.doc.line(u);f.length<=s&&o.push(Ft.range(f.from+a,f.to+s))}}else{let a=Math.min(e.col,n.col),s=Math.max(e.col,n.col);for(let u=r;u<=i;u++){let f=t.doc.line(u),g=hz(f.text,a,t.tabSize,!0);if(g<0)o.push(Ft.cursor(f.to));else{let _=hz(f.text,s,t.tabSize);o.push(Ft.range(f.from+g,f.from+_))}}}return o}function fFe(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function _q(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,o=i>Rz?-1:i==r.length?fFe(t,e.clientX):Sf(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function pFe(t,e){let n=_q(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let o=i.changes.mapPos(i.startState.doc.line(n.line).from),a=i.state.doc.lineAt(o);n={line:a.number,col:n.col,off:Math.min(n.off,a.length)},r=r.map(i.changes)}},get(i,o,a){let s=_q(t,i);if(!s)return r;let u=dFe(t.state,n,s);return u.length?a?Ft.create(u.concat(r.ranges)):Ft.create(u):r}}:null}function mFe(t){let e=(n=>n.altKey&&n.button==0);return un.mouseSelectionStyle.of((n,r)=>e(r)?pFe(n,r):null)}const gFe={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},yFe={style:"cursor: crosshair"};function vFe(t={}){let[e,n]=gFe[t.key||"Alt"],r=As.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,un.contentAttributes.of(i=>{var o;return!((o=i.plugin(r))===null||o===void 0)&&o.isDown?yFe:null})]}const AA="-10000px";class Hie{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(a=>a);let o=null;this.tooltipViews=this.tooltips.map(a=>o=r(a,o))}update(e,n){var r;let i=e.state.facet(this.facet),o=i.filter(u=>u);if(i===this.input){for(let u of this.tooltipViews)u.update&&u.update(e);return!1}let a=[],s=n?[]:null;for(let u=0;u<o.length;u++){let f=o[u],g=-1;if(f){for(let _=0;_<this.tooltips.length;_++){let w=this.tooltips[_];w&&w.create==f.create&&(g=_)}if(g<0)a[u]=this.createTooltipView(f,u?a[u-1]:null),s&&(s[u]=!!f.above);else{let _=a[u]=this.tooltipViews[g];s&&(s[u]=n[g]),_.update&&_.update(e)}}}for(let u of this.tooltipViews)a.indexOf(u)<0&&(this.removeTooltipView(u),(r=u.destroy)===null||r===void 0||r.call(u));return n&&(s.forEach((u,f)=>n[f]=u),n.length=s.length),this.input=i,this.tooltips=o,this.tooltipViews=a,!0}}function _Fe(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const UD=En.define({combine:t=>{var e,n,r;return{position:Pn.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||_Fe}}}),bq=new WeakMap,XB=As.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(UD);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Hie(t,YB,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(UD);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=AA,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(Pn.safari){let a=o.getBoundingClientRect();n=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}else n=!!o.offsetParent&&o.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(t=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=qB(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,a)=>{let s=this.manager.tooltipViews[a];return s.getCoords?s.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(UD).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let s of this.manager.tooltipViews)s.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:o}=t,a=[];for(let s=0;s<this.manager.tooltips.length;s++){let u=this.manager.tooltips[s],f=this.manager.tooltipViews[s],{dom:g}=f,_=t.pos[s],w=t.size[s];if(!_||u.clip!==!1&&(_.bottom<=Math.max(n.top,r.top)||_.top>=Math.min(n.bottom,r.bottom)||_.right<Math.max(n.left,r.left)-.1||_.left>Math.min(n.right,r.right)+.1)){g.style.top=AA;continue}let S=u.arrow?f.dom.querySelector(".cm-tooltip-arrow"):null,E=S?7:0,A=w.right-w.left,R=(e=bq.get(f))!==null&&e!==void 0?e:w.bottom-w.top,$=f.offset||xFe,z=this.view.textDirection==go.LTR,B=w.width>r.right-r.left?z?r.left:r.right-w.width:z?Math.max(r.left,Math.min(_.left-(S?14:0)+$.x,r.right-A)):Math.min(Math.max(r.left,_.left-A+(S?14:0)-$.x),r.right-A),F=this.above[s];!u.strictSide&&(F?_.top-R-E-$.y<r.top:_.bottom+R+E+$.y>r.bottom)&&F==r.bottom-_.bottom>_.top-r.top&&(F=this.above[s]=!F);let U=(F?_.top-r.top:r.bottom-_.bottom)-E;if(U<R&&f.resize!==!1){if(U<this.view.defaultLineHeight){g.style.top=AA;continue}bq.set(f,R),g.style.height=(R=U)/o+"px"}else g.style.height&&(g.style.height="");let q=F?_.top-R-E-$.y:_.bottom+E+$.y,H=B+A;if(f.overlap!==!0)for(let ne of a)ne.left<H&&ne.right>B&&ne.top<q+R&&ne.bottom>q&&(q=F?ne.top-R-2-E:ne.bottom+E+2);if(this.position=="absolute"?(g.style.top=(q-t.parent.top)/o+"px",xq(g,(B-t.parent.left)/i)):(g.style.top=q/o+"px",xq(g,B/i)),S){let ne=_.left+(z?$.x:-$.x)-(B+14-7);S.style.left=ne/i+"px"}f.overlap!==!0&&a.push({left:B,top:q,right:H,bottom:q+R}),g.classList.toggle("cm-tooltip-above",F),g.classList.toggle("cm-tooltip-below",!F),f.positioned&&f.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=AA}},{eventObservers:{scroll(){this.maybeMeasure()}}});function xq(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const bFe=un.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),xFe={x:0,y:0},YB=En.define({enables:[XB,bFe]}),oM=En.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class gI{static create(e){return new gI(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Hie(e,oM,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const wFe=YB.compute([oM],t=>{let e=t.facet(oM);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:gI.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class OFe{constructor(e,n,r,i,o){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.tile.nearest(n.target);if(!r)return;let i,o=1;if(r.isWidget())i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let s=e.coordsAtPos(i);if(!s||n.y<s.top||n.y>s.bottom||n.x<s.left-e.defaultCharacterWidth||n.x>s.right+e.defaultCharacterWidth)return;let u=e.bidiSpans(e.state.doc.lineAt(i)).find(g=>g.from<=i&&g.to>=i),f=u&&u.dir==go.RTL?-1:1;o=n.x<s.left?-f:f}let a=this.source(e,i,o);if(a?.then){let s=this.pending={pos:i};a.then(u=>{this.pending==s&&(this.pending=null,u&&!(Array.isArray(u)&&!u.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(u)?u:[u])}))},u=>Kc(e.state,u,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(XB),n=e?e.manager.tooltips.findIndex(r=>r.create==gI.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:o}=this;if(i.length&&o&&!SFe(o.dom,e)||this.pending){let{pos:a}=i[0]||this.pending,s=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:a;(a==s?this.view.posAtCoords(this.lastMove)!=a:!CFe(this.view,a,s,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const PA=4;function SFe(t,e){let{left:n,right:r,top:i,bottom:o}=t.getBoundingClientRect(),a;if(a=t.querySelector(".cm-tooltip-arrow")){let s=a.getBoundingClientRect();i=Math.min(s.top,i),o=Math.max(s.bottom,o)}return e.clientX>=n-PA&&e.clientX<=r+PA&&e.clientY>=i-PA&&e.clientY<=o+PA}function CFe(t,e,n,r,i,o){let a=t.scrollDOM.getBoundingClientRect(),s=t.documentTop+t.documentPadding.top+t.contentHeight;if(a.left>r||a.right<r||a.top>i||Math.min(a.bottom,s)<i)return!1;let u=t.posAtCoords({x:r,y:i},!1);return u>=e&&u<=n}function TFe(t,e={}){let n=fr.define(),r=Rs.define({create(){return[]},update(i,o){if(i.length&&(e.hideOnChange&&(o.docChanged||o.selection)?i=[]:e.hideOn&&(i=i.filter(a=>!e.hideOn(o,a))),o.docChanged)){let a=[];for(let s of i){let u=o.changes.mapPos(s.pos,-1,rl.TrackDel);if(u!=null){let f=Object.assign(Object.create(null),s);f.pos=u,f.end!=null&&(f.end=o.changes.mapPos(f.end)),a.push(f)}}i=a}for(let a of o.effects)a.is(n)&&(i=a.value),a.is(kFe)&&(i=[]);return i},provide:i=>oM.from(i)});return{active:r,extension:[r,As.define(i=>new OFe(i,t,r,n,e.hoverTime||300)),wFe]}}function Gie(t,e){let n=t.plugin(XB);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const kFe=fr.define(),wq=En.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function gT(t,e){let n=t.plugin(Xie),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Xie=As.fromClass(class{constructor(t){this.input=t.state.facet(yT),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(wq);this.top=new MA(t,!0,e.topContainer),this.bottom=new MA(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(wq);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new MA(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new MA(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(yT);if(n!=this.input){let r=n.filter(u=>u),i=[],o=[],a=[],s=[];for(let u of r){let f=this.specs.indexOf(u),g;f<0?(g=u(t.view),s.push(g)):(g=this.panels[f],g.update&&g.update(t)),i.push(g),(g.top?o:a).push(g)}this.specs=r,this.panels=i,this.top.sync(o),this.bottom.sync(a);for(let u of s)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>un.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class MA{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=Oq(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=Oq(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Oq(t){let e=t.nextSibling;return t.remove(),e}const yT=En.define({enables:Xie});class lm extends Q0{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}lm.prototype.elementClass="";lm.prototype.toDOM=void 0;lm.prototype.mapMode=rl.TrackBefore;lm.prototype.startSide=lm.prototype.endSide=-1;lm.prototype.point=!0;const IP=En.define(),EFe=En.define(),AFe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>qr.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},vC=En.define();function Yie(t){return[Kie(),vC.of({...AFe,...t})]}const Sq=En.define({combine:t=>t.some(e=>e)});function Kie(t){return[PFe]}const PFe=As.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(vC).map(e=>new Tq(t,e)),this.fixed=!t.state.facet(Sq);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Sq)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=qr.iter(this.view.state.facet(IP),this.view.viewport.from),r=[],i=this.gutters.map(o=>new MFe(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(o.type)){let a=!0;for(let s of o.type)if(s.type==ol.Text&&a){Iz(n,r,s.from);for(let u of i)u.line(this.view,s,r);a=!1}else if(s.widget)for(let u of i)u.widget(this.view,s)}else if(o.type==ol.Text){Iz(n,r,o.from);for(let a of i)a.line(this.view,o,r)}else if(o.widget)for(let a of i)a.widget(this.view,o);for(let o of i)o.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(vC),n=t.state.facet(vC),r=t.docChanged||t.heightChanged||t.viewportChanged||!qr.eq(t.startState.facet(IP),t.state.facet(IP),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let o of n){let a=e.indexOf(o);a<0?i.push(new Tq(this.view,o)):(this.gutters[a].update(t),i.push(this.gutters[a]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>un.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==go.LTR?{left:r,right:i}:{right:r,left:i}})});function Cq(t){return Array.isArray(t)?t:[t]}function Iz(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class MFe{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=qr.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,o=(n.top-this.height)/e.scaleY,a=n.height/e.scaleY;if(this.i==i.elements.length){let s=new Jie(e,a,o,r);i.elements.push(s),i.dom.appendChild(s.dom)}else i.elements[this.i].update(e,a,o,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Iz(this.cursor,i,n.from),r.length&&(i=i.concat(r));let o=this.gutter.config.lineMarker(e,n,i);o&&i.unshift(o);let a=this.gutter;i.length==0&&!a.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let o of e.state.facet(EFe)){let a=o(e,n.widget,n);a&&(i||(i=[])).push(a)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class Tq{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let o=i.target,a;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let u=o.getBoundingClientRect();a=(u.top+u.bottom)/2}else a=i.clientY;let s=e.lineBlockAtHeight(a-e.documentTop);n.domEventHandlers[r](e,s,i)&&i.preventDefault()});this.markers=Cq(n.markers(e)),n.initialSpacer&&(this.spacer=new Jie(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=Cq(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!qr.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Jie{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),RFe(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let o=0,a=0;;){let s=a,u=o<n.length?n[o++]:null,f=!1;if(u){let g=u.elementClass;g&&(r+=" "+g);for(let _=a;_<this.markers.length;_++)if(this.markers[_].compare(u)){s=_,f=!0;break}}else s=this.markers.length;for(;a<s;){let g=this.markers[a++];if(g.toDOM){g.destroy(i);let _=i.nextSibling;i.remove(),i=_}}if(!u)break;u.toDOM&&(f?i=i.nextSibling:this.dom.insertBefore(u.toDOM(e),i)),f&&a++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function RFe(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const IFe=En.define(),DFe=En.define(),W1=En.define({combine(t){return mm(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let o=r[i],a=n[i];r[i]=o?(s,u,f)=>o(s,u,f)||a(s,u,f):a}return r}})}});class ZD extends lm{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function qD(t,e){return t.state.facet(W1).formatNumber(e,t.state)}const LFe=vC.compute([W1],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(IFe)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new ZD(qD(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(DFe)){let o=i(e,n,r);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(W1)!=e.state.facet(W1),initialSpacer(e){return new ZD(qD(e,kq(e.state.doc.lines)))},updateSpacer(e,n){let r=qD(n.view,kq(n.view.state.doc.lines));return r==e.number?e:new ZD(r)},domEventHandlers:t.facet(W1).domEventHandlers,side:"before"}));function KB(t={}){return[W1.of(t),Kie(),LFe]}function kq(t){let e=9;for(;e<t;)e=e*10+9;return e}const $Fe=new class extends lm{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},zFe=IP.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push($Fe.range(i)))}return qr.of(e)});function NFe(){return zFe}const eoe=1024;let BFe=0,Vh=class{constructor(e,n){this.from=e,this.to=n}};class gr{constructor(e={}){this.id=BFe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ta.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}gr.closedBy=new gr({deserialize:t=>t.split(" ")});gr.openedBy=new gr({deserialize:t=>t.split(" ")});gr.group=new gr({deserialize:t=>t.split(" ")});gr.isolate=new gr({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});gr.contextHash=new gr({perNode:!0});gr.lookAhead=new gr({perNode:!0});gr.mounted=new gr({perNode:!0});class dw{constructor(e,n,r,i=!1){this.tree=e,this.overlay=n,this.parser=r,this.bracketed=i}static get(e){return e&&e.props&&e.props[gr.mounted.id]}}const FFe=Object.create(null);class ta{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):FFe,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new ta(e.name||"",n,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(gr.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(gr.group),o=-1;o<(i?i.length:0);o++){let a=n[o<0?r.name:i[o]];if(a)return a}}}}ta.none=new ta("",Object.create(null),0,8);class zO{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let o of e){let a=o(r);if(a){i||(i=Object.assign({},r.props));let s=a[1],u=a[0];u.combine&&u.id in i&&(s=u.combine(i[u.id],s)),i[u.id]=s}}n.push(i?new ta(r.name,i,r.id,r.flags):r)}return new zO(n)}}const RA=new WeakMap,Eq=new WeakMap;var Mi;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays",t[t.EnterBracketed=16]="EnterBracketed"})(Mi||(Mi={}));class Vr{constructor(e,n,r,i,o){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[a,s]of o)this.props[typeof a=="number"?a:a.id]=s}}toString(){let e=dw.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new sM(this.topNode,e)}cursorAt(e,n=0,r=0){let i=RA.get(this)||this.topNode,o=new sM(i);return o.moveTo(e,n),RA.set(this,o._tree),o}get topNode(){return new Rl(this,0,0,null)}resolve(e,n=0){let r=vT(RA.get(this)||this.topNode,e,n,!1);return RA.set(this,r),r}resolveInner(e,n=0){let r=vT(Eq.get(this)||this.topNode,e,n,!0);return Eq.set(this,r),r}resolveStack(e,n=0){return QFe(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:o=this.length}=e,a=e.mode||0,s=(a&Mi.IncludeAnonymous)>0;for(let u=this.cursor(a|Mi.IncludeAnonymous);;){let f=!1;if(u.from<=o&&u.to>=i&&(!s&&u.type.isAnonymous||n(u)!==!1)){if(u.firstChild())continue;f=!0}for(;f&&r&&(s||!u.type.isAnonymous)&&r(u),!u.nextSibling();){if(!u.parent())return;f=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:t9(ta.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Vr(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Vr(ta.none,n,r,i)))}static build(e){return UFe(e)}}Vr.empty=new Vr(ta.none,[],[],0);class JB{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new JB(this.buffer,this.index)}}class q0{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return ta.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return o+"("+a.join(",")+")"}findChild(e,n,r,i,o){let{buffer:a}=this,s=-1;for(let u=e;u!=n&&!(toe(o,i,a[u+1],a[u+2])&&(s=u,r>0));u=a[u+3]);return s}slice(e,n,r){let i=this.buffer,o=new Uint16Array(n-e),a=0;for(let s=e,u=0;s<n;){o[u++]=i[s++],o[u++]=i[s++]-r;let f=o[u++]=i[s++]-r;o[u++]=i[s++]-e,a=Math.max(a,f)}return new q0(o,a,this.set)}}function toe(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function vT(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let a=!r&&t instanceof Rl&&t.index<0?null:t.parent;if(!a)return t;t=a}let o=r?0:Mi.IgnoreOverlays;if(r)for(let a=t,s=a.parent;s;a=s,s=a.parent)a instanceof Rl&&a.index<0&&((i=s.enter(e,n,o))===null||i===void 0?void 0:i.from)!=a.from&&(t=s);for(;;){let a=t.enter(e,n,o);if(!a)return t;t=a}}class noe{cursor(e=0){return new sM(this,e)}getChild(e,n=null,r=null){let i=Aq(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return Aq(this,e,n,r)}resolve(e,n=0){return vT(this,e,n,!1)}resolveInner(e,n=0){return vT(this,e,n,!0)}matchContext(e){return Dz(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Rl extends noe{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,o=0){var a;for(let s=this;;){for(let{children:u,positions:f}=s._tree,g=n>0?u.length:-1;e!=g;e+=n){let _=u[e],w=f[e]+s.from;if(!(!(o&Mi.EnterBracketed&&_ instanceof Vr&&((a=dw.get(_))===null||a===void 0?void 0:a.overlay)===null&&(w>=r||w+_.length<=r))&&!toe(i,r,w,w+_.length))){if(_ instanceof q0){if(o&Mi.ExcludeBuffers)continue;let S=_.findChild(0,_.buffer.length,n,r-w,i);if(S>-1)return new Up(new jFe(s,_,e,w),null,S)}else if(o&Mi.IncludeAnonymous||!_.type.isAnonymous||e9(_)){let S;if(!(o&Mi.IgnoreMounts)&&(S=dw.get(_))&&!S.overlay)return new Rl(S.tree,w,e,s);let E=new Rl(_,w,e,s);return o&Mi.IncludeAnonymous||!E.type.isAnonymous?E:E.nextChild(n<0?_.children.length-1:0,n,r,i,o)}}}if(o&Mi.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+n:e=n<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,n,r=0){let i;if(!(r&Mi.IgnoreOverlays)&&(i=dw.get(this._tree))&&i.overlay){let o=e-this.from,a=r&Mi.EnterBracketed&&i.bracketed;for(let{from:s,to:u}of i.overlay)if((n>0||a?s<=o:s<o)&&(n<0||a?u>=o:u>o))return new Rl(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Aq(t,e,n,r){let i=t.cursor(),o=[];if(!i.firstChild())return o;if(n!=null){for(let a=!1;!a;)if(a=i.type.is(n),!i.nextSibling())return o}for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return r==null?o:[]}}function Dz(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class jFe{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Up extends noe{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return o<0?null:new Up(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,n,r=0){if(r&Mi.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return o<0?null:new Up(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Up(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Up(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];if(o>i){let a=r.buffer[this.index+1];e.push(r.slice(i,o,a)),n.push(0)}return new Vr(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function roe(t){if(!t.length)return null;let e=0,n=t[0];for(let o=1;o<t.length;o++){let a=t[o];(a.from>n.from||a.to<n.to)&&(n=a,e=o)}let r=n instanceof Rl&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new VFe(i,n)}class VFe{constructor(e,n){this.heads=e,this.node=n}get next(){return roe(this.heads)}}function QFe(t,e,n){let r=t.resolveInner(e,n),i=null;for(let o=r instanceof Rl?r:r.context.parent;o;o=o.parent)if(o.index<0){let a=o.parent;(i||(i=[r])).push(a.resolve(e,n)),o=a}else{let a=dw.get(o.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let s=new Rl(a.tree,a.overlay[0].from+o.from,-1,o);(i||(i=[r])).push(vT(s,e,n,!1))}}return i?roe(i):r}class sM{get name(){return this.type.name}constructor(e,n=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=n&~Mi.EnterBracketed,e instanceof Rl)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Rl?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Mi.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Mi.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Mi.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let o=n+e,a=e<0?-1:r._tree.children.length;o!=a;o+=e){let s=r._tree.children[o];if(this.mode&Mi.IncludeAnonymous||s instanceof q0||!s.type.isAnonymous||e9(s))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let a=e;a;a=a._parent)if(a.index==i){if(i==this.index)return a;n=a,r=o+1;break e}i=this.stack[--o]}for(let i=r;i<this.stack.length;i++)n=new Up(this.buffer,n,this.stack[i]);return this.bufferNode=new Up(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Dz(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return Dz(this._tree,e,i);let a=r[n.buffer[this.stack[o]]];if(!a.isAnonymous){if(e[i]&&e[i]!=a.name)return!1;i--}}return!0}}function e9(t){return t.children.some(e=>e instanceof q0||!e.type.isAnonymous||e9(e))}function UFe(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=eoe,reused:o=[],minRepeatType:a=r.types.length}=t,s=Array.isArray(n)?new JB(n,n.length):n,u=r.types,f=0,g=0;function _(U,q,H,ne,ie,ce){let{id:xe,start:re,end:me,size:Te}=s,ye=g,_e=f;if(Te<0)if(s.next(),Te==-1){let Me=o[xe];H.push(Me),ne.push(re-U);return}else if(Te==-3){f=xe;return}else if(Te==-4){g=xe;return}else throw new RangeError(`Unrecognized record size: ${Te}`);let ke=u[xe],Ne,Qe,Se=re-U;if(me-re<=i&&(Qe=R(s.pos-q,ie))){let Me=new Uint16Array(Qe.size-Qe.skip),Xe=s.pos-Qe.size,Ee=Me.length;for(;s.pos>Xe;)Ee=$(Qe.start,Me,Ee);Ne=new q0(Me,me-Qe.start,r),Se=Qe.start-U}else{let Me=s.pos-Te;s.next();let Xe=[],Ee=[],ft=xe>=a?xe:-1,mt=0,ct=me;for(;s.pos>Me;)ft>=0&&s.id==ft&&s.size>=0?(s.end<=ct-i&&(E(Xe,Ee,re,mt,s.end,ct,ft,ye,_e),mt=Xe.length,ct=s.end),s.next()):ce>2500?w(re,Me,Xe,Ee):_(re,Me,Xe,Ee,ft,ce+1);if(ft>=0&&mt>0&&mt<Xe.length&&E(Xe,Ee,re,mt,re,ct,ft,ye,_e),Xe.reverse(),Ee.reverse(),ft>-1&&mt>0){let st=S(ke,_e);Ne=t9(ke,Xe,Ee,0,Xe.length,0,me-re,st,st)}else Ne=A(ke,Xe,Ee,me-re,ye-me,_e)}H.push(Ne),ne.push(Se)}function w(U,q,H,ne){let ie=[],ce=0,xe=-1;for(;s.pos>q;){let{id:re,start:me,end:Te,size:ye}=s;if(ye>4)s.next();else{if(xe>-1&&me<xe)break;xe<0&&(xe=Te-i),ie.push(re,me,Te),ce++,s.next()}}if(ce){let re=new Uint16Array(ce*4),me=ie[ie.length-2];for(let Te=ie.length-3,ye=0;Te>=0;Te-=3)re[ye++]=ie[Te],re[ye++]=ie[Te+1]-me,re[ye++]=ie[Te+2]-me,re[ye++]=ye;H.push(new q0(re,ie[2]-me,r)),ne.push(me-U)}}function S(U,q){return(H,ne,ie)=>{let ce=0,xe=H.length-1,re,me;if(xe>=0&&(re=H[xe])instanceof Vr){if(!xe&&re.type==U&&re.length==ie)return re;(me=re.prop(gr.lookAhead))&&(ce=ne[xe]+re.length+me)}return A(U,H,ne,ie,ce,q)}}function E(U,q,H,ne,ie,ce,xe,re,me){let Te=[],ye=[];for(;U.length>ne;)Te.push(U.pop()),ye.push(q.pop()+H-ie);U.push(A(r.types[xe],Te,ye,ce-ie,re-ce,me)),q.push(ie-H)}function A(U,q,H,ne,ie,ce,xe){if(ce){let re=[gr.contextHash,ce];xe=xe?[re].concat(xe):[re]}if(ie>25){let re=[gr.lookAhead,ie];xe=xe?[re].concat(xe):[re]}return new Vr(U,q,H,ne,xe)}function R(U,q){let H=s.fork(),ne=0,ie=0,ce=0,xe=H.end-i,re={size:0,start:0,skip:0};e:for(let me=H.pos-U;H.pos>me;){let Te=H.size;if(H.id==q&&Te>=0){re.size=ne,re.start=ie,re.skip=ce,ce+=4,ne+=4,H.next();continue}let ye=H.pos-Te;if(Te<0||ye<me||H.start<xe)break;let _e=H.id>=a?4:0,ke=H.start;for(H.next();H.pos>ye;){if(H.size<0)if(H.size==-3||H.size==-4)_e+=4;else break e;else H.id>=a&&(_e+=4);H.next()}ie=ke,ne+=Te,ce+=_e}return(q<0||ne==U)&&(re.size=ne,re.start=ie,re.skip=ce),re.size>4?re:void 0}function $(U,q,H){let{id:ne,start:ie,end:ce,size:xe}=s;if(s.next(),xe>=0&&ne<a){let re=H;if(xe>4){let me=s.pos-(xe-4);for(;s.pos>me;)H=$(U,q,H)}q[--H]=re,q[--H]=ce-U,q[--H]=ie-U,q[--H]=ne}else xe==-3?f=ne:xe==-4&&(g=ne);return H}let z=[],B=[];for(;s.pos>0;)_(t.start||0,t.bufferStart||0,z,B,-1,0);let F=(e=t.length)!==null&&e!==void 0?e:z.length?B[0]+z[0].length:0;return new Vr(u[t.topID],z.reverse(),B.reverse(),F)}const Pq=new WeakMap;function DP(t,e){if(!t.isAnonymous||e instanceof q0||e.type!=t)return 1;let n=Pq.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Vr)){n=1;break}n+=DP(t,r)}Pq.set(e,n)}return n}function t9(t,e,n,r,i,o,a,s,u){let f=0;for(let E=r;E<i;E++)f+=DP(t,e[E]);let g=Math.ceil(f*1.5/8),_=[],w=[];function S(E,A,R,$,z){for(let B=R;B<$;){let F=B,U=A[B],q=DP(t,E[B]);for(B++;B<$;B++){let H=DP(t,E[B]);if(q+H>=g)break;q+=H}if(B==F+1){if(q>g){let H=E[F];S(H.children,H.positions,0,H.children.length,A[F]+z);continue}_.push(E[F])}else{let H=A[B-1]+E[B-1].length-U;_.push(t9(t,E,A,F,B,U,H,null,u))}w.push(U+z-o)}}return S(e,n,r,i,0),(s||u)(_,w,a)}class ioe{constructor(){this.map=new WeakMap}setBuffer(e,n,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(n,r)}getBuffer(e,n){let r=this.map.get(e);return r&&r.get(n)}set(e,n){e instanceof Up?this.setBuffer(e.context.buffer,e.index,n):e instanceof Rl&&this.map.set(e.tree,n)}get(e){return e instanceof Up?this.getBuffer(e.context.buffer,e.index):e instanceof Rl?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Fg{constructor(e,n,r,i,o=!1,a=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(o?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new Fg(0,e.length,e,0,!1,r)];for(let o of n)o.to>e.length&&i.push(o);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],o=1,a=e.length?e[0]:null;for(let s=0,u=0,f=0;;s++){let g=s<n.length?n[s]:null,_=g?g.fromA:1e9;if(_-u>=r)for(;a&&a.from<_;){let w=a;if(u>=w.from||_<=w.to||f){let S=Math.max(w.from,u)-f,E=Math.min(w.to,_)-f;w=S>=E?null:new Fg(S,E,w.tree,w.offset+f,s>0,!!g)}if(w&&i.push(w),a.to>_)break;a=o<e.length?e[o++]:null}if(!g)break;u=g.toA,f=g.toA-g.toB}return i}}class yI{startParse(e,n,r){return typeof e=="string"&&(e=new ZFe(e)),r=r?r.length?r.map(i=>new Vh(i.from,i.to)):[new Vh(0,0)]:[new Vh(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let o=i.advance();if(o)return o}}}class ZFe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}function ooe(t){return(e,n,r,i)=>new WFe(e,t,n,r,i)}class Mq{constructor(e,n,r,i,o,a){this.parser=e,this.parse=n,this.overlay=r,this.bracketed=i,this.target=o,this.from=a}}function Rq(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class qFe{constructor(e,n,r,i,o,a,s,u){this.parser=e,this.predicate=n,this.mounts=r,this.index=i,this.start=o,this.bracketed=a,this.target=s,this.prev=u,this.depth=0,this.ranges=[]}}const Lz=new gr({perNode:!0});class WFe{constructor(e,n,r,i,o){this.nest=n,this.input=r,this.fragments=i,this.ranges=o,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new Vr(r.type,r.children,r.positions,r.length,r.propValues.concat([[Lz,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[gr.mounted.id]=new dw(n,e.overlay,e.parser,e.bracketed),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new XFe(this.fragments),n=null,r=null,i=new sM(new Rl(this.baseTree,this.ranges[0].from,0,null),Mi.IncludeAnonymous|Mi.IgnoreMounts);e:for(let o,a;;){let s=!0,u;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)s=!1;else if(e.hasNode(i)){if(n){let f=n.mounts.find(g=>g.frag.from<=i.from&&g.frag.to>=i.to&&g.mount.overlay);if(f)for(let g of f.mount.overlay){let _=g.from+f.pos,w=g.to+f.pos;_>=i.from&&w<=i.to&&!n.ranges.some(S=>S.from<w&&S.to>_)&&n.ranges.push({from:_,to:w})}}s=!1}else if(r&&(a=HFe(r.ranges,i.from,i.to)))s=a!=2;else if(!i.type.isAnonymous&&(o=this.nest(i,this.input))&&(i.from<i.to||!o.overlay)){i.tree||(GFe(i),n&&n.depth++,r&&r.depth++);let f=e.findMounts(i.from,o.parser);if(typeof o.overlay=="function")n=new qFe(o.parser,o.overlay,f,this.inner.length,i.from,!!o.bracketed,i.tree,n);else{let g=Lq(this.ranges,o.overlay||(i.from<i.to?[new Vh(i.from,i.to)]:[]));g.length&&Rq(g),(g.length||!o.overlay)&&this.inner.push(new Mq(o.parser,g.length?o.parser.startParse(this.input,$q(f,g),g):o.parser.startParse(""),o.overlay?o.overlay.map(_=>new Vh(_.from-i.from,_.to-i.from)):null,!!o.bracketed,i.tree,g.length?g[0].from:i.from)),o.overlay?g.length&&(r={ranges:g,depth:0,prev:r}):s=!1}}else if(n&&(u=n.predicate(i))&&(u===!0&&(u=new Vh(i.from,i.to)),u.from<u.to)){let f=n.ranges.length-1;f>=0&&n.ranges[f].to==u.from?n.ranges[f]={from:n.ranges[f].from,to:u.to}:n.ranges.push(u)}if(s&&i.firstChild())n&&n.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(n&&!--n.depth){let f=Lq(this.ranges,n.ranges);f.length&&(Rq(f),this.inner.splice(n.index,0,new Mq(n.parser,n.parser.startParse(this.input,$q(n.mounts,f),f),n.ranges.map(g=>new Vh(g.from-n.start,g.to-n.start)),n.bracketed,n.target,f[0].from))),n=n.prev}r&&!--r.depth&&(r=r.prev)}}}}function HFe(t,e,n){for(let r of t){if(r.from>=n)break;if(r.to>e)return r.from<=e&&r.to>=n?2:1}return 0}function Iq(t,e,n,r,i,o){if(e<n){let a=t.buffer[e+1];r.push(t.slice(e,n,a)),i.push(a-o)}}function GFe(t){let{node:e}=t,n=[],r=e.context.buffer;do n.push(t.index),t.parent();while(!t.tree);let i=t.tree,o=i.children.indexOf(r),a=i.children[o],s=a.buffer,u=[o];function f(g,_,w,S,E,A){let R=n[A],$=[],z=[];Iq(a,g,R,$,z,S);let B=s[R+1],F=s[R+2];u.push($.length);let U=A?f(R+4,s[R+3],a.set.types[s[R]],B,F-B,A-1):e.toTree();return $.push(U),z.push(B-S),Iq(a,s[R+3],_,$,z,S),new Vr(w,$,z,E)}i.children[o]=f(0,s.length,ta.none,0,a.length,n.length-1);for(let g of u){let _=t.tree.children[g],w=t.tree.positions[g];t.yield(new Rl(_,w+t.from,g,t._tree))}}class Dq{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(Mi.IncludeAnonymous|Mi.IgnoreMounts)}moveTo(e){let{cursor:n}=this,r=e-this.offset;for(;!this.done&&n.from<r;)n.to>=e&&n.enter(r,1,Mi.IgnoreOverlays|Mi.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof Vr)n=n.children[0];else break}return!1}}let XFe=class{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(n=r.tree.prop(Lz))!==null&&n!==void 0?n:r.to,this.inner=new Dq(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(Lz))!==null&&e!==void 0?e:n.to,this.inner=new Dq(n.tree,-n.offset)}}findMounts(e,n){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let o=this.inner.cursor.node;o;o=o.parent){let a=(r=o.tree)===null||r===void 0?void 0:r.prop(gr.mounted);if(a&&a.parser==n)for(let s=this.fragI;s<this.fragments.length;s++){let u=this.fragments[s];if(u.from>=o.to)break;u.tree==this.curFrag.tree&&i.push({frag:u,pos:o.from-u.offset,mount:a})}}}return i}};function Lq(t,e){let n=null,r=e;for(let i=1,o=0;i<t.length;i++){let a=t[i-1].to,s=t[i].from;for(;o<r.length;o++){let u=r[o];if(u.from>=s)break;u.to<=a||(n||(r=n=e.slice()),u.from<a?(n[o]=new Vh(u.from,a),u.to>s&&n.splice(o+1,0,new Vh(s,u.to))):u.to>s?n[o--]=new Vh(s,u.to):n.splice(o--,1))}}return r}function YFe(t,e,n,r){let i=0,o=0,a=!1,s=!1,u=-1e9,f=[];for(;;){let g=i==t.length?1e9:a?t[i].to:t[i].from,_=o==e.length?1e9:s?e[o].to:e[o].from;if(a!=s){let w=Math.max(u,n),S=Math.min(g,_,r);w<S&&f.push(new Vh(w,S))}if(u=Math.min(g,_),u==1e9)break;g==u&&(a?(a=!1,i++):a=!0),_==u&&(s?(s=!1,o++):s=!0)}return f}function $q(t,e){let n=[];for(let{pos:r,mount:i,frag:o}of t){let a=r+(i.overlay?i.overlay[0].from:0),s=a+i.tree.length,u=Math.max(o.from,a),f=Math.min(o.to,s);if(i.overlay){let g=i.overlay.map(w=>new Vh(w.from+r,w.to+r)),_=YFe(e,g,u,f);for(let w=0,S=u;;w++){let E=w==_.length,A=E?f:_[w].from;if(A>S&&n.push(new Fg(S,A,i.tree,-a,o.from>=S||o.openStart,o.to<=A||o.openEnd)),E)break;S=_[w].to}}else n.push(new Fg(u,f,i.tree,-a,o.from>=a||o.openStart,o.to<=s||o.openEnd))}return n}let KFe=0;class Bu{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=KFe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Bu&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let i=new Bu(r,[],null,[]);if(i.set.push(i),n)for(let o of n.set)i.set.push(o);return i}static defineModifier(e){let n=new aM(e);return r=>r.modified.indexOf(n)>-1?r:aM.get(r.base||r,r.modified.concat(n).sort((i,o)=>i.id-o.id))}}let JFe=0;class aM{constructor(e){this.name=e,this.instances=[],this.id=JFe++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(s=>s.base==e&&e7e(n,s.modified));if(r)return r;let i=[],o=new Bu(e.name,i,e,n);for(let s of n)s.instances.push(o);let a=t7e(n);for(let s of e.set)if(!s.modified.length)for(let u of a)i.push(aM.get(s,u));return o}}function e7e(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function t7e(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function NO(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let o=[],a=2,s=i;for(let _=0;;){if(s=="..."&&_>0&&_+3==i.length){a=1;break}let w=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!w)throw new RangeError("Invalid path: "+i);if(o.push(w[0]=="*"?"":w[0][0]=='"'?JSON.parse(w[0]):w[0]),_+=w[0].length,_==i.length)break;let S=i[_++];if(_==i.length&&S=="!"){a=0;break}if(S!="/")throw new RangeError("Invalid path: "+i);s=i.slice(_)}let u=o.length-1,f=o[u];if(!f)throw new RangeError("Invalid path: "+i);let g=new _T(r,a,u>0?o.slice(0,u):null);e[f]=g.sort(e[f])}}return soe.add(e)}const soe=new gr({combine(t,e){let n,r,i;for(;t||e;){if(!t||e&&t.depth>=e.depth?(i=e,e=e.next):(i=t,t=t.next),n&&n.mode==i.mode&&!i.context&&!n.context)continue;let o=new _T(i.tags,i.mode,i.context);n?n.next=o:r=o,n=o}return r}});class _T{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}_T.empty=new _T([],2,null);function aoe(t,e){let n=Object.create(null);for(let o of t)if(!Array.isArray(o.tag))n[o.tag.id]=o.class;else for(let a of o.tag)n[a.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let a=i;for(let s of o)for(let u of s.set){let f=n[u.id];if(f){a=a?a+" "+f:f;break}}return a},scope:r}}function n7e(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function r7e(t,e,n,r=0,i=t.length){let o=new i7e(r,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),r,i,"",o.highlighters),o.flush(i)}class i7e{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,o){let{type:a,from:s,to:u}=e;if(s>=r||u<=n)return;a.isTop&&(o=this.highlighters.filter(S=>!S.scope||S.scope(a)));let f=i,g=o7e(e)||_T.empty,_=n7e(o,g.tags);if(_&&(f&&(f+=" "),f+=_,g.mode==1&&(i+=(i?" ":"")+_)),this.startSpan(Math.max(n,s),f),g.opaque)return;let w=e.tree&&e.tree.prop(gr.mounted);if(w&&w.overlay){let S=e.node.enter(w.overlay[0].from+s,1),E=this.highlighters.filter(R=>!R.scope||R.scope(w.tree.type)),A=e.firstChild();for(let R=0,$=s;;R++){let z=R<w.overlay.length?w.overlay[R]:null,B=z?z.from+s:u,F=Math.max(n,$),U=Math.min(r,B);if(F<U&&A)for(;e.from<U&&(this.highlightRange(e,F,U,i,o),this.startSpan(Math.min(U,e.to),f),!(e.to>=B||!e.nextSibling())););if(!z||B>r)break;$=z.to+s,$>n&&(this.highlightRange(S.cursor(),Math.max(n,z.from+s),Math.min(r,$),"",E),this.startSpan(Math.min(r,$),f))}A&&e.parent()}else if(e.firstChild()){w&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,o),this.startSpan(Math.min(r,e.to),f)}while(e.nextSibling());e.parent()}}}function o7e(t){let e=t.type.prop(soe);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const On=Bu.define,IA=On(),y0=On(),zq=On(y0),Nq=On(y0),v0=On(),DA=On(v0),WD=On(v0),Ep=On(),S_=On(Ep),Cp=On(),Tp=On(),$z=On(),w2=On($z),LA=On(),Be={comment:IA,lineComment:On(IA),blockComment:On(IA),docComment:On(IA),name:y0,variableName:On(y0),typeName:zq,tagName:On(zq),propertyName:Nq,attributeName:On(Nq),className:On(y0),labelName:On(y0),namespace:On(y0),macroName:On(y0),literal:v0,string:DA,docString:On(DA),character:On(DA),attributeValue:On(DA),number:WD,integer:On(WD),float:On(WD),bool:On(v0),regexp:On(v0),escape:On(v0),color:On(v0),url:On(v0),keyword:Cp,self:On(Cp),null:On(Cp),atom:On(Cp),unit:On(Cp),modifier:On(Cp),operatorKeyword:On(Cp),controlKeyword:On(Cp),definitionKeyword:On(Cp),moduleKeyword:On(Cp),operator:Tp,derefOperator:On(Tp),arithmeticOperator:On(Tp),logicOperator:On(Tp),bitwiseOperator:On(Tp),compareOperator:On(Tp),updateOperator:On(Tp),definitionOperator:On(Tp),typeOperator:On(Tp),controlOperator:On(Tp),punctuation:$z,separator:On($z),bracket:w2,angleBracket:On(w2),squareBracket:On(w2),paren:On(w2),brace:On(w2),content:Ep,heading:S_,heading1:On(S_),heading2:On(S_),heading3:On(S_),heading4:On(S_),heading5:On(S_),heading6:On(S_),contentSeparator:On(Ep),list:On(Ep),quote:On(Ep),emphasis:On(Ep),strong:On(Ep),link:On(Ep),monospace:On(Ep),strikethrough:On(Ep),inserted:On(),deleted:On(),changed:On(),invalid:On(),meta:LA,documentMeta:On(LA),annotation:On(LA),processingInstruction:On(LA),definition:Bu.defineModifier("definition"),constant:Bu.defineModifier("constant"),function:Bu.defineModifier("function"),standard:Bu.defineModifier("standard"),local:Bu.defineModifier("local"),special:Bu.defineModifier("special")};for(let t in Be){let e=Be[t];e instanceof Bu&&(e.name=t)}aoe([{tag:Be.link,class:"tok-link"},{tag:Be.heading,class:"tok-heading"},{tag:Be.emphasis,class:"tok-emphasis"},{tag:Be.strong,class:"tok-strong"},{tag:Be.keyword,class:"tok-keyword"},{tag:Be.atom,class:"tok-atom"},{tag:Be.bool,class:"tok-bool"},{tag:Be.url,class:"tok-url"},{tag:Be.labelName,class:"tok-labelName"},{tag:Be.inserted,class:"tok-inserted"},{tag:Be.deleted,class:"tok-deleted"},{tag:Be.literal,class:"tok-literal"},{tag:Be.string,class:"tok-string"},{tag:Be.number,class:"tok-number"},{tag:[Be.regexp,Be.escape,Be.special(Be.string)],class:"tok-string2"},{tag:Be.variableName,class:"tok-variableName"},{tag:Be.local(Be.variableName),class:"tok-variableName tok-local"},{tag:Be.definition(Be.variableName),class:"tok-variableName tok-definition"},{tag:Be.special(Be.variableName),class:"tok-variableName2"},{tag:Be.definition(Be.propertyName),class:"tok-propertyName tok-definition"},{tag:Be.typeName,class:"tok-typeName"},{tag:Be.namespace,class:"tok-namespace"},{tag:Be.className,class:"tok-className"},{tag:Be.macroName,class:"tok-macroName"},{tag:Be.propertyName,class:"tok-propertyName"},{tag:Be.operator,class:"tok-operator"},{tag:Be.comment,class:"tok-comment"},{tag:Be.meta,class:"tok-meta"},{tag:Be.invalid,class:"tok-invalid"},{tag:Be.punctuation,class:"tok-punctuation"}]);var HD;const T0=new gr;function vI(t){return En.define({combine:t?e=>e.concat(t):void 0})}const n9=new gr;class qu{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Pr.prototype.hasOwnProperty("tree")||Object.defineProperty(Pr.prototype,"tree",{get(){return Ji(this)}}),this.parser=n,this.extension=[W0.of(this),Pr.languageData.of((o,a,s)=>{let u=Bq(o,a,s),f=u.type.prop(T0);if(!f)return[];let g=o.facet(f),_=u.type.prop(n9);if(_){let w=u.resolve(a-u.from,s);for(let S of _)if(S.test(w,o)){let E=o.facet(S.facet);return S.type=="replace"?E:E.concat(g)}}return g})].concat(r)}isActiveAt(e,n,r=-1){return Bq(e,n,r).type.prop(T0)==this.data}findRegions(e){let n=e.facet(W0);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(o,a)=>{if(o.prop(T0)==this.data){r.push({from:a,to:a+o.length});return}let s=o.prop(gr.mounted);if(s){if(s.tree.prop(T0)==this.data){if(s.overlay)for(let u of s.overlay)r.push({from:u.from+a,to:u.to+a});else r.push({from:a,to:a+o.length});return}else if(s.overlay){let u=r.length;if(i(s.tree,s.overlay[0].from+a),r.length>u)return}}for(let u=0;u<o.children.length;u++){let f=o.children[u];f instanceof Vr&&i(f,o.positions[u]+a)}};return i(Ji(e),0),r}get allowsNesting(){return!0}}qu.setState=fr.define();function Bq(t,e,n){let r=t.facet(W0),i=Ji(t).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(e,n,Mi.ExcludeBuffers|Mi.EnterBracketed))o.type.isTop&&(i=o);return i}class Gw extends qu{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=vI(e.languageData);return new Gw(n,e.parser.configure({props:[T0.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new Gw(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Ji(t){let e=t.field(qu.state,!1);return e?e.tree:Vr.empty}class s7e{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let O2=null;class Sb{constructor(e,n,r=[],i,o,a,s,u){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=a,this.skipped=s,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Sb(e,n,[],Vr.empty,0,r,[],null)}startParse(){return this.parser.startParse(new s7e(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Vr.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Fg.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Fg.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=O2;O2=this;try{return e()}finally{O2=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Fq(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:o,viewport:a,skipped:s}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((f,g,_,w)=>u.push({fromA:f,toA:g,fromB:_,toB:w})),r=Fg.applyChanges(r,u),i=Vr.empty,o=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){s=[];for(let f of this.skipped){let g=e.mapPos(f.from,1),_=e.mapPos(f.to,-1);g<_&&s.push({from:g,to:_})}}}return new Sb(this.parser,n,r,i,o,a,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=Fq(this.fragments,i,o),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends yI{createParse(n,r,i){let o=i[0].from,a=i[i.length-1].to;return{parsedPos:o,advance(){let u=O2;if(u){for(let f of i)u.tempSkipped.push(f);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=a,new Vr(ta.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return O2}}function Fq(t,e,n){return Fg.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Xw{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new Xw(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Sb.create(e.facet(W0).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new Xw(r)}}qu.state=Rs.define({create:Xw.init,update(t,e){for(let n of e.effects)if(n.is(qu.setState))return n.value;return e.startState.facet(W0)!=e.state.facet(W0)?Xw.init(e.state):t.apply(e)}});let loe=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(loe=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const GD=typeof navigator<"u"&&(!((HD=navigator.scheduling)===null||HD===void 0)&&HD.isInputPending)?()=>navigator.scheduling.isInputPending():null,a7e=As.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(qu.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(qu.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=loe(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(qu.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!GD?Math.max(25,e.timeRemaining()-5):1e9),s=o.context.treeLen<i&&r.doc.length>i+1e3,u=o.context.work(()=>GD&&GD()||Date.now()>a,i+(s?0:1e5));this.chunkBudget-=Date.now()-n,(u||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:qu.setState.of(new Xw(o.context))})),this.chunkBudget>0&&!(u&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Kc(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),W0=En.define({combine(t){return t.length?t[0]:null},enables:t=>[qu.state,a7e,un.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class Yw{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}class kt{constructor(e,n,r,i,o,a=void 0){this.name=e,this.alias=n,this.extensions=r,this.filename=i,this.loadFunc=o,this.support=a,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:n,support:r}=e;if(!n){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=()=>Promise.resolve(r)}return new kt(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,n,r)}static matchFilename(e,n){for(let i of e)if(i.filename&&i.filename.test(n))return i;let r=/\.([^.]+)$/.exec(n);if(r){for(let i of e)if(i.extensions.indexOf(r[1])>-1)return i}return null}static matchLanguageName(e,n,r=!0){n=n.toLowerCase();for(let i of e)if(i.alias.some(o=>o==n))return i;if(r)for(let i of e)for(let o of i.alias){let a=n.indexOf(o);if(a>-1&&(o.length>2||!/\w/.test(n[a-1])&&!/\w/.test(n[a+o.length])))return i}return null}}const l7e=En.define(),Ck=En.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Cb(t){let e=t.facet(Ck);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function bT(t,e){let n="",r=t.tabSize,i=t.facet(Ck)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let o=0;o<e;o++)n+=i;return n}function r9(t,e){t instanceof Pr&&(t=new _I(t));for(let r of t.state.facet(l7e)){let i=r(t,e);if(i!==void 0)return i}let n=Ji(t.state);return n.length>=e?c7e(t,n,e):null}class _I{constructor(e,n={}){this.state=e,this.options=n,this.unit=Cb(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.countColumn(r,e-i),a=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return a>-1&&(o+=a-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,n=e.length){return Sf(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.options.overrideIndentation;if(o){let a=o(i);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const BO=new gr;function c7e(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let o=[];for(let a=i;a&&!(a.from<r.node.from||a.to>r.node.to||a.from==r.node.from&&a.type==r.node.type);a=a.parent)o.push(a);for(let a=o.length-1;a>=0;a--)r={node:o[a],next:r}}return coe(r,t,n)}function coe(t,e,n){for(let r=t;r;r=r.next){let i=h7e(r.node);if(i)return i(i9.create(e,n,r))}return 0}function u7e(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function h7e(t){let e=t.type.prop(BO);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(gr.closedBy))){let i=t.lastChild,o=i&&r.indexOf(i.name)>-1;return a=>uoe(a,!0,1,void 0,o&&!u7e(a)?i.from:void 0)}return t.parent==null?d7e:null}function d7e(){return 0}class i9 extends _I{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new i9(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(f7e(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return coe(this.context.next,this.base,this.pos)}}function f7e(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function p7e(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),a=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let s=n.to;;){let u=e.childAfter(s);if(!u||u==r)return null;if(!u.type.isSkipped){if(u.from>=a)return null;let f=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+f}}s=u.to}}function m7e({closing:t,align:e=!0,units:n=1}){return r=>uoe(r,e,n,t)}function uoe(t,e,n,r,i){let o=t.textAfter,a=o.match(/^\s*/)[0].length,s=r&&o.slice(a,a+r.length)==r||i==t.pos+a,u=e?p7e(t):null;return u?s?t.column(u.from):t.column(u.to):t.baseIndent+(s?0:t.unit*n)}const g7e=t=>t.baseIndent;function LP({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const y7e=200;function v7e(){return Pr.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+y7e)return t;let o=n.sliceString(i.from,r);if(!e.some(f=>f.test(o)))return t;let{state:a}=t,s=-1,u=[];for(let{head:f}of a.selection.ranges){let g=a.doc.lineAt(f);if(g.from==s)continue;s=g.from;let _=r9(a,g.from);if(_==null)continue;let w=/^\s*/.exec(g.text)[0],S=bT(a,_);w!=S&&u.push({from:g.from,to:g.from+w.length,insert:S})}return u.length?[t,{changes:u,sequential:!0}]:t})}const hoe=En.define(),FO=new gr;function doe(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function _7e(t,e,n){let r=Ji(t);if(r.length<n)return null;let i=r.resolveStack(n,1),o=null;for(let a=i;a;a=a.next){let s=a.node;if(s.to<=n||s.from>n)continue;if(o&&s.from<e)break;let u=s.type.prop(FO);if(u&&(s.to<r.length-50||r.length==t.doc.length||!b7e(s))){let f=u(s,t);f&&f.from<=n&&f.from>=e&&f.to>n&&(o=f)}}return o}function b7e(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function lM(t,e,n){for(let r of t.facet(hoe)){let i=r(t,e,n);if(i)return i}return _7e(t,e,n)}function foe(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const bI=fr.define({map:foe}),Tk=fr.define({map:foe});function poe(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const Tb=Rs.define({create(){return zn.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=jq(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(bI)&&!x7e(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(yoe),i=r?zn.replace({widget:new E7e(r(e.state,n.value))}):Vq;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(Tk)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=jq(t,e.selection.main.head)),t},provide:t=>un.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Vq.range(r,i))}return zn.set(e,!0)}});function jq(t,e,n=e){let r=!1;return t.between(e,n,(i,o)=>{i<n&&o>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,o)=>i>=n||o<=e}):t}function cM(t,e,n){var r;let i=null;return(r=t.field(Tb,!1))===null||r===void 0||r.between(e,n,(o,a)=>{(!i||i.from>o)&&(i={from:o,to:a})}),i}function x7e(t,e,n){let r=!1;return t.between(e,e,(i,o)=>{i==e&&o==n&&(r=!0)}),r}function moe(t,e){return t.field(Tb,!1)?e:e.concat(fr.appendConfig.of(voe()))}const w7e=t=>{for(let e of poe(t)){let n=lM(t.state,e.from,e.to);if(n)return t.dispatch({effects:moe(t.state,[bI.of(n),goe(t,n)])}),!0}return!1},O7e=t=>{if(!t.state.field(Tb,!1))return!1;let e=[];for(let n of poe(t)){let r=cM(t.state,n.from,n.to);r&&e.push(Tk.of(r),goe(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function goe(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return un.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const S7e=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),o=lM(e,i.from,i.to);o&&n.push(bI.of(o)),r=(o?t.lineBlockAt(o.to):i).to+1}return n.length&&t.dispatch({effects:moe(t.state,n)}),!!n.length},C7e=t=>{let e=t.state.field(Tb,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(Tk.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},T7e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:w7e},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:O7e},{key:"Ctrl-Alt-[",run:S7e},{key:"Ctrl-Alt-]",run:C7e}],k7e={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},yoe=En.define({combine(t){return mm(t,k7e)}});function voe(t){return[Tb,M7e]}function _oe(t,e){let{state:n}=t,r=n.facet(yoe),i=a=>{let s=t.lineBlockAt(t.posAtDOM(a.target)),u=cM(t.state,s.from,s.to);u&&t.dispatch({effects:Tk.of(u)}),a.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=i,o}const Vq=zn.replace({widget:new class extends od{toDOM(t){return _oe(t,null)}}});class E7e extends od{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return _oe(e,this.value)}}const A7e={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class XD extends lm{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function P7e(t={}){let e={...A7e,...t},n=new XD(e,!0),r=new XD(e,!1),i=As.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(W0)!=a.state.facet(W0)||a.startState.field(Tb,!1)!=a.state.field(Tb,!1)||Ji(a.startState)!=Ji(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let s=new ou;for(let u of a.viewportLineBlocks){let f=cM(a.state,u.from,u.to)?r:lM(a.state,u.from,u.to)?n:null;f&&s.add(u.from,u.from,f)}return s.finish()}}),{domEventHandlers:o}=e;return[i,Yie({class:"cm-foldGutter",markers(a){var s;return((s=a.plugin(i))===null||s===void 0?void 0:s.markers)||qr.empty},initialSpacer(){return new XD(e,!1)},domEventHandlers:{...o,click:(a,s,u)=>{if(o.click&&o.click(a,s,u))return!0;let f=cM(a.state,s.from,s.to);if(f)return a.dispatch({effects:Tk.of(f)}),!0;let g=lM(a.state,s.from,s.to);return g?(a.dispatch({effects:bI.of(g)}),!0):!1}}}),voe()]}const M7e=un.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class kk{constructor(e,n){this.specs=e;let r;function i(s){let u=Jg.newName();return(r||(r=Object.create(null)))["."+u]=s,u}const o=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,a=n.scope;this.scope=a instanceof qu?s=>s.prop(T0)==a.data:a?s=>s==a:void 0,this.style=aoe(e.map(s=>({tag:s.tag,class:s.class||i(Object.assign({},s,{tag:null}))})),{all:o}).style,this.module=r?new Jg(r):null,this.themeType=n.themeType}static define(e,n){return new kk(e,n||{})}}const zz=En.define(),boe=En.define({combine(t){return t.length?[t[0]]:null}});function YD(t){let e=t.facet(zz);return e.length?e:t.facet(boe)}function xoe(t,e){let n=[I7e],r;return t instanceof kk&&(t.module&&n.push(un.styleModule.of(t.module)),r=t.themeType),e?.fallback?n.push(boe.of(t)):r?n.push(zz.computeN([un.darkTheme],i=>i.facet(un.darkTheme)==(r=="dark")?[t]:[])):n.push(zz.of(t)),n}class R7e{constructor(e){this.markCache=Object.create(null),this.tree=Ji(e.state),this.decorations=this.buildDeco(e,YD(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Ji(e.state),r=YD(e.state),i=r!=YD(e.startState),{viewport:o}=e.view,a=e.changes.mapPos(this.decoratedTo,1);n.length<o.to&&!i&&n.type==this.tree.type&&a>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=o.to)}buildDeco(e,n){if(!n||!this.tree.length)return zn.none;let r=new ou;for(let{from:i,to:o}of e.visibleRanges)r7e(this.tree,n,(a,s,u)=>{r.add(a,s,this.markCache[u]||(this.markCache[u]=zn.mark({class:u})))},i,o);return r.finish()}}const I7e=Pf.high(As.fromClass(R7e,{decorations:t=>t.decorations})),D7e=kk.define([{tag:Be.meta,color:"#404740"},{tag:Be.link,textDecoration:"underline"},{tag:Be.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Be.emphasis,fontStyle:"italic"},{tag:Be.strong,fontWeight:"bold"},{tag:Be.strikethrough,textDecoration:"line-through"},{tag:Be.keyword,color:"#708"},{tag:[Be.atom,Be.bool,Be.url,Be.contentSeparator,Be.labelName],color:"#219"},{tag:[Be.literal,Be.inserted],color:"#164"},{tag:[Be.string,Be.deleted],color:"#a11"},{tag:[Be.regexp,Be.escape,Be.special(Be.string)],color:"#e40"},{tag:Be.definition(Be.variableName),color:"#00f"},{tag:Be.local(Be.variableName),color:"#30a"},{tag:[Be.typeName,Be.namespace],color:"#085"},{tag:Be.className,color:"#167"},{tag:[Be.special(Be.variableName),Be.macroName],color:"#256"},{tag:Be.definition(Be.propertyName),color:"#00c"},{tag:Be.comment,color:"#940"},{tag:Be.invalid,color:"#f00"}]),L7e=un.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),woe=1e4,Ooe="()[]{}",Soe=En.define({combine(t){return mm(t,{afterCursor:!0,brackets:Ooe,maxScanDistance:woe,renderMatch:N7e})}}),$7e=zn.mark({class:"cm-matchingBracket"}),z7e=zn.mark({class:"cm-nonmatchingBracket"});function N7e(t){let e=[],n=t.matched?$7e:z7e;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const B7e=Rs.define({create(){return zn.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(Soe);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=Zp(e.state,i.head,-1,r)||i.head>0&&Zp(e.state,i.head-1,1,r)||r.afterCursor&&(Zp(e.state,i.head,1,r)||i.head<e.state.doc.length&&Zp(e.state,i.head+1,-1,r));o&&(n=n.concat(r.renderMatch(o,e.state)))}return zn.set(n,!0)},provide:t=>un.decorations.from(t)}),F7e=[B7e,L7e];function j7e(t={}){return[Soe.of(t),F7e]}const Coe=new gr;function Nz(t,e,n){let r=t.prop(e<0?gr.openedBy:gr.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Bz(t){let e=t.type.prop(Coe);return e?e(t.node):t}function Zp(t,e,n,r={}){let i=r.maxScanDistance||woe,o=r.brackets||Ooe,a=Ji(t),s=a.resolveInner(e,n);for(let u=s;u;u=u.parent){let f=Nz(u.type,n,o);if(f&&u.from<u.to){let g=Bz(u);if(g&&(n>0?e>=g.from&&e<g.to:e>g.from&&e<=g.to))return V7e(t,e,n,u,g,f,o)}}return Q7e(t,e,n,a,s.type,i,o)}function V7e(t,e,n,r,i,o,a){let s=r.parent,u={from:i.from,to:i.to},f=0,g=s?.cursor();if(g&&(n<0?g.childBefore(r.from):g.childAfter(r.to)))do if(n<0?g.to<=r.from:g.from>=r.to){if(f==0&&o.indexOf(g.type.name)>-1&&g.from<g.to){let _=Bz(g);return{start:u,end:_?{from:_.from,to:_.to}:void 0,matched:!0}}else if(Nz(g.type,n,a))f++;else if(Nz(g.type,-n,a)){if(f==0){let _=Bz(g);return{start:u,end:_&&_.from<_.to?{from:_.from,to:_.to}:void 0,matched:!1}}f--}}while(n<0?g.prevSibling():g.nextSibling());return{start:u,matched:!1}}function Q7e(t,e,n,r,i,o,a){let s=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),u=a.indexOf(s);if(u<0||u%2==0!=n>0)return null;let f={from:n<0?e-1:e,to:n>0?e+1:e},g=t.doc.iterRange(e,n>0?t.doc.length:0),_=0;for(let w=0;!g.next().done&&w<=o;){let S=g.value;n<0&&(w+=S.length);let E=e+w*n;for(let A=n>0?0:S.length-1,R=n>0?S.length:-1;A!=R;A+=n){let $=a.indexOf(S[A]);if(!($<0||r.resolveInner(E+A,1).type!=i))if($%2==0==n>0)_++;else{if(_==1)return{start:f,end:{from:E+A,to:E+A+1},matched:$>>1==u>>1};_--}}n>0&&(w+=S.length)}return g.done?{start:f,matched:!1}:null}function Qq(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let o=i;for(let a=r;a<e;a++)t.charCodeAt(a)==9?o+=n-o%n:o++;return o}class Toe{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Qq(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Qq(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=a=>r?a.toLowerCase():a,o=this.string.substr(this.pos,e.length);return i(o)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function U7e(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||Z7e,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||a9,mergeTokens:t.mergeTokens!==!1}}function Z7e(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const Uq=new WeakMap;class o9 extends qu{constructor(e){let n=vI(e.languageData),r=U7e(e),i,o=new class extends yI{createParse(a,s,u){return new W7e(i,a,s,u)}};super(n,o,[],e.name),this.topNode=X7e(n,this),i=this,this.streamParser=r,this.stateAfter=new gr({perNode:!0}),this.tokenTable=e.tokenTable?new Poe(r.tokenTable):G7e}static define(e){return new o9(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=Uq.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=s9(this,e.node.tree,e.node.from,e.node.from,n??e.pos),o,a;if(i?(a=i.state,o=i.pos+1):(a=this.streamParser.startState(e.unit),o=e.node.from),e.pos-o>1e4)return null;for(;o<e.pos;){let u=e.state.doc.lineAt(o),f=Math.min(e.pos,u.to);if(u.length){let g=r?r(u.from):-1,_=new Toe(u.text,e.state.tabSize,e.unit,g<0?void 0:g);for(;_.pos<f-u.from;)Eoe(this.streamParser.token,_,a)}else this.streamParser.blankLine(a,e.unit);if(f==e.pos)break;o=u.to+1}let s=e.lineAt(e.pos);return r&&n==null&&Uq.set(e.state,s.from),this.streamParser.indent(a,/^\s*(.*)/.exec(s.text)[1],e)}get allowsNesting(){return!1}}function s9(t,e,n,r,i){let o=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(o)return{state:t.streamParser.copyState(o),pos:n+e.length};for(let a=e.children.length-1;a>=0;a--){let s=e.children[a],u=n+e.positions[a],f=s instanceof Vr&&u<i&&s9(t,s,u,r,i);if(f)return f}return null}function koe(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let o=e.children.length-1;o>=0;o--){let a=e.positions[o],s=e.children[o],u;if(a<r&&s instanceof Vr){if(!(u=koe(t,s,n-a,r-a,i)))break;return i?new Vr(e.type,e.children.slice(0,o).concat(u),e.positions.slice(0,o+1),a+u.length):u}}return null}function q7e(t,e,n,r,i){for(let o of e){let a=o.from+(o.openStart?25:0),s=o.to-(o.openEnd?25:0),u=a<=n&&s>n&&s9(t,o.tree,0-o.offset,n,s),f;if(u&&u.pos<=r&&(f=koe(t,o.tree,n+o.offset,u.pos+o.offset,!1)))return{state:u.state,tree:f}}return{state:t.streamParser.startState(i?Cb(i):4),tree:Vr.empty}}let W7e=class{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let o=Sb.get(),a=i[0].from,{state:s,tree:u}=q7e(e,r,a,this.to,o?.state);this.state=s,this.parsedPos=this.chunkStart=a+u.length;for(let f=0;f<u.children.length;f++)this.chunks.push(u.children[f]),this.chunkPos.push(u.positions[f]);o&&this.parsedPos<o.viewport.from-1e5&&i.some(f=>f.from<=o.viewport.from&&f.to>=o.viewport.from)&&(this.state=this.lang.streamParser.startState(Cb(o.state)),o.skipUntilInView(this.parsedPos,o.viewport.from),this.parsedPos=o.viewport.from),this.moveRangeIndex()}advance(){let e=Sb.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let o=this.ranges[i].to;if(o>=r||(n=n.slice(0,o-(r-n.length)),i++,i==this.ranges.length))break;let a=this.ranges[i].from,s=this.lineAfter(a);n+=s,r=a+s.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,o=e+n;if(r>0?i>o:i>=o)break;let a=this.ranges[++this.rangeIndex].from;n+=a-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let o=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let s=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,o+=this.chunk.length-s}let a=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&o==4&&a>=0&&this.chunk[a]==e&&this.chunk[a+2]==n?this.chunk[a+2]=r:this.chunk.push(e,n,r,o),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:o}=this.lang,a=new Toe(n,e?e.state.tabSize:4,e?Cb(e.state):2);if(a.eol())o.blankLine(this.state,a.indentUnit);else for(;!a.eol();){let s=Eoe(o.token,a,this.state);if(s&&(i=this.emitToken(this.lang.tokenTable.resolve(s),this.parsedPos+a.start,this.parsedPos+a.pos,i)),a.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Vr.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:H7e,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new Vr(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Vr(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}};function Eoe(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const a9=Object.create(null),xT=[ta.none],H7e=new zO(xT),Zq=[],qq=Object.create(null),Aoe=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Aoe[t]=Moe(a9,e);class Poe{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Aoe)}resolve(e){return e?this.table[e]||(this.table[e]=Moe(this.extra,e)):0}}const G7e=new Poe(a9);function KD(t,e){Zq.indexOf(t)>-1||(Zq.push(t),console.warn(e))}function Moe(t,e){let n=[];for(let s of e.split(" ")){let u=[];for(let f of s.split(".")){let g=t[f]||Be[f];g?typeof g=="function"?u.length?u=u.map(g):KD(f,`Modifier ${f} used at start of tag`):u.length?KD(f,`Tag ${f} used as modifier`):u=Array.isArray(g)?g:[g]:KD(f,`Unknown highlighting tag ${f}`)}for(let f of u)n.push(f)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(s=>s.id),o=qq[i];if(o)return o.id;let a=qq[i]=ta.define({id:xT.length,name:r,props:[NO({[r]:n})]});return xT.push(a),a.id}function X7e(t,e){let n=ta.define({id:xT.length,name:"Document",props:[T0.add(()=>t),BO.add(()=>r=>e.getIndent(r))],top:!0});return xT.push(n),n}go.RTL,go.LTR;class l9{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=Ji(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),o=i.search(Ioe(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function Wq(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Y7e(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let o=1;o<i.length;o++)n[i[o]]=!0}let r=Wq(e)+Wq(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Roe(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:Y7e(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:n}:null}}function K7e(t,e){return n=>{for(let r=Ji(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(n)}}class Hq{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function J_(t){return t.selection.main.from}function Ioe(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",o=r[r.length-1]!="$";return!i&&!o?t:new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const c9=cy.define();function J7e(t,e,n,r){let{main:i}=t.selection,o=n-i.from,a=r-i.from;return{...t.changeByRange(s=>{if(s!=i&&n!=r&&t.sliceDoc(s.from+o,s.from+a)!=t.sliceDoc(n,r))return{range:s};let u=t.toText(e);return{changes:{from:s.from+o,to:r==i.from?s.to:s.from+a,insert:u},range:Ft.cursor(s.from+o+u.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const Gq=new WeakMap;function eje(t){if(!Array.isArray(t))return t;let e=Gq.get(t);return e||Gq.set(t,e=Roe(t)),e}const uM=fr.define(),wT=fr.define();class tje{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=Wc(e,n),i=Np(r);this.chars.push(r);let o=e.slice(n,n+i),a=o.toUpperCase();this.folded.push(Wc(a==o?o.toLowerCase():a,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:o,byWord:a}=this;if(n.length==1){let z=Wc(e,0),B=Np(z),F=B==e.length?0:-100;if(z!=n[0])if(z==r[0])F+=-200;else return null;return this.ret(F,[0,B])}let s=e.indexOf(this.pattern);if(s==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let u=n.length,f=0;if(s<0){for(let z=0,B=Math.min(e.length,200);z<B&&f<u;){let F=Wc(e,z);(F==n[f]||F==r[f])&&(i[f++]=z),z+=Np(F)}if(f<u)return null}let g=0,_=0,w=!1,S=0,E=-1,A=-1,R=/[a-z]/.test(e),$=!0;for(let z=0,B=Math.min(e.length,200),F=0;z<B&&_<u;){let U=Wc(e,z);s<0&&(g<u&&U==n[g]&&(o[g++]=z),S<u&&(U==n[S]||U==r[S]?(S==0&&(E=z),A=z+1,S++):S=0));let q,H=U<255?U>=48&&U<=57||U>=97&&U<=122?2:U>=65&&U<=90?1:0:(q=$B(U))!=q.toLowerCase()?1:q!=q.toUpperCase()?2:0;(!z||H==1&&R||F==0&&H!=0)&&(n[_]==U||r[_]==U&&(w=!0)?a[_++]=z:a.length&&($=!1)),F=H,z+=Np(U)}return _==u&&a[0]==0&&$?this.result(-100+(w?-200:0),a,e):S==u&&E==0?this.ret(-200-e.length+(A==e.length?0:-100),[0,A]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):S==u?this.ret(-900-e.length,[E,A]):_==u?this.result(-100+(w?-200:0)+-700+($?0:-1100),a,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],o=0;for(let a of n){let s=a+(this.astral?Np(Wc(r,a)):1);o&&i[o-1]==a?i[o-1]=s:(i[o++]=a,i[o++]=s)}return this.ret(e-r.length,i)}}class nje{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Aa=En.define({combine(t){return mm(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:rje,filterStrict:!1,compareCompletions:(e,n)=>(e.sortText||e.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>Xq(e(r),n(r)),optionClass:(e,n)=>r=>Xq(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function Xq(t,e){return t?e?t+" "+e:t:e}function rje(t,e,n,r,i,o){let a=t.textDirection==go.RTL,s=a,u=!1,f="top",g,_,w=e.left-i.left,S=i.right-e.right,E=r.right-r.left,A=r.bottom-r.top;if(s&&w<Math.min(E,S)?s=!1:!s&&S<Math.min(E,w)&&(s=!0),E<=(s?w:S))g=Math.max(i.top,Math.min(n.top,i.bottom-A))-e.top,_=Math.min(400,s?w:S);else{u=!0,_=Math.min(400,(a?e.right:i.right-e.left)-30);let z=i.bottom-e.bottom;z>=A||z>e.top?g=n.bottom-e.top:(f="bottom",g=e.bottom-n.top)}let R=(e.bottom-e.top)/o.offsetHeight,$=(e.right-e.left)/o.offsetWidth;return{style:`${f}: ${g/R}px; max-width: ${_/$}px`,class:"cm-completionInfo-"+(u?a?"left-narrow":"right-narrow":s?"left":"right")}}function ije(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,o){let a=document.createElement("span");a.className="cm-completionLabel";let s=n.displayLabel||n.label,u=0;for(let f=0;f<o.length;){let g=o[f++],_=o[f++];g>u&&a.appendChild(document.createTextNode(s.slice(u,g)));let w=a.appendChild(document.createElement("span"));w.appendChild(document.createTextNode(s.slice(g,_))),w.className="cm-completionMatchedText",u=_}return u<s.length&&a.appendChild(document.createTextNode(s.slice(u))),a},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function JD(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class oje{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:u=>this.placeInfo(u),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:o,selected:a}=i.open,s=e.state.facet(Aa);this.optionContent=ije(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=JD(o.length,a,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",u=>{let{options:f}=e.state.field(n).open;for(let g=u.target,_;g&&g!=this.dom;g=g.parentNode)if(g.nodeName=="LI"&&(_=/-(\d+)$/.exec(g.id))&&+_[1]<f.length){this.applyCompletion(e,f[+_[1]]),u.preventDefault();return}}),this.dom.addEventListener("focusout",u=>{let f=e.state.field(this.stateField,!1);f&&f.tooltip&&e.state.facet(Aa).closeOnBlur&&u.relatedTarget!=e.contentDOM&&e.dispatch({effects:wT.of(null)})}),this.showOptions(o,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:o,selected:a,disabled:s}=r.open;(!i.open||i.open.options!=o)&&(this.range=JD(o.length,a,e.state.facet(Aa).maxRenderedOptions),this.showOptions(o,r.id)),this.updateSel(),s!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=JD(n.options.length,n.selected,this.view.state.facet(Aa).maxRenderedOptions),this.showOptions(n.options,e.id));let r=this.updateSelectedOption(n.selected);if(r){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:o}=i;if(!o)return;let a=typeof o=="string"?document.createTextNode(o):o(i);if(!a)return;"then"in a?a.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s,i)}).catch(s=>Kc(this.view.state,s,"completion info")):(this.addInfoPane(a,i),r.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",r.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:o}=e;r.appendChild(i),this.infoDestroy=o||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&(r.removeAttribute("aria-selected"),r.removeAttribute("aria-describedby"));return n&&aje(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.space;if(!o){let a=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:a.clientWidth,bottom:a.clientHeight}}return i.top>Math.min(o.bottom,n.bottom)-10||i.bottom<Math.max(o.top,n.top)+10?null:this.view.state.facet(Aa).positionInfo(this.view,n,i,r,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",a=>{a.target==i&&a.preventDefault()});let o=null;for(let a=r.from;a<r.to;a++){let{completion:s,match:u}=e[a],{section:f}=s;if(f){let w=typeof f=="string"?f:f.name;if(w!=o&&(a>r.from||r.from==0))if(o=w,typeof f!="string"&&f.header)i.appendChild(f.header(f));else{let S=i.appendChild(document.createElement("completion-section"));S.textContent=w}}const g=i.appendChild(document.createElement("li"));g.id=n+"-"+a,g.setAttribute("role","option");let _=this.optionClass(s);_&&(g.className=_);for(let w of this.optionContent){let S=w(s,this.view.state,this.view,u);S&&g.appendChild(S)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function sje(t,e){return n=>new oje(n,t,e)}function aje(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function Yq(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function lje(t,e){let n=[],r=null,i=null,o=g=>{n.push(g);let{section:_}=g.completion;if(_){r||(r=[]);let w=typeof _=="string"?_:_.name;r.some(S=>S.name==w)||r.push(typeof _=="string"?{name:w}:_)}},a=e.facet(Aa);for(let g of t)if(g.hasResult()){let _=g.result.getMatch;if(g.result.filter===!1)for(let w of g.result.options)o(new Hq(w,g.source,_?_(w):[],1e9-n.length));else{let w=e.sliceDoc(g.from,g.to),S,E=a.filterStrict?new nje(w):new tje(w);for(let A of g.result.options)if(S=E.match(A.label)){let R=A.displayLabel?_?_(A,S.matched):[]:S.matched,$=S.score+(A.boost||0);if(o(new Hq(A,g.source,R,$)),typeof A.section=="object"&&A.section.rank==="dynamic"){let{name:z}=A.section;i||(i=Object.create(null)),i[z]=Math.max($,i[z]||-1e9)}}}}if(r){let g=Object.create(null),_=0,w=(S,E)=>(S.rank==="dynamic"&&E.rank==="dynamic"?i[E.name]-i[S.name]:0)||(typeof S.rank=="number"?S.rank:1e9)-(typeof E.rank=="number"?E.rank:1e9)||(S.name<E.name?-1:1);for(let S of r.sort(w))_-=1e5,g[S.name]=_;for(let S of n){let{section:E}=S.completion;E&&(S.score+=g[typeof E=="string"?E:E.name])}}let s=[],u=null,f=a.compareCompletions;for(let g of n.sort((_,w)=>w.score-_.score||f(_.completion,w.completion))){let _=g.completion;!u||u.label!=_.label||u.detail!=_.detail||u.type!=null&&_.type!=null&&u.type!=_.type||u.apply!=_.apply||u.boost!=_.boost?s.push(g):Yq(g.completion)>Yq(u)&&(s[s.length-1]=g),u=g.completion}return s}class H1{constructor(e,n,r,i,o,a){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=o,this.disabled=a}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new H1(this.options,Kq(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,o,a){if(i&&!a&&e.some(f=>f.isPending))return i.setDisabled();let s=lje(e,n);if(!s.length)return i&&e.some(f=>f.isPending)?i.setDisabled():null;let u=n.facet(Aa).selectOnOpen?0:-1;if(i&&i.selected!=u&&i.selected!=-1){let f=i.options[i.selected].completion;for(let g=0;g<s.length;g++)if(s[g].completion==f){u=g;break}}return new H1(s,Kq(r,u),{pos:e.reduce((f,g)=>g.hasResult()?Math.min(f,g.from):f,1e8),create:pje,above:o.aboveCursor},i?i.timestamp:Date.now(),u,!1)}map(e){return new H1(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new H1(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class hM{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new hM(dje,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(Aa),o=(r.override||n.languageDataAt("autocomplete",J_(n)).map(eje)).map(u=>(this.active.find(g=>g.source==u)||new Qh(u,this.active.some(g=>g.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((u,f)=>u==this.active[f])&&(o=this.active);let a=this.open,s=e.effects.some(u=>u.is(u9));a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some(u=>u.hasResult()&&e.changes.touchesRange(u.from,u.to))||!cje(o,this.active)||s?a=H1.build(o,n,this.id,a,r,s):a&&a.disabled&&!o.some(u=>u.isPending)&&(a=null),!a&&o.every(u=>!u.isPending)&&o.some(u=>u.hasResult())&&(o=o.map(u=>u.hasResult()?new Qh(u.source,0):u));for(let u of e.effects)u.is(Loe)&&(a=a&&a.setSelected(u.value,this.id));return o==this.active&&a==this.open?this:new hM(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?uje:hje}}function cje(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,o=r==e.length;if(i||o)return i==o;if(t[n++].result!=e[r++].result)return!1}}const uje={"aria-autocomplete":"list"},hje={};function Kq(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const dje=[];function Doe(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(c9);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Qh{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=Doe(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new Qh(i.source,0)),r&4&&i.state==0&&(i=new Qh(this.source,1)),i=i.updateFor(e,r);for(let o of e.effects)if(o.is(uM))i=new Qh(i.source,1,o.value);else if(o.is(wT))i=new Qh(i.source,0);else if(o.is(u9))for(let a of o.value)a.source==i.source&&(i=a);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(J_(e.state))}}class fw extends Qh{constructor(e,n,r,i,o,a){super(e,3,n),this.limit=r,this.result=i,this.from=o,this.to=a}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),s=J_(e.state);if(s>a||!i||n&2&&(J_(e.startState)==this.from||s<this.limit))return new Qh(this.source,n&4?1:0);let u=e.changes.mapPos(this.limit);return fje(i.validFor,e.state,o,a)?new fw(this.source,this.explicit,u,i,o,a):i.update&&(i=i.update(i,o,a,new l9(e.state,s,!1)))?new fw(this.source,this.explicit,u,i,i.from,(r=i.to)!==null&&r!==void 0?r:J_(e.state)):new Qh(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new fw(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Qh(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function fje(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):Ioe(t,!0).test(i)}const u9=fr.define({map(t,e){return t.map(n=>n.map(e))}}),Loe=fr.define(),Hc=Rs.define({create(){return hM.start()},update(t,e){return t.update(e)},provide:t=>[YB.from(t,e=>e.tooltip),un.contentAttributes.from(t,e=>e.attrs)]});function h9(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Hc).active.find(i=>i.source==e.source);return r instanceof fw?(typeof n=="string"?t.dispatch({...J7e(t.state,n,r.from,r.to),annotations:c9.of(e.completion)}):n(t,e.completion,r.from,r.to),!0):!1}const pje=sje(Hc,h9);function $A(t,e="option"){return n=>{let r=n.state.field(Hc,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Aa).interactionDelay)return!1;let i=1,o;e=="page"&&(o=Gie(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=r.open.options,s=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:a-1;return s<0?s=e=="page"?0:a-1:s>=a&&(s=e=="page"?a-1:0),n.dispatch({effects:Loe.of(s)}),!0}}const mje=t=>{let e=t.state.field(Hc,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Aa).interactionDelay?!1:h9(t,e.open.options[e.open.selected])},eL=t=>t.state.field(Hc,!1)?(t.dispatch({effects:uM.of(!0)}),!0):!1,gje=t=>{let e=t.state.field(Hc,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:wT.of(null)}),!0)};class yje{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const vje=50,_je=1e3,bje=As.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Hc).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(Hc),n=t.state.facet(Aa);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Hc)==e)return;let r=t.transactions.some(o=>{let a=Doe(o,n);return a&8||(o.selection||o.docChanged)&&!(a&3)});for(let o=0;o<this.running.length;o++){let a=this.running[o];if(r||a.context.abortOnDocChange&&t.docChanged||a.updates.length+t.transactions.length>vje&&Date.now()-a.time>_je){for(let s of a.context.abortListeners)try{s()}catch(u){Kc(this.view.state,u)}a.context.abortListeners=null,this.running.splice(o--,1)}else a.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(o=>o.effects.some(a=>a.is(uM)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(a=>a.active.source==o.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let o of t.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Hc);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Aa).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=J_(e),r=new l9(e,n,t.explicit,this.view),i=new yje(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:wT.of(null)}),Kc(this.view.state,o)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Aa).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Aa),r=this.view.state.field(Hc);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(o.done===void 0)continue;if(this.running.splice(i--,1),o.done){let s=J_(o.updates.length?o.updates[0].startState:this.view.state),u=Math.min(s,o.done.from+(o.active.explicit?0:1)),f=new fw(o.active.source,o.active.explicit,u,o.done,o.done.from,(t=o.done.to)!==null&&t!==void 0?t:s);for(let g of o.updates)f=f.update(g,n);if(f.hasResult()){e.push(f);continue}}let a=r.active.find(s=>s.source==o.active.source);if(a&&a.isPending)if(o.done==null){let s=new Qh(o.active.source,0);for(let u of o.updates)s=s.update(u,n);s.isPending||e.push(s)}else this.startQuery(a)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:u9.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Hc,!1);if(e&&e.tooltip&&this.view.state.facet(Aa).closeOnBlur){let n=e.open&&Gie(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:wT.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:uM.of(!1)}),20),this.composing=0}}}),xje=typeof navigator=="object"&&/Win/.test(navigator.platform),wje=Pf.highest(un.domEventHandlers({keydown(t,e){let n=e.state.field(Hc,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(xje&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(a=>a.source==r.source),o=r.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(t.key)>-1&&h9(e,r),!1}})),$oe=un.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Oje{constructor(e,n,r,i){this.field=e,this.line=n,this.from=r,this.to=i}}class d9{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,rl.TrackDel),r=e.mapPos(this.to,1,rl.TrackDel);return n==null||r==null?null:new d9(this.field,n,r)}}class f9{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],i=[n],o=e.doc.lineAt(n),a=/^\s*/.exec(o.text)[0];for(let u of this.lines){if(r.length){let f=a,g=/^\t*/.exec(u)[0].length;for(let _=0;_<g;_++)f+=e.facet(Ck);i.push(n+f.length-g),u=f+u.slice(g)}r.push(u),n+=u.length+1}let s=this.fieldPositions.map(u=>new d9(u.field,i[u.line]+u.from,i[u.line]+u.to));return{text:r,ranges:s}}static parse(e){let n=[],r=[],i=[],o;for(let a of e.split(/\r\n?|\n/)){for(;o=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(a);){let s=o[1]?+o[1]:null,u=o[2]||o[3]||"",f=-1,g=u.replace(/\\[{}]/g,_=>_[1]);for(let _=0;_<n.length;_++)(s!=null?n[_].seq==s:g&&n[_].name==g)&&(f=_);if(f<0){let _=0;for(;_<n.length&&(s==null||n[_].seq!=null&&n[_].seq<s);)_++;n.splice(_,0,{seq:s,name:g}),f=_;for(let w of i)w.field>=f&&w.field++}for(let _ of i)if(_.line==r.length&&_.from>o.index){let w=o[2]?3+(o[1]||"").length:2;_.from-=w,_.to-=w}i.push(new Oje(f,r.length,o.index,o.index+g.length)),a=a.slice(0,o.index)+u+a.slice(o.index+o[0].length)}a=a.replace(/\\([{}])/g,(s,u,f)=>{for(let g of i)g.line==r.length&&g.from>f&&(g.from--,g.to--);return u}),r.push(a)}return new f9(r,i)}}let Sje=zn.widget({widget:new class extends od{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),Cje=zn.mark({class:"cm-snippetField"});class jO{constructor(e,n){this.ranges=e,this.active=n,this.deco=zn.set(e.map(r=>(r.from==r.to?Sje:Cje).range(r.from,r.to)),!0)}map(e){let n=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;n.push(i)}return new jO(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const Ek=fr.define({map(t,e){return t&&t.map(e)}}),Tje=fr.define(),OT=Rs.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(Ek))return n.value;if(n.is(Tje)&&t)return new jO(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>un.decorations.from(t,e=>e?e.deco:zn.none)});function p9(t,e){return Ft.create(t.filter(n=>n.field==e).map(n=>Ft.range(n.from,n.to)))}function kje(t){let e=f9.parse(t);return(n,r,i,o)=>{let{text:a,ranges:s}=e.instantiate(n.state,i),{main:u}=n.state.selection,f={changes:{from:i,to:o==u.from?u.to:o,insert:Ti.of(a)},scrollIntoView:!0,annotations:r?[c9.of(r),Xs.userEvent.of("input.complete")]:void 0};if(s.length&&(f.selection=p9(s,0)),s.some(g=>g.field>0)){let g=new jO(s,0),_=f.effects=[Ek.of(g)];n.state.field(OT,!1)===void 0&&_.push(fr.appendConfig.of([OT,Rje,Ije,$oe]))}n.dispatch(n.state.update(f))}}function zoe(t){return({state:e,dispatch:n})=>{let r=e.field(OT,!1);if(!r||t<0&&r.active==0)return!1;let i=r.active+t,o=t>0&&!r.ranges.some(a=>a.field==i+t);return n(e.update({selection:p9(r.ranges,i),effects:Ek.of(o?null:new jO(r.ranges,i)),scrollIntoView:!0})),!0}}const Eje=({state:t,dispatch:e})=>t.field(OT,!1)?(e(t.update({effects:Ek.of(null)})),!0):!1,Aje=zoe(1),Pje=zoe(-1),Mje=[{key:"Tab",run:Aje,shift:Pje},{key:"Escape",run:Eje}],Jq=En.define({combine(t){return t.length?t[0]:Mje}}),Rje=Pf.highest($O.compute([Jq],t=>t.facet(Jq)));function Qc(t,e){return{...e,apply:kje(t)}}const Ije=un.domEventHandlers({mousedown(t,e){let n=e.state.field(OT,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=n.ranges.find(o=>o.from<=r&&o.to>=r);return!i||i.field==n.active?!1:(e.dispatch({selection:p9(n.ranges,i.field),effects:Ek.of(n.ranges.some(o=>o.field>i.field)?new jO(n.ranges,i.field):null),scrollIntoView:!0}),!0)}}),ST={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},U_=fr.define({map(t,e){let n=e.mapPos(t,-1,rl.TrackAfter);return n??void 0}}),m9=new class extends Q0{};m9.startSide=1;m9.endSide=-1;const Noe=Rs.define({create(){return qr.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(U_)&&(t=t.update({add:[m9.range(n.value,n.value+1)]}));return t}});function Dje(){return[$je,Noe]}const tL="()[]{}<>";function Boe(t){for(let e=0;e<tL.length;e+=2)if(tL.charCodeAt(e)==t)return tL.charAt(e+1);return $B(t<128?t:t+1)}function Foe(t,e){return t.languageDataAt("closeBrackets",e)[0]||ST}const Lje=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),$je=un.inputHandler.of((t,e,n,r)=>{if((Lje?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&Np(Wc(r,0))==1||e!=i.from||n!=i.to)return!1;let o=Bje(t.state,r);return o?(t.dispatch(o),!0):!1}),zje=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Foe(t,t.selection.main.head).brackets||ST.brackets,i=null,o=t.changeByRange(a=>{if(a.empty){let s=Fje(t.doc,a.head);for(let u of r)if(u==s&&xI(t.doc,a.head)==Boe(Wc(u,0)))return{changes:{from:a.head-u.length,to:a.head+u.length},range:Ft.cursor(a.head-u.length)}}return{range:i=a}});return i||e(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},Nje=[{key:"Backspace",run:zje}];function Bje(t,e){let n=Foe(t,t.selection.main.head),r=n.brackets||ST.brackets;for(let i of r){let o=Boe(Wc(i,0));if(e==i)return o==i?Qje(t,i,r.indexOf(i+i+i)>-1,n):jje(t,i,o,n.before||ST.before);if(e==o&&joe(t,t.selection.main.from))return Vje(t,i,o)}return null}function joe(t,e){let n=!1;return t.field(Noe).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function xI(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Np(Wc(n,0)))}function Fje(t,e){let n=t.sliceString(e-2,e);return Np(Wc(n,0))==n.length?n:n.slice(1)}function jje(t,e,n,r){let i=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:n,from:a.to}],effects:U_.of(a.to+e.length),range:Ft.range(a.anchor+e.length,a.head+e.length)};let s=xI(t.doc,a.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:e+n,from:a.head},effects:U_.of(a.head+e.length),range:Ft.cursor(a.head+e.length)}:{range:i=a}});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Vje(t,e,n){let r=null,i=t.changeByRange(o=>o.empty&&xI(t.doc,o.head)==n?{changes:{from:o.head,to:o.head+n.length,insert:n},range:Ft.cursor(o.head+n.length)}:r={range:o});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Qje(t,e,n,r){let i=r.stringPrefixes||ST.stringPrefixes,o=null,a=t.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:e,from:s.to}],effects:U_.of(s.to+e.length),range:Ft.range(s.anchor+e.length,s.head+e.length)};let u=s.head,f=xI(t.doc,u),g;if(f==e){if(eW(t,u))return{changes:{insert:e+e,from:u},effects:U_.of(u+e.length),range:Ft.cursor(u+e.length)};if(joe(t,u)){let w=n&&t.sliceDoc(u,u+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:u,to:u+w.length,insert:w},range:Ft.cursor(u+w.length)}}}else{if(n&&t.sliceDoc(u-2*e.length,u)==e+e&&(g=tW(t,u-2*e.length,i))>-1&&eW(t,g))return{changes:{insert:e+e+e+e,from:u},effects:U_.of(u+e.length),range:Ft.cursor(u+e.length)};if(t.charCategorizer(u)(f)!=Uo.Word&&tW(t,u,i)>-1&&!Uje(t,u,e,i))return{changes:{insert:e+e,from:u},effects:U_.of(u+e.length),range:Ft.cursor(u+e.length)}}return{range:o=s}});return o?null:t.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function eW(t,e){let n=Ji(t).resolveInner(e+1);return n.parent&&n.from==e}function Uje(t,e,n,r){let i=Ji(t).resolveInner(e,-1),o=r.reduce((a,s)=>Math.max(a,s.length),0);for(let a=0;a<5;a++){let s=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),u=s.indexOf(n);if(!u||u>-1&&r.indexOf(s.slice(0,u))>-1){let g=i.firstChild;for(;g&&g.from==i.from&&g.to-g.from>n.length+u;){if(t.sliceDoc(g.to-n.length,g.to)==n)return!1;g=g.firstChild}return!0}let f=i.to==e&&i.parent;if(!f)break;i=f}return!1}function tW(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=Uo.Word)return e;for(let i of n){let o=e-i.length;if(t.sliceDoc(o,e)==i&&r(t.sliceDoc(o-1,o))!=Uo.Word)return o}return-1}function Zje(t={}){return[wje,Hc,Aa.of(t),bje,qje,$oe]}const Voe=[{key:"Ctrl-Space",run:eL},{mac:"Alt-`",run:eL},{mac:"Alt-i",run:eL},{key:"Escape",run:gje},{key:"ArrowDown",run:$A(!0)},{key:"ArrowUp",run:$A(!1)},{key:"PageDown",run:$A(!0,"page")},{key:"PageUp",run:$A(!1,"page")},{key:"Enter",run:mje}],qje=Pf.highest($O.computeN([Aa],t=>t.facet(Aa).defaultKeymap?[Voe]:[])),Wje=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=y9(t.state,n.from);return r.line?Hje(t):r.block?Xje(t):!1};function g9(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const Hje=g9(Jje,0),Gje=g9(Qoe,0),Xje=g9((t,e)=>Qoe(t,e,Kje(e)),0);function y9(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const S2=50;function Yje(t,{open:e,close:n},r,i){let o=t.sliceDoc(r-S2,r),a=t.sliceDoc(i,i+S2),s=/\s*$/.exec(o)[0].length,u=/^\s*/.exec(a)[0].length,f=o.length-s;if(o.slice(f-e.length,f)==e&&a.slice(u,u+n.length)==n)return{open:{pos:r-s,margin:s&&1},close:{pos:i+u,margin:u&&1}};let g,_;i-r<=2*S2?g=_=t.sliceDoc(r,i):(g=t.sliceDoc(r,r+S2),_=t.sliceDoc(i-S2,i));let w=/^\s*/.exec(g)[0].length,S=/\s*$/.exec(_)[0].length,E=_.length-S-n.length;return g.slice(w,w+e.length)==e&&_.slice(E,E+n.length)==n?{open:{pos:r+w+e.length,margin:/\s/.test(g.charAt(w+e.length))?1:0},close:{pos:i-S-n.length,margin:/\s/.test(_.charAt(E-1))?1:0}}:null}function Kje(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Qoe(t,e,n=e.selection.ranges){let r=n.map(o=>y9(e,o.from).block);if(!r.every(o=>o))return null;let i=n.map((o,a)=>Yje(e,r[a],o.from,o.to));if(t!=2&&!i.every(o=>o))return{changes:e.changes(n.map((o,a)=>i[a]?[]:[{from:o.from,insert:r[a].open+" "},{from:o.to,insert:" "+r[a].close}]))};if(t!=1&&i.some(o=>o)){let o=[];for(let a=0,s;a<i.length;a++)if(s=i[a]){let u=r[a],{open:f,close:g}=s;o.push({from:f.pos-u.open.length,to:f.pos+f.margin},{from:g.pos-g.margin,to:g.pos+u.close.length})}return{changes:o}}return null}function Jje(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:a}of n){let s=r.length,u=1e9,f=y9(e,o).line;if(f){for(let g=o;g<=a;){let _=e.doc.lineAt(g);if(_.from>i&&(o==a||a>_.from)){i=_.from;let w=/^\s*/.exec(_.text)[0].length,S=w==_.length,E=_.text.slice(w,w+f.length)==f?w:-1;w<_.text.length&&w<u&&(u=w),r.push({line:_,comment:E,token:f,indent:w,empty:S,single:!1})}g=_.to+1}if(u<1e9)for(let g=s;g<r.length;g++)r[g].indent<r[g].line.text.length&&(r[g].indent=u);r.length==s+1&&(r[s].single=!0)}}if(t!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:s,token:u,indent:f,empty:g,single:_}of r)(_||!g)&&o.push({from:s.from+f,insert:u+" "});let a=e.changes(o);return{changes:a,selection:e.selection.map(a,1)}}else if(t!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:a,comment:s,token:u}of r)if(s>=0){let f=a.from+s,g=f+u.length;a.text[g-a.from]==" "&&g++,o.push({from:f,to:g})}return{changes:o}}return null}const Fz=cy.define(),eVe=cy.define(),tVe=En.define(),Uoe=En.define({combine(t){return mm(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),Zoe=Rs.define({create(){return qp.empty},update(t,e){let n=e.state.facet(Uoe),r=e.annotation(Fz);if(r){let u=Jc.fromTransaction(e,r.selection),f=r.side,g=f==0?t.undone:t.done;return u?g=dM(g,g.length,n.minDepth,u):g=Hoe(g,e.startState.selection),new qp(f==0?r.rest:g,f==0?g:r.rest)}let i=e.annotation(eVe);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Xs.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let o=Jc.fromTransaction(e),a=e.annotation(Xs.time),s=e.annotation(Xs.userEvent);return o?t=t.addChanges(o,a,s,n,e):e.selection&&(t=t.addSelection(e.startState.selection,a,s,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new qp(t.done.map(Jc.fromJSON),t.undone.map(Jc.fromJSON))}});function nVe(t={}){return[Zoe,Uoe.of(t),un.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?qoe:e.inputType=="historyRedo"?jz:null;return r?(e.preventDefault(),r(n)):!1}})]}function wI(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(Zoe,!1);if(!i)return!1;let o=i.pop(t,n,e);return o?(r(o),!0):!1}}const qoe=wI(0,!1),jz=wI(1,!1),rVe=wI(0,!0),iVe=wI(1,!0);class Jc{constructor(e,n,r,i,o){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new Jc(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Jc(e.changes&&Qs.fromJSON(e.changes),[],e.mapped&&em.fromJSON(e.mapped),e.startSelection&&Ft.fromJSON(e.startSelection),e.selectionsAfter.map(Ft.fromJSON))}static fromTransaction(e,n){let r=Uh;for(let i of e.startState.facet(tVe)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new Jc(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Uh)}static selection(e){return new Jc(void 0,Uh,void 0,void 0,e)}}function dM(t,e,n,r){let i=e+1>n+20?e-n-1:0,o=t.slice(i,e);return o.push(r),o}function oVe(t,e){let n=[],r=!1;return t.iterChangedRanges((i,o)=>n.push(i,o)),e.iterChangedRanges((i,o,a,s)=>{for(let u=0;u<n.length;){let f=n[u++],g=n[u++];s>=f&&a<=g&&(r=!0)}}),r}function sVe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function Woe(t,e){return t.length?e.length?t.concat(e):t:e}const Uh=[],aVe=200;function Hoe(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-aVe));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),dM(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Jc.selection([e])]}function lVe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function nL(t,e){if(!t.length)return t;let n=t.length,r=Uh;for(;n;){let i=cVe(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=t.slice(0,n);return o[n-1]=i,o}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Jc.selection(r)]:Uh}function cVe(t,e,n){let r=Woe(t.selectionsAfter.length?t.selectionsAfter.map(s=>s.map(e)):Uh,n);if(!t.changes)return Jc.selection(r);let i=t.changes.map(e),o=e.mapDesc(t.changes,!0),a=t.mapped?t.mapped.composeDesc(o):o;return new Jc(i,fr.mapEffects(t.effects,e),a,t.startSelection.map(o),r)}const uVe=/^(input\.type|delete)($|\.)/;class qp{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new qp(this.done,this.undone):this}addChanges(e,n,r,i,o){let a=this.done,s=a[a.length-1];return s&&s.changes&&!s.changes.empty&&e.changes&&(!r||uVe.test(r))&&(!s.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,oVe(s.changes,e.changes))||r=="input.type.compose")?a=dM(a,a.length-1,i.minDepth,new Jc(e.changes.compose(s.changes),Woe(fr.mapEffects(e.effects,s.changes),s.effects),s.mapped,s.startSelection,Uh)):a=dM(a,a.length,i.minDepth,e),new qp(a,Uh,n,r)}addSelection(e,n,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Uh;return o.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&sVe(o[o.length-1],e)?this:new qp(Hoe(this.done,e),this.undone,n,r)}addMapping(e){return new qp(nL(this.done,e),nL(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1],a=o.selectionsAfter[0]||n.selection;if(r&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Fz.of({side:e,rest:lVe(i),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let s=i.length==1?Uh:i.slice(0,i.length-1);return o.mapped&&(s=nL(s,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Fz.of({side:e,rest:s,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}qp.empty=new qp(Uh,Uh);const hVe=[{key:"Mod-z",run:qoe,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:jz,preventDefault:!0},{linux:"Ctrl-Shift-z",run:jz,preventDefault:!0},{key:"Mod-u",run:rVe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:iVe,preventDefault:!0}];function VO(t,e){return Ft.create(t.ranges.map(e),t.mainIndex)}function Mf(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Rf({state:t,dispatch:e},n){let r=VO(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Mf(t,r)),!0)}function OI(t,e){return Ft.cursor(e?t.to:t.from)}function Goe(t,e){return Rf(t,n=>n.empty?t.moveByChar(n,e):OI(n,e))}function Nl(t){return t.textDirectionAt(t.state.selection.main.head)==go.LTR}const Xoe=t=>Goe(t,!Nl(t)),Yoe=t=>Goe(t,Nl(t));function Koe(t,e){return Rf(t,n=>n.empty?t.moveByGroup(n,e):OI(n,e))}const dVe=t=>Koe(t,!Nl(t)),fVe=t=>Koe(t,Nl(t));function pVe(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function SI(t,e,n){let r=Ji(t).resolveInner(e.head),i=n?gr.closedBy:gr.openedBy;for(let u=e.head;;){let f=n?r.childAfter(u):r.childBefore(u);if(!f)break;pVe(t,f,i)?r=f:u=n?f.to:f.from}let o=r.type.prop(i),a,s;return o&&(a=n?Zp(t,r.from,1):Zp(t,r.to,-1))&&a.matched?s=n?a.end.to:a.end.from:s=n?r.to:r.from,Ft.cursor(s,n?-1:1)}const mVe=t=>Rf(t,e=>SI(t.state,e,!Nl(t))),gVe=t=>Rf(t,e=>SI(t.state,e,Nl(t)));function Joe(t,e){return Rf(t,n=>{if(!n.empty)return OI(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const ese=t=>Joe(t,!1),tse=t=>Joe(t,!0);function nse(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let o of t.state.facet(un.scrollMargins)){let a=o(t);a?.top&&(n=Math.max(a?.top,n)),a?.bottom&&(r=Math.max(a?.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function rse(t,e){let n=nse(t),{state:r}=t,i=VO(r.selection,a=>a.empty?t.moveVertically(a,e,n.height):OI(a,e));if(i.eq(r.selection))return!1;let o;if(n.selfScroll){let a=t.coordsAtPos(r.selection.main.head),s=t.scrollDOM.getBoundingClientRect(),u=s.top+n.marginTop,f=s.bottom-n.marginBottom;a&&a.top>u&&a.bottom<f&&(o=un.scrollIntoView(i.main.head,{y:"start",yMargin:a.top-u}))}return t.dispatch(Mf(r,i),{effects:o}),!0}const nW=t=>rse(t,!1),Vz=t=>rse(t,!0);function rv(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let o=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=Ft.cursor(r.from+o))}return i}const yVe=t=>Rf(t,e=>rv(t,e,!0)),vVe=t=>Rf(t,e=>rv(t,e,!1)),_Ve=t=>Rf(t,e=>rv(t,e,!Nl(t))),bVe=t=>Rf(t,e=>rv(t,e,Nl(t))),xVe=t=>Rf(t,e=>Ft.cursor(t.lineBlockAt(e.head).from,1)),wVe=t=>Rf(t,e=>Ft.cursor(t.lineBlockAt(e.head).to,-1));function OVe(t,e,n){let r=!1,i=VO(t.selection,o=>{let a=Zp(t,o.head,-1)||Zp(t,o.head,1)||o.head>0&&Zp(t,o.head-1,1)||o.head<t.doc.length&&Zp(t,o.head+1,-1);if(!a||!a.end)return o;r=!0;let s=a.start.from==o.head?a.end.to:a.end.from;return Ft.cursor(s)});return r?(e(Mf(t,i)),!0):!1}const SVe=({state:t,dispatch:e})=>OVe(t,e);function sd(t,e){let n=VO(t.state.selection,r=>{let i=e(r);return Ft.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Mf(t.state,n)),!0)}function ise(t,e){return sd(t,n=>t.moveByChar(n,e))}const ose=t=>ise(t,!Nl(t)),sse=t=>ise(t,Nl(t));function ase(t,e){return sd(t,n=>t.moveByGroup(n,e))}const CVe=t=>ase(t,!Nl(t)),TVe=t=>ase(t,Nl(t)),kVe=t=>sd(t,e=>SI(t.state,e,!Nl(t))),EVe=t=>sd(t,e=>SI(t.state,e,Nl(t)));function lse(t,e){return sd(t,n=>t.moveVertically(n,e))}const cse=t=>lse(t,!1),use=t=>lse(t,!0);function hse(t,e){return sd(t,n=>t.moveVertically(n,e,nse(t).height))}const rW=t=>hse(t,!1),iW=t=>hse(t,!0),AVe=t=>sd(t,e=>rv(t,e,!0)),PVe=t=>sd(t,e=>rv(t,e,!1)),MVe=t=>sd(t,e=>rv(t,e,!Nl(t))),RVe=t=>sd(t,e=>rv(t,e,Nl(t))),IVe=t=>sd(t,e=>Ft.cursor(t.lineBlockAt(e.head).from)),DVe=t=>sd(t,e=>Ft.cursor(t.lineBlockAt(e.head).to)),oW=({state:t,dispatch:e})=>(e(Mf(t,{anchor:0})),!0),sW=({state:t,dispatch:e})=>(e(Mf(t,{anchor:t.doc.length})),!0),aW=({state:t,dispatch:e})=>(e(Mf(t,{anchor:t.selection.main.anchor,head:0})),!0),lW=({state:t,dispatch:e})=>(e(Mf(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),LVe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),$Ve=({state:t,dispatch:e})=>{let n=CI(t).map(({from:r,to:i})=>Ft.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:Ft.create(n),userEvent:"select"})),!0},zVe=({state:t,dispatch:e})=>{let n=VO(t.selection,r=>{let i=Ji(t),o=i.resolveStack(r.from,1);if(r.empty){let a=i.resolveStack(r.from,-1);a.node.from>=o.node.from&&a.node.to<=o.node.to&&(o=a)}for(let a=o;a;a=a.next){let{node:s}=a;if((s.from<r.from&&s.to>=r.to||s.to>r.to&&s.from<=r.from)&&a.next)return Ft.range(s.to,s.from)}return r});return n.eq(t.selection)?!1:(e(Mf(t,n)),!0)};function dse(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let o of n.selection.ranges){let a=n.doc.lineAt(o.head);if(e?a.to<t.state.doc.length:a.from>0)for(let s=o;;){let u=t.moveVertically(s,e);if(u.head<a.from||u.head>a.to){i.some(f=>f.head==u.head)||i.push(u);break}else{if(u.head==s.head)break;s=u}}}return i.length==r.ranges.length?!1:(t.dispatch(Mf(n,Ft.create(i,i.length-1))),!0)}const NVe=t=>dse(t,!1),BVe=t=>dse(t,!0),FVe=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=Ft.create([n.main]):n.main.empty||(r=Ft.create([Ft.cursor(n.main.head)])),r?(e(Mf(t,r)),!0):!1};function Ak(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(o=>{let{from:a,to:s}=o;if(a==s){let u=e(o);u<a?(n="delete.backward",u=zA(t,u,!1)):u>a&&(n="delete.forward",u=zA(t,u,!0)),a=Math.min(a,u),s=Math.max(s,u)}else a=zA(t,a,!1),s=zA(t,s,!0);return a==s?{range:o}:{changes:{from:a,to:s},range:Ft.cursor(a,a<o.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?un.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function zA(t,e,n){if(t instanceof un)for(let r of t.state.facet(un.atomicRanges).map(i=>i(t)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=n?o:i)});return e}const fse=(t,e,n)=>Ak(t,r=>{let i=r.from,{state:o}=t,a=o.doc.lineAt(i),s,u;if(n&&!e&&i>a.from&&i<a.from+200&&!/[^ \t]/.test(s=a.text.slice(0,i-a.from))){if(s[s.length-1]=="	")return i-1;let f=Sf(s,o.tabSize),g=f%Cb(o)||Cb(o);for(let _=0;_<g&&s[s.length-1-_]==" ";_++)i--;u=i}else u=fa(a.text,i-a.from,e,e)+a.from,u==i&&a.number!=(e?o.doc.lines:1)?u+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(u-a.from,i-a.from))&&(u=fa(a.text,u-a.from,!1,!1)+a.from);return u}),Qz=t=>fse(t,!1,!0),pse=t=>fse(t,!0,!1),mse=(t,e)=>Ak(t,n=>{let r=n.head,{state:i}=t,o=i.doc.lineAt(r),a=i.charCategorizer(r);for(let s=null;;){if(r==(e?o.to:o.from)){r==n.head&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let u=fa(o.text,r-o.from,e)+o.from,f=o.text.slice(Math.min(r,u)-o.from,Math.max(r,u)-o.from),g=a(f);if(s!=null&&g!=s)break;(f!=" "||r!=n.head)&&(s=g),r=u}return r}),gse=t=>mse(t,!1),jVe=t=>mse(t,!0),VVe=t=>Ak(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),QVe=t=>Ak(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),UVe=t=>Ak(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),ZVe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Ti.of(["",""])},range:Ft.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},qVe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,o=t.doc.lineAt(i),a=i==o.from?i-1:fa(o.text,i-o.from,!1)+o.from,s=i==o.to?i+1:fa(o.text,i-o.from,!0)+o.from;return{changes:{from:a,to:s,insert:t.doc.slice(i,s).append(t.doc.slice(a,i))},range:Ft.cursor(s)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function CI(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=t.doc.lineAt(r.to-1)),n>=i.number){let a=e[e.length-1];a.to=o.to,a.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return e}function yse(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let o of CI(t)){if(n?o.to==t.doc.length:o.from==0)continue;let a=t.doc.lineAt(n?o.to+1:o.from-1),s=a.length+1;if(n){r.push({from:o.to,to:a.to},{from:o.from,insert:a.text+t.lineBreak});for(let u of o.ranges)i.push(Ft.range(Math.min(t.doc.length,u.anchor+s),Math.min(t.doc.length,u.head+s)))}else{r.push({from:a.from,to:o.from},{from:o.to,insert:t.lineBreak+a.text});for(let u of o.ranges)i.push(Ft.range(u.anchor-s,u.head-s))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:Ft.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const WVe=({state:t,dispatch:e})=>yse(t,e,!1),HVe=({state:t,dispatch:e})=>yse(t,e,!0);function vse(t,e,n){if(t.readOnly)return!1;let r=[];for(let o of CI(t))n?r.push({from:o.from,insert:t.doc.slice(o.from,o.to)+t.lineBreak}):r.push({from:o.to,insert:t.lineBreak+t.doc.slice(o.from,o.to)});let i=t.changes(r);return e(t.update({changes:i,selection:t.selection.map(i,n?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const GVe=({state:t,dispatch:e})=>vse(t,e,!1),XVe=({state:t,dispatch:e})=>vse(t,e,!0),YVe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(CI(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=VO(e.selection,i=>{let o;if(t.lineWrapping){let a=t.lineBlockAt(i.head),s=t.coordsAtPos(i.head,i.assoc||1);s&&(o=a.bottom+t.documentTop-s.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,o)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function KVe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Ji(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(gr.closedBy))&&o.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const cW=_se(!1),JVe=_se(!0);function _se(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:a}=i,s=e.doc.lineAt(o),u=!t&&o==a&&KVe(e,o);t&&(o=a=(a<=s.to?s:e.doc.lineAt(a)).to);let f=new _I(e,{simulateBreak:o,simulateDoubleBreak:!!u}),g=r9(f,o);for(g==null&&(g=Sf(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));a<s.to&&/\s/.test(s.text[a-s.from]);)a++;u?{from:o,to:a}=u:o>s.from&&o<s.from+100&&!/\S/.test(s.text.slice(0,o))&&(o=s.from);let _=["",bT(e,g)];return u&&_.push(bT(e,f.lineIndent(s.from,-1))),{changes:{from:o,to:a,insert:Ti.of(_)},range:Ft.cursor(o+1+_[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function v9(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let a=r.from;a<=r.to;){let s=t.doc.lineAt(a);s.number>n&&(r.empty||r.to>s.from)&&(e(s,i,r),n=s.number),a=s.to+1}let o=t.changes(i);return{changes:i,range:Ft.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const eQe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new _I(t,{overrideIndentation:o=>{let a=n[o];return a??-1}}),i=v9(t,(o,a,s)=>{let u=r9(r,o.from);if(u==null)return;/\S/.test(o.text)||(u=0);let f=/^\s*/.exec(o.text)[0],g=bT(t,u);(f!=g||s.from<o.from+f.length)&&(n[o.from]=u,a.push({from:o.from,to:o.from+f.length,insert:g}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},bse=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(v9(t,(n,r)=>{r.push({from:n.from,insert:t.facet(Ck)})}),{userEvent:"input.indent"})),!0),xse=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(v9(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let o=Sf(i,t.tabSize),a=0,s=bT(t,Math.max(0,o-Cb(t)));for(;a<i.length&&a<s.length&&i.charCodeAt(a)==s.charCodeAt(a);)a++;r.push({from:n.from+a,to:n.from+i.length,insert:s.slice(a)})}),{userEvent:"delete.dedent"})),!0),tQe=t=>(t.setTabFocusMode(),!0),nQe=[{key:"Ctrl-b",run:Xoe,shift:ose,preventDefault:!0},{key:"Ctrl-f",run:Yoe,shift:sse},{key:"Ctrl-p",run:ese,shift:cse},{key:"Ctrl-n",run:tse,shift:use},{key:"Ctrl-a",run:xVe,shift:IVe},{key:"Ctrl-e",run:wVe,shift:DVe},{key:"Ctrl-d",run:pse},{key:"Ctrl-h",run:Qz},{key:"Ctrl-k",run:VVe},{key:"Ctrl-Alt-h",run:gse},{key:"Ctrl-o",run:ZVe},{key:"Ctrl-t",run:qVe},{key:"Ctrl-v",run:Vz}],rQe=[{key:"ArrowLeft",run:Xoe,shift:ose,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:dVe,shift:CVe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:_Ve,shift:MVe,preventDefault:!0},{key:"ArrowRight",run:Yoe,shift:sse,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:fVe,shift:TVe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:bVe,shift:RVe,preventDefault:!0},{key:"ArrowUp",run:ese,shift:cse,preventDefault:!0},{mac:"Cmd-ArrowUp",run:oW,shift:aW},{mac:"Ctrl-ArrowUp",run:nW,shift:rW},{key:"ArrowDown",run:tse,shift:use,preventDefault:!0},{mac:"Cmd-ArrowDown",run:sW,shift:lW},{mac:"Ctrl-ArrowDown",run:Vz,shift:iW},{key:"PageUp",run:nW,shift:rW},{key:"PageDown",run:Vz,shift:iW},{key:"Home",run:vVe,shift:PVe,preventDefault:!0},{key:"Mod-Home",run:oW,shift:aW},{key:"End",run:yVe,shift:AVe,preventDefault:!0},{key:"Mod-End",run:sW,shift:lW},{key:"Enter",run:cW,shift:cW},{key:"Mod-a",run:LVe},{key:"Backspace",run:Qz,shift:Qz,preventDefault:!0},{key:"Delete",run:pse,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:gse,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:jVe,preventDefault:!0},{mac:"Mod-Backspace",run:QVe,preventDefault:!0},{mac:"Mod-Delete",run:UVe,preventDefault:!0}].concat(nQe.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),iQe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:mVe,shift:kVe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:gVe,shift:EVe},{key:"Alt-ArrowUp",run:WVe},{key:"Shift-Alt-ArrowUp",run:GVe},{key:"Alt-ArrowDown",run:HVe},{key:"Shift-Alt-ArrowDown",run:XVe},{key:"Mod-Alt-ArrowUp",run:NVe},{key:"Mod-Alt-ArrowDown",run:BVe},{key:"Escape",run:FVe},{key:"Mod-Enter",run:JVe},{key:"Alt-l",mac:"Ctrl-l",run:$Ve},{key:"Mod-i",run:zVe,preventDefault:!0},{key:"Mod-[",run:xse},{key:"Mod-]",run:bse},{key:"Mod-Alt-\\",run:eQe},{key:"Shift-Mod-k",run:YVe},{key:"Shift-Mod-\\",run:SVe},{key:"Mod-/",run:Wje},{key:"Alt-A",run:Gje},{key:"Ctrl-m",mac:"Shift-Alt-m",run:tQe}].concat(rQe),oQe={key:"Tab",run:bse,shift:xse};var uW={};class fM{constructor(e,n,r,i,o,a,s,u,f,g=0,_){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=o,this.score=a,this.buffer=s,this.bufferBase=u,this.curContext=f,this.lookAhead=g,this.parent=_}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new fM(e,[],n,r,r,0,[],0,i?new hW(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let r=e>>19,i=e&65535,{parser:o}=this.p,a=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),s=o.dynamicPrecedence(i);if(s&&(this.score+=s),r==0){this.pushState(o.getGoto(this.state,i,!0),this.reducePos),i<o.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(i,this.reducePos);return}let u=this.stack.length-(r-1)*3-(e&262144?6:0),f=u?this.stack[u-2]:this.p.ranges[0].from,g=this.reducePos-f;g>=2e3&&!(!((n=this.p.parser.nodeSet.types[i])===null||n===void 0)&&n.isAnonymous)&&(f==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=g):this.p.lastBigReductionSize<g&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=f,this.p.lastBigReductionSize=g));let _=u?this.stack[u-1]:0,w=this.bufferBase+this.buffer.length-_;if(i<o.minRepeatTerm||e&131072){let S=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,f,S,w+4,!0)}if(e&262144)this.state=this.stack[u];else{let S=this.stack[u-3];this.state=o.getGoto(S,i,!0)}for(;this.stack.length>u;)this.stack.pop();this.reduceContext(i,f)}storeNode(e,n,r,i=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,s=this.buffer.length;if(s==0&&a.parent&&(s=a.bufferBase-a.parent.bufferBase,a=a.parent),s>0&&a.buffer[s-4]==0&&a.buffer[s-1]>-1){if(n==r)return;if(a.buffer[s-2]>=n){a.buffer[s-2]=r;return}}}if(!o||this.pos==r)this.buffer.push(e,n,r,i);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let s=!1;for(let u=a;u>0&&this.buffer[u-2]>r;u-=4)if(this.buffer[u-1]>=0){s=!0;break}if(s)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,i>4&&(i-=4)}this.buffer[a]=e,this.buffer[a+1]=n,this.buffer[a+2]=r,this.buffer[a+3]=i}}shift(e,n,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:a}=this.p;(i>this.pos||n<=a.maxNode)&&(this.pos=i,a.stateFlag(o,1)||(this.reducePos=i)),this.pushState(o,r),this.shiftContext(n,r),n<=a.maxNode&&this.buffer.push(n,r,i,4)}else this.pos=i,this.shiftContext(n,r),n<=this.p.parser.maxNode&&this.buffer.push(n,r,i,4)}apply(e,n,r,i){e&65536?this.reduce(e):this.shift(e,n,r,i)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new fM(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new sQe(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(r==0)return!1;if((r&65536)==0)return!0;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let i=[];for(let o=0,a;o<n.length;o+=2)(a=n[o+1])!=this.state&&this.p.parser.hasAction(a,e)&&i.push(n[o],a);if(this.stack.length<120)for(let o=0;i.length<8&&o<n.length;o+=2){let a=n[o+1];i.some((s,u)=>u&1&&s==a)||i.push(n[o],a)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let o=n[i+1];if(o==this.state)continue;let a=this.split();a.pushState(o,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(n[i],this.pos),a.reducePos=this.pos,a.score-=200,r.push(a)}return r}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if((n&65536)==0)return!1;if(!e.validAction(this.state,n)){let r=n>>19,i=n&65535,o=this.stack.length-r*3;if(o<0||e.getGoto(this.stack[o],i,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;n=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],r=(i,o)=>{if(!n.includes(i))return n.push(i),e.allActions(i,a=>{if(!(a&393216))if(a&65536){let s=(a>>19)-o;if(s>1){let u=a&65535,f=this.stack.length-s*3;if(f>=0&&e.getGoto(this.stack[f],u,!1)>=0)return s<<19|65536|u}}else{let s=r(a,o+1);if(s!=null)return s}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new hW(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class hW{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class sQe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}}class pM{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new pM(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new pM(this.stack,this.pos,this.index)}}function U2(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let r=0,i=0;r<t.length;){let o=0;for(;;){let a=t.charCodeAt(r++),s=!1;if(a==126){o=65535;break}a>=92&&a--,a>=34&&a--;let u=a-32;if(u>=46&&(u-=46,s=!0),o+=u,s)break;o*=46}n?n[i++]=o:n=new e(o)}return n}class $P{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const dW=new $P;class aQe{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=dW,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,o=this.pos+e;for(;o<r.from;){if(!i)return null;let a=this.ranges[--i];o-=r.from-a.to,r=a}for(;n<0?o>r.to:o>=r.to;){if(i==this.ranges.length-1)return null;let a=this.ranges[++i];o+=a.from-r.to,r=a}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(r=o,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,s=this.range;for(;s.to<=r;)s=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>s.to&&(this.chunk2=this.chunk2.slice(0,s.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=dW,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}}class pw{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:r}=n.p;wse(this.data,e,n,this.id,r.data,r.tokenPrecTable)}}pw.prototype.contextual=pw.prototype.fallback=pw.prototype.extend=!1;class mM{constructor(e,n,r){this.precTable=n,this.elseToken=r,this.data=typeof e=="string"?U2(e):e}token(e,n){let r=e.pos,i=0;for(;;){let o=e.next<0,a=e.resolveOffset(1,1);if(wse(this.data,e,n,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(o||i++,a==null)break;e.reset(a,e.token)}i&&(e.reset(r,e.token),e.acceptToken(this.elseToken,i))}}mM.prototype.contextual=pw.prototype.fallback=pw.prototype.extend=!1;class rh{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function wse(t,e,n,r,i,o){let a=0,s=1<<r,{dialect:u}=n.p.parser;e:for(;(s&t[a])!=0;){let f=t[a+1];for(let S=a+3;S<f;S+=2)if((t[S+1]&s)>0){let E=t[S];if(u.allows(E)&&(e.token.value==-1||e.token.value==E||lQe(E,e.token.value,i,o))){e.acceptToken(E);break}}let g=e.next,_=0,w=t[a+2];if(e.next<0&&w>_&&t[f+w*3-3]==65535){a=t[f+w*3-1];continue e}for(;_<w;){let S=_+w>>1,E=f+S+(S<<1),A=t[E],R=t[E+1]||65536;if(g<A)w=S;else if(g>=R)_=S+1;else{a=t[E+2],e.advance();continue e}}break}}function fW(t,e,n){for(let r=e,i;(i=t[r])!=65535;r++)if(i==n)return r-e;return-1}function lQe(t,e,n,r){let i=fW(n,r,e);return i<0||fW(n,r,t)<i}const Pu=typeof process<"u"&&uW&&/\bparse\b/.test(uW.LOG);let rL=null;function pW(t,e,n){let r=t.cursor(Mi.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}let cQe=class{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?pW(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?pW(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=r.children[i],a=this.start[n]+r.positions[i];if(a>e)return this.nextStart=a,null;if(o instanceof Vr){if(a==e){if(a<this.safeFrom)return null;let s=a+o.length;if(s<=this.safeTo){let u=o.prop(gr.lookAhead);if(!u||s+u<this.fragment.to)return o}}this.index[n]++,a+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(a),this.index.push(0))}else this.index[n]++,this.nextStart=a+o.length}}};class uQe{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new $P)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:o}=i,a=i.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,u=0;for(let f=0;f<o.length;f++){if((1<<f&a)==0)continue;let g=o[f],_=this.tokens[f];if(!(r&&!g.fallback)&&((g.contextual||_.start!=e.pos||_.mask!=a||_.context!=s)&&(this.updateCachedToken(_,g,e),_.mask=a,_.context=s),_.lookAhead>_.end+25&&(u=Math.max(_.lookAhead,u)),_.value!=0)){let w=n;if(_.extended>-1&&(n=this.addActions(e,_.extended,_.end,n)),n=this.addActions(e,_.value,_.end,n),!g.extend&&(r=_,n>w))break}}for(;this.actions.length>n;)this.actions.pop();return u&&e.setLookAhead(u),!r&&e.pos==this.stream.end&&(r=new $P,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new $P,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:o}=r.p;for(let a=0;a<o.specialized.length;a++)if(o.specialized[a]==e.value){let s=o.specializers[a](this.stream.read(e.start,e.end),r);if(s>=0&&r.p.parser.dialect.allows(s>>1)){(s&1)==0?e.value=s>>1:e.extended=s>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let o=0;o<i;o+=3)if(this.actions[o]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:o}=e,{parser:a}=e.p,{data:s}=a;for(let u=0;u<2;u++)for(let f=a.stateSlot(o,u?2:1);;f+=3){if(s[f]==65535)if(s[f+1]==1)f=Eg(s,f+2);else{i==0&&s[f+1]==2&&(i=this.putAction(Eg(s,f+2),n,r,i));break}s[f]==n&&(i=this.putAction(Eg(s,f+1),n,r,i))}return i}}class hQe{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new aQe(n,i),this.tokens=new uQe(e,this.stream),this.topTerm=e.top[1];let{from:o}=i[0];this.stacks=[fM.start(this,e.top[0],o)],this.fragments=r.length&&this.stream.end-o>e.bufferLength*4?new cQe(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,r=this.stacks=[],i,o;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let s=e[a];for(;;){if(this.tokens.mainToken=null,s.pos>n)r.push(s);else{if(this.advanceStack(s,r,e))continue;{i||(i=[],o=[]),i.push(s);let u=this.tokens.getMainToken(s);o.push(u.value,u.end)}}break}}if(!r.length){let a=i&&fQe(i);if(a)return Pu&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw Pu&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let a=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,o,r);if(a)return Pu&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(r.length>a)for(r.sort((s,u)=>u.score-s.score);r.length>a;)r.pop();r.some(s=>s.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let s=r[a];for(let u=a+1;u<r.length;u++){let f=r[u];if(s.sameState(f)||s.buffer.length>500&&f.buffer.length>500)if((s.score-f.score||s.buffer.length-f.buffer.length)>0)r.splice(u--,1);else{r.splice(a--,1);continue e}}}r.length>12&&(r.sort((a,s)=>s.score-a.score),r.splice(12,r.length-12))}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:o}=this,a=Pu?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let f=e.curContext&&e.curContext.tracker.strict,g=f?e.curContext.hash:0;for(let _=this.fragments.nodeAt(i);_;){let w=this.parser.nodeSet.types[_.type.id]==_.type?o.getGoto(e.state,_.type.id):-1;if(w>-1&&_.length&&(!f||(_.prop(gr.contextHash)||0)==g))return e.useNode(_,w),Pu&&console.log(a+this.stackID(e)+` (via reuse of ${o.getName(_.type.id)})`),!0;if(!(_ instanceof Vr)||_.children.length==0||_.positions[0]>0)break;let S=_.children[0];if(S instanceof Vr&&_.positions[0]==0)_=S;else break}}let s=o.stateSlot(e.state,4);if(s>0)return e.reduce(s),Pu&&console.log(a+this.stackID(e)+` (via always-reduce ${o.getName(s&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let u=this.tokens.getActions(e);for(let f=0;f<u.length;){let g=u[f++],_=u[f++],w=u[f++],S=f==u.length||!r,E=S?e:e.split(),A=this.tokens.mainToken;if(E.apply(g,_,A?A.start:E.pos,w),Pu&&console.log(a+this.stackID(E)+` (via ${(g&65536)==0?"shift":`reduce of ${o.getName(g&65535)}`} for ${o.getName(_)} @ ${i}${E==e?"":", split"})`),S)return!0;E.pos>i?n.push(E):r.push(E)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return mW(e,n),!0}}runRecovery(e,n,r){let i=null,o=!1;for(let a=0;a<e.length;a++){let s=e[a],u=n[a<<1],f=n[(a<<1)+1],g=Pu?this.stackID(s)+" -> ":"";if(s.deadEnd&&(o||(o=!0,s.restart(),Pu&&console.log(g+this.stackID(s)+" (restarted)"),this.advanceFully(s,r))))continue;let _=s.split(),w=g;for(let S=0;S<10&&_.forceReduce()&&(Pu&&console.log(w+this.stackID(_)+" (via force-reduce)"),!this.advanceFully(_,r));S++)Pu&&(w=this.stackID(_)+" -> ");for(let S of s.recoverByInsert(u))Pu&&console.log(g+this.stackID(S)+" (via recover-insert)"),this.advanceFully(S,r);this.stream.end>s.pos?(f==s.pos&&(f++,u=0),s.recoverByDelete(u,f),Pu&&console.log(g+this.stackID(s)+` (via recover-delete ${this.parser.getName(u)})`),mW(s,r)):(!i||i.score<s.score)&&(i=s)}return i}stackToTree(e){return e.close(),Vr.build({buffer:pM.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(rL||(rL=new WeakMap)).get(e);return n||rL.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function mW(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class dQe{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const iL=t=>t;class Ose{constructor(e){this.start=e.start,this.shift=e.shift||iL,this.reduce=e.reduce||iL,this.reuse=e.reuse||iL,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class Kw extends yI{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let s=0;s<e.repeatNodeCount;s++)n.push("");let r=Object.keys(e.topRules).map(s=>e.topRules[s][1]),i=[];for(let s=0;s<n.length;s++)i.push([]);function o(s,u,f){i[s].push([u,u.deserialize(String(f))])}if(e.nodeProps)for(let s of e.nodeProps){let u=s[0];typeof u=="string"&&(u=gr[u]);for(let f=1;f<s.length;){let g=s[f++];if(g>=0)o(g,u,s[f++]);else{let _=s[f+-g];for(let w=-g;w>0;w--)o(s[f++],u,_);f++}}}this.nodeSet=new zO(n.map((s,u)=>ta.define({name:u>=this.minRepeatTerm?void 0:s,id:u,props:i[u],top:r.indexOf(u)>-1,error:u==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(u)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=eoe;let a=U2(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let s=0;s<this.specializerSpecs.length;s++)this.specialized[s]=this.specializerSpecs[s].term;this.specializers=this.specializerSpecs.map(gW),this.states=U2(e.states,Uint32Array),this.data=U2(e.stateData),this.goto=U2(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(s=>typeof s=="number"?new pw(a,s):s),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new hQe(this,e,n,r);for(let o of this.wrappers)i=o(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let o=i[n+1];;){let a=i[o++],s=a&1,u=i[o++];if(s&&r)return u;for(let f=o+(a>>1);o<f;o++)if(i[o]==e)return u;if(s)return-1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let o=this.stateSlot(e,i?2:1),a;;o+=3){if((a=r[o])==65535)if(r[o+1]==1)a=r[o=Eg(r,o+2)];else{if(r[o+1]==2)return Eg(r,o+2);break}if(a==n||a==0)return Eg(r,o+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,r=>r==n?!0:null)}allActions(e,n){let r=this.stateSlot(e,4),i=r?n(r):void 0;for(let o=this.stateSlot(e,1);i==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=Eg(this.data,o+2);else break;i=n(Eg(this.data,o+1))}return i}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Eg(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];n.some((o,a)=>a&1&&o==i)||n.push(this.data[r],i)}}return n}configure(e){let n=Object.assign(Object.create(Kw.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(o=>o.from==r);return i?i.to:r})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let o=e.specializers.find(s=>s.from==r.external);if(!o)return r;let a=Object.assign(Object.assign({},r),{external:o.to});return n.specializers[i]=gW(a),a})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let o of e.split(" ")){let a=n.indexOf(o);a>=0&&(r[a]=!0)}let i=null;for(let o=0;o<n.length;o++)if(!r[o])for(let a=this.dialects[n[o]],s;(s=this.data[a++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[s]=1;return new dQe(e,r,i)}static deserialize(e){return new Kw(e)}}function Eg(t,e){return t[e]|t[e+1]<<16}function fQe(t){let e=null;for(let n of t){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function gW(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const pQe=122,yW=1,mQe=123,gQe=124,Sse=2,yQe=125,vQe=3,_Qe=4,Cse=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],bQe=58,xQe=40,Tse=95,wQe=91,zP=45,OQe=46,SQe=35,CQe=37,TQe=38,kQe=92,EQe=10,AQe=42;function CT(t){return t>=65&&t<=90||t>=97&&t<=122||t>=161}function _9(t){return t>=48&&t<=57}function vW(t){return _9(t)||t>=97&&t<=102||t>=65&&t<=70}const kse=(t,e,n)=>(r,i)=>{for(let o=!1,a=0,s=0;;s++){let{next:u}=r;if(CT(u)||u==zP||u==Tse||o&&_9(u))!o&&(u!=zP||s>0)&&(o=!0),a===s&&u==zP&&a++,r.advance();else if(u==kQe&&r.peek(1)!=EQe){if(r.advance(),vW(r.next)){do r.advance();while(vW(r.next));r.next==32&&r.advance()}else r.next>-1&&r.advance();o=!0}else{o&&r.acceptToken(a==2&&i.canShift(Sse)?e:u==xQe?n:t);break}}},PQe=new rh(kse(mQe,Sse,gQe)),MQe=new rh(kse(yQe,vQe,_Qe)),RQe=new rh(t=>{if(Cse.includes(t.peek(-1))){let{next:e}=t;(CT(e)||e==Tse||e==SQe||e==OQe||e==AQe||e==wQe||e==bQe&&CT(t.peek(1))||e==zP||e==TQe)&&t.acceptToken(pQe)}}),IQe=new rh(t=>{if(!Cse.includes(t.peek(-1))){let{next:e}=t;if(e==CQe&&(t.advance(),t.acceptToken(yW)),CT(e)){do t.advance();while(CT(t.next)||_9(t.next));t.acceptToken(yW)}}}),DQe=NO({"AtKeyword import charset namespace keyframes media supports":Be.definitionKeyword,"from to selector":Be.keyword,NamespaceName:Be.namespace,KeyframeName:Be.labelName,KeyframeRangeName:Be.operatorKeyword,TagName:Be.tagName,ClassName:Be.className,PseudoClassName:Be.constant(Be.className),IdName:Be.labelName,"FeatureName PropertyName":Be.propertyName,AttributeName:Be.attributeName,NumberLiteral:Be.number,KeywordQuery:Be.keyword,UnaryQueryOp:Be.operatorKeyword,"CallTag ValueName":Be.atom,VariableName:Be.variableName,Callee:Be.operatorKeyword,Unit:Be.unit,"UniversalSelector NestingSelector":Be.definitionOperator,"MatchOp CompareOp":Be.compareOperator,"ChildOp SiblingOp, LogicOp":Be.logicOperator,BinOp:Be.arithmeticOperator,Important:Be.modifier,Comment:Be.blockComment,ColorLiteral:Be.color,"ParenthesizedContent StringLiteral":Be.string,":":Be.punctuation,"PseudoOp #":Be.derefOperator,"; ,":Be.separator,"( )":Be.paren,"[ ]":Be.squareBracket,"{ }":Be.brace}),LQe={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},$Qe={__proto__:null,or:98,and:98,not:106,only:106,layer:170},zQe={__proto__:null,selector:112,layer:166},NQe={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},BQe={__proto__:null,to:207},FQe=Kw.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:" Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[DQe],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[RQe,IQe,PQe,MQe,1,2,3,4,new mM("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:t=>LQe[t]||-1},{term:125,get:t=>$Qe[t]||-1},{term:4,get:t=>zQe[t]||-1},{term:25,get:t=>NQe[t]||-1},{term:123,get:t=>BQe[t]||-1}],tokenPrec:1963});let oL=null;function sL(){if(!oL&&typeof document=="object"&&document.body){let{style:t}=document.body,e=[],n=new Set;for(let r in t)r!="cssText"&&r!="cssFloat"&&typeof t[r]=="string"&&(/[A-Z]/.test(r)&&(r=r.replace(/[A-Z]/g,i=>"-"+i.toLowerCase())),n.has(r)||(e.push(r),n.add(r)));oL=e.sort().map(r=>({type:"property",label:r,apply:r+": "}))}return oL||[]}const _W=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(t=>({type:"class",label:t})),bW=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(t=>({type:"keyword",label:t})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(t=>({type:"constant",label:t}))),jQe=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(t=>({type:"type",label:t})),VQe=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(t=>({type:"keyword",label:t})),bg=/^(\w[\w-]*|-\w[\w-]*|)$/,QQe=/^-(-[\w-]*)?$/;function UQe(t,e){var n;if((t.name=="("||t.type.isError)&&(t=t.parent||t),t.name!="ArgList")return!1;let r=(n=t.parent)===null||n===void 0?void 0:n.firstChild;return r?.name!="Callee"?!1:e.sliceString(r.from,r.to)=="var"}const xW=new ioe,ZQe=["Declaration"];function qQe(t){for(let e=t;;){if(e.type.isTop)return e;if(!(e=e.parent))return t}}function Ese(t,e,n){if(e.to-e.from>4096){let r=xW.get(e);if(r)return r;let i=[],o=new Set,a=e.cursor(Mi.IncludeAnonymous);if(a.firstChild())do for(let s of Ese(t,a.node,n))o.has(s.label)||(o.add(s.label),i.push(s));while(a.nextSibling());return xW.set(e,i),i}else{let r=[],i=new Set;return e.cursor().iterate(o=>{var a;if(n(o)&&o.matchContext(ZQe)&&((a=o.node.nextSibling)===null||a===void 0?void 0:a.name)==":"){let s=t.sliceString(o.from,o.to);i.has(s)||(i.add(s),r.push({label:s,type:"variable"}))}}),r}}const Ase=t=>e=>{let{state:n,pos:r}=e,i=Ji(n).resolveInner(r,-1),o=i.type.isError&&i.from==i.to-1&&n.doc.sliceString(i.from,i.to)=="-";if(i.name=="PropertyName"||(o||i.name=="TagName")&&/^(Block|Styles)$/.test(i.resolve(i.to).name))return{from:i.from,options:sL(),validFor:bg};if(i.name=="ValueName")return{from:i.from,options:bW,validFor:bg};if(i.name=="PseudoClassName")return{from:i.from,options:_W,validFor:bg};if(t(i)||(e.explicit||o)&&UQe(i,n.doc))return{from:t(i)||o?i.from:r,options:Ese(n.doc,qQe(i),t),validFor:QQe};if(i.name=="TagName"){for(let{parent:u}=i;u;u=u.parent)if(u.name=="Block")return{from:i.from,options:sL(),validFor:bg};return{from:i.from,options:jQe,validFor:bg}}if(i.name=="AtKeyword")return{from:i.from,options:VQe,validFor:bg};if(!e.explicit)return null;let a=i.resolve(r),s=a.childBefore(r);return s&&s.name==":"&&a.name=="PseudoClassSelector"?{from:r,options:_W,validFor:bg}:s&&s.name==":"&&a.name=="Declaration"||a.name=="ArgList"?{from:r,options:bW,validFor:bg}:a.name=="Block"||a.name=="Styles"?{from:r,options:sL(),validFor:bg}:null},Pse=Ase(t=>t.name=="VariableName"),TT=Gw.define({name:"css",parser:FQe.configure({props:[BO.add({Declaration:LP()}),FO.add({"Block KeyframeList":doe})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function Mse(){return new Yw(TT,TT.data.of({autocomplete:Pse}))}const WQe=Object.freeze(Object.defineProperty({__proto__:null,css:Mse,cssCompletionSource:Pse,cssLanguage:TT,defineCSSCompletionSource:Ase},Symbol.toStringTag,{value:"Module"})),HQe=55,GQe=1,XQe=56,YQe=2,KQe=57,JQe=3,wW=4,eUe=5,b9=6,Rse=7,Ise=8,Dse=9,Lse=10,tUe=11,nUe=12,rUe=13,aL=58,iUe=14,oUe=15,OW=59,$se=21,sUe=23,zse=24,aUe=25,Uz=27,Nse=28,lUe=29,cUe=32,uUe=35,hUe=37,dUe=38,fUe=0,pUe=1,mUe={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},gUe={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},SW={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function yUe(t){return t==45||t==46||t==58||t>=65&&t<=90||t==95||t>=97&&t<=122||t>=161}let CW=null,TW=null,kW=0;function Zz(t,e){let n=t.pos+e;if(kW==n&&TW==t)return CW;let r=t.peek(e),i="";for(;yUe(r);)i+=String.fromCharCode(r),r=t.peek(++e);return TW=t,kW=n,CW=i?i.toLowerCase():r==vUe||r==_Ue?void 0:null}const Bse=60,gM=62,x9=47,vUe=63,_Ue=33,bUe=45;function EW(t,e){this.name=t,this.parent=e}const xUe=[b9,Lse,Rse,Ise,Dse],wUe=new Ose({start:null,shift(t,e,n,r){return xUe.indexOf(e)>-1?new EW(Zz(r,1)||"",t):t},reduce(t,e){return e==$se&&t?t.parent:t},reuse(t,e,n,r){let i=e.type.id;return i==b9||i==hUe?new EW(Zz(r,1)||"",t):t},strict:!1}),OUe=new rh((t,e)=>{if(t.next!=Bse){t.next<0&&e.context&&t.acceptToken(aL);return}t.advance();let n=t.next==x9;n&&t.advance();let r=Zz(t,0);if(r===void 0)return;if(!r)return t.acceptToken(n?oUe:iUe);let i=e.context?e.context.name:null;if(n){if(r==i)return t.acceptToken(tUe);if(i&&gUe[i])return t.acceptToken(aL,-2);if(e.dialectEnabled(fUe))return t.acceptToken(nUe);for(let o=e.context;o;o=o.parent)if(o.name==r)return;t.acceptToken(rUe)}else{if(r=="script")return t.acceptToken(Rse);if(r=="style")return t.acceptToken(Ise);if(r=="textarea")return t.acceptToken(Dse);if(mUe.hasOwnProperty(r))return t.acceptToken(Lse);i&&SW[i]&&SW[i][r]?t.acceptToken(aL,-1):t.acceptToken(b9)}},{contextual:!0}),SUe=new rh(t=>{for(let e=0,n=0;;n++){if(t.next<0){n&&t.acceptToken(OW);break}if(t.next==bUe)e++;else if(t.next==gM&&e>=2){n>=3&&t.acceptToken(OW,-2);break}else e=0;t.advance()}});function CUe(t){for(;t;t=t.parent)if(t.name=="svg"||t.name=="math")return!0;return!1}const TUe=new rh((t,e)=>{if(t.next==x9&&t.peek(1)==gM){let n=e.dialectEnabled(pUe)||CUe(e.context);t.acceptToken(n?eUe:wW,2)}else t.next==gM&&t.acceptToken(wW,1)});function w9(t,e,n){let r=2+t.length;return new rh(i=>{for(let o=0,a=0,s=0;;s++){if(i.next<0){s&&i.acceptToken(e);break}if(o==0&&i.next==Bse||o==1&&i.next==x9||o>=2&&o<r&&i.next==t.charCodeAt(o-2))o++,a++;else if(o==r&&i.next==gM){s>a?i.acceptToken(e,-a):i.acceptToken(n,-(a-2));break}else if((i.next==10||i.next==13)&&s){i.acceptToken(e,1);break}else o=a=0;i.advance()}})}const kUe=w9("script",HQe,GQe),EUe=w9("style",XQe,YQe),AUe=w9("textarea",KQe,JQe),PUe=NO({"Text RawText IncompleteTag IncompleteCloseTag":Be.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":Be.angleBracket,TagName:Be.tagName,"MismatchedCloseTag/TagName":[Be.tagName,Be.invalid],AttributeName:Be.attributeName,"AttributeValue UnquotedAttributeValue":Be.attributeValue,Is:Be.definitionOperator,"EntityReference CharacterReference":Be.character,Comment:Be.blockComment,ProcessingInst:Be.processingInstruction,DoctypeDecl:Be.documentMeta}),MUe=Kw.deserialize({version:14,states:",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[",stateData:",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~",goto:"%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:" StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:68,context:wUe,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,22,31,34,37,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,30,33,36,38,"OpenTag"],["group",-10,14,15,18,19,20,21,40,41,42,43,"Entity",17,"Entity TextContent",-3,29,32,35,"TextContent Entity"],["isolate",-11,22,30,31,33,34,36,37,38,39,42,43,"ltr",-3,27,28,40,""]],propSources:[PUe],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[kUe,EUe,AUe,TUe,OUe,SUe,0,1,2,3,4,5],topRules:{Document:[0,16]},dialects:{noMatch:0,selfClosing:515},tokenPrec:517});function Fse(t,e){let n=Object.create(null);for(let r of t.getChildren(zse)){let i=r.getChild(aUe),o=r.getChild(Uz)||r.getChild(Nse);i&&(n[e.read(i.from,i.to)]=o?o.type.id==Uz?e.read(o.from+1,o.to-1):e.read(o.from,o.to):"")}return n}function AW(t,e){let n=t.getChild(sUe);return n?e.read(n.from,n.to):" "}function lL(t,e,n){let r;for(let i of n)if(!i.attrs||i.attrs(r||(r=Fse(t.node.parent.firstChild,e))))return{parser:i.parser,bracketed:!0};return null}function jse(t=[],e=[]){let n=[],r=[],i=[],o=[];for(let s of t)(s.tag=="script"?n:s.tag=="style"?r:s.tag=="textarea"?i:o).push(s);let a=e.length?Object.create(null):null;for(let s of e)(a[s.name]||(a[s.name]=[])).push(s);return ooe((s,u)=>{let f=s.type.id;if(f==lUe)return lL(s,u,n);if(f==cUe)return lL(s,u,r);if(f==uUe)return lL(s,u,i);if(f==$se&&o.length){let g=s.node,_=g.firstChild,w=_&&AW(_,u),S;if(w){for(let E of o)if(E.tag==w&&(!E.attrs||E.attrs(S||(S=Fse(_,u))))){let A=g.lastChild,R=A.type.id==dUe?A.from:g.to;if(R>_.to)return{parser:E.parser,overlay:[{from:_.to,to:R}]}}}}if(a&&f==zse){let g=s.node,_;if(_=g.firstChild){let w=a[u.read(_.from,_.to)];if(w)for(let S of w){if(S.tagName&&S.tagName!=AW(g.parent,u))continue;let E=g.lastChild;if(E.type.id==Uz){let A=E.from+1,R=E.lastChild,$=E.to-(R&&R.isError?0:1);if($>A)return{parser:S.parser,overlay:[{from:A,to:$}],bracketed:!0}}else if(E.type.id==Nse)return{parser:S.parser,overlay:[{from:E.from,to:E.to}]}}}}return null})}const RUe=316,IUe=317,PW=1,DUe=2,LUe=3,$Ue=4,zUe=318,NUe=320,BUe=321,FUe=5,jUe=6,VUe=0,qz=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],Vse=125,QUe=59,Wz=47,UUe=42,ZUe=43,qUe=45,WUe=60,HUe=44,GUe=63,XUe=46,YUe=91,KUe=new Ose({start:!1,shift(t,e){return e==FUe||e==jUe||e==NUe?t:e==BUe},strict:!1}),JUe=new rh((t,e)=>{let{next:n}=t;(n==Vse||n==-1||e.context)&&t.acceptToken(zUe)},{contextual:!0,fallback:!0}),eZe=new rh((t,e)=>{let{next:n}=t,r;qz.indexOf(n)>-1||n==Wz&&((r=t.peek(1))==Wz||r==UUe)||n!=Vse&&n!=QUe&&n!=-1&&!e.context&&t.acceptToken(RUe)},{contextual:!0}),tZe=new rh((t,e)=>{t.next==YUe&&!e.context&&t.acceptToken(IUe)},{contextual:!0}),nZe=new rh((t,e)=>{let{next:n}=t;if(n==ZUe||n==qUe){if(t.advance(),n==t.next){t.advance();let r=!e.context&&e.canShift(PW);t.acceptToken(r?PW:DUe)}}else n==GUe&&t.peek(1)==XUe&&(t.advance(),t.advance(),(t.next<48||t.next>57)&&t.acceptToken(LUe))},{contextual:!0});function cL(t,e){return t>=65&&t<=90||t>=97&&t<=122||t==95||t>=192||!e&&t>=48&&t<=57}const rZe=new rh((t,e)=>{if(t.next!=WUe||!e.dialectEnabled(VUe)||(t.advance(),t.next==Wz))return;let n=0;for(;qz.indexOf(t.next)>-1;)t.advance(),n++;if(cL(t.next,!0)){for(t.advance(),n++;cL(t.next,!1);)t.advance(),n++;for(;qz.indexOf(t.next)>-1;)t.advance(),n++;if(t.next==HUe)return;for(let r=0;;r++){if(r==7){if(!cL(t.next,!0))return;break}if(t.next!="extends".charCodeAt(r))break;t.advance(),n++}}t.acceptToken($Ue,-n)}),iZe=NO({"get set async static":Be.modifier,"for while do if else switch try catch finally return throw break continue default case defer":Be.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":Be.operatorKeyword,"let var const using function class extends":Be.definitionKeyword,"import export from":Be.moduleKeyword,"with debugger new":Be.keyword,TemplateString:Be.special(Be.string),super:Be.atom,BooleanLiteral:Be.bool,this:Be.self,null:Be.null,Star:Be.modifier,VariableName:Be.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Be.function(Be.variableName),VariableDefinition:Be.definition(Be.variableName),Label:Be.labelName,PropertyName:Be.propertyName,PrivatePropertyName:Be.special(Be.propertyName),"CallExpression/MemberExpression/PropertyName":Be.function(Be.propertyName),"FunctionDeclaration/VariableDefinition":Be.function(Be.definition(Be.variableName)),"ClassDeclaration/VariableDefinition":Be.definition(Be.className),"NewExpression/VariableName":Be.className,PropertyDefinition:Be.definition(Be.propertyName),PrivatePropertyDefinition:Be.definition(Be.special(Be.propertyName)),UpdateOp:Be.updateOperator,"LineComment Hashbang":Be.lineComment,BlockComment:Be.blockComment,Number:Be.number,String:Be.string,Escape:Be.escape,ArithOp:Be.arithmeticOperator,LogicOp:Be.logicOperator,BitOp:Be.bitwiseOperator,CompareOp:Be.compareOperator,RegExp:Be.regexp,Equals:Be.definitionOperator,Arrow:Be.function(Be.punctuation),": Spread":Be.punctuation,"( )":Be.paren,"[ ]":Be.squareBracket,"{ }":Be.brace,"InterpolationStart InterpolationEnd":Be.special(Be.brace),".":Be.derefOperator,", ;":Be.separator,"@":Be.meta,TypeName:Be.typeName,TypeDefinition:Be.definition(Be.typeName),"type enum interface implements namespace module declare":Be.definitionKeyword,"abstract global Privacy readonly override":Be.modifier,"is keyof unique infer asserts":Be.operatorKeyword,JSXAttributeValue:Be.attributeValue,JSXText:Be.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Be.angleBracket,"JSXIdentifier JSXNameSpacedName":Be.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Be.attributeName,"JSXBuiltin/JSXIdentifier":Be.standard(Be.tagName)}),oZe={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},sZe={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},aZe={__proto__:null,"<":193},lZe=Kw.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:KUe,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[iZe],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[eZe,tZe,nZe,rZe,2,3,4,5,6,7,8,9,10,11,12,13,14,JUe,new mM("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new mM("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:t=>oZe[t]||-1},{term:343,get:t=>sZe[t]||-1},{term:95,get:t=>aZe[t]||-1}],tokenPrec:15201}),O9=[Qc("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Qc("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Qc("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Qc("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Qc("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Qc(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Qc("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Qc(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Qc(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Qc('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Qc('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Qse=O9.concat([Qc("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),Qc("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),Qc("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),MW=new ioe,Use=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function C2(t){return(e,n)=>{let r=e.node.getChild("VariableDefinition");return r&&n(r,t),!0}}const cZe=["FunctionDeclaration"],uZe={FunctionDeclaration:C2("function"),ClassDeclaration:C2("class"),ClassExpression:()=>!0,EnumDeclaration:C2("constant"),TypeAliasDeclaration:C2("type"),NamespaceDeclaration:C2("namespace"),VariableDefinition(t,e){t.matchContext(cZe)||e(t,"variable")},TypeDefinition(t,e){e(t,"type")},__proto__:null};function Zse(t,e){let n=MW.get(e);if(n)return n;let r=[],i=!0;function o(a,s){let u=t.sliceString(a.from,a.to);r.push({label:u,type:s})}return e.cursor(Mi.IncludeAnonymous).iterate(a=>{if(i)i=!1;else if(a.name){let s=uZe[a.name];if(s&&s(a,o)||Use.has(a.name))return!1}else if(a.to-a.from>8192){for(let s of Zse(t,a.node))r.push(s);return!1}}),MW.set(e,r),r}const yM=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,S9=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function qse(t){let e=Ji(t.state).resolveInner(t.pos,-1);if(S9.indexOf(e.name)>-1)return null;let n=e.name=="VariableName"||e.to-e.from<20&&yM.test(t.state.sliceDoc(e.from,e.to));if(!n&&!t.explicit)return null;let r=[];for(let i=e;i;i=i.parent)Use.has(i.name)&&(r=r.concat(Zse(t.state.doc,i)));return{options:r,from:n?e.from:t.pos,validFor:yM}}function uL(t,e,n){var r;let i=[];for(;;){let o=e.firstChild,a;if(o?.name=="VariableName")return i.push(t(o)),{path:i.reverse(),name:n};if(o?.name=="MemberExpression"&&((r=a=o.lastChild)===null||r===void 0?void 0:r.name)=="PropertyName")i.push(t(a)),e=o;else return null}}function Wse(t){let e=r=>t.state.doc.sliceString(r.from,r.to),n=Ji(t.state).resolveInner(t.pos,-1);return n.name=="PropertyName"?uL(e,n.parent,e(n)):(n.name=="."||n.name=="?.")&&n.parent.name=="MemberExpression"?uL(e,n.parent,""):S9.indexOf(n.name)>-1?null:n.name=="VariableName"||n.to-n.from<20&&yM.test(e(n))?{path:[],name:e(n)}:n.name=="MemberExpression"?uL(e,n,""):t.explicit?{path:[],name:""}:null}function hZe(t,e){let n=[],r=new Set;for(let i=0;;i++){for(let a of(Object.getOwnPropertyNames||Object.keys)(t)){if(!/^[a-zA-Z_$\xaa-\uffdc][\w$\xaa-\uffdc]*$/.test(a)||r.has(a))continue;r.add(a);let s;try{s=t[a]}catch{continue}n.push({label:a,type:typeof s=="function"?/^[A-Z]/.test(a)?"class":e?"function":"method":e?"variable":"property",boost:-i})}let o=Object.getPrototypeOf(t);if(!o)return n;t=o}}function dZe(t){let e=new Map;return n=>{let r=Wse(n);if(!r)return null;let i=t;for(let a of r.path)if(i=i[a],!i)return null;let o=e.get(i);return o||e.set(i,o=hZe(i,!r.path.length)),{from:n.pos-r.name.length,options:o,validFor:yM}}}const Gh=Gw.define({name:"javascript",parser:lZe.configure({props:[BO.add({IfStatement:LP({except:/^\s*({|else\b)/}),TryStatement:LP({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:g7e,SwitchBody:t=>{let e=t.textAfter,n=/^\s*\}/.test(e),r=/^\s*(case|default)\b/.test(e);return t.baseIndent+(n?0:r?1:2)*t.unit},Block:m7e({closing:"}"}),ArrowFunction:t=>t.baseIndent+t.unit,"TemplateString BlockComment":()=>null,"Statement Property":LP({except:/^\s*{/}),JSXElement(t){let e=/^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},JSXEscape(t){let e=/\s*\}/.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},"JSXOpenTag JSXSelfClosingTag"(t){return t.column(t.node.from)+t.unit}}),FO.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":doe,BlockComment(t){return{from:t.from+2,to:t.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),Hse={test:t=>/^JSX/.test(t.name),facet:vI({commentTokens:{block:{open:"{/*",close:"*/}"}}})},C9=Gh.configure({dialect:"ts"},"typescript"),T9=Gh.configure({dialect:"jsx",props:[n9.add(t=>t.isTop?[Hse]:void 0)]}),k9=Gh.configure({dialect:"jsx ts",props:[n9.add(t=>t.isTop?[Hse]:void 0)]},"typescript");let Gse=t=>({label:t,type:"keyword"});const Xse="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(Gse),fZe=Xse.concat(["declare","implements","private","protected","public"].map(Gse));function Yse(t={}){let e=t.jsx?t.typescript?k9:T9:t.typescript?C9:Gh,n=t.typescript?Qse.concat(fZe):O9.concat(Xse);return new Yw(e,[Gh.data.of({autocomplete:K7e(S9,Roe(n))}),Gh.data.of({autocomplete:qse}),t.jsx?Kse:[]])}function pZe(t){for(;;){if(t.name=="JSXOpenTag"||t.name=="JSXSelfClosingTag"||t.name=="JSXFragmentTag")return t;if(t.name=="JSXEscape"||!t.parent)return null;t=t.parent}}function RW(t,e,n=t.length){for(let r=e?.firstChild;r;r=r.nextSibling)if(r.name=="JSXIdentifier"||r.name=="JSXBuiltin"||r.name=="JSXNamespacedName"||r.name=="JSXMemberExpression")return t.sliceString(r.from,Math.min(r.to,n));return""}const mZe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Kse=un.inputHandler.of((t,e,n,r,i)=>{if((mZe?t.composing:t.compositionStarted)||t.state.readOnly||e!=n||r!=">"&&r!="/"||!Gh.isActiveAt(t.state,e,-1))return!1;let o=i(),{state:a}=o,s=a.changeByRange(u=>{var f;let{head:g}=u,_=Ji(a).resolveInner(g-1,-1),w;if(_.name=="JSXStartTag"&&(_=_.parent),!(a.doc.sliceString(g-1,g)!=r||_.name=="JSXAttributeValue"&&_.to>g)){if(r==">"&&_.name=="JSXFragmentTag")return{range:u,changes:{from:g,insert:"</>"}};if(r=="/"&&_.name=="JSXStartCloseTag"){let S=_.parent,E=S.parent;if(E&&S.from==g-2&&((w=RW(a.doc,E.firstChild,g))||((f=E.firstChild)===null||f===void 0?void 0:f.name)=="JSXFragmentTag")){let A=`${w}>`;return{range:Ft.cursor(g+A.length,-1),changes:{from:g,insert:A}}}}else if(r==">"){let S=pZe(_);if(S&&S.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(a.doc.sliceString(g,g+2))&&(w=RW(a.doc,S,g)))return{range:u,changes:{from:g,insert:`</${w}>`}}}}return{range:u}});return s.changes.empty?!1:(t.dispatch([o,a.update(s,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});function gZe(t,e){return e||(e={parserOptions:{ecmaVersion:2019,sourceType:"module"},env:{browser:!0,node:!0,es6:!0,es2015:!0,es2017:!0,es2020:!0},rules:{}},t.getRules().forEach((n,r)=>{var i;!((i=n.meta.docs)===null||i===void 0)&&i.recommended&&(e.rules[r]=2)})),n=>{let{state:r}=n,i=[];for(let{from:o,to:a}of Gh.findRegions(r)){let s=r.doc.lineAt(o),u={line:s.number-1,col:o-s.from,pos:o};for(let f of t.verify(r.sliceDoc(o,a),e))i.push(yZe(f,r.doc,u))}return i}}function IW(t,e,n,r){return n.line(t+r.line).from+e+(t==1?r.col-1:-1)}function yZe(t,e,n){let r=IW(t.line,t.column,e,n),i={from:r,to:t.endLine!=null&&t.endColumn!=1?IW(t.endLine,t.endColumn,e,n):r,message:t.message,source:t.ruleId?"eslint:"+t.ruleId:"eslint",severity:t.severity==1?"warning":"error"};if(t.fix){let{range:o,text:a}=t.fix,s=o[0]+n.pos-r,u=o[1]+n.pos-r;i.actions=[{name:"fix",apply(f,g){f.dispatch({changes:{from:g+s,to:g+u,insert:a},scrollIntoView:!0})}}]}return i}const NA=Object.freeze(Object.defineProperty({__proto__:null,autoCloseTags:Kse,completionPath:Wse,esLint:gZe,javascript:Yse,javascriptLanguage:Gh,jsxLanguage:T9,localCompletionSource:qse,scopeCompletionSource:dZe,snippets:O9,tsxLanguage:k9,typescriptLanguage:C9,typescriptSnippets:Qse},Symbol.toStringTag,{value:"Module"})),T2=["_blank","_self","_top","_parent"],hL=["ascii","utf-8","utf-16","latin1","latin1"],dL=["get","post","put","delete"],fL=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Mu=["true","false"],jn={},vZe={a:{attrs:{href:null,ping:null,type:null,media:null,target:T2,hreflang:null}},abbr:jn,address:jn,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:jn,aside:jn,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:jn,base:{attrs:{href:null,target:T2}},bdi:jn,bdo:jn,blockquote:{attrs:{cite:null}},body:jn,br:jn,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:fL,formmethod:dL,formnovalidate:["novalidate"],formtarget:T2,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:jn,center:jn,cite:jn,code:jn,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:jn,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:jn,div:jn,dl:jn,dt:jn,em:jn,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:jn,figure:jn,footer:jn,form:{attrs:{action:null,name:null,"accept-charset":hL,autocomplete:["on","off"],enctype:fL,method:dL,novalidate:["novalidate"],target:T2}},h1:jn,h2:jn,h3:jn,h4:jn,h5:jn,h6:jn,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:jn,hgroup:jn,hr:jn,html:{attrs:{manifest:null}},i:jn,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:fL,formmethod:dL,formnovalidate:["novalidate"],formtarget:T2,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:jn,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:jn,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:jn,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:hL,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:jn,noscript:jn,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:jn,param:{attrs:{name:null,value:null}},pre:jn,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:jn,rt:jn,ruby:jn,samp:jn,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:hL}},section:jn,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:jn,source:{attrs:{src:null,type:null,media:null}},span:jn,strong:jn,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:jn,summary:jn,sup:jn,table:jn,tbody:jn,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:jn,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:jn,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:jn,time:{attrs:{datetime:null}},title:jn,tr:jn,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:jn,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:jn},Jse={accesskey:null,class:null,contenteditable:Mu,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Mu,autocorrect:Mu,autocapitalize:Mu,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Mu,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Mu,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Mu,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Mu,"aria-hidden":Mu,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Mu,"aria-multiselectable":Mu,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Mu,"aria-relevant":null,"aria-required":Mu,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},eae="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(t=>"on"+t);for(let t of eae)Jse[t]=null;class kT{constructor(e,n){this.tags={...vZe,...e},this.globalAttrs={...Jse,...n},this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}kT.default=new kT;function Jw(t,e,n=t.length){if(!e)return"";let r=e.firstChild,i=r&&r.getChild("TagName");return i?t.sliceString(i.from,Math.min(i.to,n)):""}function eO(t,e=!1){for(;t;t=t.parent)if(t.name=="Element")if(e)e=!1;else return t;return null}function tae(t,e,n){let r=n.tags[Jw(t,eO(e))];return r?.children||n.allTags}function E9(t,e){let n=[];for(let r=eO(e);r&&!r.type.isTop;r=eO(r.parent)){let i=Jw(t,r);if(i&&r.lastChild.name=="CloseTag")break;i&&n.indexOf(i)<0&&(e.name=="EndTag"||e.from>=r.firstChild.to)&&n.push(i)}return n}const nae=/^[:\-\.\w\u00b7-\uffff]*$/;function DW(t,e,n,r,i){let o=/\s*>/.test(t.sliceDoc(i,i+5))?"":">",a=eO(n,n.name=="StartTag"||n.name=="TagName");return{from:r,to:i,options:tae(t.doc,a,e).map(s=>({label:s,type:"type"})).concat(E9(t.doc,n).map((s,u)=>({label:"/"+s,apply:"/"+s+o,type:"type",boost:99-u}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function LW(t,e,n,r){let i=/\s*>/.test(t.sliceDoc(r,r+5))?"":">";return{from:n,to:r,options:E9(t.doc,e).map((o,a)=>({label:o,apply:o+i,type:"type",boost:99-a})),validFor:nae}}function _Ze(t,e,n,r){let i=[],o=0;for(let a of tae(t.doc,n,e))i.push({label:"<"+a,type:"type"});for(let a of E9(t.doc,n))i.push({label:"</"+a+">",type:"type",boost:99-o++});return{from:r,to:r,options:i,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function bZe(t,e,n,r,i){let o=eO(n),a=o?e.tags[Jw(t.doc,o)]:null,s=a&&a.attrs?Object.keys(a.attrs):[],u=a&&a.globalAttrs===!1?s:s.length?s.concat(e.globalAttrNames):e.globalAttrNames;return{from:r,to:i,options:u.map(f=>({label:f,type:"property"})),validFor:nae}}function xZe(t,e,n,r,i){var o;let a=(o=n.parent)===null||o===void 0?void 0:o.getChild("AttributeName"),s=[],u;if(a){let f=t.sliceDoc(a.from,a.to),g=e.globalAttrs[f];if(!g){let _=eO(n),w=_?e.tags[Jw(t.doc,_)]:null;g=w?.attrs&&w.attrs[f]}if(g){let _=t.sliceDoc(r,i).toLowerCase(),w='"',S='"';/^['"]/.test(_)?(u=_[0]=='"'?/^[^"]*$/:/^[^']*$/,w="",S=t.sliceDoc(i,i+1)==_[0]?"":_[0],_=_.slice(1),r++):u=/^[^\s<>='"]*$/;for(let E of g)s.push({label:E,apply:w+E+S,type:"constant"})}}return{from:r,to:i,options:s,validFor:u}}function rae(t,e){let{state:n,pos:r}=e,i=Ji(n).resolveInner(r,-1),o=i.resolve(r);for(let a=r,s;o==i&&(s=i.childBefore(a));){let u=s.lastChild;if(!u||!u.type.isError||u.from<u.to)break;o=i=s,a=u.from}return i.name=="TagName"?i.parent&&/CloseTag$/.test(i.parent.name)?LW(n,i,i.from,r):DW(n,t,i,i.from,r):i.name=="StartTag"||i.name=="IncompleteTag"?DW(n,t,i,r,r):i.name=="StartCloseTag"||i.name=="IncompleteCloseTag"?LW(n,i,r,r):i.name=="OpenTag"||i.name=="SelfClosingTag"||i.name=="AttributeName"?bZe(n,t,i,i.name=="AttributeName"?i.from:r,r):i.name=="Is"||i.name=="AttributeValue"||i.name=="UnquotedAttributeValue"?xZe(n,t,i,i.name=="Is"?r:i.from,r):e.explicit&&(o.name=="Element"||o.name=="Text"||o.name=="Document")?_Ze(n,t,i,r):null}function iae(t){return rae(kT.default,t)}function oae(t){let{extraTags:e,extraGlobalAttributes:n}=t,r=n||e?new kT(e,n):kT.default;return i=>rae(r,i)}const wZe=Gh.parser.configure({top:"SingleExpression"}),sae=[{tag:"script",attrs:t=>t.type=="text/typescript"||t.lang=="ts",parser:C9.parser},{tag:"script",attrs:t=>t.type=="text/babel"||t.type=="text/jsx",parser:T9.parser},{tag:"script",attrs:t=>t.type=="text/typescript-jsx",parser:k9.parser},{tag:"script",attrs(t){return/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(t.type)},parser:wZe},{tag:"script",attrs(t){return!t.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(t.type)},parser:Gh.parser},{tag:"style",attrs(t){return(!t.lang||t.lang=="css")&&(!t.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(t.type))},parser:TT.parser}],aae=[{name:"style",parser:TT.parser.configure({top:"Styles"})}].concat(eae.map(t=>({name:t,parser:Gh.parser}))),lae=Gw.define({name:"html",parser:MUe.configure({props:[BO.add({Element(t){let e=/^(\s*)(<\/)?/.exec(t.textAfter);return t.node.to<=t.pos+e[0].length?t.continue():t.lineIndent(t.node.from)+(e[2]?0:t.unit)},"OpenTag CloseTag SelfClosingTag"(t){return t.column(t.node.from)+t.unit},Document(t){if(t.pos+/\s*/.exec(t.textAfter)[0].length<t.node.to)return t.continue();let e=null,n;for(let r=t.node;;){let i=r.lastChild;if(!i||i.name!="Element"||i.to!=r.to)break;e=r=i}return e&&!((n=e.lastChild)&&(n.name=="CloseTag"||n.name=="SelfClosingTag"))?t.lineIndent(e.from)+t.unit:null}}),FO.add({Element(t){let e=t.firstChild,n=t.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:n.name=="CloseTag"?n.from:t.to}}}),Coe.add({"OpenTag CloseTag":t=>t.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-_"}}),_C=lae.configure({wrap:jse(sae,aae)});function cae(t={}){let e="",n;t.matchClosingTags===!1&&(e="noMatch"),t.selfClosingTags===!0&&(e=(e?e+" ":"")+"selfClosing"),(t.nestedLanguages&&t.nestedLanguages.length||t.nestedAttributes&&t.nestedAttributes.length)&&(n=jse((t.nestedLanguages||[]).concat(sae),(t.nestedAttributes||[]).concat(aae)));let r=n?lae.configure({wrap:n,dialect:e}):e?_C.configure({dialect:e}):_C;return new Yw(r,[_C.data.of({autocomplete:oae(t)}),t.autoCloseTags!==!1?uae:[],Yse().support,Mse().support])}const $W=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),uae=un.inputHandler.of((t,e,n,r,i)=>{if(t.composing||t.state.readOnly||e!=n||r!=">"&&r!="/"||!_C.isActiveAt(t.state,e,-1))return!1;let o=i(),{state:a}=o,s=a.changeByRange(u=>{var f,g,_;let w=a.doc.sliceString(u.from-1,u.to)==r,{head:S}=u,E=Ji(a).resolveInner(S,-1),A;if(w&&r==">"&&E.name=="EndTag"){let R=E.parent;if(((g=(f=R.parent)===null||f===void 0?void 0:f.lastChild)===null||g===void 0?void 0:g.name)!="CloseTag"&&(A=Jw(a.doc,R.parent,S))&&!$W.has(A)){let $=S+(a.doc.sliceString(S,S+1)===">"?1:0),z=`</${A}>`;return{range:u,changes:{from:S,to:$,insert:z}}}}else if(w&&r=="/"&&E.name=="IncompleteCloseTag"){let R=E.parent;if(E.from==S-2&&((_=R.lastChild)===null||_===void 0?void 0:_.name)!="CloseTag"&&(A=Jw(a.doc,R,S))&&!$W.has(A)){let $=S+(a.doc.sliceString(S,S+1)===">"?1:0),z=`${A}>`;return{range:Ft.cursor(S+z.length,-1),changes:{from:S,to:$,insert:z}}}}return{range:u}});return s.changes.empty?!1:(t.dispatch([o,a.update(s,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),OZe=Object.freeze(Object.defineProperty({__proto__:null,autoCloseTags:uae,html:cae,htmlCompletionSource:iae,htmlCompletionSourceWith:oae,htmlLanguage:_C},Symbol.toStringTag,{value:"Module"}));function SZe(t,e,n,r){const i=Es(zo),o=Ri(x8),a=se.useRef(null),{lexicalNode:s}=K4(),u=se.useRef(!1),f=se.useRef(!1),g=se.useCallback(()=>{o({editorType:e,rootNode:s,editorRef:a.current})},[e,s,o]),_=se.useCallback(w=>{var S,E,A,R,$,z;if(w.key==="ArrowDown"){const B=(E=(S=a.current)==null?void 0:S.getCodemirror())==null?void 0:E.state;if(B){const F=B.doc.length,U=B.selection.ranges[0].to;F===U&&(u.current?(i?.update(()=>{var q,H;const ne=Ii(t);ne.getNextSibling()?((H=(q=a.current)==null?void 0:q.getCodemirror())==null||H.contentDOM.blur(),ne.selectNext()):ne.insertAfter(mi())}),u.current=!1):u.current=!0)}}else if(w.key==="ArrowUp"){const B=(R=(A=a.current)==null?void 0:A.getCodemirror())==null?void 0:R.state;B&&B.selection.ranges[0].from===0&&(f.current?(i?.update(()=>{var U,q;const H=Ii(t);H.getPreviousSibling()&&((q=(U=a.current)==null?void 0:U.getCodemirror())==null||q.contentDOM.blur(),H.selectPrevious())}),f.current=!1):f.current=!0)}else if(w.key==="Enter")w.stopPropagation();else if(w.key==="Backspace"||w.key==="Delete"){const B=(z=($=a.current)==null?void 0:$.getCodemirror())==null?void 0:z.state;B?.doc.length===0&&i?.update(()=>{Ii(t).remove()})}},[i,t]);return se.useEffect(()=>{const w=a.current;return setTimeout(()=>{var S,E;(S=w?.getCodemirror())==null||S.contentDOM.addEventListener("focus",g),(E=w?.getCodemirror())==null||E.contentDOM.addEventListener("keydown",_)},300),()=>{var S,E;(S=w?.getCodemirror())==null||S.contentDOM.removeEventListener("focus",g),(E=w?.getCodemirror())==null||E.contentDOM.removeEventListener("keydown",_)}},[a,g,_,n]),se.useEffect(()=>{r.subscribe(()=>{var w,S;(S=(w=a.current)==null?void 0:w.getCodemirror())==null||S.focus(),g()})},[r,a,t,g]),a}function Xt(t){return new Yw(o9.define(t))}function f0(t){return It(()=>import("./index-1q6O_Dxu.js"),[]).then(e=>e.sql({dialect:e[t]}))}const CZe=[kt.of({name:"C",extensions:["c","h","ino"],load(){return It(()=>import("./index-BdjlmeNC.js"),[]).then(t=>t.cpp())}}),kt.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load(){return It(()=>import("./index-BdjlmeNC.js"),[]).then(t=>t.cpp())}}),kt.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load(){return f0("Cassandra")}}),kt.of({name:"CSS",extensions:["css"],load(){return It(()=>Promise.resolve().then(()=>WQe),void 0).then(t=>t.css())}}),kt.of({name:"Go",extensions:["go"],load(){return It(()=>import("./index-D1tJDwkz.js"),[]).then(t=>t.go())}}),kt.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load(){return It(()=>Promise.resolve().then(()=>OZe),void 0).then(t=>t.html())}}),kt.of({name:"Java",extensions:["java"],load(){return It(()=>import("./index-DsT0I4hr.js"),[]).then(t=>t.java())}}),kt.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load(){return It(()=>Promise.resolve().then(()=>NA),void 0).then(t=>t.javascript())}}),kt.of({name:"Jinja",extensions:["j2","jinja","jinja2"],load(){return It(()=>import("./index-6KqSsdJt.js"),[]).then(t=>t.jinja())}}),kt.of({name:"JSON",alias:["json5"],extensions:["json","map"],load(){return It(()=>import("./index-DYRA2EgT.js"),[]).then(t=>t.json())}}),kt.of({name:"JSX",extensions:["jsx"],load(){return It(()=>Promise.resolve().then(()=>NA),void 0).then(t=>t.javascript({jsx:!0}))}}),kt.of({name:"LESS",extensions:["less"],load(){return It(()=>import("./index-CJudBDRv.js"),[]).then(t=>t.less())}}),kt.of({name:"Liquid",extensions:["liquid"],load(){return It(()=>import("./index-CDedz7r2.js"),[]).then(t=>t.liquid())}}),kt.of({name:"MariaDB SQL",load(){return f0("MariaSQL")}}),kt.of({name:"Markdown",extensions:["md","markdown","mkd"],load(){return It(()=>Promise.resolve().then(()=>CGe),void 0).then(t=>t.markdown())}}),kt.of({name:"MS SQL",load(){return f0("MSSQL")}}),kt.of({name:"MySQL",load(){return f0("MySQL")}}),kt.of({name:"PHP",extensions:["php","php3","php4","php5","php7","phtml"],load(){return It(()=>import("./index-BoC35E9D.js"),[]).then(t=>t.php())}}),kt.of({name:"PLSQL",extensions:["pls"],load(){return f0("PLSQL")}}),kt.of({name:"PostgreSQL",load(){return f0("PostgreSQL")}}),kt.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load(){return It(()=>import("./index-Pyz5HMvv.js"),[]).then(t=>t.python())}}),kt.of({name:"Rust",extensions:["rs"],load(){return It(()=>import("./index-BoTcEgIh.js"),[]).then(t=>t.rust())}}),kt.of({name:"Sass",extensions:["sass"],load(){return It(()=>import("./index-BdsVVJqo.js"),[]).then(t=>t.sass({indented:!0}))}}),kt.of({name:"SCSS",extensions:["scss"],load(){return It(()=>import("./index-BdsVVJqo.js"),[]).then(t=>t.sass())}}),kt.of({name:"SQL",extensions:["sql"],load(){return f0("StandardSQL")}}),kt.of({name:"SQLite",load(){return f0("SQLite")}}),kt.of({name:"TSX",extensions:["tsx"],load(){return It(()=>Promise.resolve().then(()=>NA),void 0).then(t=>t.javascript({jsx:!0,typescript:!0}))}}),kt.of({name:"TypeScript",alias:["ts"],extensions:["ts","mts","cts"],load(){return It(()=>Promise.resolve().then(()=>NA),void 0).then(t=>t.javascript({typescript:!0}))}}),kt.of({name:"WebAssembly",extensions:["wat","wast"],load(){return It(()=>import("./index-ByFqgSvm.js"),[]).then(t=>t.wast())}}),kt.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load(){return It(()=>import("./index-BB4EvCG_.js"),[]).then(t=>t.xml())}}),kt.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load(){return It(()=>import("./index-Df0mJRyk.js"),[]).then(t=>t.yaml())}}),kt.of({name:"APL",extensions:["dyalog","apl"],load(){return It(()=>import("./apl-B4CMkyY2.js"),[]).then(t=>Xt(t.apl))}}),kt.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load(){return It(()=>import("./asciiarmor-Df11BRmG.js"),[]).then(t=>Xt(t.asciiArmor))}}),kt.of({name:"ASN.1",extensions:["asn","asn1"],load(){return It(()=>import("./asn1-EdZsLKOL.js"),[]).then(t=>Xt(t.asn1({})))}}),kt.of({name:"Asterisk",filename:/^extensions\.conf$/i,load(){return It(()=>import("./asterisk-B-8jnY81.js"),[]).then(t=>Xt(t.asterisk))}}),kt.of({name:"Brainfuck",extensions:["b","bf"],load(){return It(()=>import("./brainfuck-C4LP7Hcl.js"),[]).then(t=>Xt(t.brainfuck))}}),kt.of({name:"Cobol",extensions:["cob","cpy"],load(){return It(()=>import("./cobol-CWcv1MsR.js"),[]).then(t=>Xt(t.cobol))}}),kt.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load(){return It(()=>import("./clike-B9uivgTg.js"),[]).then(t=>Xt(t.csharp))}}),kt.of({name:"Clojure",extensions:["clj","cljc","cljx"],load(){return It(()=>import("./clojure-BMjYHr_A.js"),[]).then(t=>Xt(t.clojure))}}),kt.of({name:"ClojureScript",extensions:["cljs"],load(){return It(()=>import("./clojure-BMjYHr_A.js"),[]).then(t=>Xt(t.clojure))}}),kt.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load(){return It(()=>import("./css-BnMrqG3P.js"),[]).then(t=>Xt(t.gss))}}),kt.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load(){return It(()=>import("./cmake-BQqOBYOt.js"),[]).then(t=>Xt(t.cmake))}}),kt.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load(){return It(()=>import("./coffeescript-S37ZYGWr.js"),[]).then(t=>Xt(t.coffeeScript))}}),kt.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load(){return It(()=>import("./commonlisp-DBKNyK5s.js"),[]).then(t=>Xt(t.commonLisp))}}),kt.of({name:"Cypher",extensions:["cyp","cypher"],load(){return It(()=>import("./cypher-C_CwsFkJ.js"),[]).then(t=>Xt(t.cypher))}}),kt.of({name:"Cython",extensions:["pyx","pxd","pxi"],load(){return It(()=>import("./python-BuPzkPfP.js"),[]).then(t=>Xt(t.cython))}}),kt.of({name:"Crystal",extensions:["cr"],load(){return It(()=>import("./crystal-SjHAIU92.js"),[]).then(t=>Xt(t.crystal))}}),kt.of({name:"D",extensions:["d"],load(){return It(()=>import("./d-pRatUO7H.js"),[]).then(t=>Xt(t.d))}}),kt.of({name:"Dart",extensions:["dart"],load(){return It(()=>import("./clike-B9uivgTg.js"),[]).then(t=>Xt(t.dart))}}),kt.of({name:"diff",extensions:["diff","patch"],load(){return It(()=>import("./diff-DbItnlRl.js"),[]).then(t=>Xt(t.diff))}}),kt.of({name:"Dockerfile",filename:/^Dockerfile$/,load(){return It(()=>import("./dockerfile-BKs6k2Af.js"),__vite__mapDeps([0,1])).then(t=>Xt(t.dockerFile))}}),kt.of({name:"DTD",extensions:["dtd"],load(){return It(()=>import("./dtd-DF_7sFjM.js"),[]).then(t=>Xt(t.dtd))}}),kt.of({name:"Dylan",extensions:["dylan","dyl","intr"],load(){return It(()=>import("./dylan-DwRh75JA.js"),[]).then(t=>Xt(t.dylan))}}),kt.of({name:"EBNF",load(){return It(()=>import("./ebnf-CDyGwa7X.js"),[]).then(t=>Xt(t.ebnf))}}),kt.of({name:"ECL",extensions:["ecl"],load(){return It(()=>import("./ecl-Cabwm37j.js"),[]).then(t=>Xt(t.ecl))}}),kt.of({name:"edn",extensions:["edn"],load(){return It(()=>import("./clojure-BMjYHr_A.js"),[]).then(t=>Xt(t.clojure))}}),kt.of({name:"Eiffel",extensions:["e"],load(){return It(()=>import("./eiffel-CnydiIhH.js"),[]).then(t=>Xt(t.eiffel))}}),kt.of({name:"Elm",extensions:["elm"],load(){return It(()=>import("./elm-vLlmbW-K.js"),[]).then(t=>Xt(t.elm))}}),kt.of({name:"Erlang",extensions:["erl"],load(){return It(()=>import("./erlang-BNw1qcRV.js"),[]).then(t=>Xt(t.erlang))}}),kt.of({name:"Esper",load(){return It(()=>import("./sql-D0XecflT.js"),[]).then(t=>Xt(t.esper))}}),kt.of({name:"Factor",extensions:["factor"],load(){return It(()=>import("./factor-kuTfRLto.js"),__vite__mapDeps([2,1])).then(t=>Xt(t.factor))}}),kt.of({name:"FCL",load(){return It(()=>import("./fcl-Kvtd6kyn.js"),[]).then(t=>Xt(t.fcl))}}),kt.of({name:"Forth",extensions:["forth","fth","4th"],load(){return It(()=>import("./forth-Ffai-XNe.js"),[]).then(t=>Xt(t.forth))}}),kt.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load(){return It(()=>import("./fortran-DYz_wnZ1.js"),[]).then(t=>Xt(t.fortran))}}),kt.of({name:"F#",alias:["fsharp"],extensions:["fs"],load(){return It(()=>import("./mllike-CXdrOF99.js"),[]).then(t=>Xt(t.fSharp))}}),kt.of({name:"Gas",extensions:["s"],load(){return It(()=>import("./gas-Bneqetm1.js"),[]).then(t=>Xt(t.gas))}}),kt.of({name:"Gherkin",extensions:["feature"],load(){return It(()=>import("./gherkin-heZmZLOM.js"),[]).then(t=>Xt(t.gherkin))}}),kt.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load(){return It(()=>import("./groovy-D9Dt4D0W.js"),[]).then(t=>Xt(t.groovy))}}),kt.of({name:"Haskell",extensions:["hs"],load(){return It(()=>import("./haskell-Cw1EW3IL.js"),[]).then(t=>Xt(t.haskell))}}),kt.of({name:"Haxe",extensions:["hx"],load(){return It(()=>import("./haxe-H-WmDvRZ.js"),[]).then(t=>Xt(t.haxe))}}),kt.of({name:"HXML",extensions:["hxml"],load(){return It(()=>import("./haxe-H-WmDvRZ.js"),[]).then(t=>Xt(t.hxml))}}),kt.of({name:"HTTP",load(){return It(()=>import("./http-DBlCnlav.js"),[]).then(t=>Xt(t.http))}}),kt.of({name:"IDL",extensions:["pro"],load(){return It(()=>import("./idl-BEugSyMb.js"),[]).then(t=>Xt(t.idl))}}),kt.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load(){return It(()=>import("./javascript-iXu5QeM3.js"),[]).then(t=>Xt(t.jsonld))}}),kt.of({name:"Julia",extensions:["jl"],load(){return It(()=>import("./julia-DuME0IfC.js"),[]).then(t=>Xt(t.julia))}}),kt.of({name:"Kotlin",extensions:["kt","kts"],load(){return It(()=>import("./clike-B9uivgTg.js"),[]).then(t=>Xt(t.kotlin))}}),kt.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load(){return It(()=>import("./livescript-BwQOo05w.js"),[]).then(t=>Xt(t.liveScript))}}),kt.of({name:"Lua",extensions:["lua"],load(){return It(()=>import("./lua-BgMRiT3U.js"),[]).then(t=>Xt(t.lua))}}),kt.of({name:"mIRC",extensions:["mrc"],load(){return It(()=>import("./mirc-CjQqDB4T.js"),[]).then(t=>Xt(t.mirc))}}),kt.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load(){return It(()=>import("./mathematica-DTrFuWx2.js"),[]).then(t=>Xt(t.mathematica))}}),kt.of({name:"Modelica",extensions:["mo"],load(){return It(()=>import("./modelica-Dc1JOy9r.js"),[]).then(t=>Xt(t.modelica))}}),kt.of({name:"MUMPS",extensions:["mps"],load(){return It(()=>import("./mumps-BT43cFF4.js"),[]).then(t=>Xt(t.mumps))}}),kt.of({name:"Mbox",extensions:["mbox"],load(){return It(()=>import("./mbox-CNhZ1qSd.js"),[]).then(t=>Xt(t.mbox))}}),kt.of({name:"Nginx",filename:/nginx.*\.conf$/i,load(){return It(()=>import("./nginx-DdIZxoE0.js"),[]).then(t=>Xt(t.nginx))}}),kt.of({name:"NSIS",extensions:["nsh","nsi"],load(){return It(()=>import("./nsis-LdVXkNf5.js"),__vite__mapDeps([3,1])).then(t=>Xt(t.nsis))}}),kt.of({name:"NTriples",extensions:["nt","nq"],load(){return It(()=>import("./ntriples-BfvgReVJ.js"),[]).then(t=>Xt(t.ntriples))}}),kt.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load(){return It(()=>import("./clike-B9uivgTg.js"),[]).then(t=>Xt(t.objectiveC))}}),kt.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load(){return It(()=>import("./clike-B9uivgTg.js"),[]).then(t=>Xt(t.objectiveCpp))}}),kt.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load(){return It(()=>import("./mllike-CXdrOF99.js"),[]).then(t=>Xt(t.oCaml))}}),kt.of({name:"Octave",extensions:["m"],load(){return It(()=>import("./octave-Ck1zUtKM.js"),[]).then(t=>Xt(t.octave))}}),kt.of({name:"Oz",extensions:["oz"],load(){return It(()=>import("./oz-BzwKVEFT.js"),[]).then(t=>Xt(t.oz))}}),kt.of({name:"Pascal",extensions:["p","pas"],load(){return It(()=>import("./pascal--L3eBynH.js"),[]).then(t=>Xt(t.pascal))}}),kt.of({name:"Perl",extensions:["pl","pm"],load(){return It(()=>import("./perl-CdXCOZ3F.js"),[]).then(t=>Xt(t.perl))}}),kt.of({name:"Pig",extensions:["pig"],load(){return It(()=>import("./pig-CevX1Tat.js"),[]).then(t=>Xt(t.pig))}}),kt.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load(){return It(()=>import("./powershell-CFHJl5sT.js"),[]).then(t=>Xt(t.powerShell))}}),kt.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load(){return It(()=>import("./properties-C78fOPTZ.js"),[]).then(t=>Xt(t.properties))}}),kt.of({name:"ProtoBuf",extensions:["proto"],load(){return It(()=>import("./protobuf-ChK-085T.js"),[]).then(t=>Xt(t.protobuf))}}),kt.of({name:"Pug",alias:["jade"],extensions:["pug","jade"],load(){return It(()=>import("./pug-DeIclll2.js"),__vite__mapDeps([4,5])).then(t=>Xt(t.pug))}}),kt.of({name:"Puppet",extensions:["pp"],load(){return It(()=>import("./puppet-DMA9R1ak.js"),[]).then(t=>Xt(t.puppet))}}),kt.of({name:"Q",extensions:["q"],load(){return It(()=>import("./q-pXgVlZs6.js"),[]).then(t=>Xt(t.q))}}),kt.of({name:"R",alias:["rscript"],extensions:["r","R"],load(){return It(()=>import("./r-B6wPVr8A.js"),[]).then(t=>Xt(t.r))}}),kt.of({name:"RPM Changes",load(){return It(()=>import("./rpm-CTu-6PCP.js"),[]).then(t=>Xt(t.rpmChanges))}}),kt.of({name:"RPM Spec",extensions:["spec"],load(){return It(()=>import("./rpm-CTu-6PCP.js"),[]).then(t=>Xt(t.rpmSpec))}}),kt.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],filename:/^(Gemfile|Rakefile)$/,load(){return It(()=>import("./ruby-B2Rjki9n.js"),[]).then(t=>Xt(t.ruby))}}),kt.of({name:"SAS",extensions:["sas"],load(){return It(()=>import("./sas-B4kiWyti.js"),[]).then(t=>Xt(t.sas))}}),kt.of({name:"Scala",extensions:["scala"],load(){return It(()=>import("./clike-B9uivgTg.js"),[]).then(t=>Xt(t.scala))}}),kt.of({name:"Scheme",extensions:["scm","ss"],load(){return It(()=>import("./scheme-C41bIUwD.js"),[]).then(t=>Xt(t.scheme))}}),kt.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load(){return It(()=>import("./shell-CjFT_Tl9.js"),[]).then(t=>Xt(t.shell))}}),kt.of({name:"Sieve",extensions:["siv","sieve"],load(){return It(()=>import("./sieve-C3Gn_uJK.js"),[]).then(t=>Xt(t.sieve))}}),kt.of({name:"Smalltalk",extensions:["st"],load(){return It(()=>import("./smalltalk-CnHTOXQT.js"),[]).then(t=>Xt(t.smalltalk))}}),kt.of({name:"Solr",load(){return It(()=>import("./solr-DehyRSwq.js"),[]).then(t=>Xt(t.solr))}}),kt.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load(){return It(()=>import("./mllike-CXdrOF99.js"),[]).then(t=>Xt(t.sml))}}),kt.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load(){return It(()=>import("./sparql-DkYu6x3z.js"),[]).then(t=>Xt(t.sparql))}}),kt.of({name:"Spreadsheet",alias:["excel","formula"],load(){return It(()=>import("./spreadsheet-BCZA_wO0.js"),[]).then(t=>Xt(t.spreadsheet))}}),kt.of({name:"Squirrel",extensions:["nut"],load(){return It(()=>import("./clike-B9uivgTg.js"),[]).then(t=>Xt(t.squirrel))}}),kt.of({name:"Stylus",extensions:["styl"],load(){return It(()=>import("./stylus-B533Al4x.js"),[]).then(t=>Xt(t.stylus))}}),kt.of({name:"Swift",extensions:["swift"],load(){return It(()=>import("./swift-BzpIVaGY.js"),[]).then(t=>Xt(t.swift))}}),kt.of({name:"sTeX",load(){return It(()=>import("./stex-C3f8Ysf7.js"),[]).then(t=>Xt(t.stex))}}),kt.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load(){return It(()=>import("./stex-C3f8Ysf7.js"),[]).then(t=>Xt(t.stex))}}),kt.of({name:"SystemVerilog",extensions:["v","sv","svh"],load(){return It(()=>import("./verilog-C6RDOZhf.js"),[]).then(t=>Xt(t.verilog))}}),kt.of({name:"Tcl",extensions:["tcl"],load(){return It(()=>import("./tcl-DVfN8rqt.js"),[]).then(t=>Xt(t.tcl))}}),kt.of({name:"Textile",extensions:["textile"],load(){return It(()=>import("./textile-CnDTJFAw.js"),[]).then(t=>Xt(t.textile))}}),kt.of({name:"TiddlyWiki",load(){return It(()=>import("./tiddlywiki-DO-Gjzrf.js"),[]).then(t=>Xt(t.tiddlyWiki))}}),kt.of({name:"Tiki wiki",load(){return It(()=>import("./tiki-DGYXhP31.js"),[]).then(t=>Xt(t.tiki))}}),kt.of({name:"TOML",extensions:["toml"],load(){return It(()=>import("./toml-Bm5Em-hy.js"),[]).then(t=>Xt(t.toml))}}),kt.of({name:"Troff",extensions:["1","2","3","4","5","6","7","8","9"],load(){return It(()=>import("./troff-wAsdV37c.js"),[]).then(t=>Xt(t.troff))}}),kt.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load(){return It(()=>import("./ttcn-CfJYG6tj.js"),[]).then(t=>Xt(t.ttcn))}}),kt.of({name:"TTCN_CFG",extensions:["cfg"],load(){return It(()=>import("./ttcn-cfg-B9xdYoR4.js"),[]).then(t=>Xt(t.ttcnCfg))}}),kt.of({name:"Turtle",extensions:["ttl"],load(){return It(()=>import("./turtle-B1tBg_DP.js"),[]).then(t=>Xt(t.turtle))}}),kt.of({name:"Web IDL",extensions:["webidl"],load(){return It(()=>import("./webidl-ZXfAyPTL.js"),[]).then(t=>Xt(t.webIDL))}}),kt.of({name:"VB.NET",extensions:["vb"],load(){return It(()=>import("./vb-CmGdzxic.js"),[]).then(t=>Xt(t.vb))}}),kt.of({name:"VBScript",extensions:["vbs"],load(){return It(()=>import("./vbscript-BuJXcnF6.js"),[]).then(t=>Xt(t.vbScript))}}),kt.of({name:"Velocity",extensions:["vtl"],load(){return It(()=>import("./velocity-D8B20fx6.js"),[]).then(t=>Xt(t.velocity))}}),kt.of({name:"Verilog",extensions:["v"],load(){return It(()=>import("./verilog-C6RDOZhf.js"),[]).then(t=>Xt(t.verilog))}}),kt.of({name:"VHDL",extensions:["vhd","vhdl"],load(){return It(()=>import("./vhdl-lSbBsy5d.js"),[]).then(t=>Xt(t.vhdl))}}),kt.of({name:"XQuery",extensions:["xy","xquery","xq","xqm","xqy"],load(){return It(()=>import("./xquery-DzFWVndE.js"),[]).then(t=>Xt(t.xQuery))}}),kt.of({name:"Yacas",extensions:["ys"],load(){return It(()=>import("./yacas-BJ4BC0dw.js"),[]).then(t=>Xt(t.yacas))}}),kt.of({name:"Z80",extensions:["z80"],load(){return It(()=>import("./z80-Hz9HOZM7.js"),[]).then(t=>Xt(t.z80))}}),kt.of({name:"MscGen",extensions:["mscgen","mscin","msc"],load(){return It(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(t=>Xt(t.mscgen))}}),kt.of({name:"X",extensions:["xu"],load(){return It(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(t=>Xt(t.xu))}}),kt.of({name:"MsGenny",extensions:["msgenny"],load(){return It(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(t=>Xt(t.msgenny))}}),kt.of({name:"Vue",extensions:["vue"],load(){return It(()=>import("./index-BVUmqbHu.js"),[]).then(t=>t.vue())}}),kt.of({name:"Angular Template",load(){return It(()=>import("./index-V4wDxFQO.js"),[]).then(t=>t.angular())}})],zW="#2e3440",A9="#3b4252",NW="#434c5e",BA="#4c566a",BW="#e5e9f0",Hz="#eceff4",pL="#8fbcbb",FW="#88c0d0",TZe="#81a1c1",ef="#5e81ac",kZe="#bf616a",C1="#d08770",mL="#ebcb8b",jW="#a3be8c",EZe="#b48ead",VW="#d30102",P9=Hz,gL=P9,AZe="#ffffff",yL=A9,PZe=P9,QW=A9,MZe=un.theme({"&":{color:zW,backgroundColor:AZe},".cm-content":{caretColor:QW},".cm-cursor, .cm-dropCursor":{borderLeftColor:QW},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:PZe},".cm-panels":{backgroundColor:P9,color:BA},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${BA}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:BW},".cm-activeLine":{backgroundColor:gL},".cm-selectionMatch":{backgroundColor:BW},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${BA}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:Hz},".cm-gutters":{backgroundColor:Hz,color:zW,border:"none"},".cm-activeLineGutter":{backgroundColor:gL},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:yL},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:yL,borderBottomColor:yL},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:gL,color:BA}}},{dark:!1}),RZe=kk.define([{tag:Be.keyword,color:ef},{tag:[Be.name,Be.deleted,Be.character,Be.propertyName,Be.macroName],color:C1},{tag:[Be.variableName],color:C1},{tag:[Be.function(Be.variableName)],color:ef},{tag:[Be.labelName],color:TZe},{tag:[Be.color,Be.constant(Be.name),Be.standard(Be.name)],color:ef},{tag:[Be.definition(Be.name),Be.separator],color:jW},{tag:[Be.brace],color:pL},{tag:[Be.annotation],color:VW},{tag:[Be.number,Be.changed,Be.annotation,Be.modifier,Be.self,Be.namespace],color:FW},{tag:[Be.typeName,Be.className],color:mL},{tag:[Be.operator,Be.operatorKeyword],color:jW},{tag:[Be.tagName],color:EZe},{tag:[Be.squareBracket],color:kZe},{tag:[Be.angleBracket],color:C1},{tag:[Be.attributeName],color:mL},{tag:[Be.regexp],color:ef},{tag:[Be.quote],color:A9},{tag:[Be.string],color:C1},{tag:Be.link,color:pL,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[Be.url,Be.escape,Be.special(Be.string)],color:C1},{tag:[Be.meta],color:FW},{tag:[Be.comment],color:NW,fontStyle:"italic"},{tag:Be.strong,fontWeight:"bold",color:ef},{tag:Be.emphasis,fontStyle:"italic",color:ef},{tag:Be.strikethrough,textDecoration:"line-through"},{tag:Be.heading,fontWeight:"bold",color:ef},{tag:Be.special(Be.heading1),fontWeight:"bold",color:ef},{tag:Be.heading1,fontWeight:"bold",color:ef},{tag:[Be.heading2,Be.heading3,Be.heading4],fontWeight:"bold",color:ef},{tag:[Be.heading5,Be.heading6],color:ef},{tag:[Be.atom,Be.bool,Be.special(Be.variableName)],color:C1},{tag:[Be.processingInstruction,Be.inserted],color:pL},{tag:[Be.contentSeparator],color:mL},{tag:Be.invalid,color:NW,borderBottom:`1px dotted ${VW}`}]),hae=[MZe,xoe(RZe)],UW=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class tO{constructor(e,n,r=0,i=e.length,o,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?s=>o(UW(s)):UW,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Wc(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=$B(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Np(e);let i=this.normalize(n);if(i.length)for(let o=0,a=r;;o++){let s=i.charCodeAt(o),u=this.match(s,a,this.bufferPos+this.bufferStart);if(o==i.length-1){if(u)return this.value=u,this;break}a==r&&o<n.length&&n.charCodeAt(o)==s&&a++}}}match(e,n,r){let i=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],s=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?i={from:this.matches[o+1],to:r}:(this.matches[o]++,s=!0)),s||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(tO.prototype[Symbol.iterator]=function(){return this});const dae={from:-1,to:-1,match:/.*/.exec("")},M9="gm"+(/x/.unicode==null?"":"u");class fae{constructor(e,n,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=dae,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new pae(e,n,r,i,o);this.re=new RegExp(n,M9+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let a=e.lineAt(i);this.curLineStart=a.from,this.matchPos=vM(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=vM(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const vL=new WeakMap;class mw{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=vL.get(e);if(!i||i.from>=r||i.to<=n){let s=new mw(n,e.sliceString(n,r));return vL.set(e,s),s}if(i.from==n&&i.to==r)return i;let{text:o,from:a}=i;return a>n&&(o=e.sliceString(n,a)+o,a=n),i.to<r&&(o+=e.sliceString(i.to,r)),vL.set(e,new mw(a,o)),new mw(n,o.slice(n-a,r-a))}}class pae{constructor(e,n,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=dae,this.matchPos=vM(e,i),this.re=new RegExp(n,M9+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=mw.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=vM(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=mw.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(fae.prototype[Symbol.iterator]=pae.prototype[Symbol.iterator]=function(){return this});function IZe(t){try{return new RegExp(t,M9),!0}catch{return!1}}function vM(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function Gz(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=fo("input",{class:"cm-textfield",name:"line",value:e}),r=fo("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),t.dispatch({effects:bC.of(!1)}),t.focus()):o.keyCode==13&&(o.preventDefault(),i())},onsubmit:o=>{o.preventDefault(),i()}},fo("label",t.state.phrase("Go to line"),": ",n)," ",fo("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),fo("button",{name:"close",onclick:()=>{t.dispatch({effects:bC.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!o)return;let{state:a}=t,s=a.doc.lineAt(a.selection.main.head),[,u,f,g,_]=o,w=g?+g.slice(1):0,S=f?+f:s.number;if(f&&_){let R=S/100;u&&(R=R*(u=="-"?-1:1)+s.number/a.doc.lines),S=Math.round(a.doc.lines*R)}else f&&u&&(S=S*(u=="-"?-1:1)+s.number);let E=a.doc.line(Math.max(1,Math.min(a.doc.lines,S))),A=Ft.cursor(E.from+Math.max(0,Math.min(w,E.length)));t.dispatch({effects:[bC.of(!1),un.scrollIntoView(A.from,{y:"center"})],selection:A}),t.focus()}return{dom:r}}const bC=fr.define(),ZW=Rs.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(bC)&&(t=n.value);return t},provide:t=>yT.from(t,e=>e?Gz:null)}),DZe=t=>{let e=gT(t,Gz);if(!e){let n=[bC.of(!0)];t.state.field(ZW,!1)==null&&n.push(fr.appendConfig.of([ZW,LZe])),t.dispatch({effects:n}),e=gT(t,Gz)}return e&&e.dom.querySelector("input").select(),!0},LZe=un.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),$Ze={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},zZe=En.define({combine(t){return mm(t,$Ze,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function NZe(t){return[QZe,VZe]}const BZe=zn.mark({class:"cm-selectionMatch"}),FZe=zn.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function qW(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=Uo.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=Uo.Word)}function jZe(t,e,n,r){return t(e.sliceDoc(n,n+1))==Uo.Word&&t(e.sliceDoc(r-1,r))==Uo.Word}const VZe=As.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(zZe),{state:n}=t,r=n.selection;if(r.ranges.length>1)return zn.none;let i=r.main,o,a=null;if(i.empty){if(!e.highlightWordAroundCursor)return zn.none;let u=n.wordAt(i.head);if(!u)return zn.none;a=n.charCategorizer(i.head),o=n.sliceDoc(u.from,u.to)}else{let u=i.to-i.from;if(u<e.minSelectionLength||u>200)return zn.none;if(e.wholeWords){if(o=n.sliceDoc(i.from,i.to),a=n.charCategorizer(i.head),!(qW(a,n,i.from,i.to)&&jZe(a,n,i.from,i.to)))return zn.none}else if(o=n.sliceDoc(i.from,i.to),!o)return zn.none}let s=[];for(let u of t.visibleRanges){let f=new tO(n.doc,o,u.from,u.to);for(;!f.next().done;){let{from:g,to:_}=f.value;if((!a||qW(a,n,g,_))&&(i.empty&&g<=i.from&&_>=i.to?s.push(FZe.range(g,_)):(g>=i.to||_<=i.from)&&s.push(BZe.range(g,_)),s.length>e.maxMatches))return zn.none}}return zn.set(s)}},{decorations:t=>t.decorations}),QZe=un.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),UZe=({state:t,dispatch:e})=>{let{selection:n}=t,r=Ft.create(n.ranges.map(i=>t.wordAt(i.head)||Ft.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function ZZe(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let a=!1,s=new tO(t.doc,e,r[r.length-1].to);;)if(s.next(),s.done){if(a)return null;s=new tO(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),a=!0}else{if(a&&r.some(u=>u.from==s.value.from))continue;if(o){let u=t.wordAt(s.value.from);if(!u||u.from!=s.value.from||u.to!=s.value.to)continue}return s.value}}const qZe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(o=>o.from===o.to))return UZe({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(o=>t.sliceDoc(o.from,o.to)!=r))return!1;let i=ZZe(t,r);return i?(e(t.update({selection:t.selection.addRange(Ft.range(i.from,i.to),!1),effects:un.scrollIntoView(i.to)})),!0):!1},QO=En.define({combine(t){return mm(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new iqe(e),scrollToMatch:e=>un.scrollIntoView(e)})}});class mae{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||IZe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new XZe(this):new HZe(this)}getCursor(e,n=0,r){let i=e.doc?e:Pr.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?N1(this,i,n,r):z1(this,i,n,r)}}class gae{constructor(e){this.spec=e}}function z1(t,e,n,r){return new tO(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?WZe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function WZe(t,e){return(n,r,i,o)=>((o>n||o+i.length<r)&&(o=Math.max(0,n-2),i=t.sliceString(o,Math.min(t.length,r+2))),(e(_M(i,n-o))!=Uo.Word||e(bM(i,n-o))!=Uo.Word)&&(e(bM(i,r-o))!=Uo.Word||e(_M(i,r-o))!=Uo.Word))}class HZe extends gae{constructor(e){super(e)}nextMatch(e,n,r){let i=z1(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let o=Math.min(e.doc.length,n+this.spec.unquoted.length);i=z1(this.spec,e,0,o).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let o=Math.max(n,i-1e4-this.spec.unquoted.length),a=z1(this.spec,e,o,i),s=null;for(;!a.nextOverlapping().done;)s=a.value;if(s)return s;if(o==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=z1(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=z1(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}function N1(t,e,n,r){return new fae(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?GZe(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function _M(t,e){return t.slice(fa(t,e,!1),e)}function bM(t,e){return t.slice(e,fa(t,e))}function GZe(t){return(e,n,r)=>!r[0].length||(t(_M(r.input,r.index))!=Uo.Word||t(bM(r.input,r.index))!=Uo.Word)&&(t(bM(r.input,r.index+r[0].length))!=Uo.Word||t(_M(r.input,r.index+r[0].length))!=Uo.Word)}class XZe extends gae{nextMatch(e,n,r){let i=N1(this.spec,e,r,e.doc.length).next();return i.done&&(i=N1(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let o=Math.max(n,r-i*1e4),a=N1(this.spec,e,o,r),s=null;for(;!a.next().done;)s=a.value;if(s&&(o==n||s.from>o+10))return s;if(o==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let o=+r.slice(0,i);if(o>0&&o<e.match.length)return e.match[o]+r.slice(i)}return n})}matchAll(e,n){let r=N1(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=N1(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}const ET=fr.define(),R9=fr.define(),R0=Rs.define({create(t){return new _L(Xz(t).create(),null)},update(t,e){for(let n of e.effects)n.is(ET)?t=new _L(n.value.create(),t.panel):n.is(R9)&&(t=new _L(t.query,n.value?I9:null));return t},provide:t=>yT.from(t,e=>e.panel)});class _L{constructor(e,n){this.query=e,this.panel=n}}const YZe=zn.mark({class:"cm-searchMatch"}),KZe=zn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),JZe=As.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(R0))}update(t){let e=t.state.field(R0);(e!=t.startState.field(R0)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return zn.none;let{view:n}=this,r=new ou;for(let i=0,o=n.visibleRanges,a=o.length;i<a;i++){let{from:s,to:u}=o[i];for(;i<a-1&&u>o[i+1].from-500;)u=o[++i].to;t.highlight(n.state,s,u,(f,g)=>{let _=n.state.selection.ranges.some(w=>w.from==f&&w.to==g);r.add(f,g,_?KZe:YZe)})}return r.finish()}},{decorations:t=>t.decorations});function Pk(t){return e=>{let n=e.state.field(R0,!1);return n&&n.query.spec.valid?t(e,n):_ae(e)}}const xM=Pk((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=Ft.single(r.from,r.to),o=t.state.facet(QO);return t.dispatch({selection:i,effects:[D9(t,r),o.scrollToMatch(i.main,t)],userEvent:"select.search"}),vae(t),!0}),wM=Pk((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let o=Ft.single(i.from,i.to),a=t.state.facet(QO);return t.dispatch({selection:o,effects:[D9(t,i),a.scrollToMatch(o.main,t)],userEvent:"select.search"}),vae(t),!0}),eqe=Pk((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:Ft.create(n.map(r=>Ft.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),tqe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],a=0;for(let s=new tO(t.doc,t.sliceDoc(r,i));!s.next().done;){if(o.length>1e3)return!1;s.value.from==r&&(a=o.length),o.push(Ft.range(s.value.from,s.value.to))}return e(t.update({selection:Ft.create(o,a),userEvent:"select.search.matches"})),!0},WW=Pk((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,r,r);if(!o)return!1;let a=o,s=[],u,f,g=[];a.from==r&&a.to==i&&(f=n.toText(e.getReplacement(a)),s.push({from:a.from,to:a.to,insert:f}),a=e.nextMatch(n,a.from,a.to),g.push(un.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let _=t.state.changes(s);return a&&(u=Ft.single(a.from,a.to).map(_),g.push(D9(t,a)),g.push(n.facet(QO).scrollToMatch(u.main,t))),t.dispatch({changes:_,selection:u,effects:g,userEvent:"input.replace"}),!0}),nqe=Pk((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:o,to:a}=i;return{from:o,to:a,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:un.announce.of(r),userEvent:"input.replace.all"}),!0});function I9(t){return t.state.facet(QO).createPanel(t)}function Xz(t,e){var n,r,i,o,a;let s=t.selection.main,u=s.empty||s.to>s.from+100?"":t.sliceDoc(s.from,s.to);if(e&&!u)return e;let f=t.facet(QO);return new mae({search:((n=e?.literal)!==null&&n!==void 0?n:f.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:f.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:f.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:f.regexp,wholeWord:(a=e?.wholeWord)!==null&&a!==void 0?a:f.wholeWord})}function yae(t){let e=gT(t,I9);return e&&e.dom.querySelector("[main-field]")}function vae(t){let e=yae(t);e&&e==t.root.activeElement&&e.select()}const _ae=t=>{let e=t.state.field(R0,!1);if(e&&e.panel){let n=yae(t);if(n&&n!=t.root.activeElement){let r=Xz(t.state,e.query.spec);r.valid&&t.dispatch({effects:ET.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[R9.of(!0),e?ET.of(Xz(t.state,e.query.spec)):fr.appendConfig.of(sqe)]});return!0},bae=t=>{let e=t.state.field(R0,!1);if(!e||!e.panel)return!1;let n=gT(t,I9);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:R9.of(!1)}),!0},rqe=[{key:"Mod-f",run:_ae,scope:"editor search-panel"},{key:"F3",run:xM,shift:wM,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:xM,shift:wM,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:bae,scope:"editor search-panel"},{key:"Mod-Shift-l",run:tqe},{key:"Mod-Alt-g",run:DZe},{key:"Mod-d",run:qZe,preventDefault:!0}];class iqe{constructor(e){this.view=e;let n=this.query=e.state.field(R0).query.spec;this.commit=this.commit.bind(this),this.searchField=fo("input",{value:n.search,placeholder:Ru(e,"Find"),"aria-label":Ru(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=fo("input",{value:n.replace,placeholder:Ru(e,"Replace"),"aria-label":Ru(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=fo("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=fo("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=fo("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,o,a){return fo("button",{class:"cm-button",name:i,onclick:o,type:"button"},a)}this.dom=fo("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>xM(e),[Ru(e,"next")]),r("prev",()=>wM(e),[Ru(e,"previous")]),r("select",()=>eqe(e),[Ru(e,"all")]),fo("label",null,[this.caseField,Ru(e,"match case")]),fo("label",null,[this.reField,Ru(e,"regexp")]),fo("label",null,[this.wordField,Ru(e,"by word")]),...e.state.readOnly?[]:[fo("br"),this.replaceField,r("replace",()=>WW(e),[Ru(e,"replace")]),r("replaceAll",()=>nqe(e),[Ru(e,"replace all")])],fo("button",{name:"close",onclick:()=>bae(e),"aria-label":Ru(e,"close"),type:"button"},[""])])}commit(){let e=new mae({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:ET.of(e)}))}keydown(e){F9e(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?wM:xM)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),WW(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(ET)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(QO).top}}function Ru(t,e){return t.state.phrase(e)}const FA=30,jA=/[\s\.,:;?!]/;function D9(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,o=Math.max(r.from,e-FA),a=Math.min(i,n+FA),s=t.state.sliceDoc(o,a);if(o!=r.from){for(let u=0;u<FA;u++)if(!jA.test(s[u+1])&&jA.test(s[u])){s=s.slice(u);break}}if(a!=i){for(let u=s.length-1;u>s.length-FA;u--)if(!jA.test(s[u-1])&&jA.test(s[u])){s=s.slice(0,u);break}}return un.announce.of(`${t.state.phrase("current match")}. ${s} ${t.state.phrase("on line")} ${r.number}.`)}const oqe=un.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),sqe=[R0,Pf.low(JZe),oqe];class HW{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class D_{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(AT).markerFilter;i&&(e=i(e,r));let o=e.slice().sort((S,E)=>S.from-E.from||S.to-E.to),a=new ou,s=[],u=0,f=r.doc.iter(),g=0,_=r.doc.length;for(let S=0;;){let E=S==o.length?null:o[S];if(!E&&!s.length)break;let A,R;if(s.length)A=u,R=s.reduce((B,F)=>Math.min(B,F.to),E&&E.from>A?E.from:1e8);else{if(A=E.from,A>_)break;R=E.to,s.push(E),S++}for(;S<o.length;){let B=o[S];if(B.from==A&&(B.to>B.from||B.to==A))s.push(B),S++,R=Math.min(B.to,R);else{R=Math.min(B.from,R);break}}R=Math.min(R,_);let $=!1;if(s.some(B=>B.from==A&&(B.to==R||R==_))&&($=A==R,!$&&R-A<10)){let B=A-(g+f.value.length);B>0&&(f.next(B),g=A);for(let F=A;;){if(F>=R){$=!0;break}if(!f.lineBreak&&g+f.value.length>F)break;F=g+f.value.length,g+=f.value.length,f.next()}}let z=_qe(s);if($)a.add(A,A,zn.widget({widget:new mqe(z),diagnostics:s.slice()}));else{let B=s.reduce((F,U)=>U.markClass?F+" "+U.markClass:F,"");a.add(A,R,zn.mark({class:"cm-lintRange cm-lintRange-"+z+B,diagnostics:s.slice(),inclusiveEnd:s.some(F=>F.to>R)}))}if(u=R,u==_)break;for(let B=0;B<s.length;B++)s[B].to<=u&&s.splice(B--,1)}let w=a.finish();return new D_(w,n,nO(w))}}function nO(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,o,{spec:a})=>{if(!(e&&a.diagnostics.indexOf(e)<0))if(!r)r=new HW(i,o,e||a.diagnostics[0]);else{if(a.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new HW(r.from,o,r.diagnostic)}}),r}function aqe(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(AT).hideOn(t,n,r);if(i!=null)return i;let o=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(a=>a.is(xae))||t.changes.touchesRange(o.from,Math.max(o.to,r)))}function lqe(t,e){return t.field(Wu,!1)?e:e.concat(fr.appendConfig.of(bqe))}const xae=fr.define(),L9=fr.define(),wae=fr.define(),Wu=Rs.define({create(){return new D_(zn.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let o=e.changes.mapPos(t.selected.from,1);r=nO(n,t.selected.diagnostic,o)||nO(n,null,o)}!n.size&&i&&e.state.facet(AT).autoPanel&&(i=null),t=new D_(n,i,r)}for(let n of e.effects)if(n.is(xae)){let r=e.state.facet(AT).autoPanel?n.value.length?PT.open:null:t.panel;t=D_.init(n.value,r,e.state)}else n.is(L9)?t=new D_(t.diagnostics,n.value?PT.open:null,t.selected):n.is(wae)&&(t=new D_(t.diagnostics,t.panel,n.value));return t},provide:t=>[yT.from(t,e=>e.panel),un.decorations.from(t,e=>e.diagnostics)]}),cqe=zn.mark({class:"cm-lintRange cm-lintRange-active"});function uqe(t,e,n){let{diagnostics:r}=t.state.field(Wu),i,o=-1,a=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(u,f,{spec:g})=>{if(e>=u&&e<=f&&(u==f||(e>u||n>0)&&(e<f||n<0)))return i=g.diagnostics,o=u,a=f,!1});let s=t.state.facet(AT).tooltipFilter;return i&&s&&(i=s(i,t.state)),i?{pos:o,end:a,above:t.state.doc.lineAt(o).to<a,create(){return{dom:hqe(t,i)}}}:null}function hqe(t,e){return fo("ul",{class:"cm-tooltip-lint"},e.map(n=>Sae(t,n,!1)))}const dqe=t=>{let e=t.state.field(Wu,!1);(!e||!e.panel)&&t.dispatch({effects:lqe(t.state,[L9.of(!0)])});let n=gT(t,PT.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},GW=t=>{let e=t.state.field(Wu,!1);return!e||!e.panel?!1:(t.dispatch({effects:L9.of(!1)}),!0)},fqe=t=>{let e=t.state.field(Wu,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},pqe=[{key:"Mod-Shift-m",run:dqe,preventDefault:!0},{key:"F8",run:fqe}],AT=En.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...mm(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:XW,tooltipFilter:XW,needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n,hideOn:(e,n)=>e?n?(r,i,o)=>e(r,i,o)||n(r,i,o):e:n,autoPanel:(e,n)=>e||n})}}});function XW(t,e){return t?e?(n,r)=>e(t(n,r),r):t:e}function Oae(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function Sae(t,e,n){var r;let i=n?Oae(e.actions):[];return fo("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},fo("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((o,a)=>{let s=!1,u=S=>{if(S.preventDefault(),s)return;s=!0;let E=nO(t.state.field(Wu).diagnostics,e);E&&o.apply(t,E.from,E.to)},{name:f}=o,g=i[a]?f.indexOf(i[a]):-1,_=g<0?f:[f.slice(0,g),fo("u",f.slice(g,g+1)),f.slice(g+1)],w=o.markClass?" "+o.markClass:"";return fo("button",{type:"button",class:"cm-diagnosticAction"+w,onclick:u,onmousedown:u,"aria-label":` Action: ${f}${g<0?"":` (access key "${i[a]})"`}.`},_)}),e.source&&fo("div",{class:"cm-diagnosticSource"},e.source))}class mqe extends od{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return fo("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class YW{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Sae(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class PT{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)GW(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],a=Oae(o.actions);for(let s=0;s<a.length;s++)if(a[s].toUpperCase().charCodeAt(0)==i.keyCode){let u=nO(this.view.state.field(Wu).diagnostics,o);u&&o.actions[s].apply(e,u.from,u.to)}}else return;i.preventDefault()},r=i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)};this.list=fo("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=fo("div",{class:"cm-panel-lint"},this.list,fo("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>GW(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Wu).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Wu),r=0,i=!1,o=null,a=new Set;for(e.between(0,this.view.state.doc.length,(s,u,{spec:f})=>{for(let g of f.diagnostics){if(a.has(g))continue;a.add(g);let _=-1,w;for(let S=r;S<this.items.length;S++)if(this.items[S].diagnostic==g){_=S;break}_<0?(w=new YW(this.view,g),this.items.splice(r,0,w),i=!0):(w=this.items[_],_>r&&(this.items.splice(r,_-r),i=!0)),n&&w.diagnostic==n.diagnostic?w.dom.hasAttribute("aria-selected")||(w.dom.setAttribute("aria-selected","true"),o=w):w.dom.hasAttribute("aria-selected")&&w.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new YW(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:u})=>{let f=u.height/this.list.offsetHeight;s.top<u.top?this.list.scrollTop-=(u.top-s.top)/f:s.bottom>u.bottom&&(this.list.scrollTop+=(s.bottom-u.bottom)/f)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Wu),r=nO(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:wae.of(r)})}static open(e){return new PT(e)}}function gqe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function VA(t){return gqe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const yqe=un.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:VA("#d11")},".cm-lintRange-warning":{backgroundImage:VA("orange")},".cm-lintRange-info":{backgroundImage:VA("#999")},".cm-lintRange-hint":{backgroundImage:VA("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function vqe(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function _qe(t){let e="hint",n=1;for(let r of t){let i=vqe(r.severity);i>n&&(n=i,e=r.severity)}return e}const bqe=[Wu,un.decorations.compute([Wu],t=>{let{selected:e,panel:n}=t.field(Wu);return!e||!n||e.from==e.to?zn.none:zn.set([cqe.range(e.from,e.to)])}),TFe(uqe,{hideOn:aqe}),yqe],Cae=[KB(),NFe(),rFe(),nVe(),P7e(),q9e(),Y9e(),Pr.allowMultipleSelections.of(!0),v7e(),xoe(D7e,{fallback:!0}),j7e(),Dje(),Zje(),mFe(),vFe(),cFe(),NZe(),$O.of([...Nje,...iQe,...rqe,...hVe,...T7e,...Voe,...pqe])];function KW(t,[e,n]){return Math.min(n,Math.max(e,t))}function xqe(t){const e=Q.useRef({value:t,previous:t});return Q.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Tae=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),wqe="VisuallyHidden",kae=Q.forwardRef((t,e)=>J.jsx(Qr.span,{...t,ref:e,style:{...Tae,...t.style}}));kae.displayName=wqe;var Oqe=kae,Sqe=[" ","Enter","ArrowUp","ArrowDown"],Cqe=[" ","Enter"],kb="Select",[TI,kI,Tqe]=nte(kb),[UO]=ly(kb,[Tqe,RO]),EI=RO(),[kqe,iv]=UO(kb),[Eqe,Aqe]=UO(kb),Eae=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:o,value:a,defaultValue:s,onValueChange:u,dir:f,name:g,autoComplete:_,disabled:w,required:S,form:E}=t,A=EI(e),[R,$]=Q.useState(null),[z,B]=Q.useState(null),[F,U]=Q.useState(!1),q=tI(f),[H,ne]=Yg({prop:r,defaultProp:i??!1,onChange:o,caller:kb}),[ie,ce]=Yg({prop:a,defaultProp:s,onChange:u,caller:kb}),xe=Q.useRef(null),re=R?E||!!R.closest("form"):!0,[me,Te]=Q.useState(new Set),ye=Array.from(me).map(_e=>_e.props.value).join(";");return J.jsx(F8,{...A,children:J.jsxs(kqe,{required:S,scope:e,trigger:R,onTriggerChange:$,valueNode:z,onValueNodeChange:B,valueNodeHasChildren:F,onValueNodeHasChildrenChange:U,contentId:Bg(),value:ie,onValueChange:ce,open:H,onOpenChange:ne,dir:q,triggerPointerDownPosRef:xe,disabled:w,children:[J.jsx(TI.Provider,{scope:e,children:J.jsx(Eqe,{scope:t.__scopeSelect,onNativeOptionAdd:Q.useCallback(_e=>{Te(ke=>new Set(ke).add(_e))},[]),onNativeOptionRemove:Q.useCallback(_e=>{Te(ke=>{const Ne=new Set(ke);return Ne.delete(_e),Ne})},[]),children:n})}),re?J.jsxs(Hae,{"aria-hidden":!0,required:S,tabIndex:-1,name:g,autoComplete:_,value:ie,onChange:_e=>ce(_e.target.value),disabled:w,form:E,children:[ie===void 0?J.jsx("option",{value:""}):null,Array.from(me)]},ye):null]})})};Eae.displayName=kb;var Aae="SelectTrigger",Pae=Q.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,o=EI(n),a=iv(Aae,n),s=a.disabled||r,u=ko(e,a.onTriggerChange),f=kI(n),g=Q.useRef("touch"),[_,w,S]=Xae(A=>{const R=f().filter(B=>!B.disabled),$=R.find(B=>B.value===a.value),z=Yae(R,A,$);z!==void 0&&a.onValueChange(z.value)}),E=A=>{s||(a.onOpenChange(!0),S()),A&&(a.triggerPointerDownPosRef.current={x:Math.round(A.pageX),y:Math.round(A.pageY)})};return J.jsx(XR,{asChild:!0,...o,children:J.jsx(Qr.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":Gae(a.value)?"":void 0,...i,ref:u,onClick:wr(i.onClick,A=>{A.currentTarget.focus(),g.current!=="mouse"&&E(A)}),onPointerDown:wr(i.onPointerDown,A=>{g.current=A.pointerType;const R=A.target;R.hasPointerCapture(A.pointerId)&&R.releasePointerCapture(A.pointerId),A.button===0&&A.ctrlKey===!1&&A.pointerType==="mouse"&&(E(A),A.preventDefault())}),onKeyDown:wr(i.onKeyDown,A=>{const R=_.current!=="";!(A.ctrlKey||A.altKey||A.metaKey)&&A.key.length===1&&w(A.key),!(R&&A.key===" ")&&Sqe.includes(A.key)&&(E(),A.preventDefault())})})})});Pae.displayName=Aae;var Mae="SelectValue",Rae=Q.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:a="",...s}=t,u=iv(Mae,n),{onValueNodeHasChildrenChange:f}=u,g=o!==void 0,_=ko(e,u.onValueNodeChange);return Il(()=>{f(g)},[f,g]),J.jsx(Qr.span,{...s,ref:_,style:{pointerEvents:"none"},children:Gae(u.value)?J.jsx(J.Fragment,{children:a}):o})});Rae.displayName=Mae;var Pqe="SelectIcon",Iae=Q.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return J.jsx(Qr.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});Iae.displayName=Pqe;var Mqe="SelectPortal",Dae=t=>J.jsx(pk,{asChild:!0,...t});Dae.displayName=Mqe;var Eb="SelectContent",Lae=Q.forwardRef((t,e)=>{const n=iv(Eb,t.__scopeSelect),[r,i]=Q.useState();if(Il(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?tm.createPortal(J.jsx($ae,{scope:t.__scopeSelect,children:J.jsx(TI.Slot,{scope:t.__scopeSelect,children:J.jsx("div",{children:t.children})})}),o):null}return J.jsx(zae,{...t,ref:e})});Lae.displayName=Eb;var nf=10,[$ae,ov]=UO(Eb),Rqe="SelectContentImpl",Iqe=Bw("SelectContent.RemoveScroll"),zae=Q.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:a,side:s,sideOffset:u,align:f,alignOffset:g,arrowPadding:_,collisionBoundary:w,collisionPadding:S,sticky:E,hideWhenDetached:A,avoidCollisions:R,...$}=t,z=iv(Eb,n),[B,F]=Q.useState(null),[U,q]=Q.useState(null),H=ko(e,st=>F(st)),[ne,ie]=Q.useState(null),[ce,xe]=Q.useState(null),re=kI(n),[me,Te]=Q.useState(!1),ye=Q.useRef(!1);Q.useEffect(()=>{if(B)return Q8(B)},[B]),M8();const _e=Q.useCallback(st=>{const[bt,...At]=re().map(nn=>nn.ref.current),[Tt]=At.slice(-1),Wt=document.activeElement;for(const nn of st)if(nn===Wt||(nn?.scrollIntoView({block:"nearest"}),nn===bt&&U&&(U.scrollTop=0),nn===Tt&&U&&(U.scrollTop=U.scrollHeight),nn?.focus(),document.activeElement!==Wt))return},[re,U]),ke=Q.useCallback(()=>_e([ne,B]),[_e,ne,B]);Q.useEffect(()=>{me&&ke()},[me,ke]);const{onOpenChange:Ne,triggerPointerDownPosRef:Qe}=z;Q.useEffect(()=>{if(B){let st={x:0,y:0};const bt=Tt=>{st={x:Math.abs(Math.round(Tt.pageX)-(Qe.current?.x??0)),y:Math.abs(Math.round(Tt.pageY)-(Qe.current?.y??0))}},At=Tt=>{st.x<=10&&st.y<=10?Tt.preventDefault():B.contains(Tt.target)||Ne(!1),document.removeEventListener("pointermove",bt),Qe.current=null};return Qe.current!==null&&(document.addEventListener("pointermove",bt),document.addEventListener("pointerup",At,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",bt),document.removeEventListener("pointerup",At,{capture:!0})}}},[B,Ne,Qe]),Q.useEffect(()=>{const st=()=>Ne(!1);return window.addEventListener("blur",st),window.addEventListener("resize",st),()=>{window.removeEventListener("blur",st),window.removeEventListener("resize",st)}},[Ne]);const[Se,Me]=Xae(st=>{const bt=re().filter(Wt=>!Wt.disabled),At=bt.find(Wt=>Wt.ref.current===document.activeElement),Tt=Yae(bt,st,At);Tt&&setTimeout(()=>Tt.ref.current.focus())}),Xe=Q.useCallback((st,bt,At)=>{const Tt=!ye.current&&!At;(z.value!==void 0&&z.value===bt||Tt)&&(ie(st),Tt&&(ye.current=!0))},[z.value]),Ee=Q.useCallback(()=>B?.focus(),[B]),ft=Q.useCallback((st,bt,At)=>{const Tt=!ye.current&&!At;(z.value!==void 0&&z.value===bt||Tt)&&xe(st)},[z.value]),mt=r==="popper"?Yz:Nae,ct=mt===Yz?{side:s,sideOffset:u,align:f,alignOffset:g,arrowPadding:_,collisionBoundary:w,collisionPadding:S,sticky:E,hideWhenDetached:A,avoidCollisions:R}:{};return J.jsx($ae,{scope:n,content:B,viewport:U,onViewportChange:q,itemRefCallback:Xe,selectedItem:ne,onItemLeave:Ee,itemTextRefCallback:ft,focusSelectedItem:ke,selectedItemText:ce,position:r,isPositioned:me,searchRef:Se,children:J.jsx(KR,{as:Iqe,allowPinchZoom:!0,children:J.jsx(ZR,{asChild:!0,trapped:z.open,onMountAutoFocus:st=>{st.preventDefault()},onUnmountAutoFocus:wr(i,st=>{z.trigger?.focus({preventScroll:!0}),st.preventDefault()}),children:J.jsx(dk,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:st=>st.preventDefault(),onDismiss:()=>z.onOpenChange(!1),children:J.jsx(mt,{role:"listbox",id:z.contentId,"data-state":z.open?"open":"closed",dir:z.dir,onContextMenu:st=>st.preventDefault(),...$,...ct,onPlaced:()=>Te(!0),ref:H,style:{display:"flex",flexDirection:"column",outline:"none",...$.style},onKeyDown:wr($.onKeyDown,st=>{const bt=st.ctrlKey||st.altKey||st.metaKey;if(st.key==="Tab"&&st.preventDefault(),!bt&&st.key.length===1&&Me(st.key),["ArrowUp","ArrowDown","Home","End"].includes(st.key)){let Tt=re().filter(Wt=>!Wt.disabled).map(Wt=>Wt.ref.current);if(["ArrowUp","End"].includes(st.key)&&(Tt=Tt.slice().reverse()),["ArrowUp","ArrowDown"].includes(st.key)){const Wt=st.target,nn=Tt.indexOf(Wt);Tt=Tt.slice(nn+1)}setTimeout(()=>_e(Tt)),st.preventDefault()}})})})})})})});zae.displayName=Rqe;var Dqe="SelectItemAlignedPosition",Nae=Q.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,o=iv(Eb,n),a=ov(Eb,n),[s,u]=Q.useState(null),[f,g]=Q.useState(null),_=ko(e,H=>g(H)),w=kI(n),S=Q.useRef(!1),E=Q.useRef(!0),{viewport:A,selectedItem:R,selectedItemText:$,focusSelectedItem:z}=a,B=Q.useCallback(()=>{if(o.trigger&&o.valueNode&&s&&f&&A&&R&&$){const H=o.trigger.getBoundingClientRect(),ne=f.getBoundingClientRect(),ie=o.valueNode.getBoundingClientRect(),ce=$.getBoundingClientRect();if(o.dir!=="rtl"){const Wt=ce.left-ne.left,nn=ie.left-Wt,An=H.left-nn,rn=H.width+An,Jt=Math.max(rn,ne.width),Mn=window.innerWidth-nf,vn=KW(nn,[nf,Math.max(nf,Mn-Jt)]);s.style.minWidth=rn+"px",s.style.left=vn+"px"}else{const Wt=ne.right-ce.right,nn=window.innerWidth-ie.right-Wt,An=window.innerWidth-H.right-nn,rn=H.width+An,Jt=Math.max(rn,ne.width),Mn=window.innerWidth-nf,vn=KW(nn,[nf,Math.max(nf,Mn-Jt)]);s.style.minWidth=rn+"px",s.style.right=vn+"px"}const xe=w(),re=window.innerHeight-nf*2,me=A.scrollHeight,Te=window.getComputedStyle(f),ye=parseInt(Te.borderTopWidth,10),_e=parseInt(Te.paddingTop,10),ke=parseInt(Te.borderBottomWidth,10),Ne=parseInt(Te.paddingBottom,10),Qe=ye+_e+me+Ne+ke,Se=Math.min(R.offsetHeight*5,Qe),Me=window.getComputedStyle(A),Xe=parseInt(Me.paddingTop,10),Ee=parseInt(Me.paddingBottom,10),ft=H.top+H.height/2-nf,mt=re-ft,ct=R.offsetHeight/2,st=R.offsetTop+ct,bt=ye+_e+st,At=Qe-bt;if(bt<=ft){const Wt=xe.length>0&&R===xe[xe.length-1].ref.current;s.style.bottom="0px";const nn=f.clientHeight-A.offsetTop-A.offsetHeight,An=Math.max(mt,ct+(Wt?Ee:0)+nn+ke),rn=bt+An;s.style.height=rn+"px"}else{const Wt=xe.length>0&&R===xe[0].ref.current;s.style.top="0px";const An=Math.max(ft,ye+A.offsetTop+(Wt?Xe:0)+ct)+At;s.style.height=An+"px",A.scrollTop=bt-ft+A.offsetTop}s.style.margin=`${nf}px 0`,s.style.minHeight=Se+"px",s.style.maxHeight=re+"px",r?.(),requestAnimationFrame(()=>S.current=!0)}},[w,o.trigger,o.valueNode,s,f,A,R,$,o.dir,r]);Il(()=>B(),[B]);const[F,U]=Q.useState();Il(()=>{f&&U(window.getComputedStyle(f).zIndex)},[f]);const q=Q.useCallback(H=>{H&&E.current===!0&&(B(),z?.(),E.current=!1)},[B,z]);return J.jsx($qe,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:S,onScrollButtonChange:q,children:J.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:F},children:J.jsx(Qr.div,{...i,ref:_,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Nae.displayName=Dqe;var Lqe="SelectPopperPosition",Yz=Q.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=nf,...o}=t,a=EI(n);return J.jsx(j8,{...a,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Yz.displayName=Lqe;var[$qe,$9]=UO(Eb,{}),Kz="SelectViewport",Bae=Q.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,o=ov(Kz,n),a=$9(Kz,n),s=ko(e,o.onViewportChange),u=Q.useRef(0);return J.jsxs(J.Fragment,{children:[J.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),J.jsx(TI.Slot,{scope:n,children:J.jsx(Qr.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:wr(i.onScroll,f=>{const g=f.currentTarget,{contentWrapper:_,shouldExpandOnScrollRef:w}=a;if(w?.current&&_){const S=Math.abs(u.current-g.scrollTop);if(S>0){const E=window.innerHeight-nf*2,A=parseFloat(_.style.minHeight),R=parseFloat(_.style.height),$=Math.max(A,R);if($<E){const z=$+S,B=Math.min(E,z),F=z-B;_.style.height=B+"px",_.style.bottom==="0px"&&(g.scrollTop=F>0?F:0,_.style.justifyContent="flex-end")}}}u.current=g.scrollTop})})})]})});Bae.displayName=Kz;var Fae="SelectGroup",[zqe,Nqe]=UO(Fae),Bqe=Q.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Bg();return J.jsx(zqe,{scope:n,id:i,children:J.jsx(Qr.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Bqe.displayName=Fae;var jae="SelectLabel",Fqe=Q.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Nqe(jae,n);return J.jsx(Qr.div,{id:i.id,...r,ref:e})});Fqe.displayName=jae;var OM="SelectItem",[jqe,Vae]=UO(OM),Qae=Q.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...a}=t,s=iv(OM,n),u=ov(OM,n),f=s.value===r,[g,_]=Q.useState(o??""),[w,S]=Q.useState(!1),E=ko(e,z=>u.itemRefCallback?.(z,r,i)),A=Bg(),R=Q.useRef("touch"),$=()=>{i||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return J.jsx(jqe,{scope:n,value:r,disabled:i,textId:A,isSelected:f,onItemTextChange:Q.useCallback(z=>{_(B=>B||(z?.textContent??"").trim())},[]),children:J.jsx(TI.ItemSlot,{scope:n,value:r,disabled:i,textValue:g,children:J.jsx(Qr.div,{role:"option","aria-labelledby":A,"data-highlighted":w?"":void 0,"aria-selected":f&&w,"data-state":f?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:E,onFocus:wr(a.onFocus,()=>S(!0)),onBlur:wr(a.onBlur,()=>S(!1)),onClick:wr(a.onClick,()=>{R.current!=="mouse"&&$()}),onPointerUp:wr(a.onPointerUp,()=>{R.current==="mouse"&&$()}),onPointerDown:wr(a.onPointerDown,z=>{R.current=z.pointerType}),onPointerMove:wr(a.onPointerMove,z=>{R.current=z.pointerType,i?u.onItemLeave?.():R.current==="mouse"&&z.currentTarget.focus({preventScroll:!0})}),onPointerLeave:wr(a.onPointerLeave,z=>{z.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:wr(a.onKeyDown,z=>{u.searchRef?.current!==""&&z.key===" "||(Cqe.includes(z.key)&&$(),z.key===" "&&z.preventDefault())})})})})});Qae.displayName=OM;var Z2="SelectItemText",Uae=Q.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...o}=t,a=iv(Z2,n),s=ov(Z2,n),u=Vae(Z2,n),f=Aqe(Z2,n),[g,_]=Q.useState(null),w=ko(e,$=>_($),u.onItemTextChange,$=>s.itemTextRefCallback?.($,u.value,u.disabled)),S=g?.textContent,E=Q.useMemo(()=>J.jsx("option",{value:u.value,disabled:u.disabled,children:S},u.value),[u.disabled,u.value,S]),{onNativeOptionAdd:A,onNativeOptionRemove:R}=f;return Il(()=>(A(E),()=>R(E)),[A,R,E]),J.jsxs(J.Fragment,{children:[J.jsx(Qr.span,{id:u.textId,...o,ref:w}),u.isSelected&&a.valueNode&&!a.valueNodeHasChildren?tm.createPortal(o.children,a.valueNode):null]})});Uae.displayName=Z2;var Zae="SelectItemIndicator",Vqe=Q.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Vae(Zae,n).isSelected?J.jsx(Qr.span,{"aria-hidden":!0,...r,ref:e}):null});Vqe.displayName=Zae;var Jz="SelectScrollUpButton",Qqe=Q.forwardRef((t,e)=>{const n=ov(Jz,t.__scopeSelect),r=$9(Jz,t.__scopeSelect),[i,o]=Q.useState(!1),a=ko(e,r.onScrollButtonChange);return Il(()=>{if(n.viewport&&n.isPositioned){let s=function(){const f=u.scrollTop>0;o(f)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),i?J.jsx(qae,{...t,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop-u.offsetHeight)}}):null});Qqe.displayName=Jz;var e6="SelectScrollDownButton",Uqe=Q.forwardRef((t,e)=>{const n=ov(e6,t.__scopeSelect),r=$9(e6,t.__scopeSelect),[i,o]=Q.useState(!1),a=ko(e,r.onScrollButtonChange);return Il(()=>{if(n.viewport&&n.isPositioned){let s=function(){const f=u.scrollHeight-u.clientHeight,g=Math.ceil(u.scrollTop)<f;o(g)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),i?J.jsx(qae,{...t,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop+u.offsetHeight)}}):null});Uqe.displayName=e6;var qae=Q.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,o=ov("SelectScrollButton",n),a=Q.useRef(null),s=kI(n),u=Q.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return Q.useEffect(()=>()=>u(),[u]),Il(()=>{s().find(g=>g.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[s]),J.jsx(Qr.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:wr(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:wr(i.onPointerMove,()=>{o.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:wr(i.onPointerLeave,()=>{u()})})}),Zqe="SelectSeparator",Wae=Q.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return J.jsx(Qr.div,{"aria-hidden":!0,...r,ref:e})});Wae.displayName=Zqe;var t6="SelectArrow",qqe=Q.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=EI(n),o=iv(t6,n),a=ov(t6,n);return o.open&&a.position==="popper"?J.jsx(V8,{...i,...r,ref:e}):null});qqe.displayName=t6;var Wqe="SelectBubbleInput",Hae=Q.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=Q.useRef(null),o=ko(r,i),a=xqe(e);return Q.useEffect(()=>{const s=i.current;if(!s)return;const u=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==e&&g){const _=new Event("change",{bubbles:!0});g.call(s,e),s.dispatchEvent(_)}},[a,e]),J.jsx(Qr.select,{...n,style:{...Tae,...n.style},ref:o,defaultValue:e})});Hae.displayName=Wqe;function Gae(t){return t===""||t===void 0}function Xae(t){const e=B0(t),n=Q.useRef(""),r=Q.useRef(0),i=Q.useCallback(a=>{const s=n.current+a;e(s),(function u(f){n.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>u(""),1e3))})(s)},[e]),o=Q.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return Q.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function Yae(t,e,n){const i=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let a=Hqe(t,Math.max(o,0));i.length===1&&(a=a.filter(f=>f!==n));const u=a.find(f=>f.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function Hqe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Kae=Eae,Jae=Pae,Gqe=Rae,ele=Iae,Xqe=Dae,Yqe=Lae,Kqe=Bae,Jqe=Qae,eWe=Uae,tWe=Wae,[AI]=ly("Tooltip",[RO]),PI=RO(),tle="TooltipProvider",nWe=700,n6="tooltip.open",[rWe,z9]=AI(tle),nle=t=>{const{__scopeTooltip:e,delayDuration:n=nWe,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=t,a=Q.useRef(!0),s=Q.useRef(!1),u=Q.useRef(0);return Q.useEffect(()=>{const f=u.current;return()=>window.clearTimeout(f)},[]),J.jsx(rWe,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:Q.useCallback(()=>{window.clearTimeout(u.current),a.current=!1},[]),onClose:Q.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:Q.useCallback(f=>{s.current=f},[]),disableHoverableContent:i,children:o})};nle.displayName=tle;var MT="Tooltip",[iWe,Mk]=AI(MT),rle=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:o,disableHoverableContent:a,delayDuration:s}=t,u=z9(MT,t.__scopeTooltip),f=PI(e),[g,_]=Q.useState(null),w=Bg(),S=Q.useRef(0),E=a??u.disableHoverableContent,A=s??u.delayDuration,R=Q.useRef(!1),[$,z]=Yg({prop:r,defaultProp:i??!1,onChange:H=>{H?(u.onOpen(),document.dispatchEvent(new CustomEvent(n6))):u.onClose(),o?.(H)},caller:MT}),B=Q.useMemo(()=>$?R.current?"delayed-open":"instant-open":"closed",[$]),F=Q.useCallback(()=>{window.clearTimeout(S.current),S.current=0,R.current=!1,z(!0)},[z]),U=Q.useCallback(()=>{window.clearTimeout(S.current),S.current=0,z(!1)},[z]),q=Q.useCallback(()=>{window.clearTimeout(S.current),S.current=window.setTimeout(()=>{R.current=!0,z(!0),S.current=0},A)},[A,z]);return Q.useEffect(()=>()=>{S.current&&(window.clearTimeout(S.current),S.current=0)},[]),J.jsx(F8,{...f,children:J.jsx(iWe,{scope:e,contentId:w,open:$,stateAttribute:B,trigger:g,onTriggerChange:_,onTriggerEnter:Q.useCallback(()=>{u.isOpenDelayedRef.current?q():F()},[u.isOpenDelayedRef,q,F]),onTriggerLeave:Q.useCallback(()=>{E?U():(window.clearTimeout(S.current),S.current=0)},[U,E]),onOpen:F,onClose:U,disableHoverableContent:E,children:n})})};rle.displayName=MT;var r6="TooltipTrigger",ile=Q.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Mk(r6,n),o=z9(r6,n),a=PI(n),s=Q.useRef(null),u=ko(e,s,i.onTriggerChange),f=Q.useRef(!1),g=Q.useRef(!1),_=Q.useCallback(()=>f.current=!1,[]);return Q.useEffect(()=>()=>document.removeEventListener("pointerup",_),[_]),J.jsx(XR,{asChild:!0,...a,children:J.jsx(Qr.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:u,onPointerMove:wr(t.onPointerMove,w=>{w.pointerType!=="touch"&&!g.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),g.current=!0)}),onPointerLeave:wr(t.onPointerLeave,()=>{i.onTriggerLeave(),g.current=!1}),onPointerDown:wr(t.onPointerDown,()=>{i.open&&i.onClose(),f.current=!0,document.addEventListener("pointerup",_,{once:!0})}),onFocus:wr(t.onFocus,()=>{f.current||i.onOpen()}),onBlur:wr(t.onBlur,i.onClose),onClick:wr(t.onClick,i.onClose)})})});ile.displayName=r6;var N9="TooltipPortal",[oWe,sWe]=AI(N9,{forceMount:void 0}),ole=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,o=Mk(N9,e);return J.jsx(oWe,{scope:e,forceMount:n,children:J.jsx(ev,{present:n||o.open,children:J.jsx(pk,{asChild:!0,container:i,children:r})})})};ole.displayName=N9;var rO="TooltipContent",sle=Q.forwardRef((t,e)=>{const n=sWe(rO,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=t,a=Mk(rO,t.__scopeTooltip);return J.jsx(ev,{present:r||a.open,children:a.disableHoverableContent?J.jsx(ale,{side:i,...o,ref:e}):J.jsx(aWe,{side:i,...o,ref:e})})}),aWe=Q.forwardRef((t,e)=>{const n=Mk(rO,t.__scopeTooltip),r=z9(rO,t.__scopeTooltip),i=Q.useRef(null),o=ko(e,i),[a,s]=Q.useState(null),{trigger:u,onClose:f}=n,g=i.current,{onPointerInTransitChange:_}=r,w=Q.useCallback(()=>{s(null),_(!1)},[_]),S=Q.useCallback((E,A)=>{const R=E.currentTarget,$={x:E.clientX,y:E.clientY},z=hWe($,R.getBoundingClientRect()),B=dWe($,z),F=fWe(A.getBoundingClientRect()),U=mWe([...B,...F]);s(U),_(!0)},[_]);return Q.useEffect(()=>()=>w(),[w]),Q.useEffect(()=>{if(u&&g){const E=R=>S(R,g),A=R=>S(R,u);return u.addEventListener("pointerleave",E),g.addEventListener("pointerleave",A),()=>{u.removeEventListener("pointerleave",E),g.removeEventListener("pointerleave",A)}}},[u,g,S,w]),Q.useEffect(()=>{if(a){const E=A=>{const R=A.target,$={x:A.clientX,y:A.clientY},z=u?.contains(R)||g?.contains(R),B=!pWe($,a);z?w():B&&(w(),f())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[u,g,a,f,w]),J.jsx(ale,{...t,ref:o})}),[lWe,cWe]=AI(MT,{isInside:!1}),uWe=XIe("TooltipContent"),ale=Q.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:a,...s}=t,u=Mk(rO,n),f=PI(n),{onClose:g}=u;return Q.useEffect(()=>(document.addEventListener(n6,g),()=>document.removeEventListener(n6,g)),[g]),Q.useEffect(()=>{if(u.trigger){const _=w=>{w.target?.contains(u.trigger)&&g()};return window.addEventListener("scroll",_,{capture:!0}),()=>window.removeEventListener("scroll",_,{capture:!0})}},[u.trigger,g]),J.jsx(dk,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:_=>_.preventDefault(),onDismiss:g,children:J.jsxs(j8,{"data-state":u.stateAttribute,...f,...s,ref:e,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[J.jsx(uWe,{children:r}),J.jsx(lWe,{scope:n,isInside:!0,children:J.jsx(Oqe,{id:u.contentId,role:"tooltip",children:i||r})})]})})});sle.displayName=rO;var lle="TooltipArrow",cle=Q.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=PI(n);return cWe(lle,n).isInside?null:J.jsx(V8,{...i,...r,ref:e})});cle.displayName=lle;function hWe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function dWe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function fWe(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function pWe(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const s=e[o],u=e[a],f=s.x,g=s.y,_=u.x,w=u.y;g>r!=w>r&&n<(_-f)*(r-g)/(w-g)+f&&(i=!i)}return i}function mWe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),gWe(e)}function gWe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const o=e[e.length-1],a=e[e.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var ule=nle,hle=rle,dle=ile,fle=ole,ple=sle,yWe=cle;const ZO=se.forwardRef(({title:t,children:e},n)=>{const r=Es(J0);return se.createElement(ule,{delayDuration:100},se.createElement(hle,null,se.createElement(dle,{ref:n,asChild:!0},se.createElement("span",{className:jt.tooltipTrigger},e)),se.createElement(fle,{container:r?.current},se.createElement(ple,{className:Gr(jt.tooltipContent),sideOffset:10},t))))}),mle=se.forwardRef(({children:t,className:e,...n},r)=>se.createElement(Jqe,{...n,ref:r,className:Gr(e,jt.selectItem)},se.createElement(eWe,null,t))),vWe=({title:t,placeholder:e,className:n})=>{const[r,i]=Wo(Ma,Ms);return se.createElement(ZO,{title:t},se.createElement(Jae,{"aria-label":e,className:Gr(jt.selectTrigger,n),"data-toolbar-item":!0,disabled:r},se.createElement(Gqe,{placeholder:e}),se.createElement(ele,{className:jt.selectDropdownArrow},i("arrow_drop_down"))))},gle=({children:t,className:e=jt.selectContainer})=>{const n=Es(J0);return se.createElement(Xqe,{container:n?.current},se.createElement(Yqe,{className:Gr(e,"mdxeditor-select-content"),onCloseAutoFocus:r=>{r.preventDefault()},position:"popper"},se.createElement(Kqe,{"data-editor-dropdown":!0},t)))},_We=({children:t,title:e,className:n})=>{const[r,i]=Wo(Ma,Ms);return se.createElement(ZO,{title:e},se.createElement(Jae,{className:Gr(jt.toolbarButtonSelectTrigger,n),disabled:r},t,se.createElement(ele,{className:jt.selectDropdownArrow},i("arrow_drop_down"))))},yle=t=>se.createElement(Kae,{value:t.value||"",onValueChange:t.onChange,disabled:t.disabled},se.createElement(vWe,{title:t.triggerTitle,placeholder:t.placeholder}),se.createElement(gle,null,t.items.map((e,n)=>e==="separator"?se.createElement(tWe,{key:n}):se.createElement(mle,{key:n,value:e.value},e.label)))),JW="__EMPTY_VALUE__",bWe=({language:t,nodeKey:e,code:n,focusEmitter:r})=>{const i=xs(),{parentEditor:o,lexicalNode:a}=K4(),[s,u,f,g,_]=Wo(Ma,o6,s6,Ms,i6),w=SZe(e,"codeblock",t,r),{setCode:S}=K4(),E=se.useRef(null),A=se.useRef(null),R=se.useRef(S);return R.current=S,w.current={getCodemirror:()=>E.current},se.useEffect(()=>{const $=A.current;return(async()=>{const z=[...u,Cae,hae,KB(),$O.of([oQe]),un.lineWrapping,un.updateListener.of(({state:B})=>{R.current(B.doc.toString())}),un.domEventHandlers({focus:()=>{o.update(()=>{rs(null)})}})];if(s&&z.push(Pr.readOnly.of(!0)),t!==""&&f){const B=CZe.find(F=>F.name===t||F.alias.includes(t)||F.extensions.includes(t));if(B)try{const F=await B.load();z.push(F.extension)}catch{console.warn("failed to load language support for",t)}}$.innerHTML="",E.current=new un({parent:$,state:Pr.create({doc:n,extensions:z})}),$.addEventListener("keydown",eH)})(),()=>{var z;(z=E.current)==null||z.destroy(),E.current=null,$.removeEventListener("keydown",eH)}},[s,t,...u]),se.createElement("div",{className:jt.codeMirrorWrapper},se.createElement("div",{className:jt.codeMirrorToolbar},se.createElement(yle,{disabled:s,value:t,onChange:$=>{o.update(()=>{a.setLanguage($===JW?"":$),setTimeout(()=>{o.update(()=>{a.getLatest().select()})})})},triggerTitle:i("codeBlock.selectLanguage","Select code block language"),placeholder:i("codeBlock.inlineLanguage","Language"),items:Object.entries(_).map(([$,z])=>({value:$||JW,label:z}))}),se.createElement("button",{className:jt.iconButton,type:"button",disabled:s,title:i("codeblock.delete","Delete code block"),onClick:$=>{$.preventDefault(),o.update(()=>{a.remove()})}},g("delete_small"))),se.createElement("div",{ref:A}))};function eH(t){t.stopPropagation()}const i6=kn({js:"JavaScript",ts:"TypeScript",tsx:"TypeScript (React)",jsx:"JavaScript (React)",css:"CSS"}),xWe=bs(t=>{t.link(t.pipe(xWe,Ug(({language:e,code:n})=>({code:n,language:e,meta:""}))),LB)}),o6=kn([]),s6=kn(!0),wWe=Dl({update(t,e){t.pubIn({[i6]:e?.codeBlockLanguages,[o6]:e?.codeMirrorExtensions??[],[s6]:e?.autoLoadLanguageSupport??!0})},init(t,e){t.pubIn({[i6]:e?.codeBlockLanguages,[o6]:e?.codeMirrorExtensions??[],[M8e]:OWe(e?.codeBlockLanguages??{}),[s6]:e?.autoLoadLanguageSupport??!0})}});function OWe(t){return{match(e,n){return Object.hasOwn(t,e??"")&&!n},priority:1,Editor:bWe}}const SWe={}.hasOwnProperty,CWe={},tH=/^[^\t\n\r "#'.<=>`}]+$/,TWe=/^[^\t\n\r "'<=>`}]+$/;function kWe(){return{canContainEols:["textDirective"],enter:{directiveContainer:AWe,directiveContainerAttributes:xL,directiveContainerLabel:RWe,directiveLeaf:PWe,directiveLeafAttributes:xL,directiveText:MWe,directiveTextAttributes:xL},exit:{directiveContainer:kL,directiveContainerAttributeClassValue:OL,directiveContainerAttributeIdValue:wL,directiveContainerAttributeName:CL,directiveContainerAttributeValue:SL,directiveContainerAttributes:TL,directiveContainerLabel:IWe,directiveContainerName:bL,directiveLeaf:kL,directiveLeafAttributeClassValue:OL,directiveLeafAttributeIdValue:wL,directiveLeafAttributeName:CL,directiveLeafAttributeValue:SL,directiveLeafAttributes:TL,directiveLeafName:bL,directiveText:kL,directiveTextAttributeClassValue:OL,directiveTextAttributeIdValue:wL,directiveTextAttributeName:CL,directiveTextAttributeValue:SL,directiveTextAttributes:TL,directiveTextName:bL}}}function EWe(t){const e=CWe;if(e.quote!=='"'&&e.quote!=="'"&&e.quote!==null&&e.quote!==void 0)throw new Error("Invalid quote `"+e.quote+"`, expected `'` or `\"`");return n.peek=DWe,{handlers:{containerDirective:n,leafDirective:n,textDirective:n},unsafe:[{character:"\r",inConstruct:["leafDirectiveLabel","containerDirectiveLabel"]},{character:`
`,inConstruct:["leafDirectiveLabel","containerDirectiveLabel"]},{before:"[^:]",character:":",after:"[A-Za-z]",inConstruct:["phrasing"]},{atBreak:!0,character:":",after:":"}]};function n(o,a,s,u){const f=s.createTracker(u),g=LWe(o),_=s.enter(o.type);let w=f.move(g+(o.name||"")),S;if(o.type==="containerDirective"){const E=(o.children||[])[0];S=nH(E)?E:void 0}else S=o;if(S&&S.children&&S.children.length>0){const E=s.enter("label"),A=`${o.type}Label`,R=s.enter(A);w+=f.move("["),w+=f.move(s.containerPhrasing(S,{...f.current(),before:w,after:"]"})),w+=f.move("]"),R(),E()}if(w+=f.move(r(o,s)),o.type==="containerDirective"){const E=(o.children||[])[0];let A=o;nH(E)&&(A=Object.assign({},o,{children:o.children.slice(1)})),A&&A.children&&A.children.length>0&&(w+=f.move(`
`),w+=f.move(s.containerFlow(A,f.current()))),w+=f.move(`
`+g)}return _(),w}function r(o,a){const s=o.attributes||{},u=[];let f,g,_,w;for(w in s)if(SWe.call(s,w)&&s[w]!==void 0&&s[w]!==null){const S=String(s[w]);if(w==="id")_=e.preferShortcut!==!1&&tH.test(S)?"#"+S:i("id",S,o,a);else if(w==="class"){const E=S.split(/[\t\n\r ]+/g),A=[],R=[];let $=-1;for(;++$<E.length;)(e.preferShortcut!==!1&&tH.test(E[$])?R:A).push(E[$]);f=A.length>0?i("class",A.join(" "),o,a):"",g=R.length>0?"."+R.join("."):""}else u.push(i(w,S,o,a))}return f&&u.unshift(f),g&&u.unshift(g),_&&u.unshift(_),u.length>0?"{"+u.join(" ")+"}":""}function i(o,a,s,u){if(e.collapseEmptyAttributes!==!1&&!a)return o;if(e.preferUnquoted&&TWe.test(a))return o+"="+a;const f=e.quote||u.options.quote||'"',g=f==='"'?"'":'"',_=e.quoteSmart&&x5(a,f)>x5(a,g)?g:f,w=s.type==="textDirective"?[_]:[_,`
`,"\r"];return o+"="+_+BK(a,{subset:w})+_}}function AWe(t){B9.call(this,"containerDirective",t)}function PWe(t){B9.call(this,"leafDirective",t)}function MWe(t){B9.call(this,"textDirective",t)}function B9(t,e){this.enter({type:t,name:"",attributes:{},children:[]},e)}function bL(t){const e=this.stack[this.stack.length-1];e.type==="containerDirective"||e.type==="leafDirective"||e.type,e.name=this.sliceSerialize(t)}function RWe(t){this.enter({type:"paragraph",data:{directiveLabel:!0},children:[]},t)}function IWe(t){this.exit(t)}function xL(){this.data.directiveAttributes=[],this.buffer()}function wL(t){this.data.directiveAttributes.push(["id",RR(this.sliceSerialize(t),{attribute:!0})])}function OL(t){this.data.directiveAttributes.push(["class",RR(this.sliceSerialize(t),{attribute:!0})])}function SL(t){const e=this.data.directiveAttributes;e[e.length-1][1]=RR(this.sliceSerialize(t),{attribute:!0})}function CL(t){this.data.directiveAttributes.push([this.sliceSerialize(t),""])}function TL(){const t=this.data.directiveAttributes,e={};let n=-1;for(;++n<t.length;){const i=t[n];i[0]==="class"&&e.class?e.class+=" "+i[1]:e[i[0]]=i[1]}this.data.directiveAttributes=void 0,this.resume();const r=this.stack[this.stack.length-1];r.type==="containerDirective"||r.type==="leafDirective"||r.type,r.attributes=e}function kL(t){this.exit(t)}function DWe(){return":"}function nH(t){return!!(t&&t.type==="paragraph"&&t.data&&t.data.directiveLabel)}function LWe(t){let e=0;return t.type==="containerDirective"?(eJ(t,function(n,r){if(n.type==="containerDirective"){let i=r.length,o=0;for(;i--;)r[i].type==="containerDirective"&&o++;o>e&&(e=o)}}),e+=3):t.type==="leafDirective"?e=2:e=1,":".repeat(e)}function F9(t,e,n,r,i,o,a,s,u,f,g,_,w,S,E){let A,R;return $;function $(ye){return t.enter(r),t.enter(i),t.consume(ye),t.exit(i),z}function z(ye){return ye===35?(A=a,B(ye)):ye===46?(A=s,B(ye)):ye===58||ye===95||Bh(ye)?(t.enter(o),t.enter(u),t.consume(ye),q):E&&pr(ye)?Cr(t,z,"whitespace")(ye):!E&&Ci(ye)?Ig(t,z)(ye):Te(ye)}function B(ye){const _e=A+"Marker";return t.enter(o),t.enter(A),t.enter(_e),t.consume(ye),t.exit(_e),F}function F(ye){if(ye===null||ye===34||ye===35||ye===39||ye===46||ye===60||ye===61||ye===62||ye===96||ye===125||Ci(ye))return n(ye);const _e=A+"Value";return t.enter(_e),t.consume(ye),U}function U(ye){if(ye===null||ye===34||ye===39||ye===60||ye===61||ye===62||ye===96)return n(ye);if(ye===35||ye===46||ye===125||Ci(ye)){const _e=A+"Value";return t.exit(_e),t.exit(A),t.exit(o),z(ye)}return t.consume(ye),U}function q(ye){return ye===45||ye===46||ye===58||ye===95||Zu(ye)?(t.consume(ye),q):(t.exit(u),E&&pr(ye)?Cr(t,H,"whitespace")(ye):!E&&Ci(ye)?Ig(t,H)(ye):H(ye))}function H(ye){return ye===61?(t.enter(f),t.consume(ye),t.exit(f),ne):(t.exit(o),z(ye))}function ne(ye){return ye===null||ye===60||ye===61||ye===62||ye===96||ye===125||E&&Sn(ye)?n(ye):ye===34||ye===39?(t.enter(g),t.enter(w),t.consume(ye),t.exit(w),R=ye,ce):E&&pr(ye)?Cr(t,ne,"whitespace")(ye):!E&&Ci(ye)?Ig(t,ne)(ye):(t.enter(_),t.enter(S),t.consume(ye),R=void 0,ie)}function ie(ye){return ye===null||ye===34||ye===39||ye===60||ye===61||ye===62||ye===96?n(ye):ye===125||Ci(ye)?(t.exit(S),t.exit(_),t.exit(o),z(ye)):(t.consume(ye),ie)}function ce(ye){return ye===R?(t.enter(w),t.consume(ye),t.exit(w),t.exit(g),t.exit(o),me):(t.enter(_),xe(ye))}function xe(ye){return ye===R?(t.exit(_),ce(ye)):ye===null?n(ye):Sn(ye)?E?n(ye):Ig(t,xe)(ye):(t.enter(S),t.consume(ye),re)}function re(ye){return ye===R||ye===null||Sn(ye)?(t.exit(S),xe(ye)):(t.consume(ye),re)}function me(ye){return ye===125||Ci(ye)?z(ye):Te(ye)}function Te(ye){return ye===125?(t.enter(i),t.consume(ye),t.exit(i),t.exit(r),e):n(ye)}}function j9(t,e,n,r,i,o,a){let s=0,u=0,f;return g;function g(R){return t.enter(r),t.enter(i),t.consume(R),t.exit(i),_}function _(R){return R===93?(t.enter(i),t.consume(R),t.exit(i),t.exit(r),e):(t.enter(o),w(R))}function w(R){if(R===93&&!u)return A(R);const $=t.enter("chunkText",{contentType:"text",previous:f});return f&&(f.next=$),f=$,S(R)}function S(R){return R===null||s>999||R===91&&++u>32?n(R):R===93&&!u--?(t.exit("chunkText"),A(R)):Sn(R)?a?n(R):(t.consume(R),t.exit("chunkText"),w):(t.consume(R),R===92?E:S)}function E(R){return R===91||R===92||R===93?(t.consume(R),s++,S):S(R)}function A(R){return t.exit(o),t.enter(i),t.consume(R),t.exit(i),t.exit(r),e}}function V9(t,e,n,r){const i=this;return o;function o(s){return Bh(s)?(t.enter(r),t.consume(s),a):n(s)}function a(s){return s===45||s===95||Zu(s)?(t.consume(s),a):(t.exit(r),i.previous===45||i.previous===95?n(s):e(s))}}const $We={tokenize:BWe,concrete:!0},zWe={tokenize:FWe,partial:!0},NWe={tokenize:jWe,partial:!0},QA={tokenize:VWe,partial:!0};function BWe(t,e,n){const r=this,i=r.events[r.events.length-1],o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0;let a=0,s;return u;function u(ie){return t.enter("directiveContainer"),t.enter("directiveContainerFence"),t.enter("directiveContainerSequence"),f(ie)}function f(ie){return ie===58?(t.consume(ie),a++,f):a<3?n(ie):(t.exit("directiveContainerSequence"),V9.call(r,t,g,n,"directiveContainerName")(ie))}function g(ie){return ie===91?t.attempt(zWe,_,_)(ie):_(ie)}function _(ie){return ie===123?t.attempt(NWe,w,w)(ie):w(ie)}function w(ie){return Cr(t,S,"whitespace")(ie)}function S(ie){return t.exit("directiveContainerFence"),ie===null?H(ie):Sn(ie)?r.interrupt?e(ie):t.attempt(QA,E,H)(ie):n(ie)}function E(ie){return ie===null?H(ie):Sn(ie)?t.check(QA,B,H)(ie):(t.enter("directiveContainerContent"),A(ie))}function A(ie){return t.attempt({tokenize:ne,partial:!0},q,o?Cr(t,R,"linePrefix",o+1):R)(ie)}function R(ie){return ie===null?q(ie):Sn(ie)?t.check(QA,z,q)(ie):z(ie)}function $(ie){if(ie===null){const ce=t.exit("chunkDocument");return r.parser.lazy[ce.start.line]=!1,q(ie)}return Sn(ie)?t.check(QA,F,U)(ie):(t.consume(ie),$)}function z(ie){const ce=t.enter("chunkDocument",{contentType:"document",previous:s});return s&&(s.next=ce),s=ce,$(ie)}function B(ie){return t.enter("directiveContainerContent"),A(ie)}function F(ie){t.consume(ie);const ce=t.exit("chunkDocument");return r.parser.lazy[ce.start.line]=!1,A}function U(ie){const ce=t.exit("chunkDocument");return r.parser.lazy[ce.start.line]=!1,q(ie)}function q(ie){return t.exit("directiveContainerContent"),H(ie)}function H(ie){return t.exit("directiveContainer"),e(ie)}function ne(ie,ce,xe){let re=0;return Cr(ie,me,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function me(_e){return ie.enter("directiveContainerFence"),ie.enter("directiveContainerSequence"),Te(_e)}function Te(_e){return _e===58?(ie.consume(_e),re++,Te):re<a?xe(_e):(ie.exit("directiveContainerSequence"),Cr(ie,ye,"whitespace")(_e))}function ye(_e){return _e===null||Sn(_e)?(ie.exit("directiveContainerFence"),ce(_e)):xe(_e)}}}function FWe(t,e,n){return j9(t,e,n,"directiveContainerLabel","directiveContainerLabelMarker","directiveContainerLabelString",!0)}function jWe(t,e,n){return F9(t,e,n,"directiveContainerAttributes","directiveContainerAttributesMarker","directiveContainerAttribute","directiveContainerAttributeId","directiveContainerAttributeClass","directiveContainerAttributeName","directiveContainerAttributeInitializerMarker","directiveContainerAttributeValueLiteral","directiveContainerAttributeValue","directiveContainerAttributeValueMarker","directiveContainerAttributeValueData",!0)}function VWe(t,e,n){const r=this;return i;function i(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o}function o(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const QWe={tokenize:qWe},UWe={tokenize:WWe,partial:!0},ZWe={tokenize:HWe,partial:!0};function qWe(t,e,n){const r=this;return i;function i(g){return t.enter("directiveLeaf"),t.enter("directiveLeafSequence"),t.consume(g),o}function o(g){return g===58?(t.consume(g),t.exit("directiveLeafSequence"),V9.call(r,t,a,n,"directiveLeafName")):n(g)}function a(g){return g===91?t.attempt(UWe,s,s)(g):s(g)}function s(g){return g===123?t.attempt(ZWe,u,u)(g):u(g)}function u(g){return Cr(t,f,"whitespace")(g)}function f(g){return g===null||Sn(g)?(t.exit("directiveLeaf"),e(g)):n(g)}}function WWe(t,e,n){return j9(t,e,n,"directiveLeafLabel","directiveLeafLabelMarker","directiveLeafLabelString",!0)}function HWe(t,e,n){return F9(t,e,n,"directiveLeafAttributes","directiveLeafAttributesMarker","directiveLeafAttribute","directiveLeafAttributeId","directiveLeafAttributeClass","directiveLeafAttributeName","directiveLeafAttributeInitializerMarker","directiveLeafAttributeValueLiteral","directiveLeafAttributeValue","directiveLeafAttributeValueMarker","directiveLeafAttributeValueData",!0)}const GWe={tokenize:JWe,previous:KWe},XWe={tokenize:eHe,partial:!0},YWe={tokenize:tHe,partial:!0};function KWe(t){return t!==58||this.events[this.events.length-1][1].type==="characterEscape"}function JWe(t,e,n){const r=this;return i;function i(u){return t.enter("directiveText"),t.enter("directiveTextMarker"),t.consume(u),t.exit("directiveTextMarker"),V9.call(r,t,o,n,"directiveTextName")}function o(u){return u===58?n(u):u===91?t.attempt(XWe,a,a)(u):a(u)}function a(u){return u===123?t.attempt(YWe,s,s)(u):s(u)}function s(u){return t.exit("directiveText"),e(u)}}function eHe(t,e,n){return j9(t,e,n,"directiveTextLabel","directiveTextLabelMarker","directiveTextLabelString")}function tHe(t,e,n){return F9(t,e,n,"directiveTextAttributes","directiveTextAttributesMarker","directiveTextAttribute","directiveTextAttributeId","directiveTextAttributeClass","directiveTextAttributeName","directiveTextAttributeInitializerMarker","directiveTextAttributeValueLiteral","directiveTextAttributeValue","directiveTextAttributeValueMarker","directiveTextAttributeValueData")}function nHe(){return{text:{58:GWe},flow:{58:[$We,QWe]}}}var rHe=Object.defineProperty,iHe=(t,e,n)=>e in t?rHe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,EL=(t,e,n)=>(iHe(t,typeof e!="symbol"?e+"":e,n),n);class Rk extends ry{constructor(e,n){super(n),EL(this,"__mdastNode"),EL(this,"__focusEmitter",Y4()),EL(this,"select",()=>{this.__focusEmitter.publish()}),this.__mdastNode=e}static getType(){return"directive"}static clone(e){return new Rk(structuredClone(e.__mdastNode),e.__key)}static importJSON(e){return Q9(e.mdastNode)}getMdastNode(){return this.__mdastNode}exportJSON(){return{mdastNode:structuredClone(this.__mdastNode),type:"directive",version:1}}createDOM(){return document.createElement(this.__mdastNode.type==="textDirective"?"span":"div")}updateDOM(){return!1}setMdastNode(e){this.getWritable().__mdastNode=e}decorate(e,n){return se.createElement(oHe,{lexicalNode:this,mdastNode:this.getMdastNode(),parentEditor:e,config:n,focusEmitter:this.__focusEmitter})}isInline(){return this.__mdastNode.type==="textDirective"}isKeyboardSelectable(){return!0}}const oHe=t=>{const{mdastNode:e}=t,[n]=Wo(Lw),r=n.find(o=>o.testNode(e));if(!r)throw new Error(`No descriptor found for directive ${e.name}`);const i=r.Editor;return se.createElement(Tre.Provider,{value:t},se.createElement(i,{descriptor:r,mdastNode:e,lexicalNode:t.lexicalNode,parentEditor:t.parentEditor}))};function Q9(t,e){return new Rk(t,e)}function sHe(t){return t instanceof Rk}const aHe={testLexicalNode:sHe,visitLexicalNode({actions:t,mdastParent:e,lexicalNode:n}){t.appendToParent(e,n.getMdastNode())}},lHe=["leafDirective","containerDirective","textDirective"];function cHe(t){return lHe.includes(t.type)}const uHe=t=>({testNode:(e,{directiveDescriptors:n})=>{if(cHe(e)){const r=n.find(i=>i.testNode(e));return t&&!r&&e.type==="textDirective"?!0:r!==void 0}return!1},visitNode({lexicalParent:e,mdastNode:n,descriptors:r}){!t||r.directiveDescriptors.some(o=>o.testNode(n))?e.append(Q9(n)):e.append(Yi(`:${n.name}`))}}),vle=bs(t=>{t.link(t.pipe(vle,Ug(e=>()=>Q9({children:[],...e}))),VR)}),hHe=Dl({update:(t,e)=>{t.pub(Lw,e?.directiveDescriptors??[])},init:(t,e)=>{t.pubIn({[Lw]:e?.directiveDescriptors??[],[zw]:kWe(),[$w]:nHe(),[ed]:uHe(e?.escapeUnknownTextDirectives),[kf]:Rk,[Ef]:aHe,[uk]:EWe()})}}),_le=["note","tip","danger","info","caution"],dHe={name:"admonition",attributes:[],hasChildren:!0,testNode(t){return _le.includes(t.name)},Editor({mdastNode:t}){var e;const{config:{theme:n}}=hI();return se.createElement("div",{className:(e=n.admonition)==null?void 0:e[t.name]},se.createElement(w8e,{block:!0,getContent:r=>r.children,getUpdatedMdastNode:(r,i)=>({...r,children:i})}))}};function fHe({url:t,title:e,text:n,onSubmit:r,onCancel:i,linkAutocompleteSuggestions:o,showLinkTitleField:a,showAnchorTextField:s}){const{register:u,handleSubmit:f,control:g,setValue:_,reset:w}=uB({values:{url:t,title:e,text:n}}),S=xs();return se.createElement("form",{onSubmit:E=>{f(r)(E),E.stopPropagation(),E.preventDefault()},onReset:E=>{E.stopPropagation(),i()},onKeyDown:E=>{E.key==="Escape"&&(E.stopPropagation(),i())},className:Gr(jt.multiFieldForm,jt.linkDialogEditForm)},se.createElement("div",{className:jt.formField},se.createElement("label",{htmlFor:"link-url"},S("createLink.url","URL")),se.createElement(Pne,{register:u,initialInputValue:t,inputName:"url",suggestions:o,setValue:_,control:g,placeholder:S("createLink.urlPlaceholder","Select or paste an URL"),autofocus:!0})),s?se.createElement("div",{className:jt.formField},se.createElement("label",{htmlFor:"link-text",title:S("createLink.textTooltip","The text to be displayed for the link")},S("createLink.text","Anchor text")),se.createElement("input",{id:"link-text",className:jt.textInput,size:40,...u("text")})):null,a?se.createElement("div",{className:jt.formField},se.createElement("label",{htmlFor:"link-title",title:S("createLink.titleTooltip","The link's title attribute, shown on hover")},S("createLink.title","Link title")),se.createElement("input",{id:"link-title",className:jt.textInput,size:40,...u("title")})):null,se.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--spacing-2)"}},se.createElement("button",{type:"submit",title:S("createLink.saveTooltip","Set URL"),"aria-label":S("createLink.saveTooltip","Set URL"),className:Gr(jt.primaryButton)},S("dialogControls.save","Save")),se.createElement("button",{type:"reset",title:S("createLink.cancelTooltip","Cancel change"),"aria-label":S("createLink.cancelTooltip","Cancel change"),className:Gr(jt.secondaryButton)},S("dialogControls.cancel","Cancel"))))}const pHe=()=>{const[t,e,n,r,i,o,a]=Wo(J0,zo,Ms,Vc,Cle,Tle,Ele),s=Ri(ble),u=Ri(xle),f=Ri(wle),g=Ri(Ole),_=Ri(Sle);se.useEffect(()=>{const $=()=>{e?.getEditorState().read(()=>{s(!0)})};return window.addEventListener("resize",$),window.addEventListener("scroll",$),()=>{window.removeEventListener("resize",$),window.removeEventListener("scroll",$)}},[e,s]);const[w,S]=se.useState(!1),E=xs();if(r.type==="inactive")return null;const A=r.rectangle,R=r.type==="preview"&&r.url.startsWith("http");return se.createElement(q8,{open:!0},se.createElement(zLe,{"data-visible":r.type==="edit",className:jt.linkDialogAnchor,style:{top:`${A.top}px`,left:`${A.left}px`,width:`${A.width}px`,height:`${A.height}px`}}),se.createElement(W8,{container:t?.current},se.createElement(NLe,{className:Gr(jt.linkDialogPopoverContent),sideOffset:5,onOpenAutoFocus:$=>{$.preventDefault()},key:r.linkNodeKey},r.type==="edit"&&se.createElement(fHe,{url:r.url,title:r.title,text:r.text,onSubmit:u,onCancel:f.bind(null),linkAutocompleteSuggestions:i,showLinkTitleField:a,showAnchorTextField:r.withAnchorText}),r.type==="preview"&&se.createElement(se.Fragment,null,se.createElement("a",{className:jt.linkDialogPreviewAnchor,href:r.url,...R?{target:"_blank",rel:"noreferrer"}:{},onClick:$=>{o!==null&&($.preventDefault(),o(r.url))},title:R?E("linkPreview.open","Open {{url}} in new window",{url:r.url}):r.url},se.createElement("span",null,r.url),R&&n("open_in_new")),se.createElement(AL,{onClick:()=>{g()},title:E("linkPreview.edit","Edit link URL"),"aria-label":E("linkPreview.edit","Edit link URL")},n("edit")),se.createElement(ule,null,se.createElement(hle,{open:w},se.createElement(dle,{asChild:!0},se.createElement(AL,{title:E("linkPreview.copyToClipboard","Copy to clipboard"),"aria-label":E("linkPreview.copyToClipboard","Copy to clipboard"),onClick:()=>{window.navigator.clipboard.writeText(r.url).then(()=>{S(!0),setTimeout(()=>{S(!1)},1e3)})}},n(w?"check":"content_copy"))),se.createElement(fle,{container:t?.current},se.createElement(ple,{className:Gr(jt.tooltipContent),sideOffset:5},E("linkPreview.copied","Copied!"),se.createElement(yWe,null))))),se.createElement(AL,{title:E("linkPreview.remove","Remove link"),"aria-label":E("linkPreview.remove","Remove link"),onClick:()=>{_()}},n("link_off"))),se.createElement(H8,{className:jt.popoverArrow}))))},AL=se.forwardRef(({className:t,...e},n)=>se.createElement("button",{className:Gr(jt.actionButton,t),ref:n,...e}));function a6(t){if(!t)return null;const e=jRe(t);if(e===null)return null;const n=e.getParent();return Zc(n)?n:Zc(e)?e:null}const ble=bs(),Vc=kn({type:"inactive"},t=>{t.pub(KC,e=>e.registerCommand(XT,()=>t.getValue(Vc).type==="preview"?(t.pub(Vc,{type:"inactive"}),!0):!1,mo)),t.sub(t.pipe(yb),e=>{e!=="rich-text"&&t.pub(Vc,{type:"inactive"})}),t.pub(KC,e=>e.registerCommand(cR,n=>{if(n.key==="k"&&(A5?n.metaKey:n.ctrlKey)&&!t.getValue(Ma)){const r=sn();return Ht(r)?(t.pub(U9),n.stopPropagation(),n.preventDefault(),!0):!1}return!1},g5)),t.sub(t.pipe(Ole,$o(Vc,zo)),([,e,n])=>{if(e.type==="preview")setTimeout(()=>{n?.getEditorState().read(()=>{const r=Ii(e.linkNodeKey),i=Zc(r)?r.getTextContent().length>0&&r.getChildrenSize()<=1:!1,o=i&&r?r.getTextContent():"";t.pub(Vc,{type:"edit",initialUrl:e.url,url:e.url,title:e.title,text:o,withAnchorText:i,linkNodeKey:e.linkNodeKey,rectangle:e.rectangle})})});else throw new Error("Cannot switch to edit mode when not in preview mode")}),t.sub(t.pipe(xle,$o(zo,Vc,Dw)),([e,n,r,i])=>{var o,a,s;const u=((o=e.text)==null?void 0:o.trim())??"",f=((a=e.url)==null?void 0:a.trim())??"",g=((s=e.title)==null?void 0:s.trim())??"";if(f!==""){if(i?.isCollapsed()){const _=u||g||f;n?.update(()=>{const w=a6(i);if(w)if(lf(w)){const S=Hg(f,{title:g});S.append(Yi(u)),w.replace(S),S.select()}else w.setURL(f),w.setTitle(g),rH(w.getFirstChild(),u);else{const S=Hg(f,{title:g});S.append(Yi(_)),OO([S]),S.select()}},{discrete:!0})}else n?.update(()=>{rH(i?.anchor.getNode(),u)}),n?.dispatchCommand(Nw,{url:f,title:g});t.pub(Vc,{type:"preview",linkNodeKey:r.linkNodeKey,rectangle:r.rectangle,title:g,url:f})}else r.type==="edit"&&r.initialUrl!==""&&n?.dispatchCommand(Nw,null),t.pub(Vc,{type:"inactive"})}),t.link(t.pipe(wle,$o(Vc,zo),Ug(([,e,n])=>{if(e.type==="edit")return n?.focus(),e.initialUrl===""?{type:"inactive"}:{type:"preview",url:e.initialUrl,linkNodeKey:e.linkNodeKey,rectangle:e.rectangle};throw new Error("Cannot cancel edit when not in edit mode")})),Vc),t.link(t.pipe(t.combine(Dw,ble),$o(zo,Vc,Ma),Ug(([[e],n,r,i])=>{if(Ht(e)&&n&&!i){const o=a6(e);if(!e.isCollapsed())return{type:"inactive"};if(o){const a=ree(n);return a?{type:"preview",url:o.getURL(),linkNodeKey:o.getKey(),title:o.getTitle(),rectangle:a}:{type:"inactive"}}else return{type:"inactive"}}else return{type:"inactive"}})),Vc)}),xle=bs(),wle=dm();dm();const Ole=dm(),Sle=dm(t=>{t.sub(t.pipe(Sle,$o(zo)),([,e])=>{e?.dispatchCommand(Nw,null)})}),U9=dm(t=>{t.sub(t.pipe(U9,$o(Dw,zo),WT(([,e])=>Ht(e))),([,e,n])=>{n?.focus(()=>{setTimeout(()=>{n.getEditorState().read(()=>{const r=a6(e),i=ree(n),o=r?.getURL()??"",a=r?.getURL()??"",s=r?.getTitle()??"",u=r?.getKey()??"",f=r?r.getTextContent().length>0&&r.getChildrenSize()<=1:!!e?.isCollapsed(),g=f&&r?r.getTextContent():"";t.pub(Vc,{type:"edit",initialUrl:o,url:a,title:s,text:g,withAnchorText:f,linkNodeKey:u,rectangle:i})})})})})}),Cle=kn([]),Tle=kn(null),kle=kn(null,t=>{t.pub(KC,e=>{function n(r){const[i,o]=t.getValues([Ma,kle]);!i||o===null||e.update(()=>{const a=im(r.target);if(a!==null){const s=mf(a,u=>u instanceof oy);s!==null&&o(r,s,s.getURL())}})}return e.registerRootListener((r,i)=>{r&&r.addEventListener("click",n),i&&i.removeEventListener("click",n)})})});function rH(t,e){hn(t)&&e&&(t.setTextContent(e),t.selectStart())}const Ele=kn(!0),mHe=Dl({init(t,e){t.pub($b,e?.LinkDialog??pHe),t.pub(Tle,e?.onClickLinkCallback??null),t.pub(kle,e?.onReadOnlyClickLinkCallback??null),t.pub(Ele,e?.showLinkTitleField??!0)},update(t,e={}){t.pub(Cle,e.linkAutocompleteSuggestions??[])}});function Z9(t,e){return se.forwardRef((n,r)=>{const i=Gr(e.className,n.className);return se.createElement(t,{...e,...n,className:i,ref:r})})}function gHe(t){return({title:e,children:n,...r})=>se.createElement(t,{...r},se.createElement(ZO,{title:e},n))}const yHe=({readOnly:t,children:e,className:n})=>se.createElement(eB,{className:Gr("mdxeditor-toolbar",jt.toolbarRoot,{[jt.readOnlyToolbarRoot]:t},n),...t?{tabIndex:-1}:{}},e),vHe=Z9(A0,{className:jt.toolbarButton,"data-toolbar-item":!0}),Ik=gHe(vHe),Ale=Z9(SP,{className:jt.toolbarToggleItem,"data-toolbar-item":!0});Z9(rI,{type:"single",className:jt.toolbarToggleSingleGroup});const Ple=se.forwardRef(({on:t,title:e,children:n,disabled:r,...i},o)=>se.createElement(rI,{type:"single",className:jt.toolbarToggleSingleGroup,...i,value:t?"on":"off",ref:o},se.createElement(Ale,{"aria-label":e,value:"on",disabled:r},se.createElement(ZO,{title:e},n)))),Mle=({items:t})=>se.createElement("div",{className:jt.toolbarGroupOfGroups},t.map((e,n)=>se.createElement(Ple,{key:n,title:e.title,on:e.active,onValueChange:r=>{e.onChange(r==="on")},disabled:e.disabled},e.contents))),_He=({value:t,onChange:e,className:n,ggClassName:r,items:i})=>{const o=xs();return se.createElement("div",{className:Gr(jt.toolbarGroupOfGroups,r)},se.createElement(rI,{"aria-label":o("toolbar.toggleGroup","toggle group"),type:"single",className:Gr(jt.toolbarToggleSingleGroup,n),onValueChange:e,value:t||"",onFocus:a=>{a.preventDefault()}},i.map((a,s)=>se.createElement(Ale,{key:s,"aria-label":a.title,value:a.value},se.createElement(ZO,{title:a.title},a.contents)))))},bHe=t=>{const e=Es(Ma);return se.createElement(se.Fragment,null,t.items.length===1?se.createElement(Ik,{title:t.title,onClick:()=>{t.onChoose("")},disabled:e},t.children):se.createElement(Kae,{value:"",onValueChange:t.onChoose},se.createElement(_We,{title:t.title},t.children),se.createElement(gle,{className:jt.toolbarButtonDropdownContainer},t.items.map((n,r)=>se.createElement(mle,{key:r,value:n.value},n.label)))))},T1=kte,PL=kn(()=>null),ML=kn(""),iH=()=>"This is an empty toolbar. Pass `{toolbarContents: () => { return <>toolbar components</> }}` to the toolbarPlugin to customize it.",xHe=Dl({init(t,e){const n=e?.toolbarPosition==="bottom"?B5e:N5e;t.pubIn({[PL]:e?.toolbarContents??iH,[ML]:e?.toolbarClassName??"",[n]:()=>{const[r,i,o]=Wo(PL,Ma,ML);return se.createElement(yHe,{className:o,readOnly:i},r())}})},update(t,e){t.pub(PL,e?.toolbarContents??iH),t.pub(ML,e?.toolbarClassName??"")}});class qs{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}offset(e,n=e){return new qs(this.fromA+e,this.toA+e,this.fromB+n,this.toB+n)}}function Ab(t,e,n,r,i,o){if(t==r)return[];let a=W9(t,e,n,r,i,o),s=H9(t,e+a,n,r,i+a,o);e+=a,n-=s,i+=a,o-=s;let u=n-e,f=o-i;if(!u||!f)return[new qs(e,n,i,o)];if(u>f){let _=t.slice(e,n).indexOf(r.slice(i,o));if(_>-1)return[new qs(e,e+_,i,i),new qs(e+_+f,n,o,o)]}else if(f>u){let _=r.slice(i,o).indexOf(t.slice(e,n));if(_>-1)return[new qs(e,e,i,i+_),new qs(n,n,i+_+u,o)]}if(u==1||f==1)return[new qs(e,n,i,o)];let g=Dle(t,e,n,r,i,o);if(g){let[_,w,S]=g;return Ab(t,e,_,r,i,w).concat(Ab(t,_+S,n,r,w+S,o))}return wHe(t,e,n,r,i,o)}let q2=1e9,W2=0,q9=!1;function wHe(t,e,n,r,i,o){let a=n-e,s=o-i;if(q2<1e9&&Math.min(a,s)>q2*16||W2>0&&Date.now()>W2)return Math.min(a,s)>q2*64?[new qs(e,n,i,o)]:oH(t,e,n,r,i,o);let u=Math.ceil((a+s)/2);RL.reset(u),IL.reset(u);let f=(S,E)=>t.charCodeAt(e+S)==r.charCodeAt(i+E),g=(S,E)=>t.charCodeAt(n-S-1)==r.charCodeAt(o-E-1),_=(a-s)%2!=0?IL:null,w=_?null:RL;for(let S=0;S<u;S++){if(S>q2||W2>0&&!(S&63)&&Date.now()>W2)return oH(t,e,n,r,i,o);let E=RL.advance(S,a,s,u,_,!1,f)||IL.advance(S,a,s,u,w,!0,g);if(E)return OHe(t,e,n,e+E[0],r,i,o,i+E[1])}return[new qs(e,n,i,o)]}class Rle{constructor(){this.vec=[]}reset(e){this.len=e<<1;for(let n=0;n<this.len;n++)this.vec[n]=-1;this.vec[e+1]=0,this.start=this.end=0}advance(e,n,r,i,o,a,s){for(let u=-e+this.start;u<=e-this.end;u+=2){let f=i+u,g=u==-e||u!=e&&this.vec[f-1]<this.vec[f+1]?this.vec[f+1]:this.vec[f-1]+1,_=g-u;for(;g<n&&_<r&&s(g,_);)g++,_++;if(this.vec[f]=g,g>n)this.end+=2;else if(_>r)this.start+=2;else if(o){let w=i+(n-r)-u;if(w>=0&&w<this.len&&o.vec[w]!=-1)if(a){let S=o.vec[w];if(S>=n-g)return[S,i+S-w]}else{let S=n-o.vec[w];if(g>=S)return[g,_]}}}return null}}const RL=new Rle,IL=new Rle;function OHe(t,e,n,r,i,o,a,s){let u=!1;return!iO(t,r)&&++r==n&&(u=!0),!iO(i,s)&&++s==a&&(u=!0),u?[new qs(e,n,o,a)]:Ab(t,e,r,i,o,s).concat(Ab(t,r,n,i,s,a))}function Ile(t,e){let n=1,r=Math.min(t,e);for(;n<r;)n=n<<1;return n}function W9(t,e,n,r,i,o){if(e==n||e==o||t.charCodeAt(e)!=r.charCodeAt(i))return 0;let a=Ile(n-e,o-i);for(let s=e,u=i;;){let f=s+a,g=u+a;if(f>n||g>o||t.slice(s,f)!=r.slice(u,g)){if(a==1)return s-e-(iO(t,s)?0:1);a=a>>1}else{if(f==n||g==o)return f-e;s=f,u=g}}}function H9(t,e,n,r,i,o){if(e==n||i==o||t.charCodeAt(n-1)!=r.charCodeAt(o-1))return 0;let a=Ile(n-e,o-i);for(let s=n,u=o;;){let f=s-a,g=u-a;if(f<e||g<i||t.slice(f,s)!=r.slice(g,u)){if(a==1)return n-s-(iO(t,s)?0:1);a=a>>1}else{if(f==e||g==i)return n-f;s=f,u=g}}}function l6(t,e,n,r,i,o,a,s){let u=r.slice(i,o),f=null;for(;;){if(f||a<s)return f;for(let g=e+a;;){iO(t,g)||g++;let _=g+a;if(iO(t,_)||(_+=_==g+1?1:-1),_>=n)break;let w=t.slice(g,_),S=-1;for(;(S=u.indexOf(w,S+1))!=-1;){let E=W9(t,_,n,r,i+S+w.length,o),A=H9(t,e,g,r,i,i+S),R=w.length+E+A;(!f||f[2]<R)&&(f=[g-A,i+S-A,R])}g=_}if(s<0)return f;a=a>>1}}function Dle(t,e,n,r,i,o){let a=n-e,s=o-i;if(a<s){let u=Dle(r,i,o,t,e,n);return u&&[u[1],u[0],u[2]]}return a<4||s*2<a?null:l6(t,e,n,r,i,o,Math.floor(a/4),-1)}function oH(t,e,n,r,i,o){q9=!0;let a=n-e,s=o-i,u;if(a<s){let w=l6(r,i,o,t,e,n,Math.floor(a/6),50);u=w&&[w[1],w[0],w[2]]}else u=l6(t,e,n,r,i,o,Math.floor(s/6),50);if(!u)return[new qs(e,n,i,o)];let[f,g,_]=u;return Ab(t,e,f,r,i,g).concat(Ab(t,f+_,n,r,g+_,o))}function Lle(t,e){for(let n=1;n<t.length;n++){let r=t[n-1],i=t[n];r.toA>i.fromA-e&&r.toB>i.fromB-e&&(t[n-1]=new qs(r.fromA,i.toA,r.fromB,i.toB),t.splice(n--,1))}}function SHe(t,e,n){for(;;){Lle(n,1);let r=!1;for(let i=0;i<n.length;i++){let o=n[i],a,s;(a=W9(t,o.fromA,o.toA,e,o.fromB,o.toB))&&(o=n[i]=new qs(o.fromA+a,o.toA,o.fromB+a,o.toB)),(s=H9(t,o.fromA,o.toA,e,o.fromB,o.toB))&&(o=n[i]=new qs(o.fromA,o.toA-s,o.fromB,o.toB-s));let u=o.toA-o.fromA,f=o.toB-o.fromB;if(u&&f)continue;let g=o.fromA-(i?n[i-1].toA:0),_=(i<n.length-1?n[i+1].fromA:t.length)-o.toA;if(!g||!_)continue;let w=u?t.slice(o.fromA,o.toA):e.slice(o.fromB,o.toB);g<=w.length&&t.slice(o.fromA-g,o.fromA)==w.slice(w.length-g)?(n[i]=new qs(o.fromA-g,o.toA-g,o.fromB-g,o.toB-g),r=!0):_<=w.length&&t.slice(o.toA,o.toA+_)==w.slice(0,_)&&(n[i]=new qs(o.fromA+_,o.toA+_,o.fromB+_,o.toB+_),r=!0)}if(!r)break}return n}function CHe(t,e,n){for(let r=0,i=0;i<t.length;i++){let o=t[i],a=o.toA-o.fromA,s=o.toB-o.fromB;if(a&&s||a>3||s>3){let u=i==t.length-1?e.length:t[i+1].fromA,f=o.fromA-r,g=u-o.toA,_=aH(e,o.fromA,f),w=sH(e,o.toA,g),S=o.fromA-_,E=w-o.toA;if((!a||!s)&&S&&E){let A=Math.max(a,s),[R,$,z]=a?[e,o.fromA,o.toA]:[n,o.fromB,o.toB];A>S&&e.slice(_,o.fromA)==R.slice(z-S,z)?(o=t[i]=new qs(_,_+a,o.fromB-S,o.toB-S),_=o.fromA,w=sH(e,o.toA,u-o.toA)):A>E&&e.slice(o.toA,w)==R.slice($,$+E)&&(o=t[i]=new qs(w-a,w,o.fromB+E,o.toB+E),w=o.toA,_=aH(e,o.fromA,o.fromA-r)),S=o.fromA-_,E=w-o.toA}if(S||E)o=t[i]=new qs(o.fromA-S,o.toA+E,o.fromB-S,o.toB+E);else if(a){if(!s){let A=cH(e,o.fromA,o.toA),R,$=A<0?-1:lH(e,o.toA,o.fromA);A>-1&&(R=A-o.fromA)<=g&&e.slice(o.fromA,A)==e.slice(o.toA,o.toA+R)?o=t[i]=o.offset(R):$>-1&&(R=o.toA-$)<=f&&e.slice(o.fromA-R,o.fromA)==e.slice($,o.toA)&&(o=t[i]=o.offset(-R))}}else{let A=cH(n,o.fromB,o.toB),R,$=A<0?-1:lH(n,o.toB,o.fromB);A>-1&&(R=A-o.fromB)<=g&&n.slice(o.fromB,A)==n.slice(o.toB,o.toB+R)?o=t[i]=o.offset(R):$>-1&&(R=o.toB-$)<=f&&n.slice(o.fromB-R,o.fromB)==n.slice($,o.toB)&&(o=t[i]=o.offset(-R))}}r=o.toA}return Lle(t,3),t}let eb;try{eb=new RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch{}function $le(t){return t>48&&t<58||t>64&&t<91||t>96&&t<123}function zle(t,e){if(e==t.length)return 0;let n=t.charCodeAt(e);return n<192?$le(n)?1:0:eb?!Fle(n)||e==t.length-1?eb.test(String.fromCharCode(n))?1:0:eb.test(t.slice(e,e+2))?2:0:0}function Nle(t,e){if(!e)return 0;let n=t.charCodeAt(e-1);return n<192?$le(n)?1:0:eb?!jle(n)||e==1?eb.test(String.fromCharCode(n))?1:0:eb.test(t.slice(e-2,e))?2:0:0}const Ble=8;function sH(t,e,n){if(e==t.length||!Nle(t,e))return e;for(let r=e,i=e+n,o=0;o<Ble;o++){let a=zle(t,r);if(!a||r+a>i)return r;r+=a}return e}function aH(t,e,n){if(!e||!zle(t,e))return e;for(let r=e,i=e-n,o=0;o<Ble;o++){let a=Nle(t,r);if(!a||r-a<i)return r;r-=a}return e}function lH(t,e,n){for(;e!=n;e--)if(t.charCodeAt(e-1)==10)return e;return-1}function cH(t,e,n){for(;e!=n;e++)if(t.charCodeAt(e)==10)return e;return-1}const Fle=t=>t>=55296&&t<=56319,jle=t=>t>=56320&&t<=57343;function iO(t,e){return!e||e==t.length||!Fle(t.charCodeAt(e-1))||!jle(t.charCodeAt(e))}function THe(t,e,n){var r;return q2=((r=n?.scanLimit)!==null&&r!==void 0?r:1e9)>>1,W2=n?.timeout?Date.now()+n.timeout:0,q9=!1,SHe(t,e,Ab(t,0,t.length,e,0,e.length))}function Vle(){return!q9}function Qle(t,e,n){return CHe(THe(t,e,n),t,e)}const Fp=En.define({combine:t=>t[0]}),c6=fr.define(),kHe=En.define(),oO=Rs.define({create(t){return null},update(t,e){for(let n of e.effects)n.is(c6)&&(t=n.value);for(let n of e.state.facet(kHe))t=n(t,e);return t}});class gw{constructor(e,n,r,i,o,a=!0){this.changes=e,this.fromA=n,this.toA=r,this.fromB=i,this.toB=o,this.precise=a}offset(e,n){return e||n?new gw(this.changes,this.fromA+e,this.toA+e,this.fromB+n,this.toB+n,this.precise):this}get endA(){return Math.max(this.fromA,this.toA-1)}get endB(){return Math.max(this.fromB,this.toB-1)}static build(e,n,r){let i=Qle(e.toString(),n.toString(),r);return Ule(i,e,n,0,0,Vle())}static updateA(e,n,r,i,o){return pH(fH(e,i,!0,r.length),e,n,r,o)}static updateB(e,n,r,i,o){return pH(fH(e,i,!1,n.length),e,n,r,o)}}function uH(t,e,n,r){let i=n.lineAt(t),o=r.lineAt(e);return i.to==t&&o.to==e&&t<n.length&&e<r.length?[t+1,e+1]:[i.from,o.from]}function hH(t,e,n,r){let i=n.lineAt(t),o=r.lineAt(e);return i.from==t&&o.from==e?[t,e]:[i.to+1,o.to+1]}function Ule(t,e,n,r,i,o){let a=[];for(let s=0;s<t.length;s++){let u=t[s],[f,g]=uH(u.fromA+r,u.fromB+i,e,n),[_,w]=hH(u.toA+r,u.toB+i,e,n),S=[u.offset(-f+r,-g+i)];for(;s<t.length-1;){let E=t[s+1],[A,R]=uH(E.fromA+r,E.fromB+i,e,n);if(A>_+1&&R>w+1)break;S.push(E.offset(-f+r,-g+i)),[_,w]=hH(E.toA+r,E.toB+i,e,n),s++}a.push(new gw(S,f,Math.max(f,_),g,Math.max(g,w),o))}return a}const UA=1e3;function dH(t,e,n,r){let i=0,o=t.length;for(;;){if(i==o){let g=0,_=0;i&&({toA:g,toB:_}=t[i-1]);let w=e-(n?g:_);return[g+w,_+w]}let a=i+o>>1,s=t[a],[u,f]=n?[s.fromA,s.toA]:[s.fromB,s.toB];if(u>e)o=a;else if(f<=e)i=a+1;else return r?[s.fromA,s.fromB]:[s.toA,s.toB]}}function fH(t,e,n,r){let i=[];return e.iterChangedRanges((o,a,s,u)=>{let f=0,g=n?e.length:r,_=0,w=n?r:e.length;o>UA&&([f,_]=dH(t,o-UA,n,!0)),a<e.length-UA&&([g,w]=dH(t,a+UA,n,!1));let S=u-s-(a-o),E,[A,R]=n?[S,0]:[0,S];i.length&&(E=i[i.length-1]).toA>=f?i[i.length-1]={fromA:E.fromA,fromB:E.fromB,toA:g,toB:w,diffA:E.diffA+A,diffB:E.diffB+R}:i.push({fromA:f,toA:g,fromB:_,toB:w,diffA:A,diffB:R})}),i}function pH(t,e,n,r,i){if(!t.length)return e;let o=[];for(let a=0,s=0,u=0,f=0;;a++){let g=a==t.length?null:t[a],_=g?g.fromA+s:n.length,w=g?g.fromB+u:r.length;for(;f<e.length;){let R=e[f];if(Math.min(n.length,R.toA+s)>_||Math.min(r.length,R.toB+u)>w)break;o.push(R.offset(s,u)),f++}if(!g)break;let S=g.toA+s+g.diffA,E=g.toB+u+g.diffB,A=Qle(n.sliceString(_,S),r.sliceString(w,E),i);for(let R of Ule(A,n,r,_,w,Vle()))o.push(R);for(s+=g.diffA,u+=g.diffB;f<e.length;){let R=e[f];if(R.fromA+s>S&&R.fromB+u>E)break;f++}}return o}const EHe={scanLimit:500},Zle=As.fromClass(class{constructor(t){({deco:this.deco,gutter:this.gutter}=yH(t))}update(t){(t.docChanged||t.viewportChanged||AHe(t.startState,t.state)||PHe(t.startState,t.state))&&({deco:this.deco,gutter:this.gutter}=yH(t.view))}},{decorations:t=>t.deco}),ZA=Pf.low(Yie({class:"cm-changeGutter",markers:t=>{var e;return((e=t.plugin(Zle))===null||e===void 0?void 0:e.gutter)||qr.empty}}));function AHe(t,e){return t.field(oO,!1)!=e.field(oO,!1)}function PHe(t,e){return t.facet(Fp)!=e.facet(Fp)}const mH=zn.line({class:"cm-changedLine"}),MHe=zn.mark({class:"cm-changedText"}),RHe=zn.mark({tagName:"ins",class:"cm-insertedLine"}),IHe=zn.mark({tagName:"del",class:"cm-deletedLine"}),gH=new class extends lm{constructor(){super(...arguments),this.elementClass="cm-changedLineGutter"}};function DHe(t,e,n,r,i,o){let a=n?t.fromA:t.fromB,s=n?t.toA:t.toB,u=0;if(a!=s){i.add(a,a,mH),i.add(a,s,n?IHe:RHe),o&&o.add(a,a,gH);for(let f=e.iterRange(a,s-1),g=a;!f.next().done;){if(f.lineBreak){g++,i.add(g,g,mH),o&&o.add(g,g,gH);continue}let _=g+f.value.length;if(r)for(;u<t.changes.length;){let w=t.changes[u],S=a+(n?w.fromA:w.fromB),E=a+(n?w.toA:w.toB),A=Math.max(g,S),R=Math.min(_,E);if(A<R&&i.add(A,R,MHe),E<_)u++;else break}g=_}}}function yH(t){let e=t.state.field(oO),{side:n,highlightChanges:r,markGutter:i,overrideChunk:o}=t.state.facet(Fp),a=n=="a",s=new ou,u=i?new ou:null,{from:f,to:g}=t.viewport;for(let _ of e){if((a?_.fromA:_.fromB)>=g)break;(a?_.toA:_.toB)>f&&(!o||!o(t.state,_,s,u))&&DHe(_,t.state.doc,a,r,s,u)}return{deco:s.finish(),gutter:u&&u.finish()}}class qA extends od{constructor(e){super(),this.height=e}eq(e){return this.height==e.height}toDOM(){let e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}const SM=fr.define({map:(t,e)=>t.map(e)}),H2=Rs.define({create:()=>zn.none,update:(t,e)=>{for(let n of e.effects)if(n.is(SM))return n.value;return t.map(e.changes)},provide:t=>un.decorations.from(t)}),WA=.01;function vH(t,e){if(t.size!=e.size)return!1;let n=t.iter(),r=e.iter();for(;n.value;){if(n.from!=r.from||Math.abs(n.value.spec.widget.height-r.value.spec.widget.height)>1)return!1;n.next(),r.next()}return!0}function LHe(t,e,n){let r=new ou,i=new ou,o=t.state.field(H2).iter(),a=e.state.field(H2).iter(),s=0,u=0,f=0,g=0,_=t.viewport,w=e.viewport;for(let R=0;;R++){let $=R<n.length?n[R]:null,z=$?$.fromA:t.state.doc.length,B=$?$.fromB:e.state.doc.length;if(s<z){let F=t.lineBlockAt(s).top+f,U=e.lineBlockAt(u).top+g,q=F-U;q<-WA?(f-=q,r.add(s,s,zn.widget({widget:new qA(-q),block:!0,side:-1}))):q>WA&&(g+=q,i.add(u,u,zn.widget({widget:new qA(q),block:!0,side:-1})))}if(z>s+1e3&&s<_.from&&z>_.from&&u<w.from&&B>w.from){let F=Math.min(_.from-s,w.from-u);s+=F,u+=F,R--}else if($)s=$.toA,u=$.toB;else break;for(;o.value&&o.from<s;)f-=o.value.spec.widget.height,o.next();for(;a.value&&a.from<u;)g-=a.value.spec.widget.height,a.next()}for(;o.value;)f-=o.value.spec.widget.height,o.next();for(;a.value;)g-=a.value.spec.widget.height,a.next();let S=t.contentHeight+f-(e.contentHeight+g);S<WA?r.add(t.state.doc.length,t.state.doc.length,zn.widget({widget:new qA(-S),block:!0,side:1})):S>WA&&i.add(e.state.doc.length,e.state.doc.length,zn.widget({widget:new qA(S),block:!0,side:1}));let E=r.finish(),A=i.finish();vH(E,t.state.field(H2))||t.dispatch({effects:SM.of(E)}),vH(A,e.state.field(H2))||e.dispatch({effects:SM.of(A)})}const u6=fr.define({map:(t,e)=>e.mapPos(t)});class $He extends od{constructor(e){super(),this.lines=e}eq(e){return this.lines==e.lines}toDOM(e){let n=document.createElement("div");return n.className="cm-collapsedLines",n.textContent=e.state.phrase("$ unchanged lines",this.lines),n.addEventListener("click",r=>{let i=e.posAtDOM(r.target);e.dispatch({effects:u6.of(i)});let{side:o,sibling:a}=e.state.facet(Fp);a&&a().dispatch({effects:u6.of(zHe(i,e.state.field(oO),o=="a"))})}),n}ignoreEvent(e){return e instanceof MouseEvent}get estimatedHeight(){return 27}get type(){return"collapsed-unchanged-code"}}function zHe(t,e,n){let r=0,i=0;for(let o=0;;o++){let a=o<e.length?e[o]:null;if(!a||(n?a.fromA:a.fromB)>=t)return i+(t-r);[r,i]=n?[a.toA,a.toB]:[a.toB,a.toA]}}const NHe=Rs.define({create(t){return zn.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(u6)&&(t=t.update({filter:r=>r!=n.value}));return t},provide:t=>un.decorations.from(t)});function _H({margin:t=3,minSize:e=4}){return NHe.init(n=>BHe(n,t,e))}function BHe(t,e,n){let r=new ou,i=t.facet(Fp).side=="a",o=t.field(oO),a=1;for(let s=0;;s++){let u=s<o.length?o[s]:null,f=s?a+e:1,g=u?t.doc.lineAt(i?u.fromA:u.fromB).number-1-e:t.doc.lines,_=g-f+1;if(_>=n&&r.add(t.doc.line(f).from,t.doc.line(g).to,zn.replace({widget:new $He(_),block:!0})),!u)break;a=t.doc.lineAt(Math.min(t.doc.length,i?u.toA:u.toB)).number}return r.finish()}const FHe=un.styleModule.of(new Jg({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),jHe=un.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine, .cm-inlineChangedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb22aa, #22bb22aa) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff88aa, #88ff88aa) bottom/100% 2px no-repeat"},"&.cm-merge-b .cm-deletedText":{background:"#ff000033"},".cm-insertedLine, .cm-deletedLine, .cm-deletedLine del":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer","&:before":{content:'""',marginInlineEnd:"7px"},"&:after":{content:'""',marginInlineStart:"7px"}},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"},".cm-inlineChangedLineGutter":{background:"#75d"}}),bH=new LO,HA=new LO;class VHe{constructor(e){this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=e.diffConfig||EHe;let n=[Pf.low(Zle),jHe,FHe,H2,un.updateListener.of(_=>{this.measuring<0&&(_.heightChanged||_.viewportChanged)&&!_.transactions.some(w=>w.effects.some(S=>S.is(SM)))&&this.measure()})],r=[Fp.of({side:"a",sibling:()=>this.b,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&r.push(ZA);let i=Pr.create({doc:e.a.doc,selection:e.a.selection,extensions:[e.a.extensions||[],un.editorAttributes.of({class:"cm-merge-a"}),HA.of(r),n]}),o=[Fp.of({side:"b",sibling:()=>this.a,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&o.push(ZA);let a=Pr.create({doc:e.b.doc,selection:e.b.selection,extensions:[e.b.extensions||[],un.editorAttributes.of({class:"cm-merge-b"}),HA.of(o),n]});this.chunks=gw.build(i.doc,a.doc,this.diffConf);let s=[oO.init(()=>this.chunks),bH.of(e.collapseUnchanged?_H(e.collapseUnchanged):[])];i=i.update({effects:fr.appendConfig.of(s)}).state,a=a.update({effects:fr.appendConfig.of(s)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";let u=e.orientation||"a-b",f=document.createElement("div");f.className="cm-mergeViewEditor";let g=document.createElement("div");g.className="cm-mergeViewEditor",this.editorDOM.appendChild(u=="a-b"?f:g),this.editorDOM.appendChild(u=="a-b"?g:f),this.a=new un({state:i,parent:f,root:e.root,dispatchTransactions:_=>this.dispatch(_,this.a)}),this.b=new un({state:a,parent:g,root:e.root,dispatchTransactions:_=>this.dispatch(_,this.b)}),this.setupRevertControls(!!e.revertControls,e.revertControls=="b-to-a",e.renderRevertControl),e.parent&&e.parent.appendChild(this.dom),this.scheduleMeasure()}dispatch(e,n){if(e.some(r=>r.docChanged)){let r=e[e.length-1],i=e.reduce((a,s)=>a.compose(s.changes),Qs.empty(e[0].startState.doc.length));this.chunks=n==this.a?gw.updateA(this.chunks,r.newDoc,this.b.state.doc,i,this.diffConf):gw.updateB(this.chunks,this.a.state.doc,r.newDoc,i,this.diffConf),n.update([...e,r.state.update({effects:c6.of(this.chunks)})]);let o=n==this.a?this.b:this.a;o.update([o.state.update({effects:c6.of(this.chunks)})]),this.scheduleMeasure()}else n.update(e)}reconfigure(e){if("diffConfig"in e&&(this.diffConf=e.diffConfig),"orientation"in e){let o=e.orientation!="b-a";if(o!=(this.editorDOM.firstChild==this.a.dom.parentNode)){let a=this.a.dom.parentNode,s=this.b.dom.parentNode;a.remove(),s.remove(),this.editorDOM.insertBefore(o?a:s,this.editorDOM.firstChild),this.editorDOM.appendChild(o?s:a),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){let o=!!this.revertDOM,a=this.revertToA,s=this.renderRevert;"revertControls"in e&&(o=!!e.revertControls,a=e.revertControls=="b-to-a"),"renderRevertControl"in e&&(s=e.renderRevertControl),this.setupRevertControls(o,a,s)}let n="highlightChanges"in e,r="gutter"in e,i="collapseUnchanged"in e;if(n||r||i){let o=[],a=[];if(n||r){let s=this.a.state.facet(Fp),u=r?e.gutter!==!1:s.markGutter,f=n?e.highlightChanges!==!1:s.highlightChanges;o.push(HA.reconfigure([Fp.of({side:"a",sibling:()=>this.b,highlightChanges:f,markGutter:u}),u?ZA:[]])),a.push(HA.reconfigure([Fp.of({side:"b",sibling:()=>this.a,highlightChanges:f,markGutter:u}),u?ZA:[]]))}if(i){let s=bH.reconfigure(e.collapseUnchanged?_H(e.collapseUnchanged):[]);o.push(s),a.push(s)}this.a.dispatch({effects:o}),this.b.dispatch({effects:a})}this.scheduleMeasure()}setupRevertControls(e,n,r){this.revertToA=n,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=r,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",i=>this.revertClicked(i)),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}scheduleMeasure(){if(this.measuring<0){let e=this.dom.ownerDocument.defaultView||window;this.measuring=e.requestAnimationFrame(()=>{this.measuring=-1,this.measure()})}}measure(){LHe(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}updateRevertButtons(){let e=this.revertDOM,n=e.firstChild,r=this.a.viewport,i=this.b.viewport;for(let o=0;o<this.chunks.length;o++){let a=this.chunks[o];if(a.fromA>r.to||a.fromB>i.to)break;if(a.fromA<r.from||a.fromB<i.from)continue;let s=this.a.lineBlockAt(a.fromA).top+"px";for(;n&&+n.dataset.chunk<o;)n=xH(n);n&&n.dataset.chunk==String(o)?(n.style.top!=s&&(n.style.top=s),n=n.nextSibling):e.insertBefore(this.renderRevertButton(s,o),n)}for(;n;)n=xH(n)}renderRevertButton(e,n){let r;if(this.renderRevert)r=this.renderRevert();else{r=document.createElement("button");let i=this.a.state.phrase("Revert this chunk");r.setAttribute("aria-label",i),r.setAttribute("title",i),r.textContent=this.revertToLeft?"":""}return r.style.top=e,r.setAttribute("data-chunk",String(n)),r}revertClicked(e){let n=e.target,r;for(;n&&n.parentNode!=this.revertDOM;)n=n.parentNode;if(n&&(r=this.chunks[n.dataset.chunk])){let[i,o,a,s,u,f]=this.revertToA?[this.b,this.a,r.fromB,r.toB,r.fromA,r.toA]:[this.a,this.b,r.fromA,r.toA,r.fromB,r.toB],g=i.state.sliceDoc(a,Math.max(a,s-1));a!=s&&f<=o.state.doc.length&&(g+=i.state.lineBreak),o.dispatch({changes:{from:u,to:Math.min(o.state.doc.length,f),insert:g},userEvent:"revert"}),e.preventDefault()}}destroy(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}}function xH(t){let e=t.nextSibling;return t.remove(),e}class CM{static create(e,n,r,i,o){let a=i+(i<<8)+e+(n<<4)|0;return new CM(e,n,r,a,o,[],[])}constructor(e,n,r,i,o,a,s){this.type=e,this.value=n,this.from=r,this.hash=i,this.end=o,this.children=a,this.positions=s,this.hashProp=[[gr.contextHash,i]]}addChild(e,n){e.prop(gr.contextHash)!=this.hash&&(e=new Vr(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(n)}toTree(e,n=this.end){let r=this.children.length-1;return r>=0&&(n=Math.max(n,this.positions[r]+this.children[r].length+this.from)),new Vr(e.types[this.type],this.children,this.positions,n-this.from).balance({makeTree:(i,o,a)=>new Vr(ta.none,i,o,a,this.hashProp)})}}var fn;(function(t){t[t.Document=1]="Document",t[t.CodeBlock=2]="CodeBlock",t[t.FencedCode=3]="FencedCode",t[t.Blockquote=4]="Blockquote",t[t.HorizontalRule=5]="HorizontalRule",t[t.BulletList=6]="BulletList",t[t.OrderedList=7]="OrderedList",t[t.ListItem=8]="ListItem",t[t.ATXHeading1=9]="ATXHeading1",t[t.ATXHeading2=10]="ATXHeading2",t[t.ATXHeading3=11]="ATXHeading3",t[t.ATXHeading4=12]="ATXHeading4",t[t.ATXHeading5=13]="ATXHeading5",t[t.ATXHeading6=14]="ATXHeading6",t[t.SetextHeading1=15]="SetextHeading1",t[t.SetextHeading2=16]="SetextHeading2",t[t.HTMLBlock=17]="HTMLBlock",t[t.LinkReference=18]="LinkReference",t[t.Paragraph=19]="Paragraph",t[t.CommentBlock=20]="CommentBlock",t[t.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",t[t.Escape=22]="Escape",t[t.Entity=23]="Entity",t[t.HardBreak=24]="HardBreak",t[t.Emphasis=25]="Emphasis",t[t.StrongEmphasis=26]="StrongEmphasis",t[t.Link=27]="Link",t[t.Image=28]="Image",t[t.InlineCode=29]="InlineCode",t[t.HTMLTag=30]="HTMLTag",t[t.Comment=31]="Comment",t[t.ProcessingInstruction=32]="ProcessingInstruction",t[t.Autolink=33]="Autolink",t[t.HeaderMark=34]="HeaderMark",t[t.QuoteMark=35]="QuoteMark",t[t.ListMark=36]="ListMark",t[t.LinkMark=37]="LinkMark",t[t.EmphasisMark=38]="EmphasisMark",t[t.CodeMark=39]="CodeMark",t[t.CodeText=40]="CodeText",t[t.CodeInfo=41]="CodeInfo",t[t.LinkTitle=42]="LinkTitle",t[t.LinkLabel=43]="LinkLabel",t[t.URL=44]="URL"})(fn||(fn={}));class QHe{constructor(e,n){this.start=e,this.content=n,this.marks=[],this.parsers=[]}}class UHe{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return xC(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,n=0,r=0){for(let i=n;i<e;i++)r+=this.text.charCodeAt(i)==9?4-r%4:1;return r}findColumn(e){let n=0;for(let r=0;n<this.text.length&&r<e;n++)r+=this.text.charCodeAt(n)==9?4-r%4:1;return n}scrub(){if(!this.baseIndent)return this.text;let e="";for(let n=0;n<this.basePos;n++)e+=" ";return e+this.text.slice(this.basePos)}}function wH(t,e,n){if(n.pos==n.text.length||t!=e.block&&n.indent>=e.stack[n.depth+1].value+n.baseIndent)return!0;if(n.indent>=n.baseIndent+4)return!1;let r=(t.type==fn.OrderedList?Y9:X9)(n,e,!1);return r>0&&(t.type!=fn.BulletList||G9(n,e,!1)<0)&&n.text.charCodeAt(n.pos+r-1)==t.value}const qle={[fn.Blockquote](t,e,n){return n.next!=62?!1:(n.markers.push(ai(fn.QuoteMark,e.lineStart+n.pos,e.lineStart+n.pos+1)),n.moveBase(n.pos+(ad(n.text.charCodeAt(n.pos+1))?2:1)),t.end=e.lineStart+n.text.length,!0)},[fn.ListItem](t,e,n){return n.indent<n.baseIndent+t.value&&n.next>-1?!1:(n.moveBaseColumn(n.baseIndent+t.value),!0)},[fn.OrderedList]:wH,[fn.BulletList]:wH,[fn.Document](){return!0}};function ad(t){return t==32||t==9||t==10||t==13}function xC(t,e=0){for(;e<t.length&&ad(t.charCodeAt(e));)e++;return e}function OH(t,e,n){for(;e>n&&ad(t.charCodeAt(e-1));)e--;return e}function Wle(t){if(t.next!=96&&t.next!=126)return-1;let e=t.pos+1;for(;e<t.text.length&&t.text.charCodeAt(e)==t.next;)e++;if(e<t.pos+3)return-1;if(t.next==96){for(let n=e;n<t.text.length;n++)if(t.text.charCodeAt(n)==96)return-1}return e}function Hle(t){return t.next!=62?-1:t.text.charCodeAt(t.pos+1)==32?2:1}function G9(t,e,n){if(t.next!=42&&t.next!=45&&t.next!=95)return-1;let r=1;for(let i=t.pos+1;i<t.text.length;i++){let o=t.text.charCodeAt(i);if(o==t.next)r++;else if(!ad(o))return-1}return n&&t.next==45&&Yle(t)>-1&&t.depth==e.stack.length&&e.parser.leafBlockParsers.indexOf(tce.SetextHeading)>-1||r<3?-1:1}function Gle(t,e){for(let n=t.stack.length-1;n>=0;n--)if(t.stack[n].type==e)return!0;return!1}function X9(t,e,n){return(t.next==45||t.next==43||t.next==42)&&(t.pos==t.text.length-1||ad(t.text.charCodeAt(t.pos+1)))&&(!n||Gle(e,fn.BulletList)||t.skipSpace(t.pos+2)<t.text.length)?1:-1}function Y9(t,e,n){let r=t.pos,i=t.next;for(;i>=48&&i<=57;){r++;if(r==t.text.length)return-1;i=t.text.charCodeAt(r)}return r==t.pos||r>t.pos+9||i!=46&&i!=41||r<t.text.length-1&&!ad(t.text.charCodeAt(r+1))||n&&!Gle(e,fn.OrderedList)&&(t.skipSpace(r+1)==t.text.length||r>t.pos+1||t.next!=49)?-1:r+1-t.pos}function Xle(t){if(t.next!=35)return-1;let e=t.pos+1;for(;e<t.text.length&&t.text.charCodeAt(e)==35;)e++;if(e<t.text.length&&t.text.charCodeAt(e)!=32)return-1;let n=e-t.pos;return n>6?-1:n}function Yle(t){if(t.next!=45&&t.next!=61||t.indent>=t.baseIndent+4)return-1;let e=t.pos+1;for(;e<t.text.length&&t.text.charCodeAt(e)==t.next;)e++;let n=e;for(;e<t.text.length&&ad(t.text.charCodeAt(e));)e++;return e==t.text.length?n:-1}const h6=/^[ \t]*$/,Kle=/-->/,Jle=/\?>/,d6=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,Kle],[/^\s*<\?/,Jle],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,h6],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,h6]];function ece(t,e,n){if(t.next!=60)return-1;let r=t.text.slice(t.pos);for(let i=0,o=d6.length-(n?1:0);i<o;i++)if(d6[i][0].test(r))return i;return-1}function SH(t,e){let n=t.countIndent(e,t.pos,t.indent),r=t.countIndent(t.skipSpace(e),e,n);return r>=n+5?n+1:r}function p0(t,e,n){let r=t.length-1;r>=0&&t[r].to==e&&t[r].type==fn.CodeText?t[r].to=n:t.push(ai(fn.CodeText,e,n))}const GA={LinkReference:void 0,IndentedCode(t,e){let n=e.baseIndent+4;if(e.indent<n)return!1;let r=e.findColumn(n),i=t.lineStart+r,o=t.lineStart+e.text.length,a=[],s=[];for(p0(a,i,o);t.nextLine()&&e.depth>=t.stack.length;)if(e.pos==e.text.length){p0(s,t.lineStart-1,t.lineStart);for(let u of e.markers)s.push(u)}else{if(e.indent<n)break;{if(s.length){for(let f of s)f.type==fn.CodeText?p0(a,f.from,f.to):a.push(f);s=[]}p0(a,t.lineStart-1,t.lineStart);for(let f of e.markers)a.push(f);o=t.lineStart+e.text.length;let u=t.lineStart+e.findColumn(e.baseIndent+4);u<o&&p0(a,u,o)}}return s.length&&(s=s.filter(u=>u.type!=fn.CodeText),s.length&&(e.markers=s.concat(e.markers))),t.addNode(t.buffer.writeElements(a,-i).finish(fn.CodeBlock,o-i),i),!0},FencedCode(t,e){let n=Wle(e);if(n<0)return!1;let r=t.lineStart+e.pos,i=e.next,o=n-e.pos,a=e.skipSpace(n),s=OH(e.text,e.text.length,a),u=[ai(fn.CodeMark,r,r+o)];a<s&&u.push(ai(fn.CodeInfo,t.lineStart+a,t.lineStart+s));for(let f=!0,g=!0,_=!1;t.nextLine()&&e.depth>=t.stack.length;f=!1){let w=e.pos;if(e.indent-e.baseIndent<4)for(;w<e.text.length&&e.text.charCodeAt(w)==i;)w++;if(w-e.pos>=o&&e.skipSpace(w)==e.text.length){for(let S of e.markers)u.push(S);g&&_&&p0(u,t.lineStart-1,t.lineStart),u.push(ai(fn.CodeMark,t.lineStart+e.pos,t.lineStart+w)),t.nextLine();break}else{_=!0,f||(p0(u,t.lineStart-1,t.lineStart),g=!1);for(let A of e.markers)u.push(A);let S=t.lineStart+e.basePos,E=t.lineStart+e.text.length;S<E&&(p0(u,S,E),g=!1)}}return t.addNode(t.buffer.writeElements(u,-r).finish(fn.FencedCode,t.prevLineEnd()-r),r),!0},Blockquote(t,e){let n=Hle(e);return n<0?!1:(t.startContext(fn.Blockquote,e.pos),t.addNode(fn.QuoteMark,t.lineStart+e.pos,t.lineStart+e.pos+1),e.moveBase(e.pos+n),null)},HorizontalRule(t,e){if(G9(e,t,!1)<0)return!1;let n=t.lineStart+e.pos;return t.nextLine(),t.addNode(fn.HorizontalRule,n),!0},BulletList(t,e){let n=X9(e,t,!1);if(n<0)return!1;t.block.type!=fn.BulletList&&t.startContext(fn.BulletList,e.basePos,e.next);let r=SH(e,e.pos+1);return t.startContext(fn.ListItem,e.basePos,r-e.baseIndent),t.addNode(fn.ListMark,t.lineStart+e.pos,t.lineStart+e.pos+n),e.moveBaseColumn(r),null},OrderedList(t,e){let n=Y9(e,t,!1);if(n<0)return!1;t.block.type!=fn.OrderedList&&t.startContext(fn.OrderedList,e.basePos,e.text.charCodeAt(e.pos+n-1));let r=SH(e,e.pos+n);return t.startContext(fn.ListItem,e.basePos,r-e.baseIndent),t.addNode(fn.ListMark,t.lineStart+e.pos,t.lineStart+e.pos+n),e.moveBaseColumn(r),null},ATXHeading(t,e){let n=Xle(e);if(n<0)return!1;let r=e.pos,i=t.lineStart+r,o=OH(e.text,e.text.length,r),a=o;for(;a>r&&e.text.charCodeAt(a-1)==e.next;)a--;(a==o||a==r||!ad(e.text.charCodeAt(a-1)))&&(a=e.text.length);let s=t.buffer.write(fn.HeaderMark,0,n).writeElements(t.parser.parseInline(e.text.slice(r+n+1,a),i+n+1),-i);a<e.text.length&&s.write(fn.HeaderMark,a-r,o-r);let u=s.finish(fn.ATXHeading1-1+n,e.text.length-r);return t.nextLine(),t.addNode(u,i),!0},HTMLBlock(t,e){let n=ece(e,t,!1);if(n<0)return!1;let r=t.lineStart+e.pos,i=d6[n][1],o=[],a=i!=h6;for(;!i.test(e.text)&&t.nextLine();){if(e.depth<t.stack.length){a=!1;break}for(let f of e.markers)o.push(f)}a&&t.nextLine();let s=i==Kle?fn.CommentBlock:i==Jle?fn.ProcessingInstructionBlock:fn.HTMLBlock,u=t.prevLineEnd();return t.addNode(t.buffer.writeElements(o,-r).finish(s,u-r),r),!0},SetextHeading:void 0};class ZHe{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,n,r){if(this.stage==-1)return!1;let i=r.content+`
`+n.scrub(),o=this.advance(i);return o>-1&&o<i.length?this.complete(e,r,o):!1}finish(e,n){return(this.stage==2||this.stage==3)&&xC(n.content,this.pos)==n.content.length?this.complete(e,n,n.content.length):!1}complete(e,n,r){return e.addLeafElement(n,ai(fn.LinkReference,this.start,this.start+r,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(uce(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(ai(fn.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(lce(e,xC(e,this.pos),this.start)))return-1}else if(this.stage==2){let n=xC(e,this.pos),r=0;if(n>this.pos){let i=cce(e,n,this.start);if(i){let o=DL(e,i.to-this.start);o>0&&(this.nextStage(i),r=o)}}return r||(r=DL(e,this.pos)),r>0&&r<e.length?r:-1}else return DL(e,this.pos)}}}function DL(t,e){for(;e<t.length;e++){let n=t.charCodeAt(e);if(n==10)break;if(!ad(n))return-1}return e}class qHe{nextLine(e,n,r){let i=n.depth<e.stack.length?-1:Yle(n),o=n.next;if(i<0)return!1;let a=ai(fn.HeaderMark,e.lineStart+n.pos,e.lineStart+i);return e.nextLine(),e.addLeafElement(r,ai(o==61?fn.SetextHeading1:fn.SetextHeading2,r.start,e.prevLineEnd(),[...e.parser.parseInline(r.content,r.start),a])),!0}finish(){return!1}}const tce={LinkReference(t,e){return e.content.charCodeAt(0)==91?new ZHe(e):null},SetextHeading(){return new qHe}},WHe=[(t,e)=>Xle(e)>=0,(t,e)=>Wle(e)>=0,(t,e)=>Hle(e)>=0,(t,e)=>X9(e,t,!0)>=0,(t,e)=>Y9(e,t,!0)>=0,(t,e)=>G9(e,t,!0)>=0,(t,e)=>ece(e,t,!0)>=0],HHe={text:"",end:0};class GHe{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.line=new UHe,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=i[i.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=i[0].from,this.block=CM.create(fn.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=r.length?new KHe(r,n):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let r=0;;){let i=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;r<e.markers.length&&(!i||e.markers[r].from<i.end);){let o=e.markers[r++];this.addNode(o.type,o.from,o.to)}if(!i)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let r of this.parser.blockParsers)if(r){let i=r(this,e);if(i!=!1){if(i==!0)return null;e.forward();continue e}}break}let n=new QHe(this.lineStart+e.pos,e.text.slice(e.pos));for(let r of this.parser.leafBlockParsers)if(r){let i=r(this,n);i&&n.parsers.push(i)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let r of this.parser.endLeafBlock)if(r(this,e,n))break e}for(let r of n.parsers)if(r.nextLine(this,e,n))return null;n.content+=`
`+e.scrub();for(let r of e.markers)n.marks.push(r)}return this.finishLeaf(n),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let n=this.fragments.takeNodes(this);return n?(this.absoluteLineStart+=n,this.lineStart=hce(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let n=HHe;if(n.end=e,e>=this.to)n.text="";else if(n.text=this.lineChunkAt(e),n.end+=n.text.length,this.ranges.length>1){let r=this.absoluteLineStart,i=this.rangeI;for(;this.ranges[i].to<n.end;){i++;let o=this.ranges[i].from,a=this.lineChunkAt(o);n.end=o+a.length,n.text=n.text.slice(0,this.ranges[i-1].to-r)+a,r=n.end-n.text.length}}return n}readLine(){let{line:e}=this,{text:n,end:r}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=r,e.reset(n);e.depth<this.stack.length;e.depth++){let i=this.stack[e.depth],o=this.parser.skipContextMarkup[i.type];if(!o)throw new Error("Unhandled block context "+fn[i.type]);let a=this.line.markers.length;if(!o(i,this,e)){this.line.markers.length>a&&(i.end=this.line.markers[this.line.markers.length-1].to),e.forward();break}e.forward()}}lineChunkAt(e){let n=this.input.chunk(e),r;if(this.input.lineChunks)r=n==`
`?"":n;else{let i=n.indexOf(`
`);r=i<0?n:n.slice(0,i)}return e+r.length>this.to?r.slice(0,this.to-e):r}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,n,r=0){this.block=CM.create(e,r,this.lineStart+n,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,n,r=0){this.startContext(this.parser.getNodeType(e),n,r)}addNode(e,n,r){typeof e=="number"&&(e=new Vr(this.parser.nodeSet.types[e],sO,sO,(r??this.prevLineEnd())-n)),this.block.addChild(e,n-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,n){this.addNode(this.buffer.writeElements(p6(n.children,e.marks),-n.from).finish(n.type,n.to-n.from),n.from)}finishContext(){let e=this.stack.pop(),n=this.stack[this.stack.length-1];n.addChild(e.toTree(this.parser.nodeSet),e.from-n.from),this.block=n}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?nce(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let r of e.parsers)if(r.finish(this,e))return;let n=p6(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(n,-e.start).finish(fn.Paragraph,e.content.length),e.start)}elt(e,n,r,i){return typeof e=="string"?ai(this.parser.getNodeType(e),n,r,i):new oce(e,n)}get buffer(){return new ice(this.parser.nodeSet)}}function nce(t,e,n,r,i){let o=t[e].to,a=[],s=[],u=n.from+r;function f(g,_){for(;_?g>=o:g>o;){let w=t[e+1].from-o;r+=w,g+=w,e++,o=t[e].to}}for(let g=n.firstChild;g;g=g.nextSibling){f(g.from+r,!0);let _=g.from+r,w,S=i.get(g.tree);S?w=S:g.to+r>o?(w=nce(t,e,g,r,i),f(g.to+r,!1)):w=g.toTree(),a.push(w),s.push(_-u)}return f(n.to+r,!1),new Vr(n.type,a,s,n.to+r-u,n.tree?n.tree.propValues:void 0)}class MI extends yI{constructor(e,n,r,i,o,a,s,u,f){super(),this.nodeSet=e,this.blockParsers=n,this.leafBlockParsers=r,this.blockNames=i,this.endLeafBlock=o,this.skipContextMarkup=a,this.inlineParsers=s,this.inlineNames=u,this.wrappers=f,this.nodeTypes=Object.create(null);for(let g of e.types)this.nodeTypes[g.name]=g.id}createParse(e,n,r){let i=new GHe(this,e,n,r);for(let o of this.wrappers)i=o(i,e,n,r);return i}configure(e){let n=f6(e);if(!n)return this;let{nodeSet:r,skipContextMarkup:i}=this,o=this.blockParsers.slice(),a=this.leafBlockParsers.slice(),s=this.blockNames.slice(),u=this.inlineParsers.slice(),f=this.inlineNames.slice(),g=this.endLeafBlock.slice(),_=this.wrappers;if(k2(n.defineNodes)){i=Object.assign({},i);let w=r.types.slice(),S;for(let E of n.defineNodes){let{name:A,block:R,composite:$,style:z}=typeof E=="string"?{name:E}:E;if(w.some(U=>U.name==A))continue;$&&(i[w.length]=(U,q,H)=>$(q,H,U.value));let B=w.length,F=$?["Block","BlockContext"]:R?B>=fn.ATXHeading1&&B<=fn.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;w.push(ta.define({id:B,name:A,props:F&&[[gr.group,F]]})),z&&(S||(S={}),Array.isArray(z)||z instanceof Bu?S[A]=z:Object.assign(S,z))}r=new zO(w),S&&(r=r.extend(NO(S)))}if(k2(n.props)&&(r=r.extend(...n.props)),k2(n.remove))for(let w of n.remove){let S=this.blockNames.indexOf(w),E=this.inlineNames.indexOf(w);S>-1&&(o[S]=a[S]=void 0),E>-1&&(u[E]=void 0)}if(k2(n.parseBlock))for(let w of n.parseBlock){let S=s.indexOf(w.name);if(S>-1)o[S]=w.parse,a[S]=w.leaf;else{let E=w.before?XA(s,w.before):w.after?XA(s,w.after)+1:s.length-1;o.splice(E,0,w.parse),a.splice(E,0,w.leaf),s.splice(E,0,w.name)}w.endLeaf&&g.push(w.endLeaf)}if(k2(n.parseInline))for(let w of n.parseInline){let S=f.indexOf(w.name);if(S>-1)u[S]=w.parse;else{let E=w.before?XA(f,w.before):w.after?XA(f,w.after)+1:f.length-1;u.splice(E,0,w.parse),f.splice(E,0,w.name)}}return n.wrap&&(_=_.concat(n.wrap)),new MI(r,o,a,s,g,i,u,f,_)}getNodeType(e){let n=this.nodeTypes[e];if(n==null)throw new RangeError(`Unknown node type '${e}'`);return n}parseInline(e,n){let r=new K9(this,e,n);e:for(let i=n;i<r.end;){let o=r.char(i);for(let a of this.inlineParsers)if(a){let s=a(r,o,i);if(s>=0){i=s;continue e}}i++}return r.resolveMarkers(0)}}function k2(t){return t!=null&&t.length>0}function f6(t){if(!Array.isArray(t))return t;if(t.length==0)return null;let e=f6(t[0]);if(t.length==1)return e;let n=f6(t.slice(1));if(!n||!e)return e||n;let r=(a,s)=>(a||sO).concat(s||sO),i=e.wrap,o=n.wrap;return{props:r(e.props,n.props),defineNodes:r(e.defineNodes,n.defineNodes),parseBlock:r(e.parseBlock,n.parseBlock),parseInline:r(e.parseInline,n.parseInline),remove:r(e.remove,n.remove),wrap:i?o?(a,s,u,f)=>i(o(a,s,u,f),s,u,f):i:o}}function XA(t,e){let n=t.indexOf(e);if(n<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return n}let rce=[ta.none];for(let t=1,e;e=fn[t];t++)rce[t]=ta.define({id:t,name:e,props:t>=fn.Escape?[]:[[gr.group,t in qle?["Block","BlockContext"]:["Block","LeafBlock"]]],top:e=="Document"});const sO=[];let ice=class{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,n,r,i=0){return this.content.push(e,n,r,4+i*4),this}writeElements(e,n=0){for(let r of e)r.writeTo(this,n);return this}finish(e,n){return Vr.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:n})}},RT=class{constructor(e,n,r,i=sO){this.type=e,this.from=n,this.to=r,this.children=i}writeTo(e,n){let r=e.content.length;e.writeElements(this.children,n),e.content.push(this.type,this.from+n,this.to+n,e.content.length+4-r)}toTree(e){return new ice(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}};class oce{constructor(e,n){this.tree=e,this.from=n}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return sO}writeTo(e,n){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+n,this.to+n,-1)}toTree(){return this.tree}}function ai(t,e,n,r){return new RT(t,e,n,r)}const sce={resolve:"Emphasis",mark:"EmphasisMark"},ace={resolve:"Emphasis",mark:"EmphasisMark"},L_={},TM={};class Lu{constructor(e,n,r,i){this.type=e,this.from=n,this.to=r,this.side=i}}const CH="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let IT=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{IT=new RegExp("[\\p{S}|\\p{P}]","u")}catch{}const LL={Escape(t,e,n){if(e!=92||n==t.end-1)return-1;let r=t.char(n+1);for(let i=0;i<CH.length;i++)if(CH.charCodeAt(i)==r)return t.append(ai(fn.Escape,n,n+2));return-1},Entity(t,e,n){if(e!=38)return-1;let r=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(t.slice(n+1,n+31));return r?t.append(ai(fn.Entity,n,n+1+r[0].length)):-1},InlineCode(t,e,n){if(e!=96||n&&t.char(n-1)==96)return-1;let r=n+1;for(;r<t.end&&t.char(r)==96;)r++;let i=r-n,o=0;for(;r<t.end;r++)if(t.char(r)==96){if(o++,o==i&&t.char(r+1)!=96)return t.append(ai(fn.InlineCode,n,r+1,[ai(fn.CodeMark,n,n+i),ai(fn.CodeMark,r+1-i,r+1)]))}else o=0;return-1},HTMLTag(t,e,n){if(e!=60||n==t.end-1)return-1;let r=t.slice(n+1,t.end),i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(r);if(i)return t.append(ai(fn.Autolink,n,n+1+i[0].length,[ai(fn.LinkMark,n,n+1),ai(fn.URL,n+1,n+i[0].length),ai(fn.LinkMark,n+i[0].length,n+1+i[0].length)]));let o=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(r);if(o)return t.append(ai(fn.Comment,n,n+1+o[0].length));let a=/^\?[^]*?\?>/.exec(r);if(a)return t.append(ai(fn.ProcessingInstruction,n,n+1+a[0].length));let s=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(r);return s?t.append(ai(fn.HTMLTag,n,n+1+s[0].length)):-1},Emphasis(t,e,n){if(e!=95&&e!=42)return-1;let r=n+1;for(;t.char(r)==e;)r++;let i=t.slice(n-1,n),o=t.slice(r,r+1),a=IT.test(i),s=IT.test(o),u=/\s|^$/.test(i),f=/\s|^$/.test(o),g=!f&&(!s||u||a),_=!u&&(!a||f||s),w=g&&(e==42||!_||a),S=_&&(e==42||!g||s);return t.append(new Lu(e==95?sce:ace,n,r,(w?1:0)|(S?2:0)))},HardBreak(t,e,n){if(e==92&&t.char(n+1)==10)return t.append(ai(fn.HardBreak,n,n+2));if(e==32){let r=n+1;for(;t.char(r)==32;)r++;if(t.char(r)==10&&r>=n+2)return t.append(ai(fn.HardBreak,n,r+1))}return-1},Link(t,e,n){return e==91?t.append(new Lu(L_,n,n+1,1)):-1},Image(t,e,n){return e==33&&t.char(n+1)==91?t.append(new Lu(TM,n,n+2,1)):-1},LinkEnd(t,e,n){if(e!=93)return-1;for(let r=t.parts.length-1;r>=0;r--){let i=t.parts[r];if(i instanceof Lu&&(i.type==L_||i.type==TM)){if(!i.side||t.skipSpace(i.to)==n&&!/[(\[]/.test(t.slice(n+1,n+2)))return t.parts[r]=null,-1;let o=t.takeContent(r),a=t.parts[r]=XHe(t,o,i.type==L_?fn.Link:fn.Image,i.from,n+1);if(i.type==L_)for(let s=0;s<r;s++){let u=t.parts[s];u instanceof Lu&&u.type==L_&&(u.side=0)}return a.to}}return-1}};function XHe(t,e,n,r,i){let{text:o}=t,a=t.char(i),s=i;if(e.unshift(ai(fn.LinkMark,r,r+(n==fn.Image?2:1))),e.push(ai(fn.LinkMark,i-1,i)),a==40){let u=t.skipSpace(i+1),f=lce(o,u-t.offset,t.offset),g;f&&(u=t.skipSpace(f.to),u!=f.to&&(g=cce(o,u-t.offset,t.offset),g&&(u=t.skipSpace(g.to)))),t.char(u)==41&&(e.push(ai(fn.LinkMark,i,i+1)),s=u+1,f&&e.push(f),g&&e.push(g),e.push(ai(fn.LinkMark,u,s)))}else if(a==91){let u=uce(o,i-t.offset,t.offset,!1);u&&(e.push(u),s=u.to)}return ai(n,r,s,e)}function lce(t,e,n){if(t.charCodeAt(e)==60){for(let i=e+1;i<t.length;i++){let o=t.charCodeAt(i);if(o==62)return ai(fn.URL,e+n,i+1+n);if(o==60||o==10)return!1}return null}else{let i=0,o=e;for(let a=!1;o<t.length;o++){let s=t.charCodeAt(o);if(ad(s))break;if(a)a=!1;else if(s==40)i++;else if(s==41){if(!i)break;i--}else s==92&&(a=!0)}return o>e?ai(fn.URL,e+n,o+n):o==t.length?null:!1}}function cce(t,e,n){let r=t.charCodeAt(e);if(r!=39&&r!=34&&r!=40)return!1;let i=r==40?41:r;for(let o=e+1,a=!1;o<t.length;o++){let s=t.charCodeAt(o);if(a)a=!1;else{if(s==i)return ai(fn.LinkTitle,e+n,o+1+n);s==92&&(a=!0)}}return null}function uce(t,e,n,r){for(let i=!1,o=e+1,a=Math.min(t.length,o+999);o<a;o++){let s=t.charCodeAt(o);if(i)i=!1;else{if(s==93)return r?!1:ai(fn.LinkLabel,e+n,o+1+n);if(r&&!ad(s)&&(r=!1),s==91)return!1;s==92&&(i=!0)}}return null}class K9{constructor(e,n,r){this.parser=e,this.text=n,this.offset=r,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,n){return this.text.slice(e-this.offset,n-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,n,r,i,o){return this.append(new Lu(e,n,r,(i?1:0)|(o?2:0)))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let n=this.parts[e];if(n instanceof Lu&&(n.type==L_||n.type==TM))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let r=e;r<this.parts.length;r++){let i=this.parts[r];if(!(i instanceof Lu&&i.type.resolve&&i.side&2))continue;let o=i.type==sce||i.type==ace,a=i.to-i.from,s,u=r-1;for(;u>=e;u--){let A=this.parts[u];if(A instanceof Lu&&A.side&1&&A.type==i.type&&!(o&&(i.side&1||A.side&2)&&(A.to-A.from+a)%3==0&&((A.to-A.from)%3||a%3))){s=A;break}}if(!s)continue;let f=i.type.resolve,g=[],_=s.from,w=i.to;if(o){let A=Math.min(2,s.to-s.from,a);_=s.to-A,w=i.from+A,f=A==1?"Emphasis":"StrongEmphasis"}s.type.mark&&g.push(this.elt(s.type.mark,_,s.to));for(let A=u+1;A<r;A++)this.parts[A]instanceof RT&&g.push(this.parts[A]),this.parts[A]=null;i.type.mark&&g.push(this.elt(i.type.mark,i.from,w));let S=this.elt(f,_,w,g);this.parts[u]=o&&s.from!=_?new Lu(s.type,s.from,_,s.side):null,(this.parts[r]=o&&i.to!=w?new Lu(i.type,w,i.to,i.side):null)?this.parts.splice(r,0,S):this.parts[r]=S}let n=[];for(let r=e;r<this.parts.length;r++){let i=this.parts[r];i instanceof RT&&n.push(i)}return n}findOpeningDelimiter(e){for(let n=this.parts.length-1;n>=0;n--){let r=this.parts[n];if(r instanceof Lu&&r.type==e&&r.side&1)return n}return null}takeContent(e){let n=this.resolveMarkers(e);return this.parts.length=e,n}getDelimiterAt(e){let n=this.parts[e];return n instanceof Lu?n:null}skipSpace(e){return xC(this.text,e-this.offset)+this.offset}elt(e,n,r,i){return typeof e=="string"?ai(this.parser.getNodeType(e),n,r,i):new oce(e,n)}}K9.linkStart=L_;K9.imageStart=TM;function p6(t,e){if(!e.length)return t;if(!t.length)return e;let n=t.slice(),r=0;for(let i of e){for(;r<n.length&&n[r].to<i.to;)r++;if(r<n.length&&n[r].from<i.from){let o=n[r];o instanceof RT&&(n[r]=new RT(o.type,o.from,o.to,p6(o.children,[i])))}else n.splice(r++,0,i)}return n}const YHe=[fn.CodeBlock,fn.ListItem,fn.OrderedList,fn.BulletList];class KHe{constructor(e,n){this.fragments=e,this.input=n,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,n){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let o=this.fragment.to;for(;o>0&&this.input.read(o-1,o)!=`
`;)o--;this.fragmentEnd=o?o-1:0}let r=this.cursor;r||(r=this.cursor=this.fragment.tree.cursor(),r.firstChild());let i=e+this.fragment.offset;for(;r.to<=i;)if(!r.parent())return!1;for(;;){if(r.from>=i)return this.fragment.from<=n;if(!r.childAfter(i))return!1}}matches(e){let n=this.cursor.tree;return n&&n.prop(gr.contextHash)==e}takeNodes(e){let n=this.cursor,r=this.fragment.offset,i=this.fragmentEnd-(this.fragment.openEnd?1:0),o=e.absoluteLineStart,a=o,s=e.block.children.length,u=a,f=s;for(;;){if(n.to-r>i){if(n.type.isAnonymous&&n.firstChild())continue;break}let g=hce(n.from-r,e.ranges);if(n.to-r<=e.ranges[e.rangeI].to)e.addNode(n.tree,g);else{let _=new Vr(e.parser.nodeSet.types[fn.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(_,n.tree),e.addNode(_,g)}if(n.type.is("Block")&&(YHe.indexOf(n.type.id)<0?(a=n.to-r,s=e.block.children.length):(a=u,s=f,u=n.to-r,f=e.block.children.length)),!n.nextSibling())break}for(;e.block.children.length>s;)e.block.children.pop(),e.block.positions.pop();return a-o}}function hce(t,e){let n=t;for(let r=1;r<e.length;r++){let i=e[r-1].to,o=e[r].from;i<t&&(n-=o-i)}return n}const JHe=NO({"Blockquote/...":Be.quote,HorizontalRule:Be.contentSeparator,"ATXHeading1/... SetextHeading1/...":Be.heading1,"ATXHeading2/... SetextHeading2/...":Be.heading2,"ATXHeading3/...":Be.heading3,"ATXHeading4/...":Be.heading4,"ATXHeading5/...":Be.heading5,"ATXHeading6/...":Be.heading6,"Comment CommentBlock":Be.comment,Escape:Be.escape,Entity:Be.character,"Emphasis/...":Be.emphasis,"StrongEmphasis/...":Be.strong,"Link/... Image/...":Be.link,"OrderedList/... BulletList/...":Be.list,"BlockQuote/...":Be.quote,"InlineCode CodeText":Be.monospace,"URL Autolink":Be.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":Be.processingInstruction,"CodeInfo LinkLabel":Be.labelName,LinkTitle:Be.string,Paragraph:Be.content}),eGe=new MI(new zO(rce).extend(JHe),Object.keys(GA).map(t=>GA[t]),Object.keys(GA).map(t=>tce[t]),Object.keys(GA),WHe,qle,Object.keys(LL).map(t=>LL[t]),Object.keys(LL),[]);function tGe(t,e,n){let r=[];for(let i=t.firstChild,o=e;;i=i.nextSibling){let a=i?i.from:n;if(a>o&&r.push({from:o,to:a}),!i)break;o=i.to}return r}function nGe(t){let{codeParser:e,htmlParser:n}=t;return{wrap:ooe((i,o)=>{let a=i.type.id;if(e&&(a==fn.CodeBlock||a==fn.FencedCode)){let s="";if(a==fn.FencedCode){let f=i.node.getChild(fn.CodeInfo);f&&(s=o.read(f.from,f.to))}let u=e(s);if(u)return{parser:u,overlay:f=>f.type.id==fn.CodeText,bracketed:a==fn.FencedCode}}else if(n&&(a==fn.HTMLBlock||a==fn.HTMLTag||a==fn.CommentBlock))return{parser:n,overlay:tGe(i.node,i.from,i.to)};return null})}}const rGe={resolve:"Strikethrough",mark:"StrikethroughMark"},iGe={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":Be.strikethrough}},{name:"StrikethroughMark",style:Be.processingInstruction}],parseInline:[{name:"Strikethrough",parse(t,e,n){if(e!=126||t.char(n+1)!=126||t.char(n+2)==126)return-1;let r=t.slice(n-1,n),i=t.slice(n+2,n+3),o=/\s|^$/.test(r),a=/\s|^$/.test(i),s=IT.test(r),u=IT.test(i);return t.addDelimiter(rGe,n,n+2,!a&&(!u||o||s),!o&&(!s||a||u))},after:"Emphasis"}]};function wC(t,e,n=0,r,i=0){let o=0,a=!0,s=-1,u=-1,f=!1,g=()=>{r.push(t.elt("TableCell",i+s,i+u,t.parser.parseInline(e.slice(s,u),i+s)))};for(let _=n;_<e.length;_++){let w=e.charCodeAt(_);w==124&&!f?((!a||s>-1)&&o++,a=!1,r&&(s>-1&&g(),r.push(t.elt("TableDelimiter",_+i,_+i+1))),s=u=-1):(f||w!=32&&w!=9)&&(s<0&&(s=_),u=_+1),f=!f&&w==92}return s>-1&&(o++,r&&g()),o}function TH(t,e){for(let n=e;n<t.length;n++){let r=t.charCodeAt(n);if(r==124)return!0;r==92&&n++}return!1}const dce=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class kH{constructor(){this.rows=null}nextLine(e,n,r){if(this.rows==null){this.rows=!1;let i;if((n.next==45||n.next==58||n.next==124)&&dce.test(i=n.text.slice(n.pos))){let o=[];wC(e,r.content,0,o,r.start)==wC(e,i,n.pos)&&(this.rows=[e.elt("TableHeader",r.start,r.start+r.content.length,o),e.elt("TableDelimiter",e.lineStart+n.pos,e.lineStart+n.text.length)])}}else if(this.rows){let i=[];wC(e,n.text,n.pos,i,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+n.pos,e.lineStart+n.text.length,i))}return!1}finish(e,n){return this.rows?(e.addLeafElement(n,e.elt("Table",n.start,n.start+n.content.length,this.rows)),!0):!1}}const oGe={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":Be.heading}},"TableRow",{name:"TableCell",style:Be.content},{name:"TableDelimiter",style:Be.processingInstruction}],parseBlock:[{name:"Table",leaf(t,e){return TH(e.content,0)?new kH:null},endLeaf(t,e,n){if(n.parsers.some(i=>i instanceof kH)||!TH(e.text,e.basePos))return!1;let r=t.peekLine();return dce.test(r)&&wC(t,e.text,e.basePos)==wC(t,r,e.basePos)},before:"SetextHeading"}]};class sGe{nextLine(){return!1}finish(e,n){return e.addLeafElement(n,e.elt("Task",n.start,n.start+n.content.length,[e.elt("TaskMarker",n.start,n.start+3),...e.parser.parseInline(n.content.slice(3),n.start+3)])),!0}}const aGe={defineNodes:[{name:"Task",block:!0,style:Be.list},{name:"TaskMarker",style:Be.atom}],parseBlock:[{name:"TaskList",leaf(t,e){return/^\[[ xX]\][ \t]/.test(e.content)&&t.parentType().name=="ListItem"?new sGe:null},after:"SetextHeading"}]},EH=/(www\.)|(https?:\/\/)|([\w.+-]{1,100}@)|(mailto:|xmpp:)/gy,AH=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,lGe=/[\w-]+\.[\w-]+($|\/)/,PH=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,MH=/\/[a-zA-Z\d@.]+/gy;function RH(t,e,n,r){let i=0;for(let o=e;o<n;o++)t[o]==r&&i++;return i}function cGe(t,e){AH.lastIndex=e;let n=AH.exec(t);if(!n||lGe.exec(n[0])[0].indexOf("_")>-1)return-1;let r=e+n[0].length;for(;;){let i=t[r-1],o;if(/[?!.,:*_~]/.test(i)||i==")"&&RH(t,e,r,")")>RH(t,e,r,"("))r--;else if(i==";"&&(o=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(t.slice(e,r))))r=e+o.index;else break}return r}function IH(t,e){PH.lastIndex=e;let n=PH.exec(t);if(!n)return-1;let r=n[0][n[0].length-1];return r=="_"||r=="-"?-1:e+n[0].length-(r=="."?1:0)}const uGe={parseInline:[{name:"Autolink",parse(t,e,n){let r=n-t.offset;if(r&&/\w/.test(t.text[r-1]))return-1;EH.lastIndex=r;let i=EH.exec(t.text),o=-1;if(!i)return-1;if(i[1]||i[2]){if(o=cGe(t.text,r+i[0].length),o>-1&&t.hasOpenLink){let a=/([^\[\]]|\[[^\]]*\])*/.exec(t.text.slice(r,o));o=r+a[0].length}}else i[3]?o=IH(t.text,r):(o=IH(t.text,r+i[0].length),o>-1&&i[0]=="xmpp:"&&(MH.lastIndex=o,i=MH.exec(t.text),i&&(o=i.index+i[0].length)));return o<0?-1:(t.addElement(t.elt("URL",n,o+t.offset)),o+t.offset)}}]},hGe=[oGe,aGe,iGe,uGe];function fce(t,e,n){return(r,i,o)=>{if(i!=t||r.char(o+1)==t)return-1;let a=[r.elt(n,o,o+1)];for(let s=o+1;s<r.end;s++){let u=r.char(s);if(u==t)return r.addElement(r.elt(e,o,s+1,a.concat(r.elt(n,s,s+1))));if(u==92&&a.push(r.elt("Escape",s,s+++2)),ad(u))break}return-1}}const dGe={defineNodes:[{name:"Superscript",style:Be.special(Be.content)},{name:"SuperscriptMark",style:Be.processingInstruction}],parseInline:[{name:"Superscript",parse:fce(94,"Superscript","SuperscriptMark")}]},fGe={defineNodes:[{name:"Subscript",style:Be.special(Be.content)},{name:"SubscriptMark",style:Be.processingInstruction}],parseInline:[{name:"Subscript",parse:fce(126,"Subscript","SubscriptMark")}]},pGe={defineNodes:[{name:"Emoji",style:Be.character}],parseInline:[{name:"Emoji",parse(t,e,n){let r;return e!=58||!(r=/^[a-zA-Z_0-9]+:/.exec(t.slice(n+1,t.end)))?-1:t.addElement(t.elt("Emoji",n,n+1+r[0].length))}}]},pce=vI({commentTokens:{block:{open:"<!--",close:"-->"}}}),mce=new gr,gce=eGe.configure({props:[FO.add(t=>!t.is("Block")||t.is("Document")||m6(t)!=null||mGe(t)?void 0:(e,n)=>({from:n.doc.lineAt(e.from).to,to:e.to})),mce.add(m6),BO.add({Document:()=>null}),T0.add({Document:pce})]});function m6(t){let e=/^(?:ATX|Setext)Heading(\d)$/.exec(t.name);return e?+e[1]:void 0}function mGe(t){return t.name=="OrderedList"||t.name=="BulletList"}function gGe(t,e){let n=t;for(;;){let r=n.nextSibling,i;if(!r||(i=m6(r.type))!=null&&i<=e)break;n=r}return n.to}const yGe=hoe.of((t,e,n)=>{for(let r=Ji(t).resolveInner(n,-1);r&&!(r.from<e);r=r.parent){let i=r.type.prop(mce);if(i==null)continue;let o=gGe(r,i);if(o>n)return{from:n,to:o}}return null});function J9(t){return new qu(pce,t,[],"markdown")}const yce=J9(gce),vGe=gce.configure([hGe,fGe,dGe,pGe,{props:[FO.add({Table:(t,e)=>({from:e.doc.lineAt(t.from).to,to:t.to})})]}]),DT=J9(vGe);function _Ge(t,e){return n=>{if(n&&t){let r=null;if(n=/\S*/.exec(n)[0],typeof t=="function"?r=t(n):r=kt.matchLanguageName(t,n,!0),r instanceof kt)return r.support?r.support.language.parser:Sb.getSkippingParser(r.load());if(r)return r.parser}return e?e.parser:null}}class $L{constructor(e,n,r,i,o,a,s){this.node=e,this.from=n,this.to=r,this.spaceBefore=i,this.spaceAfter=o,this.type=a,this.item=s}blank(e,n=!0){let r=this.spaceBefore+(this.node.name=="Blockquote"?">":"");if(e!=null){for(;r.length<e;)r+=" ";return r}else{for(let i=this.to-this.from-r.length-this.spaceAfter.length;i>0;i--)r+=" ";return r+(n?this.spaceAfter:"")}}marker(e,n){let r=this.node.name=="OrderedList"?String(+_ce(this.item,e)[2]+n):"";return this.spaceBefore+r+this.type+this.spaceAfter}}function vce(t,e){let n=[],r=[];for(let i=t;i;i=i.parent){if(i.name=="FencedCode")return r;(i.name=="ListItem"||i.name=="Blockquote")&&n.push(i)}for(let i=n.length-1;i>=0;i--){let o=n[i],a,s=e.lineAt(o.from),u=o.from-s.from;if(o.name=="Blockquote"&&(a=/^ *>( ?)/.exec(s.text.slice(u))))r.push(new $L(o,u,u+a[0].length,"",a[1],">",null));else if(o.name=="ListItem"&&o.parent.name=="OrderedList"&&(a=/^( *)\d+([.)])( *)/.exec(s.text.slice(u)))){let f=a[3],g=a[0].length;f.length>=4&&(f=f.slice(0,f.length-4),g-=4),r.push(new $L(o.parent,u,u+g,a[1],f,a[2],o))}else if(o.name=="ListItem"&&o.parent.name=="BulletList"&&(a=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(s.text.slice(u)))){let f=a[4],g=a[0].length;f.length>4&&(f=f.slice(0,f.length-4),g-=4);let _=a[2];a[3]&&(_+=a[3].replace(/[xX]/," ")),r.push(new $L(o.parent,u,u+g,a[1],f,_,o))}}return r}function _ce(t,e){return/^(\s*)(\d+)(?=[.)])/.exec(e.sliceString(t.from,t.from+10))}function zL(t,e,n,r=0){for(let i=-1,o=t;;){if(o.name=="ListItem"){let s=_ce(o,e),u=+s[2];if(i>=0){if(u!=i+1)return;n.push({from:o.from+s[1].length,to:o.from+s[0].length,insert:String(i+2+r)})}i=u}let a=o.nextSibling;if(!a)break;o=a}}function eF(t,e){let n=/^[ \t]*/.exec(t)[0].length;if(!n||e.facet(Ck)!="	")return t;let r=Sf(t,4,n),i="";for(let o=r;o>0;)o>=4?(i+="	",o-=4):(i+=" ",o--);return i+t.slice(n)}const bce=(t={})=>({state:e,dispatch:n})=>{let r=Ji(e),{doc:i}=e,o=null,a=e.changeByRange(s=>{if(!s.empty||!DT.isActiveAt(e,s.from,-1)&&!DT.isActiveAt(e,s.from,1))return o={range:s};let u=s.from,f=i.lineAt(u),g=vce(r.resolveInner(u,-1),i);for(;g.length&&g[g.length-1].from>u-f.from;)g.pop();if(!g.length)return o={range:s};let _=g[g.length-1];if(_.to-_.spaceAfter.length>u-f.from)return o={range:s};let w=u>=_.to-_.spaceAfter.length&&!/\S/.test(f.text.slice(_.to));if(_.item&&w){let $=_.node.firstChild,z=_.node.getChild("ListItem","ListItem");if($.to>=u||z&&z.to<u||f.from>0&&!/[^\s>]/.test(i.lineAt(f.from-1).text)||t.nonTightLists===!1){let B=g.length>1?g[g.length-2]:null,F,U="";B&&B.item?(F=f.from+B.from,U=B.marker(i,1)):F=f.from+(B?B.to:0);let q=[{from:F,to:u,insert:U}];return _.node.name=="OrderedList"&&zL(_.item,i,q,-2),B&&B.node.name=="OrderedList"&&zL(B.item,i,q),{range:Ft.cursor(F+U.length),changes:q}}else{let B=LH(g,e,f);return{range:Ft.cursor(u+B.length+1),changes:{from:f.from,insert:B+e.lineBreak}}}}if(_.node.name=="Blockquote"&&w&&f.from){let $=i.lineAt(f.from-1),z=/>\s*$/.exec($.text);if(z&&z.index==_.from){let B=e.changes([{from:$.from+z.index,to:$.to},{from:f.from+_.from,to:f.to}]);return{range:s.map(B),changes:B}}}let S=[];_.node.name=="OrderedList"&&zL(_.item,i,S);let E=_.item&&_.item.from<f.from,A="";if(!E||/^[\s\d.)\-+*>]*/.exec(f.text)[0].length>=_.to)for(let $=0,z=g.length-1;$<=z;$++)A+=$==z&&!E?g[$].marker(i,1):g[$].blank($<z?Sf(f.text,4,g[$+1].from)-A.length:null);let R=u;for(;R>f.from&&/\s/.test(f.text.charAt(R-f.from-1));)R--;return A=eF(A,e),bGe(_.node,e.doc)&&(A=LH(g,e,f)+e.lineBreak+A),S.push({from:R,to:u,insert:e.lineBreak+A}),{range:Ft.cursor(R+A.length+1),changes:S}});return o?!1:(n(e.update(a,{scrollIntoView:!0,userEvent:"input"})),!0)},xce=bce();function DH(t){return t.name=="QuoteMark"||t.name=="ListMark"}function bGe(t,e){if(t.name!="OrderedList"&&t.name!="BulletList")return!1;let n=t.firstChild,r=t.getChild("ListItem","ListItem");if(!r)return!1;let i=e.lineAt(n.to),o=e.lineAt(r.from),a=/^[\s>]*$/.test(i.text);return i.number+(a?0:1)<o.number}function LH(t,e,n){let r="";for(let i=0,o=t.length-2;i<=o;i++)r+=t[i].blank(i<o?Sf(n.text,4,t[i+1].from)-r.length:null,i<o);return eF(r,e)}function xGe(t,e){let n=t.resolveInner(e,-1),r=e;DH(n)&&(r=n.from,n=n.parent);for(let i;i=n.childBefore(r);)if(DH(i))r=i.from;else if(i.name=="OrderedList"||i.name=="BulletList")n=i.lastChild,r=n.to;else break;return n}const wce=({state:t,dispatch:e})=>{let n=Ji(t),r=null,i=t.changeByRange(o=>{let a=o.from,{doc:s}=t;if(o.empty&&DT.isActiveAt(t,o.from)){let u=s.lineAt(a),f=vce(xGe(n,a),s);if(f.length){let g=f[f.length-1],_=g.to-g.spaceAfter.length+(g.spaceAfter?1:0);if(a-u.from>_&&!/\S/.test(u.text.slice(_,a-u.from)))return{range:Ft.cursor(u.from+_),changes:{from:u.from+_,to:a}};if(a-u.from==_&&(!g.item||u.from<=g.item.from||!/\S/.test(u.text.slice(0,g.to)))){let w=u.from+g.from;if(g.item&&g.node.from<g.item.from&&/\S/.test(u.text.slice(g.from,g.to))){let S=g.blank(Sf(u.text,4,g.to)-Sf(u.text,4,g.from));return w==u.from&&(S=eF(S,t)),{range:Ft.cursor(w+S.length),changes:{from:w,to:u.from+g.to,insert:S}}}if(w<a)return{range:Ft.cursor(w),changes:{from:w,to:a}}}}}return r={range:o}});return r?!1:(e(t.update(i,{scrollIntoView:!0,userEvent:"delete"})),!0)},Oce=[{key:"Enter",run:xce},{key:"Backspace",run:wce}],Sce=cae({matchClosingTags:!1});function Cce(t={}){let{codeLanguages:e,defaultCodeLanguage:n,addKeymap:r=!0,base:{parser:i}=yce,completeHTMLTags:o=!0,pasteURLAsLink:a=!0,htmlTagLanguage:s=Sce}=t;if(!(i instanceof MI))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let u=t.extensions?[t.extensions]:[],f=[s.support,yGe],g;a&&f.push(Tce),n instanceof Yw?(f.push(n.support),g=n.language):n&&(g=n);let _=e||g?_Ge(e,g):void 0;u.push(nGe({codeParser:_,htmlParser:s.language.parser})),r&&f.push(Pf.high($O.of(Oce)));let w=J9(i.configure(u));return o&&f.push(w.data.of({autocomplete:wGe})),new Yw(w,f)}function wGe(t){let{state:e,pos:n}=t,r=/<[:\-\.\w\u00b7-\uffff]*$/.exec(e.sliceDoc(n-25,n));if(!r)return null;let i=Ji(e).resolveInner(n,-1);for(;i&&!i.type.isTop;){if(i.name=="CodeBlock"||i.name=="FencedCode"||i.name=="ProcessingInstructionBlock"||i.name=="CommentBlock"||i.name=="Link"||i.name=="Image")return null;i=i.parent}return{from:n-r[0].length,to:n,options:OGe(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}let NL=null;function OGe(){if(NL)return NL;let t=iae(new l9(Pr.create({extensions:Sce}),0,!0));return NL=t?t.options:[]}const SGe=/code|horizontalrule|html|link|comment|processing|escape|entity|image|mark|url/i,Tce=un.domEventHandlers({paste:(t,e)=>{var n;let{main:r}=e.state.selection;if(r.empty)return!1;let i=(n=t.clipboardData)===null||n===void 0?void 0:n.getData("text/plain");if(!i||!/^(https?:\/\/|mailto:|xmpp:|www\.)/.test(i)||(/^www\./.test(i)&&(i="https://"+i),!DT.isActiveAt(e.state,r.from,1)))return!1;let o=Ji(e.state),a=!1;return o.iterate({from:r.from,to:r.to,enter:s=>{(s.from>r.from||SGe.test(s.name))&&(a=!0)},leave:s=>{s.to<r.to&&(a=!0)}}),a?!1:(e.dispatch({changes:[{from:r.from,insert:"["},{from:r.to,insert:`](${i})`}],userEvent:"input.paste",scrollIntoView:!0}),!0)}}),CGe=Object.freeze(Object.defineProperty({__proto__:null,commonmarkLanguage:yce,deleteMarkupBackward:wce,insertNewlineContinueMarkup:xce,insertNewlineContinueMarkupCommand:bce,markdown:Cce,markdownKeymap:Oce,markdownLanguage:DT,pasteURLAsLink:Tce},Symbol.toStringTag,{value:"Module"})),g6=[Cae,hae,Cce(),KB(),un.lineWrapping],TGe=()=>{const[t,e,n]=Wo(sm,Ma,tF),r=Ri(vb),i=Ri(YC),o=se.useRef(null),a=se.useCallback(s=>{var u;if(s!==null){const f=[...n,...g6,un.updateListener.of(({state:g})=>{r(g.doc.toString())}),un.focusChangeEffect.of((g,_)=>(_||i(new FocusEvent("blur")),null))];e&&f.push(Pr.readOnly.of(!0)),s.innerHTML="",o.current=new un({parent:s,state:Pr.create({doc:t,extensions:f})})}else(u=o.current)==null||u.destroy(),o.current=null},[t,e,r,n,i]);return se.createElement("div",{ref:a,className:"cm-sourceView mdxeditor-source-editor"})};function $H(t,e){t!==void 0&&t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}})}const kGe=()=>{const t=_O(),[e,n,r,i]=Wo(sm,kM,Ma,kce),o=Ri(vb),a=se.useRef(null),s=se.useRef(null),u=Es(tF),f=Ri(YC);return se.useEffect(()=>t.sub(kM,g=>{var _;$H((_=s.current)==null?void 0:_.a,g)}),[t]),se.useEffect(()=>t.sub(sm,g=>{var _;$H((_=s.current)==null?void 0:_.b,g)}),[t]),se.useEffect(()=>{const g=r||i,_=g?{renderRevertControl:void 0,revertControls:void 0}:{renderRevertControl:()=>{const w=document.createElement("button");return w.classList.add("cm-merge-revert"),w.appendChild(document.createTextNode("")),w},revertControls:"a-to-b"};return s.current=new VHe({..._,parent:a.current,orientation:"a-b",gutter:!0,a:{doc:n,extensions:[...u,...g6,Pr.readOnly.of(!0)]},b:{doc:e,extensions:[...u,...g6,Pr.readOnly.of(g),un.updateListener.of(({state:w})=>{const S=w.doc.toString();o(S)}),un.focusChangeEffect.of((w,S)=>(S||f(new FocusEvent("blur")),null))]}}),()=>{var w;(w=s.current)==null||w.destroy(),s.current=null}},[o,u]),se.createElement("div",{ref:a,className:"mdxeditor-diff-editor"})},EGe=({children:t})=>{const[e,n]=Wo(XC,yb);return se.createElement("div",{className:"mdxeditor-diff-source-wrapper"},e?se.createElement("div",{className:jt.markdownParseError},se.createElement("p",null,e.error,"."),se.createElement("p",null,"You can fix the errors in source mode and switch to rich text mode when you are ready.")):null,se.createElement("div",{className:"mdxeditor-rich-text-editor",style:{display:n==="rich-text"&&e==null?"block":"none"}},t),n==="diff"?se.createElement(kGe,null):null,n==="source"?se.createElement(TGe,null):null)},kM=kn(""),tF=kn([]),kce=kn(!1),AGe=Dl({update:(t,e)=>{t.pub(kM,e?.diffMarkdown??"")},init(t,e){t.pubIn({[kM]:e?.diffMarkdown??"",[tF]:e?.codeMirrorExtensions??[],[F5e]:EGe,[kce]:e?.readOnlyDiff??!1,[yb]:e?.viewMode??"rich-text"})}});var BL={exports:{}},zH;function PGe(){return zH||(zH=1,(function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};var n=(function(r){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,o=0,a={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function z(B){return B instanceof u?new u(B.type,z(B.content),B.alias):Array.isArray(B)?B.map(z):B.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(z){return Object.prototype.toString.call(z).slice(8,-1)},objId:function(z){return z.__id||Object.defineProperty(z,"__id",{value:++o}),z.__id},clone:function z(B,F){F=F||{};var U,q;switch(s.util.type(B)){case"Object":if(q=s.util.objId(B),F[q])return F[q];U={},F[q]=U;for(var H in B)B.hasOwnProperty(H)&&(U[H]=z(B[H],F));return U;case"Array":return q=s.util.objId(B),F[q]?F[q]:(U=[],F[q]=U,B.forEach(function(ne,ie){U[ie]=z(ne,F)}),U);default:return B}},getLanguage:function(z){for(;z;){var B=i.exec(z.className);if(B)return B[1].toLowerCase();z=z.parentElement}return"none"},setLanguage:function(z,B){z.className=z.className.replace(RegExp(i,"gi"),""),z.classList.add("language-"+B)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(U){var z=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(U.stack)||[])[1];if(z){var B=document.getElementsByTagName("script");for(var F in B)if(B[F].src==z)return B[F]}return null}},isActive:function(z,B,F){for(var U="no-"+B;z;){var q=z.classList;if(q.contains(B))return!0;if(q.contains(U))return!1;z=z.parentElement}return!!F}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(z,B){var F=s.util.clone(s.languages[z]);for(var U in B)F[U]=B[U];return F},insertBefore:function(z,B,F,U){U=U||s.languages;var q=U[z],H={};for(var ne in q)if(q.hasOwnProperty(ne)){if(ne==B)for(var ie in F)F.hasOwnProperty(ie)&&(H[ie]=F[ie]);F.hasOwnProperty(ne)||(H[ne]=q[ne])}var ce=U[z];return U[z]=H,s.languages.DFS(s.languages,function(xe,re){re===ce&&xe!=z&&(this[xe]=H)}),H},DFS:function z(B,F,U,q){q=q||{};var H=s.util.objId;for(var ne in B)if(B.hasOwnProperty(ne)){F.call(B,ne,B[ne],U||ne);var ie=B[ne],ce=s.util.type(ie);ce==="Object"&&!q[H(ie)]?(q[H(ie)]=!0,z(ie,F,null,q)):ce==="Array"&&!q[H(ie)]&&(q[H(ie)]=!0,z(ie,F,ne,q))}}},plugins:{},highlightAll:function(z,B){s.highlightAllUnder(document,z,B)},highlightAllUnder:function(z,B,F){var U={callback:F,container:z,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",U),U.elements=Array.prototype.slice.apply(U.container.querySelectorAll(U.selector)),s.hooks.run("before-all-elements-highlight",U);for(var q=0,H;H=U.elements[q++];)s.highlightElement(H,B===!0,U.callback)},highlightElement:function(z,B,F){var U=s.util.getLanguage(z),q=s.languages[U];s.util.setLanguage(z,U);var H=z.parentElement;H&&H.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(H,U);var ne=z.textContent,ie={element:z,language:U,grammar:q,code:ne};function ce(re){ie.highlightedCode=re,s.hooks.run("before-insert",ie),ie.element.innerHTML=ie.highlightedCode,s.hooks.run("after-highlight",ie),s.hooks.run("complete",ie),F&&F.call(ie.element)}if(s.hooks.run("before-sanity-check",ie),H=ie.element.parentElement,H&&H.nodeName.toLowerCase()==="pre"&&!H.hasAttribute("tabindex")&&H.setAttribute("tabindex","0"),!ie.code){s.hooks.run("complete",ie),F&&F.call(ie.element);return}if(s.hooks.run("before-highlight",ie),!ie.grammar){ce(s.util.encode(ie.code));return}if(B&&r.Worker){var xe=new Worker(s.filename);xe.onmessage=function(re){ce(re.data)},xe.postMessage(JSON.stringify({language:ie.language,code:ie.code,immediateClose:!0}))}else ce(s.highlight(ie.code,ie.grammar,ie.language))},highlight:function(z,B,F){var U={code:z,grammar:B,language:F};if(s.hooks.run("before-tokenize",U),!U.grammar)throw new Error('The language "'+U.language+'" has no grammar.');return U.tokens=s.tokenize(U.code,U.grammar),s.hooks.run("after-tokenize",U),u.stringify(s.util.encode(U.tokens),U.language)},tokenize:function(z,B){var F=B.rest;if(F){for(var U in F)B[U]=F[U];delete B.rest}var q=new _;return w(q,q.head,z),g(z,q,B,q.head,0),E(q)},hooks:{all:{},add:function(z,B){var F=s.hooks.all;F[z]=F[z]||[],F[z].push(B)},run:function(z,B){var F=s.hooks.all[z];if(!(!F||!F.length))for(var U=0,q;q=F[U++];)q(B)}},Token:u};r.Prism=s;function u(z,B,F,U){this.type=z,this.content=B,this.alias=F,this.length=(U||"").length|0}u.stringify=function z(B,F){if(typeof B=="string")return B;if(Array.isArray(B)){var U="";return B.forEach(function(ce){U+=z(ce,F)}),U}var q={type:B.type,content:z(B.content,F),tag:"span",classes:["token",B.type],attributes:{},language:F},H=B.alias;H&&(Array.isArray(H)?Array.prototype.push.apply(q.classes,H):q.classes.push(H)),s.hooks.run("wrap",q);var ne="";for(var ie in q.attributes)ne+=" "+ie+'="'+(q.attributes[ie]||"").replace(/"/g,"&quot;")+'"';return"<"+q.tag+' class="'+q.classes.join(" ")+'"'+ne+">"+q.content+"</"+q.tag+">"};function f(z,B,F,U){z.lastIndex=B;var q=z.exec(F);if(q&&U&&q[1]){var H=q[1].length;q.index+=H,q[0]=q[0].slice(H)}return q}function g(z,B,F,U,q,H){for(var ne in F)if(!(!F.hasOwnProperty(ne)||!F[ne])){var ie=F[ne];ie=Array.isArray(ie)?ie:[ie];for(var ce=0;ce<ie.length;++ce){if(H&&H.cause==ne+","+ce)return;var xe=ie[ce],re=xe.inside,me=!!xe.lookbehind,Te=!!xe.greedy,ye=xe.alias;if(Te&&!xe.pattern.global){var _e=xe.pattern.toString().match(/[imsuy]*$/)[0];xe.pattern=RegExp(xe.pattern.source,_e+"g")}for(var ke=xe.pattern||xe,Ne=U.next,Qe=q;Ne!==B.tail&&!(H&&Qe>=H.reach);Qe+=Ne.value.length,Ne=Ne.next){var Se=Ne.value;if(B.length>z.length)return;if(!(Se instanceof u)){var Me=1,Xe;if(Te){if(Xe=f(ke,Qe,z,me),!Xe||Xe.index>=z.length)break;var ct=Xe.index,Ee=Xe.index+Xe[0].length,ft=Qe;for(ft+=Ne.value.length;ct>=ft;)Ne=Ne.next,ft+=Ne.value.length;if(ft-=Ne.value.length,Qe=ft,Ne.value instanceof u)continue;for(var mt=Ne;mt!==B.tail&&(ft<Ee||typeof mt.value=="string");mt=mt.next)Me++,ft+=mt.value.length;Me--,Se=z.slice(Qe,ft),Xe.index-=Qe}else if(Xe=f(ke,0,Se,me),!Xe)continue;var ct=Xe.index,st=Xe[0],bt=Se.slice(0,ct),At=Se.slice(ct+st.length),Tt=Qe+Se.length;H&&Tt>H.reach&&(H.reach=Tt);var Wt=Ne.prev;bt&&(Wt=w(B,Wt,bt),Qe+=bt.length),S(B,Wt,Me);var nn=new u(ne,re?s.tokenize(st,re):st,ye,st);if(Ne=w(B,Wt,nn),At&&w(B,Ne,At),Me>1){var An={cause:ne+","+ce,reach:Tt};g(z,B,F,Ne.prev,Qe,An),H&&An.reach>H.reach&&(H.reach=An.reach)}}}}}}function _(){var z={value:null,prev:null,next:null},B={value:null,prev:z,next:null};z.next=B,this.head=z,this.tail=B,this.length=0}function w(z,B,F){var U=B.next,q={value:F,prev:B,next:U};return B.next=q,U.prev=q,z.length++,q}function S(z,B,F){for(var U=B.next,q=0;q<F&&U!==z.tail;q++)U=U.next;B.next=U,U.prev=B,z.length-=q}function E(z){for(var B=[],F=z.head.next;F!==z.tail;)B.push(F.value),F=F.next;return B}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function(z){var B=JSON.parse(z.data),F=B.language,U=B.code,q=B.immediateClose;r.postMessage(s.highlight(U,s.languages[F],F)),q&&r.close()},!1)),s;var A=s.util.currentScript();A&&(s.filename=A.src,A.hasAttribute("data-manual")&&(s.manual=!0));function R(){s.manual||s.highlightAll()}if(!s.manual){var $=document.readyState;$==="loading"||$==="interactive"&&A&&A.defer?document.addEventListener("DOMContentLoaded",R):window.requestAnimationFrame?window.requestAnimationFrame(R):window.setTimeout(R,16)}return s})(e);t.exports&&(t.exports=n),typeof gF<"u"&&(gF.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(i,o){var a={};a["language-"+o]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[o]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};s["language-"+o]={pattern:/[\s\S]+/,inside:n.languages[o]};var u={};u[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,i){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:n.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,(function(r){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var o=r.languages.markup;o&&(o.tag.addInlined("style","css"),o.tag.addAttribute("style","css"))})(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,(function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",i=function(A,R){return" Error "+A+" while fetching file: "+R},o=" Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",u="loading",f="loaded",g="failed",_="pre[data-src]:not(["+s+'="'+f+'"]):not(['+s+'="'+u+'"])';function w(A,R,$){var z=new XMLHttpRequest;z.open("GET",A,!0),z.onreadystatechange=function(){z.readyState==4&&(z.status<400&&z.responseText?R(z.responseText):z.status>=400?$(i(z.status,z.statusText)):$(o))},z.send(null)}function S(A){var R=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(A||"");if(R){var $=Number(R[1]),z=R[2],B=R[3];return z?B?[$,Number(B)]:[$,void 0]:[$,$]}}n.hooks.add("before-highlightall",function(A){A.selector+=", "+_}),n.hooks.add("before-sanity-check",function(A){var R=A.element;if(R.matches(_)){A.code="",R.setAttribute(s,u);var $=R.appendChild(document.createElement("CODE"));$.textContent=r;var z=R.getAttribute("data-src"),B=A.language;if(B==="none"){var F=(/\.(\w+)$/.exec(z)||[,"none"])[1];B=a[F]||F}n.util.setLanguage($,B),n.util.setLanguage(R,B);var U=n.plugins.autoloader;U&&U.loadLanguages(B),w(z,function(q){R.setAttribute(s,f);var H=S(R.getAttribute("data-range"));if(H){var ne=q.split(/\r\n?|\n/g),ie=H[0],ce=H[1]==null?ne.length:H[1];ie<0&&(ie+=ne.length),ie=Math.max(0,Math.min(ie-1,ne.length)),ce<0&&(ce+=ne.length),ce=Math.max(0,Math.min(ce,ne.length)),q=ne.slice(ie,ce).join(`
`),R.hasAttribute("data-start")||R.setAttribute("data-start",String(ie+1))}$.textContent=q,n.highlightElement($)},function(q){R.setAttribute(s,g),$.textContent=q})}}),n.plugins.fileHighlight={highlight:function(R){for(var $=(R||document).querySelectorAll(_),z=0,B;B=$[z++];)n.highlightElement(B)}};var E=!1;n.fileHighlight=function(){E||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),E=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(BL)),BL.exports}PGe();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(t){t.type==="entity"&&(t.attributes.title=t.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(e,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};i["language-"+n]={pattern:/[\s\S]+/,inside:Prism.languages[n]};var o={};o[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:i},Prism.languages.insertBefore("markup","cdata",o)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(t,e){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+t+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[e,"language-"+e],inside:Prism.languages[e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(t){var e=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(g){return g=g.replace(/<inner>/g,function(){return e}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+g+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,i=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),o=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;t.languages.markdown=t.languages.extend("markup",{}),t.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:t.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+i+o+"(?:"+i+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+i+o+")(?:"+i+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:t.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+i+")"+o+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+i+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:t.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(g){["url","bold","italic","strike","code-snippet"].forEach(function(_){g!==_&&(t.languages.markdown[g].inside.content.inside[_]=t.languages.markdown[_])})}),t.hooks.add("after-tokenize",function(g){if(g.language!=="markdown"&&g.language!=="md")return;function _(w){if(!(!w||typeof w=="string"))for(var S=0,E=w.length;S<E;S++){var A=w[S];if(A.type!=="code"){_(A.content);continue}var R=A.content[1],$=A.content[3];if(R&&$&&R.type==="code-language"&&$.type==="code-block"&&typeof R.content=="string"){var z=R.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");z=(/[a-z][\w-]*/i.exec(z)||[""])[0].toLowerCase();var B="language-"+z;$.alias?typeof $.alias=="string"?$.alias=[$.alias,B]:$.alias.push(B):$.alias=[B]}}}_(g.tokens)}),t.hooks.add("wrap",function(g){if(g.type==="code-block"){for(var _="",w=0,S=g.classes.length;w<S;w++){var E=g.classes[w],A=/language-(.+)/.exec(E);if(A){_=A[1];break}}var R=t.languages[_];if(R)g.content=t.highlight(f(g.content),R,_);else if(_&&_!=="none"&&t.plugins.autoloader){var $="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);g.attributes.id=$,t.plugins.autoloader.loadLanguages(_,function(){var z=document.getElementById($);z&&(z.innerHTML=t.highlight(z.textContent,t.languages[_],_))})}}});var a=RegExp(t.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function f(g){var _=g.replace(a,"");return _=_.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(w,S){if(S=S.toLowerCase(),S[0]==="#"){var E;return S[1]==="x"?E=parseInt(S.slice(2),16):E=Number(S.slice(1)),u(E)}else{var A=s[S];return A||w}}),_}t.languages.md=t.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(t){var e=t.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};e.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:e},boolean:e.boolean,variable:e.variable}})(Prism);var NH={},BH;function MGe(){return BH||(BH=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),NH}MGe();var FH={},jH;function RGe(){return jH||(jH=1,(function(t){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),t.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},t.languages.rust["closure-params"].inside.rest=t.languages.rust,t.languages.rust.attribute.inside.string=t.languages.rust.string})(Prism)),FH}RGe();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(t){t.inside.interpolation.inside=Prism.languages.swift});var VH={},QH;function IGe(){return QH||(QH=1,(function(t){t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),t.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete t.languages.typescript.parameter,delete t.languages.typescript["literal-property"];var e=t.languages.extend("typescript",{});delete e["class-name"],t.languages.typescript["class-name"].inside=e,t.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),t.languages.ts=t.languages.typescript})(Prism)),VH}IGe();var UH={},ZH;function DGe(){return ZH||(ZH=1,(function(t){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,r={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};t.languages.java=t.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[r,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:r.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:r.inside}],keyword:e,function:[t.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),t.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),t.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":r,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:r.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:r.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),UH}DGe();var qH={},WH;function LGe(){return WH||(WH=1,(function(t){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});t.languages.cpp=t.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),t.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return n})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),t.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t.languages.cpp}}}}),t.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),t.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:t.languages.extend("cpp",{})}}),t.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},t.languages.cpp["base-clause"])})(Prism)),qH}LGe();function Ece(t,e){for(const n of t.childNodes){if(qo(n)&&n.tagName===e)return!0;Ece(n,e)}return!1}const G2="data-language",E2="data-highlight-language",YA="data-theme";class Dk extends iu{static getType(){return"code"}static clone(e){return new Dk(e.__language,e.__key)}constructor(e,n){super(n),this.__language=e||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(e){super.afterCloneFrom(e),this.__language=e.__language,this.__theme=e.__theme,this.__isSyntaxHighlightSupported=e.__isSyntaxHighlightSupported}createDOM(e){const n=document.createElement("code");xf(n,e.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();r&&(n.setAttribute(G2,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(E2,r));const i=this.getTheme();i&&n.setAttribute(YA,i);const o=this.getStyle();return o&&n.setAttribute("style",o),n}updateDOM(e,n,r){const i=this.__language,o=e.__language;i?i!==o&&n.setAttribute(G2,i):o&&n.removeAttribute(G2);const a=this.__isSyntaxHighlightSupported;e.__isSyntaxHighlightSupported&&o?a&&i?i!==o&&n.setAttribute(E2,i):n.removeAttribute(E2):a&&i&&n.setAttribute(E2,i);const s=this.__theme,u=e.__theme;s?s!==u&&n.setAttribute(YA,s):u&&n.removeAttribute(YA);const f=this.__style,g=e.__style;return f?f!==g&&n.setAttribute("style",f):g&&n.removeAttribute("style"),!1}exportDOM(e){const n=document.createElement("pre");xf(n,e._config.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();r&&(n.setAttribute(G2,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(E2,r));const i=this.getTheme();i&&n.setAttribute(YA,i);const o=this.getStyle();return o&&n.setAttribute("style",o),{element:n}}static importDOM(){return{code:e=>e.textContent!=null&&(/\r?\n/.test(e.textContent)||Ece(e,"BR"))?{conversion:HH,priority:1}:null,div:()=>({conversion:$Ge,priority:1}),pre:()=>({conversion:HH,priority:0}),table:e=>FL(e)?{conversion:zGe,priority:3}:null,td:e=>{const n=e,r=n.closest("table");return n.classList.contains("js-file-line")||r&&FL(r)?{conversion:GH,priority:3}:null},tr:e=>{const n=e.closest("table");return n&&FL(n)?{conversion:GH,priority:3}:null}}}static importJSON(e){return Lg().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setLanguage(e.language).setTheme(e.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(e,n=!0){const r=this.getChildren(),i=r.length;if(i>=2&&r[i-1].getTextContent()===`
`&&r[i-2].getTextContent()===`
`&&e.isCollapsed()&&e.anchor.key===this.__key&&e.anchor.offset===i){r[i-1].remove(),r[i-2].remove();const u=mi();return this.insertAfter(u,n),u}const{anchor:o,focus:a}=e,s=(o.isBefore(a)?o:a).getNode();if(hn(s)){let u=BGe(s);const f=[];for(;;)if(gR(u))f.push(xO()),u=u.getNextSibling();else{if(!Rce(u))break;{let R=0;const $=u.getTextContent(),z=u.getTextContentSize();for(;R<z&&$[R]===" ";)R++;if(R!==0&&f.push(Mce(" ".repeat(R))),R!==z)break;u=u.getNextSibling()}}const g=s.splitText(o.offset)[0],_=o.offset===0?0:1,w=g.getIndexWithinParent()+_,S=s.getParentOrThrow(),E=[_f(),...f];S.splice(w,0,E);const A=f[f.length-1];A?A.select():o.offset===0?g.selectPrevious():g.getNextSibling().selectNext(0,0)}if(nF(s)){const{offset:u}=e.anchor;s.splice(u,0,[_f()]),s.select(u+1,u+1)}return null}canIndent(){return!1}collapseAtStart(){const e=mi();return this.getChildren().forEach((n=>e.append(n))),this.replace(e),!0}setLanguage(e){const n=this.getWritable();return n.__language=e||void 0,n}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(e){const n=this.getWritable();return n.__isSyntaxHighlightSupported=e,n}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(e){const n=this.getWritable();return n.__theme=e||void 0,n}getTheme(){return this.getLatest().__theme}}function Lg(t,e){return ECe(Dk).setLanguage(t).setTheme(e)}function nF(t){return t instanceof Dk}function HH(t){return{node:Lg(t.getAttribute(G2))}}function $Ge(t){const e=t,n=XH(e);return n||(function(r){let i=r.parentElement;for(;i!==null;){if(XH(i))return!0;i=i.parentElement}return!1})(e)?{node:n?Lg():null}:{node:null}}function zGe(){return{node:Lg()}}function GH(){return{node:null}}function XH(t){return t.style.fontFamily.match("monospace")!==null}function FL(t){return t.classList.contains("js-file-line-container")}let Ace=class Pce extends fm{constructor(e="",n,r){super(e,r),this.__highlightType=n}static getType(){return"code-highlight"}static clone(e){return new Pce(e.__text,e.__highlightType||void 0,e.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(e){const n=this.getWritable();return n.__highlightType=e||void 0,n}canHaveFormat(){return!1}createDOM(e){const n=super.createDOM(e),r=jL(e.theme,this.__highlightType);return xf(n,r),n}updateDOM(e,n,r){const i=super.updateDOM(e,n,r),o=jL(r.theme,e.__highlightType),a=jL(r.theme,this.__highlightType);return o!==a&&(o&&PR(n,o),a&&xf(n,a)),i}static importJSON(e){return Mce().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setHighlightType(e.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(e){return this}isParentRequired(){return!0}createParentElementNode(){return Lg()}};function jL(t,e){return e&&t&&t.codeHighlight&&t.codeHighlight[e]}function Mce(t="",e){return nh(new Ace(t,e))}function Rce(t){return t instanceof Ace}function NGe(t,e){let n=t;for(let r=Ks(t,e);r&&(Rce(r.origin)||gR(r.origin));r=XCe(r))n=r.origin;return n}function BGe(t){return NGe(t,"previous")}(function(t){t.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var e={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(e).forEach((function(n){var r=e[n],i=[];/^\w+$/.test(n)||i.push(/\w+/.exec(n)[0]),n==="diff"&&i.push("bold"),t.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:i,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}})),Object.defineProperty(t.languages.diff,"PREFIXES",{value:e})})(Prism);function y6(t,e){const n={};for(const r of t){const i=e(r);i&&(n[i]?n[i].push(r):n[i]=[r])}return n}function FGe(t){const e=y6(t,(n=>n.type));return{element:e.element||[],multilineElement:e["multiline-element"]||[],textFormat:e["text-format"]||[],textMatch:e["text-match"]||[]}}const YH=/[!-/:-@[-`{-~\s]/;function jGe(t){return hn(t)&&!t.hasFormat("code")}function VGe(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const i of e)r.append("v",i);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function KH(t,e,n){const r=n.length;for(let i=e;i>=r;i--){const o=i-r;if(Ice(t,o,n,0,r)&&t[o+r]!==" ")return o}return-1}function Ice(t,e,n,r,i){for(let o=0;o<i;o++)if(t[e+o]!==n[r+o])return!1;return!0}function QGe(t,e=Wce){const n=FGe(e),r=y6(n.textFormat,(({tag:a})=>a[a.length-1])),i=y6(n.textMatch,(({trigger:a})=>a));for(const a of e){const s=a.type;if(s==="element"||s==="text-match"||s==="multiline-element"){const u=a.dependencies;for(const f of u)t.hasNode(f)||VGe(173,f.getType())}}const o=(a,s,u)=>{(function(f,g,_,w){const S=f.getParent();if(!Ys(S)||f.getFirstChild()!==g)return!1;const E=g.getTextContent();if(E[_-1]!==" ")return!1;for(const{regExp:A,replace:R}of w){const $=E.match(A);if($&&$[0].length===($[0].endsWith(" ")?_:_-1)){const z=g.getNextSiblings(),[B,F]=g.splitText(_);if(R(f,F?[F,...z]:z,$,!1)!==!1)return B.remove(),!0}}return!1})(a,s,u,n.element)||(function(f,g,_,w){const S=f.getParent();if(!Ys(S)||f.getFirstChild()!==g)return!1;const E=g.getTextContent();if(E[_-1]!==" ")return!1;for(const{regExpStart:A,replace:R,regExpEnd:$}of w){if($&&!("optional"in $)||$&&"optional"in $&&!$.optional)continue;const z=E.match(A);if(z&&z[0].length===(z[0].endsWith(" ")?_:_-1)){const B=g.getNextSiblings(),[F,U]=g.splitText(_);if(R(f,U?[U,...B]:B,z,null,null,!1)!==!1)return F.remove(),!0}}return!1})(a,s,u,n.multilineElement)||(function(f,g,_){let w=f.getTextContent();const S=_[w[g-1]];if(S==null)return!1;g<w.length&&(w=w.slice(0,g));for(const E of S){if(!E.replace||!E.regExp)continue;const A=w.match(E.regExp);if(A===null)continue;const R=A.index||0,$=R+A[0].length;let z;return R===0?[z]=f.splitText($):[,z]=f.splitText(R,$),z.selectNext(0,0),E.replace(z,A),!0}return!1})(s,u,i)||(function(f,g,_){const w=f.getTextContent(),S=g-1,E=w[S],A=_[E];if(!A)return!1;for(const R of A){const{tag:$}=R,z=$.length,B=S-z+1;if(z>1&&!Ice(w,B,$,0,z)||w[B-1]===" ")continue;const F=w[S+1];if(R.intraword===!1&&F&&!YH.test(F))continue;const U=f;let q=U,H=KH(w,B,$),ne=q;for(;H<0&&(ne=ne.getPreviousSibling())&&!pf(ne);)if(hn(ne)){if(ne.hasFormat("code"))continue;const ke=ne.getTextContent();q=ne,H=KH(ke,ke.length,$)}if(H<0||q===U&&H+z===B)continue;const ie=q.getTextContent();if(H>0&&ie[H-1]===E)continue;const ce=ie[H-1];if(R.intraword===!1&&ce&&!YH.test(ce))continue;const xe=U.getTextContent(),re=xe.slice(0,B)+xe.slice(S+1);U.setTextContent(re);const me=q===U?re:ie;q.setTextContent(me.slice(0,H)+me.slice(H+z));const Te=sn(),ye=wO();rs(ye);const _e=S-z*(q===U?2:1)+1;ye.anchor.set(q.__key,H,"text"),ye.focus.set(U.__key,_e,"text");for(const ke of R.format)ye.hasFormat(ke)||ye.formatText(ke);ye.anchor.set(ye.focus.key,ye.focus.offset,ye.focus.type);for(const ke of R.format)ye.hasFormat(ke)&&ye.toggleFormat(ke);return Ht(Te)&&(ye.format=Te.format),!0}})(s,u,r)};return t.registerUpdateListener((({tags:a,dirtyLeaves:s,editorState:u,prevEditorState:f})=>{if(a.has(GY)||a.has(m5)||t.isComposing())return;const g=u.read(sn),_=f.read(sn);if(!Ht(_)||!Ht(g)||!g.isCollapsed()||g.is(_))return;const w=g.anchor.key,S=g.anchor.offset,E=u._nodeMap.get(w);!hn(E)||!s.has(w)||S!==1&&S>_.anchor.offset+1||t.update((()=>{if(!jGe(E))return;const A=E.getParent();A===null||nF(A)||o(A,E,g.anchor.offset)}))}))}const UGe=/^(\s*)(\d{1,})\.\s/,ZGe=/^(\s*)[-*+]\s/,qGe=/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,WGe=/^(#{1,6})\s/,HGe=/^>\s/,GGe=/^[ \t]*```([\w-]+)?/,XGe=/[ \t]*```$/,Dce=t=>(e,n,r,i)=>{const o=t(r);o.append(...n),e.replace(o),i||o.select(0,0)},rF=t=>(e,n,r,i)=>{const o=e.getPreviousSibling(),a=e.getNextSibling(),s=cc(t==="check"?r[3]==="x":void 0);if(tr(a)&&a.getListType()===t){const f=a.getFirstChild();f!==null?f.insertBefore(s):a.append(s),e.remove()}else if(tr(o)&&o.getListType()===t)o.append(s),e.remove();else{const f=ac(t,t==="number"?Number(r[2]):void 0);f.append(s),e.replace(f)}s.append(...n),i||s.select(0,0);const u=(function(f){const g=f.match(/\t/g),_=f.match(/ /g);let w=0;return g&&(w+=g.length),_&&(w+=Math.floor(_.length/4)),w})(r[1]);u&&s.setIndent(u)},RI=(t,e,n)=>{const r=[],i=t.getChildren();let o=0;for(const a of i)if(Sr(a)){if(a.getChildrenSize()===1){const g=a.getFirstChild();if(tr(g)){r.push(RI(g,e,n+1));continue}}const s=" ".repeat(4*n),u=t.getListType(),f=u==="number"?`${t.getStart()+o}. `:u==="check"?`- [${a.getChecked()?"x":" "}] `:"- ";r.push(s+f+e(a)),o++}return r.join(`
`)},YGe={dependencies:[ok],export:(t,e)=>{if(!Iw(t))return null;const n=Number(t.getTag().slice(1));return"#".repeat(n)+" "+e(t)},regExp:WGe,replace:Dce((t=>{const e="h"+t[1].length;return jp(e)})),type:"element"},Lce={dependencies:[MR],export:(t,e)=>{if(!e4(t))return null;const n=e(t).split(`
`),r=[];for(const i of n)r.push("> "+i);return r.join(`
`)},regExp:HGe,replace:(t,e,n,r)=>{if(r){const o=t.getPreviousSibling();if(e4(o))return o.splice(o.getChildrenSize(),0,[_f(),...e]),void t.remove()}const i=ik();i.append(...e),t.replace(i),r||i.select(0,0)},type:"element"},$ce={dependencies:[Dk],export:t=>{if(!nF(t))return null;const e=t.getTextContent();return"```"+(t.getLanguage()||"")+(e?`
`+e:"")+"\n```"},regExpEnd:{optional:!0,regExp:XGe},regExpStart:GGe,replace:(t,e,n,r,i,o)=>{let a,s;if(!e&&i){if(i.length===1)r?(a=Lg(),s=n[1]+i[0]):(a=Lg(n[1]),s=i[0].startsWith(" ")?i[0].slice(1):i[0]);else{if(a=Lg(n[1]),i[0].trim().length===0)for(;i.length>0&&!i[0].length;)i.shift();else i[0]=i[0].startsWith(" ")?i[0].slice(1):i[0];for(;i.length>0&&!i[i.length-1].length;)i.pop();s=i.join(`
`)}const u=Yi(s);a.append(u),t.append(a)}else e&&Dce((u=>Lg(u?u[1]:void 0)))(t,e,n,o)},type:"multiline-element"},zce={dependencies:[ay,sy],export:(t,e)=>tr(t)?RI(t,e,0):null,regExp:ZGe,replace:rF("bullet"),type:"element"},KGe={dependencies:[ay,sy],export:(t,e)=>tr(t)?RI(t,e,0):null,regExp:qGe,replace:rF("check"),type:"element"},Nce={dependencies:[ay,sy],export:(t,e)=>tr(t)?RI(t,e,0):null,regExp:UGe,replace:rF("number"),type:"element"},Bce={format:["code"],tag:"`",type:"text-format"},JGe={format:["highlight"],tag:"==",type:"text-format"},Fce={format:["bold","italic"],tag:"***",type:"text-format"},jce={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},Vce={format:["bold"],tag:"**",type:"text-format"},Qce={format:["bold"],intraword:!1,tag:"__",type:"text-format"},eXe={format:["strikethrough"],tag:"~~",type:"text-format"},Uce={format:["italic"],tag:"*",type:"text-format"},Zce={format:["italic"],intraword:!1,tag:"_",type:"text-format"},qce={dependencies:[oy],export:(t,e,n)=>{if(!Zc(t)||lf(t))return null;const r=t.getTitle(),i=e(t);return r?`[${i}](${t.getURL()} "${r}")`:`[${i}](${t.getURL()})`},importRegExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(t,e)=>{const[,n,r,i]=e,o=Hg(r,{title:i}),a=n.split("[").length-1,s=n.split("]").length-1;let u=n,f="";if(a<s)return;if(a>s){const _=n.split("[");f="["+_[0],u=_.slice(1).join("[")}const g=Yi(u);return g.setFormat(t.getFormat()),o.append(g),t.replace(o),f&&o.insertBefore(Yi(f)),g},trigger:")",type:"text-match"},tXe=[YGe,Lce,zce,Nce],nXe=[$ce],rXe=[Bce,Fce,jce,Vce,Qce,JGe,Uce,Zce,eXe],iXe=[qce],Wce=[...tXe,...nXe,...rXe,...iXe],oXe=[{dependencies:[hk],export:t=>P8(t)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(t,e,n,r)=>{const i=AO();r||t.getNextSibling()!=null?t.replace(i):t.insertBefore(i),i.selectNext()},type:"element"},...Wce];function JH({transformers:t=oXe}){const[e]=Ll();return Q.useEffect((()=>QGe(e,t)),[e,t]),null}const sXe=Dl({init(t){const e=t.getValue(C8),n=e.includes("headings")?t.getValue(UR):[],r=cXe(e,n);t.pubIn({[$b]:()=>se.createElement(JH,{transformers:r}),[S8]:()=>se.createElement(JH,{transformers:r})})}}),aXe=t=>(e,n,r)=>{const i=t(r);i.append(...n),e.replace(i),i.select(0,0)},lXe={dependencies:[hk],export:t=>P8(t)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(t,e,n,r)=>{const i=AO();r||t.getNextSibling()!=null?t.replace(i):t.insertBefore(i),i.selectNext()},type:"element"};function cXe(t,e){const n=[Fce,jce,Vce,Qce,Bce,Uce,Zce];if(t.includes("headings")){const r=Math.min(...e),i=Math.max(...e),o=new RegExp(`^(#{${r},${i}})\\s`),a={dependencies:[ok],export:(s,u)=>{if(!Iw(s))return null;const f=Number(s.getTag().slice(1));return"#".repeat(f)+" "+u(s)},regExp:o,replace:aXe(s=>{const u=`h${s[1].length}`;return jp(u)}),type:"element"};n.push(a)}if(t.includes("thematicBreak")&&n.push(lXe),t.includes("quote")&&n.push(Lce),t.includes("link")&&n.push(qce),t.includes("lists")&&n.push(Nce,zce,KGe),t.includes("codeblock")){const r={...$ce,dependencies:[DO],replace:(i,o,a)=>{const s=bk({code:"",language:a[1]??"",meta:""});i.selectPrevious(),i.replace(s),setTimeout(()=>{s.select()},80)}};n.push(r)}return n}const uXe=()=>{const t=Ri(T5),e=Es(UJ),n=Es(C8),r=n.includes("quote"),i=n.includes("headings"),o=xs();if(!r&&!i)return null;const a=[{label:o("toolbar.blockTypes.paragraph","Paragraph"),value:"paragraph"}];if(r&&a.push({label:o("toolbar.blockTypes.quote","Quote"),value:"quote"}),i){const s=Es(UR);a.push(...s.map(u=>({label:o("toolbar.blockTypes.heading","Heading {{level}}",{level:u}),value:`h${u}`})))}return se.createElement(yle,{value:e,onChange:s=>{switch(s){case"quote":t(()=>ik());break;case"paragraph":t(()=>mi());break;case"":break;default:if(s.startsWith("h"))t(()=>jp(s));else throw new Error(`Unknown block type: ${s}`)}},triggerTitle:o("toolbar.blockTypeSelect.selectBlockTypeTooltip","Select block type"),placeholder:o("toolbar.blockTypeSelect.placeholder","Block type"),items:a})},VL=({format:t,addTitle:e,removeTitle:n,icon:r,formatName:i})=>{const[o,a]=Wo(y8,Ms),s=Ri(v8),u=(o&t)!==0;return se.createElement(Ple,{title:u?n:e,on:u,onValueChange:()=>{s(i)}},a(r))},hXe=({options:t})=>{const e=xs(),n=typeof t>"u";return se.createElement("div",{className:jt.toolbarGroupOfGroups},n||t.includes("Bold")?se.createElement(VL,{format:cC,addTitle:e("toolbar.bold","Bold"),removeTitle:e("toolbar.removeBold","Remove bold"),icon:"format_bold",formatName:"bold"}):null,n||t.includes("Italic")?se.createElement(VL,{format:uC,addTitle:e("toolbar.italic","Italic"),removeTitle:e("toolbar.removeItalic","Remove italic"),icon:"format_italic",formatName:"italic"}):null,n||t.includes("Underline")?se.createElement(VL,{format:hC,addTitle:e("toolbar.underline","Underline"),removeTitle:e("toolbar.removeUnderline","Remove underline"),icon:"format_underlined",formatName:"underline"}):null)};function dXe(t){return{note:t("admonitions.note","Note"),tip:t("admonitions.tip","Tip"),danger:t("admonitions.danger","Danger"),info:t("admonitions.info","Info"),caution:t("admonitions.caution","Caution")}}const fXe=()=>{const[t,e]=Wo(y8,Ms),n=Ri(v8),r=xs(),i=(t&LR)!==0,o=i?r("toolbar.removeInlineCode","Remove code format"):r("toolbar.inlineCode","Inline code format");return se.createElement(Mle,{items:[{title:o,contents:e("code"),active:i,onChange:n.bind(null,"code")}]})},pXe=()=>{const t=Ri(U9),e=Es(Ms),n=xs();return se.createElement(Ik,{"aria-label":n("toolbar.link","Create link"),title:n("toolbar.link","Create link"),onClick:r=>{t()}},e("link"))},mXe=()=>{const t=Ri(vle),e=Es(Ms),n=xs(),r=se.useMemo(()=>{const i=dXe(n);return _le.map(o=>({value:o,label:i[o]}))},[n]);return se.createElement(bHe,{title:n("toolbar.admonition","Insert Admonition"),onChoose:i=>{t({type:"containerDirective",name:i})},items:r},e("admonition"))},gXe=()=>{const t=Ri(LB),e=Es(Ms),n=xs();return se.createElement(Ik,{title:n("toolbar.codeBlock","Insert Code Block"),onClick:()=>{t({})}},e("frame_source"))},yXe=se.forwardRef((t,e)=>{const n=Ri(Mne),[r,i]=Wo(Ma,Ms),o=xs();return se.createElement(A0,{className:jt.toolbarButton,ref:e,disabled:r,onClick:()=>{n()}},se.createElement(ZO,{title:o("toolbar.image","Insert image")},i("add_photo")))}),Hce=kn(!1,t=>{t.link(t.pipe(zo,Ug(e=>{var n,r;return["td","th"].includes(((r=(n=e?.getRootElement())==null?void 0:n.parentNode)==null?void 0:r.nodeName.toLowerCase())??"")})),Hce)}),vXe=()=>{const t=Es(Ms),e=Ri(Pte),n=xs(),r=Es(Hce);return se.createElement(Ik,{title:n("toolbar.table","Insert Table"),onClick:()=>{e({rows:3,columns:3})},...r?{"aria-disabled":!0,"data-disabled":!0,disabled:!0}:{}},t("table"))},_Xe=()=>{const t=Ri(uee),e=Es(Ms),n=xs();return se.createElement(Ik,{title:n("toolbar.thematicBreak","Insert thematic break"),onClick:()=>{t()}},e("horizontal_rule"))},bXe={bullet:"format_list_bulleted",number:"format_list_numbered",check:"format_list_checked"},xXe=({options:t=["bullet","number","check"]})=>{const[e,n]=Wo(S4,Ms),r=Ri(hee),i=xs(),o={bullet:i("toolbar.bulletedList","Bulleted list"),number:i("toolbar.numberedList","Numbered list"),check:i("toolbar.checkList","Check list")},a=t.map(s=>({value:s,title:o[s],contents:n(bXe[s])}));return se.createElement(_He,{value:e||"",items:a,onChange:r})},wXe=()=>{const[t,e]=Wo(Ms,zo),[n,r]=se.useState(!1),[i,o]=se.useState(!1),a=xs();return se.useEffect(()=>{if(e)return $l(e.registerCommand(N2,s=>(r(s),!1),eh),e.registerCommand(z2,s=>(o(s),!1),eh))},[e]),se.createElement(Mle,{items:[{title:a("toolbar.undo","Undo {{shortcut}}",{shortcut:A5?"Z":"Ctrl+Z"}),disabled:!n,contents:t("undo"),active:!1,onChange:()=>e?.dispatchCommand(aR,void 0)},{title:a("toolbar.redo","Redo {{shortcut}}",{shortcut:A5?"Y":"Ctrl+Y"}),disabled:!i,contents:t("redo"),active:!1,onChange:()=>e?.dispatchCommand(lR,void 0)}]})},OXe=({posts:t,onPostClick:e})=>{const n=Q.useMemo(()=>{const i=[...t].sort((a,s)=>new Date(s.created_date).getTime()-new Date(a.created_date).getTime()),o={};return i.forEach(a=>{const s=new Date(a.created_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});o[s]||(o[s]=[]),o[s].push(a)}),o},[t]),r=Object.keys(n);return t.length===0?J.jsx(er,{sx:{py:4,textAlign:"center"},children:J.jsx(br,{color:"text.secondary",children:"No blog posts found."})}):J.jsx(er,{children:J.jsx(mO,{sx:{width:"100%",bgcolor:"background.paper"},children:r.map(i=>J.jsxs(er,{sx:{mb:2},children:[J.jsx(h$,{component:"div",sx:{bgcolor:"grey.50",fontWeight:"bold",borderRadius:1,mb:1,lineHeight:"40px"},children:i}),n[i].map(o=>J.jsx(hc,{elevation:0,sx:{mb:1,border:"1px solid",borderColor:"divider",borderRadius:2,"&:hover":{bgcolor:"action.hover",cursor:e?"pointer":"default"}},onClick:()=>e?.(o),children:J.jsxs(GP,{alignItems:"flex-start",children:[J.jsx(kbe,{children:J.jsx(eR,{alt:o.author?.display_name||o.author_id,src:o.author?.avatar_url||"",children:(o.author?.display_name||o.author_id)[0].toUpperCase()})}),J.jsx(Tw,{primary:J.jsxs(er,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[J.jsx(br,{variant:"h6",component:"span",sx:{fontWeight:600},children:o.title}),J.jsx(br,{variant:"caption",color:"text.secondary",children:new Date(o.created_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),secondary:J.jsxs(er,{sx:{mt:1},children:[J.jsxs(br,{variant:"body2",color:"text.primary",sx:{mb:1,fontWeight:500},children:["by ",o.author?.display_name||o.author_id]}),J.jsx(er,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:o.tags?.map(a=>J.jsx(qP,{label:a,size:"small",variant:"outlined",sx:{borderRadius:1}},a))})]})})]})},o.id))]},i))})})},SXe=`
# Our Travel Story

Welcome to our blog! This is where we will share the most memorable moments from our trip across the Pacific.

## Recent Highlights
- **Tokyo**: The vibrant energy of Shinjuku was incredible.
- **Bora Bora**: Most beautiful water we've ever seen.
- **Sydney**: Watching the sunset over the Opera House.

Stay tuned for more updates!
`,CXe=()=>{const{user:t,role:e}=yO(),[n,r]=Q.useState([]),[i,o]=Q.useState(!0),[a,s]=Q.useState(null),[u,f]=Q.useState(SXe),[g,_]=Q.useState(""),[w,S]=Q.useState([]),[E,A]=Q.useState(null),[R,$]=Q.useState(null),[z,B]=Q.useState(""),[F,U]=Q.useState(!1),[q,H]=Q.useState("list"),[ne,ie]=Uhe(),ce=async()=>{o(!0);const{data:ke,error:Ne}=await Si.from("blog_post").select("*").order("created_date",{ascending:!1});if(Ne){s(Ne.message),o(!1);return}if(ke&&ke.length>0){const Qe=[...new Set(ke.map(Xe=>Xe.author_id))],{data:Se,error:Me}=await Si.from("user_profile").select("*").in("id",Qe);if(Me)console.error("Error fetching profiles:",Me),r(ke);else{const Xe=(Se||[]).reduce((ft,mt)=>(ft[mt.id]=mt,ft),{}),Ee=ke.map(ft=>({...ft,author:Xe[ft.author_id]}));r(Ee)}}else r([]);o(!1)};se.useEffect(()=>{ce()},[]),se.useEffect(()=>{const ke=ne.get("id");if(ke&&n.length>0){const Ne=n.find(Qe=>Qe.id===ke);Ne&&(f(Ne.content||""),_(Ne.title),S(Ne.tags||[]),A(Ne.id),$(Ne.author||null),H("post"),U(!1))}},[ne,n]);const xe=ke=>{f(ke.content||""),_(ke.title),S(ke.tags||[]),A(ke.id),$(ke.author||null),H("post"),U(!1)},re=()=>{f(`# New Story

Start writing here...`),_(""),S([]),A(null),$(null),H("post"),U(!0)},me=async()=>{if(!t){s("You must be logged in to save posts.");return}if(!g.trim()){s("Please provide a title for your story.");return}const ke={title:g,content:u,tags:w,author_id:t.id,last_modified_date:new Date,visible:!0};let Ne;E?Ne=await Si.from("blog_post").update(ke).eq("id",E):(Ne=await Si.from("blog_post").insert([{...ke,created_date:new Date}]).select(),!Ne.error&&Ne.data&&A(Ne.data[0].id)),Ne.error?s(Ne.error.message):(s(null),U(!1),ce())},Te=async ke=>{if(!t)throw new Error("You must be logged in to upload images");const Ne=ke.name.split(".").pop(),Se=`${`${t.id}/${Date.now()}.${Ne}`}`,{error:Me}=await Si.storage.from("blog-images").upload(Se,ke);if(Me)throw Me;const{data:{publicUrl:Xe}}=Si.storage.from("blog-images").getPublicUrl(Se);return Xe},ye=ke=>{ke.key==="Enter"&&z.trim()&&(w.includes(z.trim())||S([...w,z.trim()]),B(""),ke.preventDefault())},_e=ke=>{S(w.filter(Ne=>Ne!==ke))};return J.jsxs(er,{sx:{p:4,maxWidth:1200,mx:"auto"},children:[J.jsxs(er,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:2,position:"sticky",top:0,zIndex:10,backgroundColor:"background.default",pb:2,pt:1},children:[J.jsxs(er,{children:[J.jsx(br,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:q==="list"?"Trip Stories":g||"New Story"}),q==="list"&&J.jsx(br,{variant:"body1",color:"text.secondary",children:"Detailed accounts and personal experiences from our journey."})]}),J.jsxs(er,{sx:{display:"flex",gap:2,mt:1},children:[q==="list"&&(e==="admin"||e==="editor")&&J.jsx(Zs,{variant:"contained",startIcon:J.jsx(oY,{}),onClick:re,sx:{borderRadius:2,textTransform:"none",px:3},children:"Create New Story"}),q==="post"&&J.jsx(Zs,{variant:"outlined",startIcon:J.jsx(_Se,{}),onClick:()=>{H("list"),ie({})},sx:{borderRadius:2,textTransform:"none",px:3},children:"Back to List"}),q==="post"&&R?.id===t?.id&&J.jsxs(J.Fragment,{children:[J.jsx(Zs,{variant:"contained",startIcon:F?J.jsx(OSe,{}):J.jsx(mSe,{}),onClick:()=>U(!F),sx:{borderRadius:2,textTransform:"none",px:3,backgroundColor:F?"success.main":"primary.main","&:hover":{backgroundColor:F?"success.dark":"primary.dark"}},children:F?"View Mode":"Edit Mode"}),F&&J.jsx(Zs,{variant:"contained",color:"primary",startIcon:J.jsx(wN,{}),onClick:me,sx:{borderRadius:2,textTransform:"none",px:3},children:"Save Story"})]})]})]}),a&&J.jsx(Z_,{severity:"error",sx:{mb:3,borderRadius:2},children:a}),i?J.jsx(er,{sx:{display:"flex",justifyContent:"center",py:8},children:J.jsx(Ku,{})}):q==="list"?J.jsx(OXe,{posts:n,onPostClick:xe}):J.jsxs(hc,{elevation:3,sx:{p:3,borderRadius:3,minHeight:"600px"},children:[F?J.jsxs(Ng,{spacing:3,sx:{mb:4},children:[J.jsx(Gp,{fullWidth:!0,label:"Story Title",variant:"outlined",value:g,onChange:ke=>_(ke.target.value),slotProps:{input:{style:{fontSize:"1.5rem",fontWeight:"bold"}}}}),J.jsxs(er,{children:[J.jsx(Gp,{fullWidth:!0,label:"Add Tags (Press Enter)",variant:"outlined",value:z,onChange:ke=>B(ke.target.value),onKeyDown:ye,placeholder:"e.g. Sydney, Adventure"}),J.jsx(Ng,{direction:"row",spacing:1,sx:{mt:1,flexWrap:"wrap",gap:1},children:w.map(ke=>J.jsx(qP,{label:ke,onDelete:()=>_e(ke),color:"primary",variant:"outlined"},ke))})]})]}):J.jsxs(er,{sx:{mb:4},children:[J.jsxs(er,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[J.jsx(eR,{src:R?.avatar_url||"",alt:R?.display_name||"Author",sx:{width:40,height:40},children:(R?.display_name||"A")[0].toUpperCase()}),J.jsxs(er,{children:[J.jsx(br,{variant:"subtitle2",fontWeight:"bold",children:R?.display_name||"Unknown Author"}),J.jsxs(br,{variant:"caption",color:"text.secondary",children:["Post created on ",n.find(ke=>ke.id===E)?.created_date?new Date(n.find(ke=>ke.id===E).created_date).toLocaleDateString():"Unknown Date"]})]})]}),J.jsx(Ng,{direction:"row",spacing:1,sx:{mb:2},children:w.map(ke=>J.jsx(qP,{label:ke,size:"small"},ke))})]}),J.jsx(er,{sx:{"& .mdxeditor":{fontSize:"1.1rem",lineHeight:1.6}},children:J.jsx(JRe,{markdown:u,onChange:f,readOnly:!F,contentEditableClassName:"prose max-w-none",plugins:[oIe(),TIe(),_8e(),hIe(),sXe(),j$e(),mHe(),T$e(),wze({imageUploadHandler:Te}),R8e({defaultCodeBlockLanguage:"js"}),wWe({codeBlockLanguages:{js:"JavaScript",css:"CSS",html:"HTML"}}),hHe({directiveDescriptors:[dHe]}),AGe({viewMode:"rich-text",diffMarkdown:u}),g8e(),...F?[xHe({toolbarContents:()=>J.jsxs(J.Fragment,{children:[J.jsx(wXe,{}),J.jsx(T1,{}),J.jsx(uXe,{}),J.jsx(T1,{}),J.jsx(hXe,{}),J.jsx(fXe,{}),J.jsx(T1,{}),J.jsx(xXe,{}),J.jsx(T1,{}),J.jsx(pXe,{}),J.jsx(yXe,{}),J.jsx(T1,{}),J.jsx(vXe,{}),J.jsx(_Xe,{}),J.jsx(T1,{}),J.jsx(gXe,{}),J.jsx(mXe,{})]})})]:[]]},`${E||"new"}-${F}`)})]})]})},TXe=()=>{const[t,e]=Q.useState([]),[n,r]=Q.useState(!0),[i,o]=Q.useState(null),a=async()=>{try{r(!0);const[s,u,f]=await Promise.all([Si.from("check_in").select("*").order("created_at",{ascending:!1}).limit(10),Si.from("blog_post").select("*").order("created_date",{ascending:!1}).limit(10),Si.from("photo_album").select("*").order("created_at",{ascending:!1}).limit(10)]),g=[...(s.data||[]).map(_=>({id:`checkin-${_.id}`,type:"check-in",title:_.message||`Checked in: ${_.status}`,description:"Status update from the map.",date:new Date(_.created_at),icon:J.jsx(dN,{color:"primary",sx:{fontSize:32}})})),...(u.data||[]).map(_=>({id:`blog-${_.id}`,type:"blog",title:_.title,description:"New blog post published.",date:new Date(_.created_date),icon:J.jsx(fN,{color:"secondary",sx:{fontSize:32}}),link:`/blog?id=${_.id}`})),...(f.data||[]).map(_=>({id:`photo-${_.id}`,type:"photo",title:_.title,description:"New photo album shared.",date:new Date(_.created_at),icon:J.jsx(IC,{sx:{color:"#10b981",fontSize:32}}),link:_.icloud_link,external:!0}))].sort((_,w)=>w.date.getTime()-_.date.getTime());e(g)}catch(s){o(s.message)}finally{r(!1)}};return Q.useEffect(()=>{a()},[]),n?J.jsx(er,{sx:{display:"flex",justifyContent:"center",py:8},children:J.jsx(Ku,{})}):J.jsxs(Cw,{maxWidth:"md",sx:{py:4},children:[J.jsxs(er,{sx:{mb:4,textAlign:"center"},children:[J.jsx(br,{variant:"h3",fontWeight:"bold",gutterBottom:!0,children:"Latest Updates"}),J.jsx(br,{variant:"body1",color:"text.secondary",children:"Stay up to date with the latest stories, check-ins, and photos from our journey."})]}),i&&J.jsxs(Z_,{severity:"error",sx:{mb:4,borderRadius:2},children:["Error loading updates: ",i]}),J.jsx(hc,{elevation:2,sx:{borderRadius:3,overflow:"hidden"},children:J.jsx(mO,{sx:{p:0},children:t.length>0?t.map((s,u)=>J.jsxs(se.Fragment,{children:[J.jsx(GP,{disablePadding:!0,children:J.jsxs(sN,{component:s.link?s.external?"a":sf:"div",...s.link?s.external?{href:s.link,target:"_blank",rel:"noopener noreferrer"}:{to:s.link}:{},sx:{py:3,px:4,cursor:s.link?"pointer":"default","&:hover":s.link?{}:{backgroundColor:"transparent"}},children:[J.jsx(MX,{sx:{minWidth:60},children:s.icon}),J.jsx(Tw,{primary:s.title,secondary:J.jsxs(er,{sx:{mt:.5},children:[J.jsx(br,{variant:"body2",color:"text.secondary",children:s.description}),J.jsxs(br,{variant:"caption",sx:{mt:1,display:"block",fontStyle:"italic"},children:[iY(s.date,{addSuffix:!0}),"  ",s.date.toLocaleDateString()]})]}),primaryTypographyProps:{variant:"h6",fontWeight:"bold"}})]})}),u<t.length-1&&J.jsx(df,{})]},s.id)):J.jsx(er,{sx:{py:8,textAlign:"center"},children:J.jsx(br,{color:"text.secondary",children:"No updates found."})})})})]})},kXe=()=>{const{user:t,refreshProfile:e}=yO(),[n,r]=Q.useState(!0),[i,o]=Q.useState(!1),[a,s]=Q.useState(null),[u,f]=Q.useState(!1),[g,_]=Q.useState(""),[w,S]=Q.useState(""),[E,A]=Q.useState(""),[R,$]=Q.useState(!0);Q.useEffect(()=>{t&&z()},[t]);const z=async()=>{if(t)try{r(!0);const{data:F,error:U}=await Si.from("user_profile").select("*").eq("id",t.id).single();if(U){if(U.code!=="PGRST116")throw U}else F&&(_(F.display_name||""),S(F.avatar_url||""),A(F.bio||""),$(F.is_public??!0))}catch(F){s(F.message)}finally{r(!1)}},B=async F=>{if(F.preventDefault(),!!t)try{o(!0),s(null),f(!1);const U={id:t.id,display_name:g,avatar_url:w,bio:E,is_public:R,updated_at:new Date},{error:q}=await Si.from("user_profile").upsert(U);if(q)throw q;await e(),f(!0)}catch(U){s(U.message)}finally{o(!1)}};return n?J.jsx(er,{sx:{display:"flex",justifyContent:"center",py:8},children:J.jsx(Ku,{})}):t?J.jsx(Cw,{maxWidth:"md",sx:{py:4},children:J.jsxs(hc,{elevation:3,sx:{p:4,borderRadius:3},children:[J.jsx(er,{sx:{mb:4,textAlign:"center"},children:J.jsxs(Ng,{direction:"row",spacing:3,alignItems:"center",justifyContent:"center",children:[J.jsx(eR,{src:w||t.user_metadata?.avatar_url,sx:{width:100,height:100,boxShadow:3},children:J.jsx(xSe,{sx:{fontSize:60}})}),J.jsxs(er,{sx:{textAlign:"left"},children:[J.jsx(br,{variant:"h4",fontWeight:"bold",children:g||"Your Profile"}),J.jsx(br,{variant:"body2",color:"text.secondary",children:t.email})]})]})}),J.jsx(df,{sx:{mb:4}}),a&&J.jsx(Z_,{severity:"error",sx:{mb:3},children:a}),u&&J.jsx(Z_,{severity:"success",sx:{mb:3},children:"Profile updated successfully!"}),J.jsxs(er,{component:"form",onSubmit:B,children:[J.jsxs(A_,{container:!0,spacing:3,children:[J.jsx(A_,{size:{xs:12,sm:6},children:J.jsx(Gp,{fullWidth:!0,label:"Display Name",value:g,onChange:F=>_(F.target.value),placeholder:"Public name"})}),J.jsx(A_,{size:{xs:12},children:J.jsx(Gp,{fullWidth:!0,label:"Avatar URL",value:w,onChange:F=>S(F.target.value),placeholder:"https://example.com/avatar.jpg"})}),J.jsx(A_,{size:{xs:12},children:J.jsx(Gp,{fullWidth:!0,label:"Bio",multiline:!0,rows:4,value:E,onChange:F=>A(F.target.value),placeholder:"Tell us about yourself..."})}),J.jsxs(A_,{size:{xs:12},children:[J.jsx(iN,{control:J.jsx(uN,{checked:R,onChange:F=>$(F.target.checked),color:"primary"}),label:"Public Profile"}),J.jsx(br,{variant:"caption",color:"text.secondary",sx:{display:"block",ml:1},children:"When public, others can see your stories and photos."})]})]}),J.jsx(er,{sx:{mt:4,display:"flex",justifyContent:"flex-end"},children:J.jsx(Zs,{type:"submit",variant:"contained",size:"large",startIcon:i?J.jsx(Ku,{size:20,color:"inherit"}):J.jsx(wN,{}),disabled:i,sx:{borderRadius:2,px:4},children:i?"Saving...":"Save Profile"})})]})]})}):J.jsx(Cw,{maxWidth:"sm",sx:{py:8},children:J.jsx(Z_,{severity:"warning",children:"Please login to view and edit your profile."})})},EXe=()=>{const[t,e]=Q.useState(""),[n,r]=Q.useState(""),[i,o]=Q.useState(!1),[a,s]=Q.useState(!1),[u,f]=Q.useState(null),[g,_]=Q.useState(!1),w=$T(),S=async A=>{A.preventDefault(),o(!0),f(null);try{if(g){const{error:R}=await Si.auth.signUp({email:t,password:n});if(R)throw R;f("Check your email for the confirmation link!")}else{const{error:R}=await Si.auth.signInWithPassword({email:t,password:n});if(R)throw R;w("/")}}catch(R){f(R.message)}finally{o(!1)}},E=async()=>{try{s(!0);const{error:A}=await Si.auth.signInWithOAuth({provider:"apple",options:{redirectTo:window.location.origin}});if(A)throw A}catch(A){f(A.message),s(!1)}};return J.jsx(er,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999},children:J.jsx(Cw,{maxWidth:"sm",children:J.jsx(er,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:J.jsxs(hc,{elevation:24,sx:{p:{xs:3,sm:6},width:"100%",borderRadius:4,bgcolor:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[J.jsx(br,{variant:"h3",align:"center",gutterBottom:!0,sx:{fontWeight:800,color:"#1a1a1a",mb:1,letterSpacing:"-0.02em"},children:"Pacific Trip"}),J.jsx(br,{variant:"body1",align:"center",color:"text.secondary",sx:{mb:5,fontWeight:500},children:g?"Join our private family travel journal":"Welcome back to our journey"}),u&&J.jsx(Z_,{severity:u.includes("email")?"success":"error",sx:{mb:4,borderRadius:2},children:u}),J.jsx(Ng,{spacing:2,sx:{mb:4},children:J.jsx(Zs,{fullWidth:!0,variant:"outlined",startIcon:J.jsx(pSe,{}),onClick:E,disabled:a||i,sx:{height:56,borderRadius:2,textTransform:"none",fontSize:"1rem",fontWeight:600,color:"white",bgcolor:"#000","&:hover":{bgcolor:"#333",borderColor:"#000"}},children:a?J.jsx(Ku,{size:24,color:"inherit"}):"Continue with Apple"})}),J.jsx(df,{sx:{mb:4},children:J.jsx(br,{variant:"body2",color:"text.secondary",sx:{px:2,fontWeight:600},children:"OR"})}),J.jsxs("form",{onSubmit:S,children:[J.jsx(Gp,{label:"Email address",variant:"outlined",fullWidth:!0,margin:"normal",required:!0,value:t,onChange:A=>e(A.target.value),slotProps:{input:{sx:{borderRadius:2}}}}),J.jsx(Gp,{label:"Password",type:"password",variant:"outlined",fullWidth:!0,margin:"normal",required:!0,value:n,onChange:A=>r(A.target.value),slotProps:{input:{sx:{borderRadius:2}}}}),J.jsx(Zs,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:i||a,sx:{mt:4,mb:2,height:56,borderRadius:2,textTransform:"none",fontSize:"1.1rem",fontWeight:700,boxShadow:"0 8px 16px rgba(0,0,0,0.1)"},children:i?J.jsx(Ku,{size:24,color:"inherit"}):g?"Create Account":"Sign In"})]}),J.jsx(er,{sx:{mt:3,textAlign:"center"},children:J.jsxs(br,{variant:"body2",color:"text.secondary",children:[g?"Already have an account?":"New to the journal?",J.jsx(Zs,{variant:"text",onClick:()=>_(!g),sx:{textTransform:"none",fontWeight:700,ml:1,color:"primary.main"},children:g?"Log In":"Sign Up"})]})})]})})})})},AXe=()=>J.jsx(er,{sx:{p:3,mt:8},children:J.jsxs(hc,{elevation:3,sx:{p:4},children:[J.jsx(br,{variant:"h4",component:"h1",gutterBottom:!0,children:"Admin Dashboard"}),J.jsx(br,{variant:"body1",children:"Welcome to the admin area. This is a placeholder for future administrative features."})]})});function PXe(){const t=Q.useRef(null),e=um(),{user:n,loading:r,latestCheckIn:i,visitedStops:o,role:a,signOut:s,refreshRole:u}=yO(),[f,g]=Q.useState(!1),_=Q.useCallback(E=>{t.current&&t.current.flyTo({center:[Ih(E.geolocation[0]),E.geolocation[1]],zoom:10,essential:!0})},[]),w=Q.useCallback(E=>{if(t.current&&E.children.length>0){const A=new wG.LngLatBounds;E.children.forEach(R=>{R.category==="Stop"?A.extend([Ih(R.geolocation[0]),R.geolocation[1]]):R.category==="Trip"&&R.geometricShape.coordinates.forEach($=>{A.extend([Ih($[0]),$[1]])})}),t.current.fitBounds(A,{padding:50,maxZoom:10,essential:!0})}},[]),S=async()=>{g(!0),await u(),g(!1)};return r?J.jsx(er,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"background.default"},children:J.jsx(Ku,{})}):n?a?J.jsx(kSe,{onStopClick:_,onSectionClick:w,activeKey:i?.status,visitedStops:o,children:J.jsxs(RF,{children:[J.jsx(kp,{path:"/",element:J.jsx(fhe,{to:"/blog",replace:!0})}),J.jsx(kp,{path:"/map",element:J.jsx(er,{sx:{display:e.pathname==="/"||e.pathname==="/map"?"block":"none",height:"100%"},children:J.jsx(lY,{ref:t,items:_N})})}),J.jsx(kp,{path:"/photos",element:J.jsx(d2e,{})}),J.jsx(kp,{path:"/blog",element:J.jsx(CXe,{})}),J.jsx(kp,{path:"/updates",element:J.jsx(TXe,{})}),J.jsx(kp,{path:"/profile",element:J.jsx(kXe,{})}),J.jsx(kp,{path:"/admin",element:J.jsx(AXe,{})}),J.jsx(kp,{path:"*",element:null})]})}):J.jsx(Cw,{maxWidth:"sm",sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh"},children:J.jsxs(hc,{elevation:3,sx:{p:4,textAlign:"center",borderRadius:2},children:[J.jsx(br,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"Access Pending"}),J.jsx(br,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Your account is currently pending approval. Please wait for an administrator to assign you a role before you can access the application."}),J.jsxs(Ng,{direction:"row",spacing:2,justifyContent:"center",sx:{mt:2},children:[J.jsx(Zs,{variant:"outlined",onClick:S,disabled:f,startIcon:f?J.jsx(Ku,{size:20}):null,children:f?"Checking...":"Check Again"}),J.jsx(Zs,{variant:"contained",color:"primary",onClick:s,children:"Sign Out"})]})]})}):J.jsx(RF,{children:J.jsx(kp,{path:"*",element:J.jsx(EXe,{})})})}yue.createRoot(document.getElementById("root")).render(J.jsx(Q.StrictMode,{children:J.jsx(Bhe,{children:J.jsx(bOe,{children:J.jsx(PXe,{})})})}));export{Ose as C,rh as E,Mi as I,Gw as L,ioe as N,Kw as a,Yw as b,LP as c,K7e as d,Roe as e,FO as f,Ji as g,m7e as h,BO as i,g7e as j,doe as k,mM as l,Qc as m,un as n,Ft as o,cae as p,ooe as q,Ase as r,NO as s,Be as t,Coe as u,Gh as v};
