const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dockerfile-BKs6k2Af.js","assets/simple-mode-GW_nhZxv.js","assets/factor-kuTfRLto.js","assets/nsis-LdVXkNf5.js","assets/pug-DeIclll2.js","assets/javascript-iXu5QeM3.js"])))=>i.map(i=>d[i]);
function XX(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var D7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jD={exports:{}},k2={};var L7;function $de(){if(L7)return k2;L7=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var a=null;if(o!==void 0&&(a=""+o),i.key!==void 0&&(a=""+i.key),"key"in i){o={};for(var s in i)s!=="key"&&(o[s]=i[s])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:a,ref:i!==void 0?i:null,props:o}}return k2.Fragment=e,k2.jsx=n,k2.jsxs=n,k2}var $7;function zde(){return $7||($7=1,jD.exports=$de()),jD.exports}var q=zde(),VD={exports:{}},kr={};var z7;function Nde(){if(z7)return kr;z7=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function O(Ae){return Ae===null||typeof Ae!="object"?null:(Ae=_&&Ae[_]||Ae["@@iterator"],typeof Ae=="function"?Ae:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,M={};function L(Ae,Xe,ke){this.props=Ae,this.context=Xe,this.refs=M,this.updater=ke||E}L.prototype.isReactComponent={},L.prototype.setState=function(Ae,Xe){if(typeof Ae!="object"&&typeof Ae!="function"&&Ae!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ae,Xe,"setState")},L.prototype.forceUpdate=function(Ae){this.updater.enqueueForceUpdate(this,Ae,"forceUpdate")};function $(){}$.prototype=L.prototype;function N(Ae,Xe,ke){this.props=Ae,this.context=Xe,this.refs=M,this.updater=ke||E}var F=N.prototype=new $;F.constructor=N,A(F,L.prototype),F.isPureReactComponent=!0;var Q=Array.isArray;function W(){}var H={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function ne(Ae,Xe,ke){var ft=ke.ref;return{$$typeof:t,type:Ae,key:Xe,ref:ft!==void 0?ft:null,props:ke}}function ce(Ae,Xe){return ne(Ae.type,Xe,Ae.props)}function we(Ae){return typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===t}function re(Ae){var Xe={"=":"=0",":":"=2"};return"$"+Ae.replace(/[=:]/g,function(ke){return Xe[ke]})}var se=/\/+/g;function be(Ae,Xe){return typeof Ae=="object"&&Ae!==null&&Ae.key!=null?re(""+Ae.key):Xe.toString(36)}function fe(Ae){switch(Ae.status){case"fulfilled":return Ae.value;case"rejected":throw Ae.reason;default:switch(typeof Ae.status=="string"?Ae.then(W,W):(Ae.status="pending",Ae.then(function(Xe){Ae.status==="pending"&&(Ae.status="fulfilled",Ae.value=Xe)},function(Xe){Ae.status==="pending"&&(Ae.status="rejected",Ae.reason=Xe)})),Ae.status){case"fulfilled":return Ae.value;case"rejected":throw Ae.reason}}throw Ae}function ve(Ae,Xe,ke,ft,pt){var lt=typeof Ae;(lt==="undefined"||lt==="boolean")&&(Ae=null);var ot=!1;if(Ae===null)ot=!0;else switch(lt){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(Ae.$$typeof){case t:case e:ot=!0;break;case m:return ot=Ae._init,ve(ot(Ae._payload),Xe,ke,ft,pt)}}if(ot)return pt=pt(Ae),ot=ft===""?"."+be(Ae,0):ft,Q(pt)?(ke="",ot!=null&&(ke=ot.replace(se,"$&/")+"/"),ve(pt,Xe,ke,"",function(Tt){return Tt})):pt!=null&&(we(pt)&&(pt=ce(pt,ke+(pt.key==null||Ae&&Ae.key===pt.key?"":(""+pt.key).replace(se,"$&/")+"/")+ot)),Xe.push(pt)),1;ot=0;var yt=ft===""?".":ft+":";if(Q(Ae))for(var Et=0;Et<Ae.length;Et++)ft=Ae[Et],lt=yt+be(ft,Et),ot+=ve(ft,Xe,ke,lt,pt);else if(Et=O(Ae),typeof Et=="function")for(Ae=Et.call(Ae),Et=0;!(ft=Ae.next()).done;)ft=ft.value,lt=yt+be(ft,Et++),ot+=ve(ft,Xe,ke,lt,pt);else if(lt==="object"){if(typeof Ae.then=="function")return ve(fe(Ae),Xe,ke,ft,pt);throw Xe=String(Ae),Error("Objects are not valid as a React child (found: "+(Xe==="[object Object]"?"object with keys {"+Object.keys(Ae).join(", ")+"}":Xe)+"). If you meant to render a collection of children, use an array instead.")}return ot}function Me(Ae,Xe,ke){if(Ae==null)return Ae;var ft=[],pt=0;return ve(Ae,ft,"","",function(lt){return Xe.call(ke,lt,pt++)}),ft}function Ne(Ae){if(Ae._status===-1){var Xe=Ae._result;Xe=Xe(),Xe.then(function(ke){(Ae._status===0||Ae._status===-1)&&(Ae._status=1,Ae._result=ke)},function(ke){(Ae._status===0||Ae._status===-1)&&(Ae._status=2,Ae._result=ke)}),Ae._status===-1&&(Ae._status=0,Ae._result=Xe)}if(Ae._status===1)return Ae._result.default;throw Ae._result}var Qe=typeof reportError=="function"?reportError:function(Ae){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Xe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ae=="object"&&Ae!==null&&typeof Ae.message=="string"?String(Ae.message):String(Ae),error:Ae});if(!window.dispatchEvent(Xe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ae);return}console.error(Ae)},Ce={map:Me,forEach:function(Ae,Xe,ke){Me(Ae,function(){Xe.apply(this,arguments)},ke)},count:function(Ae){var Xe=0;return Me(Ae,function(){Xe++}),Xe},toArray:function(Ae){return Me(Ae,function(Xe){return Xe})||[]},only:function(Ae){if(!we(Ae))throw Error("React.Children.only expected to receive a single React element child.");return Ae}};return kr.Activity=v,kr.Children=Ce,kr.Component=L,kr.Fragment=n,kr.Profiler=i,kr.PureComponent=N,kr.StrictMode=r,kr.Suspense=u,kr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,kr.__COMPILER_RUNTIME={__proto__:null,c:function(Ae){return H.H.useMemoCache(Ae)}},kr.cache=function(Ae){return function(){return Ae.apply(null,arguments)}},kr.cacheSignal=function(){return null},kr.cloneElement=function(Ae,Xe,ke){if(Ae==null)throw Error("The argument must be a React element, but you passed "+Ae+".");var ft=A({},Ae.props),pt=Ae.key;if(Xe!=null)for(lt in Xe.key!==void 0&&(pt=""+Xe.key),Xe)!te.call(Xe,lt)||lt==="key"||lt==="__self"||lt==="__source"||lt==="ref"&&Xe.ref===void 0||(ft[lt]=Xe[lt]);var lt=arguments.length-2;if(lt===1)ft.children=ke;else if(1<lt){for(var ot=Array(lt),yt=0;yt<lt;yt++)ot[yt]=arguments[yt+2];ft.children=ot}return ne(Ae.type,pt,ft)},kr.createContext=function(Ae){return Ae={$$typeof:a,_currentValue:Ae,_currentValue2:Ae,_threadCount:0,Provider:null,Consumer:null},Ae.Provider=Ae,Ae.Consumer={$$typeof:o,_context:Ae},Ae},kr.createElement=function(Ae,Xe,ke){var ft,pt={},lt=null;if(Xe!=null)for(ft in Xe.key!==void 0&&(lt=""+Xe.key),Xe)te.call(Xe,ft)&&ft!=="key"&&ft!=="__self"&&ft!=="__source"&&(pt[ft]=Xe[ft]);var ot=arguments.length-2;if(ot===1)pt.children=ke;else if(1<ot){for(var yt=Array(ot),Et=0;Et<ot;Et++)yt[Et]=arguments[Et+2];pt.children=yt}if(Ae&&Ae.defaultProps)for(ft in ot=Ae.defaultProps,ot)pt[ft]===void 0&&(pt[ft]=ot[ft]);return ne(Ae,lt,pt)},kr.createRef=function(){return{current:null}},kr.forwardRef=function(Ae){return{$$typeof:s,render:Ae}},kr.isValidElement=we,kr.lazy=function(Ae){return{$$typeof:m,_payload:{_status:-1,_result:Ae},_init:Ne}},kr.memo=function(Ae,Xe){return{$$typeof:d,type:Ae,compare:Xe===void 0?null:Xe}},kr.startTransition=function(Ae){var Xe=H.T,ke={};H.T=ke;try{var ft=Ae(),pt=H.S;pt!==null&&pt(ke,ft),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"&&ft.then(W,Qe)}catch(lt){Qe(lt)}finally{Xe!==null&&ke.types!==null&&(Xe.types=ke.types),H.T=Xe}},kr.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},kr.use=function(Ae){return H.H.use(Ae)},kr.useActionState=function(Ae,Xe,ke){return H.H.useActionState(Ae,Xe,ke)},kr.useCallback=function(Ae,Xe){return H.H.useCallback(Ae,Xe)},kr.useContext=function(Ae){return H.H.useContext(Ae)},kr.useDebugValue=function(){},kr.useDeferredValue=function(Ae,Xe){return H.H.useDeferredValue(Ae,Xe)},kr.useEffect=function(Ae,Xe){return H.H.useEffect(Ae,Xe)},kr.useEffectEvent=function(Ae){return H.H.useEffectEvent(Ae)},kr.useId=function(){return H.H.useId()},kr.useImperativeHandle=function(Ae,Xe,ke){return H.H.useImperativeHandle(Ae,Xe,ke)},kr.useInsertionEffect=function(Ae,Xe){return H.H.useInsertionEffect(Ae,Xe)},kr.useLayoutEffect=function(Ae,Xe){return H.H.useLayoutEffect(Ae,Xe)},kr.useMemo=function(Ae,Xe){return H.H.useMemo(Ae,Xe)},kr.useOptimistic=function(Ae,Xe){return H.H.useOptimistic(Ae,Xe)},kr.useReducer=function(Ae,Xe,ke){return H.H.useReducer(Ae,Xe,ke)},kr.useRef=function(Ae){return H.H.useRef(Ae)},kr.useState=function(Ae){return H.H.useState(Ae)},kr.useSyncExternalStore=function(Ae,Xe,ke){return H.H.useSyncExternalStore(Ae,Xe,ke)},kr.useTransition=function(){return H.H.useTransition()},kr.version="19.2.3",kr}var N7;function EN(){return N7||(N7=1,VD.exports=Nde()),VD.exports}var j=EN();const le=lv(j),Vw=XX({__proto__:null,default:le},[j]);var QD={exports:{}},E2={},UD={exports:{}},ZD={};var B7;function Bde(){return B7||(B7=1,(function(t){function e(ve,Me){var Ne=ve.length;ve.push(Me);e:for(;0<Ne;){var Qe=Ne-1>>>1,Ce=ve[Qe];if(0<i(Ce,Me))ve[Qe]=Me,ve[Ne]=Ce,Ne=Qe;else break e}}function n(ve){return ve.length===0?null:ve[0]}function r(ve){if(ve.length===0)return null;var Me=ve[0],Ne=ve.pop();if(Ne!==Me){ve[0]=Ne;e:for(var Qe=0,Ce=ve.length,Ae=Ce>>>1;Qe<Ae;){var Xe=2*(Qe+1)-1,ke=ve[Xe],ft=Xe+1,pt=ve[ft];if(0>i(ke,Ne))ft<Ce&&0>i(pt,ke)?(ve[Qe]=pt,ve[ft]=Ne,Qe=ft):(ve[Qe]=ke,ve[Xe]=Ne,Qe=Xe);else if(ft<Ce&&0>i(pt,Ne))ve[Qe]=pt,ve[ft]=Ne,Qe=ft;else break e}}return Me}function i(ve,Me){var Ne=ve.sortIndex-Me.sortIndex;return Ne!==0?Ne:ve.id-Me.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var u=[],d=[],m=1,v=null,_=3,O=!1,E=!1,A=!1,M=!1,L=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function F(ve){for(var Me=n(d);Me!==null;){if(Me.callback===null)r(d);else if(Me.startTime<=ve)r(d),Me.sortIndex=Me.expirationTime,e(u,Me);else break;Me=n(d)}}function Q(ve){if(A=!1,F(ve),!E)if(n(u)!==null)E=!0,W||(W=!0,re());else{var Me=n(d);Me!==null&&fe(Q,Me.startTime-ve)}}var W=!1,H=-1,te=5,ne=-1;function ce(){return M?!0:!(t.unstable_now()-ne<te)}function we(){if(M=!1,W){var ve=t.unstable_now();ne=ve;var Me=!0;try{e:{E=!1,A&&(A=!1,$(H),H=-1),O=!0;var Ne=_;try{t:{for(F(ve),v=n(u);v!==null&&!(v.expirationTime>ve&&ce());){var Qe=v.callback;if(typeof Qe=="function"){v.callback=null,_=v.priorityLevel;var Ce=Qe(v.expirationTime<=ve);if(ve=t.unstable_now(),typeof Ce=="function"){v.callback=Ce,F(ve),Me=!0;break t}v===n(u)&&r(u),F(ve)}else r(u);v=n(u)}if(v!==null)Me=!0;else{var Ae=n(d);Ae!==null&&fe(Q,Ae.startTime-ve),Me=!1}}break e}finally{v=null,_=Ne,O=!1}Me=void 0}}finally{Me?re():W=!1}}}var re;if(typeof N=="function")re=function(){N(we)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,be=se.port2;se.port1.onmessage=we,re=function(){be.postMessage(null)}}else re=function(){L(we,0)};function fe(ve,Me){H=L(function(){ve(t.unstable_now())},Me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ve){ve.callback=null},t.unstable_forceFrameRate=function(ve){0>ve||125<ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<ve?Math.floor(1e3/ve):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(ve){switch(_){case 1:case 2:case 3:var Me=3;break;default:Me=_}var Ne=_;_=Me;try{return ve()}finally{_=Ne}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(ve,Me){switch(ve){case 1:case 2:case 3:case 4:case 5:break;default:ve=3}var Ne=_;_=ve;try{return Me()}finally{_=Ne}},t.unstable_scheduleCallback=function(ve,Me,Ne){var Qe=t.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?Qe+Ne:Qe):Ne=Qe,ve){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=Ne+Ce,ve={id:m++,callback:Me,priorityLevel:ve,startTime:Ne,expirationTime:Ce,sortIndex:-1},Ne>Qe?(ve.sortIndex=Ne,e(d,ve),n(u)===null&&ve===n(d)&&(A?($(H),H=-1):A=!0,fe(Q,Ne-Qe))):(ve.sortIndex=Ce,e(u,ve),E||O||(E=!0,W||(W=!0,re()))),ve},t.unstable_shouldYield=ce,t.unstable_wrapCallback=function(ve){var Me=_;return function(){var Ne=_;_=Me;try{return ve.apply(this,arguments)}finally{_=Ne}}}})(ZD)),ZD}var F7;function Fde(){return F7||(F7=1,UD.exports=Bde()),UD.exports}var qD={exports:{}},Ll={};var j7;function jde(){if(j7)return Ll;j7=1;var t=EN();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(u,d,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:v==null?null:""+v,children:u,containerInfo:d,implementation:m}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ll.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ll.createPortal=function(u,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(u,d,null,m)},Ll.flushSync=function(u){var d=a.T,m=r.p;try{if(a.T=null,r.p=2,u)return u()}finally{a.T=d,r.p=m,r.d.f()}},Ll.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},Ll.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Ll.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var m=d.as,v=s(m,d.crossOrigin),_=typeof d.integrity=="string"?d.integrity:void 0,O=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:O}):m==="script"&&r.d.X(u,{crossOrigin:v,integrity:_,fetchPriority:O,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ll.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=s(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},Ll.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,v=s(m,d.crossOrigin);r.d.L(u,m,{crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ll.preloadModule=function(u,d){if(typeof u=="string")if(d){var m=s(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},Ll.requestFormReset=function(u){r.d.r(u)},Ll.unstable_batchedUpdates=function(u,d){return u(d)},Ll.useFormState=function(u,d,m){return a.H.useFormState(u,d,m)},Ll.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ll.version="19.2.3",Ll}var V7;function YX(){if(V7)return qD.exports;V7=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),qD.exports=jde(),qD.exports}var Q7;function Vde(){if(Q7)return E2;Q7=1;var t=Fde(),e=EN(),n=YX();function r(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)y+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function o(p){var y=p,S=p;if(p.alternate)for(;y.return;)y=y.return;else{p=y;do y=p,(y.flags&4098)!==0&&(S=y.return),p=y.return;while(p)}return y.tag===3?S:null}function a(p){if(p.tag===13){var y=p.memoizedState;if(y===null&&(p=p.alternate,p!==null&&(y=p.memoizedState)),y!==null)return y.dehydrated}return null}function s(p){if(p.tag===31){var y=p.memoizedState;if(y===null&&(p=p.alternate,p!==null&&(y=p.memoizedState)),y!==null)return y.dehydrated}return null}function u(p){if(o(p)!==p)throw Error(r(188))}function d(p){var y=p.alternate;if(!y){if(y=o(p),y===null)throw Error(r(188));return y!==p?null:p}for(var S=p,R=y;;){var U=S.return;if(U===null)break;var X=U.alternate;if(X===null){if(R=U.return,R!==null){S=R;continue}break}if(U.child===X.child){for(X=U.child;X;){if(X===S)return u(U),p;if(X===R)return u(U),y;X=X.sibling}throw Error(r(188))}if(S.return!==R.return)S=U,R=X;else{for(var pe=!1,Pe=U.child;Pe;){if(Pe===S){pe=!0,S=U,R=X;break}if(Pe===R){pe=!0,R=U,S=X;break}Pe=Pe.sibling}if(!pe){for(Pe=X.child;Pe;){if(Pe===S){pe=!0,S=X,R=U;break}if(Pe===R){pe=!0,R=X,S=U;break}Pe=Pe.sibling}if(!pe)throw Error(r(189))}}if(S.alternate!==R)throw Error(r(190))}if(S.tag!==3)throw Error(r(188));return S.stateNode.current===S?p:y}function m(p){var y=p.tag;if(y===5||y===26||y===27||y===6)return p;for(p=p.child;p!==null;){if(y=m(p),y!==null)return y;p=p.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),N=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),we=Symbol.iterator;function re(p){return p===null||typeof p!="object"?null:(p=we&&p[we]||p["@@iterator"],typeof p=="function"?p:null)}var se=Symbol.for("react.client.reference");function be(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===se?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case A:return"Fragment";case L:return"Profiler";case M:return"StrictMode";case Q:return"Suspense";case W:return"SuspenseList";case ne:return"Activity"}if(typeof p=="object")switch(p.$$typeof){case E:return"Portal";case N:return p.displayName||"Context";case $:return(p._context.displayName||"Context")+".Consumer";case F:var y=p.render;return p=p.displayName,p||(p=y.displayName||y.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case H:return y=p.displayName||null,y!==null?y:be(p.type)||"Memo";case te:y=p._payload,p=p._init;try{return be(p(y))}catch{}}return null}var fe=Array.isArray,ve=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Me=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne={pending:!1,data:null,method:null,action:null},Qe=[],Ce=-1;function Ae(p){return{current:p}}function Xe(p){0>Ce||(p.current=Qe[Ce],Qe[Ce]=null,Ce--)}function ke(p,y){Ce++,Qe[Ce]=p.current,p.current=y}var ft=Ae(null),pt=Ae(null),lt=Ae(null),ot=Ae(null);function yt(p,y){switch(ke(lt,y),ke(pt,p),ke(ft,null),y.nodeType){case 9:case 11:p=(p=y.documentElement)&&(p=p.namespaceURI)?Cp(p):0;break;default:if(p=y.tagName,y=y.namespaceURI)y=Cp(y),p=r2(y,p);else switch(p){case"svg":p=1;break;case"math":p=2;break;default:p=0}}Xe(ft),ke(ft,p)}function Et(){Xe(ft),Xe(pt),Xe(lt)}function Tt(p){p.memoizedState!==null&&ke(ot,p);var y=ft.current,S=r2(y,p.type);y!==S&&(ke(pt,p),ke(ft,S))}function Ht(p){pt.current===p&&(Xe(ft),Xe(pt)),ot.current===p&&(Xe(ot),v0._currentValue=Ne)}var wt,un;function Gt(p){if(wt===void 0)try{throw Error()}catch(S){var y=S.stack.trim().match(/\n( *(at )?)/);wt=y&&y[1]||"",un=-1<S.stack.indexOf(`
    at`)?" (<anonymous>)":-1<S.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wt+p+un}var Jt=!1;function Sn(p,y){if(!p||Jt)return"";Jt=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var R={DetermineComponentFrameRoot:function(){try{if(y){var Yt=function(){throw Error()};if(Object.defineProperty(Yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Yt,[])}catch(Mt){var Ct=Mt}Reflect.construct(p,[],Yt)}else{try{Yt.call()}catch(Mt){Ct=Mt}p.call(Yt.prototype)}}else{try{throw Error()}catch(Mt){Ct=Mt}(Yt=p())&&typeof Yt.catch=="function"&&Yt.catch(function(){})}}catch(Mt){if(Mt&&Ct&&typeof Mt.stack=="string")return[Mt.stack,Ct.stack]}return[null,null]}};R.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(R.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(R.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var X=R.DetermineComponentFrameRoot(),pe=X[0],Pe=X[1];if(pe&&Pe){var et=pe.split(`
`),Ot=Pe.split(`
`);for(U=R=0;R<et.length&&!et[R].includes("DetermineComponentFrameRoot");)R++;for(;U<Ot.length&&!Ot[U].includes("DetermineComponentFrameRoot");)U++;if(R===et.length||U===Ot.length)for(R=et.length-1,U=Ot.length-1;1<=R&&0<=U&&et[R]!==Ot[U];)U--;for(;1<=R&&0<=U;R--,U--)if(et[R]!==Ot[U]){if(R!==1||U!==1)do if(R--,U--,0>U||et[R]!==Ot[U]){var zt=`
`+et[R].replace(" at new "," at ");return p.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",p.displayName)),zt}while(1<=R&&0<=U);break}}}finally{Jt=!1,Error.prepareStackTrace=S}return(S=p?p.displayName||p.name:"")?Gt(S):""}function nn(p,y){switch(p.tag){case 26:case 27:case 5:return Gt(p.type);case 16:return Gt("Lazy");case 13:return p.child!==y&&y!==null?Gt("Suspense Fallback"):Gt("Suspense");case 19:return Gt("SuspenseList");case 0:case 15:return Sn(p.type,!1);case 11:return Sn(p.type.render,!1);case 1:return Sn(p.type,!0);case 31:return Gt("Activity");default:return""}}function Cn(p){try{var y="",S=null;do y+=nn(p,S),S=p,p=p.return;while(p);return y}catch(R){return`
Error generating stack: `+R.message+`
`+R.stack}}var jn=Object.prototype.hasOwnProperty,Gn=t.unstable_scheduleCallback,je=t.unstable_cancelCallback,Ye=t.unstable_shouldYield,vt=t.unstable_requestPaint,kt=t.unstable_now,jt=t.unstable_getCurrentPriorityLevel,Oe=t.unstable_ImmediatePriority,ae=t.unstable_UserBlockingPriority,K=t.unstable_NormalPriority,_e=t.unstable_LowPriority,$e=t.unstable_IdlePriority,ze=t.log,nt=t.unstable_setDisableYieldValue,tt=null,Ke=null;function at(p){if(typeof ze=="function"&&nt(p),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(tt,p)}catch{}}var St=Math.clz32?Math.clz32:sn,st=Math.log,$t=Math.LN2;function sn(p){return p>>>=0,p===0?32:31-(st(p)/$t|0)|0}var Vn=256,Ar=262144,Or=4194304;function ut(p){var y=p&42;if(y!==0)return y;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return p&261888;case 262144:case 524288:case 1048576:case 2097152:return p&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function Fr(p,y,S){var R=p.pendingLanes;if(R===0)return 0;var U=0,X=p.suspendedLanes,pe=p.pingedLanes;p=p.warmLanes;var Pe=R&134217727;return Pe!==0?(R=Pe&~X,R!==0?U=ut(R):(pe&=Pe,pe!==0?U=ut(pe):S||(S=Pe&~p,S!==0&&(U=ut(S))))):(Pe=R&~X,Pe!==0?U=ut(Pe):pe!==0?U=ut(pe):S||(S=R&~p,S!==0&&(U=ut(S)))),U===0?0:y!==0&&y!==U&&(y&X)===0&&(X=U&-U,S=y&-y,X>=S||X===32&&(S&4194048)!==0)?y:U}function ji(p,y){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&y)===0}function tr(p,y){switch(p){case 1:case 2:case 4:case 8:case 64:return y+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pn(){var p=Or;return Or<<=1,(Or&62914560)===0&&(Or=4194304),p}function ci(p){for(var y=[],S=0;31>S;S++)y.push(p);return y}function an(p,y){p.pendingLanes|=y,y!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function En(p,y,S,R,U,X){var pe=p.pendingLanes;p.pendingLanes=S,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=S,p.entangledLanes&=S,p.errorRecoveryDisabledLanes&=S,p.shellSuspendCounter=0;var Pe=p.entanglements,et=p.expirationTimes,Ot=p.hiddenUpdates;for(S=pe&~S;0<S;){var zt=31-St(S),Yt=1<<zt;Pe[zt]=0,et[zt]=-1;var Ct=Ot[zt];if(Ct!==null)for(Ot[zt]=null,zt=0;zt<Ct.length;zt++){var Mt=Ct[zt];Mt!==null&&(Mt.lane&=-536870913)}S&=~Yt}R!==0&&Hn(p,R,0),X!==0&&U===0&&p.tag!==0&&(p.suspendedLanes|=X&~(pe&~y))}function Hn(p,y,S){p.pendingLanes|=y,p.suspendedLanes&=~y;var R=31-St(y);p.entangledLanes|=y,p.entanglements[R]=p.entanglements[R]|1073741824|S&261930}function nr(p,y){var S=p.entangledLanes|=y;for(p=p.entanglements;S;){var R=31-St(S),U=1<<R;U&y|p[R]&y&&(p[R]|=y),S&=~U}}function ki(p,y){var S=y&-y;return S=(S&42)!==0?1:hs(S),(S&(p.suspendedLanes|y))!==0?0:S}function hs(p){switch(p){case 2:p=1;break;case 8:p=4;break;case 32:p=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:p=128;break;case 268435456:p=134217728;break;default:p=0}return p}function Xt(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function Oo(){var p=Me.p;return p!==0?p:(p=window.event,p===void 0?32:Sg(p.type))}function Jo(p,y){var S=Me.p;try{return Me.p=p,y()}finally{Me.p=S}}var ca=Math.random().toString(36).slice(2),Si="__reactFiber$"+ca,on="__reactProps$"+ca,dr="__reactContainer$"+ca,vr="__reactEvents$"+ca,ja="__reactListeners$"+ca,Oy="__reactHandles$"+ca,Tc="__reactResources$"+ca,hr="__reactMarker$"+ca;function kd(p){delete p[Si],delete p[on],delete p[vr],delete p[ja],delete p[Oy]}function kc(p){var y=p[Si];if(y)return y;for(var S=p.parentNode;S;){if(y=S[dr]||S[Si]){if(S=y.alternate,y.child!==null||S!==null&&S.child!==null)for(p=fx(p);p!==null;){if(S=p[Si])return S;p=fx(p)}return y}p=S,S=p.parentNode}return null}function wu(p){if(p=p[Si]||p[dr]){var y=p.tag;if(y===5||y===6||y===13||y===31||y===26||y===27||y===3)return p}return null}function Ec(p){var y=p.tag;if(y===5||y===26||y===27||y===6)return p.stateNode;throw Error(r(33))}function Ac(p){var y=p[Tc];return y||(y=p[Tc]={hoistableStyles:new Map,hoistableScripts:new Map}),y}function lo(p){p[hr]=!0}var Wf=new Set,js={};function zr(p,y){Ou(p,y),Ou(p+"Capture",y)}function Ou(p,y){for(js[p]=y,p=0;p<y.length;p++)Wf.add(y[p])}var Hf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gf={},_h={};function Xl(p){return jn.call(_h,p)?!0:jn.call(Gf,p)?!1:Hf.test(p)?_h[p]=!0:(Gf[p]=!0,!1)}function Am(p,y,S){if(Xl(y))if(S===null)p.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":p.removeAttribute(y);return;case"boolean":var R=y.toLowerCase().slice(0,5);if(R!=="data-"&&R!=="aria-"){p.removeAttribute(y);return}}p.setAttribute(y,""+S)}}function Pc(p,y,S){if(S===null)p.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(y);return}p.setAttribute(y,""+S)}}function gl(p,y,S,R){if(R===null)p.removeAttribute(S);else{switch(typeof R){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(S);return}p.setAttributeNS(y,S,""+R)}}function Zr(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function bv(p){var y=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function ib(p,y,S){var R=Object.getOwnPropertyDescriptor(p.constructor.prototype,y);if(!p.hasOwnProperty(y)&&typeof R<"u"&&typeof R.get=="function"&&typeof R.set=="function"){var U=R.get,X=R.set;return Object.defineProperty(p,y,{configurable:!0,get:function(){return U.call(this)},set:function(pe){S=""+pe,X.call(this,pe)}}),Object.defineProperty(p,y,{enumerable:R.enumerable}),{getValue:function(){return S},setValue:function(pe){S=""+pe},stopTracking:function(){p._valueTracker=null,delete p[y]}}}}function Ed(p){if(!p._valueTracker){var y=bv(p)?"checked":"value";p._valueTracker=ib(p,y,""+p[y])}}function wv(p){if(!p)return!1;var y=p._valueTracker;if(!y)return!0;var S=y.getValue(),R="";return p&&(R=bv(p)?p.checked?"true":"false":p.value),p=R,p!==S?(y.setValue(p),!0):!1}function Pm(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var ob=/[\n"\\]/g;function ua(p){return p.replace(ob,function(y){return"\\"+y.charCodeAt(0).toString(16)+" "})}function Mm(p,y,S,R,U,X,pe,Pe){p.name="",pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?p.type=pe:p.removeAttribute("type"),y!=null?pe==="number"?(y===0&&p.value===""||p.value!=y)&&(p.value=""+Zr(y)):p.value!==""+Zr(y)&&(p.value=""+Zr(y)):pe!=="submit"&&pe!=="reset"||p.removeAttribute("value"),y!=null?Rm(p,pe,Zr(y)):S!=null?Rm(p,pe,Zr(S)):R!=null&&p.removeAttribute("value"),U==null&&X!=null&&(p.defaultChecked=!!X),U!=null&&(p.checked=U&&typeof U!="function"&&typeof U!="symbol"),Pe!=null&&typeof Pe!="function"&&typeof Pe!="symbol"&&typeof Pe!="boolean"?p.name=""+Zr(Pe):p.removeAttribute("name")}function Sy(p,y,S,R,U,X,pe,Pe){if(X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(p.type=X),y!=null||S!=null){if(!(X!=="submit"&&X!=="reset"||y!=null)){Ed(p);return}S=S!=null?""+Zr(S):"",y=y!=null?""+Zr(y):S,Pe||y===p.value||(p.value=y),p.defaultValue=y}R=R??U,R=typeof R!="function"&&typeof R!="symbol"&&!!R,p.checked=Pe?p.checked:!!R,p.defaultChecked=!!R,pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"&&(p.name=pe),Ed(p)}function Rm(p,y,S){y==="number"&&Pm(p.ownerDocument)===p||p.defaultValue===""+S||(p.defaultValue=""+S)}function bh(p,y,S,R){if(p=p.options,y){y={};for(var U=0;U<S.length;U++)y["$"+S[U]]=!0;for(S=0;S<p.length;S++)U=y.hasOwnProperty("$"+p[S].value),p[S].selected!==U&&(p[S].selected=U),U&&R&&(p[S].defaultSelected=!0)}else{for(S=""+Zr(S),y=null,U=0;U<p.length;U++){if(p[U].value===S){p[U].selected=!0,R&&(p[U].defaultSelected=!0);return}y!==null||p[U].disabled||(y=p[U])}y!==null&&(y.selected=!0)}}function sb(p,y,S){if(y!=null&&(y=""+Zr(y),y!==p.value&&(p.value=y),S==null)){p.defaultValue!==y&&(p.defaultValue=y);return}p.defaultValue=S!=null?""+Zr(S):""}function Xf(p,y,S,R){if(y==null){if(R!=null){if(S!=null)throw Error(r(92));if(fe(R)){if(1<R.length)throw Error(r(93));R=R[0]}S=R}S==null&&(S=""),y=S}S=Zr(y),p.defaultValue=S,R=p.textContent,R===S&&R!==""&&R!==null&&(p.value=R),Ed(p)}function Su(p,y){if(y){var S=p.firstChild;if(S&&S===p.lastChild&&S.nodeType===3){S.nodeValue=y;return}}p.textContent=y}var ab=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ad(p,y,S){var R=y.indexOf("--")===0;S==null||typeof S=="boolean"||S===""?R?p.setProperty(y,""):y==="float"?p.cssFloat="":p[y]="":R?p.setProperty(y,S):typeof S!="number"||S===0||ab.has(y)?y==="float"?p.cssFloat=S:p[y]=(""+S).trim():p[y]=S+"px"}function Cy(p,y,S){if(y!=null&&typeof y!="object")throw Error(r(62));if(p=p.style,S!=null){for(var R in S)!S.hasOwnProperty(R)||y!=null&&y.hasOwnProperty(R)||(R.indexOf("--")===0?p.setProperty(R,""):R==="float"?p.cssFloat="":p[R]="");for(var U in y)R=y[U],y.hasOwnProperty(U)&&S[U]!==R&&Ad(p,U,R)}else for(var X in y)y.hasOwnProperty(X)&&Ad(p,X,y[X])}function Pd(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mr(p){return Yf.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}function Yl(){}var Ov=null;function Im(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var es=null,$o=null;function Vi(p){var y=wu(p);if(y&&(p=y.stateNode)){var S=p[on]||null;e:switch(p=y.stateNode,y.type){case"input":if(Mm(p,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name),y=S.name,S.type==="radio"&&y!=null){for(S=p;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll('input[name="'+ua(""+y)+'"][type="radio"]'),y=0;y<S.length;y++){var R=S[y];if(R!==p&&R.form===p.form){var U=R[on]||null;if(!U)throw Error(r(90));Mm(R,U.value,U.defaultValue,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name)}}for(y=0;y<S.length;y++)R=S[y],R.form===p.form&&wv(R)}break e;case"textarea":sb(p,S.value,S.defaultValue);break e;case"select":y=S.value,y!=null&&bh(p,!!S.multiple,y,!1)}}}var Kn=!1;function yi(p,y,S){if(Kn)return p(y,S);Kn=!0;try{var R=p(y);return R}finally{if(Kn=!1,(es!==null||$o!==null)&&(ox(),es&&(y=es,p=$o,$o=es=null,Vi(y),p)))for(y=0;y<p.length;y++)Vi(p[y])}}function yl(p,y){var S=p.stateNode;if(S===null)return null;var R=S[on]||null;if(R===null)return null;S=R[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(p=p.type,R=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!R;break e;default:p=!1}if(p)return null;if(S&&typeof S!="function")throw Error(r(231,y,typeof S));return S}var co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha=!1;if(co)try{var ts={};Object.defineProperty(ts,"passive",{get:function(){ha=!0}}),window.addEventListener("test",ts,ts),window.removeEventListener("test",ts,ts)}catch{ha=!1}var Va=null,Mc=null,Qi=null;function Oh(){if(Qi)return Qi;var p,y=Mc,S=y.length,R,U="value"in Va?Va.value:Va.textContent,X=U.length;for(p=0;p<S&&y[p]===U[p];p++);var pe=S-p;for(R=1;R<=pe&&y[S-R]===U[X-R];R++);return Qi=U.slice(p,1<R?1-R:void 0)}function Qa(p){var y=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&y===13&&(p=13)):p=y,p===10&&(p=13),32<=p||p===13?p:0}function Md(){return!0}function da(){return!1}function Zo(p){function y(S,R,U,X,pe){this._reactName=S,this._targetInst=U,this.type=R,this.nativeEvent=X,this.target=pe,this.currentTarget=null;for(var Pe in p)p.hasOwnProperty(Pe)&&(S=p[Pe],this[Pe]=S?S(X):X[Pe]);return this.isDefaultPrevented=(X.defaultPrevented!=null?X.defaultPrevented:X.returnValue===!1)?Md:da,this.isPropagationStopped=da,this}return v(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=Md)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=Md)},persist:function(){},isPersistent:Md}),y}var fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dm=Zo(fa),Rd=v({},fa,{view:0,detail:0}),Id=Zo(Rd),ui,Sh,Cr,fr=v({},Rd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zm,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==Cr&&(Cr&&p.type==="mousemove"?(ui=p.screenX-Cr.screenX,Sh=p.screenY-Cr.screenY):Sh=ui=0,Cr=p),ui)},movementY:function(p){return"movementY"in p?p.movementY:Sh}}),Dd=Zo(fr),Nr=v({},fr,{dataTransfer:0}),Lm=Zo(Nr),vl=v({},Rd,{relatedTarget:0}),Ch=Zo(vl),Th=v({},fa,{animationName:0,elapsedTime:0,pseudoElement:0}),lb=Zo(Th),$m=v({},fa,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),Sv=Zo($m),bS=v({},fa,{data:0}),Cv=Zo(bS),pa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ui={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ld(p){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(p):(p=Ui[p])?!!y[p]:!1}function zm(){return Ld}var Nm=v({},Rd,{key:function(p){if(p.key){var y=pa[p.key]||p.key;if(y!=="Unidentified")return y}return p.type==="keypress"?(p=Qa(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?Rc[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zm,charCode:function(p){return p.type==="keypress"?Qa(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?Qa(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),uo=Zo(Nm),cb=v({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ty=Zo(cb),ub=v({},Rd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zm}),wS=Zo(ub),Kf=v({},fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),ky=Zo(Kf),Jf=v({},fr,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Tv=Zo(Jf),Bm=v({},fa,{newState:0,oldState:0}),ep=Zo(Bm),tp=[9,13,27,32],So=co&&"CompositionEvent"in window,np=null;co&&"documentMode"in document&&(np=document.documentMode);var rp=co&&"TextEvent"in window&&!np,ip=co&&(!So||np&&8<np&&11>=np),kh=" ",hb=!1;function Fm(p,y){switch(p){case"keyup":return tp.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function db(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var Kl=!1;function Ey(p,y){switch(p){case"compositionend":return db(y);case"keypress":return y.which!==32?null:(hb=!0,kh);case"textInput":return p=y.data,p===kh&&hb?null:p;default:return null}}function fb(p,y){if(Kl)return p==="compositionend"||!So&&Fm(p,y)?(p=Oh(),Qi=Mc=Va=null,Kl=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return ip&&y.locale!=="ko"?null:y.data;default:return null}}var pb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ay(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y==="input"?!!pb[p.type]:y==="textarea"}function Py(p,y,S,R){es?$o?$o.push(R):$o=[R]:es=R,y=cx(y,"onChange"),0<y.length&&(S=new Dm("onChange","change",null,S,R),p.push({event:S,listeners:y}))}var $d=null,op=null;function mb(p){XE(p,0)}function jm(p){var y=Ec(p);if(wv(y))return p}function Eh(p,y){if(p==="change")return y}var kv=!1;if(co){var Vm;if(co){var Ah="oninput"in document;if(!Ah){var Ev=document.createElement("div");Ev.setAttribute("oninput","return;"),Ah=typeof Ev.oninput=="function"}Vm=Ah}else Vm=!1;kv=Vm&&(!document.documentMode||9<document.documentMode)}function Qm(){$d&&($d.detachEvent("onpropertychange",gb),op=$d=null)}function gb(p){if(p.propertyName==="value"&&jm(op)){var y=[];Py(y,op,p,Im(p)),yi(mb,y)}}function OS(p,y,S){p==="focusin"?(Qm(),$d=y,op=S,$d.attachEvent("onpropertychange",gb)):p==="focusout"&&Qm()}function yb(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return jm(op)}function Um(p,y){if(p==="click")return jm(y)}function vb(p,y){if(p==="input"||p==="change")return jm(y)}function Av(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var Oa=typeof Object.is=="function"?Object.is:Av;function Ph(p,y){if(Oa(p,y))return!0;if(typeof p!="object"||p===null||typeof y!="object"||y===null)return!1;var S=Object.keys(p),R=Object.keys(y);if(S.length!==R.length)return!1;for(R=0;R<S.length;R++){var U=S[R];if(!jn.call(y,U)||!Oa(p[U],y[U]))return!1}return!0}function xl(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Zm(p,y){var S=xl(p);p=0;for(var R;S;){if(S.nodeType===3){if(R=p+S.textContent.length,p<=y&&R>=y)return{node:S,offset:y-p};p=R}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=xl(S)}}function My(p,y){return p&&y?p===y?!0:p&&p.nodeType===3?!1:y&&y.nodeType===3?My(p,y.parentNode):"contains"in p?p.contains(y):p.compareDocumentPosition?!!(p.compareDocumentPosition(y)&16):!1:!1}function Ry(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var y=Pm(p.document);y instanceof p.HTMLIFrameElement;){try{var S=typeof y.contentWindow.location.href=="string"}catch{S=!1}if(S)p=y.contentWindow;else break;y=Pm(p.document)}return y}function qm(p){var y=p&&p.nodeName&&p.nodeName.toLowerCase();return y&&(y==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||y==="textarea"||p.contentEditable==="true")}var Iy=co&&"documentMode"in document&&11>=document.documentMode,_l=null,Wm=null,Hm=null,Dy=!1;function xb(p,y,S){var R=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;Dy||_l==null||_l!==Pm(R)||(R=_l,"selectionStart"in R&&qm(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),Hm&&Ph(Hm,R)||(Hm=R,R=cx(Wm,"onSelect"),0<R.length&&(y=new Dm("onSelect","select",null,y,S),p.push({event:y,listeners:R}),y.target=_l)))}function zd(p,y){var S={};return S[p.toLowerCase()]=y.toLowerCase(),S["Webkit"+p]="webkit"+y,S["Moz"+p]="moz"+y,S}var Nd={animationend:zd("Animation","AnimationEnd"),animationiteration:zd("Animation","AnimationIteration"),animationstart:zd("Animation","AnimationStart"),transitionrun:zd("Transition","TransitionRun"),transitionstart:zd("Transition","TransitionStart"),transitioncancel:zd("Transition","TransitionCancel"),transitionend:zd("Transition","TransitionEnd")},Pv={},qr={};co&&(qr=document.createElement("div").style,"AnimationEvent"in window||(delete Nd.animationend.animation,delete Nd.animationiteration.animation,delete Nd.animationstart.animation),"TransitionEvent"in window||delete Nd.transitionend.transition);function Ic(p){if(Pv[p])return Pv[p];if(!Nd[p])return p;var y=Nd[p],S;for(S in y)if(y.hasOwnProperty(S)&&S in qr)return Pv[p]=y[S];return p}var Gm=Ic("animationend"),Xm=Ic("animationiteration"),Ly=Ic("animationstart"),Bd=Ic("transitionrun"),Ym=Ic("transitionstart"),sp=Ic("transitioncancel"),Ua=Ic("transitionend"),Mv=new Map,$y="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$y.push("scrollEnd");function Za(p,y){Mv.set(p,y),zr(y,[p])}var Dc=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)},ma=[],Cu=0,Fd=0;function jd(){for(var p=Cu,y=Fd=Cu=0;y<p;){var S=ma[y];ma[y++]=null;var R=ma[y];ma[y++]=null;var U=ma[y];ma[y++]=null;var X=ma[y];if(ma[y++]=null,R!==null&&U!==null){var pe=R.pending;pe===null?U.next=U:(U.next=pe.next,pe.next=U),R.pending=U}X!==0&&Rv(S,U,X)}}function Km(p,y,S,R){ma[Cu++]=p,ma[Cu++]=y,ma[Cu++]=S,ma[Cu++]=R,Fd|=R,p.lanes|=R,p=p.alternate,p!==null&&(p.lanes|=R)}function Mh(p,y,S,R){return Km(p,y,S,R),ap(p)}function bl(p,y){return Km(p,null,null,y),ap(p)}function Rv(p,y,S){p.lanes|=S;var R=p.alternate;R!==null&&(R.lanes|=S);for(var U=!1,X=p.return;X!==null;)X.childLanes|=S,R=X.alternate,R!==null&&(R.childLanes|=S),X.tag===22&&(p=X.stateNode,p===null||p._visibility&1||(U=!0)),p=X,X=X.return;return p.tag===3?(X=p.stateNode,U&&y!==null&&(U=31-St(S),p=X.hiddenUpdates,R=p[U],R===null?p[U]=[y]:R.push(y),y.lane=S|536870912),X):null}function ap(p){if(50<ix)throw ix=0,jS=null,Error(r(185));for(var y=p.return;y!==null;)p=y,y=p.return;return p.tag===3?p.stateNode:null}var pr={};function zy(p,y,S,R){this.tag=p,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qa(p,y,S,R){return new zy(p,y,S,R)}function Ny(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Wa(p,y){var S=p.alternate;return S===null?(S=qa(p.tag,y,p.key,p.mode),S.elementType=p.elementType,S.type=p.type,S.stateNode=p.stateNode,S.alternate=p,p.alternate=S):(S.pendingProps=y,S.type=p.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=p.flags&65011712,S.childLanes=p.childLanes,S.lanes=p.lanes,S.child=p.child,S.memoizedProps=p.memoizedProps,S.memoizedState=p.memoizedState,S.updateQueue=p.updateQueue,y=p.dependencies,S.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},S.sibling=p.sibling,S.index=p.index,S.ref=p.ref,S.refCleanup=p.refCleanup,S}function _b(p,y){p.flags&=65011714;var S=p.alternate;return S===null?(p.childLanes=0,p.lanes=y,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=S.childLanes,p.lanes=S.lanes,p.child=S.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=S.memoizedProps,p.memoizedState=S.memoizedState,p.updateQueue=S.updateQueue,p.type=S.type,y=S.dependencies,p.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),p}function By(p,y,S,R,U,X){var pe=0;if(R=p,typeof p=="function")Ny(p)&&(pe=1);else if(typeof p=="string")pe=f1(p,S,ft.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case ne:return p=qa(31,S,y,U),p.elementType=ne,p.lanes=X,p;case A:return Rh(S.children,U,X,y);case M:pe=8,U|=24;break;case L:return p=qa(12,S,y,U|2),p.elementType=L,p.lanes=X,p;case Q:return p=qa(13,S,y,U),p.elementType=Q,p.lanes=X,p;case W:return p=qa(19,S,y,U),p.elementType=W,p.lanes=X,p;default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case N:pe=10;break e;case $:pe=9;break e;case F:pe=11;break e;case H:pe=14;break e;case te:pe=16,R=null;break e}pe=29,S=Error(r(130,p===null?"null":typeof p,"")),R=null}return y=qa(pe,S,y,U),y.elementType=p,y.type=R,y.lanes=X,y}function Rh(p,y,S,R){return p=qa(7,p,R,y),p.lanes=S,p}function Iv(p,y,S){return p=qa(6,p,null,y),p.lanes=S,p}function Fy(p){var y=qa(18,null,null,0);return y.stateNode=p,y}function Ih(p,y,S){return y=qa(4,p.children!==null?p.children:[],p.key,y),y.lanes=S,y.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},y}var lp=new WeakMap;function ga(p,y){if(typeof p=="object"&&p!==null){var S=lp.get(p);return S!==void 0?S:(y={value:p,source:y,stack:Cn(y)},lp.set(p,y),y)}return{value:p,source:y,stack:Cn(y)}}var Dh=[],Lh=0,Vd=null,$h=0,ns=[],ds=0,Lc=null,$c=1,Sa="";function Tu(p,y){Dh[Lh++]=$h,Dh[Lh++]=Vd,Vd=p,$h=y}function Dv(p,y,S){ns[ds++]=$c,ns[ds++]=Sa,ns[ds++]=Lc,Lc=p;var R=$c;p=Sa;var U=32-St(R)-1;R&=~(1<<U),S+=1;var X=32-St(y)+U;if(30<X){var pe=U-U%5;X=(R&(1<<pe)-1).toString(32),R>>=pe,U-=pe,$c=1<<32-St(y)+U|S<<U|R,Sa=X+p}else $c=1<<X|S<<U|R,Sa=p}function Qd(p){p.return!==null&&(Tu(p,1),Dv(p,1,0))}function cp(p){for(;p===Vd;)Vd=Dh[--Lh],Dh[Lh]=null,$h=Dh[--Lh],Dh[Lh]=null;for(;p===Lc;)Lc=ns[--ds],ns[ds]=null,Sa=ns[--ds],ns[ds]=null,$c=ns[--ds],ns[ds]=null}function Lv(p,y){ns[ds++]=$c,ns[ds++]=Sa,ns[ds++]=Lc,$c=y.id,Sa=y.overflow,Lc=p}var fs=null,vi=null,Ir=!1,ku=null,Ha=!1,Ji=Error(r(519));function Ca(p){var y=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Eu(ga(y,p)),Ji}function Ta(p){var y=p.stateNode,S=p.type,R=p.memoizedProps;switch(y[Si]=p,y[on]=R,S){case"dialog":Qr("cancel",y),Qr("close",y);break;case"iframe":case"object":case"embed":Qr("load",y);break;case"video":case"audio":for(S=0;S<Sp.length;S++)Qr(Sp[S],y);break;case"source":Qr("error",y);break;case"img":case"image":case"link":Qr("error",y),Qr("load",y);break;case"details":Qr("toggle",y);break;case"input":Qr("invalid",y),Sy(y,R.value,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name,!0);break;case"select":Qr("invalid",y);break;case"textarea":Qr("invalid",y),Xf(y,R.value,R.defaultValue,R.children)}S=R.children,typeof S!="string"&&typeof S!="number"&&typeof S!="bigint"||y.textContent===""+S||R.suppressHydrationWarning===!0||t2(y.textContent,S)?(R.popover!=null&&(Qr("beforetoggle",y),Qr("toggle",y)),R.onScroll!=null&&Qr("scroll",y),R.onScrollEnd!=null&&Qr("scrollend",y),R.onClick!=null&&(y.onclick=Yl),y=!0):y=!1,y||Ca(p,!0)}function Jm(p){for(fs=p.return;fs;)switch(fs.tag){case 5:case 31:case 13:Ha=!1;return;case 27:case 3:Ha=!0;return;default:fs=fs.return}}function zc(p){if(p!==fs)return!1;if(!Ir)return Jm(p),Ir=!0,!1;var y=p.tag,S;if((S=y!==3&&y!==27)&&((S=y===5)&&(S=p.type,S=!(S!=="form"&&S!=="button")||s1(p.type,p.memoizedProps)),S=!S),S&&vi&&Ca(p),Jm(p),y===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));vi=bs(p)}else if(y===31){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));vi=bs(p)}else y===27?(y=vi,kp(p.type)?(p=nl,nl=null,vi=p):vi=y):vi=fs?uc(p.stateNode.nextSibling):null;return!0}function Nc(){vi=fs=null,Ir=!1}function Bc(){var p=ku;return p!==null&&(Ml===null?Ml=p:Ml.push.apply(Ml,p),ku=null),p}function Eu(p){ku===null?ku=[p]:ku.push(p)}var Au=Ae(null),wl=null,Fc=null;function Pu(p,y,S){ke(Au,y._currentValue),y._currentValue=S}function jc(p){p._currentValue=Au.current,Xe(Au)}function jy(p,y,S){for(;p!==null;){var R=p.alternate;if((p.childLanes&y)!==y?(p.childLanes|=y,R!==null&&(R.childLanes|=y)):R!==null&&(R.childLanes&y)!==y&&(R.childLanes|=y),p===S)break;p=p.return}}function Vy(p,y,S,R){var U=p.child;for(U!==null&&(U.return=p);U!==null;){var X=U.dependencies;if(X!==null){var pe=U.child;X=X.firstContext;e:for(;X!==null;){var Pe=X;X=U;for(var et=0;et<y.length;et++)if(Pe.context===y[et]){X.lanes|=S,Pe=X.alternate,Pe!==null&&(Pe.lanes|=S),jy(X.return,S,p),R||(pe=null);break e}X=Pe.next}}else if(U.tag===18){if(pe=U.return,pe===null)throw Error(r(341));pe.lanes|=S,X=pe.alternate,X!==null&&(X.lanes|=S),jy(pe,S,p),pe=null}else pe=U.child;if(pe!==null)pe.return=U;else for(pe=U;pe!==null;){if(pe===p){pe=null;break}if(U=pe.sibling,U!==null){U.return=pe.return,pe=U;break}pe=pe.return}U=pe}}function Ga(p,y,S,R){p=null;for(var U=y,X=!1;U!==null;){if(!X){if((U.flags&524288)!==0)X=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var pe=U.alternate;if(pe===null)throw Error(r(387));if(pe=pe.memoizedProps,pe!==null){var Pe=U.type;Oa(U.pendingProps.value,pe.value)||(p!==null?p.push(Pe):p=[Pe])}}else if(U===ot.current){if(pe=U.alternate,pe===null)throw Error(r(387));pe.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(p!==null?p.push(v0):p=[v0])}U=U.return}p!==null&&Vy(y,p,S,R),y.flags|=262144}function up(p){for(p=p.firstContext;p!==null;){if(!Oa(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function Mu(p){wl=p,Fc=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function zo(p){return Qy(wl,p)}function eg(p,y){return wl===null&&Mu(p),Qy(p,y)}function Qy(p,y){var S=y._currentValue;if(y={context:y,memoizedValue:S,next:null},Fc===null){if(p===null)throw Error(r(308));Fc=y,p.dependencies={lanes:0,firstContext:y},p.flags|=524288}else Fc=Fc.next=y;return S}var $v=typeof AbortController<"u"?AbortController:function(){var p=[],y=this.signal={aborted:!1,addEventListener:function(S,R){p.push(R)}};this.abort=function(){y.aborted=!0,p.forEach(function(S){return S()})}},bb=t.unstable_scheduleCallback,zv=t.unstable_NormalPriority,Co={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vc(){return{controller:new $v,data:new Map,refCount:0}}function hp(p){p.refCount--,p.refCount===0&&bb(zv,function(){p.controller.abort()})}var Vs=null,Xa=0,Ud=0,Qs=null;function SS(p,y){if(Vs===null){var S=Vs=[];Xa=0,Ud=XS(),Qs={status:"pending",value:void 0,then:function(R){S.push(R)}}}return Xa++,y.then(dp,dp),y}function dp(){if(--Xa===0&&Vs!==null){Qs!==null&&(Qs.status="fulfilled");var p=Vs;Vs=null,Ud=0,Qs=null;for(var y=0;y<p.length;y++)(0,p[y])()}}function tg(p,y){var S=[],R={status:"pending",value:null,reason:null,then:function(U){S.push(U)}};return p.then(function(){R.status="fulfilled",R.value=y;for(var U=0;U<S.length;U++)(0,S[U])(y)},function(U){for(R.status="rejected",R.reason=U,U=0;U<S.length;U++)(0,S[U])(void 0)}),R}var rs=ve.S;ve.S=function(p,y){IE=kt(),typeof y=="object"&&y!==null&&typeof y.then=="function"&&SS(p,y),rs!==null&&rs(p,y)};var Jl=Ae(null);function Uy(){var p=Jl.current;return p!==null?p:Wi.pooledCache}function Zy(p,y){y===null?ke(Jl,Jl.current):ke(Jl,y.pool)}function wb(){var p=Uy();return p===null?null:{parent:Co._currentValue,pool:p}}var ec=Error(r(460)),zh=Error(r(474)),ka=Error(r(542)),xn={then:function(){}};function ng(p){return p=p.status,p==="fulfilled"||p==="rejected"}function qy(p,y,S){switch(S=p[S],S===void 0?p.push(y):S!==y&&(y.then(Yl,Yl),y=S),y.status){case"fulfilled":return y.value;case"rejected":throw p=y.reason,Wy(p),p;default:if(typeof y.status=="string")y.then(Yl,Yl);else{if(p=Wi,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=y,p.status="pending",p.then(function(R){if(y.status==="pending"){var U=y;U.status="fulfilled",U.value=R}},function(R){if(y.status==="pending"){var U=y;U.status="rejected",U.reason=R}})}switch(y.status){case"fulfilled":return y.value;case"rejected":throw p=y.reason,Wy(p),p}throw tc=y,ec}}function Ol(p){try{var y=p._init;return y(p._payload)}catch(S){throw S!==null&&typeof S=="object"&&typeof S.then=="function"?(tc=S,ec):S}}var tc=null;function fp(){if(tc===null)throw Error(r(459));var p=tc;return tc=null,p}function Wy(p){if(p===ec||p===ka)throw Error(r(483))}var Qc=null,Zd=0;function rg(p){var y=Zd;return Zd+=1,Qc===null&&(Qc=[]),qy(Qc,p,y)}function Uc(p,y){y=y.props.ref,p.ref=y!==void 0?y:null}function Hy(p,y){throw y.$$typeof===_?Error(r(525)):(p=Object.prototype.toString.call(y),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":p)))}function ig(p){function y(ct,it){if(p){var _t=ct.deletions;_t===null?(ct.deletions=[it],ct.flags|=16):_t.push(it)}}function S(ct,it){if(!p)return null;for(;it!==null;)y(ct,it),it=it.sibling;return null}function R(ct){for(var it=new Map;ct!==null;)ct.key!==null?it.set(ct.key,ct):it.set(ct.index,ct),ct=ct.sibling;return it}function U(ct,it){return ct=Wa(ct,it),ct.index=0,ct.sibling=null,ct}function X(ct,it,_t){return ct.index=_t,p?(_t=ct.alternate,_t!==null?(_t=_t.index,_t<it?(ct.flags|=67108866,it):_t):(ct.flags|=67108866,it)):(ct.flags|=1048576,it)}function pe(ct){return p&&ct.alternate===null&&(ct.flags|=67108866),ct}function Pe(ct,it,_t,qt){return it===null||it.tag!==6?(it=Iv(_t,ct.mode,qt),it.return=ct,it):(it=U(it,_t),it.return=ct,it)}function et(ct,it,_t,qt){var rr=_t.type;return rr===A?zt(ct,it,_t.props.children,qt,_t.key):it!==null&&(it.elementType===rr||typeof rr=="object"&&rr!==null&&rr.$$typeof===te&&Ol(rr)===it.type)?(it=U(it,_t.props),Uc(it,_t),it.return=ct,it):(it=By(_t.type,_t.key,_t.props,null,ct.mode,qt),Uc(it,_t),it.return=ct,it)}function Ot(ct,it,_t,qt){return it===null||it.tag!==4||it.stateNode.containerInfo!==_t.containerInfo||it.stateNode.implementation!==_t.implementation?(it=Ih(_t,ct.mode,qt),it.return=ct,it):(it=U(it,_t.children||[]),it.return=ct,it)}function zt(ct,it,_t,qt,rr){return it===null||it.tag!==7?(it=Rh(_t,ct.mode,qt,rr),it.return=ct,it):(it=U(it,_t),it.return=ct,it)}function Yt(ct,it,_t){if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return it=Iv(""+it,ct.mode,_t),it.return=ct,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case O:return _t=By(it.type,it.key,it.props,null,ct.mode,_t),Uc(_t,it),_t.return=ct,_t;case E:return it=Ih(it,ct.mode,_t),it.return=ct,it;case te:return it=Ol(it),Yt(ct,it,_t)}if(fe(it)||re(it))return it=Rh(it,ct.mode,_t,null),it.return=ct,it;if(typeof it.then=="function")return Yt(ct,rg(it),_t);if(it.$$typeof===N)return Yt(ct,eg(ct,it),_t);Hy(ct,it)}return null}function Ct(ct,it,_t,qt){var rr=it!==null?it.key:null;if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return rr!==null?null:Pe(ct,it,""+_t,qt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case O:return _t.key===rr?et(ct,it,_t,qt):null;case E:return _t.key===rr?Ot(ct,it,_t,qt):null;case te:return _t=Ol(_t),Ct(ct,it,_t,qt)}if(fe(_t)||re(_t))return rr!==null?null:zt(ct,it,_t,qt,null);if(typeof _t.then=="function")return Ct(ct,it,rg(_t),qt);if(_t.$$typeof===N)return Ct(ct,it,eg(ct,_t),qt);Hy(ct,_t)}return null}function Mt(ct,it,_t,qt,rr){if(typeof qt=="string"&&qt!==""||typeof qt=="number"||typeof qt=="bigint")return ct=ct.get(_t)||null,Pe(it,ct,""+qt,rr);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case O:return ct=ct.get(qt.key===null?_t:qt.key)||null,et(it,ct,qt,rr);case E:return ct=ct.get(qt.key===null?_t:qt.key)||null,Ot(it,ct,qt,rr);case te:return qt=Ol(qt),Mt(ct,it,_t,qt,rr)}if(fe(qt)||re(qt))return ct=ct.get(_t)||null,zt(it,ct,qt,rr,null);if(typeof qt.then=="function")return Mt(ct,it,_t,rg(qt),rr);if(qt.$$typeof===N)return Mt(ct,it,_t,eg(it,qt),rr);Hy(it,qt)}return null}function Nn(ct,it,_t,qt){for(var rr=null,fi=null,Bn=it,Yn=it=0,Br=null;Bn!==null&&Yn<_t.length;Yn++){Bn.index>Yn?(Br=Bn,Bn=null):Br=Bn.sibling;var si=Ct(ct,Bn,_t[Yn],qt);if(si===null){Bn===null&&(Bn=Br);break}p&&Bn&&si.alternate===null&&y(ct,Bn),it=X(si,it,Yn),fi===null?rr=si:fi.sibling=si,fi=si,Bn=Br}if(Yn===_t.length)return S(ct,Bn),Ir&&Tu(ct,Yn),rr;if(Bn===null){for(;Yn<_t.length;Yn++)Bn=Yt(ct,_t[Yn],qt),Bn!==null&&(it=X(Bn,it,Yn),fi===null?rr=Bn:fi.sibling=Bn,fi=Bn);return Ir&&Tu(ct,Yn),rr}for(Bn=R(Bn);Yn<_t.length;Yn++)Br=Mt(Bn,ct,Yn,_t[Yn],qt),Br!==null&&(p&&Br.alternate!==null&&Bn.delete(Br.key===null?Yn:Br.key),it=X(Br,it,Yn),fi===null?rr=Br:fi.sibling=Br,fi=Br);return p&&Bn.forEach(function(ff){return y(ct,ff)}),Ir&&Tu(ct,Yn),rr}function or(ct,it,_t,qt){if(_t==null)throw Error(r(151));for(var rr=null,fi=null,Bn=it,Yn=it=0,Br=null,si=_t.next();Bn!==null&&!si.done;Yn++,si=_t.next()){Bn.index>Yn?(Br=Bn,Bn=null):Br=Bn.sibling;var ff=Ct(ct,Bn,si.value,qt);if(ff===null){Bn===null&&(Bn=Br);break}p&&Bn&&ff.alternate===null&&y(ct,Bn),it=X(ff,it,Yn),fi===null?rr=ff:fi.sibling=ff,fi=ff,Bn=Br}if(si.done)return S(ct,Bn),Ir&&Tu(ct,Yn),rr;if(Bn===null){for(;!si.done;Yn++,si=_t.next())si=Yt(ct,si.value,qt),si!==null&&(it=X(si,it,Yn),fi===null?rr=si:fi.sibling=si,fi=si);return Ir&&Tu(ct,Yn),rr}for(Bn=R(Bn);!si.done;Yn++,si=_t.next())si=Mt(Bn,ct,Yn,si.value,qt),si!==null&&(p&&si.alternate!==null&&Bn.delete(si.key===null?Yn:si.key),it=X(si,it,Yn),fi===null?rr=si:fi.sibling=si,fi=si);return p&&Bn.forEach(function(O2){return y(ct,O2)}),Ir&&Tu(ct,Yn),rr}function Ai(ct,it,_t,qt){if(typeof _t=="object"&&_t!==null&&_t.type===A&&_t.key===null&&(_t=_t.props.children),typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case O:e:{for(var rr=_t.key;it!==null;){if(it.key===rr){if(rr=_t.type,rr===A){if(it.tag===7){S(ct,it.sibling),qt=U(it,_t.props.children),qt.return=ct,ct=qt;break e}}else if(it.elementType===rr||typeof rr=="object"&&rr!==null&&rr.$$typeof===te&&Ol(rr)===it.type){S(ct,it.sibling),qt=U(it,_t.props),Uc(qt,_t),qt.return=ct,ct=qt;break e}S(ct,it);break}else y(ct,it);it=it.sibling}_t.type===A?(qt=Rh(_t.props.children,ct.mode,qt,_t.key),qt.return=ct,ct=qt):(qt=By(_t.type,_t.key,_t.props,null,ct.mode,qt),Uc(qt,_t),qt.return=ct,ct=qt)}return pe(ct);case E:e:{for(rr=_t.key;it!==null;){if(it.key===rr)if(it.tag===4&&it.stateNode.containerInfo===_t.containerInfo&&it.stateNode.implementation===_t.implementation){S(ct,it.sibling),qt=U(it,_t.children||[]),qt.return=ct,ct=qt;break e}else{S(ct,it);break}else y(ct,it);it=it.sibling}qt=Ih(_t,ct.mode,qt),qt.return=ct,ct=qt}return pe(ct);case te:return _t=Ol(_t),Ai(ct,it,_t,qt)}if(fe(_t))return Nn(ct,it,_t,qt);if(re(_t)){if(rr=re(_t),typeof rr!="function")throw Error(r(150));return _t=rr.call(_t),or(ct,it,_t,qt)}if(typeof _t.then=="function")return Ai(ct,it,rg(_t),qt);if(_t.$$typeof===N)return Ai(ct,it,eg(ct,_t),qt);Hy(ct,_t)}return typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint"?(_t=""+_t,it!==null&&it.tag===6?(S(ct,it.sibling),qt=U(it,_t),qt.return=ct,ct=qt):(S(ct,it),qt=Iv(_t,ct.mode,qt),qt.return=ct,ct=qt),pe(ct)):S(ct,it)}return function(ct,it,_t,qt){try{Zd=0;var rr=Ai(ct,it,_t,qt);return Qc=null,rr}catch(Bn){if(Bn===ec||Bn===ka)throw Bn;var fi=qa(29,Bn,null,ct.mode);return fi.lanes=qt,fi.return=ct,fi}}}var Zc=ig(!0),Nv=ig(!1),qc=!1;function Gy(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function og(p,y){p=p.updateQueue,y.updateQueue===p&&(y.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function Wc(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Ru(p,y,S){var R=p.updateQueue;if(R===null)return null;if(R=R.shared,(bi&2)!==0){var U=R.pending;return U===null?y.next=y:(y.next=U.next,U.next=y),R.pending=y,y=ap(p),Rv(p,null,S),y}return Km(p,R,y,S),ap(p)}function Sl(p,y,S){if(y=y.updateQueue,y!==null&&(y=y.shared,(S&4194048)!==0)){var R=y.lanes;R&=p.pendingLanes,S|=R,y.lanes=S,nr(p,S)}}function ii(p,y){var S=p.updateQueue,R=p.alternate;if(R!==null&&(R=R.updateQueue,S===R)){var U=null,X=null;if(S=S.firstBaseUpdate,S!==null){do{var pe={lane:S.lane,tag:S.tag,payload:S.payload,callback:null,next:null};X===null?U=X=pe:X=X.next=pe,S=S.next}while(S!==null);X===null?U=X=y:X=X.next=y}else U=X=y;S={baseState:R.baseState,firstBaseUpdate:U,lastBaseUpdate:X,shared:R.shared,callbacks:R.callbacks},p.updateQueue=S;return}p=S.lastBaseUpdate,p===null?S.firstBaseUpdate=y:p.next=y,S.lastBaseUpdate=y}var Bv=!1;function Iu(){if(Bv){var p=Qs;if(p!==null)throw p}}function Nh(p,y,S,R){Bv=!1;var U=p.updateQueue;qc=!1;var X=U.firstBaseUpdate,pe=U.lastBaseUpdate,Pe=U.shared.pending;if(Pe!==null){U.shared.pending=null;var et=Pe,Ot=et.next;et.next=null,pe===null?X=Ot:pe.next=Ot,pe=et;var zt=p.alternate;zt!==null&&(zt=zt.updateQueue,Pe=zt.lastBaseUpdate,Pe!==pe&&(Pe===null?zt.firstBaseUpdate=Ot:Pe.next=Ot,zt.lastBaseUpdate=et))}if(X!==null){var Yt=U.baseState;pe=0,zt=Ot=et=null,Pe=X;do{var Ct=Pe.lane&-536870913,Mt=Ct!==Pe.lane;if(Mt?(Vr&Ct)===Ct:(R&Ct)===Ct){Ct!==0&&Ct===Ud&&(Bv=!0),zt!==null&&(zt=zt.next={lane:0,tag:Pe.tag,payload:Pe.payload,callback:null,next:null});e:{var Nn=p,or=Pe;Ct=y;var Ai=S;switch(or.tag){case 1:if(Nn=or.payload,typeof Nn=="function"){Yt=Nn.call(Ai,Yt,Ct);break e}Yt=Nn;break e;case 3:Nn.flags=Nn.flags&-65537|128;case 0:if(Nn=or.payload,Ct=typeof Nn=="function"?Nn.call(Ai,Yt,Ct):Nn,Ct==null)break e;Yt=v({},Yt,Ct);break e;case 2:qc=!0}}Ct=Pe.callback,Ct!==null&&(p.flags|=64,Mt&&(p.flags|=8192),Mt=U.callbacks,Mt===null?U.callbacks=[Ct]:Mt.push(Ct))}else Mt={lane:Ct,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null},zt===null?(Ot=zt=Mt,et=Yt):zt=zt.next=Mt,pe|=Ct;if(Pe=Pe.next,Pe===null){if(Pe=U.shared.pending,Pe===null)break;Mt=Pe,Pe=Mt.next,Mt.next=null,U.lastBaseUpdate=Mt,U.shared.pending=null}}while(!0);zt===null&&(et=Yt),U.baseState=et,U.firstBaseUpdate=Ot,U.lastBaseUpdate=zt,X===null&&(U.shared.lanes=0),sf|=pe,p.lanes=pe,p.memoizedState=Yt}}function sg(p,y){if(typeof p!="function")throw Error(r(191,p));p.call(y)}function Xy(p,y){var S=p.callbacks;if(S!==null)for(p.callbacks=null,p=0;p<S.length;p++)sg(S[p],y)}var qd=Ae(null),ag=Ae(0);function Fv(p,y){p=of,ke(ag,p),ke(qd,y),of=p|y.baseLanes}function Ya(){ke(ag,of),ke(qd,qd.current)}function Wd(){of=ag.current,Xe(qd),Xe(ag)}var wn=Ae(null),Rn=null;function Cl(p){var y=p.alternate;ke(ho,ho.current&1),ke(wn,p),Rn===null&&(y===null||qd.current!==null||y.memoizedState!==null)&&(Rn=p)}function pp(p){ke(ho,ho.current),ke(wn,p),Rn===null&&(Rn=p)}function lg(p){p.tag===22?(ke(ho,ho.current),ke(wn,p),Rn===null&&(Rn=p)):To()}function To(){ke(ho,ho.current),ke(wn,wn.current)}function eo(p){Xe(wn),Rn===p&&(Rn=null),Xe(ho)}var ho=Ae(0);function cg(p){for(var y=p;y!==null;){if(y.tag===13){var S=y.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||Ma(S)||Wo(S)))return y}else if(y.tag===19&&(y.memoizedProps.revealOrder==="forwards"||y.memoizedProps.revealOrder==="backwards"||y.memoizedProps.revealOrder==="unstable_legacy-backwards"||y.memoizedProps.revealOrder==="together")){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var Du=0,Sr=null,ei=null,br=null,Zi=!1,Tl=!1,nc=!1,Hd=0,Gd=0,Lu=null,jv=0;function Li(){throw Error(r(321))}function rc(p,y){if(y===null)return!1;for(var S=0;S<y.length&&S<p.length;S++)if(!Oa(p[S],y[S]))return!1;return!0}function mp(p,y,S,R,U,X){return Du=X,Sr=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,ve.H=p===null||p.memoizedState===null?_i:No,nc=!1,X=S(R,U),nc=!1,Tl&&(X=ug(y,S,R,U)),gp(p),X}function gp(p){ve.H=oi;var y=ei!==null&&ei.next!==null;if(Du=0,br=ei=Sr=null,Zi=!1,Gd=0,Lu=null,y)throw Error(r(300));p===null||gs||(p=p.dependencies,p!==null&&up(p)&&(gs=!0))}function ug(p,y,S,R){Sr=p;var U=0;do{if(Tl&&(Lu=null),Gd=0,Tl=!1,25<=U)throw Error(r(301));if(U+=1,br=ei=null,p.updateQueue!=null){var X=p.updateQueue;X.lastEffect=null,X.events=null,X.stores=null,X.memoCache!=null&&(X.memoCache.index=0)}ve.H=qo,X=y(S,R)}while(Tl);return X}function hg(){var p=ve.H,y=p.useState()[0];return y=typeof y.then=="function"?Xd(y):y,p=p.useState()[0],(ei!==null?ei.memoizedState:null)!==p&&(Sr.flags|=1024),y}function dg(){var p=Hd!==0;return Hd=0,p}function Bh(p,y,S){y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~S}function $u(p){if(Zi){for(p=p.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Zi=!1}Du=0,br=ei=Sr=null,Tl=!1,Gd=Hd=0,Lu=null}function Ps(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?Sr.memoizedState=br=p:br=br.next=p,br}function qi(){if(ei===null){var p=Sr.alternate;p=p!==null?p.memoizedState:null}else p=ei.next;var y=br===null?Sr.memoizedState:br.next;if(y!==null)br=y,ei=p;else{if(p===null)throw Sr.alternate===null?Error(r(467)):Error(r(310));ei=p,p={memoizedState:ei.memoizedState,baseState:ei.baseState,baseQueue:ei.baseQueue,queue:ei.queue,next:null},br===null?Sr.memoizedState=br=p:br=br.next=p}return br}function Hc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xd(p){var y=Gd;return Gd+=1,Lu===null&&(Lu=[]),p=qy(Lu,p,y),y=Sr,(br===null?y.memoizedState:br.next)===null&&(y=y.alternate,ve.H=y===null||y.memoizedState===null?_i:No),p}function Yd(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return Xd(p);if(p.$$typeof===N)return zo(p)}throw Error(r(438,String(p)))}function yp(p){var y=null,S=Sr.updateQueue;if(S!==null&&(y=S.memoCache),y==null){var R=Sr.alternate;R!==null&&(R=R.updateQueue,R!==null&&(R=R.memoCache,R!=null&&(y={data:R.data.map(function(U){return U.slice()}),index:0})))}if(y==null&&(y={data:[],index:0}),S===null&&(S=Hc(),Sr.updateQueue=S),S.memoCache=y,S=y.data[y.index],S===void 0)for(S=y.data[y.index]=Array(p),R=0;R<p;R++)S[R]=ce;return y.index++,S}function ic(p,y){return typeof y=="function"?y(p):y}function P(p){var y=qi();return c(y,ei,p)}function c(p,y,S){var R=p.queue;if(R===null)throw Error(r(311));R.lastRenderedReducer=S;var U=p.baseQueue,X=R.pending;if(X!==null){if(U!==null){var pe=U.next;U.next=X.next,X.next=pe}y.baseQueue=U=X,R.pending=null}if(X=p.baseState,U===null)p.memoizedState=X;else{y=U.next;var Pe=pe=null,et=null,Ot=y,zt=!1;do{var Yt=Ot.lane&-536870913;if(Yt!==Ot.lane?(Vr&Yt)===Yt:(Du&Yt)===Yt){var Ct=Ot.revertLane;if(Ct===0)et!==null&&(et=et.next={lane:0,revertLane:0,gesture:null,action:Ot.action,hasEagerState:Ot.hasEagerState,eagerState:Ot.eagerState,next:null}),Yt===Ud&&(zt=!0);else if((Du&Ct)===Ct){Ot=Ot.next,Ct===Ud&&(zt=!0);continue}else Yt={lane:0,revertLane:Ot.revertLane,gesture:null,action:Ot.action,hasEagerState:Ot.hasEagerState,eagerState:Ot.eagerState,next:null},et===null?(Pe=et=Yt,pe=X):et=et.next=Yt,Sr.lanes|=Ct,sf|=Ct;Yt=Ot.action,nc&&S(X,Yt),X=Ot.hasEagerState?Ot.eagerState:S(X,Yt)}else Ct={lane:Yt,revertLane:Ot.revertLane,gesture:Ot.gesture,action:Ot.action,hasEagerState:Ot.hasEagerState,eagerState:Ot.eagerState,next:null},et===null?(Pe=et=Ct,pe=X):et=et.next=Ct,Sr.lanes|=Yt,sf|=Yt;Ot=Ot.next}while(Ot!==null&&Ot!==y);if(et===null?pe=X:et.next=Pe,!Oa(X,p.memoizedState)&&(gs=!0,zt&&(S=Qs,S!==null)))throw S;p.memoizedState=X,p.baseState=pe,p.baseQueue=et,R.lastRenderedState=X}return U===null&&(R.lanes=0),[p.memoizedState,R.dispatch]}function g(p){var y=qi(),S=y.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=p;var R=S.dispatch,U=S.pending,X=y.memoizedState;if(U!==null){S.pending=null;var pe=U=U.next;do X=p(X,pe.action),pe=pe.next;while(pe!==U);Oa(X,y.memoizedState)||(gs=!0),y.memoizedState=X,y.baseQueue===null&&(y.baseState=X),S.lastRenderedState=X}return[X,R]}function b(p,y,S){var R=Sr,U=qi(),X=Ir;if(X){if(S===void 0)throw Error(r(407));S=S()}else S=y();var pe=!Oa((ei||U).memoizedState,S);if(pe&&(U.memoizedState=S,gs=!0),U=U.queue,gt(z.bind(null,R,U,p),[p]),U.getSnapshot!==y||pe||br!==null&&br.memoizedState.tag&1){if(R.flags|=2048,Ze(9,{destroy:void 0},I.bind(null,R,U,S,y),null),Wi===null)throw Error(r(349));X||(Du&127)!==0||C(R,y,S)}return S}function C(p,y,S){p.flags|=16384,p={getSnapshot:y,value:S},y=Sr.updateQueue,y===null?(y=Hc(),Sr.updateQueue=y,y.stores=[p]):(S=y.stores,S===null?y.stores=[p]:S.push(p))}function I(p,y,S,R){y.value=S,y.getSnapshot=R,V(y)&&G(p)}function z(p,y,S){return S(function(){V(y)&&G(p)})}function V(p){var y=p.getSnapshot;p=p.value;try{var S=y();return!Oa(p,S)}catch{return!0}}function G(p){var y=bl(p,2);y!==null&&Il(y,p,2)}function J(p){var y=Ps();if(typeof p=="function"){var S=p;if(p=S(),nc){at(!0);try{S()}finally{at(!1)}}}return y.memoizedState=y.baseState=p,y.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:p},y}function ie(p,y,S,R){return p.baseState=S,c(p,ei,typeof R=="function"?R:ic)}function de(p,y,S,R,U){if(Ka(p))throw Error(r(485));if(p=y.action,p!==null){var X={payload:U,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(pe){X.listeners.push(pe)}};ve.T!==null?S(!0):X.isTransition=!1,R(X),S=y.pending,S===null?(X.next=y.pending=X,he(y,X)):(X.next=S.next,y.pending=S.next=X)}}function he(p,y){var S=y.action,R=y.payload,U=p.state;if(y.isTransition){var X=ve.T,pe={};ve.T=pe;try{var Pe=S(U,R),et=ve.S;et!==null&&et(pe,Pe),ye(p,y,Pe)}catch(Ot){Ie(p,y,Ot)}finally{X!==null&&pe.types!==null&&(X.types=pe.types),ve.T=X}}else try{X=S(U,R),ye(p,y,X)}catch(Ot){Ie(p,y,Ot)}}function ye(p,y,S){S!==null&&typeof S=="object"&&typeof S.then=="function"?S.then(function(R){Se(p,y,R)},function(R){return Ie(p,y,R)}):Se(p,y,S)}function Se(p,y,S){y.status="fulfilled",y.value=S,Le(y),p.state=S,y=p.pending,y!==null&&(S=y.next,S===y?p.pending=null:(S=S.next,y.next=S,he(p,S)))}function Ie(p,y,S){var R=p.pending;if(p.pending=null,R!==null){R=R.next;do y.status="rejected",y.reason=S,Le(y),y=y.next;while(y!==R)}p.action=null}function Le(p){p=p.listeners;for(var y=0;y<p.length;y++)(0,p[y])()}function De(p,y){return y}function Ve(p,y){if(Ir){var S=Wi.formState;if(S!==null){e:{var R=Sr;if(Ir){if(vi){t:{for(var U=vi,X=Ha;U.nodeType!==8;){if(!X){U=null;break t}if(U=uc(U.nextSibling),U===null){U=null;break t}}X=U.data,U=X==="F!"||X==="F"?U:null}if(U){vi=uc(U.nextSibling),R=U.data==="F!";break e}}Ca(R)}R=!1}R&&(y=S[0])}}return S=Ps(),S.memoizedState=S.baseState=y,R={pending:null,lanes:0,dispatch:null,lastRenderedReducer:De,lastRenderedState:y},S.queue=R,S=vp.bind(null,Sr,R),R.dispatch=S,R=J(!1),X=Aa.bind(null,Sr,!1,R.queue),R=Ps(),U={state:y,dispatch:null,action:p,pending:null},R.queue=U,S=de.bind(null,Sr,U,X,S),U.dispatch=S,R.memoizedState=p,[y,S,!1]}function He(p){var y=qi();return Fe(y,ei,p)}function Fe(p,y,S){if(y=c(p,y,De)[0],p=P(ic)[0],typeof y=="object"&&y!==null&&typeof y.then=="function")try{var R=Xd(y)}catch(pe){throw pe===ec?ka:pe}else R=y;y=qi();var U=y.queue,X=U.dispatch;return S!==y.memoizedState&&(Sr.flags|=2048,Ze(9,{destroy:void 0},We.bind(null,U,S),null)),[R,X,p]}function We(p,y){p.action=y}function Je(p){var y=qi(),S=ei;if(S!==null)return Fe(y,S,p);qi(),y=y.memoizedState,S=qi();var R=S.queue.dispatch;return S.memoizedState=p,[y,R,!1]}function Ze(p,y,S,R){return p={tag:p,create:S,deps:R,inst:y,next:null},y=Sr.updateQueue,y===null&&(y=Hc(),Sr.updateQueue=y),S=y.lastEffect,S===null?y.lastEffect=p.next=p:(R=S.next,S.next=p,p.next=R,y.lastEffect=p),p}function rt(){return qi().memoizedState}function xt(p,y,S,R){var U=Ps();Sr.flags|=p,U.memoizedState=Ze(1|y,{destroy:void 0},S,R===void 0?null:R)}function ht(p,y,S,R){var U=qi();R=R===void 0?null:R;var X=U.memoizedState.inst;ei!==null&&R!==null&&rc(R,ei.memoizedState.deps)?U.memoizedState=Ze(y,X,S,R):(Sr.flags|=p,U.memoizedState=Ze(1|y,X,S,R))}function mt(p,y){xt(8390656,8,p,y)}function gt(p,y){ht(2048,8,p,y)}function tn(p){Sr.flags|=4;var y=Sr.updateQueue;if(y===null)y=Hc(),Sr.updateQueue=y,y.events=[p];else{var S=y.events;S===null?y.events=[p]:S.push(p)}}function rn(p){var y=qi().memoizedState;return tn({ref:y,nextImpl:p}),function(){if((bi&2)!==0)throw Error(r(440));return y.impl.apply(void 0,arguments)}}function Bt(p,y){return ht(4,2,p,y)}function hn(p,y){return ht(4,4,p,y)}function cr(p,y){if(typeof y=="function"){p=p();var S=y(p);return function(){typeof S=="function"?S():y(null)}}if(y!=null)return p=p(),y.current=p,function(){y.current=null}}function ti(p,y,S){S=S!=null?S.concat([p]):null,ht(4,4,cr.bind(null,y,p),S)}function Ci(){}function xi(p,y){var S=qi();y=y===void 0?null:y;var R=S.memoizedState;return y!==null&&rc(y,R[1])?R[0]:(S.memoizedState=[p,y],p)}function $i(p,y){var S=qi();y=y===void 0?null:y;var R=S.memoizedState;if(y!==null&&rc(y,R[1]))return R[0];if(R=p(),nc){at(!0);try{p()}finally{at(!1)}}return S.memoizedState=[R,y],R}function hi(p,y,S){return S===void 0||(Du&1073741824)!==0&&(Vr&261930)===0?p.memoizedState=y:(p.memoizedState=S,p=LE(),Sr.lanes|=p,sf|=p,S)}function to(p,y,S,R){return Oa(S,y)?S:qd.current!==null?(p=hi(p,S,R),Oa(p,y)||(gs=!0),p):(Du&42)===0||(Du&1073741824)!==0&&(Vr&261930)===0?(gs=!0,p.memoizedState=S):(p=LE(),Sr.lanes|=p,sf|=p,y)}function zi(p,y,S,R,U){var X=Me.p;Me.p=X!==0&&8>X?X:8;var pe=ve.T,Pe={};ve.T=Pe,Aa(p,!1,y,S);try{var et=U(),Ot=ve.S;if(Ot!==null&&Ot(Pe,et),et!==null&&typeof et=="object"&&typeof et.then=="function"){var zt=tg(et,R);sc(p,y,zt,Rl(p))}else sc(p,y,R,Rl(p))}catch(Yt){sc(p,y,{then:function(){},status:"rejected",reason:Yt},Rl())}finally{Me.p=X,pe!==null&&Pe.types!==null&&(pe.types=Pe.types),ve.T=pe}}function ps(){}function fo(p,y,S,R){if(p.tag!==5)throw Error(r(476));var U=po(p).queue;zi(p,U,y,Ne,S===null?ps:function(){return ms(p),S(R)})}function po(p){var y=p.memoizedState;if(y!==null)return y;y={memoizedState:Ne,baseState:Ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:Ne},next:null};var S={};return y.next={memoizedState:S,baseState:S,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:S},next:null},p.memoizedState=y,p=p.alternate,p!==null&&(p.memoizedState=y),y}function ms(p){var y=po(p);y.next===null&&(y=p.alternate.memoizedState),sc(p,y.next.queue,{},Rl())}function Gc(){return zo(v0)}function Xc(){return qi().memoizedState}function oc(){return qi().memoizedState}function Ea(p){for(var y=p.return;y!==null;){switch(y.tag){case 24:case 3:var S=Rl();p=Wc(S);var R=Ru(y,p,S);R!==null&&(Il(R,y,S),Sl(R,y,S)),y={cache:Vc()},p.payload=y;return}y=y.return}}function Kd(p,y,S){var R=Rl();S={lane:R,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},Ka(p)?kl(y,S):(S=Mh(p,y,S,R),S!==null&&(Il(S,p,R),El(S,y,R)))}function vp(p,y,S){var R=Rl();sc(p,y,S,R)}function sc(p,y,S,R){var U={lane:R,revertLane:0,gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null};if(Ka(p))kl(y,U);else{var X=p.alternate;if(p.lanes===0&&(X===null||X.lanes===0)&&(X=y.lastRenderedReducer,X!==null))try{var pe=y.lastRenderedState,Pe=X(pe,S);if(U.hasEagerState=!0,U.eagerState=Pe,Oa(Pe,pe))return Km(p,y,U,0),Wi===null&&jd(),!1}catch{}if(S=Mh(p,y,U,R),S!==null)return Il(S,p,R),El(S,y,R),!0}return!1}function Aa(p,y,S,R){if(R={lane:2,revertLane:XS(),gesture:null,action:R,hasEagerState:!1,eagerState:null,next:null},Ka(p)){if(y)throw Error(r(479))}else y=Mh(p,S,R,2),y!==null&&Il(y,p,2)}function Ka(p){var y=p.alternate;return p===Sr||y!==null&&y===Sr}function kl(p,y){Tl=Zi=!0;var S=p.pending;S===null?y.next=y:(y.next=S.next,S.next=y),p.pending=y}function El(p,y,S){if((S&4194048)!==0){var R=y.lanes;R&=p.pendingLanes,S|=R,y.lanes=S,nr(p,S)}}var oi={readContext:zo,use:Yd,useCallback:Li,useContext:Li,useEffect:Li,useImperativeHandle:Li,useLayoutEffect:Li,useInsertionEffect:Li,useMemo:Li,useReducer:Li,useRef:Li,useState:Li,useDebugValue:Li,useDeferredValue:Li,useTransition:Li,useSyncExternalStore:Li,useId:Li,useHostTransitionStatus:Li,useFormState:Li,useActionState:Li,useOptimistic:Li,useMemoCache:Li,useCacheRefresh:Li};oi.useEffectEvent=Li;var _i={readContext:zo,use:Yd,useCallback:function(p,y){return Ps().memoizedState=[p,y===void 0?null:y],p},useContext:zo,useEffect:mt,useImperativeHandle:function(p,y,S){S=S!=null?S.concat([p]):null,xt(4194308,4,cr.bind(null,y,p),S)},useLayoutEffect:function(p,y){return xt(4194308,4,p,y)},useInsertionEffect:function(p,y){xt(4,2,p,y)},useMemo:function(p,y){var S=Ps();y=y===void 0?null:y;var R=p();if(nc){at(!0);try{p()}finally{at(!1)}}return S.memoizedState=[R,y],R},useReducer:function(p,y,S){var R=Ps();if(S!==void 0){var U=S(y);if(nc){at(!0);try{S(y)}finally{at(!1)}}}else U=y;return R.memoizedState=R.baseState=U,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:U},R.queue=p,p=p.dispatch=Kd.bind(null,Sr,p),[R.memoizedState,p]},useRef:function(p){var y=Ps();return p={current:p},y.memoizedState=p},useState:function(p){p=J(p);var y=p.queue,S=vp.bind(null,Sr,y);return y.dispatch=S,[p.memoizedState,S]},useDebugValue:Ci,useDeferredValue:function(p,y){var S=Ps();return hi(S,p,y)},useTransition:function(){var p=J(!1);return p=zi.bind(null,Sr,p.queue,!0,!1),Ps().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,y,S){var R=Sr,U=Ps();if(Ir){if(S===void 0)throw Error(r(407));S=S()}else{if(S=y(),Wi===null)throw Error(r(349));(Vr&127)!==0||C(R,y,S)}U.memoizedState=S;var X={value:S,getSnapshot:y};return U.queue=X,mt(z.bind(null,R,X,p),[p]),R.flags|=2048,Ze(9,{destroy:void 0},I.bind(null,R,X,S,y),null),S},useId:function(){var p=Ps(),y=Wi.identifierPrefix;if(Ir){var S=Sa,R=$c;S=(R&~(1<<32-St(R)-1)).toString(32)+S,y="_"+y+"R_"+S,S=Hd++,0<S&&(y+="H"+S.toString(32)),y+="_"}else S=jv++,y="_"+y+"r_"+S.toString(32)+"_";return p.memoizedState=y},useHostTransitionStatus:Gc,useFormState:Ve,useActionState:Ve,useOptimistic:function(p){var y=Ps();y.memoizedState=y.baseState=p;var S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return y.queue=S,y=Aa.bind(null,Sr,!0,S),S.dispatch=y,[p,y]},useMemoCache:yp,useCacheRefresh:function(){return Ps().memoizedState=Ea.bind(null,Sr)},useEffectEvent:function(p){var y=Ps(),S={impl:p};return y.memoizedState=S,function(){if((bi&2)!==0)throw Error(r(440));return S.impl.apply(void 0,arguments)}}},No={readContext:zo,use:Yd,useCallback:xi,useContext:zo,useEffect:gt,useImperativeHandle:ti,useInsertionEffect:Bt,useLayoutEffect:hn,useMemo:$i,useReducer:P,useRef:rt,useState:function(){return P(ic)},useDebugValue:Ci,useDeferredValue:function(p,y){var S=qi();return to(S,ei.memoizedState,p,y)},useTransition:function(){var p=P(ic)[0],y=qi().memoizedState;return[typeof p=="boolean"?p:Xd(p),y]},useSyncExternalStore:b,useId:Xc,useHostTransitionStatus:Gc,useFormState:He,useActionState:He,useOptimistic:function(p,y){var S=qi();return ie(S,ei,p,y)},useMemoCache:yp,useCacheRefresh:oc};No.useEffectEvent=rn;var qo={readContext:zo,use:Yd,useCallback:xi,useContext:zo,useEffect:gt,useImperativeHandle:ti,useInsertionEffect:Bt,useLayoutEffect:hn,useMemo:$i,useReducer:g,useRef:rt,useState:function(){return g(ic)},useDebugValue:Ci,useDeferredValue:function(p,y){var S=qi();return ei===null?hi(S,p,y):to(S,ei.memoizedState,p,y)},useTransition:function(){var p=g(ic)[0],y=qi().memoizedState;return[typeof p=="boolean"?p:Xd(p),y]},useSyncExternalStore:b,useId:Xc,useHostTransitionStatus:Gc,useFormState:Je,useActionState:Je,useOptimistic:function(p,y){var S=qi();return ei!==null?ie(S,ei,p,y):(S.baseState=p,[p,S.queue.dispatch])},useMemoCache:yp,useCacheRefresh:oc};qo.useEffectEvent=rn;function Yy(p,y,S,R){y=p.memoizedState,S=S(R,y),S=S==null?y:v({},y,S),p.memoizedState=S,p.lanes===0&&(p.updateQueue.baseState=S)}var Ky={enqueueSetState:function(p,y,S){p=p._reactInternals;var R=Rl(),U=Wc(R);U.payload=y,S!=null&&(U.callback=S),y=Ru(p,U,R),y!==null&&(Il(y,p,R),Sl(y,p,R))},enqueueReplaceState:function(p,y,S){p=p._reactInternals;var R=Rl(),U=Wc(R);U.tag=1,U.payload=y,S!=null&&(U.callback=S),y=Ru(p,U,R),y!==null&&(Il(y,p,R),Sl(y,p,R))},enqueueForceUpdate:function(p,y){p=p._reactInternals;var S=Rl(),R=Wc(S);R.tag=2,y!=null&&(R.callback=y),y=Ru(p,R,S),y!==null&&(Il(y,p,S),Sl(y,p,S))}};function Fh(p,y,S,R,U,X,pe){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(R,X,pe):y.prototype&&y.prototype.isPureReactComponent?!Ph(S,R)||!Ph(U,X):!0}function Ob(p,y,S,R){p=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(S,R),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(S,R),y.state!==p&&Ky.enqueueReplaceState(y,y.state,null)}function jh(p,y){var S=y;if("ref"in y){S={};for(var R in y)R!=="ref"&&(S[R]=y[R])}if(p=p.defaultProps){S===y&&(S=v({},S));for(var U in p)S[U]===void 0&&(S[U]=p[U])}return S}function Jy(p){Dc(p)}function zu(p){console.error(p)}function Nu(p){Dc(p)}function ac(p,y){try{var S=p.onUncaughtError;S(y.value,{componentStack:y.stack})}catch(R){setTimeout(function(){throw R})}}function e0(p,y,S){try{var R=p.onCaughtError;R(S.value,{componentStack:S.stack,errorBoundary:y.tag===1?y.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function fg(p,y,S){return S=Wc(S),S.tag=3,S.payload={element:null},S.callback=function(){ac(p,y)},S}function pg(p){return p=Wc(p),p.tag=3,p}function mg(p,y,S,R){var U=S.type.getDerivedStateFromError;if(typeof U=="function"){var X=R.value;p.payload=function(){return U(X)},p.callback=function(){e0(y,S,R)}}var pe=S.stateNode;pe!==null&&typeof pe.componentDidCatch=="function"&&(p.callback=function(){e0(y,S,R),typeof U!="function"&&(af===null?af=new Set([this]):af.add(this));var Pe=R.stack;this.componentDidCatch(R.value,{componentStack:Pe!==null?Pe:""})})}function Sb(p,y,S,R,U){if(S.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){if(y=S.alternate,y!==null&&Ga(y,S,U,!0),S=wn.current,S!==null){switch(S.tag){case 31:case 13:return Rn===null?sx():S.alternate===null&&Bo===0&&(Bo=3),S.flags&=-257,S.flags|=65536,S.lanes=U,R===xn?S.flags|=16384:(y=S.updateQueue,y===null?S.updateQueue=new Set([R]):y.add(R),Gb(p,R,U)),!1;case 22:return S.flags|=65536,R===xn?S.flags|=16384:(y=S.updateQueue,y===null?(y={transitions:null,markerInstances:null,retryQueue:new Set([R])},S.updateQueue=y):(S=y.retryQueue,S===null?y.retryQueue=new Set([R]):S.add(R)),Gb(p,R,U)),!1}throw Error(r(435,S.tag))}return Gb(p,R,U),sx(),!1}if(Ir)return y=wn.current,y!==null?((y.flags&65536)===0&&(y.flags|=256),y.flags|=65536,y.lanes=U,R!==Ji&&(p=Error(r(422),{cause:R}),Eu(ga(p,S)))):(R!==Ji&&(y=Error(r(423),{cause:R}),Eu(ga(y,S))),p=p.current.alternate,p.flags|=65536,U&=-U,p.lanes|=U,R=ga(R,S),U=fg(p.stateNode,R,U),ii(p,U),Bo!==4&&(Bo=2)),!1;var X=Error(r(520),{cause:R});if(X=ga(X,S),nx===null?nx=[X]:nx.push(X),Bo!==4&&(Bo=2),y===null)return!0;R=ga(R,S),S=y;do{switch(S.tag){case 3:return S.flags|=65536,p=U&-U,S.lanes|=p,p=fg(S.stateNode,R,p),ii(S,p),!1;case 1:if(y=S.type,X=S.stateNode,(S.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(af===null||!af.has(X))))return S.flags|=65536,U&=-U,S.lanes|=U,U=pg(U),mg(U,p,S,R),ii(S,U),!1}S=S.return}while(S!==null);return!1}var Cb=Error(r(461)),gs=!1;function Ms(p,y,S,R){y.child=p===null?Nv(y,null,S,R):Zc(y,p.child,S,R)}function vE(p,y,S,R,U){S=S.render;var X=y.ref;if("ref"in R){var pe={};for(var Pe in R)Pe!=="ref"&&(pe[Pe]=R[Pe])}else pe=R;return Mu(y),R=mp(p,y,S,pe,X,U),Pe=dg(),p!==null&&!gs?(Bh(p,y,U),Qh(p,y,U)):(Ir&&Pe&&Qd(y),y.flags|=1,Ms(p,y,R,U),y.child)}function Tb(p,y,S,R,U){if(p===null){var X=S.type;return typeof X=="function"&&!Ny(X)&&X.defaultProps===void 0&&S.compare===null?(y.tag=15,y.type=X,CS(p,y,X,R,U)):(p=By(S.type,null,R,y,y.mode,U),p.ref=y.ref,p.return=y,y.child=p)}if(X=p.child,!Uv(p,U)){var pe=X.memoizedProps;if(S=S.compare,S=S!==null?S:Ph,S(pe,R)&&p.ref===y.ref)return Qh(p,y,U)}return y.flags|=1,p=Wa(X,R),p.ref=y.ref,p.return=y,y.child=p}function CS(p,y,S,R,U){if(p!==null){var X=p.memoizedProps;if(Ph(X,R)&&p.ref===y.ref)if(gs=!1,y.pendingProps=R=X,Uv(p,U))(p.flags&131072)!==0&&(gs=!0);else return y.lanes=p.lanes,Qh(p,y,U)}return kS(p,y,S,R,U)}function TS(p,y,S,R){var U=R.children,X=p!==null?p.memoizedState:null;if(p===null&&y.stateNode===null&&(y.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),R.mode==="hidden"){if((y.flags&128)!==0){if(X=X!==null?X.baseLanes|S:S,p!==null){for(R=y.child=p.child,U=0;R!==null;)U=U|R.lanes|R.childLanes,R=R.sibling;R=U&~X}else R=0,y.child=null;return xE(p,y,X,S,R)}if((S&536870912)!==0)y.memoizedState={baseLanes:0,cachePool:null},p!==null&&Zy(y,X!==null?X.cachePool:null),X!==null?Fv(y,X):Ya(),lg(y);else return R=y.lanes=536870912,xE(p,y,X!==null?X.baseLanes|S:S,S,R)}else X!==null?(Zy(y,X.cachePool),Fv(y,X),To(),y.memoizedState=null):(p!==null&&Zy(y,null),Ya(),To());return Ms(p,y,U,S),y.child}function Vh(p,y){return p!==null&&p.tag===22||y.stateNode!==null||(y.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.sibling}function xE(p,y,S,R,U){var X=Uy();return X=X===null?null:{parent:Co._currentValue,pool:X},y.memoizedState={baseLanes:S,cachePool:X},p!==null&&Zy(y,null),Ya(),lg(y),p!==null&&Ga(p,y,R,!0),y.childLanes=U,null}function Jd(p,y){return y=Mb({mode:y.mode,children:y.children},p.mode),y.ref=p.ref,p.child=y,y.return=p,y}function Vv(p,y,S){return Zc(y,p.child,null,S),p=Jd(y,y.pendingProps),p.flags|=2,eo(y),y.memoizedState=null,p}function kb(p,y,S){var R=y.pendingProps,U=(y.flags&128)!==0;if(y.flags&=-129,p===null){if(Ir){if(R.mode==="hidden")return p=Jd(y,R),y.lanes=536870912,Vh(null,p);if(pp(y),(p=vi)?(p=Ep(p,Ha),p=p!==null&&p.data==="&"?p:null,p!==null&&(y.memoizedState={dehydrated:p,treeContext:Lc!==null?{id:$c,overflow:Sa}:null,retryLane:536870912,hydrationErrors:null},S=Fy(p),S.return=y,y.child=S,fs=y,vi=null)):p=null,p===null)throw Ca(y);return y.lanes=536870912,null}return Jd(y,R)}var X=p.memoizedState;if(X!==null){var pe=X.dehydrated;if(pp(y),U)if(y.flags&256)y.flags&=-257,y=Vv(p,y,S);else if(y.memoizedState!==null)y.child=p.child,y.flags|=128,y=null;else throw Error(r(558));else if(gs||Ga(p,y,S,!1),U=(S&p.childLanes)!==0,gs||U){if(R=Wi,R!==null&&(pe=ki(R,S),pe!==0&&pe!==X.retryLane))throw X.retryLane=pe,bl(p,pe),Il(R,p,pe),Cb;sx(),y=Vv(p,y,S)}else p=X.treeContext,vi=uc(pe.nextSibling),fs=y,Ir=!0,ku=null,Ha=!1,p!==null&&Lv(y,p),y=Jd(y,R),y.flags|=4096;return y}return p=Wa(p.child,{mode:R.mode,children:R.children}),p.ref=y.ref,y.child=p,p.return=y,p}function Eb(p,y){var S=y.ref;if(S===null)p!==null&&p.ref!==null&&(y.flags|=4194816);else{if(typeof S!="function"&&typeof S!="object")throw Error(r(284));(p===null||p.ref!==S)&&(y.flags|=4194816)}}function kS(p,y,S,R,U){return Mu(y),S=mp(p,y,S,R,void 0,U),R=dg(),p!==null&&!gs?(Bh(p,y,U),Qh(p,y,U)):(Ir&&R&&Qd(y),y.flags|=1,Ms(p,y,S,U),y.child)}function _E(p,y,S,R,U,X){return Mu(y),y.updateQueue=null,S=ug(y,R,S,U),gp(p),R=dg(),p!==null&&!gs?(Bh(p,y,X),Qh(p,y,X)):(Ir&&R&&Qd(y),y.flags|=1,Ms(p,y,S,X),y.child)}function bE(p,y,S,R,U){if(Mu(y),y.stateNode===null){var X=pr,pe=S.contextType;typeof pe=="object"&&pe!==null&&(X=zo(pe)),X=new S(R,X),y.memoizedState=X.state!==null&&X.state!==void 0?X.state:null,X.updater=Ky,y.stateNode=X,X._reactInternals=y,X=y.stateNode,X.props=R,X.state=y.memoizedState,X.refs={},Gy(y),pe=S.contextType,X.context=typeof pe=="object"&&pe!==null?zo(pe):pr,X.state=y.memoizedState,pe=S.getDerivedStateFromProps,typeof pe=="function"&&(Yy(y,S,pe,R),X.state=y.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(pe=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),pe!==X.state&&Ky.enqueueReplaceState(X,X.state,null),Nh(y,R,X,U),Iu(),X.state=y.memoizedState),typeof X.componentDidMount=="function"&&(y.flags|=4194308),R=!0}else if(p===null){X=y.stateNode;var Pe=y.memoizedProps,et=jh(S,Pe);X.props=et;var Ot=X.context,zt=S.contextType;pe=pr,typeof zt=="object"&&zt!==null&&(pe=zo(zt));var Yt=S.getDerivedStateFromProps;zt=typeof Yt=="function"||typeof X.getSnapshotBeforeUpdate=="function",Pe=y.pendingProps!==Pe,zt||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(Pe||Ot!==pe)&&Ob(y,X,R,pe),qc=!1;var Ct=y.memoizedState;X.state=Ct,Nh(y,R,X,U),Iu(),Ot=y.memoizedState,Pe||Ct!==Ot||qc?(typeof Yt=="function"&&(Yy(y,S,Yt,R),Ot=y.memoizedState),(et=qc||Fh(y,S,et,R,Ct,Ot,pe))?(zt||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(y.flags|=4194308)):(typeof X.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=R,y.memoizedState=Ot),X.props=R,X.state=Ot,X.context=pe,R=et):(typeof X.componentDidMount=="function"&&(y.flags|=4194308),R=!1)}else{X=y.stateNode,og(p,y),pe=y.memoizedProps,zt=jh(S,pe),X.props=zt,Yt=y.pendingProps,Ct=X.context,Ot=S.contextType,et=pr,typeof Ot=="object"&&Ot!==null&&(et=zo(Ot)),Pe=S.getDerivedStateFromProps,(Ot=typeof Pe=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(pe!==Yt||Ct!==et)&&Ob(y,X,R,et),qc=!1,Ct=y.memoizedState,X.state=Ct,Nh(y,R,X,U),Iu();var Mt=y.memoizedState;pe!==Yt||Ct!==Mt||qc||p!==null&&p.dependencies!==null&&up(p.dependencies)?(typeof Pe=="function"&&(Yy(y,S,Pe,R),Mt=y.memoizedState),(zt=qc||Fh(y,S,zt,R,Ct,Mt,et)||p!==null&&p.dependencies!==null&&up(p.dependencies))?(Ot||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(R,Mt,et),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(R,Mt,et)),typeof X.componentDidUpdate=="function"&&(y.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof X.componentDidUpdate!="function"||pe===p.memoizedProps&&Ct===p.memoizedState||(y.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||pe===p.memoizedProps&&Ct===p.memoizedState||(y.flags|=1024),y.memoizedProps=R,y.memoizedState=Mt),X.props=R,X.state=Mt,X.context=et,R=zt):(typeof X.componentDidUpdate!="function"||pe===p.memoizedProps&&Ct===p.memoizedState||(y.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||pe===p.memoizedProps&&Ct===p.memoizedState||(y.flags|=1024),R=!1)}return X=R,Eb(p,y),R=(y.flags&128)!==0,X||R?(X=y.stateNode,S=R&&typeof S.getDerivedStateFromError!="function"?null:X.render(),y.flags|=1,p!==null&&R?(y.child=Zc(y,p.child,null,U),y.child=Zc(y,null,S,U)):Ms(p,y,S,U),y.memoizedState=X.state,p=y.child):p=Qh(p,y,U),p}function wE(p,y,S,R){return Nc(),y.flags|=256,Ms(p,y,S,R),y.child}var Ab={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qv(p){return{baseLanes:p,cachePool:wb()}}function Pb(p,y,S){return p=p!==null?p.childLanes&~S:0,y&&(p|=ya),p}function ES(p,y,S){var R=y.pendingProps,U=!1,X=(y.flags&128)!==0,pe;if((pe=X)||(pe=p!==null&&p.memoizedState===null?!1:(ho.current&2)!==0),pe&&(U=!0,y.flags&=-129),pe=(y.flags&32)!==0,y.flags&=-33,p===null){if(Ir){if(U?Cl(y):To(),(p=vi)?(p=Ep(p,Ha),p=p!==null&&p.data!=="&"?p:null,p!==null&&(y.memoizedState={dehydrated:p,treeContext:Lc!==null?{id:$c,overflow:Sa}:null,retryLane:536870912,hydrationErrors:null},S=Fy(p),S.return=y,y.child=S,fs=y,vi=null)):p=null,p===null)throw Ca(y);return Wo(p)?y.lanes=32:y.lanes=536870912,null}var Pe=R.children;return R=R.fallback,U?(To(),U=y.mode,Pe=Mb({mode:"hidden",children:Pe},U),R=Rh(R,U,S,null),Pe.return=y,R.return=y,Pe.sibling=R,y.child=Pe,R=y.child,R.memoizedState=Qv(S),R.childLanes=Pb(p,pe,S),y.memoizedState=Ab,Vh(null,R)):(Cl(y),AS(y,Pe))}var et=p.memoizedState;if(et!==null&&(Pe=et.dehydrated,Pe!==null)){if(X)y.flags&256?(Cl(y),y.flags&=-257,y=Rb(p,y,S)):y.memoizedState!==null?(To(),y.child=p.child,y.flags|=128,y=null):(To(),Pe=R.fallback,U=y.mode,R=Mb({mode:"visible",children:R.children},U),Pe=Rh(Pe,U,S,null),Pe.flags|=2,R.return=y,Pe.return=y,R.sibling=Pe,y.child=R,Zc(y,p.child,null,S),R=y.child,R.memoizedState=Qv(S),R.childLanes=Pb(p,pe,S),y.memoizedState=Ab,y=Vh(null,R));else if(Cl(y),Wo(Pe)){if(pe=Pe.nextSibling&&Pe.nextSibling.dataset,pe)var Ot=pe.dgst;pe=Ot,R=Error(r(419)),R.stack="",R.digest=pe,Eu({value:R,source:null,stack:null}),y=Rb(p,y,S)}else if(gs||Ga(p,y,S,!1),pe=(S&p.childLanes)!==0,gs||pe){if(pe=Wi,pe!==null&&(R=ki(pe,S),R!==0&&R!==et.retryLane))throw et.retryLane=R,bl(p,R),Il(pe,p,R),Cb;Ma(Pe)||sx(),y=Rb(p,y,S)}else Ma(Pe)?(y.flags|=192,y.child=p.child,y=null):(p=et.treeContext,vi=uc(Pe.nextSibling),fs=y,Ir=!0,ku=null,Ha=!1,p!==null&&Lv(y,p),y=AS(y,R.children),y.flags|=4096);return y}return U?(To(),Pe=R.fallback,U=y.mode,et=p.child,Ot=et.sibling,R=Wa(et,{mode:"hidden",children:R.children}),R.subtreeFlags=et.subtreeFlags&65011712,Ot!==null?Pe=Wa(Ot,Pe):(Pe=Rh(Pe,U,S,null),Pe.flags|=2),Pe.return=y,R.return=y,R.sibling=Pe,y.child=R,Vh(null,R),R=y.child,Pe=p.child.memoizedState,Pe===null?Pe=Qv(S):(U=Pe.cachePool,U!==null?(et=Co._currentValue,U=U.parent!==et?{parent:et,pool:et}:U):U=wb(),Pe={baseLanes:Pe.baseLanes|S,cachePool:U}),R.memoizedState=Pe,R.childLanes=Pb(p,pe,S),y.memoizedState=Ab,Vh(p.child,R)):(Cl(y),S=p.child,p=S.sibling,S=Wa(S,{mode:"visible",children:R.children}),S.return=y,S.sibling=null,p!==null&&(pe=y.deletions,pe===null?(y.deletions=[p],y.flags|=16):pe.push(p)),y.child=S,y.memoizedState=null,S)}function AS(p,y){return y=Mb({mode:"visible",children:y},p.mode),y.return=p,p.child=y}function Mb(p,y){return p=qa(22,p,null,y),p.lanes=0,p}function Rb(p,y,S){return Zc(y,p.child,null,S),p=AS(y,y.pendingProps.children),p.flags|=2,y.memoizedState=null,p}function PS(p,y,S){p.lanes|=y;var R=p.alternate;R!==null&&(R.lanes|=y),jy(p.return,y,S)}function MS(p,y,S,R,U,X){var pe=p.memoizedState;pe===null?p.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:R,tail:S,tailMode:U,treeForkCount:X}:(pe.isBackwards=y,pe.rendering=null,pe.renderingStartTime=0,pe.last=R,pe.tail=S,pe.tailMode=U,pe.treeForkCount=X)}function Ib(p,y,S){var R=y.pendingProps,U=R.revealOrder,X=R.tail;R=R.children;var pe=ho.current,Pe=(pe&2)!==0;if(Pe?(pe=pe&1|2,y.flags|=128):pe&=1,ke(ho,pe),Ms(p,y,R,S),R=Ir?$h:0,!Pe&&p!==null&&(p.flags&128)!==0)e:for(p=y.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&PS(p,S,y);else if(p.tag===19)PS(p,S,y);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===y)break e;for(;p.sibling===null;){if(p.return===null||p.return===y)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}switch(U){case"forwards":for(S=y.child,U=null;S!==null;)p=S.alternate,p!==null&&cg(p)===null&&(U=S),S=S.sibling;S=U,S===null?(U=y.child,y.child=null):(U=S.sibling,S.sibling=null),MS(y,!1,U,S,X,R);break;case"backwards":case"unstable_legacy-backwards":for(S=null,U=y.child,y.child=null;U!==null;){if(p=U.alternate,p!==null&&cg(p)===null){y.child=U;break}p=U.sibling,U.sibling=S,S=U,U=p}MS(y,!0,S,null,X,R);break;case"together":MS(y,!1,null,null,void 0,R);break;default:y.memoizedState=null}return y.child}function Qh(p,y,S){if(p!==null&&(y.dependencies=p.dependencies),sf|=y.lanes,(S&y.childLanes)===0)if(p!==null){if(Ga(p,y,S,!1),(S&y.childLanes)===0)return null}else return null;if(p!==null&&y.child!==p.child)throw Error(r(153));if(y.child!==null){for(p=y.child,S=Wa(p,p.pendingProps),y.child=S,S.return=y;p.sibling!==null;)p=p.sibling,S=S.sibling=Wa(p,p.pendingProps),S.return=y;S.sibling=null}return y.child}function Uv(p,y){return(p.lanes&y)!==0?!0:(p=p.dependencies,!!(p!==null&&up(p)))}function Zv(p,y,S){switch(y.tag){case 3:yt(y,y.stateNode.containerInfo),Pu(y,Co,p.memoizedState.cache),Nc();break;case 27:case 5:Tt(y);break;case 4:yt(y,y.stateNode.containerInfo);break;case 10:Pu(y,y.type,y.memoizedProps.value);break;case 31:if(y.memoizedState!==null)return y.flags|=128,pp(y),null;break;case 13:var R=y.memoizedState;if(R!==null)return R.dehydrated!==null?(Cl(y),y.flags|=128,null):(S&y.child.childLanes)!==0?ES(p,y,S):(Cl(y),p=Qh(p,y,S),p!==null?p.sibling:null);Cl(y);break;case 19:var U=(p.flags&128)!==0;if(R=(S&y.childLanes)!==0,R||(Ga(p,y,S,!1),R=(S&y.childLanes)!==0),U){if(R)return Ib(p,y,S);y.flags|=128}if(U=y.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),ke(ho,ho.current),R)break;return null;case 22:return y.lanes=0,TS(p,y,S,y.pendingProps);case 24:Pu(y,Co,p.memoizedState.cache)}return Qh(p,y,S)}function Pa(p,y,S){if(p!==null)if(p.memoizedProps!==y.pendingProps)gs=!0;else{if(!Uv(p,S)&&(y.flags&128)===0)return gs=!1,Zv(p,y,S);gs=(p.flags&131072)!==0}else gs=!1,Ir&&(y.flags&1048576)!==0&&Dv(y,$h,y.index);switch(y.lanes=0,y.tag){case 16:e:{var R=y.pendingProps;if(p=Ol(y.elementType),y.type=p,typeof p=="function")Ny(p)?(R=jh(p,R),y.tag=1,y=bE(null,y,p,R,S)):(y.tag=0,y=kS(null,y,p,R,S));else{if(p!=null){var U=p.$$typeof;if(U===F){y.tag=11,y=vE(null,y,p,R,S);break e}else if(U===H){y.tag=14,y=Tb(null,y,p,R,S);break e}}throw y=be(p)||p,Error(r(306,y,""))}}return y;case 0:return kS(p,y,y.type,y.pendingProps,S);case 1:return R=y.type,U=jh(R,y.pendingProps),bE(p,y,R,U,S);case 3:e:{if(yt(y,y.stateNode.containerInfo),p===null)throw Error(r(387));R=y.pendingProps;var X=y.memoizedState;U=X.element,og(p,y),Nh(y,R,null,S);var pe=y.memoizedState;if(R=pe.cache,Pu(y,Co,R),R!==X.cache&&Vy(y,[Co],S,!0),Iu(),R=pe.element,X.isDehydrated)if(X={element:R,isDehydrated:!1,cache:pe.cache},y.updateQueue.baseState=X,y.memoizedState=X,y.flags&256){y=wE(p,y,R,S);break e}else if(R!==U){U=ga(Error(r(424)),y),Eu(U),y=wE(p,y,R,S);break e}else for(p=y.stateNode.containerInfo,p.nodeType===9?p=p.body:p=p.nodeName==="HTML"?p.ownerDocument.body:p,vi=uc(p.firstChild),fs=y,Ir=!0,ku=null,Ha=!0,S=Nv(y,null,R,S),y.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(Nc(),R===U){y=Qh(p,y,S);break e}Ms(p,y,R,S)}y=y.child}return y;case 26:return Eb(p,y),p===null?(S=h2(y.type,null,y.pendingProps,null))?y.memoizedState=S:Ir||(S=y.type,p=y.pendingProps,R=dx(lt.current).createElement(S),R[Si]=y,R[on]=p,Is(R,S,p),lo(R),y.stateNode=R):y.memoizedState=h2(y.type,p.memoizedProps,y.pendingProps,p.memoizedState),null;case 27:return Tt(y),p===null&&Ir&&(R=y.stateNode=nA(y.type,y.pendingProps,lt.current),fs=y,Ha=!0,U=vi,kp(y.type)?(nl=U,vi=uc(R.firstChild)):vi=U),Ms(p,y,y.pendingProps.children,S),Eb(p,y),p===null&&(y.flags|=4194304),y.child;case 5:return p===null&&Ir&&((U=R=vi)&&(R=Us(R,y.type,y.pendingProps,Ha),R!==null?(y.stateNode=R,fs=y,vi=uc(R.firstChild),Ha=!1,U=!0):U=!1),U||Ca(y)),Tt(y),U=y.type,X=y.pendingProps,pe=p!==null?p.memoizedProps:null,R=X.children,s1(U,X)?R=null:pe!==null&&s1(U,pe)&&(y.flags|=32),y.memoizedState!==null&&(U=mp(p,y,hg,null,null,S),v0._currentValue=U),Eb(p,y),Ms(p,y,R,S),y.child;case 6:return p===null&&Ir&&((p=S=vi)&&(S=Qu(S,y.pendingProps,Ha),S!==null?(y.stateNode=S,fs=y,vi=null,p=!0):p=!1),p||Ca(y)),null;case 13:return ES(p,y,S);case 4:return yt(y,y.stateNode.containerInfo),R=y.pendingProps,p===null?y.child=Zc(y,null,R,S):Ms(p,y,R,S),y.child;case 11:return vE(p,y,y.type,y.pendingProps,S);case 7:return Ms(p,y,y.pendingProps,S),y.child;case 8:return Ms(p,y,y.pendingProps.children,S),y.child;case 12:return Ms(p,y,y.pendingProps.children,S),y.child;case 10:return R=y.pendingProps,Pu(y,y.type,R.value),Ms(p,y,R.children,S),y.child;case 9:return U=y.type._context,R=y.pendingProps.children,Mu(y),U=zo(U),R=R(U),y.flags|=1,Ms(p,y,R,S),y.child;case 14:return Tb(p,y,y.type,y.pendingProps,S);case 15:return CS(p,y,y.type,y.pendingProps,S);case 19:return Ib(p,y,S);case 31:return kb(p,y,S);case 22:return TS(p,y,S,y.pendingProps);case 24:return Mu(y),R=zo(Co),p===null?(U=Uy(),U===null&&(U=Wi,X=Vc(),U.pooledCache=X,X.refCount++,X!==null&&(U.pooledCacheLanes|=S),U=X),y.memoizedState={parent:R,cache:U},Gy(y),Pu(y,Co,U)):((p.lanes&S)!==0&&(og(p,y),Nh(y,null,null,S),Iu()),U=p.memoizedState,X=y.memoizedState,U.parent!==R?(U={parent:R,cache:R},y.memoizedState=U,y.lanes===0&&(y.memoizedState=y.updateQueue.baseState=U),Pu(y,Co,R)):(R=X.cache,Pu(y,Co,R),R!==U.cache&&Vy(y,[Co],S,!0))),Ms(p,y,y.pendingProps.children,S),y.child;case 29:throw y.pendingProps}throw Error(r(156,y.tag))}function Uh(p){p.flags|=4}function qv(p,y,S,R,U){if((y=(p.mode&32)!==0)&&(y=!1),y){if(p.flags|=16777216,(U&335544128)===U)if(p.stateNode.complete)p.flags|=8192;else if(QS())p.flags|=8192;else throw tc=xn,zh}else p.flags&=-16777217}function OE(p,y){if(y.type!=="stylesheet"||(y.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!gx(y))if(QS())p.flags|=8192;else throw tc=xn,zh}function Wv(p,y){y!==null&&(p.flags|=4),p.flags&16384&&(y=p.tag!==22?Pn():536870912,p.lanes|=y,_g|=y)}function Hv(p,y){if(!Ir)switch(p.tailMode){case"hidden":y=p.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?p.tail=null:S.sibling=null;break;case"collapsed":S=p.tail;for(var R=null;S!==null;)S.alternate!==null&&(R=S),S=S.sibling;R===null?y||p.tail===null?p.tail=null:p.tail.sibling=null:R.sibling=null}}function mo(p){var y=p.alternate!==null&&p.alternate.child===p.child,S=0,R=0;if(y)for(var U=p.child;U!==null;)S|=U.lanes|U.childLanes,R|=U.subtreeFlags&65011712,R|=U.flags&65011712,U.return=p,U=U.sibling;else for(U=p.child;U!==null;)S|=U.lanes|U.childLanes,R|=U.subtreeFlags,R|=U.flags,U.return=p,U=U.sibling;return p.subtreeFlags|=R,p.childLanes=S,y}function SE(p,y,S){var R=y.pendingProps;switch(cp(y),y.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mo(y),null;case 1:return mo(y),null;case 3:return S=y.stateNode,R=null,p!==null&&(R=p.memoizedState.cache),y.memoizedState.cache!==R&&(y.flags|=2048),jc(Co),Et(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(p===null||p.child===null)&&(zc(y)?Uh(y):p===null||p.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Bc())),mo(y),null;case 26:var U=y.type,X=y.memoizedState;return p===null?(Uh(y),X!==null?(mo(y),OE(y,X)):(mo(y),qv(y,U,null,R,S))):X?X!==p.memoizedState?(Uh(y),mo(y),OE(y,X)):(mo(y),y.flags&=-16777217):(p=p.memoizedProps,p!==R&&Uh(y),mo(y),qv(y,U,p,R,S)),null;case 27:if(Ht(y),S=lt.current,U=y.type,p!==null&&y.stateNode!=null)p.memoizedProps!==R&&Uh(y);else{if(!R){if(y.stateNode===null)throw Error(r(166));return mo(y),null}p=ft.current,zc(y)?Ta(y):(p=nA(U,R,S),y.stateNode=p,Uh(y))}return mo(y),null;case 5:if(Ht(y),U=y.type,p!==null&&y.stateNode!=null)p.memoizedProps!==R&&Uh(y);else{if(!R){if(y.stateNode===null)throw Error(r(166));return mo(y),null}if(X=ft.current,zc(y))Ta(y);else{var pe=dx(lt.current);switch(X){case 1:X=pe.createElementNS("http://www.w3.org/2000/svg",U);break;case 2:X=pe.createElementNS("http://www.w3.org/1998/Math/MathML",U);break;default:switch(U){case"svg":X=pe.createElementNS("http://www.w3.org/2000/svg",U);break;case"math":X=pe.createElementNS("http://www.w3.org/1998/Math/MathML",U);break;case"script":X=pe.createElement("div"),X.innerHTML="<script><\/script>",X=X.removeChild(X.firstChild);break;case"select":X=typeof R.is=="string"?pe.createElement("select",{is:R.is}):pe.createElement("select"),R.multiple?X.multiple=!0:R.size&&(X.size=R.size);break;default:X=typeof R.is=="string"?pe.createElement(U,{is:R.is}):pe.createElement(U)}}X[Si]=y,X[on]=R;e:for(pe=y.child;pe!==null;){if(pe.tag===5||pe.tag===6)X.appendChild(pe.stateNode);else if(pe.tag!==4&&pe.tag!==27&&pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===y)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===y)break e;pe=pe.return}pe.sibling.return=pe.return,pe=pe.sibling}y.stateNode=X;e:switch(Is(X,U,R),U){case"button":case"input":case"select":case"textarea":R=!!R.autoFocus;break e;case"img":R=!0;break e;default:R=!1}R&&Uh(y)}}return mo(y),qv(y,y.type,p===null?null:p.memoizedProps,y.pendingProps,S),null;case 6:if(p&&y.stateNode!=null)p.memoizedProps!==R&&Uh(y);else{if(typeof R!="string"&&y.stateNode===null)throw Error(r(166));if(p=lt.current,zc(y)){if(p=y.stateNode,S=y.memoizedProps,R=null,U=fs,U!==null)switch(U.tag){case 27:case 5:R=U.memoizedProps}p[Si]=y,p=!!(p.nodeValue===S||R!==null&&R.suppressHydrationWarning===!0||t2(p.nodeValue,S)),p||Ca(y,!0)}else p=dx(p).createTextNode(R),p[Si]=y,y.stateNode=p}return mo(y),null;case 31:if(S=y.memoizedState,p===null||p.memoizedState!==null){if(R=zc(y),S!==null){if(p===null){if(!R)throw Error(r(318));if(p=y.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(557));p[Si]=y}else Nc(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;mo(y),p=!1}else S=Bc(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=S),p=!0;if(!p)return y.flags&256?(eo(y),y):(eo(y),null);if((y.flags&128)!==0)throw Error(r(558))}return mo(y),null;case 13:if(R=y.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(U=zc(y),R!==null&&R.dehydrated!==null){if(p===null){if(!U)throw Error(r(318));if(U=y.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(r(317));U[Si]=y}else Nc(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;mo(y),U=!1}else U=Bc(),p!==null&&p.memoizedState!==null&&(p.memoizedState.hydrationErrors=U),U=!0;if(!U)return y.flags&256?(eo(y),y):(eo(y),null)}return eo(y),(y.flags&128)!==0?(y.lanes=S,y):(S=R!==null,p=p!==null&&p.memoizedState!==null,S&&(R=y.child,U=null,R.alternate!==null&&R.alternate.memoizedState!==null&&R.alternate.memoizedState.cachePool!==null&&(U=R.alternate.memoizedState.cachePool.pool),X=null,R.memoizedState!==null&&R.memoizedState.cachePool!==null&&(X=R.memoizedState.cachePool.pool),X!==U&&(R.flags|=2048)),S!==p&&S&&(y.child.flags|=8192),Wv(y,y.updateQueue),mo(y),null);case 4:return Et(),p===null&&JS(y.stateNode.containerInfo),mo(y),null;case 10:return jc(y.type),mo(y),null;case 19:if(Xe(ho),R=y.memoizedState,R===null)return mo(y),null;if(U=(y.flags&128)!==0,X=R.rendering,X===null)if(U)Hv(R,!1);else{if(Bo!==0||p!==null&&(p.flags&128)!==0)for(p=y.child;p!==null;){if(X=cg(p),X!==null){for(y.flags|=128,Hv(R,!1),p=X.updateQueue,y.updateQueue=p,Wv(y,p),y.subtreeFlags=0,p=S,S=y.child;S!==null;)_b(S,p),S=S.sibling;return ke(ho,ho.current&1|2),Ir&&Tu(y,R.treeForkCount),y.child}p=p.sibling}R.tail!==null&&kt()>rx&&(y.flags|=128,U=!0,Hv(R,!1),y.lanes=4194304)}else{if(!U)if(p=cg(X),p!==null){if(y.flags|=128,U=!0,p=p.updateQueue,y.updateQueue=p,Wv(y,p),Hv(R,!0),R.tail===null&&R.tailMode==="hidden"&&!X.alternate&&!Ir)return mo(y),null}else 2*kt()-R.renderingStartTime>rx&&S!==536870912&&(y.flags|=128,U=!0,Hv(R,!1),y.lanes=4194304);R.isBackwards?(X.sibling=y.child,y.child=X):(p=R.last,p!==null?p.sibling=X:y.child=X,R.last=X)}return R.tail!==null?(p=R.tail,R.rendering=p,R.tail=p.sibling,R.renderingStartTime=kt(),p.sibling=null,S=ho.current,ke(ho,U?S&1|2:S&1),Ir&&Tu(y,R.treeForkCount),p):(mo(y),null);case 22:case 23:return eo(y),Wd(),R=y.memoizedState!==null,p!==null?p.memoizedState!==null!==R&&(y.flags|=8192):R&&(y.flags|=8192),R?(S&536870912)!==0&&(y.flags&128)===0&&(mo(y),y.subtreeFlags&6&&(y.flags|=8192)):mo(y),S=y.updateQueue,S!==null&&Wv(y,S.retryQueue),S=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),R=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(R=y.memoizedState.cachePool.pool),R!==S&&(y.flags|=2048),p!==null&&Xe(Jl),null;case 24:return S=null,p!==null&&(S=p.memoizedState.cache),y.memoizedState.cache!==S&&(y.flags|=2048),jc(Co),mo(y),null;case 25:return null;case 30:return null}throw Error(r(156,y.tag))}function SD(p,y){switch(cp(y),y.tag){case 1:return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 3:return jc(Co),Et(),p=y.flags,(p&65536)!==0&&(p&128)===0?(y.flags=p&-65537|128,y):null;case 26:case 27:case 5:return Ht(y),null;case 31:if(y.memoizedState!==null){if(eo(y),y.alternate===null)throw Error(r(340));Nc()}return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 13:if(eo(y),p=y.memoizedState,p!==null&&p.dehydrated!==null){if(y.alternate===null)throw Error(r(340));Nc()}return p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 19:return Xe(ho),null;case 4:return Et(),null;case 10:return jc(y.type),null;case 22:case 23:return eo(y),Wd(),p!==null&&Xe(Jl),p=y.flags,p&65536?(y.flags=p&-65537|128,y):null;case 24:return jc(Co),null;case 25:return null;default:return null}}function Db(p,y){switch(cp(y),y.tag){case 3:jc(Co),Et();break;case 26:case 27:case 5:Ht(y);break;case 4:Et();break;case 31:y.memoizedState!==null&&eo(y);break;case 13:eo(y);break;case 19:Xe(ho);break;case 10:jc(y.type);break;case 22:case 23:eo(y),Wd(),p!==null&&Xe(Jl);break;case 24:jc(Co)}}function t0(p,y){try{var S=y.updateQueue,R=S!==null?S.lastEffect:null;if(R!==null){var U=R.next;S=U;do{if((S.tag&p)===p){R=void 0;var X=S.create,pe=S.inst;R=X(),pe.destroy=R}S=S.next}while(S!==U)}}catch(Pe){wi(y,y.return,Pe)}}function ef(p,y,S){try{var R=y.updateQueue,U=R!==null?R.lastEffect:null;if(U!==null){var X=U.next;R=X;do{if((R.tag&p)===p){var pe=R.inst,Pe=pe.destroy;if(Pe!==void 0){pe.destroy=void 0,U=y;var et=S,Ot=Pe;try{Ot()}catch(zt){wi(U,et,zt)}}}R=R.next}while(R!==X)}}catch(zt){wi(y,y.return,zt)}}function CE(p){var y=p.updateQueue;if(y!==null){var S=p.stateNode;try{Xy(y,S)}catch(R){wi(p,p.return,R)}}}function TE(p,y,S){S.props=jh(p.type,p.memoizedProps),S.state=p.memoizedState;try{S.componentWillUnmount()}catch(R){wi(p,y,R)}}function Gv(p,y){try{var S=p.ref;if(S!==null){switch(p.tag){case 26:case 27:case 5:var R=p.stateNode;break;case 30:R=p.stateNode;break;default:R=p.stateNode}typeof S=="function"?p.refCleanup=S(R):S.current=R}}catch(U){wi(p,y,U)}}function lc(p,y){var S=p.ref,R=p.refCleanup;if(S!==null)if(typeof R=="function")try{R()}catch(U){wi(p,y,U)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof S=="function")try{S(null)}catch(U){wi(p,y,U)}else S.current=null}function Lb(p){var y=p.type,S=p.memoizedProps,R=p.stateNode;try{e:switch(y){case"button":case"input":case"select":case"textarea":S.autoFocus&&R.focus();break e;case"img":S.src?R.src=S.src:S.srcSet&&(R.srcset=S.srcSet)}}catch(U){wi(p,p.return,U)}}function $b(p,y,S){try{var R=p.stateNode;eA(R,p.type,S,y),R[on]=y}catch(U){wi(p,p.return,U)}}function xp(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27&&kp(p.type)||p.tag===4}function gg(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||xp(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.tag===27&&kp(p.type)||p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function RS(p,y,S){var R=p.tag;if(R===5||R===6)p=p.stateNode,y?(S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S).insertBefore(p,y):(y=S.nodeType===9?S.body:S.nodeName==="HTML"?S.ownerDocument.body:S,y.appendChild(p),S=S._reactRootContainer,S!=null||y.onclick!==null||(y.onclick=Yl));else if(R!==4&&(R===27&&kp(p.type)&&(S=p.stateNode,y=null),p=p.child,p!==null))for(RS(p,y,S),p=p.sibling;p!==null;)RS(p,y,S),p=p.sibling}function zb(p,y,S){var R=p.tag;if(R===5||R===6)p=p.stateNode,y?S.insertBefore(p,y):S.appendChild(p);else if(R!==4&&(R===27&&kp(p.type)&&(S=p.stateNode),p=p.child,p!==null))for(zb(p,y,S),p=p.sibling;p!==null;)zb(p,y,S),p=p.sibling}function kE(p){var y=p.stateNode,S=p.memoizedProps;try{for(var R=p.type,U=y.attributes;U.length;)y.removeAttributeNode(U[0]);Is(y,R,S),y[Si]=p,y[on]=S}catch(X){wi(p,p.return,X)}}var tf=!1,ys=!1,IS=!1,EE=typeof WeakSet=="function"?WeakSet:Set,vs=null;function CD(p,y){if(p=p.containerInfo,hx=bx,p=Ry(p),qm(p)){if("selectionStart"in p)var S={start:p.selectionStart,end:p.selectionEnd};else e:{S=(S=p.ownerDocument)&&S.defaultView||window;var R=S.getSelection&&S.getSelection();if(R&&R.rangeCount!==0){S=R.anchorNode;var U=R.anchorOffset,X=R.focusNode;R=R.focusOffset;try{S.nodeType,X.nodeType}catch{S=null;break e}var pe=0,Pe=-1,et=-1,Ot=0,zt=0,Yt=p,Ct=null;t:for(;;){for(var Mt;Yt!==S||U!==0&&Yt.nodeType!==3||(Pe=pe+U),Yt!==X||R!==0&&Yt.nodeType!==3||(et=pe+R),Yt.nodeType===3&&(pe+=Yt.nodeValue.length),(Mt=Yt.firstChild)!==null;)Ct=Yt,Yt=Mt;for(;;){if(Yt===p)break t;if(Ct===S&&++Ot===U&&(Pe=pe),Ct===X&&++zt===R&&(et=pe),(Mt=Yt.nextSibling)!==null)break;Yt=Ct,Ct=Yt.parentNode}Yt=Mt}S=Pe===-1||et===-1?null:{start:Pe,end:et}}else S=null}S=S||{start:0,end:0}}else S=null;for(n2={focusedElem:p,selectionRange:S},bx=!1,vs=y;vs!==null;)if(y=vs,p=y.child,(y.subtreeFlags&1028)!==0&&p!==null)p.return=y,vs=p;else for(;vs!==null;){switch(y=vs,X=y.alternate,p=y.flags,y.tag){case 0:if((p&4)!==0&&(p=y.updateQueue,p=p!==null?p.events:null,p!==null))for(S=0;S<p.length;S++)U=p[S],U.ref.impl=U.nextImpl;break;case 11:case 15:break;case 1:if((p&1024)!==0&&X!==null){p=void 0,S=y,U=X.memoizedProps,X=X.memoizedState,R=S.stateNode;try{var Nn=jh(S.type,U);p=R.getSnapshotBeforeUpdate(Nn,X),R.__reactInternalSnapshotBeforeUpdate=p}catch(or){wi(S,S.return,or)}}break;case 3:if((p&1024)!==0){if(p=y.stateNode.containerInfo,S=p.nodeType,S===9)Vu(p);else if(S===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":Vu(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=y.sibling,p!==null){p.return=y.return,vs=p;break}vs=y.return}}function DS(p,y,S){var R=S.flags;switch(S.tag){case 0:case 11:case 15:Pl(p,S),R&4&&t0(5,S);break;case 1:if(Pl(p,S),R&4)if(p=S.stateNode,y===null)try{p.componentDidMount()}catch(pe){wi(S,S.return,pe)}else{var U=jh(S.type,y.memoizedProps);y=y.memoizedState;try{p.componentDidUpdate(U,y,p.__reactInternalSnapshotBeforeUpdate)}catch(pe){wi(S,S.return,pe)}}R&64&&CE(S),R&512&&Gv(S,S.return);break;case 3:if(Pl(p,S),R&64&&(p=S.updateQueue,p!==null)){if(y=null,S.child!==null)switch(S.child.tag){case 27:case 5:y=S.child.stateNode;break;case 1:y=S.child.stateNode}try{Xy(p,y)}catch(pe){wi(S,S.return,pe)}}break;case 27:y===null&&R&4&&kE(S);case 26:case 5:Pl(p,S),y===null&&R&4&&Lb(S),R&512&&Gv(S,S.return);break;case 12:Pl(p,S);break;case 31:Pl(p,S),R&4&&Xv(p,S);break;case 13:Pl(p,S),R&4&&Yv(p,S),R&64&&(p=S.memoizedState,p!==null&&(p=p.dehydrated,p!==null&&(S=ZS.bind(null,S),_s(p,S))));break;case 22:if(R=S.memoizedState!==null||tf,!R){y=y!==null&&y.memoizedState!==null||ys,U=tf;var X=ys;tf=R,(ys=y)&&!X?nf(p,S,(S.subtreeFlags&8772)!==0):Pl(p,S),tf=U,ys=X}break;case 30:break;default:Pl(p,S)}}function n0(p){var y=p.alternate;y!==null&&(p.alternate=null,n0(y)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(y=p.stateNode,y!==null&&kd(y)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var ko=null,Wr=!1;function Al(p,y,S){for(S=S.child;S!==null;)LS(p,y,S),S=S.sibling}function LS(p,y,S){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(tt,S)}catch{}switch(S.tag){case 26:ys||lc(S,y),Al(p,y,S),S.memoizedState?S.memoizedState.count--:S.stateNode&&(S=S.stateNode,S.parentNode.removeChild(S));break;case 27:ys||lc(S,y);var R=ko,U=Wr;kp(S.type)&&(ko=S.stateNode,Wr=!1),Al(p,y,S),m0(S.stateNode),ko=R,Wr=U;break;case 5:ys||lc(S,y);case 6:if(R=ko,U=Wr,ko=null,Al(p,y,S),ko=R,Wr=U,ko!==null)if(Wr)try{(ko.nodeType===9?ko.body:ko.nodeName==="HTML"?ko.ownerDocument.body:ko).removeChild(S.stateNode)}catch(X){wi(S,y,X)}else try{ko.removeChild(S.stateNode)}catch(X){wi(S,y,X)}break;case 18:ko!==null&&(Wr?(p=ko,tA(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,S.stateNode),Ip(p)):tA(ko,S.stateNode));break;case 4:R=ko,U=Wr,ko=S.stateNode.containerInfo,Wr=!0,Al(p,y,S),ko=R,Wr=U;break;case 0:case 11:case 14:case 15:ef(2,S,y),ys||ef(4,S,y),Al(p,y,S);break;case 1:ys||(lc(S,y),R=S.stateNode,typeof R.componentWillUnmount=="function"&&TE(S,y,R)),Al(p,y,S);break;case 21:Al(p,y,S);break;case 22:ys=(R=ys)||S.memoizedState!==null,Al(p,y,S),ys=R;break;default:Al(p,y,S)}}function Xv(p,y){if(y.memoizedState===null&&(p=y.alternate,p!==null&&(p=p.memoizedState,p!==null))){p=p.dehydrated;try{Ip(p)}catch(S){wi(y,y.return,S)}}}function Yv(p,y){if(y.memoizedState===null&&(p=y.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{Ip(p)}catch(S){wi(y,y.return,S)}}function Kv(p){switch(p.tag){case 31:case 13:case 19:var y=p.stateNode;return y===null&&(y=p.stateNode=new EE),y;case 22:return p=p.stateNode,y=p._retryCache,y===null&&(y=p._retryCache=new EE),y;default:throw Error(r(435,p.tag))}}function Jv(p,y){var S=Kv(p);y.forEach(function(R){if(!S.has(R)){S.add(R);var U=ED.bind(null,p,R);R.then(U,U)}})}function Ja(p,y){var S=y.deletions;if(S!==null)for(var R=0;R<S.length;R++){var U=S[R],X=p,pe=y,Pe=pe;e:for(;Pe!==null;){switch(Pe.tag){case 27:if(kp(Pe.type)){ko=Pe.stateNode,Wr=!1;break e}break;case 5:ko=Pe.stateNode,Wr=!1;break e;case 3:case 4:ko=Pe.stateNode.containerInfo,Wr=!0;break e}Pe=Pe.return}if(ko===null)throw Error(r(160));LS(X,pe,U),ko=null,Wr=!1,X=U.alternate,X!==null&&(X.return=null),U.return=null}if(y.subtreeFlags&13886)for(y=y.child;y!==null;)Nb(y,p),y=y.sibling}var el=null;function Nb(p,y){var S=p.alternate,R=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:Ja(y,p),Rs(p),R&4&&(ef(3,p,p.return),t0(3,p),ef(5,p,p.return));break;case 1:Ja(y,p),Rs(p),R&512&&(ys||S===null||lc(S,S.return)),R&64&&tf&&(p=p.updateQueue,p!==null&&(R=p.callbacks,R!==null&&(S=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=S===null?R:S.concat(R))));break;case 26:var U=el;if(Ja(y,p),Rs(p),R&512&&(ys||S===null||lc(S,S.return)),R&4){var X=S!==null?S.memoizedState:null;if(R=p.memoizedState,S===null)if(R===null)if(p.stateNode===null){e:{R=p.type,S=p.memoizedProps,U=U.ownerDocument||U;t:switch(R){case"title":X=U.getElementsByTagName("title")[0],(!X||X[hr]||X[Si]||X.namespaceURI==="http://www.w3.org/2000/svg"||X.hasAttribute("itemprop"))&&(X=U.createElement(R),U.head.insertBefore(X,U.querySelector("head > title"))),Is(X,R,S),X[Si]=p,lo(X),R=X;break e;case"link":var pe=m2("link","href",U).get(R+(S.href||""));if(pe){for(var Pe=0;Pe<pe.length;Pe++)if(X=pe[Pe],X.getAttribute("href")===(S.href==null||S.href===""?null:S.href)&&X.getAttribute("rel")===(S.rel==null?null:S.rel)&&X.getAttribute("title")===(S.title==null?null:S.title)&&X.getAttribute("crossorigin")===(S.crossOrigin==null?null:S.crossOrigin)){pe.splice(Pe,1);break t}}X=U.createElement(R),Is(X,R,S),U.head.appendChild(X);break;case"meta":if(pe=m2("meta","content",U).get(R+(S.content||""))){for(Pe=0;Pe<pe.length;Pe++)if(X=pe[Pe],X.getAttribute("content")===(S.content==null?null:""+S.content)&&X.getAttribute("name")===(S.name==null?null:S.name)&&X.getAttribute("property")===(S.property==null?null:S.property)&&X.getAttribute("http-equiv")===(S.httpEquiv==null?null:S.httpEquiv)&&X.getAttribute("charset")===(S.charSet==null?null:S.charSet)){pe.splice(Pe,1);break t}}X=U.createElement(R),Is(X,R,S),U.head.appendChild(X);break;default:throw Error(r(468,R))}X[Si]=p,lo(X),R=X}p.stateNode=R}else mx(U,p.type,p.stateNode);else p.stateNode=p2(U,R,p.memoizedProps);else X!==R?(X===null?S.stateNode!==null&&(S=S.stateNode,S.parentNode.removeChild(S)):X.count--,R===null?mx(U,p.type,p.stateNode):p2(U,R,p.memoizedProps)):R===null&&p.stateNode!==null&&$b(p,p.memoizedProps,S.memoizedProps)}break;case 27:Ja(y,p),Rs(p),R&512&&(ys||S===null||lc(S,S.return)),S!==null&&R&4&&$b(p,p.memoizedProps,S.memoizedProps);break;case 5:if(Ja(y,p),Rs(p),R&512&&(ys||S===null||lc(S,S.return)),p.flags&32){U=p.stateNode;try{Su(U,"")}catch(Nn){wi(p,p.return,Nn)}}R&4&&p.stateNode!=null&&(U=p.memoizedProps,$b(p,U,S!==null?S.memoizedProps:U)),R&1024&&(IS=!0);break;case 6:if(Ja(y,p),Rs(p),R&4){if(p.stateNode===null)throw Error(r(162));R=p.memoizedProps,S=p.stateNode;try{S.nodeValue=R}catch(Nn){wi(p,p.return,Nn)}}break;case 3:if(d1=null,U=el,el=c1(y.containerInfo),Ja(y,p),el=U,Rs(p),R&4&&S!==null&&S.memoizedState.isDehydrated)try{Ip(y.containerInfo)}catch(Nn){wi(p,p.return,Nn)}IS&&(IS=!1,ex(p));break;case 4:R=el,el=c1(p.stateNode.containerInfo),Ja(y,p),Rs(p),el=R;break;case 12:Ja(y,p),Rs(p);break;case 31:Ja(y,p),Rs(p),R&4&&(R=p.updateQueue,R!==null&&(p.updateQueue=null,Jv(p,R)));break;case 13:Ja(y,p),Rs(p),p.child.flags&8192&&p.memoizedState!==null!=(S!==null&&S.memoizedState!==null)&&(jb=kt()),R&4&&(R=p.updateQueue,R!==null&&(p.updateQueue=null,Jv(p,R)));break;case 22:U=p.memoizedState!==null;var et=S!==null&&S.memoizedState!==null,Ot=tf,zt=ys;if(tf=Ot||U,ys=zt||et,Ja(y,p),ys=zt,tf=Ot,Rs(p),R&8192)e:for(y=p.stateNode,y._visibility=U?y._visibility&-2:y._visibility|1,U&&(S===null||et||tf||ys||Bu(p)),S=null,y=p;;){if(y.tag===5||y.tag===26){if(S===null){et=S=y;try{if(X=et.stateNode,U)pe=X.style,typeof pe.setProperty=="function"?pe.setProperty("display","none","important"):pe.display="none";else{Pe=et.stateNode;var Yt=et.memoizedProps.style,Ct=Yt!=null&&Yt.hasOwnProperty("display")?Yt.display:null;Pe.style.display=Ct==null||typeof Ct=="boolean"?"":(""+Ct).trim()}}catch(Nn){wi(et,et.return,Nn)}}}else if(y.tag===6){if(S===null){et=y;try{et.stateNode.nodeValue=U?"":et.memoizedProps}catch(Nn){wi(et,et.return,Nn)}}}else if(y.tag===18){if(S===null){et=y;try{var Mt=et.stateNode;U?Tr(Mt,!0):Tr(et.stateNode,!1)}catch(Nn){wi(et,et.return,Nn)}}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===p)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break e;for(;y.sibling===null;){if(y.return===null||y.return===p)break e;S===y&&(S=null),y=y.return}S===y&&(S=null),y.sibling.return=y.return,y=y.sibling}R&4&&(R=p.updateQueue,R!==null&&(S=R.retryQueue,S!==null&&(R.retryQueue=null,Jv(p,S))));break;case 19:Ja(y,p),Rs(p),R&4&&(R=p.updateQueue,R!==null&&(p.updateQueue=null,Jv(p,R)));break;case 30:break;case 21:break;default:Ja(y,p),Rs(p)}}function Rs(p){var y=p.flags;if(y&2){try{for(var S,R=p.return;R!==null;){if(xp(R)){S=R;break}R=R.return}if(S==null)throw Error(r(160));switch(S.tag){case 27:var U=S.stateNode,X=gg(p);zb(p,X,U);break;case 5:var pe=S.stateNode;S.flags&32&&(Su(pe,""),S.flags&=-33);var Pe=gg(p);zb(p,Pe,pe);break;case 3:case 4:var et=S.stateNode.containerInfo,Ot=gg(p);RS(p,Ot,et);break;default:throw Error(r(161))}}catch(zt){wi(p,p.return,zt)}p.flags&=-3}y&4096&&(p.flags&=-4097)}function ex(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var y=p;ex(y),y.tag===5&&y.flags&1024&&y.stateNode.reset(),p=p.sibling}}function Pl(p,y){if(y.subtreeFlags&8772)for(y=y.child;y!==null;)DS(p,y.alternate,y),y=y.sibling}function Bu(p){for(p=p.child;p!==null;){var y=p;switch(y.tag){case 0:case 11:case 14:case 15:ef(4,y,y.return),Bu(y);break;case 1:lc(y,y.return);var S=y.stateNode;typeof S.componentWillUnmount=="function"&&TE(y,y.return,S),Bu(y);break;case 27:m0(y.stateNode);case 26:case 5:lc(y,y.return),Bu(y);break;case 22:y.memoizedState===null&&Bu(y);break;case 30:Bu(y);break;default:Bu(y)}p=p.sibling}}function nf(p,y,S){for(S=S&&(y.subtreeFlags&8772)!==0,y=y.child;y!==null;){var R=y.alternate,U=p,X=y,pe=X.flags;switch(X.tag){case 0:case 11:case 15:nf(U,X,S),t0(4,X);break;case 1:if(nf(U,X,S),R=X,U=R.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(Ot){wi(R,R.return,Ot)}if(R=X,U=R.updateQueue,U!==null){var Pe=R.stateNode;try{var et=U.shared.hiddenCallbacks;if(et!==null)for(U.shared.hiddenCallbacks=null,U=0;U<et.length;U++)sg(et[U],Pe)}catch(Ot){wi(R,R.return,Ot)}}S&&pe&64&&CE(X),Gv(X,X.return);break;case 27:kE(X);case 26:case 5:nf(U,X,S),S&&R===null&&pe&4&&Lb(X),Gv(X,X.return);break;case 12:nf(U,X,S);break;case 31:nf(U,X,S),S&&pe&4&&Xv(U,X);break;case 13:nf(U,X,S),S&&pe&4&&Yv(U,X);break;case 22:X.memoizedState===null&&nf(U,X,S),Gv(X,X.return);break;case 30:break;default:nf(U,X,S)}y=y.sibling}}function Bb(p,y){var S=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),p=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(p=y.memoizedState.cachePool.pool),p!==S&&(p!=null&&p.refCount++,S!=null&&hp(S))}function rf(p,y){p=null,y.alternate!==null&&(p=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==p&&(y.refCount++,p!=null&&hp(p))}function Fu(p,y,S,R){if(y.subtreeFlags&10256)for(y=y.child;y!==null;)$S(p,y,S,R),y=y.sibling}function $S(p,y,S,R){var U=y.flags;switch(y.tag){case 0:case 11:case 15:Fu(p,y,S,R),U&2048&&t0(9,y);break;case 1:Fu(p,y,S,R);break;case 3:Fu(p,y,S,R),U&2048&&(p=null,y.alternate!==null&&(p=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==p&&(y.refCount++,p!=null&&hp(p)));break;case 12:if(U&2048){Fu(p,y,S,R),p=y.stateNode;try{var X=y.memoizedProps,pe=X.id,Pe=X.onPostCommit;typeof Pe=="function"&&Pe(pe,y.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(et){wi(y,y.return,et)}}else Fu(p,y,S,R);break;case 31:Fu(p,y,S,R);break;case 13:Fu(p,y,S,R);break;case 23:break;case 22:X=y.stateNode,pe=y.alternate,y.memoizedState!==null?X._visibility&2?Fu(p,y,S,R):yg(p,y):X._visibility&2?Fu(p,y,S,R):(X._visibility|=2,Zh(p,y,S,R,(y.subtreeFlags&10256)!==0||!1)),U&2048&&Bb(pe,y);break;case 24:Fu(p,y,S,R),U&2048&&rf(y.alternate,y);break;default:Fu(p,y,S,R)}}function Zh(p,y,S,R,U){for(U=U&&((y.subtreeFlags&10256)!==0||!1),y=y.child;y!==null;){var X=p,pe=y,Pe=S,et=R,Ot=pe.flags;switch(pe.tag){case 0:case 11:case 15:Zh(X,pe,Pe,et,U),t0(8,pe);break;case 23:break;case 22:var zt=pe.stateNode;pe.memoizedState!==null?zt._visibility&2?Zh(X,pe,Pe,et,U):yg(X,pe):(zt._visibility|=2,Zh(X,pe,Pe,et,U)),U&&Ot&2048&&Bb(pe.alternate,pe);break;case 24:Zh(X,pe,Pe,et,U),U&&Ot&2048&&rf(pe.alternate,pe);break;default:Zh(X,pe,Pe,et,U)}y=y.sibling}}function yg(p,y){if(y.subtreeFlags&10256)for(y=y.child;y!==null;){var S=p,R=y,U=R.flags;switch(R.tag){case 22:yg(S,R),U&2048&&Bb(R.alternate,R);break;case 24:yg(S,R),U&2048&&rf(R.alternate,R);break;default:yg(S,R)}y=y.sibling}}var r0=8192;function vg(p,y,S){if(p.subtreeFlags&r0)for(p=p.child;p!==null;)AE(p,y,S),p=p.sibling}function AE(p,y,S){switch(p.tag){case 26:vg(p,y,S),p.flags&r0&&p.memoizedState!==null&&g2(S,el,p.memoizedState,p.memoizedProps);break;case 5:vg(p,y,S);break;case 3:case 4:var R=el;el=c1(p.stateNode.containerInfo),vg(p,y,S),el=R;break;case 22:p.memoizedState===null&&(R=p.alternate,R!==null&&R.memoizedState!==null?(R=r0,r0=16777216,vg(p,y,S),r0=R):vg(p,y,S));break;default:vg(p,y,S)}}function PE(p){var y=p.alternate;if(y!==null&&(p=y.child,p!==null)){y.child=null;do y=p.sibling,p.sibling=null,p=y;while(p!==null)}}function tx(p){var y=p.deletions;if((p.flags&16)!==0){if(y!==null)for(var S=0;S<y.length;S++){var R=y[S];vs=R,i0(R,p)}PE(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)ME(p),p=p.sibling}function ME(p){switch(p.tag){case 0:case 11:case 15:tx(p),p.flags&2048&&ef(9,p,p.return);break;case 3:tx(p);break;case 12:tx(p);break;case 22:var y=p.stateNode;p.memoizedState!==null&&y._visibility&2&&(p.return===null||p.return.tag!==13)?(y._visibility&=-3,Fb(p)):tx(p);break;default:tx(p)}}function Fb(p){var y=p.deletions;if((p.flags&16)!==0){if(y!==null)for(var S=0;S<y.length;S++){var R=y[S];vs=R,i0(R,p)}PE(p)}for(p=p.child;p!==null;){switch(y=p,y.tag){case 0:case 11:case 15:ef(8,y,y.return),Fb(y);break;case 22:S=y.stateNode,S._visibility&2&&(S._visibility&=-3,Fb(y));break;default:Fb(y)}p=p.sibling}}function i0(p,y){for(;vs!==null;){var S=vs;switch(S.tag){case 0:case 11:case 15:ef(8,S,y);break;case 23:case 22:if(S.memoizedState!==null&&S.memoizedState.cachePool!==null){var R=S.memoizedState.cachePool.pool;R!=null&&R.refCount++}break;case 24:hp(S.memoizedState.cache)}if(R=S.child,R!==null)R.return=S,vs=R;else e:for(S=p;vs!==null;){R=vs;var U=R.sibling,X=R.return;if(n0(R),R===S){vs=null;break e}if(U!==null){U.return=X,vs=U;break e}vs=X}}}var TD={getCacheForType:function(p){var y=zo(Co),S=y.data.get(p);return S===void 0&&(S=p(),y.data.set(p,S)),S},cacheSignal:function(){return zo(Co).controller.signal}},RE=typeof WeakMap=="function"?WeakMap:Map,bi=0,Wi=null,jr=null,Vr=0,Ei=0,tl=null,Yc=!1,_p=!1,zS=!1,of=0,Bo=0,sf=0,xg=0,NS=0,ya=0,_g=0,nx=null,Ml=null,BS=!1,jb=0,IE=0,rx=1/0,o0=null,af=null,xs=0,lf=null,s0=null,Kc=0,FS=0,Vb=null,DE=null,ix=0,jS=null;function Rl(){return(bi&2)!==0&&Vr!==0?Vr&-Vr:ve.T!==null?XS():Oo()}function LE(){if(ya===0)if((Vr&536870912)===0||Ir){var p=Ar;Ar<<=1,(Ar&3932160)===0&&(Ar=262144),ya=p}else ya=536870912;return p=wn.current,p!==null&&(p.flags|=32),ya}function Il(p,y,S){(p===Wi&&(Ei===2||Ei===9)||p.cancelPendingCommit!==null)&&(l0(p,0),bp(p,Vr,ya,!1)),an(p,S),((bi&2)===0||p!==Wi)&&(p===Wi&&((bi&2)===0&&(xg|=S),Bo===4&&bp(p,Vr,ya,!1)),ju(p))}function is(p,y,S){if((bi&6)!==0)throw Error(r(327));var R=!S&&(y&127)===0&&(y&p.expiredLanes)===0||ji(p,y),U=R?c0(p,y):Zb(p,y,!0),X=R;do{if(U===0){_p&&!R&&bp(p,y,0,!1);break}else{if(S=p.current.alternate,X&&!kD(S)){U=Zb(p,y,!1),X=!1;continue}if(U===2){if(X=y,p.errorRecoveryDisabledLanes&X)var pe=0;else pe=p.pendingLanes&-536870913,pe=pe!==0?pe:pe&536870912?536870912:0;if(pe!==0){y=pe;e:{var Pe=p;U=nx;var et=Pe.current.memoizedState.isDehydrated;if(et&&(l0(Pe,pe).flags|=256),pe=Zb(Pe,pe,!1),pe!==2){if(zS&&!et){Pe.errorRecoveryDisabledLanes|=X,xg|=X,U=4;break e}X=Ml,Ml=U,X!==null&&(Ml===null?Ml=X:Ml.push.apply(Ml,X))}U=pe}if(X=!1,U!==2)continue}}if(U===1){l0(p,0),bp(p,y,0,!0);break}e:{switch(R=p,X=U,X){case 0:case 1:throw Error(r(345));case 4:if((y&4194048)!==y)break;case 6:bp(R,y,ya,!Yc);break e;case 2:Ml=null;break;case 3:case 5:break;default:throw Error(r(329))}if((y&62914560)===y&&(U=jb+300-kt(),10<U)){if(bp(R,y,ya,!Yc),Fr(R,0,!0)!==0)break e;Kc=y,R.timeoutHandle=l1(a0.bind(null,R,S,Ml,o0,BS,y,ya,xg,_g,Yc,X,"Throttled",-0,0),U);break e}a0(R,S,Ml,o0,BS,y,ya,xg,_g,Yc,X,null,-0,0)}}break}while(!0);ju(p)}function a0(p,y,S,R,U,X,pe,Pe,et,Ot,zt,Yt,Ct,Mt){if(p.timeoutHandle=-1,Yt=y.subtreeFlags,Yt&8192||(Yt&16785408)===16785408){Yt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yl},AE(y,X,Yt);var Nn=(X&62914560)===X?jb-kt():(X&4194048)===X?IE-kt():0;if(Nn=y2(Yt,Nn),Nn!==null){Kc=X,p.cancelPendingCommit=Nn(FE.bind(null,p,y,X,S,R,U,pe,Pe,et,zt,Yt,null,Ct,Mt)),bp(p,X,pe,!Ot);return}}FE(p,y,X,S,R,U,pe,Pe,et)}function kD(p){for(var y=p;;){var S=y.tag;if((S===0||S===11||S===15)&&y.flags&16384&&(S=y.updateQueue,S!==null&&(S=S.stores,S!==null)))for(var R=0;R<S.length;R++){var U=S[R],X=U.getSnapshot;U=U.value;try{if(!Oa(X(),U))return!1}catch{return!1}}if(S=y.child,y.subtreeFlags&16384&&S!==null)S.return=y,y=S;else{if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function bp(p,y,S,R){y&=~NS,y&=~xg,p.suspendedLanes|=y,p.pingedLanes&=~y,R&&(p.warmLanes|=y),R=p.expirationTimes;for(var U=y;0<U;){var X=31-St(U),pe=1<<X;R[X]=-1,U&=~pe}S!==0&&Hn(p,S,y)}function ox(){return(bi&6)===0?(cc(0),!1):!0}function Qb(){if(jr!==null){if(Ei===0)var p=jr.return;else p=jr,Fc=wl=null,$u(p),Qc=null,Zd=0,p=jr;for(;p!==null;)Db(p.alternate,p),p=p.return;jr=null}}function l0(p,y){var S=p.timeoutHandle;S!==-1&&(p.timeoutHandle=-1,i2(S)),S=p.cancelPendingCommit,S!==null&&(p.cancelPendingCommit=null,S()),Kc=0,Qb(),Wi=p,jr=S=Wa(p.current,null),Vr=y,Ei=0,tl=null,Yc=!1,_p=ji(p,y),zS=!1,_g=ya=NS=xg=sf=Bo=0,Ml=nx=null,BS=!1,(y&8)!==0&&(y|=y&32);var R=p.entangledLanes;if(R!==0)for(p=p.entanglements,R&=y;0<R;){var U=31-St(R),X=1<<U;y|=p[U],R&=~X}return of=y,jd(),S}function VS(p,y){Sr=null,ve.H=oi,y===ec||y===ka?(y=fp(),Ei=3):y===zh?(y=fp(),Ei=4):Ei=y===Cb?8:y!==null&&typeof y=="object"&&typeof y.then=="function"?6:1,tl=y,jr===null&&(Bo=1,ac(p,ga(y,p.current)))}function QS(){var p=wn.current;return p===null?!0:(Vr&4194048)===Vr?Rn===null:(Vr&62914560)===Vr||(Vr&536870912)!==0?p===Rn:!1}function bg(){var p=ve.H;return ve.H=oi,p===null?oi:p}function Ub(){var p=ve.A;return ve.A=TD,p}function sx(){Bo=4,Yc||(Vr&4194048)!==Vr&&wn.current!==null||(_p=!0),(sf&134217727)===0&&(xg&134217727)===0||Wi===null||bp(Wi,Vr,ya,!1)}function Zb(p,y,S){var R=bi;bi|=2;var U=bg(),X=Ub();(Wi!==p||Vr!==y)&&(o0=null,l0(p,y)),y=!1;var pe=Bo;e:do try{if(Ei!==0&&jr!==null){var Pe=jr,et=tl;switch(Ei){case 8:Qb(),pe=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(y=!0);var Ot=Ei;if(Ei=0,tl=null,u0(p,Pe,et,Ot),S&&_p){pe=0;break e}break;default:Ot=Ei,Ei=0,tl=null,u0(p,Pe,et,Ot)}}qb(),pe=Bo;break}catch(zt){VS(p,zt)}while(!0);return y&&p.shellSuspendCounter++,Fc=wl=null,bi=R,ve.H=U,ve.A=X,jr===null&&(Wi=null,Vr=0,jd()),pe}function qb(){for(;jr!==null;)zE(jr)}function c0(p,y){var S=bi;bi|=2;var R=bg(),U=Ub();Wi!==p||Vr!==y?(o0=null,rx=kt()+500,l0(p,y)):_p=ji(p,y);e:do try{if(Ei!==0&&jr!==null){y=jr;var X=tl;t:switch(Ei){case 1:Ei=0,tl=null,u0(p,y,X,1);break;case 2:case 9:if(ng(X)){Ei=0,tl=null,NE(y);break}y=function(){Ei!==2&&Ei!==9||Wi!==p||(Ei=7),ju(p)},X.then(y,y);break e;case 3:Ei=7;break e;case 4:Ei=5;break e;case 7:ng(X)?(Ei=0,tl=null,NE(y)):(Ei=0,tl=null,u0(p,y,X,7));break;case 5:var pe=null;switch(jr.tag){case 26:pe=jr.memoizedState;case 5:case 27:var Pe=jr;if(pe?gx(pe):Pe.stateNode.complete){Ei=0,tl=null;var et=Pe.sibling;if(et!==null)jr=et;else{var Ot=Pe.return;Ot!==null?(jr=Ot,Wb(Ot)):jr=null}break t}}Ei=0,tl=null,u0(p,y,X,5);break;case 6:Ei=0,tl=null,u0(p,y,X,6);break;case 8:Qb(),Bo=6;break e;default:throw Error(r(462))}}$E();break}catch(zt){VS(p,zt)}while(!0);return Fc=wl=null,ve.H=R,ve.A=U,bi=S,jr!==null?0:(Wi=null,Vr=0,jd(),Bo)}function $E(){for(;jr!==null&&!Ye();)zE(jr)}function zE(p){var y=Pa(p.alternate,p,of);p.memoizedProps=p.pendingProps,y===null?Wb(p):jr=y}function NE(p){var y=p,S=y.alternate;switch(y.tag){case 15:case 0:y=_E(S,y,y.pendingProps,y.type,void 0,Vr);break;case 11:y=_E(S,y,y.pendingProps,y.type.render,y.ref,Vr);break;case 5:$u(y);default:Db(S,y),y=jr=_b(y,of),y=Pa(S,y,of)}p.memoizedProps=p.pendingProps,y===null?Wb(p):jr=y}function u0(p,y,S,R){Fc=wl=null,$u(y),Qc=null,Zd=0;var U=y.return;try{if(Sb(p,U,y,S,Vr)){Bo=1,ac(p,ga(S,p.current)),jr=null;return}}catch(X){if(U!==null)throw jr=U,X;Bo=1,ac(p,ga(S,p.current)),jr=null;return}y.flags&32768?(Ir||R===1?p=!0:_p||(Vr&536870912)!==0?p=!1:(Yc=p=!0,(R===2||R===9||R===3||R===6)&&(R=wn.current,R!==null&&R.tag===13&&(R.flags|=16384))),BE(y,p)):Wb(y)}function Wb(p){var y=p;do{if((y.flags&32768)!==0){BE(y,Yc);return}p=y.return;var S=SE(y.alternate,y,of);if(S!==null){jr=S;return}if(y=y.sibling,y!==null){jr=y;return}jr=y=p}while(y!==null);Bo===0&&(Bo=5)}function BE(p,y){do{var S=SD(p.alternate,p);if(S!==null){S.flags&=32767,jr=S;return}if(S=p.return,S!==null&&(S.flags|=32768,S.subtreeFlags=0,S.deletions=null),!y&&(p=p.sibling,p!==null)){jr=p;return}jr=p=S}while(p!==null);Bo=6,jr=null}function FE(p,y,S,R,U,X,pe,Pe,et){p.cancelPendingCommit=null;do Hb();while(xs!==0);if((bi&6)!==0)throw Error(r(327));if(y!==null){if(y===p.current)throw Error(r(177));if(X=y.lanes|y.childLanes,X|=Fd,En(p,S,X,pe,Pe,et),p===Wi&&(jr=Wi=null,Vr=0),s0=y,lf=p,Kc=S,FS=X,Vb=U,DE=R,(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?(p.callbackNode=null,p.callbackPriority=0,qE(K,function(){return ZE(),null})):(p.callbackNode=null,p.callbackPriority=0),R=(y.flags&13878)!==0,(y.subtreeFlags&13878)!==0||R){R=ve.T,ve.T=null,U=Me.p,Me.p=2,pe=bi,bi|=4;try{CD(p,y,S)}finally{bi=pe,Me.p=U,ve.T=R}}xs=1,jE(),VE(),QE()}}function jE(){if(xs===1){xs=0;var p=lf,y=s0,S=(y.flags&13878)!==0;if((y.subtreeFlags&13878)!==0||S){S=ve.T,ve.T=null;var R=Me.p;Me.p=2;var U=bi;bi|=4;try{Nb(y,p);var X=n2,pe=Ry(p.containerInfo),Pe=X.focusedElem,et=X.selectionRange;if(pe!==Pe&&Pe&&Pe.ownerDocument&&My(Pe.ownerDocument.documentElement,Pe)){if(et!==null&&qm(Pe)){var Ot=et.start,zt=et.end;if(zt===void 0&&(zt=Ot),"selectionStart"in Pe)Pe.selectionStart=Ot,Pe.selectionEnd=Math.min(zt,Pe.value.length);else{var Yt=Pe.ownerDocument||document,Ct=Yt&&Yt.defaultView||window;if(Ct.getSelection){var Mt=Ct.getSelection(),Nn=Pe.textContent.length,or=Math.min(et.start,Nn),Ai=et.end===void 0?or:Math.min(et.end,Nn);!Mt.extend&&or>Ai&&(pe=Ai,Ai=or,or=pe);var ct=Zm(Pe,or),it=Zm(Pe,Ai);if(ct&&it&&(Mt.rangeCount!==1||Mt.anchorNode!==ct.node||Mt.anchorOffset!==ct.offset||Mt.focusNode!==it.node||Mt.focusOffset!==it.offset)){var _t=Yt.createRange();_t.setStart(ct.node,ct.offset),Mt.removeAllRanges(),or>Ai?(Mt.addRange(_t),Mt.extend(it.node,it.offset)):(_t.setEnd(it.node,it.offset),Mt.addRange(_t))}}}}for(Yt=[],Mt=Pe;Mt=Mt.parentNode;)Mt.nodeType===1&&Yt.push({element:Mt,left:Mt.scrollLeft,top:Mt.scrollTop});for(typeof Pe.focus=="function"&&Pe.focus(),Pe=0;Pe<Yt.length;Pe++){var qt=Yt[Pe];qt.element.scrollLeft=qt.left,qt.element.scrollTop=qt.top}}bx=!!hx,n2=hx=null}finally{bi=U,Me.p=R,ve.T=S}}p.current=y,xs=2}}function VE(){if(xs===2){xs=0;var p=lf,y=s0,S=(y.flags&8772)!==0;if((y.subtreeFlags&8772)!==0||S){S=ve.T,ve.T=null;var R=Me.p;Me.p=2;var U=bi;bi|=4;try{DS(p,y.alternate,y)}finally{bi=U,Me.p=R,ve.T=S}}xs=3}}function QE(){if(xs===4||xs===3){xs=0,vt();var p=lf,y=s0,S=Kc,R=DE;(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?xs=5:(xs=0,s0=lf=null,UE(p,p.pendingLanes));var U=p.pendingLanes;if(U===0&&(af=null),Xt(S),y=y.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(tt,y,void 0,(y.current.flags&128)===128)}catch{}if(R!==null){y=ve.T,U=Me.p,Me.p=2,ve.T=null;try{for(var X=p.onRecoverableError,pe=0;pe<R.length;pe++){var Pe=R[pe];X(Pe.value,{componentStack:Pe.stack})}}finally{ve.T=y,Me.p=U}}(Kc&3)!==0&&Hb(),ju(p),U=p.pendingLanes,(S&261930)!==0&&(U&42)!==0?p===jS?ix++:(ix=0,jS=p):ix=0,cc(0)}}function UE(p,y){(p.pooledCacheLanes&=y)===0&&(y=p.pooledCache,y!=null&&(p.pooledCache=null,hp(y)))}function Hb(){return jE(),VE(),QE(),ZE()}function ZE(){if(xs!==5)return!1;var p=lf,y=FS;FS=0;var S=Xt(Kc),R=ve.T,U=Me.p;try{Me.p=32>S?32:S,ve.T=null,S=Vb,Vb=null;var X=lf,pe=Kc;if(xs=0,s0=lf=null,Kc=0,(bi&6)!==0)throw Error(r(331));var Pe=bi;if(bi|=4,ME(X.current),$S(X,X.current,pe,S),bi=Pe,cc(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(tt,X)}catch{}return!0}finally{Me.p=U,ve.T=R,UE(p,y)}}function US(p,y,S){y=ga(S,y),y=fg(p.stateNode,y,2),p=Ru(p,y,2),p!==null&&(an(p,2),ju(p))}function wi(p,y,S){if(p.tag===3)US(p,p,S);else for(;y!==null;){if(y.tag===3){US(y,p,S);break}else if(y.tag===1){var R=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(af===null||!af.has(R))){p=ga(S,p),S=pg(2),R=Ru(y,S,2),R!==null&&(mg(S,R,y,p),an(R,2),ju(R));break}}y=y.return}}function Gb(p,y,S){var R=p.pingCache;if(R===null){R=p.pingCache=new RE;var U=new Set;R.set(y,U)}else U=R.get(y),U===void 0&&(U=new Set,R.set(y,U));U.has(S)||(zS=!0,U.add(S),p=wp.bind(null,p,y,S),y.then(p,p))}function wp(p,y,S){var R=p.pingCache;R!==null&&R.delete(y),p.pingedLanes|=p.suspendedLanes&S,p.warmLanes&=~S,Wi===p&&(Vr&S)===S&&(Bo===4||Bo===3&&(Vr&62914560)===Vr&&300>kt()-jb?(bi&2)===0&&l0(p,0):NS|=S,_g===Vr&&(_g=0)),ju(p)}function ax(p,y){y===0&&(y=Pn()),p=bl(p,y),p!==null&&(an(p,y),ju(p))}function ZS(p){var y=p.memoizedState,S=0;y!==null&&(S=y.retryLane),ax(p,S)}function ED(p,y){var S=0;switch(p.tag){case 31:case 13:var R=p.stateNode,U=p.memoizedState;U!==null&&(S=U.retryLane);break;case 19:R=p.stateNode;break;case 22:R=p.stateNode._retryCache;break;default:throw Error(r(314))}R!==null&&R.delete(y),ax(p,S)}function qE(p,y){return Gn(p,y)}var Xb=null,h0=null,qS=!1,Yb=!1,WS=!1,cf=0;function ju(p){p!==h0&&p.next===null&&(h0===null?Xb=h0=p:h0=h0.next=p),Yb=!0,qS||(qS=!0,GS())}function cc(p,y){if(!WS&&Yb){WS=!0;do for(var S=!1,R=Xb;R!==null;){if(p!==0){var U=R.pendingLanes;if(U===0)var X=0;else{var pe=R.suspendedLanes,Pe=R.pingedLanes;X=(1<<31-St(42|p)+1)-1,X&=U&~(pe&~Pe),X=X&201326741?X&201326741|1:X?X|2:0}X!==0&&(S=!0,lx(R,X))}else X=Vr,X=Fr(R,R===Wi?X:0,R.cancelPendingCommit!==null||R.timeoutHandle!==-1),(X&3)===0||ji(R,X)||(S=!0,lx(R,X));R=R.next}while(S);WS=!1}}function Op(){HS()}function HS(){Yb=qS=!1;var p=0;cf!==0&&a1()&&(p=cf);for(var y=kt(),S=null,R=Xb;R!==null;){var U=R.next,X=Kb(R,y);X===0?(R.next=null,S===null?Xb=U:S.next=U,U===null&&(h0=S)):(S=R,(p!==0||(X&3)!==0)&&(Yb=!0)),R=U}xs!==0&&xs!==5||cc(p),cf!==0&&(cf=0)}function Kb(p,y){for(var S=p.suspendedLanes,R=p.pingedLanes,U=p.expirationTimes,X=p.pendingLanes&-62914561;0<X;){var pe=31-St(X),Pe=1<<pe,et=U[pe];et===-1?((Pe&S)===0||(Pe&R)!==0)&&(U[pe]=tr(Pe,y)):et<=y&&(p.expiredLanes|=Pe),X&=~Pe}if(y=Wi,S=Vr,S=Fr(p,p===y?S:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),R=p.callbackNode,S===0||p===y&&(Ei===2||Ei===9)||p.cancelPendingCommit!==null)return R!==null&&R!==null&&je(R),p.callbackNode=null,p.callbackPriority=0;if((S&3)===0||ji(p,S)){if(y=S&-S,y===p.callbackPriority)return y;switch(R!==null&&je(R),Xt(S)){case 2:case 8:S=ae;break;case 32:S=K;break;case 268435456:S=$e;break;default:S=K}return R=WE.bind(null,p),S=Gn(S,R),p.callbackPriority=y,p.callbackNode=S,y}return R!==null&&R!==null&&je(R),p.callbackPriority=2,p.callbackNode=null,2}function WE(p,y){if(xs!==0&&xs!==5)return p.callbackNode=null,p.callbackPriority=0,null;var S=p.callbackNode;if(Hb()&&p.callbackNode!==S)return null;var R=Vr;return R=Fr(p,p===Wi?R:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),R===0?null:(is(p,R,y),Kb(p,kt()),p.callbackNode!=null&&p.callbackNode===S?WE.bind(null,p):null)}function lx(p,y){if(Hb())return null;is(p,y,!0)}function GS(){s2(function(){(bi&6)!==0?Gn(Oe,Op):HS()})}function XS(){if(cf===0){var p=Ud;p===0&&(p=Vn,Vn<<=1,(Vn&261888)===0&&(Vn=256)),cf=p}return cf}function Jb(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:mr(""+p)}function e1(p,y){var S=y.ownerDocument.createElement("input");return S.name=y.name,S.value=y.value,p.id&&S.setAttribute("form",p.id),y.parentNode.insertBefore(S,y),p=new FormData(p),S.parentNode.removeChild(S),p}function d0(p,y,S,R,U){if(y==="submit"&&S&&S.stateNode===U){var X=Jb((U[on]||null).action),pe=R.submitter;pe&&(y=(y=pe[on]||null)?Jb(y.formAction):pe.getAttribute("formAction"),y!==null&&(X=y,pe=null));var Pe=new Dm("action","action",null,R,U);p.push({event:Pe,listeners:[{instance:null,listener:function(){if(R.defaultPrevented){if(cf!==0){var et=pe?e1(U,pe):new FormData(U);fo(S,{pending:!0,data:et,method:U.method,action:X},null,et)}}else typeof X=="function"&&(Pe.preventDefault(),et=pe?e1(U,pe):new FormData(U),fo(S,{pending:!0,data:et,method:U.method,action:X},X,et))},currentTarget:U}]})}}for(var t1=0;t1<$y.length;t1++){var n1=$y[t1],YS=n1.toLowerCase(),HE=n1[0].toUpperCase()+n1.slice(1);Za(YS,"on"+HE)}Za(Gm,"onAnimationEnd"),Za(Xm,"onAnimationIteration"),Za(Ly,"onAnimationStart"),Za("dblclick","onDoubleClick"),Za("focusin","onFocus"),Za("focusout","onBlur"),Za(Bd,"onTransitionRun"),Za(Ym,"onTransitionStart"),Za(sp,"onTransitionCancel"),Za(Ua,"onTransitionEnd"),Ou("onMouseEnter",["mouseout","mouseover"]),Ou("onMouseLeave",["mouseout","mouseover"]),Ou("onPointerEnter",["pointerout","pointerover"]),Ou("onPointerLeave",["pointerout","pointerover"]),zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zr("onBeforeInput",["compositionend","keypress","textInput","paste"]),zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sp));function XE(p,y){y=(y&4)!==0;for(var S=0;S<p.length;S++){var R=p[S],U=R.event;R=R.listeners;e:{var X=void 0;if(y)for(var pe=R.length-1;0<=pe;pe--){var Pe=R[pe],et=Pe.instance,Ot=Pe.currentTarget;if(Pe=Pe.listener,et!==X&&U.isPropagationStopped())break e;X=Pe,U.currentTarget=Ot;try{X(U)}catch(zt){Dc(zt)}U.currentTarget=null,X=et}else for(pe=0;pe<R.length;pe++){if(Pe=R[pe],et=Pe.instance,Ot=Pe.currentTarget,Pe=Pe.listener,et!==X&&U.isPropagationStopped())break e;X=Pe,U.currentTarget=Ot;try{X(U)}catch(zt){Dc(zt)}U.currentTarget=null,X=et}}}}function Qr(p,y){var S=y[vr];S===void 0&&(S=y[vr]=new Set);var R=p+"__bubble";S.has(R)||(i1(y,p,2,!1),S.add(R))}function KS(p,y,S){var R=0;y&&(R|=4),i1(S,p,R,y)}var r1="_reactListening"+Math.random().toString(36).slice(2);function JS(p){if(!p[r1]){p[r1]=!0,Wf.forEach(function(S){S!=="selectionchange"&&(GE.has(S)||KS(S,!1,p),KS(S,!0,p))});var y=p.nodeType===9?p:p.ownerDocument;y===null||y[r1]||(y[r1]=!0,KS("selectionchange",!1,y))}}function i1(p,y,S,R){switch(Sg(y)){case 2:var U=wx;break;case 8:U=uA;break;default:U=x2}S=U.bind(null,y,S,p),U=void 0,!ha||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(U=!0),R?U!==void 0?p.addEventListener(y,S,{capture:!0,passive:U}):p.addEventListener(y,S,!0):U!==void 0?p.addEventListener(y,S,{passive:U}):p.addEventListener(y,S,!1)}function qh(p,y,S,R,U){var X=R;if((y&1)===0&&(y&2)===0&&R!==null)e:for(;;){if(R===null)return;var pe=R.tag;if(pe===3||pe===4){var Pe=R.stateNode.containerInfo;if(Pe===U)break;if(pe===4)for(pe=R.return;pe!==null;){var et=pe.tag;if((et===3||et===4)&&pe.stateNode.containerInfo===U)return;pe=pe.return}for(;Pe!==null;){if(pe=kc(Pe),pe===null)return;if(et=pe.tag,et===5||et===6||et===26||et===27){R=X=pe;continue e}Pe=Pe.parentNode}}R=R.return}yi(function(){var Ot=X,zt=Im(S),Yt=[];e:{var Ct=Mv.get(p);if(Ct!==void 0){var Mt=Dm,Nn=p;switch(p){case"keypress":if(Qa(S)===0)break e;case"keydown":case"keyup":Mt=uo;break;case"focusin":Nn="focus",Mt=Ch;break;case"focusout":Nn="blur",Mt=Ch;break;case"beforeblur":case"afterblur":Mt=Ch;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Mt=Dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Mt=Lm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Mt=wS;break;case Gm:case Xm:case Ly:Mt=lb;break;case Ua:Mt=ky;break;case"scroll":case"scrollend":Mt=Id;break;case"wheel":Mt=Tv;break;case"copy":case"cut":case"paste":Mt=Sv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Mt=Ty;break;case"toggle":case"beforetoggle":Mt=ep}var or=(y&4)!==0,Ai=!or&&(p==="scroll"||p==="scrollend"),ct=or?Ct!==null?Ct+"Capture":null:Ct;or=[];for(var it=Ot,_t;it!==null;){var qt=it;if(_t=qt.stateNode,qt=qt.tag,qt!==5&&qt!==26&&qt!==27||_t===null||ct===null||(qt=yl(it,ct),qt!=null&&or.push(f0(it,qt,_t))),Ai)break;it=it.return}0<or.length&&(Ct=new Mt(Ct,Nn,null,S,zt),Yt.push({event:Ct,listeners:or}))}}if((y&7)===0){e:{if(Ct=p==="mouseover"||p==="pointerover",Mt=p==="mouseout"||p==="pointerout",Ct&&S!==Ov&&(Nn=S.relatedTarget||S.fromElement)&&(kc(Nn)||Nn[dr]))break e;if((Mt||Ct)&&(Ct=zt.window===zt?zt:(Ct=zt.ownerDocument)?Ct.defaultView||Ct.parentWindow:window,Mt?(Nn=S.relatedTarget||S.toElement,Mt=Ot,Nn=Nn?kc(Nn):null,Nn!==null&&(Ai=o(Nn),or=Nn.tag,Nn!==Ai||or!==5&&or!==27&&or!==6)&&(Nn=null)):(Mt=null,Nn=Ot),Mt!==Nn)){if(or=Dd,qt="onMouseLeave",ct="onMouseEnter",it="mouse",(p==="pointerout"||p==="pointerover")&&(or=Ty,qt="onPointerLeave",ct="onPointerEnter",it="pointer"),Ai=Mt==null?Ct:Ec(Mt),_t=Nn==null?Ct:Ec(Nn),Ct=new or(qt,it+"leave",Mt,S,zt),Ct.target=Ai,Ct.relatedTarget=_t,qt=null,kc(zt)===Ot&&(or=new or(ct,it+"enter",Nn,S,zt),or.target=_t,or.relatedTarget=Ai,qt=or),Ai=qt,Mt&&Nn)t:{for(or=YE,ct=Mt,it=Nn,_t=0,qt=ct;qt;qt=or(qt))_t++;qt=0;for(var rr=it;rr;rr=or(rr))qt++;for(;0<_t-qt;)ct=or(ct),_t--;for(;0<qt-_t;)it=or(it),qt--;for(;_t--;){if(ct===it||it!==null&&ct===it.alternate){or=ct;break t}ct=or(ct),it=or(it)}or=null}else or=null;Mt!==null&&e2(Yt,Ct,Mt,or,!1),Nn!==null&&Ai!==null&&e2(Yt,Ai,Nn,or,!0)}}e:{if(Ct=Ot?Ec(Ot):window,Mt=Ct.nodeName&&Ct.nodeName.toLowerCase(),Mt==="select"||Mt==="input"&&Ct.type==="file")var fi=Eh;else if(Ay(Ct))if(kv)fi=vb;else{fi=yb;var Bn=OS}else Mt=Ct.nodeName,!Mt||Mt.toLowerCase()!=="input"||Ct.type!=="checkbox"&&Ct.type!=="radio"?Ot&&Pd(Ot.elementType)&&(fi=Eh):fi=Um;if(fi&&(fi=fi(p,Ot))){Py(Yt,fi,S,zt);break e}Bn&&Bn(p,Ct,Ot),p==="focusout"&&Ot&&Ct.type==="number"&&Ot.memoizedProps.value!=null&&Rm(Ct,"number",Ct.value)}switch(Bn=Ot?Ec(Ot):window,p){case"focusin":(Ay(Bn)||Bn.contentEditable==="true")&&(_l=Bn,Wm=Ot,Hm=null);break;case"focusout":Hm=Wm=_l=null;break;case"mousedown":Dy=!0;break;case"contextmenu":case"mouseup":case"dragend":Dy=!1,xb(Yt,S,zt);break;case"selectionchange":if(Iy)break;case"keydown":case"keyup":xb(Yt,S,zt)}var Yn;if(So)e:{switch(p){case"compositionstart":var Br="onCompositionStart";break e;case"compositionend":Br="onCompositionEnd";break e;case"compositionupdate":Br="onCompositionUpdate";break e}Br=void 0}else Kl?Fm(p,S)&&(Br="onCompositionEnd"):p==="keydown"&&S.keyCode===229&&(Br="onCompositionStart");Br&&(ip&&S.locale!=="ko"&&(Kl||Br!=="onCompositionStart"?Br==="onCompositionEnd"&&Kl&&(Yn=Oh()):(Va=zt,Mc="value"in Va?Va.value:Va.textContent,Kl=!0)),Bn=cx(Ot,Br),0<Bn.length&&(Br=new Cv(Br,p,null,S,zt),Yt.push({event:Br,listeners:Bn}),Yn?Br.data=Yn:(Yn=db(S),Yn!==null&&(Br.data=Yn)))),(Yn=rp?Ey(p,S):fb(p,S))&&(Br=cx(Ot,"onBeforeInput"),0<Br.length&&(Bn=new Cv("onBeforeInput","beforeinput",null,S,zt),Yt.push({event:Bn,listeners:Br}),Bn.data=Yn)),d0(Yt,p,Ot,S,zt)}XE(Yt,y)})}function f0(p,y,S){return{instance:p,listener:y,currentTarget:S}}function cx(p,y){for(var S=y+"Capture",R=[];p!==null;){var U=p,X=U.stateNode;if(U=U.tag,U!==5&&U!==26&&U!==27||X===null||(U=yl(p,S),U!=null&&R.unshift(f0(p,U,X)),U=yl(p,y),U!=null&&R.push(f0(p,U,X))),p.tag===3)return R;p=p.return}return[]}function YE(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function e2(p,y,S,R,U){for(var X=y._reactName,pe=[];S!==null&&S!==R;){var Pe=S,et=Pe.alternate,Ot=Pe.stateNode;if(Pe=Pe.tag,et!==null&&et===R)break;Pe!==5&&Pe!==26&&Pe!==27||Ot===null||(et=Ot,U?(Ot=yl(S,X),Ot!=null&&pe.unshift(f0(S,Ot,et))):U||(Ot=yl(S,X),Ot!=null&&pe.push(f0(S,Ot,et)))),S=S.return}pe.length!==0&&p.push({event:y,listeners:pe})}var KE=/\r\n?/g,JE=/\u0000|\uFFFD/g;function ux(p){return(typeof p=="string"?p:""+p).replace(KE,`
`).replace(JE,"")}function t2(p,y){return y=ux(y),ux(p)===y}function di(p,y,S,R,U,X){switch(S){case"children":typeof R=="string"?y==="body"||y==="textarea"&&R===""||Su(p,R):(typeof R=="number"||typeof R=="bigint")&&y!=="body"&&Su(p,""+R);break;case"className":Pc(p,"class",R);break;case"tabIndex":Pc(p,"tabindex",R);break;case"dir":case"role":case"viewBox":case"width":case"height":Pc(p,S,R);break;case"style":Cy(p,R,X);break;case"data":if(y!=="object"){Pc(p,"data",R);break}case"src":case"href":if(R===""&&(y!=="a"||S!=="href")){p.removeAttribute(S);break}if(R==null||typeof R=="function"||typeof R=="symbol"||typeof R=="boolean"){p.removeAttribute(S);break}R=mr(""+R),p.setAttribute(S,R);break;case"action":case"formAction":if(typeof R=="function"){p.setAttribute(S,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof X=="function"&&(S==="formAction"?(y!=="input"&&di(p,y,"name",U.name,U,null),di(p,y,"formEncType",U.formEncType,U,null),di(p,y,"formMethod",U.formMethod,U,null),di(p,y,"formTarget",U.formTarget,U,null)):(di(p,y,"encType",U.encType,U,null),di(p,y,"method",U.method,U,null),di(p,y,"target",U.target,U,null)));if(R==null||typeof R=="symbol"||typeof R=="boolean"){p.removeAttribute(S);break}R=mr(""+R),p.setAttribute(S,R);break;case"onClick":R!=null&&(p.onclick=Yl);break;case"onScroll":R!=null&&Qr("scroll",p);break;case"onScrollEnd":R!=null&&Qr("scrollend",p);break;case"dangerouslySetInnerHTML":if(R!=null){if(typeof R!="object"||!("__html"in R))throw Error(r(61));if(S=R.__html,S!=null){if(U.children!=null)throw Error(r(60));p.innerHTML=S}}break;case"multiple":p.multiple=R&&typeof R!="function"&&typeof R!="symbol";break;case"muted":p.muted=R&&typeof R!="function"&&typeof R!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(R==null||typeof R=="function"||typeof R=="boolean"||typeof R=="symbol"){p.removeAttribute("xlink:href");break}S=mr(""+R),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",S);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":R!=null&&typeof R!="function"&&typeof R!="symbol"?p.setAttribute(S,""+R):p.removeAttribute(S);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":R&&typeof R!="function"&&typeof R!="symbol"?p.setAttribute(S,""):p.removeAttribute(S);break;case"capture":case"download":R===!0?p.setAttribute(S,""):R!==!1&&R!=null&&typeof R!="function"&&typeof R!="symbol"?p.setAttribute(S,R):p.removeAttribute(S);break;case"cols":case"rows":case"size":case"span":R!=null&&typeof R!="function"&&typeof R!="symbol"&&!isNaN(R)&&1<=R?p.setAttribute(S,R):p.removeAttribute(S);break;case"rowSpan":case"start":R==null||typeof R=="function"||typeof R=="symbol"||isNaN(R)?p.removeAttribute(S):p.setAttribute(S,R);break;case"popover":Qr("beforetoggle",p),Qr("toggle",p),Am(p,"popover",R);break;case"xlinkActuate":gl(p,"http://www.w3.org/1999/xlink","xlink:actuate",R);break;case"xlinkArcrole":gl(p,"http://www.w3.org/1999/xlink","xlink:arcrole",R);break;case"xlinkRole":gl(p,"http://www.w3.org/1999/xlink","xlink:role",R);break;case"xlinkShow":gl(p,"http://www.w3.org/1999/xlink","xlink:show",R);break;case"xlinkTitle":gl(p,"http://www.w3.org/1999/xlink","xlink:title",R);break;case"xlinkType":gl(p,"http://www.w3.org/1999/xlink","xlink:type",R);break;case"xmlBase":gl(p,"http://www.w3.org/XML/1998/namespace","xml:base",R);break;case"xmlLang":gl(p,"http://www.w3.org/XML/1998/namespace","xml:lang",R);break;case"xmlSpace":gl(p,"http://www.w3.org/XML/1998/namespace","xml:space",R);break;case"is":Am(p,"is",R);break;case"innerText":case"textContent":break;default:(!(2<S.length)||S[0]!=="o"&&S[0]!=="O"||S[1]!=="n"&&S[1]!=="N")&&(S=wh.get(S)||S,Am(p,S,R))}}function o1(p,y,S,R,U,X){switch(S){case"style":Cy(p,R,X);break;case"dangerouslySetInnerHTML":if(R!=null){if(typeof R!="object"||!("__html"in R))throw Error(r(61));if(S=R.__html,S!=null){if(U.children!=null)throw Error(r(60));p.innerHTML=S}}break;case"children":typeof R=="string"?Su(p,R):(typeof R=="number"||typeof R=="bigint")&&Su(p,""+R);break;case"onScroll":R!=null&&Qr("scroll",p);break;case"onScrollEnd":R!=null&&Qr("scrollend",p);break;case"onClick":R!=null&&(p.onclick=Yl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!js.hasOwnProperty(S))e:{if(S[0]==="o"&&S[1]==="n"&&(U=S.endsWith("Capture"),y=S.slice(2,U?S.length-7:void 0),X=p[on]||null,X=X!=null?X[S]:null,typeof X=="function"&&p.removeEventListener(y,X,U),typeof R=="function")){typeof X!="function"&&X!==null&&(S in p?p[S]=null:p.hasAttribute(S)&&p.removeAttribute(S)),p.addEventListener(y,R,U);break e}S in p?p[S]=R:R===!0?p.setAttribute(S,""):Am(p,S,R)}}}function Is(p,y,S){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qr("error",p),Qr("load",p);var R=!1,U=!1,X;for(X in S)if(S.hasOwnProperty(X)){var pe=S[X];if(pe!=null)switch(X){case"src":R=!0;break;case"srcSet":U=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,y));default:di(p,y,X,pe,S,null)}}U&&di(p,y,"srcSet",S.srcSet,S,null),R&&di(p,y,"src",S.src,S,null);return;case"input":Qr("invalid",p);var Pe=X=pe=U=null,et=null,Ot=null;for(R in S)if(S.hasOwnProperty(R)){var zt=S[R];if(zt!=null)switch(R){case"name":U=zt;break;case"type":pe=zt;break;case"checked":et=zt;break;case"defaultChecked":Ot=zt;break;case"value":X=zt;break;case"defaultValue":Pe=zt;break;case"children":case"dangerouslySetInnerHTML":if(zt!=null)throw Error(r(137,y));break;default:di(p,y,R,zt,S,null)}}Sy(p,X,Pe,et,Ot,pe,U,!1);return;case"select":Qr("invalid",p),R=pe=X=null;for(U in S)if(S.hasOwnProperty(U)&&(Pe=S[U],Pe!=null))switch(U){case"value":X=Pe;break;case"defaultValue":pe=Pe;break;case"multiple":R=Pe;default:di(p,y,U,Pe,S,null)}y=X,S=pe,p.multiple=!!R,y!=null?bh(p,!!R,y,!1):S!=null&&bh(p,!!R,S,!0);return;case"textarea":Qr("invalid",p),X=U=R=null;for(pe in S)if(S.hasOwnProperty(pe)&&(Pe=S[pe],Pe!=null))switch(pe){case"value":R=Pe;break;case"defaultValue":U=Pe;break;case"children":X=Pe;break;case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(r(91));break;default:di(p,y,pe,Pe,S,null)}Xf(p,R,U,X);return;case"option":for(et in S)S.hasOwnProperty(et)&&(R=S[et],R!=null)&&(et==="selected"?p.selected=R&&typeof R!="function"&&typeof R!="symbol":di(p,y,et,R,S,null));return;case"dialog":Qr("beforetoggle",p),Qr("toggle",p),Qr("cancel",p),Qr("close",p);break;case"iframe":case"object":Qr("load",p);break;case"video":case"audio":for(R=0;R<Sp.length;R++)Qr(Sp[R],p);break;case"image":Qr("error",p),Qr("load",p);break;case"details":Qr("toggle",p);break;case"embed":case"source":case"link":Qr("error",p),Qr("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ot in S)if(S.hasOwnProperty(Ot)&&(R=S[Ot],R!=null))switch(Ot){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,y));default:di(p,y,Ot,R,S,null)}return;default:if(Pd(y)){for(zt in S)S.hasOwnProperty(zt)&&(R=S[zt],R!==void 0&&o1(p,y,zt,R,S,void 0));return}}for(Pe in S)S.hasOwnProperty(Pe)&&(R=S[Pe],R!=null&&di(p,y,Pe,R,S,null))}function eA(p,y,S,R){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var U=null,X=null,pe=null,Pe=null,et=null,Ot=null,zt=null;for(Mt in S){var Yt=S[Mt];if(S.hasOwnProperty(Mt)&&Yt!=null)switch(Mt){case"checked":break;case"value":break;case"defaultValue":et=Yt;default:R.hasOwnProperty(Mt)||di(p,y,Mt,null,R,Yt)}}for(var Ct in R){var Mt=R[Ct];if(Yt=S[Ct],R.hasOwnProperty(Ct)&&(Mt!=null||Yt!=null))switch(Ct){case"type":X=Mt;break;case"name":U=Mt;break;case"checked":Ot=Mt;break;case"defaultChecked":zt=Mt;break;case"value":pe=Mt;break;case"defaultValue":Pe=Mt;break;case"children":case"dangerouslySetInnerHTML":if(Mt!=null)throw Error(r(137,y));break;default:Mt!==Yt&&di(p,y,Ct,Mt,R,Yt)}}Mm(p,pe,Pe,et,Ot,zt,X,U);return;case"select":Mt=pe=Pe=Ct=null;for(X in S)if(et=S[X],S.hasOwnProperty(X)&&et!=null)switch(X){case"value":break;case"multiple":Mt=et;default:R.hasOwnProperty(X)||di(p,y,X,null,R,et)}for(U in R)if(X=R[U],et=S[U],R.hasOwnProperty(U)&&(X!=null||et!=null))switch(U){case"value":Ct=X;break;case"defaultValue":Pe=X;break;case"multiple":pe=X;default:X!==et&&di(p,y,U,X,R,et)}y=Pe,S=pe,R=Mt,Ct!=null?bh(p,!!S,Ct,!1):!!R!=!!S&&(y!=null?bh(p,!!S,y,!0):bh(p,!!S,S?[]:"",!1));return;case"textarea":Mt=Ct=null;for(Pe in S)if(U=S[Pe],S.hasOwnProperty(Pe)&&U!=null&&!R.hasOwnProperty(Pe))switch(Pe){case"value":break;case"children":break;default:di(p,y,Pe,null,R,U)}for(pe in R)if(U=R[pe],X=S[pe],R.hasOwnProperty(pe)&&(U!=null||X!=null))switch(pe){case"value":Ct=U;break;case"defaultValue":Mt=U;break;case"children":break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:U!==X&&di(p,y,pe,U,R,X)}sb(p,Ct,Mt);return;case"option":for(var Nn in S)Ct=S[Nn],S.hasOwnProperty(Nn)&&Ct!=null&&!R.hasOwnProperty(Nn)&&(Nn==="selected"?p.selected=!1:di(p,y,Nn,null,R,Ct));for(et in R)Ct=R[et],Mt=S[et],R.hasOwnProperty(et)&&Ct!==Mt&&(Ct!=null||Mt!=null)&&(et==="selected"?p.selected=Ct&&typeof Ct!="function"&&typeof Ct!="symbol":di(p,y,et,Ct,R,Mt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var or in S)Ct=S[or],S.hasOwnProperty(or)&&Ct!=null&&!R.hasOwnProperty(or)&&di(p,y,or,null,R,Ct);for(Ot in R)if(Ct=R[Ot],Mt=S[Ot],R.hasOwnProperty(Ot)&&Ct!==Mt&&(Ct!=null||Mt!=null))switch(Ot){case"children":case"dangerouslySetInnerHTML":if(Ct!=null)throw Error(r(137,y));break;default:di(p,y,Ot,Ct,R,Mt)}return;default:if(Pd(y)){for(var Ai in S)Ct=S[Ai],S.hasOwnProperty(Ai)&&Ct!==void 0&&!R.hasOwnProperty(Ai)&&o1(p,y,Ai,void 0,R,Ct);for(zt in R)Ct=R[zt],Mt=S[zt],!R.hasOwnProperty(zt)||Ct===Mt||Ct===void 0&&Mt===void 0||o1(p,y,zt,Ct,R,Mt);return}}for(var ct in S)Ct=S[ct],S.hasOwnProperty(ct)&&Ct!=null&&!R.hasOwnProperty(ct)&&di(p,y,ct,null,R,Ct);for(Yt in R)Ct=R[Yt],Mt=S[Yt],!R.hasOwnProperty(Yt)||Ct===Mt||Ct==null&&Mt==null||di(p,y,Yt,Ct,R,Mt)}function Dl(p){switch(p){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function p0(){if(typeof performance.getEntriesByType=="function"){for(var p=0,y=0,S=performance.getEntriesByType("resource"),R=0;R<S.length;R++){var U=S[R],X=U.transferSize,pe=U.initiatorType,Pe=U.duration;if(X&&Pe&&Dl(pe)){for(pe=0,Pe=U.responseEnd,R+=1;R<S.length;R++){var et=S[R],Ot=et.startTime;if(Ot>Pe)break;var zt=et.transferSize,Yt=et.initiatorType;zt&&Dl(Yt)&&(et=et.responseEnd,pe+=zt*(et<Pe?1:(Pe-Ot)/(et-Ot)))}if(--R,y+=8*(X+pe)/(U.duration/1e3),p++,10<p)break}}if(0<p)return y/p/1e6}return navigator.connection&&(p=navigator.connection.downlink,typeof p=="number")?p:5}var hx=null,n2=null;function dx(p){return p.nodeType===9?p:p.ownerDocument}function Cp(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r2(p,y){if(p===0)switch(y){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&y==="foreignObject"?0:p}function s1(p,y){return p==="textarea"||p==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.children=="bigint"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var Tp=null;function a1(){var p=window.event;return p&&p.type==="popstate"?p===Tp?!1:(Tp=p,!0):(Tp=null,!1)}var l1=typeof setTimeout=="function"?setTimeout:void 0,i2=typeof clearTimeout=="function"?clearTimeout:void 0,o2=typeof Promise=="function"?Promise:void 0,s2=typeof queueMicrotask=="function"?queueMicrotask:typeof o2<"u"?function(p){return o2.resolve(null).then(p).catch(a2)}:l1;function a2(p){setTimeout(function(){throw p})}function kp(p){return p==="head"}function tA(p,y){var S=y,R=0;do{var U=S.nextSibling;if(p.removeChild(S),U&&U.nodeType===8)if(S=U.data,S==="/$"||S==="/&"){if(R===0){p.removeChild(U),Ip(y);return}R--}else if(S==="$"||S==="$?"||S==="$~"||S==="$!"||S==="&")R++;else if(S==="html")m0(p.ownerDocument.documentElement);else if(S==="head"){S=p.ownerDocument.head,m0(S);for(var X=S.firstChild;X;){var pe=X.nextSibling,Pe=X.nodeName;X[hr]||Pe==="SCRIPT"||Pe==="STYLE"||Pe==="LINK"&&X.rel.toLowerCase()==="stylesheet"||S.removeChild(X),X=pe}}else S==="body"&&m0(p.ownerDocument.body);S=U}while(S);Ip(y)}function Tr(p,y){var S=p;p=0;do{var R=S.nextSibling;if(S.nodeType===1?y?(S._stashedDisplay=S.style.display,S.style.display="none"):(S.style.display=S._stashedDisplay||"",S.getAttribute("style")===""&&S.removeAttribute("style")):S.nodeType===3&&(y?(S._stashedText=S.nodeValue,S.nodeValue=""):S.nodeValue=S._stashedText||""),R&&R.nodeType===8)if(S=R.data,S==="/$"){if(p===0)break;p--}else S!=="$"&&S!=="$?"&&S!=="$~"&&S!=="$!"||p++;S=R}while(S)}function Vu(p){var y=p.firstChild;for(y&&y.nodeType===10&&(y=y.nextSibling);y;){var S=y;switch(y=y.nextSibling,S.nodeName){case"HTML":case"HEAD":case"BODY":Vu(S),kd(S);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(S.rel.toLowerCase()==="stylesheet")continue}p.removeChild(S)}}function Us(p,y,S,R){for(;p.nodeType===1;){var U=S;if(p.nodeName.toLowerCase()!==y.toLowerCase()){if(!R&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(R){if(!p[hr])switch(y){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(X=p.getAttribute("rel"),X==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(X!==U.rel||p.getAttribute("href")!==(U.href==null||U.href===""?null:U.href)||p.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin)||p.getAttribute("title")!==(U.title==null?null:U.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(X=p.getAttribute("src"),(X!==(U.src==null?null:U.src)||p.getAttribute("type")!==(U.type==null?null:U.type)||p.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin))&&X&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(y==="input"&&p.type==="hidden"){var X=U.name==null?null:""+U.name;if(U.type==="hidden"&&p.getAttribute("name")===X)return p}else return p;if(p=uc(p.nextSibling),p===null)break}return null}function Qu(p,y,S){if(y==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!S||(p=uc(p.nextSibling),p===null))return null;return p}function Ep(p,y){for(;p.nodeType!==8;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!y||(p=uc(p.nextSibling),p===null))return null;return p}function Ma(p){return p.data==="$?"||p.data==="$~"}function Wo(p){return p.data==="$!"||p.data==="$?"&&p.ownerDocument.readyState!=="loading"}function _s(p,y){var S=p.ownerDocument;if(p.data==="$~")p._reactRetry=y;else if(p.data!=="$?"||S.readyState!=="loading")y();else{var R=function(){y(),S.removeEventListener("DOMContentLoaded",R)};S.addEventListener("DOMContentLoaded",R),p._reactRetry=R}}function uc(p){for(;p!=null;p=p.nextSibling){var y=p.nodeType;if(y===1||y===3)break;if(y===8){if(y=p.data,y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"||y==="F!"||y==="F")break;if(y==="/$"||y==="/&")return null}}return p}var nl=null;function bs(p){p=p.nextSibling;for(var y=0;p;){if(p.nodeType===8){var S=p.data;if(S==="/$"||S==="/&"){if(y===0)return uc(p.nextSibling);y--}else S!=="$"&&S!=="$!"&&S!=="$?"&&S!=="$~"&&S!=="&"||y++}p=p.nextSibling}return null}function fx(p){p=p.previousSibling;for(var y=0;p;){if(p.nodeType===8){var S=p.data;if(S==="$"||S==="$!"||S==="$?"||S==="$~"||S==="&"){if(y===0)return p;y--}else S!=="/$"&&S!=="/&"||y++}p=p.previousSibling}return null}function nA(p,y,S){switch(y=dx(S),p){case"html":if(p=y.documentElement,!p)throw Error(r(452));return p;case"head":if(p=y.head,!p)throw Error(r(453));return p;case"body":if(p=y.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}function m0(p){for(var y=p.attributes;y.length;)p.removeAttributeNode(y[0]);kd(p)}var Zs=new Map,wg=new Set;function c1(p){return typeof p.getRootNode=="function"?p.getRootNode():p.nodeType===9?p:p.ownerDocument}var Wh=Me.d;Me.d={f:rA,r:iA,D:c2,C:Ra,L:Uu,m:Ia,X:u1,S:Pp,M:u2};function rA(){var p=Wh.f(),y=ox();return p||y}function iA(p){var y=wu(p);y!==null&&y.tag===5&&y.type==="form"?ms(y):Wh.r(p)}var Ap=typeof document>"u"?null:document;function l2(p,y,S){var R=Ap;if(R&&typeof y=="string"&&y){var U=ua(y);U='link[rel="'+p+'"][href="'+U+'"]',typeof S=="string"&&(U+='[crossorigin="'+S+'"]'),wg.has(U)||(wg.add(U),p={rel:p,crossOrigin:S,href:y},R.querySelector(U)===null&&(y=R.createElement("link"),Is(y,"link",p),lo(y),R.head.appendChild(y)))}}function c2(p){Wh.D(p),l2("dns-prefetch",p,null)}function Ra(p,y){Wh.C(p,y),l2("preconnect",p,y)}function Uu(p,y,S){Wh.L(p,y,S);var R=Ap;if(R&&p&&y){var U='link[rel="preload"][as="'+ua(y)+'"]';y==="image"&&S&&S.imageSrcSet?(U+='[imagesrcset="'+ua(S.imageSrcSet)+'"]',typeof S.imageSizes=="string"&&(U+='[imagesizes="'+ua(S.imageSizes)+'"]')):U+='[href="'+ua(p)+'"]';var X=U;switch(y){case"style":X=Og(p);break;case"script":X=uf(p)}Zs.has(X)||(p=v({rel:"preload",href:y==="image"&&S&&S.imageSrcSet?void 0:p,as:y},S),Zs.set(X,p),R.querySelector(U)!==null||y==="style"&&R.querySelector(g0(X))||y==="script"&&R.querySelector(y0(X))||(y=R.createElement("link"),Is(y,"link",p),lo(y),R.head.appendChild(y)))}}function Ia(p,y){Wh.m(p,y);var S=Ap;if(S&&p){var R=y&&typeof y.as=="string"?y.as:"script",U='link[rel="modulepreload"][as="'+ua(R)+'"][href="'+ua(p)+'"]',X=U;switch(R){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":X=uf(p)}if(!Zs.has(X)&&(p=v({rel:"modulepreload",href:p},y),Zs.set(X,p),S.querySelector(U)===null)){switch(R){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(S.querySelector(y0(X)))return}R=S.createElement("link"),Is(R,"link",p),lo(R),S.head.appendChild(R)}}}function Pp(p,y,S){Wh.S(p,y,S);var R=Ap;if(R&&p){var U=Ac(R).hoistableStyles,X=Og(p);y=y||"default";var pe=U.get(X);if(!pe){var Pe={loading:0,preload:null};if(pe=R.querySelector(g0(X)))Pe.loading=5;else{p=v({rel:"stylesheet",href:p,"data-precedence":y},S),(S=Zs.get(X))&&px(p,S);var et=pe=R.createElement("link");lo(et),Is(et,"link",p),et._p=new Promise(function(Ot,zt){et.onload=Ot,et.onerror=zt}),et.addEventListener("load",function(){Pe.loading|=1}),et.addEventListener("error",function(){Pe.loading|=2}),Pe.loading|=4,hf(pe,y,R)}pe={type:"stylesheet",instance:pe,count:1,state:Pe},U.set(X,pe)}}}function u1(p,y){Wh.X(p,y);var S=Ap;if(S&&p){var R=Ac(S).hoistableScripts,U=uf(p),X=R.get(U);X||(X=S.querySelector(y0(U)),X||(p=v({src:p,async:!0},y),(y=Zs.get(U))&&h1(p,y),X=S.createElement("script"),lo(X),Is(X,"link",p),S.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},R.set(U,X))}}function u2(p,y){Wh.M(p,y);var S=Ap;if(S&&p){var R=Ac(S).hoistableScripts,U=uf(p),X=R.get(U);X||(X=S.querySelector(y0(U)),X||(p=v({src:p,async:!0,type:"module"},y),(y=Zs.get(U))&&h1(p,y),X=S.createElement("script"),lo(X),Is(X,"link",p),S.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},R.set(U,X))}}function h2(p,y,S,R){var U=(U=lt.current)?c1(U):null;if(!U)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof S.precedence=="string"&&typeof S.href=="string"?(y=Og(S.href),S=Ac(U).hoistableStyles,R=S.get(y),R||(R={type:"style",instance:null,count:0,state:null},S.set(y,R)),R):{type:"void",instance:null,count:0,state:null};case"link":if(S.rel==="stylesheet"&&typeof S.href=="string"&&typeof S.precedence=="string"){p=Og(S.href);var X=Ac(U).hoistableStyles,pe=X.get(p);if(pe||(U=U.ownerDocument||U,pe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},X.set(p,pe),(X=U.querySelector(g0(p)))&&!X._p&&(pe.instance=X,pe.state.loading=5),Zs.has(p)||(S={rel:"preload",as:"style",href:S.href,crossOrigin:S.crossOrigin,integrity:S.integrity,media:S.media,hrefLang:S.hrefLang,referrerPolicy:S.referrerPolicy},Zs.set(p,S),X||f2(U,p,S,pe.state))),y&&R===null)throw Error(r(528,""));return pe}if(y&&R!==null)throw Error(r(529,""));return null;case"script":return y=S.async,S=S.src,typeof S=="string"&&y&&typeof y!="function"&&typeof y!="symbol"?(y=uf(S),S=Ac(U).hoistableScripts,R=S.get(y),R||(R={type:"script",instance:null,count:0,state:null},S.set(y,R)),R):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function Og(p){return'href="'+ua(p)+'"'}function g0(p){return'link[rel="stylesheet"]['+p+"]"}function d2(p){return v({},p,{"data-precedence":p.precedence,precedence:null})}function f2(p,y,S,R){p.querySelector('link[rel="preload"][as="style"]['+y+"]")?R.loading=1:(y=p.createElement("link"),R.preload=y,y.addEventListener("load",function(){return R.loading|=1}),y.addEventListener("error",function(){return R.loading|=2}),Is(y,"link",S),lo(y),p.head.appendChild(y))}function uf(p){return'[src="'+ua(p)+'"]'}function y0(p){return"script[async]"+p}function p2(p,y,S){if(y.count++,y.instance===null)switch(y.type){case"style":var R=p.querySelector('style[data-href~="'+ua(S.href)+'"]');if(R)return y.instance=R,lo(R),R;var U=v({},S,{"data-href":S.href,"data-precedence":S.precedence,href:null,precedence:null});return R=(p.ownerDocument||p).createElement("style"),lo(R),Is(R,"style",U),hf(R,S.precedence,p),y.instance=R;case"stylesheet":U=Og(S.href);var X=p.querySelector(g0(U));if(X)return y.state.loading|=4,y.instance=X,lo(X),X;R=d2(S),(U=Zs.get(U))&&px(R,U),X=(p.ownerDocument||p).createElement("link"),lo(X);var pe=X;return pe._p=new Promise(function(Pe,et){pe.onload=Pe,pe.onerror=et}),Is(X,"link",R),y.state.loading|=4,hf(X,S.precedence,p),y.instance=X;case"script":return X=uf(S.src),(U=p.querySelector(y0(X)))?(y.instance=U,lo(U),U):(R=S,(U=Zs.get(X))&&(R=v({},S),h1(R,U)),p=p.ownerDocument||p,U=p.createElement("script"),lo(U),Is(U,"link",R),p.head.appendChild(U),y.instance=U);case"void":return null;default:throw Error(r(443,y.type))}else y.type==="stylesheet"&&(y.state.loading&4)===0&&(R=y.instance,y.state.loading|=4,hf(R,S.precedence,p));return y.instance}function hf(p,y,S){for(var R=S.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),U=R.length?R[R.length-1]:null,X=U,pe=0;pe<R.length;pe++){var Pe=R[pe];if(Pe.dataset.precedence===y)X=Pe;else if(X!==U)break}X?X.parentNode.insertBefore(p,X.nextSibling):(y=S.nodeType===9?S.head:S,y.insertBefore(p,y.firstChild))}function px(p,y){p.crossOrigin==null&&(p.crossOrigin=y.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=y.referrerPolicy),p.title==null&&(p.title=y.title)}function h1(p,y){p.crossOrigin==null&&(p.crossOrigin=y.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=y.referrerPolicy),p.integrity==null&&(p.integrity=y.integrity)}var d1=null;function m2(p,y,S){if(d1===null){var R=new Map,U=d1=new Map;U.set(S,R)}else U=d1,R=U.get(S),R||(R=new Map,U.set(S,R));if(R.has(p))return R;for(R.set(p,null),S=S.getElementsByTagName(p),U=0;U<S.length;U++){var X=S[U];if(!(X[hr]||X[Si]||p==="link"&&X.getAttribute("rel")==="stylesheet")&&X.namespaceURI!=="http://www.w3.org/2000/svg"){var pe=X.getAttribute(y)||"";pe=p+pe;var Pe=R.get(pe);Pe?Pe.push(X):R.set(pe,[X])}}return R}function mx(p,y,S){p=p.ownerDocument||p,p.head.insertBefore(S,y==="title"?p.querySelector("head > title"):null)}function f1(p,y,S){if(S===1||y.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof y.precedence!="string"||typeof y.href!="string"||y.href==="")break;return!0;case"link":if(typeof y.rel!="string"||typeof y.href!="string"||y.href===""||y.onLoad||y.onError)break;return y.rel==="stylesheet"?(p=y.disabled,typeof y.precedence=="string"&&p==null):!0;case"script":if(y.async&&typeof y.async!="function"&&typeof y.async!="symbol"&&!y.onLoad&&!y.onError&&y.src&&typeof y.src=="string")return!0}return!1}function gx(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}function g2(p,y,S,R){if(S.type==="stylesheet"&&(typeof R.media!="string"||matchMedia(R.media).matches!==!1)&&(S.state.loading&4)===0){if(S.instance===null){var U=Og(R.href),X=y.querySelector(g0(U));if(X){y=X._p,y!==null&&typeof y=="object"&&typeof y.then=="function"&&(p.count++,p=vx.bind(p),y.then(p,p)),S.state.loading|=4,S.instance=X,lo(X);return}X=y.ownerDocument||y,R=d2(R),(U=Zs.get(U))&&px(R,U),X=X.createElement("link"),lo(X);var pe=X;pe._p=new Promise(function(Pe,et){pe.onload=Pe,pe.onerror=et}),Is(X,"link",R),S.instance=X}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(S,y),(y=S.state.preload)&&(S.state.loading&3)===0&&(p.count++,S=vx.bind(p),y.addEventListener("load",S),y.addEventListener("error",S))}}var yx=0;function y2(p,y){return p.stylesheets&&p.count===0&&_x(p,p.stylesheets),0<p.count||0<p.imgCount?function(S){var R=setTimeout(function(){if(p.stylesheets&&_x(p,p.stylesheets),p.unsuspend){var X=p.unsuspend;p.unsuspend=null,X()}},6e4+y);0<p.imgBytes&&yx===0&&(yx=62500*p0());var U=setTimeout(function(){if(p.waitingForImages=!1,p.count===0&&(p.stylesheets&&_x(p,p.stylesheets),p.unsuspend)){var X=p.unsuspend;p.unsuspend=null,X()}},(p.imgBytes>yx?50:800)+y);return p.unsuspend=S,function(){p.unsuspend=null,clearTimeout(R),clearTimeout(U)}}:null}function vx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_x(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var xx=null;function _x(p,y){p.stylesheets=null,p.unsuspend!==null&&(p.count++,xx=new Map,y.forEach(oA,p),xx=null,vx.call(p))}function oA(p,y){if(!(y.state.loading&4)){var S=xx.get(p);if(S)var R=S.get(null);else{S=new Map,xx.set(p,S);for(var U=p.querySelectorAll("link[data-precedence],style[data-precedence]"),X=0;X<U.length;X++){var pe=U[X];(pe.nodeName==="LINK"||pe.getAttribute("media")!=="not all")&&(S.set(pe.dataset.precedence,pe),R=pe)}R&&S.set(null,R)}U=y.instance,pe=U.getAttribute("data-precedence"),X=S.get(pe)||R,X===R&&S.set(null,U),S.set(pe,U),this.count++,R=vx.bind(this),U.addEventListener("load",R),U.addEventListener("error",R),X?X.parentNode.insertBefore(U,X.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(U,p.firstChild)),y.state.loading|=4}}var v0={$$typeof:N,Provider:null,Consumer:null,_currentValue:Ne,_currentValue2:Ne,_threadCount:0};function AD(p,y,S,R,U,X,pe,Pe,et){this.tag=1,this.containerInfo=p,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.hiddenUpdates=ci(null),this.identifierPrefix=R,this.onUncaughtError=U,this.onCaughtError=X,this.onRecoverableError=pe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=et,this.incompleteTransitions=new Map}function v2(p,y,S,R,U,X,pe,Pe,et,Ot,zt,Yt){return p=new AD(p,y,S,pe,et,Ot,zt,Yt,Pe),y=1,X===!0&&(y|=24),X=qa(3,null,null,y),p.current=X,X.stateNode=p,y=Vc(),y.refCount++,p.pooledCache=y,y.refCount++,X.memoizedState={element:R,isDehydrated:S,cache:y},Gy(X),p}function sA(p){return p?(p=pr,p):pr}function aA(p,y,S,R,U,X){U=sA(U),R.context===null?R.context=U:R.pendingContext=U,R=Wc(y),R.payload={element:S},X=X===void 0?null:X,X!==null&&(R.callback=X),S=Ru(p,R,y),S!==null&&(Il(S,p,y),Sl(S,p,y))}function p1(p,y){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var S=p.retryLane;p.retryLane=S!==0&&S<y?S:y}}function m1(p,y){p1(p,y),(p=p.alternate)&&p1(p,y)}function lA(p){if(p.tag===13||p.tag===31){var y=bl(p,67108864);y!==null&&Il(y,p,67108864),m1(p,67108864)}}function cA(p){if(p.tag===13||p.tag===31){var y=Rl();y=hs(y);var S=bl(p,y);S!==null&&Il(S,p,y),m1(p,y)}}var bx=!0;function wx(p,y,S,R){var U=ve.T;ve.T=null;var X=Me.p;try{Me.p=2,x2(p,y,S,R)}finally{Me.p=X,ve.T=U}}function uA(p,y,S,R){var U=ve.T;ve.T=null;var X=Me.p;try{Me.p=8,x2(p,y,S,R)}finally{Me.p=X,ve.T=U}}function x2(p,y,S,R){if(bx){var U=Ox(R);if(U===null)qh(p,y,R,x0,S),hA(p,R);else if(MD(U,p,y,S,R))R.stopPropagation();else if(hA(p,R),y&4&&-1<PD.indexOf(p)){for(;U!==null;){var X=wu(U);if(X!==null)switch(X.tag){case 3:if(X=X.stateNode,X.current.memoizedState.isDehydrated){var pe=ut(X.pendingLanes);if(pe!==0){var Pe=X;for(Pe.pendingLanes|=2,Pe.entangledLanes|=2;pe;){var et=1<<31-St(pe);Pe.entanglements[1]|=et,pe&=~et}ju(X),(bi&6)===0&&(rx=kt()+500,cc(0))}}break;case 31:case 13:Pe=bl(X,2),Pe!==null&&Il(Pe,X,2),ox(),m1(X,2)}if(X=Ox(R),X===null&&qh(p,y,R,x0,S),X===U)break;U=X}U!==null&&R.stopPropagation()}else qh(p,y,R,null,S)}}function Ox(p){return p=Im(p),g1(p)}var x0=null;function g1(p){if(x0=null,p=kc(p),p!==null){var y=o(p);if(y===null)p=null;else{var S=y.tag;if(S===13){if(p=a(y),p!==null)return p;p=null}else if(S===31){if(p=s(y),p!==null)return p;p=null}else if(S===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;p=null}else y!==p&&(p=null)}}return x0=p,null}function Sg(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jt()){case Oe:return 2;case ae:return 8;case K:case _e:return 32;case $e:return 268435456;default:return 32}default:return 32}}var y1=!1,Mp=null,Jc=null,Rp=null,Sx=new Map,_0=new Map,df=[],PD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hA(p,y){switch(p){case"focusin":case"focusout":Mp=null;break;case"dragenter":case"dragleave":Jc=null;break;case"mouseover":case"mouseout":Rp=null;break;case"pointerover":case"pointerout":Sx.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":_0.delete(y.pointerId)}}function Cx(p,y,S,R,U,X){return p===null||p.nativeEvent!==X?(p={blockedOn:y,domEventName:S,eventSystemFlags:R,nativeEvent:X,targetContainers:[U]},y!==null&&(y=wu(y),y!==null&&lA(y)),p):(p.eventSystemFlags|=R,y=p.targetContainers,U!==null&&y.indexOf(U)===-1&&y.push(U),p)}function MD(p,y,S,R,U){switch(y){case"focusin":return Mp=Cx(Mp,p,y,S,R,U),!0;case"dragenter":return Jc=Cx(Jc,p,y,S,R,U),!0;case"mouseover":return Rp=Cx(Rp,p,y,S,R,U),!0;case"pointerover":var X=U.pointerId;return Sx.set(X,Cx(Sx.get(X)||null,p,y,S,R,U)),!0;case"gotpointercapture":return X=U.pointerId,_0.set(X,Cx(_0.get(X)||null,p,y,S,R,U)),!0}return!1}function dA(p){var y=kc(p.target);if(y!==null){var S=o(y);if(S!==null){if(y=S.tag,y===13){if(y=a(S),y!==null){p.blockedOn=y,Jo(p.priority,function(){cA(S)});return}}else if(y===31){if(y=s(S),y!==null){p.blockedOn=y,Jo(p.priority,function(){cA(S)});return}}else if(y===3&&S.stateNode.current.memoizedState.isDehydrated){p.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}p.blockedOn=null}function Tx(p){if(p.blockedOn!==null)return!1;for(var y=p.targetContainers;0<y.length;){var S=Ox(p.nativeEvent);if(S===null){S=p.nativeEvent;var R=new S.constructor(S.type,S);Ov=R,S.target.dispatchEvent(R),Ov=null}else return y=wu(S),y!==null&&lA(y),p.blockedOn=S,!1;y.shift()}return!0}function fA(p,y,S){Tx(p)&&S.delete(y)}function kx(){y1=!1,Mp!==null&&Tx(Mp)&&(Mp=null),Jc!==null&&Tx(Jc)&&(Jc=null),Rp!==null&&Tx(Rp)&&(Rp=null),Sx.forEach(fA),_0.forEach(fA)}function v1(p,y){p.blockedOn===y&&(p.blockedOn=null,y1||(y1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,kx)))}var x1=null;function pA(p){x1!==p&&(x1=p,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){x1===p&&(x1=null);for(var y=0;y<p.length;y+=3){var S=p[y],R=p[y+1],U=p[y+2];if(typeof R!="function"){if(g1(R||S)===null)continue;break}var X=wu(S);X!==null&&(p.splice(y,3),y-=3,fo(X,{pending:!0,data:U,method:S.method,action:R},R,U))}}))}function Ip(p){function y(et){return v1(et,p)}Mp!==null&&v1(Mp,p),Jc!==null&&v1(Jc,p),Rp!==null&&v1(Rp,p),Sx.forEach(y),_0.forEach(y);for(var S=0;S<df.length;S++){var R=df[S];R.blockedOn===p&&(R.blockedOn=null)}for(;0<df.length&&(S=df[0],S.blockedOn===null);)dA(S),S.blockedOn===null&&df.shift();if(S=(p.ownerDocument||p).$$reactFormReplay,S!=null)for(R=0;R<S.length;R+=3){var U=S[R],X=S[R+1],pe=U[on]||null;if(typeof X=="function")pe||pA(S);else if(pe){var Pe=null;if(X&&X.hasAttribute("formAction")){if(U=X,pe=X[on]||null)Pe=pe.formAction;else if(g1(U)!==null)continue}else Pe=pe.action;typeof Pe=="function"?S[R+1]=Pe:(S.splice(R,3),R-=3),pA(S)}}}function _2(){function p(X){X.canIntercept&&X.info==="react-transition"&&X.intercept({handler:function(){return new Promise(function(pe){return U=pe})},focusReset:"manual",scroll:"manual"})}function y(){U!==null&&(U(),U=null),R||setTimeout(S,20)}function S(){if(!R&&!navigation.transition){var X=navigation.currentEntry;X&&X.url!=null&&navigation.navigate(X.url,{state:X.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var R=!1,U=null;return navigation.addEventListener("navigate",p),navigation.addEventListener("navigatesuccess",y),navigation.addEventListener("navigateerror",y),setTimeout(S,100),function(){R=!0,navigation.removeEventListener("navigate",p),navigation.removeEventListener("navigatesuccess",y),navigation.removeEventListener("navigateerror",y),U!==null&&(U(),U=null)}}}function b2(p){this._internalRoot=p}_1.prototype.render=b2.prototype.render=function(p){var y=this._internalRoot;if(y===null)throw Error(r(409));var S=y.current,R=Rl();aA(S,R,p,y,null,null)},_1.prototype.unmount=b2.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var y=p.containerInfo;aA(p.current,2,null,p,null,null),ox(),y[dr]=null}};function _1(p){this._internalRoot=p}_1.prototype.unstable_scheduleHydration=function(p){if(p){var y=Oo();p={blockedOn:null,target:p,priority:y};for(var S=0;S<df.length&&y!==0&&y<df[S].priority;S++);df.splice(S,0,p),S===0&&dA(p)}};var w2=e.version;if(w2!=="19.2.3")throw Error(r(527,w2,"19.2.3"));Me.findDOMNode=function(p){var y=p._reactInternals;if(y===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=d(y),p=p!==null?m(p):null,p=p===null?null:p.stateNode,p};var mA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ve,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var b1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!b1.isDisabled&&b1.supportsFiber)try{tt=b1.inject(mA),Ke=b1}catch{}}return E2.createRoot=function(p,y){if(!i(p))throw Error(r(299));var S=!1,R="",U=Jy,X=zu,pe=Nu;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(R=y.identifierPrefix),y.onUncaughtError!==void 0&&(U=y.onUncaughtError),y.onCaughtError!==void 0&&(X=y.onCaughtError),y.onRecoverableError!==void 0&&(pe=y.onRecoverableError)),y=v2(p,1,!1,null,null,S,R,null,U,X,pe,_2),p[dr]=y.current,JS(p),new b2(y)},E2.hydrateRoot=function(p,y,S){if(!i(p))throw Error(r(299));var R=!1,U="",X=Jy,pe=zu,Pe=Nu,et=null;return S!=null&&(S.unstable_strictMode===!0&&(R=!0),S.identifierPrefix!==void 0&&(U=S.identifierPrefix),S.onUncaughtError!==void 0&&(X=S.onUncaughtError),S.onCaughtError!==void 0&&(pe=S.onCaughtError),S.onRecoverableError!==void 0&&(Pe=S.onRecoverableError),S.formState!==void 0&&(et=S.formState)),y=v2(p,1,!0,y,S??null,R,U,et,X,pe,Pe,_2),y.context=sA(null),S=y.current,R=Rl(),R=hs(R),U=Wc(R),U.callback=null,Ru(S,U,R),S=R,y.current.lanes=S,an(y,S),ju(y),p[dr]=y.current,JS(p),new _1(y)},E2.version="19.2.3",E2}var U7;function Qde(){if(U7)return QD.exports;U7=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),QD.exports=Vde(),QD.exports}var Ude=Qde();var Z7="popstate";function Zde(t={}){function e(r,i){let{pathname:o,search:a,hash:s}=r.location;return q$("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:eT(i)}return Wde(e,n,null,t)}function Yo(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qde(){return Math.random().toString(36).substring(2,10)}function q7(t,e){return{usr:t.state,key:t.key,idx:e}}function q$(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?$O(e):e,state:n,key:e&&e.key||r||qde()}}function eT({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function $O(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Wde(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s="POP",u=null,d=m();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function m(){return(a.state||{idx:null}).idx}function v(){s="POP";let M=m(),L=M==null?null:M-d;d=M,u&&u({action:s,location:A.location,delta:L})}function _(M,L){s="PUSH";let $=q$(A.location,M,L);d=m()+1;let N=q7($,d),F=A.createHref($);try{a.pushState(N,"",F)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;i.location.assign(F)}o&&u&&u({action:s,location:A.location,delta:1})}function O(M,L){s="REPLACE";let $=q$(A.location,M,L);d=m();let N=q7($,d),F=A.createHref($);a.replaceState(N,"",F),o&&u&&u({action:s,location:A.location,delta:0})}function E(M){return Hde(M)}let A={get action(){return s},get location(){return t(i,a)},listen(M){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Z7,v),u=M,()=>{i.removeEventListener(Z7,v),u=null}},createHref(M){return e(i,M)},createURL:E,encodeLocation(M){let L=E(M);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:_,replace:O,go(M){return a.go(M)}};return A}function Hde(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Yo(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:eT(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function KX(t,e,n="/"){return Gde(t,e,n,!1)}function Gde(t,e,n,r){let i=typeof e=="string"?$O(e):e,o=Kg(i.pathname||"/",n);if(o==null)return null;let a=JX(t);Xde(a);let s=null;for(let u=0;s==null&&u<a.length;++u){let d=afe(o);s=ofe(a[u],d,r)}return s}function JX(t,e=[],n=[],r="",i=!1){let o=(a,s,u=i,d)=>{let m={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&u)return;Yo(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let v=Gg([r,m.relativePath]),_=n.concat(m);a.children&&a.children.length>0&&(Yo(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),JX(a.children,e,_,v,u)),!(a.path==null&&!a.index)&&e.push({path:v,score:rfe(v,a.index),routesMeta:_})};return t.forEach((a,s)=>{if(a.path===""||!a.path?.includes("?"))o(a,s);else for(let u of eY(a.path))o(a,s,!0,u)}),e}function eY(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=eY(r.join("/")),s=[];return s.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&s.push(...a),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function Xde(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ife(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Yde=/^:[\w-]+$/,Kde=3,Jde=2,efe=1,tfe=10,nfe=-2,W7=t=>t==="*";function rfe(t,e){let n=t.split("/"),r=n.length;return n.some(W7)&&(r+=nfe),e&&(r+=Jde),n.filter(i=>!W7(i)).reduce((i,o)=>i+(Yde.test(o)?Kde:o===""?efe:tfe),r)}function ife(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function ofe(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",a=[];for(let s=0;s<r.length;++s){let u=r[s],d=s===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",v=S5({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),_=u.route;if(!v&&d&&n&&!r[r.length-1].route.index&&(v=S5({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!v)return null;Object.assign(i,v.params),a.push({params:i,pathname:Gg([o,v.pathname]),pathnameBase:hfe(Gg([o,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(o=Gg([o,v.pathnameBase]))}return a}function S5(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=sfe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((d,{paramName:m,isOptional:v},_)=>{if(m==="*"){let E=s[_]||"";a=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const O=s[_];return v&&!O?d[m]=void 0:d[m]=(O||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:t}}function sfe(t,e=!1,n=!0){dh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function afe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dh(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Kg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var tY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lfe=t=>tY.test(t);function cfe(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?$O(t):t,o;if(n)if(lfe(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),dh(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?o=H7(n.substring(1),"/"):o=H7(n,e)}else o=e;return{pathname:o,search:dfe(r),hash:ffe(i)}}function H7(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function WD(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ufe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function AN(t){let e=ufe(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function PN(t,e,n,r=!1){let i;typeof t=="string"?i=$O(t):(i={...t},Yo(!i.pathname||!i.pathname.includes("?"),WD("?","pathname","search",i)),Yo(!i.pathname||!i.pathname.includes("#"),WD("#","pathname","hash",i)),Yo(!i.search||!i.search.includes("#"),WD("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=n;else{let v=e.length-1;if(!r&&a.startsWith("..")){let _=a.split("/");for(;_[0]==="..";)_.shift(),v-=1;i.pathname=_.join("/")}s=v>=0?e[v]:"/"}let u=cfe(i,s),d=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}var Gg=t=>t.join("/").replace(/\/\/+/g,"/"),hfe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dfe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ffe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,pfe=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function mfe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function gfe(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var nY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rY(t,e){let n=t;if(typeof n!="string"||!tY.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(nY)try{let o=new URL(window.location.href),a=n.startsWith("//")?new URL(o.protocol+n):new URL(n),s=Kg(a.pathname,e);a.origin===o.origin&&s!=null?n=s+a.search+a.hash:i=!0}catch{dh(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var iY=["POST","PUT","PATCH","DELETE"];new Set(iY);var yfe=["GET",...iY];new Set(yfe);var zO=j.createContext(null);zO.displayName="DataRouter";var gR=j.createContext(null);gR.displayName="DataRouterState";var vfe=j.createContext(!1),oY=j.createContext({isTransitioning:!1});oY.displayName="ViewTransition";var xfe=j.createContext(new Map);xfe.displayName="Fetchers";var _fe=j.createContext(null);_fe.displayName="Await";var yh=j.createContext(null);yh.displayName="Navigation";var dk=j.createContext(null);dk.displayName="Location";var Om=j.createContext({outlet:null,matches:[],isDataRoute:!1});Om.displayName="Route";var MN=j.createContext(null);MN.displayName="RouteError";var sY="REACT_ROUTER_ERROR",bfe="REDIRECT",wfe="ROUTE_ERROR_RESPONSE";function Ofe(t){if(t.startsWith(`${sY}:${bfe}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Sfe(t){if(t.startsWith(`${sY}:${wfe}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new pfe(e.status,e.statusText,e.data)}catch{}}function Cfe(t,{relative:e}={}){Yo(NO(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=j.useContext(yh),{hash:i,pathname:o,search:a}=pk(t,{relative:e}),s=o;return n!=="/"&&(s=o==="/"?n:Gg([n,o])),r.createHref({pathname:s,search:a,hash:i})}function NO(){return j.useContext(dk)!=null}function Sm(){return Yo(NO(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(dk).location}var aY="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lY(t){j.useContext(yh).static||j.useLayoutEffect(t)}function fk(){let{isDataRoute:t}=j.useContext(Om);return t?Nfe():Tfe()}function Tfe(){Yo(NO(),"useNavigate() may be used only in the context of a <Router> component.");let t=j.useContext(zO),{basename:e,navigator:n}=j.useContext(yh),{matches:r}=j.useContext(Om),{pathname:i}=Sm(),o=JSON.stringify(AN(r)),a=j.useRef(!1);return lY(()=>{a.current=!0}),j.useCallback((u,d={})=>{if(dh(a.current,aY),!a.current)return;if(typeof u=="number"){n.go(u);return}let m=PN(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Gg([e,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[e,n,o,i,t])}j.createContext(null);function pk(t,{relative:e}={}){let{matches:n}=j.useContext(Om),{pathname:r}=Sm(),i=JSON.stringify(AN(n));return j.useMemo(()=>PN(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function kfe(t,e){return cY(t,e)}function cY(t,e,n,r,i){Yo(NO(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=j.useContext(yh),{matches:a}=j.useContext(Om),s=a[a.length-1],u=s?s.params:{},d=s?s.pathname:"/",m=s?s.pathnameBase:"/",v=s&&s.route;{let $=v&&v.path||"";hY(d,!v||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let _=Sm(),O;if(e){let $=typeof e=="string"?$O(e):e;Yo(m==="/"||$.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${$.pathname}" was given in the \`location\` prop.`),O=$}else O=_;let E=O.pathname||"/",A=E;if(m!=="/"){let $=m.replace(/^\//,"").split("/");A="/"+E.replace(/^\//,"").split("/").slice($.length).join("/")}let M=KX(t,{pathname:A});dh(v||M!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),dh(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=Rfe(M&&M.map($=>Object.assign({},$,{params:Object.assign({},u,$.params),pathname:Gg([m,o.encodeLocation?o.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?m:Gg([m,o.encodeLocation?o.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),a,n,r,i);return e&&L?j.createElement(dk.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},L):L}function Efe(){let t=zfe(),e=mfe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:i},n):null,a)}var Afe=j.createElement(Efe,null),uY=class extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=Sfe(t.digest);n&&(t=n)}let e=t!==void 0?j.createElement(Om.Provider,{value:this.props.routeContext},j.createElement(MN.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?j.createElement(Pfe,{error:t},e):e}};uY.contextType=vfe;var HD=new WeakMap;function Pfe({children:t,error:e}){let{basename:n}=j.useContext(yh);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Ofe(e.digest);if(r){let i=HD.get(e);if(i)throw i;let o=rY(r.location,n);if(nY&&!HD.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw HD.set(e,a),a}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return t}function Mfe({routeContext:t,match:e,children:n}){let r=j.useContext(zO);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Om.Provider,{value:t},n)}function Rfe(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=n?.errors;if(a!=null){let m=o.findIndex(v=>v.route.id&&a?.[v.route.id]!==void 0);Yo(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let s=!1,u=-1;if(n)for(let m=0;m<o.length;m++){let v=o[m];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(u=m),v.route.id){let{loaderData:_,errors:O}=n,E=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!O||O[v.route.id]===void 0);if(v.route.lazy||E){s=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}let d=n&&r?(m,v)=>{r(m,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:gfe(n.matches),errorInfo:v})}:void 0;return o.reduceRight((m,v,_)=>{let O,E=!1,A=null,M=null;n&&(O=a&&v.route.id?a[v.route.id]:void 0,A=v.route.errorElement||Afe,s&&(u<0&&_===0?(hY("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,M=null):u===_&&(E=!0,M=v.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,_+1)),$=()=>{let N;return O?N=A:E?N=M:v.route.Component?N=j.createElement(v.route.Component,null):v.route.element?N=v.route.element:N=m,j.createElement(Mfe,{match:v,routeContext:{outlet:m,matches:L,isDataRoute:n!=null},children:N})};return n&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?j.createElement(uY,{location:n.location,revalidation:n.revalidation,component:A,error:O,children:$(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:d}):$()},null)}function RN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ife(t){let e=j.useContext(zO);return Yo(e,RN(t)),e}function Dfe(t){let e=j.useContext(gR);return Yo(e,RN(t)),e}function Lfe(t){let e=j.useContext(Om);return Yo(e,RN(t)),e}function IN(t){let e=Lfe(t),n=e.matches[e.matches.length-1];return Yo(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function $fe(){return IN("useRouteId")}function zfe(){let t=j.useContext(MN),e=Dfe("useRouteError"),n=IN("useRouteError");return t!==void 0?t:e.errors?.[n]}function Nfe(){let{router:t}=Ife("useNavigate"),e=IN("useNavigate"),n=j.useRef(!1);return lY(()=>{n.current=!0}),j.useCallback(async(i,o={})=>{dh(n.current,aY),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var G7={};function hY(t,e,n){!e&&!G7[t]&&(G7[t]=!0,dh(!1,n))}j.memo(Bfe);function Bfe({routes:t,future:e,state:n,onError:r}){return cY(t,void 0,n,r,e)}function Ffe({to:t,replace:e,state:n,relative:r}){Yo(NO(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=j.useContext(yh);dh(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=j.useContext(Om),{pathname:a}=Sm(),s=fk(),u=PN(t,AN(o),a,r==="path"),d=JSON.stringify(u);return j.useEffect(()=>{s(JSON.parse(d),{replace:e,state:n,relative:r})},[s,d,r,e,n]),null}function Fp(t){Yo(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jfe({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:a}){Yo(!NO(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:s,navigator:i,static:o,unstable_useTransitions:a,future:{}}),[s,i,o,a]);typeof n=="string"&&(n=$O(n));let{pathname:d="/",search:m="",hash:v="",state:_=null,key:O="default"}=n,E=j.useMemo(()=>{let A=Kg(d,s);return A==null?null:{location:{pathname:A,search:m,hash:v,state:_,key:O},navigationType:r}},[s,d,m,v,_,O,r]);return dh(E!=null,`<Router basename="${s}"> is not able to match the URL "${d}${m}${v}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:j.createElement(yh.Provider,{value:u},j.createElement(dk.Provider,{children:e,value:E}))}function X7({children:t,location:e}){return kfe(W$(t),e)}function W$(t,e=[]){let n=[];return j.Children.forEach(t,(r,i)=>{if(!j.isValidElement(r))return;let o=[...e,i];if(r.type===j.Fragment){n.push.apply(n,W$(r.props.children,o));return}Yo(r.type===Fp,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Yo(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=W$(r.props.children,o)),n.push(a)}),n}var BP="get",FP="application/x-www-form-urlencoded";function yR(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function Vfe(t){return yR(t)&&t.tagName.toLowerCase()==="button"}function Qfe(t){return yR(t)&&t.tagName.toLowerCase()==="form"}function Ufe(t){return yR(t)&&t.tagName.toLowerCase()==="input"}function Zfe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qfe(t,e){return t.button===0&&(!e||e==="_self")&&!Zfe(t)}function H$(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Wfe(t,e){let n=H$(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}var vA=null;function Hfe(){if(vA===null)try{new FormData(document.createElement("form"),0),vA=!1}catch{vA=!0}return vA}var Gfe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function GD(t){return t!=null&&!Gfe.has(t)?(dh(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${FP}"`),null):t}function Xfe(t,e){let n,r,i,o,a;if(Qfe(t)){let s=t.getAttribute("action");r=s?Kg(s,e):null,n=t.getAttribute("method")||BP,i=GD(t.getAttribute("enctype"))||FP,o=new FormData(t)}else if(Vfe(t)||Ufe(t)&&(t.type==="submit"||t.type==="image")){let s=t.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||s.getAttribute("action");if(r=u?Kg(u,e):null,n=t.getAttribute("formmethod")||s.getAttribute("method")||BP,i=GD(t.getAttribute("formenctype"))||GD(s.getAttribute("enctype"))||FP,o=new FormData(s,t),!Hfe()){let{name:d,type:m,value:v}=t;if(m==="image"){let _=d?`${d}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else d&&o.append(d,v)}}else{if(yR(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=BP,r=null,i=FP,a=t}return o&&i==="text/plain"&&(a=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function DN(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yfe(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Kg(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Kfe(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jfe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function epe(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let a=await Kfe(o,n);return a.links?a.links():[]}return[]}));return ipe(r.flat(1).filter(Jfe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Y7(t,e,n,r,i,o){let a=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,s=(u,d)=>n[d].pathname!==u.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==u.params["*"];return o==="assets"?e.filter((u,d)=>a(u,d)||s(u,d)):o==="data"?e.filter((u,d)=>{let m=r.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(a(u,d)||s(u,d))return!0;if(u.route.shouldRevalidate){let v=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function tpe(t,e,{includeHydrateFallback:n}={}){return npe(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function npe(t){return[...new Set(t)]}function rpe(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function ipe(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(rpe(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function dY(){let t=j.useContext(zO);return DN(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ope(){let t=j.useContext(gR);return DN(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var LN=j.createContext(void 0);LN.displayName="FrameworkContext";function fY(){let t=j.useContext(LN);return DN(t,"You must render this element inside a <HydratedRouter> element"),t}function spe(t,e){let n=j.useContext(LN),[r,i]=j.useState(!1),[o,a]=j.useState(!1),{onFocus:s,onBlur:u,onMouseEnter:d,onMouseLeave:m,onTouchStart:v}=e,_=j.useRef(null);j.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let A=L=>{L.forEach($=>{a($.isIntersecting)})},M=new IntersectionObserver(A,{threshold:.5});return _.current&&M.observe(_.current),()=>{M.disconnect()}}},[t]),j.useEffect(()=>{if(r){let A=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(A)}}},[r]);let O=()=>{i(!0)},E=()=>{i(!1),a(!1)};return n?t!=="intent"?[o,_,{}]:[o,_,{onFocus:A2(s,O),onBlur:A2(u,E),onMouseEnter:A2(d,O),onMouseLeave:A2(m,E),onTouchStart:A2(v,O)}]:[!1,_,{}]}function A2(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function ape({page:t,...e}){let{router:n}=dY(),r=j.useMemo(()=>KX(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?j.createElement(cpe,{page:t,matches:r,...e}):null}function lpe(t){let{manifest:e,routeModules:n}=fY(),[r,i]=j.useState([]);return j.useEffect(()=>{let o=!1;return epe(t,e,n).then(a=>{o||i(a)}),()=>{o=!0}},[t,e,n]),r}function cpe({page:t,matches:e,...n}){let r=Sm(),{manifest:i,routeModules:o}=fY(),{basename:a}=dY(),{loaderData:s,matches:u}=ope(),d=j.useMemo(()=>Y7(t,e,u,i,r,"data"),[t,e,u,i,r]),m=j.useMemo(()=>Y7(t,e,u,i,r,"assets"),[t,e,u,i,r]),v=j.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let E=new Set,A=!1;if(e.forEach(L=>{let $=i.routes[L.route.id];!$||!$.hasLoader||(!d.some(N=>N.route.id===L.route.id)&&L.route.id in s&&o[L.route.id]?.shouldRevalidate||$.hasClientLoader?A=!0:E.add(L.route.id))}),E.size===0)return[];let M=Yfe(t,a,"data");return A&&E.size>0&&M.searchParams.set("_routes",e.filter(L=>E.has(L.route.id)).map(L=>L.route.id).join(",")),[M.pathname+M.search]},[a,s,r,i,d,e,t,o]),_=j.useMemo(()=>tpe(m,i),[m,i]),O=lpe(m);return j.createElement(j.Fragment,null,v.map(E=>j.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),_.map(E=>j.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),O.map(({key:E,link:A})=>j.createElement("link",{key:E,nonce:n.nonce,...A})))}function upe(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var hpe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hpe&&(window.__reactRouterVersion="7.11.0")}catch{}function dpe({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=j.useRef();i.current==null&&(i.current=Zde({window:r,v5Compat:!0}));let o=i.current,[a,s]=j.useState({action:o.action,location:o.location}),u=j.useCallback(d=>{n===!1?s(d):j.startTransition(()=>s(d))},[n]);return j.useLayoutEffect(()=>o.listen(u),[o,u]),j.createElement(jfe,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:o,unstable_useTransitions:n})}var pY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mc=j.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:a,state:s,target:u,to:d,preventScrollReset:m,viewTransition:v,unstable_defaultShouldRevalidate:_,...O},E){let{basename:A,unstable_useTransitions:M}=j.useContext(yh),L=typeof d=="string"&&pY.test(d),$=rY(d,A);d=$.to;let N=Cfe(d,{relative:i}),[F,Q,W]=spe(r,O),H=gpe(d,{replace:a,state:s,target:u,preventScrollReset:m,relative:i,viewTransition:v,unstable_defaultShouldRevalidate:_,unstable_useTransitions:M});function te(ce){e&&e(ce),ce.defaultPrevented||H(ce)}let ne=j.createElement("a",{...O,...W,href:$.absoluteURL||N,onClick:$.isExternal||o?e:te,ref:upe(E,Q),target:u,"data-discover":!L&&n==="render"?"true":void 0});return F&&!L?j.createElement(j.Fragment,null,ne,j.createElement(ape,{page:N})):ne});mc.displayName="Link";var fpe=j.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:a,viewTransition:s,children:u,...d},m){let v=pk(a,{relative:d.relative}),_=Sm(),O=j.useContext(gR),{navigator:E,basename:A}=j.useContext(yh),M=O!=null&&wpe(v)&&s===!0,L=E.encodeLocation?E.encodeLocation(v).pathname:v.pathname,$=_.pathname,N=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||($=$.toLowerCase(),N=N?N.toLowerCase():null,L=L.toLowerCase()),N&&A&&(N=Kg(N,A)||N);const F=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let Q=$===L||!i&&$.startsWith(L)&&$.charAt(F)==="/",W=N!=null&&(N===L||!i&&N.startsWith(L)&&N.charAt(L.length)==="/"),H={isActive:Q,isPending:W,isTransitioning:M},te=Q?e:void 0,ne;typeof r=="function"?ne=r(H):ne=[r,Q?"active":null,W?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let ce=typeof o=="function"?o(H):o;return j.createElement(mc,{...d,"aria-current":te,className:ne,ref:m,style:ce,to:a,viewTransition:s},typeof u=="function"?u(H):u)});fpe.displayName="NavLink";var ppe=j.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:a=BP,action:s,onSubmit:u,relative:d,preventScrollReset:m,viewTransition:v,unstable_defaultShouldRevalidate:_,...O},E)=>{let{unstable_useTransitions:A}=j.useContext(yh),M=_pe(),L=bpe(s,{relative:d}),$=a.toLowerCase()==="get"?"get":"post",N=typeof s=="string"&&pY.test(s),F=Q=>{if(u&&u(Q),Q.defaultPrevented)return;Q.preventDefault();let W=Q.nativeEvent.submitter,H=W?.getAttribute("formmethod")||a,te=()=>M(W||Q.currentTarget,{fetcherKey:e,method:H,navigate:n,replace:i,state:o,relative:d,preventScrollReset:m,viewTransition:v,unstable_defaultShouldRevalidate:_});A&&n!==!1?j.startTransition(()=>te()):te()};return j.createElement("form",{ref:E,method:$,action:L,onSubmit:r?u:F,...O,"data-discover":!N&&t==="render"?"true":void 0})});ppe.displayName="Form";function mpe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mY(t){let e=j.useContext(zO);return Yo(e,mpe(t)),e}function gpe(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:s,unstable_useTransitions:u}={}){let d=fk(),m=Sm(),v=pk(t,{relative:o});return j.useCallback(_=>{if(qfe(_,e)){_.preventDefault();let O=n!==void 0?n:eT(m)===eT(v),E=()=>d(t,{replace:O,state:r,preventScrollReset:i,relative:o,viewTransition:a,unstable_defaultShouldRevalidate:s});u?j.startTransition(()=>E()):E()}},[m,d,v,n,r,e,t,i,o,a,s,u])}function ype(t){dh(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=j.useRef(H$(t)),n=j.useRef(!1),r=Sm(),i=j.useMemo(()=>Wfe(r.search,n.current?null:e.current),[r.search]),o=fk(),a=j.useCallback((s,u)=>{const d=H$(typeof s=="function"?s(new URLSearchParams(i)):s);n.current=!0,o("?"+d,u)},[o,i]);return[i,a]}var vpe=0,xpe=()=>`__${String(++vpe)}__`;function _pe(){let{router:t}=mY("useSubmit"),{basename:e}=j.useContext(yh),n=$fe(),r=t.fetch,i=t.navigate;return j.useCallback(async(o,a={})=>{let{action:s,method:u,encType:d,formData:m,body:v}=Xfe(o,e);if(a.navigate===!1){let _=a.fetcherKey||xpe();await r(_,n,a.action||s,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:m,body:v,formMethod:a.method||u,formEncType:a.encType||d,flushSync:a.flushSync})}else await i(a.action||s,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:m,body:v,formMethod:a.method||u,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,e,n])}function bpe(t,{relative:e}={}){let{basename:n}=j.useContext(yh),r=j.useContext(Om);Yo(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...pk(t||".",{relative:e})},a=Sm();if(t==null){o.search=a.search;let s=new URLSearchParams(o.search),u=s.getAll("index");if(u.some(m=>m==="")){s.delete("index"),u.filter(v=>v).forEach(v=>s.append("index",v));let m=s.toString();o.search=m?`?${m}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Gg([n,o.pathname])),eT(o)}function wpe(t,{relative:e}={}){let n=j.useContext(oY);Yo(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=mY("useViewTransitionState"),i=pk(t,{relative:e});if(!n.isTransitioning)return!1;let o=Kg(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Kg(n.nextLocation.pathname,r)||n.nextLocation.pathname;return S5(i.pathname,a)!=null||S5(i.pathname,o)!=null}var mm=YX();const sC=lv(mm);var jP={exports:{}};var Ope=jP.exports,K7;function Spe(){return K7||(K7=1,(function(t,e){(function(n,r){t.exports=r()})(Ope,(function(){var n={},r={};function i(a,s,u){if(r[a]=u,a==="index"){var d="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",m={};return r.shared(m),r.index(n,m),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([d],{type:"text/javascript"}))),n}}i("shared",["exports"],(function(a){function s(f,l,h,x){return new(h||(h=Promise))((function(w,T){function k(Z){try{B(x.next(Z))}catch(Y){T(Y)}}function D(Z){try{B(x.throw(Z))}catch(Y){T(Y)}}function B(Z){var Y;Z.done?w(Z.value):(Y=Z.value,Y instanceof h?Y:new h((function(ee){ee(Y)}))).then(k,D)}B((x=x.apply(f,l||[])).next())}))}function u(f,l){this.x=f,this.y=l}function d(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var m,v;typeof SuppressedError=="function"&&SuppressedError,u.prototype={clone(){return new u(this.x,this.y)},add(f){return this.clone()._add(f)},sub(f){return this.clone()._sub(f)},multByPoint(f){return this.clone()._multByPoint(f)},divByPoint(f){return this.clone()._divByPoint(f)},mult(f){return this.clone()._mult(f)},div(f){return this.clone()._div(f)},rotate(f){return this.clone()._rotate(f)},rotateAround(f,l){return this.clone()._rotateAround(f,l)},matMult(f){return this.clone()._matMult(f)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(f){return this.x===f.x&&this.y===f.y},dist(f){return Math.sqrt(this.distSqr(f))},distSqr(f){const l=f.x-this.x,h=f.y-this.y;return l*l+h*h},angle(){return Math.atan2(this.y,this.x)},angleTo(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith(f){return this.angleWithSep(f.x,f.y)},angleWithSep(f,l){return Math.atan2(this.x*l-this.y*f,this.x*f+this.y*l)},_matMult(f){const l=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=l,this},_add(f){return this.x+=f.x,this.y+=f.y,this},_sub(f){return this.x-=f.x,this.y-=f.y,this},_mult(f){return this.x*=f,this.y*=f,this},_div(f){return this.x/=f,this.y/=f,this},_multByPoint(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint(f){return this.x/=f.x,this.y/=f.y,this},_unit(){return this._div(this.mag()),this},_perp(){const f=this.y;return this.y=this.x,this.x=-f,this},_rotate(f){const l=Math.cos(f),h=Math.sin(f),x=h*this.x+l*this.y;return this.x=l*this.x-h*this.y,this.y=x,this},_rotateAround(f,l){const h=Math.cos(f),x=Math.sin(f),w=l.y+x*(this.x-l.x)+h*(this.y-l.y);return this.x=l.x+h*(this.x-l.x)-x*(this.y-l.y),this.y=w,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:u},u.convert=function(f){if(f instanceof u)return f;if(Array.isArray(f))return new u(+f[0],+f[1]);if(f.x!==void 0&&f.y!==void 0)return new u(+f.x,+f.y);throw new Error("Expected [x, y] or {x, y} point format")};var _=(function(){if(v)return m;function f(l,h,x,w){this.cx=3*l,this.bx=3*(x-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(w-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=h,this.p2x=x,this.p2y=w}return v=1,m=f,f.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,h){if(h===void 0&&(h=1e-6),l<0)return 0;if(l>1)return 1;for(var x=l,w=0;w<8;w++){var T=this.sampleCurveX(x)-l;if(Math.abs(T)<h)return x;var k=this.sampleCurveDerivativeX(x);if(Math.abs(k)<1e-6)break;x-=T/k}var D=0,B=1;for(x=l,w=0;w<20&&(T=this.sampleCurveX(x),!(Math.abs(T-l)<h));w++)l>T?D=x:B=x,x=.5*(B-D)+D;return x},solve:function(l,h){return this.sampleCurveY(this.solveCurveX(l,h))}},m})(),O=d(_);let E,A;function M(){return E==null&&(E=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),E}function L(){if(A==null&&(A=!1,M())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let x=0;x<25;x++){const w=4*x;l.fillStyle=`rgb(${w},${w+1},${w+2})`,l.fillRect(x%5,Math.floor(x/5),1,1)}const h=l.getImageData(0,0,5,5).data;for(let x=0;x<100;x++)if(x%4!=3&&h[x]!==x){A=!0;break}}}return A||!1}var $=1e-6,N=typeof Float32Array<"u"?Float32Array:Array;function F(){var f=new N(9);return N!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function Q(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function W(){var f=new N(3);return N!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function H(f){var l=f[0],h=f[1],x=f[2];return Math.sqrt(l*l+h*h+x*x)}function te(f,l,h){var x=new N(3);return x[0]=f,x[1]=l,x[2]=h,x}function ne(f,l,h){return f[0]=l[0]+h[0],f[1]=l[1]+h[1],f[2]=l[2]+h[2],f}function ce(f,l,h){return f[0]=l[0]*h,f[1]=l[1]*h,f[2]=l[2]*h,f}function we(f,l,h){var x=l[0],w=l[1],T=l[2],k=h[0],D=h[1],B=h[2];return f[0]=w*B-T*D,f[1]=T*k-x*B,f[2]=x*D-w*k,f}var re,se=H;function be(f,l,h){var x=l[0],w=l[1],T=l[2],k=l[3];return f[0]=h[0]*x+h[4]*w+h[8]*T+h[12]*k,f[1]=h[1]*x+h[5]*w+h[9]*T+h[13]*k,f[2]=h[2]*x+h[6]*w+h[10]*T+h[14]*k,f[3]=h[3]*x+h[7]*w+h[11]*T+h[15]*k,f}function fe(){var f=new N(4);return N!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function ve(f,l,h,x){var w=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",T=Math.PI/360;l*=T,x*=T,h*=T;var k=Math.sin(l),D=Math.cos(l),B=Math.sin(h),Z=Math.cos(h),Y=Math.sin(x),ee=Math.cos(x);switch(w){case"xyz":f[0]=k*Z*ee+D*B*Y,f[1]=D*B*ee-k*Z*Y,f[2]=D*Z*Y+k*B*ee,f[3]=D*Z*ee-k*B*Y;break;case"xzy":f[0]=k*Z*ee-D*B*Y,f[1]=D*B*ee-k*Z*Y,f[2]=D*Z*Y+k*B*ee,f[3]=D*Z*ee+k*B*Y;break;case"yxz":f[0]=k*Z*ee+D*B*Y,f[1]=D*B*ee-k*Z*Y,f[2]=D*Z*Y-k*B*ee,f[3]=D*Z*ee+k*B*Y;break;case"yzx":f[0]=k*Z*ee+D*B*Y,f[1]=D*B*ee+k*Z*Y,f[2]=D*Z*Y-k*B*ee,f[3]=D*Z*ee-k*B*Y;break;case"zxy":f[0]=k*Z*ee-D*B*Y,f[1]=D*B*ee+k*Z*Y,f[2]=D*Z*Y+k*B*ee,f[3]=D*Z*ee-k*B*Y;break;case"zyx":f[0]=k*Z*ee-D*B*Y,f[1]=D*B*ee+k*Z*Y,f[2]=D*Z*Y-k*B*ee,f[3]=D*Z*ee+k*B*Y;break;default:throw new Error("Unknown angle order "+w)}return f}function Me(){var f=new N(2);return N!=Float32Array&&(f[0]=0,f[1]=0),f}function Ne(f,l){var h=new N(2);return h[0]=f,h[1]=l,h}W(),re=new N(4),N!=Float32Array&&(re[0]=0,re[1]=0,re[2]=0,re[3]=0),W(),te(1,0,0),te(0,1,0),fe(),fe(),F(),Me();const Qe=8192;function Ce(f,l,h){return l*(Qe/(f.tileSize*Math.pow(2,h-f.tileID.overscaledZ)))}function Ae(f,l){return(f%l+l)%l}function Xe(f,l,h){return f*(1-h)+l*h}function ke(f){if(f<=0)return 0;if(f>=1)return 1;const l=f*f,h=l*f;return 4*(f<.5?h:3*(f-l)+h-.75)}function ft(f,l,h,x){const w=new O(f,l,h,x);return T=>w.solve(T)}const pt=ft(.25,.1,.25,1);function lt(f,l,h){return Math.min(h,Math.max(l,f))}function ot(f,l,h){const x=h-l,w=((f-l)%x+x)%x+l;return w===l?h:w}function yt(f,...l){for(const h of l)for(const x in h)f[x]=h[x];return f}let Et=1;function Tt(f,l,h){const x={};for(const w in f)x[w]=l.call(this,f[w],w,f);return x}function Ht(f,l,h){const x={};for(const w in f)l.call(this,f[w],w,f)&&(x[w]=f[w]);return x}function wt(f){return Array.isArray(f)?f.map(wt):typeof f=="object"&&f?Tt(f,wt):f}const un={};function Gt(f){un[f]||(typeof console<"u"&&console.warn(f),un[f]=!0)}function Jt(f,l,h){return(h.y-f.y)*(l.x-f.x)>(l.y-f.y)*(h.x-f.x)}function Sn(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let nn=null;function Cn(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const jn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Gn(f,l,h,x,w){return s(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const T=new VideoFrame(f,{timestamp:0});try{const k=T?.format;if(!k||!k.startsWith("BGR")&&!k.startsWith("RGB"))throw new Error(`Unrecognized format ${k}`);const D=k.startsWith("BGR"),B=new Uint8ClampedArray(x*w*4);if(yield T.copyTo(B,(function(Z,Y,ee,oe,ue){const me=4*Math.max(-Y,0),ge=(Math.max(0,ee)-ee)*oe*4+me,xe=4*oe,Te=Math.max(0,Y),Ue=Math.max(0,ee);return{rect:{x:Te,y:Ue,width:Math.min(Z.width,Y+oe)-Te,height:Math.min(Z.height,ee+ue)-Ue},layout:[{offset:ge,stride:xe}]}})(f,l,h,x,w)),D)for(let Z=0;Z<B.length;Z+=4){const Y=B[Z];B[Z]=B[Z+2],B[Z+2]=Y}return B}finally{T.close()}}))}let je,Ye;function vt(f,l,h,x){return f.addEventListener(l,h,x),{unsubscribe:()=>{f.removeEventListener(l,h,x)}}}function kt(f){return f*Math.PI/180}function jt(f){return f/Math.PI*180}const Oe={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ae={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},K="AbortError";class _e extends Error{constructor(l=K){super(l instanceof Error?l.message:l),this.name=K,l instanceof Error&&l.stack&&(this.stack=l.stack)}}function $e(f){return f.name===K}const ze={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function nt(f){return ze.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const tt="global-dispatcher";class Ke extends Error{constructor(l,h,x,w){super(`AJAXError: ${h} (${l}): ${x}`),this.status=l,this.statusText=h,this.url=x,this.body=w}}const at=()=>Sn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,St=function(f,l){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const x=nt(f.url);if(x)return x(f,l);if(Sn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:tt},l)}if(!(/^file:/.test(h=f.url)||/^file:/.test(at())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(x,w){return s(this,void 0,void 0,(function*(){const T=new Request(x.url,{method:x.method||"GET",body:x.body,credentials:x.credentials,headers:x.headers,cache:x.cache,referrer:at(),signal:w.signal});let k,D;x.type!=="json"||T.headers.has("Accept")||T.headers.set("Accept","application/json");try{k=yield fetch(T)}catch(Z){throw $e(Z)?Z:new Ke(0,Z.message,x.url,new Blob)}if(!k.ok){const Z=yield k.blob();throw new Ke(k.status,k.statusText,x.url,Z)}D=x.type==="arrayBuffer"||x.type==="image"?k.arrayBuffer():x.type==="json"?k.json():k.text();const B=yield D;return w.signal.throwIfAborted(),{data:B,cacheControl:k.headers.get("Cache-Control"),expires:k.headers.get("Expires")}}))})(f,l);if(Sn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:tt},l)}var h;return(function(x,w){return new Promise(((T,k)=>{var D;const B=new XMLHttpRequest;B.open(x.method||"GET",x.url,!0),x.type!=="arrayBuffer"&&x.type!=="image"||(B.responseType="arraybuffer");for(const Z in x.headers)B.setRequestHeader(Z,x.headers[Z]);x.type==="json"&&(B.responseType="text",!((D=x.headers)===null||D===void 0)&&D.Accept||B.setRequestHeader("Accept","application/json")),B.withCredentials=x.credentials==="include",B.onerror=()=>{k(new Error(B.statusText))},B.onload=()=>{if(!w.signal.aborted)if((B.status>=200&&B.status<300||B.status===0)&&B.response!==null){let Z=B.response;if(x.type==="json")try{Z=JSON.parse(B.response)}catch(Y){return void k(Y)}T({data:Z,cacheControl:B.getResponseHeader("Cache-Control"),expires:B.getResponseHeader("Expires")})}else{const Z=new Blob([B.response],{type:B.getResponseHeader("Content-Type")});k(new Ke(B.status,B.statusText,x.url,Z))}},w.signal.addEventListener("abort",(()=>{B.abort(),k(new _e(w.signal.reason))})),B.send(x.body)}))})(f,l)};function st(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const l=new URL(f),h=window.location;return l.protocol===h.protocol&&l.host===h.host}function $t(f,l,h){h[f]&&h[f].indexOf(l)!==-1||(h[f]=h[f]||[],h[f].push(l))}function sn(f,l,h){if(h&&h[f]){const x=h[f].indexOf(l);x!==-1&&h[f].splice(x,1)}}class Vn{constructor(l,h={}){yt(this,h),this.type=l}}class Ar extends Vn{constructor(l,h={}){super("error",yt({error:l},h))}}class Or{on(l,h){return this._listeners=this._listeners||{},$t(l,h,this._listeners),{unsubscribe:()=>{this.off(l,h)}}}off(l,h){return sn(l,h,this._listeners),sn(l,h,this._oneTimeListeners),this}once(l,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},$t(l,h,this._oneTimeListeners),this):new Promise((x=>this.once(l,x)))}fire(l,h){typeof l=="string"&&(l=new Vn(l,h||{}));const x=l.type;if(this.listens(x)){l.target=this;const w=this._listeners&&this._listeners[x]?this._listeners[x].slice():[];for(const D of w)D.call(this,l);const T=this._oneTimeListeners&&this._oneTimeListeners[x]?this._oneTimeListeners[x].slice():[];for(const D of T)sn(x,D,this._oneTimeListeners),D.call(this,l);const k=this._eventedParent;k&&(yt(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(l))}else l instanceof Ar&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,h){return this._eventedParent=l,this._eventedParentData=h,this}}var ut={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const Fr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ji(f,l){const h={};for(const x in f)x!=="ref"&&(h[x]=f[x]);return Fr.forEach((x=>{x in l&&(h[x]=l[x])})),h}function tr(f,l){if(Array.isArray(f)){if(!Array.isArray(l)||f.length!==l.length)return!1;for(let h=0;h<f.length;h++)if(!tr(f[h],l[h]))return!1;return!0}if(typeof f=="object"&&f!==null&&l!==null){if(typeof l!="object"||Object.keys(f).length!==Object.keys(l).length)return!1;for(const h in f)if(!tr(f[h],l[h]))return!1;return!0}return f===l}function Pn(f,l){f.push(l)}function ci(f,l,h){Pn(h,{command:"addSource",args:[f,l[f]]})}function an(f,l,h){Pn(l,{command:"removeSource",args:[f]}),h[f]=!0}function En(f,l,h,x){an(f,h,x),ci(f,l,h)}function Hn(f,l,h){let x;for(x in f[h])if(Object.prototype.hasOwnProperty.call(f[h],x)&&x!=="data"&&!tr(f[h][x],l[h][x]))return!1;for(x in l[h])if(Object.prototype.hasOwnProperty.call(l[h],x)&&x!=="data"&&!tr(f[h][x],l[h][x]))return!1;return!0}function nr(f,l,h,x,w,T){f=f||{},l=l||{};for(const k in f)Object.prototype.hasOwnProperty.call(f,k)&&(tr(f[k],l[k])||h.push({command:T,args:[x,k,l[k],w]}));for(const k in l)Object.prototype.hasOwnProperty.call(l,k)&&!Object.prototype.hasOwnProperty.call(f,k)&&(tr(f[k],l[k])||h.push({command:T,args:[x,k,l[k],w]}))}function ki(f){return f.id}function hs(f,l){return f[l.id]=l,f}class Xt{constructor(l,h,x,w){this.message=(l?`${l}: `:"")+x,w&&(this.identifier=w),h!=null&&h.__line__&&(this.line=h.__line__)}}function Oo(f,...l){for(const h of l)for(const x in h)f[x]=h[x];return f}class Jo extends Error{constructor(l,h){super(h),this.message=h,this.key=l}}class ca{constructor(l,h=[]){this.parent=l,this.bindings={};for(const[x,w]of h)this.bindings[x]=w}concat(l){return new ca(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const Si={kind:"null"},on={kind:"number"},dr={kind:"string"},vr={kind:"boolean"},ja={kind:"color"},Oy={kind:"projectionDefinition"},Tc={kind:"object"},hr={kind:"value"},kd={kind:"collator"},kc={kind:"formatted"},wu={kind:"padding"},Ec={kind:"colorArray"},Ac={kind:"numberArray"},lo={kind:"resolvedImage"},Wf={kind:"variableAnchorOffsetCollection"};function js(f,l){return{kind:"array",itemType:f,N:l}}function zr(f){if(f.kind==="array"){const l=zr(f.itemType);return typeof f.N=="number"?`array<${l}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${l}>`}return f.kind}const Ou=[Si,on,dr,vr,ja,Oy,kc,Tc,js(hr),wu,Ac,Ec,lo,Wf];function Hf(f,l){if(l.kind==="error")return null;if(f.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!Hf(f.itemType,l.itemType))&&(typeof f.N!="number"||f.N===l.N))return null}else{if(f.kind===l.kind)return null;if(f.kind==="value"){for(const h of Ou)if(!Hf(h,l))return null}}return`Expected ${zr(f)} but found ${zr(l)} instead.`}function Gf(f,l){return l.some((h=>h.kind===f.kind))}function _h(f,l){return l.some((h=>h==="null"?f===null:h==="array"?Array.isArray(f):h==="object"?f&&!Array.isArray(f)&&typeof f=="object":h===typeof f))}function Xl(f,l){return f.kind==="array"&&l.kind==="array"?f.itemType.kind===l.itemType.kind&&typeof f.N=="number":f.kind===l.kind}const Am=.96422,Pc=.82521,gl=4/29,Zr=6/29,bv=3*Zr*Zr,ib=Zr*Zr*Zr,Ed=Math.PI/180,wv=180/Math.PI;function Pm(f){return(f%=360)<0&&(f+=360),f}function ob([f,l,h,x]){let w,T;const k=Mm((.2225045*(f=ua(f))+.7168786*(l=ua(l))+.0606169*(h=ua(h)))/1);f===l&&l===h?w=T=k:(w=Mm((.4360747*f+.3850649*l+.1430804*h)/Am),T=Mm((.0139322*f+.0971045*l+.7141733*h)/Pc));const D=116*k-16;return[D<0?0:D,500*(w-k),200*(k-T),x]}function ua(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Mm(f){return f>ib?Math.pow(f,1/3):f/bv+gl}function Sy([f,l,h,x]){let w=(f+16)/116,T=isNaN(l)?w:w+l/500,k=isNaN(h)?w:w-h/200;return w=1*bh(w),T=Am*bh(T),k=Pc*bh(k),[Rm(3.1338561*T-1.6168667*w-.4906146*k),Rm(-.9787684*T+1.9161415*w+.033454*k),Rm(.0719453*T-.2289914*w+1.4052427*k),x]}function Rm(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function bh(f){return f>Zr?f*f*f:bv*(f-gl)}const sb=Object.hasOwn||function(f,l){return Object.prototype.hasOwnProperty.call(f,l)};function Xf(f,l){return sb(f,l)?f[l]:void 0}function Su(f){return parseInt(f.padEnd(2,f),16)/255}function ab(f,l){return Ad(l?f/100:f,0,1)}function Ad(f,l,h){return Math.min(Math.max(l,f),h)}function Cy(f){return!f.some(Number.isNaN)}const Pd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function wh(f,l,h){return f+h*(l-f)}function Yf(f,l,h){return f.map(((x,w)=>wh(x,l[w],h)))}class mr{constructor(l,h,x,w=1,T=!0){this.r=l,this.g=h,this.b=x,this.a=w,T||(this.r*=w,this.g*=w,this.b*=w,w||this.overwriteGetter("rgb",[l,h,x,w]))}static parse(l){if(l instanceof mr)return l;if(typeof l!="string")return;const h=(function(x){if((x=x.toLowerCase().trim())==="transparent")return[0,0,0,0];const w=Xf(Pd,x);if(w){const[k,D,B]=w;return[k/255,D/255,B/255,1]}if(x.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(x)){const k=x.length<6?1:2;let D=1;return[Su(x.slice(D,D+=k)),Su(x.slice(D,D+=k)),Su(x.slice(D,D+=k)),Su(x.slice(D,D+k)||"ff")]}if(x.startsWith("rgb")){const k=x.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[D,B,Z,Y,ee,oe,ue,me,ge,xe,Te,Ue]=k,Ee=[Y||" ",ue||" ",xe].join("");if(Ee==="  "||Ee==="  /"||Ee===",,"||Ee===",,,"){const Re=[Z,oe,ge].join(""),qe=Re==="%%%"?100:Re===""?255:0;if(qe){const Ge=[Ad(+B/qe,0,1),Ad(+ee/qe,0,1),Ad(+me/qe,0,1),Te?ab(+Te,Ue):1];if(Cy(Ge))return Ge}}return}}const T=x.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[k,D,B,Z,Y,ee,oe,ue,me]=T,ge=[B||" ",Y||" ",oe].join("");if(ge==="  "||ge==="  /"||ge===",,"||ge===",,,"){const xe=[+D,Ad(+Z,0,100),Ad(+ee,0,100),ue?ab(+ue,me):1];if(Cy(xe))return(function([Te,Ue,Ee,Re]){function qe(Ge){const dt=(Ge+Te/30)%12,Lt=Ue*Math.min(Ee,1-Ee);return Ee-Lt*Math.max(-1,Math.min(dt-3,9-dt,1))}return Te=Pm(Te),Ue/=100,Ee/=100,[qe(0),qe(8),qe(4),Re]})(xe)}}})(l);return h?new mr(...h,!1):void 0}get rgb(){const{r:l,g:h,b:x,a:w}=this,T=w||1/0;return this.overwriteGetter("rgb",[l/T,h/T,x/T,w])}get hcl(){return this.overwriteGetter("hcl",(function(l){const[h,x,w,T]=ob(l),k=Math.sqrt(x*x+w*w);return[Math.round(1e4*k)?Pm(Math.atan2(w,x)*wv):NaN,k,h,T]})(this.rgb))}get lab(){return this.overwriteGetter("lab",ob(this.rgb))}overwriteGetter(l,h){return Object.defineProperty(this,l,{value:h}),h}toString(){const[l,h,x,w]=this.rgb;return`rgba(${[l,h,x].map((T=>Math.round(255*T))).join(",")},${w})`}static interpolate(l,h,x,w="rgb"){switch(w){case"rgb":{const[T,k,D,B]=Yf(l.rgb,h.rgb,x);return new mr(T,k,D,B,!1)}case"hcl":{const[T,k,D,B]=l.hcl,[Z,Y,ee,oe]=h.hcl;let ue,me;if(isNaN(T)||isNaN(Z))isNaN(T)?isNaN(Z)?ue=NaN:(ue=Z,D!==1&&D!==0||(me=Y)):(ue=T,ee!==1&&ee!==0||(me=k));else{let Ee=Z-T;Z>T&&Ee>180?Ee-=360:Z<T&&T-Z>180&&(Ee+=360),ue=T+x*Ee}const[ge,xe,Te,Ue]=(function([Ee,Re,qe,Ge]){return Ee=isNaN(Ee)?0:Ee*Ed,Sy([qe,Math.cos(Ee)*Re,Math.sin(Ee)*Re,Ge])})([ue,me??wh(k,Y,x),wh(D,ee,x),wh(B,oe,x)]);return new mr(ge,xe,Te,Ue,!1)}case"lab":{const[T,k,D,B]=Sy(Yf(l.lab,h.lab,x));return new mr(T,k,D,B,!1)}}}}mr.black=new mr(0,0,0,1),mr.white=new mr(1,1,1,1),mr.transparent=new mr(0,0,0,0),mr.red=new mr(1,0,0,1);class Yl{constructor(l,h,x){this.sensitivity=l?h?"variant":"case":h?"accent":"base",this.locale=x,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,h){return this.collator.compare(l,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Ov=["bottom","center","top"];class Im{constructor(l,h,x,w,T,k){this.text=l,this.image=h,this.scale=x,this.fontStack=w,this.textColor=T,this.verticalAlign=k}}class es{constructor(l){this.sections=l}static fromString(l){return new es([new Im(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((l=>l.text.length!==0||l.image&&l.image.name.length!==0))}static factory(l){return l instanceof es?l:es.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map((l=>l.text)).join("")}}class $o{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof $o)return l;if(typeof l=="number")return new $o([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const h of l)if(typeof h!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new $o(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,h,x){return new $o(Yf(l.values,h.values,x))}}class Vi{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Vi)return l;if(typeof l=="number")return new Vi([l]);if(Array.isArray(l)){for(const h of l)if(typeof h!="number")return;return new Vi(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,h,x){return new Vi(Yf(l.values,h.values,x))}}class Kn{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Kn)return l;if(typeof l=="string"){const x=mr.parse(l);return x?new Kn([x]):void 0}if(!Array.isArray(l))return;const h=[];for(const x of l){if(typeof x!="string")return;const w=mr.parse(x);if(!w)return;h.push(w)}return new Kn(h)}toString(){return JSON.stringify(this.values)}static interpolate(l,h,x,w="rgb"){const T=[];if(l.values.length!=h.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${h.values.length}), cannot interpolate.`);for(let k=0;k<l.values.length;k++)T.push(mr.interpolate(l.values[k],h.values[k],x,w));return new Kn(T)}}class yi extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}const yl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class co{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof co)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let h=0;h<l.length;h+=2){const x=l[h],w=l[h+1];if(typeof x!="string"||!yl.has(x)||!Array.isArray(w)||w.length!==2||typeof w[0]!="number"||typeof w[1]!="number")return}return new co(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,h,x){const w=l.values,T=h.values;if(w.length!==T.length)throw new yi(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${h.toString()}`);const k=[];for(let D=0;D<w.length;D+=2){if(w[D]!==T[D])throw new yi(`Cannot interpolate values containing mismatched anchors. from[${D}]: ${w[D]}, to[${D}]: ${T[D]}`);k.push(w[D]);const[B,Z]=w[D+1],[Y,ee]=T[D+1];k.push([wh(B,Y,x),wh(Z,ee,x)])}return new co(k)}}class ha{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new ha({name:l,available:!1}):null}}class ts{constructor(l,h,x){this.from=l,this.to=h,this.transition=x}static interpolate(l,h,x){return new ts(l,h,x)}static parse(l){return l instanceof ts?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new ts(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new ts(l.from,l.to,l.transition):typeof l=="string"?new ts(l,l,1):void 0}}function Va(f,l,h,x){return typeof f=="number"&&f>=0&&f<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof h=="number"&&h>=0&&h<=255?x===void 0||typeof x=="number"&&x>=0&&x<=1?null:`Invalid rgba value [${[f,l,h,x].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof x=="number"?[f,l,h,x]:[f,l,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Mc(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof ts||f instanceof mr||f instanceof Yl||f instanceof es||f instanceof $o||f instanceof Vi||f instanceof Kn||f instanceof co||f instanceof ha)return!0;if(Array.isArray(f)){for(const l of f)if(!Mc(l))return!1;return!0}if(typeof f=="object"){for(const l in f)if(!Mc(f[l]))return!1;return!0}return!1}function Qi(f){if(f===null)return Si;if(typeof f=="string")return dr;if(typeof f=="boolean")return vr;if(typeof f=="number")return on;if(f instanceof mr)return ja;if(f instanceof ts)return Oy;if(f instanceof Yl)return kd;if(f instanceof es)return kc;if(f instanceof $o)return wu;if(f instanceof Vi)return Ac;if(f instanceof Kn)return Ec;if(f instanceof co)return Wf;if(f instanceof ha)return lo;if(Array.isArray(f)){const l=f.length;let h;for(const x of f){const w=Qi(x);if(h){if(h===w)continue;h=hr;break}h=w}return js(h||hr,l)}return Tc}function Oh(f){const l=typeof f;return f===null?"":l==="string"||l==="number"||l==="boolean"?String(f):f instanceof mr||f instanceof ts||f instanceof es||f instanceof $o||f instanceof Vi||f instanceof Kn||f instanceof co||f instanceof ha?f.toString():JSON.stringify(f)}class Qa{constructor(l,h){this.type=l,this.value=h}static parse(l,h){if(l.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Mc(l[1]))return h.error("invalid value");const x=l[1];let w=Qi(x);const T=h.expectedType;return w.kind!=="array"||w.N!==0||!T||T.kind!=="array"||typeof T.N=="number"&&T.N!==0||(w=T),new Qa(w,x)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Md={string:dr,number:on,boolean:vr,object:Tc};class da{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");let x,w=1;const T=l[0];if(T==="array"){let D,B;if(l.length>2){const Z=l[1];if(typeof Z!="string"||!(Z in Md)||Z==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);D=Md[Z],w++}else D=hr;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return h.error('The length argument to "array" must be a positive integer literal',2);B=l[2],w++}x=js(D,B)}else{if(!Md[T])throw new Error(`Types doesn't contain name = ${T}`);x=Md[T]}const k=[];for(;w<l.length;w++){const D=h.parse(l[w],w,hr);if(!D)return null;k.push(D)}return new da(x,k)}evaluate(l){for(let h=0;h<this.args.length;h++){const x=this.args[h].evaluate(l);if(!Hf(this.type,Qi(x)))return x;if(h===this.args.length-1)throw new yi(`Expected value to be of type ${zr(this.type)}, but found ${zr(Qi(x))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const Zo={"to-boolean":vr,"to-color":ja,"to-number":on,"to-string":dr};class fa{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");const x=l[0];if(!Zo[x])throw new Error(`Can't parse ${x} as it is not part of the known types`);if((x==="to-boolean"||x==="to-string")&&l.length!==2)return h.error("Expected one argument.");const w=Zo[x],T=[];for(let k=1;k<l.length;k++){const D=h.parse(l[k],k,hr);if(!D)return null;T.push(D)}return new fa(w,T)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let h,x;for(const w of this.args){if(h=w.evaluate(l),x=null,h instanceof mr)return h;if(typeof h=="string"){const T=l.parseColor(h);if(T)return T}else if(Array.isArray(h)&&(x=h.length<3||h.length>4?`Invalid rgba value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:Va(h[0],h[1],h[2],h[3]),!x))return new mr(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new yi(x||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const x of this.args){h=x.evaluate(l);const w=$o.parse(h);if(w)return w}throw new yi(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"numberArray":{let h;for(const x of this.args){h=x.evaluate(l);const w=Vi.parse(h);if(w)return w}throw new yi(`Could not parse numberArray from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"colorArray":{let h;for(const x of this.args){h=x.evaluate(l);const w=Kn.parse(h);if(w)return w}throw new yi(`Could not parse colorArray from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const x of this.args){h=x.evaluate(l);const w=co.parse(h);if(w)return w}throw new yi(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const x of this.args){if(h=x.evaluate(l),h===null)return 0;const w=Number(h);if(!isNaN(w))return w}throw new yi(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return es.fromString(Oh(this.args[0].evaluate(l)));case"resolvedImage":return ha.fromString(Oh(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return Oh(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}const Dm=["Unknown","Point","LineString","Polygon"];class Rd{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Dm[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let h=this._parseColorCache.get(l);return h||(h=mr.parse(l),this._parseColorCache.set(l,h)),h}}class Id{constructor(l,h,x=[],w,T=new ca,k=[]){this.registry=l,this.path=x,this.key=x.map((D=>`[${D}]`)).join(""),this.scope=T,this.errors=k,this.expectedType=w,this._isConstant=h}parse(l,h,x,w,T={}){return h?this.concat(h,x,w)._parse(l,T):this._parse(l,T)}_parse(l,h){function x(w,T,k){return k==="assert"?new da(T,[w]):k==="coerce"?new fa(T,[w]):w}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=l[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const T=this.registry[w];if(T){let k=T.parse(l,this);if(!k)return null;if(this.expectedType){const D=this.expectedType,B=k.type;if(D.kind!=="string"&&D.kind!=="number"&&D.kind!=="boolean"&&D.kind!=="object"&&D.kind!=="array"||B.kind!=="value"){if(D.kind==="projectionDefinition"&&["string","array"].includes(B.kind)||["color","formatted","resolvedImage"].includes(D.kind)&&["value","string"].includes(B.kind)||["padding","numberArray"].includes(D.kind)&&["value","number","array"].includes(B.kind)||D.kind==="colorArray"&&["value","string","array"].includes(B.kind)||D.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(B.kind))k=x(k,D,h.typeAnnotation||"coerce");else if(this.checkSubtype(D,B))return null}else k=x(k,D,h.typeAnnotation||"assert")}if(!(k instanceof Qa)&&k.type.kind!=="resolvedImage"&&this._isConstant(k)){const D=new Rd;try{k=new Qa(k.type,k.evaluate(D))}catch(B){return this.error(B.message),null}}return k}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,h,x){const w=typeof l=="number"?this.path.concat(l):this.path,T=x?this.scope.concat(x):this.scope;return new Id(this.registry,this._isConstant,w,h||null,T,this.errors)}error(l,...h){const x=`${this.key}${h.map((w=>`[${w}]`)).join("")}`;this.errors.push(new Jo(x,l))}checkSubtype(l,h){const x=Hf(l,h);return x&&this.error(x),x}}class ui{constructor(l,h){this.type=h.type,this.bindings=[].concat(l),this.result=h}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const h of this.bindings)l(h[1]);l(this.result)}static parse(l,h){if(l.length<4)return h.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const x=[];for(let T=1;T<l.length-1;T+=2){const k=l[T];if(typeof k!="string")return h.error(`Expected string, but found ${typeof k} instead.`,T);if(/[^a-zA-Z0-9_]/.test(k))return h.error("Variable names must contain only alphanumeric characters or '_'.",T);const D=h.parse(l[T+1],T+1);if(!D)return null;x.push([k,D])}const w=h.parse(l[l.length-1],l.length-1,h.expectedType,x);return w?new ui(x,w):null}outputDefined(){return this.result.outputDefined()}}class Sh{constructor(l,h){this.type=h.type,this.name=l,this.boundExpression=h}static parse(l,h){if(l.length!==2||typeof l[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const x=l[1];return h.scope.has(x)?new Sh(x,h.scope.get(x)):h.error(`Unknown variable "${x}". Make sure "${x}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class Cr{constructor(l,h,x){this.type=l,this.index=h,this.input=x}static parse(l,h){if(l.length!==3)return h.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const x=h.parse(l[1],1,on),w=h.parse(l[2],2,js(h.expectedType||hr));return x&&w?new Cr(w.type.itemType,x,w):null}evaluate(l){const h=this.index.evaluate(l),x=this.input.evaluate(l);if(h<0)throw new yi(`Array index out of bounds: ${h} < 0.`);if(h>=x.length)throw new yi(`Array index out of bounds: ${h} > ${x.length-1}.`);if(h!==Math.floor(h))throw new yi(`Array index must be an integer, but found ${h} instead.`);return x[h]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class fr{constructor(l,h){this.type=vr,this.needle=l,this.haystack=h}static parse(l,h){if(l.length!==3)return h.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const x=h.parse(l[1],1,hr),w=h.parse(l[2],2,hr);return x&&w?Gf(x.type,[vr,dr,on,Si,hr])?new fr(x,w):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${zr(x.type)} instead`):null}evaluate(l){const h=this.needle.evaluate(l),x=this.haystack.evaluate(l);if(!x)return!1;if(!_h(h,["boolean","string","number","null"]))throw new yi(`Expected first argument to be of type boolean, string, number or null, but found ${zr(Qi(h))} instead.`);if(!_h(x,["string","array"]))throw new yi(`Expected second argument to be of type array or string, but found ${zr(Qi(x))} instead.`);return x.indexOf(h)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Dd{constructor(l,h,x){this.type=on,this.needle=l,this.haystack=h,this.fromIndex=x}static parse(l,h){if(l.length<=2||l.length>=5)return h.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const x=h.parse(l[1],1,hr),w=h.parse(l[2],2,hr);if(!x||!w)return null;if(!Gf(x.type,[vr,dr,on,Si,hr]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${zr(x.type)} instead`);if(l.length===4){const T=h.parse(l[3],3,on);return T?new Dd(x,w,T):null}return new Dd(x,w)}evaluate(l){const h=this.needle.evaluate(l),x=this.haystack.evaluate(l);if(!_h(h,["boolean","string","number","null"]))throw new yi(`Expected first argument to be of type boolean, string, number or null, but found ${zr(Qi(h))} instead.`);let w;if(this.fromIndex&&(w=this.fromIndex.evaluate(l)),_h(x,["string"])){const T=x.indexOf(h,w);return T===-1?-1:[...x.slice(0,T)].length}if(_h(x,["array"]))return x.indexOf(h,w);throw new yi(`Expected second argument to be of type array or string, but found ${zr(Qi(x))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class Nr{constructor(l,h,x,w,T,k){this.inputType=l,this.type=h,this.input=x,this.cases=w,this.outputs=T,this.otherwise=k}static parse(l,h){if(l.length<5)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return h.error("Expected an even number of arguments.");let x,w;h.expectedType&&h.expectedType.kind!=="value"&&(w=h.expectedType);const T={},k=[];for(let Z=2;Z<l.length-1;Z+=2){let Y=l[Z];const ee=l[Z+1];Array.isArray(Y)||(Y=[Y]);const oe=h.concat(Z);if(Y.length===0)return oe.error("Expected at least one branch label.");for(const me of Y){if(typeof me!="number"&&typeof me!="string")return oe.error("Branch labels must be numbers or strings.");if(typeof me=="number"&&Math.abs(me)>Number.MAX_SAFE_INTEGER)return oe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof me=="number"&&Math.floor(me)!==me)return oe.error("Numeric branch labels must be integer values.");if(x){if(oe.checkSubtype(x,Qi(me)))return null}else x=Qi(me);if(T[String(me)]!==void 0)return oe.error("Branch labels must be unique.");T[String(me)]=k.length}const ue=h.parse(ee,Z,w);if(!ue)return null;w=w||ue.type,k.push(ue)}const D=h.parse(l[1],1,hr);if(!D)return null;const B=h.parse(l[l.length-1],l.length-1,w);return B?D.type.kind!=="value"&&h.concat(1).checkSubtype(x,D.type)?null:new Nr(x,w,D,T,k,B):null}evaluate(l){const h=this.input.evaluate(l);return(Qi(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))&&this.otherwise.outputDefined()}}class Lm{constructor(l,h,x){this.type=l,this.branches=h,this.otherwise=x}static parse(l,h){if(l.length<4)return h.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return h.error("Expected an odd number of arguments.");let x;h.expectedType&&h.expectedType.kind!=="value"&&(x=h.expectedType);const w=[];for(let k=1;k<l.length-1;k+=2){const D=h.parse(l[k],k,vr);if(!D)return null;const B=h.parse(l[k+1],k+1,x);if(!B)return null;w.push([D,B]),x=x||B.type}const T=h.parse(l[l.length-1],l.length-1,x);if(!T)return null;if(!x)throw new Error("Can't infer output type");return new Lm(x,w,T)}evaluate(l){for(const[h,x]of this.branches)if(h.evaluate(l))return x.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[h,x]of this.branches)l(h),l(x);l(this.otherwise)}outputDefined(){return this.branches.every((([l,h])=>h.outputDefined()))&&this.otherwise.outputDefined()}}class vl{constructor(l,h,x,w){this.type=l,this.input=h,this.beginIndex=x,this.endIndex=w}static parse(l,h){if(l.length<=2||l.length>=5)return h.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const x=h.parse(l[1],1,hr),w=h.parse(l[2],2,on);if(!x||!w)return null;if(!Gf(x.type,[js(hr),dr,hr]))return h.error(`Expected first argument to be of type array or string, but found ${zr(x.type)} instead`);if(l.length===4){const T=h.parse(l[3],3,on);return T?new vl(x.type,x,w,T):null}return new vl(x.type,x,w)}evaluate(l){const h=this.input.evaluate(l),x=this.beginIndex.evaluate(l);let w;if(this.endIndex&&(w=this.endIndex.evaluate(l)),_h(h,["string"]))return[...h].slice(x,w).join("");if(_h(h,["array"]))return h.slice(x,w);throw new yi(`Expected first argument to be of type array or string, but found ${zr(Qi(h))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Ch(f,l){const h=f.length-1;let x,w,T=0,k=h,D=0;for(;T<=k;)if(D=Math.floor((T+k)/2),x=f[D],w=f[D+1],x<=l){if(D===h||l<w)return D;T=D+1}else{if(!(x>l))throw new yi("Input is not a number.");k=D-1}return 0}class Th{constructor(l,h,x){this.type=l,this.input=h,this.labels=[],this.outputs=[];for(const[w,T]of x)this.labels.push(w),this.outputs.push(T)}static parse(l,h){if(l.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return h.error("Expected an even number of arguments.");const x=h.parse(l[1],1,on);if(!x)return null;const w=[];let T=null;h.expectedType&&h.expectedType.kind!=="value"&&(T=h.expectedType);for(let k=1;k<l.length;k+=2){const D=k===1?-1/0:l[k],B=l[k+1],Z=k,Y=k+1;if(typeof D!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(w.length&&w[w.length-1][0]>=D)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Z);const ee=h.parse(B,Y,T);if(!ee)return null;T=T||ee.type,w.push([D,ee])}return new Th(T,x,w)}evaluate(l){const h=this.labels,x=this.outputs;if(h.length===1)return x[0].evaluate(l);const w=this.input.evaluate(l);if(w<=h[0])return x[0].evaluate(l);const T=h.length;return w>=h[T-1]?x[T-1].evaluate(l):x[Ch(h,w)].evaluate(l)}eachChild(l){l(this.input);for(const h of this.outputs)l(h)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function lb(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var $m,Sv,bS=(function(){if(Sv)return $m;function f(l,h,x,w){this.cx=3*l,this.bx=3*(x-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(w-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=h,this.p2x=x,this.p2y=w}return Sv=1,$m=f,f.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,h){if(h===void 0&&(h=1e-6),l<0)return 0;if(l>1)return 1;for(var x=l,w=0;w<8;w++){var T=this.sampleCurveX(x)-l;if(Math.abs(T)<h)return x;var k=this.sampleCurveDerivativeX(x);if(Math.abs(k)<1e-6)break;x-=T/k}var D=0,B=1;for(x=l,w=0;w<20&&(T=this.sampleCurveX(x),!(Math.abs(T-l)<h));w++)l>T?D=x:B=x,x=.5*(B-D)+D;return x},solve:function(l,h){return this.sampleCurveY(this.solveCurveX(l,h))}},$m})(),Cv=lb(bS);class pa{constructor(l,h,x,w,T){this.type=l,this.operator=h,this.interpolation=x,this.input=w,this.labels=[],this.outputs=[];for(const[k,D]of T)this.labels.push(k),this.outputs.push(D)}static interpolationFactor(l,h,x,w){let T=0;if(l.name==="exponential")T=Rc(h,l.base,x,w);else if(l.name==="linear")T=Rc(h,1,x,w);else if(l.name==="cubic-bezier"){const k=l.controlPoints;T=new Cv(k[0],k[1],k[2],k[3]).solve(Rc(h,1,x,w))}return T}static parse(l,h){let[x,w,T,...k]=l;if(!Array.isArray(w)||w.length===0)return h.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const Z=w[1];if(typeof Z!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:Z}}else{if(w[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const Z=w.slice(1);if(Z.length!==4||Z.some((Y=>typeof Y!="number"||Y<0||Y>1)))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:Z}}}if(l.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(T=h.parse(T,2,on),!T)return null;const D=[];let B=null;x!=="interpolate-hcl"&&x!=="interpolate-lab"||h.expectedType==Ec?h.expectedType&&h.expectedType.kind!=="value"&&(B=h.expectedType):B=ja;for(let Z=0;Z<k.length;Z+=2){const Y=k[Z],ee=k[Z+1],oe=Z+3,ue=Z+4;if(typeof Y!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',oe);if(D.length&&D[D.length-1][0]>=Y)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',oe);const me=h.parse(ee,ue,B);if(!me)return null;B=B||me.type,D.push([Y,me])}return Xl(B,on)||Xl(B,Oy)||Xl(B,ja)||Xl(B,wu)||Xl(B,Ac)||Xl(B,Ec)||Xl(B,Wf)||Xl(B,js(on))?new pa(B,x,w,T,D):h.error(`Type ${zr(B)} is not interpolatable.`)}evaluate(l){const h=this.labels,x=this.outputs;if(h.length===1)return x[0].evaluate(l);const w=this.input.evaluate(l);if(w<=h[0])return x[0].evaluate(l);const T=h.length;if(w>=h[T-1])return x[T-1].evaluate(l);const k=Ch(h,w),D=pa.interpolationFactor(this.interpolation,w,h[k],h[k+1]),B=x[k].evaluate(l),Z=x[k+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return wh(B,Z,D);case"color":return mr.interpolate(B,Z,D);case"padding":return $o.interpolate(B,Z,D);case"colorArray":return Kn.interpolate(B,Z,D);case"numberArray":return Vi.interpolate(B,Z,D);case"variableAnchorOffsetCollection":return co.interpolate(B,Z,D);case"array":return Yf(B,Z,D);case"projectionDefinition":return ts.interpolate(B,Z,D)}case"interpolate-hcl":switch(this.type.kind){case"color":return mr.interpolate(B,Z,D,"hcl");case"colorArray":return Kn.interpolate(B,Z,D,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return mr.interpolate(B,Z,D,"lab");case"colorArray":return Kn.interpolate(B,Z,D,"lab")}}}eachChild(l){l(this.input);for(const h of this.outputs)l(h)}outputDefined(){return this.outputs.every((l=>l.outputDefined()))}}function Rc(f,l,h,x){const w=x-h,T=f-h;return w===0?0:l===1?T/w:(Math.pow(l,T)-1)/(Math.pow(l,w)-1)}const Ui={color:mr.interpolate,number:wh,padding:$o.interpolate,numberArray:Vi.interpolate,colorArray:Kn.interpolate,variableAnchorOffsetCollection:co.interpolate,array:Yf};class Ld{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");let x=null;const w=h.expectedType;w&&w.kind!=="value"&&(x=w);const T=[];for(const D of l.slice(1)){const B=h.parse(D,1+T.length,x,void 0,{typeAnnotation:"omit"});if(!B)return null;x=x||B.type,T.push(B)}if(!x)throw new Error("No output type");const k=w&&T.some((D=>Hf(w,D.type)));return new Ld(k?hr:x,T)}evaluate(l){let h,x=null,w=0;for(const T of this.args)if(w++,x=T.evaluate(l),x&&x instanceof ha&&!x.available&&(h||(h=x.name),x=null,w===this.args.length&&(x=h)),x!==null)break;return x}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every((l=>l.outputDefined()))}}function zm(f,l){return f==="=="||f==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function Nm(f,l,h,x){return x.compare(l,h)===0}function uo(f,l,h){const x=f!=="=="&&f!=="!=";return class gY{constructor(T,k,D){this.type=vr,this.lhs=T,this.rhs=k,this.collator=D,this.hasUntypedArgument=T.type.kind==="value"||k.type.kind==="value"}static parse(T,k){if(T.length!==3&&T.length!==4)return k.error("Expected two or three arguments.");const D=T[0];let B=k.parse(T[1],1,hr);if(!B)return null;if(!zm(D,B.type))return k.concat(1).error(`"${D}" comparisons are not supported for type '${zr(B.type)}'.`);let Z=k.parse(T[2],2,hr);if(!Z)return null;if(!zm(D,Z.type))return k.concat(2).error(`"${D}" comparisons are not supported for type '${zr(Z.type)}'.`);if(B.type.kind!==Z.type.kind&&B.type.kind!=="value"&&Z.type.kind!=="value")return k.error(`Cannot compare types '${zr(B.type)}' and '${zr(Z.type)}'.`);x&&(B.type.kind==="value"&&Z.type.kind!=="value"?B=new da(Z.type,[B]):B.type.kind!=="value"&&Z.type.kind==="value"&&(Z=new da(B.type,[Z])));let Y=null;if(T.length===4){if(B.type.kind!=="string"&&Z.type.kind!=="string"&&B.type.kind!=="value"&&Z.type.kind!=="value")return k.error("Cannot use collator to compare non-string types.");if(Y=k.parse(T[3],3,kd),!Y)return null}return new gY(B,Z,Y)}evaluate(T){const k=this.lhs.evaluate(T),D=this.rhs.evaluate(T);if(x&&this.hasUntypedArgument){const B=Qi(k),Z=Qi(D);if(B.kind!==Z.kind||B.kind!=="string"&&B.kind!=="number")throw new yi(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${B.kind}, ${Z.kind}) instead.`)}if(this.collator&&!x&&this.hasUntypedArgument){const B=Qi(k),Z=Qi(D);if(B.kind!=="string"||Z.kind!=="string")return l(T,k,D)}return this.collator?h(T,k,D,this.collator.evaluate(T)):l(T,k,D)}eachChild(T){T(this.lhs),T(this.rhs),this.collator&&T(this.collator)}outputDefined(){return!0}}}const cb=uo("==",(function(f,l,h){return l===h}),Nm),Ty=uo("!=",(function(f,l,h){return l!==h}),(function(f,l,h,x){return!Nm(0,l,h,x)})),ub=uo("<",(function(f,l,h){return l<h}),(function(f,l,h,x){return x.compare(l,h)<0})),wS=uo(">",(function(f,l,h){return l>h}),(function(f,l,h,x){return x.compare(l,h)>0})),Kf=uo("<=",(function(f,l,h){return l<=h}),(function(f,l,h,x){return x.compare(l,h)<=0})),ky=uo(">=",(function(f,l,h){return l>=h}),(function(f,l,h,x){return x.compare(l,h)>=0}));class Jf{constructor(l,h,x){this.type=kd,this.locale=x,this.caseSensitive=l,this.diacriticSensitive=h}static parse(l,h){if(l.length!==2)return h.error("Expected one argument.");const x=l[1];if(typeof x!="object"||Array.isArray(x))return h.error("Collator options argument must be an object.");const w=h.parse(x["case-sensitive"]!==void 0&&x["case-sensitive"],1,vr);if(!w)return null;const T=h.parse(x["diacritic-sensitive"]!==void 0&&x["diacritic-sensitive"],1,vr);if(!T)return null;let k=null;return x.locale&&(k=h.parse(x.locale,1,dr),!k)?null:new Jf(w,T,k)}evaluate(l){return new Yl(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class Tv{constructor(l,h,x,w,T){this.type=dr,this.number=l,this.locale=h,this.currency=x,this.minFractionDigits=w,this.maxFractionDigits=T}static parse(l,h){if(l.length!==3)return h.error("Expected two arguments.");const x=h.parse(l[1],1,on);if(!x)return null;const w=l[2];if(typeof w!="object"||Array.isArray(w))return h.error("NumberFormat options argument must be an object.");let T=null;if(w.locale&&(T=h.parse(w.locale,1,dr),!T))return null;let k=null;if(w.currency&&(k=h.parse(w.currency,1,dr),!k))return null;let D=null;if(w["min-fraction-digits"]&&(D=h.parse(w["min-fraction-digits"],1,on),!D))return null;let B=null;return w["max-fraction-digits"]&&(B=h.parse(w["max-fraction-digits"],1,on),!B)?null:new Tv(x,T,k,D,B)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class Bm{constructor(l){this.type=kc,this.sections=l}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");const x=l[1];if(!Array.isArray(x)&&typeof x=="object")return h.error("First argument must be an image or text section.");const w=[];let T=!1;for(let k=1;k<=l.length-1;++k){const D=l[k];if(T&&typeof D=="object"&&!Array.isArray(D)){T=!1;let B=null;if(D["font-scale"]&&(B=h.parse(D["font-scale"],1,on),!B))return null;let Z=null;if(D["text-font"]&&(Z=h.parse(D["text-font"],1,js(dr)),!Z))return null;let Y=null;if(D["text-color"]&&(Y=h.parse(D["text-color"],1,ja),!Y))return null;let ee=null;if(D["vertical-align"]){if(typeof D["vertical-align"]=="string"&&!Ov.includes(D["vertical-align"]))return h.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${D["vertical-align"]}' instead.`);if(ee=h.parse(D["vertical-align"],1,dr),!ee)return null}const oe=w[w.length-1];oe.scale=B,oe.font=Z,oe.textColor=Y,oe.verticalAlign=ee}else{const B=h.parse(l[k],1,hr);if(!B)return null;const Z=B.type.kind;if(Z!=="string"&&Z!=="value"&&Z!=="null"&&Z!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");T=!0,w.push({content:B,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Bm(w)}evaluate(l){return new es(this.sections.map((h=>{const x=h.content.evaluate(l);return Qi(x)===lo?new Im("",x,null,null,null,h.verticalAlign?h.verticalAlign.evaluate(l):null):new Im(Oh(x),null,h.scale?h.scale.evaluate(l):null,h.font?h.font.evaluate(l).join(","):null,h.textColor?h.textColor.evaluate(l):null,h.verticalAlign?h.verticalAlign.evaluate(l):null)})))}eachChild(l){for(const h of this.sections)l(h.content),h.scale&&l(h.scale),h.font&&l(h.font),h.textColor&&l(h.textColor),h.verticalAlign&&l(h.verticalAlign)}outputDefined(){return!1}}class ep{constructor(l){this.type=lo,this.input=l}static parse(l,h){if(l.length!==2)return h.error("Expected two arguments.");const x=h.parse(l[1],1,dr);return x?new ep(x):h.error("No image name provided.")}evaluate(l){const h=this.input.evaluate(l),x=ha.fromString(h);return x&&l.availableImages&&(x.available=l.availableImages.indexOf(h)>-1),x}eachChild(l){l(this.input)}outputDefined(){return!1}}class tp{constructor(l){this.type=on,this.input=l}static parse(l,h){if(l.length!==2)return h.error(`Expected 1 argument, but found ${l.length-1} instead.`);const x=h.parse(l[1],1);return x?x.type.kind!=="array"&&x.type.kind!=="string"&&x.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${zr(x.type)} instead.`):new tp(x):null}evaluate(l){const h=this.input.evaluate(l);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new yi(`Expected value to be of type string or array, but found ${zr(Qi(h))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const So=8192;function np(f,l){const h=(180+f[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,w=Math.pow(2,l.z);return[Math.round(h*w*So),Math.round(x*w*So)]}function rp(f,l){const h=Math.pow(2,l.z);return[(w=(f[0]/So+l.x)/h,360*w-180),(x=(f[1]/So+l.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*x)*Math.PI/180))-90)];var x,w}function ip(f,l){f[0]=Math.min(f[0],l[0]),f[1]=Math.min(f[1],l[1]),f[2]=Math.max(f[2],l[0]),f[3]=Math.max(f[3],l[1])}function kh(f,l){return!(f[0]<=l[0]||f[2]>=l[2]||f[1]<=l[1]||f[3]>=l[3])}function hb(f,l,h){const x=f[0]-l[0],w=f[1]-l[1],T=f[0]-h[0],k=f[1]-h[1];return x*k-T*w==0&&x*T<=0&&w*k<=0}function Fm(f,l,h,x){return(w=[x[0]-h[0],x[1]-h[1]])[0]*(T=[l[0]-f[0],l[1]-f[1]])[1]-w[1]*T[0]!=0&&!(!Ay(f,l,h,x)||!Ay(h,x,f,l));var w,T}function db(f,l,h){for(const x of h)for(let w=0;w<x.length-1;++w)if(Fm(f,l,x[w],x[w+1]))return!0;return!1}function Kl(f,l,h=!1){let x=!1;for(const D of l)for(let B=0;B<D.length-1;B++){if(hb(f,D[B],D[B+1]))return h;(T=D[B])[1]>(w=f)[1]!=(k=D[B+1])[1]>w[1]&&w[0]<(k[0]-T[0])*(w[1]-T[1])/(k[1]-T[1])+T[0]&&(x=!x)}var w,T,k;return x}function Ey(f,l){for(const h of l)if(Kl(f,h))return!0;return!1}function fb(f,l){for(const h of f)if(!Kl(h,l))return!1;for(let h=0;h<f.length-1;++h)if(db(f[h],f[h+1],l))return!1;return!0}function pb(f,l){for(const h of l)if(fb(f,h))return!0;return!1}function Ay(f,l,h,x){const w=x[0]-h[0],T=x[1]-h[1],k=(f[0]-h[0])*T-w*(f[1]-h[1]),D=(l[0]-h[0])*T-w*(l[1]-h[1]);return k>0&&D<0||k<0&&D>0}function Py(f,l,h){const x=[];for(let w=0;w<f.length;w++){const T=[];for(let k=0;k<f[w].length;k++){const D=np(f[w][k],h);ip(l,D),T.push(D)}x.push(T)}return x}function $d(f,l,h){const x=[];for(let w=0;w<f.length;w++){const T=Py(f[w],l,h);x.push(T)}return x}function op(f,l,h,x){if(f[0]<h[0]||f[0]>h[2]){const w=.5*x;let T=f[0]-h[0]>w?-x:h[0]-f[0]>w?x:0;T===0&&(T=f[0]-h[2]>w?-x:h[2]-f[0]>w?x:0),f[0]+=T}ip(l,f)}function mb(f,l,h,x){const w=Math.pow(2,x.z)*So,T=[x.x*So,x.y*So],k=[];for(const D of f)for(const B of D){const Z=[B.x+T[0],B.y+T[1]];op(Z,l,h,w),k.push(Z)}return k}function jm(f,l,h,x){const w=Math.pow(2,x.z)*So,T=[x.x*So,x.y*So],k=[];for(const B of f){const Z=[];for(const Y of B){const ee=[Y.x+T[0],Y.y+T[1]];ip(l,ee),Z.push(ee)}k.push(Z)}if(l[2]-l[0]<=w/2){(D=l)[0]=D[1]=1/0,D[2]=D[3]=-1/0;for(const B of k)for(const Z of B)op(Z,l,h,w)}var D;return k}class Eh{constructor(l,h){this.type=vr,this.geojson=l,this.geometries=h}static parse(l,h){if(l.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Mc(l[1])){const x=l[1];if(x.type==="FeatureCollection"){const w=[];for(const T of x.features){const{type:k,coordinates:D}=T.geometry;k==="Polygon"&&w.push(D),k==="MultiPolygon"&&w.push(...D)}if(w.length)return new Eh(x,{type:"MultiPolygon",coordinates:w})}else if(x.type==="Feature"){const w=x.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new Eh(x,x.geometry)}else if(x.type==="Polygon"||x.type==="MultiPolygon")return new Eh(x,x)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(h,x){const w=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],k=h.canonicalID();if(x.type==="Polygon"){const D=Py(x.coordinates,T,k),B=mb(h.geometry(),w,T,k);if(!kh(w,T))return!1;for(const Z of B)if(!Kl(Z,D))return!1}if(x.type==="MultiPolygon"){const D=$d(x.coordinates,T,k),B=mb(h.geometry(),w,T,k);if(!kh(w,T))return!1;for(const Z of B)if(!Ey(Z,D))return!1}return!0})(l,this.geometries);if(l.geometryType()==="LineString")return(function(h,x){const w=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],k=h.canonicalID();if(x.type==="Polygon"){const D=Py(x.coordinates,T,k),B=jm(h.geometry(),w,T,k);if(!kh(w,T))return!1;for(const Z of B)if(!fb(Z,D))return!1}if(x.type==="MultiPolygon"){const D=$d(x.coordinates,T,k),B=jm(h.geometry(),w,T,k);if(!kh(w,T))return!1;for(const Z of B)if(!pb(Z,D))return!1}return!0})(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let kv=class{constructor(f=[],l=(h,x)=>h<x?-1:h>x?1:0){if(this.data=f,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;const f=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:l,compare:h}=this,x=l[f];for(;f>0;){const w=f-1>>1,T=l[w];if(h(x,T)>=0)break;l[f]=T,f=w}l[f]=x}_down(f){const{data:l,compare:h}=this,x=this.length>>1,w=l[f];for(;f<x;){let T=1+(f<<1);const k=T+1;if(k<this.length&&h(l[k],l[T])<0&&(T=k),h(l[T],w)>=0)break;l[f]=l[T],f=T}l[f]=w}};function Vm(f,l,h=0,x=f.length-1,w=Ev){for(;x>h;){if(x-h>600){const B=x-h+1,Z=l-h+1,Y=Math.log(B),ee=.5*Math.exp(2*Y/3),oe=.5*Math.sqrt(Y*ee*(B-ee)/B)*(Z-B/2<0?-1:1);Vm(f,l,Math.max(h,Math.floor(l-Z*ee/B+oe)),Math.min(x,Math.floor(l+(B-Z)*ee/B+oe)),w)}const T=f[l];let k=h,D=x;for(Ah(f,h,l),w(f[x],T)>0&&Ah(f,h,x);k<D;){for(Ah(f,k,D),k++,D--;w(f[k],T)<0;)k++;for(;w(f[D],T)>0;)D--}w(f[h],T)===0?Ah(f,h,D):(D++,Ah(f,D,x)),D<=l&&(h=D+1),l<=D&&(x=D-1)}}function Ah(f,l,h){const x=f[l];f[l]=f[h],f[h]=x}function Ev(f,l){return f<l?-1:f>l?1:0}function Qm(f,l){if(f.length<=1)return[f];const h=[];let x,w;for(const T of f){const k=OS(T);k!==0&&(T.area=Math.abs(k),w===void 0&&(w=k<0),w===k<0?(x&&h.push(x),x=[T]):x.push(T))}if(x&&h.push(x),l>1)for(let T=0;T<h.length;T++)h[T].length<=l||(Vm(h[T],l,1,h[T].length-1,gb),h[T]=h[T].slice(0,l));return h}function gb(f,l){return l.area-f.area}function OS(f){let l=0;for(let h,x,w=0,T=f.length,k=T-1;w<T;k=w++)h=f[w],x=f[k],l+=(x.x-h.x)*(h.y+x.y);return l}const yb=1/298.257223563,Um=yb*(2-yb),vb=Math.PI/180;class Av{constructor(l){const h=6378.137*vb*1e3,x=Math.cos(l*vb),w=1/(1-Um*(1-x*x)),T=Math.sqrt(w);this.kx=h*T*x,this.ky=h*T*w*(1-Um)}distance(l,h){const x=this.wrap(l[0]-h[0])*this.kx,w=(l[1]-h[1])*this.ky;return Math.sqrt(x*x+w*w)}pointOnLine(l,h){let x,w,T,k,D=1/0;for(let B=0;B<l.length-1;B++){let Z=l[B][0],Y=l[B][1],ee=this.wrap(l[B+1][0]-Z)*this.kx,oe=(l[B+1][1]-Y)*this.ky,ue=0;ee===0&&oe===0||(ue=(this.wrap(h[0]-Z)*this.kx*ee+(h[1]-Y)*this.ky*oe)/(ee*ee+oe*oe),ue>1?(Z=l[B+1][0],Y=l[B+1][1]):ue>0&&(Z+=ee/this.kx*ue,Y+=oe/this.ky*ue)),ee=this.wrap(h[0]-Z)*this.kx,oe=(h[1]-Y)*this.ky;const me=ee*ee+oe*oe;me<D&&(D=me,x=Z,w=Y,T=B,k=ue)}return{point:[x,w],index:T,t:Math.max(0,Math.min(1,k))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function Oa(f,l){return l[0]-f[0]}function Ph(f){return f[1]-f[0]+1}function xl(f,l){return f[1]>=f[0]&&f[1]<l}function Zm(f,l){if(f[0]>f[1])return[null,null];const h=Ph(f);if(l){if(h===2)return[f,null];const w=Math.floor(h/2);return[[f[0],f[0]+w],[f[0]+w,f[1]]]}if(h===1)return[f,null];const x=Math.floor(h/2)-1;return[[f[0],f[0]+x],[f[0]+x+1,f[1]]]}function My(f,l){if(!xl(l,f.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let x=l[0];x<=l[1];++x)ip(h,f[x]);return h}function Ry(f){const l=[1/0,1/0,-1/0,-1/0];for(const h of f)for(const x of h)ip(l,x);return l}function qm(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function Iy(f,l,h){if(!qm(f)||!qm(l))return NaN;let x=0,w=0;return f[2]<l[0]&&(x=l[0]-f[2]),f[0]>l[2]&&(x=f[0]-l[2]),f[1]>l[3]&&(w=f[1]-l[3]),f[3]<l[1]&&(w=l[1]-f[3]),h.distance([0,0],[x,w])}function _l(f,l,h){const x=h.pointOnLine(l,f);return h.distance(f,x.point)}function Wm(f,l,h,x,w){const T=Math.min(_l(f,[h,x],w),_l(l,[h,x],w)),k=Math.min(_l(h,[f,l],w),_l(x,[f,l],w));return Math.min(T,k)}function Hm(f,l,h,x,w){if(!xl(l,f.length)||!xl(x,h.length))return 1/0;let T=1/0;for(let k=l[0];k<l[1];++k){const D=f[k],B=f[k+1];for(let Z=x[0];Z<x[1];++Z){const Y=h[Z],ee=h[Z+1];if(Fm(D,B,Y,ee))return 0;T=Math.min(T,Wm(D,B,Y,ee,w))}}return T}function Dy(f,l,h,x,w){if(!xl(l,f.length)||!xl(x,h.length))return NaN;let T=1/0;for(let k=l[0];k<=l[1];++k)for(let D=x[0];D<=x[1];++D)if(T=Math.min(T,w.distance(f[k],h[D])),T===0)return T;return T}function xb(f,l,h){if(Kl(f,l,!0))return 0;let x=1/0;for(const w of l){const T=w[0],k=w[w.length-1];if(T!==k&&(x=Math.min(x,_l(f,[k,T],h)),x===0))return x;const D=h.pointOnLine(w,f);if(x=Math.min(x,h.distance(f,D.point)),x===0)return x}return x}function zd(f,l,h,x){if(!xl(l,f.length))return NaN;for(let T=l[0];T<=l[1];++T)if(Kl(f[T],h,!0))return 0;let w=1/0;for(let T=l[0];T<l[1];++T){const k=f[T],D=f[T+1];for(const B of h)for(let Z=0,Y=B.length,ee=Y-1;Z<Y;ee=Z++){const oe=B[ee],ue=B[Z];if(Fm(k,D,oe,ue))return 0;w=Math.min(w,Wm(k,D,oe,ue,x))}}return w}function Nd(f,l){for(const h of f)for(const x of h)if(Kl(x,l,!0))return!0;return!1}function Pv(f,l,h,x=1/0){const w=Ry(f),T=Ry(l);if(x!==1/0&&Iy(w,T,h)>=x)return x;if(kh(w,T)){if(Nd(f,l))return 0}else if(Nd(l,f))return 0;let k=1/0;for(const D of f)for(let B=0,Z=D.length,Y=Z-1;B<Z;Y=B++){const ee=D[Y],oe=D[B];for(const ue of l)for(let me=0,ge=ue.length,xe=ge-1;me<ge;xe=me++){const Te=ue[xe],Ue=ue[me];if(Fm(ee,oe,Te,Ue))return 0;k=Math.min(k,Wm(ee,oe,Te,Ue,h))}}return k}function qr(f,l,h,x,w,T){if(!T)return;const k=Iy(My(x,T),w,h);k<l&&f.push([k,T,[0,0]])}function Ic(f,l,h,x,w,T,k){if(!T||!k)return;const D=Iy(My(x,T),My(w,k),h);D<l&&f.push([D,T,k])}function Gm(f,l,h,x,w=1/0){let T=Math.min(x.distance(f[0],h[0][0]),w);if(T===0)return T;const k=new kv([[0,[0,f.length-1],[0,0]]],Oa),D=Ry(h);for(;k.length>0;){const B=k.pop();if(B[0]>=T)continue;const Z=B[1],Y=l?50:100;if(Ph(Z)<=Y){if(!xl(Z,f.length))return NaN;if(l){const ee=zd(f,Z,h,x);if(isNaN(ee)||ee===0)return ee;T=Math.min(T,ee)}else for(let ee=Z[0];ee<=Z[1];++ee){const oe=xb(f[ee],h,x);if(T=Math.min(T,oe),T===0)return 0}}else{const ee=Zm(Z,l);qr(k,T,x,f,D,ee[0]),qr(k,T,x,f,D,ee[1])}}return T}function Xm(f,l,h,x,w,T=1/0){let k=Math.min(T,w.distance(f[0],h[0]));if(k===0)return k;const D=new kv([[0,[0,f.length-1],[0,h.length-1]]],Oa);for(;D.length>0;){const B=D.pop();if(B[0]>=k)continue;const Z=B[1],Y=B[2],ee=l?50:100,oe=x?50:100;if(Ph(Z)<=ee&&Ph(Y)<=oe){if(!xl(Z,f.length)&&xl(Y,h.length))return NaN;let ue;if(l&&x)ue=Hm(f,Z,h,Y,w),k=Math.min(k,ue);else if(l&&!x){const me=f.slice(Z[0],Z[1]+1);for(let ge=Y[0];ge<=Y[1];++ge)if(ue=_l(h[ge],me,w),k=Math.min(k,ue),k===0)return k}else if(!l&&x){const me=h.slice(Y[0],Y[1]+1);for(let ge=Z[0];ge<=Z[1];++ge)if(ue=_l(f[ge],me,w),k=Math.min(k,ue),k===0)return k}else ue=Dy(f,Z,h,Y,w),k=Math.min(k,ue)}else{const ue=Zm(Z,l),me=Zm(Y,x);Ic(D,k,w,f,h,ue[0],me[0]),Ic(D,k,w,f,h,ue[0],me[1]),Ic(D,k,w,f,h,ue[1],me[0]),Ic(D,k,w,f,h,ue[1],me[1])}}return k}function Ly(f){return f.type==="MultiPolygon"?f.coordinates.map((l=>({type:"Polygon",coordinates:l}))):f.type==="MultiLineString"?f.coordinates.map((l=>({type:"LineString",coordinates:l}))):f.type==="MultiPoint"?f.coordinates.map((l=>({type:"Point",coordinates:l}))):[f]}class Bd{constructor(l,h){this.type=on,this.geojson=l,this.geometries=h}static parse(l,h){if(l.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Mc(l[1])){const x=l[1];if(x.type==="FeatureCollection")return new Bd(x,x.features.map((w=>Ly(w.geometry))).flat());if(x.type==="Feature")return new Bd(x,Ly(x.geometry));if("type"in x&&"coordinates"in x)return new Bd(x,Ly(x))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return(function(h,x){const w=h.geometry(),T=w.flat().map((B=>rp([B.x,B.y],h.canonical)));if(w.length===0)return NaN;const k=new Av(T[0][1]);let D=1/0;for(const B of x){switch(B.type){case"Point":D=Math.min(D,Xm(T,!1,[B.coordinates],!1,k,D));break;case"LineString":D=Math.min(D,Xm(T,!1,B.coordinates,!0,k,D));break;case"Polygon":D=Math.min(D,Gm(T,!1,B.coordinates,k,D))}if(D===0)return D}return D})(l,this.geometries);if(l.geometryType()==="LineString")return(function(h,x){const w=h.geometry(),T=w.flat().map((B=>rp([B.x,B.y],h.canonical)));if(w.length===0)return NaN;const k=new Av(T[0][1]);let D=1/0;for(const B of x){switch(B.type){case"Point":D=Math.min(D,Xm(T,!0,[B.coordinates],!1,k,D));break;case"LineString":D=Math.min(D,Xm(T,!0,B.coordinates,!0,k,D));break;case"Polygon":D=Math.min(D,Gm(T,!0,B.coordinates,k,D))}if(D===0)return D}return D})(l,this.geometries);if(l.geometryType()==="Polygon")return(function(h,x){const w=h.geometry();if(w.length===0||w[0].length===0)return NaN;const T=Qm(w,0).map((B=>B.map((Z=>Z.map((Y=>rp([Y.x,Y.y],h.canonical))))))),k=new Av(T[0][0][0][1]);let D=1/0;for(const B of x)for(const Z of T){switch(B.type){case"Point":D=Math.min(D,Gm([B.coordinates],!1,Z,k,D));break;case"LineString":D=Math.min(D,Gm(B.coordinates,!0,Z,k,D));break;case"Polygon":D=Math.min(D,Pv(Z,B.coordinates,k,D))}if(D===0)return D}return D})(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Ym{constructor(l){this.type=hr,this.key=l}static parse(l,h){if(l.length!==2)return h.error(`Expected 1 argument, but found ${l.length-1} instead.`);const x=l[1];return x==null?h.error("Global state property must be defined."):typeof x!="string"?h.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new Ym(x)}evaluate(l){var h;const x=(h=l.globals)===null||h===void 0?void 0:h.globalState;return x&&Object.keys(x).length!==0?Xf(x,this.key):null}eachChild(){}outputDefined(){return!1}}const sp={"==":cb,"!=":Ty,">":wS,"<":ub,">=":ky,"<=":Kf,array:da,at:Cr,boolean:da,case:Lm,coalesce:Ld,collator:Jf,format:Bm,image:ep,in:fr,"index-of":Dd,interpolate:pa,"interpolate-hcl":pa,"interpolate-lab":pa,length:tp,let:ui,literal:Qa,match:Nr,number:da,"number-format":Tv,object:da,slice:vl,step:Th,string:da,"to-boolean":fa,"to-color":fa,"to-number":fa,"to-string":fa,var:Sh,within:Eh,distance:Bd,"global-state":Ym};class Ua{constructor(l,h,x,w){this.name=l,this.type=h,this._evaluate=x,this.args=w}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,h){const x=l[0],w=Ua.definitions[x];if(!w)return h.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0);const T=Array.isArray(w)?w[0]:w.type,k=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,D=k.filter((([Z])=>!Array.isArray(Z)||Z.length===l.length-1));let B=null;for(const[Z,Y]of D){B=new Id(h.registry,ma,h.path,null,h.scope);const ee=[];let oe=!1;for(let ue=1;ue<l.length;ue++){const me=l[ue],ge=Array.isArray(Z)?Z[ue-1]:Z.type,xe=B.parse(me,1+ee.length,ge);if(!xe){oe=!0;break}ee.push(xe)}if(!oe)if(Array.isArray(Z)&&Z.length!==ee.length)B.error(`Expected ${Z.length} arguments, but found ${ee.length} instead.`);else{for(let ue=0;ue<ee.length;ue++){const me=Array.isArray(Z)?Z[ue]:Z.type,ge=ee[ue];B.concat(ue+1).checkSubtype(me,ge.type)}if(B.errors.length===0)return new Ua(x,T,Y,ee)}}if(D.length===1)h.errors.push(...B.errors);else{const Z=(D.length?D:k).map((([ee])=>{return oe=ee,Array.isArray(oe)?`(${oe.map(zr).join(", ")})`:`(${zr(oe.type)}...)`;var oe})).join(" | "),Y=[];for(let ee=1;ee<l.length;ee++){const oe=h.parse(l[ee],1+Y.length);if(!oe)return null;Y.push(zr(oe.type))}h.error(`Expected arguments of type ${Z}, but found (${Y.join(", ")}) instead.`)}return null}static register(l,h){Ua.definitions=h;for(const x in h)l[x]=Ua}}function Mv(f,[l,h,x,w]){l=l.evaluate(f),h=h.evaluate(f),x=x.evaluate(f);const T=w?w.evaluate(f):1,k=Va(l,h,x,T);if(k)throw new yi(k);return new mr(l/255,h/255,x/255,T,!1)}function $y(f,l){return f in l}function Za(f,l){const h=l[f];return h===void 0?null:h}function Dc(f){return{type:f}}function ma(f){if(f instanceof Sh)return ma(f.boundExpression);if(f instanceof Ua&&f.name==="error"||f instanceof Jf||f instanceof Eh||f instanceof Bd||f instanceof Ym)return!1;const l=f instanceof fa||f instanceof da;let h=!0;return f.eachChild((x=>{h=l?h&&ma(x):h&&x instanceof Qa})),!!h&&Cu(f)&&jd(f,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Cu(f){if(f instanceof Ua&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof Eh||f instanceof Bd)return!1;let l=!0;return f.eachChild((h=>{l&&!Cu(h)&&(l=!1)})),l}function Fd(f){if(f instanceof Ua&&f.name==="feature-state")return!1;let l=!0;return f.eachChild((h=>{l&&!Fd(h)&&(l=!1)})),l}function jd(f,l){if(f instanceof Ua&&l.indexOf(f.name)>=0)return!1;let h=!0;return f.eachChild((x=>{h&&!jd(x,l)&&(h=!1)})),h}function Km(f){return{result:"success",value:f}}function Mh(f){return{result:"error",value:f}}function bl(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function Rv(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function ap(f){return!!f.expression&&f.expression.interpolated}function pr(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function zy(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&Qi(f)===Tc}function qa(f){return f}function Ny(f,l){const h=f.stops&&typeof f.stops[0][0]=="object",x=h||!(h||f.property!==void 0),w=f.type||(ap(l)?"exponential":"interval"),T=(function(Y){switch(Y.type){case"color":return mr.parse;case"padding":return $o.parse;case"numberArray":return Vi.parse;case"colorArray":return Kn.parse;default:return null}})(l);if(T&&((f=Oo({},f)).stops&&(f.stops=f.stops.map((Y=>[Y[0],T(Y[1])]))),f.default=T(f.default?f.default:l.default)),f.colorSpace&&(k=f.colorSpace)!=="rgb"&&k!=="hcl"&&k!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var k;const D=(function(Y){switch(Y){case"exponential":return Rh;case"interval":return By;case"categorical":return _b;case"identity":return Iv;default:throw new Error(`Unknown function type "${Y}"`)}})(w);let B,Z;if(w==="categorical"){B=Object.create(null);for(const Y of f.stops)B[Y[0]]=Y[1];Z=typeof f.stops[0][0]}if(h){const Y={},ee=[];for(let me=0;me<f.stops.length;me++){const ge=f.stops[me],xe=ge[0].zoom;Y[xe]===void 0&&(Y[xe]={zoom:xe,type:f.type,property:f.property,default:f.default,stops:[]},ee.push(xe)),Y[xe].stops.push([ge[0].value,ge[1]])}const oe=[];for(const me of ee)oe.push([Y[me].zoom,Ny(Y[me],l)]);const ue={name:"linear"};return{kind:"composite",interpolationType:ue,interpolationFactor:pa.interpolationFactor.bind(void 0,ue),zoomStops:oe.map((me=>me[0])),evaluate:({zoom:me},ge)=>Rh({stops:oe,base:f.base},l,me).evaluate(me,ge)}}if(x){const Y=w==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:Y,interpolationFactor:pa.interpolationFactor.bind(void 0,Y),zoomStops:f.stops.map((ee=>ee[0])),evaluate:({zoom:ee})=>D(f,l,ee,B,Z)}}return{kind:"source",evaluate(Y,ee){const oe=ee&&ee.properties?ee.properties[f.property]:void 0;return oe===void 0?Wa(f.default,l.default):D(f,l,oe,B,Z)}}}function Wa(f,l,h){return f!==void 0?f:l!==void 0?l:h!==void 0?h:void 0}function _b(f,l,h,x,w){return Wa(typeof h===w?x[h]:void 0,f.default,l.default)}function By(f,l,h){if(pr(h)!=="number")return Wa(f.default,l.default);const x=f.stops.length;if(x===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[x-1][0])return f.stops[x-1][1];const w=Ch(f.stops.map((T=>T[0])),h);return f.stops[w][1]}function Rh(f,l,h){const x=f.base!==void 0?f.base:1;if(pr(h)!=="number")return Wa(f.default,l.default);const w=f.stops.length;if(w===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[w-1][0])return f.stops[w-1][1];const T=Ch(f.stops.map((Y=>Y[0])),h),k=(function(Y,ee,oe,ue){const me=ue-oe,ge=Y-oe;return me===0?0:ee===1?ge/me:(Math.pow(ee,ge)-1)/(Math.pow(ee,me)-1)})(h,x,f.stops[T][0],f.stops[T+1][0]),D=f.stops[T][1],B=f.stops[T+1][1],Z=Ui[l.type]||qa;return typeof D.evaluate=="function"?{evaluate(...Y){const ee=D.evaluate.apply(void 0,Y),oe=B.evaluate.apply(void 0,Y);if(ee!==void 0&&oe!==void 0)return Z(ee,oe,k,f.colorSpace)}}:Z(D,B,k,f.colorSpace)}function Iv(f,l,h){switch(l.type){case"color":h=mr.parse(h);break;case"formatted":h=es.fromString(h.toString());break;case"resolvedImage":h=ha.fromString(h.toString());break;case"padding":h=$o.parse(h);break;case"colorArray":h=Kn.parse(h);break;case"numberArray":h=Vi.parse(h);break;default:pr(h)===l.type||l.type==="enum"&&l.values[h]||(h=void 0)}return Wa(h,f.default,l.default)}Ua.register(sp,{error:[{kind:"error"},[dr],(f,[l])=>{throw new yi(l.evaluate(f))}],typeof:[dr,[hr],(f,[l])=>zr(Qi(l.evaluate(f)))],"to-rgba":[js(on,4),[ja],(f,[l])=>{const[h,x,w,T]=l.evaluate(f).rgb;return[255*h,255*x,255*w,T]}],rgb:[ja,[on,on,on],Mv],rgba:[ja,[on,on,on,on],Mv],has:{type:vr,overloads:[[[dr],(f,[l])=>$y(l.evaluate(f),f.properties())],[[dr,Tc],(f,[l,h])=>$y(l.evaluate(f),h.evaluate(f))]]},get:{type:hr,overloads:[[[dr],(f,[l])=>Za(l.evaluate(f),f.properties())],[[dr,Tc],(f,[l,h])=>Za(l.evaluate(f),h.evaluate(f))]]},"feature-state":[hr,[dr],(f,[l])=>Za(l.evaluate(f),f.featureState||{})],properties:[Tc,[],f=>f.properties()],"geometry-type":[dr,[],f=>f.geometryType()],id:[hr,[],f=>f.id()],zoom:[on,[],f=>f.globals.zoom],"heatmap-density":[on,[],f=>f.globals.heatmapDensity||0],elevation:[on,[],f=>f.globals.elevation||0],"line-progress":[on,[],f=>f.globals.lineProgress||0],accumulated:[hr,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[on,Dc(on),(f,l)=>{let h=0;for(const x of l)h+=x.evaluate(f);return h}],"*":[on,Dc(on),(f,l)=>{let h=1;for(const x of l)h*=x.evaluate(f);return h}],"-":{type:on,overloads:[[[on,on],(f,[l,h])=>l.evaluate(f)-h.evaluate(f)],[[on],(f,[l])=>-l.evaluate(f)]]},"/":[on,[on,on],(f,[l,h])=>l.evaluate(f)/h.evaluate(f)],"%":[on,[on,on],(f,[l,h])=>l.evaluate(f)%h.evaluate(f)],ln2:[on,[],()=>Math.LN2],pi:[on,[],()=>Math.PI],e:[on,[],()=>Math.E],"^":[on,[on,on],(f,[l,h])=>Math.pow(l.evaluate(f),h.evaluate(f))],sqrt:[on,[on],(f,[l])=>Math.sqrt(l.evaluate(f))],log10:[on,[on],(f,[l])=>Math.log(l.evaluate(f))/Math.LN10],ln:[on,[on],(f,[l])=>Math.log(l.evaluate(f))],log2:[on,[on],(f,[l])=>Math.log(l.evaluate(f))/Math.LN2],sin:[on,[on],(f,[l])=>Math.sin(l.evaluate(f))],cos:[on,[on],(f,[l])=>Math.cos(l.evaluate(f))],tan:[on,[on],(f,[l])=>Math.tan(l.evaluate(f))],asin:[on,[on],(f,[l])=>Math.asin(l.evaluate(f))],acos:[on,[on],(f,[l])=>Math.acos(l.evaluate(f))],atan:[on,[on],(f,[l])=>Math.atan(l.evaluate(f))],min:[on,Dc(on),(f,l)=>Math.min(...l.map((h=>h.evaluate(f))))],max:[on,Dc(on),(f,l)=>Math.max(...l.map((h=>h.evaluate(f))))],abs:[on,[on],(f,[l])=>Math.abs(l.evaluate(f))],round:[on,[on],(f,[l])=>{const h=l.evaluate(f);return h<0?-Math.round(-h):Math.round(h)}],floor:[on,[on],(f,[l])=>Math.floor(l.evaluate(f))],ceil:[on,[on],(f,[l])=>Math.ceil(l.evaluate(f))],"filter-==":[vr,[dr,hr],(f,[l,h])=>f.properties()[l.value]===h.value],"filter-id-==":[vr,[hr],(f,[l])=>f.id()===l.value],"filter-type-==":[vr,[dr],(f,[l])=>f.geometryType()===l.value],"filter-<":[vr,[dr,hr],(f,[l,h])=>{const x=f.properties()[l.value],w=h.value;return typeof x==typeof w&&x<w}],"filter-id-<":[vr,[hr],(f,[l])=>{const h=f.id(),x=l.value;return typeof h==typeof x&&h<x}],"filter->":[vr,[dr,hr],(f,[l,h])=>{const x=f.properties()[l.value],w=h.value;return typeof x==typeof w&&x>w}],"filter-id->":[vr,[hr],(f,[l])=>{const h=f.id(),x=l.value;return typeof h==typeof x&&h>x}],"filter-<=":[vr,[dr,hr],(f,[l,h])=>{const x=f.properties()[l.value],w=h.value;return typeof x==typeof w&&x<=w}],"filter-id-<=":[vr,[hr],(f,[l])=>{const h=f.id(),x=l.value;return typeof h==typeof x&&h<=x}],"filter->=":[vr,[dr,hr],(f,[l,h])=>{const x=f.properties()[l.value],w=h.value;return typeof x==typeof w&&x>=w}],"filter-id->=":[vr,[hr],(f,[l])=>{const h=f.id(),x=l.value;return typeof h==typeof x&&h>=x}],"filter-has":[vr,[hr],(f,[l])=>l.value in f.properties()],"filter-has-id":[vr,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[vr,[js(dr)],(f,[l])=>l.value.indexOf(f.geometryType())>=0],"filter-id-in":[vr,[js(hr)],(f,[l])=>l.value.indexOf(f.id())>=0],"filter-in-small":[vr,[dr,js(hr)],(f,[l,h])=>h.value.indexOf(f.properties()[l.value])>=0],"filter-in-large":[vr,[dr,js(hr)],(f,[l,h])=>(function(x,w,T,k){for(;T<=k;){const D=T+k>>1;if(w[D]===x)return!0;w[D]>x?k=D-1:T=D+1}return!1})(f.properties()[l.value],h.value,0,h.value.length-1)],all:{type:vr,overloads:[[[vr,vr],(f,[l,h])=>l.evaluate(f)&&h.evaluate(f)],[Dc(vr),(f,l)=>{for(const h of l)if(!h.evaluate(f))return!1;return!0}]]},any:{type:vr,overloads:[[[vr,vr],(f,[l,h])=>l.evaluate(f)||h.evaluate(f)],[Dc(vr),(f,l)=>{for(const h of l)if(h.evaluate(f))return!0;return!1}]]},"!":[vr,[vr],(f,[l])=>!l.evaluate(f)],"is-supported-script":[vr,[dr],(f,[l])=>{const h=f.globals&&f.globals.isSupportedScript;return!h||h(l.evaluate(f))}],upcase:[dr,[dr],(f,[l])=>l.evaluate(f).toUpperCase()],downcase:[dr,[dr],(f,[l])=>l.evaluate(f).toLowerCase()],concat:[dr,Dc(hr),(f,l)=>l.map((h=>Oh(h.evaluate(f)))).join("")],"resolved-locale":[dr,[kd],(f,[l])=>l.evaluate(f).resolvedLocale()]});class Fy{constructor(l,h,x){this.expression=l,this._warningHistory={},this._evaluator=new Rd,this._defaultValue=h?(function(w){if(w.type==="color"&&zy(w.default))return new mr(0,0,0,0);switch(w.type){case"color":return mr.parse(w.default)||null;case"padding":return $o.parse(w.default)||null;case"numberArray":return Vi.parse(w.default)||null;case"colorArray":return Kn.parse(w.default)||null;case"variableAnchorOffsetCollection":return co.parse(w.default)||null;case"projectionDefinition":return ts.parse(w.default)||null;default:return w.default===void 0?null:w.default}})(h):null,this._enumValues=h&&h.type==="enum"?h.values:null,this._globalState=x}evaluateWithoutErrorHandling(l,h,x,w,T,k){return this._globalState&&(l=ds(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=h,this._evaluator.featureState=x,this._evaluator.canonical=w,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=k,this.expression.evaluate(this._evaluator)}evaluate(l,h,x,w,T,k){this._globalState&&(l=ds(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=h||null,this._evaluator.featureState=x||null,this._evaluator.canonical=w,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=k||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new yi(`Expected value to be one of ${Object.keys(this._enumValues).map((B=>JSON.stringify(B))).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function Ih(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in sp}function lp(f,l,h){const x=new Id(sp,ma,[],l?(function(T){const k={color:ja,string:dr,number:on,enum:dr,boolean:vr,formatted:kc,padding:wu,numberArray:Ac,colorArray:Ec,projectionDefinition:Oy,resolvedImage:lo,variableAnchorOffsetCollection:Wf};return T.type==="array"?js(k[T.value]||hr,T.length):k[T.type]})(l):void 0),w=x.parse(f,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return w?Km(new Fy(w,l,h)):Mh(x.errors)}class ga{constructor(l,h,x){this.kind=l,this._styleExpression=h,this.isStateDependent=l!=="constant"&&!Fd(h.expression),this.globalStateRefs=ns(h.expression),this._globalState=x}evaluateWithoutErrorHandling(l,h,x,w,T,k){return this._globalState&&(l=ds(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,h,x,w,T,k)}evaluate(l,h,x,w,T,k){return this._globalState&&(l=ds(l,this._globalState)),this._styleExpression.evaluate(l,h,x,w,T,k)}}class Dh{constructor(l,h,x,w,T){this.kind=l,this.zoomStops=x,this._styleExpression=h,this.isStateDependent=l!=="camera"&&!Fd(h.expression),this.globalStateRefs=ns(h.expression),this.interpolationType=w,this._globalState=T}evaluateWithoutErrorHandling(l,h,x,w,T,k){return this._globalState&&(l=ds(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,h,x,w,T,k)}evaluate(l,h,x,w,T,k){return this._globalState&&(l=ds(l,this._globalState)),this._styleExpression.evaluate(l,h,x,w,T,k)}interpolationFactor(l,h,x){return this.interpolationType?pa.interpolationFactor(this.interpolationType,l,h,x):0}}function Lh(f,l,h){const x=lp(f,l,h);if(x.result==="error")return x;const w=x.value.expression,T=Cu(w);if(!T&&!bl(l))return Mh([new Jo("","data expressions not supported")]);const k=jd(w,["zoom"]);if(!k&&!Rv(l))return Mh([new Jo("","zoom expressions not supported")]);const D=$h(w);return D||k?D instanceof Jo?Mh([D]):D instanceof pa&&!ap(l)?Mh([new Jo("",'"interpolate" expressions cannot be used with this property')]):Km(D?new Dh(T?"camera":"composite",x.value,D.labels,D instanceof pa?D.interpolation:void 0,h):new ga(T?"constant":"source",x.value,h)):Mh([new Jo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Vd{constructor(l,h){this._parameters=l,this._specification=h,Oo(this,Ny(this._parameters,this._specification))}static deserialize(l){return new Vd(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function $h(f){let l=null;if(f instanceof ui)l=$h(f.result);else if(f instanceof Ld){for(const h of f.args)if(l=$h(h),l)break}else(f instanceof Th||f instanceof pa)&&f.input instanceof Ua&&f.input.name==="zoom"&&(l=f);return l instanceof Jo||f.eachChild((h=>{const x=$h(h);x instanceof Jo?l=x:!l&&x?l=new Jo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&x&&l!==x&&(l=new Jo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),l}function ns(f,l=new Set){return f instanceof Ym&&l.add(f.key),f.eachChild((h=>{ns(h,l)})),l}function ds(f,l){const{zoom:h,heatmapDensity:x,elevation:w,lineProgress:T,isSupportedScript:k,accumulated:D}=f??{};return{zoom:h,heatmapDensity:x,elevation:w,lineProgress:T,isSupportedScript:k,accumulated:D,globalState:l}}function Lc(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const l of f.slice(1))if(!Lc(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const $c={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Sa(f,l){if(f==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Lc(f)||(f=Qd(f));const h=lp(f,$c,l);if(h.result==="error")throw new Error(h.value.map((x=>`${x.key}: ${x.message}`)).join(", "));return{filter:(x,w,T)=>h.value.evaluate(x,w,{},T),needGeometry:Dv(f),getGlobalStateRefs:()=>ns(h.value.expression)}}function Tu(f,l){return f<l?-1:f>l?1:0}function Dv(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let l=1;l<f.length;l++)if(Dv(f[l]))return!0;return!1}function Qd(f){if(!f)return!0;const l=f[0];return f.length<=1?l!=="any":l==="=="?cp(f[1],f[2],"=="):l==="!="?vi(cp(f[1],f[2],"==")):l==="<"||l===">"||l==="<="||l===">="?cp(f[1],f[2],l):l==="any"?(h=f.slice(1),["any"].concat(h.map(Qd))):l==="all"?["all"].concat(f.slice(1).map(Qd)):l==="none"?["all"].concat(f.slice(1).map(Qd).map(vi)):l==="in"?Lv(f[1],f.slice(2)):l==="!in"?vi(Lv(f[1],f.slice(2))):l==="has"?fs(f[1]):l!=="!has"||vi(fs(f[1]));var h}function cp(f,l,h){switch(f){case"$type":return[`filter-type-${h}`,l];case"$id":return[`filter-id-${h}`,l];default:return[`filter-${h}`,f,l]}}function Lv(f,l){if(l.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some((h=>typeof h!=typeof l[0]))?["filter-in-large",f,["literal",l.sort(Tu)]]:["filter-in-small",f,["literal",l]]}}function fs(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function vi(f){return["!",f]}function Ir(f){const l=typeof f;if(l==="number"||l==="boolean"||l==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let w="[";for(const T of f)w+=`${Ir(T)},`;return`${w}]`}const h=Object.keys(f).sort();let x="{";for(let w=0;w<h.length;w++)x+=`${JSON.stringify(h[w])}:${Ir(f[h[w]])},`;return`${x}}`}function ku(f){let l="";for(const h of Fr)l+=`/${Ir(f[h])}`;return l}function Ha(f){const l=f.value;return l?[new Xt(f.key,l,"constants have been deprecated as of v8")]:[]}function Ji(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Ca(f){if(Array.isArray(f))return f.map(Ca);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const l={};for(const h in f)l[h]=Ca(f[h]);return l}return Ji(f)}function Ta(f){const l=f.key,h=f.value,x=f.valueSpec||{},w=f.objectElementValidators||{},T=f.style,k=f.styleSpec,D=f.validateSpec;let B=[];const Z=pr(h);if(Z!=="object")return[new Xt(l,h,`object expected, ${Z} found`)];for(const Y in h){const ee=Y.split(".")[0],oe=Xf(x,ee)||x["*"];let ue;if(Xf(w,ee))ue=w[ee];else if(Xf(x,ee)){if(h[Y]===void 0)continue;ue=D}else if(w["*"])ue=w["*"];else{if(!x["*"]){B.push(new Xt(l,h[Y],`unknown property "${Y}"`));continue}ue=D}B=B.concat(ue({key:(l&&`${l}.`)+Y,value:h[Y],valueSpec:oe,style:T,styleSpec:k,object:h,objectKey:Y,validateSpec:D},h))}for(const Y in x)w[Y]||x[Y].required&&x[Y].default===void 0&&h[Y]===void 0&&B.push(new Xt(l,h,`missing required property "${Y}"`));return B}function Jm(f){const l=f.value,h=f.valueSpec,x=f.style,w=f.styleSpec,T=f.key,k=f.arrayElementValidator||f.validateSpec;if(pr(l)!=="array")return[new Xt(T,l,`array expected, ${pr(l)} found`)];if(h.length&&l.length!==h.length)return[new Xt(T,l,`array length ${h.length} expected, length ${l.length} found`)];let D={type:h.value,values:h.values};w.$version<7&&(D.function=h.function),pr(h.value)==="object"&&(D=h.value);let B=[];for(let Z=0;Z<l.length;Z++)B=B.concat(k({array:l,arrayIndex:Z,value:l[Z],valueSpec:D,validateSpec:f.validateSpec,style:x,styleSpec:w,key:`${T}[${Z}]`}));return B}function zc(f){const l=f.key,h=f.value,x=f.valueSpec;let w=pr(h);return w==="number"&&h!=h&&(w="NaN"),w!=="number"?[new Xt(l,h,`number expected, ${w} found`)]:"minimum"in x&&h<x.minimum?[new Xt(l,h,`${h} is less than the minimum value ${x.minimum}`)]:"maximum"in x&&h>x.maximum?[new Xt(l,h,`${h} is greater than the maximum value ${x.maximum}`)]:[]}function Nc(f){const l=f.valueSpec,h=Ji(f.value.type);let x,w,T,k={};const D=h!=="categorical"&&f.value.property===void 0,B=!D,Z=pr(f.value.stops)==="array"&&pr(f.value.stops[0])==="array"&&pr(f.value.stops[0][0])==="object",Y=Ta({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(ue){if(h==="identity")return[new Xt(ue.key,ue.value,'identity function may not have a "stops" property')];let me=[];const ge=ue.value;return me=me.concat(Jm({key:ue.key,value:ge,valueSpec:ue.valueSpec,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec,arrayElementValidator:ee})),pr(ge)==="array"&&ge.length===0&&me.push(new Xt(ue.key,ge,"array must have at least one stop")),me},default:function(ue){return ue.validateSpec({key:ue.key,value:ue.value,valueSpec:l,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec})}}});return h==="identity"&&D&&Y.push(new Xt(f.key,f.value,'missing required property "property"')),h==="identity"||f.value.stops||Y.push(new Xt(f.key,f.value,'missing required property "stops"')),h==="exponential"&&f.valueSpec.expression&&!ap(f.valueSpec)&&Y.push(new Xt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(B&&!bl(f.valueSpec)?Y.push(new Xt(f.key,f.value,"property functions not supported")):D&&!Rv(f.valueSpec)&&Y.push(new Xt(f.key,f.value,"zoom functions not supported"))),h!=="categorical"&&!Z||f.value.property!==void 0||Y.push(new Xt(f.key,f.value,'"property" property is required')),Y;function ee(ue){let me=[];const ge=ue.value,xe=ue.key;if(pr(ge)!=="array")return[new Xt(xe,ge,`array expected, ${pr(ge)} found`)];if(ge.length!==2)return[new Xt(xe,ge,`array length 2 expected, length ${ge.length} found`)];if(Z){if(pr(ge[0])!=="object")return[new Xt(xe,ge,`object expected, ${pr(ge[0])} found`)];if(ge[0].zoom===void 0)return[new Xt(xe,ge,"object stop key must have zoom")];if(ge[0].value===void 0)return[new Xt(xe,ge,"object stop key must have value")];if(T&&T>Ji(ge[0].zoom))return[new Xt(xe,ge[0].zoom,"stop zoom values must appear in ascending order")];Ji(ge[0].zoom)!==T&&(T=Ji(ge[0].zoom),w=void 0,k={}),me=me.concat(Ta({key:`${xe}[0]`,value:ge[0],valueSpec:{zoom:{}},validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec,objectElementValidators:{zoom:zc,value:oe}}))}else me=me.concat(oe({key:`${xe}[0]`,value:ge[0],validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec},ge));return Ih(Ca(ge[1]))?me.concat([new Xt(`${xe}[1]`,ge[1],"expressions are not allowed in function stops.")]):me.concat(ue.validateSpec({key:`${xe}[1]`,value:ge[1],valueSpec:l,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec}))}function oe(ue,me){const ge=pr(ue.value),xe=Ji(ue.value),Te=ue.value!==null?ue.value:me;if(x){if(ge!==x)return[new Xt(ue.key,Te,`${ge} stop domain type must match previous stop domain type ${x}`)]}else x=ge;if(ge!=="number"&&ge!=="string"&&ge!=="boolean")return[new Xt(ue.key,Te,"stop domain value must be a number, string, or boolean")];if(ge!=="number"&&h!=="categorical"){let Ue=`number expected, ${ge} found`;return bl(l)&&h===void 0&&(Ue+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xt(ue.key,Te,Ue)]}return h!=="categorical"||ge!=="number"||isFinite(xe)&&Math.floor(xe)===xe?h!=="categorical"&&ge==="number"&&w!==void 0&&xe<w?[new Xt(ue.key,Te,"stop domain values must appear in ascending order")]:(w=xe,h==="categorical"&&xe in k?[new Xt(ue.key,Te,"stop domain values must be unique")]:(k[xe]=!0,[])):[new Xt(ue.key,Te,`integer expected, found ${xe}`)]}}function Bc(f){const l=(f.expressionContext==="property"?Lh:lp)(Ca(f.value),f.valueSpec);if(l.result==="error")return l.value.map((x=>new Xt(`${f.key}${x.key}`,f.value,x.message)));const h=l.value.expression||l.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!h.outputDefined())return[new Xt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!Fd(h))return[new Xt(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!Fd(h))return[new Xt(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!jd(h,["zoom","feature-state"]))return[new Xt(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!Cu(h))return[new Xt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Eu(f){const l=f.key,h=f.value,x=pr(h);return x!=="string"?[new Xt(l,h,`color expected, ${x} found`)]:mr.parse(String(h))?[]:[new Xt(l,h,`color expected, "${h}" found`)]}function Au(f){const l=f.key,h=f.value,x=f.valueSpec,w=[];return Array.isArray(x.values)?x.values.indexOf(Ji(h))===-1&&w.push(new Xt(l,h,`expected one of [${x.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(x.values).indexOf(Ji(h))===-1&&w.push(new Xt(l,h,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(h)} found`)),w}function wl(f){return Lc(Ca(f.value))?Bc(Oo({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Fc(f)}function Fc(f){const l=f.value,h=f.key;if(pr(l)!=="array")return[new Xt(h,l,`array expected, ${pr(l)} found`)];const x=f.styleSpec;let w,T=[];if(l.length<1)return[new Xt(h,l,"filter array must have at least 1 element")];switch(T=T.concat(Au({key:`${h}[0]`,value:l[0],valueSpec:x.filter_operator,style:f.style,styleSpec:f.styleSpec})),Ji(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Ji(l[1])==="$type"&&T.push(new Xt(h,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&T.push(new Xt(h,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(w=pr(l[1]),w!=="string"&&T.push(new Xt(`${h}[1]`,l[1],`string expected, ${w} found`)));for(let k=2;k<l.length;k++)w=pr(l[k]),Ji(l[1])==="$type"?T=T.concat(Au({key:`${h}[${k}]`,value:l[k],valueSpec:x.geometry_type,style:f.style,styleSpec:f.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&T.push(new Xt(`${h}[${k}]`,l[k],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let k=1;k<l.length;k++)T=T.concat(Fc({key:`${h}[${k}]`,value:l[k],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":w=pr(l[1]),l.length!==2?T.push(new Xt(h,l,`filter array for "${l[0]}" operator must have 2 elements`)):w!=="string"&&T.push(new Xt(`${h}[1]`,l[1],`string expected, ${w} found`))}return T}function Pu(f,l){const h=f.key,x=f.validateSpec,w=f.style,T=f.styleSpec,k=f.value,D=f.objectKey,B=T[`${l}_${f.layerType}`];if(!B)return[];const Z=D.match(/^(.*)-transition$/);if(l==="paint"&&Z&&B[Z[1]]&&B[Z[1]].transition)return x({key:h,value:k,valueSpec:T.transition,style:w,styleSpec:T});const Y=f.valueSpec||B[D];if(!Y)return[new Xt(h,k,`unknown property "${D}"`)];let ee;if(pr(k)==="string"&&bl(Y)&&!Y.tokens&&(ee=/^{([^}]+)}$/.exec(k)))return[new Xt(h,k,`"${D}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ee[1])} }\`.`)];const oe=[];return f.layerType==="symbol"&&D==="text-font"&&zy(Ca(k))&&Ji(k.type)==="identity"&&oe.push(new Xt(h,k,'"text-font" does not support identity functions')),oe.concat(x({key:f.key,value:k,valueSpec:Y,style:w,styleSpec:T,expressionContext:"property",propertyType:l,propertyKey:D}))}function jc(f){return Pu(f,"paint")}function jy(f){return Pu(f,"layout")}function Vy(f){let l=[];const h=f.value,x=f.key,w=f.style,T=f.styleSpec;if(pr(h)!=="object")return[new Xt(x,h,`object expected, ${pr(h)} found`)];h.type||h.ref||l.push(new Xt(x,h,'either "type" or "ref" is required'));let k=Ji(h.type);const D=Ji(h.ref);if(h.id){const B=Ji(h.id);for(let Z=0;Z<f.arrayIndex;Z++){const Y=w.layers[Z];Ji(Y.id)===B&&l.push(new Xt(x,h.id,`duplicate layer id "${h.id}", previously used at line ${Y.id.__line__}`))}}if("ref"in h){let B;["type","source","source-layer","filter","layout"].forEach((Z=>{Z in h&&l.push(new Xt(x,h[Z],`"${Z}" is prohibited for ref layers`))})),w.layers.forEach((Z=>{Ji(Z.id)===D&&(B=Z)})),B?B.ref?l.push(new Xt(x,h.ref,"ref cannot reference another ref layer")):k=Ji(B.type):l.push(new Xt(x,h.ref,`ref layer "${D}" not found`))}else if(k!=="background")if(h.source){const B=w.sources&&w.sources[h.source],Z=B&&Ji(B.type);B?Z==="vector"&&k==="raster"?l.push(new Xt(x,h.source,`layer "${h.id}" requires a raster source`)):Z!=="raster-dem"&&k==="hillshade"||Z!=="raster-dem"&&k==="color-relief"?l.push(new Xt(x,h.source,`layer "${h.id}" requires a raster-dem source`)):Z==="raster"&&k!=="raster"?l.push(new Xt(x,h.source,`layer "${h.id}" requires a vector source`)):Z!=="vector"||h["source-layer"]?Z==="raster-dem"&&k!=="hillshade"&&k!=="color-relief"?l.push(new Xt(x,h.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):k!=="line"||!h.paint||!h.paint["line-gradient"]||Z==="geojson"&&B.lineMetrics||l.push(new Xt(x,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new Xt(x,h,`layer "${h.id}" must specify a "source-layer"`)):l.push(new Xt(x,h.source,`source "${h.source}" not found`))}else l.push(new Xt(x,h,'missing required property "source"'));return l=l.concat(Ta({key:x,value:h,valueSpec:T.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${x}.type`,value:h.type,valueSpec:T.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:h,objectKey:"type"}),filter:wl,layout:B=>Ta({layer:h,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":Z=>jy(Oo({layerType:k},Z))}}),paint:B=>Ta({layer:h,key:B.key,value:B.value,style:B.style,styleSpec:B.styleSpec,validateSpec:B.validateSpec,objectElementValidators:{"*":Z=>jc(Oo({layerType:k},Z))}})}})),l}function Ga(f){const l=f.value,h=f.key,x=pr(l);return x!=="string"?[new Xt(h,l,`string expected, ${x} found`)]:[]}const up={promoteId:function({key:f,value:l}){if(pr(l)==="string")return Ga({key:f,value:l});{const h=[];for(const x in l)h.push(...Ga({key:`${f}.${x}`,value:l[x]}));return h}}};function Mu(f){const l=f.value,h=f.key,x=f.styleSpec,w=f.style,T=f.validateSpec;if(!l.type)return[new Xt(h,l,'"type" is required')];const k=Ji(l.type);let D;switch(k){case"vector":case"raster":return D=Ta({key:h,value:l,valueSpec:x[`source_${k.replace("-","_")}`],style:f.style,styleSpec:x,objectElementValidators:up,validateSpec:T}),D;case"raster-dem":return D=(function(B){var Z;const Y=(Z=B.sourceName)!==null&&Z!==void 0?Z:"",ee=B.value,oe=B.styleSpec,ue=oe.source_raster_dem,me=B.style;let ge=[];const xe=pr(ee);if(ee===void 0)return ge;if(xe!=="object")return ge.push(new Xt("source_raster_dem",ee,`object expected, ${xe} found`)),ge;const Te=Ji(ee.encoding)==="custom",Ue=["redFactor","greenFactor","blueFactor","baseShift"],Ee=B.value.encoding?`"${B.value.encoding}"`:"Default";for(const Re in ee)!Te&&Ue.includes(Re)?ge.push(new Xt(Re,ee[Re],`In "${Y}": "${Re}" is only valid when "encoding" is set to "custom". ${Ee} encoding found`)):ue[Re]?ge=ge.concat(B.validateSpec({key:Re,value:ee[Re],valueSpec:ue[Re],validateSpec:B.validateSpec,style:me,styleSpec:oe})):ge.push(new Xt(Re,ee[Re],`unknown property "${Re}"`));return ge})({sourceName:h,value:l,style:f.style,styleSpec:x,validateSpec:T}),D;case"geojson":if(D=Ta({key:h,value:l,valueSpec:x.source_geojson,style:w,styleSpec:x,validateSpec:T,objectElementValidators:up}),l.cluster)for(const B in l.clusterProperties){const[Z,Y]=l.clusterProperties[B],ee=typeof Z=="string"?[Z,["accumulated"],["get",B]]:Z;D.push(...Bc({key:`${h}.${B}.map`,value:Y,expressionContext:"cluster-map"})),D.push(...Bc({key:`${h}.${B}.reduce`,value:ee,expressionContext:"cluster-reduce"}))}return D;case"video":return Ta({key:h,value:l,valueSpec:x.source_video,style:w,validateSpec:T,styleSpec:x});case"image":return Ta({key:h,value:l,valueSpec:x.source_image,style:w,validateSpec:T,styleSpec:x});case"canvas":return[new Xt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Au({key:`${h}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function zo(f){const l=f.value,h=f.styleSpec,x=h.light,w=f.style;let T=[];const k=pr(l);if(l===void 0)return T;if(k!=="object")return T=T.concat([new Xt("light",l,`object expected, ${k} found`)]),T;for(const D in l){const B=D.match(/^(.*)-transition$/);T=T.concat(B&&x[B[1]]&&x[B[1]].transition?f.validateSpec({key:D,value:l[D],valueSpec:h.transition,validateSpec:f.validateSpec,style:w,styleSpec:h}):x[D]?f.validateSpec({key:D,value:l[D],valueSpec:x[D],validateSpec:f.validateSpec,style:w,styleSpec:h}):[new Xt(D,l[D],`unknown property "${D}"`)])}return T}function eg(f){const l=f.value,h=f.styleSpec,x=h.sky,w=f.style,T=pr(l);if(l===void 0)return[];if(T!=="object")return[new Xt("sky",l,`object expected, ${T} found`)];let k=[];for(const D in l)k=k.concat(x[D]?f.validateSpec({key:D,value:l[D],valueSpec:x[D],style:w,styleSpec:h}):[new Xt(D,l[D],`unknown property "${D}"`)]);return k}function Qy(f){const l=f.value,h=f.styleSpec,x=h.terrain,w=f.style;let T=[];const k=pr(l);if(l===void 0)return T;if(k!=="object")return T=T.concat([new Xt("terrain",l,`object expected, ${k} found`)]),T;for(const D in l)T=T.concat(x[D]?f.validateSpec({key:D,value:l[D],valueSpec:x[D],validateSpec:f.validateSpec,style:w,styleSpec:h}):[new Xt(D,l[D],`unknown property "${D}"`)]);return T}function $v(f){let l=[];const h=f.value,x=f.key;if(Array.isArray(h)){const w=[],T=[];for(const k in h)h[k].id&&w.includes(h[k].id)&&l.push(new Xt(x,h,`all the sprites' ids must be unique, but ${h[k].id} is duplicated`)),w.push(h[k].id),h[k].url&&T.includes(h[k].url)&&l.push(new Xt(x,h,`all the sprites' URLs must be unique, but ${h[k].url} is duplicated`)),T.push(h[k].url),l=l.concat(Ta({key:`${x}[${k}]`,value:h[k],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return l}return Ga({key:x,value:h})}function bb(f){return!!f&&f.constructor===Object}function zv(f){return bb(f.value)?[]:[new Xt(f.key,f.value,`object expected, ${pr(f.value)} found`)]}const Co={"*":()=>[],array:Jm,boolean:function(f){const l=f.value,h=f.key,x=pr(l);return x!=="boolean"?[new Xt(h,l,`boolean expected, ${x} found`)]:[]},number:zc,color:Eu,constants:Ha,enum:Au,filter:wl,function:Nc,layer:Vy,object:Ta,source:Mu,light:zo,sky:eg,terrain:Qy,projection:function(f){const l=f.value,h=f.styleSpec,x=h.projection,w=f.style,T=pr(l);if(l===void 0)return[];if(T!=="object")return[new Xt("projection",l,`object expected, ${T} found`)];let k=[];for(const D in l)k=k.concat(x[D]?f.validateSpec({key:D,value:l[D],valueSpec:x[D],style:w,styleSpec:h}):[new Xt(D,l[D],`unknown property "${D}"`)]);return k},projectionDefinition:function(f){const l=f.key;let h=f.value;h=h instanceof String?h.valueOf():h;const x=pr(h);return x!=="array"||(function(w){return Array.isArray(w)&&w.length===3&&typeof w[0]=="string"&&typeof w[1]=="string"&&typeof w[2]=="number"})(h)||(function(w){return!!["interpolate","step","literal"].includes(w[0])})(h)?["array","string"].includes(x)?[]:[new Xt(l,h,`projection expected, invalid type "${x}" found`)]:[new Xt(l,h,`projection expected, invalid array ${JSON.stringify(h)} found`)]},string:Ga,formatted:function(f){return Ga(f).length===0?[]:Bc(f)},resolvedImage:function(f){return Ga(f).length===0?[]:Bc(f)},padding:function(f){const l=f.key,h=f.value;if(pr(h)==="array"){if(h.length<1||h.length>4)return[new Xt(l,h,`padding requires 1 to 4 values; ${h.length} values found`)];const x={type:"number"};let w=[];for(let T=0;T<h.length;T++)w=w.concat(f.validateSpec({key:`${l}[${T}]`,value:h[T],validateSpec:f.validateSpec,valueSpec:x}));return w}return zc({key:l,value:h,valueSpec:{}})},numberArray:function(f){const l=f.key,h=f.value;if(pr(h)==="array"){const x={type:"number"};if(h.length<1)return[new Xt(l,h,"array length at least 1 expected, length 0 found")];let w=[];for(let T=0;T<h.length;T++)w=w.concat(f.validateSpec({key:`${l}[${T}]`,value:h[T],validateSpec:f.validateSpec,valueSpec:x}));return w}return zc({key:l,value:h,valueSpec:{}})},colorArray:function(f){const l=f.key,h=f.value;if(pr(h)==="array"){if(h.length<1)return[new Xt(l,h,"array length at least 1 expected, length 0 found")];let x=[];for(let w=0;w<h.length;w++)x=x.concat(Eu({key:`${l}[${w}]`,value:h[w]}));return x}return Eu({key:l,value:h})},variableAnchorOffsetCollection:function(f){const l=f.key,h=f.value,x=pr(h),w=f.styleSpec;if(x!=="array"||h.length<1||h.length%2!=0)return[new Xt(l,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let T=[];for(let k=0;k<h.length;k+=2)T=T.concat(Au({key:`${l}[${k}]`,value:h[k],valueSpec:w.layout_symbol["text-anchor"]})),T=T.concat(Jm({key:`${l}[${k+1}]`,value:h[k+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:w}));return T},sprite:$v,state:zv,fontFaces:function(f){const l=f.key,h=f.value,x=f.validateSpec,w=f.styleSpec,T=f.style;if(!bb(h))return[new Xt(l,h,`object expected, ${pr(h)} found`)];const k=[];for(const D in h){const B=h[D],Z=pr(B);if(Z==="string")k.push(...Ga({key:`${l}.${D}`,value:B}));else if(Z==="array"){const Y={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[ee,oe]of B.entries())k.push(...Ta({key:`${l}.${D}[${ee}]`,value:oe,valueSpec:Y,styleSpec:w,style:T,validateSpec:x}))}else k.push(new Xt(`${l}.${D}`,B,`string or array expected, ${Z} found`))}return k}};function Vc(f){const l=f.value,h=f.valueSpec,x=f.styleSpec;return f.validateSpec=Vc,h.expression&&zy(Ji(l))?Nc(f):h.expression&&Ih(Ca(l))?Bc(f):h.type&&Co[h.type]?Co[h.type](f):Ta(Oo({},f,{valueSpec:h.type?x[h.type]:h}))}function hp(f){const l=f.value,h=f.key,x=Ga(f);return x.length||(l.indexOf("{fontstack}")===-1&&x.push(new Xt(h,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&x.push(new Xt(h,l,'"glyphs" url must include a "{range}" token'))),x}function Vs(f,l=ut){let h=[];return h=h.concat(Vc({key:"",value:f,valueSpec:l.$root,styleSpec:l,style:f,validateSpec:Vc,objectElementValidators:{glyphs:hp,"*":()=>[]}})),f.constants&&(h=h.concat(Ha({key:"constants",value:f.constants}))),Ud(h)}function Xa(f){return function(l){return f(Object.assign({},l,{validateSpec:Vc}))}}function Ud(f){return[].concat(f).sort(((l,h)=>l.line-h.line))}function Qs(f){return function(...l){return Ud(f.apply(this,l))}}Vs.source=Qs(Xa(Mu)),Vs.sprite=Qs(Xa($v)),Vs.glyphs=Qs(Xa(hp)),Vs.light=Qs(Xa(zo)),Vs.sky=Qs(Xa(eg)),Vs.terrain=Qs(Xa(Qy)),Vs.state=Qs(Xa(zv)),Vs.layer=Qs(Xa(Vy)),Vs.filter=Qs(Xa(wl)),Vs.paintProperty=Qs(Xa(jc)),Vs.layoutProperty=Qs(Xa(jy));const SS={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class dp{constructor(l,h){this._globalState=h,this.setValue(l)}evaluate(){var l;return(l=this._literalValue)!==null&&l!==void 0?l:this._compiledValue.evaluate({})}setValue(l){if(l==null||l==="visible"||l==="none")return this._literalValue=l==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const h=lp(l,SS,this._globalState);if(h.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(h.value.map((x=>`${x.key}: ${x.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=h.value,this._globalStateRefs=ns(h.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const tg=ut,rs=Vs,Jl=rs.light,Uy=rs.sky,Zy=rs.paintProperty,wb=rs.layoutProperty;function ec(f,l){let h=!1;if(l&&l.length)for(const x of l)f.fire(new Ar(new Error(x.message))),h=!0;return h}class zh{constructor(l,h,x){const w=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const k=new Int32Array(this.arrayBuffer);l=k[0],this.d=(h=k[1])+2*(x=k[2]);for(let B=0;B<this.d*this.d;B++){const Z=k[3+B],Y=k[3+B+1];w.push(Z===Y?null:k.subarray(Z,Y))}const D=k[3+w.length+1];this.keys=k.subarray(k[3+w.length],D),this.bboxes=k.subarray(D),this.insert=this._insertReadonly}else{this.d=h+2*x;for(let k=0;k<this.d*this.d;k++)w.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=l,this.padding=x,this.scale=h/l,this.uid=0;const T=x/h*l;this.min=-T,this.max=l+T}insert(l,h,x,w,T){this._forEachCell(h,x,w,T,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(h),this.bboxes.push(x),this.bboxes.push(w),this.bboxes.push(T)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,h,x,w,T,k){this.cells[T].push(k)}query(l,h,x,w,T){const k=this.min,D=this.max;if(l<=k&&h<=k&&D<=x&&D<=w&&!T)return Array.prototype.slice.call(this.keys);{const B=[];return this._forEachCell(l,h,x,w,this._queryCell,B,{},T),B}}_queryCell(l,h,x,w,T,k,D,B){const Z=this.cells[T];if(Z!==null){const Y=this.keys,ee=this.bboxes;for(let oe=0;oe<Z.length;oe++){const ue=Z[oe];if(D[ue]===void 0){const me=4*ue;(B?B(ee[me+0],ee[me+1],ee[me+2],ee[me+3]):l<=ee[me+2]&&h<=ee[me+3]&&x>=ee[me+0]&&w>=ee[me+1])?(D[ue]=!0,k.push(Y[ue])):D[ue]=!1}}}}_forEachCell(l,h,x,w,T,k,D,B){const Z=this._convertToCellCoord(l),Y=this._convertToCellCoord(h),ee=this._convertToCellCoord(x),oe=this._convertToCellCoord(w);for(let ue=Z;ue<=ee;ue++)for(let me=Y;me<=oe;me++){const ge=this.d*me+ue;if((!B||B(this._convertFromCellCoord(ue),this._convertFromCellCoord(me),this._convertFromCellCoord(ue+1),this._convertFromCellCoord(me+1)))&&T.call(this,l,h,x,w,ge,k,D,B))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,h=3+this.cells.length+1+1;let x=0;for(let k=0;k<this.cells.length;k++)x+=this.cells[k].length;const w=new Int32Array(h+x+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let T=h;for(let k=0;k<l.length;k++){const D=l[k];w[3+k]=T,w.set(D,T),T+=D.length}return w[3+l.length]=T,w.set(this.keys,T),T+=this.keys.length,w[3+l.length+1]=T,w.set(this.bboxes,T),T+=this.bboxes.length,w.buffer}static serialize(l,h){const x=l.toArrayBuffer();return h&&h.push(x),{buffer:x}}static deserialize(l){return new zh(l.buffer)}}const ka={};function xn(f,l,h={}){if(ka[f])throw new Error(`${f} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:f,writeable:!1}),ka[f]={klass:l,omit:h.omit||[],shallow:h.shallow||[]}}xn("Object",Object),xn("Set",Set),xn("TransferableGridIndex",zh),xn("Color",mr),xn("Error",Error),xn("AJAXError",Ke),xn("ResolvedImage",ha),xn("StylePropertyFunction",Vd),xn("StyleExpression",Fy,{omit:["_evaluator"]}),xn("ZoomDependentExpression",Dh),xn("ZoomConstantExpression",ga),xn("CompoundExpression",Ua,{omit:["_evaluate"]});for(const f in sp)sp[f]._classRegistryKey||xn(`Expression_${f}`,sp[f]);function ng(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function qy(f){return f.$name||f.constructor._classRegistryKey}function Ol(f){return!(function(l){if(l===null||typeof l!="object")return!1;const h=qy(l);return!(!h||h==="Object")})(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||ng(f)||Cn(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function tc(f,l){if(Ol(f))return(ng(f)||Cn(f))&&l&&l.push(f),ArrayBuffer.isView(f)&&l&&l.push(f.buffer),f instanceof ImageData&&l&&l.push(f.data.buffer),f;if(Array.isArray(f)){const T=[];for(const k of f)T.push(tc(k,l));return T}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);const h=qy(f);if(!h)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!ka[h])throw new Error(`${h} is not registered.`);const{klass:x}=ka[h],w=x.serialize?x.serialize(f,l):{};if(x.serialize){if(l&&w===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const T in f){if(!f.hasOwnProperty(T)||ka[h].omit.indexOf(T)>=0)continue;const k=f[T];w[T]=ka[h].shallow.indexOf(T)>=0?k:tc(k,l)}f instanceof Error&&(w.message=f.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(w.$name=h),w}function fp(f){if(Ol(f))return f;if(Array.isArray(f))return f.map(fp);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);const l=qy(f)||"Object";if(!ka[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:h}=ka[l];if(!h)throw new Error(`can't deserialize unregistered class ${l}`);if(h.deserialize)return h.deserialize(f);const x=Object.create(h.prototype);for(const w of Object.keys(f)){if(w==="$name")continue;const T=f[w];x[w]=ka[l].shallow.indexOf(w)>=0?T:fp(T)}return x}class Wy{constructor(){this.first=!0}update(l,h){const x=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=x,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=x,!0):(this.lastFloorZoom>x?(this.lastIntegerZoom=x+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<x&&(this.lastIntegerZoom=x,this.lastIntegerZoomTime=h),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=x,!0))}}function Qc(f){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(f))}function Zd(f){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(f))}function rg(f){return/\s/u.test(String.fromCodePoint(f))}function Uc(f){for(const l of f)if(Zd(l.codePointAt(0)))return!0;return!1}function Hy(f){for(const l of f)if(!Nv(l.codePointAt(0)))return!1;return!0}function ig(f){const l=f.map((h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch{return null}})).filter((h=>h));return new RegExp(l.join("|"),"u")}const Zc=ig(["Arab","Dupl","Mong","Ougr","Syrc"]);function Nv(f){return!Zc.test(String.fromCodePoint(f))}function qc(f){return!(Zd(f)||(l=f,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(l))));var l}const Gy=ig(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function og(f){return Gy.test(String.fromCodePoint(f))}function Wc(f,l){return!(!l&&og(f)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(f)))}function Ru(f){for(const l of f)if(og(l.codePointAt(0)))return!0;return!1}const Sl=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(Sl.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,l){return s(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;const h=f.pluginURL,x=new Promise((T=>{this.loadScriptResolve=T}));l(h);const w=new Promise((T=>setTimeout((()=>T()),this.TIMEOUT)));if(yield Promise.race([x,w]),this.isParsed()){const T={pluginStatus:"loaded",pluginURL:h};return this.setState(T),T}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${h}`)}))}};class ii{constructor(l,h){this.isSupportedScript=Bv,this.zoom=l,h?(this.now=h.now||0,this.fadeDuration=h.fadeDuration||0,this.zoomHistory=h.zoomHistory||new Wy,this.transition=h.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Wy,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,h=l-Math.floor(l),x=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*x}:{fromScale:.5,toScale:1,t:1-(1-x)*h}}}function Bv(f){return(function(l,h){for(const x of l)if(!Wc(x.codePointAt(0),h))return!1;return!0})(f,Sl.getRTLTextPluginStatus()==="loaded")}const Iu="-transition";class Nh{constructor(l,h,x){this.property=l,this.value=h,this.expression=(function(w,T,k){if(zy(w))return new Vd(w,T);if(Ih(w)){const D=Lh(w,T,k);if(D.result==="error")throw new Error(D.value.map((B=>`${B.key}: ${B.message}`)).join(", "));return D.value}{let D=w;return T.type==="color"&&typeof w=="string"?D=mr.parse(w):T.type!=="padding"||typeof w!="number"&&!Array.isArray(w)?T.type!=="numberArray"||typeof w!="number"&&!Array.isArray(w)?T.type!=="colorArray"||typeof w!="string"&&!Array.isArray(w)?T.type==="variableAnchorOffsetCollection"&&Array.isArray(w)?D=co.parse(w):T.type==="projectionDefinition"&&typeof w=="string"&&(D=ts.parse(w)):D=Kn.parse(w):D=Vi.parse(w):D=$o.parse(w),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>D}}})(h===void 0?l.specification.default:h,l.specification,x)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,h,x){return this.property.possiblyEvaluate(this,l,h,x)}}class sg{constructor(l,h){this.property=l,this.value=new Nh(l,void 0,h)}transitioned(l,h){return new qd(this.property,this.value,h,yt({},l.transition,this.transition),l.now)}untransitioned(){return new qd(this.property,this.value,null,{},0)}}class Xy{constructor(l,h){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues),this._globalState=h}getValue(l){return wt(this._values[l].value.value)}setValue(l,h){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new sg(this._values[l].property,this._globalState)),this._values[l].value=new Nh(this._values[l].property,h===null?void 0:wt(h),this._globalState)}getTransition(l){return wt(this._values[l].transition)}setTransition(l,h){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new sg(this._values[l].property,this._globalState)),this._values[l].transition=wt(h)||void 0}serialize(){const l={};for(const h of Object.keys(this._values)){const x=this.getValue(h);x!==void 0&&(l[h]=x);const w=this.getTransition(h);w!==void 0&&(l[`${h}${Iu}`]=w)}return l}transitioned(l,h){const x=new ag(this._properties);for(const w of Object.keys(this._values))x._values[w]=this._values[w].transitioned(l,h._values[w]);return x}untransitioned(){const l=new ag(this._properties);for(const h of Object.keys(this._values))l._values[h]=this._values[h].untransitioned();return l}}class qd{constructor(l,h,x,w,T){this.property=l,this.value=h,this.begin=T+w.delay||0,this.end=this.begin+w.duration||0,l.specification.transition&&(w.delay||w.duration)&&(this.prior=x)}possiblyEvaluate(l,h,x){const w=l.now||0,T=this.value.possiblyEvaluate(l,h,x),k=this.prior;if(k){if(w>this.end)return this.prior=null,T;if(this.value.isDataDriven())return this.prior=null,T;if(w<this.begin)return k.possiblyEvaluate(l,h,x);{const D=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(k.possiblyEvaluate(l,h,x),T,ke(D))}}return T}}class ag{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,h,x){const w=new Wd(this._properties);for(const T of Object.keys(this._values))w._values[T]=this._values[T].possiblyEvaluate(l,h,x);return w}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class Fv{constructor(l,h){this._properties=l,this._values=Object.create(l.defaultPropertyValues),this._globalState=h}hasValue(l){return this._values[l].value!==void 0}getValue(l){return wt(this._values[l].value)}setValue(l,h){this._values[l]=new Nh(this._values[l].property,h===null?void 0:wt(h),this._globalState)}serialize(){const l={};for(const h of Object.keys(this._values)){const x=this.getValue(h);x!==void 0&&(l[h]=x)}return l}possiblyEvaluate(l,h,x){const w=new Wd(this._properties);for(const T of Object.keys(this._values))w._values[T]=this._values[T].possiblyEvaluate(l,h,x);return w}}class Ya{constructor(l,h,x){this.property=l,this.value=h,this.parameters=x}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,h,x,w){return this.property.evaluate(this.value,this.parameters,l,h,x,w)}}class Wd{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class wn{constructor(l){this.specification=l}possiblyEvaluate(l,h){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(h)}interpolate(l,h,x){const w=Ui[this.specification.type];return w?w(l,h,x):l}}class Rn{constructor(l,h){this.specification=l,this.overrides=h}possiblyEvaluate(l,h,x,w){return new Ya(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(h,null,{},x,w)}:l.expression,h)}interpolate(l,h,x){if(l.value.kind!=="constant"||h.value.kind!=="constant")return l;if(l.value.value===void 0||h.value.value===void 0)return new Ya(this,{kind:"constant",value:void 0},l.parameters);const w=Ui[this.specification.type];if(w){const T=w(l.value.value,h.value.value,x);return new Ya(this,{kind:"constant",value:T},l.parameters)}return l}evaluate(l,h,x,w,T,k){return l.kind==="constant"?l.value:l.evaluate(h,x,w,T,k)}}class Cl extends Rn{possiblyEvaluate(l,h,x,w){if(l.value===void 0)return new Ya(this,{kind:"constant",value:void 0},h);if(l.expression.kind==="constant"){const T=l.expression.evaluate(h,null,{},x,w),k=l.property.specification.type==="resolvedImage"&&typeof T!="string"?T.name:T,D=this._calculate(k,k,k,h);return new Ya(this,{kind:"constant",value:D},h)}if(l.expression.kind==="camera"){const T=this._calculate(l.expression.evaluate({zoom:h.zoom-1}),l.expression.evaluate({zoom:h.zoom}),l.expression.evaluate({zoom:h.zoom+1}),h);return new Ya(this,{kind:"constant",value:T},h)}return new Ya(this,l.expression,h)}evaluate(l,h,x,w,T,k){if(l.kind==="source"){const D=l.evaluate(h,x,w,T,k);return this._calculate(D,D,D,h)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(h.zoom)-1},x,w),l.evaluate({zoom:Math.floor(h.zoom)},x,w),l.evaluate({zoom:Math.floor(h.zoom)+1},x,w),h):l.value}_calculate(l,h,x,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:l,to:h}:{from:x,to:h}}interpolate(l){return l}}class pp{constructor(l){this.specification=l}possiblyEvaluate(l,h,x,w){if(l.value!==void 0){if(l.expression.kind==="constant"){const T=l.expression.evaluate(h,null,{},x,w);return this._calculate(T,T,T,h)}return this._calculate(l.expression.evaluate(new ii(Math.floor(h.zoom-1),h)),l.expression.evaluate(new ii(Math.floor(h.zoom),h)),l.expression.evaluate(new ii(Math.floor(h.zoom+1),h)),h)}}_calculate(l,h,x,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:l,to:h}:{from:x,to:h}}interpolate(l){return l}}class lg{constructor(l){this.specification=l}possiblyEvaluate(l,h,x,w){return!!l.expression.evaluate(h,null,{},x,w)}interpolate(){return!1}}class To{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in l){const x=l[h];x.specification.overridable&&this.overridableProperties.push(h);const w=this.defaultPropertyValues[h]=new Nh(x,void 0,void 0),T=this.defaultTransitionablePropertyValues[h]=new sg(x,void 0);this.defaultTransitioningPropertyValues[h]=T.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=w.possiblyEvaluate({})}}}xn("DataDrivenProperty",Rn),xn("DataConstantProperty",wn),xn("CrossFadedDataDrivenProperty",Cl),xn("CrossFadedProperty",pp),xn("ColorRampProperty",lg);class eo extends Or{constructor(l,h,x){if(super(),this.id=l.id,this.type=l.type,this._globalState=x,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,this._visibilityExpression=(function(w,T){return new dp(w,T)})(this.visibility,x),l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter,this._featureFilter=Sa(l.filter,x)),h.layout&&(this._unevaluatedLayout=new Fv(h.layout,x)),h.paint)){this._transitionablePaint=new Xy(h.paint,x);for(const w in l.paint)this.setPaintProperty(w,l.paint[w],{validate:!1});for(const w in l.layout)this.setLayoutProperty(w,l.layout[w],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wd(h.paint)}}setFilter(l){this.filter=l,this._featureFilter=Sa(l,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){const l=new Set;for(const h of this._visibilityExpression.getGlobalStateRefs())l.add(h);if(this._unevaluatedLayout)for(const h in this._unevaluatedLayout._values){const x=this._unevaluatedLayout._values[h];for(const w of x.getGlobalStateRefs())l.add(w)}for(const h of this._featureFilter.getGlobalStateRefs())l.add(h);return l}getPaintAffectingGlobalStateRefs(){var l;const h=new globalThis.Map;if(this._transitionablePaint)for(const x in this._transitionablePaint._values){const w=this._transitionablePaint._values[x].value;for(const T of w.getGlobalStateRefs()){const k=(l=h.get(T))!==null&&l!==void 0?l:[];k.push({name:x,value:w.value}),h.set(T,k)}}return h}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(l,h,x={}){if(h==null||!this._validate(wb,`layers.${this.id}.layout.${l}`,l,h,x))return l==="visibility"?(this.visibility=h,this._visibilityExpression.setValue(h),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(l,h)}getPaintProperty(l){return l.endsWith(Iu)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,h,x={}){if(h!=null&&this._validate(Zy,`layers.${this.id}.paint.${l}`,l,h,x))return!1;if(l.endsWith(Iu))return this._transitionablePaint.setTransition(l.slice(0,-11),h||void 0),!1;{const w=this._transitionablePaint._values[l],T=w.property.specification["property-type"]==="cross-faded-data-driven",k=w.value.isDataDriven(),D=w.value;this._transitionablePaint.setValue(l,h),this._handleSpecialPaintPropertyUpdate(l);const B=this._transitionablePaint._values[l].value;return B.isDataDriven()||k||T||this._handleOverridablePaintPropertyUpdate(l,D,B)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,h,x){return!1}isHidden(l=this.minzoom,h=!1){return!!(this.minzoom&&l<(h?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&l>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(l,h){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,h)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),Ht(l,((h,x)=>!(h===void 0||x==="layout"&&!Object.keys(h).length||x==="paint"&&!Object.keys(h).length)))}_validate(l,h,x,w,T={}){return(!T||T.validate!==!1)&&ec(this,l.call(rs,{key:h,layerType:this.type,objectKey:x,value:w,styleSpec:ut,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const h=this.paint.get(l);if(h instanceof Ya&&bl(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}let ho;var cg={get paint(){return ho=ho||new To({"raster-opacity":new wn(ut.paint_raster["raster-opacity"]),"raster-hue-rotate":new wn(ut.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new wn(ut.paint_raster["raster-brightness-min"]),"raster-brightness-max":new wn(ut.paint_raster["raster-brightness-max"]),"raster-saturation":new wn(ut.paint_raster["raster-saturation"]),"raster-contrast":new wn(ut.paint_raster["raster-contrast"]),"raster-resampling":new wn(ut.paint_raster["raster-resampling"]),"raster-fade-duration":new wn(ut.paint_raster["raster-fade-duration"])})}};class Du extends eo{constructor(l,h){super(l,cg,h)}}const Sr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ei{constructor(l,h){this._structArray=l,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class br{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,h){return l._trim(),h&&(l.isTransferred=!0,h.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const h=Object.create(this.prototype);return h.arrayBuffer=l.arrayBuffer,h.length=l.length,h.capacity=l.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Zi(f,l=1){let h=0,x=0;return{members:f.map((w=>{const T=Sr[w.type].BYTES_PER_ELEMENT,k=h=Tl(h,Math.max(l,T)),D=w.components||1;return x=Math.max(x,T),h+=T*D,{name:w.name,type:w.type,components:D,offset:k}})),size:Tl(h,Math.max(x,l)),alignment:l}}function Tl(f,l){return Math.ceil(f/l)*l}class nc extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h){const x=this.length;return this.resize(x+1),this.emplace(x,l,h)}emplace(l,h,x){const w=2*l;return this.int16[w+0]=h,this.int16[w+1]=x,l}}nc.prototype.bytesPerElement=4,xn("StructArrayLayout2i4",nc);class Hd extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,x){const w=this.length;return this.resize(w+1),this.emplace(w,l,h,x)}emplace(l,h,x,w){const T=3*l;return this.int16[T+0]=h,this.int16[T+1]=x,this.int16[T+2]=w,l}}Hd.prototype.bytesPerElement=6,xn("StructArrayLayout3i6",Hd);class Gd extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,l,h,x,w)}emplace(l,h,x,w,T){const k=4*l;return this.int16[k+0]=h,this.int16[k+1]=x,this.int16[k+2]=w,this.int16[k+3]=T,l}}Gd.prototype.bytesPerElement=8,xn("StructArrayLayout4i8",Gd);class Lu extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,x,w,T,k){const D=this.length;return this.resize(D+1),this.emplace(D,l,h,x,w,T,k)}emplace(l,h,x,w,T,k,D){const B=6*l;return this.int16[B+0]=h,this.int16[B+1]=x,this.int16[B+2]=w,this.int16[B+3]=T,this.int16[B+4]=k,this.int16[B+5]=D,l}}Lu.prototype.bytesPerElement=12,xn("StructArrayLayout2i4i12",Lu);class jv extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,x,w,T,k){const D=this.length;return this.resize(D+1),this.emplace(D,l,h,x,w,T,k)}emplace(l,h,x,w,T,k,D){const B=4*l,Z=8*l;return this.int16[B+0]=h,this.int16[B+1]=x,this.uint8[Z+4]=w,this.uint8[Z+5]=T,this.uint8[Z+6]=k,this.uint8[Z+7]=D,l}}jv.prototype.bytesPerElement=8,xn("StructArrayLayout2i4ub8",jv);class Li extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h){const x=this.length;return this.resize(x+1),this.emplace(x,l,h)}emplace(l,h,x){const w=2*l;return this.float32[w+0]=h,this.float32[w+1]=x,l}}Li.prototype.bytesPerElement=8,xn("StructArrayLayout2f8",Li);class rc extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,x,w,T,k,D,B,Z,Y){const ee=this.length;return this.resize(ee+1),this.emplace(ee,l,h,x,w,T,k,D,B,Z,Y)}emplace(l,h,x,w,T,k,D,B,Z,Y,ee){const oe=10*l;return this.uint16[oe+0]=h,this.uint16[oe+1]=x,this.uint16[oe+2]=w,this.uint16[oe+3]=T,this.uint16[oe+4]=k,this.uint16[oe+5]=D,this.uint16[oe+6]=B,this.uint16[oe+7]=Z,this.uint16[oe+8]=Y,this.uint16[oe+9]=ee,l}}rc.prototype.bytesPerElement=20,xn("StructArrayLayout10ui20",rc);class mp extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,x,w,T,k,D,B){const Z=this.length;return this.resize(Z+1),this.emplace(Z,l,h,x,w,T,k,D,B)}emplace(l,h,x,w,T,k,D,B,Z){const Y=8*l;return this.uint16[Y+0]=h,this.uint16[Y+1]=x,this.uint16[Y+2]=w,this.uint16[Y+3]=T,this.uint16[Y+4]=k,this.uint16[Y+5]=D,this.uint16[Y+6]=B,this.uint16[Y+7]=Z,l}}mp.prototype.bytesPerElement=16,xn("StructArrayLayout8ui16",mp);class gp extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,x,w,T,k,D,B,Z,Y,ee,oe){const ue=this.length;return this.resize(ue+1),this.emplace(ue,l,h,x,w,T,k,D,B,Z,Y,ee,oe)}emplace(l,h,x,w,T,k,D,B,Z,Y,ee,oe,ue){const me=12*l;return this.int16[me+0]=h,this.int16[me+1]=x,this.int16[me+2]=w,this.int16[me+3]=T,this.uint16[me+4]=k,this.uint16[me+5]=D,this.uint16[me+6]=B,this.uint16[me+7]=Z,this.int16[me+8]=Y,this.int16[me+9]=ee,this.int16[me+10]=oe,this.int16[me+11]=ue,l}}gp.prototype.bytesPerElement=24,xn("StructArrayLayout4i4ui4i24",gp);class ug extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,x){const w=this.length;return this.resize(w+1),this.emplace(w,l,h,x)}emplace(l,h,x,w){const T=3*l;return this.float32[T+0]=h,this.float32[T+1]=x,this.float32[T+2]=w,l}}ug.prototype.bytesPerElement=12,xn("StructArrayLayout3f12",ug);class hg extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.uint32[1*l+0]=h,l}}hg.prototype.bytesPerElement=4,xn("StructArrayLayout1ul4",hg);class dg extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,x,w,T,k,D,B,Z){const Y=this.length;return this.resize(Y+1),this.emplace(Y,l,h,x,w,T,k,D,B,Z)}emplace(l,h,x,w,T,k,D,B,Z,Y){const ee=10*l,oe=5*l;return this.int16[ee+0]=h,this.int16[ee+1]=x,this.int16[ee+2]=w,this.int16[ee+3]=T,this.int16[ee+4]=k,this.int16[ee+5]=D,this.uint32[oe+3]=B,this.uint16[ee+8]=Z,this.uint16[ee+9]=Y,l}}dg.prototype.bytesPerElement=20,xn("StructArrayLayout6i1ul2ui20",dg);class Bh extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,x,w,T,k){const D=this.length;return this.resize(D+1),this.emplace(D,l,h,x,w,T,k)}emplace(l,h,x,w,T,k,D){const B=6*l;return this.int16[B+0]=h,this.int16[B+1]=x,this.int16[B+2]=w,this.int16[B+3]=T,this.int16[B+4]=k,this.int16[B+5]=D,l}}Bh.prototype.bytesPerElement=12,xn("StructArrayLayout2i2i2i12",Bh);class $u extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,x,w,T){const k=this.length;return this.resize(k+1),this.emplace(k,l,h,x,w,T)}emplace(l,h,x,w,T,k){const D=4*l,B=8*l;return this.float32[D+0]=h,this.float32[D+1]=x,this.float32[D+2]=w,this.int16[B+6]=T,this.int16[B+7]=k,l}}$u.prototype.bytesPerElement=16,xn("StructArrayLayout2f1f2i16",$u);class Ps extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,x,w,T,k){const D=this.length;return this.resize(D+1),this.emplace(D,l,h,x,w,T,k)}emplace(l,h,x,w,T,k,D){const B=16*l,Z=4*l,Y=8*l;return this.uint8[B+0]=h,this.uint8[B+1]=x,this.float32[Z+1]=w,this.float32[Z+2]=T,this.int16[Y+6]=k,this.int16[Y+7]=D,l}}Ps.prototype.bytesPerElement=16,xn("StructArrayLayout2ub2f2i16",Ps);class qi extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,x){const w=this.length;return this.resize(w+1),this.emplace(w,l,h,x)}emplace(l,h,x,w){const T=3*l;return this.uint16[T+0]=h,this.uint16[T+1]=x,this.uint16[T+2]=w,l}}qi.prototype.bytesPerElement=6,xn("StructArrayLayout3ui6",qi);class Hc extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,x,w,T,k,D,B,Z,Y,ee,oe,ue,me,ge,xe,Te){const Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,l,h,x,w,T,k,D,B,Z,Y,ee,oe,ue,me,ge,xe,Te)}emplace(l,h,x,w,T,k,D,B,Z,Y,ee,oe,ue,me,ge,xe,Te,Ue){const Ee=24*l,Re=12*l,qe=48*l;return this.int16[Ee+0]=h,this.int16[Ee+1]=x,this.uint16[Ee+2]=w,this.uint16[Ee+3]=T,this.uint32[Re+2]=k,this.uint32[Re+3]=D,this.uint32[Re+4]=B,this.uint16[Ee+10]=Z,this.uint16[Ee+11]=Y,this.uint16[Ee+12]=ee,this.float32[Re+7]=oe,this.float32[Re+8]=ue,this.uint8[qe+36]=me,this.uint8[qe+37]=ge,this.uint8[qe+38]=xe,this.uint32[Re+10]=Te,this.int16[Ee+22]=Ue,l}}Hc.prototype.bytesPerElement=48,xn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Hc);class Xd extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,x,w,T,k,D,B,Z,Y,ee,oe,ue,me,ge,xe,Te,Ue,Ee,Re,qe,Ge,dt,Lt,At,Vt,dn,Wt){const Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,l,h,x,w,T,k,D,B,Z,Y,ee,oe,ue,me,ge,xe,Te,Ue,Ee,Re,qe,Ge,dt,Lt,At,Vt,dn,Wt)}emplace(l,h,x,w,T,k,D,B,Z,Y,ee,oe,ue,me,ge,xe,Te,Ue,Ee,Re,qe,Ge,dt,Lt,At,Vt,dn,Wt,Rt){const bt=32*l,On=16*l;return this.int16[bt+0]=h,this.int16[bt+1]=x,this.int16[bt+2]=w,this.int16[bt+3]=T,this.int16[bt+4]=k,this.int16[bt+5]=D,this.int16[bt+6]=B,this.int16[bt+7]=Z,this.uint16[bt+8]=Y,this.uint16[bt+9]=ee,this.uint16[bt+10]=oe,this.uint16[bt+11]=ue,this.uint16[bt+12]=me,this.uint16[bt+13]=ge,this.uint16[bt+14]=xe,this.uint16[bt+15]=Te,this.uint16[bt+16]=Ue,this.uint16[bt+17]=Ee,this.uint16[bt+18]=Re,this.uint16[bt+19]=qe,this.uint16[bt+20]=Ge,this.uint16[bt+21]=dt,this.uint16[bt+22]=Lt,this.uint32[On+12]=At,this.float32[On+13]=Vt,this.float32[On+14]=dn,this.uint16[bt+30]=Wt,this.uint16[bt+31]=Rt,l}}Xd.prototype.bytesPerElement=64,xn("StructArrayLayout8i15ui1ul2f2ui64",Xd);class Yd extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.float32[1*l+0]=h,l}}Yd.prototype.bytesPerElement=4,xn("StructArrayLayout1f4",Yd);class yp extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,x){const w=this.length;return this.resize(w+1),this.emplace(w,l,h,x)}emplace(l,h,x,w){const T=3*l;return this.uint16[6*l+0]=h,this.float32[T+1]=x,this.float32[T+2]=w,l}}yp.prototype.bytesPerElement=12,xn("StructArrayLayout1ui2f12",yp);class ic extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,x){const w=this.length;return this.resize(w+1),this.emplace(w,l,h,x)}emplace(l,h,x,w){const T=4*l;return this.uint32[2*l+0]=h,this.uint16[T+2]=x,this.uint16[T+3]=w,l}}ic.prototype.bytesPerElement=8,xn("StructArrayLayout1ul2ui8",ic);class P extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h){const x=this.length;return this.resize(x+1),this.emplace(x,l,h)}emplace(l,h,x){const w=2*l;return this.uint16[w+0]=h,this.uint16[w+1]=x,l}}P.prototype.bytesPerElement=4,xn("StructArrayLayout2ui4",P);class c extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.uint16[1*l+0]=h,l}}c.prototype.bytesPerElement=2,xn("StructArrayLayout1ui2",c);class g extends br{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,x,w){const T=this.length;return this.resize(T+1),this.emplace(T,l,h,x,w)}emplace(l,h,x,w,T){const k=4*l;return this.float32[k+0]=h,this.float32[k+1]=x,this.float32[k+2]=w,this.float32[k+3]=T,l}}g.prototype.bytesPerElement=16,xn("StructArrayLayout4f16",g);class b extends ei{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new u(this.anchorPointX,this.anchorPointY)}}b.prototype.size=20;class C extends dg{get(l){return new b(this,l)}}xn("CollisionBoxArray",C);class I extends ei{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}I.prototype.size=48;class z extends Hc{get(l){return new I(this,l)}}xn("PlacedSymbolArray",z);class V extends ei{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}V.prototype.size=64;class G extends Xd{get(l){return new V(this,l)}}xn("SymbolInstanceArray",G);class J extends Yd{getoffsetX(l){return this.float32[1*l+0]}}xn("GlyphOffsetArray",J);class ie extends Hd{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}xn("SymbolLineVertexArray",ie);class de extends ei{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}de.prototype.size=12;class he extends yp{get(l){return new de(this,l)}}xn("TextAnchorOffsetArray",he);class ye extends ei{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ye.prototype.size=8;class Se extends ic{get(l){return new ye(this,l)}}xn("FeatureIndexArray",Se);class Ie extends nc{}class Le extends nc{}class De extends nc{}class Ve extends Lu{}class He extends jv{}class Fe extends Li{}class We extends rc{}class Je extends mp{}class Ze extends gp{}class rt extends ug{}class xt extends hg{}class ht extends Bh{}class mt extends Ps{}class gt extends qi{}class tn extends P{}const rn=Zi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Bt}=rn;class hn{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,h,x,w){const T=this.segments[this.segments.length-1];return l>hn.MAX_VERTEX_ARRAY_LENGTH&&Gt(`Max vertices per segment is ${hn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${hn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!T||T.vertexLength+l>hn.MAX_VERTEX_ARRAY_LENGTH||T.sortKey!==w?this.createNewSegment(h,x,w):T}createNewSegment(l,h,x){const w={vertexOffset:l.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0,vaos:{}};return x!==void 0&&(w.sortKey=x),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(w),w}getOrCreateLatestSegment(l,h,x){return this.prepareSegment(0,l,h,x)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const l of this.segments)for(const h in l.vaos)l.vaos[h].destroy()}static simpleSegment(l,h,x,w){return new hn([{vertexOffset:l,primitiveOffset:h,vertexLength:x,primitiveLength:w,vaos:{},sortKey:0}])}}function cr(f,l){return 256*(f=lt(Math.floor(f),0,255))+lt(Math.floor(l),0,255)}hn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xn("SegmentVector",hn);const ti=Zi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ci=Zi([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var xi,$i,hi,to={exports:{}},zi={exports:{}},ps={exports:{}},fo=(function(){if(hi)return to.exports;hi=1;var f=(xi||(xi=1,zi.exports=function(h,x){var w,T,k,D,B,Z,Y,ee;for(T=h.length-(w=3&h.length),k=x,B=3432918353,Z=461845907,ee=0;ee<T;)Y=255&h.charCodeAt(ee)|(255&h.charCodeAt(++ee))<<8|(255&h.charCodeAt(++ee))<<16|(255&h.charCodeAt(++ee))<<24,++ee,k=27492+(65535&(D=5*(65535&(k=(k^=Y=(65535&(Y=(Y=(65535&Y)*B+(((Y>>>16)*B&65535)<<16)&4294967295)<<15|Y>>>17))*Z+(((Y>>>16)*Z&65535)<<16)&4294967295)<<13|k>>>19))+((5*(k>>>16)&65535)<<16)&4294967295))+((58964+(D>>>16)&65535)<<16);switch(Y=0,w){case 3:Y^=(255&h.charCodeAt(ee+2))<<16;case 2:Y^=(255&h.charCodeAt(ee+1))<<8;case 1:k^=Y=(65535&(Y=(Y=(65535&(Y^=255&h.charCodeAt(ee)))*B+(((Y>>>16)*B&65535)<<16)&4294967295)<<15|Y>>>17))*Z+(((Y>>>16)*Z&65535)<<16)&4294967295}return k^=h.length,k=2246822507*(65535&(k^=k>>>16))+((2246822507*(k>>>16)&65535)<<16)&4294967295,k=3266489909*(65535&(k^=k>>>13))+((3266489909*(k>>>16)&65535)<<16)&4294967295,(k^=k>>>16)>>>0}),zi.exports),l=($i||($i=1,ps.exports=function(h,x){for(var w,T=h.length,k=x^T,D=0;T>=4;)w=1540483477*(65535&(w=255&h.charCodeAt(D)|(255&h.charCodeAt(++D))<<8|(255&h.charCodeAt(++D))<<16|(255&h.charCodeAt(++D))<<24))+((1540483477*(w>>>16)&65535)<<16),k=1540483477*(65535&k)+((1540483477*(k>>>16)&65535)<<16)^(w=1540483477*(65535&(w^=w>>>24))+((1540483477*(w>>>16)&65535)<<16)),T-=4,++D;switch(T){case 3:k^=(255&h.charCodeAt(D+2))<<16;case 2:k^=(255&h.charCodeAt(D+1))<<8;case 1:k=1540483477*(65535&(k^=255&h.charCodeAt(D)))+((1540483477*(k>>>16)&65535)<<16)}return k=1540483477*(65535&(k^=k>>>13))+((1540483477*(k>>>16)&65535)<<16),(k^=k>>>15)>>>0}),ps.exports);return to.exports=f,to.exports.murmur3=f,to.exports.murmur2=l,to.exports})(),po=d(fo);class ms{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,h,x,w){this.ids.push(Gc(l)),this.positions.push(h,x,w)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=Gc(l);let x=0,w=this.ids.length-1;for(;x<w;){const k=x+w>>1;this.ids[k]>=h?w=k:x=k+1}const T=[];for(;this.ids[x]===h;)T.push({index:this.positions[3*x],start:this.positions[3*x+1],end:this.positions[3*x+2]}),x++;return T}static serialize(l,h){const x=new Float64Array(l.ids),w=new Uint32Array(l.positions);return Xc(x,w,0,x.length-1),h&&h.push(x.buffer,w.buffer),{ids:x,positions:w}}static deserialize(l){const h=new ms;return h.ids=l.ids,h.positions=l.positions,h.indexed=!0,h}}function Gc(f){const l=+f;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:po(String(f))}function Xc(f,l,h,x){for(;h<x;){const w=f[h+x>>1];let T=h-1,k=x+1;for(;;){do T++;while(f[T]<w);do k--;while(f[k]>w);if(T>=k)break;oc(f,T,k),oc(l,3*T,3*k),oc(l,3*T+1,3*k+1),oc(l,3*T+2,3*k+2)}k-h<x-k?(Xc(f,l,h,k),h=k+1):(Xc(f,l,k+1,x),x=k)}}function oc(f,l,h){const x=f[l];f[l]=f[h],f[h]=x}xn("FeaturePositionMap",ms);class Ea{constructor(l,h){this.gl=l.gl,this.location=h}}class Kd extends Ea{constructor(l,h){super(l,h),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class vp extends Ea{constructor(l,h){super(l,h),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class sc extends Ea{constructor(l,h){super(l,h),this.current=mr.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const Aa=new Float32Array(16);function Ka(f){return[cr(255*f.r,255*f.g),cr(255*f.b,255*f.a)]}class kl{constructor(l,h,x){this.value=l,this.uniformNames=h.map((w=>`u_${w}`)),this.type=x}setUniform(l,h,x){l.set(x.constantOr(this.value))}getBinding(l,h,x){return this.type==="color"?new sc(l,h):new Kd(l,h)}}class El{constructor(l,h){this.uniformNames=h.map((x=>`u_${x}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=l.tlbr}setConstantDashPositions(l,h){this.dashTo=[0,l.y,l.height,l.width],this.dashFrom=[0,h.y,h.height,h.width]}setUniform(l,h,x,w){let T=null;w==="u_pattern_to"?T=this.patternTo:w==="u_pattern_from"?T=this.patternFrom:w==="u_dasharray_to"?T=this.dashTo:w==="u_dasharray_from"?T=this.dashFrom:w==="u_pixel_ratio_to"?T=this.pixelRatioTo:w==="u_pixel_ratio_from"&&(T=this.pixelRatioFrom),T!==null&&l.set(T)}getBinding(l,h,x){return x.substr(0,9)==="u_pattern"||x.substr(0,12)==="u_dasharray_"?new vp(l,h):new Kd(l,h)}}class oi{constructor(l,h,x,w){this.expression=l,this.type=x,this.maxValue=0,this.paintVertexAttributes=h.map((T=>({name:`a_${T}`,type:"Float32",components:x==="color"?2:1,offset:0}))),this.paintVertexArray=new w}populatePaintArray(l,h,x){const w=this.paintVertexArray.length,T=this.expression.evaluate(new ii(0,x),h,{},x.canonical,[],x.formattedSection);this.paintVertexArray.resize(l),this._setPaintValue(w,l,T)}updatePaintArray(l,h,x,w,T){const k=this.expression.evaluate(new ii(0,T),x,w);this._setPaintValue(l,h,k)}_setPaintValue(l,h,x){if(this.type==="color"){const w=Ka(x);for(let T=l;T<h;T++)this.paintVertexArray.emplace(T,w[0],w[1])}else{for(let w=l;w<h;w++)this.paintVertexArray.emplace(w,x);this.maxValue=Math.max(this.maxValue,Math.abs(x))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class _i{constructor(l,h,x,w,T,k){this.expression=l,this.uniformNames=h.map((D=>`u_${D}_t`)),this.type=x,this.useIntegerZoom=w,this.zoom=T,this.maxValue=0,this.paintVertexAttributes=h.map((D=>({name:`a_${D}`,type:"Float32",components:x==="color"?4:2,offset:0}))),this.paintVertexArray=new k}populatePaintArray(l,h,x){const w=this.expression.evaluate(new ii(this.zoom,x),h,{},x.canonical,[],x.formattedSection),T=this.expression.evaluate(new ii(this.zoom+1,x),h,{},x.canonical,[],x.formattedSection),k=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(k,l,w,T)}updatePaintArray(l,h,x,w,T){const k=this.expression.evaluate(new ii(this.zoom,T),x,w),D=this.expression.evaluate(new ii(this.zoom+1,T),x,w);this._setPaintValue(l,h,k,D)}_setPaintValue(l,h,x,w){if(this.type==="color"){const T=Ka(x),k=Ka(w);for(let D=l;D<h;D++)this.paintVertexArray.emplace(D,T[0],T[1],k[0],k[1])}else{for(let T=l;T<h;T++)this.paintVertexArray.emplace(T,x,w);this.maxValue=Math.max(this.maxValue,Math.abs(x),Math.abs(w))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,h){const x=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,w=lt(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);l.set(w)}getBinding(l,h,x){return new Kd(l,h)}}class No{constructor(l,h,x,w,T,k){this.expression=l,this.type=h,this.useIntegerZoom=x,this.zoom=w,this.layerId=k,this.zoomInPaintVertexArray=new T,this.zoomOutPaintVertexArray=new T}populatePaintArray(l,h,x){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(w,l,this.getPositionIds(h),x)}updatePaintArray(l,h,x,w,T){this._setPaintValues(l,h,this.getPositionIds(x),T)}_setPaintValues(l,h,x,w){const T=this.getPositions(w);if(!T||!x)return;const k=T[x.min],D=T[x.mid],B=T[x.max];if(k&&D&&B)for(let Z=l;Z<h;Z++)this.emplace(this.zoomInPaintVertexArray,Z,D,k),this.emplace(this.zoomOutPaintVertexArray,Z,D,B)}upload(l){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const h=this.getVertexAttributes();this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,h,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,h,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class qo extends No{getPositions(l){return l.imagePositions}getPositionIds(l){return l.patterns&&l.patterns[this.layerId]}getVertexAttributes(){return ti.members}emplace(l,h,x,w){l.emplace(h,x.tlbr[0],x.tlbr[1],x.tlbr[2],x.tlbr[3],w.tlbr[0],w.tlbr[1],w.tlbr[2],w.tlbr[3],x.pixelRatio,w.pixelRatio)}}class Yy extends No{getPositions(l){return l.dashPositions}getPositionIds(l){return l.dashes&&l.dashes[this.layerId]}getVertexAttributes(){return Ci.members}emplace(l,h,x,w){l.emplace(h,0,x.y,x.height,x.width,0,w.y,w.height,w.width)}}class Ky{constructor(l,h,x){this.binders={},this._buffers=[];const w=[];for(const T in l.paint._values){if(!x(T))continue;const k=l.paint.get(T);if(!(k instanceof Ya&&bl(k.property.specification)))continue;const D=Ob(T,l.type),B=k.value,Z=k.property.specification.type,Y=k.property.useIntegerZoom,ee=k.property.specification["property-type"],oe=ee==="cross-faded"||ee==="cross-faded-data-driven";if(B.kind==="constant")this.binders[T]=oe?new El(B.value,D):new kl(B.value,D,Z),w.push(`/u_${T}`);else if(B.kind==="source"||oe){const ue=jh(T,Z,"source");this.binders[T]=oe?T==="line-dasharray"?new Yy(B,Z,Y,h,ue,l.id):new qo(B,Z,Y,h,ue,l.id):new oi(B,D,Z,ue),w.push(`/a_${T}`)}else{const ue=jh(T,Z,"composite");this.binders[T]=new _i(B,D,Z,Y,h,ue),w.push(`/z_${T}`)}}this.cacheKey=w.sort().join("")}getMaxValue(l){const h=this.binders[l];return h instanceof oi||h instanceof _i?h.maxValue:0}populatePaintArrays(l,h,x){for(const w in this.binders){const T=this.binders[w];(T instanceof oi||T instanceof _i||T instanceof No)&&T.populatePaintArray(l,h,x)}}setConstantPatternPositions(l,h){for(const x in this.binders){const w=this.binders[x];w instanceof El&&w.setConstantPatternPositions(l,h)}}setConstantDashPositions(l,h){for(const x in this.binders){const w=this.binders[x];w instanceof El&&w.setConstantDashPositions(l,h)}}updatePaintArrays(l,h,x,w,T){let k=!1;for(const D in l){const B=h.getPositions(D);for(const Z of B){const Y=x.feature(Z.index);for(const ee in this.binders){const oe=this.binders[ee];if((oe instanceof oi||oe instanceof _i||oe instanceof No)&&oe.expression.isStateDependent===!0){const ue=w.paint.get(ee);oe.expression=ue.value,oe.updatePaintArray(Z.start,Z.end,Y,l[D],T),k=!0}}}}return k}defines(){const l=[];for(const h in this.binders){const x=this.binders[h];(x instanceof kl||x instanceof El)&&l.push(...x.uniformNames.map((w=>`#define HAS_UNIFORM_${w}`)))}return l}getBinderAttributes(){const l=[];for(const h in this.binders){const x=this.binders[h];if(x instanceof oi||x instanceof _i)for(let w=0;w<x.paintVertexAttributes.length;w++)l.push(x.paintVertexAttributes[w].name);else if(x instanceof No){const w=x.getVertexAttributes();for(const T of w)l.push(T.name)}}return l}getBinderUniforms(){const l=[];for(const h in this.binders){const x=this.binders[h];if(x instanceof kl||x instanceof El||x instanceof _i)for(const w of x.uniformNames)l.push(w)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,h){const x=[];for(const w in this.binders){const T=this.binders[w];if(T instanceof kl||T instanceof El||T instanceof _i){for(const k of T.uniformNames)if(h[k]){const D=T.getBinding(l,h[k],k);x.push({name:k,property:w,binding:D})}}}return x}setUniforms(l,h,x,w){for(const{name:T,property:k,binding:D}of h)this.binders[k].setUniform(D,w,x.get(k),T)}updatePaintBuffers(l){this._buffers=[];for(const h in this.binders){const x=this.binders[h];if(l&&x instanceof No){const w=l.fromScale===2?x.zoomInPaintVertexBuffer:x.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(x instanceof oi||x instanceof _i)&&x.paintVertexBuffer&&this._buffers.push(x.paintVertexBuffer)}}upload(l){for(const h in this.binders){const x=this.binders[h];(x instanceof oi||x instanceof _i||x instanceof No)&&x.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const h=this.binders[l];(h instanceof oi||h instanceof _i||h instanceof No)&&h.destroy()}}}class Fh{constructor(l,h,x=()=>!0){this.programConfigurations={};for(const w of l)this.programConfigurations[w.id]=new Ky(w,h,x);this.needsUpload=!1,this._featureMap=new ms,this._bufferOffset=0}populatePaintArrays(l,h,x,w){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(l,h,w);h.id!==void 0&&this._featureMap.add(h.id,x,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,h,x,w){for(const T of x)this.needsUpload=this.programConfigurations[T.id].updatePaintArrays(l,this._featureMap,h,T,w)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function Ob(f,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${l}-`,"").replace(/-/g,"_")]}function jh(f,l,h){const x={color:{source:Li,composite:g},number:{source:Yd,composite:Li}},w=(function(T){return{"line-pattern":{source:We,composite:We},"fill-pattern":{source:We,composite:We},"fill-extrusion-pattern":{source:We,composite:We},"line-dasharray":{source:Je,composite:Je}}[T]})(f);return w&&w[h]||x[l][h]}xn("ConstantBinder",kl),xn("CrossFadedConstantBinder",El),xn("SourceExpressionBinder",oi),xn("CrossFadedPatternBinder",qo),xn("CrossFadedDasharrayBinder",Yy),xn("CompositeExpressionBinder",_i),xn("ProgramConfiguration",Ky,{omit:["_buffers"]}),xn("ProgramConfigurationSet",Fh);const Jy=Math.pow(2,14)-1,zu=-Jy-1;function Nu(f){const l=Qe/f.extent,h=f.loadGeometry();for(let x=0;x<h.length;x++){const w=h[x];for(let T=0;T<w.length;T++){const k=w[T],D=Math.round(k.x*l),B=Math.round(k.y*l);k.x=lt(D,zu,Jy),k.y=lt(B,zu,Jy),(D<k.x||D>k.x+1||B<k.y||B>k.y+1)&&Gt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function ac(f,l){return{type:f.type,id:f.id,properties:f.properties,geometry:l?Nu(f):[]}}const e0=-32768;function fg(f,l,h,x,w){f.emplaceBack(e0+8*l+x,e0+8*h+w)}class pg{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new Le,this.indexArray=new gt,this.segments=new hn,this.programConfigurations=new Fh(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(l,h,x){const w=this.layers[0],T=[];let k=null,D=!1,B=w.type==="heatmap";if(w.type==="circle"){const Y=w;k=Y.layout.get("circle-sort-key"),D=!k.isConstant(),B=B||Y.paint.get("circle-pitch-alignment")==="map"}const Z=B?h.subdivisionGranularity.circle:1;for(const{feature:Y,id:ee,index:oe,sourceLayerIndex:ue}of l){const me=this.layers[0]._featureFilter.needGeometry,ge=ac(Y,me);if(!this.layers[0]._featureFilter.filter(new ii(this.zoom),ge,x))continue;const xe=D?k.evaluate(ge,{},x):void 0,Te={id:ee,properties:Y.properties,type:Y.type,sourceLayerIndex:ue,index:oe,geometry:me?ge.geometry:Nu(Y),patterns:{},sortKey:xe};T.push(Te)}D&&T.sort(((Y,ee)=>Y.sortKey-ee.sortKey));for(const Y of T){const{geometry:ee,index:oe,sourceLayerIndex:ue}=Y,me=l[oe].feature;this.addFeature(Y,ee,oe,x,Z),h.featureIndex.insert(me,ee,oe,ue,this.index)}}update(l,h,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,{imagePositions:x})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Bt),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,h,x,w,T=1){let k;switch(T){case 1:k=[0,7];break;case 3:k=[0,2,5,7];break;case 5:k=[0,1,3,4,6,7];break;case 7:k=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${T}; valid values are 1, 3, 5, 7.`)}const D=k.length;for(const B of h)for(const Z of B){const Y=Z.x,ee=Z.y;if(Y<0||Y>=Qe||ee<0||ee>=Qe)continue;const oe=this.segments.prepareSegment(D*D,this.layoutVertexArray,this.indexArray,l.sortKey),ue=oe.vertexLength;for(let me=0;me<D;me++)for(let ge=0;ge<D;ge++)fg(this.layoutVertexArray,Y,ee,k[ge],k[me]);for(let me=0;me<D-1;me++)for(let ge=0;ge<D-1;ge++){const xe=ue+me*D+ge,Te=ue+(me+1)*D+ge;this.indexArray.emplaceBack(xe,Te+1,xe+1),this.indexArray.emplaceBack(xe,Te,Te+1)}oe.vertexLength+=D*D,oe.primitiveLength+=(D-1)*(D-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,{imagePositions:{},canonical:w})}}function mg(f,l){for(let h=0;h<f.length;h++)if(Vh(l,f[h]))return!0;for(let h=0;h<l.length;h++)if(Vh(f,l[h]))return!0;return!!Ms(f,l)}function Sb(f,l,h){return!!Vh(f,l)||!!Tb(l,f,h)}function Cb(f,l){if(f.length===1)return TS(l,f[0]);for(let h=0;h<l.length;h++){const x=l[h];for(let w=0;w<x.length;w++)if(Vh(f,x[w]))return!0}for(let h=0;h<f.length;h++)if(TS(l,f[h]))return!0;for(let h=0;h<l.length;h++)if(Ms(f,l[h]))return!0;return!1}function gs(f,l,h){if(f.length>1){if(Ms(f,l))return!0;for(let x=0;x<l.length;x++)if(Tb(l[x],f,h))return!0}for(let x=0;x<f.length;x++)if(Tb(f[x],l,h))return!0;return!1}function Ms(f,l){if(f.length===0||l.length===0)return!1;for(let h=0;h<f.length-1;h++){const x=f[h],w=f[h+1];for(let T=0;T<l.length-1;T++)if(vE(x,w,l[T],l[T+1]))return!0}return!1}function vE(f,l,h,x){return Jt(f,h,x)!==Jt(l,h,x)&&Jt(f,l,h)!==Jt(f,l,x)}function Tb(f,l,h){const x=h*h;if(l.length===1)return f.distSqr(l[0])<x;for(let w=1;w<l.length;w++)if(CS(f,l[w-1],l[w])<x)return!0;return!1}function CS(f,l,h){const x=l.distSqr(h);if(x===0)return f.distSqr(l);const w=((f.x-l.x)*(h.x-l.x)+(f.y-l.y)*(h.y-l.y))/x;return f.distSqr(w<0?l:w>1?h:h.sub(l)._mult(w)._add(l))}function TS(f,l){let h,x,w,T=!1;for(let k=0;k<f.length;k++){h=f[k];for(let D=0,B=h.length-1;D<h.length;B=D++)x=h[D],w=h[B],x.y>l.y!=w.y>l.y&&l.x<(w.x-x.x)*(l.y-x.y)/(w.y-x.y)+x.x&&(T=!T)}return T}function Vh(f,l){let h=!1;for(let x=0,w=f.length-1;x<f.length;w=x++){const T=f[x],k=f[w];T.y>l.y!=k.y>l.y&&l.x<(k.x-T.x)*(l.y-T.y)/(k.y-T.y)+T.x&&(h=!h)}return h}function xE(f,l,h){const x=h[0],w=h[2];if(f.x<x.x&&l.x<x.x||f.x>w.x&&l.x>w.x||f.y<x.y&&l.y<x.y||f.y>w.y&&l.y>w.y)return!1;const T=Jt(f,l,h[0]);return T!==Jt(f,l,h[1])||T!==Jt(f,l,h[2])||T!==Jt(f,l,h[3])}function Jd(f,l,h){const x=l.paint.get(f).value;return x.kind==="constant"?x.value:h.programConfigurations.get(l.id).getMaxValue(f)}function Vv(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function kb(f,l,h,x,w){if(!l[0]&&!l[1])return f;const T=u.convert(l)._mult(w);h==="viewport"&&T._rotate(-x);const k=[];for(let D=0;D<f.length;D++)k.push(f[D].sub(T));return k}function Eb(f){const l=[];for(let h=0;h<f.length;h++){const x=f[h],w=l.at(-1);(h===0||w&&!x.equals(w))&&l.push(x)}return l}function kS({queryGeometry:f,size:l},h){return Sb(f,h,l)}function _E({queryGeometry:f,size:l,transform:h,unwrappedTileID:x,getElevation:w},T){return Sb(f,T,l*(h.projectTileCoordinates(T.x,T.y,x,w).signedDistanceFromCamera/h.cameraToCenterDistance))}function bE({queryGeometry:f,size:l,transform:h,unwrappedTileID:x,getElevation:w},T){const k=h.projectTileCoordinates(T.x,T.y,x,w).signedDistanceFromCamera,D=l*(h.cameraToCenterDistance/k);return Sb(f,Qv(T,h,x,w),D)}function wE({queryGeometry:f,size:l,transform:h,unwrappedTileID:x,getElevation:w},T){return Sb(f,Qv(T,h,x,w),l)}function Ab({queryGeometry:f,size:l,transform:h,unwrappedTileID:x,getElevation:w,pitchAlignment:T="map",pitchScale:k="map"},D){const B=T==="map"?k==="map"?kS:_E:k==="map"?bE:wE,Z={queryGeometry:f,size:l,transform:h,unwrappedTileID:x,getElevation:w};for(const Y of D)for(const ee of Y)if(B(Z,ee))return!0;return!1}function Qv(f,l,h,x){const w=l.projectTileCoordinates(f.x,f.y,h,x).point;return new u((.5*w.x+.5)*l.width,(.5*-w.y+.5)*l.height)}let Pb,ES;xn("CircleBucket",pg,{omit:["layers"]});var AS={get paint(){return ES=ES||new To({"circle-radius":new Rn(ut.paint_circle["circle-radius"]),"circle-color":new Rn(ut.paint_circle["circle-color"]),"circle-blur":new Rn(ut.paint_circle["circle-blur"]),"circle-opacity":new Rn(ut.paint_circle["circle-opacity"]),"circle-translate":new wn(ut.paint_circle["circle-translate"]),"circle-translate-anchor":new wn(ut.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new wn(ut.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new wn(ut.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Rn(ut.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Rn(ut.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Rn(ut.paint_circle["circle-stroke-opacity"])})},get layout(){return Pb=Pb||new To({"circle-sort-key":new Rn(ut.layout_circle["circle-sort-key"])})}};class Mb extends eo{constructor(l,h){super(l,AS,h)}createBucket(l){return new pg(l)}queryRadius(l){const h=l;return Jd("circle-radius",this,h)+Jd("circle-stroke-width",this,h)+Vv(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:h,featureState:x,geometry:w,transform:T,pixelsToTileUnits:k,unwrappedTileID:D,getElevation:B}){const Z=kb(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-T.bearingInRadians,k),Y=this.paint.get("circle-radius").evaluate(h,x)+this.paint.get("circle-stroke-width").evaluate(h,x),ee=this.paint.get("circle-pitch-scale"),oe=this.paint.get("circle-pitch-alignment");let ue,me;return oe==="map"?(ue=Z,me=Y*k):(ue=(function(ge,xe,Te,Ue){return ge.map((Ee=>Qv(Ee,xe,Te,Ue)))})(Z,T,D,B),me=Y),Ab({queryGeometry:ue,size:me,transform:T,unwrappedTileID:D,getElevation:B,pitchAlignment:oe,pitchScale:ee},w)}}class Rb extends pg{}let PS;xn("HeatmapBucket",Rb,{omit:["layers"]});var MS={get paint(){return PS=PS||new To({"heatmap-radius":new Rn(ut.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Rn(ut.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new wn(ut.paint_heatmap["heatmap-intensity"]),"heatmap-color":new lg(ut.paint_heatmap["heatmap-color"]),"heatmap-opacity":new wn(ut.paint_heatmap["heatmap-opacity"])})}};function Ib(f,{width:l,height:h},x,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==l*h*x)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${l*h*x}`)}else w=new Uint8Array(l*h*x);return f.width=l,f.height=h,f.data=w,f}function Qh(f,{width:l,height:h},x){if(l===f.width&&h===f.height)return;const w=Ib({},{width:l,height:h},x);Uv(f,w,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,l),height:Math.min(f.height,h)},x),f.width=l,f.height=h,f.data=w.data}function Uv(f,l,h,x,w,T){if(w.width===0||w.height===0)return l;if(w.width>f.width||w.height>f.height||h.x>f.width-w.width||h.y>f.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>l.width||w.height>l.height||x.x>l.width-w.width||x.y>l.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const k=f.data,D=l.data;if(k===D)throw new Error("srcData equals dstData, so image is already copied");for(let B=0;B<w.height;B++){const Z=((h.y+B)*f.width+h.x)*T,Y=((x.y+B)*l.width+x.x)*T;for(let ee=0;ee<w.width*T;ee++)D[Y+ee]=k[Z+ee]}return l}class Zv{constructor(l,h){Ib(this,l,1,h)}resize(l){Qh(this,l,1)}clone(){return new Zv({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,h,x,w,T){Uv(l,h,x,w,T,1)}}class Pa{constructor(l,h){Ib(this,l,4,h)}resize(l){Qh(this,l,4)}replace(l,h){h?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Pa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,h,x,w,T){Uv(l,h,x,w,T,4)}setPixel(l,h,x){const w=4*(l*this.width+h);this.data[w+0]=Math.round(255*x.r/x.a),this.data[w+1]=Math.round(255*x.g/x.a),this.data[w+2]=Math.round(255*x.b/x.a),this.data[w+3]=Math.round(255*x.a)}}function Uh(f){const l={},h=f.resolution||256,x=f.clips?f.clips.length:1,w=f.image||new Pa({width:h,height:x});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const T=(k,D,B)=>{l[f.evaluationKey]=B;const Z=f.expression.evaluate(l);w.setPixel(k/4/h,D/4,Z)};if(f.clips)for(let k=0,D=0;k<x;++k,D+=4*h)for(let B=0,Z=0;B<h;B++,Z+=4){const Y=B/(h-1),{start:ee,end:oe}=f.clips[k];T(D,Z,ee*(1-Y)+oe*Y)}else for(let k=0,D=0;k<h;k++,D+=4)T(0,D,k/(h-1));return w}xn("AlphaImage",Zv),xn("RGBAImage",Pa);const qv="big-fb";class OE extends eo{createBucket(l){return new Rb(l)}constructor(l,h){super(l,MS,h),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Uh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(qv)&&this.heatmapFbos.delete(qv)}queryRadius(l){return Jd("heatmap-radius",this,l)}queryIntersectsFeature({queryGeometry:l,feature:h,featureState:x,geometry:w,transform:T,pixelsToTileUnits:k,unwrappedTileID:D,getElevation:B}){return Ab({queryGeometry:l,size:this.paint.get("heatmap-radius").evaluate(h,x)*k,transform:T,unwrappedTileID:D,getElevation:B},w)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let Wv;var Hv={get paint(){return Wv=Wv||new To({"hillshade-illumination-direction":new wn(ut.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new wn(ut.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new wn(ut.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new wn(ut.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new wn(ut.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new wn(ut.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new wn(ut.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new wn(ut.paint_hillshade["hillshade-method"])})}};class mo extends eo{constructor(l,h){super(l,Hv,h),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,h=this.paint.get("hillshade-illumination-altitude").values,x=this.paint.get("hillshade-highlight-color").values,w=this.paint.get("hillshade-shadow-color").values;const T=Math.max(l.length,h.length,x.length,w.length);l=l.concat(Array(T-l.length).fill(l.at(-1))),h=h.concat(Array(T-h.length).fill(h.at(-1))),x=x.concat(Array(T-x.length).fill(x.at(-1))),w=w.concat(Array(T-w.length).fill(w.at(-1)));const k=h.map(kt);return{directionRadians:l.map(kt),altitudeRadians:k,shadowColor:w,highlightColor:x}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let SE;var SD={get paint(){return SE=SE||new To({"color-relief-opacity":new wn(ut["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new lg(ut["paint_color-relief"]["color-relief-color"])})}};class Db{constructor(l,h,x,w){this.context=l,this.format=x,this.texture=l.gl.createTexture(),this.update(h,w)}update(l,h,x){const{width:w,height:T}=l,k=!(this.size&&this.size[0]===w&&this.size[1]===T||x),{context:D}=this,{gl:B}=D;if(this.useMipmap=!!(h&&h.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),D.pixelStoreUnpackFlipY.set(!1),D.pixelStoreUnpack.set(1),D.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!h||h.premultiply!==!1)),k)this.size=[w,T],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Cn(l)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,l):B.texImage2D(B.TEXTURE_2D,0,this.format,w,T,0,this.format,B.UNSIGNED_BYTE,l.data);else{const{x:Z,y:Y}=x||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Cn(l)?B.texSubImage2D(B.TEXTURE_2D,0,Z,Y,B.RGBA,B.UNSIGNED_BYTE,l):B.texSubImage2D(B.TEXTURE_2D,0,Z,Y,w,T,B.RGBA,B.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D),D.pixelStoreUnpackFlipY.setDefault(),D.pixelStoreUnpack.setDefault(),D.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,h,x){const{context:w}=this,{gl:T}=w;T.bindTexture(T.TEXTURE_2D,this.texture),x!==T.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(x=T.LINEAR),l!==this.filter&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,l),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,x||l),this.filter=l),h!==this.wrap&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,h),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class t0{constructor(l,h,x,w=1,T=1,k=1,D=0){if(this.uid=l,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(x&&!["mapbox","terrarium","custom"].includes(x))return void Gt(`"${x}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const B=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),x){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=w,this.greenFactor=T,this.blueFactor=k,this.baseShift=D;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Z=0;Z<B;Z++)this.data[this._idx(-1,Z)]=this.data[this._idx(0,Z)],this.data[this._idx(B,Z)]=this.data[this._idx(B-1,Z)],this.data[this._idx(Z,-1)]=this.data[this._idx(Z,0)],this.data[this._idx(Z,B)]=this.data[this._idx(Z,B-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(B,-1)]=this.data[this._idx(B-1,0)],this.data[this._idx(-1,B)]=this.data[this._idx(0,B-1)],this.data[this._idx(B,B)]=this.data[this._idx(B-1,B-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Z=0;Z<B;Z++)for(let Y=0;Y<B;Y++){const ee=this.get(Z,Y);ee>this.max&&(this.max=ee),ee<this.min&&(this.min=ee)}}get(l,h){const x=new Uint8Array(this.data.buffer),w=4*this._idx(l,h);return this.unpack(x[w],x[w+1],x[w+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,h){if(l<-1||l>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${l}, y: ${h}, dim: ${this.dim}`);return(h+1)*this.stride+(l+1)}unpack(l,h,x){return l*this.redFactor+h*this.greenFactor+x*this.blueFactor-this.baseShift}pack(l){return ef(l,this.getUnpackVector())}getPixels(){return new Pa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,h,x){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let w=h*this.dim,T=h*this.dim+this.dim,k=x*this.dim,D=x*this.dim+this.dim;switch(h){case-1:w=T-1;break;case 1:T=w+1}switch(x){case-1:k=D-1;break;case 1:D=k+1}const B=-h*this.dim,Z=-x*this.dim;for(let Y=k;Y<D;Y++)for(let ee=w;ee<T;ee++)this.data[this._idx(ee,Y)]=l.data[this._idx(ee+B,Y+Z)]}}function ef(f,l){const h=l[0],x=l[1],w=l[2],T=l[3],k=Math.min(h,x,w),D=Math.round((f+T)/k);return{r:Math.floor(D*k/h)%256,g:Math.floor(D*k/x)%256,b:Math.floor(D*k/w)%256}}xn("DEMData",t0);class CE extends eo{constructor(l,h){super(l,SD,h)}_createColorRamp(l){const h={elevationStops:[],colorStops:[]},x=this._transitionablePaint._values["color-relief-color"].value.expression;if(x instanceof ga&&x._styleExpression.expression instanceof pa){this.colorRampExpression=x;const k=x._styleExpression.expression;h.elevationStops=k.labels,h.colorStops=[];for(const D of h.elevationStops)h.colorStops.push(k.evaluate({globals:{elevation:D}}))}if(h.elevationStops.length<1&&(h.elevationStops=[0],h.colorStops=[mr.transparent]),h.elevationStops.length<2&&(h.elevationStops.push(h.elevationStops[0]+1),h.colorStops.push(h.colorStops[0])),h.elevationStops.length<=l)return h;const w={elevationStops:[],colorStops:[]},T=(h.elevationStops.length-1)/(l-1);for(let k=0;k<h.elevationStops.length-.5;k+=T)w.elevationStops.push(h.elevationStops[Math.round(k)]),w.colorStops.push(h.colorStops[Math.round(k)]);return Gt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${l}, provided: ${h.elevationStops.length}`),w}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(l,h,x){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const w=this._createColorRamp(h),T=new Pa({width:w.colorStops.length,height:1}),k=new Pa({width:w.colorStops.length,height:1});for(let D=0;D<w.elevationStops.length;D++){const B=ef(w.elevationStops[D],x);k.setPixel(0,D,new mr(B.r/255,B.g/255,B.b/255,1)),T.setPixel(0,D,w.colorStops[D])}return this.colorRampTextures={elevationTexture:new Db(l,k,l.gl.RGBA),colorTexture:new Db(l,T,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const TE=Zi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gv}=TE;function lc(f,l,h){const x=h.patternDependencies;let w=!1;for(const T of l){const k=T.paint.get(`${f}-pattern`);k.isConstant()||(w=!0);const D=k.constantOr(null);D&&(w=!0,x[D.to]=!0,x[D.from]=!0)}return w}function Lb(f,l,h,x,w){const{zoom:T}=x,k=w.patternDependencies;for(const D of l){const B=D.paint.get(`${f}-pattern`).value;if(B.kind!=="constant"){let Z=B.evaluate({zoom:T-1},h,{},w.availableImages),Y=B.evaluate({zoom:T},h,{},w.availableImages),ee=B.evaluate({zoom:T+1},h,{},w.availableImages);Z=Z&&Z.name?Z.name:Z,Y=Y&&Y.name?Y.name:Y,ee=ee&&ee.name?ee.name:ee,k[Z]=!0,k[Y]=!0,k[ee]=!0,h.patterns[D.id]={min:Z,mid:Y,max:ee}}}return h}function $b(f,l,h,x,w){let T;if(w===(function(k,D,B,Z){let Y=0;for(let ee=D,oe=B-Z;ee<B;ee+=Z)Y+=(k[oe]-k[ee])*(k[ee+1]+k[oe+1]),oe=ee;return Y})(f,l,h,x)>0)for(let k=l;k<h;k+=x)T=Ja(k/x|0,f[k],f[k+1],T);else for(let k=h-x;k>=l;k-=x)T=Ja(k/x|0,f[k],f[k+1],T);return T&&Al(T,T.next)&&(el(T),T=T.next),T}function xp(f,l){if(!f)return f;l||(l=f);let h,x=f;do if(h=!1,x.steiner||!Al(x,x.next)&&Wr(x.prev,x,x.next)!==0)x=x.next;else{if(el(x),x=l=x.prev,x===x.next)break;h=!0}while(h||x!==l);return l}function gg(f,l,h,x,w,T,k){if(!f)return;!k&&T&&(function(B,Z,Y,ee){let oe=B;do oe.z===0&&(oe.z=vs(oe.x,oe.y,Z,Y,ee)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==B);oe.prevZ.nextZ=null,oe.prevZ=null,(function(ue){let me,ge=1;do{let xe,Te=ue;ue=null;let Ue=null;for(me=0;Te;){me++;let Ee=Te,Re=0;for(let Ge=0;Ge<ge&&(Re++,Ee=Ee.nextZ,Ee);Ge++);let qe=ge;for(;Re>0||qe>0&&Ee;)Re!==0&&(qe===0||!Ee||Te.z<=Ee.z)?(xe=Te,Te=Te.nextZ,Re--):(xe=Ee,Ee=Ee.nextZ,qe--),Ue?Ue.nextZ=xe:ue=xe,xe.prevZ=Ue,Ue=xe;Te=Ee}Ue.nextZ=null,ge*=2}while(me>1)})(oe)})(f,x,w,T);let D=f;for(;f.prev!==f.next;){const B=f.prev,Z=f.next;if(T?zb(f,x,w,T):RS(f))l.push(B.i,f.i,Z.i),el(f),f=Z.next,D=Z.next;else if((f=Z)===D){k?k===1?gg(f=kE(xp(f),l),l,h,x,w,T,2):k===2&&tf(f,l,h,x,w,T):gg(xp(f),l,h,x,w,T,1);break}}}function RS(f){const l=f.prev,h=f,x=f.next;if(Wr(l,h,x)>=0)return!1;const w=l.x,T=h.x,k=x.x,D=l.y,B=h.y,Z=x.y,Y=Math.min(w,T,k),ee=Math.min(D,B,Z),oe=Math.max(w,T,k),ue=Math.max(D,B,Z);let me=x.next;for(;me!==l;){if(me.x>=Y&&me.x<=oe&&me.y>=ee&&me.y<=ue&&n0(w,D,T,B,k,Z,me.x,me.y)&&Wr(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function zb(f,l,h,x){const w=f.prev,T=f,k=f.next;if(Wr(w,T,k)>=0)return!1;const D=w.x,B=T.x,Z=k.x,Y=w.y,ee=T.y,oe=k.y,ue=Math.min(D,B,Z),me=Math.min(Y,ee,oe),ge=Math.max(D,B,Z),xe=Math.max(Y,ee,oe),Te=vs(ue,me,l,h,x),Ue=vs(ge,xe,l,h,x);let Ee=f.prevZ,Re=f.nextZ;for(;Ee&&Ee.z>=Te&&Re&&Re.z<=Ue;){if(Ee.x>=ue&&Ee.x<=ge&&Ee.y>=me&&Ee.y<=xe&&Ee!==w&&Ee!==k&&n0(D,Y,B,ee,Z,oe,Ee.x,Ee.y)&&Wr(Ee.prev,Ee,Ee.next)>=0||(Ee=Ee.prevZ,Re.x>=ue&&Re.x<=ge&&Re.y>=me&&Re.y<=xe&&Re!==w&&Re!==k&&n0(D,Y,B,ee,Z,oe,Re.x,Re.y)&&Wr(Re.prev,Re,Re.next)>=0))return!1;Re=Re.nextZ}for(;Ee&&Ee.z>=Te;){if(Ee.x>=ue&&Ee.x<=ge&&Ee.y>=me&&Ee.y<=xe&&Ee!==w&&Ee!==k&&n0(D,Y,B,ee,Z,oe,Ee.x,Ee.y)&&Wr(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.prevZ}for(;Re&&Re.z<=Ue;){if(Re.x>=ue&&Re.x<=ge&&Re.y>=me&&Re.y<=xe&&Re!==w&&Re!==k&&n0(D,Y,B,ee,Z,oe,Re.x,Re.y)&&Wr(Re.prev,Re,Re.next)>=0)return!1;Re=Re.nextZ}return!0}function kE(f,l){let h=f;do{const x=h.prev,w=h.next.next;!Al(x,w)&&LS(x,h,h.next,w)&&Kv(x,w)&&Kv(w,x)&&(l.push(x.i,h.i,w.i),el(h),el(h.next),h=f=w),h=h.next}while(h!==f);return xp(h)}function tf(f,l,h,x,w,T){let k=f;do{let D=k.next.next;for(;D!==k.prev;){if(k.i!==D.i&&ko(k,D)){let B=Jv(k,D);return k=xp(k,k.next),B=xp(B,B.next),gg(k,l,h,x,w,T,0),void gg(B,l,h,x,w,T,0)}D=D.next}k=k.next}while(k!==f)}function ys(f,l){let h=f.x-l.x;return h===0&&(h=f.y-l.y,h===0)&&(h=(f.next.y-f.y)/(f.next.x-f.x)-(l.next.y-l.y)/(l.next.x-l.x)),h}function IS(f,l){const h=(function(w,T){let k=T;const D=w.x,B=w.y;let Z,Y=-1/0;if(Al(w,k))return k;do{if(Al(w,k.next))return k.next;if(B<=k.y&&B>=k.next.y&&k.next.y!==k.y){const ge=k.x+(B-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(ge<=D&&ge>Y&&(Y=ge,Z=k.x<k.next.x?k:k.next,ge===D))return Z}k=k.next}while(k!==T);if(!Z)return null;const ee=Z,oe=Z.x,ue=Z.y;let me=1/0;k=Z;do{if(D>=k.x&&k.x>=oe&&D!==k.x&&DS(B<ue?D:Y,B,oe,ue,B<ue?Y:D,B,k.x,k.y)){const ge=Math.abs(B-k.y)/(D-k.x);Kv(k,w)&&(ge<me||ge===me&&(k.x>Z.x||k.x===Z.x&&EE(Z,k)))&&(Z=k,me=ge)}k=k.next}while(k!==ee);return Z})(f,l);if(!h)return l;const x=Jv(h,f);return xp(x,x.next),xp(h,h.next)}function EE(f,l){return Wr(f.prev,f,l.prev)<0&&Wr(l.next,f,f.next)<0}function vs(f,l,h,x,w){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-h)*w|0)|f<<8))|f<<4))|f<<2))|f<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-x)*w|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function CD(f){let l=f,h=f;do(l.x<h.x||l.x===h.x&&l.y<h.y)&&(h=l),l=l.next;while(l!==f);return h}function DS(f,l,h,x,w,T,k,D){return(w-k)*(l-D)>=(f-k)*(T-D)&&(f-k)*(x-D)>=(h-k)*(l-D)&&(h-k)*(T-D)>=(w-k)*(x-D)}function n0(f,l,h,x,w,T,k,D){return!(f===k&&l===D)&&DS(f,l,h,x,w,T,k,D)}function ko(f,l){return f.next.i!==l.i&&f.prev.i!==l.i&&!(function(h,x){let w=h;do{if(w.i!==h.i&&w.next.i!==h.i&&w.i!==x.i&&w.next.i!==x.i&&LS(w,w.next,h,x))return!0;w=w.next}while(w!==h);return!1})(f,l)&&(Kv(f,l)&&Kv(l,f)&&(function(h,x){let w=h,T=!1;const k=(h.x+x.x)/2,D=(h.y+x.y)/2;do w.y>D!=w.next.y>D&&w.next.y!==w.y&&k<(w.next.x-w.x)*(D-w.y)/(w.next.y-w.y)+w.x&&(T=!T),w=w.next;while(w!==h);return T})(f,l)&&(Wr(f.prev,f,l.prev)||Wr(f,l.prev,l))||Al(f,l)&&Wr(f.prev,f,f.next)>0&&Wr(l.prev,l,l.next)>0)}function Wr(f,l,h){return(l.y-f.y)*(h.x-l.x)-(l.x-f.x)*(h.y-l.y)}function Al(f,l){return f.x===l.x&&f.y===l.y}function LS(f,l,h,x){const w=Yv(Wr(f,l,h)),T=Yv(Wr(f,l,x)),k=Yv(Wr(h,x,f)),D=Yv(Wr(h,x,l));return w!==T&&k!==D||!(w!==0||!Xv(f,h,l))||!(T!==0||!Xv(f,x,l))||!(k!==0||!Xv(h,f,x))||!(D!==0||!Xv(h,l,x))}function Xv(f,l,h){return l.x<=Math.max(f.x,h.x)&&l.x>=Math.min(f.x,h.x)&&l.y<=Math.max(f.y,h.y)&&l.y>=Math.min(f.y,h.y)}function Yv(f){return f>0?1:f<0?-1:0}function Kv(f,l){return Wr(f.prev,f,f.next)<0?Wr(f,l,f.next)>=0&&Wr(f,f.prev,l)>=0:Wr(f,l,f.prev)<0||Wr(f,f.next,l)<0}function Jv(f,l){const h=Nb(f.i,f.x,f.y),x=Nb(l.i,l.x,l.y),w=f.next,T=l.prev;return f.next=l,l.prev=f,h.next=w,w.prev=h,x.next=h,h.prev=x,T.next=x,x.prev=T,x}function Ja(f,l,h,x){const w=Nb(f,l,h);return x?(w.next=x.next,w.prev=x,x.next.prev=w,x.next=w):(w.prev=w,w.next=w),w}function el(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Nb(f,l,h){return{i:f,x:l,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Rs{constructor(l,h){if(h>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=h}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class ex{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}ex.noSubdivision=new ex({fill:new Rs(0,0),line:new Rs(0,0),tile:new Rs(0,0),stencil:new Rs(0,0),circle:1}),xn("SubdivisionGranularityExpression",Rs),xn("SubdivisionGranularitySetting",ex);const Pl=-32768,Bu=32767;class nf{constructor(l,h){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=Qe/l,this._canonical=h}_getKey(l,h){return(l+=32768)<<16|h+32768}_vertexToIndex(l,h){if(l<-32768||h<-32768||l>32767||h>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const x=0|Math.round(l),w=0|Math.round(h),T=this._getKey(x,w);if(this._vertexDictionary.has(T))return this._vertexDictionary.get(T);const k=this._vertexBuffer.length/2;return this._vertexDictionary.set(T,k),this._vertexBuffer.push(x,w),k}_subdivideTrianglesScanline(l){if(this._granularity<2)return(function(w,T){const k=[];for(let D=0;D<T.length;D+=3){const B=T[D],Z=T[D+1],Y=T[D+2],ee=w[2*B],oe=w[2*B+1];(w[2*Z]-ee)*(w[2*Y+1]-oe)-(w[2*Z+1]-oe)*(w[2*Y]-ee)>0?(k.push(B),k.push(Y),k.push(Z)):(k.push(B),k.push(Z),k.push(Y))}return k})(this._vertexBuffer,l);const h=[],x=l.length;for(let w=0;w<x;w+=3){const T=[l[w+0],l[w+1],l[w+2]],k=[this._vertexBuffer[2*l[w+0]+0],this._vertexBuffer[2*l[w+0]+1],this._vertexBuffer[2*l[w+1]+0],this._vertexBuffer[2*l[w+1]+1],this._vertexBuffer[2*l[w+2]+0],this._vertexBuffer[2*l[w+2]+1]];let D=1/0,B=1/0,Z=-1/0,Y=-1/0;for(let ge=0;ge<3;ge++){const xe=k[2*ge],Te=k[2*ge+1];D=Math.min(D,xe),Z=Math.max(Z,xe),B=Math.min(B,Te),Y=Math.max(Y,Te)}if(D===Z||B===Y)continue;const ee=Math.floor(D/this._granularityCellSize),oe=Math.ceil(Z/this._granularityCellSize),ue=Math.floor(B/this._granularityCellSize),me=Math.ceil(Y/this._granularityCellSize);if(ee!==oe||ue!==me)for(let ge=ue;ge<me;ge++){const xe=this._scanlineGenerateVertexRingForCellRow(ge,k,T);Fu(this._vertexBuffer,xe,h)}else h.push(...T)}return h}_scanlineGenerateVertexRingForCellRow(l,h,x){const w=l*this._granularityCellSize,T=w+this._granularityCellSize,k=[];for(let D=0;D<3;D++){const B=h[2*D],Z=h[2*D+1],Y=h[2*(D+1)%6],ee=h[(2*(D+1)+1)%6],oe=h[2*(D+2)%6],ue=h[(2*(D+2)+1)%6],me=Y-B,ge=ee-Z,xe=me===0,Te=ge===0,Ue=(w-Z)/ge,Ee=(T-Z)/ge,Re=Math.min(Ue,Ee),qe=Math.max(Ue,Ee);if(!Te&&(Re>=1||qe<=0)||Te&&(Z<w||Z>T)){ee>=w&&ee<=T&&k.push(x[(D+1)%3]);continue}!Te&&Re>0&&k.push(this._vertexToIndex(B+me*Re,Z+ge*Re));const Ge=B+me*Math.max(Re,0),dt=B+me*Math.min(qe,1);xe||this._generateIntraEdgeVertices(k,B,Z,Y,ee,Ge,dt),!Te&&qe<1&&k.push(this._vertexToIndex(B+me*qe,Z+ge*qe)),(Te||ee>=w&&ee<=T)&&k.push(x[(D+1)%3]),!Te&&(ee<=w||ee>=T)&&this._generateInterEdgeVertices(k,B,Z,Y,ee,oe,ue,dt,w,T)}return k}_generateIntraEdgeVertices(l,h,x,w,T,k,D){const B=w-h,Z=T-x,Y=Z===0,ee=Y?Math.min(h,w):Math.min(k,D),oe=Y?Math.max(h,w):Math.max(k,D),ue=Math.floor(ee/this._granularityCellSize)+1,me=Math.ceil(oe/this._granularityCellSize)-1;if(Y?h<w:k<D)for(let ge=ue;ge<=me;ge++){const xe=ge*this._granularityCellSize;l.push(this._vertexToIndex(xe,x+Z*(xe-h)/B))}else for(let ge=me;ge>=ue;ge--){const xe=ge*this._granularityCellSize;l.push(this._vertexToIndex(xe,x+Z*(xe-h)/B))}}_generateInterEdgeVertices(l,h,x,w,T,k,D,B,Z,Y){const ee=T-x,oe=k-w,ue=D-T,me=(Z-T)/ue,ge=(Y-T)/ue,xe=Math.min(me,ge),Te=Math.max(me,ge),Ue=w+oe*xe;let Ee=Math.floor(Math.min(Ue,B)/this._granularityCellSize)+1,Re=Math.ceil(Math.max(Ue,B)/this._granularityCellSize)-1,qe=B<Ue;const Ge=ue===0;if(Ge&&(D===Z||D===Y))return;if(Ge||xe>=1||Te<=0){const Lt=x-D,At=k+(h-k)*Math.min((Z-D)/Lt,(Y-D)/Lt);Ee=Math.floor(Math.min(At,B)/this._granularityCellSize)+1,Re=Math.ceil(Math.max(At,B)/this._granularityCellSize)-1,qe=B<At}const dt=ee>0?Y:Z;if(qe)for(let Lt=Ee;Lt<=Re;Lt++)l.push(this._vertexToIndex(Lt*this._granularityCellSize,dt));else for(let Lt=Re;Lt>=Ee;Lt--)l.push(this._vertexToIndex(Lt*this._granularityCellSize,dt))}_generateOutline(l){const h=[];for(const x of l){const w=rf(x,this._granularity,!0),T=this._pointArrayToIndices(w),k=[];for(let D=1;D<T.length;D++)k.push(T[D-1]),k.push(T[D]);h.push(k)}return h}_handlePoles(l){let h=!1,x=!1;this._canonical&&(this._canonical.y===0&&(h=!0),this._canonical.y===(1<<this._canonical.z)-1&&(x=!0)),(h||x)&&this._fillPoles(l,h,x)}_ensureNoPoleVertices(){const l=this._vertexBuffer;for(let h=0;h<l.length;h+=2){const x=l[h+1];x===Pl&&(l[h+1]=-32767),x===Bu&&(l[h+1]=32766)}}_generatePoleQuad(l,h,x,w,T,k){w>T!=(k===Pl)?(l.push(h),l.push(x),l.push(this._vertexToIndex(w,k)),l.push(x),l.push(this._vertexToIndex(T,k)),l.push(this._vertexToIndex(w,k))):(l.push(x),l.push(h),l.push(this._vertexToIndex(w,k)),l.push(this._vertexToIndex(T,k)),l.push(x),l.push(this._vertexToIndex(w,k)))}_fillPoles(l,h,x){const w=this._vertexBuffer,T=Qe,k=l.length;for(let D=2;D<k;D+=3){const B=l[D-2],Z=l[D-1],Y=l[D],ee=w[2*B],oe=w[2*B+1],ue=w[2*Z],me=w[2*Z+1],ge=w[2*Y],xe=w[2*Y+1];h&&(oe===0&&me===0&&this._generatePoleQuad(l,B,Z,ee,ue,Pl),me===0&&xe===0&&this._generatePoleQuad(l,Z,Y,ue,ge,Pl),xe===0&&oe===0&&this._generatePoleQuad(l,Y,B,ge,ee,Pl)),x&&(oe===T&&me===T&&this._generatePoleQuad(l,B,Z,ee,ue,Bu),me===T&&xe===T&&this._generatePoleQuad(l,Z,Y,ue,ge,Bu),xe===T&&oe===T&&this._generatePoleQuad(l,Y,B,ge,ee,Bu))}}_initializeVertices(l){for(let h=0;h<l.length;h+=2)this._vertexToIndex(l[h],l[h+1])}subdividePolygonInternal(l,h){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:x,holeIndices:w}=(function(D){const B=[],Z=[];for(const Y of D)if(Y.length!==0){Y!==D[0]&&B.push(Z.length/2);for(let ee=0;ee<Y.length;ee++)Z.push(Y[ee].x),Z.push(Y[ee].y)}return{flattened:Z,holeIndices:B}})(l);let T;this._initializeVertices(x);try{const D=(function(Z,Y,ee=2){const oe=Y&&Y.length,ue=oe?Y[0]*ee:Z.length;let me=$b(Z,0,ue,ee,!0);const ge=[];if(!me||me.next===me.prev)return ge;let xe,Te,Ue;if(oe&&(me=(function(Ee,Re,qe,Ge){const dt=[];for(let Lt=0,At=Re.length;Lt<At;Lt++){const Vt=$b(Ee,Re[Lt]*Ge,Lt<At-1?Re[Lt+1]*Ge:Ee.length,Ge,!1);Vt===Vt.next&&(Vt.steiner=!0),dt.push(CD(Vt))}dt.sort(ys);for(let Lt=0;Lt<dt.length;Lt++)qe=IS(dt[Lt],qe);return qe})(Z,Y,me,ee)),Z.length>80*ee){xe=Z[0],Te=Z[1];let Ee=xe,Re=Te;for(let qe=ee;qe<ue;qe+=ee){const Ge=Z[qe],dt=Z[qe+1];Ge<xe&&(xe=Ge),dt<Te&&(Te=dt),Ge>Ee&&(Ee=Ge),dt>Re&&(Re=dt)}Ue=Math.max(Ee-xe,Re-Te),Ue=Ue!==0?32767/Ue:0}return gg(me,ge,ee,xe,Te,Ue,0),ge})(x,w),B=this._convertIndices(x,D);T=this._subdivideTrianglesScanline(B)}catch(D){console.error(D)}let k=[];return h&&(k=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(T),{verticesFlattened:this._vertexBuffer,indicesTriangles:T,indicesLineList:k}}_convertIndices(l,h){const x=[];for(let w=0;w<h.length;w++)x.push(this._vertexToIndex(l[2*h[w]],l[2*h[w]+1]));return x}_pointArrayToIndices(l){const h=[];for(let x=0;x<l.length;x++){const w=l[x];h.push(this._vertexToIndex(w.x,w.y))}return h}}function Bb(f,l,h,x=!0){return new nf(h,l).subdividePolygonInternal(f,x)}function rf(f,l,h=!1){if(!f||f.length<1)return[];if(f.length<2)return[];const x=f[0],w=f[f.length-1],T=h&&(x.x!==w.x||x.y!==w.y);if(l<2)return T?[...f,f[0]]:[...f];const k=Math.floor(Qe/l),D=[];D.push(new u(f[0].x,f[0].y));const B=f.length,Z=T?B:B-1;for(let Y=0;Y<Z;Y++){const ee=f[Y],oe=Y<B-1?f[Y+1]:f[0],ue=ee.x,me=ee.y,ge=oe.x,xe=oe.y,Te=ue!==ge,Ue=me!==xe;if(!Te&&!Ue)continue;const Ee=ge-ue,Re=xe-me,qe=Math.abs(Ee),Ge=Math.abs(Re);let dt=ue,Lt=me;for(;;){const Vt=Ee>0?(Math.floor(dt/k)+1)*k:(Math.ceil(dt/k)-1)*k,dn=Re>0?(Math.floor(Lt/k)+1)*k:(Math.ceil(Lt/k)-1)*k,Wt=Math.abs(dt-Vt),Rt=Math.abs(Lt-dn),bt=Math.abs(dt-ge),On=Math.abs(Lt-xe),_n=Te?Wt/qe:Number.POSITIVE_INFINITY,Tn=Ue?Rt/Ge:Number.POSITIVE_INFINITY;if((bt<=Wt||!Te)&&(On<=Rt||!Ue))break;if(_n<Tn&&Te||!Ue){dt=Vt,Lt+=Re*_n;const yn=new u(dt,Math.round(Lt));D[D.length-1].x===yn.x&&D[D.length-1].y===yn.y||D.push(yn)}else{dt+=Ee*Tn,Lt=dn;const yn=new u(Math.round(dt),Lt);D[D.length-1].x===yn.x&&D[D.length-1].y===yn.y||D.push(yn)}}const At=new u(ge,xe);D[D.length-1].x===At.x&&D[D.length-1].y===At.y||D.push(At)}return D}function Fu(f,l,h){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let x=0,w=f[2*l[0]];for(let B=1;B<l.length;B++){const Z=f[2*l[B]];Z<w&&(w=Z,x=B)}const T=l.length;let k=x,D=(k+1)%T;for(;;){const B=k-1>=0?k-1:T-1,Z=(D+1)%T,Y=f[2*l[B]],ee=f[2*l[Z]],oe=f[2*l[k]],ue=f[2*l[k]+1],me=f[2*l[D]+1];let ge=!1;if(Y<ee)ge=!0;else if(Y>ee)ge=!1;else{const xe=me-ue,Te=-(f[2*l[D]]-oe),Ue=ue<me?1:-1;((Y-oe)*xe+(f[2*l[B]+1]-ue)*Te)*Ue>((ee-oe)*xe+(f[2*l[Z]+1]-ue)*Te)*Ue&&(ge=!0)}if(ge){const xe=l[B],Te=l[k],Ue=l[D];xe!==Te&&xe!==Ue&&Te!==Ue&&h.push(Ue,Te,xe),k--,k<0&&(k=T-1)}else{const xe=l[Z],Te=l[k],Ue=l[D];xe!==Te&&xe!==Ue&&Te!==Ue&&h.push(Ue,Te,xe),D++,D>=T&&(D=0)}if(B===Z)break}}function $S(f,l,h,x,w,T,k,D,B){const Z=w.length/2,Y=k&&D&&B;if(Z<hn.MAX_VERTEX_ARRAY_LENGTH){const ee=l.prepareSegment(Z,h,x),oe=ee.vertexLength;for(let ge=0;ge<T.length;ge+=3)x.emplaceBack(oe+T[ge],oe+T[ge+1],oe+T[ge+2]);let ue,me;ee.vertexLength+=Z,ee.primitiveLength+=T.length/3,Y&&(me=k.prepareSegment(Z,h,D),ue=me.vertexLength,me.vertexLength+=Z);for(let ge=0;ge<w.length;ge+=2)f(w[ge],w[ge+1]);if(Y)for(let ge=0;ge<B.length;ge++){const xe=B[ge];for(let Te=1;Te<xe.length;Te+=2)D.emplaceBack(ue+xe[Te-1],ue+xe[Te]);me.primitiveLength+=xe.length/2}}else(function(ee,oe,ue,me,ge,xe){const Te=[];for(let Ge=0;Ge<me.length/2;Ge++)Te.push(-1);const Ue={count:0};let Ee=0,Re=ee.getOrCreateLatestSegment(oe,ue),qe=Re.vertexLength;for(let Ge=2;Ge<ge.length;Ge+=3){const dt=ge[Ge-2],Lt=ge[Ge-1],At=ge[Ge];let Vt=Te[dt]<Ee,dn=Te[Lt]<Ee,Wt=Te[At]<Ee;Re.vertexLength+((Vt?1:0)+(dn?1:0)+(Wt?1:0))>hn.MAX_VERTEX_ARRAY_LENGTH&&(Re=ee.createNewSegment(oe,ue),Ee=Ue.count,Vt=!0,dn=!0,Wt=!0,qe=0);const Rt=Zh(Te,me,xe,Ue,dt,Vt,Re),bt=Zh(Te,me,xe,Ue,Lt,dn,Re),On=Zh(Te,me,xe,Ue,At,Wt,Re);ue.emplaceBack(qe+Rt-Ee,qe+bt-Ee,qe+On-Ee),Re.primitiveLength++}})(l,h,x,w,T,f),Y&&(function(ee,oe,ue,me,ge,xe){const Te=[];for(let Ge=0;Ge<me.length/2;Ge++)Te.push(-1);const Ue={count:0};let Ee=0,Re=ee.getOrCreateLatestSegment(oe,ue),qe=Re.vertexLength;for(let Ge=0;Ge<ge.length;Ge++){const dt=ge[Ge];for(let Lt=1;Lt<ge[Ge].length;Lt+=2){const At=dt[Lt-1],Vt=dt[Lt];let dn=Te[At]<Ee,Wt=Te[Vt]<Ee;Re.vertexLength+((dn?1:0)+(Wt?1:0))>hn.MAX_VERTEX_ARRAY_LENGTH&&(Re=ee.createNewSegment(oe,ue),Ee=Ue.count,dn=!0,Wt=!0,qe=0);const Rt=Zh(Te,me,xe,Ue,At,dn,Re),bt=Zh(Te,me,xe,Ue,Vt,Wt,Re);ue.emplaceBack(qe+Rt-Ee,qe+bt-Ee),Re.primitiveLength++}}})(k,h,D,w,B,f),l.forceNewSegmentOnNextPrepare(),k?.forceNewSegmentOnNextPrepare()}function Zh(f,l,h,x,w,T,k){if(T){const D=x.count;return h(l[2*w],l[2*w+1]),f[w]=x.count,x.count++,k.vertexLength++,D}return f[w]}class yg{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new De,this.indexArray=new gt,this.indexArray2=new tn,this.programConfigurations=new Fh(l.layers,l.zoom),this.segments=new hn,this.segments2=new hn,this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(l,h,x){this.hasDependencies=lc("fill",this.layers,h);const w=this.layers[0].layout.get("fill-sort-key"),T=!w.isConstant(),k=[];for(const{feature:D,id:B,index:Z,sourceLayerIndex:Y}of l){const ee=this.layers[0]._featureFilter.needGeometry,oe=ac(D,ee);if(!this.layers[0]._featureFilter.filter(new ii(this.zoom),oe,x))continue;const ue=T?w.evaluate(oe,{},x,h.availableImages):void 0,me={id:B,properties:D.properties,type:D.type,sourceLayerIndex:Y,index:Z,geometry:ee?oe.geometry:Nu(D),patterns:{},sortKey:ue};k.push(me)}T&&k.sort(((D,B)=>D.sortKey-B.sortKey));for(const D of k){const{geometry:B,index:Z,sourceLayerIndex:Y}=D;if(this.hasDependencies){const ee=Lb("fill",this.layers,D,{zoom:this.zoom},h);this.patternFeatures.push(ee)}else this.addFeature(D,B,Z,x,{},h.subdivisionGranularity);h.featureIndex.insert(l[Z].feature,B,Z,Y,this.index)}}update(l,h,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,{imagePositions:x})}addFeatures(l,h,x){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,h,x,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Gv),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,h,x,w,T,k){for(const D of Qm(h,500)){const B=Bb(D,w,k.fill.getGranularityForZoomLevel(w.z)),Z=this.layoutVertexArray;$S(((Y,ee)=>{Z.emplaceBack(Y,ee)}),this.segments,this.layoutVertexArray,this.indexArray,B.verticesFlattened,B.indicesTriangles,this.segments2,this.indexArray2,B.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,{imagePositions:T,canonical:w})}}let r0,vg;xn("FillBucket",yg,{omit:["layers","patternFeatures"]});var AE={get paint(){return vg=vg||new To({"fill-antialias":new wn(ut.paint_fill["fill-antialias"]),"fill-opacity":new Rn(ut.paint_fill["fill-opacity"]),"fill-color":new Rn(ut.paint_fill["fill-color"]),"fill-outline-color":new Rn(ut.paint_fill["fill-outline-color"]),"fill-translate":new wn(ut.paint_fill["fill-translate"]),"fill-translate-anchor":new wn(ut.paint_fill["fill-translate-anchor"]),"fill-pattern":new Cl(ut.paint_fill["fill-pattern"])})},get layout(){return r0=r0||new To({"fill-sort-key":new Rn(ut.layout_fill["fill-sort-key"])})}};class PE extends eo{constructor(l,h){super(l,AE,h)}recalculate(l,h){super.recalculate(l,h);const x=this.paint._values["fill-outline-color"];x.value.kind==="constant"&&x.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new yg(l)}queryRadius(){return Vv(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:h,transform:x,pixelsToTileUnits:w}){return Cb(kb(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-x.bearingInRadians,w),h)}isTileClipped(){return!0}}const tx=Zi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ME=Zi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Fb}=tx;class i0{constructor(l,h,x,w,T){this.properties={},this.extent=x,this.type=0,this.id=void 0,this._pbf=l,this._geometry=-1,this._keys=w,this._values=T,l.readFields(TD,this,h)}loadGeometry(){const l=this._pbf;l.pos=this._geometry;const h=l.readVarint()+l.pos,x=[];let w,T=1,k=0,D=0,B=0;for(;l.pos<h;){if(k<=0){const Z=l.readVarint();T=7&Z,k=Z>>3}if(k--,T===1||T===2)D+=l.readSVarint(),B+=l.readSVarint(),T===1&&(w&&x.push(w),w=[]),w&&w.push(new u(D,B));else{if(T!==7)throw new Error(`unknown command ${T}`);w&&w.push(w[0].clone())}}return w&&x.push(w),x}bbox(){const l=this._pbf;l.pos=this._geometry;const h=l.readVarint()+l.pos;let x=1,w=0,T=0,k=0,D=1/0,B=-1/0,Z=1/0,Y=-1/0;for(;l.pos<h;){if(w<=0){const ee=l.readVarint();x=7&ee,w=ee>>3}if(w--,x===1||x===2)T+=l.readSVarint(),k+=l.readSVarint(),T<D&&(D=T),T>B&&(B=T),k<Z&&(Z=k),k>Y&&(Y=k);else if(x!==7)throw new Error(`unknown command ${x}`)}return[D,Z,B,Y]}toGeoJSON(l,h,x){const w=this.extent*Math.pow(2,x),T=this.extent*l,k=this.extent*h,D=this.loadGeometry();function B(oe){return[360*(oe.x+T)/w-180,360/Math.PI*Math.atan(Math.exp((1-2*(oe.y+k)/w)*Math.PI))-90]}function Z(oe){return oe.map(B)}let Y;if(this.type===1){const oe=[];for(const me of D)oe.push(me[0]);const ue=Z(oe);Y=oe.length===1?{type:"Point",coordinates:ue[0]}:{type:"MultiPoint",coordinates:ue}}else if(this.type===2){const oe=D.map(Z);Y=oe.length===1?{type:"LineString",coordinates:oe[0]}:{type:"MultiLineString",coordinates:oe}}else{if(this.type!==3)throw new Error("unknown feature type");{const oe=RE(D),ue=[];for(const me of oe)ue.push(me.map(Z));Y=ue.length===1?{type:"Polygon",coordinates:ue[0]}:{type:"MultiPolygon",coordinates:ue}}}const ee={type:"Feature",geometry:Y,properties:this.properties};return this.id!=null&&(ee.id=this.id),ee}}function TD(f,l,h){f===1?l.id=h.readVarint():f===2?(function(x,w){const T=x.readVarint()+x.pos;for(;x.pos<T;){const k=w._keys[x.readVarint()],D=w._values[x.readVarint()];w.properties[k]=D}})(h,l):f===3?l.type=h.readVarint():f===4&&(l._geometry=h.pos)}function RE(f){const l=f.length;if(l<=1)return[f];const h=[];let x,w;for(let T=0;T<l;T++){const k=bi(f[T]);k!==0&&(w===void 0&&(w=k<0),w===k<0?(x&&h.push(x),x=[f[T]]):x&&x.push(f[T]))}return x&&h.push(x),h}function bi(f){let l=0;for(let h,x,w=0,T=f.length,k=T-1;w<T;k=w++)h=f[w],x=f[k],l+=(x.x-h.x)*(h.y+x.y);return l}i0.types=["Unknown","Point","LineString","Polygon"];class Wi{constructor(l,h){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(jr,this,h),this.length=this._features.length}feature(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];const h=this._pbf.readVarint()+this._pbf.pos;return new i0(this._pbf,h,this.extent,this._keys,this._values)}}function jr(f,l,h){f===15?l.version=h.readVarint():f===1?l.name=h.readString():f===5?l.extent=h.readVarint():f===2?l._features.push(h.pos):f===3?l._keys.push(h.readString()):f===4&&l._values.push((function(x){let w=null;const T=x.readVarint()+x.pos;for(;x.pos<T;){const k=x.readVarint()>>3;w=k===1?x.readString():k===2?x.readFloat():k===3?x.readDouble():k===4?x.readVarint64():k===5?x.readVarint():k===6?x.readSVarint():k===7?x.readBoolean():null}if(w==null)throw new Error("unknown feature value");return w})(h))}class Vr{constructor(l,h){this.layers=l.readFields(Ei,{},h)}}function Ei(f,l,h){if(f===3){const x=new Wi(h,h.readVarint()+h.pos);x.length&&(l[x.name]=x)}}const tl=Math.pow(2,13);function Yc(f,l,h,x,w,T,k,D){f.emplaceBack(l,h,2*Math.floor(x*tl)+k,w*tl*2,T*tl*2,Math.round(D))}class _p{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new Ve,this.centroidVertexArray=new Ie,this.indexArray=new gt,this.programConfigurations=new Fh(l.layers,l.zoom),this.segments=new hn,this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(l,h,x){this.features=[],this.hasDependencies=lc("fill-extrusion",this.layers,h);for(const{feature:w,id:T,index:k,sourceLayerIndex:D}of l){const B=this.layers[0]._featureFilter.needGeometry,Z=ac(w,B);if(!this.layers[0]._featureFilter.filter(new ii(this.zoom),Z,x))continue;const Y={id:T,sourceLayerIndex:D,index:k,geometry:B?Z.geometry:Nu(w),properties:w.properties,type:w.type,patterns:{}};this.hasDependencies?this.features.push(Lb("fill-extrusion",this.layers,Y,{zoom:this.zoom},h)):this.addFeature(Y,Y.geometry,k,x,{},h.subdivisionGranularity),h.featureIndex.insert(w,Y.geometry,k,D,this.index,!0)}}addFeatures(l,h,x){for(const w of this.features){const{geometry:T}=w;this.addFeature(w,T,w.index,h,x,l.subdivisionGranularity)}}update(l,h,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,{imagePositions:x})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Fb),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,ME.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,h,x,w,T,k){for(const D of Qm(h,500)){const B={x:0,y:0,sampleCount:0},Z=this.layoutVertexArray.length;this.processPolygon(B,w,l,D,k);const Y=this.layoutVertexArray.length-Z,ee=Math.floor(B.x/B.sampleCount),oe=Math.floor(B.y/B.sampleCount);for(let ue=0;ue<Y;ue++)this.centroidVertexArray.emplaceBack(ee,oe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,{imagePositions:T,canonical:w})}processPolygon(l,h,x,w,T){if(w.length<1||Bo(w[0]))return;for(const ee of w)ee.length!==0&&zS(l,ee);const k={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},D=T.fill.getGranularityForZoomLevel(h.z),B=i0.types[x.type]==="Polygon";for(const ee of w){if(ee.length===0||Bo(ee))continue;const oe=rf(ee,D,B);this._generateSideFaces(oe,k)}if(!B)return;const Z=Bb(w,h,D,!1),Y=this.layoutVertexArray;$S(((ee,oe)=>{Yc(Y,ee,oe,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,Z.verticesFlattened,Z.indicesTriangles)}_generateSideFaces(l,h){let x=0;for(let w=1;w<l.length;w++){const T=l[w],k=l[w-1];if(of(T,k))continue;h.segment.vertexLength+4>hn.MAX_VERTEX_ARRAY_LENGTH&&(h.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const D=T.sub(k)._perp()._unit(),B=k.dist(T);x+B>32768&&(x=0),Yc(this.layoutVertexArray,T.x,T.y,D.x,D.y,0,0,x),Yc(this.layoutVertexArray,T.x,T.y,D.x,D.y,0,1,x),x+=B,Yc(this.layoutVertexArray,k.x,k.y,D.x,D.y,0,0,x),Yc(this.layoutVertexArray,k.x,k.y,D.x,D.y,0,1,x);const Z=h.segment.vertexLength;this.indexArray.emplaceBack(Z,Z+2,Z+1),this.indexArray.emplaceBack(Z+1,Z+2,Z+3),h.segment.vertexLength+=4,h.segment.primitiveLength+=2}}}function zS(f,l){for(let h=0;h<l.length;h++){const x=l[h];h===l.length-1&&l[0].x===x.x&&l[0].y===x.y||(f.x+=x.x,f.y+=x.y,f.sampleCount++)}}function of(f,l){return f.x===l.x&&(f.x<0||f.x>Qe)||f.y===l.y&&(f.y<0||f.y>Qe)}function Bo(f){return f.every((l=>l.x<0))||f.every((l=>l.x>Qe))||f.every((l=>l.y<0))||f.every((l=>l.y>Qe))}let sf;xn("FillExtrusionBucket",_p,{omit:["layers","features"]});var xg={get paint(){return sf=sf||new To({"fill-extrusion-opacity":new wn(ut["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Rn(ut["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new wn(ut["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new wn(ut["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Cl(ut["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Rn(ut["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Rn(ut["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new wn(ut["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class NS extends eo{constructor(l,h){super(l,xg,h)}createBucket(l){return new _p(l)}queryRadius(){return Vv(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:h,featureState:x,geometry:w,transform:T,pixelsToTileUnits:k,pixelPosMatrix:D}){const B=kb(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-T.bearingInRadians,k),Z=this.paint.get("fill-extrusion-height").evaluate(h,x),Y=this.paint.get("fill-extrusion-base").evaluate(h,x),ee=(function(ue,me){const ge=[];for(const xe of ue){const Te=[xe.x,xe.y,0,1];be(Te,Te,me),ge.push(new u(Te[0]/Te[3],Te[1]/Te[3]))}return ge})(B,D),oe=(function(ue,me,ge,xe){const Te=[],Ue=[],Ee=xe[8]*me,Re=xe[9]*me,qe=xe[10]*me,Ge=xe[11]*me,dt=xe[8]*ge,Lt=xe[9]*ge,At=xe[10]*ge,Vt=xe[11]*ge;for(const dn of ue){const Wt=[],Rt=[];for(const bt of dn){const On=bt.x,_n=bt.y,Tn=xe[0]*On+xe[4]*_n+xe[12],yn=xe[1]*On+xe[5]*_n+xe[13],Fn=xe[2]*On+xe[6]*_n+xe[14],Hr=xe[3]*On+xe[7]*_n+xe[15],Pr=Fn+qe,go=Hr+Ge,Da=Tn+dt,ws=yn+Lt,yo=Fn+At,no=Hr+Vt,pi=new u((Tn+Ee)/go,(yn+Re)/go);pi.z=Pr/go,Wt.push(pi);const Fo=new u(Da/no,ws/no);Fo.z=yo/no,Rt.push(Fo)}Te.push(Wt),Ue.push(Rt)}return[Te,Ue]})(w,Y,Z,D);return(function(ue,me,ge){let xe=1/0;Cb(ge,me)&&(xe=_g(ge,me[0]));for(let Te=0;Te<me.length;Te++){const Ue=me[Te],Ee=ue[Te];for(let Re=0;Re<Ue.length-1;Re++){const qe=Ue[Re],Ge=[qe,Ue[Re+1],Ee[Re+1],Ee[Re],qe];mg(ge,Ge)&&(xe=Math.min(xe,_g(ge,Ge)))}}return xe!==1/0&&xe})(oe[0],oe[1],ee)}}function ya(f,l){return f.x*l.x+f.y*l.y}function _g(f,l){if(f.length===1){let h=0;const x=l[h++];let w;for(;!w||x.equals(w);)if(w=l[h++],!w)return 1/0;for(;h<l.length;h++){const T=l[h],k=f[0],D=w.sub(x),B=T.sub(x),Z=k.sub(x),Y=ya(D,D),ee=ya(D,B),oe=ya(B,B),ue=ya(Z,D),me=ya(Z,B),ge=Y*oe-ee*ee,xe=(oe*ue-ee*me)/ge,Te=(Y*me-ee*ue)/ge,Ue=x.z*(1-xe-Te)+w.z*xe+T.z*Te;if(isFinite(Ue))return Ue}return 1/0}{let h=1/0;for(const x of l)h=Math.min(h,x.z);return h}}const nx=Zi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Ml}=nx,BS=Zi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:jb}=BS,IE=Math.cos(Math.PI/180*37.5),rx=Math.pow(2,14)/.5;class o0{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((h=>{this.gradients[h.id]={}})),this.layoutVertexArray=new He,this.layoutVertexArray2=new Fe,this.indexArray=new gt,this.programConfigurations=new Fh(l.layers,l.zoom),this.segments=new hn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(l,h,x){this.hasDependencies=lc("line",this.layers,h)||this.hasLineDasharray(this.layers);const w=this.layers[0].layout.get("line-sort-key"),T=!w.isConstant(),k=[];for(const{feature:D,id:B,index:Z,sourceLayerIndex:Y}of l){const ee=this.layers[0]._featureFilter.needGeometry,oe=ac(D,ee);if(!this.layers[0]._featureFilter.filter(new ii(this.zoom),oe,x))continue;const ue=T?w.evaluate(oe,{},x):void 0,me={id:B,properties:D.properties,type:D.type,sourceLayerIndex:Y,index:Z,geometry:ee?oe.geometry:Nu(D),patterns:{},dashes:{},sortKey:ue};k.push(me)}T&&k.sort(((D,B)=>D.sortKey-B.sortKey));for(const D of k){const{geometry:B,index:Z,sourceLayerIndex:Y}=D;this.hasDependencies?(lc("line",this.layers,h)?Lb("line",this.layers,D,{zoom:this.zoom},h):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,D,this.zoom,h),this.patternFeatures.push(D)):this.addFeature(D,B,Z,x,{},{},h.subdivisionGranularity),h.featureIndex.insert(l[Z].feature,B,Z,Y,this.index)}}update(l,h,x,w){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,{imagePositions:x,dashPositions:w})}addFeatures(l,h,x,w){for(const T of this.patternFeatures)this.addFeature(T,T.geometry,T.index,h,x,w,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,jb)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Ml),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,h,x,w,T,k,D){const B=this.layers[0].layout,Z=B.get("line-join").evaluate(l,{}),Y=B.get("line-cap"),ee=B.get("line-miter-limit"),oe=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const ue of h)this.addLine(ue,l,Z,Y,ee,oe,w,D);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,{imagePositions:T,dashPositions:k,canonical:w})}addLine(l,h,x,w,T,k,D,B){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=rf(l,D?B.line.getGranularityForZoomLevel(D.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ee=0;Ee<l.length-1;Ee++)this.totalDistance+=l[Ee].dist(l[Ee+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Z=i0.types[h.type]==="Polygon";let Y=l.length;for(;Y>=2&&l[Y-1].equals(l[Y-2]);)Y--;let ee=0;for(;ee<Y-1&&l[ee].equals(l[ee+1]);)ee++;if(Y<(Z?3:2))return;x==="bevel"&&(T=1.05);const oe=this.overscaling<=16?122880/(512*this.overscaling):0,ue=this.segments.prepareSegment(10*Y,this.layoutVertexArray,this.indexArray);let me,ge,xe,Te,Ue;this.e1=this.e2=-1,Z&&(me=l[Y-2],Ue=l[ee].sub(me)._unit()._perp());for(let Ee=ee;Ee<Y;Ee++){if(xe=Ee===Y-1?Z?l[ee+1]:void 0:l[Ee+1],xe&&l[Ee].equals(xe))continue;Ue&&(Te=Ue),me&&(ge=me),me=l[Ee],Ue=xe?xe.sub(me)._unit()._perp():Te,Te=Te||Ue;let Re=Te.add(Ue);Re.x===0&&Re.y===0||Re._unit();const qe=Te.x*Ue.x+Te.y*Ue.y,Ge=Re.x*Ue.x+Re.y*Ue.y,dt=Ge!==0?1/Ge:1/0,Lt=2*Math.sqrt(2-2*Ge),At=Ge<IE&&ge&&xe,Vt=Te.x*Ue.y-Te.y*Ue.x>0;if(At&&Ee>ee){const Rt=me.dist(ge);if(Rt>2*oe){const bt=me.sub(me.sub(ge)._mult(oe/Rt)._round());this.updateDistance(ge,bt),this.addCurrentVertex(bt,Te,0,0,ue),ge=bt}}const dn=ge&&xe;let Wt=dn?x:Z?"butt":w;if(dn&&Wt==="round"&&(dt<k?Wt="miter":dt<=2&&(Wt="fakeround")),Wt==="miter"&&dt>T&&(Wt="bevel"),Wt==="bevel"&&(dt>2&&(Wt="flipbevel"),dt<T&&(Wt="miter")),ge&&this.updateDistance(ge,me),Wt==="miter")Re._mult(dt),this.addCurrentVertex(me,Re,0,0,ue);else if(Wt==="flipbevel"){if(dt>100)Re=Ue.mult(-1);else{const Rt=dt*Te.add(Ue).mag()/Te.sub(Ue).mag();Re._perp()._mult(Rt*(Vt?-1:1))}this.addCurrentVertex(me,Re,0,0,ue),this.addCurrentVertex(me,Re.mult(-1),0,0,ue)}else if(Wt==="bevel"||Wt==="fakeround"){const Rt=-Math.sqrt(dt*dt-1),bt=Vt?Rt:0,On=Vt?0:Rt;if(ge&&this.addCurrentVertex(me,Te,bt,On,ue),Wt==="fakeround"){const _n=Math.round(180*Lt/Math.PI/20);for(let Tn=1;Tn<_n;Tn++){let yn=Tn/_n;if(yn!==.5){const Hr=yn-.5;yn+=yn*Hr*(yn-1)*((1.0904+qe*(qe*(3.55645-1.43519*qe)-3.2452))*Hr*Hr+(.848013+qe*(.215638*qe-1.06021)))}const Fn=Ue.sub(Te)._mult(yn)._add(Te)._unit()._mult(Vt?-1:1);this.addHalfVertex(me,Fn.x,Fn.y,!1,Vt,0,ue)}}xe&&this.addCurrentVertex(me,Ue,-bt,-On,ue)}else if(Wt==="butt")this.addCurrentVertex(me,Re,0,0,ue);else if(Wt==="square"){const Rt=ge?1:-1;this.addCurrentVertex(me,Re,Rt,Rt,ue)}else Wt==="round"&&(ge&&(this.addCurrentVertex(me,Te,0,0,ue),this.addCurrentVertex(me,Te,1,1,ue,!0)),xe&&(this.addCurrentVertex(me,Ue,-1,-1,ue,!0),this.addCurrentVertex(me,Ue,0,0,ue)));if(At&&Ee<Y-1){const Rt=me.dist(xe);if(Rt>2*oe){const bt=me.add(xe.sub(me)._mult(oe/Rt)._round());this.updateDistance(me,bt),this.addCurrentVertex(bt,Ue,0,0,ue),me=bt}}}}addCurrentVertex(l,h,x,w,T,k=!1){const D=h.y*w-h.x,B=-h.y-h.x*w;this.addHalfVertex(l,h.x+h.y*x,h.y-h.x*x,k,!1,x,T),this.addHalfVertex(l,D,B,k,!0,-w,T),this.distance>rx/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,h,x,w,T,k))}addHalfVertex({x:l,y:h},x,w,T,k,D,B){const Z=.5*(this.lineClips?this.scaledDistance*(rx-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(T?1:0),(h<<1)+(k?1:0),Math.round(63*x)+128,Math.round(63*w)+128,1+(D===0?0:D<0?-1:1)|(63&Z)<<2,Z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Y=B.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,Y,this.e2),B.primitiveLength++),k?this.e2=Y:this.e1=Y}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,h){this.distance+=l.dist(h),this.updateScaledDistance()}hasLineDasharray(l){for(const h of l){const x=h.paint.get("line-dasharray");if(x&&!x.isConstant())return!0}return!1}addLineDashDependencies(l,h,x,w){for(const T of l){const k=T.paint.get("line-dasharray");if(!k||k.value.kind==="constant")continue;const D=T.layout.get("line-cap")==="round",B={dasharray:k.value.evaluate({zoom:x-1},h,{}),round:D},Z={dasharray:k.value.evaluate({zoom:x},h,{}),round:D},Y={dasharray:k.value.evaluate({zoom:x+1},h,{}),round:D},ee=`${B.dasharray.join(",")},${B.round}`,oe=`${Z.dasharray.join(",")},${Z.round}`,ue=`${Y.dasharray.join(",")},${Y.round}`;w.dashDependencies[ee]=B,w.dashDependencies[oe]=Z,w.dashDependencies[ue]=Y,h.dashes[T.id]={min:ee,mid:oe,max:ue}}}}let af,xs;xn("LineBucket",o0,{omit:["layers","patternFeatures"]});var lf={get paint(){return xs=xs||new To({"line-opacity":new Rn(ut.paint_line["line-opacity"]),"line-color":new Rn(ut.paint_line["line-color"]),"line-translate":new wn(ut.paint_line["line-translate"]),"line-translate-anchor":new wn(ut.paint_line["line-translate-anchor"]),"line-width":new Rn(ut.paint_line["line-width"]),"line-gap-width":new Rn(ut.paint_line["line-gap-width"]),"line-offset":new Rn(ut.paint_line["line-offset"]),"line-blur":new Rn(ut.paint_line["line-blur"]),"line-dasharray":new Cl(ut.paint_line["line-dasharray"]),"line-pattern":new Cl(ut.paint_line["line-pattern"]),"line-gradient":new lg(ut.paint_line["line-gradient"])})},get layout(){return af=af||new To({"line-cap":new wn(ut.layout_line["line-cap"]),"line-join":new Rn(ut.layout_line["line-join"]),"line-miter-limit":new wn(ut.layout_line["line-miter-limit"]),"line-round-limit":new wn(ut.layout_line["line-round-limit"]),"line-sort-key":new Rn(ut.layout_line["line-sort-key"])})}};class s0 extends Rn{possiblyEvaluate(l,h){return h=new ii(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(l,h)}evaluate(l,h,x,w){return h=yt({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(l,h,x,w)}}let Kc;class FS extends eo{constructor(l,h){super(l,lf,h),this.gradientVersion=0,Kc||(Kc=new s0(lf.paint.properties["line-width"].specification),Kc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!(function(x){return x._styleExpression!==void 0})(h)&&h._styleExpression.expression instanceof Th,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,h){super.recalculate(l,h),this.paint._values["line-floorwidth"]=Kc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new o0(l)}queryRadius(l){const h=l,x=Vb(Jd("line-width",this,h),Jd("line-gap-width",this,h)),w=Jd("line-offset",this,h);return x/2+Math.abs(w)+Vv(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:h,featureState:x,geometry:w,transform:T,pixelsToTileUnits:k}){const D=kb(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-T.bearingInRadians,k),B=k/2*Vb(this.paint.get("line-width").evaluate(h,x),this.paint.get("line-gap-width").evaluate(h,x)),Z=this.paint.get("line-offset").evaluate(h,x);return Z&&(w=(function(Y,ee){const oe=[];for(let ue=0;ue<Y.length;ue++){const me=Eb(Y[ue]),ge=[];for(let xe=0;xe<me.length;xe++){const Te=me[xe],Ue=me[xe-1],Ee=me[xe+1],Re=xe===0?new u(0,0):Te.sub(Ue)._unit()._perp(),qe=xe===me.length-1?new u(0,0):Ee.sub(Te)._unit()._perp(),Ge=Re._add(qe)._unit(),dt=Ge.x*qe.x+Ge.y*qe.y;dt!==0&&Ge._mult(1/dt),ge.push(Ge._mult(ee)._add(Te))}oe.push(ge)}return oe})(w,Z*k)),(function(Y,ee,oe){for(let ue=0;ue<ee.length;ue++){const me=ee[ue];if(Y.length>=3){for(let ge=0;ge<me.length;ge++)if(Vh(Y,me[ge]))return!0}if(gs(Y,me,oe))return!0}return!1})(D,w,B)}isTileClipped(){return!0}}function Vb(f,l){return l>0?l+2*f:f}const DE=Zi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ix=Zi([{name:"a_projected_pos",components:3,type:"Float32"}],4);Zi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const jS=Zi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Zi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Rl=Zi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),LE=Zi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Il(f,l,h){return f.sections.forEach((x=>{x.text=(function(w,T,k){const D=T.layout.get("text-transform").evaluate(k,{});return D==="uppercase"?w=w.toLocaleUpperCase():D==="lowercase"&&(w=w.toLocaleLowerCase()),Sl.applyArabicShaping&&(w=Sl.applyArabicShaping(w)),w})(x.text,l,h)})),f}Zi([{name:"triangle",components:3,type:"Uint16"}]),Zi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Zi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Zi([{type:"Float32",name:"offsetX"}]),Zi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Zi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var is=24;const a0={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},kD={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},bp={40:!0};function ox(f,l,h,x,w,T){if("fontStack"in l){const k=h[l.fontStack],D=k&&k[f];return D?D.metrics.advance*l.scale+w:0}{const k=x[l.imageName];return k?k.displaySize[0]*l.scale*is/T+w:0}}function Qb(f,l,h,x){const w=Math.pow(f-l,2);return x?f<l?w/2:2*w:w+Math.abs(h)*h}function l0(f,l,h){let x=0;return f===10&&(x-=1e4),h&&(x+=150),f!==40&&f!==65288||(x+=50),l!==41&&l!==65289||(x+=50),x}function VS(f,l,h,x,w,T){let k=null,D=Qb(l,h,w,T);for(const B of x){const Z=Qb(l-B.x,h,w,T)+B.badness;Z<=D&&(k=B,D=Z)}return{index:f,x:l,priorBreak:k,badness:D}}function QS(f){return f?QS(f.priorBreak).concat(f.index):[]}class bg{constructor(l="",h=[],x=[]){this.text=l,this.sections=h,this.sectionIndex=x,this.imageSectionID=null}static fromFeature(l,h){const x=new bg;for(let w=0;w<l.sections.length;w++){const T=l.sections[w];T.image?x.addImageSection(T):x.addTextSection(T,h)}return x}length(){return[...this.text].length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}verticalizePunctuation(){this.text=(function(l){let h="",x={premature:!0,value:void 0};const w=l[Symbol.iterator]();let T=w.next();const k=l[Symbol.iterator]();k.next();let D=k.next();for(;!T.done;)h+=!D.done&&qc(D.value.codePointAt(0))&&!a0[D.value]||!x.premature&&qc(x.value.codePointAt(0))&&!a0[x.value]||!a0[T.value]?T.value:a0[T.value],x={value:T.value,premature:!1},T=w.next(),D=k.next();return h})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const l=this.text.match(/^\s*/),h=l?l[0].length:0,x=this.text.match(/\S\s*$/),w=x?x[0].length-1:0;this.text=this.text.substring(h,this.text.length-w),this.sectionIndex=this.sectionIndex.slice(h,this.sectionIndex.length-w)}substring(l,h){const x=[...this.text].slice(l,h).join(""),w=this.sectionIndex.slice(l,h);return new bg(x,this.sections,w)}toCodeUnitIndex(l){return[...this.text].slice(0,l).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((l,h)=>Math.max(l,this.sections[h].scale)),0)}getMaxImageSize(l){let h=0,x=0;for(let w=0;w<this.length();w++){const T=this.getSection(w);if("imageName"in T){const k=l[T.imageName];if(!k)continue;const D=k.displaySize;h=Math.max(h,D[0]),x=Math.max(x,D[1])}}return{maxImageWidth:h,maxImageHeight:x}}addTextSection(l,h){this.text+=l.text,this.sections.push({scale:l.scale||1,verticalAlign:l.verticalAlign||"bottom",fontStack:l.fontStack||h});const x=this.sections.length-1;this.sectionIndex.push(...[...l.text].map((()=>x)))}addImageSection(l){const h=l.image?l.image.name:"";if(h.length===0)return void Gt("Can't add FormattedSection with an empty image.");const x=this.getNextImageSectionCharCode();x?(this.text+=String.fromCharCode(x),this.sections.push({scale:1,verticalAlign:l.verticalAlign||"bottom",imageName:h}),this.sectionIndex.push(this.sections.length-1)):Gt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(l,h,x,w,T){const k=[],D=this.determineAverageLineWidth(l,h,x,w,T),B=this.hasZeroWidthSpaces();let Z=0,Y=0;const ee=this.text[Symbol.iterator]();let oe=ee.next();const ue=this.text[Symbol.iterator]();ue.next();let me=ue.next();const ge=this.text[Symbol.iterator]();ge.next(),ge.next();let xe=ge.next();for(;!oe.done;){const Te=this.getSection(Y),Ue=oe.value.codePointAt(0);if(rg(Ue)||(Z+=ox(Ue,Te,x,w,l,T)),!me.done){const Ee=Qc(Ue),Re=me.value.codePointAt(0);(kD[Ue]||Ee||"imageName"in Te||!xe.done&&bp[Re])&&k.push(VS(Y+1,Z,D,k,l0(Ue,Re,Ee&&B),!1))}Y++,oe=ee.next(),me=ue.next(),xe=ge.next()}return QS(VS(this.length(),Z,D,k,0,!0))}determineAverageLineWidth(l,h,x,w,T){let k=0,D=0;for(const B of this.text){const Z=this.getSection(D);k+=ox(B.codePointAt(0),Z,x,w,l,T),D++}return k/Math.max(1,Math.ceil(k/h))}}const Ub=4294967296,sx=1/Ub,Zb=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class qb{constructor(l=new Uint8Array(16)){this.buf=ArrayBuffer.isView(l)?l:new Uint8Array(l),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(l,h,x=this.length){for(;this.pos<x;){const w=this.readVarint(),T=w>>3,k=this.pos;this.type=7&w,l(T,h,this),this.pos===k&&this.skip(w)}return h}readMessage(l,h){return this.readFields(l,h,this.readVarint()+this.pos)}readFixed32(){const l=this.dataView.getUint32(this.pos,!0);return this.pos+=4,l}readSFixed32(){const l=this.dataView.getInt32(this.pos,!0);return this.pos+=4,l}readFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Ub;return this.pos+=8,l}readSFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Ub;return this.pos+=8,l}readFloat(){const l=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,l}readDouble(){const l=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,l}readVarint(l){const h=this.buf;let x,w;return w=h[this.pos++],x=127&w,w<128?x:(w=h[this.pos++],x|=(127&w)<<7,w<128?x:(w=h[this.pos++],x|=(127&w)<<14,w<128?x:(w=h[this.pos++],x|=(127&w)<<21,w<128?x:(w=h[this.pos],x|=(15&w)<<28,(function(T,k,D){const B=D.buf;let Z,Y;if(Y=B[D.pos++],Z=(112&Y)>>4,Y<128||(Y=B[D.pos++],Z|=(127&Y)<<3,Y<128)||(Y=B[D.pos++],Z|=(127&Y)<<10,Y<128)||(Y=B[D.pos++],Z|=(127&Y)<<17,Y<128)||(Y=B[D.pos++],Z|=(127&Y)<<24,Y<128)||(Y=B[D.pos++],Z|=(1&Y)<<31,Y<128))return c0(T,Z,k);throw new Error("Expected varint not more than 10 bytes")})(x,l,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const l=this.readVarint();return l%2==1?(l+1)/-2:l/2}readBoolean(){return!!this.readVarint()}readString(){const l=this.readVarint()+this.pos,h=this.pos;return this.pos=l,l-h>=12&&Zb?Zb.decode(this.buf.subarray(h,l)):(function(x,w,T){let k="",D=w;for(;D<T;){const B=x[D];let Z,Y,ee,oe=null,ue=B>239?4:B>223?3:B>191?2:1;if(D+ue>T)break;ue===1?B<128&&(oe=B):ue===2?(Z=x[D+1],(192&Z)==128&&(oe=(31&B)<<6|63&Z,oe<=127&&(oe=null))):ue===3?(Z=x[D+1],Y=x[D+2],(192&Z)==128&&(192&Y)==128&&(oe=(15&B)<<12|(63&Z)<<6|63&Y,(oe<=2047||oe>=55296&&oe<=57343)&&(oe=null))):ue===4&&(Z=x[D+1],Y=x[D+2],ee=x[D+3],(192&Z)==128&&(192&Y)==128&&(192&ee)==128&&(oe=(15&B)<<18|(63&Z)<<12|(63&Y)<<6|63&ee,(oe<=65535||oe>=1114112)&&(oe=null))),oe===null?(oe=65533,ue=1):oe>65535&&(oe-=65536,k+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|1023&oe),k+=String.fromCharCode(oe),D+=ue}return k})(this.buf,h,l)}readBytes(){const l=this.readVarint()+this.pos,h=this.buf.subarray(this.pos,l);return this.pos=l,h}readPackedVarint(l=[],h){const x=this.readPackedEnd();for(;this.pos<x;)l.push(this.readVarint(h));return l}readPackedSVarint(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readSVarint());return l}readPackedBoolean(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readBoolean());return l}readPackedFloat(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readFloat());return l}readPackedDouble(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readDouble());return l}readPackedFixed32(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readFixed32());return l}readPackedSFixed32(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readSFixed32());return l}readPackedFixed64(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readFixed64());return l}readPackedSFixed64(l=[]){const h=this.readPackedEnd();for(;this.pos<h;)l.push(this.readSFixed64());return l}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(l){const h=7&l;if(h===0)for(;this.buf[this.pos++]>127;);else if(h===2)this.pos=this.readVarint()+this.pos;else if(h===5)this.pos+=4;else{if(h!==1)throw new Error(`Unimplemented type: ${h}`);this.pos+=8}}writeTag(l,h){this.writeVarint(l<<3|h)}realloc(l){let h=this.length||16;for(;h<this.pos+l;)h*=2;if(h!==this.length){const x=new Uint8Array(h);x.set(this.buf),this.buf=x,this.dataView=new DataView(x.buffer),this.length=h}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeSFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*sx),!0),this.pos+=8}writeSFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*sx),!0),this.pos+=8}writeVarint(l){(l=+l||0)>268435455||l<0?(function(h,x){let w,T;if(h>=0?(w=h%4294967296|0,T=h/4294967296|0):(w=~(-h%4294967296),T=~(-h/4294967296),4294967295^w?w=w+1|0:(w=0,T=T+1|0)),h>=18446744073709552e3||h<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");x.realloc(10),(function(k,D,B){B.buf[B.pos++]=127&k|128,k>>>=7,B.buf[B.pos++]=127&k|128,k>>>=7,B.buf[B.pos++]=127&k|128,k>>>=7,B.buf[B.pos++]=127&k|128,B.buf[B.pos]=127&(k>>>=7)})(w,0,x),(function(k,D){const B=(7&k)<<4;D.buf[D.pos++]|=B|((k>>>=3)?128:0),k&&(D.buf[D.pos++]=127&k|((k>>>=7)?128:0),k&&(D.buf[D.pos++]=127&k|((k>>>=7)?128:0),k&&(D.buf[D.pos++]=127&k|((k>>>=7)?128:0),k&&(D.buf[D.pos++]=127&k|((k>>>=7)?128:0),k&&(D.buf[D.pos++]=127&k)))))})(T,x)})(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))}writeSVarint(l){this.writeVarint(l<0?2*-l-1:2*l)}writeBoolean(l){this.writeVarint(+l)}writeString(l){l=String(l),this.realloc(4*l.length),this.pos++;const h=this.pos;this.pos=(function(w,T,k){for(let D,B,Z=0;Z<T.length;Z++){if(D=T.charCodeAt(Z),D>55295&&D<57344){if(!B){D>56319||Z+1===T.length?(w[k++]=239,w[k++]=191,w[k++]=189):B=D;continue}if(D<56320){w[k++]=239,w[k++]=191,w[k++]=189,B=D;continue}D=B-55296<<10|D-56320|65536,B=null}else B&&(w[k++]=239,w[k++]=191,w[k++]=189,B=null);D<128?w[k++]=D:(D<2048?w[k++]=D>>6|192:(D<65536?w[k++]=D>>12|224:(w[k++]=D>>18|240,w[k++]=D>>12&63|128),w[k++]=D>>6&63|128),w[k++]=63&D|128)}return k})(this.buf,l,this.pos);const x=this.pos-h;x>=128&&$E(h,x,this),this.pos=h-1,this.writeVarint(x),this.pos+=x}writeFloat(l){this.realloc(4),this.dataView.setFloat32(this.pos,l,!0),this.pos+=4}writeDouble(l){this.realloc(8),this.dataView.setFloat64(this.pos,l,!0),this.pos+=8}writeBytes(l){const h=l.length;this.writeVarint(h),this.realloc(h);for(let x=0;x<h;x++)this.buf[this.pos++]=l[x]}writeRawMessage(l,h){this.pos++;const x=this.pos;l(h,this);const w=this.pos-x;w>=128&&$E(x,w,this),this.pos=x-1,this.writeVarint(w),this.pos+=w}writeMessage(l,h,x){this.writeTag(l,2),this.writeRawMessage(h,x)}writePackedVarint(l,h){h.length&&this.writeMessage(l,zE,h)}writePackedSVarint(l,h){h.length&&this.writeMessage(l,NE,h)}writePackedBoolean(l,h){h.length&&this.writeMessage(l,BE,h)}writePackedFloat(l,h){h.length&&this.writeMessage(l,u0,h)}writePackedDouble(l,h){h.length&&this.writeMessage(l,Wb,h)}writePackedFixed32(l,h){h.length&&this.writeMessage(l,FE,h)}writePackedSFixed32(l,h){h.length&&this.writeMessage(l,jE,h)}writePackedFixed64(l,h){h.length&&this.writeMessage(l,VE,h)}writePackedSFixed64(l,h){h.length&&this.writeMessage(l,QE,h)}writeBytesField(l,h){this.writeTag(l,2),this.writeBytes(h)}writeFixed32Field(l,h){this.writeTag(l,5),this.writeFixed32(h)}writeSFixed32Field(l,h){this.writeTag(l,5),this.writeSFixed32(h)}writeFixed64Field(l,h){this.writeTag(l,1),this.writeFixed64(h)}writeSFixed64Field(l,h){this.writeTag(l,1),this.writeSFixed64(h)}writeVarintField(l,h){this.writeTag(l,0),this.writeVarint(h)}writeSVarintField(l,h){this.writeTag(l,0),this.writeSVarint(h)}writeStringField(l,h){this.writeTag(l,2),this.writeString(h)}writeFloatField(l,h){this.writeTag(l,5),this.writeFloat(h)}writeDoubleField(l,h){this.writeTag(l,1),this.writeDouble(h)}writeBooleanField(l,h){this.writeVarintField(l,+h)}}function c0(f,l,h){return h?4294967296*l+(f>>>0):4294967296*(l>>>0)+(f>>>0)}function $E(f,l,h){const x=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));h.realloc(x);for(let w=h.pos-1;w>=f;w--)h.buf[w+x]=h.buf[w]}function zE(f,l){for(let h=0;h<f.length;h++)l.writeVarint(f[h])}function NE(f,l){for(let h=0;h<f.length;h++)l.writeSVarint(f[h])}function u0(f,l){for(let h=0;h<f.length;h++)l.writeFloat(f[h])}function Wb(f,l){for(let h=0;h<f.length;h++)l.writeDouble(f[h])}function BE(f,l){for(let h=0;h<f.length;h++)l.writeBoolean(f[h])}function FE(f,l){for(let h=0;h<f.length;h++)l.writeFixed32(f[h])}function jE(f,l){for(let h=0;h<f.length;h++)l.writeSFixed32(f[h])}function VE(f,l){for(let h=0;h<f.length;h++)l.writeFixed64(f[h])}function QE(f,l){for(let h=0;h<f.length;h++)l.writeSFixed64(f[h])}function UE(f,l,h){f===1&&h.readMessage(Hb,l)}function Hb(f,l,h){if(f===3){const{id:x,bitmap:w,width:T,height:k,left:D,top:B,advance:Z}=h.readMessage(ZE,{});l.push({id:x,bitmap:new Zv({width:T+6,height:k+6},w),metrics:{width:T,height:k,left:D,top:B,advance:Z}})}}function ZE(f,l,h){f===1?l.id=h.readVarint():f===2?l.bitmap=h.readBytes():f===3?l.width=h.readVarint():f===4?l.height=h.readVarint():f===5?l.left=h.readSVarint():f===6?l.top=h.readSVarint():f===7&&(l.advance=h.readVarint())}function US(f){let l=0,h=0;for(const k of f)l+=k.w*k.h,h=Math.max(h,k.w);f.sort(((k,D)=>D.h-k.h));const x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),h),h:1/0}];let w=0,T=0;for(const k of f)for(let D=x.length-1;D>=0;D--){const B=x[D];if(!(k.w>B.w||k.h>B.h)){if(k.x=B.x,k.y=B.y,T=Math.max(T,k.y+k.h),w=Math.max(w,k.x+k.w),k.w===B.w&&k.h===B.h){const Z=x.pop();Z&&D<x.length&&(x[D]=Z)}else k.h===B.h?(B.x+=k.w,B.w-=k.w):k.w===B.w?(B.y+=k.h,B.h-=k.h):(x.push({x:B.x+k.w,y:B.y,w:B.w-k.w,h:k.h}),B.y+=k.h,B.h-=k.h);break}}return{w,h:T,fill:l/(w*T)||0}}class wi{constructor(l,{pixelRatio:h,version:x,stretchX:w,stretchY:T,content:k,textFitWidth:D,textFitHeight:B}){this.paddedRect=l,this.pixelRatio=h,this.stretchX=w,this.stretchY=T,this.content=k,this.version=x,this.textFitWidth=D,this.textFitHeight=B}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Gb{constructor(l,h){const x={},w={};this.haveRenderCallbacks=[];const T=[];this.addImages(l,x,T),this.addImages(h,w,T);const{w:k,h:D}=US(T),B=new Pa({width:k||1,height:D||1});for(const Z in l){const Y=l[Z],ee=x[Z].paddedRect;Pa.copy(Y.data,B,{x:0,y:0},{x:ee.x+1,y:ee.y+1},Y.data)}for(const Z in h){const Y=h[Z],ee=w[Z].paddedRect,oe=ee.x+1,ue=ee.y+1,me=Y.data.width,ge=Y.data.height;Pa.copy(Y.data,B,{x:0,y:0},{x:oe,y:ue},Y.data),Pa.copy(Y.data,B,{x:0,y:ge-1},{x:oe,y:ue-1},{width:me,height:1}),Pa.copy(Y.data,B,{x:0,y:0},{x:oe,y:ue+ge},{width:me,height:1}),Pa.copy(Y.data,B,{x:me-1,y:0},{x:oe-1,y:ue},{width:1,height:ge}),Pa.copy(Y.data,B,{x:0,y:0},{x:oe+me,y:ue},{width:1,height:ge})}this.image=B,this.iconPositions=x,this.patternPositions=w}addImages(l,h,x){for(const w in l){const T=l[w],k={x:0,y:0,w:T.data.width+2,h:T.data.height+2};x.push(k),h[w]=new wi(k,T),T.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(l,h){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const x in l.updatedImages)this.patchUpdatedImage(this.iconPositions[x],l.getImage(x),h),this.patchUpdatedImage(this.patternPositions[x],l.getImage(x),h)}patchUpdatedImage(l,h,x){if(!l||!h||l.version===h.version)return;l.version=h.version;const[w,T]=l.tl;x.update(h.data,void 0,{x:w,y:T})}}var wp;function ax(f,l,h,x,w,T,k,D,B,Z,Y,ee,oe,ue,me){const ge=bg.fromFeature(f,w);let xe;ee===a.az.vertical&&ge.verticalizePunctuation();let Te=ge.determineLineBreaks(Z,T,l,x,ue);const{processBidirectionalText:Ue,processStyledBidirectionalText:Ee}=Sl;if(Ue&&ge.sections.length===1){xe=[],Te=Te.map((dt=>ge.toCodeUnitIndex(dt)));const Ge=Ue(ge.toString(),Te);for(const dt of Ge){const Lt=[...dt].map((()=>0));xe.push(new bg(dt,ge.sections,Lt))}}else if(Ee){xe=[],Te=Te.map((At=>ge.toCodeUnitIndex(At)));let Ge=0;const dt=[];for(const At of ge.text)dt.push(...Array(At.length).fill(ge.sectionIndex[Ge])),Ge++;const Lt=Ee(ge.text,dt,Te);for(const At of Lt){const Vt=[];let dn="";for(const Wt of At[0])Vt.push(At[1][dn.length]),dn+=Wt;xe.push(new bg(At[0],ge.sections,Vt))}}else xe=(function(Ge,dt){const Lt=[];let At=0;for(const Vt of dt)Lt.push(Ge.substring(At,Vt)),At=Vt;return At<Ge.length()&&Lt.push(Ge.substring(At,Ge.length())),Lt})(ge,Te);const Re=[],qe={positionedLines:Re,text:ge.toString(),top:Y[1],bottom:Y[1],left:Y[0],right:Y[0],writingMode:ee,iconsInText:!1,verticalizable:!1};return(function(Ge,dt,Lt,At,Vt,dn,Wt,Rt,bt,On,_n,Tn){let yn=0,Fn=0,Hr=0,Pr=0;const go=Rt==="right"?1:Rt==="left"?0:.5,Da=is/Tn;let ws=0;for(const pi of Vt){pi.trim();const Fo=pi.getMaxScale(),Ho={positionedGlyphs:[],lineOffset:0};Ge.positionedLines[ws]=Ho;const Hi=Ho.positionedGlyphs;let hc=0;if(!pi.length()){Fn+=dn,++ws;continue}const La=ED(At,pi,Da);let dc=0;for(const qs of pi.text){const Eo=pi.getSection(dc),Os=qs.codePointAt(0),jo=Xb(bt,_n,Os),Ws={glyph:Os,imageName:null,x:yn,y:Fn+-17,vertical:jo,scale:1,fontStack:"",sectionIndex:pi.getSectionIndex(dc),metrics:null,rect:null};let Cg;if("fontStack"in Eo){if(Cg=h0(Eo,Os,jo,La,dt,Lt),!Cg)continue;Ws.fontStack=Eo.fontStack}else{if(Ge.iconsInText=!0,Eo.scale*=Da,Cg=qS(Eo,jo,Fo,La,At),!Cg)continue;hc=Math.max(hc,Cg.imageOffset),Ws.imageName=Eo.imageName}const{rect:pf,metrics:T2,baselineOffset:b0}=Cg;Ws.y+=b0,Ws.scale=Eo.scale,Ws.metrics=T2,Ws.rect=pf,Hi.push(Ws),jo?(Ge.verticalizable=!0,yn+=("imageName"in Eo?T2.advance:is)*Eo.scale+On):yn+=T2.advance*Eo.scale+On,dc++}Hi.length!==0&&(Hr=Math.max(yn-On,Hr),Yb(Hi,0,Hi.length-1,go)),yn=0,Ho.lineOffset=Math.max(hc,(Fo-1)*is);const Hh=dn*Fo+hc;Fn+=Hh,Pr=Math.max(Hh,Pr),++ws}const{horizontalAlign:yo,verticalAlign:no}=ZS(Wt);(function(pi,Fo,Ho,Hi,hc,La,dc,Hh,qs){const Eo=(Fo-Ho)*hc;let Os=0;Os=La!==dc?-Hh*Hi- -17:-Hi*qs*dc+.5*dc;for(const jo of pi)for(const Ws of jo.positionedGlyphs)Ws.x+=Eo,Ws.y+=Os})(Ge.positionedLines,go,yo,no,Hr,Pr,dn,Fn,Vt.length),Ge.top+=-no*Fn,Ge.bottom=Ge.top+Fn,Ge.left+=-yo*Hr,Ge.right=Ge.left+Hr})(qe,l,h,x,xe,k,D,B,ee,Z,oe,me),!(function(Ge){for(const dt of Ge)if(dt.positionedGlyphs.length!==0)return!1;return!0})(Re)&&qe}function ZS(f){let l=.5,h=.5;switch(f){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:l,verticalAlign:h}}function ED(f,l,h){const x=l.getMaxScale()*is,{maxImageWidth:w,maxImageHeight:T}=l.getMaxImageSize(f),k=Math.max(x,T*h);return{verticalLineContentWidth:Math.max(x,w*h),horizontalLineContentHeight:k}}function qE(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function Xb(f,l,h){return!(f===a.az.horizontal||!l&&!Zd(h)||l&&(rg(h)||(x=h,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(x)))));var x}function h0(f,l,h,x,w,T){const k=T[f.fontStack],D=(function(Z,Y,ee,oe){if(Z&&Z.rect)return Z;const ue=Y[ee.fontStack],me=ue&&ue[oe];return me?{rect:null,metrics:me.metrics}:null})(k&&k[l],w,f,l);if(D===null)return null;let B;if(h)B=x.verticalLineContentWidth-f.scale*is;else{const Z=qE(f.verticalAlign);B=(x.horizontalLineContentHeight-f.scale*is)*Z}return{rect:D.rect,metrics:D.metrics,baselineOffset:B}}function qS(f,l,h,x,w){const T=w[f.imageName];if(!T)return null;const k=T.paddedRect,D=T.displaySize,B={width:D[0],height:D[1],left:1,top:-3,advance:l?D[1]:D[0]};let Z;if(l)Z=x.verticalLineContentWidth-D[1]*f.scale;else{const Y=qE(f.verticalAlign);Z=(x.horizontalLineContentHeight-D[1]*f.scale)*Y}return{rect:k,metrics:B,baselineOffset:Z,imageOffset:(l?D[0]:D[1])*f.scale-is*h}}function Yb(f,l,h,x){if(x===0)return;const w=f[h],T=(f[h].x+w.metrics.advance*w.scale)*x;for(let k=l;k<=h;k++)f[k].x-=T}function WS(f,l,h){const{horizontalAlign:x,verticalAlign:w}=ZS(h),T=l[0]-f.displaySize[0]*x,k=l[1]-f.displaySize[1]*w;return{image:f,top:k,bottom:k+f.displaySize[1],left:T,right:T+f.displaySize[0]}}function cf(f){var l,h;let x=f.left,w=f.top,T=f.right-x,k=f.bottom-w;const D=(l=f.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",B=(h=f.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",Z=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(B==="proportional"){if(D==="stretchOnly"&&T/k<Z||D==="proportional"){const Y=Math.ceil(k*Z);x*=Y/T,T=Y}}else if(D==="proportional"&&B==="stretchOnly"&&Z!==0&&T/k>Z){const Y=Math.ceil(T/Z);w*=Y/k,k=Y}return{x1:x,y1:w,x2:x+T,y2:w+k}}function ju(f,l,h,x,w,T){const k=f.image;let D;if(k.content){const xe=k.content,Te=k.pixelRatio||1;D=[xe[0]/Te,xe[1]/Te,k.displaySize[0]-xe[2]/Te,k.displaySize[1]-xe[3]/Te]}const B=l.left*T,Z=l.right*T;let Y,ee,oe,ue;h==="width"||h==="both"?(ue=w[0]+B-x[3],ee=w[0]+Z+x[1]):(ue=w[0]+(B+Z-k.displaySize[0])/2,ee=ue+k.displaySize[0]);const me=l.top*T,ge=l.bottom*T;return h==="height"||h==="both"?(Y=w[1]+me-x[0],oe=w[1]+ge+x[2]):(Y=w[1]+(me+ge-k.displaySize[1])/2,oe=Y+k.displaySize[1]),{image:k,top:Y,right:ee,bottom:oe,left:ue,collisionPadding:D}}xn("ImagePosition",wi),xn("ImageAtlas",Gb),a.az=void 0,(wp=a.az||(a.az={}))[wp.none=0]="none",wp[wp.horizontal=1]="horizontal",wp[wp.vertical=2]="vertical",wp[wp.horizontalOnly=3]="horizontalOnly";const cc=128,Op=32640;function HS(f,l){const{expression:h}=l;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new ii(f+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:x,interpolationType:w}=h;let T=0;for(;T<x.length&&x[T]<=f;)T++;T=Math.max(0,T-1);let k=T;for(;k<x.length&&x[k]<f+1;)k++;k=Math.min(x.length-1,k);const D=x[T],B=x[k];return h.kind==="composite"?{kind:"composite",minZoom:D,maxZoom:B,interpolationType:w}:{kind:"camera",minZoom:D,maxZoom:B,minSize:h.evaluate(new ii(D)),maxSize:h.evaluate(new ii(B)),interpolationType:w}}}function Kb(f,l,h){let x="never";const w=f.get(l);return w?x=w:f.get(h)&&(x="always"),x}const WE=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lx(f,l,h,x,w,T,k,D,B,Z,Y,ee,oe){const ue=D?Math.min(Op,Math.round(D[0])):0,me=D?Math.min(Op,Math.round(D[1])):0;f.emplaceBack(l,h,Math.round(32*x),Math.round(32*w),T,k,(ue<<1)+(B?1:0),me,16*Z,16*Y,256*ee,256*oe)}function GS(f,l,h){f.emplaceBack(l.x,l.y,h),f.emplaceBack(l.x,l.y,h),f.emplaceBack(l.x,l.y,h),f.emplaceBack(l.x,l.y,h)}function XS(f){for(const l of f.sections)if(Ru(l.text))return!0;return!1}class Jb{constructor(l){this.layoutVertexArray=new Ze,this.indexArray=new gt,this.programConfigurations=l,this.segments=new hn,this.dynamicLayoutVertexArray=new rt,this.opacityVertexArray=new xt,this.hasVisibleVertices=!1,this.placedSymbolArray=new z}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,h,x,w){this.isEmpty()||(x&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,DE.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,ix.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,WE,!0),this.opacityVertexBuffer.itemSize=1),(x||w)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}xn("SymbolBuffers",Jb);class e1{constructor(l,h,x){this.layoutVertexArray=new l,this.layoutAttributes=h,this.indexArray=new x,this.segments=new hn,this.collisionVertexArray=new mt}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,jS.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}xn("CollisionBuffers",e1);class d0{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map((k=>k.id)),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=HS(this.zoom,h["text-size"]),this.iconSizeData=HS(this.zoom,h["icon-size"]);const x=this.layers[0].layout,w=x.get("symbol-sort-key"),T=x.get("symbol-z-order");this.canOverlap=Kb(x,"text-overlap","text-allow-overlap")!=="never"||Kb(x,"icon-overlap","icon-allow-overlap")!=="never"||x.get("text-ignore-placement")||x.get("icon-ignore-placement"),this.sortFeaturesByKey=T!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(T==="viewport-y"||T==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,x.get("symbol-placement")==="point"&&(this.writingModes=x.get("text-writing-mode").map((k=>a.az[k]))),this.stateDependentLayerIds=this.layers.filter((k=>k.isStateDependent())).map((k=>k.id)),this.sourceID=l.sourceID}createArrays(){this.text=new Jb(new Fh(this.layers,this.zoom,(l=>/^text/.test(l)))),this.icon=new Jb(new Fh(this.layers,this.zoom,(l=>/^icon/.test(l)))),this.glyphOffsetArray=new J,this.lineVertexArray=new ie,this.symbolInstances=new G,this.textAnchorOffsets=new he}calculateGlyphDependencies(l,h,x,w,T){for(const k of l)if(h[k.codePointAt(0)]=!0,(x||w)&&T){const D=a0[k];D&&(h[D.codePointAt(0)]=!0)}}populate(l,h,x){const w=this.layers[0],T=w.layout,k=T.get("text-font"),D=T.get("text-field"),B=T.get("icon-image"),Z=(D.value.kind!=="constant"||D.value.value instanceof es&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),Y=B.value.kind!=="constant"||!!B.value.value||Object.keys(B.parameters).length>0,ee=T.get("symbol-sort-key");if(this.features=[],!Z&&!Y)return;const oe=h.iconDependencies,ue=h.glyphDependencies,me=h.availableImages,ge=new ii(this.zoom);for(const{feature:xe,id:Te,index:Ue,sourceLayerIndex:Ee}of l){const Re=w._featureFilter.needGeometry,qe=ac(xe,Re);if(!w._featureFilter.filter(ge,qe,x))continue;let Ge,dt;if(Re||(qe.geometry=Nu(xe)),Z){const At=w.getValueAndResolveTokens("text-field",qe,x,me),Vt=es.factory(At),dn=this.hasRTLText=this.hasRTLText||XS(Vt);(!dn||Sl.getRTLTextPluginStatus()==="unavailable"||dn&&Sl.isParsed())&&(Ge=Il(Vt,w,qe))}if(Y){const At=w.getValueAndResolveTokens("icon-image",qe,x,me);dt=At instanceof ha?At:ha.fromString(At)}if(!Ge&&!dt)continue;const Lt=this.sortFeaturesByKey?ee.evaluate(qe,{},x):void 0;if(this.features.push({id:Te,text:Ge,icon:dt,index:Ue,sourceLayerIndex:Ee,geometry:qe.geometry,properties:xe.properties,type:i0.types[xe.type],sortKey:Lt}),dt&&(oe[dt.name]=!0),Ge){const At=k.evaluate(qe,{},x).join(","),Vt=T.get("text-rotation-alignment")!=="viewport"&&T.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.az.vertical)>=0;for(const dn of Ge.sections)if(dn.image)oe[dn.image.name]=!0;else{const Wt=Uc(Ge.toString()),Rt=dn.fontStack||At,bt=ue[Rt]=ue[Rt]||{};this.calculateGlyphDependencies(dn.text,bt,Vt,this.allowVerticalPlacement,Wt)}}}T.get("symbol-placement")==="line"&&(this.features=(function(xe){const Te={},Ue={},Ee=[];let Re=0;function qe(At){Ee.push(xe[At]),Re++}function Ge(At,Vt,dn){const Wt=Ue[At];return delete Ue[At],Ue[Vt]=Wt,Ee[Wt].geometry[0].pop(),Ee[Wt].geometry[0]=Ee[Wt].geometry[0].concat(dn[0]),Wt}function dt(At,Vt,dn){const Wt=Te[Vt];return delete Te[Vt],Te[At]=Wt,Ee[Wt].geometry[0].shift(),Ee[Wt].geometry[0]=dn[0].concat(Ee[Wt].geometry[0]),Wt}function Lt(At,Vt,dn){const Wt=dn?Vt[0][Vt[0].length-1]:Vt[0][0];return`${At}:${Wt.x}:${Wt.y}`}for(let At=0;At<xe.length;At++){const Vt=xe[At],dn=Vt.geometry,Wt=Vt.text?Vt.text.toString():null;if(!Wt){qe(At);continue}const Rt=Lt(Wt,dn),bt=Lt(Wt,dn,!0);if(Rt in Ue&&bt in Te&&Ue[Rt]!==Te[bt]){const On=dt(Rt,bt,dn),_n=Ge(Rt,bt,Ee[On].geometry);delete Te[Rt],delete Ue[bt],Ue[Lt(Wt,Ee[_n].geometry,!0)]=_n,Ee[On].geometry=null}else Rt in Ue?Ge(Rt,bt,dn):bt in Te?dt(Rt,bt,dn):(qe(At),Te[Rt]=Re-1,Ue[bt]=Re-1)}return Ee.filter((At=>At.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((xe,Te)=>xe.sortKey-Te.sortKey))}update(l,h,x){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,h,this.layers,{imagePositions:x}),this.icon.programConfigurations.updatePaintArrays(l,h,this.layers,{imagePositions:x}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,h){const x=this.lineVertexArray.length;if(l.segment!==void 0){let w=l.dist(h[l.segment+1]),T=l.dist(h[l.segment]);const k={};for(let D=l.segment+1;D<h.length;D++)k[D]={x:h[D].x,y:h[D].y,tileUnitDistanceFromAnchor:w},D<h.length-1&&(w+=h[D+1].dist(h[D]));for(let D=l.segment||0;D>=0;D--)k[D]={x:h[D].x,y:h[D].y,tileUnitDistanceFromAnchor:T},D>0&&(T+=h[D-1].dist(h[D]));for(let D=0;D<h.length;D++){const B=k[D];this.lineVertexArray.emplaceBack(B.x,B.y,B.tileUnitDistanceFromAnchor)}}return{lineStartIndex:x,lineLength:this.lineVertexArray.length-x}}addSymbols(l,h,x,w,T,k,D,B,Z,Y,ee,oe){const ue=l.indexArray,me=l.layoutVertexArray,ge=l.segments.prepareSegment(4*h.length,me,ue,this.canOverlap?k.sortKey:void 0),xe=this.glyphOffsetArray.length,Te=ge.vertexLength,Ue=this.allowVerticalPlacement&&D===a.az.vertical?Math.PI/2:0,Ee=k.text&&k.text.sections;for(let Re=0;Re<h.length;Re++){const{tl:qe,tr:Ge,bl:dt,br:Lt,tex:At,pixelOffsetTL:Vt,pixelOffsetBR:dn,minFontScaleX:Wt,minFontScaleY:Rt,glyphOffset:bt,isSDF:On,sectionIndex:_n}=h[Re],Tn=ge.vertexLength,yn=bt[1];lx(me,B.x,B.y,qe.x,yn+qe.y,At.x,At.y,x,On,Vt.x,Vt.y,Wt,Rt),lx(me,B.x,B.y,Ge.x,yn+Ge.y,At.x+At.w,At.y,x,On,dn.x,Vt.y,Wt,Rt),lx(me,B.x,B.y,dt.x,yn+dt.y,At.x,At.y+At.h,x,On,Vt.x,dn.y,Wt,Rt),lx(me,B.x,B.y,Lt.x,yn+Lt.y,At.x+At.w,At.y+At.h,x,On,dn.x,dn.y,Wt,Rt),GS(l.dynamicLayoutVertexArray,B,Ue),ue.emplaceBack(Tn,Tn+2,Tn+1),ue.emplaceBack(Tn+1,Tn+2,Tn+3),ge.vertexLength+=4,ge.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bt[0]),Re!==h.length-1&&_n===h[Re+1].sectionIndex||l.programConfigurations.populatePaintArrays(me.length,k,k.index,{imagePositions:{},canonical:oe,formattedSection:Ee&&Ee[_n]})}l.placedSymbolArray.emplaceBack(B.x,B.y,xe,this.glyphOffsetArray.length-xe,Te,Z,Y,B.segment,x?x[0]:0,x?x[1]:0,w[0],w[1],D,0,!1,0,ee)}_addCollisionDebugVertex(l,h,x,w,T,k){return h.emplaceBack(0,0),l.emplaceBack(x.x,x.y,w,T,Math.round(k.x),Math.round(k.y))}addCollisionDebugVertices(l,h,x,w,T,k,D){const B=T.segments.prepareSegment(4,T.layoutVertexArray,T.indexArray),Z=B.vertexLength,Y=T.layoutVertexArray,ee=T.collisionVertexArray,oe=D.anchorX,ue=D.anchorY;this._addCollisionDebugVertex(Y,ee,k,oe,ue,new u(l,h)),this._addCollisionDebugVertex(Y,ee,k,oe,ue,new u(x,h)),this._addCollisionDebugVertex(Y,ee,k,oe,ue,new u(x,w)),this._addCollisionDebugVertex(Y,ee,k,oe,ue,new u(l,w)),B.vertexLength+=4;const me=T.indexArray;me.emplaceBack(Z,Z+1),me.emplaceBack(Z+1,Z+2),me.emplaceBack(Z+2,Z+3),me.emplaceBack(Z+3,Z),B.primitiveLength+=4}addDebugCollisionBoxes(l,h,x,w){for(let T=l;T<h;T++){const k=this.collisionBoxArray.get(T);this.addCollisionDebugVertices(k.x1,k.y1,k.x2,k.y2,w?this.textCollisionBox:this.iconCollisionBox,k.anchorPoint,x)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new e1(ht,Rl.members,tn),this.iconCollisionBox=new e1(ht,Rl.members,tn);for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(l,h,x,w,T,k,D,B,Z){const Y={};for(let ee=h;ee<x;ee++){const oe=l.get(ee);Y.textBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},Y.textFeatureIndex=oe.featureIndex;break}for(let ee=w;ee<T;ee++){const oe=l.get(ee);Y.verticalTextBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},Y.verticalTextFeatureIndex=oe.featureIndex;break}for(let ee=k;ee<D;ee++){const oe=l.get(ee);Y.iconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},Y.iconFeatureIndex=oe.featureIndex;break}for(let ee=B;ee<Z;ee++){const oe=l.get(ee);Y.verticalIconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},Y.verticalIconFeatureIndex=oe.featureIndex;break}return Y}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const x=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,x.textBoxStartIndex,x.textBoxEndIndex,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,h){const x=l.placedSymbolArray.get(h),w=x.vertexStartIndex+4*x.numGlyphs;for(let T=x.vertexStartIndex;T<w;T+=4)l.indexArray.emplaceBack(T,T+2,T+1),l.indexArray.emplaceBack(T+1,T+2,T+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(l),x=Math.cos(l),w=[],T=[],k=[];for(let D=0;D<this.symbolInstances.length;++D){k.push(D);const B=this.symbolInstances.get(D);w.push(0|Math.round(h*B.anchorX+x*B.anchorY)),T.push(B.featureIndex)}return k.sort(((D,B)=>w[D]-w[B]||T[B]-T[D])),k}addToSortKeyRanges(l,h){const x=this.sortKeyRanges[this.sortKeyRanges.length-1];x&&x.sortKey===h?x.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const x=this.symbolInstances.get(h);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach(((w,T,k)=>{w>=0&&k.indexOf(w)===T&&this.addIndicesForPlacedSymbol(this.text,w)})),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let t1,n1;xn("SymbolBucket",d0,{omit:["layers","collisionBoxArray","features","compareText"]}),d0.MAX_GLYPHS=65535,d0.addDynamicAttributes=GS;var YS={get paint(){return n1=n1||new To({"icon-opacity":new Rn(ut.paint_symbol["icon-opacity"]),"icon-color":new Rn(ut.paint_symbol["icon-color"]),"icon-halo-color":new Rn(ut.paint_symbol["icon-halo-color"]),"icon-halo-width":new Rn(ut.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Rn(ut.paint_symbol["icon-halo-blur"]),"icon-translate":new wn(ut.paint_symbol["icon-translate"]),"icon-translate-anchor":new wn(ut.paint_symbol["icon-translate-anchor"]),"text-opacity":new Rn(ut.paint_symbol["text-opacity"]),"text-color":new Rn(ut.paint_symbol["text-color"],{runtimeType:ja,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new Rn(ut.paint_symbol["text-halo-color"]),"text-halo-width":new Rn(ut.paint_symbol["text-halo-width"]),"text-halo-blur":new Rn(ut.paint_symbol["text-halo-blur"]),"text-translate":new wn(ut.paint_symbol["text-translate"]),"text-translate-anchor":new wn(ut.paint_symbol["text-translate-anchor"])})},get layout(){return t1=t1||new To({"symbol-placement":new wn(ut.layout_symbol["symbol-placement"]),"symbol-spacing":new wn(ut.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new wn(ut.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Rn(ut.layout_symbol["symbol-sort-key"]),"symbol-z-order":new wn(ut.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new wn(ut.layout_symbol["icon-allow-overlap"]),"icon-overlap":new wn(ut.layout_symbol["icon-overlap"]),"icon-ignore-placement":new wn(ut.layout_symbol["icon-ignore-placement"]),"icon-optional":new wn(ut.layout_symbol["icon-optional"]),"icon-rotation-alignment":new wn(ut.layout_symbol["icon-rotation-alignment"]),"icon-size":new Rn(ut.layout_symbol["icon-size"]),"icon-text-fit":new wn(ut.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new wn(ut.layout_symbol["icon-text-fit-padding"]),"icon-image":new Rn(ut.layout_symbol["icon-image"]),"icon-rotate":new Rn(ut.layout_symbol["icon-rotate"]),"icon-padding":new Rn(ut.layout_symbol["icon-padding"]),"icon-keep-upright":new wn(ut.layout_symbol["icon-keep-upright"]),"icon-offset":new Rn(ut.layout_symbol["icon-offset"]),"icon-anchor":new Rn(ut.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new wn(ut.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new wn(ut.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new wn(ut.layout_symbol["text-rotation-alignment"]),"text-field":new Rn(ut.layout_symbol["text-field"]),"text-font":new Rn(ut.layout_symbol["text-font"]),"text-size":new Rn(ut.layout_symbol["text-size"]),"text-max-width":new Rn(ut.layout_symbol["text-max-width"]),"text-line-height":new wn(ut.layout_symbol["text-line-height"]),"text-letter-spacing":new Rn(ut.layout_symbol["text-letter-spacing"]),"text-justify":new Rn(ut.layout_symbol["text-justify"]),"text-radial-offset":new Rn(ut.layout_symbol["text-radial-offset"]),"text-variable-anchor":new wn(ut.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Rn(ut.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Rn(ut.layout_symbol["text-anchor"]),"text-max-angle":new wn(ut.layout_symbol["text-max-angle"]),"text-writing-mode":new wn(ut.layout_symbol["text-writing-mode"]),"text-rotate":new Rn(ut.layout_symbol["text-rotate"]),"text-padding":new wn(ut.layout_symbol["text-padding"]),"text-keep-upright":new wn(ut.layout_symbol["text-keep-upright"]),"text-transform":new Rn(ut.layout_symbol["text-transform"]),"text-offset":new Rn(ut.layout_symbol["text-offset"]),"text-allow-overlap":new wn(ut.layout_symbol["text-allow-overlap"]),"text-overlap":new wn(ut.layout_symbol["text-overlap"]),"text-ignore-placement":new wn(ut.layout_symbol["text-ignore-placement"]),"text-optional":new wn(ut.layout_symbol["text-optional"])})}};class HE{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:Si,this.defaultValue=l}evaluate(l){if(l.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(l.formattedSection))return h.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}xn("FormatSectionOverride",HE,{omit:["defaultValue"]});class Sp extends eo{constructor(l,h){super(l,YS,h)}recalculate(l,h){if(super.recalculate(l,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const x=this.layout.get("text-writing-mode");if(x){const w=[];for(const T of x)w.indexOf(T)<0&&w.push(T);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,h,x,w){const T=this.layout.get(l).evaluate(h,{},x,w),k=this._unevaluatedLayout._values[l];return k.isDataDriven()||Ih(k.value)||!T?T:(function(D,B){return B.replace(/{([^{}]+)}/g,((Z,Y)=>D&&Y in D?String(D[Y]):""))})(h.properties,T)}createBucket(l){return new d0(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of YS.paint.overridableProperties){if(!Sp.hasPaintOverride(this.layout,l))continue;const h=this.paint.get(l),x=new HE(h),w=new Fy(x,h.property.specification);let T=null;T=h.value.kind==="constant"||h.value.kind==="source"?new ga("source",w):new Dh("composite",w,h.value.zoomStops),this.paint._values[l]=new Ya(h.property,T,h.parameters)}}_handleOverridablePaintPropertyUpdate(l,h,x){return!(!this.layout||h.isDataDriven()||x.isDataDriven())&&Sp.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,h){const x=l.get("text-field"),w=YS.paint.properties[h];let T=!1;const k=D=>{for(const B of D)if(w.overrides&&w.overrides.hasOverride(B))return void(T=!0)};if(x.value.kind==="constant"&&x.value.value instanceof es)k(x.value.value.sections);else if(x.value.kind==="source"||x.value.kind==="composite"){const D=Z=>{T||(Z instanceof Qa&&Qi(Z.value)===kc?k(Z.value.sections):Z instanceof Bm?k(Z.sections):Z.eachChild(D))},B=x.value;B._styleExpression&&D(B._styleExpression.expression)}return T}}let GE;var XE={get paint(){return GE=GE||new To({"background-color":new wn(ut.paint_background["background-color"]),"background-pattern":new pp(ut.paint_background["background-pattern"]),"background-opacity":new wn(ut.paint_background["background-opacity"])})}};class Qr extends eo{constructor(l,h){super(l,XE,h)}}class KS extends eo{constructor(l,h){super(l,{},h),this.onAdd=x=>{this.implementation.onAdd&&this.implementation.onAdd(x,x.painter.context.gl)},this.onRemove=x=>{this.implementation.onRemove&&this.implementation.onRemove(x,x.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class r1{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const JS={once:!0},i1=63710088e-1;class qh{constructor(l,h){if(isNaN(l)||isNaN(h))throw new Error(`Invalid LngLat object: (${l}, ${h})`);if(this.lng=+l,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new qh(ot(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const h=Math.PI/180,x=this.lat*h,w=l.lat*h,T=Math.sin(x)*Math.sin(w)+Math.cos(x)*Math.cos(w)*Math.cos((l.lng-this.lng)*h);return i1*Math.acos(Math.min(T,1))}static convert(l){if(l instanceof qh)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new qh(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new qh(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const f0=2*Math.PI*i1;function cx(f){return f0*Math.cos(f*Math.PI/180)}function YE(f){return(180+f)/360}function e2(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function KE(f,l){return f/cx(l)}function JE(f){return 360*f-180}function ux(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function t2(f,l){return f*cx(ux(l))}class di{constructor(l,h,x=0){this.x=+l,this.y=+h,this.z=+x}static fromLngLat(l,h=0){const x=qh.convert(l);return new di(YE(x.lng),e2(x.lat),KE(h,x.lat))}toLngLat(){return new qh(JE(this.x),ux(this.y))}toAltitude(){return t2(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/f0*(l=ux(this.y),1/Math.cos(l*Math.PI/180));var l}}function o1(f,l,h){var x=2*Math.PI*6378137/256/Math.pow(2,h);return[f*x-2*Math.PI*6378137/2,l*x-2*Math.PI*6378137/2]}class Is{constructor(l,h,x){if(!(function(w,T,k){return!(w<0||w>25||k<0||k>=Math.pow(2,w)||T<0||T>=Math.pow(2,w))})(l,h,x))throw new Error(`x=${h}, y=${x}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=h,this.y=x,this.key=p0(0,l,l,h,x)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,h,x){const w=(function(k,D,B){var Z=o1(256*k,256*(D=Math.pow(2,B)-D-1),B),Y=o1(256*(k+1),256*(D+1),B);return Z[0]+","+Z[1]+","+Y[0]+","+Y[1]})(this.x,this.y,this.z),T=(function(k,D,B){let Z,Y="";for(let ee=k;ee>0;ee--)Z=1<<ee-1,Y+=(D&Z?1:0)+(B&Z?2:0);return Y})(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(x==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,T).replace(/{bbox-epsg-3857}/g,w)}isChildOf(l){const h=this.z-l.z;return h>0&&l.x===this.x>>h&&l.y===this.y>>h}getTilePoint(l){const h=Math.pow(2,this.z);return new u((l.x*h-this.x)*Qe,(l.y*h-this.y)*Qe)}toString(){return`${this.z}/${this.x}/${this.y}`}}class eA{constructor(l,h){this.wrap=l,this.canonical=h,this.key=p0(l,h.z,h.z,h.x,h.y)}}class Dl{constructor(l,h,x,w,T){if(this.terrainRttPosMatrix32f=null,l<x)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${x}`);this.overscaledZ=l,this.wrap=h,this.canonical=new Is(x,+w,+T),this.key=p0(h,l,x,w,T)}clone(){return new Dl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-l;return l>this.canonical.z?new Dl(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Dl(l,this.wrap,l,this.canonical.x>>h,this.canonical.y>>h)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(l,h){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const x=this.canonical.z-l;return l>this.canonical.z?p0(this.wrap*+h,l,this.canonical.z,this.canonical.x,this.canonical.y):p0(this.wrap*+h,l,l,this.canonical.x>>x,this.canonical.y>>x)}isChildOf(l){if(l.wrap!==this.wrap||this.overscaledZ-l.overscaledZ<=0)return!1;if(l.overscaledZ===0)return this.overscaledZ>0;const h=this.canonical.z-l.canonical.z;return!(h<0)&&l.canonical.x===this.canonical.x>>h&&l.canonical.y===this.canonical.y>>h}children(l){if(this.overscaledZ>=l)return[new Dl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,x=2*this.canonical.x,w=2*this.canonical.y;return[new Dl(h,this.wrap,h,x,w),new Dl(h,this.wrap,h,x+1,w),new Dl(h,this.wrap,h,x,w+1),new Dl(h,this.wrap,h,x+1,w+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new Dl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new Dl(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new eA(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new di(l.x-this.wrap,l.y))}}function p0(f,l,h,x,w){(f*=2)<0&&(f=-1*f-1);const T=1<<h;return(T*T*f+T*w+x).toString(36)+h.toString(36)+l.toString(36)}function hx(f,l){return l?f.properties[l]:f.id}function n2(f,l){const h={id:f.id};if(l.removeAllProperties&&(delete f.removeProperties,delete f.addOrUpdateProperties,delete l.removeProperties),l.removeProperties)for(const x of l.removeProperties){const w=f.addOrUpdateProperties.findIndex((T=>T.key===x));w>-1&&f.addOrUpdateProperties.splice(w,1)}return(f.removeAllProperties||l.removeAllProperties)&&(h.removeAllProperties=!0),(f.removeProperties||l.removeProperties)&&(h.removeProperties=[...f.removeProperties||[],...l.removeProperties||[]]),(f.addOrUpdateProperties||l.addOrUpdateProperties)&&(h.addOrUpdateProperties=[...f.addOrUpdateProperties||[],...l.addOrUpdateProperties||[]]),(f.newGeometry||l.newGeometry)&&(h.newGeometry=l.newGeometry||f.newGeometry),h}function dx(f){var l,h;if(!f)return{};const x={};return x.removeAll=f.removeAll,x.remove=new Set(f.remove||[]),x.add=new Map((l=f.add)===null||l===void 0?void 0:l.map((w=>[w.id,w]))),x.update=new Map((h=f.update)===null||h===void 0?void 0:h.map((w=>[w.id,w]))),x}xn("CanonicalTileID",Is),xn("OverscaledTileID",Dl,{omit:["terrainRttPosMatrix32f"]});class Cp{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){const h=new Cp;return h.extend(l(new u(this.minX,this.minY))),h.extend(l(new u(this.maxX,this.minY))),h.extend(l(new u(this.minX,this.maxY))),h.extend(l(new u(this.maxX,this.maxY))),h}static fromPoints(l){const h=new Cp;for(const x of l)h.extend(x);return h}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}class r2{constructor(l){this._stringToNumber={},this._numberToString=[];for(let h=0;h<l.length;h++){const x=l[h];this._stringToNumber[x]=h,this._numberToString[h]=x}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class s1{constructor(l,h,x,w,T){this.type="Feature",this._vectorTileFeature=l,this._x=x,this._y=w,this._z=h,this.properties=l.properties,this.id=T}projectPoint(l,h,x,w){return[360*(l.x+h)/w-180,360/Math.PI*Math.atan(Math.exp((1-2*(l.y+x)/w)*Math.PI))-90]}projectLine(l,h,x,w){return l.map((T=>this.projectPoint(T,h,x,w)))}get geometry(){if(this._geometry)return this._geometry;const l=this._vectorTileFeature,h=l.extent*Math.pow(2,this._z),x=l.extent*this._x,w=l.extent*this._y,T=l.loadGeometry();switch(l.type){case 1:{const k=[];for(const B of T)k.push(B[0]);const D=this.projectLine(k,x,w,h);this._geometry=k.length===1?{type:"Point",coordinates:D[0]}:{type:"MultiPoint",coordinates:D};break}case 2:{const k=T.map((D=>this.projectLine(D,x,w,h)));this._geometry=k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k};break}case 3:{const k=RE(T),D=[];for(const B of k)D.push(B.map((Z=>this.projectLine(Z,x,w,h))));this._geometry=D.length===1?{type:"Polygon",coordinates:D[0]}:{type:"MultiPolygon",coordinates:D};break}default:throw new Error(`unknown feature type: ${l.type}`)}return this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&h!=="_x"&&h!=="_y"&&h!=="_z"&&(l[h]=this[h]);return l}}class Tp{_name;dataBuffer;nullabilityBuffer;_size;constructor(l,h,x){this._name=l,this.dataBuffer=h,typeof x=="number"?this._size=x:(this.nullabilityBuffer=x,this._size=x.size())}getValue(l){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(l)?null:this.getValueFromBuffer(l)}has(l){return this.nullabilityBuffer&&this.nullabilityBuffer.get(l)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class a1 extends Tp{}class l1 extends a1{getValueFromBuffer(l){return this.dataBuffer[l]}}class i2 extends a1{getValueFromBuffer(l){return this.dataBuffer[l]}}class o2 extends Tp{delta;constructor(l,h,x,w){super(l,h,w),this.delta=x}}class s2 extends o2{constructor(l,h,x,w){super(l,Int32Array.of(h),x,w)}getValueFromBuffer(l){return this.dataBuffer[0]+l*this.delta}}class a2 extends Tp{constructor(l,h,x){super(l,Int32Array.of(h),x)}getValueFromBuffer(l){return this.dataBuffer[0]}}class kp{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(l,h,x,w,T=4096){this._name=l,this._geometryVector=h,this._idVector=x,this._propertyVectors=w,this._extent=T}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(l){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((h=>[h.name,h])))),this.propertyVectorsMap.get(l)}*[Symbol.iterator](){const l=this.geometryVector[Symbol.iterator]();let h=0;for(;h<this.numFeatures;){let x;this.idVector&&(x=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(h)):this.idVector.getValue(h));const w=l?.next().value,T={};for(const k of this.propertyVectors){if(!k)continue;const D=k.name,B=k.getValue(h);B!==null&&(T[D]=B)}h++,yield{id:x,geometry:w,properties:T}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const l=[],h=this.geometryVector.getGeometries();for(let x=0;x<this.numFeatures;x++){let w;this.idVector&&(w=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(x)):this.idVector.getValue(x));const T={coordinates:h[x],type:this.geometryVector.geometryType(x)},k={};for(const D of this.propertyVectors){if(!D)continue;const B=D.name,Z=D.getValue(x);Z!==null&&(k[B]=Z)}l.push({id:w,geometry:T,properties:k})}return l}containsMaxSaveIntegerValues(l){return l instanceof l1||l instanceof a2&&l instanceof s2||l instanceof i2}}class tA{value;constructor(l){this.value=l}get(){return this.value}set(l){this.value=l}increment(){return this.value++}add(l){this.value+=l}}var Tr,Vu,Us,Qu,Ep,Ma,Wo,_s,uc,nl;function bs(f,l,h){const x=new Int32Array(h);let w=0,T=l.get();for(let k=0;k<x.length;k++){let D=f[T++],B=127&D;D<128||(D=f[T++],B|=(127&D)<<7,D<128||(D=f[T++],B|=(127&D)<<14,D<128||(D=f[T++],B|=(127&D)<<21,D<128||(D=f[T++],B|=(15&D)<<28)))),x[w++]=B}return l.set(T),x}function fx(f,l,h){const x=new BigInt64Array(h);for(let w=0;w<x.length;w++)x[w]=c1(f,l);return x}function nA(f,l){let h,x;return x=f[l.get()],l.increment(),h=127&x,x<128?h:(x=f[l.get()],l.increment(),h|=(127&x)<<7,x<128?h:(x=f[l.get()],l.increment(),h|=(127&x)<<14,x<128?h:(x=f[l.get()],l.increment(),h|=(127&x)<<21,x<128?h:(x=f[l.get()],h|=(15&x)<<28,(function(w,T,k){let D,B;if(B=T[k.get()],k.increment(),D=(112&B)>>4,B<128||(B=T[k.get()],k.increment(),D|=(127&B)<<3,B<128)||(B=T[k.get()],k.increment(),D|=(127&B)<<10,B<128)||(B=T[k.get()],k.increment(),D|=(127&B)<<17,B<128)||(B=T[k.get()],k.increment(),D|=(127&B)<<24,B<128)||(B=T[k.get()],k.increment(),D|=(1&B)<<31,B<128))return 4294967296*D+(w>>>0);throw new Error("Expected varint not more than 10 bytes")})(h,f,l)))))}function m0(f,l,h,x){throw new Error("FastPFor is not implemented yet.")}function Zs(f){return f>>>1^-(1&f)}function wg(f){return f>>1n^-(1n&f)}function c1(f,l){let h=0n,x=0,w=l.get();for(;w<f.length;){const T=f[w++];if(h|=BigInt(127&T)<<BigInt(x),!(128&T))break;if(x+=7,x>=64)throw new Error("Varint too long")}return l.set(w),h}function Wh(f,l,h){const x=new Int32Array(h);let w=0;for(let T=0;T<l;T++){const k=f[T];x.fill(f[T+l],w,w+k),w+=k}return x}function rA(f,l,h){const x=new BigInt64Array(h);let w=0;for(let T=0;T<l;T++){const k=Number(f[T]);x.fill(f[T+l],w,w+k),w+=k}return x}function iA(f,l,h){const x=new Float64Array(h);let w=0;for(let T=0;T<l;T++){const k=f[T];x.fill(f[T+l],w,w+k),w+=k}return x}function Ap(f){const l=f.length/4*4;let h=1;if(l>=4)for(let x=f[0];h<l-4;h+=4)x=f[h]+=x,x=f[h+1]+=x,x=f[h+2]+=x,x=f[h+3]+=x;for(;h!=f.length;)f[h]+=f[h-1],++h}function l2(f){f[0]=f[0]>>>1^-(1&f[0]),f[1]=f[1]>>>1^-(1&f[1]);const l=f.length/4*4;let h=2;if(l>=4)for(;h<l-4;h+=4){const x=f[h],w=f[h+1],T=f[h+2],k=f[h+3];f[h]=(x>>>1^-(1&x))+f[h-2],f[h+1]=(w>>>1^-(1&w))+f[h-1],f[h+2]=(T>>>1^-(1&T))+f[h],f[h+3]=(k>>>1^-(1&k))+f[h+1]}for(;h!=f.length;h+=2)f[h]=(f[h]>>>1^-(1&f[h]))+f[h-2],f[h+1]=(f[h+1]>>>1^-(1&f[h+1]))+f[h-1]}(function(f){f.NONE="NONE",f.DELTA="DELTA",f.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",f.RLE="RLE",f.MORTON="MORTON",f.PDE="PDE"})(Tr||(Tr={})),(function(f){f.NONE="NONE",f.FAST_PFOR="FAST_PFOR",f.VARINT="VARINT",f.ALP="ALP"})(Vu||(Vu={})),(function(f){f.PRESENT="PRESENT",f.DATA="DATA",f.OFFSET="OFFSET",f.LENGTH="LENGTH"})(Us||(Us={}));class c2{_dictionaryType;_offsetType;_lengthType;constructor(l,h,x){this._dictionaryType=l,this._offsetType=h,this._lengthType=x}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Ra(f,l){const h=(function(x,w){const T=x[w.get()],k=Object.values(Us)[T>>4];let D=null;switch(k){case Us.DATA:D=new c2(Object.values(Qu)[15&T]);break;case Us.OFFSET:D=new c2(null,Object.values(Ep)[15&T]);break;case Us.LENGTH:D=new c2(null,null,Object.values(Ma)[15&T])}w.increment();const B=x[w.get()],Z=Object.values(Tr)[B>>5],Y=Object.values(Tr)[B>>2&7],ee=Object.values(Vu)[3&B];w.increment();const oe=bs(x,w,2),ue=oe[0];return{physicalStreamType:k,logicalStreamType:D,logicalLevelTechnique1:Z,logicalLevelTechnique2:Y,physicalLevelTechnique:ee,numValues:ue,byteLength:oe[1],decompressedCount:ue}})(f,l);return h.logicalLevelTechnique1===Tr.MORTON?(function(x,w,T){const k=bs(w,T,2);return{physicalStreamType:x.physicalStreamType,logicalStreamType:x.logicalStreamType,logicalLevelTechnique1:x.logicalLevelTechnique1,logicalLevelTechnique2:x.logicalLevelTechnique2,physicalLevelTechnique:x.physicalLevelTechnique,numValues:x.numValues,byteLength:x.byteLength,decompressedCount:x.decompressedCount,numBits:k[0],coordinateShift:k[1]}})(h,f,l):Tr.RLE!==h.logicalLevelTechnique1&&Tr.RLE!==h.logicalLevelTechnique2||Vu.NONE===h.physicalLevelTechnique?h:(function(x,w,T){const k=bs(w,T,2);return{physicalStreamType:x.physicalStreamType,logicalStreamType:x.logicalStreamType,logicalLevelTechnique1:x.logicalLevelTechnique1,logicalLevelTechnique2:x.logicalLevelTechnique2,physicalLevelTechnique:x.physicalLevelTechnique,numValues:x.numValues,byteLength:x.byteLength,decompressedCount:k[1],runs:k[0],numRleValues:k[1]}})(h,f,l)}(function(f){f.NONE="NONE",f.SINGLE="SINGLE",f.SHARED="SHARED",f.VERTEX="VERTEX",f.MORTON="MORTON",f.FSST="FSST"})(Qu||(Qu={})),(function(f){f.VERTEX="VERTEX",f.INDEX="INDEX",f.STRING="STRING",f.KEY="KEY"})(Ep||(Ep={})),(function(f){f.VAR_BINARY="VAR_BINARY",f.GEOMETRIES="GEOMETRIES",f.PARTS="PARTS",f.RINGS="RINGS",f.TRIANGLES="TRIANGLES",f.SYMBOL="SYMBOL",f.DICTIONARY="DICTIONARY"})(Ma||(Ma={})),(function(f){f[f.FLAT=0]="FLAT",f[f.CONST=1]="CONST",f[f.SEQUENCE=2]="SEQUENCE",f[f.DICTIONARY=3]="DICTIONARY",f[f.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Wo||(Wo={}));class Uu{values;_size;constructor(l,h){this.values=l,this._size=h}get(l){const h=Math.floor(l/8);return(this.values[h]>>l%8&1)==1}set(l,h){const x=Math.floor(l/8);this.values[x]=this.values[x]|(h?1:0)<<l%8}getInt(l){const h=Math.floor(l/8);return this.values[h]>>l%8&1}size(){return this._size}getBuffer(){return this.values}}function Ia(f,l,h,x,w){return(function(T,k,D){switch(k.logicalLevelTechnique1){case Tr.DELTA:return k.logicalLevelTechnique2===Tr.RLE?(function(B,Z,Y){const ee=new Int32Array(Y);let oe=0,ue=0;for(let me=0;me<Z;me++){const ge=B[me],xe=Zs(B[me+Z]);for(let Te=0;Te<ge;Te++)ue+=xe,ee[oe++]=ue}return ee})(T,k.runs,k.numRleValues):((function(B){B[0]=B[0]>>>1^-(1&B[0]);const Z=B.length/4*4;let Y=1;if(Z>=4)for(;Y<Z-4;Y+=4){const ee=B[Y],oe=B[Y+1],ue=B[Y+2],me=B[Y+3];B[Y]=(ee>>>1^-(1&ee))+B[Y-1],B[Y+1]=(oe>>>1^-(1&oe))+B[Y],B[Y+2]=(ue>>>1^-(1&ue))+B[Y+1],B[Y+3]=(me>>>1^-(1&me))+B[Y+2]}for(;Y!=B.length;++Y)B[Y]=(B[Y]>>>1^-(1&B[Y]))+B[Y-1]})(T),T);case Tr.RLE:return(function(B,Z,Y){return Y?(function(ee,oe,ue){const me=new Int32Array(ue);let ge=0;for(let xe=0;xe<oe;xe++){const Te=ee[xe];let Ue=ee[xe+oe];Ue=Ue>>>1^-(1&Ue),me.fill(Ue,ge,ge+Te),ge+=Te}return me})(B,Z.runs,Z.numRleValues):Wh(B,Z.runs,Z.numRleValues)})(T,k,D);case Tr.MORTON:return Ap(T),T;case Tr.COMPONENTWISE_DELTA:return l2(T),T;case Tr.NONE:return D&&(function(B){for(let Z=0;Z<B.length;Z++){const Y=B[Z];B[Z]=Y>>>1^-(1&Y)}})(T),T;default:throw new Error(`The specified Logical level technique is not supported: ${k.logicalLevelTechnique1}`)}})(u1(f,l,h),h,x)}function Pp(f,l,h){return(function(x,w){if(w.logicalLevelTechnique1===Tr.DELTA&&w.logicalLevelTechnique2===Tr.NONE)return(function(k){const D=new Int32Array(k.length+1);D[0]=0,D[1]=Zs(k[0]);let B=D[1],Z=2;for(;Z!=D.length;++Z){const Y=k[Z-1];B+=Y>>>1^-(1&Y),D[Z]=D[Z-1]+B}return D})(x);if(w.logicalLevelTechnique1===Tr.RLE&&w.logicalLevelTechnique2===Tr.NONE)return(function(k,D,B){const Z=new Int32Array(B+1);Z[0]=0;let Y=1,ee=Z[0];for(let oe=0;oe<D;oe++){const ue=k[oe],me=k[oe+D];for(let ge=Y;ge<Y+ue;ge++)Z[ge]=me+ee,ee=Z[ge];Y+=ue}return Z})(x,w.runs,w.numRleValues);if(w.logicalLevelTechnique1===Tr.NONE&&w.logicalLevelTechnique2===Tr.NONE){(function(k){let D=0;for(let B=0;B<k.length;B++)k[B]+=D,D=k[B]})(x);const T=new Int32Array(w.numValues+1);return T[0]=0,T.set(x,1),T}if(w.logicalLevelTechnique1===Tr.DELTA&&w.logicalLevelTechnique2===Tr.RLE){const T=(function(k,D,B){const Z=new Int32Array(B+1);Z[0]=0;let Y=1,ee=Z[0];for(let oe=0;oe<D;oe++){const ue=k[oe];let me=k[oe+D];me=me>>>1^-(1&me);for(let ge=Y;ge<Y+ue;ge++)Z[ge]=me+ee,ee=Z[ge];Y+=ue}return Z})(x,w.runs,w.numRleValues);return Ap(T),T}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(u1(f,l,h),h)}function u1(f,l,h){const x=h.physicalLevelTechnique;if(x===Vu.FAST_PFOR)return m0();if(x===Vu.VARINT)return bs(f,l,h.numValues);if(x===Vu.NONE){const w=l.get();l.add(h.byteLength);const T=f.subarray(w,l.get());return new Int32Array(T)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function u2(f,l,h,x){const w=u1(f,l,h);if(w.length===1){const T=w[0];return x?Zs(T):T}return x?(function(T){return Zs(T[1])})(w):(function(T){return T[1]})(w)}function h2(f,l,h){return(function(x){if(x.length==2){const w=Zs(x[1]);return[w,w]}return[Zs(x[2]),Zs(x[3])]})(u1(f,l,h))}function Og(f,l,h){return(function(x){if(x.length==2){const w=wg(x[1]);return[w,w]}return[wg(x[2]),wg(x[3])]})(fx(f,l,h.numValues))}function g0(f,l,h,x){return(function(w,T,k){switch(T.logicalLevelTechnique1){case Tr.DELTA:return T.logicalLevelTechnique2===Tr.RLE?(function(D,B,Z){const Y=new BigInt64Array(Z);let ee=0,oe=0n;for(let ue=0;ue<B;ue++){const me=Number(D[ue]),ge=wg(D[ue+B]);for(let xe=0;xe<me;xe++)oe+=ge,Y[ee++]=oe}return Y})(w,T.runs,T.numRleValues):((function(D){D[0]=D[0]>>1n^-(1n&D[0]);const B=D.length/4*4;let Z=1;if(B>=4)for(;Z<B-4;Z+=4){const Y=D[Z],ee=D[Z+1],oe=D[Z+2],ue=D[Z+3];D[Z]=(Y>>1n^-(1n&Y))+D[Z-1],D[Z+1]=(ee>>1n^-(1n&ee))+D[Z],D[Z+2]=(oe>>1n^-(1n&oe))+D[Z+1],D[Z+3]=(ue>>1n^-(1n&ue))+D[Z+2]}for(;Z!=D.length;++Z)D[Z]=(D[Z]>>1n^-(1n&D[Z]))+D[Z-1]})(w),w);case Tr.RLE:return(function(D,B,Z){return Z?(function(Y,ee,oe){const ue=new BigInt64Array(oe);let me=0;for(let ge=0;ge<ee;ge++){const xe=Number(Y[ge]);let Te=Y[ge+ee];Te=Te>>1n^-(1n&Te),ue.fill(Te,me,me+xe),me+=xe}return ue})(D,B.runs,B.numRleValues):rA(D,B.runs,B.numRleValues)})(w,T,k);case Tr.NONE:return k&&(function(D){for(let B=0;B<D.length;B++){const Z=D[B];D[B]=Z>>1n^-(1n&Z)}})(w),w;default:throw new Error(`The specified Logical level technique is not supported: ${T.logicalLevelTechnique1}`)}})(fx(f,l,h.numValues),h,x)}function d2(f,l,h,x){const w=fx(f,l,h.numValues);if(w.length===1){const T=w[0];return x?wg(T):T}return x?(function(T){return wg(T[1])})(w):(function(T){return T[1]})(w)}function f2(f,l,h,x,w){return(function(T,k,D,B){switch(k.logicalLevelTechnique1){case Tr.DELTA:return k.logicalLevelTechnique2===Tr.RLE&&(T=Wh(T,k.runs,k.numRleValues)),(function(Z,Y){const ee=new Int32Array(Z.size());let oe=0;Z.get(0)?(ee[0]=Z.get(0)?Y[0]>>>1^-(1&Y[0]):0,oe=1):ee[0]=0;let ue=1;for(;ue!=ee.length;++ue)ee[ue]=Z.get(ue)?ee[ue-1]+(Y[oe]>>>1^-(1&Y[oe++])):ee[ue-1];return ee})(B,T);case Tr.RLE:return(function(Z,Y,ee,oe){const ue=Y;return ee?(function(me,ge,xe){const Te=new Int32Array(me.size());let Ue=0;for(let Ee=0;Ee<xe;Ee++){const Re=ge[Ee];let qe=ge[Ee+xe];qe=qe>>>1^-(1&qe);for(let Ge=Ue;Ge<Ue+Re;Ge++)me.get(Ge)?Te[Ge]=qe:(Te[Ge]=0,Ue++);Ue+=Re}return Te})(oe,Z,ue.runs):(function(me,ge,xe){const Te=new Int32Array(me.size());let Ue=0;for(let Ee=0;Ee<xe;Ee++){const Re=ge[Ee],qe=ge[Ee+xe];for(let Ge=Ue;Ge<Ue+Re;Ge++)me.get(Ge)?Te[Ge]=qe:(Te[Ge]=0,Ue++);Ue+=Re}return Te})(oe,Z,ue.runs)})(T,k,D,B);case Tr.MORTON:return Ap(T),T;case Tr.COMPONENTWISE_DELTA:return l2(T),T;case Tr.NONE:return T=D?(function(Z,Y){const ee=new Int32Array(Z.size());let oe=0,ue=0;for(;ue!=ee.length;++ue)if(Z.get(ue)){const me=Y[oe++];ee[ue]=me>>>1^-(1&me)}else ee[ue]=0;return ee})(B,T):(function(Z,Y){const ee=new Int32Array(Z.size());let oe=0,ue=0;for(;ue!=ee.length;++ue)ee[ue]=Z.get(ue)?Y[oe++]:0;return ee})(B,T),T;default:throw new Error("The specified Logical level technique is not supported")}})(h.physicalLevelTechnique===Vu.FAST_PFOR?m0():bs(f,l,h.numValues),h,x,w)}function uf(f,l,h,x){const w=f.logicalLevelTechnique1;if(w===Tr.RLE)return f.runs===1?Wo.CONST:Wo.FLAT;const T=l instanceof Uu?l.size():l;if(w===Tr.DELTA&&f.logicalLevelTechnique2===Tr.RLE){const k=f.runs,D=2;if(f.numRleValues!==T)return Wo.FLAT;if(k===1)return Wo.SEQUENCE;if(k===2){const B=x.get();let Z;if(f.physicalLevelTechnique===Vu.VARINT)Z=bs(h,x,4);else{const Y=x.get();Z=new Int32Array(h.buffer,h.byteOffset+Y,4)}if(x.set(B),Z[2]===D&&Z[3]===D)return Wo.SEQUENCE}}return f.numValues===1?Wo.CONST:Wo.FLAT}class y0 extends a1{getValueFromBuffer(l){return this.dataBuffer[l]}}class p2 extends o2{constructor(l,h,x,w){super(l,BigInt64Array.of(h),x,w)}getValueFromBuffer(l){return this.dataBuffer[0]+BigInt(l)*this.delta}}class hf{_geometryOffsets;_partOffsets;_ringOffsets;constructor(l,h,x){this._geometryOffsets=l,this._partOffsets=h,this._ringOffsets=x}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function px(f,l,h){return{x:h1(f,l)-h,y:h1(f>>1,l)-h}}function h1(f,l){let h=0;for(let x=0;x<l;x++)h|=(f&1<<2*x)>>x;return h}(function(f){f[f.POINT=0]="POINT",f[f.LINESTRING=1]="LINESTRING",f[f.POLYGON=2]="POLYGON",f[f.MULTIPOINT=3]="MULTIPOINT",f[f.MULTILINESTRING=4]="MULTILINESTRING",f[f.MULTIPOLYGON=5]="MULTIPOLYGON"})(_s||(_s={})),(function(f){f[f.POINT=0]="POINT",f[f.LINESTRING=1]="LINESTRING",f[f.POLYGON=2]="POLYGON"})(uc||(uc={})),(function(f){f[f.MORTON=0]="MORTON",f[f.VEC_2=1]="VEC_2",f[f.VEC_3=2]="VEC_3"})(nl||(nl={}));class d1{createPoint(l){return[[l]]}createMultiPoint(l){return l.map((h=>[h]))}createLineString(l){return[l]}createMultiLineString(l){return l}createPolygon(l,h){return[l].concat(h)}createMultiPolygon(l){return l.flat()}}function m2(f){const l=new Array(f.numGeometries);let h=1,x=1,w=1,T=0;const k=new d1;let D=0,B=0;const Z=f.mortonSettings,Y=f.topologyVector,ee=Y.geometryOffsets,oe=Y.partOffsets,ue=Y.ringOffsets,me=f.vertexOffsets,ge=f.containsPolygonGeometry(),xe=f.vertexBuffer;for(let Te=0;Te<f.numGeometries;Te++){const Ue=f.geometryType(Te);if(Ue===_s.POINT){if(me&&me.length!==0)if(f.vertexBufferType===nl.VEC_2){const Ee=2*me[B++],Re=new u(xe[Ee],xe[Ee+1]);l[T++]=k.createPoint(Re)}else{const Ee=px(xe[me[B++]],Z.numBits,Z.coordinateShift),Re=new u(Ee.x,Ee.y);l[T++]=k.createPoint(Re)}else{const Ee=new u(xe[D++],xe[D++]);l[T++]=k.createPoint(Ee)}ee&&w++,oe&&h++,ue&&x++}else if(Ue===_s.MULTIPOINT){const Ee=ee[w]-ee[w-1];w++;const Re=new Array(Ee);if(me&&me.length!==0){for(let qe=0;qe<Ee;qe++){const Ge=2*me[B++];Re[qe]=new u(xe[Ge],xe[Ge+1])}l[T++]=k.createMultiPoint(Re)}else{for(let qe=0;qe<Ee;qe++){const Ge=xe[D++],dt=xe[D++];Re[qe]=new u(Ge,dt)}l[T++]=k.createMultiPoint(Re)}}else if(Ue===_s.LINESTRING){let Ee,Re=0;ge?(Re=ue[x]-ue[x-1],x++):Re=oe[h]-oe[h-1],h++,me&&me.length!==0?(Ee=f.vertexBufferType===nl.VEC_2?yx(xe,me,B,Re,!1):y2(xe,me,B,Re,!1,Z),B+=Re):(Ee=g2(xe,D,Re,!1),D+=2*Re),l[T++]=k.createLineString(Ee),ee&&w++}else if(Ue===_s.POLYGON){const Ee=oe[h]-oe[h-1];h++;const Re=new Array(Ee-1);let qe=ue[x]-ue[x-1];if(x++,me&&me.length!==0){const Ge=f.vertexBufferType===nl.VEC_2?f1(xe,me,B,qe):gx(xe,me,B,qe,0,Z);B+=qe;for(let dt=0;dt<Re.length;dt++)qe=ue[x]-ue[x-1],x++,Re[dt]=f.vertexBufferType===nl.VEC_2?f1(xe,me,B,qe):gx(xe,me,B,qe,0,Z),B+=qe;l[T++]=k.createPolygon(Ge,Re)}else{const Ge=mx(xe,D,qe);D+=2*qe;for(let dt=0;dt<Re.length;dt++)qe=ue[x]-ue[x-1],x++,Re[dt]=mx(xe,D,qe),D+=2*qe;l[T++]=k.createPolygon(Ge,Re)}ee&&w++}else if(Ue===_s.MULTILINESTRING){const Ee=ee[w]-ee[w-1];w++;const Re=new Array(Ee);if(me&&me.length!==0){for(let qe=0;qe<Ee;qe++){let Ge=0;ge?(Ge=ue[x]-ue[x-1],x++):Ge=oe[h]-oe[h-1],h++;const dt=f.vertexBufferType===nl.VEC_2?yx(xe,me,B,Ge,!1):y2(xe,me,B,Ge,!1,Z);Re[qe]=dt,B+=Ge}l[T++]=k.createMultiLineString(Re)}else{for(let qe=0;qe<Ee;qe++){let Ge=0;ge?(Ge=ue[x]-ue[x-1],x++):Ge=oe[h]-oe[h-1],h++,Re[qe]=g2(xe,D,Ge,!1),D+=2*Ge}l[T++]=k.createMultiLineString(Re)}}else{if(Ue!==_s.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const Ee=ee[w]-ee[w-1];w++;const Re=new Array(Ee);let qe=0;if(me&&me.length!==0){for(let Ge=0;Ge<Ee;Ge++){const dt=oe[h]-oe[h-1];h++;const Lt=new Array(dt-1);qe=ue[x]-ue[x-1],x++;const At=f.vertexBufferType===nl.VEC_2?f1(xe,me,B,qe):gx(xe,me,B,qe,0,Z);B+=qe;for(let Vt=0;Vt<Lt.length;Vt++)qe=ue[x]-ue[x-1],x++,Lt[Vt]=f.vertexBufferType===nl.VEC_2?f1(xe,me,B,qe):gx(xe,me,B,qe,0,Z),B+=qe;Re[Ge]=k.createPolygon(At,Lt)}l[T++]=k.createMultiPolygon(Re)}else{for(let Ge=0;Ge<Ee;Ge++){const dt=oe[h]-oe[h-1];h++;const Lt=new Array(dt-1);qe=ue[x]-ue[x-1],x++;const At=mx(xe,D,qe);D+=2*qe;for(let Vt=0;Vt<Lt.length;Vt++){const dn=ue[x]-ue[x-1];x++,Lt[Vt]=mx(xe,D,dn),D+=2*dn}Re[Ge]=k.createPolygon(At,Lt)}l[T++]=k.createMultiPolygon(Re)}}}}return l}function mx(f,l,h){return g2(f,l,h,!0)}function f1(f,l,h,x){return yx(f,l,h,x,!0)}function gx(f,l,h,x,w,T){return y2(f,l,h,x,!0,T)}function g2(f,l,h,x){const w=new Array(x?h+1:h);for(let T=0;T<2*h;T+=2)w[T/2]=new u(f[l+T],f[l+T+1]);return x&&(w[w.length-1]=w[0]),w}function yx(f,l,h,x,w){const T=new Array(w?x+1:x);for(let k=0;k<2*x;k+=2){const D=2*l[h+k/2];T[k/2]=new u(f[D],f[D+1])}return w&&(T[T.length-1]=T[0]),T}function y2(f,l,h,x,w,T){const k=new Array(w?x+1:x);for(let D=0;D<x;D++){const B=px(f[l[h+D]],T.numBits,T.coordinateShift);k[D]=new u(B.x,B.y)}return w&&(k[k.length-1]=k[0]),k}class vx{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(l,h,x,w,T){this._vertexBufferType=l,this._topologyVector=h,this._vertexOffsets=x,this._vertexBuffer=w,this._mortonSettings=T}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const l=m2(this);let h=0;for(;h<this.numGeometries;)yield{coordinates:l[h],type:this.geometryType(h)},h++}getSimpleEncodedVertex(l){const h=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[h],this.vertexBuffer[h+1]]}getVertex(l){if(this.vertexOffsets&&this.mortonSettings){const x=px(this.vertexBuffer[this.vertexOffsets[l]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[x.x,x.y]}const h=this.vertexOffsets?2*this.vertexOffsets[l]:2*l;return[this.vertexBuffer[h],this.vertexBuffer[h+1]]}getGeometries(){return m2(this)}get mortonSettings(){return this._mortonSettings}}class xx extends vx{_numGeometries;_geometryType;constructor(l,h,x,w,T,k,D){super(x,w,T,k,D),this._numGeometries=l,this._geometryType=h}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===_s.POLYGON||this._geometryType===_s.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class _x extends vx{_geometryTypes;constructor(l,h,x,w,T,k){super(l,x,w,T,k),this._geometryTypes=h}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let l=0;l<this.numGeometries;l++)if(this.geometryType(l)===_s.POLYGON||this.geometryType(l)===_s.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class oA{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(l,h,x,w){this._triangleOffsets=l,this._indexBuffer=h,this._vertexBuffer=x,this._topologyVector=w}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const l=new Array(this.numGeometries),h=this._topologyVector,x=h.partOffsets,w=h.ringOffsets,T=h.geometryOffsets;let k=0,D=1,B=1,Z=1;for(let Y=0;Y<this.numGeometries;Y++)switch(this.geometryType(Y)){case _s.POLYGON:{const ee=x[D]-x[D-1];D++;const oe=[];for(let ue=0;ue<ee;ue++){const me=w[B]-w[B-1];B++;const ge=[];for(let xe=0;xe<me;xe++){const Te=this._vertexBuffer[k++],Ue=this._vertexBuffer[k++];ge.push(new u(Te,Ue))}ge.length>0&&ge.push(ge[0]),oe.push(ge)}l[Y]=oe,T&&Z++}break;case _s.MULTIPOLYGON:{const ee=T[Z]-T[Z-1];Z++;const oe=[];for(let ue=0;ue<ee;ue++){const me=x[D]-x[D-1];D++;for(let ge=0;ge<me;ge++){const xe=w[B]-w[B-1];B++;const Te=[];for(let Ue=0;Ue<xe;Ue++){const Ee=this._vertexBuffer[k++],Re=this._vertexBuffer[k++];Te.push(new u(Ee,Re))}Te.length>0&&Te.push(Te[0]),oe.push(Te)}}l[Y]=oe}}return l}[Symbol.iterator](){return null}}function v0(f,l,h,x,w,T){return new AD(f,l,h,x,w,T)}class AD extends oA{_numGeometries;_geometryType;constructor(l,h,x,w,T,k){super(x,w,T,k),this._numGeometries=l,this._geometryType=h}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function v2(f,l,h,x,w){return new sA(f,l,h,x,w)}class sA extends oA{_geometryTypes;constructor(l,h,x,w,T){super(h,x,w,T),this._geometryTypes=l}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function aA(f,l,h,x,w){const T=Ra(f,h);let k=null,D=null,B=null,Z=null,Y=null,ee=null,oe=null,ue=null;if(uf(T,x,f,h)===Wo.CONST){const ge=u2(f,h,T,!1);for(let xe=0;xe<l-1;xe++){const Te=Ra(f,h);switch(Te.physicalStreamType){case Us.LENGTH:switch(Te.logicalStreamType.lengthType){case Ma.GEOMETRIES:k=Pp(f,h,Te);break;case Ma.PARTS:D=Pp(f,h,Te);break;case Ma.RINGS:B=Pp(f,h,Te);break;case Ma.TRIANGLES:oe=Pp(f,h,Te)}break;case Us.OFFSET:switch(Te.logicalStreamType.offsetType){case Ep.VERTEX:Z=Ia(f,h,Te,!1);break;case Ep.INDEX:ue=Ia(f,h,Te,!1)}break;case Us.DATA:Qu.VERTEX===Te.logicalStreamType.dictionaryType?Y=Ia(f,h,Te,!0):(ee={numBits:Te.numBits,coordinateShift:Te.coordinateShift},Y=Ia(f,h,Te,!1))}}return ue!==null?k!=null||D!=null?v0(x,ge,oe,ue,Y,new hf(k,D,B)):v0(x,ge,oe,ue,Y):ee===null?(function(xe,Te,Ue,Ee,Re){return new xx(xe,Te,nl.VEC_2,Ue,Ee,Re)})(x,ge,new hf(k,D,B),Z,Y):(function(xe,Te,Ue,Ee,Re,qe){return new xx(xe,Te,nl.MORTON,Ue,Ee,Re,qe)})(x,ge,new hf(k,D,B),Z,Y,ee)}const me=Ia(f,h,T,!1);for(let ge=0;ge<l-1;ge++){const xe=Ra(f,h);switch(xe.physicalStreamType){case Us.LENGTH:switch(xe.logicalStreamType.lengthType){case Ma.GEOMETRIES:k=Ia(f,h,xe,!1);break;case Ma.PARTS:D=Ia(f,h,xe,!1);break;case Ma.RINGS:B=Ia(f,h,xe,!1);break;case Ma.TRIANGLES:oe=Pp(f,h,xe)}break;case Us.OFFSET:switch(xe.logicalStreamType.offsetType){case Ep.VERTEX:Z=Ia(f,h,xe,!1);break;case Ep.INDEX:ue=Ia(f,h,xe,!1)}break;case Us.DATA:Qu.VERTEX===xe.logicalStreamType.dictionaryType?Y=Ia(f,h,xe,!0):(ee={numBits:xe.numBits,coordinateShift:xe.coordinateShift},Y=Ia(f,h,xe,!1))}}return ue!==null&&D===null?v2(me,oe,ue,Y):(k!==null?(k=p1(me,k,2),D!==null&&B!==null?(D=m1(me,k,D,!1),B=(function(ge,xe,Te,Ue){const Ee=new Int32Array(Te[Te.length-1]+1);let Re=0;Ee[0]=Re;let qe=1,Ge=1,dt=0;for(let Lt=0;Lt<ge.length;Lt++){const At=ge[Lt],Vt=xe[Lt+1]-xe[Lt];if(At!==0&&At!==3)for(let dn=0;dn<Vt;dn++){const Wt=Te[qe]-Te[qe-1];qe++;for(let Rt=0;Rt<Wt;Rt++)Re=Ee[Ge++]=Re+Ue[dt++]}else for(let dn=0;dn<Vt;dn++)Ee[Ge++]=++Re,qe++}return Ee})(me,k,D,B)):D!==null&&(D=(function(ge,xe,Te){const Ue=new Int32Array(xe[xe.length-1]+1);let Ee=0;Ue[0]=Ee;let Re=1,qe=0;for(let Ge=0;Ge<ge.length;Ge++){const dt=ge[Ge],Lt=xe[Ge+1]-xe[Ge];if(dt===4||dt===1)for(let At=0;At<Lt;At++)Ee=Ue[Re++]=Ee+Te[qe++];else for(let At=0;At<Lt;At++)Ue[Re++]=++Ee}return Ue})(me,k,D))):D!==null&&B!==null?(D=p1(me,D,1),B=m1(me,D,B,!0)):D!==null&&(D=p1(me,D,0)),ue!==null?v2(me,oe,ue,Y,new hf(k,D,B)):ee===null?(function(ge,xe,Te,Ue){return new _x(nl.VEC_2,ge,xe,Te,Ue)})(me,new hf(k,D,B),Z,Y):(function(ge,xe,Te,Ue,Ee){return new _x(nl.MORTON,ge,xe,Te,Ue,Ee)})(me,new hf(k,D,B),Z,Y,ee))}function p1(f,l,h){const x=new Int32Array(f.length+1);let w=0;x[0]=w;let T=0;for(let k=0;k<f.length;k++)w=x[k+1]=w+(f[k]>h?l[T++]:1);return x}function m1(f,l,h,x){const w=new Int32Array(l[l.length-1]+1);let T=0;w[0]=T;let k=1,D=0;for(let B=0;B<f.length;B++){const Z=f[B],Y=l[B+1]-l[B];if(Z===5||Z===2||x&&(Z===4||Z===1))for(let ee=0;ee<Y;ee++)T=w[k++]=T+h[D++];else for(let ee=0;ee<Y;ee++)w[k++]=++T}return w}class lA extends Tp{dataVector;constructor(l,h,x){super(l,h.getBuffer(),x),this.dataVector=h}getValueFromBuffer(l){return this.dataVector.get(l)}}class cA extends a1{getValueFromBuffer(l){return this.dataBuffer[l]}}class bx extends Tp{constructor(l,h,x){super(l,BigInt64Array.of(h),x)}getValueFromBuffer(l){return this.dataBuffer[0]}}function wx(f,l,h){return uA(f,Math.ceil(l/8),h)}function uA(f,l,h){const x=new Uint8Array(l);let w=0;for(;w<l;){const T=f[h.increment()];if(T<=127){const k=T+3,D=f[h.increment()],B=w+k;x.fill(D,w,B),w=B}else{const k=256-T;for(let D=0;D<k;D++)x[w++]=f[h.increment()]}}return x}const x2=new TextDecoder;function Ox(f,l,h){return h-l>=12?x2.decode(f.subarray(l,h)):(function(x,w,T){let k="",D=w;for(;D<T;){const B=x[D];let Z,Y,ee,oe=null,ue=B>239?4:B>223?3:B>191?2:1;if(D+ue>T)break;ue===1?B<128&&(oe=B):ue===2?(Z=x[D+1],(192&Z)==128&&(oe=(31&B)<<6|63&Z,oe<=127&&(oe=null))):ue===3?(Z=x[D+1],Y=x[D+2],(192&Z)==128&&(192&Y)==128&&(oe=(15&B)<<12|(63&Z)<<6|63&Y,(oe<=2047||oe>=55296&&oe<=57343)&&(oe=null))):ue===4&&(Z=x[D+1],Y=x[D+2],ee=x[D+3],(192&Z)==128&&(192&Y)==128&&(192&ee)==128&&(oe=(15&B)<<18|(63&Z)<<12|(63&Y)<<6|63&ee,(oe<=65535||oe>=1114112)&&(oe=null))),oe===null?(oe=65533,ue=1):oe>65535&&(oe-=65536,k+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|1023&oe),k+=String.fromCharCode(oe),D+=ue}return k})(f,l,h)}class x0 extends Tp{offsetBuffer;constructor(l,h,x,w){super(l,x,w),this.offsetBuffer=h}}class g1 extends x0{textEncoder;constructor(l,h,x,w){super(l,h,x,w??h.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(l){return Ox(this.dataBuffer,this.offsetBuffer[l],this.offsetBuffer[l+1])}}class Sg extends x0{indexBuffer;textEncoder;constructor(l,h,x,w,T){super(l,x,w,T??h.length),this.indexBuffer=h,this.indexBuffer=h,this.textEncoder=new TextEncoder}getValueFromBuffer(l){const h=this.indexBuffer[l];return Ox(this.dataBuffer,this.offsetBuffer[h],this.offsetBuffer[h+1])}}class y1 extends x0{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(l,h,x,w,T,k,D){super(l,x,w,D),this.indexBuffer=h,this.symbolOffsetBuffer=T,this.symbolTableBuffer=k,this.textEncoder=new TextEncoder}getValueFromBuffer(l){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(x,w,T){const k=[],D=new Array(w.length).fill(0);for(let B=1;B<w.length;B++)D[B]=D[B-1]+w[B-1];for(let B=0;B<T.length;B++)if(T[B]===255)k.push(T[++B]);else{const Z=w[T[B]],Y=D[T[B]];for(let ee=0;ee<Z;ee++)k.push(x[Y+ee])}return new Uint8Array(k)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const h=this.indexBuffer[l];return Ox(this.decodedDictionary,this.offsetBuffer[h],this.offsetBuffer[h+1])}offsetToLengthBuffer(l){const h=new Uint32Array(l.length-1);let x=l[0];for(let w=1;w<l.length;w++){const T=l[w];h[w-1]=T-x,x=T}return h}}function Mp(f,l,h,x,w,T){return h.type==="scalarType"?(function(k,D,B,Z,Y,ee){let oe=null,ue=0;if(k===0)return null;if(ee.nullable){const ge=Ra(D,B);ue=ge.numValues;const xe=B.get(),Te=wx(D,ue,B);B.set(xe+ge.byteLength),oe=new Uu(Te,ge.numValues)}const me=oe??Z;switch(Y.physicalType){case 4:case 3:return(function(ge,xe,Te,Ue,Ee){const Re=Ra(ge,xe),qe=uf(Re,Ee,ge,xe),Ge=Ue.physicalType===3;if(qe===Wo.FLAT){const dt=Jc(Ee)?f2(ge,xe,Re,Ge,Ee):Ia(ge,xe,Re,Ge);return new l1(Te.name,dt,Ee)}if(qe===Wo.SEQUENCE){const dt=h2(ge,xe,Re);return new s2(Te.name,dt[0],dt[1],Re.numRleValues)}{const dt=u2(ge,xe,Re,Ge);return new a2(Te.name,dt,Ee)}})(D,B,ee,Y,me);case 9:return(function(ge,xe,Te,Ue,Ee){let Re=null,qe=null,Ge=null,dt=null,Lt=null,At=null,Vt=null,dn=null;for(let Wt=0;Wt<Ue;Wt++){const Rt=Ra(xe,Te);if(Rt.byteLength!==0)switch(Rt.physicalStreamType){case Us.PRESENT:{const bt=wx(xe,Rt.numValues,Te);At=new Uu(bt,Rt.numValues);break}case Us.OFFSET:qe=Ee!=null||At!=null?f2(xe,Te,Rt,!1,Ee??At):Ia(xe,Te,Rt,!1);break;case Us.LENGTH:{const bt=Pp(xe,Te,Rt);Ma.DICTIONARY===Rt.logicalStreamType.lengthType?Re=bt:Ma.SYMBOL===Rt.logicalStreamType.lengthType?dt=bt:Vt=bt;break}case Us.DATA:{const bt=xe.subarray(Te.get(),Te.get()+Rt.byteLength);Te.add(Rt.byteLength);const On=Rt.logicalStreamType.dictionaryType;Qu.FSST===On?Lt=bt:Qu.SINGLE===On||Qu.SHARED===On?Ge=bt:Qu.NONE===On&&(dn=bt);break}}}return(function(Wt,Rt,bt,On,_n,Tn,yn){return Rt?new y1(Wt,bt,On,_n,Tn,Rt,yn):null})(ge,Lt,qe,Re,Ge,dt,Ee??At)??(function(Wt,Rt,bt,On,_n){return Rt?_n?new Sg(Wt,bt,On,Rt,_n):new Sg(Wt,bt,On,Rt):null})(ge,Ge,qe,Re,Ee??At)??(function(Wt,Rt,bt,On,_n){if(!Rt||!bt)return null;if(On)return _n?new Sg(Wt,On,Rt,bt,_n):new Sg(Wt,On,Rt,bt);if(_n&&_n.size()!==Rt.length-1){const Tn=new Int32Array(_n.size());let yn=0;for(let Fn=0;Fn<_n.size();Fn++)Tn[Fn]=_n.get(Fn)?yn++:0;return new Sg(Wt,Tn,Rt,bt,_n)}return _n?new g1(Wt,Rt,bt,_n):new g1(Wt,Rt,bt)})(ge,Vt,dn,qe,Ee??At)})(ee.name,D,B,ee.nullable?k-1:k,oe);case 0:return(function(ge,xe,Te,Ue,Ee){const Re=Ra(ge,xe),qe=Re.numValues,Ge=xe.get(),dt=Jc(Ee)?(function(At,Vt,dn,Wt){const Rt=uA(At,Math.ceil(Vt/8),dn),bt=new Uu(Rt,Vt),On=Wt.size(),_n=new Uu(new Uint8Array(On),On);let Tn=0;for(let yn=0;yn<Wt.size();yn++){const Fn=!!Wt.get(yn)&&bt.get(Tn++);_n.set(yn,Fn)}return _n.getBuffer()})(ge,qe,xe,Ee):wx(ge,qe,xe);xe.set(Ge+Re.byteLength);const Lt=new Uu(dt,qe);return new lA(Te.name,Lt,Ee)})(D,B,ee,0,me);case 6:case 5:return(function(ge,xe,Te,Ue,Ee){const Re=Ra(ge,xe),qe=uf(Re,Ue,ge,xe),Ge=Ee.physicalType===5;if(qe===Wo.FLAT){const dt=Jc(Ue)?(function(Lt,At,Vt,dn,Wt){return(function(Rt,bt,On,_n){switch(bt.logicalLevelTechnique1){case Tr.DELTA:return bt.logicalLevelTechnique2===Tr.RLE&&(Rt=rA(Rt,bt.runs,bt.numRleValues)),(function(Tn,yn){const Fn=new BigInt64Array(Tn.size());let Hr=0;Tn.get(0)?(Fn[0]=Tn.get(0)?yn[0]>>1n^-(1n&yn[0]):0n,Hr=1):Fn[0]=0n;let Pr=1;for(;Pr!=Fn.length;++Pr)Fn[Pr]=Tn.get(Pr)?Fn[Pr-1]+(yn[Hr]>>1n^-(1n&yn[Hr++])):Fn[Pr-1];return Fn})(_n,Rt);case Tr.RLE:return(function(Tn,yn,Fn,Hr){const Pr=yn;return Fn?(function(go,Da,ws){const yo=new BigInt64Array(go.size());let no=0;for(let pi=0;pi<ws;pi++){const Fo=Number(Da[pi]);let Ho=Da[pi+ws];Ho=Ho>>1n^-(1n&Ho);for(let Hi=no;Hi<no+Fo;Hi++)go.get(Hi)?yo[Hi]=Ho:(yo[Hi]=0n,no++);no+=Fo}return yo})(Hr,Tn,Pr.runs):(function(go,Da,ws){const yo=new BigInt64Array(go.size());let no=0;for(let pi=0;pi<ws;pi++){const Fo=Number(Da[pi]),Ho=Da[pi+ws];for(let Hi=no;Hi<no+Fo;Hi++)go.get(Hi)?yo[Hi]=Ho:(yo[Hi]=0n,no++);no+=Fo}return yo})(Hr,Tn,Pr.runs)})(Rt,bt,On,_n);case Tr.NONE:return Rt=On?(function(Tn,yn){const Fn=new BigInt64Array(Tn.size());let Hr=0,Pr=0;for(;Pr!=Fn.length;++Pr)if(Tn.get(Pr)){const go=yn[Hr++];Fn[Pr]=go>>1n^-(1n&go)}else Fn[Pr]=0n;return Fn})(_n,Rt):(function(Tn,yn){const Fn=new BigInt64Array(Tn.size());let Hr=0,Pr=0;for(;Pr!=Fn.length;++Pr)Fn[Pr]=Tn.get(Pr)?yn[Hr++]:0n;return Fn})(_n,Rt),Rt;default:throw new Error("The specified Logical level technique is not supported")}})(fx(Lt,At,Vt.numValues),Vt,dn,Wt)})(ge,xe,Re,Ge,Ue):g0(ge,xe,Re,Ge);return new y0(Te.name,dt,Ue)}if(qe===Wo.SEQUENCE){const dt=Og(ge,xe,Re);return new p2(Te.name,dt[0],dt[1],Re.numRleValues)}{const dt=d2(ge,xe,Re,Ge);return new bx(Te.name,dt,Ue)}})(D,B,ee,me,Y);case 7:return(function(ge,xe,Te,Ue){const Ee=Ra(ge,xe),Re=Jc(Ue)?(function(qe,Ge,dt,Lt){const At=Ge.get(),Vt=At+Lt*Float32Array.BYTES_PER_ELEMENT,dn=new Uint8Array(qe.subarray(At,Vt)).buffer,Wt=new Float32Array(dn);Ge.set(Vt);const Rt=dt.size(),bt=new Float32Array(Rt);let On=0;for(let _n=0;_n<Rt;_n++)bt[_n]=dt.get(_n)?Wt[On++]:0;return bt})(ge,xe,Ue,Ee.numValues):(function(qe,Ge,dt){const Lt=Ge.get(),At=Lt+dt*Float32Array.BYTES_PER_ELEMENT,Vt=new Uint8Array(qe.subarray(Lt,At)).buffer,dn=new Float32Array(Vt);return Ge.set(At),dn})(ge,xe,Ee.numValues);return new cA(Te.name,Re,Ue)})(D,B,ee,me);case 8:return(function(ge,xe,Te,Ue){const Ee=Ra(ge,xe),Re=Jc(Ue)?(function(qe,Ge,dt,Lt){const At=Ge.get(),Vt=At+Lt*Float64Array.BYTES_PER_ELEMENT,dn=new Uint8Array(qe.subarray(At,Vt)).buffer,Wt=new Float64Array(dn);Ge.set(Vt);const Rt=dt.size(),bt=new Float64Array(Rt);let On=0;for(let _n=0;_n<Rt;_n++)bt[_n]=dt.get(_n)?Wt[On++]:0;return bt})(ge,xe,Ue,Ee.numValues):(function(qe,Ge,dt){const Lt=Ge.get(),At=Lt+dt*Float64Array.BYTES_PER_ELEMENT,Vt=new Uint8Array(qe.subarray(Lt,At)).buffer,dn=new Float64Array(Vt);return Ge.set(At),dn})(ge,xe,Ee.numValues);return new i2(Te.name,Re,Ue)})(D,B,ee,me);default:throw new Error(`The specified data type for the field is currently not supported: ${Y}`)}})(x,f,l,w,h.scalarType,h):x!=1?null:(function(k,D,B,Z){let Y=null,ee=null,oe=null,ue=null,me=!1;for(;!me;){const Ue=Ra(k,D);switch(Ue.physicalStreamType){case Us.LENGTH:Ma.DICTIONARY===Ue.logicalStreamType.lengthType?Y=Pp(k,D,Ue):oe=Pp(k,D,Ue);break;case Us.DATA:Qu.SINGLE===Ue.logicalStreamType.dictionaryType||Qu.SHARED===Ue.logicalStreamType.dictionaryType?(ee=k.subarray(D.get(),D.get()+Ue.byteLength),me=!0):ue=k.subarray(D.get(),D.get()+Ue.byteLength),D.add(Ue.byteLength)}}const ge=B.complexType.children,xe=[];let Te=0;for(const Ue of ge){const Ee=bs(k,D,1)[0];if(Ee==0)continue;const Re=`${B.name}${Ue.name==="default"?"":":"+Ue.name}`;if(Ee!==2||Ue.type!=="scalarField"||Ue.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const qe=Ra(k,D),Ge=wx(k,qe.numValues,D),dt=Ra(k,D),Lt=dt.decompressedCount!==Z?f2(k,D,dt,!1,new Uu(Ge,qe.numValues)):Ia(k,D,dt,!1);xe[Te++]=ue?new y1(Re,Lt,Y,ee,oe,ue,new Uu(Ge,qe.numValues)):new Sg(Re,Lt,Y,ee,new Uu(Ge,qe.numValues))}return xe})(f,l,h,w)}function Jc(f){return f instanceof Uu}function Rp(f){if(f.name==="id")return!1;if(f.type==="scalarType"){const l=f.scalarType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(l.type==="logicalType")return!1}else if(f.type==="complexType"){const l=f.complexType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",f),!1}const Sx=new TextDecoder;function _0(f,l){const h=bs(f,l,1)[0];if(h===0)return"";const x=l.get(),w=f.subarray(x,x+h);return l.add(h),Sx.decode(w)}function df(f,l){const h=bs(f,l,1)[0]>>>0,x=!!(4&h),w=!!(2&h),T=bs(f,l,1)[0]>>>0,k={};if(1&h&&(k.nullable=!0),w){const D={};if(x?(D.type="logicalType",D.logicalType=T):(D.type="physicalType",D.physicalType=T),8&h){const B=bs(f,l,1)[0]>>>0;D.children=new Array(B);for(let Z=0;Z<B;Z++)D.children[Z]=df(f,l)}k.type="complexField",k.complexField=D}else{const D={};x?(D.type="logicalType",D.logicalType=T):(D.type="physicalType",D.physicalType=T),k.type="scalarField",k.scalarField=D}return k}function PD(f,l){const h=bs(f,l,1)[0]>>>0,x=(function(w){switch(w){case 0:case 1:case 2:case 3:{const T={};T.nullable=!!(1&w),T.columnScope=0;const k={};return k.physicalType=w>1?6:4,k.type="physicalType",T.scalarType=k,T.type="scalarType",T}case 4:{const T={nullable:!1,columnScope:0},k={type:"physicalType",physicalType:0};return T.type="complexType",T.complexType=k,T}case 30:{const T={nullable:!1,columnScope:0},k={type:"physicalType",physicalType:1};return T.type="complexType",T.complexType=k,T}default:return(function(T){let k=null;switch(T){case 10:case 11:k=0;break;case 12:case 13:k=1;break;case 14:case 15:k=2;break;case 16:case 17:k=3;break;case 18:case 19:k=4;break;case 20:case 21:k=5;break;case 22:case 23:k=6;break;case 24:case 25:k=7;break;case 26:case 27:k=8;break;case 28:case 29:k=9;break;default:return null}const D={};D.nullable=!!(1&T),D.columnScope=0;const B={type:"physicalType"};return B.physicalType=k,D.type="scalarType",D.scalarType=B,D})(w)}})(h);if(!x)throw new Error(`Unsupported column type code: ${h}`);if((function(w){return w>=10})(h)?x.name=_0(f,l):h>=0&&h<=3?x.name="id":h===4&&(x.name="geometry"),(function(w){return w===30})(h)){const w=bs(f,l,1)[0]>>>0,T=x.complexType;T.children=new Array(w);for(let k=0;k<w;k++)T.children[k]=df(f,l)}return x}function hA(f,l){const h={featureTables:[]},x={};x.name=_0(f,l);const w=bs(f,l,1)[0]>>>0,T=bs(f,l,1)[0]>>>0;x.columns=new Array(T);for(let k=0;k<T;k++)x.columns[k]=PD(f,l);return h.featureTables.push(x),[h,w]}function Cx(f,l,h,x,w,T,k=!1){const D=l.scalarType.physicalType,B=uf(w,T,f,h);if(D===4)switch(B){case Wo.FLAT:{const Z=Ia(f,h,w,!1);return new l1(x,Z,T)}case Wo.SEQUENCE:{const Z=h2(f,h,w);return new s2(x,Z[0],Z[1],w.numRleValues)}case Wo.CONST:{const Z=u2(f,h,w,!1);return new a2(x,Z,T)}}else switch(B){case Wo.FLAT:{if(k){const Y=(function(ee,oe,ue,me){const ge=(function(xe,Te,Ue){const Ee=new Float64Array(Te);for(let Re=0;Re<Te;Re++)Ee[Re]=nA(xe,Ue);return Ee})(ee,ue.numValues,oe);return(function(xe,Te,Ue){switch(Te.logicalLevelTechnique1){case Tr.DELTA:return Te.logicalLevelTechnique2===Tr.RLE&&(xe=iA(xe,Te.runs,Te.numRleValues)),(function(Ee){Ee[0]=Ee[0]%2==1?(Ee[0]+1)/-2:Ee[0]/2;const Re=Ee.length/4*4;let qe=1;if(Re>=4)for(;qe<Re-4;qe+=4){const Ge=Ee[qe],dt=Ee[qe+1],Lt=Ee[qe+2],At=Ee[qe+3];Ee[qe]=(Ge%2==1?(Ge+1)/-2:Ge/2)+Ee[qe-1],Ee[qe+1]=(dt%2==1?(dt+1)/-2:dt/2)+Ee[qe],Ee[qe+2]=(Lt%2==1?(Lt+1)/-2:Lt/2)+Ee[qe+1],Ee[qe+3]=(At%2==1?(At+1)/-2:At/2)+Ee[qe+2]}for(;qe!=Ee.length;++qe)Ee[qe]=(Ee[qe]%2==1?(Ee[qe]+1)/-2:Ee[qe]/2)+Ee[qe-1]})(xe),xe;case Tr.RLE:return(function(Ee,Re,qe){return iA(Ee,Re.runs,Re.numRleValues)})(xe,Te);case Tr.NONE:return xe;default:throw new Error(`The specified Logical level technique is not supported: ${Te.logicalLevelTechnique1}`)}})(ge,ue)})(f,h,w);return new i2(x,Y,T)}const Z=g0(f,h,w,!1);return new y0(x,Z,T)}case Wo.SEQUENCE:{const Z=Og(f,h,w);return new p2(x,Z[0],Z[1],w.numRleValues)}case Wo.CONST:{const Z=d2(f,h,w,!1);return new bx(x,Z,T)}}throw new Error("Vector type not supported for id column.")}class MD{constructor(l,h){var x;switch(this._featureData=l,this.properties=this._featureData.properties||{},(x=this._featureData.geometry)===null||x===void 0?void 0:x.type){case _s.POINT:case _s.MULTIPOINT:this.type=1;break;case _s.LINESTRING:case _s.MULTILINESTRING:this.type=2;break;case _s.POLYGON:case _s.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=h,this.id=Number(this._featureData.id)}loadGeometry(){const l=[];for(const h of this._featureData.geometry.coordinates){const x=[];for(const w of h)x.push(new u(w.x,w.y));l.push(x)}return l}}class dA{constructor(l){this.features=[],this.featureTable=l,this.name=l.name,this.extent=l.extent,this.version=2,this.features=l.getFeatures(),this.length=this.features.length}feature(l){return new MD(this.features[l],this.extent)}}class Tx{constructor(l){this.layers={};const h=(function(x,w,T=!0){const k=new tA(0),D=[];for(;k.get()<x.length;){const B=bs(x,k,1)[0]>>>0,Z=k.get()+B;if(Z>x.length)throw new Error(`Block overruns tile: ${Z} > ${x.length}`);if(bs(x,k,1)[0]>>>0!=1){k.set(Z);continue}const Y=hA(x,k),ee=Y[1],oe=Y[0].featureTables[0];let ue=null,me=null;const ge=[];let xe=0;for(const Ue of oe.columns){const Ee=Ue.name;if(Ee==="id"){let Re=null;if(Ue.nullable){const Ge=Ra(x,k),dt=k.get(),Lt=wx(x,Ge.numValues,k);k.set(dt+Ge.byteLength),Re=new Uu(Lt,Ge.numValues)}const qe=Ra(x,k);xe=qe.decompressedCount,ue=Cx(x,Ue,k,Ee,qe,Re??xe,T)}else if(Ee==="geometry"){const Re=bs(x,k,1)[0];if(xe===0){const qe=k.get();xe=Ra(x,k).decompressedCount,k.set(qe)}me=aA(x,Re,k,xe)}else{const Re=Rp(Ue)?bs(x,k,1)[0]:1;if(Re===0&&Ue.type==="scalarType")continue;const qe=Mp(x,k,Ue,Re,xe);if(qe)if(Array.isArray(qe))for(const Ge of qe)ge.push(Ge);else ge.push(qe)}}const Te=new kp(oe.name,me,ue,ge,ee);D.push(Te),k.set(Z)}return D})(new Uint8Array(l));this.layers=h.reduce(((x,w)=>Object.assign(Object.assign({},x),{[w.name]:new dA(w)})),{})}}class fA{constructor(l,h){this.feature=l,this.type=l.type,this.properties=l.tags?l.tags:{},this.extent=h,"id"in l&&(typeof l.id=="string"?this.id=parseInt(l.id,10):typeof l.id!="number"||isNaN(l.id)||(this.id=l.id))}loadGeometry(){const l=[],h=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const x of h){const w=[];for(const T of x)w.push(new u(T[0],T[1]));l.push(w)}return l}}const kx="_geojsonTileLayer";function v1(f,l){l.writeVarintField(15,f.version||1),l.writeStringField(1,f.name||""),l.writeVarintField(5,f.extent||4096);const h={keys:[],values:[],keycache:{},valuecache:{}};for(let T=0;T<f.length;T++)h.feature=f.feature(T),l.writeMessage(2,x1,h);const x=h.keys;for(const T of x)l.writeStringField(3,T);const w=h.values;for(const T of w)l.writeMessage(4,_1,T)}function x1(f,l){if(!f.feature)return;const h=f.feature;h.id!==void 0&&l.writeVarintField(1,h.id),l.writeMessage(2,pA,f),l.writeVarintField(3,h.type),l.writeMessage(4,b2,h)}function pA(f,l){for(const h in f.feature?.properties){let x=f.feature.properties[h],w=f.keycache[h];if(x==null)continue;w===void 0&&(f.keys.push(h),w=f.keys.length-1,f.keycache[h]=w),l.writeVarint(w),typeof x!="string"&&typeof x!="boolean"&&typeof x!="number"&&(x=JSON.stringify(x));const T=typeof x+":"+x;let k=f.valuecache[T];k===void 0&&(f.values.push(x),k=f.values.length-1,f.valuecache[T]=k),l.writeVarint(k)}}function Ip(f,l){return(l<<3)+(7&f)}function _2(f){return f<<1^f>>31}function b2(f,l){const h=f.loadGeometry(),x=f.type;let w=0,T=0;for(const k of h){let D=1;x===1&&(D=k.length),l.writeVarint(Ip(1,D));const B=x===3?k.length-1:k.length;for(let Z=0;Z<B;Z++){Z===1&&x!==1&&l.writeVarint(Ip(2,B-1));const Y=k[Z].x-w,ee=k[Z].y-T;l.writeVarint(_2(Y)),l.writeVarint(_2(ee)),w+=Y,T+=ee}f.type===3&&l.writeVarint(Ip(7,1))}}function _1(f,l){const h=typeof f;h==="string"?l.writeStringField(1,f):h==="boolean"?l.writeBooleanField(7,f):h==="number"&&(f%1!=0?l.writeDoubleField(3,f):f<0?l.writeSVarintField(6,f):l.writeVarintField(5,f))}class w2{constructor(l,h){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new zh(Qe,16,0),this.grid3D=new zh(Qe,16,0),this.featureIndexArray=new Se,this.promoteId=h}insert(l,h,x,w,T,k){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(x,w,T);const B=k?this.grid3D:this.grid;for(let Z=0;Z<h.length;Z++){const Y=h[Z],ee=[1/0,1/0,-1/0,-1/0];for(let oe=0;oe<Y.length;oe++){const ue=Y[oe];ee[0]=Math.min(ee[0],ue.x),ee[1]=Math.min(ee[1],ue.y),ee[2]=Math.max(ee[2],ue.x),ee[3]=Math.max(ee[3],ue.y)}ee[0]<Qe&&ee[1]<Qe&&ee[2]>=0&&ee[3]>=0&&B.insert(D,ee[0],ee[1],ee[2],ee[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new Vr(new qb(this.rawTileData)).layers:new Tx(this.rawTileData).layers,this.sourceLayerCoder=new r2(this.vtLayers?Object.keys(this.vtLayers).sort():[kx])),this.vtLayers}query(l,h,x,w){this.loadVTLayers();const T=l.params,k=Qe/l.tileSize/l.scale,D=Sa(T.filter,T.globalState),B=l.queryGeometry,Z=l.queryPadding*k,Y=Cp.fromPoints(B),ee=this.grid.query(Y.minX-Z,Y.minY-Z,Y.maxX+Z,Y.maxY+Z),oe=Cp.fromPoints(l.cameraQueryGeometry).expandBy(Z),ue=this.grid3D.query(oe.minX,oe.minY,oe.maxX,oe.maxY,((xe,Te,Ue,Ee)=>(function(Re,qe,Ge,dt,Lt){for(const Vt of Re)if(qe<=Vt.x&&Ge<=Vt.y&&dt>=Vt.x&&Lt>=Vt.y)return!0;const At=[new u(qe,Ge),new u(qe,Lt),new u(dt,Lt),new u(dt,Ge)];if(Re.length>2){for(const Vt of At)if(Vh(Re,Vt))return!0}for(let Vt=0;Vt<Re.length-1;Vt++)if(xE(Re[Vt],Re[Vt+1],At))return!0;return!1})(l.cameraQueryGeometry,xe-Z,Te-Z,Ue+Z,Ee+Z)));for(const xe of ue)ee.push(xe);ee.sort(b1);const me={};let ge;for(let xe=0;xe<ee.length;xe++){const Te=ee[xe];if(Te===ge)continue;ge=Te;const Ue=this.featureIndexArray.get(Te);let Ee=null;this.loadMatchingFeature(me,Ue.bucketIndex,Ue.sourceLayerIndex,Ue.featureIndex,D,T.layers,T.availableImages,h,x,w,((Re,qe,Ge)=>(Ee||(Ee=Nu(Re)),qe.queryIntersectsFeature({queryGeometry:B,feature:Re,featureState:Ge,geometry:Ee,zoom:this.z,transform:l.transform,pixelsToTileUnits:k,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation}))))}return me}loadMatchingFeature(l,h,x,w,T,k,D,B,Z,Y,ee){const oe=this.bucketLayerIDs[h];if(k&&!oe.some((xe=>k.has(xe))))return;const ue=this.sourceLayerCoder.decode(x),me=this.vtLayers[ue].feature(w);if(T.needGeometry){const xe=ac(me,!0);if(!T.filter(new ii(this.tileID.overscaledZ),xe,this.tileID.canonical))return}else if(!T.filter(new ii(this.tileID.overscaledZ),me))return;const ge=this.getId(me,ue);for(let xe=0;xe<oe.length;xe++){const Te=oe[xe];if(k&&!k.has(Te))continue;const Ue=B[Te];if(!Ue)continue;let Ee={};ge&&Y&&(Ee=Y.getState(Ue.sourceLayer||kx,ge));const Re=yt({},Z[Te]);Re.paint=mA(Re.paint,Ue.paint,me,Ee,D),Re.layout=mA(Re.layout,Ue.layout,me,Ee,D);const qe=!ee||ee(me,Ue,Ee);if(!qe)continue;const Ge=new s1(me,this.z,this.x,this.y,ge);Ge.layer=Re;let dt=l[Te];dt===void 0&&(dt=l[Te]=[]),dt.push({featureIndex:w,feature:Ge,intersectionZ:qe})}}lookupSymbolFeatures(l,h,x,w,T,k,D,B){const Z={};this.loadVTLayers();const Y=Sa(T.filterSpec,T.globalState);for(const ee of l)this.loadMatchingFeature(Z,x,w,ee,Y,k,D,B,h);return Z}hasLayer(l){for(const h of this.bucketLayerIDs)for(const x of h)if(l===x)return!0;return!1}getId(l,h){var x;let w=l.id;return this.promoteId&&(w=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof w=="boolean"&&(w=Number(w)),w===void 0&&(!((x=l.properties)===null||x===void 0)&&x.cluster)&&this.promoteId&&(w=Number(l.properties.cluster_id))),w}}function mA(f,l,h,x,w){return Tt(f,((T,k)=>{const D=l instanceof Wd?l.get(k):null;return D&&D.evaluate?D.evaluate(h,x,w):D}))}function b1(f,l){return l-f}function p(f,l,h,x,w){const T=[];for(let k=0;k<f.length;k++){const D=f[k];let B;for(let Z=0;Z<D.length-1;Z++){let Y=D[Z],ee=D[Z+1];Y.x<l&&ee.x<l||(Y.x<l?Y=new u(l,Y.y+(l-Y.x)/(ee.x-Y.x)*(ee.y-Y.y))._round():ee.x<l&&(ee=new u(l,Y.y+(l-Y.x)/(ee.x-Y.x)*(ee.y-Y.y))._round()),Y.y<h&&ee.y<h||(Y.y<h?Y=new u(Y.x+(h-Y.y)/(ee.y-Y.y)*(ee.x-Y.x),h)._round():ee.y<h&&(ee=new u(Y.x+(h-Y.y)/(ee.y-Y.y)*(ee.x-Y.x),h)._round()),Y.x>=x&&ee.x>=x||(Y.x>=x?Y=new u(x,Y.y+(x-Y.x)/(ee.x-Y.x)*(ee.y-Y.y))._round():ee.x>=x&&(ee=new u(x,Y.y+(x-Y.x)/(ee.x-Y.x)*(ee.y-Y.y))._round()),Y.y>=w&&ee.y>=w||(Y.y>=w?Y=new u(Y.x+(w-Y.y)/(ee.y-Y.y)*(ee.x-Y.x),w)._round():ee.y>=w&&(ee=new u(Y.x+(w-Y.y)/(ee.y-Y.y)*(ee.x-Y.x),w)._round()),B&&Y.equals(B[B.length-1])||(B=[Y],T.push(B)),B.push(ee)))))}}return T}function y(f,l,h,x,w){switch(l){case 1:return(function(T,k,D,B){const Z=[];for(const Y of T)for(const ee of Y){const oe=B===0?ee.x:ee.y;oe>=k&&oe<=D&&Z.push([ee])}return Z})(f,h,x,w);case 2:return R(f,h,x,w,!1);case 3:return R(f,h,x,w,!0)}return[]}function S(f,l,h,x,w){const T=x===0?U:X;let k=[];const D=[];for(let Y=0;Y<f.length-1;Y++){const ee=f[Y],oe=f[Y+1],ue=x===0?ee.x:ee.y,me=x===0?oe.x:oe.y;let ge=!1;ue<l?me>l&&k.push(T(ee,oe,l)):ue>h?me<h&&k.push(T(ee,oe,h)):k.push(ee),me<l&&ue>=l&&(k.push(T(ee,oe,l)),ge=!0),me>h&&ue<=h&&(k.push(T(ee,oe,h)),ge=!0),!w&&ge&&(D.push(k),k=[])}const B=f.length-1,Z=x===0?f[B].x:f[B].y;return Z>=l&&Z<=h&&k.push(f[B]),w&&k.length>0&&!k[0].equals(k[k.length-1])&&k.push(new u(k[0].x,k[0].y)),k.length>0&&D.push(k),D}function R(f,l,h,x,w){const T=[];for(const k of f){const D=S(k,l,h,x,w);D.length>0&&T.push(...D)}return T}function U(f,l,h){return new u(h,f.y+(h-f.x)/(l.x-f.x)*(l.y-f.y))}function X(f,l,h){return new u(f.x+(h-f.y)/(l.y-f.y)*(l.x-f.x),h)}xn("FeatureIndex",w2,{omit:["rawTileData","sourceLayerCoder"]});class pe extends u{constructor(l,h,x,w){super(l,h),this.angle=x,w!==void 0&&(this.segment=w)}clone(){return new pe(this.x,this.y,this.angle,this.segment)}}function Pe(f,l,h,x,w){if(l.segment===void 0||h===0)return!0;let T=l,k=l.segment+1,D=0;for(;D>-h/2;){if(k--,k<0)return!1;D-=f[k].dist(T),T=f[k]}D+=f[k].dist(f[k+1]),k++;const B=[];let Z=0;for(;D<h/2;){const Y=f[k],ee=f[k+1];if(!ee)return!1;let oe=f[k-1].angleTo(Y)-Y.angleTo(ee);for(oe=Math.abs((oe+3*Math.PI)%(2*Math.PI)-Math.PI),B.push({distance:D,angleDelta:oe}),Z+=oe;D-B[0].distance>x;)Z-=B.shift().angleDelta;if(Z>w)return!1;k++,D+=Y.dist(ee)}return!0}function et(f){let l=0;for(let h=0;h<f.length-1;h++)l+=f[h].dist(f[h+1]);return l}function Ot(f,l,h){return f?.6*l*h:0}function zt(f,l){return Math.max(f?f.right-f.left:0,l?l.right-l.left:0)}function Yt(f,l,h,x,w,T){const k=Ot(h,w,T),D=zt(h,x)*T;let B=0;const Z=et(f)/2;for(let Y=0;Y<f.length-1;Y++){const ee=f[Y],oe=f[Y+1],ue=ee.dist(oe);if(B+ue>Z){const me=(Z-B)/ue,ge=Ui.number(ee.x,oe.x,me),xe=Ui.number(ee.y,oe.y,me),Te=new pe(ge,xe,oe.angleTo(ee),Y);return Te._round(),!k||Pe(f,Te,D,k,l)?Te:void 0}B+=ue}}function Ct(f,l,h,x,w,T,k,D,B){const Z=Ot(x,T,k),Y=zt(x,w),ee=Y*k,oe=f[0].x===0||f[0].x===B||f[0].y===0||f[0].y===B;return l-ee<l/4&&(l=ee+l/4),Mt(f,oe?l/2*D%l:(Y/2+2*T)*k*D%l,l,Z,h,ee,oe,!1,B)}function Mt(f,l,h,x,w,T,k,D,B){const Z=T/2,Y=et(f);let ee=0,oe=l-h,ue=[];for(let me=0;me<f.length-1;me++){const ge=f[me],xe=f[me+1],Te=ge.dist(xe),Ue=xe.angleTo(ge);for(;oe+h<ee+Te;){oe+=h;const Ee=(oe-ee)/Te,Re=Ui.number(ge.x,xe.x,Ee),qe=Ui.number(ge.y,xe.y,Ee);if(Re>=0&&Re<B&&qe>=0&&qe<B&&oe-Z>=0&&oe+Z<=Y){const Ge=new pe(Re,qe,Ue,me);Ge._round(),x&&!Pe(f,Ge,T,x,w)||ue.push(Ge)}}ee+=Te}return D||ue.length||k||(ue=Mt(f,ee/2,h,x,w,T,k,!0,B)),ue}function Nn(f,l,h,x){const w=[],T=f.image,k=T.pixelRatio,D=T.paddedRect.w-2,B=T.paddedRect.h-2;let Z={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const Y=T.stretchX||[[0,D]],ee=T.stretchY||[[0,B]],oe=(bt,On)=>bt+On[1]-On[0],ue=Y.reduce(oe,0),me=ee.reduce(oe,0),ge=D-ue,xe=B-me;let Te=0,Ue=ue,Ee=0,Re=me,qe=0,Ge=ge,dt=0,Lt=xe;if(T.content&&x){const bt=T.content,On=bt[2]-bt[0],_n=bt[3]-bt[1];(T.textFitWidth||T.textFitHeight)&&(Z=cf(f)),Te=or(Y,0,bt[0]),Ee=or(ee,0,bt[1]),Ue=or(Y,bt[0],bt[2]),Re=or(ee,bt[1],bt[3]),qe=bt[0]-Te,dt=bt[1]-Ee,Ge=On-Ue,Lt=_n-Re}const At=Z.x1,Vt=Z.y1,dn=Z.x2-At,Wt=Z.y2-Vt,Rt=(bt,On,_n,Tn)=>{const yn=ct(bt.stretch-Te,Ue,dn,At),Fn=it(bt.fixed-qe,Ge,bt.stretch,ue),Hr=ct(On.stretch-Ee,Re,Wt,Vt),Pr=it(On.fixed-dt,Lt,On.stretch,me),go=ct(_n.stretch-Te,Ue,dn,At),Da=it(_n.fixed-qe,Ge,_n.stretch,ue),ws=ct(Tn.stretch-Ee,Re,Wt,Vt),yo=it(Tn.fixed-dt,Lt,Tn.stretch,me),no=new u(yn,Hr),pi=new u(go,Hr),Fo=new u(go,ws),Ho=new u(yn,ws),Hi=new u(Fn/k,Pr/k),hc=new u(Da/k,yo/k),La=l*Math.PI/180;if(La){const qs=Math.sin(La),Eo=Math.cos(La),Os=[Eo,-qs,qs,Eo];no._matMult(Os),pi._matMult(Os),Ho._matMult(Os),Fo._matMult(Os)}const dc=bt.stretch+bt.fixed,Hh=On.stretch+On.fixed;return{tl:no,tr:pi,bl:Ho,br:Fo,tex:{x:T.paddedRect.x+1+dc,y:T.paddedRect.y+1+Hh,w:_n.stretch+_n.fixed-dc,h:Tn.stretch+Tn.fixed-Hh},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hi,pixelOffsetBR:hc,minFontScaleX:Ge/k/dn,minFontScaleY:Lt/k/Wt,isSDF:h}};if(x&&(T.stretchX||T.stretchY)){const bt=Ai(Y,ge,ue),On=Ai(ee,xe,me);for(let _n=0;_n<bt.length-1;_n++){const Tn=bt[_n],yn=bt[_n+1];for(let Fn=0;Fn<On.length-1;Fn++)w.push(Rt(Tn,On[Fn],yn,On[Fn+1]))}}else w.push(Rt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:B+1}));return w}function or(f,l,h){let x=0;for(const w of f)x+=Math.max(l,Math.min(h,w[1]))-Math.max(l,Math.min(h,w[0]));return x}function Ai(f,l,h){const x=[{fixed:-1,stretch:0}];for(const[w,T]of f){const k=x[x.length-1];x.push({fixed:w-k.stretch,stretch:k.stretch}),x.push({fixed:w-k.stretch,stretch:k.stretch+(T-w)})}return x.push({fixed:l+1,stretch:h}),x}function ct(f,l,h,x){return f/l*h+x}function it(f,l,h,x){return f-l*h/x}xn("Anchor",pe);class _t{constructor(l,h,x,w,T,k,D,B,Z,Y){var ee;if(this.boxStartIndex=l.length,Z){let oe=k.top,ue=k.bottom;const me=k.collisionPadding;me&&(oe-=me[1],ue+=me[3]);let ge=ue-oe;ge>0&&(ge=Math.max(10,ge),this.circleDiameter=ge)}else{const oe=!((ee=k.image)===null||ee===void 0)&&ee.content&&(k.image.textFitWidth||k.image.textFitHeight)?cf(k):{x1:k.left,y1:k.top,x2:k.right,y2:k.bottom};oe.y1=oe.y1*D-B[0],oe.y2=oe.y2*D+B[2],oe.x1=oe.x1*D-B[3],oe.x2=oe.x2*D+B[1];const ue=k.collisionPadding;if(ue&&(oe.x1-=ue[0]*D,oe.y1-=ue[1]*D,oe.x2+=ue[2]*D,oe.y2+=ue[3]*D),Y){const me=new u(oe.x1,oe.y1),ge=new u(oe.x2,oe.y1),xe=new u(oe.x1,oe.y2),Te=new u(oe.x2,oe.y2),Ue=Y*Math.PI/180;me._rotate(Ue),ge._rotate(Ue),xe._rotate(Ue),Te._rotate(Ue),oe.x1=Math.min(me.x,ge.x,xe.x,Te.x),oe.x2=Math.max(me.x,ge.x,xe.x,Te.x),oe.y1=Math.min(me.y,ge.y,xe.y,Te.y),oe.y2=Math.max(me.y,ge.y,xe.y,Te.y)}l.emplaceBack(h.x,h.y,oe.x1,oe.y1,oe.x2,oe.y2,x,w,T)}this.boxEndIndex=l.length}}class qt{constructor(l=[],h=(x,w)=>x<w?-1:x>w?1:0){if(this.data=l,this.length=this.data.length,this.compare=h,this.length>0)for(let x=(this.length>>1)-1;x>=0;x--)this._down(x)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:h,compare:x}=this,w=h[l];for(;l>0;){const T=l-1>>1,k=h[T];if(x(w,k)>=0)break;h[l]=k,l=T}h[l]=w}_down(l){const{data:h,compare:x}=this,w=this.length>>1,T=h[l];for(;l<w;){let k=1+(l<<1);const D=k+1;if(D<this.length&&x(h[D],h[k])<0&&(k=D),x(h[k],T)>=0)break;h[l]=h[k],l=k}h[l]=T}}function rr(f,l=1,h=!1){const x=Cp.fromPoints(f[0]),w=Math.min(x.width(),x.height());let T=w/2;const k=new qt([],fi),{minX:D,minY:B,maxX:Z,maxY:Y}=x;if(w===0)return new u(D,B);for(let ue=D;ue<Z;ue+=w)for(let me=B;me<Y;me+=w)k.push(new Bn(ue+T,me+T,T,f));let ee=(function(ue){let me=0,ge=0,xe=0;const Te=ue[0];for(let Ue=0,Ee=Te.length,Re=Ee-1;Ue<Ee;Re=Ue++){const qe=Te[Ue],Ge=Te[Re],dt=qe.x*Ge.y-Ge.x*qe.y;ge+=(qe.x+Ge.x)*dt,xe+=(qe.y+Ge.y)*dt,me+=3*dt}return new Bn(ge/me,xe/me,0,ue)})(f),oe=k.length;for(;k.length;){const ue=k.pop();(ue.d>ee.d||!ee.d)&&(ee=ue,h&&console.log("found best %d after %d probes",Math.round(1e4*ue.d)/1e4,oe)),ue.max-ee.d<=l||(T=ue.h/2,k.push(new Bn(ue.p.x-T,ue.p.y-T,T,f)),k.push(new Bn(ue.p.x+T,ue.p.y-T,T,f)),k.push(new Bn(ue.p.x-T,ue.p.y+T,T,f)),k.push(new Bn(ue.p.x+T,ue.p.y+T,T,f)),oe+=4)}return h&&(console.log(`num probes: ${oe}`),console.log(`best distance: ${ee.d}`)),ee.p}function fi(f,l){return l.max-f.max}function Bn(f,l,h,x){this.p=new u(f,l),this.h=h,this.d=(function(w,T){let k=!1,D=1/0;for(let B=0;B<T.length;B++){const Z=T[B];for(let Y=0,ee=Z.length,oe=ee-1;Y<ee;oe=Y++){const ue=Z[Y],me=Z[oe];ue.y>w.y!=me.y>w.y&&w.x<(me.x-ue.x)*(w.y-ue.y)/(me.y-ue.y)+ue.x&&(k=!k),D=Math.min(D,CS(w,ue,me))}}return(k?1:-1)*Math.sqrt(D)})(this.p,x),this.max=this.d+this.h*Math.SQRT2}var Yn;a.aP=void 0,(Yn=a.aP||(a.aP={}))[Yn.center=1]="center",Yn[Yn.left=2]="left",Yn[Yn.right=3]="right",Yn[Yn.top=4]="top",Yn[Yn.bottom=5]="bottom",Yn[Yn["top-left"]=6]="top-left",Yn[Yn["top-right"]=7]="top-right",Yn[Yn["bottom-left"]=8]="bottom-left",Yn[Yn["bottom-right"]=9]="bottom-right";const Br=Number.POSITIVE_INFINITY;function si(f,l){return l[1]!==Br?(function(h,x,w){let T=0,k=0;switch(x=Math.abs(x),w=Math.abs(w),h){case"top-right":case"top-left":case"top":k=w-7;break;case"bottom-right":case"bottom-left":case"bottom":k=7-w}switch(h){case"top-right":case"bottom-right":case"right":T=-x;break;case"top-left":case"bottom-left":case"left":T=x}return[T,k]})(f,l[0],l[1]):(function(h,x){let w=0,T=0;x<0&&(x=0);const k=x/Math.SQRT2;switch(h){case"top-right":case"top-left":T=k-7;break;case"bottom-right":case"bottom-left":T=7-k;break;case"bottom":T=7-x;break;case"top":T=x-7}switch(h){case"top-right":case"bottom-right":w=-k;break;case"top-left":case"bottom-left":w=k;break;case"left":w=x;break;case"right":w=-x}return[w,T]})(f,l[0])}function ff(f,l,h){var x;const w=f.layout,T=(x=w.get("text-variable-anchor-offset"))===null||x===void 0?void 0:x.evaluate(l,{},h);if(T){const D=T.values,B=[];for(let Z=0;Z<D.length;Z+=2){const Y=B[Z]=D[Z],ee=D[Z+1].map((oe=>oe*is));Y.startsWith("top")?ee[1]-=7:Y.startsWith("bottom")&&(ee[1]+=7),B[Z+1]=ee}return new co(B)}const k=w.get("text-variable-anchor");if(k){let D;D=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[w.get("text-radial-offset").evaluate(l,{},h)*is,Br]:w.get("text-offset").evaluate(l,{},h).map((Z=>Z*is));const B=[];for(const Z of k)B.push(Z,si(Z,D));return new co(B)}return null}function O2(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wde(f,l,h,x,w,T,k,D,B,Z,Y,ee){let oe=T.textMaxSize.evaluate(l,{});oe===void 0&&(oe=k);const ue=f.layers[0].layout,me=ue.get("icon-offset").evaluate(l,{},Y),ge=O7(h.horizontal),xe=k/24,Te=f.tilePixelRatio*xe,Ue=f.tilePixelRatio*oe/24,Ee=f.tilePixelRatio*D,Re=f.tilePixelRatio*ue.get("symbol-spacing"),qe=ue.get("text-padding")*f.tilePixelRatio,Ge=(function(_n,Tn,yn,Fn=1){const Hr=_n.get("icon-padding").evaluate(Tn,{},yn),Pr=Hr&&Hr.values;return[Pr[0]*Fn,Pr[1]*Fn,Pr[2]*Fn,Pr[3]*Fn]})(ue,l,Y,f.tilePixelRatio),dt=ue.get("text-max-angle")/180*Math.PI,Lt=ue.get("text-rotation-alignment")!=="viewport"&&ue.get("symbol-placement")!=="point",At=ue.get("icon-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",Vt=ue.get("symbol-placement"),dn=Re/2,Wt=ue.get("icon-text-fit");let Rt;x&&Wt!=="none"&&(f.allowVerticalPlacement&&h.vertical&&(Rt=ju(x,h.vertical,Wt,ue.get("icon-text-fit-padding"),me,xe)),ge&&(x=ju(x,ge,Wt,ue.get("icon-text-fit-padding"),me,xe)));const bt=Y?ee.line.getGranularityForZoomLevel(Y.z):1,On=(_n,Tn)=>{Tn.x<0||Tn.x>=Qe||Tn.y<0||Tn.y>=Qe||(function(yn,Fn,Hr,Pr,go,Da,ws,yo,no,pi,Fo,Ho,Hi,hc,La,dc,Hh,qs,Eo,Os,jo,Ws,Cg,pf,T2){const b0=yn.addToLineVertexArray(Fn,Hr);let Ex,w1,O1,S1,k7=0,E7=0,A7=0,P7=0,BD=-1,FD=-1;const Tg={};let M7=po("");if(yn.allowVerticalPlacement&&Pr.vertical){const rl=yo.layout.get("text-rotate").evaluate(jo,{},pf)+90;O1=new _t(no,Fn,pi,Fo,Ho,Pr.vertical,Hi,hc,La,rl),ws&&(S1=new _t(no,Fn,pi,Fo,Ho,ws,Hh,qs,La,rl))}if(go){const rl=yo.layout.get("icon-rotate").evaluate(jo,{}),Zu=yo.layout.get("icon-text-fit")!=="none",Ax=Nn(go,rl,Cg,Zu),gf=ws?Nn(ws,rl,Cg,Zu):void 0;w1=new _t(no,Fn,pi,Fo,Ho,go,Hh,qs,!1,rl),k7=4*Ax.length;const Px=yn.iconSizeData;let Dp=null;Px.kind==="source"?(Dp=[cc*yo.layout.get("icon-size").evaluate(jo,{})],Dp[0]>Op&&Gt(`${yn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Px.kind==="composite"&&(Dp=[cc*Ws.compositeIconSizes[0].evaluate(jo,{},pf),cc*Ws.compositeIconSizes[1].evaluate(jo,{},pf)],(Dp[0]>Op||Dp[1]>Op)&&Gt(`${yn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),yn.addSymbols(yn.icon,Ax,Dp,Os,Eo,jo,a.az.none,Fn,b0.lineStartIndex,b0.lineLength,-1,pf),BD=yn.icon.placedSymbolArray.length-1,gf&&(E7=4*gf.length,yn.addSymbols(yn.icon,gf,Dp,Os,Eo,jo,a.az.vertical,Fn,b0.lineStartIndex,b0.lineLength,-1,pf),FD=yn.icon.placedSymbolArray.length-1)}const R7=Object.keys(Pr.horizontal);for(const rl of R7){const Zu=Pr.horizontal[rl];if(!Ex){M7=po(Zu.text);const gf=yo.layout.get("text-rotate").evaluate(jo,{},pf);Ex=new _t(no,Fn,pi,Fo,Ho,Zu,Hi,hc,La,gf)}const Ax=Zu.positionedLines.length===1;if(A7+=w7(yn,Fn,Zu,Da,yo,La,jo,dc,b0,Pr.vertical?a.az.horizontal:a.az.horizontalOnly,Ax?R7:[rl],Tg,BD,Ws,pf),Ax)break}Pr.vertical&&(P7+=w7(yn,Fn,Pr.vertical,Da,yo,La,jo,dc,b0,a.az.vertical,["vertical"],Tg,FD,Ws,pf));const Cde=Ex?Ex.boxStartIndex:yn.collisionBoxArray.length,Tde=Ex?Ex.boxEndIndex:yn.collisionBoxArray.length,kde=O1?O1.boxStartIndex:yn.collisionBoxArray.length,Ede=O1?O1.boxEndIndex:yn.collisionBoxArray.length,Ade=w1?w1.boxStartIndex:yn.collisionBoxArray.length,Pde=w1?w1.boxEndIndex:yn.collisionBoxArray.length,Mde=S1?S1.boxStartIndex:yn.collisionBoxArray.length,Rde=S1?S1.boxEndIndex:yn.collisionBoxArray.length;let mf=-1;const yA=(rl,Zu)=>rl&&rl.circleDiameter?Math.max(rl.circleDiameter,Zu):Zu;mf=yA(Ex,mf),mf=yA(O1,mf),mf=yA(w1,mf),mf=yA(S1,mf);const I7=mf>-1?1:0;I7&&(mf*=T2/is),yn.glyphOffsetArray.length>=d0.MAX_GLYPHS&&Gt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),jo.sortKey!==void 0&&yn.addToSortKeyRanges(yn.symbolInstances.length,jo.sortKey);const Ide=ff(yo,jo,pf),[Dde,Lde]=(function(rl,Zu){const Ax=rl.length,gf=Zu?.values;if(gf?.length>0)for(let Px=0;Px<gf.length;Px+=2){const Dp=gf[Px+1];rl.emplaceBack(a.aP[gf[Px]],Dp[0],Dp[1])}return[Ax,rl.length]})(yn.textAnchorOffsets,Ide);yn.symbolInstances.emplaceBack(Fn.x,Fn.y,Tg.right>=0?Tg.right:-1,Tg.center>=0?Tg.center:-1,Tg.left>=0?Tg.left:-1,Tg.vertical||-1,BD,FD,M7,Cde,Tde,kde,Ede,Ade,Pde,Mde,Rde,pi,A7,P7,k7,E7,I7,0,Hi,mf,Dde,Lde)})(f,Tn,_n,h,x,w,Rt,f.layers[0],f.collisionBoxArray,l.index,l.sourceLayerIndex,f.index,Te,[qe,qe,qe,qe],Lt,B,Ee,Ge,At,me,l,T,Z,Y,k)};if(Vt==="line")for(const _n of p(l.geometry,0,0,Qe,Qe)){const Tn=rf(_n,bt),yn=Ct(Tn,Re,dt,h.vertical||ge,x,24,Ue,f.overscaling,Qe);for(const Fn of yn)ge&&Ode(f,ge.text,dn,Fn)||On(Tn,Fn)}else if(Vt==="line-center"){for(const _n of l.geometry)if(_n.length>1){const Tn=rf(_n,bt),yn=Yt(Tn,dt,h.vertical||ge,x,24,Ue);yn&&On(Tn,yn)}}else if(l.type==="Polygon")for(const _n of Qm(l.geometry,0)){const Tn=rr(_n,16);On(rf(_n[0],bt,!0),new pe(Tn.x,Tn.y,0))}else if(l.type==="LineString")for(const _n of l.geometry){const Tn=rf(_n,bt);On(Tn,new pe(Tn[0].x,Tn[0].y,0))}else if(l.type==="Point")for(const _n of l.geometry)for(const Tn of _n)On([Tn],new pe(Tn.x,Tn.y,0))}function w7(f,l,h,x,w,T,k,D,B,Z,Y,ee,oe,ue,me){const ge=(function(Ue,Ee,Re,qe,Ge,dt,Lt,At){const Vt=qe.layout.get("text-rotate").evaluate(dt,{})*Math.PI/180,dn=[];for(const Wt of Ee.positionedLines)for(const Rt of Wt.positionedGlyphs){if(!Rt.rect)continue;const bt=Rt.rect||{};let On=4,_n=!0,Tn=1,yn=0;const Fn=(Ge||At)&&Rt.vertical,Hr=Rt.metrics.advance*Rt.scale/2;if(At&&Ee.verticalizable&&(yn=Wt.lineOffset/2-(Rt.imageName?-(is-Rt.metrics.width*Rt.scale)/2:(Rt.scale-1)*is)),Rt.imageName){const qs=Lt[Rt.imageName];_n=qs.sdf,Tn=qs.pixelRatio,On=1/Tn}const Pr=Ge?[Rt.x+Hr,Rt.y]:[0,0];let go=Ge?[0,0]:[Rt.x+Hr+Re[0],Rt.y+Re[1]-yn],Da=[0,0];Fn&&(Da=go,go=[0,0]);const ws=Rt.metrics.isDoubleResolution?2:1,yo=(Rt.metrics.left-On)*Rt.scale-Hr+go[0],no=(-Rt.metrics.top-On)*Rt.scale+go[1],pi=yo+bt.w/ws*Rt.scale/Tn,Fo=no+bt.h/ws*Rt.scale/Tn,Ho=new u(yo,no),Hi=new u(pi,no),hc=new u(yo,Fo),La=new u(pi,Fo);if(Fn){const qs=new u(-Hr,Hr- -17),Eo=-Math.PI/2,Os=12-Hr,jo=new u(22-Os,-(Rt.imageName?Os:0)),Ws=new u(...Da);Ho._rotateAround(Eo,qs)._add(jo)._add(Ws),Hi._rotateAround(Eo,qs)._add(jo)._add(Ws),hc._rotateAround(Eo,qs)._add(jo)._add(Ws),La._rotateAround(Eo,qs)._add(jo)._add(Ws)}if(Vt){const qs=Math.sin(Vt),Eo=Math.cos(Vt),Os=[Eo,-qs,qs,Eo];Ho._matMult(Os),Hi._matMult(Os),hc._matMult(Os),La._matMult(Os)}const dc=new u(0,0),Hh=new u(0,0);dn.push({tl:Ho,tr:Hi,bl:hc,br:La,tex:bt,writingMode:Ee.writingMode,glyphOffset:Pr,sectionIndex:Rt.sectionIndex,isSDF:_n,pixelOffsetTL:dc,pixelOffsetBR:Hh,minFontScaleX:0,minFontScaleY:0})}return dn})(0,h,D,w,T,k,x,f.allowVerticalPlacement),xe=f.textSizeData;let Te=null;xe.kind==="source"?(Te=[cc*w.layout.get("text-size").evaluate(k,{})],Te[0]>Op&&Gt(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):xe.kind==="composite"&&(Te=[cc*ue.compositeTextSizes[0].evaluate(k,{},me),cc*ue.compositeTextSizes[1].evaluate(k,{},me)],(Te[0]>Op||Te[1]>Op)&&Gt(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,ge,Te,D,T,k,Z,l,B.lineStartIndex,B.lineLength,oe,me);for(const Ue of Y)ee[Ue]=f.text.placedSymbolArray.length-1;return 4*ge.length}function O7(f){for(const l in f)return f[l];return null}function Ode(f,l,h,x){const w=f.compareText;if(l in w){const T=w[l];for(let k=T.length-1;k>=0;k--)if(x.dist(T[k])<h)return!0}else w[l]=[];return w[l].push(x),!1}const S7=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class RD{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,x]=new Uint8Array(l,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const w=x>>4;if(w!==1)throw new Error(`Got v${w} data when expected v1.`);const T=S7[15&x];if(!T)throw new Error("Unrecognized array type.");const[k]=new Uint16Array(l,2,1),[D]=new Uint32Array(l,4,1);return new RD(D,k,T,l)}constructor(l,h=64,x=Float64Array,w){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=x,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const T=S7.indexOf(this.ArrayType),k=2*l*this.ArrayType.BYTES_PER_ELEMENT,D=l*this.IndexArrayType.BYTES_PER_ELEMENT,B=(8-D%8)%8;if(T<0)throw new Error(`Unexpected typed array class: ${x}.`);w&&w instanceof ArrayBuffer?(this.data=w,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+D+B,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+k+D+B),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+D+B,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+T]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=l)}add(l,h){const x=this._pos>>1;return this.ids[x]=x,this.coords[this._pos++]=l,this.coords[this._pos++]=h,x}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return ID(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,h,x,w){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:T,coords:k,nodeSize:D}=this,B=[0,T.length-1,0],Z=[];for(;B.length;){const Y=B.pop()||0,ee=B.pop()||0,oe=B.pop()||0;if(ee-oe<=D){for(let xe=oe;xe<=ee;xe++){const Te=k[2*xe],Ue=k[2*xe+1];Te>=l&&Te<=x&&Ue>=h&&Ue<=w&&Z.push(T[xe])}continue}const ue=oe+ee>>1,me=k[2*ue],ge=k[2*ue+1];me>=l&&me<=x&&ge>=h&&ge<=w&&Z.push(T[ue]),(Y===0?l<=me:h<=ge)&&(B.push(oe),B.push(ue-1),B.push(1-Y)),(Y===0?x>=me:w>=ge)&&(B.push(ue+1),B.push(ee),B.push(1-Y))}return Z}within(l,h,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:T,nodeSize:k}=this,D=[0,w.length-1,0],B=[],Z=x*x;for(;D.length;){const Y=D.pop()||0,ee=D.pop()||0,oe=D.pop()||0;if(ee-oe<=k){for(let xe=oe;xe<=ee;xe++)T7(T[2*xe],T[2*xe+1],l,h)<=Z&&B.push(w[xe]);continue}const ue=oe+ee>>1,me=T[2*ue],ge=T[2*ue+1];T7(me,ge,l,h)<=Z&&B.push(w[ue]),(Y===0?l-x<=me:h-x<=ge)&&(D.push(oe),D.push(ue-1),D.push(1-Y)),(Y===0?l+x>=me:h+x>=ge)&&(D.push(ue+1),D.push(ee),D.push(1-Y))}return B}}function ID(f,l,h,x,w,T){if(w-x<=h)return;const k=x+w>>1;C7(f,l,k,x,w,T),ID(f,l,h,x,k-1,1-T),ID(f,l,h,k+1,w,1-T)}function C7(f,l,h,x,w,T){for(;w>x;){if(w-x>600){const Z=w-x+1,Y=h-x+1,ee=Math.log(Z),oe=.5*Math.exp(2*ee/3),ue=.5*Math.sqrt(ee*oe*(Z-oe)/Z)*(Y-Z/2<0?-1:1);C7(f,l,h,Math.max(x,Math.floor(h-Y*oe/Z+ue)),Math.min(w,Math.floor(h+(Z-Y)*oe/Z+ue)),T)}const k=l[2*h+T];let D=x,B=w;for(S2(f,l,x,h),l[2*w+T]>k&&S2(f,l,x,w);D<B;){for(S2(f,l,D,B),D++,B--;l[2*D+T]<k;)D++;for(;l[2*B+T]>k;)B--}l[2*x+T]===k?S2(f,l,x,B):(B++,S2(f,l,B,w)),B<=h&&(x=B+1),h<=B&&(w=B-1)}}function S2(f,l,h,x){DD(f,h,x),DD(l,2*h,2*x),DD(l,2*h+1,2*x+1)}function DD(f,l,h){const x=f[l];f[l]=f[h],f[h]=x}function T7(f,l,h,x){const w=f-h,T=l-x;return w*w+T*T}var LD;a.cH=void 0,(LD=a.cH||(a.cH={})).create="create",LD.load="load",LD.fullLoad="fullLoad";let gA=null,C2=[];const $D=1e3/60,zD="loadTime",ND="fullLoadTime",Sde={mark(f){performance.mark(f)},frame(f){const l=f;gA!=null&&C2.push(l-gA),gA=l},clearMetrics(){gA=null,C2=[],performance.clearMeasures(zD),performance.clearMeasures(ND);for(const f in a.cH)performance.clearMarks(a.cH[f])},getPerformanceMetrics(){performance.measure(zD,a.cH.create,a.cH.load),performance.measure(ND,a.cH.create,a.cH.fullLoad);const f=performance.getEntriesByName(zD)[0].duration,l=performance.getEntriesByName(ND)[0].duration,h=C2.length,x=1/(C2.reduce(((T,k)=>T+k),0)/h/1e3),w=C2.filter((T=>T>$D)).reduce(((T,k)=>T+(k-$D)/$D),0);return{loadTime:f,fullLoadTime:l,fps:x,percentDroppedFrames:w/(h+w)*100,totalFrames:h}}};a.$=M,a.A=N,a.B=ec,a.C=rs,a.D=wn,a.E=Or,a.F=function([f,l,h]){return l+=90,l*=Math.PI/180,h*=Math.PI/180,{x:f*Math.cos(l)*Math.sin(h),y:f*Math.sin(l)*Math.sin(h),z:f*Math.cos(h)}},a.G=Ui,a.H=ii,a.I=wi,a.J=Uy,a.K=function(f){if(nn==null){const l=f.navigator?f.navigator.userAgent:null;nn=!!f.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return nn},a.L=class{constructor(f,l){this.target=f,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new r1((()=>this.process())),this.subscription=vt(this.target,"message",(h=>this.receive(h)),!1),this.globalScope=Sn(self)?f:window}registerMessageHandler(f,l){this.messageHandlers[f]=l}unregisterMessageHandler(f){delete this.messageHandlers[f]}sendAsync(f,l){return new Promise(((h,x)=>{const w=Math.round(1e18*Math.random()).toString(36).substring(0,10),T=l?vt(l.signal,"abort",(()=>{T?.unsubscribe(),delete this.resolveRejects[w];const B={id:w,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(B)}),JS):null;this.resolveRejects[w]={resolve:B=>{T?.unsubscribe(),h(B)},reject:B=>{T?.unsubscribe(),x(B)}};const k=[],D=Object.assign(Object.assign({},f),{id:w,sourceMapId:this.mapId,origin:location.origin,data:tc(f.data,k)});this.target.postMessage(D,{transfer:k})}))}receive(f){const l=f.data,h=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[h];const x=this.abortControllers[h];return delete this.abortControllers[h],void(x&&x.abort())}if(Sn(self)||l.mustQueue)return this.tasks[h]=l,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,l)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),l=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(f,l)}processTask(f,l){return s(this,void 0,void 0,(function*(){if(l.type==="<response>"){const w=this.resolveRejects[f];return delete this.resolveRejects[f],w?void(l.error?w.reject(fp(l.error)):w.resolve(fp(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=fp(l.data),x=new AbortController;this.abortControllers[f]=x;try{const w=yield this.messageHandlers[l.type](l.sourceMapId,h,x);this.completeTask(f,null,w)}catch(w){this.completeTask(f,w)}}))}completeTask(f,l,h){const x=[];delete this.abortControllers[f];const w={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?tc(l):null,data:tc(h,x)};this.target.postMessage(w,{transfer:x})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.M=tt,a.N=function(){var f=new N(16);return N!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},a.O=function(f,l,h){var x,w,T,k,D,B,Z,Y,ee,oe,ue,me,ge=h[0],xe=h[1],Te=h[2];return l===f?(f[12]=l[0]*ge+l[4]*xe+l[8]*Te+l[12],f[13]=l[1]*ge+l[5]*xe+l[9]*Te+l[13],f[14]=l[2]*ge+l[6]*xe+l[10]*Te+l[14],f[15]=l[3]*ge+l[7]*xe+l[11]*Te+l[15]):(w=l[1],T=l[2],k=l[3],D=l[4],B=l[5],Z=l[6],Y=l[7],ee=l[8],oe=l[9],ue=l[10],me=l[11],f[0]=x=l[0],f[1]=w,f[2]=T,f[3]=k,f[4]=D,f[5]=B,f[6]=Z,f[7]=Y,f[8]=ee,f[9]=oe,f[10]=ue,f[11]=me,f[12]=x*ge+D*xe+ee*Te+l[12],f[13]=w*ge+B*xe+oe*Te+l[13],f[14]=T*ge+Z*xe+ue*Te+l[14],f[15]=k*ge+Y*xe+me*Te+l[15]),f},a.P=u,a.Q=function(f,l,h){var x=h[0],w=h[1],T=h[2];return f[0]=l[0]*x,f[1]=l[1]*x,f[2]=l[2]*x,f[3]=l[3]*x,f[4]=l[4]*w,f[5]=l[5]*w,f[6]=l[6]*w,f[7]=l[7]*w,f[8]=l[8]*T,f[9]=l[9]*T,f[10]=l[10]*T,f[11]=l[11]*T,f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},a.R=Pa,a.S=function(f,l,h){var x=l[0],w=l[1],T=l[2],k=l[3],D=l[4],B=l[5],Z=l[6],Y=l[7],ee=l[8],oe=l[9],ue=l[10],me=l[11],ge=l[12],xe=l[13],Te=l[14],Ue=l[15],Ee=h[0],Re=h[1],qe=h[2],Ge=h[3];return f[0]=Ee*x+Re*D+qe*ee+Ge*ge,f[1]=Ee*w+Re*B+qe*oe+Ge*xe,f[2]=Ee*T+Re*Z+qe*ue+Ge*Te,f[3]=Ee*k+Re*Y+qe*me+Ge*Ue,f[4]=(Ee=h[4])*x+(Re=h[5])*D+(qe=h[6])*ee+(Ge=h[7])*ge,f[5]=Ee*w+Re*B+qe*oe+Ge*xe,f[6]=Ee*T+Re*Z+qe*ue+Ge*Te,f[7]=Ee*k+Re*Y+qe*me+Ge*Ue,f[8]=(Ee=h[8])*x+(Re=h[9])*D+(qe=h[10])*ee+(Ge=h[11])*ge,f[9]=Ee*w+Re*B+qe*oe+Ge*xe,f[10]=Ee*T+Re*Z+qe*ue+Ge*Te,f[11]=Ee*k+Re*Y+qe*me+Ge*Ue,f[12]=(Ee=h[12])*x+(Re=h[13])*D+(qe=h[14])*ee+(Ge=h[15])*ge,f[13]=Ee*w+Re*B+qe*oe+Ge*xe,f[14]=Ee*T+Re*Z+qe*ue+Ge*Te,f[15]=Ee*k+Re*Y+qe*me+Ge*Ue,f},a.T=Db,a.U=function(f,l){const h={};for(let x=0;x<l.length;x++){const w=l[x];w in f&&(h[w]=f[w])}return h},a.V=qh,a.W=ot,a.X=e2,a.Y=YE,a.Z=$e,a._=s,a.a=_e,a.a$=ce,a.a0=L,a.a1=Gn,a.a2=Dl,a.a3=JE,a.a4=ux,a.a5=Qe,a.a6=function(f,l,h){if(!f)return l||{};if(!l)return f||{};const x=dx(f),w=dx(l);(function(k,D){D.removeAll&&(k.add.clear(),k.update.clear(),k.remove.clear(),D.remove.clear());for(const B of D.remove)k.add.delete(B),k.update.delete(B);for(const[B,Z]of D.update){const Y=k.update.get(B);Y&&(D.update.set(B,n2(Y,Z)),k.update.delete(B))}})(x,w);const T={};if((x.removeAll||w.removeAll)&&(T.removeAll=!0),T.remove=new Set([...x.remove,...w.remove]),T.add=new Map([...x.add,...w.add]),T.update=new Map([...x.update,...w.update]),T.remove.size&&T.add.size)for(const k of T.add.keys())T.remove.delete(k);return(function(k){const D={};return k.removeAll&&(D.removeAll=k.removeAll),k.remove&&(D.remove=Array.from(k.remove)),k.add&&(D.add=Array.from(k.add.values())),k.update&&(D.update=Array.from(k.update.values())),D})(T)},a.a7=function(f,l){const h=new Map;if(f==null||f.type==null)return h;if(f.type==="Feature"){const x=hx(f,l);return x==null?void 0:(h.set(x,f),h)}if(f.type==="FeatureCollection"){const x=new Set;for(const w of f.features){const T=hx(w,l);if(T==null||x.has(T))return;x.add(T),h.set(T,w)}return h}},a.a8=function(f,l,h){var x,w;const T=[];if(l.removeAll)f.clear();else if(l.remove)for(const k of l.remove){const D=f.get(k);D&&(T.push(D.geometry),f.delete(k))}if(l.add)for(const k of l.add){const D=hx(k,h);if(D==null)continue;const B=f.get(D);B&&T.push(B.geometry),T.push(k.geometry),f.set(D,k)}if(l.update)for(const k of l.update){const D=f.get(k.id);if(!D)continue;const B=!!k.newGeometry,Z=k.removeAllProperties||((x=k.removeProperties)===null||x===void 0?void 0:x.length)>0||((w=k.addOrUpdateProperties)===null||w===void 0?void 0:w.length)>0;if(!B&&!Z)continue;T.push(D.geometry);const Y=Object.assign({},D);if(f.set(k.id,Y),B&&(T.push(k.newGeometry),Y.geometry=k.newGeometry),Z){if(Y.properties=k.removeAllProperties?{}:Object.assign({},Y.properties||{}),k.removeProperties)for(const ee of k.removeProperties)delete Y.properties[ee];if(k.addOrUpdateProperties)for(const{key:ee,value:oe}of k.addOrUpdateProperties)Y.properties[ee]=oe}}return T},a.a9=di,a.aA=function(f,{uSize:l,uSizeT:h},{lowerSize:x,upperSize:w}){return f.kind==="source"?x/cc:f.kind==="composite"?Ui.number(x/cc,w/cc,h):l},a.aB=function(f,l){var h=l[0],x=l[1],w=l[2],T=l[3],k=l[4],D=l[5],B=l[6],Z=l[7],Y=l[8],ee=l[9],oe=l[10],ue=l[11],me=l[12],ge=l[13],xe=l[14],Te=l[15],Ue=h*D-x*k,Ee=h*B-w*k,Re=h*Z-T*k,qe=x*B-w*D,Ge=x*Z-T*D,dt=w*Z-T*B,Lt=Y*ge-ee*me,At=Y*xe-oe*me,Vt=Y*Te-ue*me,dn=ee*xe-oe*ge,Wt=ee*Te-ue*ge,Rt=oe*Te-ue*xe,bt=Ue*Rt-Ee*Wt+Re*dn+qe*Vt-Ge*At+dt*Lt;return bt?(f[0]=(D*Rt-B*Wt+Z*dn)*(bt=1/bt),f[1]=(w*Wt-x*Rt-T*dn)*bt,f[2]=(ge*dt-xe*Ge+Te*qe)*bt,f[3]=(oe*Ge-ee*dt-ue*qe)*bt,f[4]=(B*Vt-k*Rt-Z*At)*bt,f[5]=(h*Rt-w*Vt+T*At)*bt,f[6]=(xe*Re-me*dt-Te*Ee)*bt,f[7]=(Y*dt-oe*Re+ue*Ee)*bt,f[8]=(k*Wt-D*Vt+Z*Lt)*bt,f[9]=(x*Vt-h*Wt-T*Lt)*bt,f[10]=(me*Ge-ge*Re+Te*Ue)*bt,f[11]=(ee*Re-Y*Ge-ue*Ue)*bt,f[12]=(D*At-k*dn-B*Lt)*bt,f[13]=(h*dn-x*At+w*Lt)*bt,f[14]=(ge*Ee-me*qe-xe*Ue)*bt,f[15]=(Y*qe-ee*Ee+oe*Ue)*bt,f):null},a.aC=Me,a.aD=function(f){var l=f[0],h=f[1];return Math.sqrt(l*l+h*h)},a.aE=function(f){return f[0]=0,f[1]=0,f},a.aF=function(f,l,h){return f[0]=l[0]*h,f[1]=l[1]*h,f},a.aG=GS,a.aH=be,a.aI=function(f,l,h,x){const w=l.y-f.y,T=l.x-f.x,k=x.y-h.y,D=x.x-h.x,B=k*T-D*w;if(B===0)return null;const Z=(D*(f.y-h.y)-k*(f.x-h.x))/B;return new u(f.x+Z*T,f.y+Z*w)},a.aJ=p,a.aK=mg,a.aL=function(f){let l=1/0,h=1/0,x=-1/0,w=-1/0;for(const T of f)l=Math.min(l,T.x),h=Math.min(h,T.y),x=Math.max(x,T.x),w=Math.max(w,T.y);return[l,h,x,w]},a.aM=is,a.aN=Ce,a.aO=function(f,l,h,x,w=!1){if(!h[0]&&!h[1])return[0,0];const T=w?x==="map"?-f.bearingInRadians:0:x==="viewport"?f.bearingInRadians:0;if(T){const k=Math.sin(T),D=Math.cos(T);h=[h[0]*D-h[1]*k,h[0]*k+h[1]*D]}return[w?h[0]:Ce(l,h[0],f.zoom),w?h[1]:Ce(l,h[1],f.zoom)]},a.aQ=Kb,a.aR=O2,a.aS=ZS,a.aT=RD,a.aU=Zi,a.aV=ex,a.aW=Ie,a.aX=hn,a.aY=gt,a.aZ=jt,a.a_=t2,a.aa=Cp,a.ab=25,a.ac=Is,a.ad=f=>{const l=window.document.createElement("video");return l.muted=!0,new Promise((h=>{l.onloadstart=()=>{h(l)};for(const x of f){const w=window.document.createElement("source");st(x)||(l.crossOrigin="Anonymous"),w.src=x,l.appendChild(w)}}))},a.ae=Xt,a.af=function(){return Et++},a.ag=C,a.ah=d0,a.ai=kx,a.aj=Sa,a.ak=ac,a.al=s1,a.am=function(f){const l={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((h,x,w,T)=>{const k=w||T;return l[x]=!k||k.toLowerCase(),""})),l["max-age"]){const h=parseInt(l["max-age"],10);isNaN(h)?delete l["max-age"]:l["max-age"]=h}return l},a.an=lt,a.ao=85.051129,a.ap=kt,a.aq=function(f){return Math.pow(2,f)},a.ar=Q,a.as=KE,a.at=function(f){return Math.log(f)/Math.LN2},a.au=function(f){var l=f[0],h=f[1];return l*l+h*h},a.av=function(f){if(!f.length)return new Set;const l=Math.max(...f.map((B=>B.canonical.z)));let h=1/0,x=-1/0,w=1/0,T=-1/0;const k=[];for(const B of f){const{x:Z,y:Y,z:ee}=B.canonical,oe=Math.pow(2,l-ee),ue=Z*oe,me=Y*oe;k.push({id:B,x:ue,y:me}),ue<h&&(h=ue),ue>x&&(x=ue),me<w&&(w=me),me>T&&(T=me)}const D=new Set;for(const B of k)B.x!==h&&B.x!==x&&B.y!==w&&B.y!==T||D.add(B.id);return D},a.aw=function(f,l){const h=Math.abs(2*f.wrap)-+(f.wrap<0),x=Math.abs(2*l.wrap)-+(l.wrap<0);return f.overscaledZ-l.overscaledZ||x-h||l.canonical.y-f.canonical.y||l.canonical.x-f.canonical.x},a.ax=class{constructor(f,l){this.max=f,this.onRemove=l,this.reset()}reset(){for(const f in this.data)for(const l of this.data[f])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(f,l,h){const x=f.wrapped().key;this.data[x]===void 0&&(this.data[x]=[]);const w={value:l,timeout:void 0};if(h!==void 0&&(w.timeout=setTimeout((()=>{this.remove(f,w)}),h)),this.data[x].push(w),this.order.push(x),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(f){return f.wrapped().key in this.data}getAndRemove(f){return this.has(f)?this._getAndRemoveByKey(f.wrapped().key):null}_getAndRemoveByKey(f){const l=this.data[f].shift();return l.timeout&&clearTimeout(l.timeout),this.data[f].length===0&&delete this.data[f],this.order.splice(this.order.indexOf(f),1),l.value}getByKey(f){const l=this.data[f];return l?l[0].value:null}get(f){return this.has(f)?this.data[f.wrapped().key][0].value:null}remove(f,l){if(!this.has(f))return this;const h=f.wrapped().key,x=l===void 0?0:this.data[h].indexOf(l),w=this.data[h][x];return this.data[h].splice(x,1),w.timeout&&clearTimeout(w.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(w.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(f){for(this.max=f;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(f){const l=[];for(const h in this.data)for(const x of this.data[h])f(x.value)||l.push(x);for(const h of l)this.remove(h.value.tileID,h)}},a.ay=function(f,l){let h=0,x=0;if(f.kind==="constant")x=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:w,minZoom:T,maxZoom:k}=f,D=w?lt(pa.interpolationFactor(w,l,T,k),0,1):0;f.kind==="camera"?x=Ui.number(f.minSize,f.maxSize,D):h=D}return{uSizeT:h,uSize:x}},a.b=Cn,a.b$=sc,a.b0=ne,a.b1=function(f){var l=new N(3);return l[0]=f[0],l[1]=f[1],l[2]=f[2],l},a.b2=function(f,l,h){return f[0]=l[0]-h[0],f[1]=l[1]-h[1],f[2]=l[2]-h[2],f},a.b3=function(f,l){var h=l[0],x=l[1],w=l[2],T=h*h+x*x+w*w;return T>0&&(T=1/Math.sqrt(T)),f[0]=l[0]*T,f[1]=l[1]*T,f[2]=l[2]*T,f},a.b4=we,a.b5=function(f,l){return f[0]*l[0]+f[1]*l[1]+f[2]*l[2]},a.b6=function(f,l,h){return f[0]=l[0]*h[0],f[1]=l[1]*h[1],f[2]=l[2]*h[2],f[3]=l[3]*h[3],f},a.b7=H,a.b8=function(f,l,h){const x=l[0]*h[0]+l[1]*h[1]+l[2]*h[2];return x===0?null:(-(f[0]*h[0]+f[1]*h[1]+f[2]*h[2])-h[3])/x},a.b9=se,a.bA=function(f,l,h,x){return f[0]=l[0]+h[0]*x,f[1]=l[1]+h[1]*x,f[2]=l[2]+h[2]*x,f},a.bB=ve,a.bC=function(f,l,h){var x=h[0],w=h[1],T=h[2],k=h[3],D=l[0],B=l[1],Z=l[2],Y=w*Z-T*B,ee=T*D-x*Z,oe=x*B-w*D;return f[0]=D+k*(Y+=Y)+w*(oe+=oe)-T*(ee+=ee),f[1]=B+k*ee+T*Y-x*oe,f[2]=Z+k*oe+x*ee-w*Y,f},a.bD=function(f,l,h){const x=(function(B){var Z=B[3],Y=B[4],ee=B[5],oe=B[6],ue=B[7],me=B[8];return B[0]*(me*Y-ee*ue)+B[1]*(-me*Z+ee*oe)+B[2]*(ue*Z-Y*oe)})([f[0],f[1],f[2],l[0],l[1],l[2],h[0],h[1],h[2]]);if(x===0)return null;const w=we([],[l[0],l[1],l[2]],[h[0],h[1],h[2]]),T=we([],[h[0],h[1],h[2]],[f[0],f[1],f[2]]),k=we([],[f[0],f[1],f[2]],[l[0],l[1],l[2]]),D=ce([],w,-f[3]);return ne(D,D,ce([],T,-l[3])),ne(D,D,ce([],k,-h[3])),ce(D,D,1/x),D},a.bE=i1,a.bF=function(){return new Float64Array(4)},a.bG=function(f,l,h,x){var w=[],T=[];return w[0]=l[0]-h[0],w[1]=l[1]-h[1],w[2]=l[2]-h[2],T[0]=w[0]*Math.cos(x)-w[1]*Math.sin(x),T[1]=w[0]*Math.sin(x)+w[1]*Math.cos(x),T[2]=w[2],f[0]=T[0]+h[0],f[1]=T[1]+h[1],f[2]=T[2]+h[2],f},a.bH=function(f,l,h,x){var w=[],T=[];return w[0]=l[0]-h[0],w[1]=l[1]-h[1],w[2]=l[2]-h[2],T[0]=w[0],T[1]=w[1]*Math.cos(x)-w[2]*Math.sin(x),T[2]=w[1]*Math.sin(x)+w[2]*Math.cos(x),f[0]=T[0]+h[0],f[1]=T[1]+h[1],f[2]=T[2]+h[2],f},a.bI=function(f,l,h,x){var w=[],T=[];return w[0]=l[0]-h[0],w[1]=l[1]-h[1],w[2]=l[2]-h[2],T[0]=w[2]*Math.sin(x)+w[0]*Math.cos(x),T[1]=w[1],T[2]=w[2]*Math.cos(x)-w[0]*Math.sin(x),f[0]=T[0]+h[0],f[1]=T[1]+h[1],f[2]=T[2]+h[2],f},a.bJ=function(f,l,h){var x=Math.sin(h),w=Math.cos(h),T=l[0],k=l[1],D=l[2],B=l[3],Z=l[8],Y=l[9],ee=l[10],oe=l[11];return l!==f&&(f[4]=l[4],f[5]=l[5],f[6]=l[6],f[7]=l[7],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[0]=T*w-Z*x,f[1]=k*w-Y*x,f[2]=D*w-ee*x,f[3]=B*w-oe*x,f[8]=T*x+Z*w,f[9]=k*x+Y*w,f[10]=D*x+ee*w,f[11]=B*x+oe*w,f},a.bK=function(f,l){const h=Ae(f,360),x=Ae(l,360),w=x-h,T=x>h?w-360:w+360;return Math.abs(w)<Math.abs(T)?w:T},a.bL=function(f){return f[0]=0,f[1]=0,f[2]=0,f},a.bM=function(f,l,h,x){const w=Math.sqrt(f*f+l*l),T=Math.sqrt(h*h+x*x);f/=w,l/=w,h/=T,x/=T;const k=Math.acos(f*h+l*x);return-l*h+f*x>0?k:-k},a.bN=function(f,l){const h=Ae(f,2*Math.PI),x=Ae(l,2*Math.PI);return Math.min(Math.abs(h-x),Math.abs(h-x+2*Math.PI),Math.abs(h-x-2*Math.PI))},a.bO=function(){const f={},l=ut.$version;for(const h in ut.$root){const x=ut.$root[h];if(x.required){let w=null;w=h==="version"?l:x.type==="array"?[]:{},w!=null&&(f[h]=w)}}return f},a.bP=at,a.bQ=Wy,a.bR=function f(l,h){if(Array.isArray(l)){if(!Array.isArray(h)||l.length!==h.length)return!1;for(let x=0;x<l.length;x++)if(!f(l[x],h[x]))return!1;return!0}if(typeof l=="object"&&l!==null&&h!==null){if(typeof h!="object"||Object.keys(l).length!==Object.keys(h).length)return!1;for(const x in l)if(!f(l[x],h[x]))return!1;return!0}return l===h},a.bS=function(f){f=f.slice();const l=Object.create(null);for(let h=0;h<f.length;h++)l[f[h].id]=f[h];for(let h=0;h<f.length;h++)"ref"in f[h]&&(f[h]=ji(f[h],l[f[h].ref]));return f},a.bT=function(f,l){if(f.type==="custom")return new KS(f,l);switch(f.type){case"background":return new Qr(f,l);case"circle":return new Mb(f,l);case"color-relief":return new CE(f,l);case"fill":return new PE(f,l);case"fill-extrusion":return new NS(f,l);case"heatmap":return new OE(f,l);case"hillshade":return new mo(f,l);case"line":return new FS(f,l);case"raster":return new Du(f,l);case"symbol":return new Sp(f,l)}},a.bU=f=>f.type==="raster",a.bV=wt,a.bW=function(f,l){if(!f)return[{command:"setStyle",args:[l]}];let h=[];try{if(!tr(f.version,l.version))return[{command:"setStyle",args:[l]}];tr(f.center,l.center)||h.push({command:"setCenter",args:[l.center]}),tr(f.state,l.state)||h.push({command:"setGlobalState",args:[l.state]}),tr(f.centerAltitude,l.centerAltitude)||h.push({command:"setCenterAltitude",args:[l.centerAltitude]}),tr(f.zoom,l.zoom)||h.push({command:"setZoom",args:[l.zoom]}),tr(f.bearing,l.bearing)||h.push({command:"setBearing",args:[l.bearing]}),tr(f.pitch,l.pitch)||h.push({command:"setPitch",args:[l.pitch]}),tr(f.roll,l.roll)||h.push({command:"setRoll",args:[l.roll]}),tr(f.sprite,l.sprite)||h.push({command:"setSprite",args:[l.sprite]}),tr(f.glyphs,l.glyphs)||h.push({command:"setGlyphs",args:[l.glyphs]}),tr(f.transition,l.transition)||h.push({command:"setTransition",args:[l.transition]}),tr(f.light,l.light)||h.push({command:"setLight",args:[l.light]}),tr(f.terrain,l.terrain)||h.push({command:"setTerrain",args:[l.terrain]}),tr(f.sky,l.sky)||h.push({command:"setSky",args:[l.sky]}),tr(f.projection,l.projection)||h.push({command:"setProjection",args:[l.projection]});const x={},w=[];(function(k,D,B,Z){let Y;for(Y in D=D||{},k=k||{})Object.prototype.hasOwnProperty.call(k,Y)&&(Object.prototype.hasOwnProperty.call(D,Y)||an(Y,B,Z));for(Y in D)Object.prototype.hasOwnProperty.call(D,Y)&&(Object.prototype.hasOwnProperty.call(k,Y)?tr(k[Y],D[Y])||(k[Y].type==="geojson"&&D[Y].type==="geojson"&&Hn(k,D,Y)?Pn(B,{command:"setGeoJSONSourceData",args:[Y,D[Y].data]}):En(Y,D,B,Z)):ci(Y,D,B))})(f.sources,l.sources,w,x);const T=[];f.layers&&f.layers.forEach((k=>{"source"in k&&x[k.source]?h.push({command:"removeLayer",args:[k.id]}):T.push(k)})),h=h.concat(w),(function(k,D,B){D=D||[];const Z=(k=k||[]).map(ki),Y=D.map(ki),ee=k.reduce(hs,{}),oe=D.reduce(hs,{}),ue=Z.slice(),me=Object.create(null);let ge,xe,Te,Ue,Ee;for(let Re=0,qe=0;Re<Z.length;Re++)ge=Z[Re],Object.prototype.hasOwnProperty.call(oe,ge)?qe++:(Pn(B,{command:"removeLayer",args:[ge]}),ue.splice(ue.indexOf(ge,qe),1));for(let Re=0,qe=0;Re<Y.length;Re++)ge=Y[Y.length-1-Re],ue[ue.length-1-Re]!==ge&&(Object.prototype.hasOwnProperty.call(ee,ge)?(Pn(B,{command:"removeLayer",args:[ge]}),ue.splice(ue.lastIndexOf(ge,ue.length-qe),1)):qe++,Ue=ue[ue.length-Re],Pn(B,{command:"addLayer",args:[oe[ge],Ue]}),ue.splice(ue.length-Re,0,ge),me[ge]=!0);for(let Re=0;Re<Y.length;Re++)if(ge=Y[Re],xe=ee[ge],Te=oe[ge],!me[ge]&&!tr(xe,Te))if(tr(xe.source,Te.source)&&tr(xe["source-layer"],Te["source-layer"])&&tr(xe.type,Te.type)){for(Ee in nr(xe.layout,Te.layout,B,ge,null,"setLayoutProperty"),nr(xe.paint,Te.paint,B,ge,null,"setPaintProperty"),tr(xe.filter,Te.filter)||Pn(B,{command:"setFilter",args:[ge,Te.filter]}),tr(xe.minzoom,Te.minzoom)&&tr(xe.maxzoom,Te.maxzoom)||Pn(B,{command:"setLayerZoomRange",args:[ge,Te.minzoom,Te.maxzoom]}),xe)Object.prototype.hasOwnProperty.call(xe,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?nr(xe[Ee],Te[Ee],B,ge,Ee.slice(6),"setPaintProperty"):tr(xe[Ee],Te[Ee])||Pn(B,{command:"setLayerProperty",args:[ge,Ee,Te[Ee]]}));for(Ee in Te)Object.prototype.hasOwnProperty.call(Te,Ee)&&!Object.prototype.hasOwnProperty.call(xe,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?nr(xe[Ee],Te[Ee],B,ge,Ee.slice(6),"setPaintProperty"):tr(xe[Ee],Te[Ee])||Pn(B,{command:"setLayerProperty",args:[ge,Ee,Te[Ee]]}))}else Pn(B,{command:"removeLayer",args:[ge]}),Ue=ue[ue.lastIndexOf(ge)+1],Pn(B,{command:"addLayer",args:[Te,Ue]})})(T,l.layers,h)}catch(x){console.warn("Unable to compute style diff:",x),h=[{command:"setStyle",args:[l]}]}return h},a.bX=function(f){const l=[],h=f.id;return h===void 0&&l.push({message:`layers.${h}: missing required property "id"`}),f.render===void 0&&l.push({message:`layers.${h}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&l.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),l},a.bY=Tt,a.bZ=Ht,a.b_=class extends Ea{constructor(f,l){super(f,l),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},a.ba=function(f,l,h){return f[0]=l[0]*h,f[1]=l[1]*h,f[2]=l[2]*h,f[3]=l[3]*h,f},a.bb=function(f,l){return f[0]*l[0]+f[1]*l[1]+f[2]*l[2]+f[3]},a.bc=eA,a.bd=p0,a.be=function(f,l,h,x,w){var T=1/Math.tan(l/2);if(f[0]=T/h,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=T,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,w!=null&&w!==1/0){var k=1/(x-w);f[10]=(w+x)*k,f[14]=2*w*x*k}else f[10]=-1,f[14]=-2*x;return f},a.bf=function(f){var l=new N(16);return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=f[6],l[7]=f[7],l[8]=f[8],l[9]=f[9],l[10]=f[10],l[11]=f[11],l[12]=f[12],l[13]=f[13],l[14]=f[14],l[15]=f[15],l},a.bg=function(f,l,h){var x=Math.sin(h),w=Math.cos(h),T=l[0],k=l[1],D=l[2],B=l[3],Z=l[4],Y=l[5],ee=l[6],oe=l[7];return l!==f&&(f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[0]=T*w+Z*x,f[1]=k*w+Y*x,f[2]=D*w+ee*x,f[3]=B*w+oe*x,f[4]=Z*w-T*x,f[5]=Y*w-k*x,f[6]=ee*w-D*x,f[7]=oe*w-B*x,f},a.bh=function(f,l,h){var x=Math.sin(h),w=Math.cos(h),T=l[4],k=l[5],D=l[6],B=l[7],Z=l[8],Y=l[9],ee=l[10],oe=l[11];return l!==f&&(f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[4]=T*w+Z*x,f[5]=k*w+Y*x,f[6]=D*w+ee*x,f[7]=B*w+oe*x,f[8]=Z*w-T*x,f[9]=Y*w-k*x,f[10]=ee*w-D*x,f[11]=oe*w-B*x,f},a.bi=function(){const f=new Float32Array(16);return Q(f),f},a.bj=function(){const f=new Float64Array(16);return Q(f),f},a.bk=function(){return new Float64Array(16)},a.bl=function(f,l,h){const x=new Float64Array(4);return ve(x,f,l-90,h),x},a.bm=function(f,l,h,x){var w,T,k,D,B,Z=l[0],Y=l[1],ee=l[2],oe=l[3],ue=h[0],me=h[1],ge=h[2],xe=h[3];return(T=Z*ue+Y*me+ee*ge+oe*xe)<0&&(T=-T,ue=-ue,me=-me,ge=-ge,xe=-xe),1-T>$?(w=Math.acos(T),k=Math.sin(w),D=Math.sin((1-x)*w)/k,B=Math.sin(x*w)/k):(D=1-x,B=x),f[0]=D*Z+B*ue,f[1]=D*Y+B*me,f[2]=D*ee+B*ge,f[3]=D*oe+B*xe,f},a.bn=function(f){const l=new Float64Array(9);(function(T,k){var D=k[0],B=k[1],Z=k[2],Y=k[3],ee=D+D,oe=B+B,ue=Z+Z,me=D*ee,ge=B*ee,xe=B*oe,Te=Z*ee,Ue=Z*oe,Ee=Z*ue,Re=Y*ee,qe=Y*oe,Ge=Y*ue;T[0]=1-xe-Ee,T[3]=ge-Ge,T[6]=Te+qe,T[1]=ge+Ge,T[4]=1-me-Ee,T[7]=Ue-Re,T[2]=Te-qe,T[5]=Ue+Re,T[8]=1-me-xe})(l,f);const h=jt(-Math.asin(lt(l[2],-1,1)));let x,w;return Math.hypot(l[5],l[8])<.001?(x=0,w=-jt(Math.atan2(l[3],l[4]))):(x=jt(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),w=jt(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:x,pitch:h+90,bearing:w}},a.bo=function(f,l){return f.roll==l.roll&&f.pitch==l.pitch&&f.bearing==l.bearing},a.bp=mr,a.bq=Kd,a.br=Pl,a.bs=Bu,a.bt=Rs,a.bu=Xe,a.bv=ke,a.bw=ts,a.bx=function(f,l,h,x,w){return Xe(x,w,lt((f-l)/(h-l),0,1))},a.by=Ae,a.bz=function(){return new Float64Array(3)},a.c=ze,a.c$=function(f,l,h,x,w){return s(this,void 0,void 0,(function*(){if(L())try{return yield Gn(f,l,h,x,w)}catch{}return(function(T,k,D,B,Z){const Y=T.width,ee=T.height;je&&Ye||(je=new OffscreenCanvas(Y,ee),Ye=je.getContext("2d",{willReadFrequently:!0})),je.width=Y,je.height=ee,Ye.drawImage(T,0,0,Y,ee);const oe=Ye.getImageData(k,D,B,Z);return Ye.clearRect(0,0,Y,ee),oe.data})(f,l,h,x,w)}))},a.c0=class extends Ea{constructor(f,l){super(f,l),this.current=Aa}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let l=1;l<16;l++)if(f[l]!==this.current[l]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},a.c1=vp,a.c2=class extends Ea{constructor(f,l){super(f,l),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},a.c3=class extends Ea{constructor(f,l){super(f,l),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},a.c4=F,a.c5=function(f,l){var h=Math.sin(l),x=Math.cos(l);return f[0]=x,f[1]=h,f[2]=0,f[3]=-h,f[4]=x,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},a.c6=function(f,l,h){var x=l[0],w=l[1],T=l[2];return f[0]=x*h[0]+w*h[3]+T*h[6],f[1]=x*h[1]+w*h[4]+T*h[7],f[2]=x*h[2]+w*h[5]+T*h[8],f},a.c7=function(f,l,h,x,w,T,k){var D=1/(l-h),B=1/(x-w),Z=1/(T-k);return f[0]=-2*D,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*B,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*Z,f[11]=0,f[12]=(l+h)*D,f[13]=(w+x)*B,f[14]=(k+T)*Z,f[15]=1,f},a.c8=class extends Ea{constructor(f,l){super(f,l),this.current=new Array}set(f){if(f!=this.current){this.current=f;const l=new Float32Array(4*f.length);for(let h=0;h<f.length;h++)l[4*h]=f[h].r,l[4*h+1]=f[h].g,l[4*h+2]=f[h].b,l[4*h+3]=f[h].a;this.gl.uniform4fv(this.location,l)}}},a.c9=class extends Ea{constructor(f,l){super(f,l),this.current=new Array}set(f){if(f!=this.current){this.current=f;const l=new Float32Array(f);this.gl.uniform1fv(this.location,l)}}},a.cA=function(f,l){return Oe[l]&&"touches"in f},a.cB=function(f){return Oe[f]||ae[f]},a.cC=function(f,l,h){var x=l[0],w=l[1];return f[0]=h[0]*x+h[4]*w+h[12],f[1]=h[1]*x+h[5]*w+h[13],f},a.cD=function(f,l){const{x:h,y:x}=di.fromLngLat(l);return!(f<0||f>25||x<0||x>=1||h<0||h>=1)},a.cE=function(f,l){return f[0]=l[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=l[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=l[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},a.cF=class extends Hd{},a.cG=Sde,a.cI=Ke,a.cJ=function(f,l){ze.REGISTERED_PROTOCOLS[f]=l},a.cK=function(f){delete ze.REGISTERED_PROTOCOLS[f]},a.cL=function(f,l){const h={};for(let w=0;w<f.length;w++){const T=l&&l[f[w].id]||ku(f[w]);l&&(l[f[w].id]=T);let k=h[T];k||(k=h[T]=[]),k.push(f[w])}const x=[];for(const w in h)x.push(h[w]);return x},a.cM=xn,a.cN=r2,a.cO=w2,a.cP=Gb,a.cQ=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=Qe/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const l=f.bucket.layers[0],h=l.layout,x=l._unevaluatedLayout._values,w={layoutIconSize:x["icon-size"].possiblyEvaluate(new ii(f.bucket.zoom+1),f.canonical),layoutTextSize:x["text-size"].possiblyEvaluate(new ii(f.bucket.zoom+1),f.canonical),textMaxSize:x["text-size"].possiblyEvaluate(new ii(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:Z,maxZoom:Y}=f.bucket.textSizeData;w.compositeTextSizes=[x["text-size"].possiblyEvaluate(new ii(Z),f.canonical),x["text-size"].possiblyEvaluate(new ii(Y),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:Z,maxZoom:Y}=f.bucket.iconSizeData;w.compositeIconSizes=[x["icon-size"].possiblyEvaluate(new ii(Z),f.canonical),x["icon-size"].possiblyEvaluate(new ii(Y),f.canonical)]}const T=h.get("text-line-height")*is,k=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",D=h.get("text-keep-upright"),B=h.get("text-size");for(const Z of f.bucket.features){const Y=h.get("text-font").evaluate(Z,{},f.canonical).join(","),ee=B.evaluate(Z,{},f.canonical),oe=w.layoutTextSize.evaluate(Z,{},f.canonical),ue=w.layoutIconSize.evaluate(Z,{},f.canonical),me={horizontal:{},vertical:void 0},ge=Z.text;let xe,Te=[0,0];if(ge){const Re=ge.toString(),qe=h.get("text-letter-spacing").evaluate(Z,{},f.canonical)*is,Ge=Hy(Re)?qe:0,dt=h.get("text-anchor").evaluate(Z,{},f.canonical),Lt=ff(l,Z,f.canonical);if(!Lt){const Wt=h.get("text-radial-offset").evaluate(Z,{},f.canonical);Te=Wt?si(dt,[Wt*is,Br]):h.get("text-offset").evaluate(Z,{},f.canonical).map((Rt=>Rt*is))}let At=k?"center":h.get("text-justify").evaluate(Z,{},f.canonical);const Vt=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(Z,{},f.canonical)*is:1/0,dn=()=>{f.bucket.allowVerticalPlacement&&Uc(Re)&&(me.vertical=ax(ge,f.glyphMap,f.glyphPositions,f.imagePositions,Y,Vt,T,dt,"left",Ge,Te,a.az.vertical,!0,oe,ee))};if(!k&&Lt){const Wt=new Set;if(At==="auto")for(let bt=0;bt<Lt.values.length;bt+=2)Wt.add(O2(Lt.values[bt]));else Wt.add(At);let Rt=!1;for(const bt of Wt)if(!me.horizontal[bt])if(Rt)me.horizontal[bt]=me.horizontal[0];else{const On=ax(ge,f.glyphMap,f.glyphPositions,f.imagePositions,Y,Vt,T,"center",bt,Ge,Te,a.az.horizontal,!1,oe,ee);On&&(me.horizontal[bt]=On,Rt=On.positionedLines.length===1)}dn()}else{At==="auto"&&(At=O2(dt));const Wt=ax(ge,f.glyphMap,f.glyphPositions,f.imagePositions,Y,Vt,T,dt,At,Ge,Te,a.az.horizontal,!1,oe,ee);Wt&&(me.horizontal[At]=Wt),dn(),Uc(Re)&&k&&D&&(me.vertical=ax(ge,f.glyphMap,f.glyphPositions,f.imagePositions,Y,Vt,T,dt,At,Ge,Te,a.az.vertical,!1,oe,ee))}}let Ue=!1;if(Z.icon&&Z.icon.name){const Re=f.imageMap[Z.icon.name];Re&&(xe=WS(f.imagePositions[Z.icon.name],h.get("icon-offset").evaluate(Z,{},f.canonical),h.get("icon-anchor").evaluate(Z,{},f.canonical)),Ue=!!Re.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Ue:f.bucket.sdfIcons!==Ue&&Gt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Re.pixelRatio!==f.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const Ee=O7(me.horizontal)||me.vertical;f.bucket.iconsInText=!!Ee&&Ee.iconsInText,(Ee||xe)&&wde(f.bucket,Z,me,xe,f.imageMap,w,oe,ue,Te,Ue,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},a.cR=yg,a.cS=_p,a.cT=o0,a.cU=function(f){const l=new qb;return(function(h,x){for(const w in h.layers)x.writeMessage(3,v1,h.layers[w])})(f,l),l.finish()},a.cV=function(f,l,h,x,w,T){let k=y(f,l,h,w,0);return k=y(k,l,x,T,1),k},a.cW=class{constructor(f){this.maxEntries=f,this.map=new Map}get(f){const l=this.map.get(f);return l!==void 0&&(this.map.delete(f),this.map.set(f,l)),l}set(f,l){if(this.map.has(f))this.map.delete(f);else if(this.map.size>=this.maxEntries){const h=this.map.keys().next().value;this.map.delete(h)}this.map.set(f,l)}clear(){this.map.clear()}},a.cX=Vr,a.cY=qb,a.cZ=Tx,a.c_=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},a.ca=class extends $u{},a.cb=LE,a.cc=class extends qi{},a.cd=qv,a.ce=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},a.cf=Uh,a.cg=function(f,l,h){var x=l[0],w=l[1],T=l[2],k=h[3]*x+h[7]*w+h[11]*T+h[15];return f[0]=(h[0]*x+h[4]*w+h[8]*T+h[12])/(k=k||1),f[1]=(h[1]*x+h[5]*w+h[9]*T+h[13])/k,f[2]=(h[2]*x+h[6]*w+h[10]*T+h[14])/k,f},a.ch=class extends Gd{},a.ci=class extends c{},a.cj=function(f,l){return f[0]===l[0]&&f[1]===l[1]&&f[2]===l[2]&&f[3]===l[3]&&f[4]===l[4]&&f[5]===l[5]&&f[6]===l[6]&&f[7]===l[7]&&f[8]===l[8]&&f[9]===l[9]&&f[10]===l[10]&&f[11]===l[11]&&f[12]===l[12]&&f[13]===l[13]&&f[14]===l[14]&&f[15]===l[15]},a.ck=function(f,l){var h=f[0],x=f[1],w=f[2],T=f[3],k=f[4],D=f[5],B=f[6],Z=f[7],Y=f[8],ee=f[9],oe=f[10],ue=f[11],me=f[12],ge=f[13],xe=f[14],Te=f[15],Ue=l[0],Ee=l[1],Re=l[2],qe=l[3],Ge=l[4],dt=l[5],Lt=l[6],At=l[7],Vt=l[8],dn=l[9],Wt=l[10],Rt=l[11],bt=l[12],On=l[13],_n=l[14],Tn=l[15];return Math.abs(h-Ue)<=$*Math.max(1,Math.abs(h),Math.abs(Ue))&&Math.abs(x-Ee)<=$*Math.max(1,Math.abs(x),Math.abs(Ee))&&Math.abs(w-Re)<=$*Math.max(1,Math.abs(w),Math.abs(Re))&&Math.abs(T-qe)<=$*Math.max(1,Math.abs(T),Math.abs(qe))&&Math.abs(k-Ge)<=$*Math.max(1,Math.abs(k),Math.abs(Ge))&&Math.abs(D-dt)<=$*Math.max(1,Math.abs(D),Math.abs(dt))&&Math.abs(B-Lt)<=$*Math.max(1,Math.abs(B),Math.abs(Lt))&&Math.abs(Z-At)<=$*Math.max(1,Math.abs(Z),Math.abs(At))&&Math.abs(Y-Vt)<=$*Math.max(1,Math.abs(Y),Math.abs(Vt))&&Math.abs(ee-dn)<=$*Math.max(1,Math.abs(ee),Math.abs(dn))&&Math.abs(oe-Wt)<=$*Math.max(1,Math.abs(oe),Math.abs(Wt))&&Math.abs(ue-Rt)<=$*Math.max(1,Math.abs(ue),Math.abs(Rt))&&Math.abs(me-bt)<=$*Math.max(1,Math.abs(me),Math.abs(bt))&&Math.abs(ge-On)<=$*Math.max(1,Math.abs(ge),Math.abs(On))&&Math.abs(xe-_n)<=$*Math.max(1,Math.abs(xe),Math.abs(_n))&&Math.abs(Te-Tn)<=$*Math.max(1,Math.abs(Te),Math.abs(Tn))},a.cl=function(f,l){return f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5],f[6]=l[6],f[7]=l[7],f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},a.cm=f=>f.type==="symbol",a.cn=f=>f.type==="circle",a.co=f=>f.type==="heatmap",a.cp=f=>f.type==="line",a.cq=f=>f.type==="fill",a.cr=f=>f.type==="fill-extrusion",a.cs=f=>f.type==="hillshade",a.ct=f=>f.type==="color-relief",a.cu=f=>f.type==="background",a.cv=f=>f.type==="custom",a.cw=ft,a.cx=function(f,l,h){const x=Ne(l.x-h.x,l.y-h.y),w=Ne(f.x-h.x,f.y-h.y),T=Math.atan2(x[0]*w[1]-x[1]*w[0],(function(k,D){return k[0]*D[0]+k[1]*D[1]})(x,w));return jt(T)},a.cy=pt,a.cz=function(f,l){return ae[l]&&(f instanceof MouseEvent||f instanceof WheelEvent)},a.d=st,a.d0=t0,a.d1=d,a.d2=class{constructor(f,l){this.layers={[kx]:this},this.name=kx,this.version=l?l.version:1,this.extent=l?l.extent:4096,this.length=f.length,this.features=f}feature(f){return new fA(this.features[f],this.extent)}},a.d3=lp,a.d4=Sl,a.e=yt,a.f=f=>s(void 0,void 0,void 0,(function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(l)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),a.g=nt,a.h=f=>new Promise(((l,h)=>{const x=new Image;x.onload=()=>{l(x),URL.revokeObjectURL(x.src),x.onload=null,window.requestAnimationFrame((()=>{x.src=jn}))},x.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const w=new Blob([new Uint8Array(f)],{type:"image/png"});x.src=f.byteLength?URL.createObjectURL(w):jn})),a.i=Sn,a.j=(f,l)=>St(yt(f,{type:"json"}),l),a.k=Ar,a.l=Vn,a.m=St,a.n=(f,l)=>St(yt(f,{type:"arrayBuffer"}),l),a.o=function(f){return new qb(f).readFields(UE,[])},a.p=US,a.q=function(f){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(f))},a.r=Zv,a.s=vt,a.t=To,a.u=ut,a.v=tg,a.w=Gt,a.x=Xy,a.y=Jl,a.z=Iu})),i("worker",["./shared"],(function(a){class s{constructor(ae,K){this.keyCache={},ae&&this.replace(ae,K)}replace(ae,K){this._layerConfigs={},this._layers={},this.update(ae,[],K)}update(ae,K,_e){for(const ze of ae){this._layerConfigs[ze.id]=ze;const nt=this._layers[ze.id]=a.bT(ze,_e);nt._featureFilter=a.aj(nt.filter,_e),this.keyCache[ze.id]&&delete this.keyCache[ze.id]}for(const ze of K)delete this.keyCache[ze],delete this._layerConfigs[ze],delete this._layers[ze];this.familiesBySource={};const $e=a.cL(Object.values(this._layerConfigs),this.keyCache);for(const ze of $e){const nt=ze.map(($t=>this._layers[$t.id])),tt=nt[0];if(tt.isHidden())continue;const Ke=tt.source||"";let at=this.familiesBySource[Ke];at||(at=this.familiesBySource[Ke]={});const St=tt.sourceLayer||a.ai;let st=at[St];st||(st=at[St]=[]),st.push(nt)}}}class u{constructor(ae){const K={},_e=[];for(const tt in ae){const Ke=ae[tt],at=K[tt]={};for(const St in Ke){const st=Ke[+St];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const $t={x:0,y:0,w:st.bitmap.width+2,h:st.bitmap.height+2};_e.push($t),at[St]={rect:$t,metrics:st.metrics}}}const{w:$e,h:ze}=a.p(_e),nt=new a.r({width:$e||1,height:ze||1});for(const tt in ae){const Ke=ae[tt];for(const at in Ke){const St=Ke[+at];if(!St||St.bitmap.width===0||St.bitmap.height===0)continue;const st=K[tt][at].rect;a.r.copy(St.bitmap,nt,{x:0,y:0},{x:st.x+1,y:st.y+1},St.bitmap)}}this.image=nt,this.positions=K}}a.cM("GlyphAtlas",u);class d{constructor(ae){this.tileID=new a.a2(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[]}parse(ae,K,_e,$e,ze){return a._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new a.ag;const nt=new a.cN(Object.keys(ae.layers).sort()),tt=new a.cO(this.tileID,this.promoteId);tt.bucketLayerIDs=[];const Ke={},at={featureIndex:tt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:_e,subdivisionGranularity:ze},St=K.familiesBySource[this.source];for(const Hn in St){const nr=ae.layers[Hn];if(!nr)continue;nr.version===1&&a.w(`Vector tile source "${this.source}" layer "${Hn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ki=nt.encode(Hn),hs=[];for(let Xt=0;Xt<nr.length;Xt++){const Oo=nr.feature(Xt),Jo=tt.getId(Oo,Hn);hs.push({feature:Oo,id:Jo,index:Xt,sourceLayerIndex:ki})}for(const Xt of St[Hn]){const Oo=Xt[0];Oo.source!==this.source&&a.w(`layer.source = ${Oo.source} does not equal this.source = ${this.source}`),Oo.isHidden(this.zoom,!0)||(m(Xt,this.zoom,_e),(Ke[Oo.id]=Oo.createBucket({index:tt.bucketLayerIDs.length,layers:Xt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ki,sourceID:this.source})).populate(hs,at,this.tileID.canonical),tt.bucketLayerIDs.push(Xt.map((Jo=>Jo.id))))}}const st=a.bY(at.glyphDependencies,(Hn=>Object.keys(Hn).map(Number)));this.inFlightDependencies.forEach((Hn=>Hn?.abort())),this.inFlightDependencies=[];let $t=Promise.resolve({});if(Object.keys(st).length){const Hn=new AbortController;this.inFlightDependencies.push(Hn),$t=$e.sendAsync({type:"GG",data:{stacks:st,source:this.source,tileID:this.tileID,type:"glyphs"}},Hn)}const sn=Object.keys(at.iconDependencies);let Vn=Promise.resolve({});if(sn.length){const Hn=new AbortController;this.inFlightDependencies.push(Hn),Vn=$e.sendAsync({type:"GI",data:{icons:sn,source:this.source,tileID:this.tileID,type:"icons"}},Hn)}const Ar=Object.keys(at.patternDependencies);let Or=Promise.resolve({});if(Ar.length){const Hn=new AbortController;this.inFlightDependencies.push(Hn),Or=$e.sendAsync({type:"GI",data:{icons:Ar,source:this.source,tileID:this.tileID,type:"patterns"}},Hn)}const ut=at.dashDependencies;let Fr=Promise.resolve({});if(Object.keys(ut).length){const Hn=new AbortController;this.inFlightDependencies.push(Hn),Fr=$e.sendAsync({type:"GDA",data:{dashes:ut}},Hn)}const[ji,tr,Pn,ci]=yield Promise.all([$t,Vn,Or,Fr]),an=new u(ji),En=new a.cP(tr,Pn);for(const Hn in Ke){const nr=Ke[Hn];nr instanceof a.ah?(m(nr.layers,this.zoom,_e),a.cQ({bucket:nr,glyphMap:ji,glyphPositions:an.positions,imageMap:tr,imagePositions:En.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:at.subdivisionGranularity})):nr.hasDependencies&&(nr instanceof a.cR||nr instanceof a.cS||nr instanceof a.cT)&&(m(nr.layers,this.zoom,_e),nr.addFeatures(at,this.tileID.canonical,En.patternPositions,ci))}return this.status="done",{buckets:Object.values(Ke).filter((Hn=>!Hn.isEmpty())),featureIndex:tt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:an.image,imageAtlas:En,dashPositions:ci,glyphMap:this.returnDependencies?ji:null,iconMap:this.returnDependencies?tr:null,glyphPositions:this.returnDependencies?an.positions:null}}))}}function m(Oe,ae,K){const _e=new a.H(ae);for(const $e of Oe)$e.recalculate(_e,K)}class v{constructor(ae,K,_e,$e,ze){this.type=ae,this.properties=_e||{},this.extent=ze,this.pointsArray=K,this.id=$e}loadGeometry(){return this.pointsArray.map((ae=>ae.map((K=>new a.P(K.x,K.y)))))}}class _{constructor(ae,K,_e){this.version=2,this._myFeatures=ae,this.name=K,this.length=ae.length,this.extent=_e}feature(ae){return this._myFeatures[ae]}}class O{constructor(){this.layers={}}addLayer(ae){this.layers[ae.name]=ae}}function E(Oe){let ae=a.cU(Oe);return ae.byteOffset===0&&ae.byteLength===ae.buffer.byteLength||(ae=new Uint8Array(ae)),{vectorTile:Oe,rawData:ae.buffer}}function A(Oe,ae,K){const{extent:_e}=Oe,$e=Math.pow(2,K.z-ae.z),ze=(K.x-ae.x*$e)*_e,nt=(K.y-ae.y*$e)*_e,tt=[];for(let Ke=0;Ke<Oe.length;Ke++){const at=Oe.feature(Ke);let St=at.loadGeometry();for(const $t of St)for(const sn of $t)sn.x=sn.x*$e-ze,sn.y=sn.y*$e-nt;const st=128;St=a.cV(St,at.type,-st,-st,_e+st,_e+st),St.length!==0&&tt.push(new v(at.type,St,at.properties,at.id,_e))}return new _(tt,Oe.name,_e)}class M{constructor(ae,K,_e){this.actor=ae,this.layerIndex=K,this.availableImages=_e,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new a.cW(1e3)}loadVectorTile(ae,K){return a._(this,void 0,void 0,(function*(){const _e=yield a.n(ae.request,K);try{return{vectorTile:ae.encoding!=="mlt"?new a.cX(new a.cY(_e.data)):new a.cZ(_e.data),rawData:_e.data,cacheControl:_e.cacheControl,expires:_e.expires}}catch($e){const ze=new Uint8Array(_e.data);let nt=`Unable to parse the tile at ${ae.request.url}, `;throw nt+=ze[0]===31&&ze[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${$e.message}`,new Error(nt)}}))}loadTile(ae){return a._(this,void 0,void 0,(function*(){const{uid:K,overzoomParameters:_e}=ae;_e&&(ae.request=_e.overzoomRequest);const $e=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new a.c_(ae.request),ze=new d(ae);this.loading[K]=ze;const nt=new AbortController;ze.abort=nt;try{const tt=yield this.loadVectorTile(ae,nt);if(delete this.loading[K],!tt)return null;if(_e){const $t=this._getOverzoomTile(ae,tt.vectorTile);tt.rawData=$t.rawData,tt.vectorTile=$t.vectorTile}const Ke=tt.rawData,at={};tt.expires&&(at.expires=tt.expires),tt.cacheControl&&(at.cacheControl=tt.cacheControl);const St={};if($e){const $t=$e.finish();$t&&(St.resourceTiming=JSON.parse(JSON.stringify($t)))}ze.vectorTile=tt.vectorTile;const st=ze.parse(tt.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);this.loaded[K]=ze,this.fetching[K]={rawTileData:Ke,cacheControl:at,resourceTiming:St};try{const $t=yield st;return a.e({rawTileData:Ke.slice(0),encoding:ae.encoding},$t,at,St)}finally{delete this.fetching[K]}}catch(tt){throw delete this.loading[K],ze.status="done",this.loaded[K]=ze,tt}}))}_getOverzoomTile(ae,K){const{tileID:_e,source:$e,overzoomParameters:ze}=ae,{maxZoomTileID:nt}=ze,tt=`${nt.key}_${_e.key}`,Ke=this.overzoomedTileResultCache.get(tt);if(Ke)return Ke;const at=new O,St=this.layerIndex.familiesBySource[$e];for(const $t in St){const sn=K.layers[$t];if(!sn)continue;const Vn=A(sn,nt,_e.canonical);Vn.length>0&&at.addLayer(Vn)}const st=E(at);return this.overzoomedTileResultCache.set(tt,st),st}reloadTile(ae){return a._(this,void 0,void 0,(function*(){const K=ae.uid;if(!this.loaded||!this.loaded[K])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const _e=this.loaded[K];if(_e.showCollisionBoxes=ae.showCollisionBoxes,_e.status==="parsing"){const $e=yield _e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);let ze;if(this.fetching[K]){const{rawTileData:nt,cacheControl:tt,resourceTiming:Ke}=this.fetching[K];delete this.fetching[K],ze=a.e({rawTileData:nt.slice(0),encoding:ae.encoding},$e,tt,Ke)}else ze=$e;return ze}if(_e.status==="done"&&_e.vectorTile)return _e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity)}))}abortTile(ae){return a._(this,void 0,void 0,(function*(){const K=this.loading,_e=ae.uid;K&&K[_e]&&K[_e].abort&&(K[_e].abort.abort(),delete K[_e])}))}removeTile(ae){return a._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]}))}}class L{constructor(){this.loaded={}}loadTile(ae){return a._(this,void 0,void 0,(function*(){const{uid:K,encoding:_e,rawImageData:$e,redFactor:ze,greenFactor:nt,blueFactor:tt,baseShift:Ke}=ae,at=$e.width+2,St=$e.height+2,st=a.b($e)?new a.R({width:at,height:St},yield a.c$($e,-1,-1,at,St)):$e,$t=new a.d0(K,st,_e,ze,nt,tt,Ke);return this.loaded=this.loaded||{},this.loaded[K]=$t,$t}))}removeTile(ae){const K=this.loaded,_e=ae.uid;K&&K[_e]&&delete K[_e]}}var $,N,F=(function(){if(N)return $;function Oe(K,_e){if(K.length!==0){ae(K[0],_e);for(var $e=1;$e<K.length;$e++)ae(K[$e],!_e)}}function ae(K,_e){for(var $e=0,ze=0,nt=0,tt=K.length,Ke=tt-1;nt<tt;Ke=nt++){var at=(K[nt][0]-K[Ke][0])*(K[Ke][1]+K[nt][1]),St=$e+at;ze+=Math.abs($e)>=Math.abs(at)?$e-St+at:at-St+$e,$e=St}$e+ze>=0!=!!_e&&K.reverse()}return N=1,$=function K(_e,$e){var ze,nt=_e&&_e.type;if(nt==="FeatureCollection")for(ze=0;ze<_e.features.length;ze++)K(_e.features[ze],$e);else if(nt==="GeometryCollection")for(ze=0;ze<_e.geometries.length;ze++)K(_e.geometries[ze],$e);else if(nt==="Feature")K(_e.geometry,$e);else if(nt==="Polygon")Oe(_e.coordinates,$e);else if(nt==="MultiPolygon")for(ze=0;ze<_e.coordinates.length;ze++)Oe(_e.coordinates[ze],$e);return _e}})(),Q=a.d1(F);const W={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Oe=>Oe},H=Math.fround||(te=new Float32Array(1),Oe=>(te[0]=+Oe,te[0]));var te;class ne{constructor(ae){this.options=Object.assign(Object.create(W),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:K,minZoom:_e,maxZoom:$e}=this.options;K&&console.time("total time");const ze=`prepare ${ae.length} points`;K&&console.time(ze),this.points=ae;const nt=[];for(let Ke=0;Ke<ae.length;Ke++){const at=ae[Ke];if(!at.geometry)continue;const[St,st]=at.geometry.coordinates,$t=H(re(St)),sn=H(se(st));nt.push($t,sn,1/0,Ke,-1,1),this.options.reduce&&nt.push(0)}let tt=this.trees[$e+1]=this._createTree(nt);K&&console.timeEnd(ze);for(let Ke=$e;Ke>=_e;Ke--){const at=+Date.now();tt=this.trees[Ke]=this._createTree(this._cluster(tt,Ke)),K&&console.log("z%d: %d clusters in %dms",Ke,tt.numItems,+Date.now()-at)}return K&&console.timeEnd("total time"),this}getClusters(ae,K){let _e=((ae[0]+180)%360+360)%360-180;const $e=Math.max(-90,Math.min(90,ae[1]));let ze=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const nt=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)_e=-180,ze=180;else if(_e>ze){const st=this.getClusters([_e,$e,180,nt],K),$t=this.getClusters([-180,$e,ze,nt],K);return st.concat($t)}const tt=this.trees[this._limitZoom(K)],Ke=tt.range(re(_e),se(nt),re(ze),se($e)),at=tt.data,St=[];for(const st of Ke){const $t=this.stride*st;St.push(at[$t+5]>1?ce(at,$t,this.clusterProps):this.points[at[$t+3]])}return St}getChildren(ae){const K=this._getOriginId(ae),_e=this._getOriginZoom(ae),$e="No cluster with the specified id.",ze=this.trees[_e];if(!ze)throw new Error($e);const nt=ze.data;if(K*this.stride>=nt.length)throw new Error($e);const tt=this.options.radius/(this.options.extent*Math.pow(2,_e-1)),Ke=ze.within(nt[K*this.stride],nt[K*this.stride+1],tt),at=[];for(const St of Ke){const st=St*this.stride;nt[st+4]===ae&&at.push(nt[st+5]>1?ce(nt,st,this.clusterProps):this.points[nt[st+3]])}if(at.length===0)throw new Error($e);return at}getLeaves(ae,K,_e){const $e=[];return this._appendLeaves($e,ae,K=K||10,_e=_e||0,0),$e}getTile(ae,K,_e){const $e=this.trees[this._limitZoom(ae)],ze=Math.pow(2,ae),{extent:nt,radius:tt}=this.options,Ke=tt/nt,at=(_e-Ke)/ze,St=(_e+1+Ke)/ze,st={features:[]};return this._addTileFeatures($e.range((K-Ke)/ze,at,(K+1+Ke)/ze,St),$e.data,K,_e,ze,st),K===0&&this._addTileFeatures($e.range(1-Ke/ze,at,1,St),$e.data,ze,_e,ze,st),K===ze-1&&this._addTileFeatures($e.range(0,at,Ke/ze,St),$e.data,-1,_e,ze,st),st.features.length?st:null}getClusterExpansionZoom(ae){let K=this._getOriginZoom(ae)-1;for(;K<=this.options.maxZoom;){const _e=this.getChildren(ae);if(K++,_e.length!==1)break;ae=_e[0].properties.cluster_id}return K}_appendLeaves(ae,K,_e,$e,ze){const nt=this.getChildren(K);for(const tt of nt){const Ke=tt.properties;if(Ke&&Ke.cluster?ze+Ke.point_count<=$e?ze+=Ke.point_count:ze=this._appendLeaves(ae,Ke.cluster_id,_e,$e,ze):ze<$e?ze++:ae.push(tt),ae.length===_e)break}return ze}_createTree(ae){const K=new a.aT(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let _e=0;_e<ae.length;_e+=this.stride)K.add(ae[_e],ae[_e+1]);return K.finish(),K.data=ae,K}_addTileFeatures(ae,K,_e,$e,ze,nt){for(const tt of ae){const Ke=tt*this.stride,at=K[Ke+5]>1;let St,st,$t;if(at)St=we(K,Ke,this.clusterProps),st=K[Ke],$t=K[Ke+1];else{const Ar=this.points[K[Ke+3]];St=Ar.properties;const[Or,ut]=Ar.geometry.coordinates;st=re(Or),$t=se(ut)}const sn={type:1,geometry:[[Math.round(this.options.extent*(st*ze-_e)),Math.round(this.options.extent*($t*ze-$e))]],tags:St};let Vn;Vn=at||this.options.generateId?K[Ke+3]:this.points[K[Ke+3]].id,Vn!==void 0&&(sn.id=Vn),nt.features.push(sn)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,K){const{radius:_e,extent:$e,reduce:ze,minPoints:nt}=this.options,tt=_e/($e*Math.pow(2,K)),Ke=ae.data,at=[],St=this.stride;for(let st=0;st<Ke.length;st+=St){if(Ke[st+2]<=K)continue;Ke[st+2]=K;const $t=Ke[st],sn=Ke[st+1],Vn=ae.within(Ke[st],Ke[st+1],tt),Ar=Ke[st+5];let Or=Ar;for(const ut of Vn){const Fr=ut*St;Ke[Fr+2]>K&&(Or+=Ke[Fr+5])}if(Or>Ar&&Or>=nt){let ut,Fr=$t*Ar,ji=sn*Ar,tr=-1;const Pn=(st/St<<5)+(K+1)+this.points.length;for(const ci of Vn){const an=ci*St;if(Ke[an+2]<=K)continue;Ke[an+2]=K;const En=Ke[an+5];Fr+=Ke[an]*En,ji+=Ke[an+1]*En,Ke[an+4]=Pn,ze&&(ut||(ut=this._map(Ke,st,!0),tr=this.clusterProps.length,this.clusterProps.push(ut)),ze(ut,this._map(Ke,an)))}Ke[st+4]=Pn,at.push(Fr/Or,ji/Or,1/0,Pn,-1,Or),ze&&at.push(tr)}else{for(let ut=0;ut<St;ut++)at.push(Ke[st+ut]);if(Or>1)for(const ut of Vn){const Fr=ut*St;if(!(Ke[Fr+2]<=K)){Ke[Fr+2]=K;for(let ji=0;ji<St;ji++)at.push(Ke[Fr+ji])}}}}return at}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,K,_e){if(ae[K+5]>1){const nt=this.clusterProps[ae[K+6]];return _e?Object.assign({},nt):nt}const $e=this.points[ae[K+3]].properties,ze=this.options.map($e);return _e&&ze===$e?Object.assign({},ze):ze}}function ce(Oe,ae,K){return{type:"Feature",id:Oe[ae+3],properties:we(Oe,ae,K),geometry:{type:"Point",coordinates:[(_e=Oe[ae],360*(_e-.5)),be(Oe[ae+1])]}};var _e}function we(Oe,ae,K){const _e=Oe[ae+5],$e=_e>=1e4?`${Math.round(_e/1e3)}k`:_e>=1e3?Math.round(_e/100)/10+"k":_e,ze=Oe[ae+6],nt=ze===-1?{}:Object.assign({},K[ze]);return Object.assign(nt,{cluster:!0,cluster_id:Oe[ae+3],point_count:_e,point_count_abbreviated:$e})}function re(Oe){return Oe/360+.5}function se(Oe){const ae=Math.sin(Oe*Math.PI/180),K=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return K<0?0:K>1?1:K}function be(Oe){const ae=(180-360*Oe)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function fe(Oe,ae,K,_e){let $e=_e;const ze=ae+(K-ae>>1);let nt,tt=K-ae;const Ke=Oe[ae],at=Oe[ae+1],St=Oe[K],st=Oe[K+1];for(let $t=ae+3;$t<K;$t+=3){const sn=ve(Oe[$t],Oe[$t+1],Ke,at,St,st);if(sn>$e)nt=$t,$e=sn;else if(sn===$e){const Vn=Math.abs($t-ze);Vn<tt&&(nt=$t,tt=Vn)}}$e>_e&&(nt-ae>3&&fe(Oe,ae,nt,_e),Oe[nt+2]=$e,K-nt>3&&fe(Oe,nt,K,_e))}function ve(Oe,ae,K,_e,$e,ze){let nt=$e-K,tt=ze-_e;if(nt!==0||tt!==0){const Ke=((Oe-K)*nt+(ae-_e)*tt)/(nt*nt+tt*tt);Ke>1?(K=$e,_e=ze):Ke>0&&(K+=nt*Ke,_e+=tt*Ke)}return nt=Oe-K,tt=ae-_e,nt*nt+tt*tt}function Me(Oe,ae,K,_e){const $e={id:Oe??null,type:ae,geometry:K,tags:_e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")Ne($e,K);else if(ae==="Polygon")Ne($e,K[0]);else if(ae==="MultiLineString")for(const ze of K)Ne($e,ze);else if(ae==="MultiPolygon")for(const ze of K)Ne($e,ze[0]);return $e}function Ne(Oe,ae){for(let K=0;K<ae.length;K+=3)Oe.minX=Math.min(Oe.minX,ae[K]),Oe.minY=Math.min(Oe.minY,ae[K+1]),Oe.maxX=Math.max(Oe.maxX,ae[K]),Oe.maxY=Math.max(Oe.maxY,ae[K+1])}function Qe(Oe,ae,K,_e){if(!ae.geometry)return;const $e=ae.geometry.coordinates;if($e&&$e.length===0)return;const ze=ae.geometry.type,nt=Math.pow(K.tolerance/((1<<K.maxZoom)*K.extent),2);let tt=[],Ke=ae.id;if(K.promoteId?Ke=ae.properties[K.promoteId]:K.generateId&&(Ke=_e||0),ze==="Point")Ce($e,tt);else if(ze==="MultiPoint")for(const at of $e)Ce(at,tt);else if(ze==="LineString")Ae($e,tt,nt,!1);else if(ze==="MultiLineString"){if(K.lineMetrics){for(const at of $e)tt=[],Ae(at,tt,nt,!1),Oe.push(Me(Ke,"LineString",tt,ae.properties));return}Xe($e,tt,nt,!1)}else if(ze==="Polygon")Xe($e,tt,nt,!0);else{if(ze!=="MultiPolygon"){if(ze==="GeometryCollection"){for(const at of ae.geometry.geometries)Qe(Oe,{id:Ke,geometry:at,properties:ae.properties},K,_e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const at of $e){const St=[];Xe(at,St,nt,!0),tt.push(St)}}Oe.push(Me(Ke,ze,tt,ae.properties))}function Ce(Oe,ae){ae.push(ke(Oe[0]),ft(Oe[1]),0)}function Ae(Oe,ae,K,_e){let $e,ze,nt=0;for(let Ke=0;Ke<Oe.length;Ke++){const at=ke(Oe[Ke][0]),St=ft(Oe[Ke][1]);ae.push(at,St,0),Ke>0&&(nt+=_e?($e*St-at*ze)/2:Math.sqrt(Math.pow(at-$e,2)+Math.pow(St-ze,2))),$e=at,ze=St}const tt=ae.length-3;ae[2]=1,fe(ae,0,tt,K),ae[tt+2]=1,ae.size=Math.abs(nt),ae.start=0,ae.end=ae.size}function Xe(Oe,ae,K,_e){for(let $e=0;$e<Oe.length;$e++){const ze=[];Ae(Oe[$e],ze,K,_e),ae.push(ze)}}function ke(Oe){return Oe/360+.5}function ft(Oe){const ae=Math.sin(Oe*Math.PI/180),K=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return K<0?0:K>1?1:K}function pt(Oe,ae,K,_e,$e,ze,nt,tt){if(_e/=ae,ze>=(K/=ae)&&nt<_e)return Oe;if(nt<K||ze>=_e)return null;const Ke=[];for(const at of Oe){const St=at.geometry;let st=at.type;const $t=$e===0?at.minX:at.minY,sn=$e===0?at.maxX:at.maxY;if($t>=K&&sn<_e){Ke.push(at);continue}if(sn<K||$t>=_e)continue;let Vn=[];if(st==="Point"||st==="MultiPoint")lt(St,Vn,K,_e,$e);else if(st==="LineString")ot(St,Vn,K,_e,$e,!1,tt.lineMetrics);else if(st==="MultiLineString")Et(St,Vn,K,_e,$e,!1);else if(st==="Polygon")Et(St,Vn,K,_e,$e,!0);else if(st==="MultiPolygon")for(const Ar of St){const Or=[];Et(Ar,Or,K,_e,$e,!0),Or.length&&Vn.push(Or)}if(Vn.length){if(tt.lineMetrics&&st==="LineString"){for(const Ar of Vn)Ke.push(Me(at.id,st,Ar,at.tags));continue}st!=="LineString"&&st!=="MultiLineString"||(Vn.length===1?(st="LineString",Vn=Vn[0]):st="MultiLineString"),st!=="Point"&&st!=="MultiPoint"||(st=Vn.length===3?"Point":"MultiPoint"),Ke.push(Me(at.id,st,Vn,at.tags))}}return Ke.length?Ke:null}function lt(Oe,ae,K,_e,$e){for(let ze=0;ze<Oe.length;ze+=3){const nt=Oe[ze+$e];nt>=K&&nt<=_e&&Tt(ae,Oe[ze],Oe[ze+1],Oe[ze+2])}}function ot(Oe,ae,K,_e,$e,ze,nt){let tt=yt(Oe);const Ke=$e===0?Ht:wt;let at,St,st=Oe.start;for(let Or=0;Or<Oe.length-3;Or+=3){const ut=Oe[Or],Fr=Oe[Or+1],ji=Oe[Or+2],tr=Oe[Or+3],Pn=Oe[Or+4],ci=$e===0?ut:Fr,an=$e===0?tr:Pn;let En=!1;nt&&(at=Math.sqrt(Math.pow(ut-tr,2)+Math.pow(Fr-Pn,2))),ci<K?an>K&&(St=Ke(tt,ut,Fr,tr,Pn,K),nt&&(tt.start=st+at*St)):ci>_e?an<_e&&(St=Ke(tt,ut,Fr,tr,Pn,_e),nt&&(tt.start=st+at*St)):Tt(tt,ut,Fr,ji),an<K&&ci>=K&&(St=Ke(tt,ut,Fr,tr,Pn,K),En=!0),an>_e&&ci<=_e&&(St=Ke(tt,ut,Fr,tr,Pn,_e),En=!0),!ze&&En&&(nt&&(tt.end=st+at*St),ae.push(tt),tt=yt(Oe)),nt&&(st+=at)}let $t=Oe.length-3;const sn=Oe[$t],Vn=Oe[$t+1],Ar=$e===0?sn:Vn;Ar>=K&&Ar<=_e&&Tt(tt,sn,Vn,Oe[$t+2]),$t=tt.length-3,ze&&$t>=3&&(tt[$t]!==tt[0]||tt[$t+1]!==tt[1])&&Tt(tt,tt[0],tt[1],tt[2]),tt.length&&ae.push(tt)}function yt(Oe){const ae=[];return ae.size=Oe.size,ae.start=Oe.start,ae.end=Oe.end,ae}function Et(Oe,ae,K,_e,$e,ze){for(const nt of Oe)ot(nt,ae,K,_e,$e,ze,!1)}function Tt(Oe,ae,K,_e){Oe.push(ae,K,_e)}function Ht(Oe,ae,K,_e,$e,ze){const nt=(ze-ae)/(_e-ae);return Tt(Oe,ze,K+($e-K)*nt,1),nt}function wt(Oe,ae,K,_e,$e,ze){const nt=(ze-K)/($e-K);return Tt(Oe,ae+(_e-ae)*nt,ze,1),nt}function un(Oe,ae){const K=[];for(let _e=0;_e<Oe.length;_e++){const $e=Oe[_e],ze=$e.type;let nt;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")nt=Gt($e.geometry,ae);else if(ze==="MultiLineString"||ze==="Polygon"){nt=[];for(const tt of $e.geometry)nt.push(Gt(tt,ae))}else if(ze==="MultiPolygon"){nt=[];for(const tt of $e.geometry){const Ke=[];for(const at of tt)Ke.push(Gt(at,ae));nt.push(Ke)}}K.push(Me($e.id,ze,nt,$e.tags))}return K}function Gt(Oe,ae){const K=[];K.size=Oe.size,Oe.start!==void 0&&(K.start=Oe.start,K.end=Oe.end);for(let _e=0;_e<Oe.length;_e+=3)K.push(Oe[_e]+ae,Oe[_e+1],Oe[_e+2]);return K}function Jt(Oe,ae){if(Oe.transformed)return Oe;const K=1<<Oe.z,_e=Oe.x,$e=Oe.y;for(const ze of Oe.features){const nt=ze.geometry,tt=ze.type;if(ze.geometry=[],tt===1)for(let Ke=0;Ke<nt.length;Ke+=2)ze.geometry.push(Sn(nt[Ke],nt[Ke+1],ae,K,_e,$e));else for(let Ke=0;Ke<nt.length;Ke++){const at=[];for(let St=0;St<nt[Ke].length;St+=2)at.push(Sn(nt[Ke][St],nt[Ke][St+1],ae,K,_e,$e));ze.geometry.push(at)}}return Oe.transformed=!0,Oe}function Sn(Oe,ae,K,_e,$e,ze){return[Math.round(K*(Oe*_e-$e)),Math.round(K*(ae*_e-ze))]}function nn(Oe,ae,K,_e,$e){const ze=ae===$e.maxZoom?0:$e.tolerance/((1<<ae)*$e.extent),nt={features:[],numPoints:0,numSimplified:0,numFeatures:Oe.length,source:null,x:K,y:_e,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const tt of Oe)Cn(nt,tt,ze,$e);return nt}function Cn(Oe,ae,K,_e){const $e=ae.geometry,ze=ae.type,nt=[];if(Oe.minX=Math.min(Oe.minX,ae.minX),Oe.minY=Math.min(Oe.minY,ae.minY),Oe.maxX=Math.max(Oe.maxX,ae.maxX),Oe.maxY=Math.max(Oe.maxY,ae.maxY),ze==="Point"||ze==="MultiPoint")for(let tt=0;tt<$e.length;tt+=3)nt.push($e[tt],$e[tt+1]),Oe.numPoints++,Oe.numSimplified++;else if(ze==="LineString")jn(nt,$e,Oe,K,!1,!1);else if(ze==="MultiLineString"||ze==="Polygon")for(let tt=0;tt<$e.length;tt++)jn(nt,$e[tt],Oe,K,ze==="Polygon",tt===0);else if(ze==="MultiPolygon")for(let tt=0;tt<$e.length;tt++){const Ke=$e[tt];for(let at=0;at<Ke.length;at++)jn(nt,Ke[at],Oe,K,!0,at===0)}if(nt.length){let tt=ae.tags||null;if(ze==="LineString"&&_e.lineMetrics){tt={};for(const at in ae.tags)tt[at]=ae.tags[at];tt.mapbox_clip_start=$e.start/$e.size,tt.mapbox_clip_end=$e.end/$e.size}const Ke={geometry:nt,type:ze==="Polygon"||ze==="MultiPolygon"?3:ze==="LineString"||ze==="MultiLineString"?2:1,tags:tt};ae.id!==null&&(Ke.id=ae.id),Oe.features.push(Ke)}}function jn(Oe,ae,K,_e,$e,ze){const nt=_e*_e;if(_e>0&&ae.size<($e?nt:_e))return void(K.numPoints+=ae.length/3);const tt=[];for(let Ke=0;Ke<ae.length;Ke+=3)(_e===0||ae[Ke+2]>nt)&&(K.numSimplified++,tt.push(ae[Ke],ae[Ke+1])),K.numPoints++;$e&&(function(Ke,at){let St=0;for(let st=0,$t=Ke.length,sn=$t-2;st<$t;sn=st,st+=2)St+=(Ke[st]-Ke[sn])*(Ke[st+1]+Ke[sn+1]);if(St>0===at)for(let st=0,$t=Ke.length;st<$t/2;st+=2){const sn=Ke[st],Vn=Ke[st+1];Ke[st]=Ke[$t-2-st],Ke[st+1]=Ke[$t-1-st],Ke[$t-2-st]=sn,Ke[$t-1-st]=Vn}})(tt,ze),Oe.push(tt)}const Gn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class je{constructor(ae,K){const _e=(K=this.options=(function(ze,nt){for(const tt in nt)ze[tt]=nt[tt];return ze})(Object.create(Gn),K)).debug;if(_e&&console.time("preprocess data"),K.maxZoom<0||K.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(K.promoteId&&K.generateId)throw new Error("promoteId and generateId cannot be used together.");let $e=(function(ze,nt){const tt=[];if(ze.type==="FeatureCollection")for(let Ke=0;Ke<ze.features.length;Ke++)Qe(tt,ze.features[Ke],nt,Ke);else Qe(tt,ze.type==="Feature"?ze:{geometry:ze},nt);return tt})(ae,K);this.tiles={},this.tileCoords=[],_e&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",K.indexMaxZoom,K.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),$e=(function(ze,nt){const tt=nt.buffer/nt.extent;let Ke=ze;const at=pt(ze,1,-1-tt,tt,0,-1,2,nt),St=pt(ze,1,1-tt,2+tt,0,-1,2,nt);return(at||St)&&(Ke=pt(ze,1,-tt,1+tt,0,-1,2,nt)||[],at&&(Ke=un(at,1).concat(Ke)),St&&(Ke=Ke.concat(un(St,-1)))),Ke})($e,K),$e.length&&this.splitTile($e,0,0,0),_e&&($e.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,K,_e,$e,ze,nt,tt){const Ke=[ae,K,_e,$e],at=this.options,St=at.debug;for(;Ke.length;){$e=Ke.pop(),_e=Ke.pop(),K=Ke.pop(),ae=Ke.pop();const st=1<<K,$t=Ye(K,_e,$e);let sn=this.tiles[$t];if(!sn&&(St>1&&console.time("creation"),sn=this.tiles[$t]=nn(ae,K,_e,$e,at),this.tileCoords.push({z:K,x:_e,y:$e}),St)){St>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",K,_e,$e,sn.numFeatures,sn.numPoints,sn.numSimplified),console.timeEnd("creation"));const En=`z${K}`;this.stats[En]=(this.stats[En]||0)+1,this.total++}if(sn.source=ae,ze==null){if(K===at.indexMaxZoom||sn.numPoints<=at.indexMaxPoints)continue}else{if(K===at.maxZoom||K===ze)continue;if(ze!=null){const En=ze-K;if(_e!==nt>>En||$e!==tt>>En)continue}}if(sn.source=null,ae.length===0)continue;St>1&&console.time("clipping");const Vn=.5*at.buffer/at.extent,Ar=.5-Vn,Or=.5+Vn,ut=1+Vn;let Fr=null,ji=null,tr=null,Pn=null,ci=pt(ae,st,_e-Vn,_e+Or,0,sn.minX,sn.maxX,at),an=pt(ae,st,_e+Ar,_e+ut,0,sn.minX,sn.maxX,at);ae=null,ci&&(Fr=pt(ci,st,$e-Vn,$e+Or,1,sn.minY,sn.maxY,at),ji=pt(ci,st,$e+Ar,$e+ut,1,sn.minY,sn.maxY,at),ci=null),an&&(tr=pt(an,st,$e-Vn,$e+Or,1,sn.minY,sn.maxY,at),Pn=pt(an,st,$e+Ar,$e+ut,1,sn.minY,sn.maxY,at),an=null),St>1&&console.timeEnd("clipping"),Ke.push(Fr||[],K+1,2*_e,2*$e),Ke.push(ji||[],K+1,2*_e,2*$e+1),Ke.push(tr||[],K+1,2*_e+1,2*$e),Ke.push(Pn||[],K+1,2*_e+1,2*$e+1)}}getTile(ae,K,_e){ae=+ae,K=+K,_e=+_e;const $e=this.options,{extent:ze,debug:nt}=$e;if(ae<0||ae>24)return null;const tt=1<<ae,Ke=Ye(ae,K=K+tt&tt-1,_e);if(this.tiles[Ke])return Jt(this.tiles[Ke],ze);nt>1&&console.log("drilling down to z%d-%d-%d",ae,K,_e);let at,St=ae,st=K,$t=_e;for(;!at&&St>0;)St--,st>>=1,$t>>=1,at=this.tiles[Ye(St,st,$t)];return at&&at.source?(nt>1&&(console.log("found parent tile z%d-%d-%d",St,st,$t),console.time("drilling down")),this.splitTile(at.source,St,st,$t,ae,K,_e),nt>1&&console.timeEnd("drilling down"),this.tiles[Ke]?Jt(this.tiles[Ke],ze):null):null}}function Ye(Oe,ae,K){return 32*((1<<Oe)*K+ae)+Oe}class vt extends M{constructor(ae,K,_e,$e=kt){super(ae,K,_e),this._dataUpdateable=new Map,this._createGeoJSONIndex=$e}loadVectorTile(ae,K){return a._(this,void 0,void 0,(function*(){const _e=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const $e=this._geoJSONIndex.getTile(_e.z,_e.x,_e.y);return $e?E(new a.d2($e.features,{version:2,extent:a.a5})):null}))}loadData(ae){return a._(this,void 0,void 0,(function*(){var K;(K=this._pendingRequest)===null||K===void 0||K.abort();const _e=this._startPerformance(ae);this._pendingRequest=new AbortController;try{(!this._pendingData||ae.request||ae.data||ae.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest));const $e=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex($e,ae),this.loaded={};const ze={};return ae.request&&(ze.data=$e),this._finishPerformance(_e,ae,ze),ze}catch($e){if(delete this._pendingRequest,a.Z($e))return{abandoned:!0};throw $e}}))}_startPerformance(ae){var K;if(!((K=ae?.request)===null||K===void 0)&&K.collectResourceTiming)return new a.c_(ae.request)}_finishPerformance(ae,K,_e){if(!ae)return;const $e=ae.finish();$e&&(_e.resourceTiming={},_e.resourceTiming[K.source]=JSON.parse(JSON.stringify($e)))}getData(){return a._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ae){const K=this.loaded;return K&&K[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,K){return a._(this,void 0,void 0,(function*(){let _e;if(ae.request?_e=yield this.loadGeoJSONFromUrl(ae.request,ae.promoteId,K):ae.data?_e=this._loadGeoJSONFromObject(ae.data,ae.promoteId):ae.dataDiff&&(_e=this._loadGeoJSONFromDiff(ae.dataDiff,ae.promoteId,ae.source)),delete this._pendingRequest,typeof _e!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);return Q(_e,!0),ae.filter&&(_e=this._filterGeoJSON(_e,ae.filter)),_e}))}loadGeoJSONFromUrl(ae,K,_e){return a._(this,void 0,void 0,(function*(){const $e=yield a.j(ae,_e);return this._dataUpdateable=a.a7($e.data,K),$e.data}))}_loadGeoJSONFromObject(ae,K){return this._dataUpdateable=a.a7(ae,K),ae}_loadGeoJSONFromDiff(ae,K,_e){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${_e}`);a.a8(this._dataUpdateable,ae,K);const $e=Array.from(this._dataUpdateable.values());return this._toFeatureCollection($e)}_filterGeoJSON(ae,K){const _e=a.d3(K,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_e.result==="error")throw new Error(_e.value.map((ze=>`${ze.key}: ${ze.message}`)).join(", "));const $e=ae.features.filter((ze=>_e.value.evaluate({zoom:0},ze)));return this._toFeatureCollection($e)}_toFeatureCollection(ae){return{type:"FeatureCollection",features:ae}}removeSource(ae){return a._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}function kt(Oe,ae){return ae.cluster?new ne((function({superclusterOptions:K,clusterProperties:_e}){if(!_e||!K)return K;const $e={},ze={},nt={accumulated:null,zoom:0},tt={properties:null},Ke=Object.keys(_e);for(const at of Ke){const[St,st]=_e[at],$t=a.d3(st),sn=a.d3(typeof St=="string"?[St,["accumulated"],["get",at]]:St);$e[at]=$t.value,ze[at]=sn.value}return K.map=at=>{tt.properties=at;const St={};for(const st of Ke)St[st]=$e[st].evaluate(nt,tt);return St},K.reduce=(at,St)=>{tt.properties=St;for(const st of Ke)nt.accumulated=at[st],at[st]=ze[st].evaluate(nt,tt)},K})(ae)).load(Oe.features):(function(K,_e){return new je(K,_e)})(Oe,ae.geojsonVtOptions)}class jt{constructor(ae){this.self=ae,this.actor=new a.L(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(K,_e)=>{if(this.externalWorkerSourceTypes[K])throw new Error(`Worker source with name "${K}" already registered.`);this.externalWorkerSourceTypes[K]=_e},this.self.addProtocol=a.cJ,this.self.removeProtocol=a.cK,this.self.registerRTLTextPlugin=K=>{a.d4.setMethods(K)},this.actor.registerMessageHandler("LDT",((K,_e)=>this._getDEMWorkerSource(K,_e.source).loadTile(_e))),this.actor.registerMessageHandler("RDT",((K,_e)=>a._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(K,_e.source).removeTile(_e)})))),this.actor.registerMessageHandler("GCEZ",((K,_e)=>a._(this,void 0,void 0,(function*(){return this._getWorkerSource(K,_e.type,_e.source).getClusterExpansionZoom(_e)})))),this.actor.registerMessageHandler("GCC",((K,_e)=>a._(this,void 0,void 0,(function*(){return this._getWorkerSource(K,_e.type,_e.source).getClusterChildren(_e)})))),this.actor.registerMessageHandler("GCL",((K,_e)=>a._(this,void 0,void 0,(function*(){return this._getWorkerSource(K,_e.type,_e.source).getClusterLeaves(_e)})))),this.actor.registerMessageHandler("LD",((K,_e)=>this._getWorkerSource(K,_e.type,_e.source).loadData(_e))),this.actor.registerMessageHandler("GD",((K,_e)=>this._getWorkerSource(K,_e.type,_e.source).getData())),this.actor.registerMessageHandler("LT",((K,_e)=>this._getWorkerSource(K,_e.type,_e.source).loadTile(_e))),this.actor.registerMessageHandler("RT",((K,_e)=>this._getWorkerSource(K,_e.type,_e.source).reloadTile(_e))),this.actor.registerMessageHandler("AT",((K,_e)=>this._getWorkerSource(K,_e.type,_e.source).abortTile(_e))),this.actor.registerMessageHandler("RMT",((K,_e)=>this._getWorkerSource(K,_e.type,_e.source).removeTile(_e))),this.actor.registerMessageHandler("RS",((K,_e)=>a._(this,void 0,void 0,(function*(){if(!this.workerSources[K]||!this.workerSources[K][_e.type]||!this.workerSources[K][_e.type][_e.source])return;const $e=this.workerSources[K][_e.type][_e.source];delete this.workerSources[K][_e.type][_e.source],$e.removeSource!==void 0&&$e.removeSource(_e)})))),this.actor.registerMessageHandler("RM",(K=>a._(this,void 0,void 0,(function*(){delete this.layerIndexes[K],delete this.availableImages[K],delete this.workerSources[K],delete this.demWorkerSources[K],this.globalStates.delete(K)})))),this.actor.registerMessageHandler("SR",((K,_e)=>a._(this,void 0,void 0,(function*(){this.referrer=_e})))),this.actor.registerMessageHandler("SRPS",((K,_e)=>this._syncRTLPluginState(K,_e))),this.actor.registerMessageHandler("IS",((K,_e)=>a._(this,void 0,void 0,(function*(){this.self.importScripts(_e)})))),this.actor.registerMessageHandler("SI",((K,_e)=>this._setImages(K,_e))),this.actor.registerMessageHandler("UL",((K,_e)=>a._(this,void 0,void 0,(function*(){this._getLayerIndex(K).update(_e.layers,_e.removedIds,this._getGlobalState(K))})))),this.actor.registerMessageHandler("UGS",((K,_e)=>a._(this,void 0,void 0,(function*(){const $e=this._getGlobalState(K);for(const ze in _e)$e[ze]=_e[ze]})))),this.actor.registerMessageHandler("SL",((K,_e)=>a._(this,void 0,void 0,(function*(){this._getLayerIndex(K).replace(_e,this._getGlobalState(K))}))))}_getGlobalState(ae){let K=this.globalStates.get(ae);return K||(K={},this.globalStates.set(ae,K)),K}_setImages(ae,K){return a._(this,void 0,void 0,(function*(){this.availableImages[ae]=K;for(const _e in this.workerSources[ae]){const $e=this.workerSources[ae][_e];for(const ze in $e)$e[ze].availableImages=K}}))}_syncRTLPluginState(ae,K){return a._(this,void 0,void 0,(function*(){return yield a.d4.syncState(K,this.self.importScripts)}))}_getAvailableImages(ae){let K=this.availableImages[ae];return K||(K=[]),K}_getLayerIndex(ae){let K=this.layerIndexes[ae];return K||(K=this.layerIndexes[ae]=new s),K}_getWorkerSource(ae,K,_e){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][K]||(this.workerSources[ae][K]={}),!this.workerSources[ae][K][_e]){const $e={sendAsync:(ze,nt)=>(ze.targetMapId=ae,this.actor.sendAsync(ze,nt))};switch(K){case"vector":this.workerSources[ae][K][_e]=new M($e,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][K][_e]=new vt($e,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][K][_e]=new this.externalWorkerSourceTypes[K]($e,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][K][_e]}_getDEMWorkerSource(ae,K){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][K]||(this.demWorkerSources[ae][K]=new L),this.demWorkerSources[ae][K]}}return a.i(self)&&(self.worker=new jt(self)),jt})),i("index",["exports","./shared"],(function(a,s){var u="5.15.0";function d(){var P=new s.A(4);return s.A!=Float32Array&&(P[1]=0,P[2]=0),P[0]=1,P[3]=1,P}let m,v,_;const O={frame(P,c,g){const b=requestAnimationFrame((I=>{C(),c(I)})),{unsubscribe:C}=s.s(P.signal,"abort",(()=>{C(),cancelAnimationFrame(b),g(new s.a(P.signal.reason))}),!1)},frameAsync(P){return new Promise(((c,g)=>{this.frame(P,c,g)}))},getImageData(P,c=0){return this.getImageCanvasContext(P).getImageData(-c,-c,P.width+2*c,P.height+2*c)},getImageCanvasContext(P){const c=window.document.createElement("canvas"),g=c.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return c.width=P.width,c.height=P.height,g.drawImage(P,0,0,P.width,P.height),g},resolveURL:P=>(m||(m=document.createElement("a")),m.href=P,m.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return _!==void 0?_:!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)},set prefersReducedMotion(P){_=P}},E=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(P){this._frozenAt=P}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function A(){return E.getCurrentTime()}class M{static testProp(c){if(!M.docStyle)return c[0];for(let g=0;g<c.length;g++)if(c[g]in M.docStyle)return c[g];return c[0]}static create(c,g,b){const C=window.document.createElement(c);return g!==void 0&&(C.className=g),b&&b.appendChild(C),C}static createNS(c,g){return window.document.createElementNS(c,g)}static disableDrag(){M.docStyle&&M.selectProp&&(M.userSelect=M.docStyle[M.selectProp],M.docStyle[M.selectProp]="none")}static enableDrag(){M.docStyle&&M.selectProp&&(M.docStyle[M.selectProp]=M.userSelect)}static setTransform(c,g){c.style[M.transformProp]=g}static addEventListener(c,g,b,C={}){c.addEventListener(g,b,"passive"in C?C:C.capture)}static removeEventListener(c,g,b,C={}){c.removeEventListener(g,b,"passive"in C?C:C.capture)}static suppressClickInternal(c){c.preventDefault(),c.stopPropagation(),window.removeEventListener("click",M.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",M.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",M.suppressClickInternal,!0)}),0)}static getScale(c){const g=c.getBoundingClientRect();return{x:g.width/c.offsetWidth||1,y:g.height/c.offsetHeight||1,boundingClientRect:g}}static getPoint(c,g,b){const C=g.boundingClientRect;return new s.P((b.clientX-C.left)/g.x-c.clientLeft,(b.clientY-C.top)/g.y-c.clientTop)}static mousePos(c,g){const b=M.getScale(c);return M.getPoint(c,b,g)}static touchPos(c,g){const b=[],C=M.getScale(c);for(let I=0;I<g.length;I++)b.push(M.getPoint(c,C,g[I]));return b}static mouseButton(c){return c.button}static remove(c){c.parentNode&&c.parentNode.removeChild(c)}static sanitize(c){const g=new DOMParser().parseFromString(c,"text/html").body||document.createElement("body"),b=g.querySelectorAll("script");for(const C of b)C.remove();return M.clean(g),g.innerHTML}static isPossiblyDangerous(c,g){const b=g.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(c)||!b.includes("javascript:")&&!b.includes("data:"))||!!c.startsWith("on")||void 0}static clean(c){const g=c.children;for(const b of g)M.removeAttributes(b),M.clean(b)}static removeAttributes(c){for(const{name:g,value:b}of c.attributes)M.isPossiblyDangerous(g,b)&&c.removeAttribute(g)}}M.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,M.selectProp=M.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),M.transformProp=M.testProp(["transform","WebkitTransform"]);const L={supported:!1,testSupport:function(P){!F&&N&&(Q?W(P):$=P)}};let $,N,F=!1,Q=!1;function W(P){const c=P.createTexture();P.bindTexture(P.TEXTURE_2D,c);try{if(P.texImage2D(P.TEXTURE_2D,0,P.RGBA,P.RGBA,P.UNSIGNED_BYTE,N),P.isContextLost())return;L.supported=!0}catch{}P.deleteTexture(c),F=!0}var H;typeof document<"u"&&(N=document.createElement("img"),N.onload=()=>{$&&W($),$=null,Q=!0},N.onerror=()=>{F=!0,$=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(P){let c,g,b,C;P.resetRequestQueue=()=>{c=[],g=0,b=0,C={}},P.addThrottleControl=G=>{const J=b++;return C[J]=G,J},P.removeThrottleControl=G=>{delete C[G],z()},P.getImage=(G,J,ie=!0)=>new Promise(((de,he)=>{L.supported&&(G.headers||(G.headers={}),G.headers.accept="image/webp,*/*"),s.e(G,{type:"image"}),c.push({abortController:J,requestParameters:G,supportImageRefresh:ie,state:"queued",onError:ye=>{he(ye)},onSuccess:ye=>{de(ye)}}),z()}));const I=G=>s._(this,void 0,void 0,(function*(){G.state="running";const{requestParameters:J,supportImageRefresh:ie,onError:de,onSuccess:he,abortController:ye}=G,Se=ie===!1&&!s.i(self)&&!s.g(J.url)&&(!J.headers||Object.keys(J.headers).reduce(((De,Ve)=>De&&Ve==="accept"),!0));g++;const Ie=Se?V(J,ye):s.m(J,ye);try{const De=yield Ie;delete G.abortController,G.state="completed",De.data instanceof HTMLImageElement||s.b(De.data)?he(De):De.data&&he({data:yield(Le=De.data,typeof createImageBitmap=="function"?s.f(Le):s.h(Le)),cacheControl:De.cacheControl,expires:De.expires})}catch(De){delete G.abortController,de(De)}finally{g--,z()}var Le})),z=()=>{const G=(()=>{for(const J of Object.keys(C))if(C[J]())return!0;return!1})()?s.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let J=g;J<G&&c.length>0;J++){const ie=c.shift();ie.abortController.signal.aborted?J--:I(ie)}},V=(G,J)=>new Promise(((ie,de)=>{const he=new Image,ye=G.url,Se=G.credentials;Se&&Se==="include"?he.crossOrigin="use-credentials":(Se&&Se==="same-origin"||!s.d(ye))&&(he.crossOrigin="anonymous"),J.signal.addEventListener("abort",(()=>{he.src="",de(new s.a(J.signal.reason))})),he.fetchPriority="high",he.onload=()=>{he.onerror=he.onload=null,ie({data:he})},he.onerror=()=>{he.onerror=he.onload=null,J.signal.aborted||de(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},he.src=ye}))})(H||(H={})),H.resetRequestQueue();class te{constructor(c){this._transformRequestFn=c??null}transformRequest(c,g){return this._transformRequestFn&&this._transformRequestFn(c,g)||{url:c}}setTransformRequest(c){this._transformRequestFn=c}}function ne(P){const c=[];if(typeof P=="string")c.push({id:"default",url:P});else if(P&&P.length>0){const g=[];for(const{id:b,url:C}of P){const I=`${b}${C}`;g.indexOf(I)===-1&&(g.push(I),c.push({id:b,url:C}))}}return c}function ce(P,c,g){try{const b=new URL(P);return b.pathname+=`${c}${g}`,b.toString()}catch{throw new Error(`Invalid sprite URL "${P}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function we(P){const{userImage:c}=P;return!!(c&&c.render&&c.render())&&(P.data.replace(new Uint8Array(c.data.buffer)),!0)}class re extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const c of Object.keys(this.images))this.removeImage(c);this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:g,promiseResolve:b}of this.requestors)b(this._getImagesForIds(g));this.requestors=[]}}getImage(c){const g=this.images[c];if(g&&!g.data&&g.spriteData){const b=g.spriteData;g.data=new s.R({width:b.width,height:b.height},b.context.getImageData(b.x,b.y,b.width,b.height).data),g.spriteData=null}return g}addImage(c,g){if(this.images[c])throw new Error(`Image id ${c} already exist, use updateImage instead`);this._validate(c,g)&&(this.images[c]=g)}_validate(c,g){let b=!0;const C=g.data||g.spriteData;return this._validateStretch(g.stretchX,C&&C.width)||(this.fire(new s.k(new Error(`Image "${c}" has invalid "stretchX" value`))),b=!1),this._validateStretch(g.stretchY,C&&C.height)||(this.fire(new s.k(new Error(`Image "${c}" has invalid "stretchY" value`))),b=!1),this._validateContent(g.content,g)||(this.fire(new s.k(new Error(`Image "${c}" has invalid "content" value`))),b=!1),b}_validateStretch(c,g){if(!c)return!0;let b=0;for(const C of c){if(C[0]<b||C[1]<C[0]||g<C[1])return!1;b=C[1]}return!0}_validateContent(c,g){if(!c)return!0;if(c.length!==4)return!1;const b=g.spriteData,C=b&&b.width||g.data.width,I=b&&b.height||g.data.height;return!(c[0]<0||C<c[0]||c[1]<0||I<c[1]||c[2]<0||C<c[2]||c[3]<0||I<c[3]||c[2]<c[0]||c[3]<c[1])}updateImage(c,g,b=!0){const C=this.getImage(c);if(b&&(C.data.width!==g.data.width||C.data.height!==g.data.height))throw new Error(`size mismatch between old image (${C.data.width}x${C.data.height}) and new image (${g.data.width}x${g.data.height}).`);g.version=C.version+1,this.images[c]=g,this.updatedImages[c]=!0}removeImage(c){const g=this.images[c];delete this.images[c],delete this.patterns[c],g.userImage&&g.userImage.onRemove&&g.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c){return new Promise(((g,b)=>{let C=!0;if(!this.isLoaded())for(const I of c)this.images[I]||(C=!1);this.isLoaded()||C?g(this._getImagesForIds(c)):this.requestors.push({ids:c,promiseResolve:g})}))}_getImagesForIds(c){const g={};for(const b of c){let C=this.getImage(b);C||(this.fire(new s.l("styleimagemissing",{id:b})),C=this.getImage(b)),C?g[b]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,textFitWidth:C.textFitWidth,textFitHeight:C.textFitHeight,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:s.w(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return g}getPixelSize(){const{width:c,height:g}=this.atlasImage;return{width:c,height:g}}getPattern(c){const g=this.patterns[c],b=this.getImage(c);if(!b)return null;if(g&&g.position.version===b.version)return g.position;if(g)g.position.version=b.version;else{const C={w:b.data.width+2,h:b.data.height+2,x:0,y:0},I=new s.I(C,b);this.patterns[c]={bin:C,position:I}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const g=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.T(c,this.atlasImage,g.RGBA),this.atlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const I in this.patterns)c.push(this.patterns[I].bin);const{w:g,h:b}=s.p(c),C=this.atlasImage;C.resize({width:g||1,height:b||1});for(const I in this.patterns){const{bin:z}=this.patterns[I],V=z.x+1,G=z.y+1,J=this.getImage(I).data,ie=J.width,de=J.height;s.R.copy(J,C,{x:0,y:0},{x:V,y:G},{width:ie,height:de}),s.R.copy(J,C,{x:0,y:de-1},{x:V,y:G-1},{width:ie,height:1}),s.R.copy(J,C,{x:0,y:0},{x:V,y:G+de},{width:ie,height:1}),s.R.copy(J,C,{x:ie-1,y:0},{x:V-1,y:G},{width:1,height:de}),s.R.copy(J,C,{x:0,y:0},{x:V+ie,y:G},{width:1,height:de})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const g of c){if(this.callbackDispatchedThisFrame[g])continue;this.callbackDispatchedThisFrame[g]=!0;const b=this.getImage(g);b||s.w(`Image with ID: "${g}" was not found`),we(b)&&this.updateImage(g,b)}}cloneImages(){const c={};for(const g in this.images){const b=this.images[g];c[g]=Object.assign(Object.assign({},b),{data:b.data?b.data.clone():null})}return c}}const se=1e20;function be(P,c,g,b,C,I,z,V,G){for(let J=c;J<c+b;J++)fe(P,g*I+J,I,C,z,V,G);for(let J=g;J<g+C;J++)fe(P,J*I+c,1,b,z,V,G)}function fe(P,c,g,b,C,I,z){I[0]=0,z[0]=-se,z[1]=se,C[0]=P[c];for(let V=1,G=0,J=0;V<b;V++){C[V]=P[c+V*g];const ie=V*V;do{const de=I[G];J=(C[V]-C[de]+ie-de*de)/(V-de)/2}while(J<=z[G]&&--G>-1);G++,I[G]=V,z[G]=J,z[G+1]=se}for(let V=0,G=0;V<b;V++){for(;z[G+1]<V;)G++;const J=I[G],ie=V-J;P[c+V*g]=C[J]+ie*ie}}const ve=s.v.layout_symbol["text-font"].default.join(",");class Me{constructor(c,g,b){this.requestManager=c,this.localIdeographFontFamily=g,this.entries={},this.lang=b}setURL(c){this.url=c}getGlyphs(c){return s._(this,void 0,void 0,(function*(){const g=[];for(const I in c)for(const z of c[I])g.push(this._getAndCacheGlyphsPromise(I,z));const b=yield Promise.all(g),C={};for(const{stack:I,id:z,glyph:V}of b)C[I]||(C[I]={}),C[I][z]=V&&{id:V.id,bitmap:V.bitmap.clone(),metrics:V.metrics};return C}))}_getAndCacheGlyphsPromise(c,g){return s._(this,void 0,void 0,(function*(){let b=this.entries[c];b||(b=this.entries[c]={glyphs:{},requests:{},ranges:{}});let C=b.glyphs[g];return C!==void 0?{stack:c,id:g,glyph:C}:!this.url||this._charUsesLocalIdeographFontFamily(g)?(C=b.glyphs[g]=this._drawGlyph(b,c,g),{stack:c,id:g,glyph:C}):yield this._downloadAndCacheRangePromise(c,g)}))}_downloadAndCacheRangePromise(c,g){return s._(this,void 0,void 0,(function*(){const b=this.entries[c],C=Math.floor(g/256);if(b.ranges[C])return{stack:c,id:g,glyph:null};if(!b.requests[C]){const I=Me.loadGlyphRange(c,C,this.url,this.requestManager);b.requests[C]=I}try{const I=yield b.requests[C];for(const z in I)b.glyphs[+z]=I[+z];return b.ranges[C]=!0,{stack:c,id:g,glyph:I[g]||null}}catch(I){const z=b.glyphs[g]=this._drawGlyph(b,c,g);return this._warnOnMissingGlyphRange(z,C,g,I),{stack:c,id:g,glyph:z}}}))}_warnOnMissingGlyphRange(c,g,b,C){const I=256*g,z=I+255,V=b.toString(16).padStart(4,"0").toUpperCase();s.w(`Unable to load glyph range ${g}, ${I}-${z}. Rendering codepoint U+${V} locally instead. ${C}`)}_charUsesLocalIdeographFontFamily(c){return!!this.localIdeographFontFamily&&s.q(c)}_drawGlyph(c,g,b){const C=g===ve&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(b),I=C?"ideographTinySDF":"tinySDF";c[I]||(c[I]=this._createTinySDF(C?this.localIdeographFontFamily:g));const z=c[I].draw(String.fromCodePoint(b));return{id:b,bitmap:new s.r({width:z.width||60,height:z.height||60},z.data),metrics:{width:z.glyphWidth/2||24,height:z.glyphHeight/2||24,left:z.glyphLeft/2+.5||0,top:z.glyphTop/2-27.5||-8,advance:z.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(c){const g=c?c.split(","):[];g.push("sans-serif");const b=g.map((C=>/[-\w]+/.test(C)?C:`'${CSS.escape(C)}'`)).join(",");return new Me.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:b,fontWeight:this._fontWeight(g[0]),fontStyle:this._fontStyle(g[0]),lang:this.lang})}_fontStyle(c){return/italic/i.test(c)?"italic":/oblique/i.test(c)?"oblique":"normal"}_fontWeight(c){const g={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let b;for(const[C,I]of Object.entries(g))new RegExp(`\\b${C}\\b`,"i").test(c)&&(b=`${I}`);return b}destroy(){for(const c in this.entries){const g=this.entries[c];g.tinySDF&&(g.tinySDF=null),g.ideographTinySDF&&(g.ideographTinySDF=null),g.glyphs={},g.requests={},g.ranges={}}this.entries={}}}Me.loadGlyphRange=function(P,c,g,b){return s._(this,void 0,void 0,(function*(){const C=256*c,I=C+255,z=b.transformRequest(g.replace("{fontstack}",P).replace("{range}",`${C}-${I}`),"Glyphs"),V=yield s.n(z,new AbortController);if(!V||!V.data)throw new Error(`Could not load glyph range. range: ${c}, ${C}-${I}`);const G={};for(const J of s.o(V.data))G[J.id]=J;return G}))},Me.TinySDF=class{constructor({fontSize:P=24,buffer:c=3,radius:g=8,cutoff:b=.25,fontFamily:C="sans-serif",fontWeight:I="normal",fontStyle:z="normal",lang:V=null}={}){this.buffer=c,this.cutoff=b,this.radius=g,this.lang=V;const G=this.size=P+4*c,J=this._createCanvas(G),ie=this.ctx=J.getContext("2d",{willReadFrequently:!0});ie.font=`${z} ${I} ${P}px ${C}`,ie.textBaseline="alphabetic",ie.textAlign="left",ie.fillStyle="black",this.gridOuter=new Float64Array(G*G),this.gridInner=new Float64Array(G*G),this.f=new Float64Array(G),this.z=new Float64Array(G+1),this.v=new Uint16Array(G)}_createCanvas(P){const c=document.createElement("canvas");return c.width=c.height=P,c}draw(P){const{width:c,actualBoundingBoxAscent:g,actualBoundingBoxDescent:b,actualBoundingBoxLeft:C,actualBoundingBoxRight:I}=this.ctx.measureText(P),z=Math.ceil(g),V=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(I-C))),G=Math.min(this.size-this.buffer,z+Math.ceil(b)),J=V+2*this.buffer,ie=G+2*this.buffer,de=Math.max(J*ie,0),he=new Uint8ClampedArray(de),ye={data:he,width:J,height:ie,glyphWidth:V,glyphHeight:G,glyphTop:z,glyphLeft:0,glyphAdvance:c};if(V===0||G===0)return ye;const{ctx:Se,buffer:Ie,gridInner:Le,gridOuter:De}=this;this.lang&&(Se.lang=this.lang),Se.clearRect(Ie,Ie,V,G),Se.fillText(P,Ie,Ie+z);const Ve=Se.getImageData(Ie,Ie,V,G);De.fill(se,0,de),Le.fill(0,0,de);for(let He=0;He<G;He++)for(let Fe=0;Fe<V;Fe++){const We=Ve.data[4*(He*V+Fe)+3]/255;if(We===0)continue;const Je=(He+Ie)*J+Fe+Ie;if(We===1)De[Je]=0,Le[Je]=se;else{const Ze=.5-We;De[Je]=Ze>0?Ze*Ze:0,Le[Je]=Ze<0?Ze*Ze:0}}be(De,0,0,J,ie,J,this.f,this.v,this.z),be(Le,Ie,Ie,V,G,J,this.f,this.v,this.z);for(let He=0;He<de;He++){const Fe=Math.sqrt(De[He])-Math.sqrt(Le[He]);he[He]=Math.round(255-255*(Fe/this.radius+this.cutoff))}return ye}};class Ne{constructor(){this.specification=s.u.light.position}possiblyEvaluate(c,g){return s.F(c.expression.evaluate(g))}interpolate(c,g,b){return{x:s.G.number(c.x,g.x,b),y:s.G.number(c.y,g.y,b),z:s.G.number(c.z,g.z,b)}}}let Qe;class Ce extends s.E{constructor(c){super(),Qe=Qe||new s.t({anchor:new s.D(s.u.light.anchor),position:new Ne,color:new s.D(s.u.light.color),intensity:new s.D(s.u.light.intensity)}),this._transitionable=new s.x(Qe,void 0),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,g={}){if(!this._validate(s.y,c,g))for(const b in c){const C=c[b];b.endsWith(s.z)?this._transitionable.setTransition(b.slice(0,-s.z.length),C):this._transitionable.setValue(b,C)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,g,b){return(!b||b.validate!==!1)&&s.B(this,c.call(s.C,{value:g,style:{glyphs:!0,sprite:!0},styleSpec:s.u}))}}const Ae=new s.t({"sky-color":new s.D(s.u.sky["sky-color"]),"horizon-color":new s.D(s.u.sky["horizon-color"]),"fog-color":new s.D(s.u.sky["fog-color"]),"fog-ground-blend":new s.D(s.u.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.u.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.u.sky["atmosphere-blend"])});class Xe extends s.E{constructor(c){super(),this._transitionable=new s.x(Ae,void 0),this.setSky(c),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.H(0))}setSky(c,g={}){if(!this._validate(s.J,c,g)){c||(c={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const b in c){const C=c[b];b.endsWith(s.z)?this._transitionable.setTransition(b.slice(0,-s.z.length),C):this._transitionable.setValue(b,C)}}}getSky(){return this._transitionable.serialize()}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,g,b={}){return b?.validate!==!1&&s.B(this,c.call(s.C,s.e({value:g,style:{glyphs:!0,sprite:!0},styleSpec:s.u})))}calculateFogBlendOpacity(c){return c<60?0:c<70?(c-60)/10:1}}class ke{constructor(c,g){this.width=c,this.height=g,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(c,g){const b=c.join(",")+String(g);return this.dashEntry[b]||(this.dashEntry[b]=this.addDash(c,g)),this.dashEntry[b]}getDashRanges(c,g,b){const C=[];let I=c.length%2==1?-c[c.length-1]*b:0,z=c[0]*b,V=!0;C.push({left:I,right:z,isDash:V,zeroLength:c[0]===0});let G=c[0];for(let J=1;J<c.length;J++){V=!V;const ie=c[J];I=G*b,G+=ie,z=G*b,C.push({left:I,right:z,isDash:V,zeroLength:ie===0})}return C}addRoundDash(c,g,b){const C=g/2;for(let I=-b;I<=b;I++){const z=this.width*(this.nextRow+b+I);let V=0,G=c[V];for(let J=0;J<this.width;J++){J/G.right>1&&(G=c[++V]);const ie=Math.abs(J-G.left),de=Math.abs(J-G.right),he=Math.min(ie,de);let ye;const Se=I/b*(C+1);if(G.isDash){const Ie=C-Math.abs(Se);ye=Math.sqrt(he*he+Ie*Ie)}else ye=C-Math.sqrt(he*he+Se*Se);this.data[z+J]=Math.max(0,Math.min(255,ye+128))}}}addRegularDash(c){for(let V=c.length-1;V>=0;--V){const G=c[V],J=c[V+1];G.zeroLength?c.splice(V,1):J&&J.isDash===G.isDash&&(J.left=G.left,c.splice(V,1))}const g=c[0],b=c[c.length-1];g.isDash===b.isDash&&(g.left=b.left-this.width,b.right=g.right+this.width);const C=this.width*this.nextRow;let I=0,z=c[I];for(let V=0;V<this.width;V++){V/z.right>1&&(z=c[++I]);const G=Math.abs(V-z.left),J=Math.abs(V-z.right),ie=Math.min(G,J);this.data[C+V]=Math.max(0,Math.min(255,(z.isDash?ie:-ie)+128))}}addDash(c,g){const b=g?7:0,C=2*b+1;if(this.nextRow+C>this.height)return s.w("LineAtlas out of space"),null;let I=0;for(let V=0;V<c.length;V++)I+=c[V];if(I!==0){const V=this.width/I,G=this.getDashRanges(c,this.width,V);g?this.addRoundDash(G,V,b):this.addRegularDash(G)}const z={y:this.nextRow+b,height:2*b,width:I};return this.nextRow+=C,this.dirty=!0,z}bind(c){const g=c.gl;this.texture?(g.bindTexture(g.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,g.texSubImage2D(g.TEXTURE_2D,0,0,0,this.width,this.height,g.ALPHA,g.UNSIGNED_BYTE,this.data))):(this.texture=g.createTexture(),g.bindTexture(g.TEXTURE_2D,this.texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR),g.texImage2D(g.TEXTURE_2D,0,g.ALPHA,this.width,this.height,0,g.ALPHA,g.UNSIGNED_BYTE,this.data))}}const ft="maplibre_preloaded_worker_pool";class pt{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<pt.workerCount;)this.workers.push(new Worker(s.c.WORKER_URL));return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach((g=>{g.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[ft]}numActive(){return Object.keys(this.active).length}}const lt=Math.floor(O.hardwareConcurrency/2);let ot,yt;function Et(){return ot||(ot=new pt),ot}pt.workerCount=s.K(globalThis)?Math.max(Math.min(lt,3),1):1;class Tt{constructor(c,g){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=g;const b=this.workerPool.acquire(g);for(let C=0;C<b.length;C++){const I=new s.L(b[C],g);I.name=`Worker ${C}`,this.actors.push(I)}if(!this.actors.length)throw new Error("No actors found")}broadcast(c,g){const b=[];for(const C of this.actors)b.push(C.sendAsync({type:c,data:g}));return Promise.all(b)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(c=!0){this.actors.forEach((g=>{g.remove()})),this.actors=[],c&&this.workerPool.release(this.id)}registerMessageHandler(c,g){for(const b of this.actors)b.registerMessageHandler(c,g)}unregisterMessageHandler(c){for(const g of this.actors)g.unregisterMessageHandler(c)}}function Ht(){return yt||(yt=new Tt(Et(),s.M),yt.registerMessageHandler("GR",((P,c,g)=>s.m(c,g)))),yt}function wt(P,c){const g=s.N();return s.O(g,g,[1,1,0]),s.Q(g,g,[.5*P.width,.5*P.height,1]),P.calculatePosMatrix?s.S(g,g,P.calculatePosMatrix(c.toUnwrapped())):g}function un(P,c,g,b,C,I,z){var V;const G=(function(he,ye,Se){if(he)for(const Ie of he){const Le=ye[Ie];if(Le&&Le.source===Se&&Le.type==="fill-extrusion")return!0}else for(const Ie in ye){const Le=ye[Ie];if(Le.source===Se&&Le.type==="fill-extrusion")return!0}return!1})((V=C?.layers)!==null&&V!==void 0?V:null,c,P.id),J=I.maxPitchScaleFactor(),ie=P.tilesIn(b,J,G);ie.sort(Gt);const de=[];for(const he of ie)de.push({wrappedTileID:he.tileID.wrapped().key,queryResults:he.tile.queryRenderedFeatures(c,g,P.getState(),he.queryGeometry,he.cameraQueryGeometry,he.scale,C,I,J,wt(I,he.tileID),z?(ye,Se)=>z(he.tileID,ye,Se):void 0)});return(function(he,ye){for(const Se in he)for(const Ie of he[Se])Jt(Ie,ye);return he})((function(he){const ye={},Se={};for(const Ie of he){const Le=Ie.queryResults,De=Ie.wrappedTileID,Ve=Se[De]=Se[De]||{};for(const He in Le){const Fe=Le[He],We=Ve[He]=Ve[He]||{},Je=ye[He]=ye[He]||[];for(const Ze of Fe)We[Ze.featureIndex]||(We[Ze.featureIndex]=!0,Je.push(Ze))}}return ye})(de),P)}function Gt(P,c){const g=P.tileID,b=c.tileID;return g.overscaledZ-b.overscaledZ||g.canonical.y-b.canonical.y||g.wrap-b.wrap||g.canonical.x-b.canonical.x}function Jt(P,c){const g=P.feature,b=c.getFeatureState(g.layer["source-layer"],g.id);g.source=g.layer.source,g.layer["source-layer"]&&(g.sourceLayer=g.layer["source-layer"]),g.state=b}function Sn(P,c,g){return s._(this,void 0,void 0,(function*(){let b=P;if(P.url?b=(yield s.j(c.transformRequest(P.url,"Source"),g)).data:yield O.frameAsync(g),!b)return null;const C=s.U(s.e(b,P),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in b&&b.vector_layers&&(C.vectorLayerIds=b.vector_layers.map((I=>I.id))),C}))}class nn{constructor(c,g){c&&(g?this.setSouthWest(c).setNorthEast(g):Array.isArray(c)&&(c.length===4?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1])))}setNorthEast(c){return this._ne=c instanceof s.V?new s.V(c.lng,c.lat):s.V.convert(c),this}setSouthWest(c){return this._sw=c instanceof s.V?new s.V(c.lng,c.lat):s.V.convert(c),this}extend(c){const g=this._sw,b=this._ne;let C,I;if(c instanceof s.V)C=c,I=c;else{if(!(c instanceof nn))return Array.isArray(c)?c.length===4||c.every(Array.isArray)?this.extend(nn.convert(c)):this.extend(s.V.convert(c)):c&&("lng"in c||"lon"in c)&&"lat"in c?this.extend(s.V.convert(c)):this;if(C=c._sw,I=c._ne,!C||!I)return this}return g||b?(g.lng=Math.min(C.lng,g.lng),g.lat=Math.min(C.lat,g.lat),b.lng=Math.max(I.lng,b.lng),b.lat=Math.max(I.lat,b.lat)):(this._sw=new s.V(C.lng,C.lat),this._ne=new s.V(I.lng,I.lat)),this}getCenter(){return new s.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.V(this.getWest(),this.getNorth())}getSouthEast(){return new s.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(c){const{lng:g,lat:b}=s.V.convert(c);let C=this._sw.lng<=g&&g<=this._ne.lng;return this._sw.lng>this._ne.lng&&(C=this._sw.lng>=g&&g>=this._ne.lng),this._sw.lat<=b&&b<=this._ne.lat&&C}intersects(c){if(!((c=nn.convert(c)).getNorth()>=this.getSouth()&&c.getSouth()<=this.getNorth()))return!1;const g=Math.abs(this.getEast()-this.getWest()),b=Math.abs(c.getEast()-c.getWest());if(g>=360||b>=360)return!0;const C=s.W(this.getWest(),-180,180),I=s.W(this.getEast(),-180,180),z=s.W(c.getWest(),-180,180),V=s.W(c.getEast(),-180,180),G=C>=I,J=z>=V;return!(!G||!J)||(G?V>=C||z<=I:J?I>=z||C<=V:z<=I&&V>=C)}static convert(c){return c instanceof nn?c:c&&new nn(c)}static fromLngLat(c,g=0){const b=360*g/40075017,C=b/Math.cos(Math.PI/180*c.lat);return new nn(new s.V(c.lng-C,c.lat-b),new s.V(c.lng+C,c.lat+b))}adjustAntiMeridian(){const c=new s.V(this._sw.lng,this._sw.lat),g=new s.V(this._ne.lng,this._ne.lat);return new nn(c,c.lng>g.lng?new s.V(g.lng+360,g.lat):g)}}class Cn{constructor(c,g,b){this.bounds=nn.convert(this.validateBounds(c)),this.minzoom=g||0,this.maxzoom=b||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const g=Math.pow(2,c.z),b=Math.floor(s.Y(this.bounds.getWest())*g),C=Math.floor(s.X(this.bounds.getNorth())*g),I=Math.ceil(s.Y(this.bounds.getEast())*g),z=Math.ceil(s.X(this.bounds.getSouth())*g);return c.x>=b&&c.x<I&&c.y>=C&&c.y<z}}class jn extends s.E{constructor(c,g,b,C){if(super(),this.id=c,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.U(g,["url","scheme","tileSize","promoteId","encoding"])),this._options=s.e({type:"vector"},g),this._collectResourceTiming=g.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(C)}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield Sn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),c&&(s.e(this,c),c.bounds&&(this.tileBounds=new Cn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,s.Z(c)||this.fire(new s.k(c))}}))}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}setSourceProperty(c){this._tileJSONRequest&&this._tileJSONRequest.abort(),c(),this.load()}setTiles(c){return this.setSourceProperty((()=>{this._options.tiles=c})),this}setUrl(c){return this.setSourceProperty((()=>{this.url=c,this._options.url=c})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(c){return s._(this,void 0,void 0,(function*(){const g=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b={request:this.map._requestManager.transformRequest(g,"Tile"),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(c)};b.request.collectResourceTiming=this._collectResourceTiming;let C="RT";if(c.actor&&c.state!=="expired"){if(c.state==="loading")return new Promise(((I,z)=>{c.reloadPromise={resolve:I,reject:z}}))}else c.actor=this.dispatcher.getActor(),C="LT";c.abortController=new AbortController;try{const I=yield c.actor.sendAsync({type:C,data:b},c.abortController);if(delete c.abortController,c.aborted)return;this._afterTileLoadWorkerResponse(c,I)}catch(I){if(delete c.abortController,c.aborted)return;if(I&&I.status!==404)throw I;this._afterTileLoadWorkerResponse(c,null)}}))}_getOverzoomParameters(c){if(c.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const g=c.tileID.scaledTo(this.maxzoom).canonical,b=g.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:g,overzoomRequest:this.map._requestManager.transformRequest(b,"Tile")}}_afterTileLoadWorkerResponse(c,g){if(g&&g.resourceTiming&&(c.resourceTiming=g.resourceTiming),g&&this.map._refreshExpiredTiles&&c.setExpiryData(g),c.loadVectorData(g,this.map.painter),c.reloadPromise){const b=c.reloadPromise;c.reloadPromise=null,this.loadTile(c).then(b.resolve).catch(b.reject)}}abortTile(c){return s._(this,void 0,void 0,(function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.actor&&(yield c.actor.sendAsync({type:"AT",data:{uid:c.uid,type:this.type,source:this.id}}))}))}unloadTile(c){return s._(this,void 0,void 0,(function*(){c.unloadVectorData(),c.actor&&(yield c.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Gn extends s.E{constructor(c,g,b,C){super(),this.id=c,this.dispatcher=b,this.setEventedParent(C),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},g),s.e(this,s.U(g,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,(function*(c=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const g=yield Sn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,g&&(s.e(this,g),g.bounds&&(this.tileBounds=new Cn(g.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:c})))}catch(g){this._tileJSONRequest=null,this._loaded=!0,s.Z(g)||this.fire(new s.k(g))}}))}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(c){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),c(),this.load(!0)}setTiles(c){return this.setSourceProperty((()=>{this._options.tiles=c})),this}setUrl(c){return this.setSourceProperty((()=>{this.url=c,this._options.url=c})),this}serialize(){return s.e({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c){return s._(this,void 0,void 0,(function*(){const g=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);c.abortController=new AbortController;try{const b=yield H.getImage(this.map._requestManager.transformRequest(g,"Tile"),c.abortController,this.map._refreshExpiredTiles);if(delete c.abortController,c.aborted)return void(c.state="unloaded");if(b&&b.data){this.map._refreshExpiredTiles&&(b.cacheControl||b.expires)&&c.setExpiryData({cacheControl:b.cacheControl,expires:b.expires});const C=this.map.painter.context,I=C.gl,z=b.data;c.texture=this.map.painter.getTileTexture(z.width),c.texture?c.texture.update(z,{useMipmap:!0}):(c.texture=new s.T(C,z,I.RGBA,{useMipmap:!0}),c.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST)),c.state="loaded"}}catch(b){if(delete c.abortController,c.aborted)c.state="unloaded";else if(b)throw c.state="errored",b}}))}abortTile(c){return s._(this,void 0,void 0,(function*(){c.abortController&&(c.abortController.abort(),delete c.abortController)}))}unloadTile(c){return s._(this,void 0,void 0,(function*(){c.texture&&this.map.painter.saveTileTexture(c.texture)}))}hasTransition(){return!1}}class je extends Gn{constructor(c,g,b,C){super(c,g,b,C),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},g),this.encoding=g.encoding||"mapbox",this.redFactor=g.redFactor,this.greenFactor=g.greenFactor,this.blueFactor=g.blueFactor,this.baseShift=g.baseShift}loadTile(c){return s._(this,void 0,void 0,(function*(){const g=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),b=this.map._requestManager.transformRequest(g,"Tile");c.neighboringTiles=this._getNeighboringTiles(c.tileID),c.abortController=new AbortController;try{const C=yield H.getImage(b,c.abortController,this.map._refreshExpiredTiles);if(delete c.abortController,c.aborted)return void(c.state="unloaded");if(C&&C.data){const I=C.data;this.map._refreshExpiredTiles&&(C.cacheControl||C.expires)&&c.setExpiryData({cacheControl:C.cacheControl,expires:C.expires});const z=s.b(I)&&s.$()?I:yield this.readImageNow(I),V={type:this.type,uid:c.uid,source:this.id,rawImageData:z,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!c.actor||c.state==="expired"){c.actor=this.dispatcher.getActor();const G=yield c.actor.sendAsync({type:"LDT",data:V});c.dem=G,c.needsHillshadePrepare=!0,c.needsTerrainPrepare=!0,c.state="loaded"}}}catch(C){if(delete c.abortController,c.aborted)c.state="unloaded";else if(C)throw c.state="errored",C}}))}readImageNow(c){return s._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&s.a0()){const g=c.width+2,b=c.height+2;try{return new s.R({width:g,height:b},yield s.a1(c,-1,-1,g,b))}catch{}}return O.getImageData(c,1)}))}_getNeighboringTiles(c){const g=c.canonical,b=Math.pow(2,g.z),C=(g.x-1+b)%b,I=g.x===0?c.wrap-1:c.wrap,z=(g.x+1+b)%b,V=g.x+1===b?c.wrap+1:c.wrap,G={};return G[new s.a2(c.overscaledZ,I,g.z,C,g.y).key]={backfilled:!1},G[new s.a2(c.overscaledZ,V,g.z,z,g.y).key]={backfilled:!1},g.y>0&&(G[new s.a2(c.overscaledZ,I,g.z,C,g.y-1).key]={backfilled:!1},G[new s.a2(c.overscaledZ,c.wrap,g.z,g.x,g.y-1).key]={backfilled:!1},G[new s.a2(c.overscaledZ,V,g.z,z,g.y-1).key]={backfilled:!1}),g.y+1<b&&(G[new s.a2(c.overscaledZ,I,g.z,C,g.y+1).key]={backfilled:!1},G[new s.a2(c.overscaledZ,c.wrap,g.z,g.x,g.y+1).key]={backfilled:!1},G[new s.a2(c.overscaledZ,V,g.z,z,g.y+1).key]={backfilled:!1}),G}unloadTile(c){return s._(this,void 0,void 0,(function*(){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&(yield c.actor.sendAsync({type:"RDT",data:{type:this.type,uid:c.uid,source:this.id}}))}))}}function Ye(P){return P.type==="GeometryCollection"?P.geometries.map((c=>c.coordinates)).flat(1/0):P.coordinates.flat(1/0)}function vt(P){const c=new nn;let g;switch(P.type){case"FeatureCollection":g=P.features.map((b=>Ye(b.geometry))).flat(1/0);break;case"Feature":g=Ye(P.geometry);break;default:g=Ye(P)}if(g.length==0)return c;for(let b=0;b<g.length-1;b+=2)c.extend([g[b],g[b+1]]);return c}class kt extends s.E{constructor(c,g,b,C){super(),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:g.data},this.actor=b.getActor(),this.setEventedParent(C),this._data=typeof g.data=="string"?{url:g.data}:{geojson:g.data},this._options=s.e({},g),this._collectResourceTiming=g.collectResourceTiming,g.maxzoom!==void 0&&(this.maxzoom=g.maxzoom),g.type&&(this.type=g.type),g.attribution&&(this.attribution=g.attribution),this.promoteId=g.promoteId,g.clusterMaxZoom!==void 0&&this.maxzoom<=g.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${g.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:g.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(g.buffer!==void 0?g.buffer:128),tolerance:this._pixelsToTileUnits(g.tolerance!==void 0?g.tolerance:.375),extent:s.a5,maxZoom:this.maxzoom,lineMetrics:g.lineMetrics||!1,generateId:g.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(g.clusterMaxZoom),minPoints:Math.max(2,g.clusterMinPoints||2),extent:s.a5,radius:this._pixelsToTileUnits(g.clusterRadius||50),log:!1,generateId:g.generateId||!1},clusterProperties:g.clusterProperties,filter:g.filter},g.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(c){return c*(s.a5/this.tileSize)}_getClusterMaxZoom(c){const g=c?Math.round(c):this.maxzoom-1;return Number.isInteger(c)||c===void 0||s.w(`Integer expected for option 'clusterMaxZoom': provided value "${c}" rounded to "${g}"`),g}load(){return s._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(c){this.map=c,this.load()}setData(c,g){this._data=typeof c=="string"?{url:c}:{geojson:c},this._pendingWorkerUpdate={data:c};const b=this._updateWorkerData();return g?b:this}updateData(c,g){this._pendingWorkerUpdate.diff=s.a6(this._pendingWorkerUpdate.diff,c);const b=this._updateWorkerData();return g?b:this}getData(){return s._(this,void 0,void 0,(function*(){const c=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:c})}))}getBounds(){return s._(this,void 0,void 0,(function*(){return vt(yield this.getData())}))}setClusterOptions(c){return this.workerOptions.cluster=c.cluster,c.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(c.clusterRadius)),c.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(c.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(c){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:c,source:this.id}})}getClusterChildren(c){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:c,source:this.id}})}getClusterLeaves(c,g,b){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:c,limit:g,offset:b}})}_updateWorkerData(){return s._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void s.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:c,diff:g}=this._pendingWorkerUpdate,b=s.e({type:this.type},this.workerOptions);c!==void 0?(typeof c=="string"?(b.request=this.map._requestManager.transformRequest(O.resolveURL(c),"Source"),b.request.collectResourceTiming=this._collectResourceTiming):b.data=c,this._pendingWorkerUpdate.data=void 0):g&&(b.dataDiff=g,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new s.l("dataloading",{dataType:"source"}));try{const C=yield this.actor.sendAsync({type:"LD",data:b});if(this._isUpdatingWorker=!1,this._removed||C.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));C.data&&(this._data={geojson:C.data});const I=this._applyDiffToSource(g),z=this._getShouldReloadTileOptions(I);let V=null;C.resourceTiming&&C.resourceTiming[this.id]&&(V=C.resourceTiming[this.id].slice(0));const G={dataType:"source"};this._collectResourceTiming&&V&&V.length>0&&s.e(G,{resourceTiming:V}),this.fire(new s.l("data",Object.assign(Object.assign({},G),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},G),{sourceDataType:"content",shouldReloadTileOptions:z})))}catch(C){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(C))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(c){if(!c)return;const g=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const C=s.a7(this._data.geojson,g);if(!C)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:C}}if(!this._data.updateable)return;const b=s.a8(this._data.updateable,c,g);return c.removeAll||this._options.cluster?void 0:b}_getShouldReloadTileOptions(c){if(c)return{affectedBounds:c.filter(Boolean).map((g=>vt(g)))}}shouldReloadTile(c,{affectedBounds:g}){if(c.state==="loading")return!0;if(c.state==="unloaded")return!1;const{buffer:b,extent:C}=this.workerOptions.geojsonVtOptions,I=(function({x:z,y:V,z:G},J=0){const ie=s.a3((z-J)/Math.pow(2,G)),de=s.a4((V+1+J)/Math.pow(2,G)),he=s.a3((z+1+J)/Math.pow(2,G)),ye=s.a4((V-J)/Math.pow(2,G));return new nn([ie,de],[he,ye])})(c.tileID.canonical,b/C);for(const z of g)if(I.intersects(z))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(c){return s._(this,void 0,void 0,(function*(){const g=c.actor?"RT":"LT";c.actor=this.actor;const b={type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};c.abortController=new AbortController;const C=yield this.actor.sendAsync({type:g,data:b},c.abortController);delete c.abortController,c.unloadVectorData(),c.aborted||c.loadVectorData(C,this.map.painter,g==="RT")}))}abortTile(c){return s._(this,void 0,void 0,(function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.aborted=!0}))}unloadTile(c){return s._(this,void 0,void 0,(function*(){c.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class jt extends s.E{constructor(c,g,b,C){super(),this.flippedWindingOrder=!1,this.id=c,this.dispatcher=b,this.coordinates=g.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(C),this.options=g}load(c){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const g=yield H.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,g&&g.data&&(this.image=g.data,c&&(this.coordinates=c),this._finishLoading())}catch(g){this._request=null,this._loaded=!0,s.Z(g)||this.fire(new s.k(g))}}))}loaded(){return this._loaded}updateImage(c){return c.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=c.url,this.load(c.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(c){this.coordinates=c;const g=c.map(s.a9.fromLngLat);var b;return this.tileID=(function(C){const I=s.aa.fromPoints(C),z=I.width(),V=I.height(),G=Math.max(z,V),J=Math.max(0,Math.floor(-Math.log(G)/Math.LN2)),ie=Math.pow(2,J);return new s.ac(J,Math.floor((I.minX+I.maxX)/2*ie),Math.floor((I.minY+I.maxY)/2*ie))})(g),this.terrainTileRanges=this._getOverlappingTileRanges(g),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=g.map((C=>this.tileID.getTilePoint(C)._round())),this.flippedWindingOrder=((b=this.tileCoords)[1].x-b[0].x)*(b[2].y-b[0].y)-(b[1].y-b[0].y)*(b[2].x-b[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,g=c.gl;this.texture||(this.texture=new s.T(c,this.image,g.RGBA),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE));let b=!1;for(const C in this.tiles){const I=this.tiles[C];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,b=!0)}b&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(c){return s._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={}):c.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(c){const{minX:g,minY:b,maxX:C,maxY:I}=s.aa.fromPoints(c),z={};for(let V=0;V<=s.ab;V++){const G=Math.pow(2,V),J=Math.floor(g*G),ie=Math.floor(b*G),de=Math.floor(C*G),he=Math.floor(I*G);z[V]={minTileX:J,minTileY:ie,maxTileX:de,maxTileY:he}}return z}}class Oe extends jt{constructor(c,g,b,C){super(c,g,b,C),this.roundZoom=!0,this.type="video",this.options=g}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1;const c=this.options;this.urls=[];for(const g of c.urls)this.urls.push(this.map._requestManager.transformRequest(g,"Source").url);try{const g=yield s.ad(this.urls);if(this._loaded=!0,!g)return;this.video=g,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(g){this.fire(new s.k(g))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(c){if(this.video){const g=this.video.seekable;c<g.start(0)||c>g.end(0)?this.fire(new s.k(new s.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${g.start(0)} and ${g.end(0)}-second mark.`))):this.video.currentTime=c}}getVideo(){return this.video}onAdd(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const c=this.map.painter.context,g=c.gl;this.texture?this.video.paused||(this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE),g.texSubImage2D(g.TEXTURE_2D,0,0,0,g.RGBA,g.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(c,this.video,g.RGBA),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE));let b=!1;for(const C in this.tiles){const I=this.tiles[C];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,b=!0)}b&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ae extends jt{constructor(c,g,b,C){super(c,g,b,C),g.coordinates?Array.isArray(g.coordinates)&&g.coordinates.length===4&&!g.coordinates.some((I=>!Array.isArray(I)||I.length!==2||I.some((z=>typeof z!="number"))))||this.fire(new s.k(new s.ae(`sources.${c}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.ae(`sources.${c}`,null,'missing required property "coordinates"'))),g.animate&&typeof g.animate!="boolean"&&this.fire(new s.k(new s.ae(`sources.${c}`,null,'optional "animate" property must be a boolean value'))),g.canvas?typeof g.canvas=="string"||g.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.ae(`sources.${c}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.ae(`sources.${c}`,null,'missing required property "canvas"'))),this.options=g,this.animate=g.animate===void 0||g.animate}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const g=this.map.painter.context,b=g.gl;this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new s.T(g,this.canvas,b.RGBA,{premultiply:!0}),this.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE));let C=!1;for(const I in this.tiles){const z=this.tiles[I];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,C=!0)}C&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const c of[this.canvas.width,this.canvas.height])if(isNaN(c)||c<=0)return!0;return!1}}const K={},_e=P=>{switch(P){case"geojson":return kt;case"image":return jt;case"raster":return Gn;case"raster-dem":return je;case"vector":return jn;case"video":return Oe;case"canvas":return ae}return K[P]},$e="RTLPluginLoaded";class ze extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ht()}_syncState(c){return this.status=c,this.dispatcher.broadcast("SRPS",{pluginStatus:c,pluginURL:this.url}).catch((g=>{throw this.status="error",g}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(c){return s._(this,arguments,void 0,(function*(g,b=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=O.resolveURL(g),!this.url)throw new Error(`requested url ${g} is invalid`);if(this.status==="unavailable"){if(!b)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return s._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l($e))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let nt=null;function tt(){return nt||(nt=new ze),nt}var Ke,at;(function(P){P[P.Base=0]="Base",P[P.Parent=1]="Parent"})(Ke||(Ke={})),(function(P){P[P.Departing=0]="Departing",P[P.Incoming=1]="Incoming"})(at||(at={}));class St{constructor(c,g){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=c,this.uid=s.af(),this.uses=0,this.tileSize=g,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(c){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(c||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:c,fadingDirection:g,fadingParentID:b,fadeEndTime:C}){this.resetFadeLogic(),this.fadingRole=c,this.fadingDirection=g,this.fadingParentID=b,this.fadeEndTime=C}setSelfFadeLogic(c){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=c}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=A(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(c){this.demTexture&&c.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(c,g,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",c){c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,this.latestFeatureIndex.rawTileData=c.rawTileData,this.latestFeatureIndex.encoding=c.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=(function(C,I){const z={};if(!I)return z;for(const V of C){const G=V.layerIds.map((J=>I.getLayer(J))).filter(Boolean);if(G.length!==0){V.layers=G,V.stateDependentLayerIds&&(V.stateDependentLayers=V.stateDependentLayerIds.map((J=>G.filter((ie=>ie.id===J))[0])));for(const J of G)z[J.id]=V}}return z})(c.buckets,g?.style),this.hasSymbolBuckets=!1;for(const C in this.buckets){const I=this.buckets[C];if(I instanceof s.ah){if(this.hasSymbolBuckets=!0,!b)break;I.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const C in this.buckets){const I=this.buckets[C];if(I instanceof s.ah&&I.hasRTLText){this.hasRTLText=!0,tt().lazyLoad();break}}this.queryPadding=0;for(const C in this.buckets){const I=this.buckets[C];this.queryPadding=Math.max(this.queryPadding,g.style.getLayer(C).queryRadius(I))}c.imageAtlas&&(this.imageAtlas=c.imageAtlas),c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage),this.dashPositions=c.dashPositions}else this.collisionBoxArray=new s.ag}unloadVectorData(){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(c){return this.buckets[c.id]}upload(c){for(const b in this.buckets){const C=this.buckets[b];C.uploadPending()&&C.upload(c)}const g=c.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new s.T(c,this.imageAtlas.image,g.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(c,this.glyphAtlasImage,g.ALPHA),this.glyphAtlasImage=null)}prepare(c){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture)}queryRenderedFeatures(c,g,b,C,I,z,V,G,J,ie,de){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:C,cameraQueryGeometry:I,scale:z,tileSize:this.tileSize,pixelPosMatrix:ie,transform:G,params:V,queryPadding:this.queryPadding*J,getElevation:de},c,g,b):{}}querySourceFeatures(c,g){const b=this.latestFeatureIndex;if(!b||!b.rawTileData)return;const C=b.loadVTLayers(),I=g&&g.sourceLayer?g.sourceLayer:"",z=C[s.ai]||C[I];if(!z)return;const V=s.aj(g?.filter,g?.globalState),{z:G,x:J,y:ie}=this.tileID.canonical,de={z:G,x:J,y:ie};for(let he=0;he<z.length;he++){const ye=z.feature(he);if(V.needGeometry){const Le=s.ak(ye,!0);if(!V.filter(new s.H(this.tileID.overscaledZ),Le,this.tileID.canonical))continue}else if(!V.filter(new s.H(this.tileID.overscaledZ),ye))continue;const Se=b.getId(ye,I),Ie=new s.al(ye,G,J,ie,Se);Ie.tile=de,c.push(Ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(c){const g=this.expirationTime;if(c.cacheControl){const b=s.am(c.cacheControl);b["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"])}else c.expires&&(this.expirationTime=new Date(c.expires).getTime());if(this.expirationTime){const b=Date.now();let C=!1;if(this.expirationTime>b)C=!1;else if(g)if(this.expirationTime<g)C=!0;else{const I=this.expirationTime-g;I?this.expirationTime=b+Math.max(I,3e4):C=!0}else C=!0;C?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(c,g){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(c).length===0)return;const b=this.latestFeatureIndex.loadVTLayers();for(const C in this.buckets){if(!g.style.hasLayer(C))continue;const I=this.buckets[C],z=I.layers[0].sourceLayer||s.ai,V=b[z],G=c[z];if(!V||!G||Object.keys(G).length===0)continue;I.update(G,V,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const J=g&&g.style&&g.style.getLayer(C);J&&(this.queryPadding=Math.max(this.queryPadding,J.queryRadius(I)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(c){this.symbolFadeHoldUntil=A()+c}setDependencies(c,g){const b={};for(const C of g)b[C]=!0;this.dependencies[c]=b}hasDependency(c,g){for(const b of c){const C=this.dependencies[b];if(C){for(const I of g)if(C[I])return!0}}return!1}}class st{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(c,g,b){const C=String(g);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][C]=this.stateChanges[c][C]||{},s.e(this.stateChanges[c][C],b),this.deletedStates[c]===null){this.deletedStates[c]={};for(const I in this.state[c])I!==C&&(this.deletedStates[c][I]=null)}else if(this.deletedStates[c]&&this.deletedStates[c][C]===null){this.deletedStates[c][C]={};for(const I in this.state[c][C])b[I]||(this.deletedStates[c][C][I]=null)}else for(const I in b)this.deletedStates[c]&&this.deletedStates[c][C]&&this.deletedStates[c][C][I]===null&&delete this.deletedStates[c][C][I]}removeFeatureState(c,g,b){if(this.deletedStates[c]===null)return;const C=String(g);if(this.deletedStates[c]=this.deletedStates[c]||{},b&&g!==void 0)this.deletedStates[c][C]!==null&&(this.deletedStates[c][C]=this.deletedStates[c][C]||{},this.deletedStates[c][C][b]=null);else if(g!==void 0)if(this.stateChanges[c]&&this.stateChanges[c][C])for(b in this.deletedStates[c][C]={},this.stateChanges[c][C])this.deletedStates[c][C][b]=null;else this.deletedStates[c][C]=null;else this.deletedStates[c]=null}getState(c,g){const b=String(g),C=s.e({},(this.state[c]||{})[b],(this.stateChanges[c]||{})[b]);if(this.deletedStates[c]===null)return{};if(this.deletedStates[c]){const I=this.deletedStates[c][g];if(I===null)return{};for(const z in I)delete C[z]}return C}initializeTileState(c,g){c.setFeatureState(this.state,g)}coalesceChanges(c,g){const b={};for(const C in this.stateChanges){this.state[C]=this.state[C]||{};const I={};for(const z in this.stateChanges[C])this.state[C][z]||(this.state[C][z]={}),s.e(this.state[C][z],this.stateChanges[C][z]),I[z]=this.state[C][z];b[C]=I}for(const C in this.deletedStates){this.state[C]=this.state[C]||{};const I={};if(this.deletedStates[C]===null)for(const z in this.state[C])I[z]={},this.state[C][z]={};else for(const z in this.deletedStates[C]){if(this.deletedStates[C][z]===null)this.state[C][z]={};else for(const V of Object.keys(this.deletedStates[C][z]))delete this.state[C][z][V];I[z]=this.state[C][z]}b[C]=b[C]||{},s.e(b[C],I)}this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0&&c.setFeatureState(b,g)}}const $t=89.25;function sn(P,c){const g=s.an(c.lat,-s.ao,s.ao);return new s.P(s.Y(c.lng)*P,s.X(g)*P)}function Vn(P,c){return new s.a9(c.x/P,c.y/P).toLngLat()}function Ar(P){return P.cameraToCenterDistance*Math.min(.85*Math.tan(s.ap(90-P.pitch)),Math.tan(s.ap($t-P.pitch)))}function Or(P,c){const g=P.canonical,b=c/s.aq(g.z),C=g.x+Math.pow(2,g.z)*P.wrap,I=s.ar(new Float64Array(16));return s.O(I,I,[C*b,g.y*b,0]),s.Q(I,I,[b/s.a5,b/s.a5,1]),I}function ut(P,c,g,b,C){const I=s.a9.fromLngLat(P,c),z=C*s.as(1,P.lat),{x:V,y:G,z:J}=Fr(g,b);return new s.a9(I.x+z*-V,I.y+z*-G,I.z+z*-J)}function Fr(P,c){const g=s.ap(P),b=s.ap(c),C=Math.cos(-g),I=Math.sin(g);return{x:I*Math.sin(b),y:-I*Math.cos(b),z:C}}function ji(P,c,g){const b=c.intersectsFrustum(P);if(!g||b===0)return b;const C=c.intersectsPlane(g);return C===0?0:b===2&&C===2?2:1}function tr(P,c,g){let b=0;const C=(g-c)/10;for(let I=0;I<10;I++)b+=C*Math.pow(Math.cos(c+(I+.5)/10*(g-c)),P);return b}function Pn(P,c){return function(g,b,C,I,z){const V=2*((P-1)/s.at(Math.cos(s.ap($t-z))/Math.cos(s.ap($t)))-1),G=Math.acos(C/I),J=2*tr(V-1,0,s.ap(z/2)),ie=Math.min(s.ap($t),G+s.ap(z/2)),de=tr(V-1,Math.min(ie,G-s.ap(z/2)),ie),he=Math.atan(b/C),ye=Math.hypot(b,C);let Se=g;return Se+=s.at(I/ye/Math.max(.5,Math.cos(s.ap(z/2)))),Se+=V*s.at(Math.cos(he))/2,Se-=s.at(Math.max(1,de/J/c))/2,Se}}const ci=Pn(9.314,3);function an(P,c){const g=(c.roundZoom?Math.round:Math.floor)(P.zoom+s.at(P.tileSize/c.tileSize));return Math.max(0,g)}function En(P,c){const g=P.getCameraFrustum(),b=P.getClippingPlane(),C=P.screenPointToMercatorCoordinate(P.getCameraPoint()),I=s.a9.fromLngLat(P.center,P.elevation);C.z=I.z+Math.cos(P.pitchInRadians)*P.cameraToCenterDistance/P.worldSize;const z=P.getCoveringTilesDetailsProvider(),V=z.allowVariableZoom(P,c),G=an(P,c),J=c.minzoom||0,ie=c.maxzoom!==void 0?c.maxzoom:P.maxZoom,de=Math.min(Math.max(0,G),ie),he=Math.pow(2,de),ye=[he*C.x,he*C.y,0],Se=[he*I.x,he*I.y,0],Ie=Math.hypot(I.x-C.x,I.y-C.y),Le=Math.abs(I.z-C.z),De=Math.hypot(Ie,Le),Ve=We=>({zoom:0,x:0,y:0,wrap:We,fullyVisible:!1}),He=[],Fe=[];if(P.renderWorldCopies&&z.allowWorldCopies())for(let We=1;We<=3;We++)He.push(Ve(-We)),He.push(Ve(We));for(He.push(Ve(0));He.length>0;){const We=He.pop(),Je=We.x,Ze=We.y;let rt=We.fullyVisible;const xt={x:Je,y:Ze,z:We.zoom},ht=z.getTileBoundingVolume(xt,We.wrap,P.elevation,c);if(!rt){const rn=ji(g,ht,b);if(rn===0)continue;rt=rn===2}const mt=z.distanceToTile2d(C.x,C.y,xt,ht);let gt=G;V&&(gt=(c.calculateTileZoom||ci)(P.zoom+s.at(P.tileSize/c.tileSize),mt,Le,De,P.fov)),gt=(c.roundZoom?Math.round:Math.floor)(gt),gt=Math.max(0,gt);const tn=Math.min(gt,ie);if(We.wrap=z.getWrap(I,xt,We.wrap),We.zoom>=tn){if(We.zoom<J)continue;const rn=de-We.zoom,Bt=ye[0]-.5-(Je<<rn),hn=ye[1]-.5-(Ze<<rn),cr=c.reparseOverscaled?Math.max(We.zoom,gt):We.zoom;Fe.push({tileID:new s.a2(We.zoom===ie?cr:We.zoom,We.wrap,We.zoom,Je,Ze),distanceSq:s.au([Se[0]-.5-Je,Se[1]-.5-Ze]),tileDistanceToCamera:Math.sqrt(Bt*Bt+hn*hn)})}else for(let rn=0;rn<4;rn++)He.push({zoom:We.zoom+1,x:(Je<<1)+rn%2,y:(Ze<<1)+(rn>>1),wrap:We.wrap,fullyVisible:rt})}return Fe.sort(((We,Je)=>We.distanceSq-Je.distanceSq)).map((We=>We.tileID))}const Hn=s.aa.fromPoints([new s.P(0,0),new s.P(s.a5,s.a5)]);function nr(P){return P==="raster"||P==="image"||P==="video"}function ki(P,c,g,b,C,I,z){if(!c.hasData())return!1;const{tileID:V,fadingRole:G,fadingDirection:J,fadingParentID:ie}=c;if(G===Ke.Base&&J===at.Incoming&&ie)return g[ie.key]=ie,!0;const de=Math.max(V.overscaledZ-C,I);for(let he=V.overscaledZ-1;he>=de;he--){const ye=V.scaledTo(he),Se=P.getLoadedTile(ye);if(Se)return c.setCrossFadeLogic({fadingRole:Ke.Base,fadingDirection:at.Incoming,fadingParentID:Se.tileID,fadeEndTime:b+z}),Se.setCrossFadeLogic({fadingRole:Ke.Parent,fadingDirection:at.Departing,fadeEndTime:b+z}),g[ye.key]=ye,!0}return!1}function hs(P,c,g,b,C,I){if(!c.hasData())return!1;const z=c.tileID.children(C);let V=Xt(P,c,z,g,b,C,I);if(V)return!0;for(const G of z)Xt(P,c,G.children(C),g,b,C,I)&&(V=!0);return V}function Xt(P,c,g,b,C,I,z){if(g[0].overscaledZ>=I)return!1;let V=!1;for(const G of g){const J=P.getLoadedTile(G);if(!J)continue;const{fadingRole:ie,fadingDirection:de,fadingParentID:he}=J;ie===Ke.Base&&de===at.Departing&&he||(J.setCrossFadeLogic({fadingRole:Ke.Base,fadingDirection:at.Departing,fadingParentID:c.tileID,fadeEndTime:C+z}),c.setCrossFadeLogic({fadingRole:Ke.Parent,fadingDirection:at.Incoming,fadeEndTime:C+z})),b[G.key]=G,V=!0}return V}function Oo(P,c,g,b){const C=P.tileID;return!!P.selfFading||!P.hasData()&&!!c.has(C)&&(P.setSelfFadeLogic(g+b),!0)}function Jo(P,c){var g;P.needsHillshadePrepare=!0,P.needsTerrainPrepare=!0;let b=c.tileID.canonical.x-P.tileID.canonical.x;const C=c.tileID.canonical.y-P.tileID.canonical.y,I=Math.pow(2,P.tileID.canonical.z),z=c.tileID.key;b===0&&C===0||Math.abs(C)>1||(Math.abs(b)>1&&(Math.abs(b+I)===1?b+=I:Math.abs(b-I)===1&&(b-=I)),c.dem&&P.dem&&(P.dem.backfillBorder(c.dem,b,C),!((g=P.neighboringTiles)===null||g===void 0)&&g[z]&&(P.neighboringTiles[z].backfilled=!0)))}class ca{constructor(){this._tiles={}}handleWrapJump(c){const g={};for(const b in this._tiles){const C=this._tiles[b];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+c),g[C.tileID.key]=C}this._tiles=g}setFeatureState(c,g){for(const b in this._tiles)this._tiles[b].setFeatureState(c,g)}getAllTiles(){return Object.values(this._tiles)}getAllIds(c=!1){return c?Object.values(this._tiles).map((g=>g.tileID)).sort(s.aw).map((g=>g.key)):Object.keys(this._tiles)}getTileById(c){return this._tiles[c]}setTile(c,g){this._tiles[c]=g}deleteTileById(c){delete this._tiles[c]}getLoadedTile(c){const g=this.getTileById(c.key);return g?.hasData()?g:null}isIdRenderable(c,g=!1){var b;return(b=this.getTileById(c))===null||b===void 0?void 0:b.isRenderable(g)}getRenderableIds(c=0,g){const b=[];for(const C of this.getAllIds())this.isIdRenderable(C,g)&&b.push(this.getTileById(C));return g?b.sort(((C,I)=>{const z=C.tileID,V=I.tileID,G=new s.P(z.canonical.x,z.canonical.y)._rotate(-c),J=new s.P(V.canonical.x,V.canonical.y)._rotate(-c);return z.overscaledZ-V.overscaledZ||J.y-G.y||J.x-G.x})).map((C=>C.tileID.key)):b.map((C=>C.tileID)).sort(s.aw).map((C=>C.key))}}class Si extends s.E{constructor(c,g,b){super(),this.id=c,this.dispatcher=b,this.on("data",(C=>this._dataHandler(C))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((C,I,z,V)=>{const G=new(_e(I.type))(C,I,z,V);if(G.id!==C)throw new Error(`Expected Source id to be ${C} instead of ${G.id}`);return G})(c,g,b,this),this._inViewTiles=new ca,this._outOfViewCache=new s.ax(0,(C=>this._unloadTile(C))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new st,this._didEmitContent=!1,this._updated=!1}onAdd(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._maxTileCacheZoomLevels=c?c._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(c)}onRemove(c){for(const g of this._inViewTiles.getAllTiles())g.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(c),this._inViewTiles=new ca}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const c of this._inViewTiles.getAllTiles())if(c.state!=="loaded"&&c.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(c,g,b){return s._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(c),this._tileLoaded(c,g,b)}catch(C){c.state="errored",C.status!==404?this._source.fire(new s.k(C,{tile:c})):this.update(this.transform,this.terrain)}}))}_unloadTile(c){this._source.unloadTile&&this._source.unloadTile(c)}_abortTile(c){this._source.abortTile&&this._source.abortTile(c),this._source.fire(new s.l("dataabort",{tile:c,coord:c.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(c){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const g of this._inViewTiles.getAllTiles())g.upload(c),g.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(c){var g;return this._inViewTiles.getRenderableIds((g=this.transform)===null||g===void 0?void 0:g.bearingInRadians,c)}hasRenderableParent(c){const g=c.overscaledZ-1;if(g>=this._source.minzoom){const b=this.getLoadedTile(c.scaledTo(g));if(b)return this._inViewTiles.isIdRenderable(b.tileID.key)}return!1}reload(c,g=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const b of this._inViewTiles.getAllIds()){const C=this._inViewTiles.getTileById(b);g&&!this._source.shouldReloadTile(C,g)||(c?this._reloadTile(b,"expired"):C.state!=="errored"&&this._reloadTile(b,"reloading"))}}}_reloadTile(c,g){return s._(this,void 0,void 0,(function*(){const b=this._inViewTiles.getTileById(c);b&&(b.state!=="loading"&&(b.state=g),yield this._loadTile(b,c,g))}))}_tileLoaded(c,g,b){c.timeAdded=A(),c.selfFading&&(c.fadeEndTime=c.timeAdded+this._rasterFadeDuration),b==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(g,c),this.getSource().type==="raster-dem"&&c.dem&&(function(C,I){var z,V;const G=I.getRenderableIds();for(const J of G){if(!C.neighboringTiles||!C.neighboringTiles[J])continue;const ie=I.getTileById(J);C.neighboringTiles[J].backfilled||Jo(C,ie),!((V=(z=ie.neighboringTiles)===null||z===void 0?void 0:z[C.tileID.key])===null||V===void 0)&&V.backfilled||Jo(ie,C)}})(c,this._inViewTiles),this._state.initializeTileState(c,this.map?this.map.painter:null),c.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:c,coord:c.tileID}))}getTile(c){return this.getTileByID(c.key)}getTileByID(c){return this._inViewTiles.getTileById(c)}_retainLoadedChildren(c,g){const b=this._getLoadedDescendents(g),C=new Set;for(const I of g){const z=b[I.key];if(!z?.length){C.add(I);continue}const V=I.overscaledZ+Si.maxOverzooming,G=z.filter((de=>de.tileID.overscaledZ<=V));if(!G.length){C.add(I);continue}const J=Math.min(...G.map((de=>de.tileID.overscaledZ))),ie=G.filter((de=>de.tileID.overscaledZ===J)).map((de=>de.tileID));for(const de of ie)c[de.key]=de;this._areDescendentsComplete(ie,J,I.overscaledZ)||C.add(I)}return C}_getLoadedDescendents(c){var g;const b={};for(const C of this._inViewTiles.getAllTiles().filter((I=>I.hasData())))for(const I of c)C.tileID.isChildOf(I)&&(b[g=I.key]||(b[g]=[])).push(C);return b}_areDescendentsComplete(c,g,b){return c.length===1&&c[0].isOverscaled()?c[0].overscaledZ===g:Math.pow(4,g-b)===c.length}getLoadedTile(c){return this._inViewTiles.getLoadedTile(c)}updateCacheSize(c){const g=Math.ceil(c.width/this._source.tileSize)+1,b=Math.ceil(c.height/this._source.tileSize)+1,C=Math.floor(g*b*(this._maxTileCacheZoomLevels===null?s.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),I=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,C):C;this._outOfViewCache.setMaxSize(I)}handleWrapJump(c){const g=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);this._prevLng=c,g&&(this._inViewTiles.handleWrapJump(g),this._resetTileReloadTimers())}update(c,g){if(!this._sourceLoaded||this._paused)return;let b;this.transform=c,this.terrain=g,this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?b=c.getVisibleUnwrappedCoordinates(this._source.tileID).map((G=>new s.a2(G.canonical.z,G.wrap,G.canonical.z,G.canonical.x,G.canonical.y))):(b=En(c,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?c.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:g,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(b=b.filter((G=>this._source.hasTile(G))))):b=[],this.usedForTerrain&&(b=this._addTerrainIdealTiles(b));const C=b.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const I=an(c,this._source),z=this._updateRetainedTiles(b,I),V=nr(this._source.type);V&&this._rasterFadeDuration>0&&!g&&(function(G,J,ie,de,he,ye,Se){const Ie=A(),Le=s.av(J);for(const De of J){const Ve=G.getTileById(De.key);Ve.fadingDirection!==at.Departing&&Ve.fadeOpacity!==0||Ve.resetFadeLogic(),ki(G,Ve,ie,Ie,de,he,Se)||hs(G,Ve,ie,Ie,ye,Se)||Oo(Ve,Le,Ie,Se)||Ve.resetFadeLogic()}})(this._inViewTiles,b,z,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),V?this._cleanUpRasterTiles(z):this._cleanUpVectorTiles(z)}_cleanUpRasterTiles(c){for(const g of this._inViewTiles.getAllIds())c[g]||this._removeTile(g)}_cleanUpVectorTiles(c){for(const g of this._inViewTiles.getAllIds()){const b=this._inViewTiles.getTileById(g);c[g]?b.clearSymbolFadeHold():b.hasSymbolBuckets?b.holdingForSymbolFade()?b.symbolFadeFinished()&&this._removeTile(g):b.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(g)}}_addTerrainIdealTiles(c){const g=[];for(const b of c)if(b.canonical.z>this._source.minzoom){const C=b.scaledTo(b.canonical.z-1);g.push(C);const I=b.scaledTo(Math.max(this._source.minzoom,Math.min(b.canonical.z,5)));g.push(I)}return c.concat(g)}releaseSymbolFadeTiles(){for(const c of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(c).holdingForSymbolFade()&&this._removeTile(c)}_updateRetainedTiles(c,g){var b;const C=new Set;for(const J of c)this._addTile(J).hasData()||C.add(J);const I=c.reduce(((J,ie)=>(J[ie.key]=ie,J)),{}),z=this._retainLoadedChildren(I,C),V={},G=Math.max(g-Si.maxUnderzooming,this._source.minzoom);for(const J of z){let ie=this._inViewTiles.getTileById(J.key),de=ie?.wasRequested();for(let he=J.overscaledZ-1;he>=G;--he){const ye=J.scaledTo(he);if(V[ye.key])break;if(V[ye.key]=!0,ie=this.getTile(ye),!ie&&de&&(ie=this._addTile(ye)),ie){const Se=ie.hasData();if((Se||!(!((b=this.map)===null||b===void 0)&&b.cancelPendingTileRequestsWhileZooming)||de)&&(I[ye.key]=ye),de=ie.wasRequested(),Se)break}}}return I}_addTile(c){let g=this._inViewTiles.getTileById(c.key);if(g)return g;g=this._outOfViewCache.getAndRemove(c),g&&(g.resetFadeLogic(),this._setTileReloadTimer(c.key,g),g.tileID=c,this._state.initializeTileState(g,this.map?this.map.painter:null));const b=g;return g||(g=new St(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(g,c.key,g.state)),g.uses++,this._inViewTiles.setTile(c.key,g),b||this._source.fire(new s.l("dataloading",{tile:g,coord:g.tileID,dataType:"source"})),g}_setTileReloadTimer(c,g){this._clearTileReloadTimer(c);const b=g.getExpiryTimeout();b&&(this._timers[c]=setTimeout((()=>{this._reloadTile(c,"expired"),delete this._timers[c]}),b))}_clearTileReloadTimer(c){const g=this._timers[c];g&&(clearTimeout(g),delete this._timers[c])}_resetTileReloadTimers(){for(const c in this._timers)clearTimeout(this._timers[c]),delete this._timers[c];for(const c of this._inViewTiles.getAllIds()){const g=this._inViewTiles.getTileById(c);this._setTileReloadTimer(c,g)}}refreshTiles(c){for(const g of this._inViewTiles.getAllIds()){const b=this._inViewTiles.getTileById(g);(this._inViewTiles.isIdRenderable(g)||b.state=="errored")&&c.some((C=>C.equals(b.tileID.canonical)))&&this._reloadTile(g,"expired")}}_removeTile(c){const g=this._inViewTiles.getTileById(c);g&&(g.uses--,this._inViewTiles.deleteTileById(c),this._clearTileReloadTimer(c),g.uses>0||(g.hasData()&&g.state!=="reloading"?this._outOfViewCache.add(g.tileID,g,g.getExpiryTimeout()):(g.aborted=!0,this._abortTile(g),this._unloadTile(g))))}_dataHandler(c){c.dataType==="source"&&(c.sourceDataType!=="metadata"?c.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(c.sourceDataChanged,c.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const c of this._inViewTiles.getAllIds())this._removeTile(c);this._outOfViewCache.reset()}tilesIn(c,g,b){const C=[],I=this.transform;if(!I)return C;const z=I.getCoveringTilesDetailsProvider().allowWorldCopies(),V=b?I.getCameraQueryGeometry(c):c,G=ye=>I.screenPointToMercatorCoordinate(ye,this.terrain),J=this.transformBbox(c,G,!z),ie=this.transformBbox(V,G,!z),de=this.getIds(),he=s.aa.fromPoints(ie);for(let ye=0;ye<de.length;ye++){const Se=this._inViewTiles.getTileById(de[ye]);if(Se.holdingForSymbolFade())continue;const Ie=z?[Se.tileID]:[Se.tileID.unwrapTo(-1),Se.tileID.unwrapTo(0)],Le=Math.pow(2,I.zoom-Se.tileID.overscaledZ),De=g*Se.queryPadding*s.a5/Se.tileSize/Le;for(const Ve of Ie){const He=he.map((Fe=>Ve.getTilePoint(new s.a9(Fe.x,Fe.y))));if(He.expandBy(De),He.intersects(Hn)){const Fe=J.map((Je=>Ve.getTilePoint(Je))),We=ie.map((Je=>Ve.getTilePoint(Je)));C.push({tile:Se,tileID:z?Ve:Ve.unwrapTo(0),queryGeometry:Fe,cameraQueryGeometry:We,scale:Le})}}}return C}transformBbox(c,g,b){let C=c.map(g);if(b){const I=s.aa.fromPoints(c);I.shrinkBy(.001*Math.min(I.width(),I.height()));const z=I.map(g);s.aa.fromPoints(C).covers(z)||(C=C.map((V=>V.x>.5?new s.a9(V.x-1,V.y,V.z):V)))}return C}getVisibleCoordinates(c){const g=this.getRenderableIds(c).map((b=>this._inViewTiles.getTileById(b).tileID));return this.transform&&this.transform.populateCache(g),g}hasTransition(){return!!this._source.hasTransition()||!(!nr(this._source.type)||!(function(c,g){if(g<=0)return!1;const b=A();for(const C of c.getAllTiles())if(C.fadeEndTime>=b)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(c){this._rasterFadeDuration=c}setFeatureState(c,g,b){this._state.updateState(c=c||s.ai,g,b)}removeFeatureState(c,g,b){this._state.removeFeatureState(c=c||s.ai,g,b)}getFeatureState(c,g){return this._state.getState(c=c||s.ai,g)}setDependencies(c,g,b){const C=this._inViewTiles.getTileById(c);C&&C.setDependencies(g,b)}reloadTilesForDependencies(c,g){for(const b of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(b).hasDependency(c,g)&&this._reloadTile(b,"reloading");this._outOfViewCache.filter((b=>!b.hasDependency(c,g)))}areTilesLoaded(){for(const c of this._inViewTiles.getAllTiles())if(c.state!=="loaded"&&c.state!=="errored")return!1;return!0}}Si.maxUnderzooming=10,Si.maxOverzooming=3;class on{constructor(c,g){this.reset(c,g)}reset(c,g){this.points=c||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(g||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=s.an(c,0,1);let g=1,b=this._distances[g];const C=c*this.paddedLength+this.padding;for(;b<C&&g<this._distances.length;)b=this._distances[++g];const I=g-1,z=this._distances[I],V=b-z,G=V>0?(C-z)/V:0;return this.points[I].mult(1-G).add(this.points[g].mult(G))}}function dr(P,c){let g=!0;return P==="always"||P!=="never"&&c!=="never"||(g=!1),g}class vr{constructor(c,g,b){const C=this.boxCells=[],I=this.circleCells=[];this.xCellCount=Math.ceil(c/b),this.yCellCount=Math.ceil(g/b);for(let z=0;z<this.xCellCount*this.yCellCount;z++)C.push([]),I.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=g,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/g,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,g,b,C,I){this._forEachCell(g,b,C,I,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(C),this.bboxes.push(I)}insertCircle(c,g,b,C){this._forEachCell(g-C,b-C,g+C,b+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(g),this.circles.push(b),this.circles.push(C)}_insertBoxCell(c,g,b,C,I,z){this.boxCells[I].push(z)}_insertCircleCell(c,g,b,C,I,z){this.circleCells[I].push(z)}_query(c,g,b,C,I,z,V){if(b<0||c>this.width||C<0||g>this.height)return[];const G=[];if(c<=0&&g<=0&&this.width<=b&&this.height<=C){if(I)return[{key:null,x1:c,y1:g,x2:b,y2:C}];for(let J=0;J<this.boxKeys.length;J++)G.push({key:this.boxKeys[J],x1:this.bboxes[4*J],y1:this.bboxes[4*J+1],x2:this.bboxes[4*J+2],y2:this.bboxes[4*J+3]});for(let J=0;J<this.circleKeys.length;J++){const ie=this.circles[3*J],de=this.circles[3*J+1],he=this.circles[3*J+2];G.push({key:this.circleKeys[J],x1:ie-he,y1:de-he,x2:ie+he,y2:de+he})}}else this._forEachCell(c,g,b,C,this._queryCell,G,{hitTest:I,overlapMode:z,seenUids:{box:{},circle:{}}},V);return G}query(c,g,b,C){return this._query(c,g,b,C,!1,null)}hitTest(c,g,b,C,I,z){return this._query(c,g,b,C,!0,I,z).length>0}hitTestCircle(c,g,b,C,I){const z=c-b,V=c+b,G=g-b,J=g+b;if(V<0||z>this.width||J<0||G>this.height)return!1;const ie=[];return this._forEachCell(z,G,V,J,this._queryCellCircle,ie,{hitTest:!0,overlapMode:C,circle:{x:c,y:g,radius:b},seenUids:{box:{},circle:{}}},I),ie.length>0}_queryCell(c,g,b,C,I,z,V,G){const{seenUids:J,hitTest:ie,overlapMode:de}=V,he=this.boxCells[I];if(he!==null){const Se=this.bboxes;for(const Ie of he)if(!J.box[Ie]){J.box[Ie]=!0;const Le=4*Ie,De=this.boxKeys[Ie];if(c<=Se[Le+2]&&g<=Se[Le+3]&&b>=Se[Le+0]&&C>=Se[Le+1]&&(!G||G(De))&&(!ie||!dr(de,De.overlapMode))&&(z.push({key:De,x1:Se[Le],y1:Se[Le+1],x2:Se[Le+2],y2:Se[Le+3]}),ie))return!0}}const ye=this.circleCells[I];if(ye!==null){const Se=this.circles;for(const Ie of ye)if(!J.circle[Ie]){J.circle[Ie]=!0;const Le=3*Ie,De=this.circleKeys[Ie];if(this._circleAndRectCollide(Se[Le],Se[Le+1],Se[Le+2],c,g,b,C)&&(!G||G(De))&&(!ie||!dr(de,De.overlapMode))){const Ve=Se[Le],He=Se[Le+1],Fe=Se[Le+2];if(z.push({key:De,x1:Ve-Fe,y1:He-Fe,x2:Ve+Fe,y2:He+Fe}),ie)return!0}}}return!1}_queryCellCircle(c,g,b,C,I,z,V,G){const{circle:J,seenUids:ie,overlapMode:de}=V,he=this.boxCells[I];if(he!==null){const Se=this.bboxes;for(const Ie of he)if(!ie.box[Ie]){ie.box[Ie]=!0;const Le=4*Ie,De=this.boxKeys[Ie];if(this._circleAndRectCollide(J.x,J.y,J.radius,Se[Le+0],Se[Le+1],Se[Le+2],Se[Le+3])&&(!G||G(De))&&!dr(de,De.overlapMode))return z.push(!0),!0}}const ye=this.circleCells[I];if(ye!==null){const Se=this.circles;for(const Ie of ye)if(!ie.circle[Ie]){ie.circle[Ie]=!0;const Le=3*Ie,De=this.circleKeys[Ie];if(this._circlesCollide(Se[Le],Se[Le+1],Se[Le+2],J.x,J.y,J.radius)&&(!G||G(De))&&!dr(de,De.overlapMode))return z.push(!0),!0}}}_forEachCell(c,g,b,C,I,z,V,G){const J=this._convertToXCellCoord(c),ie=this._convertToYCellCoord(g),de=this._convertToXCellCoord(b),he=this._convertToYCellCoord(C);for(let ye=J;ye<=de;ye++)for(let Se=ie;Se<=he;Se++)if(I.call(this,c,g,b,C,this.xCellCount*Se+ye,z,V,G))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,g,b,C,I,z){const V=C-c,G=I-g,J=b+z;return J*J>V*V+G*G}_circleAndRectCollide(c,g,b,C,I,z,V){const G=(z-C)/2,J=Math.abs(c-(C+G));if(J>G+b)return!1;const ie=(V-I)/2,de=Math.abs(g-(I+ie));if(de>ie+b)return!1;if(J<=G||de<=ie)return!0;const he=J-G,ye=de-ie;return he*he+ye*ye<=b*b}}function ja(P,c,g){const b=s.N();if(!P){const{vecSouth:de,vecEast:he}=Tc(c),ye=d();ye[0]=he[0],ye[1]=he[1],ye[2]=de[0],ye[3]=de[1],C=ye,(ie=(z=(I=ye)[0])*(J=I[3])-(G=I[2])*(V=I[1]))&&(C[0]=J*(ie=1/ie),C[1]=-V*ie,C[2]=-G*ie,C[3]=z*ie),b[0]=ye[0],b[1]=ye[1],b[4]=ye[2],b[5]=ye[3]}var C,I,z,V,G,J,ie;return s.Q(b,b,[1/g,1/g,1]),b}function Oy(P,c,g,b){if(P){const C=s.N();if(!c){const{vecSouth:I,vecEast:z}=Tc(g);C[0]=z[0],C[1]=z[1],C[4]=I[0],C[5]=I[1]}return s.Q(C,C,[b,b,1]),C}return g.pixelsToClipSpaceMatrix}function Tc(P){const c=Math.cos(P.rollInRadians),g=Math.sin(P.rollInRadians),b=Math.cos(P.pitchInRadians),C=Math.cos(P.bearingInRadians),I=Math.sin(P.bearingInRadians),z=s.aC();z[0]=-C*b*g-I*c,z[1]=-I*b*g+C*c;const V=s.aD(z);V<1e-9?s.aE(z):s.aF(z,z,1/V);const G=s.aC();G[0]=C*b*c-I*g,G[1]=I*b*c+C*g;const J=s.aD(G);return J<1e-9?s.aE(G):s.aF(G,G,1/J),{vecEast:G,vecSouth:z}}function hr(P,c,g,b){let C;b?(C=[P,c,b(P,c),1],s.aH(C,C,g)):(C=[P,c,0,1],gl(C,C,g));const I=C[3];return{point:new s.P(C[0]/I,C[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}function kd(P,c){return .5+P/c*.5}function kc(P,c){return P.x>=-c[0]&&P.x<=c[0]&&P.y>=-c[1]&&P.y<=c[1]}function wu(P,c,g,b,C,I,z,V,G,J,ie,de,he){const ye=g?P.textSizeData:P.iconSizeData,Se=s.ay(ye,c.transform.zoom),Ie=[256/c.width*2+1,256/c.height*2+1],Le=g?P.text.dynamicLayoutVertexArray:P.icon.dynamicLayoutVertexArray;Le.clear();const De=P.lineVertexArray,Ve=g?P.text.placedSymbolArray:P.icon.placedSymbolArray,He=c.transform.width/c.transform.height;let Fe=!1;for(let We=0;We<Ve.length;We++){const Je=Ve.get(We);if(Je.hidden||Je.writingMode===s.az.vertical&&!Fe){Pc(Je.numGlyphs,Le);continue}Fe=!1;const Ze=new s.P(Je.anchorX,Je.anchorY),rt={getElevation:he,pitchedLabelPlaneMatrix:b,lineVertexArray:De,pitchWithMap:I,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:c.transform,tileAnchorPoint:Ze,unwrappedTileID:G,width:J,height:ie,translation:de},xt=Hf(Je.anchorX,Je.anchorY,rt);if(!kc(xt.point,Ie)){Pc(Je.numGlyphs,Le);continue}const ht=kd(c.transform.cameraToCenterDistance,xt.signedDistanceFromCamera),mt=s.aA(ye,Se,Je),gt=I?mt*c.transform.getPitchedTextCorrection(Je.anchorX,Je.anchorY,G)/ht:mt*ht,tn=lo({projectionContext:rt,pitchedLabelPlaneMatrixInverse:C,symbol:Je,fontSize:gt,flip:!1,keepUpright:z,glyphOffsetArray:P.glyphOffsetArray,dynamicLayoutVertexArray:Le,aspectRatio:He,rotateToLine:V});Fe=tn.useVertical,(tn.notEnoughRoom||Fe||tn.needsFlipping&&lo({projectionContext:rt,pitchedLabelPlaneMatrixInverse:C,symbol:Je,fontSize:gt,flip:!0,keepUpright:z,glyphOffsetArray:P.glyphOffsetArray,dynamicLayoutVertexArray:Le,aspectRatio:He,rotateToLine:V}).notEnoughRoom)&&Pc(Je.numGlyphs,Le)}g?P.text.dynamicLayoutVertexBuffer.updateData(Le):P.icon.dynamicLayoutVertexBuffer.updateData(Le)}function Ec(P,c,g,b,C,I,z,V){const G=I.glyphStartIndex+I.numGlyphs,J=I.lineStartIndex,ie=I.lineStartIndex+I.lineLength,de=c.getoffsetX(I.glyphStartIndex),he=c.getoffsetX(G-1),ye=Xl(P*de,g,b,C,I.segment,J,ie,V,z);if(!ye)return null;const Se=Xl(P*he,g,b,C,I.segment,J,ie,V,z);return Se?V.projectionCache.anyProjectionOccluded?null:{first:ye,last:Se}:null}function Ac(P,c,g,b){return P===s.az.horizontal&&Math.abs(g.y-c.y)>Math.abs(g.x-c.x)*b?{useVertical:!0}:(P===s.az.vertical?c.y<g.y:c.x>g.x)?{needsFlipping:!0}:null}function lo(P){const{projectionContext:c,pitchedLabelPlaneMatrixInverse:g,symbol:b,fontSize:C,flip:I,keepUpright:z,glyphOffsetArray:V,dynamicLayoutVertexArray:G,aspectRatio:J,rotateToLine:ie}=P,de=C/24,he=b.lineOffsetX*de,ye=b.lineOffsetY*de;let Se;if(b.numGlyphs>1){const Ie=b.glyphStartIndex+b.numGlyphs,Le=b.lineStartIndex,De=b.lineStartIndex+b.lineLength,Ve=Ec(de,V,he,ye,I,b,ie,c);if(!Ve)return{notEnoughRoom:!0};const He=Ou(Ve.first.point.x,Ve.first.point.y,c,g),Fe=Ou(Ve.last.point.x,Ve.last.point.y,c,g);if(z&&!I){const We=Ac(b.writingMode,He,Fe,J);if(We)return We}Se=[Ve.first];for(let We=b.glyphStartIndex+1;We<Ie-1;We++){const Je=Xl(de*V.getoffsetX(We),he,ye,I,b.segment,Le,De,c,ie);if(!Je)return{notEnoughRoom:!0};Se.push(Je)}Se.push(Ve.last)}else{if(z&&!I){const Le=zr(c.tileAnchorPoint.x,c.tileAnchorPoint.y,c).point,De=b.lineStartIndex+b.segment+1,Ve=new s.P(c.lineVertexArray.getx(De),c.lineVertexArray.gety(De)),He=zr(Ve.x,Ve.y,c),Fe=He.signedDistanceFromCamera>0?He.point:Wf(c.tileAnchorPoint,Ve,Le,1,c),We=Ou(Le.x,Le.y,c,g),Je=Ou(Fe.x,Fe.y,c,g),Ze=Ac(b.writingMode,We,Je,J);if(Ze)return Ze}const Ie=Xl(de*V.getoffsetX(b.glyphStartIndex),he,ye,I,b.segment,b.lineStartIndex,b.lineStartIndex+b.lineLength,c,ie);if(!Ie||c.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Se=[Ie]}for(const Ie of Se)s.aG(G,Ie.point,Ie.angle);return{}}function Wf(P,c,g,b,C){const I=P.add(P.sub(c)._unit()),z=zr(I.x,I.y,C).point,V=g.sub(z);return g.add(V._mult(b/V.mag()))}function js(P,c,g){const b=c.projectionCache;if(b.projections[P])return b.projections[P];const C=new s.P(c.lineVertexArray.getx(P),c.lineVertexArray.gety(P)),I=zr(C.x,C.y,c);if(I.signedDistanceFromCamera>0)return b.projections[P]=I.point,b.anyProjectionOccluded=b.anyProjectionOccluded||I.isOccluded,I.point;const z=P-g.direction;return Wf(g.distanceFromAnchor===0?c.tileAnchorPoint:new s.P(c.lineVertexArray.getx(z),c.lineVertexArray.gety(z)),C,g.previousVertex,g.absOffsetX-g.distanceFromAnchor+1,c)}function zr(P,c,g){const b=P+g.translation[0],C=c+g.translation[1];let I;return g.pitchWithMap?(I=hr(b,C,g.pitchedLabelPlaneMatrix,g.getElevation),I.isOccluded=!1):(I=g.transform.projectTileCoordinates(b,C,g.unwrappedTileID,g.getElevation),I.point.x=(.5*I.point.x+.5)*g.width,I.point.y=(.5*-I.point.y+.5)*g.height),I}function Ou(P,c,g,b){if(g.pitchWithMap){const C=[P,c,0,1];return s.aH(C,C,b),g.transform.projectTileCoordinates(C[0]/C[3],C[1]/C[3],g.unwrappedTileID,g.getElevation).point}return{x:P/g.width*2-1,y:1-c/g.height*2}}function Hf(P,c,g){return g.transform.projectTileCoordinates(P,c,g.unwrappedTileID,g.getElevation)}function Gf(P,c,g){return P._unit()._perp()._mult(c*g)}function _h(P,c,g,b,C,I,z,V,G){if(V.projectionCache.offsets[P])return V.projectionCache.offsets[P];const J=g.add(c);if(P+G.direction<b||P+G.direction>=C)return V.projectionCache.offsets[P]=J,J;const ie=js(P+G.direction,V,G),de=Gf(ie.sub(g),z,G.direction),he=g.add(de),ye=ie.add(de);return V.projectionCache.offsets[P]=s.aI(I,J,he,ye)||J,V.projectionCache.offsets[P]}function Xl(P,c,g,b,C,I,z,V,G){const J=b?P-c:P+c;let ie=J>0?1:-1,de=0;b&&(ie*=-1,de=Math.PI),ie<0&&(de+=Math.PI);let he,ye=ie>0?I+C:I+C+1;V.projectionCache.cachedAnchorPoint?he=V.projectionCache.cachedAnchorPoint:(he=zr(V.tileAnchorPoint.x,V.tileAnchorPoint.y,V).point,V.projectionCache.cachedAnchorPoint=he);let Se,Ie,Le=he,De=he,Ve=0,He=0;const Fe=Math.abs(J),We=[];let Je;for(;Ve+He<=Fe;){if(ye+=ie,ye<I||ye>=z)return null;Ve+=He,De=Le,Ie=Se;const xt={absOffsetX:Fe,direction:ie,distanceFromAnchor:Ve,previousVertex:De};if(Le=js(ye,V,xt),g===0)We.push(De),Je=Le.sub(De);else{let ht;const mt=Le.sub(De);ht=mt.mag()===0?Gf(js(ye+ie,V,xt).sub(Le),g,ie):Gf(mt,g,ie),Ie||(Ie=De.add(ht)),Se=_h(ye,ht,Le,I,z,Ie,g,V,xt),We.push(Ie),Je=Se.sub(Ie)}He=Je.mag()}const Ze=Je._mult((Fe-Ve)/He)._add(Ie||De),rt=de+Math.atan2(Le.y-De.y,Le.x-De.x);return We.push(Ze),{point:Ze,angle:G?rt:0,path:We}}const Am=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Pc(P,c){for(let g=0;g<P;g++){const b=c.length;c.resize(b+4),c.float32.set(Am,3*b)}}function gl(P,c,g){const b=c[0],C=c[1];return P[0]=g[0]*b+g[4]*C+g[12],P[1]=g[1]*b+g[5]*C+g[13],P[3]=g[3]*b+g[7]*C+g[15],P}const Zr=100;class bv{constructor(c,g=new vr(c.width+200,c.height+200,25),b=new vr(c.width+200,c.height+200,25)){this.transform=c,this.grid=g,this.ignoredGrid=b,this.pitchFactor=Math.cos(c.pitch*Math.PI/180)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+Zr,this.screenBottomBoundary=c.height+Zr,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(c,g,b,C,I,z,V,G,J,ie,de,he){const ye=this.projectAndGetPerspectiveRatio(c.anchorPointX+G[0],c.anchorPointY+G[1],I,ie,he),Se=b*ye.perspectiveRatio;let Ie;if(z||V)Ie=this._projectCollisionBox(c,Se,C,I,z,V,G,ye,ie,de,he);else{const Je=ye.x+(de?de.x*Se:0),Ze=ye.y+(de?de.y*Se:0);Ie={allPointsOccluded:!1,box:[Je+c.x1*Se,Ze+c.y1*Se,Je+c.x2*Se,Ze+c.y2*Se]}}const[Le,De,Ve,He]=Ie.box,Fe=z?Ie.allPointsOccluded:ye.isOccluded;let We=Fe;return We||(We=ye.perspectiveRatio<this.perspectiveRatioCutoff),We||(We=!this.isInsideGrid(Le,De,Ve,He)),We||g!=="always"&&this.grid.hitTest(Le,De,Ve,He,g,J)?{box:[Le,De,Ve,He],placeable:!1,offscreen:!1,occluded:Fe}:{box:[Le,De,Ve,He],placeable:!0,offscreen:this.isOffscreen(Le,De,Ve,He),occluded:Fe}}placeCollisionCircles(c,g,b,C,I,z,V,G,J,ie,de,he,ye,Se){const Ie=[],Le=new s.P(g.anchorX,g.anchorY),De=this.getPerspectiveRatio(Le.x,Le.y,z,Se),Ve=(J?I*this.transform.getPitchedTextCorrection(g.anchorX,g.anchorY,z)/De:I*De)/s.aM,He={getElevation:Se,pitchedLabelPlaneMatrix:V,lineVertexArray:b,pitchWithMap:J,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Le,unwrappedTileID:z,width:this.transform.width,height:this.transform.height,translation:ye},Fe=Ec(Ve,C,g.lineOffsetX*Ve,g.lineOffsetY*Ve,!1,g,!1,He);let We=!1,Je=!1,Ze=!0;if(Fe){const rt=.5*de*De+he,xt=new s.P(-100,-100),ht=new s.P(this.screenRightBoundary,this.screenBottomBoundary),mt=new on,gt=Fe.first,tn=Fe.last;let rn=[];for(let cr=gt.path.length-1;cr>=1;cr--)rn.push(gt.path[cr]);for(let cr=1;cr<tn.path.length;cr++)rn.push(tn.path[cr]);const Bt=2.5*rt;if(J){const cr=this.projectPathToScreenSpace(rn,He);rn=cr.some((ti=>ti.signedDistanceFromCamera<=0))?[]:cr.map((ti=>ti.point))}let hn=[];if(rn.length>0){const cr=rn[0].clone(),ti=rn[0].clone();for(let Ci=1;Ci<rn.length;Ci++)cr.x=Math.min(cr.x,rn[Ci].x),cr.y=Math.min(cr.y,rn[Ci].y),ti.x=Math.max(ti.x,rn[Ci].x),ti.y=Math.max(ti.y,rn[Ci].y);hn=cr.x>=xt.x&&ti.x<=ht.x&&cr.y>=xt.y&&ti.y<=ht.y?[rn]:ti.x<xt.x||cr.x>ht.x||ti.y<xt.y||cr.y>ht.y?[]:s.aJ([rn],xt.x,xt.y,ht.x,ht.y)}for(const cr of hn){mt.reset(cr,.25*rt);let ti=0;ti=mt.length<=.5*rt?1:Math.ceil(mt.paddedLength/Bt)+1;for(let Ci=0;Ci<ti;Ci++){const xi=Ci/Math.max(ti-1,1),$i=mt.lerp(xi),hi=$i.x+Zr,to=$i.y+Zr;Ie.push(hi,to,rt,0);const zi=hi-rt,ps=to-rt,fo=hi+rt,po=to+rt;if(Ze=Ze&&this.isOffscreen(zi,ps,fo,po),Je=Je||this.isInsideGrid(zi,ps,fo,po),c!=="always"&&this.grid.hitTestCircle(hi,to,rt,c,ie)&&(We=!0,!G))return{circles:[],offscreen:!1,collisionDetected:We}}}}return{circles:!G&&We||!Je||De<this.perspectiveRatioCutoff?[]:Ie,offscreen:Ze,collisionDetected:We}}projectPathToScreenSpace(c,g){const b=(function(C,I){const z=s.N();return s.aB(z,I.pitchedLabelPlaneMatrix),C.map((V=>{const G=hr(V.x,V.y,z,I.getElevation),J=I.transform.projectTileCoordinates(G.point.x,G.point.y,I.unwrappedTileID,I.getElevation);return J.point.x=(.5*J.point.x+.5)*I.width,J.point.y=(.5*-J.point.y+.5)*I.height,J}))})(c,g);return(function(C){let I=0,z=0,V=0,G=0;for(let J=0;J<C.length;J++)C[J].isOccluded?(V=J+1,G=0):(G++,G>z&&(z=G,I=V));return C.slice(I,I+z)})(b)}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const g=[],b=new s.aa;for(const de of c){const he=new s.P(de.x+Zr,de.y+Zr);b.extend(he),g.push(he)}const{minX:C,minY:I,maxX:z,maxY:V}=b,G=this.grid.query(C,I,z,V).concat(this.ignoredGrid.query(C,I,z,V)),J={},ie={};for(const de of G){const he=de.key;if(J[he.bucketInstanceId]===void 0&&(J[he.bucketInstanceId]={}),J[he.bucketInstanceId][he.featureIndex])continue;const ye=[new s.P(de.x1,de.y1),new s.P(de.x2,de.y1),new s.P(de.x2,de.y2),new s.P(de.x1,de.y2)];s.aK(g,ye)&&(J[he.bucketInstanceId][he.featureIndex]=!0,ie[he.bucketInstanceId]===void 0&&(ie[he.bucketInstanceId]=[]),ie[he.bucketInstanceId].push(he.featureIndex))}return ie}insertCollisionBox(c,g,b,C,I,z){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:I,collisionGroupID:z,overlapMode:g},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,g,b,C,I,z){const V=b?this.ignoredGrid:this.grid,G={bucketInstanceId:C,featureIndex:I,collisionGroupID:z,overlapMode:g};for(let J=0;J<c.length;J+=4)V.insertCircle(G,c[J],c[J+1],c[J+2])}projectAndGetPerspectiveRatio(c,g,b,C,I){if(I){let z;C?(z=[c,g,C(c,g),1],s.aH(z,z,I)):(z=[c,g,0,1],gl(z,z,I));const V=z[3];return{x:(z[0]/V+1)/2*this.transform.width+Zr,y:(-z[1]/V+1)/2*this.transform.height+Zr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/V*.5,isOccluded:!1,signedDistanceFromCamera:V}}{const z=this.transform.projectTileCoordinates(c,g,b,C);return{x:(z.point.x+1)/2*this.transform.width+Zr,y:(1-z.point.y)/2*this.transform.height+Zr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/z.signedDistanceFromCamera*.5,isOccluded:z.isOccluded,signedDistanceFromCamera:z.signedDistanceFromCamera}}}getPerspectiveRatio(c,g,b,C){const I=this.transform.projectTileCoordinates(c,g,b,C);return .5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5}isOffscreen(c,g,b,C){return b<Zr||c>=this.screenRightBoundary||C<Zr||g>this.screenBottomBoundary}isInsideGrid(c,g,b,C){return b>=0&&c<this.gridRightBoundary&&C>=0&&g<this.gridBottomBoundary}getViewportMatrix(){const c=s.ar([]);return s.O(c,c,[-100,-100,0]),c}_projectCollisionBox(c,g,b,C,I,z,V,G,J,ie,de){let he=1,ye=0,Se=0,Ie=1;const Le=c.anchorPointX+V[0],De=c.anchorPointY+V[1];if(z&&!I){const rn=this.projectAndGetPerspectiveRatio(Le+1,De,C,J,de),Bt=rn.x-G.x,hn=Math.atan((rn.y-G.y)/Bt)+(Bt<0?Math.PI:0),cr=Math.sin(hn),ti=Math.cos(hn);he=ti,ye=cr,Se=-cr,Ie=ti}else if(!z&&I){const rn=Tc(this.transform);he=rn.vecEast[0],ye=rn.vecEast[1],Se=rn.vecSouth[0],Ie=rn.vecSouth[1]}let Ve=G.x,He=G.y,Fe=g;I&&(Ve=Le,He=De,Fe=Math.pow(2,-(this.transform.zoom-b.overscaledZ)),Fe*=this.transform.getPitchedTextCorrection(Le,De,C),ie||(Fe*=s.an(.5+G.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),ie&&(Ve+=he*ie.x*Fe+Se*ie.y*Fe,He+=ye*ie.x*Fe+Ie*ie.y*Fe);const We=c.x1*Fe,Je=c.x2*Fe,Ze=(We+Je)/2,rt=c.y1*Fe,xt=c.y2*Fe,ht=(rt+xt)/2,mt=[{offsetX:We,offsetY:rt},{offsetX:Ze,offsetY:rt},{offsetX:Je,offsetY:rt},{offsetX:Je,offsetY:ht},{offsetX:Je,offsetY:xt},{offsetX:Ze,offsetY:xt},{offsetX:We,offsetY:xt},{offsetX:We,offsetY:ht}];let gt=[];for(const{offsetX:rn,offsetY:Bt}of mt)gt.push(new s.P(Ve+he*rn+Se*Bt,He+ye*rn+Ie*Bt));let tn=!1;if(I){const rn=gt.map((Bt=>this.projectAndGetPerspectiveRatio(Bt.x,Bt.y,C,J,de)));tn=rn.some((Bt=>!Bt.isOccluded)),gt=rn.map((Bt=>new s.P(Bt.x,Bt.y)))}else tn=!0;return{box:s.aL(gt),allPointsOccluded:!tn}}}class ib{constructor(c,g,b,C){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?g:-g))):C&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class Ed{constructor(c,g,b,C,I){this.text=new ib(c?c.text:null,g,b,I),this.icon=new ib(c?c.icon:null,g,C,I)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class wv{constructor(c,g,b){this.text=c,this.icon=g,this.skipFade=b}}class Pm{constructor(c,g,b,C,I){this.bucketInstanceId=c,this.featureIndex=g,this.sourceLayerIndex=b,this.bucketIndex=C,this.tileID=I}}class ob{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const g=++this.maxGroupID;this.collisionGroups[c]={ID:g,predicate:b=>b.collisionGroupID===g}}return this.collisionGroups[c]}}function ua(P,c,g,b,C){const{horizontalAlign:I,verticalAlign:z}=s.aS(P);return new s.P(-(I-.5)*c+b[0]*C,-(z-.5)*g+b[1]*C)}class Mm{constructor(c,g,b,C,I){this.transform=c.clone(),this.terrain=g,this.collisionIndex=new bv(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new ob(C),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(c){const g=this.terrain;return g?(b,C)=>g.getElevation(c,b,C):null}getBucketParts(c,g,b,C){const I=b.getBucket(g),z=b.latestFeatureIndex;if(!I||!z||g.id!==I.layerIds[0])return;const V=b.collisionBoxArray,G=I.layers[0].layout,J=I.layers[0].paint,ie=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),de=b.tileSize/s.a5,he=b.tileID.toUnwrapped(),ye=G.get("text-rotation-alignment")==="map",Se=s.aN(b,1,this.transform.zoom),Ie=s.aO(this.collisionIndex.transform,b,J.get("text-translate"),J.get("text-translate-anchor")),Le=s.aO(this.collisionIndex.transform,b,J.get("icon-translate"),J.get("icon-translate-anchor")),De=ja(ye,this.transform,Se);this.retainedQueryData[I.bucketInstanceId]=new Pm(I.bucketInstanceId,z,I.sourceLayerIndex,I.index,b.tileID);const Ve={bucket:I,layout:G,translationText:Ie,translationIcon:Le,unwrappedTileID:he,pitchedLabelPlaneMatrix:De,scale:ie,textPixelRatio:de,holdingForFade:b.holdingForSymbolFade(),collisionBoxArray:V,partiallyEvaluatedTextSize:s.ay(I.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(I.sourceID)};if(C)for(const He of I.sortKeyRanges){const{sortKey:Fe,symbolInstanceStart:We,symbolInstanceEnd:Je}=He;c.push({sortKey:Fe,symbolInstanceStart:We,symbolInstanceEnd:Je,parameters:Ve})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:I.symbolInstances.length,parameters:Ve})}attemptAnchorPlacement(c,g,b,C,I,z,V,G,J,ie,de,he,ye,Se,Ie,Le,De,Ve,He,Fe){const We=s.aP[c.textAnchor],Je=[c.textOffset0,c.textOffset1],Ze=ua(We,b,C,Je,I),rt=this.collisionIndex.placeCollisionBox(g,he,G,J,ie,V,z,Le,de.predicate,He,Ze,Fe);if((!Ve||this.collisionIndex.placeCollisionBox(Ve,he,G,J,ie,V,z,De,de.predicate,He,Ze,Fe).placeable)&&rt.placeable){let xt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ye.crossTileID]&&this.prevPlacement.placements[ye.crossTileID]&&this.prevPlacement.placements[ye.crossTileID].text&&(xt=this.prevPlacement.variableOffsets[ye.crossTileID].anchor),ye.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ye.crossTileID]={textOffset:Je,width:b,height:C,anchor:We,textBoxScale:I,prevAnchor:xt},this.markUsedJustification(Se,We,ye,Ie),Se.allowVerticalPlacement&&(this.markUsedOrientation(Se,Ie,ye),this.placedOrientations[ye.crossTileID]=Ie),{shift:Ze,placedGlyphBoxes:rt}}}placeLayerBucketPart(c,g,b){const{bucket:C,layout:I,translationText:z,translationIcon:V,unwrappedTileID:G,pitchedLabelPlaneMatrix:J,textPixelRatio:ie,holdingForFade:de,collisionBoxArray:he,partiallyEvaluatedTextSize:ye,collisionGroup:Se}=c.parameters,Ie=I.get("text-optional"),Le=I.get("icon-optional"),De=s.aQ(I,"text-overlap","text-allow-overlap"),Ve=De==="always",He=s.aQ(I,"icon-overlap","icon-allow-overlap"),Fe=He==="always",We=I.get("text-rotation-alignment")==="map",Je=I.get("text-pitch-alignment")==="map",Ze=I.get("icon-text-fit")!=="none",rt=I.get("symbol-z-order")==="viewport-y",xt=Ve&&(Fe||!C.hasIconData()||Le),ht=Fe&&(Ve||!C.hasTextData()||Ie);!C.collisionArrays&&he&&C.deserializeCollisionBoxes(he);const mt=this.retainedQueryData[C.bucketInstanceId].tileID,gt=this._getTerrainElevationFunc(mt),tn=this.transform.getFastPathSimpleProjectionMatrix(mt),rn=(Bt,hn,cr)=>{var ti,Ci;if(g[Bt.crossTileID])return;if(de)return void(this.placements[Bt.crossTileID]=new wv(!1,!1,!1));let xi=!1,$i=!1,hi=!0,to=null,zi={box:null,placeable:!1,offscreen:null,occluded:!1},ps={placeable:!1},fo=null,po=null,ms=null,Gc=0,Xc=0,oc=0;hn.textFeatureIndex?Gc=hn.textFeatureIndex:Bt.useRuntimeCollisionCircles&&(Gc=Bt.featureIndex),hn.verticalTextFeatureIndex&&(Xc=hn.verticalTextFeatureIndex);const Ea=hn.textBox;if(Ea){const Aa=oi=>{let _i=s.az.horizontal;if(C.allowVerticalPlacement&&!oi&&this.prevPlacement){const No=this.prevPlacement.placedOrientations[Bt.crossTileID];No&&(this.placedOrientations[Bt.crossTileID]=No,_i=No,this.markUsedOrientation(C,_i,Bt))}return _i},Ka=(oi,_i)=>{if(C.allowVerticalPlacement&&Bt.numVerticalGlyphVertices>0&&hn.verticalTextBox){for(const No of C.writingModes)if(No===s.az.vertical?(zi=_i(),ps=zi):zi=oi(),zi&&zi.placeable)break}else zi=oi()},kl=Bt.textAnchorOffsetStartIndex,El=Bt.textAnchorOffsetEndIndex;if(El===kl){const oi=(_i,No)=>{const qo=this.collisionIndex.placeCollisionBox(_i,De,ie,mt,G,Je,We,z,Se.predicate,gt,void 0,tn);return qo&&qo.placeable&&(this.markUsedOrientation(C,No,Bt),this.placedOrientations[Bt.crossTileID]=No),qo};Ka((()=>oi(Ea,s.az.horizontal)),(()=>{const _i=hn.verticalTextBox;return C.allowVerticalPlacement&&Bt.numVerticalGlyphVertices>0&&_i?oi(_i,s.az.vertical):{box:null,offscreen:null}})),Aa(zi&&zi.placeable)}else{let oi=s.aP[(Ci=(ti=this.prevPlacement)===null||ti===void 0?void 0:ti.variableOffsets[Bt.crossTileID])===null||Ci===void 0?void 0:Ci.anchor];const _i=(qo,Yy,Ky)=>{const Fh=qo.x2-qo.x1,Ob=qo.y2-qo.y1,jh=Bt.textBoxScale,Jy=Ze&&He==="never"?Yy:null;let zu=null,Nu=De==="never"?1:2,ac="never";oi&&Nu++;for(let e0=0;e0<Nu;e0++){for(let fg=kl;fg<El;fg++){const pg=C.textAnchorOffsets.get(fg);if(oi&&pg.textAnchor!==oi)continue;const mg=this.attemptAnchorPlacement(pg,qo,Fh,Ob,jh,We,Je,ie,mt,G,Se,ac,Bt,C,Ky,z,V,Jy,gt);if(mg&&(zu=mg.placedGlyphBoxes,zu&&zu.placeable))return xi=!0,to=mg.shift,zu}oi?oi=null:ac=De}return b&&!zu&&(zu={box:this.collisionIndex.placeCollisionBox(Ea,"always",ie,mt,G,Je,We,z,Se.predicate,gt,void 0,tn).box,offscreen:!1,placeable:!1,occluded:!1}),zu};Ka((()=>_i(Ea,hn.iconBox,s.az.horizontal)),(()=>{const qo=hn.verticalTextBox;return C.allowVerticalPlacement&&(!zi||!zi.placeable)&&Bt.numVerticalGlyphVertices>0&&qo?_i(qo,hn.verticalIconBox,s.az.vertical):{box:null,occluded:!0,offscreen:null}})),zi&&(xi=zi.placeable,hi=zi.offscreen);const No=Aa(zi&&zi.placeable);if(!xi&&this.prevPlacement){const qo=this.prevPlacement.variableOffsets[Bt.crossTileID];qo&&(this.variableOffsets[Bt.crossTileID]=qo,this.markUsedJustification(C,qo.anchor,Bt,No))}}}if(fo=zi,xi=fo&&fo.placeable,hi=fo&&fo.offscreen,Bt.useRuntimeCollisionCircles&&Bt.centerJustifiedTextSymbolIndex>=0){const Aa=C.text.placedSymbolArray.get(Bt.centerJustifiedTextSymbolIndex),Ka=s.aA(C.textSizeData,ye,Aa),kl=I.get("text-padding");po=this.collisionIndex.placeCollisionCircles(De,Aa,C.lineVertexArray,C.glyphOffsetArray,Ka,G,J,b,Je,Se.predicate,Bt.collisionCircleDiameter,kl,z,gt),po.circles.length&&po.collisionDetected&&!b&&s.w("Collisions detected, but collision boxes are not shown"),xi=Ve||po.circles.length>0&&!po.collisionDetected,hi=hi&&po.offscreen}if(hn.iconFeatureIndex&&(oc=hn.iconFeatureIndex),hn.iconBox){const Aa=Ka=>this.collisionIndex.placeCollisionBox(Ka,He,ie,mt,G,Je,We,V,Se.predicate,gt,Ze&&to?to:void 0,tn);ps&&ps.placeable&&hn.verticalIconBox?(ms=Aa(hn.verticalIconBox),$i=ms.placeable):(ms=Aa(hn.iconBox),$i=ms.placeable),hi=hi&&ms.offscreen}const Kd=Ie||Bt.numHorizontalGlyphVertices===0&&Bt.numVerticalGlyphVertices===0,vp=Le||Bt.numIconVertices===0;Kd||vp?vp?Kd||($i=$i&&xi):xi=$i&&xi:$i=xi=$i&&xi;const sc=$i&&ms.placeable;if(xi&&fo.placeable&&this.collisionIndex.insertCollisionBox(fo.box,De,I.get("text-ignore-placement"),C.bucketInstanceId,ps&&ps.placeable&&Xc?Xc:Gc,Se.ID),sc&&this.collisionIndex.insertCollisionBox(ms.box,He,I.get("icon-ignore-placement"),C.bucketInstanceId,oc,Se.ID),po&&xi&&this.collisionIndex.insertCollisionCircles(po.circles,De,I.get("text-ignore-placement"),C.bucketInstanceId,Gc,Se.ID),b&&this.storeCollisionData(C.bucketInstanceId,cr,hn,fo,ms,po),Bt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(C.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Bt.crossTileID]=new wv((xi||xt)&&!fo?.occluded,($i||ht)&&!ms?.occluded,hi||C.justReloaded),g[Bt.crossTileID]=!0};if(rt){if(c.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Bt=C.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let hn=Bt.length-1;hn>=0;--hn){const cr=Bt[hn];rn(C.symbolInstances.get(cr),C.collisionArrays[cr],cr)}}else for(let Bt=c.symbolInstanceStart;Bt<c.symbolInstanceEnd;Bt++)rn(C.symbolInstances.get(Bt),C.collisionArrays[Bt],Bt);C.justReloaded=!1}storeCollisionData(c,g,b,C,I,z){if(b.textBox||b.iconBox){let V,G;this.collisionBoxArrays.has(c)?V=this.collisionBoxArrays.get(c):(V=new Map,this.collisionBoxArrays.set(c,V)),V.has(g)?G=V.get(g):(G={text:null,icon:null},V.set(g,G)),b.textBox&&(G.text=C.box),b.iconBox&&(G.icon=I.box)}if(z){let V=this.collisionCircleArrays[c];V===void 0&&(V=this.collisionCircleArrays[c]=[]);for(let G=0;G<z.circles.length;G+=4)V.push(z.circles[G+0]-Zr),V.push(z.circles[G+1]-Zr),V.push(z.circles[G+2]),V.push(z.collisionDetected?1:0)}}markUsedJustification(c,g,b,C){let I;I=C===s.az.vertical?b.verticalPlacedTextSymbolIndex:{left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex}[s.aR(g)];const z=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex];for(const V of z)V>=0&&(c.text.placedSymbolArray.get(V).crossTileID=I>=0&&V!==I?0:b.crossTileID)}markUsedOrientation(c,g,b){const C=g===s.az.horizontal||g===s.az.horizontalOnly?g:0,I=g===s.az.vertical?g:0,z=[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex];for(const V of z)c.text.placedSymbolArray.get(V).placedOrientation=C;b.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=I)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const g=this.prevPlacement;let b=!1;this.prevZoomAdjustment=g?g.zoomAdjustment(this.transform.zoom):0;const C=g?g.symbolFadeChange(c):1,I=g?g.opacities:{},z=g?g.variableOffsets:{},V=g?g.placedOrientations:{};for(const G in this.placements){const J=this.placements[G],ie=I[G];ie?(this.opacities[G]=new Ed(ie,C,J.text,J.icon),b=b||J.text!==ie.text.placed||J.icon!==ie.icon.placed):(this.opacities[G]=new Ed(null,C,J.text,J.icon,J.skipFade),b=b||J.text||J.icon)}for(const G in I){const J=I[G];if(!this.opacities[G]){const ie=new Ed(J,C,!1,!1);ie.isHidden()||(this.opacities[G]=ie,b=b||J.text.placed||J.icon.placed)}}for(const G in z)this.variableOffsets[G]||!this.opacities[G]||this.opacities[G].isHidden()||(this.variableOffsets[G]=z[G]);for(const G in V)this.placedOrientations[G]||!this.opacities[G]||this.opacities[G].isHidden()||(this.placedOrientations[G]=V[G]);if(g&&g.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");b?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=g?g.lastPlacementChangeTime:c)}updateLayerOpacities(c,g){const b={};for(const C of g){const I=C.getBucket(c);I&&C.latestFeatureIndex&&c.id===I.layerIds[0]&&this.updateBucketOpacities(I,C.tileID,b,C.collisionBoxArray)}}updateBucketOpacities(c,g,b,C){c.hasTextData()&&(c.text.opacityVertexArray.clear(),c.text.hasVisibleVertices=!1),c.hasIconData()&&(c.icon.opacityVertexArray.clear(),c.icon.hasVisibleVertices=!1),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const I=c.layers[0],z=I.layout,V=new Ed(null,0,!1,!1,!0),G=z.get("text-allow-overlap"),J=z.get("icon-allow-overlap"),ie=I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"),de=z.get("text-rotation-alignment")==="map",he=z.get("text-pitch-alignment")==="map",ye=z.get("icon-text-fit")!=="none",Se=new Ed(null,0,G&&(J||!c.hasIconData()||z.get("icon-optional")),J&&(G||!c.hasTextData()||z.get("text-optional")),!0);!c.collisionArrays&&C&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(C);const Ie=(De,Ve,He)=>{for(let Fe=0;Fe<Ve/4;Fe++)De.opacityVertexArray.emplaceBack(He);De.hasVisibleVertices=De.hasVisibleVertices||He!==Pd},Le=this.collisionBoxArrays.get(c.bucketInstanceId);for(let De=0;De<c.symbolInstances.length;De++){const Ve=c.symbolInstances.get(De),{numHorizontalGlyphVertices:He,numVerticalGlyphVertices:Fe,crossTileID:We}=Ve;let Je=this.opacities[We];b[We]?Je=V:Je||(Je=Se,this.opacities[We]=Je),b[We]=!0;const Ze=Ve.numIconVertices>0,rt=this.placedOrientations[Ve.crossTileID],xt=rt===s.az.vertical,ht=rt===s.az.horizontal||rt===s.az.horizontalOnly;if(He>0||Fe>0){const gt=Cy(Je.text);Ie(c.text,He,xt?Pd:gt),Ie(c.text,Fe,ht?Pd:gt);const tn=Je.text.isHidden();[Ve.rightJustifiedTextSymbolIndex,Ve.centerJustifiedTextSymbolIndex,Ve.leftJustifiedTextSymbolIndex].forEach((hn=>{hn>=0&&(c.text.placedSymbolArray.get(hn).hidden=tn||xt?1:0)})),Ve.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(Ve.verticalPlacedTextSymbolIndex).hidden=tn||ht?1:0);const rn=this.variableOffsets[Ve.crossTileID];rn&&this.markUsedJustification(c,rn.anchor,Ve,rt);const Bt=this.placedOrientations[Ve.crossTileID];Bt&&(this.markUsedJustification(c,"left",Ve,Bt),this.markUsedOrientation(c,Bt,Ve))}if(Ze){const gt=Cy(Je.icon),tn=!(ye&&Ve.verticalPlacedIconSymbolIndex&&xt);Ve.placedIconSymbolIndex>=0&&(Ie(c.icon,Ve.numIconVertices,tn?gt:Pd),c.icon.placedSymbolArray.get(Ve.placedIconSymbolIndex).hidden=Je.icon.isHidden()),Ve.verticalPlacedIconSymbolIndex>=0&&(Ie(c.icon,Ve.numVerticalIconVertices,tn?Pd:gt),c.icon.placedSymbolArray.get(Ve.verticalPlacedIconSymbolIndex).hidden=Je.icon.isHidden())}const mt=Le&&Le.has(De)?Le.get(De):{text:null,icon:null};if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const gt=c.collisionArrays[De];if(gt){let tn=new s.P(0,0);if(gt.textBox||gt.verticalTextBox){let rn=!0;if(ie){const Bt=this.variableOffsets[We];Bt?(tn=ua(Bt.anchor,Bt.width,Bt.height,Bt.textOffset,Bt.textBoxScale),de&&tn._rotate(he?-this.transform.bearingInRadians:this.transform.bearingInRadians)):rn=!1}if(gt.textBox||gt.verticalTextBox){let Bt;gt.textBox&&(Bt=xt),gt.verticalTextBox&&(Bt=ht),Sy(c.textCollisionBox.collisionVertexArray,Je.text.placed,!rn||Bt,mt.text,tn.x,tn.y)}}if(gt.iconBox||gt.verticalIconBox){const rn=!!(!ht&&gt.verticalIconBox);let Bt;gt.iconBox&&(Bt=rn),gt.verticalIconBox&&(Bt=!rn),Sy(c.iconCollisionBox.collisionVertexArray,Je.icon.placed,Bt,mt.icon,ye?tn.x:0,ye?tn.y:0)}}}}if(c.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.text.opacityVertexArray.length!==c.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${c.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${c.text.layoutVertexArray.length}) / 4`);if(c.icon.opacityVertexArray.length!==c.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${c.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${c.icon.layoutVertexArray.length}) / 4`);c.bucketInstanceId in this.collisionCircleArrays&&(c.collisionCircleArray=this.collisionCircleArrays[c.bucketInstanceId],delete this.collisionCircleArrays[c.bucketInstanceId])}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,g){const b=this.zoomAtLastRecencyCheck===g?1-this.zoomAdjustment(g):1;return this.zoomAtLastRecencyCheck=g,this.commitTime+this.fadeDuration*b>c}setStale(){this.stale=!0}}function Sy(P,c,g,b,C,I){b&&b.length!==0||(b=[0,0,0,0]);const z=b[0]-Zr,V=b[1]-Zr,G=b[2]-Zr,J=b[3]-Zr;P.emplaceBack(c?1:0,g?1:0,C||0,I||0,z,V),P.emplaceBack(c?1:0,g?1:0,C||0,I||0,G,V),P.emplaceBack(c?1:0,g?1:0,C||0,I||0,G,J),P.emplaceBack(c?1:0,g?1:0,C||0,I||0,z,J)}const Rm=Math.pow(2,25),bh=Math.pow(2,24),sb=Math.pow(2,17),Xf=Math.pow(2,16),Su=Math.pow(2,9),ab=Math.pow(2,8),Ad=Math.pow(2,1);function Cy(P){if(P.opacity===0&&!P.placed)return 0;if(P.opacity===1&&P.placed)return 4294967295;const c=P.placed?1:0,g=Math.floor(127*P.opacity);return g*Rm+c*bh+g*sb+c*Xf+g*Su+c*ab+g*Ad+c}const Pd=0;class wh{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&!c.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,g,b,C,I){const z=this._bucketParts;for(;this._currentTileIndex<c.length;)if(g.getBucketParts(z,C,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,I())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort(((V,G)=>V.sortKey-G.sortKey)));this._currentPartIndex<z.length;)if(g.placeLayerBucketPart(z[this._currentPartIndex],this._seenCrossTileIDs,b),this._currentPartIndex++,I())return!0;return!1}}class Yf{constructor(c,g,b,C,I,z,V,G){this.placement=new Mm(c,g,z,V,G),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=I,this._done=!1}isDone(){return this._done}continuePlacement(c,g,b){const C=A(),I=()=>!this._forceFullPlacement&&A()-C>2;for(;this._currentPlacementIndex>=0;){const z=g[c[this._currentPlacementIndex]],V=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=V)&&(!z.maxzoom||z.maxzoom>V)){if(this._inProgressLayer||(this._inProgressLayer=new wh(z)),this._inProgressLayer.continuePlacement(b[z.source],this.placement,this._showCollisionBoxes,z,I))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const mr=512/s.a5/2;class Yl{constructor(c,g,b){this.tileID=c,this.bucketInstanceId=b,this._symbolsByKey={};const C=new Map;for(let I=0;I<g.length;I++){const z=g.get(I),V=z.key,G=C.get(V);G?G.push(z):C.set(V,[z])}for(const[I,z]of C){const V={positions:z.map((G=>({x:Math.floor(G.anchorX*mr),y:Math.floor(G.anchorY*mr)}))),crossTileIDs:z.map((G=>G.crossTileID))};if(V.positions.length>128){const G=new s.aT(V.positions.length,16,Uint16Array);for(const{x:J,y:ie}of V.positions)G.add(J,ie);G.finish(),delete V.positions,V.index=G}this._symbolsByKey[I]=V}}getScaledCoordinates(c,g){const{x:b,y:C,z:I}=this.tileID.canonical,{x:z,y:V,z:G}=g.canonical,J=mr/Math.pow(2,G-I),ie=(V*s.a5+c.anchorY)*J,de=C*s.a5*mr;return{x:Math.floor((z*s.a5+c.anchorX)*J-b*s.a5*mr),y:Math.floor(ie-de)}}findMatches(c,g,b){const C=this.tileID.canonical.z<g.canonical.z?1:Math.pow(2,this.tileID.canonical.z-g.canonical.z);for(let I=0;I<c.length;I++){const z=c.get(I);if(z.crossTileID)continue;const V=this._symbolsByKey[z.key];if(!V)continue;const G=this.getScaledCoordinates(z,g);if(V.index){const J=V.index.range(G.x-C,G.y-C,G.x+C,G.y+C).sort();for(const ie of J){const de=V.crossTileIDs[ie];if(!b[de]){b[de]=!0,z.crossTileID=de;break}}}else if(V.positions)for(let J=0;J<V.positions.length;J++){const ie=V.positions[J],de=V.crossTileIDs[J];if(Math.abs(ie.x-G.x)<=C&&Math.abs(ie.y-G.y)<=C&&!b[de]){b[de]=!0,z.crossTileID=de;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:c})=>c))}}class Ov{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Im{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const g=Math.round((c-this.lng)/360);if(g!==0)for(const b in this.indexes){const C=this.indexes[b],I={};for(const z in C){const V=C[z];V.tileID=V.tileID.unwrapTo(V.tileID.wrap+g),I[V.tileID.key]=V}this.indexes[b]=I}this.lng=c}addBucket(c,g,b){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===g.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let I=0;I<g.symbolInstances.length;I++)g.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const C=this.usedCrossTileIDs[c.overscaledZ];for(const I in this.indexes){const z=this.indexes[I];if(Number(I)>c.overscaledZ)for(const V in z){const G=z[V];G.tileID.isChildOf(c)&&G.findMatches(g.symbolInstances,c,C)}else{const V=z[c.scaledTo(Number(I)).key];V&&V.findMatches(g.symbolInstances,c,C)}}for(let I=0;I<g.symbolInstances.length;I++){const z=g.symbolInstances.get(I);z.crossTileID||(z.crossTileID=b.generate(),C[z.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new Yl(c,g.symbolInstances,g.bucketInstanceId),!0}removeBucketCrossTileIDs(c,g){for(const b of g.getCrossTileIDsLists())for(const C of b)delete this.usedCrossTileIDs[c][C]}removeStaleBuckets(c){let g=!1;for(const b in this.indexes){const C=this.indexes[b];for(const I in C)c[C[I].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,C[I]),delete C[I],g=!0)}return g}}class es{constructor(){this.layerIndexes={},this.crossTileIDs=new Ov,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,g,b){let C=this.layerIndexes[c.id];C===void 0&&(C=this.layerIndexes[c.id]=new Im);let I=!1;const z={};C.handleWrapJump(b);for(const V of g){const G=V.getBucket(c);G&&c.id===G.layerIds[0]&&(G.bucketInstanceId||(G.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(V.tileID,G,this.crossTileIDs)&&(I=!0),z[G.bucketInstanceId]=!0)}return C.removeStaleBuckets(z)&&(I=!0),I}pruneUnusedLayers(c){const g={};c.forEach((b=>{g[b]=!0}));for(const b in this.layerIndexes)g[b]||delete this.layerIndexes[b]}}var $o="void main() {fragColor=vec4(1.0);}";const Vi={prelude:Kn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Kn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Kn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Kn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Kn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Kn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Kn($o,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Kn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Kn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Kn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Kn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Kn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Kn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Kn($o,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Kn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Kn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Kn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Kn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Kn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Kn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Kn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Kn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Kn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Kn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Kn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Kn(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Kn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Kn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Kn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Kn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Kn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Kn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Kn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Kn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Kn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Kn(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Kn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Kn(P,c){const g=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=c.match(/in ([\w]+) ([\w]+)/g),C=P.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),z=I?I.concat(C):C,V={};return{fragmentSource:P=P.replace(g,((G,J,ie,de,he)=>(V[he]=!0,J==="define"?`
#ifndef HAS_UNIFORM_u_${he}
in ${ie} ${de} ${he};
#else
uniform ${ie} ${de} u_${he};
#endif
`:`
#ifdef HAS_UNIFORM_u_${he}
    ${ie} ${de} ${he} = u_${he};
#endif
`))),vertexSource:c=c.replace(g,((G,J,ie,de,he)=>{const ye=de==="float"?"vec2":"vec4",Se=he.match(/color/)?"color":ye;return V[he]?J==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
in ${ie} ${ye} a_${he};
out ${ie} ${de} ${he};
#else
uniform ${ie} ${de} u_${he};
#endif
`:Se==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = a_${he};
#else
    ${ie} ${de} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = unpack_mix_${Se}(a_${he}, u_${he}_t);
#else
    ${ie} ${de} ${he} = u_${he};
#endif
`:J==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
in ${ie} ${ye} a_${he};
#else
uniform ${ie} ${de} u_${he};
#endif
`:Se==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${ie} ${de} ${he} = a_${he};
#else
    ${ie} ${de} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${ie} ${de} ${he} = unpack_mix_${Se}(a_${he}, u_${he}_t);
#else
    ${ie} ${de} ${he} = u_${he};
#endif
`})),staticAttributes:b,staticUniforms:z}}class yi{constructor(c,g,b){this.vertexBuffer=c,this.indexBuffer=g,this.segments=b}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var yl=s.aU([{name:"a_pos",type:"Int16",components:2}]);const co="#define PROJECTION_MERCATOR",ha="mercator";class ts{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return ha}get shaderDefine(){return co}get shaderPreludeCode(){return Vi.projectionMercator}get vertexShaderPreludeCode(){return Vi.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(c){}getMeshFromTileID(c,g,b,C,I){if(this._cachedMesh)return this._cachedMesh;const z=new s.aW;z.emplaceBack(0,0),z.emplaceBack(s.a5,0),z.emplaceBack(0,s.a5),z.emplaceBack(s.a5,s.a5);const V=c.createVertexBuffer(z,yl.members),G=s.aX.simpleSegment(0,0,4,2),J=new s.aY;J.emplaceBack(1,0,2),J.emplaceBack(1,2,3);const ie=c.createIndexBuffer(J);return this._cachedMesh=new yi(V,ie,G),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(c){}}class Va{constructor(c=0,g=0,b=0,C=0){if(isNaN(c)||c<0||isNaN(g)||g<0||isNaN(b)||b<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=g,this.left=b,this.right=C}interpolate(c,g,b){return g.top!=null&&c.top!=null&&(this.top=s.G.number(c.top,g.top,b)),g.bottom!=null&&c.bottom!=null&&(this.bottom=s.G.number(c.bottom,g.bottom,b)),g.left!=null&&c.left!=null&&(this.left=s.G.number(c.left,g.left,b)),g.right!=null&&c.right!=null&&(this.right=s.G.number(c.right,g.right,b)),this}getCenter(c,g){const b=s.an((this.left+c-this.right)/2,0,c),C=s.an((this.top+g-this.bottom)/2,0,g);return new s.P(b,C)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new Va(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Mc(P,c){if(!P.renderWorldCopies||P.lngRange)return;const g=c.lng-P.center.lng;c.lng+=g>180?-360:g<-180?360:0}function Qi(P){return Math.max(0,Math.floor(P))}class Oh{constructor(c,g){var b;this.applyConstrain=(C,I)=>this._constrainOverride!==null?this._constrainOverride(C,I):this._callbacks.defaultConstrain(C,I),this._callbacks=c,this._tileSize=512,this._renderWorldCopies=g?.renderWorldCopies===void 0||!!g?.renderWorldCopies,this._minZoom=g?.minZoom||0,this._maxZoom=g?.maxZoom||22,this._minPitch=g?.minPitch==null?0:g?.minPitch,this._maxPitch=g?.maxPitch==null?60:g?.maxPitch,this._constrainOverride=(b=g?.constrainOverride)!==null&&b!==void 0?b:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Qi(this._zoom),this._scale=s.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Va,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(c,g,b){this._constrainOverride=c.constrainOverride,this._latRange=c.latRange,this._lngRange=c.lngRange,this._width=c.width,this._height=c.height,this._center=c.center,this._elevation=c.elevation,this._minElevationForCurrentTile=c.minElevationForCurrentTile,this._zoom=c.zoom,this._tileZoom=Qi(this._zoom),this._scale=s.aq(this._zoom),this._bearingInRadians=c.bearingInRadians,this._fovInRadians=c.fovInRadians,this._pitchInRadians=c.pitchInRadians,this._rollInRadians=c.rollInRadians,this._unmodified=c.unmodified,this._edgeInsets=new Va(c.padding.top,c.padding.bottom,c.padding.left,c.padding.right),this._minZoom=c.minZoom,this._maxZoom=c.maxZoom,this._minPitch=c.minPitch,this._maxPitch=c.maxPitch,this._renderWorldCopies=c.renderWorldCopies,this._cameraToCenterDistance=c.cameraToCenterDistance,this._nearZ=c.nearZ,this._farZ=c.farZ,this._autoCalculateNearFarZ=!b&&c.autoCalculateNearFarZ,g&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(c){this._minElevationForCurrentTile=c}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(c){this._minZoom!==c&&(this._minZoom=c,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(c){this._minPitch!==c&&(this._minPitch=c,this.setPitch(Math.max(this.pitch,c)))}get maxPitch(){return this._maxPitch}setMaxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.setPitch(Math.min(this.pitch,c)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get constrainOverride(){return this._constrainOverride}setConstrainOverride(c){c===void 0&&(c=null),this._constrainOverride!==c&&(this._constrainOverride=c,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(c){const g=s.W(c,-180,180)*Math.PI/180;var b,C,I,z,V,G,J,ie,de;this._bearingInRadians!==g&&(this._unmodified=!1,this._bearingInRadians=g,this._calcMatrices(),this._rotationMatrix=d(),b=this._rotationMatrix,I=-this._bearingInRadians,z=(C=this._rotationMatrix)[0],V=C[1],G=C[2],J=C[3],ie=Math.sin(I),de=Math.cos(I),b[0]=z*de+G*ie,b[1]=V*de+J*ie,b[2]=z*-ie+G*de,b[3]=V*-ie+J*de)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(c){const g=s.an(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==g&&(this._unmodified=!1,this._pitchInRadians=g,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(c){const g=c/180*Math.PI;this._rollInRadians!==g&&(this._unmodified=!1,this._rollInRadians=g,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aZ(this._fovInRadians)}setFov(c){c=s.an(c,.1,150),this.fov!==c&&(this._unmodified=!1,this._fovInRadians=s.ap(c),this._calcMatrices())}get zoom(){return this._zoom}setZoom(c){const g=this.applyConstrain(this._center,c).zoom;this._zoom!==g&&(this._unmodified=!1,this._zoom=g,this._tileZoom=Math.max(0,Math.floor(g)),this._scale=s.aq(g),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(c){c!==this._elevation&&(this._elevation=c,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(c,g){this._autoCalculateNearFarZ=!1,this._nearZ=c,this._farZ=g,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,g,b){this._unmodified=!1,this._edgeInsets.interpolate(c,g,b),this.constrainInternal(),this._calcMatrices()}resize(c,g,b=!0){this._width=c,this._height=g,b&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new nn([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(c){c?(this._lngRange=[c.getWest(),c.getEast()],this._latRange=[c.getSouth(),c.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-s.ao,s.ao])}getCameraQueryGeometry(c,g){if(g.length===1)return[g[0],c];{const{minX:b,minY:C,maxX:I,maxY:z}=s.aa.fromPoints(g).extend(c);return[new s.P(b,C),new s.P(I,C),new s.P(I,z),new s.P(b,z),new s.P(b,C)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const c=this._unmodified,{center:g,zoom:b}=this.applyConstrain(this.center,this.zoom);this.setCenter(g),this.setZoom(b),this._unmodified=c,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let c=s.ar(new Float64Array(16));s.Q(c,c,[this._width/2,-this._height/2,1]),s.O(c,c,[1,-1,0]),this._clipSpaceToPixelsMatrix=c,c=s.ar(new Float64Array(16)),s.Q(c,c,[1,-1,1]),s.O(c,c,[-1,-1,0]),s.Q(c,c,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=c,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(c,g,b,C){const I=b!==void 0?b:this.bearing,z=C=C!==void 0?C:this.pitch,{distanceToCenter:V,clampedElevation:G}=this._distanceToCenterFromAltElevationPitch(g,this.elevation,z),{x:J,y:ie}=Fr(z,I),de=s.a9.fromLngLat(c,g);let he,ye,Se=s.a_(1,de.y),Ie=0;do{if(Ie+=1,Ie>10)break;ye=V/Se,he=new s.a9(de.x+J*ye,de.y+ie*ye),Se=1/he.meterInMercatorCoordinateUnits()}while(Math.abs(V-ye*Se)>1e-12);return{center:he.toLngLat(),elevation:G,zoom:s.at(this.height/2/Math.tan(this.fovInRadians/2)/ye/this.tileSize)}}recalculateZoomAndCenter(c){if(this.elevation-c==0)return;const g=1/this.worldSize,b=s.as(1,this.center.lat)*this.worldSize,C=s.a9.fromLngLat(this.center,this.elevation),I=C.x/g,z=C.y/g,V=C.z/g,G=this.pitch,J=this.bearing,{x:ie,y:de,z:he}=Fr(G,J),ye=this.cameraToCenterDistance,Se=I+ye*-ie,Ie=z+ye*-de,Le=V+ye*he,{distanceToCenter:De,clampedElevation:Ve}=this._distanceToCenterFromAltElevationPitch(Le/b,c,G),He=De*b,Fe=new s.a9((Se+ie*He)*g,(Ie+de*He)*g,0).toLngLat(),We=s.as(1,Fe.lat),Je=s.at(this.height/2/Math.tan(this.fovInRadians/2)/De/We/this.tileSize);this._elevation=Ve,this._center=Fe,this.setZoom(Je)}_distanceToCenterFromAltElevationPitch(c,g,b){const C=-Math.cos(s.ap(b)),I=c-g;let z,V=g;return C*I>=0||Math.abs(C)<.1?(z=1e4,V=c+z*C):z=-I/C,{distanceToCenter:z,clampedElevation:V}}getCameraPoint(){const c=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(c*Math.sin(this.rollInRadians),c*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const c=s.as(1,this.center.lat)*this.worldSize;return ut(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/c).toLngLat()}getMercatorTileCoordinates(c){if(!c)return[0,0,1,1];const g=c.canonical.z>=0?1<<c.canonical.z:Math.pow(2,c.canonical.z);return[c.canonical.x/g,c.canonical.y/g,1/g/s.a5,1/g/s.a5]}}class Qa{constructor(c,g){this.min=c,this.max=g,this.center=s.a$([],s.b0([],this.min,this.max),.5)}quadrant(c){const g=[c%2==0,c<2],b=s.b1(this.min),C=s.b1(this.max);for(let I=0;I<g.length;I++)b[I]=g[I]?this.min[I]:this.center[I],C[I]=g[I]?this.center[I]:this.max[I];return C[2]=this.max[2],new Qa(b,C)}distanceX(c){return Math.max(Math.min(this.max[0],c[0]),this.min[0])-c[0]}distanceY(c){return Math.max(Math.min(this.max[1],c[1]),this.min[1])-c[1]}intersectsFrustum(c){let g=!0;for(let b=0;b<c.planes.length;b++){const C=this.intersectsPlane(c.planes[b]);if(C===0)return 0;C===1&&(g=!1)}return g?2:c.aabb.min[0]>this.max[0]||c.aabb.min[1]>this.max[1]||c.aabb.min[2]>this.max[2]||c.aabb.max[0]<this.min[0]||c.aabb.max[1]<this.min[1]||c.aabb.max[2]<this.min[2]?0:1}intersectsPlane(c){let g=c[3],b=c[3];for(let C=0;C<3;C++)c[C]>0?(g+=c[C]*this.min[C],b+=c[C]*this.max[C]):(b+=c[C]*this.min[C],g+=c[C]*this.max[C]);return g>=0?2:b<0?0:1}}class Md{distanceToTile2d(c,g,b,C){const I=C.distanceX([c,g]),z=C.distanceY([c,g]);return Math.hypot(I,z)}getWrap(c,g,b){return b}getTileBoundingVolume(c,g,b,C){var I,z;let V=0,G=0;if(C?.terrain){const ie=new s.a2(c.z,g,c.z,c.x,c.y),de=C.terrain.getMinMaxElevation(ie);V=(I=de.minElevation)!==null&&I!==void 0?I:Math.min(0,b),G=(z=de.maxElevation)!==null&&z!==void 0?z:Math.max(0,b)}const J=1<<c.z;return new Qa([g+c.x/J,c.y/J,V],[g+(c.x+1)/J,(c.y+1)/J,G])}allowVariableZoom(c,g){const b=c.fov*(Math.abs(Math.cos(c.rollInRadians))*c.height+Math.abs(Math.sin(c.rollInRadians))*c.width)/c.height,C=s.an(78.5-b/2,0,60);return!!g.terrain||c.pitch>C}allowWorldCopies(){return!0}prepareNextFrame(){}}class da{constructor(c,g,b){this.points=c,this.planes=g,this.aabb=b}static fromInvProjectionMatrix(c,g=1,b=0,C,I){const z=I?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],V=Math.pow(2,b),G=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((he=>(function(ye,Se,Ie,Le){const De=s.aH([],ye,Se),Ve=1/De[3]/Ie*Le;return s.b6(De,De,[Ve,Ve,1/De[3],Ve])})(he,c,g,V)));C&&(function(he,ye,Se,Ie){const Le=Ie?4:0,De=Ie?0:4;let Ve=0;const He=[],Fe=[];for(let Ze=0;Ze<4;Ze++){const rt=s.b2([],he[Ze+De],he[Ze+Le]),xt=s.b7(rt);s.a$(rt,rt,1/xt),He.push(xt),Fe.push(rt)}for(let Ze=0;Ze<4;Ze++){const rt=s.b8(he[Ze+Le],Fe[Ze],Se);Ve=rt!==null&&rt>=0?Math.max(Ve,rt):Math.max(Ve,He[Ze])}const We=(function(Ze,rt){const xt=s.b2([],Ze[rt[0]],Ze[rt[1]]),ht=s.b2([],Ze[rt[2]],Ze[rt[1]]),mt=[0,0,0,0];return s.b3(mt,s.b4([],xt,ht)),mt[3]=-s.b5(mt,Ze[rt[0]]),mt})(he,ye),Je=(function(Ze,rt){const xt=s.b9(Ze),ht=s.ba([],Ze,1/xt),mt=s.b2([],rt,s.a$([],ht,s.b5(rt,ht))),gt=s.b9(mt);if(gt>0){const tn=Math.sqrt(1-ht[3]*ht[3]),rn=s.a$([],ht,-ht[3]),Bt=s.b0([],rn,s.a$([],mt,tn/gt));return s.bb(rt,Bt)}return null})(Se,We);if(Je!==null){const Ze=Je/s.b5(Fe[0],We);Ve=Math.min(Ve,Ze)}for(let Ze=0;Ze<4;Ze++){const rt=Math.min(Ve,He[Ze]);he[Ze+De]=[he[Ze+Le][0]+Fe[Ze][0]*rt,he[Ze+Le][1]+Fe[Ze][1]*rt,he[Ze+Le][2]+Fe[Ze][2]*rt,1]}})(G,z[0],C,I);const J=z.map((he=>{const ye=s.b2([],G[he[0]],G[he[1]]),Se=s.b2([],G[he[2]],G[he[1]]),Ie=s.b3([],s.b4([],ye,Se)),Le=-s.b5(Ie,G[he[1]]);return Ie.concat(Le)})),ie=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],de=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const he of G)for(let ye=0;ye<3;ye++)ie[ye]=Math.min(ie[ye],he[ye]),de[ye]=Math.max(de[ye],he[ye]);return new da(G,J,new Qa(ie,de))}}class Zo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(c){this._helper.setMinZoom(c)}setMaxZoom(c){this._helper.setMaxZoom(c)}setMinPitch(c){this._helper.setMinPitch(c)}setMaxPitch(c){this._helper.setMaxPitch(c)}setRenderWorldCopies(c){this._helper.setRenderWorldCopies(c)}setBearing(c){this._helper.setBearing(c)}setPitch(c){this._helper.setPitch(c)}setRoll(c){this._helper.setRoll(c)}setFov(c){this._helper.setFov(c)}setZoom(c){this._helper.setZoom(c)}setCenter(c){this._helper.setCenter(c)}setElevation(c){this._helper.setElevation(c)}setMinElevationForCurrentTile(c){this._helper.setMinElevationForCurrentTile(c)}setPadding(c){this._helper.setPadding(c)}interpolatePadding(c,g,b){return this._helper.interpolatePadding(c,g,b)}isPaddingEqual(c){return this._helper.isPaddingEqual(c)}resize(c,g,b=!0){this._helper.resize(c,g,b)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(c){this._helper.setMaxBounds(c)}setConstrainOverride(c){this._helper.setConstrainOverride(c)}overrideNearFarZ(c,g){this._helper.overrideNearFarZ(c,g)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(c){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),c)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(c,g){}constructor(c){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(g,b)=>{b=s.an(+b,this.minZoom,this.maxZoom);const C={center:new s.V(g.lng,g.lat),zoom:b};let I=this._helper._lngRange;if(!this._helper._renderWorldCopies&&I===null){const Fe=179.9999999999;I=[-Fe,Fe]}const z=this.tileSize*s.aq(C.zoom);let V=0,G=z,J=0,ie=z,de=0,he=0;const{x:ye,y:Se}=this.size;if(this._helper._latRange){const Fe=this._helper._latRange;V=s.X(Fe[1])*z,G=s.X(Fe[0])*z,G-V<Se&&(de=Se/(G-V))}I&&(J=s.W(s.Y(I[0])*z,0,z),ie=s.W(s.Y(I[1])*z,0,z),ie<J&&(ie+=z),ie-J<ye&&(he=ye/(ie-J)));const{x:Ie,y:Le}=sn(z,g);let De,Ve;const He=Math.max(he||0,de||0);if(He){const Fe=new s.P(he?(ie+J)/2:Ie,de?(G+V)/2:Le);return C.center=Vn(z,Fe).wrap(),C.zoom+=s.at(He),C}if(this._helper._latRange){const Fe=Se/2;Le-Fe<V&&(Ve=V+Fe),Le+Fe>G&&(Ve=G-Fe)}if(I){const Fe=(J+ie)/2;let We=Ie;this._helper._renderWorldCopies&&(We=s.W(Ie,Fe-z/2,Fe+z/2));const Je=ye/2;We-Je<J&&(De=J+Je),We+Je>ie&&(De=ie-Je)}if(De!==void 0||Ve!==void 0){const Fe=new s.P(De??Ie,Ve??Le);C.center=Vn(z,Fe).wrap()}return C},this.applyConstrain=(g,b)=>this._helper.applyConstrain(g,b),this._helper=new Oh({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(g,b)=>this.defaultConstrain(g,b)},c),this._coveringTilesDetailsProvider=new Md}clone(){const c=new Zo;return c.apply(this),c}apply(c,g,b){this._helper.apply(c,g,b)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(c){const g=[new s.bc(0,c)];if(this._helper._renderWorldCopies){const b=this.screenPointToMercatorCoordinate(new s.P(0,0)),C=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),I=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),z=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),V=Math.floor(Math.min(b.x,C.x,I.x,z.x)),G=Math.floor(Math.max(b.x,C.x,I.x,z.x)),J=1;for(let ie=V-J;ie<=G+J;ie++)ie!==0&&g.push(new s.bc(ie,c))}return g}getCameraFrustum(){return da.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(c){const g=this.screenPointToLocation(this.centerPoint,c),b=c?c.getElevationForLngLatZoom(g,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(b)}setLocationAtPoint(c,g){const b=s.as(this.elevation,this.center.lat),C=this.screenPointToMercatorCoordinateAtZ(g,b),I=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,b),z=s.a9.fromLngLat(c),V=new s.a9(z.x-(C.x-I.x),z.y-(C.y-I.y));this.setCenter(V?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(c,g){return g?this.coordinatePoint(s.a9.fromLngLat(c),g.getElevationForLngLat(c,this),this._pixelMatrix3D):this.coordinatePoint(s.a9.fromLngLat(c))}screenPointToLocation(c,g){var b;return(b=this.screenPointToMercatorCoordinate(c,g))===null||b===void 0?void 0:b.toLngLat()}screenPointToMercatorCoordinate(c,g){if(g){const b=g.pointCoordinate(c);if(b!=null)return b}return this.screenPointToMercatorCoordinateAtZ(c)}screenPointToMercatorCoordinateAtZ(c,g){const b=g||0,C=[c.x,c.y,0,1],I=[c.x,c.y,1,1];s.aH(C,C,this._pixelMatrixInverse),s.aH(I,I,this._pixelMatrixInverse);const z=C[3],V=I[3],G=C[1]/z,J=I[1]/V,ie=C[2]/z,de=I[2]/V,he=ie===de?0:(b-ie)/(de-ie);return new s.a9(s.G.number(C[0]/z,I[0]/V,he)/this.worldSize,s.G.number(G,J,he)/this.worldSize,b)}coordinatePoint(c,g=0,b=this._pixelMatrix){const C=[c.x*this.worldSize,c.y*this.worldSize,g,1];return s.aH(C,C,b),new s.P(C[0]/C[3],C[1]/C[3])}getBounds(){const c=Math.max(0,this._helper._height/2-Ar(this));return new nn().extend(this.screenPointToLocation(new s.P(0,c))).extend(this.screenPointToLocation(new s.P(this._helper._width,c))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(c,g){return g?g.pointCoordinate(c)!=null:c.y>this.height/2-Ar(this)}calculatePosMatrix(c,g=!1,b){var C;const I=(C=c.key)!==null&&C!==void 0?C:s.bd(c.wrap,c.canonical.z,c.canonical.z,c.canonical.x,c.canonical.y),z=g?this._alignedPosMatrixCache:this._posMatrixCache;if(z.has(I)){const J=z.get(I);return b?J.f32:J.f64}const V=Or(c,this.worldSize);s.S(V,g?this._alignedProjMatrix:this._viewProjMatrix,V);const G={f64:V,f32:new Float32Array(V)};return z.set(I,G),b?G.f32:G.f64}calculateFogMatrix(c){const g=c.key,b=this._fogMatrixCacheF32;if(b.has(g))return b.get(g);const C=Or(c,this.worldSize);return s.S(C,this._fogMatrix,C),b.set(g,new Float32Array(C)),b.get(g)}calculateCenterFromCameraLngLatAlt(c,g,b,C){return this._helper.calculateCenterFromCameraLngLatAlt(c,g,b,C)}_calculateNearFarZIfNeeded(c,g,b){if(!this._helper.autoCalculateNearFarZ)return;const C=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),I=c-C*this._helper._pixelPerMeter/Math.cos(g),z=C<0?I:c,V=Math.PI/2+this.pitchInRadians,G=s.ap(this.fov)*(Math.abs(Math.cos(s.ap(this.roll)))*this.height+Math.abs(Math.sin(s.ap(this.roll)))*this.width)/this.height*(.5+b.y/this.height),J=Math.sin(G)*z/Math.sin(s.an(Math.PI-V-G,.01,Math.PI-.01)),ie=Ar(this),de=Math.atan(ie/this._helper.cameraToCenterDistance),he=s.ap(.75),ye=de>he?2*de*(.5+b.y/(2*ie)):he,Se=Math.sin(ye)*z/Math.sin(s.an(Math.PI-V-ye,.01,Math.PI-.01)),Ie=Math.min(J,Se);this._helper._farZ=1.01*(Math.cos(Math.PI/2-g)*Ie+z),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const c=this.centerOffset,g=sn(this.worldSize,this.center),b=g.x,C=g.y;this._helper._pixelPerMeter=s.as(1,this.center.lat)*this.worldSize;const I=s.ap(Math.min(this.pitch,$t)),z=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(I));let V;this._calculateNearFarZIfNeeded(z,I,c),V=new Float64Array(16),s.be(V,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.aB(this._invProjMatrix,V),V[8]=2*-c.x/this._helper._width,V[9]=2*c.y/this._helper._height,this._projectionMatrix=s.bf(V),s.Q(V,V,[1,-1,1]),s.O(V,V,[0,0,-this._helper.cameraToCenterDistance]),s.bg(V,V,-this.rollInRadians),s.bh(V,V,this.pitchInRadians),s.bg(V,V,-this.bearingInRadians),s.O(V,V,[-b,-C,0]),this._mercatorMatrix=s.Q([],V,[this.worldSize,this.worldSize,this.worldSize]),s.Q(V,V,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,V),s.O(V,V,[0,0,-this.elevation]),this._viewProjMatrix=V,this._invViewProjMatrix=s.aB([],V);const G=[0,0,-1,1];s.aH(G,G,this._invViewProjMatrix),this._cameraPosition=[G[0]/G[3],G[1]/G[3],G[2]/G[3]],this._fogMatrix=new Float64Array(16),s.be(this._fogMatrix,this.fovInRadians,this.width/this.height,z,this._helper._farZ),this._fogMatrix[8]=2*-c.x/this.width,this._fogMatrix[9]=2*c.y/this.height,s.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.O(this._fogMatrix,this._fogMatrix,[-b,-C,0]),s.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,V);const J=this._helper._width%2/2,ie=this._helper._height%2/2,de=Math.cos(this.bearingInRadians),he=Math.sin(-this.bearingInRadians),ye=b-Math.round(b)+de*J+he*ie,Se=C-Math.round(C)+de*ie+he*J,Ie=new Float64Array(V);if(s.O(Ie,Ie,[ye>.5?ye-1:ye,Se>.5?Se-1:Se,0]),this._alignedProjMatrix=Ie,V=s.aB(new Float64Array(16),this._pixelMatrix),!V)throw new Error("failed to invert matrix");this._pixelMatrixInverse=V,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const c=this.screenPointToMercatorCoordinate(new s.P(0,0)),g=[c.x*this.worldSize,c.y*this.worldSize,0,1];return s.aH(g,g,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const c=s.as(1,this.center.lat)*this.worldSize;return ut(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/c).toLngLat()}lngLatToCameraDepth(c,g){const b=s.a9.fromLngLat(c),C=[b.x*this.worldSize,b.y*this.worldSize,g,1];return s.aH(C,C,this._viewProjMatrix),C[2]/C[3]}getProjectionData(c){const{overscaledTileID:g,aligned:b,applyTerrainMatrix:C}=c,I=this._helper.getMercatorTileCoordinates(g),z=g?this.calculatePosMatrix(g,b,!0):null;let V;return V=g&&g.terrainRttPosMatrix32f&&C?g.terrainRttPosMatrix32f:z||s.bi(),{mainMatrix:V,tileMercatorCoords:I,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:V}}isLocationOccluded(c){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(c,g,b){return 1}transformLightDirection(c){return s.b1(c)}getRayDirectionFromPixel(c){throw new Error("Not implemented.")}projectTileCoordinates(c,g,b,C){const I=this.calculatePosMatrix(b);let z;C?(z=[c,g,C(c,g),1],s.aH(z,z,I)):(z=[c,g,0,1],gl(z,z,I));const V=z[3];return{point:new s.P(z[0]/V,z[1]/V),signedDistanceFromCamera:V,isOccluded:!1}}populateCache(c){for(const g of c)this.calculatePosMatrix(g)}getMatrixForModel(c,g){const b=s.a9.fromLngLat(c,g),C=b.meterInMercatorCoordinateUnits(),I=s.bj();return s.O(I,I,[b.x,b.y,b.z]),s.bg(I,I,Math.PI),s.bh(I,I,Math.PI/2),s.Q(I,I,[-C,C,C]),I}getProjectionDataForCustomLayer(c=!0){const g=new s.a2(0,0,0,0,0),b=this.getProjectionData({overscaledTileID:g,applyGlobeMatrix:c}),C=Or(g,this.worldSize);s.S(C,this._viewProjMatrix,C),b.tileMercatorCoords=[0,0,1,1];const I=[s.a5,s.a5,this.worldSize/this._helper.pixelsPerMeter],z=s.bk();return s.Q(z,C,I),b.fallbackMatrix=z,b.mainMatrix=z,b}getFastPathSimpleProjectionMatrix(c){return this.calculatePosMatrix(c)}}function fa(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Dm(P){if(P.useSlerp)if(P.k<1){const c=s.bl(P.startEulerAngles.roll,P.startEulerAngles.pitch,P.startEulerAngles.bearing),g=s.bl(P.endEulerAngles.roll,P.endEulerAngles.pitch,P.endEulerAngles.bearing),b=new Float64Array(4);s.bm(b,c,g,P.k);const C=s.bn(b);P.tr.setRoll(C.roll),P.tr.setPitch(C.pitch),P.tr.setBearing(C.bearing)}else P.tr.setRoll(P.endEulerAngles.roll),P.tr.setPitch(P.endEulerAngles.pitch),P.tr.setBearing(P.endEulerAngles.bearing);else P.tr.setRoll(s.G.number(P.startEulerAngles.roll,P.endEulerAngles.roll,P.k)),P.tr.setPitch(s.G.number(P.startEulerAngles.pitch,P.endEulerAngles.pitch,P.k)),P.tr.setBearing(s.G.number(P.startEulerAngles.bearing,P.endEulerAngles.bearing,P.k))}function Rd(P,c,g,b,C){const I=C.padding,z=sn(C.worldSize,g.getNorthWest()),V=sn(C.worldSize,g.getNorthEast()),G=sn(C.worldSize,g.getSouthEast()),J=sn(C.worldSize,g.getSouthWest()),ie=s.ap(-b),de=z.rotate(ie),he=V.rotate(ie),ye=G.rotate(ie),Se=J.rotate(ie),Ie=new s.P(Math.max(de.x,he.x,Se.x,ye.x),Math.max(de.y,he.y,Se.y,ye.y)),Le=new s.P(Math.min(de.x,he.x,Se.x,ye.x),Math.min(de.y,he.y,Se.y,ye.y)),De=Ie.sub(Le),Ve=(C.width-(I.left+I.right+c.left+c.right))/De.x,He=(C.height-(I.top+I.bottom+c.top+c.bottom))/De.y;if(He<0||Ve<0)return void fa();const Fe=Math.min(s.at(C.scale*Math.min(Ve,He)),P.maxZoom),We=s.P.convert(P.offset),Je=new s.P((c.left-c.right)/2,(c.top-c.bottom)/2).rotate(s.ap(b)),Ze=We.add(Je).mult(C.scale/s.aq(Fe));return{center:Vn(C.worldSize,z.add(G).div(2).sub(Ze)),zoom:Fe,bearing:b}}class Id{get useGlobeControls(){return!1}handlePanInertia(c,g){const b=c.mag(),C=Math.abs(Ar(g));return{easingOffset:c.mult(Math.min(.75*C/b,1)),easingCenter:g.center}}handleMapControlsRollPitchBearingZoom(c,g){c.bearingDelta&&g.setBearing(g.bearing+c.bearingDelta),c.pitchDelta&&g.setPitch(g.pitch+c.pitchDelta),c.rollDelta&&g.setRoll(g.roll+c.rollDelta),c.zoomDelta&&g.setZoom(g.zoom+c.zoomDelta)}handleMapControlsPan(c,g,b){c.around.distSqr(g.centerPoint)<.01||g.setLocationAtPoint(b,c.around)}cameraForBoxAndBearing(c,g,b,C,I){return Rd(c,g,b,C,I)}handleJumpToCenterZoom(c,g){c.zoom!==(g.zoom!==void 0?+g.zoom:c.zoom)&&c.setZoom(+g.zoom),g.center!==void 0&&c.setCenter(s.V.convert(g.center))}handleEaseTo(c,g){const b=c.zoom,C=c.padding,I={roll:c.roll,pitch:c.pitch,bearing:c.bearing},z={roll:g.roll===void 0?c.roll:g.roll,pitch:g.pitch===void 0?c.pitch:g.pitch,bearing:g.bearing===void 0?c.bearing:g.bearing},V=g.zoom!==void 0,G=!c.isPaddingEqual(g.padding);let J=!1;const ie=V?+g.zoom:c.zoom;let de=c.centerPoint.add(g.offsetAsPoint);const he=c.screenPointToLocation(de),{center:ye,zoom:Se}=c.applyConstrain(s.V.convert(g.center||he),ie??b);Mc(c,ye);const Ie=sn(c.worldSize,he),Le=sn(c.worldSize,ye).sub(Ie),De=s.aq(Se-b);return J=Se!==b,{easeFunc:Ve=>{if(J&&c.setZoom(s.G.number(b,Se,Ve)),s.bo(I,z)||Dm({startEulerAngles:I,endEulerAngles:z,tr:c,k:Ve,useSlerp:I.roll!=z.roll}),G&&(c.interpolatePadding(C,g.padding,Ve),de=c.centerPoint.add(g.offsetAsPoint)),g.around)c.setLocationAtPoint(g.around,g.aroundPoint);else{const He=s.aq(c.zoom-b),Fe=Se>b?Math.min(2,De):Math.max(.5,De),We=Math.pow(Fe,1-Ve),Je=Vn(c.worldSize,Ie.add(Le.mult(Ve*We)).mult(He));c.setLocationAtPoint(c.renderWorldCopies?Je.wrap():Je,de)}},isZooming:J,elevationCenter:ye}}handleFlyTo(c,g){const b=g.zoom!==void 0,C=c.zoom,I=c.applyConstrain(s.V.convert(g.center||g.locationAtOffset),b?+g.zoom:C),z=I.center,V=I.zoom;Mc(c,z);const G=sn(c.worldSize,g.locationAtOffset),J=sn(c.worldSize,z).sub(G),ie=J.mag(),de=s.aq(V-C);let he;if(g.minZoom!==void 0){const ye=Math.min(+g.minZoom,C,V),Se=c.applyConstrain(z,ye).zoom;he=s.aq(Se-C)}return{easeFunc:(ye,Se,Ie,Le)=>{c.setZoom(ye===1?V:C+s.at(Se));const De=ye===1?z:Vn(c.worldSize,G.add(J.mult(Ie)).mult(Se));c.setLocationAtPoint(c.renderWorldCopies?De.wrap():De,Le)},scaleOfZoom:de,targetCenter:z,scaleOfMinZoom:he,pixelPathLength:ie}}}class ui{constructor(c,g,b){this.blendFunction=c,this.blendColor=g,this.mask=b}}ui.Replace=[1,0],ui.disabled=new ui(ui.Replace,s.bp.transparent,[!1,!1,!1,!1]),ui.unblended=new ui(ui.Replace,s.bp.transparent,[!0,!0,!0,!0]),ui.alphaBlended=new ui([1,771],s.bp.transparent,[!0,!0,!0,!0]);const Sh=2305;class Cr{constructor(c,g,b){this.enable=c,this.mode=g,this.frontFace=b}}Cr.disabled=new Cr(!1,1029,Sh),Cr.backCCW=new Cr(!0,1029,Sh),Cr.frontCCW=new Cr(!0,1028,Sh);class fr{constructor(c,g,b){this.func=c,this.mask=g,this.range=b}}fr.ReadOnly=!1,fr.ReadWrite=!0,fr.disabled=new fr(519,fr.ReadOnly,[0,1]);const Dd=7680;class Nr{constructor(c,g,b,C,I,z){this.test=c,this.ref=g,this.mask=b,this.fail=C,this.depthFail=I,this.pass=z}}Nr.disabled=new Nr({func:519,mask:0},0,0,Dd,Dd,Dd);const Lm=new WeakMap;function vl(P){var c;if(Lm.has(P))return Lm.get(P);{const g=(c=P.getParameter(P.VERSION))===null||c===void 0?void 0:c.startsWith("WebGL 2.0");return Lm.set(P,g),g}}class Ch{get awaitingQuery(){return!!this._readbackQueue}constructor(c){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=c;const g=c.context,b=g.gl;this._texFormat=b.RGBA,this._texType=b.UNSIGNED_BYTE;const C=new s.aW;C.emplaceBack(-1,-1),C.emplaceBack(2,-1),C.emplaceBack(-1,2);const I=new s.aY;I.emplaceBack(0,1,2),this._fullscreenTriangle=new yi(g.createVertexBuffer(C,yl.members),g.createIndexBuffer(I),s.aX.simpleSegment(0,0,C.length,I.length)),this._resultBuffer=new Uint8Array(4),g.activeTexture.set(b.TEXTURE1);const z=b.createTexture();b.bindTexture(b.TEXTURE_2D,z),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texImage2D(b.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=g.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(z),vl(b)&&(this._pbo=b.createBuffer(),b.bindBuffer(b.PIXEL_PACK_BUFFER,this._pbo),b.bufferData(b.PIXEL_PACK_BUFFER,4,b.STREAM_READ),b.bindBuffer(b.PIXEL_PACK_BUFFER,null))}destroy(){const c=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),c.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(c,g){const b=this._updateCount;return this._readbackQueue?b>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():b>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(c,g),this._updateCount++,this._measuredError}_bindFramebuffer(){const c=this._cachedRenderContext.context,g=c.gl;c.activeTexture.set(g.TEXTURE1),g.bindTexture(g.TEXTURE_2D,this._fbo.colorAttachment.get()),c.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(c,g){const b=this._cachedRenderContext.context,C=b.gl;if(this._bindFramebuffer(),b.viewport.set([0,0,this._texWidth,this._texHeight]),b.clear({color:s.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(b,C.TRIANGLES,fr.disabled,Nr.disabled,ui.unblended,Cr.disabled,((I,z)=>({u_input:I,u_output_expected:z}))(c,g),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&vl(C)){C.bindBuffer(C.PIXEL_PACK_BUFFER,this._pbo),C.readBuffer(C.COLOR_ATTACHMENT0),C.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),C.bindBuffer(C.PIXEL_PACK_BUFFER,null);const I=C.fenceSync(C.SYNC_GPU_COMMANDS_COMPLETE,0);C.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:I}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const c=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&vl(c)){const g=c.clientWaitSync(this._readbackQueue.sync,0,0);if(g===c.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(g===c.TIMEOUT_EXPIRED)return;c.bindBuffer(c.PIXEL_PACK_BUFFER,this._pbo),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),c.bindBuffer(c.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),c.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ch._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(c){let g=0;return g+=c[0]/256,g+=c[1]/65536,g+=c[2]/16777216,c[3]<127&&(g=-g),g/128}}const Th=s.a5/128;function lb(P,c){const g=P.granularity!==void 0?Math.max(P.granularity,1):1,b=g+(P.generateBorders?2:0),C=g+(P.extendToNorthPole||P.generateBorders?1:0)+(P.extendToSouthPole||P.generateBorders?1:0),I=b+1,z=C+1,V=P.generateBorders?-1:0,G=P.generateBorders||P.extendToNorthPole?-1:0,J=g+(P.generateBorders?1:0),ie=g+(P.generateBorders||P.extendToSouthPole?1:0),de=I*z,he=b*C*6,ye=I*z>65536;if(ye&&c==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const Se=ye||c==="32bit",Ie=new Int16Array(2*de);let Le=0;for(let He=G;He<=ie;He++)for(let Fe=V;Fe<=J;Fe++){let We=Fe/g*s.a5;Fe===-1&&(We=-Th),Fe===g+1&&(We=s.a5+Th);let Je=He/g*s.a5;He===-1&&(Je=P.extendToNorthPole?s.br:-Th),He===g+1&&(Je=P.extendToSouthPole?s.bs:s.a5+Th),Ie[Le++]=We,Ie[Le++]=Je}const De=Se?new Uint32Array(he):new Uint16Array(he);let Ve=0;for(let He=0;He<C;He++)for(let Fe=0;Fe<b;Fe++){const We=Fe+1+He*I,Je=Fe+(He+1)*I,Ze=Fe+1+(He+1)*I;De[Ve++]=Fe+He*I,De[Ve++]=Je,De[Ve++]=We,De[Ve++]=We,De[Ve++]=Je,De[Ve++]=Ze}return{vertices:Ie.buffer.slice(0),indices:De.buffer.slice(0),uses32bitIndices:Se}}const $m=new s.aV({fill:new s.bt(128,2),line:new s.bt(512,0),tile:new s.bt(128,32),stencil:new s.bt(128,1),circle:3});class Sv{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Vi.projectionGlobe}get vertexShaderPreludeCode(){return Vi.projectionMercator.vertexSource}get subdivisionGranularity(){return $m}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(c){this._errorMeasurement||(this._errorMeasurement=new Ch(c));const g=s.X(this._errorQueryLatitudeDegrees),b=2*Math.atan(Math.exp(Math.PI-g*Math.PI*2))-.5*Math.PI,C=this._errorMeasurement.updateErrorLoop(g,b),I=A();C!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=C,this._errorMeasurementLastChangeTime=I);const z=Math.min(Math.max((I-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bv(z))}_getMeshKey(c){return`${c.granularity.toString(36)}_${c.generateBorders?"b":""}${c.extendToNorthPole?"n":""}${c.extendToSouthPole?"s":""}`}getMeshFromTileID(c,g,b,C,I){const z=(I==="stencil"?$m.stencil:$m.tile).getGranularityForZoomLevel(g.z);return this._getMesh(c,{granularity:z,generateBorders:b,extendToNorthPole:g.y===0&&C,extendToSouthPole:g.y===(1<<g.z)-1&&C})}_getMesh(c,g){const b=this._getMeshKey(g);if(b in this._tileMeshCache)return this._tileMeshCache[b];const C=(function(I,z){const V=lb(z,"16bit"),G=s.aW.deserialize({arrayBuffer:V.vertices,length:V.vertices.byteLength/2/2}),J=s.aY.deserialize({arrayBuffer:V.indices,length:V.indices.byteLength/2/3});return new yi(I.createVertexBuffer(G,yl.members),I.createIndexBuffer(J),s.aX.simpleSegment(0,0,G.length,J.length))})(c,g);return this._tileMeshCache[b]=C,C}recalculate(c){}hasTransition(){const c=A();let g=!1;return g=g||(c-this._errorMeasurementLastChangeTime)/1e3<.7,g=g||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,g}setErrorQueryLatitudeDegrees(c){this._errorQueryLatitudeDegrees=c}}const bS=new s.t({type:new s.D(s.u.projection.type)});class Cv extends s.E{constructor(c){super(),this._transitionable=new s.x(bS,void 0),this.setProjection(c),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.H(0)),this._mercatorProjection=new ts,this._verticalPerspectiveProjection=new Sv}get transitionState(){const c=this.properties.get("type");if(typeof c=="string"&&c==="mercator")return 0;if(typeof c=="string"&&c==="vertical-perspective")return 1;if(c instanceof s.bw){if(c.from==="vertical-perspective"&&c.to==="mercator")return 1-c.transition;if(c.from==="mercator"&&c.to==="vertical-perspective")return c.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(c){this._mercatorProjection.updateGPUdependent(c),this._verticalPerspectiveProjection.updateGPUdependent(c)}getMeshFromTileID(c,g,b,C,I){return this.currentProjection.getMeshFromTileID(c,g,b,C,I)}setProjection(c){this._transitionable.setValue("type",c?.type||"mercator")}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}setErrorQueryLatitudeDegrees(c){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(c),this._mercatorProjection.setErrorQueryLatitudeDegrees(c)}}function pa(P){const c=Ld(P.worldSize,P.center.lat);return 2*Math.PI*c}function Rc(P,c,g,b,C){const I=1/(1<<C),z=c/s.a5*I+b*I,V=s.by((P/s.a5*I+g*I)*Math.PI*2+Math.PI,2*Math.PI),G=2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI,J=Math.cos(G),ie=new Float64Array(3);return ie[0]=Math.sin(V)*J,ie[1]=Math.sin(G),ie[2]=Math.cos(V)*J,ie}function Ui(P){return(function(c,g){const b=Math.cos(g),C=new Float64Array(3);return C[0]=Math.sin(c)*b,C[1]=Math.sin(g),C[2]=Math.cos(c)*b,C})(P.lng*Math.PI/180,P.lat*Math.PI/180)}function Ld(P,c){return P/(2*Math.PI)/Math.cos(c*Math.PI/180)}function zm(P){const c=Math.asin(P[1])/Math.PI*180,g=Math.sqrt(P[0]*P[0]+P[2]*P[2]);if(g>1e-6){const b=P[0]/g,C=Math.acos(P[2]/g),I=(b>0?C:-C)/Math.PI*180;return new s.V(s.W(I,-180,180),c)}return new s.V(0,c)}function Nm(P){return Math.cos(P*Math.PI/180)}function uo(P,c){const g=Nm(P),b=Nm(c);return s.at(b/g)}function cb(P,c){const g=P.rotate(c.bearingInRadians),b=c.zoom+uo(c.center.lat,0),C=s.bu(1/Nm(c.center.lat),1/Nm(Math.min(Math.abs(c.center.lat),60)),s.bx(b,7,3,0,1)),I=360/pa({worldSize:c.worldSize,center:{lat:c.center.lat}});return new s.V(c.center.lng-g.x*I*C,s.an(c.center.lat+g.y*I,-s.ao,s.ao))}function Ty(P){const c=.5*P,g=Math.sin(c),b=Math.cos(c);return Math.log(g+b)-Math.log(b-g)}function ub(P,c,g,b){const C=P.lat+g*b;if(Math.abs(g)>1){const I=(Math.sign(P.lat+g)!==Math.sign(P.lat)?-Math.abs(P.lat):Math.abs(P.lat))*Math.PI/180,z=Math.abs(P.lat+g)*Math.PI/180,V=Ty(I+b*(z-I)),G=Ty(I),J=Ty(z);return new s.V(P.lng+c*((V-G)/(J-G)),C)}return new s.V(P.lng+c*b,C)}class wS{constructor(c){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=c}swapBuffers(){if(!this._hadAnyChanges)return;const c=this._cachePrevious;this._cachePrevious=this._cache,this._cache=c,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(c,g,b,C){const I=`${c.z}_${c.x}_${c.y}_${C?.terrain?"t":""}`,z=this._cache.get(I);if(z)return z;const V=this._cachePrevious.get(I);if(V)return this._cache.set(I,V),V;const G=this._boundingVolumeFactory(c,g,b,C);return this._cache.set(I,G),this._hadAnyChanges=!0,G}}class Kf{constructor(c,g,b,C){this.min=b,this.max=C,this.points=c,this.planes=g}static fromAabb(c,g){const b=[];for(let C=0;C<8;C++)b.push([1&~C?c[0]:g[0],(C>>1&1)==1?g[1]:c[1],(C>>2&1)==1?g[2]:c[2]]);return new Kf(b,[[-1,0,0,g[0]],[1,0,0,-c[0]],[0,-1,0,g[1]],[0,1,0,-c[1]],[0,0,-1,g[2]],[0,0,1,-c[2]]],c,g)}static fromCenterSizeAngles(c,g,b){const C=s.bB([],b[0],b[1],b[2]),I=s.bC([],[g[0],0,0],C),z=s.bC([],[0,g[1],0],C),V=s.bC([],[0,0,g[2]],C),G=[...c],J=[...c];for(let de=0;de<8;de++)for(let he=0;he<3;he++){const ye=c[he]+I[he]*(1&~de?-1:1)+z[he]*((de>>1&1)==1?1:-1)+V[he]*((de>>2&1)==1?1:-1);G[he]=Math.min(G[he],ye),J[he]=Math.max(J[he],ye)}const ie=[];for(let de=0;de<8;de++){const he=[...c];s.b0(he,he,s.a$([],I,1&~de?-1:1)),s.b0(he,he,s.a$([],z,(de>>1&1)==1?1:-1)),s.b0(he,he,s.a$([],V,(de>>2&1)==1?1:-1)),ie.push(he)}return new Kf(ie,[[...I,-s.b5(I,ie[0])],[...z,-s.b5(z,ie[0])],[...V,-s.b5(V,ie[0])],[-I[0],-I[1],-I[2],-s.b5(I,ie[7])],[-z[0],-z[1],-z[2],-s.b5(z,ie[7])],[-V[0],-V[1],-V[2],-s.b5(V,ie[7])]],G,J)}intersectsFrustum(c){let g=!0;const b=this.points.length,C=this.planes.length,I=c.planes.length,z=c.points.length;for(let V=0;V<I;V++){const G=c.planes[V];let J=0;for(let ie=0;ie<b;ie++){const de=this.points[ie];G[0]*de[0]+G[1]*de[1]+G[2]*de[2]+G[3]>=0&&J++}if(J===0)return 0;J<b&&(g=!1)}if(g)return 2;for(let V=0;V<C;V++){const G=this.planes[V];let J=0;for(let ie=0;ie<z;ie++){const de=c.points[ie];G[0]*de[0]+G[1]*de[1]+G[2]*de[2]+G[3]>=0&&J++}if(J===0)return 0}return 1}intersectsPlane(c){const g=this.points.length;let b=0;for(let C=0;C<g;C++){const I=this.points[C];c[0]*I[0]+c[1]*I[1]+c[2]*I[2]+c[3]>=0&&b++}return b===g?2:b===0?0:1}}function ky(P,c,g){const b=P-c;return b<0?-b:Math.max(0,b-g)}function Jf(P,c,g,b,C){const I=P-g;let z;return z=I<0?Math.min(-I,1+I-C):I>1?Math.min(Math.max(I-C,0),1-I):0,Math.max(z,ky(c,b,C))}class Tv{constructor(){this._boundingVolumeCache=new wS(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(c,g,b,C){const I=1<<b.z,z=1/I,V=b.x/I,G=b.y/I;let J=2;return J=Math.min(J,Jf(c,g,V,G,z)),J=Math.min(J,Jf(c,g,V+.5,-G-z,z)),J=Math.min(J,Jf(c,g,V+.5,2-G-z,z)),J}getWrap(c,g,b){const C=1<<g.z,I=1/C,z=g.x/C,V=ky(c.x,z,I),G=ky(c.x,z-1,I),J=ky(c.x,z+1,I),ie=Math.min(V,G,J);return ie===J?1:ie===G?-1:0}allowVariableZoom(c,g){return an(c,g)>4}allowWorldCopies(){return!1}getTileBoundingVolume(c,g,b,C){return this._boundingVolumeCache.getTileBoundingVolume(c,g,b,C)}_computeTileBoundingVolume(c,g,b,C){var I,z;let V=0,G=0;if(C?.terrain){const J=new s.a2(c.z,g,c.z,c.x,c.y),ie=C.terrain.getMinMaxElevation(J);V=(I=ie.minElevation)!==null&&I!==void 0?I:Math.min(0,b),G=(z=ie.maxElevation)!==null&&z!==void 0?z:Math.max(0,b)}if(V/=s.bE,G/=s.bE,V+=1,G+=1,c.z<=0)return Kf.fromAabb([-G,-G,-G],[G,G,G]);if(c.z===1)return Kf.fromAabb([c.x===0?-G:0,c.y===0?0:-G,-G],[c.x===0?0:G,c.y===0?G:0,G]);{const J=[Rc(0,0,c.x,c.y,c.z),Rc(s.a5,0,c.x,c.y,c.z),Rc(s.a5,s.a5,c.x,c.y,c.z),Rc(0,s.a5,c.x,c.y,c.z)],ie=[];for(const mt of J)ie.push(s.a$([],mt,G));if(G!==V)for(const mt of J)ie.push(s.a$([],mt,V));c.y===0&&ie.push([0,1,0]),c.y===(1<<c.z)-1&&ie.push([0,-1,0]);const de=[1,1,1],he=[-1,-1,-1];for(const mt of ie)for(let gt=0;gt<3;gt++)de[gt]=Math.min(de[gt],mt[gt]),he[gt]=Math.max(he[gt],mt[gt]);const ye=Rc(s.a5/2,s.a5/2,c.x,c.y,c.z),Se=s.b4([],[0,1,0],ye);s.b3(Se,Se);const Ie=s.b4([],ye,Se);s.b3(Ie,Ie);const Le=s.b4([],J[2],J[1]);s.b3(Le,Le);const De=s.b4([],J[0],J[3]);s.b3(De,De),ie.push(s.a$([],ye,G)),c.y>=(1<<c.z)/2&&ie.push(s.a$([],Rc(s.a5/2,0,c.x,c.y,c.z),G)),c.y<(1<<c.z)/2&&ie.push(s.a$([],Rc(s.a5/2,s.a5,c.x,c.y,c.z),G));const Ve=Bm(ye,ie),He=Bm(Ie,ie),Fe=[-ye[0],-ye[1],-ye[2],Ve.max],We=[ye[0],ye[1],ye[2],-Ve.min],Je=[-Ie[0],-Ie[1],-Ie[2],He.max],Ze=[Ie[0],Ie[1],Ie[2],-He.min],rt=[...Le,0],xt=[...De,0],ht=[];return c.y===0?ht.push(s.bD(xt,rt,Fe),s.bD(xt,rt,We)):ht.push(s.bD(Je,rt,Fe),s.bD(Je,rt,We),s.bD(Je,xt,Fe),s.bD(Je,xt,We)),c.y===(1<<c.z)-1?ht.push(s.bD(xt,rt,Fe),s.bD(xt,rt,We)):ht.push(s.bD(Ze,rt,Fe),s.bD(Ze,rt,We),s.bD(Ze,xt,Fe),s.bD(Ze,xt,We)),new Kf(ht,[Fe,We,Je,Ze,rt,xt],de,he)}}}function Bm(P,c){let g=1/0,b=-1/0;for(const C of c){const I=s.b5(P,C);g=Math.min(g,I),b=Math.max(b,I)}return{min:g,max:b}}class ep{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(c){this._helper.setMinZoom(c)}setMaxZoom(c){this._helper.setMaxZoom(c)}setMinPitch(c){this._helper.setMinPitch(c)}setMaxPitch(c){this._helper.setMaxPitch(c)}setRenderWorldCopies(c){this._helper.setRenderWorldCopies(c)}setBearing(c){this._helper.setBearing(c)}setPitch(c){this._helper.setPitch(c)}setRoll(c){this._helper.setRoll(c)}setFov(c){this._helper.setFov(c)}setZoom(c){this._helper.setZoom(c)}setCenter(c){this._helper.setCenter(c)}setElevation(c){this._helper.setElevation(c)}setMinElevationForCurrentTile(c){this._helper.setMinElevationForCurrentTile(c)}setPadding(c){this._helper.setPadding(c)}interpolatePadding(c,g,b){return this._helper.interpolatePadding(c,g,b)}isPaddingEqual(c){return this._helper.isPaddingEqual(c)}resize(c,g){this._helper.resize(c,g)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(c){this._helper.setMaxBounds(c)}setConstrainOverride(c){this._helper.setConstrainOverride(c)}overrideNearFarZ(c,g){this._helper.overrideNearFarZ(c,g)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(c){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),c)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(c){}constructor(c){this._cachedClippingPlane=s.bF(),this._projectionMatrix=s.bj(),this._globeViewProjMatrix32f=s.bi(),this._globeViewProjMatrixNoCorrection=s.bj(),this._globeViewProjMatrixNoCorrectionInverted=s.bj(),this._globeProjMatrixInverted=s.bj(),this._cameraPosition=s.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(g,b)=>{const C=s.an(g.lat,-s.ao,s.ao),I=s.an(+b,this.minZoom+uo(0,C),this.maxZoom);return{center:new s.V(g.lng,C),zoom:I}},this.applyConstrain=(g,b)=>this._helper.applyConstrain(g,b),this._helper=new Oh({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(g,b)=>this.defaultConstrain(g,b)},c),this._coveringTilesDetailsProvider=new Tv}clone(){const c=new ep;return c.apply(this),c}apply(c,g){this._globeLatitudeErrorCorrectionRadians=g||0,this._helper.apply(c)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const c=s.bz();return c[0]=this._cameraPosition[0],c[1]=this._cameraPosition[1],c[2]=this._cameraPosition[2],c}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(c){const{overscaledTileID:g,applyGlobeMatrix:b}=c,C=this._helper.getMercatorTileCoordinates(g);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:C,clippingPlane:this._cachedClippingPlane,projectionTransition:b?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(c){const g=this.pitchInRadians,b=this.cameraToCenterDistance/c,C=Math.sin(g)*b,I=Math.cos(g)*b+1,z=1/Math.sqrt(C*C+I*I)*1;let V=-C,G=I;const J=Math.sqrt(V*V+G*G);V/=J,G/=J;const ie=[0,V,G];s.bG(ie,ie,[0,0,0],-this.bearingInRadians),s.bH(ie,ie,[0,0,0],-1*this.center.lat*Math.PI/180),s.bI(ie,ie,[0,0,0],this.center.lng*Math.PI/180);const de=1/s.b7(ie);return s.a$(ie,ie,de),[...ie,-z*de]}isLocationOccluded(c){return!this.isSurfacePointVisible(Ui(c))}transformLightDirection(c){const g=this._helper._center.lng*Math.PI/180,b=this._helper._center.lat*Math.PI/180,C=Math.cos(b),I=[Math.sin(g)*C,Math.sin(b),Math.cos(g)*C],z=[I[2],0,-I[0]],V=[0,0,0];s.b4(V,z,I),s.b3(z,z),s.b3(V,V);const G=[0,0,0];return s.b3(G,[z[0]*c[0]+V[0]*c[1]+I[0]*c[2],z[1]*c[0]+V[1]*c[1]+I[1]*c[2],z[2]*c[0]+V[2]*c[1]+I[2]*c[2]]),G}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(c,g,b){const C=(function(V,G,J){const ie=1/(1<<J.z);return new s.a9(V/s.a5*ie+J.x*ie,G/s.a5*ie+J.y*ie)})(c,g,b.canonical),I=(z=C.y,[s.by(C.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-z*Math.PI*2))-.5*Math.PI]);var z;return this.getCircleRadiusCorrection()/Math.cos(I[1])}projectTileCoordinates(c,g,b,C){const I=b.canonical,z=Rc(c,g,I.x,I.y,I.z),V=1+(C?C(c,g):0)/s.bE,G=[z[0]*V,z[1]*V,z[2]*V,1];s.aH(G,G,this._globeViewProjMatrixNoCorrection);const J=this._cachedClippingPlane,ie=J[0]*z[0]+J[1]*z[1]+J[2]*z[2]+J[3]<0;return{point:new s.P(G[0]/G[3],G[1]/G[3]),signedDistanceFromCamera:G[3],isOccluded:ie}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const c=Ld(this.worldSize,this.center.lat),g=s.bk(),b=s.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*c),s.be(g,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const C=this.centerOffset;g[8]=2*-C.x/this._helper._width,g[9]=2*C.y/this._helper._height,this._projectionMatrix=s.bf(g),this._globeProjMatrixInverted=s.bk(),s.aB(this._globeProjMatrixInverted,g),s.O(g,g,[0,0,-this.cameraToCenterDistance]),s.bg(g,g,this.rollInRadians),s.bh(g,g,-this.pitchInRadians),s.bg(g,g,this.bearingInRadians),s.O(g,g,[0,0,-c]);const I=s.bz();I[0]=c,I[1]=c,I[2]=c,s.bh(b,g,this.center.lat*Math.PI/180),s.bJ(b,b,-this.center.lng*Math.PI/180),s.Q(b,b,I),this._globeViewProjMatrixNoCorrection=b,s.bh(g,g,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bJ(g,g,-this.center.lng*Math.PI/180),s.Q(g,g,I),this._globeViewProjMatrix32f=new Float32Array(g),this._globeViewProjMatrixNoCorrectionInverted=s.bk(),s.aB(this._globeViewProjMatrixNoCorrectionInverted,b);const z=s.bz();this._cameraPosition=s.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/c,s.bG(this._cameraPosition,this._cameraPosition,z,-this.rollInRadians),s.bH(this._cameraPosition,this._cameraPosition,z,this.pitchInRadians),s.bG(this._cameraPosition,this._cameraPosition,z,-this.bearingInRadians),s.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bH(this._cameraPosition,this._cameraPosition,z,-this.center.lat*Math.PI/180),s.bI(this._cameraPosition,this._cameraPosition,z,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(c);const V=s.bf(this._globeViewProjMatrixNoCorrectionInverted);s.Q(V,V,[1,1,-1]),this._cachedFrustum=da.fromInvProjectionMatrix(V,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(c){s.w("calculateFogMatrix is not supported on globe projection.");const g=s.bk();return s.ar(g),g}getVisibleUnwrappedCoordinates(c){return[new s.bc(0,c)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(c){c&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(c,g){if(!this._globeViewProjMatrixNoCorrection)return 1;const b=Ui(c);s.a$(b,b,1+g/s.bE);const C=s.bF();return s.aH(C,[b[0],b[1],b[2],1],this._globeViewProjMatrixNoCorrection),C[2]/C[3]}populateCache(c){}getBounds(){const c=.5*this.width,g=.5*this.height,b=[new s.P(0,0),new s.P(c,0),new s.P(this.width,0),new s.P(this.width,g),new s.P(this.width,this.height),new s.P(c,this.height),new s.P(0,this.height),new s.P(0,g)],C=[];for(const de of b)C.push(this.unprojectScreenPoint(de));let I=0,z=0,V=0,G=0;const J=this.center;for(const de of C){const he=s.bK(J.lng,de.lng),ye=s.bK(J.lat,de.lat);he<z&&(z=he),he>I&&(I=he),ye<G&&(G=ye),ye>V&&(V=ye)}const ie=[J.lng+z,J.lat+G,J.lng+I,J.lat+V];return this.isSurfacePointOnScreen([0,1,0])&&(ie[3]=90,ie[0]=-180,ie[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(ie[1]=-90,ie[0]=-180,ie[2]=180),new nn(ie)}calculateCenterFromCameraLngLatAlt(c,g,b,C){return this._helper.calculateCenterFromCameraLngLatAlt(c,g,b,C)}setLocationAtPoint(c,g){const b=Ui(this.unprojectScreenPoint(g)),C=Ui(c),I=s.bz();s.bL(I);const z=s.bz();s.bI(z,b,I,-this.center.lng*Math.PI/180),s.bH(z,z,I,this.center.lat*Math.PI/180);const V=C[0]*C[0]+C[2]*C[2],G=z[0]*z[0];if(V<G)return;const J=Math.sqrt(V-G),ie=-J,de=s.bM(C[0],C[2],z[0],J),he=s.bM(C[0],C[2],z[0],ie),ye=s.bz();s.bI(ye,C,I,-de);const Se=s.bM(ye[1],ye[2],z[1],z[2]),Ie=s.bz();s.bI(Ie,C,I,-he);const Le=s.bM(Ie[1],Ie[2],z[1],z[2]),De=.5*Math.PI,Ve=Se>=-De&&Se<=De,He=Le>=-De&&Le<=De;let Fe,We;if(Ve&&He){const xt=this.center.lng*Math.PI/180,ht=this.center.lat*Math.PI/180;s.bN(de,xt)+s.bN(Se,ht)<s.bN(he,xt)+s.bN(Le,ht)?(Fe=de,We=Se):(Fe=he,We=Le)}else if(Ve)Fe=de,We=Se;else{if(!He)return;Fe=he,We=Le}const Je=Fe/Math.PI*180,Ze=We/Math.PI*180,rt=this.center.lat;this.setCenter(new s.V(Je,s.an(Ze,-90,90))),this.setZoom(this.zoom+uo(rt,this.center.lat))}locationToScreenPoint(c,g){const b=Ui(c);if(g){const C=g.getElevationForLngLatZoom(c,this._helper._tileZoom);s.a$(b,b,1+C/s.bE)}return this._projectSurfacePointToScreen(b)}_projectSurfacePointToScreen(c){const g=s.bF();return s.aH(g,[...c,1],this._globeViewProjMatrixNoCorrection),g[0]/=g[3],g[1]/=g[3],new s.P((.5*g[0]+.5)*this.width,(.5*-g[1]+.5)*this.height)}screenPointToMercatorCoordinate(c,g){if(g){const b=g.pointCoordinate(c);if(b)return b}return s.a9.fromLngLat(this.unprojectScreenPoint(c))}screenPointToLocation(c,g){var b;return(b=this.screenPointToMercatorCoordinate(c,g))===null||b===void 0?void 0:b.toLngLat()}isPointOnMapSurface(c,g){const b=this._cameraPosition,C=this.getRayDirectionFromPixel(c);return!!this.rayPlanetIntersection(b,C)}getRayDirectionFromPixel(c){const g=s.bF();g[0]=c.x/this.width*2-1,g[1]=-1*(c.y/this.height*2-1),g[2]=1,g[3]=1,s.aH(g,g,this._globeViewProjMatrixNoCorrectionInverted),g[0]/=g[3],g[1]/=g[3],g[2]/=g[3];const b=s.bz();b[0]=g[0]-this._cameraPosition[0],b[1]=g[1]-this._cameraPosition[1],b[2]=g[2]-this._cameraPosition[2];const C=s.bz();return s.b3(C,b),C}isSurfacePointVisible(c){const g=this._cachedClippingPlane;return g[0]*c[0]+g[1]*c[1]+g[2]*c[2]+g[3]>=0}isSurfacePointOnScreen(c){if(!this.isSurfacePointVisible(c))return!1;const g=s.bF();return s.aH(g,[...c,1],this._globeViewProjMatrixNoCorrection),g[0]/=g[3],g[1]/=g[3],g[2]/=g[3],g[0]>-1&&g[0]<1&&g[1]>-1&&g[1]<1&&g[2]>-1&&g[2]<1}rayPlanetIntersection(c,g){const b=s.b5(c,g),C=s.bz(),I=s.bz();s.a$(I,g,b),s.b2(C,c,I);const z=1-s.b5(C,C);if(z<0)return null;const V=s.b5(c,c)-1,G=-b+(b<0?1:-1)*Math.sqrt(z),J=V/G,ie=G;return{tMin:Math.min(J,ie),tMax:Math.max(J,ie)}}unprojectScreenPoint(c){const g=this._cameraPosition,b=this.getRayDirectionFromPixel(c),C=this.rayPlanetIntersection(g,b);if(C){const ie=s.bz();s.b0(ie,g,[b[0]*C.tMin,b[1]*C.tMin,b[2]*C.tMin]);const de=s.bz();return s.b3(de,ie),zm(de)}const I=this._cachedClippingPlane,z=I[0]*b[0]+I[1]*b[1]+I[2]*b[2],V=-s.bb(I,g)/z,G=s.bz();if(V>0)s.b0(G,g,[b[0]*V,b[1]*V,b[2]*V]);else{const ie=s.bz();s.b0(ie,g,[2*b[0],2*b[1],2*b[2]]);const de=s.bb(this._cachedClippingPlane,ie);s.b2(G,ie,[this._cachedClippingPlane[0]*de,this._cachedClippingPlane[1]*de,this._cachedClippingPlane[2]*de])}const J=(function(ie){const de=s.bz();return de[0]=ie[0]*-ie[3],de[1]=ie[1]*-ie[3],de[2]=ie[2]*-ie[3],{center:de,radius:Math.sqrt(1-ie[3]*ie[3])}})(I);return zm((function(ie,de,he){const ye=s.bz();s.b2(ye,he,ie);const Se=s.bz();return s.bA(Se,ie,ye,de/s.b9(ye)),Se})(J.center,J.radius,G))}getMatrixForModel(c,g){const b=s.V.convert(c),C=1/s.bE,I=s.bj();return s.bJ(I,I,b.lng/180*Math.PI),s.bh(I,I,-b.lat/180*Math.PI),s.O(I,I,[0,0,1+g/s.bE]),s.bh(I,I,.5*Math.PI),s.Q(I,I,[C,C,C]),I}getProjectionDataForCustomLayer(c=!0){const g=this.getProjectionData({overscaledTileID:new s.a2(0,0,0,0,0),applyGlobeMatrix:c});return g.tileMercatorCoords=[0,0,1,1],g}getFastPathSimpleProjectionMatrix(c){}}class tp{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(c){this._helper.setMinZoom(c)}setMaxZoom(c){this._helper.setMaxZoom(c)}setMinPitch(c){this._helper.setMinPitch(c)}setMaxPitch(c){this._helper.setMaxPitch(c)}setRenderWorldCopies(c){this._helper.setRenderWorldCopies(c)}setBearing(c){this._helper.setBearing(c)}setPitch(c){this._helper.setPitch(c)}setRoll(c){this._helper.setRoll(c)}setFov(c){this._helper.setFov(c)}setZoom(c){this._helper.setZoom(c)}setCenter(c){this._helper.setCenter(c)}setElevation(c){this._helper.setElevation(c)}setMinElevationForCurrentTile(c){this._helper.setMinElevationForCurrentTile(c)}setPadding(c){this._helper.setPadding(c)}interpolatePadding(c,g,b){return this._helper.interpolatePadding(c,g,b)}isPaddingEqual(c){return this._helper.isPaddingEqual(c)}resize(c,g,b=!0){this._helper.resize(c,g,b)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(c){this._helper.setMaxBounds(c)}setConstrainOverride(c){this._helper.setConstrainOverride(c)}overrideNearFarZ(c,g){this._helper.overrideNearFarZ(c,g)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(c){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),c)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(c,g){this._globeness=c,this._globeLatitudeErrorCorrectionRadians=g,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(c){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(g,b)=>this.currentTransform.defaultConstrain(g,b),this.applyConstrain=(g,b)=>this._helper.applyConstrain(g,b),this._helper=new Oh({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(g,b)=>this.defaultConstrain(g,b)},c),this._globeness=1,this._mercatorTransform=new Zo,this._verticalPerspectiveTransform=new ep}clone(){const c=new tp;return c._globeness=this._globeness,c._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,c.apply(this),c}apply(c){this._helper.apply(c),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(c){const g=this._mercatorTransform.getProjectionData(c),b=this._verticalPerspectiveTransform.getProjectionData(c);return{mainMatrix:this.isGlobeRendering?b.mainMatrix:g.mainMatrix,clippingPlane:b.clippingPlane,tileMercatorCoords:b.tileMercatorCoords,projectionTransition:c.applyGlobeMatrix?this._globeness:0,fallbackMatrix:g.fallbackMatrix}}isLocationOccluded(c){return this.currentTransform.isLocationOccluded(c)}transformLightDirection(c){return this.currentTransform.transformLightDirection(c)}getPixelScale(){return s.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(c,g,b){const C=this._mercatorTransform.getPitchedTextCorrection(c,g,b),I=this._verticalPerspectiveTransform.getPitchedTextCorrection(c,g,b);return s.bu(C,I,this._globeness)}projectTileCoordinates(c,g,b,C){return this.currentTransform.projectTileCoordinates(c,g,b,C)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(c){return this.currentTransform.calculateFogMatrix(c)}getVisibleUnwrappedCoordinates(c){return this.currentTransform.getVisibleUnwrappedCoordinates(c)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(c){this._mercatorTransform.recalculateZoomAndCenter(c),this._verticalPerspectiveTransform.recalculateZoomAndCenter(c)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(c,g){return this.currentTransform.lngLatToCameraDepth(c,g)}populateCache(c){this._mercatorTransform.populateCache(c),this._verticalPerspectiveTransform.populateCache(c)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(c,g,b,C){return this._helper.calculateCenterFromCameraLngLatAlt(c,g,b,C)}setLocationAtPoint(c,g){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(c,g),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(c,g),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(c,g){return this.currentTransform.locationToScreenPoint(c,g)}screenPointToMercatorCoordinate(c,g){return this.currentTransform.screenPointToMercatorCoordinate(c,g)}screenPointToLocation(c,g){return this.currentTransform.screenPointToLocation(c,g)}isPointOnMapSurface(c,g){return this.currentTransform.isPointOnMapSurface(c,g)}getRayDirectionFromPixel(c){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(c)}getMatrixForModel(c,g){return this.currentTransform.getMatrixForModel(c,g)}getProjectionDataForCustomLayer(c=!0){const g=this._mercatorTransform.getProjectionDataForCustomLayer(c);if(!this.isGlobeRendering)return g;const b=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(c);return b.fallbackMatrix=g.mainMatrix,b}getFastPathSimpleProjectionMatrix(c){return this.currentTransform.getFastPathSimpleProjectionMatrix(c)}}class So{get useGlobeControls(){return!0}handlePanInertia(c,g){const b=cb(c,g);return Math.abs(b.lng-g.center.lng)>180&&(b.lng=g.center.lng+179.5*Math.sign(b.lng-g.center.lng)),{easingCenter:b,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(c,g){const b=c.around,C=g.screenPointToLocation(b);c.bearingDelta&&g.setBearing(g.bearing+c.bearingDelta),c.pitchDelta&&g.setPitch(g.pitch+c.pitchDelta),c.rollDelta&&g.setRoll(g.roll+c.rollDelta);const I=g.zoom;c.zoomDelta&&g.setZoom(g.zoom+c.zoomDelta);const z=g.zoom-I;if(z===0)return;const V=s.bK(g.center.lng,C.lng),G=V/(Math.abs(V/180)+1),J=s.bK(g.center.lat,C.lat),ie=g.getRayDirectionFromPixel(b),de=g.cameraPosition,he=-1*s.b5(de,ie),ye=s.bz();s.b0(ye,de,[ie[0]*he,ie[1]*he,ie[2]*he]);const Se=s.b7(ye)-1,Ie=Math.exp(.5*-Math.max(Se-.3,0)),Le=Ld(g.worldSize,g.center.lat)/Math.min(g.width,g.height),De=s.bx(Le,.9,.5,1,.25),Ve=(1-s.aq(-z))*Math.min(Ie,De),He=g.center.lat,Fe=g.zoom,We=new s.V(g.center.lng+G*Ve,s.an(g.center.lat+J*Ve,-s.ao,s.ao));g.setLocationAtPoint(C,b);const Je=g.center,Ze=s.bx(Math.abs(V),45,85,0,1),rt=s.bx(Le,.75,.35,0,1),xt=Math.pow(Math.max(Ze,rt),.25),ht=s.bK(Je.lng,We.lng),mt=s.bK(Je.lat,We.lat);g.setCenter(new s.V(Je.lng+ht*xt,Je.lat+mt*xt).wrap()),g.setZoom(Fe+uo(He,g.center.lat))}handleMapControlsPan(c,g,b){if(!c.panDelta)return;const C=g.center.lat,I=g.zoom;g.setCenter(cb(c.panDelta,g).wrap()),g.setZoom(I+uo(C,g.center.lat))}cameraForBoxAndBearing(c,g,b,C,I){const z=Rd(c,g,b,C,I),V=g.left/I.width*2-1,G=(I.width-g.right)/I.width*2-1,J=g.top/I.height*-2+1,ie=(I.height-g.bottom)/I.height*-2+1,de=s.bK(b.getWest(),b.getEast())<0,he=de?b.getEast():b.getWest(),ye=de?b.getWest():b.getEast(),Se=Math.max(b.getNorth(),b.getSouth()),Ie=Math.min(b.getNorth(),b.getSouth()),Le=he+.5*s.bK(he,ye),De=Se+.5*s.bK(Se,Ie),Ve=I.clone();Ve.setCenter(z.center),Ve.setBearing(z.bearing),Ve.setPitch(0),Ve.setRoll(0),Ve.setZoom(z.zoom);const He=Ve.modelViewProjectionMatrix,Fe=[Ui(b.getNorthWest()),Ui(b.getNorthEast()),Ui(b.getSouthWest()),Ui(b.getSouthEast()),Ui(new s.V(ye,De)),Ui(new s.V(he,De)),Ui(new s.V(Le,Se)),Ui(new s.V(Le,Ie))],We=Ui(z.center);let Je=Number.POSITIVE_INFINITY;for(const Ze of Fe)V<0&&(Je=So.getLesserNonNegativeNonNull(Je,So.solveVectorScale(Ze,We,He,"x",V))),G>0&&(Je=So.getLesserNonNegativeNonNull(Je,So.solveVectorScale(Ze,We,He,"x",G))),J>0&&(Je=So.getLesserNonNegativeNonNull(Je,So.solveVectorScale(Ze,We,He,"y",J))),ie<0&&(Je=So.getLesserNonNegativeNonNull(Je,So.solveVectorScale(Ze,We,He,"y",ie)));if(Number.isFinite(Je)&&Je!==0)return z.zoom=Ve.zoom+s.at(Je),z;fa()}handleJumpToCenterZoom(c,g){const b=c.center.lat,C=c.applyConstrain(g.center?s.V.convert(g.center):c.center,c.zoom).center;c.setCenter(C.wrap());const I=g.zoom!==void 0?+g.zoom:c.zoom+uo(b,C.lat);c.zoom!==I&&c.setZoom(I)}handleEaseTo(c,g){const b=c.zoom,C=c.center,I=c.padding,z={roll:c.roll,pitch:c.pitch,bearing:c.bearing},V={roll:g.roll===void 0?c.roll:g.roll,pitch:g.pitch===void 0?c.pitch:g.pitch,bearing:g.bearing===void 0?c.bearing:g.bearing},G=g.zoom!==void 0,J=!c.isPaddingEqual(g.padding);let ie=!1;const de=g.center?s.V.convert(g.center):C,he=c.applyConstrain(de,b).center;Mc(c,he);const ye=c.clone();ye.setCenter(he),ye.setZoom(G?+g.zoom:b+uo(C.lat,de.lat)),ye.setBearing(g.bearing);const Se=new s.P(s.an(c.centerPoint.x+g.offsetAsPoint.x,0,c.width),s.an(c.centerPoint.y+g.offsetAsPoint.y,0,c.height));ye.setLocationAtPoint(he,Se);const Ie=(g.offset&&g.offsetAsPoint.mag())>0?ye.center:he,Le=G?+g.zoom:b+uo(C.lat,Ie.lat),De=b+uo(C.lat,0),Ve=Le+uo(Ie.lat,0),He=s.bK(C.lng,Ie.lng),Fe=s.bK(C.lat,Ie.lat),We=s.aq(Ve-De);return ie=Le!==b,{easeFunc:Je=>{if(s.bo(z,V)||Dm({startEulerAngles:z,endEulerAngles:V,tr:c,k:Je,useSlerp:z.roll!=V.roll}),J&&c.interpolatePadding(I,g.padding,Je),g.around)s.w("Easing around a point is not supported under globe projection."),c.setLocationAtPoint(g.around,g.aroundPoint);else{const Ze=Ve>De?Math.min(2,We):Math.max(.5,We),rt=Math.pow(Ze,1-Je),xt=ub(C,He,Fe,Je*rt);c.setCenter(xt.wrap())}if(ie){const Ze=s.G.number(De,Ve,Je)+uo(0,c.center.lat);c.setZoom(Ze)}},isZooming:ie,elevationCenter:Ie}}handleFlyTo(c,g){const b=g.zoom!==void 0,C=c.center,I=c.zoom,z=c.padding,V=!c.isPaddingEqual(g.padding),G=c.applyConstrain(s.V.convert(g.center||g.locationAtOffset),I).center,J=b?+g.zoom:c.zoom+uo(c.center.lat,G.lat),ie=c.clone();ie.setCenter(G),ie.setZoom(J),ie.setBearing(g.bearing);const de=new s.P(s.an(c.centerPoint.x+g.offsetAsPoint.x,0,c.width),s.an(c.centerPoint.y+g.offsetAsPoint.y,0,c.height));ie.setLocationAtPoint(G,de);const he=ie.center;Mc(c,he);const ye=(function(Fe,We,Je){const Ze=Ui(We),rt=Ui(Je),xt=s.b5(Ze,rt),ht=Math.acos(xt),mt=pa(Fe);return ht/(2*Math.PI)*mt})(c,C,he),Se=I+uo(C.lat,0),Ie=J+uo(he.lat,0),Le=s.aq(Ie-Se);let De;if(typeof g.minZoom=="number"){const Fe=+g.minZoom+uo(he.lat,0),We=Math.min(Fe,Se,Ie)+uo(0,he.lat),Je=c.applyConstrain(he,We).zoom+uo(he.lat,0);De=s.aq(Je-Se)}const Ve=s.bK(C.lng,he.lng),He=s.bK(C.lat,he.lat);return{easeFunc:(Fe,We,Je,Ze)=>{const rt=ub(C,Ve,He,Je);V&&c.interpolatePadding(z,g.padding,Fe);const xt=Fe===1?he:rt;c.setCenter(xt.wrap());const ht=Se+s.at(We);c.setZoom(Fe===1?J:ht+uo(0,xt.lat))},scaleOfZoom:Le,targetCenter:he,scaleOfMinZoom:De,pixelPathLength:ye}}static solveVectorScale(c,g,b,C,I){const z=C==="x"?[b[0],b[4],b[8],b[12]]:[b[1],b[5],b[9],b[13]],V=[b[3],b[7],b[11],b[15]],G=c[0]*z[0]+c[1]*z[1]+c[2]*z[2],J=c[0]*V[0]+c[1]*V[1]+c[2]*V[2],ie=g[0]*z[0]+g[1]*z[1]+g[2]*z[2],de=g[0]*V[0]+g[1]*V[1]+g[2]*V[2];return ie+I*J===G+I*de||V[3]*(G-ie)+z[3]*(de-J)+G*de==ie*J?null:(ie+z[3]-I*de-I*V[3])/(ie-G-I*de+I*J)}static getLesserNonNegativeNonNull(c,g){return g!==null&&g>=0&&g<c?g:c}}class np{constructor(c){this._globe=c,this._mercatorCameraHelper=new Id,this._verticalPerspectiveCameraHelper=new So}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(c,g){return this.currentHelper.handlePanInertia(c,g)}handleMapControlsRollPitchBearingZoom(c,g){return this.currentHelper.handleMapControlsRollPitchBearingZoom(c,g)}handleMapControlsPan(c,g,b){this.currentHelper.handleMapControlsPan(c,g,b)}cameraForBoxAndBearing(c,g,b,C,I){return this.currentHelper.cameraForBoxAndBearing(c,g,b,C,I)}handleJumpToCenterZoom(c,g){this.currentHelper.handleJumpToCenterZoom(c,g)}handleEaseTo(c,g){return this.currentHelper.handleEaseTo(c,g)}handleFlyTo(c,g){return this.currentHelper.handleFlyTo(c,g)}}const rp=(P,c)=>s.B(P,c&&c.filter((g=>g.identifier!=="source.canvas"))),ip=s.bO();class kh extends s.E{constructor(c,g={}){var b,C;super(),this._rtlPluginLoaded=()=>{for(const z in this.tileManagers){const V=this.tileManagers[z].getSource().type;V!=="vector"&&V!=="geojson"||this.tileManagers[z].reload()}},this.map=c,this.dispatcher=new Tt(Et(),c._getMapId()),this.dispatcher.registerMessageHandler("GG",((z,V)=>this.getGlyphs(z,V))),this.dispatcher.registerMessageHandler("GI",((z,V)=>this.getImages(z,V))),this.dispatcher.registerMessageHandler("GDA",((z,V)=>this.getDashes(z,V))),this.imageManager=new re,this.imageManager.setEventedParent(this);const I=((b=c._container)===null||b===void 0?void 0:b.lang)||typeof document<"u"&&((C=document.documentElement)===null||C===void 0?void 0:C.lang)||void 0;this.glyphManager=new Me(c._requestManager,g.localIdeographFontFamily,I),this.lineAtlas=new ke(256,512),this.crossTileSymbolIndex=new es,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",s.bP()),tt().on($e,this._rtlPluginLoaded),this.on("data",(z=>{if(z.dataType!=="source"||z.sourceDataType!=="metadata")return;const V=this.tileManagers[z.sourceId];if(!V)return;const G=V.getSource();if(G&&G.vectorLayerIds)for(const J in this._layers){const ie=this._layers[J];ie.source===G.id&&this._validateLayer(ie)}}))}_setInitialValues(){var c;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new s.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((c=this.crossTileSymbolIndex)===null||c===void 0?void 0:c.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(c,g){var b,C,I;this._checkLoaded();const z=g===null?(I=(C=(b=this.stylesheet.state)===null||b===void 0?void 0:b[c])===null||C===void 0?void 0:C.default)!==null&&I!==void 0?I:null:g;if(s.bR(z,this._globalState[c]))return this;this._globalState[c]=z,this._applyGlobalStateChanges([c])}getGlobalState(){return this._globalState}setGlobalState(c){this._checkLoaded();const g=[];for(const b in c)!s.bR(this._globalState[b],c[b].default)&&(g.push(b),this._globalState[b]=c[b].default);this._applyGlobalStateChanges(g)}_applyGlobalStateChanges(c){if(c.length===0)return;const g=new Set,b={};for(const C of c){b[C]=this._globalState[C];for(const I in this._layers){const z=this._layers[I],V=z.getLayoutAffectingGlobalStateRefs(),G=z.getPaintAffectingGlobalStateRefs(),J=z.getVisibilityAffectingGlobalStateRefs();if(V.has(C)&&g.add(z.source),G.has(C))for(const{name:ie,value:de}of G.get(C))this._updatePaintProperty(z,ie,de);J?.has(C)&&(z.recalculateVisibility(),this._updateLayer(z))}}this.dispatcher.broadcast("UGS",b);for(const C in this.tileManagers)g.has(C)&&(this._reloadSource(C),this._changed=!0)}loadURL(c,g={},b){this.fire(new s.l("dataloading",{dataType:"style"})),g.validate=typeof g.validate!="boolean"||g.validate;const C=this.map._requestManager.transformRequest(c,"Style");this._loadStyleRequest=new AbortController;const I=this._loadStyleRequest;s.j(C,this._loadStyleRequest).then((z=>{this._loadStyleRequest=null,this._load(z.data,g,b)})).catch((z=>{this._loadStyleRequest=null,z&&!I.signal.aborted&&this.fire(new s.k(z))}))}loadJSON(c,g={},b){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,O.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,g.validate=g.validate!==!1,this._load(c,g,b)})).catch((()=>{}))}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(ip,{validate:!1})}_load(c,g,b){var C,I;let z=g.transformStyle?g.transformStyle(b,c):c;if(!g.validate||!rp(this,s.C(z))){z=Object.assign({},z),this._loaded=!0,this.stylesheet=z;for(const V in z.sources)this.addSource(V,z.sources[V],{validate:!1});z.sprite?this._loadSprite(z.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(z.glyphs),this._createLayers(),this.light=new Ce(this.stylesheet.light),this._setProjectionInternal(((C=this.stylesheet.projection)===null||C===void 0?void 0:C.type)||"mercator"),this.sky=new Xe(this.stylesheet.sky),this.map.setTerrain((I=this.stylesheet.terrain)!==null&&I!==void 0?I:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){var c,g,b;const C=s.bS(this.stylesheet.layers);this.setGlobalState((c=this.stylesheet.state)!==null&&c!==void 0?c:null),this.dispatcher.broadcast("SL",C),this._order=C.map((I=>I.id)),this._layers={},this._serializedLayers=null;for(const I of C){const z=s.bT(I,this._globalState);if(z.setEventedParent(this,{layer:{id:I.id}}),this._layers[I.id]=z,s.bU(z)&&this.tileManagers[z.source]){const V=(b=(g=I.paint)===null||g===void 0?void 0:g["raster-fade-duration"])!==null&&b!==void 0?b:z.paint.get("raster-fade-duration");this.tileManagers[z.source].setRasterFadeDuration(V)}}}_loadSprite(c,g=!1,b=void 0){this.imageManager.setLoaded(!1);const C=new AbortController;let I;this._spriteRequest=C,(function(z,V,G,J){return s._(this,void 0,void 0,(function*(){const ie=ne(z),de=G>1?"@2x":"",he={},ye={};for(const{id:Se,url:Ie}of ie){const Le=V.transformRequest(ce(Ie,de,".json"),"SpriteJSON");he[Se]=s.j(Le,J);const De=V.transformRequest(ce(Ie,de,".png"),"SpriteImage");ye[Se]=H.getImage(De,J)}return yield Promise.all([...Object.values(he),...Object.values(ye)]),(function(Se,Ie){return s._(this,void 0,void 0,(function*(){const Le={};for(const De in Se){Le[De]={};const Ve=O.getImageCanvasContext((yield Ie[De]).data),He=(yield Se[De]).data;for(const Fe in He){const{width:We,height:Je,x:Ze,y:rt,sdf:xt,pixelRatio:ht,stretchX:mt,stretchY:gt,content:tn,textFitWidth:rn,textFitHeight:Bt}=He[Fe];Le[De][Fe]={data:null,pixelRatio:ht,sdf:xt,stretchX:mt,stretchY:gt,content:tn,textFitWidth:rn,textFitHeight:Bt,spriteData:{width:We,height:Je,x:Ze,y:rt,context:Ve}}}}return Le}))})(he,ye)}))})(c,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((z=>{if(this._spriteRequest=null,z)for(const V in z){this._spritesImagesIds[V]=[];const G=this._spritesImagesIds[V]?this._spritesImagesIds[V].filter((J=>!(J in z))):[];for(const J of G)this.imageManager.removeImage(J),this._changedImages[J]=!0;for(const J in z[V]){const ie=V==="default"?J:`${V}:${J}`;this._spritesImagesIds[V].push(ie),ie in this.imageManager.images?this.imageManager.updateImage(ie,z[V][J],!1):this.imageManager.addImage(ie,z[V][J]),g&&(this._changedImages[ie]=!0)}}})).catch((z=>{this._spriteRequest=null,I=z,C.signal.aborted||this.fire(new s.k(I))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),g&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),b&&b(I)}))}_unloadSprite(){for(const c of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(c),this._changedImages[c]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(c){const g=this.tileManagers[c.source];if(!g)return;const b=c.sourceLayer;if(!b)return;const C=g.getSource();(C.type==="geojson"||C.vectorLayerIds&&C.vectorLayerIds.indexOf(b)===-1)&&this.fire(new s.k(new Error(`Source layer "${b}" does not exist on source "${C.id}" as specified by style layer "${c.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this.tileManagers)if(!this.tileManagers[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(c,g=!1){const b=this._serializedAllLayers();if(!c||c.length===0)return Object.values(g?s.bV(b):b);const C=[];for(const I of c)if(b[I]){const z=g?s.bV(b[I]):b[I];C.push(z)}return C}_serializedAllLayers(){let c=this._serializedLayers;if(c)return c;c=this._serializedLayers={};const g=Object.keys(this._layers);for(const b of g){const C=this._layers[b];C.type!=="custom"&&(c[b]=C.serialize())}return c}hasTransitions(){var c,g,b;if(!((c=this.light)===null||c===void 0)&&c.hasTransition()||!((g=this.sky)===null||g===void 0)&&g.hasTransition()||!((b=this.projection)===null||b===void 0)&&b.hasTransition())return!0;for(const C in this.tileManagers)if(this.tileManagers[C].hasTransition())return!0;for(const C in this._layers)if(this._layers[C].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(c){if(!this._loaded)return;const g=this._changed;if(g){const C=Object.keys(this._updatedLayers),I=Object.keys(this._removedLayers);(C.length||I.length)&&this._updateWorkerLayers(C,I);for(const z in this._updatedSources){const V=this._updatedSources[z];if(V==="reload")this._reloadSource(z);else{if(V!=="clear")throw new Error(`Invalid action ${V}`);this._clearSource(z)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const z in this._updatedPaintProps)this._layers[z].updateTransitions(c);this.light.updateTransitions(c),this.sky.updateTransitions(c),this._resetUpdates()}const b={};for(const C in this.tileManagers){const I=this.tileManagers[C];b[C]=I.used,I.used=!1}for(const C of this._order){const I=this._layers[C];I.recalculate(c,this._availableImages),!I.isHidden(c.zoom)&&I.source&&(this.tileManagers[I.source].used=!0)}for(const C in b){const I=this.tileManagers[C];!!b[C]!=!!I.used&&I.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:C}))}this.light.recalculate(c),this.sky.recalculate(c),this.projection.recalculate(c),this.z=c.zoom,g&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const g in this.tileManagers)this.tileManagers[g].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const c in this.tileManagers)this.tileManagers[c].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(c,g){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(c,!1),removedIds:g})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(c,g={}){var b;this._checkLoaded();const C=this.serialize();if(c=g.transformStyle?g.transformStyle(C,c):c,((b=g.validate)===null||b===void 0||b)&&rp(this,s.C(c)))return!1;(c=s.bV(c)).layers=s.bS(c.layers);const I=s.bW(C,c),z=this._getOperationsToPerform(I);if(z.unimplemented.length>0)throw new Error(`Unimplemented: ${z.unimplemented.join(", ")}.`);if(z.operations.length===0)return!1;for(const V of z.operations)V();return this.stylesheet=c,this._serializedLayers=null,!0}_getOperationsToPerform(c){const g=[],b=[];for(const C of c)switch(C.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":g.push((()=>this.addLayer.apply(this,C.args)));break;case"removeLayer":g.push((()=>this.removeLayer.apply(this,C.args)));break;case"setPaintProperty":g.push((()=>this.setPaintProperty.apply(this,C.args)));break;case"setLayoutProperty":g.push((()=>this.setLayoutProperty.apply(this,C.args)));break;case"setFilter":g.push((()=>this.setFilter.apply(this,C.args)));break;case"addSource":g.push((()=>this.addSource.apply(this,C.args)));break;case"removeSource":g.push((()=>this.removeSource.apply(this,C.args)));break;case"setLayerZoomRange":g.push((()=>this.setLayerZoomRange.apply(this,C.args)));break;case"setLight":g.push((()=>this.setLight.apply(this,C.args)));break;case"setGeoJSONSourceData":g.push((()=>this.setGeoJSONSourceData.apply(this,C.args)));break;case"setGlyphs":g.push((()=>this.setGlyphs.apply(this,C.args)));break;case"setSprite":g.push((()=>this.setSprite.apply(this,C.args)));break;case"setTerrain":g.push((()=>this.map.setTerrain.apply(this,C.args)));break;case"setSky":g.push((()=>this.setSky.apply(this,C.args)));break;case"setProjection":this.setProjection.apply(this,C.args);break;case"setGlobalState":g.push((()=>this.setGlobalState.apply(this,C.args)));break;case"setTransition":g.push((()=>{}));break;default:b.push(C.command)}return{operations:g,unimplemented:b}}addImage(c,g){if(this.getImage(c))return this.fire(new s.k(new Error(`An image named "${c}" already exists.`)));this.imageManager.addImage(c,g),this._afterImageUpdated(c)}updateImage(c,g){this.imageManager.updateImage(c,g)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){if(!this.getImage(c))return this.fire(new s.k(new Error(`An image named "${c}" does not exist.`)));this.imageManager.removeImage(c),this._afterImageUpdated(c)}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(c,g,b={}){if(this._checkLoaded(),this.tileManagers[c]!==void 0)throw new Error(`Source "${c}" already exists.`);if(!g.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(g).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(g.type)>=0&&this._validate(s.C.source,`sources.${c}`,g,null,b))return;this.map&&this.map._collectResourceTiming&&(g.collectResourceTiming=!0);const C=this.tileManagers[c]=new Si(c,g,this.dispatcher);C.style=this,C.setEventedParent(this,(()=>({isSourceLoaded:C.loaded(),source:C.serialize(),sourceId:c}))),C.onAdd(this.map),this._changed=!0}removeSource(c){if(this._checkLoaded(),this.tileManagers[c]===void 0)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===c)return this.fire(new s.k(new Error(`Source "${c}" cannot be removed while layer "${b}" is using it.`)));const g=this.tileManagers[c];delete this.tileManagers[c],delete this._updatedSources[c],g.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),g.setEventedParent(null),g.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(c,g){if(this._checkLoaded(),this.tileManagers[c]===void 0)throw new Error(`There is no source with this ID=${c}`);const b=this.tileManagers[c].getSource();if(b.type!=="geojson")throw new Error(`geojsonSource.type is ${b.type}, which is !== 'geojson`);b.setData(g),this._changed=!0}getSource(c){return this.tileManagers[c]&&this.tileManagers[c].getSource()}addLayer(c,g,b={}){this._checkLoaded();const C=c.id;if(this.getLayer(C))return void this.fire(new s.k(new Error(`Layer "${C}" already exists on this map.`)));let I;if(c.type==="custom"){if(rp(this,s.bX(c)))return;I=s.bT(c,this._globalState)}else{if("source"in c&&typeof c.source=="object"&&(this.addSource(C,c.source),c=s.bV(c),c=s.e(c,{source:C})),this._validate(s.C.layer,`layers.${C}`,c,{arrayIndex:-1},b))return;I=s.bT(c,this._globalState),this._validateLayer(I),I.setEventedParent(this,{layer:{id:C}})}const z=g?this._order.indexOf(g):this._order.length;if(g&&z===-1)this.fire(new s.k(new Error(`Cannot add layer "${C}" before non-existing layer "${g}".`)));else{if(this._order.splice(z,0,C),this._layerOrderChanged=!0,this._layers[C]=I,this._removedLayers[C]&&I.source&&I.type!=="custom"){const V=this._removedLayers[C];delete this._removedLayers[C],V.type!==I.type?this._updatedSources[I.source]="clear":(this._updatedSources[I.source]="reload",this.tileManagers[I.source].pause())}this._updateLayer(I),I.onAdd&&I.onAdd(this.map)}}moveLayer(c,g){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new s.k(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===g)return;const b=this._order.indexOf(c);this._order.splice(b,1);const C=g?this._order.indexOf(g):this._order.length;g&&C===-1?this.fire(new s.k(new Error(`Cannot move layer "${c}" before non-existing layer "${g}".`))):(this._order.splice(C,0,c),this._layerOrderChanged=!0)}removeLayer(c){this._checkLoaded();const g=this._layers[c];if(!g)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${c}".`)));g.setEventedParent(null);const b=this._order.indexOf(c);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=g,delete this._layers[c],this._serializedLayers&&delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],g.onRemove&&g.onRemove(this.map)}getLayer(c){return this._layers[c]}getLayersOrder(){return[...this._order]}hasLayer(c){return c in this._layers}setLayerZoomRange(c,g,b){this._checkLoaded();const C=this.getLayer(c);C?C.minzoom===g&&C.maxzoom===b||(g!=null&&(C.minzoom=g),b!=null&&(C.maxzoom=b),this._updateLayer(C)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${c}".`)))}setFilter(c,g,b={}){this._checkLoaded();const C=this.getLayer(c);if(C){if(!s.bR(C.filter,g))return g==null?(C.setFilter(void 0),void this._updateLayer(C)):void(this._validate(s.C.filter,`layers.${C.id}.filter`,g,null,b)||(C.setFilter(s.bV(g)),this._updateLayer(C)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${c}".`)))}getFilter(c){return s.bV(this.getLayer(c).filter)}setLayoutProperty(c,g,b,C={}){this._checkLoaded();const I=this.getLayer(c);I?s.bR(I.getLayoutProperty(g),b)||(I.setLayoutProperty(g,b,C),this._updateLayer(I)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${c}".`)))}getLayoutProperty(c,g){const b=this.getLayer(c);if(b)return b.getLayoutProperty(g);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${c}".`)))}setPaintProperty(c,g,b,C={}){this._checkLoaded();const I=this.getLayer(c);I?s.bR(I.getPaintProperty(g),b)||this._updatePaintProperty(I,g,b,C):this.fire(new s.k(new Error(`Cannot style non-existing layer "${c}".`)))}_updatePaintProperty(c,g,b,C={}){c.setPaintProperty(g,b,C)&&this._updateLayer(c),s.bU(c)&&g==="raster-fade-duration"&&this.tileManagers[c.source].setRasterFadeDuration(b),this._changed=!0,this._updatedPaintProps[c.id]=!0,this._serializedLayers=null}getPaintProperty(c,g){return this.getLayer(c).getPaintProperty(g)}setFeatureState(c,g){this._checkLoaded();const b=c.source,C=c.sourceLayer,I=this.tileManagers[b];if(I===void 0)return void this.fire(new s.k(new Error(`The source '${b}' does not exist in the map's style.`)));const z=I.getSource().type;z==="geojson"&&C?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):z!=="vector"||C?(c.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),I.setFeatureState(C,c.id,g)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(c,g){this._checkLoaded();const b=c.source,C=this.tileManagers[b];if(C===void 0)return void this.fire(new s.k(new Error(`The source '${b}' does not exist in the map's style.`)));const I=C.getSource().type,z=I==="vector"?c.sourceLayer:void 0;I!=="vector"||z?g&&typeof c.id!="string"&&typeof c.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):C.removeFeatureState(z,c.id,g):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(c){this._checkLoaded();const g=c.source,b=c.sourceLayer,C=this.tileManagers[g];if(C!==void 0)return C.getSource().type!=="vector"||b?(c.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),C.getFeatureState(b,c.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${g}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const c=s.bY(this.tileManagers,(I=>I.serialize())),g=this._serializeByIds(this._order,!0),b=this.map.getTerrain()||void 0,C=this.stylesheet;return s.bZ({version:C.version,name:C.name,metadata:C.metadata,light:C.light,sky:C.sky,center:C.center,zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,sprite:C.sprite,glyphs:C.glyphs,transition:C.transition,projection:C.projection,sources:c,layers:g,terrain:b},(I=>I!==void 0))}_updateLayer(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&this.tileManagers[c.source].getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",this.tileManagers[c.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(c){const g=z=>this._layers[z].type==="fill-extrusion",b={},C=[];for(let z=this._order.length-1;z>=0;z--){const V=this._order[z];if(g(V)){b[V]=z;for(const G of c){const J=G[V];if(J)for(const ie of J)C.push(ie)}}}C.sort(((z,V)=>V.intersectionZ-z.intersectionZ));const I=[];for(let z=this._order.length-1;z>=0;z--){const V=this._order[z];if(g(V))for(let G=C.length-1;G>=0;G--){const J=C[G].feature;if(b[J.layer.id]<z)break;I.push(J),C.pop()}else for(const G of c){const J=G[V];if(J)for(const ie of J)I.push(ie.feature)}}return I}queryRenderedFeatures(c,g,b){g&&g.filter&&this._validate(s.C.filter,"queryRenderedFeatures.filter",g.filter,null,g);const C={};if(g&&g.layers){if(!(Array.isArray(g.layers)||g.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const J of g.layers){const ie=this._layers[J];if(!ie)return this.fire(new s.k(new Error(`The layer '${J}' does not exist in the map's style and cannot be queried for features.`))),[];C[ie.source]=!0}}const I=[];g.availableImages=this._availableImages;const z=this._serializedAllLayers(),V=g.layers instanceof Set?g.layers:Array.isArray(g.layers)?new Set(g.layers):null,G=Object.assign(Object.assign({},g),{layers:V,globalState:this._globalState});for(const J in this.tileManagers)g.layers&&!C[J]||I.push(un(this.tileManagers[J],this._layers,z,c,G,b,this.map.terrain?(ie,de,he)=>this.map.terrain.getElevation(ie,de,he):void 0));return this.placement&&I.push((function(J,ie,de,he,ye,Se,Ie){const Le={},De=Se.queryRenderedSymbols(he),Ve=[];for(const He of Object.keys(De).map(Number))Ve.push(Ie[He]);Ve.sort(Gt);for(const He of Ve){const Fe=He.featureIndex.lookupSymbolFeatures(De[He.bucketInstanceId],ie,He.bucketIndex,He.sourceLayerIndex,{filterSpec:ye.filter,globalState:ye.globalState},ye.layers,ye.availableImages,J);for(const We in Fe){const Je=Le[We]=Le[We]||[],Ze=Fe[We];Ze.sort(((rt,xt)=>{const ht=He.featureSortOrder;if(ht){const mt=ht.indexOf(rt.featureIndex);return ht.indexOf(xt.featureIndex)-mt}return xt.featureIndex-rt.featureIndex}));for(const rt of Ze)Je.push(rt)}}return(function(He,Fe,We){for(const Je in He)for(const Ze of He[Je])Jt(Ze,We[Fe[Je].source]);return He})(Le,J,de)})(this._layers,z,this.tileManagers,c,G,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(I)}querySourceFeatures(c,g){g?.filter&&this._validate(s.C.filter,"querySourceFeatures.filter",g.filter,null,g);const b=this.tileManagers[c];return b?(function(C,I){const z=C.getRenderableIds().map((J=>C.getTileByID(J))),V=[],G={};for(let J=0;J<z.length;J++){const ie=z[J],de=ie.tileID.canonical.key;G[de]||(G[de]=!0,ie.querySourceFeatures(V,I))}return V})(b,g?Object.assign(Object.assign({},g),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(c,g={}){this._checkLoaded();const b=this.light.getLight();let C=!1;for(const z in c)if(!s.bR(c[z],b[z])){C=!0;break}if(!C)return;const I={now:A(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,g),this.light.updateTransitions(I)}getProjection(){var c;return(c=this.stylesheet)===null||c===void 0?void 0:c.projection}setProjection(c){if(this._checkLoaded(),this.projection){if(this.projection.name===c.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=c,this._setProjectionInternal(c.type)}getSky(){var c;return(c=this.stylesheet)===null||c===void 0?void 0:c.sky}setSky(c,g={}){this._checkLoaded();const b=this.getSky();let C=!1;if(!c&&!b)return;if(c&&!b)C=!0;else if(!c&&b)C=!0;else for(const z in c)if(!s.bR(c[z],b[z])){C=!0;break}if(!C)return;const I={now:A(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=c,this.sky.setSky(c,g),this.sky.updateTransitions(I)}_setProjectionInternal(c){const g=(function(b,C){const I={constrainOverride:C};if(Array.isArray(b)){const z=new Cv({type:b});return{projection:z,transform:new tp(I),cameraHelper:new np(z)}}switch(b){case"mercator":return{projection:new ts,transform:new Zo(I),cameraHelper:new Id};case"globe":{const z=new Cv({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:z,transform:new tp(I),cameraHelper:new np(z)}}case"vertical-perspective":return{projection:new Sv,transform:new ep(I),cameraHelper:new So};default:return s.w(`Unknown projection name: ${b}. Falling back to mercator projection.`),{projection:new ts,transform:new Zo(I),cameraHelper:new Id}}})(c,this.map.transformConstrain);this.projection=g.projection,this.map.migrateProjection(g.transform,g.cameraHelper);for(const b in this.tileManagers)this.tileManagers[b].reload()}_validate(c,g,b,C,I={}){return(!I||I.validate!==!1)&&rp(this,c.call(s.C,s.e({key:g,style:this.serialize(),value:b,styleSpec:s.u},C)))}_remove(c=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),tt().off($e,this._rtlPluginLoaded);for(const g in this._layers)this._layers[g].setEventedParent(null);for(const g in this.tileManagers){const b=this.tileManagers[g];b.setEventedParent(null),b.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),c&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(c)}_clearSource(c){this.tileManagers[c].clearTiles()}_reloadSource(c){this.tileManagers[c].resume(),this.tileManagers[c].reload()}_updateSources(c){for(const g in this.tileManagers)this.tileManagers[g].update(c,this.map.terrain)}_generateCollisionBoxes(){for(const c in this.tileManagers)this._reloadSource(c)}_updatePlacement(c,g,b,C,I=!1){let z=!1,V=!1;const G={};for(const J of this._order){const ie=this._layers[J];if(ie.type!=="symbol")continue;if(!G[ie.source]){const he=this.tileManagers[ie.source];G[ie.source]=he.getRenderableIds(!0).map((ye=>he.getTileByID(ye))).sort(((ye,Se)=>Se.tileID.overscaledZ-ye.tileID.overscaledZ||(ye.tileID.isLessThan(Se.tileID)?-1:1)))}const de=this.crossTileSymbolIndex.addLayer(ie,G[ie.source],c.center.lng);z=z||de}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((I=I||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A(),c.zoom))&&(this.pauseablePlacement=new Yf(c,this.map.terrain,this._order,I,g,b,C,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,G),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A()),V=!0),z&&this.pauseablePlacement.placement.setStale()),V||z)for(const J of this._order){const ie=this._layers[J];ie.type==="symbol"&&this.placement.updateLayerOpacities(ie,G[ie.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A())}_releaseSymbolFadeTiles(){for(const c in this.tileManagers)this.tileManagers[c].releaseSymbolFadeTiles()}getImages(c,g){return s._(this,void 0,void 0,(function*(){const b=yield this.imageManager.getImages(g.icons);this._updateTilesForChangedImages();const C=this.tileManagers[g.source];return C&&C.setDependencies(g.tileID.key,g.type,g.icons),b}))}getGlyphs(c,g){return s._(this,void 0,void 0,(function*(){const b=yield this.glyphManager.getGlyphs(g.stacks),C=this.tileManagers[g.source];return C&&C.setDependencies(g.tileID.key,g.type,[""]),b}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(c,g={}){this._checkLoaded(),c&&this._validate(s.C.glyphs,"glyphs",c,null,g)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=c,this.glyphManager.entries={},this.glyphManager.setURL(c))}getDashes(c,g){return s._(this,void 0,void 0,(function*(){const b={};for(const[C,I]of Object.entries(g.dashes))b[C]=this.lineAtlas.getDash(I.dasharray,I.round);return b}))}addSprite(c,g,b={},C){this._checkLoaded();const I=[{id:c,url:g}],z=[...ne(this.stylesheet.sprite),...I];this._validate(s.C.sprite,"sprite",z,null,b)||(this.stylesheet.sprite=z,this._loadSprite(I,!0,C))}removeSprite(c){this._checkLoaded();const g=ne(this.stylesheet.sprite);if(g.find((b=>b.id===c))){if(this._spritesImagesIds[c])for(const b of this._spritesImagesIds[c])this.imageManager.removeImage(b),this._changedImages[b]=!0;g.splice(g.findIndex((b=>b.id===c)),1),this.stylesheet.sprite=g.length>0?g:void 0,delete this._spritesImagesIds[c],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${c}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(c,g={},b){this._checkLoaded(),c&&this._validate(s.C.sprite,"sprite",c,null,g)||(this.stylesheet.sprite=c,c?this._loadSprite(c,!0,b):(this._unloadSprite(),b&&b(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const c in this.tileManagers){const g=this.tileManagers[c];g.setEventedParent(null),g.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const c in this._layers){const g=this._layers[c];g.setEventedParent(null),g.onRemove&&g.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var hb=s.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Fm{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(c,g,b,C,I,z,V,G,J){this.context=c;let ie=this.boundPaintVertexBuffers.length!==C.length;for(let de=0;!ie&&de<C.length;de++)this.boundPaintVertexBuffers[de]!==C[de]&&(ie=!0);!this.vao||this.boundProgram!==g||this.boundLayoutVertexBuffer!==b||ie||this.boundIndexBuffer!==I||this.boundVertexOffset!==z||this.boundDynamicVertexBuffer!==V||this.boundDynamicVertexBuffer2!==G||this.boundDynamicVertexBuffer3!==J?this.freshBind(g,b,C,I,z,V,G,J):(c.bindVertexArray.set(this.vao),V&&V.bind(),I&&I.dynamicDraw&&I.bind(),G&&G.bind(),J&&J.bind())}freshBind(c,g,b,C,I,z,V,G){const J=c.numAttributes,ie=this.context,de=ie.gl;this.vao&&this.destroy(),this.vao=ie.createVertexArray(),ie.bindVertexArray.set(this.vao),this.boundProgram=c,this.boundLayoutVertexBuffer=g,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=C,this.boundVertexOffset=I,this.boundDynamicVertexBuffer=z,this.boundDynamicVertexBuffer2=V,this.boundDynamicVertexBuffer3=G,g.enableAttributes(de,c);for(const he of b)he.enableAttributes(de,c);z&&z.enableAttributes(de,c),V&&V.enableAttributes(de,c),G&&G.enableAttributes(de,c),g.bind(),g.setVertexAttribPointers(de,c,I);for(const he of b)he.bind(),he.setVertexAttribPointers(de,c,I);z&&(z.bind(),z.setVertexAttribPointers(de,c,I)),C&&C.bind(),V&&(V.bind(),V.setVertexAttribPointers(de,c,I)),G&&(G.bind(),G.setVertexAttribPointers(de,c,I)),ie.currentNumAttributes=J}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const db=(P,c,g,b,C)=>({u_texture:0,u_ele_delta:P,u_fog_matrix:c,u_fog_color:g?g.properties.get("fog-color"):s.bp.white,u_fog_ground_blend:g?g.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:C?0:g?g.calculateFogBlendOpacity(b):0,u_horizon_color:g?g.properties.get("horizon-color"):s.bp.white,u_horizon_fog_blend:g?g.properties.get("horizon-fog-blend"):1,u_is_globe_mode:C?1:0}),Kl={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ey(P){const c=[];for(let g=0;g<P.length;g++){if(P[g]===null)continue;const b=P[g].split(" ");c.push(b.pop())}return c}class fb{constructor(c,g,b,C,I,z,V,G,J=[]){const ie=c.gl;this.program=ie.createProgram();const de=Ey(g.staticAttributes),he=b?b.getBinderAttributes():[],ye=de.concat(he),Se=Vi.prelude.staticUniforms?Ey(Vi.prelude.staticUniforms):[],Ie=V.staticUniforms?Ey(V.staticUniforms):[],Le=g.staticUniforms?Ey(g.staticUniforms):[],De=b?b.getBinderUniforms():[],Ve=Se.concat(Ie).concat(Le).concat(De),He=[];for(const ht of Ve)He.indexOf(ht)<0&&He.push(ht);const Fe=b?b.defines():[];vl(ie)&&Fe.unshift("#version 300 es"),I&&Fe.push("#define OVERDRAW_INSPECTOR;"),z&&Fe.push("#define TERRAIN3D;"),G&&Fe.push(G),J&&Fe.push(...J);let We=Fe.concat(Vi.prelude.fragmentSource,V.fragmentSource,g.fragmentSource).join(`
`),Je=Fe.concat(Vi.prelude.vertexSource,V.vertexSource,g.vertexSource).join(`
`);vl(ie)||(We=(function(ht){return ht.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(We),Je=(function(ht){return ht.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Je));const Ze=ie.createShader(ie.FRAGMENT_SHADER);if(ie.isContextLost())return void(this.failedToCreate=!0);if(ie.shaderSource(Ze,We),ie.compileShader(Ze),!ie.getShaderParameter(Ze,ie.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ie.getShaderInfoLog(Ze)}`);ie.attachShader(this.program,Ze);const rt=ie.createShader(ie.VERTEX_SHADER);if(ie.isContextLost())return void(this.failedToCreate=!0);if(ie.shaderSource(rt,Je),ie.compileShader(rt),!ie.getShaderParameter(rt,ie.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ie.getShaderInfoLog(rt)}`);ie.attachShader(this.program,rt),this.attributes={};const xt={};this.numAttributes=ye.length;for(let ht=0;ht<this.numAttributes;ht++)ye[ht]&&(ie.bindAttribLocation(this.program,ht,ye[ht]),this.attributes[ye[ht]]=ht);if(ie.linkProgram(this.program),!ie.getProgramParameter(this.program,ie.LINK_STATUS))throw new Error(`Program failed to link: ${ie.getProgramInfoLog(this.program)}`);ie.deleteShader(rt),ie.deleteShader(Ze);for(let ht=0;ht<He.length;ht++){const mt=He[ht];if(mt&&!xt[mt]){const gt=ie.getUniformLocation(this.program,mt);gt&&(xt[mt]=gt)}}this.fixedUniforms=C(c,xt),this.terrainUniforms=((ht,mt)=>({u_depth:new s.b_(ht,mt.u_depth),u_terrain:new s.b_(ht,mt.u_terrain),u_terrain_dim:new s.bq(ht,mt.u_terrain_dim),u_terrain_matrix:new s.c0(ht,mt.u_terrain_matrix),u_terrain_unpack:new s.c1(ht,mt.u_terrain_unpack),u_terrain_exaggeration:new s.bq(ht,mt.u_terrain_exaggeration)}))(c,xt),this.projectionUniforms=((ht,mt)=>({u_projection_matrix:new s.c0(ht,mt.u_projection_matrix),u_projection_tile_mercator_coords:new s.c1(ht,mt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.c1(ht,mt.u_projection_clipping_plane),u_projection_transition:new s.bq(ht,mt.u_projection_transition),u_projection_fallback_matrix:new s.c0(ht,mt.u_projection_fallback_matrix)}))(c,xt),this.binderUniforms=b?b.getUniforms(c,xt):[]}draw(c,g,b,C,I,z,V,G,J,ie,de,he,ye,Se,Ie,Le,De,Ve,He){const Fe=c.gl;if(this.failedToCreate)return;if(c.program.set(this.program),c.setDepthMode(b),c.setStencilMode(C),c.setColorMode(I),c.setCullFace(z),G){c.activeTexture.set(Fe.TEXTURE2),Fe.bindTexture(Fe.TEXTURE_2D,G.depthTexture),c.activeTexture.set(Fe.TEXTURE3),Fe.bindTexture(Fe.TEXTURE_2D,G.texture);for(const Je in this.terrainUniforms)this.terrainUniforms[Je].set(G[Je])}if(J)for(const Je in J)this.projectionUniforms[Kl[Je]].set(J[Je]);if(V)for(const Je in this.fixedUniforms)this.fixedUniforms[Je].set(V[Je]);Le&&Le.setUniforms(c,this.binderUniforms,Se,{zoom:Ie});let We=0;switch(g){case Fe.LINES:We=2;break;case Fe.TRIANGLES:We=3;break;case Fe.LINE_STRIP:We=1}for(const Je of ye.get()){const Ze=Je.vaos||(Je.vaos={});(Ze[ie]||(Ze[ie]=new Fm)).bind(c,this,de,Le?Le.getPaintVertexBuffers():[],he,Je.vertexOffset,De,Ve,He),Fe.drawElements(g,Je.primitiveLength*We,Fe.UNSIGNED_SHORT,Je.primitiveOffset*We*2)}}}function pb(P,c,g){const b=1/s.aN(g,1,c.transform.tileZoom),C=Math.pow(2,g.tileID.overscaledZ),I=g.tileSize*Math.pow(2,c.transform.tileZoom)/C,z=I*(g.tileID.canonical.x+g.tileID.wrap*C),V=I*g.tileID.canonical.y;return{u_image:0,u_texsize:g.imageAtlasTexture.size,u_scale:[b,P.fromScale,P.toScale],u_fade:P.t,u_pixel_coord_upper:[z>>16,V>>16],u_pixel_coord_lower:[65535&z,65535&V]}}const Ay=(P,c,g,b)=>{const C=P.style.light,I=C.properties.get("position"),z=[I.x,I.y,I.z],V=s.c4();C.properties.get("anchor")==="viewport"&&s.c5(V,P.transform.bearingInRadians),s.c6(z,z,V);const G=P.transform.transformLightDirection(z),J=C.properties.get("color");return{u_lightpos:z,u_lightpos_globe:G,u_lightintensity:C.properties.get("intensity"),u_lightcolor:[J.r,J.g,J.b],u_vertical_gradient:+c,u_opacity:g,u_fill_translate:b}},Py=(P,c,g,b,C,I,z)=>s.e(Ay(P,c,g,b),pb(I,P,z),{u_height_factor:-Math.pow(2,C.overscaledZ)/z.tileSize/8}),$d=(P,c,g,b)=>s.e(pb(c,P,g),{u_fill_translate:b}),op=(P,c)=>({u_world:P,u_fill_translate:c}),mb=(P,c,g,b,C)=>s.e($d(P,c,g,C),{u_world:b}),jm=(P,c,g,b,C)=>{const I=P.transform;let z,V,G=0;if(g.paint.get("circle-pitch-alignment")==="map"){const J=s.aN(c,1,I.zoom);z=!0,V=[J,J],G=J/(s.a5*Math.pow(2,c.tileID.overscaledZ))*2*Math.PI*C}else z=!1,V=I.pixelsToGLUnits;return{u_camera_to_center_distance:I.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+z,u_device_pixel_ratio:P.pixelRatio,u_extrude_scale:V,u_globe_extrude_scale:G,u_translate:b}},Eh=P=>({u_pixel_extrude_scale:[1/P.width,1/P.height]}),kv=P=>({u_viewport_size:[P.width,P.height]}),Vm=(P,c=1)=>({u_color:P,u_overlay:0,u_overlay_scale:c}),Ah=(P,c,g,b)=>{const C=s.aN(P,1,c)/(s.a5*Math.pow(2,P.tileID.overscaledZ))*2*Math.PI*b;return{u_extrude_scale:s.aN(P,1,c),u_intensity:g,u_globe_extrude_scale:C}},Ev=(P,c,g,b)=>{const C=s.N();s.c7(C,0,P.width,P.height,0,0,1);const I=P.context.gl;return{u_matrix:C,u_world:[I.drawingBufferWidth,I.drawingBufferHeight],u_image:g,u_color_ramp:b,u_opacity:c.paint.get("heatmap-opacity")}},Qm=(P,c,g)=>{const b=g.paint.get("hillshade-accent-color");let C;switch(g.paint.get("hillshade-method")){case"basic":C=4;break;case"combined":C=1;break;case"igor":C=2;break;case"multidirectional":C=3;break;default:C=0}const I=g.getIlluminationProperties();for(let z=0;z<I.directionRadians.length;z++)g.paint.get("hillshade-illumination-anchor")==="viewport"&&(I.directionRadians[z]+=P.transform.bearingInRadians);return{u_image:0,u_latrange:OS(0,c.tileID),u_exaggeration:g.paint.get("hillshade-exaggeration"),u_altitudes:I.altitudeRadians,u_azimuths:I.directionRadians,u_accent:b,u_method:C,u_highlights:I.highlightColor,u_shadows:I.shadowColor}},gb=(P,c)=>{const g=c.stride,b=s.N();return s.c7(b,0,s.a5,-s.a5,0,0,1),s.O(b,b,[0,-s.a5,0]),{u_matrix:b,u_image:1,u_dimension:[g,g],u_zoom:P.overscaledZ,u_unpack:c.getUnpackVector()}};function OS(P,c){const g=Math.pow(2,c.canonical.z),b=c.canonical.y;return[new s.a9(0,b/g).toLngLat().lat,new s.a9(0,(b+1)/g).toLngLat().lat]}const yb=(P,c,g=0)=>({u_image:0,u_unpack:c.getUnpackVector(),u_dimension:[c.stride,c.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:g,u_opacity:P.paint.get("color-relief-opacity")}),Um=(P,c,g,b)=>{const C=P.transform;return{u_translation:Zm(P,c,g),u_ratio:b/s.aN(c,1,C.zoom),u_device_pixel_ratio:P.pixelRatio,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},vb=(P,c,g,b,C)=>s.e(Um(P,c,g,b),{u_image:0,u_image_height:C}),Av=(P,c,g,b,C)=>{const I=P.transform,z=xl(c,I);return{u_translation:Zm(P,c,g),u_texsize:c.imageAtlasTexture.size,u_ratio:b/s.aN(c,1,I.zoom),u_device_pixel_ratio:P.pixelRatio,u_image:0,u_scale:[z,C.fromScale,C.toScale],u_fade:C.t,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},Oa=(P,c,g,b,C)=>{const I=xl(c,P.transform);return s.e(Um(P,c,g,b),{u_tileratio:I,u_crossfade_from:C.fromScale,u_crossfade_to:C.toScale,u_image:0,u_mix:C.t,u_lineatlas_width:P.lineAtlas.width,u_lineatlas_height:P.lineAtlas.height})},Ph=(P,c,g,b,C,I)=>{const z=xl(c,P.transform);return s.e(Um(P,c,g,b),{u_image:0,u_image_height:I,u_tileratio:z,u_crossfade_from:C.fromScale,u_crossfade_to:C.toScale,u_image_dash:1,u_mix:C.t,u_lineatlas_width:P.lineAtlas.width,u_lineatlas_height:P.lineAtlas.height})};function xl(P,c){return 1/s.aN(P,1,c.tileZoom)}function Zm(P,c,g){return s.aO(P.transform,c,g.paint.get("line-translate"),g.paint.get("line-translate-anchor"))}const My=(P,c,g,b,C)=>{return{u_tl_parent:P,u_scale_parent:c,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(z=b.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(I=b.paint.get("raster-contrast"),I>0?1/(1-I):1+I),u_spin_weights:Ry(b.paint.get("raster-hue-rotate")),u_coords_top:[C[0].x,C[0].y,C[1].x,C[1].y],u_coords_bottom:[C[3].x,C[3].y,C[2].x,C[2].y]};var I,z};function Ry(P){P*=Math.PI/180;const c=Math.sin(P),g=Math.cos(P);return[(2*g+1)/3,(-Math.sqrt(3)*c-g+1)/3,(Math.sqrt(3)*c-g+1)/3]}const qm=(P,c,g,b,C,I,z,V,G,J,ie,de,he)=>{const ye=z.transform;return{u_is_size_zoom_constant:+(P==="constant"||P==="source"),u_is_size_feature_constant:+(P==="constant"||P==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:ye.cameraToCenterDistance,u_pitch:ye.pitch/360*2*Math.PI,u_rotate_symbol:+g,u_aspect_ratio:ye.width/ye.height,u_fade_change:z.options.fadeDuration?z.symbolFadeChange:1,u_label_plane_matrix:V,u_coord_matrix:G,u_is_text:+ie,u_pitch_with_map:+b,u_is_along_line:C,u_is_variable_anchor:I,u_texsize:de,u_texture:0,u_translation:J,u_pitched_scale:he}},Iy=(P,c,g,b,C,I,z,V,G,J,ie,de,he,ye)=>{const Se=z.transform;return s.e(qm(P,c,g,b,C,I,z,V,G,J,ie,de,ye),{u_gamma_scale:b?Math.cos(Se.pitch*Math.PI/180)*Se.cameraToCenterDistance:1,u_device_pixel_ratio:z.pixelRatio,u_is_halo:1})},_l=(P,c,g,b,C,I,z,V,G,J,ie,de,he)=>s.e(Iy(P,c,g,b,C,I,z,V,G,J,!0,ie,0,he),{u_texsize_icon:de,u_texture_icon:1}),Wm=(P,c)=>({u_opacity:P,u_color:c}),Hm=(P,c,g,b,C)=>s.e((function(I,z,V,G){const J=V.imageManager.getPattern(I.from.toString()),ie=V.imageManager.getPattern(I.to.toString()),{width:de,height:he}=V.imageManager.getPixelSize(),ye=Math.pow(2,G.tileID.overscaledZ),Se=G.tileSize*Math.pow(2,V.transform.tileZoom)/ye,Ie=Se*(G.tileID.canonical.x+G.tileID.wrap*ye),Le=Se*G.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:J.tl,u_pattern_br_a:J.br,u_pattern_tl_b:ie.tl,u_pattern_br_b:ie.br,u_texsize:[de,he],u_mix:z.t,u_pattern_size_a:J.displaySize,u_pattern_size_b:ie.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/s.aN(G,1,V.transform.tileZoom),u_pixel_coord_upper:[Ie>>16,Le>>16],u_pixel_coord_lower:[65535&Ie,65535&Le]}})(g,C,c,b),{u_opacity:P}),Dy=(P,c)=>{},xb={fillExtrusion:(P,c)=>({u_lightpos:new s.c2(P,c.u_lightpos),u_lightpos_globe:new s.c2(P,c.u_lightpos_globe),u_lightintensity:new s.bq(P,c.u_lightintensity),u_lightcolor:new s.c2(P,c.u_lightcolor),u_vertical_gradient:new s.bq(P,c.u_vertical_gradient),u_opacity:new s.bq(P,c.u_opacity),u_fill_translate:new s.c3(P,c.u_fill_translate)}),fillExtrusionPattern:(P,c)=>({u_lightpos:new s.c2(P,c.u_lightpos),u_lightpos_globe:new s.c2(P,c.u_lightpos_globe),u_lightintensity:new s.bq(P,c.u_lightintensity),u_lightcolor:new s.c2(P,c.u_lightcolor),u_vertical_gradient:new s.bq(P,c.u_vertical_gradient),u_height_factor:new s.bq(P,c.u_height_factor),u_opacity:new s.bq(P,c.u_opacity),u_fill_translate:new s.c3(P,c.u_fill_translate),u_image:new s.b_(P,c.u_image),u_texsize:new s.c3(P,c.u_texsize),u_pixel_coord_upper:new s.c3(P,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(P,c.u_pixel_coord_lower),u_scale:new s.c2(P,c.u_scale),u_fade:new s.bq(P,c.u_fade)}),fill:(P,c)=>({u_fill_translate:new s.c3(P,c.u_fill_translate)}),fillPattern:(P,c)=>({u_image:new s.b_(P,c.u_image),u_texsize:new s.c3(P,c.u_texsize),u_pixel_coord_upper:new s.c3(P,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(P,c.u_pixel_coord_lower),u_scale:new s.c2(P,c.u_scale),u_fade:new s.bq(P,c.u_fade),u_fill_translate:new s.c3(P,c.u_fill_translate)}),fillOutline:(P,c)=>({u_world:new s.c3(P,c.u_world),u_fill_translate:new s.c3(P,c.u_fill_translate)}),fillOutlinePattern:(P,c)=>({u_world:new s.c3(P,c.u_world),u_image:new s.b_(P,c.u_image),u_texsize:new s.c3(P,c.u_texsize),u_pixel_coord_upper:new s.c3(P,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(P,c.u_pixel_coord_lower),u_scale:new s.c2(P,c.u_scale),u_fade:new s.bq(P,c.u_fade),u_fill_translate:new s.c3(P,c.u_fill_translate)}),circle:(P,c)=>({u_camera_to_center_distance:new s.bq(P,c.u_camera_to_center_distance),u_scale_with_map:new s.b_(P,c.u_scale_with_map),u_pitch_with_map:new s.b_(P,c.u_pitch_with_map),u_extrude_scale:new s.c3(P,c.u_extrude_scale),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_globe_extrude_scale:new s.bq(P,c.u_globe_extrude_scale),u_translate:new s.c3(P,c.u_translate)}),collisionBox:(P,c)=>({u_pixel_extrude_scale:new s.c3(P,c.u_pixel_extrude_scale)}),collisionCircle:(P,c)=>({u_viewport_size:new s.c3(P,c.u_viewport_size)}),debug:(P,c)=>({u_color:new s.b$(P,c.u_color),u_overlay:new s.b_(P,c.u_overlay),u_overlay_scale:new s.bq(P,c.u_overlay_scale)}),depth:Dy,clippingMask:Dy,heatmap:(P,c)=>({u_extrude_scale:new s.bq(P,c.u_extrude_scale),u_intensity:new s.bq(P,c.u_intensity),u_globe_extrude_scale:new s.bq(P,c.u_globe_extrude_scale)}),heatmapTexture:(P,c)=>({u_matrix:new s.c0(P,c.u_matrix),u_world:new s.c3(P,c.u_world),u_image:new s.b_(P,c.u_image),u_color_ramp:new s.b_(P,c.u_color_ramp),u_opacity:new s.bq(P,c.u_opacity)}),hillshade:(P,c)=>({u_image:new s.b_(P,c.u_image),u_latrange:new s.c3(P,c.u_latrange),u_exaggeration:new s.bq(P,c.u_exaggeration),u_altitudes:new s.c9(P,c.u_altitudes),u_azimuths:new s.c9(P,c.u_azimuths),u_accent:new s.b$(P,c.u_accent),u_method:new s.b_(P,c.u_method),u_shadows:new s.c8(P,c.u_shadows),u_highlights:new s.c8(P,c.u_highlights)}),hillshadePrepare:(P,c)=>({u_matrix:new s.c0(P,c.u_matrix),u_image:new s.b_(P,c.u_image),u_dimension:new s.c3(P,c.u_dimension),u_zoom:new s.bq(P,c.u_zoom),u_unpack:new s.c1(P,c.u_unpack)}),colorRelief:(P,c)=>({u_image:new s.b_(P,c.u_image),u_unpack:new s.c1(P,c.u_unpack),u_dimension:new s.c3(P,c.u_dimension),u_elevation_stops:new s.b_(P,c.u_elevation_stops),u_color_stops:new s.b_(P,c.u_color_stops),u_color_ramp_size:new s.b_(P,c.u_color_ramp_size),u_opacity:new s.bq(P,c.u_opacity)}),line:(P,c)=>({u_translation:new s.c3(P,c.u_translation),u_ratio:new s.bq(P,c.u_ratio),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_units_to_pixels:new s.c3(P,c.u_units_to_pixels)}),lineGradient:(P,c)=>({u_translation:new s.c3(P,c.u_translation),u_ratio:new s.bq(P,c.u_ratio),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_units_to_pixels:new s.c3(P,c.u_units_to_pixels),u_image:new s.b_(P,c.u_image),u_image_height:new s.bq(P,c.u_image_height)}),linePattern:(P,c)=>({u_translation:new s.c3(P,c.u_translation),u_texsize:new s.c3(P,c.u_texsize),u_ratio:new s.bq(P,c.u_ratio),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_image:new s.b_(P,c.u_image),u_units_to_pixels:new s.c3(P,c.u_units_to_pixels),u_scale:new s.c2(P,c.u_scale),u_fade:new s.bq(P,c.u_fade)}),lineSDF:(P,c)=>({u_translation:new s.c3(P,c.u_translation),u_ratio:new s.bq(P,c.u_ratio),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_units_to_pixels:new s.c3(P,c.u_units_to_pixels),u_image:new s.b_(P,c.u_image),u_mix:new s.bq(P,c.u_mix),u_tileratio:new s.bq(P,c.u_tileratio),u_crossfade_from:new s.bq(P,c.u_crossfade_from),u_crossfade_to:new s.bq(P,c.u_crossfade_to),u_lineatlas_width:new s.bq(P,c.u_lineatlas_width),u_lineatlas_height:new s.bq(P,c.u_lineatlas_height)}),lineGradientSDF:(P,c)=>({u_translation:new s.c3(P,c.u_translation),u_ratio:new s.bq(P,c.u_ratio),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_units_to_pixels:new s.c3(P,c.u_units_to_pixels),u_image:new s.b_(P,c.u_image),u_image_height:new s.bq(P,c.u_image_height),u_tileratio:new s.bq(P,c.u_tileratio),u_crossfade_from:new s.bq(P,c.u_crossfade_from),u_crossfade_to:new s.bq(P,c.u_crossfade_to),u_image_dash:new s.b_(P,c.u_image_dash),u_mix:new s.bq(P,c.u_mix),u_lineatlas_width:new s.bq(P,c.u_lineatlas_width),u_lineatlas_height:new s.bq(P,c.u_lineatlas_height)}),raster:(P,c)=>({u_tl_parent:new s.c3(P,c.u_tl_parent),u_scale_parent:new s.bq(P,c.u_scale_parent),u_buffer_scale:new s.bq(P,c.u_buffer_scale),u_fade_t:new s.bq(P,c.u_fade_t),u_opacity:new s.bq(P,c.u_opacity),u_image0:new s.b_(P,c.u_image0),u_image1:new s.b_(P,c.u_image1),u_brightness_low:new s.bq(P,c.u_brightness_low),u_brightness_high:new s.bq(P,c.u_brightness_high),u_saturation_factor:new s.bq(P,c.u_saturation_factor),u_contrast_factor:new s.bq(P,c.u_contrast_factor),u_spin_weights:new s.c2(P,c.u_spin_weights),u_coords_top:new s.c1(P,c.u_coords_top),u_coords_bottom:new s.c1(P,c.u_coords_bottom)}),symbolIcon:(P,c)=>({u_is_size_zoom_constant:new s.b_(P,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(P,c.u_is_size_feature_constant),u_size_t:new s.bq(P,c.u_size_t),u_size:new s.bq(P,c.u_size),u_camera_to_center_distance:new s.bq(P,c.u_camera_to_center_distance),u_pitch:new s.bq(P,c.u_pitch),u_rotate_symbol:new s.b_(P,c.u_rotate_symbol),u_aspect_ratio:new s.bq(P,c.u_aspect_ratio),u_fade_change:new s.bq(P,c.u_fade_change),u_label_plane_matrix:new s.c0(P,c.u_label_plane_matrix),u_coord_matrix:new s.c0(P,c.u_coord_matrix),u_is_text:new s.b_(P,c.u_is_text),u_pitch_with_map:new s.b_(P,c.u_pitch_with_map),u_is_along_line:new s.b_(P,c.u_is_along_line),u_is_variable_anchor:new s.b_(P,c.u_is_variable_anchor),u_texsize:new s.c3(P,c.u_texsize),u_texture:new s.b_(P,c.u_texture),u_translation:new s.c3(P,c.u_translation),u_pitched_scale:new s.bq(P,c.u_pitched_scale)}),symbolSDF:(P,c)=>({u_is_size_zoom_constant:new s.b_(P,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(P,c.u_is_size_feature_constant),u_size_t:new s.bq(P,c.u_size_t),u_size:new s.bq(P,c.u_size),u_camera_to_center_distance:new s.bq(P,c.u_camera_to_center_distance),u_pitch:new s.bq(P,c.u_pitch),u_rotate_symbol:new s.b_(P,c.u_rotate_symbol),u_aspect_ratio:new s.bq(P,c.u_aspect_ratio),u_fade_change:new s.bq(P,c.u_fade_change),u_label_plane_matrix:new s.c0(P,c.u_label_plane_matrix),u_coord_matrix:new s.c0(P,c.u_coord_matrix),u_is_text:new s.b_(P,c.u_is_text),u_pitch_with_map:new s.b_(P,c.u_pitch_with_map),u_is_along_line:new s.b_(P,c.u_is_along_line),u_is_variable_anchor:new s.b_(P,c.u_is_variable_anchor),u_texsize:new s.c3(P,c.u_texsize),u_texture:new s.b_(P,c.u_texture),u_gamma_scale:new s.bq(P,c.u_gamma_scale),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_is_halo:new s.b_(P,c.u_is_halo),u_translation:new s.c3(P,c.u_translation),u_pitched_scale:new s.bq(P,c.u_pitched_scale)}),symbolTextAndIcon:(P,c)=>({u_is_size_zoom_constant:new s.b_(P,c.u_is_size_zoom_constant),u_is_size_feature_constant:new s.b_(P,c.u_is_size_feature_constant),u_size_t:new s.bq(P,c.u_size_t),u_size:new s.bq(P,c.u_size),u_camera_to_center_distance:new s.bq(P,c.u_camera_to_center_distance),u_pitch:new s.bq(P,c.u_pitch),u_rotate_symbol:new s.b_(P,c.u_rotate_symbol),u_aspect_ratio:new s.bq(P,c.u_aspect_ratio),u_fade_change:new s.bq(P,c.u_fade_change),u_label_plane_matrix:new s.c0(P,c.u_label_plane_matrix),u_coord_matrix:new s.c0(P,c.u_coord_matrix),u_is_text:new s.b_(P,c.u_is_text),u_pitch_with_map:new s.b_(P,c.u_pitch_with_map),u_is_along_line:new s.b_(P,c.u_is_along_line),u_is_variable_anchor:new s.b_(P,c.u_is_variable_anchor),u_texsize:new s.c3(P,c.u_texsize),u_texsize_icon:new s.c3(P,c.u_texsize_icon),u_texture:new s.b_(P,c.u_texture),u_texture_icon:new s.b_(P,c.u_texture_icon),u_gamma_scale:new s.bq(P,c.u_gamma_scale),u_device_pixel_ratio:new s.bq(P,c.u_device_pixel_ratio),u_is_halo:new s.b_(P,c.u_is_halo),u_translation:new s.c3(P,c.u_translation),u_pitched_scale:new s.bq(P,c.u_pitched_scale)}),background:(P,c)=>({u_opacity:new s.bq(P,c.u_opacity),u_color:new s.b$(P,c.u_color)}),backgroundPattern:(P,c)=>({u_opacity:new s.bq(P,c.u_opacity),u_image:new s.b_(P,c.u_image),u_pattern_tl_a:new s.c3(P,c.u_pattern_tl_a),u_pattern_br_a:new s.c3(P,c.u_pattern_br_a),u_pattern_tl_b:new s.c3(P,c.u_pattern_tl_b),u_pattern_br_b:new s.c3(P,c.u_pattern_br_b),u_texsize:new s.c3(P,c.u_texsize),u_mix:new s.bq(P,c.u_mix),u_pattern_size_a:new s.c3(P,c.u_pattern_size_a),u_pattern_size_b:new s.c3(P,c.u_pattern_size_b),u_scale_a:new s.bq(P,c.u_scale_a),u_scale_b:new s.bq(P,c.u_scale_b),u_pixel_coord_upper:new s.c3(P,c.u_pixel_coord_upper),u_pixel_coord_lower:new s.c3(P,c.u_pixel_coord_lower),u_tile_units_to_pixels:new s.bq(P,c.u_tile_units_to_pixels)}),terrain:(P,c)=>({u_texture:new s.b_(P,c.u_texture),u_ele_delta:new s.bq(P,c.u_ele_delta),u_fog_matrix:new s.c0(P,c.u_fog_matrix),u_fog_color:new s.b$(P,c.u_fog_color),u_fog_ground_blend:new s.bq(P,c.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.bq(P,c.u_fog_ground_blend_opacity),u_horizon_color:new s.b$(P,c.u_horizon_color),u_horizon_fog_blend:new s.bq(P,c.u_horizon_fog_blend),u_is_globe_mode:new s.bq(P,c.u_is_globe_mode)}),terrainDepth:(P,c)=>({u_ele_delta:new s.bq(P,c.u_ele_delta)}),terrainCoords:(P,c)=>({u_texture:new s.b_(P,c.u_texture),u_terrain_coords_id:new s.bq(P,c.u_terrain_coords_id),u_ele_delta:new s.bq(P,c.u_ele_delta)}),projectionErrorMeasurement:(P,c)=>({u_input:new s.bq(P,c.u_input),u_output_expected:new s.bq(P,c.u_output_expected)}),atmosphere:(P,c)=>({u_sun_pos:new s.c2(P,c.u_sun_pos),u_atmosphere_blend:new s.bq(P,c.u_atmosphere_blend),u_globe_position:new s.c2(P,c.u_globe_position),u_globe_radius:new s.bq(P,c.u_globe_radius),u_inv_proj_matrix:new s.c0(P,c.u_inv_proj_matrix)}),sky:(P,c)=>({u_sky_color:new s.b$(P,c.u_sky_color),u_horizon_color:new s.b$(P,c.u_horizon_color),u_horizon:new s.c3(P,c.u_horizon),u_horizon_normal:new s.c3(P,c.u_horizon_normal),u_sky_horizon_blend:new s.bq(P,c.u_sky_horizon_blend),u_sky_blend:new s.bq(P,c.u_sky_blend)})};class zd{constructor(c,g,b){this.context=c;const C=c.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete g.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const g=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),g.bufferSubData(g.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Nd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Pv{constructor(c,g,b,C){this.length=g.length,this.attributes=b,this.itemSize=g.bytesPerElement,this.dynamicDraw=C,this.context=c;const I=c.gl;this.buffer=I.createBuffer(),c.bindVertexBuffer.set(this.buffer),I.bufferData(I.ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete g.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){if(c.length!==this.length)throw new Error(`Length of new data is ${c.length}, which doesn't match current length of ${this.length}`);const g=this.context.gl;this.bind(),g.bufferSubData(g.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,g){for(let b=0;b<this.attributes.length;b++){const C=g.attributes[this.attributes[b].name];C!==void 0&&c.enableVertexAttribArray(C)}}setVertexAttribPointers(c,g,b){for(let C=0;C<this.attributes.length;C++){const I=this.attributes[C],z=g.attributes[I.name];z!==void 0&&c.vertexAttribPointer(z,I.components,c[Nd[I.type]],!1,this.itemSize,I.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class qr{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ic extends qr{getDefault(){return s.bp.transparent}set(c){const g=this.current;(c.r!==g.r||c.g!==g.g||c.b!==g.b||c.a!==g.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Gm extends qr{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class Xm extends qr{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class Ly extends qr{getDefault(){return[!0,!0,!0,!0]}set(c){const g=this.current;(c[0]!==g[0]||c[1]!==g[1]||c[2]!==g[2]||c[3]!==g[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Bd extends qr{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class Ym extends qr{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class sp extends qr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const g=this.current;(c.func!==g.func||c.ref!==g.ref||c.mask!==g.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class Ua extends qr{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const g=this.current;(c[0]!==g[0]||c[1]!==g[1]||c[2]!==g[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class Mv extends qr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;c?g.enable(g.STENCIL_TEST):g.disable(g.STENCIL_TEST),this.current=c,this.dirty=!1}}class $y extends qr{getDefault(){return[0,1]}set(c){const g=this.current;(c[0]!==g[0]||c[1]!==g[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class Za extends qr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;c?g.enable(g.DEPTH_TEST):g.disable(g.DEPTH_TEST),this.current=c,this.dirty=!1}}class Dc extends qr{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class ma extends qr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;c?g.enable(g.BLEND):g.disable(g.BLEND),this.current=c,this.dirty=!1}}class Cu extends qr{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const g=this.current;(c[0]!==g[0]||c[1]!==g[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class Fd extends qr{getDefault(){return s.bp.transparent}set(c){const g=this.current;(c.r!==g.r||c.g!==g.g||c.b!==g.b||c.a!==g.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class jd extends qr{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class Km extends qr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;c?g.enable(g.CULL_FACE):g.disable(g.CULL_FACE),this.current=c,this.dirty=!1}}class Mh extends qr{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class bl extends qr{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class Rv extends qr{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class ap extends qr{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class pr extends qr{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const g=this.current;(c[0]!==g[0]||c[1]!==g[1]||c[2]!==g[2]||c[3]!==g[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class zy extends qr{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.bindFramebuffer(g.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class qa extends qr{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.bindRenderbuffer(g.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Ny extends qr{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.bindTexture(g.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class Wa extends qr{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.bindBuffer(g.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class _b extends qr{getDefault(){return null}set(c){const g=this.gl;g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class By extends qr{getDefault(){return null}set(c){var g;if(c===this.current&&!this.dirty)return;const b=this.gl;vl(b)?b.bindVertexArray(c):(g=b.getExtension("OES_vertex_array_object"))===null||g===void 0||g.bindVertexArrayOES(c),this.current=c,this.dirty=!1}}class Rh extends qr{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class Iv extends qr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class Fy extends qr{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class Ih extends qr{constructor(c,g){super(c),this.context=c,this.parent=g}getDefault(){return null}}class lp extends Ih{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class ga extends Ih{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferRenderbuffer(g.FRAMEBUFFER,g.DEPTH_ATTACHMENT,g.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Dh extends Ih{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferRenderbuffer(g.FRAMEBUFFER,g.DEPTH_STENCIL_ATTACHMENT,g.RENDERBUFFER,c),this.current=c,this.dirty=!1}}const Lh="Framebuffer is not complete";class Vd{constructor(c,g,b,C,I){this.context=c,this.width=g,this.height=b;const z=c.gl,V=this.framebuffer=z.createFramebuffer();if(this.colorAttachment=new lp(c,V),C)this.depthAttachment=I?new Dh(c,V):new ga(c,V);else if(I)throw new Error("Stencil cannot be set without depth");if(z.checkFramebufferStatus(z.FRAMEBUFFER)!==z.FRAMEBUFFER_COMPLETE)throw new Error(Lh)}destroy(){const c=this.context.gl,g=this.colorAttachment.get();if(g&&c.deleteTexture(g),this.depthAttachment){const b=this.depthAttachment.get();b&&c.deleteRenderbuffer(b)}c.deleteFramebuffer(this.framebuffer)}}class $h{constructor(c){var g,b;if(this.gl=c,this.clearColor=new Ic(this),this.clearDepth=new Gm(this),this.clearStencil=new Xm(this),this.colorMask=new Ly(this),this.depthMask=new Bd(this),this.stencilMask=new Ym(this),this.stencilFunc=new sp(this),this.stencilOp=new Ua(this),this.stencilTest=new Mv(this),this.depthRange=new $y(this),this.depthTest=new Za(this),this.depthFunc=new Dc(this),this.blend=new ma(this),this.blendFunc=new Cu(this),this.blendColor=new Fd(this),this.blendEquation=new jd(this),this.cullFace=new Km(this),this.cullFaceSide=new Mh(this),this.frontFace=new bl(this),this.program=new Rv(this),this.activeTexture=new ap(this),this.viewport=new pr(this),this.bindFramebuffer=new zy(this),this.bindRenderbuffer=new qa(this),this.bindTexture=new Ny(this),this.bindVertexBuffer=new Wa(this),this.bindElementBuffer=new _b(this),this.bindVertexArray=new By(this),this.pixelStoreUnpack=new Rh(this),this.pixelStoreUnpackPremultiplyAlpha=new Iv(this),this.pixelStoreUnpackFlipY=new Fy(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE),vl(c)){this.HALF_FLOAT=c.HALF_FLOAT;const C=c.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(g=c.RGBA16F)!==null&&g!==void 0?g:C?.RGBA16F_EXT,this.RGB16F=(b=c.RGB16F)!==null&&b!==void 0?b:C?.RGB16F_EXT,c.getExtension("EXT_color_buffer_float")}else{c.getExtension("EXT_color_buffer_half_float"),c.getExtension("OES_texture_half_float_linear");const C=c.getExtension("OES_texture_half_float");this.HALF_FLOAT=C?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,g){return new zd(this,c,g)}createVertexBuffer(c,g,b){return new Pv(this,c,g,b)}createRenderbuffer(c,g,b){const C=this.gl,I=C.createRenderbuffer();return this.bindRenderbuffer.set(I),C.renderbufferStorage(C.RENDERBUFFER,c,g,b),this.bindRenderbuffer.set(null),I}createFramebuffer(c,g,b,C){return new Vd(this,c,g,b,C)}clear({color:c,depth:g,stencil:b}){const C=this.gl;let I=0;c&&(I|=C.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),g!==void 0&&(I|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(g),this.depthMask.set(!0)),b!==void 0&&(I|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),C.clear(I)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){s.bR(c.blendFunction,ui.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}createVertexArray(){var c;return vl(this.gl)?this.gl.createVertexArray():(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.createVertexArrayOES()}deleteVertexArray(c){var g;return vl(this.gl)?this.gl.deleteVertexArray(c):(g=this.gl.getExtension("OES_vertex_array_object"))===null||g===void 0?void 0:g.deleteVertexArrayOES(c)}unbindVAO(){this.bindVertexArray.set(null)}}let ns;function ds(P,c,g,b,C){const I=P.context,z=P.transform,V=I.gl,G=P.useProgram("collisionBox"),J=[];let ie=0,de=0;for(let De=0;De<b.length;De++){const Ve=b[De],He=c.getTile(Ve).getBucket(g);if(!He)continue;const Fe=C?He.textCollisionBox:He.iconCollisionBox,We=He.collisionCircleArray;We.length>0&&(J.push({circleArray:We,circleOffset:de,coord:Ve}),ie+=We.length/4,de=ie),Fe&&G.draw(I,V.LINES,fr.disabled,Nr.disabled,P.colorModeForRenderPass(),Cr.disabled,Eh(P.transform),P.style.map.terrain&&P.style.map.terrain.getTerrainData(Ve),z.getProjectionData({overscaledTileID:Ve,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),g.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,null,P.transform.zoom,null,null,Fe.collisionVertexBuffer)}if(!C||!J.length)return;const he=P.useProgram("collisionCircle"),ye=new s.ca;ye.resize(4*ie),ye._trim();let Se=0;for(const De of J)for(let Ve=0;Ve<De.circleArray.length/4;Ve++){const He=4*Ve,Fe=De.circleArray[He+0],We=De.circleArray[He+1],Je=De.circleArray[He+2],Ze=De.circleArray[He+3];ye.emplace(Se++,Fe,We,Je,Ze,0),ye.emplace(Se++,Fe,We,Je,Ze,1),ye.emplace(Se++,Fe,We,Je,Ze,2),ye.emplace(Se++,Fe,We,Je,Ze,3)}(!ns||ns.length<2*ie)&&(ns=(function(De){const Ve=2*De,He=new s.cc;He.resize(Ve),He._trim();for(let Fe=0;Fe<Ve;Fe++){const We=6*Fe;He.uint16[We+0]=4*Fe+0,He.uint16[We+1]=4*Fe+1,He.uint16[We+2]=4*Fe+2,He.uint16[We+3]=4*Fe+2,He.uint16[We+4]=4*Fe+3,He.uint16[We+5]=4*Fe+0}return He})(ie));const Ie=I.createIndexBuffer(ns,!0),Le=I.createVertexBuffer(ye,s.cb.members,!0);for(const De of J){const Ve=kv(P.transform);he.draw(I,V.TRIANGLES,fr.disabled,Nr.disabled,P.colorModeForRenderPass(),Cr.disabled,Ve,P.style.map.terrain&&P.style.map.terrain.getTerrainData(De.coord),null,g.id,Le,Ie,s.aX.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,P.transform.zoom,null,null,null)}Le.destroy(),Ie.destroy()}const Lc=s.ar(new Float32Array(16));function $c(P,c,g,b,C,I){const{horizontalAlign:z,verticalAlign:V}=s.aS(P);return new s.P((-(z-.5)*c/C+b[0])*I,(-(V-.5)*g/C+b[1])*I)}function Sa(P,c,g,b,C,I){const z=c.tileAnchorPoint.add(new s.P(c.translation[0],c.translation[1]));if(c.pitchWithMap){let V=b.mult(I);g||(V=V.rotate(-C));const G=z.add(V);return hr(G.x,G.y,c.pitchedLabelPlaneMatrix,c.getElevation).point}if(g){const V=zr(c.tileAnchorPoint.x+1,c.tileAnchorPoint.y,c).point.sub(P),G=Math.atan(V.y/V.x)+(V.x<0?Math.PI:0);return P.add(b.rotate(G))}return P.add(b)}function Tu(P,c,g,b,C,I,z,V,G,J,ie,de){const he=P.text.placedSymbolArray,ye=P.text.dynamicLayoutVertexArray,Se=P.icon.dynamicLayoutVertexArray,Ie={};ye.clear();for(let Le=0;Le<he.length;Le++){const De=he.get(Le),Ve=De.hidden||!De.crossTileID||P.allowVerticalPlacement&&!De.placedOrientation?null:b[De.crossTileID];if(Ve){const He=new s.P(De.anchorX,De.anchorY),Fe={getElevation:de,width:C.width,height:C.height,pitchedLabelPlaneMatrix:I,pitchWithMap:g,transform:C,tileAnchorPoint:He,translation:J,unwrappedTileID:ie},We=g?Hf(He.x,He.y,Fe):zr(He.x,He.y,Fe),Je=kd(C.cameraToCenterDistance,We.signedDistanceFromCamera);let Ze=s.aA(P.textSizeData,V,De)*Je/s.aM;g&&(Ze*=P.tilePixelRatio/z);const{width:rt,height:xt,anchor:ht,textOffset:mt,textBoxScale:gt}=Ve,tn=$c(ht,rt,xt,mt,gt,Ze),rn=C.getPitchedTextCorrection(He.x+J[0],He.y+J[1],ie),Bt=Sa(We.point,Fe,c,tn,-C.bearingInRadians,rn),hn=P.allowVerticalPlacement&&De.placedOrientation===s.az.vertical?Math.PI/2:0;for(let cr=0;cr<De.numGlyphs;cr++)s.aG(ye,Bt,hn);G&&De.associatedIconIndex>=0&&(Ie[De.associatedIconIndex]={shiftedAnchor:Bt,angle:hn})}else Pc(De.numGlyphs,ye)}if(G){Se.clear();const Le=P.icon.placedSymbolArray;for(let De=0;De<Le.length;De++){const Ve=Le.get(De);if(Ve.hidden)Pc(Ve.numGlyphs,Se);else{const He=Ie[De];if(He)for(let Fe=0;Fe<Ve.numGlyphs;Fe++)s.aG(Se,He.shiftedAnchor,He.angle);else Pc(Ve.numGlyphs,Se)}}P.icon.dynamicLayoutVertexBuffer.updateData(Se)}P.text.dynamicLayoutVertexBuffer.updateData(ye)}function Dv(P,c,g){return g.iconsInText&&c?"symbolTextAndIcon":P?"symbolSDF":"symbolIcon"}function Qd(P,c,g,b,C,I,z,V,G,J,ie,de,he){const ye=P.context,Se=ye.gl,Ie=P.transform,Le=V==="map",De=G==="map",Ve=V!=="viewport"&&g.layout.get("symbol-placement")!=="point",He=Le&&!De&&!Ve,Fe=!g.layout.get("symbol-sort-key").isConstant();let We=!1;const Je=P.getDepthModeForSublayer(0,fr.ReadOnly),Ze=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),rt=[],xt=Ie.getCircleRadiusCorrection();for(const ht of b){const mt=c.getTile(ht),gt=mt.getBucket(g);if(!gt)continue;const tn=C?gt.text:gt.icon;if(!tn||!tn.segments.get().length||!tn.hasVisibleVertices)continue;const rn=tn.programConfigurations.get(g.id),Bt=C||gt.sdfIcons,hn=C?gt.textSizeData:gt.iconSizeData,cr=De||Ie.pitch!==0,ti=P.useProgram(Dv(Bt,C,gt),rn),Ci=s.ay(hn,Ie.zoom),xi=P.style.map.terrain&&P.style.map.terrain.getTerrainData(ht);let $i,hi,to,zi,ps=[0,0],fo=null;if(C)hi=mt.glyphAtlasTexture,to=Se.LINEAR,$i=mt.glyphAtlasTexture.size,gt.iconsInText&&(ps=mt.imageAtlasTexture.size,fo=mt.imageAtlasTexture,zi=cr||P.options.rotating||P.options.zooming||hn.kind==="composite"||hn.kind==="camera"?Se.LINEAR:Se.NEAREST);else{const oi=g.layout.get("icon-size").constantOr(0)!==1||gt.iconsNeedLinear;hi=mt.imageAtlasTexture,to=Bt||P.options.rotating||P.options.zooming||oi||cr?Se.LINEAR:Se.NEAREST,$i=mt.imageAtlasTexture.size}const po=s.aN(mt,1,P.transform.zoom),ms=ja(Le,P.transform,po),Gc=s.N();s.aB(Gc,ms);const Xc=Oy(De,Le,P.transform,po),oc=s.aO(Ie,mt,I,z),Ea=Ie.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!he,applyTerrainMatrix:!0}),Kd=Ze&&gt.hasTextData(),vp=g.layout.get("icon-text-fit")!=="none"&&Kd&&gt.hasIconData();if(Ve){const oi=P.style.map.terrain?(No,qo)=>P.style.map.terrain.getElevation(ht,No,qo):null,_i=g.layout.get("text-rotation-alignment")==="map";wu(gt,P,C,ms,Gc,De,J,_i,ht.toUnwrapped(),Ie.width,Ie.height,oc,oi)}const sc=C&&Ze||vp,Aa=Ve||sc?Lc:De?ms:P.transform.clipSpaceToPixelsMatrix,Ka=Bt&&g.paint.get(C?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let kl;kl=Bt?gt.iconsInText?_l(hn.kind,Ci,He,De,Ve,sc,P,Aa,Xc,oc,$i,ps,xt):Iy(hn.kind,Ci,He,De,Ve,sc,P,Aa,Xc,oc,C,$i,0,xt):qm(hn.kind,Ci,He,De,Ve,sc,P,Aa,Xc,oc,C,$i,xt);const El={program:ti,buffers:tn,uniformValues:kl,projectionData:Ea,atlasTexture:hi,atlasTextureIcon:fo,atlasInterpolation:to,atlasInterpolationIcon:zi,isSDF:Bt,hasHalo:Ka};if(Fe&&gt.canOverlap){We=!0;const oi=tn.segments.get();for(const _i of oi)rt.push({segments:new s.aX([_i]),sortKey:_i.sortKey,state:El,terrainData:xi})}else rt.push({segments:tn.segments,sortKey:0,state:El,terrainData:xi})}We&&rt.sort(((ht,mt)=>ht.sortKey-mt.sortKey));for(const ht of rt){const mt=ht.state;if(ye.activeTexture.set(Se.TEXTURE0),mt.atlasTexture.bind(mt.atlasInterpolation,Se.CLAMP_TO_EDGE),mt.atlasTextureIcon&&(ye.activeTexture.set(Se.TEXTURE1),mt.atlasTextureIcon&&mt.atlasTextureIcon.bind(mt.atlasInterpolationIcon,Se.CLAMP_TO_EDGE)),mt.isSDF){const gt=mt.uniformValues;mt.hasHalo&&(gt.u_is_halo=1,cp(mt.buffers,ht.segments,g,P,mt.program,Je,ie,de,gt,mt.projectionData,ht.terrainData)),gt.u_is_halo=0}cp(mt.buffers,ht.segments,g,P,mt.program,Je,ie,de,mt.uniformValues,mt.projectionData,ht.terrainData)}}function cp(P,c,g,b,C,I,z,V,G,J,ie){const de=b.context;C.draw(de,de.gl.TRIANGLES,I,z,V,Cr.backCCW,G,ie,J,g.id,P.layoutVertexBuffer,P.indexBuffer,c,g.paint,b.transform.zoom,P.programConfigurations.get(g.id),P.dynamicLayoutVertexBuffer,P.opacityVertexBuffer)}function Lv(P,c,g,b,C){const I=P.context,z=I.gl,V=Nr.disabled,G=new ui([z.ONE,z.ONE],s.bp.transparent,[!0,!0,!0,!0]),J=c.getBucket(g);if(!J)return;const ie=b.key;let de=g.heatmapFbos.get(ie);de||(de=vi(I,c.tileSize,c.tileSize),g.heatmapFbos.set(ie,de)),I.bindFramebuffer.set(de.framebuffer),I.viewport.set([0,0,c.tileSize,c.tileSize]),I.clear({color:s.bp.transparent});const he=J.programConfigurations.get(g.id),ye=P.useProgram("heatmap",he,!C),Se=P.transform.getProjectionData({overscaledTileID:c.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ie=P.style.map.terrain.getTerrainData(b);ye.draw(I,z.TRIANGLES,fr.disabled,V,G,Cr.disabled,Ah(c,P.transform.zoom,g.paint.get("heatmap-intensity"),1),Ie,Se,g.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,g.paint,P.transform.zoom,he)}function fs(P,c,g,b,C){const I=P.context,z=I.gl,V=P.transform;I.setColorMode(P.colorModeForRenderPass());const G=Ir(I,c),J=g.key,ie=c.heatmapFbos.get(J);if(!ie)return;I.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,ie.colorAttachment.get()),I.activeTexture.set(z.TEXTURE1),G.bind(z.LINEAR,z.CLAMP_TO_EDGE);const de=V.getProjectionData({overscaledTileID:g,applyTerrainMatrix:C,applyGlobeMatrix:!b});P.useProgram("heatmapTexture").draw(I,z.TRIANGLES,fr.disabled,Nr.disabled,P.colorModeForRenderPass(),Cr.disabled,Ev(P,c,0,1),null,de,c.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments,c.paint,V.zoom),ie.destroy(),c.heatmapFbos.delete(J)}function vi(P,c,g){var b,C;const I=P.gl,z=I.createTexture();I.bindTexture(I.TEXTURE_2D,z),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR);const V=(b=P.HALF_FLOAT)!==null&&b!==void 0?b:I.UNSIGNED_BYTE,G=(C=P.RGBA16F)!==null&&C!==void 0?C:I.RGBA;I.texImage2D(I.TEXTURE_2D,0,G,c,g,0,I.RGBA,V,null);const J=P.createFramebuffer(c,g,!1,!1);return J.colorAttachment.set(z),J}function Ir(P,c){return c.colorRampTexture||(c.colorRampTexture=new s.T(P,c.colorRamp,P.gl.RGBA)),c.colorRampTexture}function ku(P,c,g,b,C,I,z,V){let G=256;if(C.stepInterpolant){const J=c.getSource().maxzoom,ie=z.canonical.z===J?Math.ceil(1<<P.transform.maxZoom-z.canonical.z):1;G=s.an(s.ce(I.maxLineLength/s.a5*1024*ie),256,g.maxTextureSize)}return V.gradient=s.cf({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:G,image:V.gradient||void 0,clips:I.lineClipsArray}),V.texture?V.texture.update(V.gradient):V.texture=new s.T(g,V.gradient,b.RGBA),V.version=C.gradientVersion,V.texture}function Ha(P,c,g,b,C){P.activeTexture.set(c.TEXTURE0),g.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),b.updatePaintBuffers(C)}function Ji(P,c,g,b,C,I){(C||P.lineAtlas.dirty)&&(c.activeTexture.set(g.TEXTURE0),P.lineAtlas.bind(c)),b.updatePaintBuffers(I)}function Ca(P,c,g,b,C,I,z){const V=I.gradients[C.id];let G=V.texture;C.gradientVersion!==V.version&&(G=ku(P,c,g,b,C,I,z,V)),g.activeTexture.set(b.TEXTURE0),G.bind(C.stepInterpolant?b.NEAREST:b.LINEAR,b.CLAMP_TO_EDGE)}function Ta(P,c,g,b,C,I,z,V,G){const J=I.gradients[C.id];let ie=J.texture;C.gradientVersion!==J.version&&(ie=ku(P,c,g,b,C,I,z,J)),g.activeTexture.set(b.TEXTURE0),ie.bind(C.stepInterpolant?b.NEAREST:b.LINEAR,b.CLAMP_TO_EDGE),g.activeTexture.set(b.TEXTURE1),P.lineAtlas.bind(g),V.updatePaintBuffers(G)}function Jm(P,c,g,b,C){if(!g||!b||!b.imageAtlas)return;const I=b.imageAtlas.patternPositions;let z=I[g.to.toString()],V=I[g.from.toString()];if(!z&&V&&(z=V),!V&&z&&(V=z),!z||!V){const G=C.getPaintProperty(c);z=I[G],V=I[G]}z&&V&&P.setConstantPatternPositions(z,V)}function zc(P,c,g,b,C,I,z,V){const G=P.context.gl,J="fill-pattern",ie=g.paint.get(J),de=ie&&ie.constantOr(1),he=g.getCrossfadeParameters();let ye,Se,Ie,Le,De;const Ve=P.transform,He=g.paint.get("fill-translate"),Fe=g.paint.get("fill-translate-anchor");z?(Se=de&&!g.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ye=G.LINES):(Se=de?"fillPattern":"fill",ye=G.TRIANGLES);const We=ie.constantOr(null);for(const Je of b){const Ze=c.getTile(Je);if(de&&!Ze.patternsLoaded())continue;const rt=Ze.getBucket(g);if(!rt)continue;const xt=rt.programConfigurations.get(g.id),ht=P.useProgram(Se,xt),mt=P.style.map.terrain&&P.style.map.terrain.getTerrainData(Je);de&&(P.context.activeTexture.set(G.TEXTURE0),Ze.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),xt.updatePaintBuffers(he)),Jm(xt,J,We,Ze,g);const gt=Ve.getProjectionData({overscaledTileID:Je,applyGlobeMatrix:!V,applyTerrainMatrix:!0}),tn=s.aO(Ve,Ze,He,Fe);if(z){Le=rt.indexBuffer2,De=rt.segments2;const Bt=[G.drawingBufferWidth,G.drawingBufferHeight];Ie=Se==="fillOutlinePattern"&&de?mb(P,he,Ze,Bt,tn):op(Bt,tn)}else Le=rt.indexBuffer,De=rt.segments,Ie=de?$d(P,he,Ze,tn):{u_fill_translate:tn};const rn=P.stencilModeForClipping(Je);ht.draw(P.context,ye,C,rn,I,Cr.backCCW,Ie,mt,gt,g.id,rt.layoutVertexBuffer,Le,De,g.paint,P.transform.zoom,xt)}}function Nc(P,c,g,b,C,I,z,V){const G=P.context,J=G.gl,ie="fill-extrusion-pattern",de=g.paint.get(ie),he=de.constantOr(1),ye=g.getCrossfadeParameters(),Se=g.paint.get("fill-extrusion-opacity"),Ie=de.constantOr(null),Le=P.transform;for(const De of b){const Ve=c.getTile(De),He=Ve.getBucket(g);if(!He)continue;const Fe=P.style.map.terrain&&P.style.map.terrain.getTerrainData(De),We=He.programConfigurations.get(g.id),Je=P.useProgram(he?"fillExtrusionPattern":"fillExtrusion",We);he&&(P.context.activeTexture.set(J.TEXTURE0),Ve.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),We.updatePaintBuffers(ye));const Ze=Le.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!V,applyTerrainMatrix:!0});Jm(We,ie,Ie,Ve,g);const rt=s.aO(Le,Ve,g.paint.get("fill-extrusion-translate"),g.paint.get("fill-extrusion-translate-anchor")),xt=g.paint.get("fill-extrusion-vertical-gradient"),ht=he?Py(P,xt,Se,rt,De,ye,Ve):Ay(P,xt,Se,rt);Je.draw(G,G.gl.TRIANGLES,C,I,z,Cr.backCCW,ht,Fe,Ze,g.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,g.paint,P.transform.zoom,We,P.style.map.terrain&&He.centroidVertexBuffer)}}function Bc(P,c,g,b,C,I,z,V,G){var J;const ie=P.style.projection,de=P.context,he=P.transform,ye=de.gl,Se=[`#define NUM_ILLUMINATION_SOURCES ${g.paint.get("hillshade-highlight-color").values.length}`],Ie=P.useProgram("hillshade",null,!1,Se),Le=!P.options.moving;for(const De of b){const Ve=c.getTile(De),He=Ve.fbo;if(!He)continue;const Fe=ie.getMeshFromTileID(de,De.canonical,V,!0,"raster"),We=(J=P.style.map.terrain)===null||J===void 0?void 0:J.getTerrainData(De);de.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,He.colorAttachment.get());const Je=he.getProjectionData({overscaledTileID:De,aligned:Le,applyGlobeMatrix:!G,applyTerrainMatrix:!0});Ie.draw(de,ye.TRIANGLES,I,C[De.overscaledZ],z,Cr.backCCW,Qm(P,Ve,g),We,Je,g.id,Fe.vertexBuffer,Fe.indexBuffer,Fe.segments)}}function Eu(P,c,g,b,C,I,z,V,G){var J;const ie=P.style.projection,de=P.context,he=P.transform,ye=de.gl,Se=P.useProgram("colorRelief"),Ie=!P.options.moving;let Le=!0,De=0;for(const Ve of b){const He=c.getTile(Ve),Fe=He.dem;if(Le){const ht=ye.getParameter(ye.MAX_TEXTURE_SIZE),{elevationTexture:mt,colorTexture:gt}=g.getColorRampTextures(de,ht,Fe.getUnpackVector());de.activeTexture.set(ye.TEXTURE1),mt.bind(ye.NEAREST,ye.CLAMP_TO_EDGE),de.activeTexture.set(ye.TEXTURE4),gt.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),Le=!1,De=mt.size[0]}if(!Fe||!Fe.data)continue;const We=Fe.stride,Je=Fe.getPixels();if(de.activeTexture.set(ye.TEXTURE0),de.pixelStoreUnpackPremultiplyAlpha.set(!1),He.demTexture=He.demTexture||P.getTileTexture(We),He.demTexture){const ht=He.demTexture;ht.update(Je,{premultiply:!1}),ht.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)}else He.demTexture=new s.T(de,Je,ye.RGBA,{premultiply:!1}),He.demTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE);const Ze=ie.getMeshFromTileID(de,Ve.canonical,V,!0,"raster"),rt=(J=P.style.map.terrain)===null||J===void 0?void 0:J.getTerrainData(Ve),xt=he.getProjectionData({overscaledTileID:Ve,aligned:Ie,applyGlobeMatrix:!G,applyTerrainMatrix:!0});Se.draw(de,ye.TRIANGLES,I,C[Ve.overscaledZ],z,Cr.backCCW,yb(g,He.dem,De),rt,xt,g.id,Ze.vertexBuffer,Ze.indexBuffer,Ze.segments)}}const Au=[new s.P(0,0),new s.P(s.a5,0),new s.P(s.a5,s.a5),new s.P(0,s.a5)];function wl(P,c,g,b,C,I,z,V,G=!1,J=!1){const ie=b[b.length-1].overscaledZ,de=P.context,he=de.gl,ye=P.useProgram("raster"),Se=P.transform,Ie=P.style.projection,Le=P.colorModeForRenderPass(),De=!P.options.moving,Ve=g.paint.get("raster-opacity"),He=g.paint.get("raster-resampling"),Fe=g.paint.get("raster-fade-duration"),We=!!P.style.map.terrain;for(const Je of b){const Ze=P.getDepthModeForSublayer(Je.overscaledZ-ie,Ve===1?fr.ReadWrite:fr.ReadOnly,he.LESS),rt=c.getTile(Je),xt=He==="nearest"?he.NEAREST:he.LINEAR;de.activeTexture.set(he.TEXTURE0),rt.texture.bind(xt,he.CLAMP_TO_EDGE,he.LINEAR_MIPMAP_NEAREST),de.activeTexture.set(he.TEXTURE1);const{parentTile:ht,parentScaleBy:mt,parentTopLeft:gt,fadeValues:tn}=Fc(rt,c,Fe,We);rt.fadeOpacity=tn.tileOpacity,ht?(ht.fadeOpacity=tn.parentTileOpacity,ht.texture.bind(xt,he.CLAMP_TO_EDGE,he.LINEAR_MIPMAP_NEAREST)):rt.texture.bind(xt,he.CLAMP_TO_EDGE,he.LINEAR_MIPMAP_NEAREST),rt.texture.useMipmap&&de.extTextureFilterAnisotropic&&P.transform.pitch>20&&he.texParameterf(he.TEXTURE_2D,de.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,de.extTextureFilterAnisotropicMax);const rn=P.style.map.terrain&&P.style.map.terrain.getTerrainData(Je),Bt=Se.getProjectionData({overscaledTileID:Je,aligned:De,applyGlobeMatrix:!J,applyTerrainMatrix:!0}),hn=My(gt,mt,tn.fadeMix,g,V),cr=Ie.getMeshFromTileID(de,Je.canonical,I,z,"raster");ye.draw(de,he.TRIANGLES,Ze,C?C[Je.overscaledZ]:Nr.disabled,Le,G?Cr.frontCCW:Cr.backCCW,hn,rn,Bt,g.id,cr.vertexBuffer,cr.indexBuffer,cr.segments)}}function Fc(P,c,g,b){const C={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(g===0||b)return C;if(P.fadingParentID){const I=c.getLoadedTile(P.fadingParentID);if(!I)return C;const z=Math.pow(2,I.tileID.overscaledZ-P.tileID.overscaledZ),V=[P.tileID.canonical.x*z%1,P.tileID.canonical.y*z%1],G=(function(J,ie,de){const he=A(),ye=(he-ie.timeAdded)/de,Se=J.fadingDirection===at.Incoming,Ie=s.an((he-J.timeAdded)/de,0,1),Le=s.an(1-ye,0,1),De=Se?Ie:Le;return{tileOpacity:De,parentTileOpacity:Se?Le:Ie,fadeMix:{opacity:1,mix:1-De}}})(P,I,g);return{parentTile:I,parentScaleBy:z,parentTopLeft:V,fadeValues:G}}if(P.selfFading){const I=(function(z,V){const G=(A()-z.timeAdded)/V,J=s.an(G,0,1);return{tileOpacity:J,fadeMix:{opacity:J,mix:0}}})(P,g);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:I}}return C}const Pu=new s.bp(1,0,0,1),jc=new s.bp(0,1,0,1),jy=new s.bp(0,0,1,1),Vy=new s.bp(1,0,1,1),Ga=new s.bp(0,1,1,1);function up(P,c,g,b){zo(P,0,c+g/2,P.transform.width,g,b)}function Mu(P,c,g,b){zo(P,c-g/2,0,g,P.transform.height,b)}function zo(P,c,g,b,C,I){const z=P.context,V=z.gl;V.enable(V.SCISSOR_TEST),V.scissor(c*P.pixelRatio,g*P.pixelRatio,b*P.pixelRatio,C*P.pixelRatio),z.clear({color:I}),V.disable(V.SCISSOR_TEST)}function eg(P,c,g){const b=P.context,C=b.gl,I=P.useProgram("debug"),z=fr.disabled,V=Nr.disabled,G=P.colorModeForRenderPass(),J="$debug",ie=P.style.map.terrain&&P.style.map.terrain.getTerrainData(g);b.activeTexture.set(C.TEXTURE0);const de=c.getTileByID(g.key).latestRawTileData,he=Math.floor((de&&de.byteLength||0)/1024),ye=c.getTile(g).tileSize,Se=512/Math.min(ye,512)*(g.overscaledZ/P.transform.zoom)*.5;let Ie=g.canonical.toString();g.overscaledZ!==g.canonical.z&&(Ie+=` => ${g.overscaledZ}`),(function(De,Ve){De.initDebugOverlayCanvas();const He=De.debugOverlayCanvas,Fe=De.context.gl,We=De.debugOverlayCanvas.getContext("2d");We.clearRect(0,0,He.width,He.height),We.shadowColor="white",We.shadowBlur=2,We.lineWidth=1.5,We.strokeStyle="white",We.textBaseline="top",We.font="bold 36px Open Sans, sans-serif",We.fillText(Ve,5,5),We.strokeText(Ve,5,5),De.debugOverlayTexture.update(He),De.debugOverlayTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE)})(P,`${Ie} ${he}kB`);const Le=P.transform.getProjectionData({overscaledTileID:g,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(b,C.TRIANGLES,z,V,ui.alphaBlended,Cr.disabled,Vm(s.bp.transparent,Se),null,Le,J,P.debugBuffer,P.quadTriangleIndexBuffer,P.debugSegments),I.draw(b,C.LINE_STRIP,z,V,G,Cr.disabled,Vm(s.bp.red),ie,Le,J,P.debugBuffer,P.tileBorderIndexBuffer,P.debugSegments)}function Qy(P,c,g,b){const{isRenderingGlobe:C}=b,I=P.context,z=I.gl,V=P.transform,G=P.colorModeForRenderPass(),J=P.getDepthModeFor3D(),ie=P.useProgram("terrain");I.bindFramebuffer.set(null),I.viewport.set([0,0,P.width,P.height]);for(const de of g){const he=c.getTerrainMesh(de.tileID),ye=P.renderToTexture.getTexture(de),Se=c.getTerrainData(de.tileID);I.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,ye.texture);const Ie=c.getMeshFrameDelta(V.zoom),Le=V.calculateFogMatrix(de.tileID.toUnwrapped()),De=db(Ie,Le,P.style.sky,V.pitch,C),Ve=V.getProjectionData({overscaledTileID:de.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ie.draw(I,z.TRIANGLES,J,Nr.disabled,G,Cr.backCCW,De,Se,Ve,"terrain",he.vertexBuffer,he.indexBuffer,he.segments)}}function $v(P,c){if(!c.mesh){const g=new s.aW;g.emplaceBack(-1,-1),g.emplaceBack(1,-1),g.emplaceBack(1,1),g.emplaceBack(-1,1);const b=new s.aY;b.emplaceBack(0,1,2),b.emplaceBack(0,2,3),c.mesh=new yi(P.createVertexBuffer(g,yl.members),P.createIndexBuffer(b),s.aX.simpleSegment(0,0,g.length,b.length))}return c.mesh}class bb{constructor(c,g){this.context=new $h(c),this.transform=g,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Si.maxOverzooming+Si.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new es}resize(c,g,b){if(this.width=Math.floor(c*b),this.height=Math.floor(g*b),this.pixelRatio=b,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const C of this.style._order)this.style._layers[C].resize()}setup(){const c=this.context,g=new s.aW;g.emplaceBack(0,0),g.emplaceBack(s.a5,0),g.emplaceBack(0,s.a5),g.emplaceBack(s.a5,s.a5),this.tileExtentBuffer=c.createVertexBuffer(g,yl.members),this.tileExtentSegments=s.aX.simpleSegment(0,0,4,2);const b=new s.aW;b.emplaceBack(0,0),b.emplaceBack(s.a5,0),b.emplaceBack(0,s.a5),b.emplaceBack(s.a5,s.a5),this.debugBuffer=c.createVertexBuffer(b,yl.members),this.debugSegments=s.aX.simpleSegment(0,0,4,5);const C=new s.ch;C.emplaceBack(0,0,0,0),C.emplaceBack(s.a5,0,s.a5,0),C.emplaceBack(0,s.a5,0,s.a5),C.emplaceBack(s.a5,s.a5,s.a5,s.a5),this.rasterBoundsBuffer=c.createVertexBuffer(C,hb.members),this.rasterBoundsSegments=s.aX.simpleSegment(0,0,4,2);const I=new s.aW;I.emplaceBack(0,0),I.emplaceBack(s.a5,0),I.emplaceBack(0,s.a5),I.emplaceBack(s.a5,s.a5),this.rasterBoundsBufferPosOnly=c.createVertexBuffer(I,yl.members),this.rasterBoundsSegmentsPosOnly=s.aX.simpleSegment(0,0,4,5);const z=new s.aW;z.emplaceBack(0,0),z.emplaceBack(1,0),z.emplaceBack(0,1),z.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(z,yl.members),this.viewportSegments=s.aX.simpleSegment(0,0,4,2);const V=new s.ci;V.emplaceBack(0),V.emplaceBack(1),V.emplaceBack(3),V.emplaceBack(2),V.emplaceBack(0),this.tileBorderIndexBuffer=c.createIndexBuffer(V);const G=new s.aY;G.emplaceBack(1,0,2),G.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(G);const J=this.context.gl;this.stencilClearMode=new Nr({func:J.ALWAYS,mask:0},0,255,J.ZERO,J.ZERO,J.ZERO),this.tileExtentMesh=new yi(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const c=this.context,g=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const b=s.N();s.c7(b,0,this.width,this.height,0,0,1),s.Q(b,b,[g.drawingBufferWidth,g.drawingBufferHeight,0]);const C={mainMatrix:b,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:b};this.useProgram("clippingMask",null,!0).draw(c,g.TRIANGLES,fr.disabled,this.stencilClearMode,ui.disabled,Cr.disabled,null,null,C,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(c,g,b){if(this.currentStencilSource===c.source||!c.isTileClipped()||!g||!g.length)return;this.currentStencilSource=c.source,this.nextStencilID+g.length>256&&this.clearStencil();const C=this.context;C.setColorMode(ui.disabled),C.setDepthMode(fr.disabled);const I={};for(const z of g)I[z.key]=this.nextStencilID++;this._renderTileMasks(I,g,b,!0),this._renderTileMasks(I,g,b,!1),this._tileClippingMaskIDs=I}_renderTileMasks(c,g,b,C){const I=this.context,z=I.gl,V=this.style.projection,G=this.transform,J=this.useProgram("clippingMask");for(const ie of g){const de=c[ie.key],he=this.style.map.terrain&&this.style.map.terrain.getTerrainData(ie),ye=V.getMeshFromTileID(this.context,ie.canonical,C,!0,"stencil"),Se=G.getProjectionData({overscaledTileID:ie,applyGlobeMatrix:!b,applyTerrainMatrix:!0});J.draw(I,z.TRIANGLES,fr.disabled,new Nr({func:z.ALWAYS,mask:0},de,255,z.KEEP,z.KEEP,z.REPLACE),ui.disabled,b?Cr.disabled:Cr.backCCW,null,he,Se,"$clipping",ye.vertexBuffer,ye.indexBuffer,ye.segments)}}_renderTilesDepthBuffer(){const c=this.context,g=c.gl,b=this.style.projection,C=this.transform,I=this.useProgram("depth"),z=this.getDepthModeFor3D(),V=En(C,{tileSize:C.tileSize});for(const G of V){const J=this.style.map.terrain&&this.style.map.terrain.getTerrainData(G),ie=b.getMeshFromTileID(this.context,G.canonical,!0,!0,"raster"),de=C.getProjectionData({overscaledTileID:G,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(c,g.TRIANGLES,z,Nr.disabled,ui.disabled,Cr.backCCW,null,J,de,"$clipping",ie.vertexBuffer,ie.indexBuffer,ie.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,g=this.context.gl;return new Nr({func:g.NOTEQUAL,mask:255},c,255,g.KEEP,g.KEEP,g.REPLACE)}stencilModeForClipping(c){const g=this.context.gl;return new Nr({func:g.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,g.KEEP,g.KEEP,g.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(c){const g=this.context.gl,b=c.sort(((z,V)=>V.overscaledZ-z.overscaledZ)),C=b[b.length-1].overscaledZ,I=b[0].overscaledZ-C+1;if(I>1){this.currentStencilSource=void 0,this.nextStencilID+I>256&&this.clearStencil();const z={};for(let V=0;V<I;V++)z[V+C]=new Nr({func:g.GEQUAL,mask:255},V+this.nextStencilID,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID+=I,[z,b]}return[{[C]:Nr.disabled},b]}stencilConfigForOverlapTwoPass(c){const g=this.context.gl,b=c.sort(((z,V)=>V.overscaledZ-z.overscaledZ)),C=b[b.length-1].overscaledZ,I=b[0].overscaledZ-C+1;if(this.clearStencil(),I>1){const z={},V={};for(let G=0;G<I;G++)z[G+C]=new Nr({func:g.GREATER,mask:255},I+1+G,255,g.KEEP,g.KEEP,g.REPLACE),V[G+C]=new Nr({func:g.GREATER,mask:255},1+G,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID=2*I+1,[z,V,b]}return this.nextStencilID=3,[{[C]:new Nr({func:g.GREATER,mask:255},2,255,g.KEEP,g.KEEP,g.REPLACE)},{[C]:new Nr({func:g.GREATER,mask:255},1,255,g.KEEP,g.KEEP,g.REPLACE)},b]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new ui([c.CONSTANT_COLOR,c.ONE],new s.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ui.unblended:ui.alphaBlended}getDepthModeForSublayer(c,g,b){if(!this.opaquePassEnabledForLayer())return fr.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new fr(b||this.context.gl.LEQUAL,g,[C,C])}getDepthModeFor3D(){return new fr(this.context.gl.LEQUAL,fr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,g){var b,C;this.style=c,this.options=g,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(A()),this.imageManager.beginFrame();const I=this.style._order,z=this.style.tileManagers,V={},G={},J={},ie={isRenderingToTexture:!1,isRenderingGlobe:((b=c.projection)===null||b===void 0?void 0:b.transitionState)>0};for(const he in z){const ye=z[he];ye.used&&ye.prepare(this.context),V[he]=ye.getVisibleCoordinates(!1),G[he]=V[he].slice().reverse(),J[he]=ye.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let he=0;he<I.length;he++)if(this.style._layers[I[he]].is3D()){this.opaquePassCutoff=he;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const he of I){const ye=this.style._layers[he];if(!ye.hasOffscreenPass()||ye.isHidden(this.transform.zoom))continue;const Se=G[ye.source];(ye.type==="custom"||Se.length)&&this.renderLayer(this,z[ye.source],ye,Se,ie)}if((C=this.style.projection)===null||C===void 0||C.updateGPUdependent({context:this.context,useProgram:he=>this.useProgram(he)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:g.showOverdrawInspector?s.bp.black:s.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(he,ye){const Se=he.context,Ie=Se.gl,Le=((Je,Ze,rt)=>{const xt=Math.cos(Ze.rollInRadians),ht=Math.sin(Ze.rollInRadians),mt=Ar(Ze),gt=Ze.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Je.properties.get("sky-color"),u_horizon_color:Je.properties.get("horizon-color"),u_horizon:[(Ze.width/2-mt*ht)*rt,(Ze.height/2+mt*xt)*rt],u_horizon_normal:[-ht,xt],u_sky_horizon_blend:Je.properties.get("sky-horizon-blend")*Ze.height/2*rt,u_sky_blend:gt}})(ye,he.style.map.transform,he.pixelRatio),De=new fr(Ie.LEQUAL,fr.ReadWrite,[0,1]),Ve=Nr.disabled,He=he.colorModeForRenderPass(),Fe=he.useProgram("sky"),We=$v(Se,ye);Fe.draw(Se,Ie.TRIANGLES,De,Ve,He,Cr.disabled,Le,null,void 0,"sky",We.vertexBuffer,We.indexBuffer,We.segments)})(this,this.style.sky),this._showOverdrawInspector=g.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const he=this.style._layers[I[this.currentLayer]],ye=z[he.source],Se=V[he.source];this._renderTileClippingMasks(he,Se,!1),this.renderLayer(this,ye,he,Se,ie)}this.renderPass="translucent";let de=!1;for(this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const he=this.style._layers[I[this.currentLayer]],ye=z[he.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(he,ie))continue;this.opaquePassEnabledForLayer()||de||(de=!0,ie.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const Se=(he.type==="symbol"?J:G)[he.source];this._renderTileClippingMasks(he,V[he.source],!!this.renderToTexture),this.renderLayer(this,ye,he,Se,ie)}if(ie.isRenderingGlobe&&(function(he,ye,Se){const Ie=he.context,Le=Ie.gl,De=he.useProgram("atmosphere"),Ve=new fr(Le.LEQUAL,fr.ReadOnly,[0,1]),He=he.transform,Fe=(function(gt,tn){const rn=gt.properties.get("position"),Bt=[-rn.x,-rn.y,-rn.z],hn=s.ar(new Float64Array(16));return gt.properties.get("anchor")==="map"&&(s.bg(hn,hn,tn.rollInRadians),s.bh(hn,hn,-tn.pitchInRadians),s.bg(hn,hn,tn.bearingInRadians),s.bh(hn,hn,tn.center.lat*Math.PI/180),s.bJ(hn,hn,-tn.center.lng*Math.PI/180)),s.cg(Bt,Bt,hn),Bt})(Se,he.transform),We=He.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Je=ye.properties.get("atmosphere-blend")*We.projectionTransition;if(Je===0)return;const Ze=Ld(He.worldSize,He.center.lat),rt=He.inverseProjectionMatrix,xt=new Float64Array(4);xt[3]=1,s.aH(xt,xt,He.modelViewProjectionMatrix),xt[0]/=xt[3],xt[1]/=xt[3],xt[2]/=xt[3],xt[3]=1,s.aH(xt,xt,rt),xt[0]/=xt[3],xt[1]/=xt[3],xt[2]/=xt[3],xt[3]=1;const ht=((gt,tn,rn,Bt,hn)=>({u_sun_pos:gt,u_atmosphere_blend:tn,u_globe_position:rn,u_globe_radius:Bt,u_inv_proj_matrix:hn}))(Fe,Je,[xt[0],xt[1],xt[2]],Ze,rt),mt=$v(Ie,ye);De.draw(Ie,Le.TRIANGLES,Ve,Nr.disabled,ui.alphaBlended,Cr.disabled,ht,null,null,"atmosphere",mt.vertexBuffer,mt.indexBuffer,mt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const he=(function(ye,Se){let Ie=null;const Le=Object.values(ye._layers).flatMap((Fe=>Fe.source&&!Fe.isHidden(Se)?[ye.tileManagers[Fe.source]]:[])),De=Le.filter((Fe=>Fe.getSource().type==="vector")),Ve=Le.filter((Fe=>Fe.getSource().type!=="vector")),He=Fe=>{(!Ie||Ie.getSource().maxzoom<Fe.getSource().maxzoom)&&(Ie=Fe)};return De.forEach((Fe=>He(Fe))),Ie||Ve.forEach((Fe=>He(Fe))),Ie})(this.style,this.transform.zoom);he&&(function(ye,Se,Ie){for(let Le=0;Le<Ie.length;Le++)eg(ye,Se,Ie[Le])})(this,he,he.getVisibleCoordinates())}this.options.showPadding&&(function(he){const ye=he.transform.padding;up(he,he.transform.height-(ye.top||0),3,Pu),up(he,ye.bottom||0,3,jc),Mu(he,ye.left||0,3,jy),Mu(he,he.transform.width-(ye.right||0),3,Vy);const Se=he.transform.centerPoint;(function(Ie,Le,De,Ve){zo(Ie,Le-1,De-10,2,20,Ve),zo(Ie,Le-10,De-1,20,2,Ve)})(he,Se.x,he.transform.height-Se.y,Ga)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(c){if(!this.style||!this.style.map||!this.style.map.terrain)return;const g=this.terrainFacilitator.matrix,b=this.transform.modelViewProjectionMatrix;let C=this.terrainFacilitator.dirty;C||(C=c?!s.cj(g,b):!s.ck(g,b)),C||(C=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),C&&(s.cl(g,b),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(I,z){const V=I.context,G=V.gl,J=I.transform,ie=ui.unblended,de=new fr(G.LEQUAL,fr.ReadWrite,[0,1]),he=z.tileManager.getRenderableTiles(),ye=I.useProgram("terrainDepth");V.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),V.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),V.clear({color:s.bp.transparent,depth:1});for(const Se of he){const Ie=z.getTerrainMesh(Se.tileID),Le=z.getTerrainData(Se.tileID),De=J.getProjectionData({overscaledTileID:Se.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ve={u_ele_delta:z.getMeshFrameDelta(J.zoom)};ye.draw(V,G.TRIANGLES,de,Nr.disabled,ie,Cr.backCCW,Ve,Le,De,"terrain",Ie.vertexBuffer,Ie.indexBuffer,Ie.segments)}V.bindFramebuffer.set(null),V.viewport.set([0,0,I.width,I.height])})(this,this.style.map.terrain),(function(I,z){const V=I.context,G=V.gl,J=I.transform,ie=ui.unblended,de=new fr(G.LEQUAL,fr.ReadWrite,[0,1]),he=z.getCoordsTexture(),ye=z.tileManager.getRenderableTiles(),Se=I.useProgram("terrainCoords");V.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),V.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),V.clear({color:s.bp.transparent,depth:1}),z.coordsIndex=[];for(const Ie of ye){const Le=z.getTerrainMesh(Ie.tileID),De=z.getTerrainData(Ie.tileID);V.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,he.texture);const Ve={u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(J.zoom)},He=J.getProjectionData({overscaledTileID:Ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Se.draw(V,G.TRIANGLES,de,Nr.disabled,ie,Cr.backCCW,Ve,De,He,"terrain",Le.vertexBuffer,Le.indexBuffer,Le.segments),z.coordsIndex.push(Ie.tileID.key)}V.bindFramebuffer.set(null),V.viewport.set([0,0,I.width,I.height])})(this,this.style.map.terrain))}renderLayer(c,g,b,C,I){b.isHidden(this.transform.zoom)||(b.type==="background"||b.type==="custom"||(C||[]).length)&&(this.id=b.id,s.cm(b)?(function(z,V,G,J,ie,de){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:he}=de,ye=Nr.disabled,Se=z.colorModeForRenderPass();(G._unevaluatedLayout.hasValue("text-variable-anchor")||G._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Ie,Le,De,Ve,He,Fe,We,Je,Ze){const rt=Le.transform,xt=Le.style.map.terrain,ht=He==="map",mt=Fe==="map";for(const gt of Ie){const tn=Ve.getTile(gt),rn=tn.getBucket(De);if(!rn||!rn.text||!rn.text.segments.get().length)continue;const Bt=s.ay(rn.textSizeData,rt.zoom),hn=s.aN(tn,1,Le.transform.zoom),cr=ja(ht,Le.transform,hn),ti=De.layout.get("icon-text-fit")!=="none"&&rn.hasIconData();if(Bt){const Ci=Math.pow(2,rt.zoom-tn.tileID.overscaledZ),xi=xt?($i,hi)=>xt.getElevation(gt,$i,hi):null;Tu(rn,ht,mt,Ze,rt,cr,Ci,Bt,ti,s.aO(rt,tn,We,Je),gt.toUnwrapped(),xi)}}})(J,z,G,V,G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),ie),G.paint.get("icon-opacity").constantOr(1)!==0&&Qd(z,V,G,J,!1,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),G.layout.get("icon-rotation-alignment"),G.layout.get("icon-pitch-alignment"),G.layout.get("icon-keep-upright"),ye,Se,he),G.paint.get("text-opacity").constantOr(1)!==0&&Qd(z,V,G,J,!0,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),G.layout.get("text-keep-upright"),ye,Se,he),V.map.showCollisionBoxes&&(ds(z,V,G,J,!0),ds(z,V,G,J,!1))})(c,g,b,C,this.style.placement.variableOffsets,I):s.cn(b)?(function(z,V,G,J,ie){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:de}=ie,he=G.paint.get("circle-opacity"),ye=G.paint.get("circle-stroke-width"),Se=G.paint.get("circle-stroke-opacity"),Ie=!G.layout.get("circle-sort-key").isConstant();if(he.constantOr(1)===0&&(ye.constantOr(1)===0||Se.constantOr(1)===0))return;const Le=z.context,De=Le.gl,Ve=z.transform,He=z.getDepthModeForSublayer(0,fr.ReadOnly),Fe=Nr.disabled,We=z.colorModeForRenderPass(),Je=[],Ze=Ve.getCircleRadiusCorrection();for(let rt=0;rt<J.length;rt++){const xt=J[rt],ht=V.getTile(xt),mt=ht.getBucket(G);if(!mt)continue;const gt=G.paint.get("circle-translate"),tn=G.paint.get("circle-translate-anchor"),rn=s.aO(Ve,ht,gt,tn),Bt=mt.programConfigurations.get(G.id),hn=z.useProgram("circle",Bt),cr=mt.layoutVertexBuffer,ti=mt.indexBuffer,Ci=z.style.map.terrain&&z.style.map.terrain.getTerrainData(xt),xi={programConfiguration:Bt,program:hn,layoutVertexBuffer:cr,indexBuffer:ti,uniformValues:jm(z,ht,G,rn,Ze),terrainData:Ci,projectionData:Ve.getProjectionData({overscaledTileID:xt,applyGlobeMatrix:!de,applyTerrainMatrix:!0})};if(Ie){const $i=mt.segments.get();for(const hi of $i)Je.push({segments:new s.aX([hi]),sortKey:hi.sortKey,state:xi})}else Je.push({segments:mt.segments,sortKey:0,state:xi})}Ie&&Je.sort(((rt,xt)=>rt.sortKey-xt.sortKey));for(const rt of Je){const{programConfiguration:xt,program:ht,layoutVertexBuffer:mt,indexBuffer:gt,uniformValues:tn,terrainData:rn,projectionData:Bt}=rt.state;ht.draw(Le,De.TRIANGLES,He,Fe,We,Cr.backCCW,tn,rn,Bt,G.id,mt,gt,rt.segments,G.paint,z.transform.zoom,xt)}})(c,g,b,C,I):s.co(b)?(function(z,V,G,J,ie){if(G.paint.get("heatmap-opacity")===0)return;const de=z.context,{isRenderingToTexture:he,isRenderingGlobe:ye}=ie;if(z.style.map.terrain){for(const Se of J){const Ie=V.getTile(Se);V.hasRenderableParent(Se)||(z.renderPass==="offscreen"?Lv(z,Ie,G,Se,ye):z.renderPass==="translucent"&&fs(z,G,Se,he,ye))}de.viewport.set([0,0,z.width,z.height])}else z.renderPass==="offscreen"?(function(Se,Ie,Le,De){const Ve=Se.context,He=Ve.gl,Fe=Se.transform,We=Nr.disabled,Je=new ui([He.ONE,He.ONE],s.bp.transparent,[!0,!0,!0,!0]);(function(Ze,rt,xt){const ht=Ze.gl;Ze.activeTexture.set(ht.TEXTURE1),Ze.viewport.set([0,0,rt.width/4,rt.height/4]);let mt=xt.heatmapFbos.get(s.cd);mt?(ht.bindTexture(ht.TEXTURE_2D,mt.colorAttachment.get()),Ze.bindFramebuffer.set(mt.framebuffer)):(mt=vi(Ze,rt.width/4,rt.height/4),xt.heatmapFbos.set(s.cd,mt))})(Ve,Se,Le),Ve.clear({color:s.bp.transparent});for(let Ze=0;Ze<De.length;Ze++){const rt=De[Ze];if(Ie.hasRenderableParent(rt))continue;const xt=Ie.getTile(rt),ht=xt.getBucket(Le);if(!ht)continue;const mt=ht.programConfigurations.get(Le.id),gt=Se.useProgram("heatmap",mt),tn=Fe.getProjectionData({overscaledTileID:rt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),rn=Fe.getCircleRadiusCorrection();gt.draw(Ve,He.TRIANGLES,fr.disabled,We,Je,Cr.backCCW,Ah(xt,Fe.zoom,Le.paint.get("heatmap-intensity"),rn),null,tn,Le.id,ht.layoutVertexBuffer,ht.indexBuffer,ht.segments,Le.paint,Fe.zoom,mt)}Ve.viewport.set([0,0,Se.width,Se.height])})(z,V,G,J):z.renderPass==="translucent"&&(function(Se,Ie){const Le=Se.context,De=Le.gl;Le.setColorMode(Se.colorModeForRenderPass());const Ve=Ie.heatmapFbos.get(s.cd);Ve&&(Le.activeTexture.set(De.TEXTURE0),De.bindTexture(De.TEXTURE_2D,Ve.colorAttachment.get()),Le.activeTexture.set(De.TEXTURE1),Ir(Le,Ie).bind(De.LINEAR,De.CLAMP_TO_EDGE),Se.useProgram("heatmapTexture").draw(Le,De.TRIANGLES,fr.disabled,Nr.disabled,Se.colorModeForRenderPass(),Cr.disabled,Ev(Se,Ie,0,1),null,null,Ie.id,Se.viewportBuffer,Se.quadTriangleIndexBuffer,Se.viewportSegments,Ie.paint,Se.transform.zoom))})(z,G)})(c,g,b,C,I):s.cp(b)?(function(z,V,G,J,ie){if(z.renderPass!=="translucent")return;const{isRenderingToTexture:de}=ie,he=G.paint.get("line-opacity"),ye=G.paint.get("line-width");if(he.constantOr(1)===0||ye.constantOr(1)===0)return;const Se=z.getDepthModeForSublayer(0,fr.ReadOnly),Ie=z.colorModeForRenderPass(),Le=G.paint.get("line-dasharray"),De=Le.constantOr(1),Ve=G.paint.get("line-pattern"),He=Ve.constantOr(1),Fe=G.paint.get("line-gradient"),We=G.getCrossfadeParameters();let Je;Je=He?"linePattern":De&&Fe?"lineGradientSDF":De?"lineSDF":Fe?"lineGradient":"line";const Ze=z.context,rt=Ze.gl,xt=z.transform;let ht=!0;for(const mt of J){const gt=V.getTile(mt);if(He&&!gt.patternsLoaded())continue;const tn=gt.getBucket(G);if(!tn)continue;const rn=tn.programConfigurations.get(G.id),Bt=z.context.program.get(),hn=z.useProgram(Je,rn),cr=ht||hn.program!==Bt,ti=z.style.map.terrain&&z.style.map.terrain.getTerrainData(mt),Ci=Ve.constantOr(null),xi=Le&&Le.constantOr(null);if(Ci&&gt.imageAtlas){const ps=gt.imageAtlas,fo=ps.patternPositions[Ci.to.toString()],po=ps.patternPositions[Ci.from.toString()];fo&&po&&rn.setConstantPatternPositions(fo,po)}else if(xi){const ps=G.layout.get("line-cap")==="round",fo=z.lineAtlas.getDash(xi.to,ps),po=z.lineAtlas.getDash(xi.from,ps);rn.setConstantDashPositions(fo,po)}const $i=xt.getProjectionData({overscaledTileID:mt,applyGlobeMatrix:!de,applyTerrainMatrix:!0}),hi=xt.getPixelScale();let to;He?(to=Av(z,gt,G,hi,We),Ha(Ze,rt,gt,rn,We)):De&&Fe?(to=Ph(z,gt,G,hi,We,tn.lineClipsArray.length),Ta(z,V,Ze,rt,G,tn,mt,rn,We)):De?(to=Oa(z,gt,G,hi,We),Ji(z,Ze,rt,rn,cr,We)):Fe?(to=vb(z,gt,G,hi,tn.lineClipsArray.length),Ca(z,V,Ze,rt,G,tn,mt)):to=Um(z,gt,G,hi);const zi=z.stencilModeForClipping(mt);hn.draw(Ze,rt.TRIANGLES,Se,zi,Ie,Cr.disabled,to,ti,$i,G.id,tn.layoutVertexBuffer,tn.indexBuffer,tn.segments,G.paint,z.transform.zoom,rn,tn.layoutVertexBuffer2),ht=!1}})(c,g,b,C,I):s.cq(b)?(function(z,V,G,J,ie){const de=G.paint.get("fill-color"),he=G.paint.get("fill-opacity");if(he.constantOr(1)===0)return;const{isRenderingToTexture:ye}=ie,Se=z.colorModeForRenderPass(),Ie=G.paint.get("fill-pattern"),Le=z.opaquePassEnabledForLayer()&&!Ie.constantOr(1)&&de.constantOr(s.bp.transparent).a===1&&he.constantOr(0)===1?"opaque":"translucent";if(z.renderPass===Le){const De=z.getDepthModeForSublayer(1,z.renderPass==="opaque"?fr.ReadWrite:fr.ReadOnly);zc(z,V,G,J,De,Se,!1,ye)}if(z.renderPass==="translucent"&&G.paint.get("fill-antialias")){const De=z.getDepthModeForSublayer(G.getPaintProperty("fill-outline-color")?2:0,fr.ReadOnly);zc(z,V,G,J,De,Se,!0,ye)}})(c,g,b,C,I):s.cr(b)?(function(z,V,G,J,ie){const de=G.paint.get("fill-extrusion-opacity");if(de===0)return;const{isRenderingToTexture:he}=ie;if(z.renderPass==="translucent"){const ye=new fr(z.context.gl.LEQUAL,fr.ReadWrite,z.depthRangeFor3D);if(de!==1||G.paint.get("fill-extrusion-pattern").constantOr(1))Nc(z,V,G,J,ye,Nr.disabled,ui.disabled,he),Nc(z,V,G,J,ye,z.stencilModeFor3D(),z.colorModeForRenderPass(),he);else{const Se=z.colorModeForRenderPass();Nc(z,V,G,J,ye,Nr.disabled,Se,he)}}})(c,g,b,C,I):s.cs(b)?(function(z,V,G,J,ie){if(z.renderPass!=="offscreen"&&z.renderPass!=="translucent")return;const{isRenderingToTexture:de}=ie,he=z.context,ye=z.style.projection.useSubdivision,Se=z.getDepthModeForSublayer(0,fr.ReadOnly),Ie=z.colorModeForRenderPass();if(z.renderPass==="offscreen")(function(Le,De,Ve,He,Fe,We,Je){const Ze=Le.context,rt=Ze.gl;for(const xt of Ve){const ht=De.getTile(xt),mt=ht.dem;if(!mt||!mt.data||!ht.needsHillshadePrepare)continue;const gt=mt.dim,tn=mt.stride,rn=mt.getPixels();if(Ze.activeTexture.set(rt.TEXTURE1),Ze.pixelStoreUnpackPremultiplyAlpha.set(!1),ht.demTexture=ht.demTexture||Le.getTileTexture(tn),ht.demTexture){const hn=ht.demTexture;hn.update(rn,{premultiply:!1}),hn.bind(rt.NEAREST,rt.CLAMP_TO_EDGE)}else ht.demTexture=new s.T(Ze,rn,rt.RGBA,{premultiply:!1}),ht.demTexture.bind(rt.NEAREST,rt.CLAMP_TO_EDGE);Ze.activeTexture.set(rt.TEXTURE0);let Bt=ht.fbo;if(!Bt){const hn=new s.T(Ze,{width:gt,height:gt,data:null},rt.RGBA);hn.bind(rt.LINEAR,rt.CLAMP_TO_EDGE),Bt=ht.fbo=Ze.createFramebuffer(gt,gt,!0,!1),Bt.colorAttachment.set(hn.texture)}Ze.bindFramebuffer.set(Bt.framebuffer),Ze.viewport.set([0,0,gt,gt]),Le.useProgram("hillshadePrepare").draw(Ze,rt.TRIANGLES,Fe,We,Je,Cr.disabled,gb(ht.tileID,mt),null,null,He.id,Le.rasterBoundsBuffer,Le.quadTriangleIndexBuffer,Le.rasterBoundsSegments),ht.needsHillshadePrepare=!1}})(z,V,J,G,Se,Nr.disabled,Ie),he.viewport.set([0,0,z.width,z.height]);else if(z.renderPass==="translucent")if(ye){const[Le,De,Ve]=z.stencilConfigForOverlapTwoPass(J);Bc(z,V,G,Ve,Le,Se,Ie,!1,de),Bc(z,V,G,Ve,De,Se,Ie,!0,de)}else{const[Le,De]=z.getStencilConfigForOverlapAndUpdateStencilID(J);Bc(z,V,G,De,Le,Se,Ie,!1,de)}})(c,g,b,C,I):s.ct(b)?(function(z,V,G,J,ie){if(z.renderPass!=="translucent"||!J.length)return;const{isRenderingToTexture:de}=ie,he=z.style.projection.useSubdivision,ye=z.getDepthModeForSublayer(0,fr.ReadOnly),Se=z.colorModeForRenderPass();if(he){const[Ie,Le,De]=z.stencilConfigForOverlapTwoPass(J);Eu(z,V,G,De,Ie,ye,Se,!1,de),Eu(z,V,G,De,Le,ye,Se,!0,de)}else{const[Ie,Le]=z.getStencilConfigForOverlapAndUpdateStencilID(J);Eu(z,V,G,Le,Ie,ye,Se,!1,de)}})(c,g,b,C,I):s.bU(b)?(function(z,V,G,J,ie){if(z.renderPass!=="translucent"||G.paint.get("raster-opacity")===0||!J.length)return;const{isRenderingToTexture:de}=ie,he=V.getSource(),ye=z.style.projection.useSubdivision;if(he instanceof jt)wl(z,V,G,J,null,!1,!1,he.tileCoords,he.flippedWindingOrder,de);else if(ye){const[Se,Ie,Le]=z.stencilConfigForOverlapTwoPass(J);wl(z,V,G,Le,Se,!1,!0,Au,!1,de),wl(z,V,G,Le,Ie,!0,!0,Au,!1,de)}else{const[Se,Ie]=z.getStencilConfigForOverlapAndUpdateStencilID(J);wl(z,V,G,Ie,Se,!1,!0,Au,!1,de)}})(c,g,b,C,I):s.cu(b)?(function(z,V,G,J,ie){const de=G.paint.get("background-color"),he=G.paint.get("background-opacity");if(he===0)return;const{isRenderingToTexture:ye}=ie,Se=z.context,Ie=Se.gl,Le=z.style.projection,De=z.transform,Ve=De.tileSize,He=G.paint.get("background-pattern");if(z.isPatternMissing(He))return;const Fe=!He&&de.a===1&&he===1&&z.opaquePassEnabledForLayer()?"opaque":"translucent";if(z.renderPass!==Fe)return;const We=Nr.disabled,Je=z.getDepthModeForSublayer(0,Fe==="opaque"?fr.ReadWrite:fr.ReadOnly),Ze=z.colorModeForRenderPass(),rt=z.useProgram(He?"backgroundPattern":"background"),xt=J||En(De,{tileSize:Ve,terrain:z.style.map.terrain});He&&(Se.activeTexture.set(Ie.TEXTURE0),z.imageManager.bind(z.context));const ht=G.getCrossfadeParameters();for(const mt of xt){const gt=De.getProjectionData({overscaledTileID:mt,applyGlobeMatrix:!ye,applyTerrainMatrix:!0}),tn=He?Hm(he,z,He,{tileID:mt,tileSize:Ve},ht):Wm(he,de),rn=z.style.map.terrain&&z.style.map.terrain.getTerrainData(mt),Bt=Le.getMeshFromTileID(Se,mt.canonical,!1,!0,"raster");rt.draw(Se,Ie.TRIANGLES,Je,We,Ze,Cr.backCCW,tn,rn,gt,G.id,Bt.vertexBuffer,Bt.indexBuffer,Bt.segments)}})(c,0,b,C,I):s.cv(b)&&(function(z,V,G,J){const{isRenderingGlobe:ie}=J,de=z.context,he=G.implementation,ye=z.style.projection,Se=z.transform,Ie=Se.getProjectionDataForCustomLayer(ie),Le={farZ:Se.farZ,nearZ:Se.nearZ,fov:Se.fov*Math.PI/180,modelViewProjectionMatrix:Se.modelViewProjectionMatrix,projectionMatrix:Se.projectionMatrix,shaderData:{variantName:ye.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ye.shaderPreludeCode.vertexSource}`,define:ye.shaderDefine},defaultProjectionData:Ie},De=he.renderingMode?he.renderingMode:"2d";if(z.renderPass==="offscreen"){const Ve=he.prerender;Ve&&(z.setCustomLayerDefaults(),de.setColorMode(z.colorModeForRenderPass()),Ve.call(he,de.gl,Le),de.setDirty(),z.setBaseState())}else if(z.renderPass==="translucent"){z.setCustomLayerDefaults(),de.setColorMode(z.colorModeForRenderPass()),de.setStencilMode(Nr.disabled);const Ve=De==="3d"?z.getDepthModeFor3D():z.getDepthModeForSublayer(0,fr.ReadOnly);de.setDepthMode(Ve),he.render(de.gl,Le),de.setDirty(),z.setBaseState(),de.bindFramebuffer.set(null)}})(c,0,b,I))}saveTileTexture(c){const g=this._tileTextures[c.size[0]];g?g.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const g=this._tileTextures[c];return g&&g.length>0?g.pop():null}isPatternMissing(c){if(!c)return!1;if(!c.from||!c.to)return!0;const g=this.imageManager.getPattern(c.from.toString()),b=this.imageManager.getPattern(c.to.toString());return!g||!b}useProgram(c,g,b=!1,C=[]){this.cache=this.cache||{};const I=!!this.style.map.terrain,z=this.style.projection,V=b?Vi.projectionMercator:z.shaderPreludeCode,G=b?co:z.shaderDefine,J=c+(g?g.cacheKey:"")+`/${b?ha:z.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(I?"/terrain":"")+(C?`/${C.join("/")}`:"");return this.cache[J]||(this.cache[J]=new fb(this.context,Vi[c],g,xb[c],this._showOverdrawInspector,I,V,G,C)),this.cache[J]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var c,g;if(this._tileTextures){for(const b in this._tileTextures){const C=this._tileTextures[b];if(C)for(const I of C)I.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((c=this.tileExtentMesh.vertexBuffer)===null||c===void 0||c.destroy()),this.tileExtentMesh&&((g=this.tileExtentMesh.indexBuffer)===null||g===void 0||g.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const b in this.cache){const C=this.cache[b];C&&C.program&&this.context.gl.deleteProgram(C.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:c,drawingBufferHeight:g}=this.context.gl;return this.width!==c||this.height!==g}}function zv(P,c){let g,b=!1,C=null,I=null;const z=()=>{C=null,b&&(P.apply(I,g),C=setTimeout(z,c),b=!1)};return(...V)=>(b=!0,I=this,g=V,C||z(),C)}class Co{constructor(c){this._getCurrentHash=()=>{const g=window.location.hash.replace("#","");if(this._hashName){let b;return g.split("&").map((C=>C.split("="))).forEach((C=>{C[0]===this._hashName&&(b=C)})),(b&&b[1]||"").split("/")}return g.split("/")},this._onHashChange=()=>{const g=this._getCurrentHash();if(!this._isValidHash(g))return!1;const b=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(g[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+g[2],+g[1]],zoom:+g[0],bearing:b,pitch:+(g[4]||0)}),!0},this._updateHashUnthrottled=()=>{const g=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,g)},this._removeHash=()=>{const g=this._getCurrentHash();if(g.length===0)return;const b=g.join("/");let C=b;C.split("&").length>0&&(C=C.split("&")[0]),this._hashName&&(C=`${this._hashName}=${b}`);let I=window.location.hash.replace(C,"");I.startsWith("#&")?I=I.slice(0,1)+I.slice(2):I==="#"&&(I="");let z=window.location.href.replace(/(#.+)?$/,I);z=z.replace("&&","&"),window.history.replaceState(window.history.state,null,z)},this._updateHash=zv(this._updateHashUnthrottled,300),this._hashName=c&&encodeURIComponent(c)}addTo(c){return this._map=c,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(c){const g=this._map.getCenter(),b=Math.round(100*this._map.getZoom())/100,C=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),I=Math.pow(10,C),z=Math.round(g.lng*I)/I,V=Math.round(g.lat*I)/I,G=this._map.getBearing(),J=this._map.getPitch();let ie="";if(ie+=c?`/${z}/${V}/${b}`:`${b}/${V}/${z}`,(G||J)&&(ie+="/"+Math.round(10*G)/10),J&&(ie+=`/${Math.round(J)}`),this._hashName){const de=this._hashName;let he=!1;const ye=window.location.hash.slice(1).split("&").map((Se=>{const Ie=Se.split("=")[0];return Ie===de?(he=!0,`${Ie}=${ie}`):Se})).filter((Se=>Se));return he||ye.push(`${de}=${ie}`),`#${ye.join("&")}`}return`#${ie}`}_isValidHash(c){if(c.length<3||c.some(isNaN))return!1;try{new s.V(+c[2],+c[1])}catch{return!1}const g=+c[0],b=+(c[3]||0),C=+(c[4]||0);return g>=this._map.getMinZoom()&&g<=this._map.getMaxZoom()&&b>=-180&&b<=180&&C>=this._map.getMinPitch()&&C<=this._map.getMaxPitch()}}const Vc={linearity:.3,easing:s.cw(0,0,.3,1)},hp=s.e({deceleration:2500,maxSpeed:1400},Vc),Vs=s.e({deceleration:20,maxSpeed:1400},Vc),Xa=s.e({deceleration:1e3,maxSpeed:360},Vc),Ud=s.e({deceleration:1e3,maxSpeed:90},Vc),Qs=s.e({deceleration:1e3,maxSpeed:360},Vc);class SS{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,g=A();for(;c.length>0&&g-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const g={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:I}of this._inertiaBuffer)g.zoom+=I.zoomDelta||0,g.bearing+=I.bearingDelta||0,g.pitch+=I.pitchDelta||0,g.roll+=I.rollDelta||0,I.panDelta&&g.pan._add(I.panDelta),I.around&&(g.around=I.around),I.pinchAround&&(g.pinchAround=I.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,C={};if(g.pan.mag()){const I=tg(g.pan.mag(),b,s.e({},hp,c||{})),z=g.pan.mult(I.amount/g.pan.mag()),V=this._map.cameraHelper.handlePanInertia(z,this._map.transform);C.center=V.easingCenter,C.offset=V.easingOffset,dp(C,I)}if(g.zoom){const I=tg(g.zoom,b,Vs);C.zoom=this._map.transform.zoom+I.amount,dp(C,I)}if(g.bearing){const I=tg(g.bearing,b,Xa);C.bearing=this._map.transform.bearing+s.an(I.amount,-179,179),dp(C,I)}if(g.pitch){const I=tg(g.pitch,b,Ud);C.pitch=this._map.transform.pitch+I.amount,dp(C,I)}if(g.roll){const I=tg(g.roll,b,Qs);C.roll=this._map.transform.roll+s.an(I.amount,-179,179),dp(C,I)}if(C.zoom||C.bearing){const I=g.pinchAround===void 0?g.around:g.pinchAround;C.around=I?this._map.unproject(I):this._map.getCenter()}return this.clear(),s.e(C,{noMoveStart:!0})}}function dp(P,c){(!P.duration||P.duration<c.duration)&&(P.duration=c.duration,P.easing=c.easing)}function tg(P,c,g){const{maxSpeed:b,linearity:C,deceleration:I}=g,z=s.an(P*C/(c/1e3),-b,b),V=Math.abs(z)/(I*C);return{easing:g.easing,duration:1e3*V,amount:z*(V/2)}}class rs extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,g,b,C={}){b=b instanceof MouseEvent?b:new MouseEvent(c,b);const I=M.mousePos(g.getCanvas(),b),z=g.unproject(I);super(c,s.e({point:I,lngLat:z,originalEvent:b},C)),this._defaultPrevented=!1,this.target=g}}class Jl extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,g,b){const C=c==="touchend"?b.changedTouches:b.touches,I=M.touchPos(g.getCanvasContainer(),C),z=I.map((G=>g.unproject(G))),V=I.reduce(((G,J,ie,de)=>G.add(J.div(de.length))),new s.P(0,0));super(c,{points:I,point:V,lngLats:z,lngLat:g.unproject(V),originalEvent:b}),this._defaultPrevented=!1}}class Uy extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,g,b){super(c,{originalEvent:b}),this._defaultPrevented=!1}}class Zy{constructor(c,g){this._map=c,this._clickTolerance=g.clickTolerance}reset(){delete this._mousedownPos}wheel(c){return this._firePreventable(new Uy(c.type,this._map,c))}mousedown(c,g){return this._mousedownPos=g,this._firePreventable(new rs(c.type,this._map,c))}mouseup(c){this._map.fire(new rs(c.type,this._map,c))}click(c,g){this._mousedownPos&&this._mousedownPos.dist(g)>=this._clickTolerance||this._map.fire(new rs(c.type,this._map,c))}dblclick(c){return this._firePreventable(new rs(c.type,this._map,c))}mouseover(c){this._map.fire(new rs(c.type,this._map,c))}mouseout(c){this._map.fire(new rs(c.type,this._map,c))}touchstart(c){return this._firePreventable(new Jl(c.type,this._map,c))}touchmove(c){this._map.fire(new Jl(c.type,this._map,c))}touchend(c){this._map.fire(new Jl(c.type,this._map,c))}touchcancel(c){this._map.fire(new Jl(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wb{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(c){this._map.fire(new rs(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new rs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._ignoreContextMenu||this._map.fire(new rs(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ec{constructor(c){this._map=c}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(c){return this.transform.screenPointToLocation(s.P.convert(c),this._map.terrain)}}class zh{constructor(c,g){this._map=c,this._tr=new ec(c),this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=g.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,g){this.isEnabled()&&c.shiftKey&&c.button===0&&(M.disableDrag(),this._startPos=this._lastPos=g,this._active=!0)}mousemoveWindow(c,g){if(!this._active)return;const b=g;if(this._lastPos.equals(b)||!this._box&&b.dist(this._startPos)<this._clickTolerance)return;const C=this._startPos;this._lastPos=b,this._box||(this._box=M.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",c));const I=Math.min(C.x,b.x),z=Math.max(C.x,b.x),V=Math.min(C.y,b.y),G=Math.max(C.y,b.y);M.setTransform(this._box,`translate(${I}px,${V}px)`),this._box.style.width=z-I+"px",this._box.style.height=G-V+"px"}mouseupWindow(c,g){if(!this._active||c.button!==0)return;const b=this._startPos,C=g;if(this.reset(),M.suppressClick(),b.x!==C.x||b.y!==C.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:c})),{cameraAnimation:I=>I.fitScreenCoordinates(b,C,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",c)}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(M.remove(this._box),this._box=null),M.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(c,g){return this._map.fire(new s.l(c,{originalEvent:g}))}}function ka(P,c){if(P.length!==c.length)throw new Error(`The number of touches and points are not equal - touches ${P.length}, points ${c.length}`);const g={};for(let b=0;b<P.length;b++)g[P[b].identifier]=c[b];return g}class xn{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(c,g,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=c.timeStamp),b.length===this.numTouches&&(this.centroid=(function(C){const I=new s.P(0,0);for(const z of C)I._add(z);return I.div(C.length)})(g),this.touches=ka(b,g)))}touchmove(c,g,b){if(this.aborted||!this.centroid)return;const C=ka(b,g);for(const I in this.touches){const z=C[I];(!z||z.dist(this.touches[I])>30)&&(this.aborted=!0)}}touchend(c,g,b){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),b.length===0){const C=!this.aborted&&this.centroid;if(this.reset(),C)return C}}}class ng{constructor(c){this.singleTap=new xn(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(c,g,b){this.singleTap.touchstart(c,g,b)}touchmove(c,g,b){this.singleTap.touchmove(c,g,b)}touchend(c,g,b){const C=this.singleTap.touchend(c,g,b);if(C){const I=c.timeStamp-this.lastTime<500,z=!this.lastTap||this.lastTap.dist(C)<30;if(I&&z||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}}}class qy{constructor(c){this._tr=new ec(c),this._zoomIn=new ng({numTouches:1,numTaps:2}),this._zoomOut=new ng({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,g,b){this._zoomIn.touchstart(c,g,b),this._zoomOut.touchstart(c,g,b)}touchmove(c,g,b){this._zoomIn.touchmove(c,g,b),this._zoomOut.touchmove(c,g,b)}touchend(c,g,b){const C=this._zoomIn.touchend(c,g,b),I=this._zoomOut.touchend(c,g,b),z=this._tr;return C?(this._active=!0,c.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:V=>V.easeTo({duration:300,zoom:z.zoom+1,around:z.unproject(C)},{originalEvent:c})}):I?(this._active=!0,c.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:V=>V.easeTo({duration:300,zoom:z.zoom-1,around:z.unproject(I)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ol{constructor(c){this._enabled=!!c.enable,this._moveStateManager=c.moveStateManager,this._clickTolerance=c.clickTolerance||1,this._moveFunction=c.move,this._activateOnStart=!!c.activateOnStart,c.assignEvents(this),this.reset()}reset(c){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(c)}_move(...c){const g=this._moveFunction(...c);if(g.bearingDelta||g.pitchDelta||g.rollDelta||g.around||g.panDelta)return this._active=!0,g}dragStart(c,g){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(c)&&(this._moveStateManager.startMove(c),this._lastPoint=Array.isArray(g)?g[0]:g,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(c,g){if(!this.isEnabled())return;const b=this._lastPoint;if(!b)return;if(c.preventDefault(),!this._moveStateManager.isValidMoveEvent(c))return void this.reset(c);const C=Array.isArray(g)?g[0]:g;return!this._moved&&C.dist(b)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=C,this._move(b,C))}dragEnd(c){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(c)&&(this._moved&&M.suppressClick(),this.reset(c))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const tc=0,fp=2,Wy={[tc]:1,[fp]:2};class Qc{constructor(c){this._correctEvent=c.checkCorrectEvent}startMove(c){const g=M.mouseButton(c);this._eventButton=g}endMove(c){delete this._eventButton}isValidStartEvent(c){return this._correctEvent(c)}isValidMoveEvent(c){return!(function(g,b){const C=Wy[b];return g.buttons===void 0||(g.buttons&C)!==C})(c,this._eventButton)}isValidEndEvent(c){return M.mouseButton(c)===this._eventButton}}class Zd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(c){return c.targetTouches.length===1}_isSameTouchEvent(c){return c.targetTouches[0].identifier===this._firstTouch}startMove(c){this._firstTouch=c.targetTouches[0].identifier}endMove(c){delete this._firstTouch}isValidStartEvent(c){return this._isOneFingerTouch(c)}isValidMoveEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}isValidEndEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}}class rg{constructor(c=new Qc({checkCorrectEvent:()=>!0}),g=new Zd){this.mouseMoveStateManager=c,this.oneFingerTouchMoveStateManager=g}_executeRelevantHandler(c,g,b){return c instanceof MouseEvent?g(c):typeof TouchEvent<"u"&&c instanceof TouchEvent?b(c):void 0}startMove(c){this._executeRelevantHandler(c,(g=>this.mouseMoveStateManager.startMove(g)),(g=>this.oneFingerTouchMoveStateManager.startMove(g)))}endMove(c){this._executeRelevantHandler(c,(g=>this.mouseMoveStateManager.endMove(g)),(g=>this.oneFingerTouchMoveStateManager.endMove(g)))}isValidStartEvent(c){return this._executeRelevantHandler(c,(g=>this.mouseMoveStateManager.isValidStartEvent(g)),(g=>this.oneFingerTouchMoveStateManager.isValidStartEvent(g)))}isValidMoveEvent(c){return this._executeRelevantHandler(c,(g=>this.mouseMoveStateManager.isValidMoveEvent(g)),(g=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(g)))}isValidEndEvent(c){return this._executeRelevantHandler(c,(g=>this.mouseMoveStateManager.isValidEndEvent(g)),(g=>this.oneFingerTouchMoveStateManager.isValidEndEvent(g)))}}const Uc=P=>{P.mousedown=P.dragStart,P.mousemoveWindow=P.dragMove,P.mouseup=P.dragEnd,P.contextmenu=c=>{c.preventDefault()}};class Hy{constructor(c,g){this._clickTolerance=c.clickTolerance||1,this._map=g,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(c){return c<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(c,g,b){return this._calculateTransform(c,g,b)}touchmove(c,g,b){if(this._active){if(!this._shouldBePrevented(b.length))return c.preventDefault(),this._calculateTransform(c,g,b);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",c)}}touchend(c,g,b){this._calculateTransform(c,g,b),this._active&&this._shouldBePrevented(b.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,g,b){b.length>0&&(this._active=!0);const C=ka(b,g),I=new s.P(0,0),z=new s.P(0,0);let V=0;for(const J in C){const ie=C[J],de=this._touches[J];de&&(I._add(ie),z._add(ie.sub(de)),V++,C[J]=ie)}if(this._touches=C,this._shouldBePrevented(V)||!z.mag())return;const G=z.div(V);return this._sum._add(G),this._sum.mag()<this._clickTolerance?void 0:{around:I.div(V),panDelta:G}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ig{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(c,g,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([g[0],g[1]]))}touchmove(c,g,b){if(!this._firstTwoTouches)return;c.preventDefault();const[C,I]=this._firstTwoTouches,z=Zc(b,g,C),V=Zc(b,g,I);if(!z||!V)return;const G=this._aroundCenter?null:z.add(V).div(2);return this._move([z,V],G,c)}touchend(c,g,b){if(!this._firstTwoTouches)return;const[C,I]=this._firstTwoTouches,z=Zc(b,g,C),V=Zc(b,g,I);z&&V||(this._active&&M.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Zc(P,c,g){for(let b=0;b<P.length;b++)if(P[b].identifier===g)return c[b]}function Nv(P,c){return Math.log(P/c)/Math.LN2}class qc extends ig{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,g){const b=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Nv(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Nv(this._distance,b),pinchAround:g}}}function Gy(P,c){return 180*P.angleWith(c)/Math.PI}class og extends ig{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,g,b){const C=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Gy(this._vector,C),pinchAround:g}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const g=25/(Math.PI*this._minDiameter)*360,b=Gy(c,this._startVector);return Math.abs(b)<g}}function Wc(P){return Math.abs(P.y)>Math.abs(P.x)}class Ru extends ig{constructor(c){super(),this._currentTouchCount=0,this._map=c}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(c,g,b){super.touchstart(c,g,b),this._currentTouchCount=b.length}_start(c){this._lastPoints=c,Wc(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,g,b){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const C=c[0].sub(this._lastPoints[0]),I=c[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(C,I,b.timeStamp),this._valid?(this._lastPoints=c,this._active=!0,{pitchDelta:(C.y+I.y)/2*-.5}):void 0}gestureBeginsVertically(c,g,b){if(this._valid!==void 0)return this._valid;const C=c.mag()>=2,I=g.mag()>=2;if(!C&&!I)return;if(!C||!I)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;const z=c.y>0==g.y>0;return Wc(c)&&Wc(g)&&z}}const Sl={panStep:100,bearingStep:15,pitchStep:10};class ii{constructor(c){this._tr=new ec(c);const g=Sl;this._panStep=g.panStep,this._bearingStep=g.bearingStep,this._pitchStep=g.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let g=0,b=0,C=0,I=0,z=0;switch(c.keyCode){case 61:case 107:case 171:case 187:g=1;break;case 189:case 109:case 173:g=-1;break;case 37:c.shiftKey?b=-1:(c.preventDefault(),I=-1);break;case 39:c.shiftKey?b=1:(c.preventDefault(),I=1);break;case 38:c.shiftKey?C=1:(c.preventDefault(),z=-1);break;case 40:c.shiftKey?C=-1:(c.preventDefault(),z=1);break;default:return}return this._rotationDisabled&&(b=0,C=0),{cameraAnimation:V=>{const G=this._tr;V.easeTo({duration:300,easeId:"keyboardHandler",easing:Bv,zoom:g?Math.round(G.zoom)+g*(c.shiftKey?2:1):G.zoom,bearing:G.bearing+b*this._bearingStep,pitch:G.pitch+C*this._pitchStep,offset:[-I*this._panStep,-z*this._panStep],center:G.center},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bv(P){return P*(2-P)}const Iu=4.000244140625,Nh=1/450;class sg{constructor(c,g){this._onTimeout=b=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(b)},this._map=c,this._tr=new ec(c),this._triggerRenderFrame=g,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Nh}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(c){return!!this._map.cooperativeGestures.isEnabled()&&!(c.ctrlKey||this._map.cooperativeGestures.isBypassed(c))}wheel(c){if(!this.isEnabled())return;if(this._shouldBePrevented(c))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",c);let g=c.deltaMode===WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const b=A(),C=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,g!==0&&g%Iu==0?this._type="wheel":g!==0&&Math.abs(g)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=g,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(C*g)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,g+=this._lastValue)),c.shiftKey&&g&&(g/=4),this._type&&(this._lastWheelEvent=c,this._delta-=g,this._active||this._start(c)),c.preventDefault()}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const g=M.mousePos(this._map.getCanvas(),c),b=this._tr;this._aroundPoint=this._aroundCenter?b.transform.locationToScreenPoint(s.V.convert(b.center)):g,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const V=c.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=V),typeof this._targetZoom=="number"&&(this._targetZoom+=V)}if(this._delta!==0){const V=this._type==="wheel"&&Math.abs(this._delta)>Iu?this._wheelZoomRate:this._defaultZoomRate;let G=2/(1+Math.exp(-Math.abs(this._delta*V)));this._delta<0&&G!==0&&(G=1/G);const J=typeof this._targetZoom!="number"?c.scale:s.aq(this._targetZoom);this._targetZoom=c.applyConstrain(c.getCameraLngLat(),s.at(J*G)).zoom,this._type==="wheel"&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const g=typeof this._targetZoom!="number"?c.zoom:this._targetZoom,b=this._startZoom,C=this._easing;let I,z=!1;if(this._type==="wheel"&&b&&C){const V=A()-this._lastWheelEventTime,G=Math.min((V+5)/200,1),J=C(G);I=s.G.number(b,g,J),G<1?this._frameId||(this._frameId=!0):z=!0}else I=g,z=!0;return this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=I,{noInertia:!0,needsRenderFrame:!z,zoomDelta:I-c.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let g=s.cy;if(this._prevEase){const b=this._prevEase,C=(A()-b.start)/b.duration,I=b.easing(C+.01)-b.easing(C),z=.27/Math.sqrt(I*I+1e-4)*.01,V=Math.sqrt(.0729-z*z);g=s.cw(z,V,.25,1)}return this._prevEase={start:A(),duration:c,easing:g},g}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Xy{constructor(c,g){this._clickZoom=c,this._tapZoom=g}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class qd{constructor(c){this._tr=new ec(c),this.reset()}reset(){this._active=!1}dblclick(c,g){return c.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:this._tr.zoom+(c.shiftKey?-1:1),around:this._tr.unproject(g)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ag{constructor(){this._tap=new ng({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(c,g,b){if(!this._swipePoint)if(this._tapTime){const C=g[0],I=c.timeStamp-this._tapTime<500,z=this._tapPoint.dist(C)<30;I&&z?b.length>0&&(this._swipePoint=C,this._swipeTouch=b[0].identifier):this.reset()}else this._tap.touchstart(c,g,b)}touchmove(c,g,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const C=g[0],I=C.y-this._swipePoint.y;return this._swipePoint=C,c.preventDefault(),this._active=!0,{zoomDelta:I/128}}}else this._tap.touchmove(c,g,b)}touchend(c,g,b){if(this._tapTime)this._swipePoint&&b.length===0&&this.reset();else{const C=this._tap.touchend(c,g,b);C&&(this._tapTime=c.timeStamp,this._tapPoint=C)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fv{constructor(c,g,b){this._el=c,this._mousePan=g,this._touchPan=b}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ya{constructor(c,g,b,C){this._pitchWithRotate=c.pitchWithRotate,this._rollEnabled=c.rollEnabled,this._mouseRotate=g,this._mousePitch=b,this._mouseRoll=C}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Wd{constructor(c,g,b,C){this._el=c,this._touchZoom=g,this._touchRotate=b,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class wn{constructor(c,g){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=c,this._options=g,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const c=this._map.getCanvasContainer();c.classList.add("maplibregl-cooperative-gestures"),this._container=M.create("div","maplibregl-cooperative-gesture-screen",c);let g=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(g=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const b=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),C=document.createElement("div");C.className="maplibregl-desktop-message",C.textContent=g,this._container.appendChild(C);const I=document.createElement("div");I.className="maplibregl-mobile-message",I.textContent=b,this._container.appendChild(I),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(M.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(c){return c[this._bypassKey]}notifyGestureBlocked(c,g){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:c,originalEvent:g})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Rn=P=>P.zoom||P.drag||P.roll||P.pitch||P.rotate;class Cl extends s.l{}function pp(P){return P.panDelta&&P.panDelta.mag()||P.zoomDelta||P.bearingDelta||P.pitchDelta||P.rollDelta}class lg{constructor(c,g){this.handleWindowEvent=C=>{this.handleEvent(C,`${C.type}Window`)},this.handleEvent=(C,I)=>{if(C.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const z=C.type==="renderFrame"?void 0:C,V={needsRenderFrame:!1},G={},J={};for(const{handlerName:he,handler:ye,allowed:Se}of this._handlers){if(!ye.isEnabled())continue;let Ie;if(this._blockedByActive(J,Se,he))ye.reset();else if(ye[I||C.type]){if(s.cz(C,I||C.type)){const Le=M.mousePos(this._map.getCanvas(),C);Ie=ye[I||C.type](C,Le)}else if(s.cA(C,I||C.type)){const Le=this._getMapTouches(C.touches),De=M.touchPos(this._map.getCanvas(),Le);Ie=ye[I||C.type](C,De,Le)}else s.cB(I||C.type)||(Ie=ye[I||C.type](C));this.mergeHandlerResult(V,G,Ie,he,z),Ie&&Ie.needsRenderFrame&&this._triggerRenderFrame()}(Ie||ye.isActive())&&(J[he]=ye)}const ie={};for(const he in this._previousActiveHandlers)J[he]||(ie[he]=z);this._previousActiveHandlers=J,(Object.keys(ie).length||pp(V))&&(this._changes.push([V,G,ie]),this._triggerRenderFrame()),(Object.keys(J).length||pp(V))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:de}=V;de&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],de(this._map))},this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new SS(c),this._bearingSnap=g.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(g);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[window,"blur",void 0]];for(const[C,I,z]of this._listeners)M.addEventListener(C,I,C===document?this.handleWindowEvent:this.handleEvent,z)}destroy(){for(const[c,g,b]of this._listeners)M.removeEventListener(c,g,c===document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(c){const g=this._map,b=g.getCanvasContainer();this._add("mapEvent",new Zy(g,c));const C=g.boxZoom=new zh(g,c);this._add("boxZoom",C),c.interactive&&c.boxZoom&&C.enable();const I=g.cooperativeGestures=new wn(g,c.cooperativeGestures);this._add("cooperativeGestures",I),c.cooperativeGestures&&I.enable();const z=new qy(g),V=new qd(g);g.doubleClickZoom=new Xy(V,z),this._add("tapZoom",z),this._add("clickZoom",V),c.interactive&&c.doubleClickZoom&&g.doubleClickZoom.enable();const G=new ag;this._add("tapDragZoom",G);const J=g.touchPitch=new Ru(g);this._add("touchPitch",J),c.interactive&&c.touchPitch&&g.touchPitch.enable(c.touchPitch);const ie=()=>g.project(g.getCenter()),de=(function({enable:Fe,clickTolerance:We,aroundCenter:Je=!0,minPixelCenterThreshold:Ze=100,rotateDegreesPerPixelMoved:rt=.8},xt){const ht=new Qc({checkCorrectEvent:mt=>M.mouseButton(mt)===0&&mt.ctrlKey||M.mouseButton(mt)===2&&!mt.ctrlKey});return new Ol({clickTolerance:We,move:(mt,gt)=>{const tn=xt();if(Je&&Math.abs(tn.y-mt.y)>Ze)return{bearingDelta:s.cx(new s.P(mt.x,gt.y),gt,tn)};let rn=(gt.x-mt.x)*rt;return Je&&gt.y<tn.y&&(rn=-rn),{bearingDelta:rn}},moveStateManager:ht,enable:Fe,assignEvents:Uc})})(c,ie),he=(function({enable:Fe,clickTolerance:We,pitchDegreesPerPixelMoved:Je=-.5}){const Ze=new Qc({checkCorrectEvent:rt=>M.mouseButton(rt)===0&&rt.ctrlKey||M.mouseButton(rt)===2});return new Ol({clickTolerance:We,move:(rt,xt)=>({pitchDelta:(xt.y-rt.y)*Je}),moveStateManager:Ze,enable:Fe,assignEvents:Uc})})(c),ye=(function({enable:Fe,clickTolerance:We,rollDegreesPerPixelMoved:Je=.3},Ze){const rt=new Qc({checkCorrectEvent:xt=>M.mouseButton(xt)===2&&xt.ctrlKey});return new Ol({clickTolerance:We,move:(xt,ht)=>{const mt=Ze();let gt=(ht.x-xt.x)*Je;return ht.y<mt.y&&(gt=-gt),{rollDelta:gt}},moveStateManager:rt,enable:Fe,assignEvents:Uc})})(c,ie);g.dragRotate=new Ya(c,de,he,ye),this._add("mouseRotate",de,["mousePitch"]),this._add("mousePitch",he,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ye,["mousePitch"]),c.interactive&&c.dragRotate&&g.dragRotate.enable();const Se=(function({enable:Fe,clickTolerance:We}){const Je=new Qc({checkCorrectEvent:Ze=>M.mouseButton(Ze)===0&&!Ze.ctrlKey});return new Ol({clickTolerance:We,move:(Ze,rt)=>({around:rt,panDelta:rt.sub(Ze)}),activateOnStart:!0,moveStateManager:Je,enable:Fe,assignEvents:Uc})})(c),Ie=new Hy(c,g);g.dragPan=new Fv(b,Se,Ie),this._add("mousePan",Se),this._add("touchPan",Ie,["touchZoom","touchRotate"]),c.interactive&&c.dragPan&&g.dragPan.enable(c.dragPan);const Le=new og,De=new qc;g.touchZoomRotate=new Wd(b,De,Le,G),this._add("touchRotate",Le,["touchPan","touchZoom"]),this._add("touchZoom",De,["touchPan","touchRotate"]),c.interactive&&c.touchZoomRotate&&g.touchZoomRotate.enable(c.touchZoomRotate),this._add("blockableMapEvent",new wb(g));const Ve=g.scrollZoom=new sg(g,(()=>this._triggerRenderFrame()));this._add("scrollZoom",Ve,["mousePan"]),c.interactive&&c.scrollZoom&&g.scrollZoom.enable(c.scrollZoom);const He=g.keyboard=new ii(g);this._add("keyboard",He),c.interactive&&c.keyboard&&g.keyboard.enable()}_add(c,g,b){this._handlers.push({handlerName:c,handler:g,allowed:b}),this._handlersById[c]=g}stop(c){if(!this._updatingCamera){for(const{handler:g}of this._handlers)g.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Rn(this._eventsInProgress)||this.isZooming()}_blockedByActive(c,g,b){for(const C in c)if(C!==b&&(!g||g.indexOf(C)<0))return!0;return!1}_getMapTouches(c){const g=[];for(const b of c)this._el.contains(b.target)&&g.push(b);return g}mergeHandlerResult(c,g,b,C,I){if(!b)return;s.e(c,b);const z={handlerName:C,originalEvent:b.originalEvent||I};b.zoomDelta!==void 0&&(g.zoom=z),b.panDelta!==void 0&&(g.drag=z),b.rollDelta!==void 0&&(g.roll=z),b.pitchDelta!==void 0&&(g.pitch=z),b.bearingDelta!==void 0&&(g.rotate=z)}_applyChanges(){const c={},g={},b={};for(const[C,I,z]of this._changes)C.panDelta&&(c.panDelta=(c.panDelta||new s.P(0,0))._add(C.panDelta)),C.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+C.zoomDelta),C.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+C.bearingDelta),C.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+C.pitchDelta),C.rollDelta&&(c.rollDelta=(c.rollDelta||0)+C.rollDelta),C.around!==void 0&&(c.around=C.around),C.pinchAround!==void 0&&(c.pinchAround=C.pinchAround),C.noInertia&&(c.noInertia=C.noInertia),s.e(g,I),s.e(b,z);this._updateMapTransform(c,g,b),this._changes=[]}_updateMapTransform(c,g,b){const C=this._map,I=C._getTransformForUpdate(),z=C.terrain;if(!(pp(c)||z&&this._terrainMovement))return this._fireEvents(g,b,!0);C._stop(!0);let{panDelta:V,zoomDelta:G,bearingDelta:J,pitchDelta:ie,rollDelta:de,around:he,pinchAround:ye}=c;ye!==void 0&&(he=ye),he=he||C.transform.centerPoint,z&&!I.isPointOnMapSurface(he)&&(he=I.centerPoint);const Se={panDelta:V,zoomDelta:G,rollDelta:de,pitchDelta:ie,bearingDelta:J,around:he};this._map.cameraHelper.useGlobeControls&&!I.isPointOnMapSurface(he)&&(he=I.centerPoint);const Ie=he.distSqr(I.centerPoint)<.01?I.center:I.screenPointToLocation(V?he.sub(V):he);this._handleMapControls({terrain:z,tr:I,deltasForHelper:Se,preZoomAroundLoc:Ie,combinedEventsInProgress:g,panDelta:V}),C._applyUpdatedTransform(I),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(g,b,!0)}_handleMapControls({terrain:c,tr:g,deltasForHelper:b,preZoomAroundLoc:C,combinedEventsInProgress:I,panDelta:z}){const V=this._map.cameraHelper;if(V.handleMapControlsRollPitchBearingZoom(b,g),c)return V.useGlobeControls?(this._terrainMovement||!I.drag&&!I.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void V.handleMapControlsPan(b,g,C)):this._terrainMovement||!I.drag&&!I.zoom?void(I.drag&&this._terrainMovement&&z?g.setCenter(g.screenPointToLocation(g.centerPoint.sub(z))):V.handleMapControlsPan(b,g,C)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void V.handleMapControlsPan(b,g,C));V.handleMapControlsPan(b,g,C)}_fireEvents(c,g,b){const C=Rn(this._eventsInProgress),I=Rn(c),z={};for(const de in c){const{originalEvent:he}=c[de];this._eventsInProgress[de]||(z[`${de}start`]=he),this._eventsInProgress[de]=c[de]}!C&&I&&this._fireEvent("movestart",I.originalEvent);for(const de in z)this._fireEvent(de,z[de]);I&&this._fireEvent("move",I.originalEvent);for(const de in c){const{originalEvent:he}=c[de];this._fireEvent(de,he)}const V={};let G;for(const de in this._eventsInProgress){const{handlerName:he,originalEvent:ye}=this._eventsInProgress[de];this._handlersById[he].isActive()||(delete this._eventsInProgress[de],G=g[he]||ye,V[`${de}end`]=G)}for(const de in V)this._fireEvent(de,V[de]);const J=Rn(this._eventsInProgress),ie=(C||I)&&!J;if(ie&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const de=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&de.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(de)}if(b&&ie){this._updatingCamera=!0;const de=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),he=ye=>ye!==0&&-this._bearingSnap<ye&&ye<this._bearingSnap;!de||!de.essential&&O.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:G})),he(this._map.getBearing())&&this._map.resetNorth()):(he(de.bearing||this._map.getBearing())&&(de.bearing=0),de.freezeElevation=!0,this._map.easeTo(de,{originalEvent:G})),this._updatingCamera=!1}}_fireEvent(c,g){this._map.fire(new s.l(c,g?{originalEvent:g}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((c=>{delete this._frameId,this.handleEvent(new Cl("renderFrame",{timeStamp:c})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class To extends s.E{constructor(c,g,b){super(),this._renderFrameCallback=()=>{const C=Math.min((A()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(C)),C<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=b.bearingSnap,this.cameraHelper=g,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(c,g){c.apply(this.transform),this.transform=c,this.cameraHelper=g}getCenter(){return new s.V(this.transform.center.lng,this.transform.center.lat)}setCenter(c,g){return this.jumpTo({center:c},g)}getCenterElevation(){return this.transform.elevation}setCenterElevation(c,g){return this.jumpTo({elevation:c},g),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(c){this._centerClampedToGround=c}panBy(c,g,b){return c=s.P.convert(c).mult(-1),this.panTo(this.transform.center,s.e({offset:c},g),b)}panTo(c,g,b){return this.easeTo(s.e({center:c},g),b)}getZoom(){return this.transform.zoom}setZoom(c,g){return this.jumpTo({zoom:c},g),this}zoomTo(c,g,b){return this.easeTo(s.e({zoom:c},g),b)}zoomIn(c,g){return this.zoomTo(this.getZoom()+1,c,g),this}zoomOut(c,g){return this.zoomTo(this.getZoom()-1,c,g),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(c,g){return c!=this.transform.fov&&(this.transform.setFov(c),this.fire(new s.l("movestart",g)).fire(new s.l("move",g)).fire(new s.l("moveend",g))),this}getBearing(){return this.transform.bearing}setBearing(c,g){return this.jumpTo({bearing:c},g),this}getPadding(){return this.transform.padding}setPadding(c,g){return this.jumpTo({padding:c},g),this}rotateTo(c,g,b){return this.easeTo(s.e({bearing:c},g),b)}resetNorth(c,g){return this.rotateTo(0,s.e({duration:1e3},c),g),this}resetNorthPitch(c,g){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},c),g),this}snapToNorth(c,g){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,g):this}getPitch(){return this.transform.pitch}setPitch(c,g){return this.jumpTo({pitch:c},g),this}getRoll(){return this.transform.roll}setRoll(c,g){return this.jumpTo({roll:c},g),this}cameraForBounds(c,g){c=nn.convert(c).adjustAntiMeridian();const b=g&&g.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),b,g)}_cameraForBoxAndBearing(c,g,b,C){const I={top:0,bottom:0,right:0,left:0};if(typeof(C=s.e({padding:I,offset:[0,0],maxZoom:this.transform.maxZoom},C)).padding=="number"){const J=C.padding;C.padding={top:J,bottom:J,right:J,left:J}}const z=s.e(I,C.padding);C.padding=z;const V=this.transform,G=new nn(c,g);return this.cameraHelper.cameraForBoxAndBearing(C,z,G,b,V)}fitBounds(c,g,b){return this._fitInternal(this.cameraForBounds(c,g),g,b)}fitScreenCoordinates(c,g,b,C,I){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(c)),this.transform.screenPointToLocation(s.P.convert(g)),b,C),C,I)}_fitInternal(c,g,b){return c?(delete(g=s.e(c,g)).padding,g.linear?this.easeTo(g,b):this.flyTo(g,b)):this}jumpTo(c,g){this.stop();const b=this._getTransformForUpdate();let C=!1,I=!1,z=!1;const V=b.zoom;this.cameraHelper.handleJumpToCenterZoom(b,c);const G=b.zoom!==V;return"elevation"in c&&b.elevation!==+c.elevation&&b.setElevation(+c.elevation),"bearing"in c&&b.bearing!==+c.bearing&&(C=!0,b.setBearing(+c.bearing)),"pitch"in c&&b.pitch!==+c.pitch&&(I=!0,b.setPitch(+c.pitch)),"roll"in c&&b.roll!==+c.roll&&(z=!0,b.setRoll(+c.roll)),c.padding==null||b.isPaddingEqual(c.padding)||b.setPadding(c.padding),this._applyUpdatedTransform(b),this.fire(new s.l("movestart",g)).fire(new s.l("move",g)),G&&this.fire(new s.l("zoomstart",g)).fire(new s.l("zoom",g)).fire(new s.l("zoomend",g)),C&&this.fire(new s.l("rotatestart",g)).fire(new s.l("rotate",g)).fire(new s.l("rotateend",g)),I&&this.fire(new s.l("pitchstart",g)).fire(new s.l("pitch",g)).fire(new s.l("pitchend",g)),z&&this.fire(new s.l("rollstart",g)).fire(new s.l("roll",g)).fire(new s.l("rollend",g)),this.fire(new s.l("moveend",g))}calculateCameraOptionsFromTo(c,g,b,C=0){const I=s.a9.fromLngLat(c,g),z=s.a9.fromLngLat(b,C),V=z.x-I.x,G=z.y-I.y,J=z.z-I.z,ie=Math.hypot(V,G,J);if(ie===0)throw new Error("Can't calculate camera options with same From and To");const de=Math.hypot(V,G),he=s.at(this.transform.cameraToCenterDistance/ie/this.transform.tileSize),ye=180*Math.atan2(V,-G)/Math.PI;let Se=180*Math.acos(de/ie)/Math.PI;return Se=J<0?90-Se:90+Se,{center:z.toLngLat(),elevation:C,zoom:he,pitch:Se,bearing:ye}}calculateCameraOptionsFromCameraLngLatAltRotation(c,g,b,C,I){const z=this.transform.calculateCenterFromCameraLngLatAlt(c,g,b,C);return{center:z.center,elevation:z.elevation,zoom:z.zoom,bearing:b,pitch:C,roll:I}}easeTo(c,g){this._stop(!1,c.easeId),((c=s.e({offset:[0,0],duration:500,easing:s.cy},c)).animate===!1||!c.essential&&O.prefersReducedMotion)&&(c.duration=0);const b=this._getTransformForUpdate(),C=this.getBearing(),I=b.pitch,z=b.roll,V="bearing"in c?this._normalizeBearing(c.bearing,C):C,G="pitch"in c?+c.pitch:I,J="roll"in c?this._normalizeBearing(c.roll,z):z,ie="padding"in c?c.padding:b.padding,de=s.P.convert(c.offset);let he,ye;c.around&&(he=s.V.convert(c.around),ye=b.locationToScreenPoint(he));const Se={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ie=this.cameraHelper.handleEaseTo(b,{bearing:V,pitch:G,roll:J,padding:ie,around:he,aroundPoint:ye,offsetAsPoint:de,offset:c.offset,zoom:c.zoom,center:c.center});return this._rotating=this._rotating||C!==V,this._pitching=this._pitching||G!==I,this._rolling=this._rolling||J!==z,this._padding=!b.isPaddingEqual(ie),this._zooming=this._zooming||Ie.isZooming,this._easeId=c.easeId,this._prepareEase(g,c.noMoveStart,Se),this.terrain&&this._prepareElevation(Ie.elevationCenter),this._ease((Le=>{Ie.easeFunc(Le),this.terrain&&!c.freezeElevation&&this._updateElevation(Le),this._applyUpdatedTransform(b),this._fireMoveEvents(g)}),(Le=>{this.terrain&&c.freezeElevation&&this._finalizeElevation(),this._afterEase(g,Le)}),c),this}_prepareEase(c,g,b={}){this._moving=!0,g||b.moving||this.fire(new s.l("movestart",c)),this._zooming&&!b.zooming&&this.fire(new s.l("zoomstart",c)),this._rotating&&!b.rotating&&this.fire(new s.l("rotatestart",c)),this._pitching&&!b.pitching&&this.fire(new s.l("pitchstart",c)),this._rolling&&!b.rolling&&this.fire(new s.l("rollstart",c))}_prepareElevation(c){this._elevationCenter=c,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(c){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const g=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(c<1&&g!==this._elevationTarget){const b=this._elevationTarget-this._elevationStart;this._elevationStart+=c*(b-(g-(b*c+this._elevationStart))/(1-c)),this._elevationTarget=g}this.transform.setElevation(s.G.number(this._elevationStart,this._elevationTarget,c))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(c){if(!this.terrain&&c.elevation>=0&&c.pitch<=90)return{};const g=c.getCameraLngLat(),b=c.getCameraAltitude(),C=this.terrain?this.terrain.getElevationForLngLatZoom(g,c.zoom):0;if(b<C){const I=this.calculateCameraOptionsFromTo(g,C,c.center,c.elevation);return{pitch:I.pitch,zoom:I.zoom}}return{}}_applyUpdatedTransform(c){const g=[];if(g.push((C=>this._elevateCameraIfInsideTerrain(C))),this.transformCameraUpdate&&g.push((C=>this.transformCameraUpdate(C))),!g.length)return;const b=c.clone();for(const C of g){const I=b.clone(),{center:z,zoom:V,roll:G,pitch:J,bearing:ie,elevation:de}=C(I);z&&I.setCenter(z),de!==void 0&&I.setElevation(de),V!==void 0&&I.setZoom(V),G!==void 0&&I.setRoll(G),J!==void 0&&I.setPitch(J),ie!==void 0&&I.setBearing(ie),b.apply(I)}this.transform.apply(b)}_fireMoveEvents(c){this.fire(new s.l("move",c)),this._zooming&&this.fire(new s.l("zoom",c)),this._rotating&&this.fire(new s.l("rotate",c)),this._pitching&&this.fire(new s.l("pitch",c)),this._rolling&&this.fire(new s.l("roll",c))}_afterEase(c,g){if(this._easeId&&g&&this._easeId===g)return;delete this._easeId;const b=this._zooming,C=this._rotating,I=this._pitching,z=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,b&&this.fire(new s.l("zoomend",c)),C&&this.fire(new s.l("rotateend",c)),I&&this.fire(new s.l("pitchend",c)),z&&this.fire(new s.l("rollend",c)),this.fire(new s.l("moveend",c))}flyTo(c,g){if(!c.essential&&O.prefersReducedMotion){const gt=s.U(c,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(gt,g)}this.stop(),c=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.cy},c);const b=this._getTransformForUpdate(),C=b.bearing,I=b.pitch,z=b.roll,V=b.padding,G="bearing"in c?this._normalizeBearing(c.bearing,C):C,J="pitch"in c?+c.pitch:I,ie="roll"in c?this._normalizeBearing(c.roll,z):z,de="padding"in c?c.padding:b.padding,he=s.P.convert(c.offset);let ye=b.centerPoint.add(he);const Se=b.screenPointToLocation(ye),Ie=this.cameraHelper.handleFlyTo(b,{bearing:G,pitch:J,roll:ie,padding:de,locationAtOffset:Se,offsetAsPoint:he,center:c.center,minZoom:c.minZoom,zoom:c.zoom});let Le=c.curve;const De=Math.max(b.width,b.height),Ve=De/Ie.scaleOfZoom,He=Ie.pixelPathLength;typeof Ie.scaleOfMinZoom=="number"&&(Le=Math.sqrt(De/Ie.scaleOfMinZoom/He*2));const Fe=Le*Le;function We(gt){const tn=(Ve*Ve-De*De+(gt?-1:1)*Fe*Fe*He*He)/(2*(gt?Ve:De)*Fe*He);return Math.log(Math.sqrt(tn*tn+1)-tn)}function Je(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function Ze(gt){return(Math.exp(gt)+Math.exp(-gt))/2}const rt=We(!1);let xt=function(gt){return Ze(rt)/Ze(rt+Le*gt)},ht=function(gt){return De*((Ze(rt)*(Je(tn=rt+Le*gt)/Ze(tn))-Je(rt))/Fe)/He;var tn},mt=(We(!0)-rt)/Le;if(Math.abs(He)<2e-6||!isFinite(mt)){if(Math.abs(De-Ve)<1e-6)return this.easeTo(c,g);const gt=Ve<De?-1:1;mt=Math.abs(Math.log(Ve/De))/Le,ht=()=>0,xt=tn=>Math.exp(gt*Le*tn)}return c.duration="duration"in c?+c.duration:1e3*mt/("screenSpeed"in c?+c.screenSpeed/Le:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=C!==G,this._pitching=J!==I,this._rolling=ie!==z,this._padding=!b.isPaddingEqual(de),this._prepareEase(g,!1),this.terrain&&this._prepareElevation(Ie.targetCenter),this._ease((gt=>{const tn=gt*mt,rn=1/xt(tn),Bt=ht(tn);this._rotating&&b.setBearing(s.G.number(C,G,gt)),this._pitching&&b.setPitch(s.G.number(I,J,gt)),this._rolling&&b.setRoll(s.G.number(z,ie,gt)),this._padding&&(b.interpolatePadding(V,de,gt),ye=b.centerPoint.add(he)),Ie.easeFunc(gt,rn,Bt,ye),this.terrain&&!c.freezeElevation&&this._updateElevation(gt),this._applyUpdatedTransform(b),this._fireMoveEvents(g)}),(()=>{this.terrain&&c.freezeElevation&&this._finalizeElevation(),this._afterEase(g)}),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,g){var b;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const C=this._onEaseEnd;delete this._onEaseEnd,C.call(this,g)}return c||(b=this.handlers)===null||b===void 0||b.stop(!1),this}_ease(c,g,b){b.animate===!1||b.duration===0?(c(1),g()):(this._easeStart=A(),this._easeOptions=b,this._onEaseFrame=c,this._onEaseEnd=g,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(c,g){c=s.W(c,-180,180);const b=Math.abs(c-g);return Math.abs(c-360-g)<b&&(c-=360),Math.abs(c+360-g)<b&&(c+=360),c}queryTerrainElevation(c){return this.terrain?this.terrain.getElevationForLngLat(s.V.convert(c),this.transform):null}}const eo={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ho{constructor(c=eo){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=g=>{!g||g.sourceDataType!=="metadata"&&g.sourceDataType!=="visibility"&&g.dataType!=="style"&&g.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=c}getDefaultPosition(){return"bottom-right"}onAdd(c){return this._map=c,this._compact=this.options.compact,this._container=M.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=M.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){M.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(c,g){const b=this._map._getUIString(`AttributionControl.${g}`);c.title=b,c.setAttribute("aria-label",b)}_updateAttributions(){if(!this._map.style)return;let c=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=c.concat(this.options.customAttribution.map((C=>typeof C!="string"?"":C))):typeof this.options.customAttribution=="string"&&c.push(this.options.customAttribution)),this._map.style.stylesheet){const C=this._map.style.stylesheet;this.styleOwner=C.owner,this.styleId=C.id}const g=this._map.style.tileManagers;for(const C in g){const I=g[C];if(I.used||I.usedForTerrain){const z=I.getSource();z.attribution&&c.indexOf(z.attribution)<0&&c.push(z.attribution)}}c=c.filter((C=>String(C).trim())),c.sort(((C,I)=>C.length-I.length)),c=c.filter(((C,I)=>{for(let z=I+1;z<c.length;z++)if(c[z].indexOf(C)>=0)return!1;return!0}));const b=c.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,c.length?(this._innerContainer.innerHTML=M.sanitize(b),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class cg{constructor(c={}){this._updateCompact=()=>{const g=this._container.children;if(g.length){const b=g[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&b.classList.add("maplibregl-compact"):b.classList.remove("maplibregl-compact")}},this.options=c}getDefaultPosition(){return"bottom-left"}onAdd(c){this._map=c,this._compact=this.options&&this.options.compact,this._container=M.create("div","maplibregl-ctrl");const g=M.create("a","maplibregl-ctrl-logo");return g.target="_blank",g.rel="noopener nofollow",g.href="https://maplibre.org/",g.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),g.setAttribute("rel","noopener nofollow"),this._container.appendChild(g),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){M.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Du{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const g=++this._id;return this._queue.push({callback:c,id:g,cancelled:!1}),g}remove(c){const g=this._currentlyRunning,b=g?this._queue.concat(g):this._queue;for(const C of b)if(C.id===c)return void(C.cancelled=!0)}run(c=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const g=this._currentlyRunning=this._queue;this._queue=[];for(const b of g)if(!b.cancelled&&(b.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Sr=s.aU([{name:"a_pos3d",type:"Int16",components:3}]);class ei extends s.E{constructor(c){super(),this._lastTilesetChange=A(),this.tileManager=c,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=c._source.tileSize*2**this.deltaZoom,c.usedForTerrain=!0,c.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(c,g){this.tileManager.update(c,g),this._renderableTilesKeys=[];const b={};for(const C of En(c,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:g,calculateTileZoom:this.tileManager._source.calculateTileZoom}))b[C.key]=!0,this._renderableTilesKeys.push(C.key),this._tiles[C.key]||(C.terrainRttPosMatrix32f=new Float64Array(16),s.c7(C.terrainRttPosMatrix32f,0,s.a5,s.a5,0,0,1),this._tiles[C.key]=new St(C,this.tileSize),this._lastTilesetChange=A());for(const C in this._tiles)b[C]||delete this._tiles[C]}freeRtt(c){for(const g in this._tiles){const b=this._tiles[g];(!c||b.tileID.equals(c)||b.tileID.isChildOf(c)||c.isChildOf(b.tileID))&&(b.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((c=>this.getTileByID(c)))}getTileByID(c){return this._tiles[c]}getTerrainCoords(c,g){return g?this._getTerrainCoordsForTileRanges(c,g):this._getTerrainCoordsForRegularTile(c)}_getTerrainCoordsForRegularTile(c){const g={};for(const b of this._renderableTilesKeys){const C=this._tiles[b].tileID,I=c.clone(),z=s.bk();if(C.canonical.equals(c.canonical))s.c7(z,0,s.a5,s.a5,0,0,1);else if(C.canonical.isChildOf(c.canonical)){const V=C.canonical.z-c.canonical.z,G=C.canonical.x-(C.canonical.x>>V<<V),J=C.canonical.y-(C.canonical.y>>V<<V),ie=s.a5>>V;s.c7(z,0,ie,ie,0,0,1),s.O(z,z,[-G*ie,-J*ie,0])}else{if(!c.canonical.isChildOf(C.canonical))continue;{const V=c.canonical.z-C.canonical.z,G=c.canonical.x-(c.canonical.x>>V<<V),J=c.canonical.y-(c.canonical.y>>V<<V),ie=s.a5>>V;s.c7(z,0,s.a5,s.a5,0,0,1),s.O(z,z,[G*ie,J*ie,0]),s.Q(z,z,[1/2**V,1/2**V,0])}}I.terrainRttPosMatrix32f=new Float32Array(z),g[b]=I}return g}_getTerrainCoordsForTileRanges(c,g){const b={};for(const C of this._renderableTilesKeys){const I=this._tiles[C].tileID;if(!this._isWithinTileRanges(I,g))continue;const z=c.clone(),V=s.bk();if(I.canonical.z===c.canonical.z){const G=c.canonical.x-I.canonical.x,J=c.canonical.y-I.canonical.y;s.c7(V,0,s.a5,s.a5,0,0,1),s.O(V,V,[G*s.a5,J*s.a5,0])}else if(I.canonical.z>c.canonical.z){const G=I.canonical.z-c.canonical.z,J=I.canonical.x-(I.canonical.x>>G<<G),ie=I.canonical.y-(I.canonical.y>>G<<G),de=c.canonical.x-(I.canonical.x>>G),he=c.canonical.y-(I.canonical.y>>G),ye=s.a5>>G;s.c7(V,0,ye,ye,0,0,1),s.O(V,V,[-J*ye+de*s.a5,-ie*ye+he*s.a5,0])}else{const G=c.canonical.z-I.canonical.z,J=c.canonical.x-(c.canonical.x>>G<<G),ie=c.canonical.y-(c.canonical.y>>G<<G),de=(c.canonical.x>>G)-I.canonical.x,he=(c.canonical.y>>G)-I.canonical.y,ye=s.a5<<G;s.c7(V,0,ye,ye,0,0,1),s.O(V,V,[J*s.a5+de*ye,ie*s.a5+he*ye,0])}z.terrainRttPosMatrix32f=new Float32Array(V),b[C]=z}return b}getSourceTile(c,g){const b=this.tileManager._source;let C=c.overscaledZ-this.deltaZoom;if(C>b.maxzoom&&(C=b.maxzoom),C<b.minzoom)return;this._sourceTileCache[c.key]||(this._sourceTileCache[c.key]=c.scaledTo(C).key);let I=this.findTileInCaches(this._sourceTileCache[c.key]);if(!I?.dem&&g)for(;C>=b.minzoom&&!I?.dem;)I=this.findTileInCaches(c.scaledTo(C--).key);return I}findTileInCaches(c){let g=this.tileManager.getTileByID(c);return g||(g=this.tileManager._outOfViewCache.getByKey(c),g)}anyTilesAfterTime(c=Date.now()){return this._lastTilesetChange>=c}_isWithinTileRanges(c,g){return g[c.canonical.z]&&c.canonical.x>=g[c.canonical.z].minTileX&&c.canonical.x<=g[c.canonical.z].maxTileX&&c.canonical.y>=g[c.canonical.z].minTileY&&c.canonical.y<=g[c.canonical.z].maxTileY}}class br{constructor(c,g,b){this._meshCache={},this.painter=c,this.tileManager=new ei(g),this.options=b,this.exaggeration=typeof b.exaggeration=="number"?b.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(c,g,b,C=s.a5){var I;if(!(g>=0&&g<C&&b>=0&&b<C))return 0;const z=this.getTerrainData(c),V=(I=z.tile)===null||I===void 0?void 0:I.dem;if(!V)return 0;const G=s.cC([],[g/C*s.a5,b/C*s.a5],z.u_terrain_matrix),J=[G[0]*V.dim,G[1]*V.dim],ie=Math.floor(J[0]),de=Math.floor(J[1]),he=J[0]-ie,ye=J[1]-de;return V.get(ie,de)*(1-he)*(1-ye)+V.get(ie+1,de)*he*(1-ye)+V.get(ie,de+1)*(1-he)*ye+V.get(ie+1,de+1)*he*ye}getElevationForLngLatZoom(c,g){if(!s.cD(g,c.wrap()))return 0;const{tileID:b,mercatorX:C,mercatorY:I}=this._getOverscaledTileIDFromLngLatZoom(c,g);return this.getElevation(b,C%s.a5,I%s.a5,s.a5)}getElevationForLngLat(c,g){const b=En(g,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let C=0;for(const I of b)I.canonical.z>C&&(C=Math.min(I.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(c,C)}getElevation(c,g,b,C=s.a5){return this.getDEMElevation(c,g,b,C)*this.exaggeration}getTerrainData(c){if(!this._emptyDemTexture){const C=this.painter.context,I=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new s.T(C,I,C.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new s.T(C,new s.R({width:1,height:1}),C.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ar([])}const g=this.tileManager.getSourceTile(c,!0);if(g&&g.dem&&(!g.demTexture||g.needsTerrainPrepare)){const C=this.painter.context;g.demTexture=this.painter.getTileTexture(g.dem.stride),g.demTexture?g.demTexture.update(g.dem.getPixels(),{premultiply:!1}):g.demTexture=new s.T(C,g.dem.getPixels(),C.gl.RGBA,{premultiply:!1}),g.demTexture.bind(C.gl.NEAREST,C.gl.CLAMP_TO_EDGE),g.needsTerrainPrepare=!1}const b=g&&g.toString()+g.tileID.key+c.key;if(b&&!this._demMatrixCache[b]){const C=this.tileManager.getSource().maxzoom;let I=c.canonical.z-g.tileID.canonical.z;c.overscaledZ>c.canonical.z&&(c.canonical.z>=C?I=c.canonical.z-C:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const z=c.canonical.x-(c.canonical.x>>I<<I),V=c.canonical.y-(c.canonical.y>>I<<I),G=s.cE(new Float64Array(16),[1/(s.a5<<I),1/(s.a5<<I),0]);s.O(G,G,[z*s.a5,V*s.a5,0]),this._demMatrixCache[c.key]={matrix:G,coord:c}}return{u_depth:2,u_terrain:3,u_terrain_dim:g&&g.dem&&g.dem.dim||1,u_terrain_matrix:b?this._demMatrixCache[c.key].matrix:this._emptyDemMatrix,u_terrain_unpack:g&&g.dem&&g.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(g&&g.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:g}}getFramebuffer(c){const g=this.painter,b=g.width/devicePixelRatio,C=g.height/devicePixelRatio;return!this._fbo||this._fbo.width===b&&this._fbo.height===C||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new s.T(g.context,{width:b,height:C,data:null},g.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(g.context.gl.NEAREST,g.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new s.T(g.context,{width:b,height:C,data:null},g.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(g.context.gl.NEAREST,g.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=g.context.createFramebuffer(b,C,!0,!1),this._fbo.depthAttachment.set(g.context.createRenderbuffer(g.context.gl.DEPTH_COMPONENT16,b,C))),this._fbo.colorAttachment.set(c==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const c=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const g=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let I=0,z=0;I<this._coordsTextureSize;I++)for(let V=0;V<this._coordsTextureSize;V++,z+=4)g[z+0]=255&V,g[z+1]=255&I,g[z+2]=V>>8<<4|I>>8,g[z+3]=0;const b=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(g.buffer)),C=new s.T(c,b,c.gl.RGBA,{premultiply:!1});return C.bind(c.gl.NEAREST,c.gl.CLAMP_TO_EDGE),this._coordsTexture=C,C}pointCoordinate(c){this.painter.maybeDrawDepthAndCoords(!0);const g=new Uint8Array(4),b=this.painter.context,C=b.gl,I=Math.round(c.x*this.painter.pixelRatio/devicePixelRatio),z=Math.round(c.y*this.painter.pixelRatio/devicePixelRatio),V=Math.round(this.painter.height/devicePixelRatio);b.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),C.readPixels(I,V-z-1,1,1,C.RGBA,C.UNSIGNED_BYTE,g),b.bindFramebuffer.set(null);const G=g[0]+(g[2]>>4<<8),J=g[1]+((15&g[2])<<8),ie=this.coordsIndex[255-g[3]],de=ie&&this.tileManager.getTileByID(ie);if(!de)return null;const he=this._coordsTextureSize,ye=(1<<de.tileID.canonical.z)*he;return new s.a9((de.tileID.canonical.x*he+G)/ye+de.tileID.wrap,(de.tileID.canonical.y*he+J)/ye,this.getElevation(de.tileID,G,J,he))}depthAtPoint(c){const g=new Uint8Array(4),b=this.painter.context,C=b.gl;return b.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),C.readPixels(c.x,this.painter.height/devicePixelRatio-c.y-1,1,1,C.RGBA,C.UNSIGNED_BYTE,g),b.bindFramebuffer.set(null),(g[0]/16777216+g[1]/65536+g[2]/256+g[3])/256}getTerrainMesh(c){var g;const b=((g=this.painter.style.projection)===null||g===void 0?void 0:g.transitionState)>0,C=b&&c.canonical.y===0,I=b&&c.canonical.y===(1<<c.canonical.z)-1,z=`m_${C?"n":""}_${I?"s":""}`;if(this._meshCache[z])return this._meshCache[z];const V=this.painter.context,G=new s.cF,J=new s.aY,ie=this.meshSize,de=s.a5/ie,he=ie*ie;for(let Ze=0;Ze<=ie;Ze++)for(let rt=0;rt<=ie;rt++)G.emplaceBack(rt*de,Ze*de,0);for(let Ze=0;Ze<he;Ze+=ie+1)for(let rt=0;rt<ie;rt++)J.emplaceBack(rt+Ze,ie+rt+Ze+1,ie+rt+Ze+2),J.emplaceBack(rt+Ze,ie+rt+Ze+2,rt+Ze+1);const ye=G.length,Se=ye+(ie+1),Ie=(ie+1)*ie,Le=C?s.br:0,De=C?0:1,Ve=I?s.bs:s.a5,He=I?0:1;for(let Ze=0;Ze<=ie;Ze++)G.emplaceBack(Ze*de,Le,De);for(let Ze=0;Ze<=ie;Ze++)G.emplaceBack(Ze*de,Ve,He);for(let Ze=0;Ze<ie;Ze++)J.emplaceBack(Ie+Ze,Se+Ze,Se+Ze+1),J.emplaceBack(Ie+Ze,Se+Ze+1,Ie+Ze+1),J.emplaceBack(0+Ze,ye+Ze+1,ye+Ze),J.emplaceBack(0+Ze,0+Ze+1,ye+Ze+1);const Fe=G.length,We=Fe+2*(ie+1);for(const Ze of[0,1])for(let rt=0;rt<=ie;rt++)for(const xt of[0,1])G.emplaceBack(Ze*s.a5,rt*de,xt);for(let Ze=0;Ze<2*ie;Ze+=2)J.emplaceBack(Fe+Ze,Fe+Ze+1,Fe+Ze+3),J.emplaceBack(Fe+Ze,Fe+Ze+3,Fe+Ze+2),J.emplaceBack(We+Ze,We+Ze+3,We+Ze+1),J.emplaceBack(We+Ze,We+Ze+2,We+Ze+3);const Je=new yi(V.createVertexBuffer(G,Sr.members),V.createIndexBuffer(J),s.aX.simpleSegment(0,0,G.length,J.length));return this._meshCache[z]=Je,Je}getMeshFrameDelta(c){return 2*Math.PI*s.bE/Math.pow(2,Math.max(c,0))/5}getMinTileElevationForLngLatZoom(c,g){var b;if(!s.cD(g,c.wrap()))return 0;const{tileID:C}=this._getOverscaledTileIDFromLngLatZoom(c,g);return(b=this.getMinMaxElevation(C).minElevation)!==null&&b!==void 0?b:0}getMinMaxElevation(c){const g=this.getTerrainData(c).tile,b={minElevation:null,maxElevation:null};return g&&g.dem&&(b.minElevation=g.dem.min*this.exaggeration,b.maxElevation=g.dem.max*this.exaggeration),b}_getOverscaledTileIDFromLngLatZoom(c,g){const b=s.a9.fromLngLat(c.wrap()),C=(1<<g)*s.a5,I=b.x*C,z=b.y*C,V=Math.floor(I/s.a5),G=Math.floor(z/s.a5);return{tileID:new s.a2(g,0,g,V,G),mercatorX:I,mercatorY:z}}}class Zi{constructor(c,g,b){this._context=c,this._size=g,this._tileSize=b,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const c of this._objects)c.texture.destroy(),c.fbo.destroy()}_createObject(c){const g=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),b=new s.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return b.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),g.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),g.colorAttachment.set(b.texture),{id:c,fbo:g,texture:b,stamp:-1,inUse:!1}}getObjectForId(c){return this._objects[c]}useObject(c){c.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((g=>c.id!==g)),this._recentlyUsed.push(c.id)}stampObject(c){c.stamp=++this._stamp}getOrCreateFreeObject(){for(const g of this._recentlyUsed)if(!this._objects[g].inUse)return this._objects[g];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const c=this._createObject(this._objects.length);return this._objects.push(c),c}freeObject(c){c.inUse=!1}freeAllObjects(){for(const c of this._objects)this.freeObject(c)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((c=>!c.inUse))===!1}}const Tl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class nc{constructor(c,g){this.painter=c,this.terrain=g,this.pool=new Zi(c.context,30,g.tileManager.tileSize*g.qualityFactor)}destruct(){this.pool.destruct()}getTexture(c){return this.pool.getObjectForId(c.rtt[this._stacks.length-1].id).texture}prepareForRender(c,g){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=c._order.filter((b=>!c._layers[b].isHidden(g))),this._coordsAscending={};for(const b in c.tileManagers){this._coordsAscending[b]={};const C=c.tileManagers[b].getVisibleCoordinates(),I=c.tileManagers[b].getSource(),z=I instanceof jt?I.terrainTileRanges:null;for(const V of C){const G=this.terrain.tileManager.getTerrainCoords(V,z);for(const J in G)this._coordsAscending[b][J]||(this._coordsAscending[b][J]=[]),this._coordsAscending[b][J].push(G[J])}}this._coordsAscendingStr={};for(const b of c._order){const C=c._layers[b],I=C.source;if(Tl[C.type]&&!this._coordsAscendingStr[I]){this._coordsAscendingStr[I]={};for(const z in this._coordsAscending[I])this._coordsAscendingStr[I][z]=this._coordsAscending[I][z].map((V=>V.key)).sort().join()}}for(const b of this._renderableTiles)for(const C in this._coordsAscendingStr){const I=this._coordsAscendingStr[C][b.tileID.key];I&&I!==b.rttCoords[C]&&(b.rtt=[])}}renderLayer(c,g){if(c.isHidden(this.painter.transform.zoom))return!1;const b=Object.assign(Object.assign({},g),{isRenderingToTexture:!0}),C=c.type,I=this.painter,z=this._renderableLayerIds[this._renderableLayerIds.length-1]===c.id;if(Tl[C]&&(this._prevType&&Tl[this._prevType]||this._stacks.push([]),this._prevType=C,this._stacks[this._stacks.length-1].push(c.id),!z))return!0;if(Tl[this._prevType]||Tl[C]&&z){this._prevType=C;const V=this._stacks.length-1,G=this._stacks[V]||[];for(const J of this._renderableTiles){if(this.pool.isFull()&&(Qy(this.painter,this.terrain,this._rttTiles,b),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(J),J.rtt[V]){const de=this.pool.getObjectForId(J.rtt[V].id);if(de.stamp===J.rtt[V].stamp){this.pool.useObject(de);continue}}const ie=this.pool.getOrCreateFreeObject();this.pool.useObject(ie),this.pool.stampObject(ie),J.rtt[V]={id:ie.id,stamp:ie.stamp},I.context.bindFramebuffer.set(ie.fbo.framebuffer),I.context.clear({color:s.bp.transparent,stencil:0}),I.currentStencilSource=void 0;for(let de=0;de<G.length;de++){const he=I.style._layers[G[de]],ye=he.source?this._coordsAscending[he.source][J.tileID.key]:[J.tileID];I.context.viewport.set([0,0,ie.fbo.width,ie.fbo.height]),I._renderTileClippingMasks(he,ye,!0),I.renderLayer(I,I.style.tileManagers[he.source],he,ye,b),he.source&&(J.rttCoords[he.source]=this._coordsAscendingStr[he.source][J.tileID.key])}}return Qy(this.painter,this.terrain,this._rttTiles,b),this._rttTiles=[],this.pool.freeAllObjects(),Tl[C]}return!1}}const Hd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Gd=u,Lu={hash:!1,interactive:!0,bearingSnap:7,attributionControl:eo,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},jv={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Li{constructor(c,g,b=!1){this.mousedown=I=>{this.startMove(I,M.mousePos(this.element,I)),M.addEventListener(window,"mousemove",this.mousemove),M.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.move(I,M.mousePos(this.element,I))},this.mouseup=I=>{this._rotatePitchHandler.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=M.touchPos(this.element,I.targetTouches)[0],this.startMove(I,this._startPos),M.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=M.touchPos(this.element,I.targetTouches)[0],this.move(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=g;const C=new rg;this._rotatePitchHandler=new Ol({clickTolerance:3,move:(I,z)=>{const V=g.getBoundingClientRect(),G=new s.P((V.bottom-V.top)/2,(V.right-V.left)/2);return{bearingDelta:s.cx(new s.P(I.x,z.y),z,G),pitchDelta:b?-.5*(z.y-I.y):void 0}},moveStateManager:C,enable:!0,assignEvents:()=>{}}),this.map=c,M.addEventListener(g,"mousedown",this.mousedown),M.addEventListener(g,"touchstart",this.touchstart,{passive:!1}),M.addEventListener(g,"touchcancel",this.reset)}startMove(c,g){this._rotatePitchHandler.dragStart(c,g),M.disableDrag()}move(c,g){const b=this.map,{bearingDelta:C,pitchDelta:I}=this._rotatePitchHandler.dragMove(c,g)||{};C&&b.setBearing(b.getBearing()+C),I&&b.setPitch(b.getPitch()+I)}off(){const c=this.element;M.removeEventListener(c,"mousedown",this.mousedown),M.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend),M.removeEventListener(c,"touchcancel",this.reset),this.offTemp()}offTemp(){M.enableDrag(),M.removeEventListener(window,"mousemove",this.mousemove),M.removeEventListener(window,"mouseup",this.mouseup),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend)}}let rc;function mp(P,c,g,b=!1){if(b||!g.getCoveringTilesDetailsProvider().allowWorldCopies())return P?.wrap();const C=new s.V(P.lng,P.lat);if(P=new s.V(P.lng,P.lat),c){const I=new s.V(P.lng-360,P.lat),z=new s.V(P.lng+360,P.lat),V=g.locationToScreenPoint(P).distSqr(c);g.locationToScreenPoint(I).distSqr(c)<V?P=I:g.locationToScreenPoint(z).distSqr(c)<V&&(P=z)}for(;Math.abs(P.lng-g.center.lng)>180;){const I=g.locationToScreenPoint(P);if(I.x>=0&&I.y>=0&&I.x<=g.width&&I.y<=g.height)break;P.lng>g.center.lng?P.lng-=360:P.lng+=360}return P.lng!==C.lng&&g.isPointOnMapSurface(g.locationToScreenPoint(P))?P:C}const gp={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ug(P,c,g){const b=P.classList;for(const C in gp)b.remove(`maplibregl-${g}-anchor-${C}`);b.add(`maplibregl-${g}-anchor-${c}`)}class hg extends s.E{constructor(c){if(super(),this._onKeyPress=g=>{const b=g.code,C=g.charCode||g.keyCode;b!=="Space"&&b!=="Enter"&&C!==32&&C!==13||this.togglePopup()},this._onMapClick=g=>{const b=g.originalEvent.target,C=this._element;this._popup&&(b===C||C.contains(b))&&this.togglePopup()},this._update=g=>{if(!this._map)return;const b=this._map.loaded()&&!this._map.isMoving();(g?.type==="terrain"||g?.type==="render"&&!b)&&this._map.once("render",this._update),this._lngLat=mp(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let C="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?C=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(C=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||g&&g.type!=="moveend"||(this._pos=this._pos.round()),M.setTransform(this._element,`${gp[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${C}`),O.frameAsync(new AbortController).then((()=>{this._updateOpacity(g&&g.type==="moveend")})).catch((()=>{}))},this._onMove=g=>{if(!this._isDragging){const b=this._clickTolerance||this._map._clickTolerance;this._isDragging=g.point.dist(this._pointerdownPos)>=b}this._isDragging&&(this._pos=g.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=g=>{this._element.contains(g.originalEvent.target)&&(g.preventDefault(),this._positionDelta=g.point.sub(this._pos).add(this._offset),this._pointerdownPos=g.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._subpixelPositioning=c&&c.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment!=="auto"?c.pitchAlignment:this._rotationAlignment,this.setOpacity(c?.opacity,c?.opacityWhenCovered),c&&c.element)this._element=c.element,this._offset=s.P.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=M.create("div");const g=M.createNS("http://www.w3.org/2000/svg","svg"),b=41,C=27;g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height",`${b}px`),g.setAttributeNS(null,"width",`${C}px`),g.setAttributeNS(null,"viewBox",`0 0 ${C} ${b}`);const I=M.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"stroke","none"),I.setAttributeNS(null,"stroke-width","1"),I.setAttributeNS(null,"fill","none"),I.setAttributeNS(null,"fill-rule","evenodd");const z=M.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const V=M.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"transform","translate(3.0, 29.0)"),V.setAttributeNS(null,"fill","#000000");const G=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const De of G){const Ve=M.createNS("http://www.w3.org/2000/svg","ellipse");Ve.setAttributeNS(null,"opacity","0.04"),Ve.setAttributeNS(null,"cx","10.5"),Ve.setAttributeNS(null,"cy","5.80029008"),Ve.setAttributeNS(null,"rx",De.rx),Ve.setAttributeNS(null,"ry",De.ry),V.appendChild(Ve)}const J=M.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"fill",this._color);const ie=M.createNS("http://www.w3.org/2000/svg","path");ie.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),J.appendChild(ie);const de=M.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"opacity","0.25"),de.setAttributeNS(null,"fill","#000000");const he=M.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),de.appendChild(he);const ye=M.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ye.setAttributeNS(null,"fill","#FFFFFF");const Se=M.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ie=M.createNS("http://www.w3.org/2000/svg","circle");Ie.setAttributeNS(null,"fill","#000000"),Ie.setAttributeNS(null,"opacity","0.25"),Ie.setAttributeNS(null,"cx","5.5"),Ie.setAttributeNS(null,"cy","5.5"),Ie.setAttributeNS(null,"r","5.4999962");const Le=M.createNS("http://www.w3.org/2000/svg","circle");Le.setAttributeNS(null,"fill","#FFFFFF"),Le.setAttributeNS(null,"cx","5.5"),Le.setAttributeNS(null,"cy","5.5"),Le.setAttributeNS(null,"r","5.4999962"),Se.appendChild(Ie),Se.appendChild(Le),z.appendChild(V),z.appendChild(J),z.appendChild(de),z.appendChild(ye),z.appendChild(Se),g.appendChild(z),g.setAttributeNS(null,"height",b*this._scale+"px"),g.setAttributeNS(null,"width",C*this._scale+"px"),this._element.appendChild(g),this._offset=s.P.convert(c&&c.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(g=>{g.preventDefault()})),this._element.addEventListener("mousedown",(g=>{g.preventDefault()})),ug(this._element,this._anchor,"marker"),c&&c.className)for(const g of c.className.split(" "))this._element.classList.add(g);this._popup=null}addTo(c){return this.remove(),this._map=c,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",c._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),c.on("terrain",this._update),c.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),M.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=s.V.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const C=Math.abs(13.5)/Math.SQRT2;c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[C,-1*(38.1-13.5+C)],"bottom-right":[-C,-1*(38.1-13.5+C)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(c){return this._subpixelPositioning=c,this}getPopup(){return this._popup}togglePopup(){const c=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:c?(c.isOpen()?c.remove():(c.setLngLat(this._lngLat),c.addTo(this._map)),this):this}_updateOpacity(c=!1){var g,b;const C=(g=this._map)===null||g===void 0?void 0:g.terrain,I=this._map.transform.isLocationOccluded(this._lngLat);if(!C||I){const ye=I?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ye&&(this._element.style.opacity=ye))}if(c)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const z=this._map,V=z.terrain.depthAtPoint(this._pos),G=z.terrain.getElevationForLngLat(this._lngLat,z.transform);if(z.transform.lngLatToCameraDepth(this._lngLat,G)-V<.006)return void(this._element.style.opacity=this._opacity);const J=-this._offset.y/z.transform.pixelsPerMeter,ie=Math.sin(z.getPitch()*Math.PI/180)*J,de=z.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),he=z.transform.lngLatToCameraDepth(this._lngLat,G+ie)-de>.006;!((b=this._popup)===null||b===void 0)&&b.isOpen()&&he&&this._popup.remove(),this._element.style.opacity=he?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(c){return this._offset=s.P.convert(c),this._update(),this}addClassName(c){this._element.classList.add(c)}removeClassName(c){this._element.classList.remove(c)}toggleClassName(c){return this._element.classList.toggle(c)}setDraggable(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c&&c!=="auto"?c:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(c,g){return(this._opacity===void 0||c===void 0&&g===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),c!==void 0&&(this._opacity=c),g!==void 0&&(this._opacityWhenCovered=g),this._map&&this._updateOpacity(!0),this}}const dg={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Bh=0,$u=!1;const Ps={maxWidth:100,unit:"metric"};function qi(P,c,g){const b=g&&g.maxWidth||100,C=P._container.clientHeight/2,I=P._container.clientWidth/2,z=P.unproject([I-b/2,C]),V=P.unproject([I+b/2,C]),G=Math.round(P.project(V).x-P.project(z).x),J=Math.min(b,G,P._container.clientWidth),ie=z.distanceTo(V);if(g&&g.unit==="imperial"){const de=3.2808*ie;de>5280?Hc(c,J,de/5280,P._getUIString("ScaleControl.Miles")):Hc(c,J,de,P._getUIString("ScaleControl.Feet"))}else g&&g.unit==="nautical"?Hc(c,J,ie/1852,P._getUIString("ScaleControl.NauticalMiles")):ie>=1e3?Hc(c,J,ie/1e3,P._getUIString("ScaleControl.Kilometers")):Hc(c,J,ie,P._getUIString("ScaleControl.Meters"))}function Hc(P,c,g,b){const C=(function(I){const z=Math.pow(10,`${Math.floor(I)}`.length-1);let V=I/z;return V=V>=10?10:V>=5?5:V>=3?3:V>=2?2:V>=1?1:(function(G){const J=Math.pow(10,Math.ceil(-Math.log(G)/Math.LN10));return Math.round(G*J)/J})(V),z*V})(g);P.style.width=c*(C/g)+"px",P.innerHTML=`${C}&nbsp;${b}`}const Xd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Yd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function yp(P){if(P){if(typeof P=="number"){const c=Math.round(Math.abs(P)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,P),"top-left":new s.P(c,c),"top-right":new s.P(-c,c),bottom:new s.P(0,-P),"bottom-left":new s.P(c,-c),"bottom-right":new s.P(-c,-c),left:new s.P(P,0),right:new s.P(-P,0)}}if(P instanceof s.P||Array.isArray(P)){const c=s.P.convert(P);return{center:c,top:c,"top-left":c,"top-right":c,bottom:c,"bottom-left":c,"bottom-right":c,left:c,right:c}}return{center:s.P.convert(P.center||[0,0]),top:s.P.convert(P.top||[0,0]),"top-left":s.P.convert(P["top-left"]||[0,0]),"top-right":s.P.convert(P["top-right"]||[0,0]),bottom:s.P.convert(P.bottom||[0,0]),"bottom-left":s.P.convert(P["bottom-left"]||[0,0]),"bottom-right":s.P.convert(P["bottom-right"]||[0,0]),left:s.P.convert(P.left||[0,0]),right:s.P.convert(P.right||[0,0])}}return yp(new s.P(0,0))}const ic=u;a.AJAXError=s.cI,a.Event=s.l,a.Evented=s.E,a.LngLat=s.V,a.MercatorCoordinate=s.a9,a.Point=s.P,a.addProtocol=s.cJ,a.config=s.c,a.removeProtocol=s.cK,a.AttributionControl=ho,a.BoxZoomHandler=zh,a.CanvasSource=ae,a.CooperativeGesturesHandler=wn,a.DoubleClickZoomHandler=Xy,a.DragPanHandler=Fv,a.DragRotateHandler=Ya,a.EdgeInsets=Va,a.FullscreenControl=class extends s.E{constructor(P={}){super(),this._onFullscreenChange=()=>{var c;let g=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((c=g?.shadowRoot)===null||c===void 0)&&c.fullscreenElement;)g=g.shadowRoot.fullscreenElement;g===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,P&&P.container&&(P.container instanceof HTMLElement?this._container=P.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(P){return this._map=P,this._container||(this._container=this._map.getContainer()),this._controlContainer=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){M.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const P=this._fullscreenButton=M.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);M.create("span","maplibregl-ctrl-icon",P).setAttribute("aria-hidden","true"),P.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const P=this._getTitle();this._fullscreenButton.setAttribute("aria-label",P),this._fullscreenButton.title=P}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=kt,a.GeolocateControl=class extends s.E{constructor(P){super(),this._onSuccess=c=>{if(this._map){if(this._isOutOfMapMaxBounds(c))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",c)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=c,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(c),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(c),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",c)),this._finish()}},this._updateCamera=c=>{const g=new s.V(c.coords.longitude,c.coords.latitude),b=c.coords.accuracy,C=this._map.getBearing(),I=s.e({bearing:C},this.options.fitBoundsOptions),z=nn.fromLngLat(g,b);this._map.fitBounds(z,I,{geolocateSource:!0})},this._updateMarker=c=>{if(c){const g=new s.V(c.coords.longitude,c.coords.latitude);this._accuracyCircleMarker.setLngLat(g).addTo(this._map),this._userLocationDotMarker.setLngLat(g).addTo(this._map),this._accuracy=c.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=c=>{if(this._map){if(c.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(c.code===3&&$u)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",c)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(c=>c.preventDefault())),this._geolocateButton=M.create("button","maplibregl-ctrl-geolocate",this._container),M.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=c=>{if(this._map){if(c===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}else{const g=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new hg({element:this._dotElement}),this._circleElement=M.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new hg({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(g=>{const b=g?.[0]instanceof ResizeObserverEntry;g.geolocateSource||this._watchState!=="ACTIVE_LOCK"||b||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))}))}},this.options=s.e({},dg,P)}onAdd(P){return this._map=P,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return s._(this,arguments,void 0,(function*(c=!1){if(rc!==void 0&&!c)return rc;if(window.navigator.permissions===void 0)return rc=!!window.navigator.geolocation,rc;try{rc=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{rc=!!window.navigator.geolocation}return rc}))})().then((c=>this._finishSetupUI(c))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),M.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Bh=0,$u=!1}_isOutOfMapMaxBounds(P){const c=this._map.getMaxBounds(),g=P.coords;return c&&(g.longitude<c.getWest()||g.longitude>c.getEast()||g.latitude<c.getSouth()||g.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const P=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&P))return;const c=this._map.project(P),g=this._map.unproject([c.x+100,c.y]),b=P.distanceTo(g)/100,C=2*this._accuracy/b;this._circleElement.style.width=`${C.toFixed(2)}px`,this._circleElement.style.height=`${C.toFixed(2)}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Bh--,$u=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let P;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Bh++,Bh>1?(P={maximumAge:6e5,timeout:0},$u=!0):(P=this.options.positionOptions,$u=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,P)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.GlobeControl=class{constructor(){this._toggleProjection=()=>{var P;const c=(P=this._map.getProjection())===null||P===void 0?void 0:P.type;this._map.setProjection(c!=="mercator"&&c?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var P;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((P=this._map.getProjection())===null||P===void 0?void 0:P.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(P){return this._map=P,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=M.create("button","maplibregl-ctrl-globe",this._container),M.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){M.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},a.Hash=Co,a.ImageSource=jt,a.KeyboardHandler=ii,a.LngLatBounds=nn,a.LogoControl=cg,a.Map=class extends To{constructor(P){var c,g;s.cG.mark(s.cH.create);const b=Object.assign(Object.assign(Object.assign({},Lu),P),{canvasContextAttributes:Object.assign(Object.assign({},Lu.canvasContextAttributes),P.canvasContextAttributes)});if(b.minZoom!=null&&b.maxZoom!=null&&b.minZoom>b.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(b.minPitch!=null&&b.maxPitch!=null&&b.minPitch>b.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(b.minPitch!=null&&b.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(b.maxPitch!=null&&b.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const C=new Zo,I=new Id;if(b.minZoom!==void 0&&C.setMinZoom(b.minZoom),b.maxZoom!==void 0&&C.setMaxZoom(b.maxZoom),b.minPitch!==void 0&&C.setMinPitch(b.minPitch),b.maxPitch!==void 0&&C.setMaxPitch(b.maxPitch),b.renderWorldCopies!==void 0&&C.setRenderWorldCopies(b.renderWorldCopies),b.transformConstrain!==null&&C.setConstrainOverride(b.transformConstrain),super(C,I,{bearingSnap:b.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Du,this._controls=[],this._mapId=s.af(),this._lostContextStyle={style:null,images:null},this._contextLost=V=>{V.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const G of Object.values(this.style._layers))if(G.type==="custom"&&console.warn(`Custom layer with id '${G.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),G._listeners)for(const[J]of Object.entries(G._listeners))console.warn(`Custom layer with id '${G.id}' had event listeners for event '${J}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new s.l("webglcontextlost",{originalEvent:V}))},this._contextRestored=V=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:V}))},this._onMapScroll=V=>{if(V.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=b.interactive,this._maxTileCacheSize=b.maxTileCacheSize,this._maxTileCacheZoomLevels=b.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},b.canvasContextAttributes),this._trackResize=b.trackResize===!0,this._bearingSnap=b.bearingSnap,this._centerClampedToGround=b.centerClampedToGround,this._refreshExpiredTiles=b.refreshExpiredTiles===!0,this._fadeDuration=b.fadeDuration,this._crossSourceCollisions=b.crossSourceCollisions===!0,this._collectResourceTiming=b.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Hd),b.locale),this._clickTolerance=b.clickTolerance,this._overridePixelRatio=b.pixelRatio,this._maxCanvasSize=b.maxCanvasSize,this._zoomLevelsToOverscale=b.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=b.transformCameraUpdate,this.transformConstrain=b.transformConstrain,this.cancelPendingTileRequestsWhileZooming=b.cancelPendingTileRequestsWhileZooming===!0,b.reduceMotion!==void 0&&(O.prefersReducedMotion=b.reduceMotion),this._imageQueueHandle=H.addThrottleControl((()=>this.isMoving())),this._requestManager=new te(b.transformRequest),typeof b.container=="string"){if(this._container=document.getElementById(b.container),!this._container)throw new Error(`Container '${b.container}' not found.`)}else{if(!(b.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=b.container}if(b.maxBounds&&this.setMaxBounds(b.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let V=!1;const G=zv((J=>{this._trackResize&&!this._removed&&(this.resize(J),this.redraw())}),50);this._resizeObserver=new ResizeObserver((J=>{V?G(J):V=!0})),this._resizeObserver.observe(this._container)}this.handlers=new lg(this,b),this._hash=b.hash&&new Co(typeof b.hash=="string"&&b.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:b.center,elevation:b.elevation,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch,roll:b.roll}),b.bounds&&(this.resize(),this.fitBounds(b.bounds,s.e({},b.fitBoundsOptions,{duration:0}))));const z=typeof b.style=="string"||((g=(c=b.style)===null||c===void 0?void 0:c.projection)===null||g===void 0?void 0:g.type)!=="globe";this.resize(null,z),this._localIdeographFontFamily=b.localIdeographFontFamily,this._validateStyle=b.validateStyle,b.style&&this.setStyle(b.style,{localIdeographFontFamily:b.localIdeographFontFamily}),b.attributionControl&&this.addControl(new ho(typeof b.attributionControl=="boolean"?void 0:b.attributionControl)),b.maplibreLogo&&this.addControl(new cg,b.logoPosition),this.on("style.load",(()=>{if(z||this._resizeTransform(),this.transform.unmodified){const V=s.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(V)}})),this.on("data",(V=>{this._update(V.dataType==="style"),this.fire(new s.l(`${V.dataType}data`,V))})),this.on("dataloading",(V=>{this.fire(new s.l(`${V.dataType}dataloading`,V))})),this.on("dataabort",(V=>{this.fire(new s.l("sourcedataabort",V))}))}_getMapId(){return this._mapId}setGlobalStateProperty(P,c){return this.style.setGlobalStateProperty(P,c),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(P,c){if(c===void 0&&(c=P.getDefaultPosition?P.getDefaultPosition():"top-right"),!P||!P.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const g=P.onAdd(this);this._controls.push(P);const b=this._controlPositions[c];return c.indexOf("bottom")!==-1?b.insertBefore(g,b.firstChild):b.appendChild(g),this}removeControl(P){if(!P||!P.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(P);return c>-1&&this._controls.splice(c,1),P.onRemove(this),this}hasControl(P){return this._controls.indexOf(P)>-1}coveringTiles(P){return En(this.transform,P)}calculateCameraOptionsFromTo(P,c,g,b){return b==null&&this.terrain&&(b=this.terrain.getElevationForLngLat(g,this.transform)),super.calculateCameraOptionsFromTo(P,c,g,b)}resize(P,c=!0){const[g,b]=this._containerDimensions(),C=this._getClampedPixelRatio(g,b);if(this._resizeCanvas(g,b,C),this.painter.resize(g,b,C),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const V=this._getClampedPixelRatio(g,b);this._resizeCanvas(g,b,V),this.painter.resize(g,b,V)}this._resizeTransform(c);const I=!this._moving;return I&&(this.stop(),this.fire(new s.l("movestart",P)).fire(new s.l("move",P))),this.fire(new s.l("resize",P)),I&&this.fire(new s.l("moveend",P)),this}_resizeTransform(P=!0){var c;const[g,b]=this._containerDimensions();this.transform.resize(g,b,P),(c=this._requestedCameraState)===null||c===void 0||c.resize(g,b,P)}_getClampedPixelRatio(P,c){const{0:g,1:b}=this._maxCanvasSize,C=this.getPixelRatio(),I=P*C,z=c*C;return Math.min(I>g?g/I:1,z>b?b/z:1)*C}getPixelRatio(){var P;return(P=this._overridePixelRatio)!==null&&P!==void 0?P:devicePixelRatio}setPixelRatio(P){this._overridePixelRatio=P,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(P){return this.transform.setMaxBounds(nn.convert(P)),this._update()}setMinZoom(P){if((P=P??-2)>=-2&&P<=this.transform.maxZoom){const c=this._getTransformForUpdate();return c.setMinZoom(P),this._applyUpdatedTransform(c),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(P){if((P=P??22)>=this.transform.minZoom){const c=this._getTransformForUpdate();return c.setMaxZoom(P),this._applyUpdatedTransform(c),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(P){if((P=P??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(P>=0&&P<=this.transform.maxPitch)return this.transform.setMinPitch(P),this._update(),this.getPitch()<P&&this.setPitch(P),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(P){if((P=P??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(P>=this.transform.minPitch)return this.transform.setMaxPitch(P),this._update(),this.getPitch()>P&&this.setPitch(P),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(P){return this.transform.setRenderWorldCopies(P),this._update()}setTransformConstrain(P){return this.transform.setConstrainOverride(P),this._update()}project(P){return this.transform.locationToScreenPoint(s.V.convert(P),this.style&&this.terrain)}unproject(P){return this.transform.screenPointToLocation(s.P.convert(P),this.terrain)}isMoving(){var P;return this._moving||((P=this.handlers)===null||P===void 0?void 0:P.isMoving())}isZooming(){var P;return this._zooming||((P=this.handlers)===null||P===void 0?void 0:P.isZooming())}isRotating(){var P;return this._rotating||((P=this.handlers)===null||P===void 0?void 0:P.isRotating())}_createDelegatedListener(P,c,g){if(P==="mouseenter"||P==="mouseover"){let b=!1;return{layers:c,listener:g,delegates:{mousemove:I=>{const z=c.filter((G=>this.getLayer(G))),V=z.length!==0?this.queryRenderedFeatures(I.point,{layers:z}):[];V.length?b||(b=!0,g.call(this,new rs(P,this,I.originalEvent,{features:V}))):b=!1},mouseout:()=>{b=!1}}}}if(P==="mouseleave"||P==="mouseout"){let b=!1;return{layers:c,listener:g,delegates:{mousemove:z=>{const V=c.filter((G=>this.getLayer(G)));(V.length!==0?this.queryRenderedFeatures(z.point,{layers:V}):[]).length?b=!0:b&&(b=!1,g.call(this,new rs(P,this,z.originalEvent)))},mouseout:z=>{b&&(b=!1,g.call(this,new rs(P,this,z.originalEvent)))}}}}{const b=C=>{const I=c.filter((V=>this.getLayer(V))),z=I.length!==0?this.queryRenderedFeatures(C.point,{layers:I}):[];z.length&&(C.features=z,g.call(this,C),delete C.features)};return{layers:c,listener:g,delegates:{[P]:b}}}}_saveDelegatedListener(P,c){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[P]=this._delegatedListeners[P]||[],this._delegatedListeners[P].push(c)}_removeDelegatedListener(P,c,g){if(!this._delegatedListeners||!this._delegatedListeners[P])return;const b=this._delegatedListeners[P];for(let C=0;C<b.length;C++){const I=b[C];if(I.listener===g&&I.layers.length===c.length&&I.layers.every((z=>c.includes(z)))){for(const z in I.delegates)this.off(z,I.delegates[z]);return void b.splice(C,1)}}}on(P,c,g){if(g===void 0)return super.on(P,c);const b=typeof c=="string"?[c]:c,C=this._createDelegatedListener(P,b,g);this._saveDelegatedListener(P,C);for(const I in C.delegates)this.on(I,C.delegates[I]);return{unsubscribe:()=>{this._removeDelegatedListener(P,b,g)}}}once(P,c,g){if(g===void 0)return super.once(P,c);const b=typeof c=="string"?[c]:c,C=this._createDelegatedListener(P,b,g);for(const I in C.delegates){const z=C.delegates[I];C.delegates[I]=(...V)=>{this._removeDelegatedListener(P,b,g),z(...V)}}this._saveDelegatedListener(P,C);for(const I in C.delegates)this.once(I,C.delegates[I]);return this}off(P,c,g){return g===void 0?super.off(P,c):(this._removeDelegatedListener(P,typeof c=="string"?[c]:c,g),this)}queryRenderedFeatures(P,c){if(!this.style)return[];let g;const b=P instanceof s.P||Array.isArray(P),C=b?P:[[0,0],[this.transform.width,this.transform.height]];if(c=c||(b?{}:P)||{},C instanceof s.P||typeof C[0]=="number")g=[s.P.convert(C)];else{const I=s.P.convert(C[0]),z=s.P.convert(C[1]);g=[I,new s.P(z.x,I.y),z,new s.P(I.x,z.y),I]}return this.style.queryRenderedFeatures(g,c,this.transform)}querySourceFeatures(P,c){return this.style.querySourceFeatures(P,c)}setStyle(P,c){return(c=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&P?(this._diffStyle(P,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._updateStyle(P,c))}setTransformRequest(P){return this._requestManager.setTransformRequest(P),this}_getUIString(P){const c=this._locale[P];if(c==null)throw new Error(`Missing UI string '${P}'`);return c}_updateStyle(P,c){var g,b;if(c.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(P,c)));const C=this.style&&c.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!P)),P?(this.style=new kh(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof P=="string"?this.style.loadURL(P,c,C):this.style.loadJSON(P,c,C),this):((b=(g=this.style)===null||g===void 0?void 0:g.projection)===null||b===void 0||b.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new kh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(P,c){if(typeof P=="string"){const g=this._requestManager.transformRequest(P,"Style");s.j(g,new AbortController).then((b=>{this._updateDiff(b.data,c)})).catch((b=>{b&&this.fire(new s.k(b))}))}else typeof P=="object"&&this._updateDiff(P,c)}_updateDiff(P,c){try{this.style.setState(P,c)&&this._update(!0)}catch(g){s.w(`Unable to perform style diff: ${g.message||g.error||g}.  Rebuilding the style from scratch.`),this._updateStyle(P,c)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(P,c){return this._lazyInitEmptyStyle(),this.style.addSource(P,c),this._update(!0)}isSourceLoaded(P){const c=this.style&&this.style.tileManagers[P];if(c!==void 0)return c.loaded();this.fire(new s.k(new Error(`There is no tile manager with ID '${P}'`)))}setTerrain(P){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),P){const c=this.style.tileManagers[P.source];if(!c)throw new Error(`cannot load terrain, because there exists no source with ID: ${P.source}`);this.terrain===null&&c.reload();for(const g in this.style._layers){const b=this.style._layers[g];b.type==="hillshade"&&b.source===P.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),b.type==="color-relief"&&b.source===P.source&&s.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new br(this.painter,c,P),this.painter.renderToTexture=new nc(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=g=>{var b;g.dataType==="style"?this.terrain.tileManager.freeRtt():g.dataType==="source"&&g.tile&&(g.sourceId!==P.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((b=g.source)===null||b===void 0?void 0:b.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(g.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:P})),this}getTerrain(){var P,c;return(c=(P=this.terrain)===null||P===void 0?void 0:P.options)!==null&&c!==void 0?c:null}areTilesLoaded(){const P=this.style&&this.style.tileManagers;for(const c of Object.values(P))if(!c.areTilesLoaded())return!1;return!0}removeSource(P){return this.style.removeSource(P),this._update(!0)}getSource(P){return this.style.getSource(P)}setSourceTileLodParams(P,c,g){if(g){const b=this.getSource(g);if(!b)throw new Error(`There is no source with ID "${g}", cannot set LOD parameters`);b.calculateTileZoom=Pn(Math.max(1,P),Math.max(1,c))}else for(const b in this.style.tileManagers)this.style.tileManagers[b].getSource().calculateTileZoom=Pn(Math.max(1,P),Math.max(1,c));return this._update(!0),this}refreshTiles(P,c){const g=this.style.tileManagers[P];if(!g)throw new Error(`There is no tile manager with ID "${P}", cannot refresh tile`);c===void 0?g.reload(!0):g.refreshTiles(c.map((b=>new s.ac(b.z,b.x,b.y))))}addImage(P,c,g={}){const{pixelRatio:b=1,sdf:C=!1,stretchX:I,stretchY:z,content:V,textFitWidth:G,textFitHeight:J}=g;if(this._lazyInitEmptyStyle(),!(c instanceof HTMLImageElement||s.b(c))){if(c.width===void 0||c.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ie,height:de,data:he}=c,ye=c;return this.style.addImage(P,{data:new s.R({width:ie,height:de},new Uint8Array(he)),pixelRatio:b,stretchX:I,stretchY:z,content:V,textFitWidth:G,textFitHeight:J,sdf:C,version:0,userImage:ye}),ye.onAdd&&ye.onAdd(this,P),this}}{const{width:ie,height:de,data:he}=O.getImageData(c);this.style.addImage(P,{data:new s.R({width:ie,height:de},he),pixelRatio:b,stretchX:I,stretchY:z,content:V,textFitWidth:G,textFitHeight:J,sdf:C,version:0})}}updateImage(P,c){const g=this.style.getImage(P);if(!g)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=c instanceof HTMLImageElement||s.b(c)?O.getImageData(c):c,{width:C,height:I,data:z}=b;if(C===void 0||I===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(C!==g.data.width||I!==g.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const V=!(c instanceof HTMLImageElement||s.b(c));return g.data.replace(z,V),this.style.updateImage(P,g),this}getImage(P){return this.style.getImage(P)}hasImage(P){return P?!!this.style.getImage(P):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(P){this.style.removeImage(P)}loadImage(P){return H.getImage(this._requestManager.transformRequest(P,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(P,c){return this._lazyInitEmptyStyle(),this.style.addLayer(P,c),this._update(!0)}moveLayer(P,c){return this.style.moveLayer(P,c),this._update(!0)}removeLayer(P){return this.style.removeLayer(P),this._update(!0)}getLayer(P){return this.style.getLayer(P)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(P,c,g){return this.style.setLayerZoomRange(P,c,g),this._update(!0)}setFilter(P,c,g={}){return this.style.setFilter(P,c,g),this._update(!0)}getFilter(P){return this.style.getFilter(P)}setPaintProperty(P,c,g,b={}){return this.style.setPaintProperty(P,c,g,b),this._update(!0)}getPaintProperty(P,c){return this.style.getPaintProperty(P,c)}setLayoutProperty(P,c,g,b={}){return this.style.setLayoutProperty(P,c,g,b),this._update(!0)}getLayoutProperty(P,c){return this.style.getLayoutProperty(P,c)}setGlyphs(P,c={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(P,c),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(P,c,g={}){return this._lazyInitEmptyStyle(),this.style.addSprite(P,c,g,(b=>{b||this._update(!0)})),this}removeSprite(P){return this._lazyInitEmptyStyle(),this.style.removeSprite(P),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(P,c={}){return this._lazyInitEmptyStyle(),this.style.setSprite(P,c,(g=>{g||this._update(!0)})),this}setLight(P,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(P,c),this._update(!0)}getLight(){return this.style.getLight()}setSky(P,c={}){return this._lazyInitEmptyStyle(),this.style.setSky(P,c),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(P,c){return this.style.setFeatureState(P,c),this._update()}removeFeatureState(P,c){return this.style.removeFeatureState(P,c),this._update()}getFeatureState(P){return this.style.getFeatureState(P)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let P=0,c=0;return this._container&&(P=this._container.clientWidth||400,c=this._container.clientHeight||300),[P,c]}_setupContainer(){const P=this._container;P.classList.add("maplibregl-map");const c=this._canvasContainer=M.create("div","maplibregl-canvas-container",P);this._interactive&&c.classList.add("maplibregl-interactive"),this._canvas=M.create("canvas","maplibregl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const g=this._containerDimensions(),b=this._getClampedPixelRatio(g[0],g[1]);this._resizeCanvas(g[0],g[1],b);const C=this._controlContainer=M.create("div","maplibregl-control-container",P),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((z=>{I[z]=M.create("div",`maplibregl-ctrl-${z} `,C)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(P,c,g){this._canvas.width=Math.floor(g*P),this._canvas.height=Math.floor(g*c),this._canvas.style.width=`${P}px`,this._canvas.style.height=`${c}px`}_setupPainter(){const P=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let c=null;this._canvas.addEventListener("webglcontextcreationerror",(b=>{c={requestedAttributes:P},b&&(c.statusMessage=b.statusMessage,c.type=b.type)}),{once:!0});let g=null;if(g=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,P):this._canvas.getContext("webgl2",P)||this._canvas.getContext("webgl",P),!g){const b="Failed to initialize WebGL";throw c?(c.message=b,new Error(JSON.stringify(c))):new Error(b)}this.painter=new bb(g,this.transform),L.testSupport(g)}migrateProjection(P,c){super.migrateProjection(P,c),this.painter.transform=P,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(P){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||P,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(P){return this._update(),this._renderTaskQueue.add(P)}_cancelRenderFrame(P){this._renderTaskQueue.remove(P)}_render(P){var c,g,b,C,I;const z=this._idleTriggered?this._fadeDuration:0,V=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(P),this._removed)return;let G=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const de=this.transform.zoom,he=A();this.style.zoomHistory.update(de,he);const ye=new s.H(de,{now:he,fadeDuration:z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Se=ye.crossFadingFactor();Se===1&&Se===this._crossFadingFactor||(G=!0,this._crossFadingFactor=Se),this.style.update(ye)}const J=((g=this.style.projection)===null||g===void 0?void 0:g.transitionState)>0!==V;(b=this.style.projection)===null||b===void 0||b.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((C=this.style.projection)===null||C===void 0?void 0:C.transitionState,(I=this.style.projection)===null||I===void 0?void 0:I.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||J)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,z,this._crossSourceCollisions,J),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:z,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cG.mark(s.cH.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||G)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const ie=this._sourcesDirty||this._styleDirty||this._placementDirty;return ie||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||ie||(this._fullyLoaded=!0,s.cG.mark(s.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var P;this._hash&&this._hash.remove();for(const g of this._controls)g.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(P=this._resizeObserver)===null||P===void 0||P.disconnect();const c=this.painter.context.gl.getExtension("WEBGL_lose_context");c?.loseContext&&c.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),M.remove(this._canvasContainer),M.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cG.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,O.frame(this._frameRequest,(P=>{s.cG.frame(P),this._frameRequest=null;try{this._render(P)}catch(c){if(!s.Z(c)&&!(function(g){return g.message===Lh})(c))throw c}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(P){this._showTileBoundaries!==P&&(this._showTileBoundaries=P,this._update())}get showPadding(){return!!this._showPadding}set showPadding(P){this._showPadding!==P&&(this._showPadding=P,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(P){this._showCollisionBoxes!==P&&(this._showCollisionBoxes=P,P?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(P){this._showOverdrawInspector!==P&&(this._showOverdrawInspector=P,this._update())}get repaint(){return!!this._repaint}set repaint(P){this._repaint!==P&&(this._repaint=P,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(P){this._vertices=P,this._update()}get version(){return Gd}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(P){return this._lazyInitEmptyStyle(),this.style.setProjection(P),this._update(!0)}},a.MapMouseEvent=rs,a.MapTouchEvent=Jl,a.MapWheelEvent=Uy,a.Marker=hg,a.NavigationControl=class{constructor(P){this._updateZoomButtons=()=>{const c=this._map.getZoom(),g=c===this._map.getMaxZoom(),b=c===this._map.getMinZoom();this._zoomInButton.disabled=g,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",g.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(c,g)=>{const b=this._map._getUIString(`NavigationControl.${g}`);c.title=b,c.setAttribute("aria-label",b)},this.options=s.e({},jv,P),this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(c=>c.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(c=>this._map.zoomIn({},{originalEvent:c}))),M.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(c=>this._map.zoomOut({},{originalEvent:c}))),M.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(c=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:c}):this._map.resetNorth({},{originalEvent:c})})),this._compassIcon=M.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(P){return this._map=P,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Li(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){M.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(P,c){const g=M.create("button",P,this._container);return g.type="button",g.addEventListener("click",c),g}},a.Popup=class extends s.E{constructor(P){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&M.remove(this._content),this._container&&(M.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=c=>{this._update(c.point)},this._onMouseMove=c=>{this._update(c.point)},this._onDrag=c=>{this._update(c.point)},this._update=c=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=M.create("div","maplibregl-popup",this._map.getContainer()),this._tip=M.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const z of this.options.className.split(" "))this._container.classList.add(z);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=mp(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!c)return;const g=this._flatPos=this._pos=this._trackPointer&&c?c:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&c?c:this._map.transform.locationToScreenPoint(this._lngLat));let b=this.options.anchor;const C=yp(this.options.offset);if(!b){const z=this._container.offsetWidth,V=this._container.offsetHeight;let G;G=g.y+C.bottom.y<V?["top"]:g.y>this._map.transform.height-V?["bottom"]:[],g.x<z/2?G.push("left"):g.x>this._map.transform.width-z/2&&G.push("right"),b=G.length===0?"bottom":G.join("-")}let I=g.add(C[b]);this.options.subpixelPositioning||(I=I.round()),M.setTransform(this._container,`${gp[b]} translate(${I.x}px,${I.y}px)`),ug(this._container,b,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Xd),P)}addTo(P){return this._map&&this.remove(),this._map=P,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(P){return this._lngLat=s.V.convert(P),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(P){return this.setDOMContent(document.createTextNode(P))}setHTML(P){const c=document.createDocumentFragment(),g=document.createElement("body");let b;for(g.innerHTML=P;b=g.firstChild,b;)c.appendChild(b);return this.setDOMContent(c)}getMaxWidth(){var P;return(P=this._container)===null||P===void 0?void 0:P.style.maxWidth}setMaxWidth(P){return this.options.maxWidth=P,this._update(),this}setDOMContent(P){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=M.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(P),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(P){return this._container&&this._container.classList.add(P),this}removeClassName(P){return this._container&&this._container.classList.remove(P),this}setOffset(P){return this.options.offset=P,this._update(),this}toggleClassName(P){if(this._container)return this._container.classList.toggle(P)}setSubpixelPositioning(P){this.options.subpixelPositioning=P}_createCloseButton(){this.options.closeButton&&(this._closeButton=M.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const P=this._container.querySelector(Yd);P&&P.focus()}},a.RasterDEMTileSource=je,a.RasterTileSource=Gn,a.ScaleControl=class{constructor(P){this._onMove=()=>{qi(this._map,this._container,this.options)},this.setUnit=c=>{this.options.unit=c,qi(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ps),P)}getDefaultPosition(){return"bottom-left"}onAdd(P){return this._map=P,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-scale",P.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){M.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=sg,a.Style=kh,a.TerrainControl=class{constructor(P){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=P}onAdd(P){return this._map=P,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=M.create("button","maplibregl-ctrl-terrain",this._container),M.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){M.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=Ru,a.TwoFingersTouchRotateHandler=og,a.TwoFingersTouchZoomHandler=qc,a.TwoFingersTouchZoomRotateHandler=Wd,a.VectorTileSource=jn,a.VideoSource=Oe,a.addSourceType=(P,c)=>s._(void 0,void 0,void 0,(function*(){if(_e(P))throw new Error(`A source type called "${P}" already exists.`);((g,b)=>{K[g]=b})(P,c)})),a.clearPrewarmedResources=function(){const P=ot;P&&(P.isPreloaded()&&P.numActive()===1?(P.release(ft),ot=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.createTileMesh=lb,a.getMaxParallelImageRequests=function(){return s.c.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return tt().getRTLTextPluginStatus()},a.getVersion=function(){return ic},a.getWorkerCount=function(){return pt.workerCount},a.getWorkerUrl=function(){return s.c.WORKER_URL},a.importScriptInWorkers=function(P){return Ht().broadcast("IS",P)},a.isTimeFrozen=function(){return E.isFrozen()},a.now=A,a.prewarm=function(){Et().acquire(ft)},a.restoreNow=function(){E.restoreNow()},a.setMaxParallelImageRequests=function(P){s.c.MAX_PARALLEL_IMAGE_REQUESTS=P},a.setNow=function(P){E.setNow(P)},a.setRTLTextPlugin=function(P,c){return tt().setRTLTextPlugin(P,c)},a.setWorkerCount=function(P){pt.workerCount=P},a.setWorkerUrl=function(P){s.c.WORKER_URL=P}}));var o=n;return o}))})(jP)),jP.exports}var yY=Spe();const vY=lv(yY),Cpe=XX({__proto__:null,default:vY},[yY]),tT={black:"#000",white:"#fff"},C1={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},T1={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},k1={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},E1={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},A1={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},P2={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Tpe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Jg(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}const mk="$$material";function Io(){return Io=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Io.apply(null,arguments)}function kpe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Epe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Ape=(function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Epe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=kpe(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t})(),$l="-ms-",C5="-moz-",Pi="-webkit-",xY="comm",$N="rule",zN="decl",Ppe="@import",_Y="@keyframes",Mpe="@layer",Rpe=Math.abs,vR=String.fromCharCode,Ipe=Object.assign;function Dpe(t,e){return ll(t,0)^45?(((e<<2^ll(t,0))<<2^ll(t,1))<<2^ll(t,2))<<2^ll(t,3):0}function bY(t){return t.trim()}function Lpe(t,e){return(t=e.exec(t))?t[0]:t}function Mi(t,e,n){return t.replace(e,n)}function G$(t,e){return t.indexOf(e)}function ll(t,e){return t.charCodeAt(e)|0}function nT(t,e,n){return t.slice(e,n)}function Zp(t){return t.length}function NN(t){return t.length}function xA(t,e){return e.push(t),t}function $pe(t,e){return t.map(e).join("")}var xR=1,Qw=1,wY=0,yu=0,Ys=0,BO="";function _R(t,e,n,r,i,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:xR,column:Qw,length:a,return:""}}function M2(t,e){return Ipe(_R("",null,null,"",null,null,0),t,{length:-t.length},e)}function zpe(){return Ys}function Npe(){return Ys=yu>0?ll(BO,--yu):0,Qw--,Ys===10&&(Qw=1,xR--),Ys}function uh(){return Ys=yu<wY?ll(BO,yu++):0,Qw++,Ys===10&&(Qw=1,xR++),Ys}function lm(){return ll(BO,yu)}function VP(){return yu}function gk(t,e){return nT(BO,t,e)}function rT(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function OY(t){return xR=Qw=1,wY=Zp(BO=t),yu=0,[]}function SY(t){return BO="",t}function QP(t){return bY(gk(yu-1,X$(t===91?t+2:t===40?t+1:t)))}function Bpe(t){for(;(Ys=lm())&&Ys<33;)uh();return rT(t)>2||rT(Ys)>3?"":" "}function Fpe(t,e){for(;--e&&uh()&&!(Ys<48||Ys>102||Ys>57&&Ys<65||Ys>70&&Ys<97););return gk(t,VP()+(e<6&&lm()==32&&uh()==32))}function X$(t){for(;uh();)switch(Ys){case t:return yu;case 34:case 39:t!==34&&t!==39&&X$(Ys);break;case 40:t===41&&X$(t);break;case 92:uh();break}return yu}function jpe(t,e){for(;uh()&&t+Ys!==57;)if(t+Ys===84&&lm()===47)break;return"/*"+gk(e,yu-1)+"*"+vR(t===47?t:uh())}function Vpe(t){for(;!rT(lm());)uh();return gk(t,yu)}function Qpe(t){return SY(UP("",null,null,null,[""],t=OY(t),0,[0],t))}function UP(t,e,n,r,i,o,a,s,u){for(var d=0,m=0,v=a,_=0,O=0,E=0,A=1,M=1,L=1,$=0,N="",F=i,Q=o,W=r,H=N;M;)switch(E=$,$=uh()){case 40:if(E!=108&&ll(H,v-1)==58){G$(H+=Mi(QP($),"&","&\f"),"&\f")!=-1&&(L=-1);break}case 34:case 39:case 91:H+=QP($);break;case 9:case 10:case 13:case 32:H+=Bpe(E);break;case 92:H+=Fpe(VP()-1,7);continue;case 47:switch(lm()){case 42:case 47:xA(Upe(jpe(uh(),VP()),e,n),u);break;default:H+="/"}break;case 123*A:s[d++]=Zp(H)*L;case 125*A:case 59:case 0:switch($){case 0:case 125:M=0;case 59+m:L==-1&&(H=Mi(H,/\f/g,"")),O>0&&Zp(H)-v&&xA(O>32?ej(H+";",r,n,v-1):ej(Mi(H," ","")+";",r,n,v-2),u);break;case 59:H+=";";default:if(xA(W=J7(H,e,n,d,m,i,s,N,F=[],Q=[],v),o),$===123)if(m===0)UP(H,e,W,W,F,o,v,s,Q);else switch(_===99&&ll(H,3)===110?100:_){case 100:case 108:case 109:case 115:UP(t,W,W,r&&xA(J7(t,W,W,0,0,i,s,N,i,F=[],v),Q),i,Q,v,s,r?F:Q);break;default:UP(H,W,W,W,[""],Q,0,s,Q)}}d=m=O=0,A=L=1,N=H="",v=a;break;case 58:v=1+Zp(H),O=E;default:if(A<1){if($==123)--A;else if($==125&&A++==0&&Npe()==125)continue}switch(H+=vR($),$*A){case 38:L=m>0?1:(H+="\f",-1);break;case 44:s[d++]=(Zp(H)-1)*L,L=1;break;case 64:lm()===45&&(H+=QP(uh())),_=lm(),m=v=Zp(N=H+=Vpe(VP())),$++;break;case 45:E===45&&Zp(H)==2&&(A=0)}}return o}function J7(t,e,n,r,i,o,a,s,u,d,m){for(var v=i-1,_=i===0?o:[""],O=NN(_),E=0,A=0,M=0;E<r;++E)for(var L=0,$=nT(t,v+1,v=Rpe(A=a[E])),N=t;L<O;++L)(N=bY(A>0?_[L]+" "+$:Mi($,/&\f/g,_[L])))&&(u[M++]=N);return _R(t,e,n,i===0?$N:s,u,d,m)}function Upe(t,e,n){return _R(t,e,n,xY,vR(zpe()),nT(t,2,-2),0)}function ej(t,e,n,r){return _R(t,e,n,zN,nT(t,0,r),nT(t,r+1,-1),r)}function xw(t,e){for(var n="",r=NN(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function Zpe(t,e,n,r){switch(t.type){case Mpe:if(t.children.length)break;case Ppe:case zN:return t.return=t.return||t.value;case xY:return"";case _Y:return t.return=t.value+"{"+xw(t.children,r)+"}";case $N:t.value=t.props.join(",")}return Zp(n=xw(t.children,r))?t.return=t.value+"{"+n+"}":""}function qpe(t){var e=NN(t);return function(n,r,i,o){for(var a="",s=0;s<e;s++)a+=t[s](n,r,i,o)||"";return a}}function Wpe(t){return function(e){e.root||(e=e.return)&&t(e)}}function CY(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var Hpe=function(e,n,r){for(var i=0,o=0;i=o,o=lm(),i===38&&o===12&&(n[r]=1),!rT(o);)uh();return gk(e,yu)},Gpe=function(e,n){var r=-1,i=44;do switch(rT(i)){case 0:i===38&&lm()===12&&(n[r]=1),e[r]+=Hpe(yu-1,n,r);break;case 2:e[r]+=QP(i);break;case 4:if(i===44){e[++r]=lm()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=vR(i)}while(i=uh());return e},Xpe=function(e,n){return SY(Gpe(OY(e),n))},tj=new WeakMap,Ype=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!tj.get(r))&&!i){tj.set(e,!0);for(var o=[],a=Xpe(n,o),s=r.props,u=0,d=0;u<a.length;u++)for(var m=0;m<s.length;m++,d++)e.props[d]=o[u]?a[u].replace(/&\f/g,s[m]):s[m]+" "+a[u]}}},Kpe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function TY(t,e){switch(Dpe(t,e)){case 5103:return Pi+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Pi+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Pi+t+C5+t+$l+t+t;case 6828:case 4268:return Pi+t+$l+t+t;case 6165:return Pi+t+$l+"flex-"+t+t;case 5187:return Pi+t+Mi(t,/(\w+).+(:[^]+)/,Pi+"box-$1$2"+$l+"flex-$1$2")+t;case 5443:return Pi+t+$l+"flex-item-"+Mi(t,/flex-|-self/,"")+t;case 4675:return Pi+t+$l+"flex-line-pack"+Mi(t,/align-content|flex-|-self/,"")+t;case 5548:return Pi+t+$l+Mi(t,"shrink","negative")+t;case 5292:return Pi+t+$l+Mi(t,"basis","preferred-size")+t;case 6060:return Pi+"box-"+Mi(t,"-grow","")+Pi+t+$l+Mi(t,"grow","positive")+t;case 4554:return Pi+Mi(t,/([^-])(transform)/g,"$1"+Pi+"$2")+t;case 6187:return Mi(Mi(Mi(t,/(zoom-|grab)/,Pi+"$1"),/(image-set)/,Pi+"$1"),t,"")+t;case 5495:case 3959:return Mi(t,/(image-set\([^]*)/,Pi+"$1$`$1");case 4968:return Mi(Mi(t,/(.+:)(flex-)?(.*)/,Pi+"box-pack:$3"+$l+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Pi+t+t;case 4095:case 3583:case 4068:case 2532:return Mi(t,/(.+)-inline(.+)/,Pi+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Zp(t)-1-e>6)switch(ll(t,e+1)){case 109:if(ll(t,e+4)!==45)break;case 102:return Mi(t,/(.+:)(.+)-([^]+)/,"$1"+Pi+"$2-$3$1"+C5+(ll(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~G$(t,"stretch")?TY(Mi(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(ll(t,e+1)!==115)break;case 6444:switch(ll(t,Zp(t)-3-(~G$(t,"!important")&&10))){case 107:return Mi(t,":",":"+Pi)+t;case 101:return Mi(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Pi+(ll(t,14)===45?"inline-":"")+"box$3$1"+Pi+"$2$3$1"+$l+"$2box$3")+t}break;case 5936:switch(ll(t,e+11)){case 114:return Pi+t+$l+Mi(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Pi+t+$l+Mi(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Pi+t+$l+Mi(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Pi+t+$l+t+t}return t}var Jpe=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case zN:e.return=TY(e.value,e.length);break;case _Y:return xw([M2(e,{value:Mi(e.value,"@","@"+Pi)})],i);case $N:if(e.length)return $pe(e.props,function(o){switch(Lpe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return xw([M2(e,{props:[Mi(o,/:(read-\w+)/,":"+C5+"$1")]})],i);case"::placeholder":return xw([M2(e,{props:[Mi(o,/:(plac\w+)/,":"+Pi+"input-$1")]}),M2(e,{props:[Mi(o,/:(plac\w+)/,":"+C5+"$1")]}),M2(e,{props:[Mi(o,/:(plac\w+)/,$l+"input-$1")]})],i)}return""})}},eme=[Jpe],tme=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(A){var M=A.getAttribute("data-emotion");M.indexOf(" ")!==-1&&(document.head.appendChild(A),A.setAttribute("data-s",""))})}var i=e.stylisPlugins||eme,o={},a,s=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(A){for(var M=A.getAttribute("data-emotion").split(" "),L=1;L<M.length;L++)o[M[L]]=!0;s.push(A)});var u,d=[Ype,Kpe];{var m,v=[Zpe,Wpe(function(A){m.insert(A)})],_=qpe(d.concat(i,v)),O=function(M){return xw(Qpe(M),_)};u=function(M,L,$,N){m=$,O(M?M+"{"+L.styles+"}":L.styles),N&&(E.inserted[L.name]=!0)}}var E={key:n,sheet:new Ape({key:n,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:u};return E.sheet.hydrate(s),E},XD={exports:{}},Ni={};var nj;function nme(){if(nj)return Ni;nj=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,a=t?Symbol.for("react.provider"):60109,s=t?Symbol.for("react.context"):60110,u=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,m=t?Symbol.for("react.forward_ref"):60112,v=t?Symbol.for("react.suspense"):60113,_=t?Symbol.for("react.suspense_list"):60120,O=t?Symbol.for("react.memo"):60115,E=t?Symbol.for("react.lazy"):60116,A=t?Symbol.for("react.block"):60121,M=t?Symbol.for("react.fundamental"):60117,L=t?Symbol.for("react.responder"):60118,$=t?Symbol.for("react.scope"):60119;function N(Q){if(typeof Q=="object"&&Q!==null){var W=Q.$$typeof;switch(W){case e:switch(Q=Q.type,Q){case u:case d:case r:case o:case i:case v:return Q;default:switch(Q=Q&&Q.$$typeof,Q){case s:case m:case E:case O:case a:return Q;default:return W}}case n:return W}}}function F(Q){return N(Q)===d}return Ni.AsyncMode=u,Ni.ConcurrentMode=d,Ni.ContextConsumer=s,Ni.ContextProvider=a,Ni.Element=e,Ni.ForwardRef=m,Ni.Fragment=r,Ni.Lazy=E,Ni.Memo=O,Ni.Portal=n,Ni.Profiler=o,Ni.StrictMode=i,Ni.Suspense=v,Ni.isAsyncMode=function(Q){return F(Q)||N(Q)===u},Ni.isConcurrentMode=F,Ni.isContextConsumer=function(Q){return N(Q)===s},Ni.isContextProvider=function(Q){return N(Q)===a},Ni.isElement=function(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===e},Ni.isForwardRef=function(Q){return N(Q)===m},Ni.isFragment=function(Q){return N(Q)===r},Ni.isLazy=function(Q){return N(Q)===E},Ni.isMemo=function(Q){return N(Q)===O},Ni.isPortal=function(Q){return N(Q)===n},Ni.isProfiler=function(Q){return N(Q)===o},Ni.isStrictMode=function(Q){return N(Q)===i},Ni.isSuspense=function(Q){return N(Q)===v},Ni.isValidElementType=function(Q){return typeof Q=="string"||typeof Q=="function"||Q===r||Q===d||Q===o||Q===i||Q===v||Q===_||typeof Q=="object"&&Q!==null&&(Q.$$typeof===E||Q.$$typeof===O||Q.$$typeof===a||Q.$$typeof===s||Q.$$typeof===m||Q.$$typeof===M||Q.$$typeof===L||Q.$$typeof===$||Q.$$typeof===A)},Ni.typeOf=N,Ni}var rj;function rme(){return rj||(rj=1,XD.exports=nme()),XD.exports}var YD,ij;function ime(){if(ij)return YD;ij=1;var t=rme(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[t.ForwardRef]=r,o[t.Memo]=i;function a(E){return t.isMemo(E)?i:o[E.$$typeof]||e}var s=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,_=Object.prototype;function O(E,A,M){if(typeof A!="string"){if(_){var L=v(A);L&&L!==_&&O(E,L,M)}var $=u(A);d&&($=$.concat(d(A)));for(var N=a(E),F=a(A),Q=0;Q<$.length;++Q){var W=$[Q];if(!n[W]&&!(M&&M[W])&&!(F&&F[W])&&!(N&&N[W])){var H=m(A,W);try{s(E,W,H)}catch{}}}}return E}return YD=O,YD}ime();var ome=!0;function kY(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var BN=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||ome===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},FN=function(e,n,r){BN(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function sme(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var ame={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},lme=/[A-Z]|^ms/g,cme=/_EMO_([^_]+?)_([^]*?)_EMO_/g,EY=function(e){return e.charCodeAt(1)===45},oj=function(e){return e!=null&&typeof e!="boolean"},KD=CY(function(t){return EY(t)?t:t.replace(lme,"-$&").toLowerCase()}),sj=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(cme,function(r,i,o){return qp={name:i,styles:o,next:qp},i})}return ame[e]!==1&&!EY(e)&&typeof n=="number"&&n!==0?n+"px":n};function iT(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return qp={name:i.name,styles:i.styles,next:qp},i.name;var o=n;if(o.styles!==void 0){var a=o.next;if(a!==void 0)for(;a!==void 0;)qp={name:a.name,styles:a.styles,next:qp},a=a.next;var s=o.styles+";";return s}return ume(t,e,n)}case"function":{if(t!==void 0){var u=qp,d=n(t);return qp=u,iT(t,e,d)}break}}var m=n;if(e==null)return m;var v=e[m];return v!==void 0?v:m}function ume(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=iT(t,e,n[i])+";";else for(var o in n){var a=n[o];if(typeof a!="object"){var s=a;e!=null&&e[s]!==void 0?r+=o+"{"+e[s]+"}":oj(s)&&(r+=KD(o)+":"+sj(o,s)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var u=0;u<a.length;u++)oj(a[u])&&(r+=KD(o)+":"+sj(o,a[u])+";");else{var d=iT(t,e,a);switch(o){case"animation":case"animationName":{r+=KD(o)+":"+d+";";break}default:r+=o+"{"+d+"}"}}}return r}var aj=/label:\s*([^\s;{]+)\s*(;|$)/g,qp;function yk(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";qp=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=iT(n,e,o);else{var a=o;i+=a[0]}for(var s=1;s<t.length;s++)if(i+=iT(n,e,t[s]),r){var u=o;i+=u[s]}aj.lastIndex=0;for(var d="",m;(m=aj.exec(i))!==null;)d+="-"+m[1];var v=sme(i)+d;return{name:v,styles:i,next:qp}}var hme=function(e){return e()},AY=Vw.useInsertionEffect?Vw.useInsertionEffect:!1,PY=AY||hme,lj=AY||j.useLayoutEffect,MY=j.createContext(typeof HTMLElement<"u"?tme({key:"css"}):null);MY.Provider;var jN=function(e){return j.forwardRef(function(n,r){var i=j.useContext(MY);return e(n,i,r)})},bR=j.createContext({}),VN={}.hasOwnProperty,Y$="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",dme=function(e,n){var r={};for(var i in n)VN.call(n,i)&&(r[i]=n[i]);return r[Y$]=e,r},fme=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return BN(n,r,i),PY(function(){return FN(n,r,i)}),null},pme=jN(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[Y$],o=[r],a="";typeof t.className=="string"?a=kY(e.registered,o,t.className):t.className!=null&&(a=t.className+" ");var s=yk(o,void 0,j.useContext(bR));a+=e.key+"-"+s.name;var u={};for(var d in t)VN.call(t,d)&&d!=="css"&&d!==Y$&&(u[d]=t[d]);return u.className=a,n&&(u.ref=n),j.createElement(j.Fragment,null,j.createElement(fme,{cache:e,serialized:s,isStringTag:typeof i=="string"}),j.createElement(i,u))}),mme=pme,cj=function(e,n){var r=arguments;if(n==null||!VN.call(n,"css"))return j.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=mme,o[1]=dme(e,n);for(var a=2;a<i;a++)o[a]=r[a];return j.createElement.apply(null,o)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(cj||(cj={}));var gme=jN(function(t,e){var n=t.styles,r=yk([n],void 0,j.useContext(bR)),i=j.useRef();return lj(function(){var o=e.key+"-global",a=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),s=!1,u=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),u!==null&&(s=!0,u.setAttribute("data-emotion",o),a.hydrate([u])),i.current=[a,s],function(){a.flush()}},[e]),lj(function(){var o=i.current,a=o[0],s=o[1];if(s){o[1]=!1;return}if(r.next!==void 0&&FN(e,r.next,!0),a.tags.length){var u=a.tags[a.tags.length-1].nextElementSibling;a.before=u,a.flush()}e.insert("",r,a,!1)},[e,r.name]),null});function QN(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return yk(e)}function vk(){var t=QN.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var yme=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,vme=CY(function(t){return yme.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),xme=vme,_me=function(e){return e!=="theme"},uj=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?xme:_me},hj=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(a){return e.__emotion_forwardProp(a)&&o(a)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},bme=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return BN(n,r,i),PY(function(){return FN(n,r,i)}),null},wme=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,a;n!==void 0&&(o=n.label,a=n.target);var s=hj(e,n,r),u=s||uj(i),d=!u("as");return function(){var m=arguments,v=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&v.push("label:"+o+";"),m[0]==null||m[0].raw===void 0)v.push.apply(v,m);else{var _=m[0];v.push(_[0]);for(var O=m.length,E=1;E<O;E++)v.push(m[E],_[E])}var A=jN(function(M,L,$){var N=d&&M.as||i,F="",Q=[],W=M;if(M.theme==null){W={};for(var H in M)W[H]=M[H];W.theme=j.useContext(bR)}typeof M.className=="string"?F=kY(L.registered,Q,M.className):M.className!=null&&(F=M.className+" ");var te=yk(v.concat(Q),L.registered,W);F+=L.key+"-"+te.name,a!==void 0&&(F+=" "+a);var ne=d&&s===void 0?uj(N):u,ce={};for(var we in M)d&&we==="as"||ne(we)&&(ce[we]=M[we]);return ce.className=F,$&&(ce.ref=$),j.createElement(j.Fragment,null,j.createElement(bme,{cache:L,serialized:te,isStringTag:typeof N=="string"}),j.createElement(N,ce))});return A.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",A.defaultProps=e.defaultProps,A.__emotion_real=A,A.__emotion_base=i,A.__emotion_styles=v,A.__emotion_forwardProp=s,Object.defineProperty(A,"toString",{value:function(){return"."+a}}),A.withComponent=function(M,L){var $=t(M,Io({},n,L,{shouldForwardProp:hj(A,L,!0)}));return $.apply(void 0,v)},A}},Ome=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],K$=wme.bind(null);Ome.forEach(function(t){K$[t]=K$(t)});var JD={exports:{}},e3,dj;function Sme(){if(dj)return e3;dj=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return e3=t,e3}var t3,fj;function Cme(){if(fj)return t3;fj=1;var t=Sme();function e(){}function n(){}return n.resetWarningCache=e,t3=function(){function r(a,s,u,d,m,v){if(v!==t){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},t3}var pj;function Tme(){return pj||(pj=1,JD.exports=Cme()()),JD.exports}var kme=Tme();const bn=lv(kme);function Eme(t){return t==null||Object.keys(t).length===0}function Ame(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(Eme(i)?n:i):e;return q.jsx(gme,{styles:r})}function RY(t,e){return K$(t,e)}function Pme(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const mj=[];function j0(t){return mj[0]=t,yk(mj)}var n3={exports:{}},ro={};var gj;function Mme(){if(gj)return ro;gj=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.view_transition"),O=Symbol.for("react.client.reference");function E(A){if(typeof A=="object"&&A!==null){var M=A.$$typeof;switch(M){case t:switch(A=A.type,A){case n:case i:case r:case u:case d:case _:return A;default:switch(A=A&&A.$$typeof,A){case a:case s:case v:case m:return A;case o:return A;default:return M}}case e:return M}}}return ro.ContextConsumer=o,ro.ContextProvider=a,ro.Element=t,ro.ForwardRef=s,ro.Fragment=n,ro.Lazy=v,ro.Memo=m,ro.Portal=e,ro.Profiler=i,ro.StrictMode=r,ro.Suspense=u,ro.SuspenseList=d,ro.isContextConsumer=function(A){return E(A)===o},ro.isContextProvider=function(A){return E(A)===a},ro.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===t},ro.isForwardRef=function(A){return E(A)===s},ro.isFragment=function(A){return E(A)===n},ro.isLazy=function(A){return E(A)===v},ro.isMemo=function(A){return E(A)===m},ro.isPortal=function(A){return E(A)===e},ro.isProfiler=function(A){return E(A)===i},ro.isStrictMode=function(A){return E(A)===r},ro.isSuspense=function(A){return E(A)===u},ro.isSuspenseList=function(A){return E(A)===d},ro.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===u||A===d||typeof A=="object"&&A!==null&&(A.$$typeof===v||A.$$typeof===m||A.$$typeof===a||A.$$typeof===o||A.$$typeof===s||A.$$typeof===O||A.getModuleId!==void 0)},ro.typeOf=E,ro}var yj;function Rme(){return yj||(yj=1,n3.exports=Mme()),n3.exports}var IY=Rme();function Gp(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function DY(t){if(j.isValidElement(t)||IY.isValidElementType(t)||!Gp(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=DY(t[n])}),e}function Fa(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return Gp(t)&&Gp(e)&&Object.keys(e).forEach(i=>{j.isValidElement(e[i])||IY.isValidElementType(e[i])?r[i]=e[i]:Gp(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&Gp(t[i])?r[i]=Fa(t[i],e[i],n):n.clone?r[i]=Gp(e[i])?DY(e[i]):e[i]:r[i]=e[i]}),r}const Ime=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function Dme(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,o=Ime(e),a=Object.keys(o);function s(_){return`@media (min-width:${typeof e[_]=="number"?e[_]:_}${n})`}function u(_){return`@media (max-width:${(typeof e[_]=="number"?e[_]:_)-r/100}${n})`}function d(_,O){const E=a.indexOf(O);return`@media (min-width:${typeof e[_]=="number"?e[_]:_}${n}) and (max-width:${(E!==-1&&typeof e[a[E]]=="number"?e[a[E]]:O)-r/100}${n})`}function m(_){return a.indexOf(_)+1<a.length?d(_,a[a.indexOf(_)+1]):s(_)}function v(_){const O=a.indexOf(_);return O===0?s(a[1]):O===a.length-1?u(a[O]):d(_,a[a.indexOf(_)+1]).replace("@media","@media not all and")}return{keys:a,values:o,up:s,down:u,between:d,only:m,not:v,unit:n,...i}}function vj(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{const o=/min-width:\s*([0-9.]+)/;return+(r.match(o)?.[1]||0)-+(i.match(o)?.[1]||0)});return n.length?n.reduce((r,i)=>{const o=e[i];return delete r[i],r[i]=o,r},{...e}):e}function Lme(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function $me(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(o)}function zme(t){const e=(o,a)=>o.replace("@media",a?`@container ${a}`:"@container");function n(o,a){o.up=(...s)=>e(t.breakpoints.up(...s),a),o.down=(...s)=>e(t.breakpoints.down(...s),a),o.between=(...s)=>e(t.breakpoints.between(...s),a),o.only=(...s)=>e(t.breakpoints.only(...s),a),o.not=(...s)=>{const u=e(t.breakpoints.not(...s),a);return u.includes("not all and")?u.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):u}}const r={},i=o=>(n(r,o),r);return n(i),{...t,containerQueries:i}}const Nme={borderRadius:4};function TC(t,e){return e?Fa(t,e,{clone:!1}):t}const wR={xs:0,sm:600,md:900,lg:1200,xl:1536},xj={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${wR[t]}px)`},Bme={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:wR[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Rf(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||xj;return e.reduce((a,s,u)=>(a[o.up(o.keys[u])]=n(e[u]),a),{})}if(typeof e=="object"){const o=r.breakpoints||xj;return Object.keys(e).reduce((a,s)=>{if(Lme(o.keys,s)){const u=$me(r.containerQueries?r:Bme,s);u&&(a[u]=n(e[s],s))}else if(Object.keys(o.values||wR).includes(s)){const u=o.up(s);a[u]=n(e[s],s)}else{const u=s;a[u]=e[u]}return a},{})}return n(e)}function LY(t={}){return t.keys?.reduce((n,r)=>{const i=t.up(r);return n[i]={},n},{})||{}}function J$(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function Fme(t,...e){const n=LY(t),r=[n,...e].reduce((i,o)=>Fa(i,o),{});return J$(Object.keys(n),r)}function jme(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,o)=>{o<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function r3({values:t,breakpoints:e,base:n}){const r=n||jme(t,e),i=Object.keys(r);if(i.length===0)return t;let o;return i.reduce((a,s,u)=>(Array.isArray(t)?(a[s]=t[u]!=null?t[u]:t[o],o=u):typeof t=="object"?(a[s]=t[s]!=null?t[s]:t[o],o=s):a[s]=t,a),{})}function Nt(t){if(typeof t!="string")throw new Error(Jg(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Wp(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function T5(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Wp(t,n)||r,e&&(i=e(i,r,t)),i}function Ns(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=a=>{if(a[e]==null)return null;const s=a[e],u=a.theme,d=Wp(u,r)||{};return Rf(a,s,v=>{let _=T5(d,i,v);return v===_&&typeof v=="string"&&(_=T5(d,i,`${e}${v==="default"?"":Nt(v)}`,v)),n===!1?_:{[n]:_}})};return o.propTypes={},o.filterProps=[e],o}function Vme(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const Qme={m:"margin",p:"padding"},Ume={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},_j={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Zme=Vme(t=>{if(t.length>2)if(_j[t])t=_j[t];else return[t];const[e,n]=t.split(""),r=Qme[e],i=Ume[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),UN=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],ZN=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...UN,...ZN];function xk(t,e,n,r){const i=Wp(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?i.startsWith("var(")&&o===0?0:i.startsWith("var(")&&o===1?i:`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const a=Math.abs(o),s=i[a];return o>=0?s:typeof s=="number"?-s:typeof s=="string"&&s.startsWith("var(")?`calc(-1 * ${s})`:`-${s}`}:typeof i=="function"?i:()=>{}}function OR(t){return xk(t,"spacing",8)}function b_(t,e){return typeof e=="string"||e==null?e:t(e)}function qme(t,e){return n=>t.reduce((r,i)=>(r[i]=b_(e,n),r),{})}function Wme(t,e,n,r){if(!e.includes(n))return null;const i=Zme(n),o=qme(i,r),a=t[n];return Rf(t,a,o)}function $Y(t,e){const n=OR(t.theme);return Object.keys(t).map(r=>Wme(t,e,r,n)).reduce(TC,{})}function Ss(t){return $Y(t,UN)}Ss.propTypes={};Ss.filterProps=UN;function Cs(t){return $Y(t,ZN)}Cs.propTypes={};Cs.filterProps=ZN;function zY(t=8,e=OR({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(o=>{const a=e(o);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}function SR(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>e[o]?TC(i,e[o](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Yh(t){return typeof t!="number"?t:`${t}px solid`}function _d(t,e){return Ns({prop:t,themeKey:"borders",transform:e})}const Hme=_d("border",Yh),Gme=_d("borderTop",Yh),Xme=_d("borderRight",Yh),Yme=_d("borderBottom",Yh),Kme=_d("borderLeft",Yh),Jme=_d("borderColor"),ege=_d("borderTopColor"),tge=_d("borderRightColor"),nge=_d("borderBottomColor"),rge=_d("borderLeftColor"),ige=_d("outline",Yh),oge=_d("outlineColor"),CR=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=xk(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:b_(e,r)});return Rf(t,t.borderRadius,n)}return null};CR.propTypes={};CR.filterProps=["borderRadius"];SR(Hme,Gme,Xme,Yme,Kme,Jme,ege,tge,nge,rge,CR,ige,oge);const TR=t=>{if(t.gap!==void 0&&t.gap!==null){const e=xk(t.theme,"spacing",8),n=r=>({gap:b_(e,r)});return Rf(t,t.gap,n)}return null};TR.propTypes={};TR.filterProps=["gap"];const kR=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=xk(t.theme,"spacing",8),n=r=>({columnGap:b_(e,r)});return Rf(t,t.columnGap,n)}return null};kR.propTypes={};kR.filterProps=["columnGap"];const ER=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=xk(t.theme,"spacing",8),n=r=>({rowGap:b_(e,r)});return Rf(t,t.rowGap,n)}return null};ER.propTypes={};ER.filterProps=["rowGap"];const sge=Ns({prop:"gridColumn"}),age=Ns({prop:"gridRow"}),lge=Ns({prop:"gridAutoFlow"}),cge=Ns({prop:"gridAutoColumns"}),uge=Ns({prop:"gridAutoRows"}),hge=Ns({prop:"gridTemplateColumns"}),dge=Ns({prop:"gridTemplateRows"}),fge=Ns({prop:"gridTemplateAreas"}),pge=Ns({prop:"gridArea"});SR(TR,kR,ER,sge,age,lge,cge,uge,hge,dge,fge,pge);function _w(t,e){return e==="grey"?e:t}const mge=Ns({prop:"color",themeKey:"palette",transform:_w}),gge=Ns({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:_w}),yge=Ns({prop:"backgroundColor",themeKey:"palette",transform:_w});SR(mge,gge,yge);function rh(t){return t<=1&&t!==0?`${t*100}%`:t}const vge=Ns({prop:"width",transform:rh}),qN=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{const r=t.theme?.breakpoints?.values?.[n]||wR[n];return r?t.theme?.breakpoints?.unit!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:rh(n)}};return Rf(t,t.maxWidth,e)}return null};qN.filterProps=["maxWidth"];const xge=Ns({prop:"minWidth",transform:rh}),_ge=Ns({prop:"height",transform:rh}),bge=Ns({prop:"maxHeight",transform:rh}),wge=Ns({prop:"minHeight",transform:rh});Ns({prop:"size",cssProperty:"width",transform:rh});Ns({prop:"size",cssProperty:"height",transform:rh});const Oge=Ns({prop:"boxSizing"});SR(vge,qN,xge,_ge,bge,wge,Oge);const _k={border:{themeKey:"borders",transform:Yh},borderTop:{themeKey:"borders",transform:Yh},borderRight:{themeKey:"borders",transform:Yh},borderBottom:{themeKey:"borders",transform:Yh},borderLeft:{themeKey:"borders",transform:Yh},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Yh},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:CR},color:{themeKey:"palette",transform:_w},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:_w},backgroundColor:{themeKey:"palette",transform:_w},p:{style:Cs},pt:{style:Cs},pr:{style:Cs},pb:{style:Cs},pl:{style:Cs},px:{style:Cs},py:{style:Cs},padding:{style:Cs},paddingTop:{style:Cs},paddingRight:{style:Cs},paddingBottom:{style:Cs},paddingLeft:{style:Cs},paddingX:{style:Cs},paddingY:{style:Cs},paddingInline:{style:Cs},paddingInlineStart:{style:Cs},paddingInlineEnd:{style:Cs},paddingBlock:{style:Cs},paddingBlockStart:{style:Cs},paddingBlockEnd:{style:Cs},m:{style:Ss},mt:{style:Ss},mr:{style:Ss},mb:{style:Ss},ml:{style:Ss},mx:{style:Ss},my:{style:Ss},margin:{style:Ss},marginTop:{style:Ss},marginRight:{style:Ss},marginBottom:{style:Ss},marginLeft:{style:Ss},marginX:{style:Ss},marginY:{style:Ss},marginInline:{style:Ss},marginInlineStart:{style:Ss},marginInlineEnd:{style:Ss},marginBlock:{style:Ss},marginBlockStart:{style:Ss},marginBlockEnd:{style:Ss},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:TR},rowGap:{style:ER},columnGap:{style:kR},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:rh},maxWidth:{style:qN},minWidth:{transform:rh},height:{transform:rh},maxHeight:{transform:rh},minHeight:{transform:rh},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Sge(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function Cge(t,e){return typeof t=="function"?t(e):t}function Tge(){function t(n,r,i,o){const a={[n]:r,theme:i},s=o[n];if(!s)return{[n]:r};const{cssProperty:u=n,themeKey:d,transform:m,style:v}=s;if(r==null)return null;if(d==="typography"&&r==="inherit")return{[n]:r};const _=Wp(i,d)||{};return v?v(a):Rf(a,r,E=>{let A=T5(_,m,E);return E===A&&typeof E=="string"&&(A=T5(_,m,`${n}${E==="default"?"":Nt(E)}`,E)),u===!1?A:{[u]:A}})}function e(n){const{sx:r,theme:i={},nested:o}=n||{};if(!r)return null;const a=i.unstable_sxConfig??_k;function s(u){let d=u;if(typeof u=="function")d=u(i);else if(typeof u!="object")return u;if(!d)return null;const m=LY(i.breakpoints),v=Object.keys(m);let _=m;return Object.keys(d).forEach(O=>{const E=Cge(d[O],i);if(E!=null)if(typeof E=="object")if(a[O])_=TC(_,t(O,E,i,a));else{const A=Rf({theme:i},E,M=>({[O]:M}));Sge(A,E)?_[O]=e({sx:E,theme:i,nested:!0}):_=TC(_,A)}else _=TC(_,t(O,E,i,a))}),!o&&i.modularCssLayers?{"@layer sx":vj(i,J$(v,_))}:vj(i,J$(v,_))}return Array.isArray(r)?r.map(s):s(r)}return e}const w_=Tge();w_.filterProps=["sx"];function kge(t,e){const n=this;if(n.vars){if(!n.colorSchemes?.[t]||typeof n.getColorSchemeSelector!="function")return{};let r=n.getColorSchemeSelector(t);return r==="&"?e:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:e})}return n.palette.mode===t?e:{}}function FO(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:o={},...a}=t,s=Dme(n),u=zY(i);let d=Fa({breakpoints:s,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:u,shape:{...Nme,...o}},a);return d=zme(d),d.applyStyles=kge,d=e.reduce((m,v)=>Fa(m,v),d),d.unstable_sxConfig={..._k,...a?.unstable_sxConfig},d.unstable_sx=function(v){return w_({sx:v,theme:this})},d}function Ege(t){return Object.keys(t).length===0}function NY(t=null){const e=j.useContext(bR);return!e||Ege(e)?t:e}const Age=FO();function bk(t=Age){return NY(t)}function i3(t){const e=j0(t);return t!==e&&e.styles?(e.styles.match(/^@layer\s+[^{]*$/)||(e.styles=`@layer global{${e.styles}}`),e):t}function Pge({styles:t,themeId:e,defaultTheme:n={}}){const r=bk(n),i=e&&r[e]||r;let o=typeof t=="function"?t(i):t;return i.modularCssLayers&&(Array.isArray(o)?o=o.map(a=>i3(typeof a=="function"?a(i):a)):o=i3(o)),q.jsx(Ame,{styles:o})}const Mge=t=>{const e={systemProps:{},otherProps:{}},n=t?.theme?.unstable_sxConfig??_k;return Object.keys(t).forEach(r=>{n[r]?e.systemProps[r]=t[r]:e.otherProps[r]=t[r]}),e};function AR(t){const{sx:e,...n}=t,{systemProps:r,otherProps:i}=Mge(n);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...a)=>{const s=e(...a);return Gp(s)?{...r,...s}:r}:o={...r,...e},{...i,sx:o}}const bj=t=>t,Rge=()=>{let t=bj;return{configure(e){t=e},generate(e){return t(e)},reset(){t=bj}}},BY=Rge();function FY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=FY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function fn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=FY(t))&&(r&&(r+=" "),r+=e);return r}function Ige(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,o=RY("div",{shouldForwardProp:s=>s!=="theme"&&s!=="sx"&&s!=="as"})(w_);return j.forwardRef(function(u,d){const m=bk(n),{className:v,component:_="div",...O}=AR(u);return q.jsx(o,{as:_,ref:d,className:fn(v,i?i(r):r),theme:e&&m[e]||m,...O})})}const Dge={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Qn(t,e,n="Mui"){const r=Dge[e];return r?`${n}-${r}`:`${BY.generate(t)}-${e}`}function Wn(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Qn(t,i,n)}),r}function jY(t){const{variants:e,...n}=t,r={variants:e,style:j0(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=j0(i.style))}),r}const Lge=FO();function o3(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function Kx(t,e){return e&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${e}{${String(t.styles)}}`),t}function $ge(t){return t?(e,n)=>n[t]:null}function zge(t,e,n){t.theme=Bge(t.theme)?n:t.theme[e]||t.theme}function ZP(t,e,n){const r=typeof e=="function"?e(t):e;if(Array.isArray(r))return r.flatMap(i=>ZP(t,i,n));if(Array.isArray(r?.variants)){let i;if(r.isProcessed)i=n?Kx(r.style,n):r.style;else{const{variants:o,...a}=r;i=n?Kx(j0(a),n):a}return VY(t,r.variants,[i],n)}return r?.isProcessed?n?Kx(j0(r.style),n):r.style:n?Kx(j0(r),n):r}function VY(t,e,n=[],r=void 0){let i;e:for(let o=0;o<e.length;o+=1){const a=e[o];if(typeof a.props=="function"){if(i??={...t,...t.ownerState,ownerState:t.ownerState},!a.props(i))continue}else for(const s in a.props)if(t[s]!==a.props[s]&&t.ownerState?.[s]!==a.props[s])continue e;typeof a.style=="function"?(i??={...t,...t.ownerState,ownerState:t.ownerState},n.push(r?Kx(j0(a.style(i)),r):a.style(i))):n.push(r?Kx(j0(a.style),r):a.style)}return n}function QY(t={}){const{themeId:e,defaultTheme:n=Lge,rootShouldForwardProp:r=o3,slotShouldForwardProp:i=o3}=t;function o(s){zge(s,e,n)}return(s,u={})=>{Pme(s,W=>W.filter(H=>H!==w_));const{name:d,slot:m,skipVariantsResolver:v,skipSx:_,overridesResolver:O=$ge(jge(m)),...E}=u,A=d&&d.startsWith("Mui")||m?"components":"custom",M=v!==void 0?v:m&&m!=="Root"&&m!=="root"||!1,L=_||!1;let $=o3;m==="Root"||m==="root"?$=r:m?$=i:Fge(s)&&($=void 0);const N=RY(s,{shouldForwardProp:$,label:Nge(),...E}),F=W=>{if(W.__emotion_real===W)return W;if(typeof W=="function")return function(te){return ZP(te,W,te.theme.modularCssLayers?A:void 0)};if(Gp(W)){const H=jY(W);return function(ne){return H.variants?ZP(ne,H,ne.theme.modularCssLayers?A:void 0):ne.theme.modularCssLayers?Kx(H.style,A):H.style}}return W},Q=(...W)=>{const H=[],te=W.map(F),ne=[];if(H.push(o),d&&O&&ne.push(function(se){const fe=se.theme.components?.[d]?.styleOverrides;if(!fe)return null;const ve={};for(const Me in fe)ve[Me]=ZP(se,fe[Me],se.theme.modularCssLayers?"theme":void 0);return O(se,ve)}),d&&!M&&ne.push(function(se){const fe=se.theme?.components?.[d]?.variants;return fe?VY(se,fe,[],se.theme.modularCssLayers?"theme":void 0):null}),L||ne.push(w_),Array.isArray(te[0])){const re=te.shift(),se=new Array(H.length).fill(""),be=new Array(ne.length).fill("");let fe;fe=[...se,...re,...be],fe.raw=[...se,...re.raw,...be],H.unshift(fe)}const ce=[...H,...te,...ne],we=N(...ce);return s.muiName&&(we.muiName=s.muiName),we};return N.withConfig&&(Q.withConfig=N.withConfig),Q}}function Nge(t,e){return void 0}function Bge(t){for(const e in t)return!1;return!0}function Fge(t){return typeof t=="string"&&t.charCodeAt(0)>96}function jge(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const WN=QY();function oT(t,e,n=!1){const r={...e};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=i;if(o==="components"||o==="slots")r[o]={...t[o],...r[o]};else if(o==="componentsProps"||o==="slotProps"){const a=t[o],s=e[o];if(!s)r[o]=a||{};else if(!a)r[o]=s;else{r[o]={...s};for(const u in a)if(Object.prototype.hasOwnProperty.call(a,u)){const d=u;r[o][d]=oT(a[d],s[d],n)}}}else o==="className"&&n&&e.className?r.className=fn(t?.className,e?.className):o==="style"&&n&&e.style?r.style={...t?.style,...e?.style}:r[o]===void 0&&(r[o]=t[o])}return r}function UY(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:oT(e.components[n].defaultProps,r)}function HN({props:t,name:e,defaultTheme:n,themeId:r}){let i=bk(n);return r&&(i=i[r]||i),UY({theme:i,name:e,props:t})}const fh=typeof window<"u"?j.useLayoutEffect:j.useEffect;function Vge(t,e,n,r,i){const[o,a]=j.useState(()=>i&&n?n(t).matches:r?r(t).matches:e);return fh(()=>{if(!n)return;const s=n(t),u=()=>{a(s.matches)};return u(),s.addEventListener("change",u),()=>{s.removeEventListener("change",u)}},[t,n]),o}const Qge={...Vw},ZY=Qge.useSyncExternalStore;function Uge(t,e,n,r,i){const o=j.useCallback(()=>e,[e]),a=j.useMemo(()=>{if(i&&n)return()=>n(t).matches;if(r!==null){const{matches:m}=r(t);return()=>m}return o},[o,t,r,i,n]),[s,u]=j.useMemo(()=>{if(n===null)return[o,()=>()=>{}];const m=n(t);return[()=>m.matches,v=>(m.addEventListener("change",v),()=>{m.removeEventListener("change",v)})]},[o,n,t]);return ZY(u,s,a)}function qY(t={}){const{themeId:e}=t;return function(r,i={}){let o=NY();o&&e&&(o=o[e]||o);const a=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:s=!1,matchMedia:u=a?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:m=!1}=UY({name:"MuiUseMediaQuery",props:i,theme:o});let v=typeof r=="function"?r(o):r;return v=v.replace(/^@media( ?)/m,""),v.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(ZY!==void 0?Uge:Vge)(v,s,u,d,m)}}qY();function Zge(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function GN(t,e=0,n=1){return Zge(t,e,n)}function qge(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function W0(t){if(t.type)return t;if(t.charAt(0)==="#")return W0(qge(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Jg(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(Jg(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const Wge=t=>{const e=W0(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},aC=(t,e)=>{try{return Wge(t)}catch{return t}};function PR(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,o)=>o<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function WY(t){t=W0(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),a=(d,m=(d+n/30)%12)=>i-o*Math.max(Math.min(m-3,9-m,1),-1);let s="rgb";const u=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return t.type==="hsla"&&(s+="a",u.push(e[3])),PR({type:s,values:u})}function e4(t){t=W0(t);let e=t.type==="hsl"||t.type==="hsla"?W0(WY(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Hge(t,e){const n=e4(t),r=e4(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function sT(t,e){return t=W0(t),e=GN(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,PR(t)}function Mx(t,e,n){try{return sT(t,e)}catch{return t}}function MR(t,e){if(t=W0(t),e=GN(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return PR(t)}function Gi(t,e,n){try{return MR(t,e)}catch{return t}}function RR(t,e){if(t=W0(t),e=GN(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return PR(t)}function Xi(t,e,n){try{return RR(t,e)}catch{return t}}function Gge(t,e=.15){return e4(t)>.5?MR(t,e):RR(t,e)}function _A(t,e,n){try{return Gge(t,e)}catch{return t}}const Xge=j.createContext(),jO=()=>j.useContext(Xge)??!1,Yge=j.createContext(void 0);function Kge(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?oT(i.defaultProps,r,e.components.mergeClassNameAndStyle):!i.styleOverrides&&!i.variants?oT(i,r,e.components.mergeClassNameAndStyle):r}function Jge({props:t,name:e}){const n=j.useContext(Yge);return Kge({props:t,name:e,theme:{components:n}})}let wj=0;function eye(t){const[e,n]=j.useState(t),r=t||e;return j.useEffect(()=>{e==null&&(wj+=1,n(`mui-${wj}`))},[e]),r}const tye={...Vw},Oj=tye.useId;function VO(t){if(Oj!==void 0){const e=Oj();return t??e}return eye(t)}const Sj={theme:void 0};function nye(t){let e,n;return function(i){let o=e;return(o===void 0||i.theme!==n)&&(Sj.theme=i.theme,o=jY(t(Sj)),e=o,n=i.theme),o}}function rye(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const Cj=(t,e,n,r=[])=>{let i=t;e.forEach((o,a)=>{a===e.length-1?Array.isArray(i)?i[Number(o)]=n:i&&typeof i=="object"&&(i[o]=n):i&&typeof i=="object"&&(i[o]||(i[o]=r.includes(o)?[]:{}),i=i[o])})},iye=(t,e,n)=>{function r(i,o=[],a=[]){Object.entries(i).forEach(([s,u])=>{(!n||n&&!n([...o,s]))&&u!=null&&(typeof u=="object"&&Object.keys(u).length>0?r(u,[...o,s],Array.isArray(u)?[...a,s]:a):e([...o,s],u,a))})}r(t)},oye=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function s3(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},o={},a={};return iye(t,(s,u,d)=>{if((typeof u=="string"||typeof u=="number")&&(!r||!r(s,u))){const m=`--${n?`${n}-`:""}${s.join("-")}`,v=oye(s,u);Object.assign(i,{[m]:v}),Cj(o,s,`var(${m})`,d),Cj(a,s,`var(${m}, ${v})`,d)}},s=>s[0]==="vars"),{css:i,vars:o,varsWithDefaults:a}}function sye(t,e={}){const{getSelector:n=L,disableCssColorScheme:r,colorSchemeSelector:i,enableContrastVars:o}=e,{colorSchemes:a={},components:s,defaultColorScheme:u="light",...d}=t,{vars:m,css:v,varsWithDefaults:_}=s3(d,e);let O=_;const E={},{[u]:A,...M}=a;if(Object.entries(M||{}).forEach(([F,Q])=>{const{vars:W,css:H,varsWithDefaults:te}=s3(Q,e);O=Fa(O,te),E[F]={css:H,vars:W}}),A){const{css:F,vars:Q,varsWithDefaults:W}=s3(A,e);O=Fa(O,W),E[u]={css:F,vars:Q}}function L(F,Q){let W=i;if(i==="class"&&(W=".%s"),i==="data"&&(W="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(W=`[${i}="%s"]`),F){if(W==="media")return t.defaultColorScheme===F?":root":{[`@media (prefers-color-scheme: ${a[F]?.palette?.mode||F})`]:{":root":Q}};if(W)return t.defaultColorScheme===F?`:root, ${W.replace("%s",String(F))}`:W.replace("%s",String(F))}return":root"}return{vars:O,generateThemeVars:()=>{let F={...m};return Object.entries(E).forEach(([,{vars:Q}])=>{F=Fa(F,Q)}),F},generateStyleSheets:()=>{const F=[],Q=t.defaultColorScheme||"light";function W(ne,ce){Object.keys(ce).length&&F.push(typeof ne=="string"?{[ne]:{...ce}}:ne)}W(n(void 0,{...v}),v);const{[Q]:H,...te}=E;if(H){const{css:ne}=H,ce=a[Q]?.palette?.mode,we=!r&&ce?{colorScheme:ce,...ne}:{...ne};W(n(Q,{...we}),we)}return Object.entries(te).forEach(([ne,{css:ce}])=>{const we=a[ne]?.palette?.mode,re=!r&&we?{colorScheme:we,...ce}:{...ce};W(n(ne,{...re}),re)}),o&&F.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),F}}}function aye(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}function Un(t,e,n=void 0){const r={};for(const i in t){const o=t[i];let a="",s=!0;for(let u=0;u<o.length;u+=1){const d=o[u];d&&(a+=(s===!0?"":" ")+e(d),s=!1,n&&n[d]&&(a+=" "+n[d]))}r[i]=a}return r}const lye=FO(),cye=WN("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${Nt(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),uye=t=>HN({props:t,name:"MuiContainer",defaultTheme:lye}),hye=(t,e)=>{const n=u=>Qn(e,u),{classes:r,fixed:i,disableGutters:o,maxWidth:a}=t,s={root:["root",a&&`maxWidth${Nt(String(a))}`,i&&"fixed",o&&"disableGutters"]};return Un(s,n,r)};function dye(t={}){const{createStyledComponent:e=cye,useThemeProps:n=uye,componentName:r="MuiContainer"}=t,i=e(({theme:a,ownerState:s})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!s.disableGutters&&{paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}}}),({theme:a,ownerState:s})=>s.fixed&&Object.keys(a.breakpoints.values).reduce((u,d)=>{const m=d,v=a.breakpoints.values[m];return v!==0&&(u[a.breakpoints.up(m)]={maxWidth:`${v}${a.breakpoints.unit}`}),u},{}),({theme:a,ownerState:s})=>({...s.maxWidth==="xs"&&{[a.breakpoints.up("xs")]:{maxWidth:Math.max(a.breakpoints.values.xs,444)}},...s.maxWidth&&s.maxWidth!=="xs"&&{[a.breakpoints.up(s.maxWidth)]:{maxWidth:`${a.breakpoints.values[s.maxWidth]}${a.breakpoints.unit}`}}}));return j.forwardRef(function(s,u){const d=n(s),{className:m,component:v="div",disableGutters:_=!1,fixed:O=!1,maxWidth:E="lg",classes:A,...M}=d,L={...d,component:v,disableGutters:_,fixed:O,maxWidth:E},$=hye(L,r);return q.jsx(i,{as:v,ownerState:L,className:fn($.root,m),ref:u,...M})})}function kC(t,e){return j.isValidElement(t)&&e.indexOf(t.type.muiName??t.type?._payload?.value?.muiName)!==-1}const fye=(t,e)=>t.filter(n=>e.includes(n)),QO=(t,e,n)=>{const r=t.keys[0];Array.isArray(e)?e.forEach((i,o)=>{n((a,s)=>{o<=t.keys.length-1&&(o===0?Object.assign(a,s):a[t.up(t.keys[o])]=s)},i)}):e&&typeof e=="object"?(Object.keys(e).length>t.keys.length?t.keys:fye(t.keys,Object.keys(e))).forEach(o=>{if(t.keys.includes(o)){const a=e[o];a!==void 0&&n((s,u)=>{r===o?Object.assign(s,u):s[t.up(o)]=u},a)}}):(typeof e=="number"||typeof e=="string")&&n((i,o)=>{Object.assign(i,o)},e)};function k5(t){return`--Grid-${t}Spacing`}function IR(t){return`--Grid-parent-${t}Spacing`}const Tj="--Grid-columns",bw="--Grid-parent-columns",pye=({theme:t,ownerState:e})=>{const n={};return QO(t.breakpoints,e.size,(r,i)=>{let o={};i==="grow"&&(o={flexBasis:0,flexGrow:1,maxWidth:"100%"}),i==="auto"&&(o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof i=="number"&&(o={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${i} / var(${bw}) - (var(${bw}) - ${i}) * (var(${IR("column")}) / var(${bw})))`}),r(n,o)}),n},mye=({theme:t,ownerState:e})=>{const n={};return QO(t.breakpoints,e.offset,(r,i)=>{let o={};i==="auto"&&(o={marginLeft:"auto"}),typeof i=="number"&&(o={marginLeft:i===0?"0px":`calc(100% * ${i} / var(${bw}) + var(${IR("column")}) * ${i} / var(${bw}))`}),r(n,o)}),n},gye=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={[Tj]:12};return QO(t.breakpoints,e.columns,(r,i)=>{const o=i??12;r(n,{[Tj]:o,"> *":{[bw]:o}})}),n},yye=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return QO(t.breakpoints,e.rowSpacing,(r,i)=>{const o=typeof i=="string"?i:t.spacing?.(i);r(n,{[k5("row")]:o,"> *":{[IR("row")]:o}})}),n},vye=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return QO(t.breakpoints,e.columnSpacing,(r,i)=>{const o=typeof i=="string"?i:t.spacing?.(i);r(n,{[k5("column")]:o,"> *":{[IR("column")]:o}})}),n},xye=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return QO(t.breakpoints,e.direction,(r,i)=>{r(n,{flexDirection:i})}),n},_ye=({ownerState:t})=>({minWidth:0,boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",...t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},gap:`var(${k5("row")}) var(${k5("column")})`}}),bye=t=>{const e=[];return Object.entries(t).forEach(([n,r])=>{r!==!1&&r!==void 0&&e.push(`grid-${n}-${String(r)}`)}),e},wye=(t,e="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(t))return[`spacing-${e}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const r=[];return Object.entries(t).forEach(([i,o])=>{n(o)&&r.push(`spacing-${i}-${String(o)}`)}),r}return[]},Oye=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([e,n])=>`direction-${e}-${n}`):[`direction-xs-${String(t)}`];function Sye(t,e){t.item!==void 0&&delete t.item,t.zeroMinWidth!==void 0&&delete t.zeroMinWidth,e.keys.forEach(n=>{t[n]!==void 0&&delete t[n]})}const Cye=FO(),Tye=WN("div",{name:"MuiGrid",slot:"Root"});function kye(t){return HN({props:t,name:"MuiGrid",defaultTheme:Cye})}function Eye(t={}){const{createStyledComponent:e=Tye,useThemeProps:n=kye,useTheme:r=bk,componentName:i="MuiGrid"}=t,o=(d,m)=>{const{container:v,direction:_,spacing:O,wrap:E,size:A}=d,M={root:["root",v&&"container",E!=="wrap"&&`wrap-xs-${String(E)}`,...Oye(_),...bye(A),...v?wye(O,m.breakpoints.keys[0]):[]]};return Un(M,L=>Qn(i,L),{})};function a(d,m,v=()=>!0){const _={};return d===null||(Array.isArray(d)?d.forEach((O,E)=>{O!==null&&v(O)&&m.keys[E]&&(_[m.keys[E]]=O)}):typeof d=="object"?Object.keys(d).forEach(O=>{const E=d[O];E!=null&&v(E)&&(_[O]=E)}):_[m.keys[0]]=d),_}const s=e(gye,vye,yye,pye,xye,_ye,mye),u=j.forwardRef(function(m,v){const _=r(),O=n(m),E=AR(O);Sye(E,_.breakpoints);const{className:A,children:M,columns:L=12,container:$=!1,component:N="div",direction:F="row",wrap:Q="wrap",size:W={},offset:H={},spacing:te=0,rowSpacing:ne=te,columnSpacing:ce=te,unstable_level:we=0,...re}=E,se=a(W,_.breakpoints,Ae=>Ae!==!1),be=a(H,_.breakpoints),fe=m.columns??(we?void 0:L),ve=m.spacing??(we?void 0:te),Me=m.rowSpacing??m.spacing??(we?void 0:ne),Ne=m.columnSpacing??m.spacing??(we?void 0:ce),Qe={...E,level:we,columns:fe,container:$,direction:F,wrap:Q,spacing:ve,rowSpacing:Me,columnSpacing:Ne,size:se,offset:be},Ce=o(Qe,_);return q.jsx(s,{ref:v,as:N,ownerState:Qe,className:fn(Ce.root,A),...re,children:j.Children.map(M,Ae=>j.isValidElement(Ae)&&kC(Ae,["Grid"])&&$&&Ae.props.container?j.cloneElement(Ae,{unstable_level:Ae.props?.unstable_level??we+1}):Ae)})});return u.muiName="Grid",u}const Aye=FO(),Pye=WN("div",{name:"MuiStack",slot:"Root"});function Mye(t){return HN({props:t,name:"MuiStack",defaultTheme:Aye})}function Rye(t,e){const n=j.Children.toArray(t).filter(Boolean);return n.reduce((r,i,o)=>(r.push(i),o<n.length-1&&r.push(j.cloneElement(e,{key:`separator-${o}`})),r),[])}const Iye=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],Dye=({ownerState:t,theme:e})=>{let n={display:"flex",flexDirection:"column",...Rf({theme:e},r3({values:t.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r}))};if(t.spacing){const r=OR(e),i=Object.keys(e.breakpoints.values).reduce((u,d)=>((typeof t.spacing=="object"&&t.spacing[d]!=null||typeof t.direction=="object"&&t.direction[d]!=null)&&(u[d]=!0),u),{}),o=r3({values:t.direction,base:i}),a=r3({values:t.spacing,base:i});typeof o=="object"&&Object.keys(o).forEach((u,d,m)=>{if(!o[u]){const _=d>0?o[m[d-1]]:"column";o[u]=_}}),n=Fa(n,Rf({theme:e},a,(u,d)=>t.useFlexGap?{gap:b_(r,u)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Iye(d?o[d]:t.direction)}`]:b_(r,u)}}))}return n=Fme(e.breakpoints,n),n};function Lye(t={}){const{createStyledComponent:e=Pye,useThemeProps:n=Mye,componentName:r="MuiStack"}=t,i=()=>Un({root:["root"]},u=>Qn(r,u),{}),o=e(Dye);return j.forwardRef(function(u,d){const m=n(u),v=AR(m),{component:_="div",direction:O="column",spacing:E=0,divider:A,children:M,className:L,useFlexGap:$=!1,...N}=v,F={direction:O,spacing:E,useFlexGap:$},Q=i();return q.jsx(o,{as:_,ownerState:F,ref:d,className:fn(Q.root,L),...N,children:A?Rye(M,A):M})})}function HY(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:tT.white,default:tT.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const GY=HY();function XY(){return{text:{primary:tT.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:tT.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const t4=XY();function kj(t,e,n,r){const i=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=RR(t.main,i):e==="dark"&&(t.dark=MR(t.main,o)))}function Ej(t,e,n,r,i){const o=i.light||i,a=i.dark||i*1.5;e[n]||(e.hasOwnProperty(r)?e[n]=e[r]:n==="light"?e.light=`color-mix(in ${t}, ${e.main}, #fff ${(o*100).toFixed(0)}%)`:n==="dark"&&(e.dark=`color-mix(in ${t}, ${e.main}, #000 ${(a*100).toFixed(0)}%)`))}function $ye(t="light"){return t==="dark"?{main:k1[200],light:k1[50],dark:k1[400]}:{main:k1[700],light:k1[400],dark:k1[800]}}function zye(t="light"){return t==="dark"?{main:T1[200],light:T1[50],dark:T1[400]}:{main:T1[500],light:T1[300],dark:T1[700]}}function Nye(t="light"){return t==="dark"?{main:C1[500],light:C1[300],dark:C1[700]}:{main:C1[700],light:C1[400],dark:C1[800]}}function Bye(t="light"){return t==="dark"?{main:E1[400],light:E1[300],dark:E1[700]}:{main:E1[700],light:E1[500],dark:E1[900]}}function Fye(t="light"){return t==="dark"?{main:A1[400],light:A1[300],dark:A1[700]}:{main:A1[800],light:A1[500],dark:A1[900]}}function jye(t="light"){return t==="dark"?{main:P2[400],light:P2[300],dark:P2[700]}:{main:"#ed6c02",light:P2[500],dark:P2[900]}}function Vye(t){return`oklch(from ${t} var(--__l) 0 h / var(--__a))`}function XN(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,colorSpace:i,...o}=t,a=t.primary||$ye(e),s=t.secondary||zye(e),u=t.error||Nye(e),d=t.info||Bye(e),m=t.success||Fye(e),v=t.warning||jye(e);function _(M){return i?Vye(M):Hge(M,t4.text.primary)>=n?t4.text.primary:GY.text.primary}const O=({color:M,name:L,mainShade:$=500,lightShade:N=300,darkShade:F=700})=>{if(M={...M},!M.main&&M[$]&&(M.main=M[$]),!M.hasOwnProperty("main"))throw new Error(Jg(11,L?` (${L})`:"",$));if(typeof M.main!="string")throw new Error(Jg(12,L?` (${L})`:"",JSON.stringify(M.main)));return i?(Ej(i,M,"light",N,r),Ej(i,M,"dark",F,r)):(kj(M,"light",N,r),kj(M,"dark",F,r)),M.contrastText||(M.contrastText=_(M.main)),M};let E;return e==="light"?E=HY():e==="dark"&&(E=XY()),Fa({common:{...tT},mode:e,primary:O({color:a,name:"primary"}),secondary:O({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:O({color:u,name:"error"}),warning:O({color:v,name:"warning"}),info:O({color:d,name:"info"}),success:O({color:m,name:"success"}),grey:Tpe,contrastThreshold:n,getContrastText:_,augmentColor:O,tonalOffset:r,...E},o)}function Qye(t){const e={};return Object.entries(t).forEach(r=>{const[i,o]=r;typeof o=="object"&&(e[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),e}function Uye(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function Zye(t){return Math.round(t*1e5)/1e5}const Aj={textTransform:"uppercase"},Pj='"Roboto", "Helvetica", "Arial", sans-serif';function qye(t,e){const{fontFamily:n=Pj,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:s=700,htmlFontSize:u=16,allVariants:d,pxToRem:m,...v}=typeof e=="function"?e(t):e,_=r/14,O=m||(M=>`${M/u*_}rem`),E=(M,L,$,N,F)=>({fontFamily:n,fontWeight:M,fontSize:O(L),lineHeight:$,...n===Pj?{letterSpacing:`${Zye(N/L)}em`}:{},...F,...d}),A={h1:E(i,96,1.167,-1.5),h2:E(i,60,1.2,-.5),h3:E(o,48,1.167,0),h4:E(o,34,1.235,.25),h5:E(o,24,1.334,0),h6:E(a,20,1.6,.15),subtitle1:E(o,16,1.75,.15),subtitle2:E(a,14,1.57,.1),body1:E(o,16,1.5,.15),body2:E(o,14,1.43,.15),button:E(a,14,1.75,.4,Aj),caption:E(o,12,1.66,.4),overline:E(o,12,2.66,1,Aj),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Fa({htmlFontSize:u,pxToRem:O,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:s,...A},v,{clone:!1})}const Wye=.2,Hye=.14,Gye=.12;function Go(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Wye})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Hye})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Gye})`].join(",")}const Xye=["none",Go(0,2,1,-1,0,1,1,0,0,1,3,0),Go(0,3,1,-2,0,2,2,0,0,1,5,0),Go(0,3,3,-2,0,3,4,0,0,1,8,0),Go(0,2,4,-1,0,4,5,0,0,1,10,0),Go(0,3,5,-1,0,5,8,0,0,1,14,0),Go(0,3,5,-1,0,6,10,0,0,1,18,0),Go(0,4,5,-2,0,7,10,1,0,2,16,1),Go(0,5,5,-3,0,8,10,1,0,3,14,2),Go(0,5,6,-3,0,9,12,1,0,3,16,2),Go(0,6,6,-3,0,10,14,1,0,4,18,3),Go(0,6,7,-4,0,11,15,1,0,4,20,3),Go(0,7,8,-4,0,12,17,2,0,5,22,4),Go(0,7,8,-4,0,13,19,2,0,5,24,4),Go(0,7,9,-4,0,14,21,2,0,5,26,4),Go(0,8,9,-5,0,15,22,2,0,6,28,5),Go(0,8,10,-5,0,16,24,2,0,6,30,5),Go(0,8,11,-5,0,17,26,2,0,6,32,5),Go(0,9,11,-5,0,18,28,2,0,7,34,6),Go(0,9,12,-6,0,19,29,2,0,7,36,6),Go(0,10,13,-6,0,20,31,3,0,8,38,7),Go(0,10,13,-6,0,21,33,3,0,8,40,7),Go(0,10,14,-6,0,22,35,3,0,8,42,7),Go(0,11,14,-7,0,23,36,3,0,9,44,8),Go(0,11,15,-7,0,24,38,3,0,9,46,8)],Yye={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},YY={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Mj(t){return`${Math.round(t)}ms`}function Kye(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function Jye(t){const e={...Yye,...t.easing},n={...YY,...t.duration};return{getAutoHeightDuration:Kye,create:(i=["all"],o={})=>{const{duration:a=n.standard,easing:s=e.easeInOut,delay:u=0,...d}=o;return(Array.isArray(i)?i:[i]).map(m=>`${m} ${typeof a=="string"?a:Mj(a)} ${s} ${typeof u=="string"?u:Mj(u)}`).join(",")},...t,easing:e,duration:n}}const e0e={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function t0e(t){return Gp(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function KY(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let o=0;o<i.length;o++){const[a,s]=i[o];!t0e(s)||a.startsWith("unstable_")?delete r[a]:Gp(s)&&(r[a]={...s},n(r[a]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Rj(t){return typeof t=="number"?`${(t*100).toFixed(0)}%`:`calc((${t}) * 100%)`}const n0e=t=>{if(!Number.isNaN(+t))return+t;const e=t.match(/\d*\.?\d+/g);if(!e)return 0;let n=0;for(let r=0;r<e.length;r+=1)n+=+e[r];return n};function r0e(t){Object.assign(t,{alpha(e,n){const r=this||t;return r.colorSpace?`oklch(from ${e} l c h / ${typeof n=="string"?`calc(${n})`:n})`:r.vars?`rgba(${e.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof n=="string"?`calc(${n})`:n})`:sT(e,n0e(n))},lighten(e,n){const r=this||t;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${e}, #fff ${Rj(n)})`:RR(e,n)},darken(e,n){const r=this||t;return r.colorSpace?`color-mix(in ${r.colorSpace}, ${e}, #000 ${Rj(n)})`:MR(e,n)}})}function n4(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:o={},transitions:a={},typography:s={},shape:u,colorSpace:d,...m}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(Jg(20));const v=XN({...o,colorSpace:d}),_=FO(t);let O=Fa(_,{mixins:Uye(_.breakpoints,r),palette:v,shadows:Xye.slice(),typography:qye(v,s),transitions:Jye(a),zIndex:{...e0e}});return O=Fa(O,m),O=e.reduce((E,A)=>Fa(E,A),O),O.unstable_sxConfig={..._k,...m?.unstable_sxConfig},O.unstable_sx=function(A){return w_({sx:A,theme:this})},O.toRuntimeSource=KY,r0e(O),O}function r4(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const i0e=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=r4(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function JY(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function eK(t){return t==="dark"?i0e:[]}function o0e(t){const{palette:e={mode:"light"},opacity:n,overlays:r,colorSpace:i,...o}=t,a=XN({...e,colorSpace:i});return{palette:a,opacity:{...JY(a.mode),...n},overlays:r||eK(a.mode),...o}}function s0e(t){return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!t[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const a0e=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],l0e=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const a={};return a0e(t.cssVarPrefix).forEach(s=>{a[s]=n[s],delete n[s]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:a}}:o?{[o.replace("%s",e)]:a,[`${r}, ${o.replace("%s",e)}`]:n}:{[r]:{...n,...a}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(o)return o.replace("%s",String(e))}return r};function c0e(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function Ft(t,e,n){!t[e]&&n&&(t[e]=n)}function lC(t){return typeof t!="string"||!t.startsWith("hsl")?t:WY(t)}function kg(t,e){`${e}Channel`in t||(t[`${e}Channel`]=aC(lC(t[e])))}function u0e(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const Lp=t=>{try{return t()}catch{}},h0e=(t="mui")=>rye(t);function a3(t,e,n,r,i){if(!n)return;n=n===!0?{}:n;const o=i==="dark"?"dark":"light";if(!r){e[i]=o0e({...n,palette:{mode:o,...n?.palette},colorSpace:t});return}const{palette:a,...s}=n4({...r,palette:{mode:o,...n?.palette},colorSpace:t});return e[i]={...n,palette:a,opacity:{...JY(o),...n?.opacity},overlays:n?.overlays||eK(o)},s}function d0e(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",nativeColor:a=!1,shouldSkipGeneratingVar:s=s0e,colorSchemeSelector:u=n.light&&n.dark?"media":void 0,rootSelector:d=":root",...m}=t,v=Object.keys(n)[0],_=r||(n.light&&v!=="light"?"light":v),O=h0e(o),{[_]:E,light:A,dark:M,...L}=n,$={...L};let N=E;if((_==="dark"&&!("dark"in n)||_==="light"&&!("light"in n))&&(N=!0),!N)throw new Error(Jg(21,_));let F;a&&(F="oklch");const Q=a3(F,$,N,m,_);A&&!$.light&&a3(F,$,A,void 0,"light"),M&&!$.dark&&a3(F,$,M,void 0,"dark");let W={defaultColorScheme:_,...Q,cssVarPrefix:o,colorSchemeSelector:u,rootSelector:d,getCssVar:O,colorSchemes:$,font:{...Qye(Q.typography),...Q.font},spacing:u0e(m.spacing)};Object.keys(W.colorSchemes).forEach(we=>{const re=W.colorSchemes[we].palette,se=fe=>{const ve=fe.split("-"),Me=ve[1],Ne=ve[2];return O(fe,re[Me][Ne])};re.mode==="light"&&(Ft(re.common,"background","#fff"),Ft(re.common,"onBackground","#000")),re.mode==="dark"&&(Ft(re.common,"background","#000"),Ft(re.common,"onBackground","#fff"));function be(fe,ve,Me){if(F){let Ne;return fe===Mx&&(Ne=`transparent ${((1-Me)*100).toFixed(0)}%`),fe===Gi&&(Ne=`#000 ${(Me*100).toFixed(0)}%`),fe===Xi&&(Ne=`#fff ${(Me*100).toFixed(0)}%`),`color-mix(in ${F}, ${ve}, ${Ne})`}return fe(ve,Me)}if(c0e(re,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),re.mode==="light"){Ft(re.Alert,"errorColor",be(Gi,re.error.light,.6)),Ft(re.Alert,"infoColor",be(Gi,re.info.light,.6)),Ft(re.Alert,"successColor",be(Gi,re.success.light,.6)),Ft(re.Alert,"warningColor",be(Gi,re.warning.light,.6)),Ft(re.Alert,"errorFilledBg",se("palette-error-main")),Ft(re.Alert,"infoFilledBg",se("palette-info-main")),Ft(re.Alert,"successFilledBg",se("palette-success-main")),Ft(re.Alert,"warningFilledBg",se("palette-warning-main")),Ft(re.Alert,"errorFilledColor",Lp(()=>re.getContrastText(re.error.main))),Ft(re.Alert,"infoFilledColor",Lp(()=>re.getContrastText(re.info.main))),Ft(re.Alert,"successFilledColor",Lp(()=>re.getContrastText(re.success.main))),Ft(re.Alert,"warningFilledColor",Lp(()=>re.getContrastText(re.warning.main))),Ft(re.Alert,"errorStandardBg",be(Xi,re.error.light,.9)),Ft(re.Alert,"infoStandardBg",be(Xi,re.info.light,.9)),Ft(re.Alert,"successStandardBg",be(Xi,re.success.light,.9)),Ft(re.Alert,"warningStandardBg",be(Xi,re.warning.light,.9)),Ft(re.Alert,"errorIconColor",se("palette-error-main")),Ft(re.Alert,"infoIconColor",se("palette-info-main")),Ft(re.Alert,"successIconColor",se("palette-success-main")),Ft(re.Alert,"warningIconColor",se("palette-warning-main")),Ft(re.AppBar,"defaultBg",se("palette-grey-100")),Ft(re.Avatar,"defaultBg",se("palette-grey-400")),Ft(re.Button,"inheritContainedBg",se("palette-grey-300")),Ft(re.Button,"inheritContainedHoverBg",se("palette-grey-A100")),Ft(re.Chip,"defaultBorder",se("palette-grey-400")),Ft(re.Chip,"defaultAvatarColor",se("palette-grey-700")),Ft(re.Chip,"defaultIconColor",se("palette-grey-700")),Ft(re.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Ft(re.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Ft(re.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Ft(re.LinearProgress,"primaryBg",be(Xi,re.primary.main,.62)),Ft(re.LinearProgress,"secondaryBg",be(Xi,re.secondary.main,.62)),Ft(re.LinearProgress,"errorBg",be(Xi,re.error.main,.62)),Ft(re.LinearProgress,"infoBg",be(Xi,re.info.main,.62)),Ft(re.LinearProgress,"successBg",be(Xi,re.success.main,.62)),Ft(re.LinearProgress,"warningBg",be(Xi,re.warning.main,.62)),Ft(re.Skeleton,"bg",F?be(Mx,re.text.primary,.11):`rgba(${se("palette-text-primaryChannel")} / 0.11)`),Ft(re.Slider,"primaryTrack",be(Xi,re.primary.main,.62)),Ft(re.Slider,"secondaryTrack",be(Xi,re.secondary.main,.62)),Ft(re.Slider,"errorTrack",be(Xi,re.error.main,.62)),Ft(re.Slider,"infoTrack",be(Xi,re.info.main,.62)),Ft(re.Slider,"successTrack",be(Xi,re.success.main,.62)),Ft(re.Slider,"warningTrack",be(Xi,re.warning.main,.62));const fe=F?be(Gi,re.background.default,.6825):_A(re.background.default,.8);Ft(re.SnackbarContent,"bg",fe),Ft(re.SnackbarContent,"color",Lp(()=>F?t4.text.primary:re.getContrastText(fe))),Ft(re.SpeedDialAction,"fabHoverBg",_A(re.background.paper,.15)),Ft(re.StepConnector,"border",se("palette-grey-400")),Ft(re.StepContent,"border",se("palette-grey-400")),Ft(re.Switch,"defaultColor",se("palette-common-white")),Ft(re.Switch,"defaultDisabledColor",se("palette-grey-100")),Ft(re.Switch,"primaryDisabledColor",be(Xi,re.primary.main,.62)),Ft(re.Switch,"secondaryDisabledColor",be(Xi,re.secondary.main,.62)),Ft(re.Switch,"errorDisabledColor",be(Xi,re.error.main,.62)),Ft(re.Switch,"infoDisabledColor",be(Xi,re.info.main,.62)),Ft(re.Switch,"successDisabledColor",be(Xi,re.success.main,.62)),Ft(re.Switch,"warningDisabledColor",be(Xi,re.warning.main,.62)),Ft(re.TableCell,"border",be(Xi,be(Mx,re.divider,1),.88)),Ft(re.Tooltip,"bg",be(Mx,re.grey[700],.92))}if(re.mode==="dark"){Ft(re.Alert,"errorColor",be(Xi,re.error.light,.6)),Ft(re.Alert,"infoColor",be(Xi,re.info.light,.6)),Ft(re.Alert,"successColor",be(Xi,re.success.light,.6)),Ft(re.Alert,"warningColor",be(Xi,re.warning.light,.6)),Ft(re.Alert,"errorFilledBg",se("palette-error-dark")),Ft(re.Alert,"infoFilledBg",se("palette-info-dark")),Ft(re.Alert,"successFilledBg",se("palette-success-dark")),Ft(re.Alert,"warningFilledBg",se("palette-warning-dark")),Ft(re.Alert,"errorFilledColor",Lp(()=>re.getContrastText(re.error.dark))),Ft(re.Alert,"infoFilledColor",Lp(()=>re.getContrastText(re.info.dark))),Ft(re.Alert,"successFilledColor",Lp(()=>re.getContrastText(re.success.dark))),Ft(re.Alert,"warningFilledColor",Lp(()=>re.getContrastText(re.warning.dark))),Ft(re.Alert,"errorStandardBg",be(Gi,re.error.light,.9)),Ft(re.Alert,"infoStandardBg",be(Gi,re.info.light,.9)),Ft(re.Alert,"successStandardBg",be(Gi,re.success.light,.9)),Ft(re.Alert,"warningStandardBg",be(Gi,re.warning.light,.9)),Ft(re.Alert,"errorIconColor",se("palette-error-main")),Ft(re.Alert,"infoIconColor",se("palette-info-main")),Ft(re.Alert,"successIconColor",se("palette-success-main")),Ft(re.Alert,"warningIconColor",se("palette-warning-main")),Ft(re.AppBar,"defaultBg",se("palette-grey-900")),Ft(re.AppBar,"darkBg",se("palette-background-paper")),Ft(re.AppBar,"darkColor",se("palette-text-primary")),Ft(re.Avatar,"defaultBg",se("palette-grey-600")),Ft(re.Button,"inheritContainedBg",se("palette-grey-800")),Ft(re.Button,"inheritContainedHoverBg",se("palette-grey-700")),Ft(re.Chip,"defaultBorder",se("palette-grey-700")),Ft(re.Chip,"defaultAvatarColor",se("palette-grey-300")),Ft(re.Chip,"defaultIconColor",se("palette-grey-300")),Ft(re.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Ft(re.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Ft(re.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Ft(re.LinearProgress,"primaryBg",be(Gi,re.primary.main,.5)),Ft(re.LinearProgress,"secondaryBg",be(Gi,re.secondary.main,.5)),Ft(re.LinearProgress,"errorBg",be(Gi,re.error.main,.5)),Ft(re.LinearProgress,"infoBg",be(Gi,re.info.main,.5)),Ft(re.LinearProgress,"successBg",be(Gi,re.success.main,.5)),Ft(re.LinearProgress,"warningBg",be(Gi,re.warning.main,.5)),Ft(re.Skeleton,"bg",F?be(Mx,re.text.primary,.13):`rgba(${se("palette-text-primaryChannel")} / 0.13)`),Ft(re.Slider,"primaryTrack",be(Gi,re.primary.main,.5)),Ft(re.Slider,"secondaryTrack",be(Gi,re.secondary.main,.5)),Ft(re.Slider,"errorTrack",be(Gi,re.error.main,.5)),Ft(re.Slider,"infoTrack",be(Gi,re.info.main,.5)),Ft(re.Slider,"successTrack",be(Gi,re.success.main,.5)),Ft(re.Slider,"warningTrack",be(Gi,re.warning.main,.5));const fe=F?be(Xi,re.background.default,.985):_A(re.background.default,.98);Ft(re.SnackbarContent,"bg",fe),Ft(re.SnackbarContent,"color",Lp(()=>F?GY.text.primary:re.getContrastText(fe))),Ft(re.SpeedDialAction,"fabHoverBg",_A(re.background.paper,.15)),Ft(re.StepConnector,"border",se("palette-grey-600")),Ft(re.StepContent,"border",se("palette-grey-600")),Ft(re.Switch,"defaultColor",se("palette-grey-300")),Ft(re.Switch,"defaultDisabledColor",se("palette-grey-600")),Ft(re.Switch,"primaryDisabledColor",be(Gi,re.primary.main,.55)),Ft(re.Switch,"secondaryDisabledColor",be(Gi,re.secondary.main,.55)),Ft(re.Switch,"errorDisabledColor",be(Gi,re.error.main,.55)),Ft(re.Switch,"infoDisabledColor",be(Gi,re.info.main,.55)),Ft(re.Switch,"successDisabledColor",be(Gi,re.success.main,.55)),Ft(re.Switch,"warningDisabledColor",be(Gi,re.warning.main,.55)),Ft(re.TableCell,"border",be(Gi,be(Mx,re.divider,1),.68)),Ft(re.Tooltip,"bg",be(Mx,re.grey[700],.92))}kg(re.background,"default"),kg(re.background,"paper"),kg(re.common,"background"),kg(re.common,"onBackground"),kg(re,"divider"),Object.keys(re).forEach(fe=>{const ve=re[fe];fe!=="tonalOffset"&&ve&&typeof ve=="object"&&(ve.main&&Ft(re[fe],"mainChannel",aC(lC(ve.main))),ve.light&&Ft(re[fe],"lightChannel",aC(lC(ve.light))),ve.dark&&Ft(re[fe],"darkChannel",aC(lC(ve.dark))),ve.contrastText&&Ft(re[fe],"contrastTextChannel",aC(lC(ve.contrastText))),fe==="text"&&(kg(re[fe],"primary"),kg(re[fe],"secondary")),fe==="action"&&(ve.active&&kg(re[fe],"active"),ve.selected&&kg(re[fe],"selected")))})}),W=e.reduce((we,re)=>Fa(we,re),W);const H={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:s,getSelector:l0e(W),enableContrastVars:a},{vars:te,generateThemeVars:ne,generateStyleSheets:ce}=sye(W,H);return W.vars=te,Object.entries(W.colorSchemes[W.defaultColorScheme]).forEach(([we,re])=>{W[we]=re}),W.generateThemeVars=ne,W.generateStyleSheets=ce,W.generateSpacing=function(){return zY(m.spacing,OR(this))},W.getColorSchemeSelector=aye(u),W.spacing=W.generateSpacing(),W.shouldSkipGeneratingVar=s,W.unstable_sxConfig={..._k,...m?.unstable_sxConfig},W.unstable_sx=function(re){return w_({sx:re,theme:this})},W.toRuntimeSource=KY,W}function Ij(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:XN({...n===!0?{}:n.palette,mode:e})})}function tK(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:o=n?.mode,...a}=t,s=o||"light",u=i?.[s],d={...i,...n?{[s]:{...typeof u!="boolean"&&u,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return n4(t,...e);let m=n;"palette"in t||d[s]&&(d[s]!==!0?m=d[s].palette:s==="dark"&&(m={mode:"dark"}));const v=n4({...t,palette:m},...e);return v.defaultColorScheme=s,v.colorSchemes=d,v.palette.mode==="light"&&(v.colorSchemes.light={...d.light!==!0&&d.light,palette:v.palette},Ij(v,"dark",d.dark)),v.palette.mode==="dark"&&(v.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:v.palette},Ij(v,"light",d.light)),v}return!n&&!("light"in d)&&s==="light"&&(d.light=!0),d0e({...a,colorSchemes:d,defaultColorScheme:s,...typeof r!="boolean"&&r},...e)}const YN=tK();function bd(){const t=bk(YN);return t[mk]||t}function nK(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Sc=t=>nK(t)&&t!=="classes",Zt=QY({themeId:mk,defaultTheme:YN,rootShouldForwardProp:Sc});function Dj(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function f0e(t){return q.jsx(Pge,{...t,defaultTheme:YN,themeId:mk})}function KN(t){return function(n){return q.jsx(f0e,{styles:typeof t=="function"?r=>t({theme:r,...n}):t})}}function p0e(){return AR}const ir=nye;function qn(t){return Jge(t)}function m0e(t){return Qn("MuiSvgIcon",t)}Wn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const g0e=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${Nt(e)}`,`fontSize${Nt(n)}`]};return Un(i,m0e,r)},y0e=Zt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Nt(n.color)}`],e[`fontSize${Nt(n.fontSize)}`]]}})(ir(({theme:t})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,e])=>e&&e.main).map(([e])=>({props:{color:e},style:{color:(t.vars??t).palette?.[e]?.main}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),i4=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:a="inherit",component:s="svg",fontSize:u="medium",htmlColor:d,inheritViewBox:m=!1,titleAccess:v,viewBox:_="0 0 24 24",...O}=r,E=j.isValidElement(i)&&i.type==="svg",A={...r,color:a,component:s,fontSize:u,instanceFontSize:e.fontSize,inheritViewBox:m,viewBox:_,hasSvgAsChild:E},M={};m||(M.viewBox=_);const L=g0e(A);return q.jsxs(y0e,{as:s,className:fn(L.root,o),focusable:"false",color:d,"aria-hidden":v?void 0:!0,role:v?"img":void 0,ref:n,...M,...O,...E&&i.props,ownerState:A,children:[E?i.props.children:i,v?q.jsx("title",{children:v}):null]})});i4.muiName="SvgIcon";function ri(t,e){function n(r,i){return q.jsx(i4,{"data-testid":void 0,ref:i,...r,children:t})}return n.muiName=i4.muiName,j.memo(j.forwardRef(n))}function wk(t,e=166){let n;function r(...i){const o=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(o,e)}return r.clear=()=>{clearTimeout(n)},r}function vu(t){return t&&t.ownerDocument||document}function ph(t){return vu(t).defaultView||window}function Lj(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function E5(t){const{controlled:e,default:n,name:r,state:i="value"}=t,{current:o}=j.useRef(e!==void 0),[a,s]=j.useState(n),u=o?e:a,d=j.useCallback(m=>{o||s(m)},[]);return[u,d]}function ld(t){const e=j.useRef(t);return fh(()=>{e.current=t}),j.useRef((...n)=>(0,e.current)(...n)).current}function as(...t){const e=j.useRef(void 0),n=j.useCallback(r=>{const i=t.map(o=>{if(o==null)return null;if(typeof o=="function"){const a=o,s=a(r);return typeof s=="function"?s:()=>{a(null)}}return o.current=r,()=>{o.current=null}});return()=>{i.forEach(o=>o?.())}},t);return j.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}function v0e(t,e){const n=t.charCodeAt(2);return t[0]==="o"&&t[1]==="n"&&n>=65&&n<=90&&typeof e=="function"}function rK(t,e){if(!t)return e;function n(a,s){const u={};return Object.keys(s).forEach(d=>{v0e(d,s[d])&&typeof a[d]=="function"&&(u[d]=(...m)=>{a[d](...m),s[d](...m)})}),u}if(typeof t=="function"||typeof e=="function")return a=>{const s=typeof e=="function"?e(a):e,u=typeof t=="function"?t({...a,...s}):t,d=fn(a?.className,s?.className,u?.className),m=n(u,s);return{...s,...u,...m,...!!d&&{className:d},...s?.style&&u?.style&&{style:{...s.style,...u.style}},...s?.sx&&u?.sx&&{sx:[...Array.isArray(s.sx)?s.sx:[s.sx],...Array.isArray(u.sx)?u.sx:[u.sx]]}}};const r=e,i=n(t,r),o=fn(r?.className,t?.className);return{...e,...t,...i,...!!o&&{className:o},...r?.style&&t?.style&&{style:{...r.style,...t.style}},...r?.sx&&t?.sx&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(t.sx)?t.sx:[t.sx]]}}}function Jx(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function o4(t,e){return o4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},o4(t,e)}function iK(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o4(t,e)}const $j={disabled:!1},A5=le.createContext(null);var x0e=function(e){return e.scrollTop},cC="unmounted",Fx="exited",jx="entering",G1="entered",s4="exiting",wd=(function(t){iK(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var a=i,s=a&&!a.isMounting?r.enter:r.appear,u;return o.appearStatus=null,r.in?s?(u=Fx,o.appearStatus=jx):u=G1:r.unmountOnExit||r.mountOnEnter?u=cC:u=Fx,o.state={status:u},o.nextCallback=null,o}e.getDerivedStateFromProps=function(i,o){var a=i.in;return a&&o.status===cC?{status:Fx}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==jx&&a!==G1&&(o=jx):(a===jx||a===G1)&&(o=s4)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,a,s;return o=a=s=i,i!=null&&typeof i!="number"&&(o=i.exit,a=i.enter,s=i.appear!==void 0?i.appear:a),{exit:o,enter:a,appear:s}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===jx){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:sC.findDOMNode(this);a&&x0e(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Fx&&this.setState({status:cC})},n.performEnter=function(i){var o=this,a=this.props.enter,s=this.context?this.context.isMounting:i,u=this.props.nodeRef?[s]:[sC.findDOMNode(this),s],d=u[0],m=u[1],v=this.getTimeouts(),_=s?v.appear:v.enter;if(!i&&!a||$j.disabled){this.safeSetState({status:G1},function(){o.props.onEntered(d)});return}this.props.onEnter(d,m),this.safeSetState({status:jx},function(){o.props.onEntering(d,m),o.onTransitionEnd(_,function(){o.safeSetState({status:G1},function(){o.props.onEntered(d,m)})})})},n.performExit=function(){var i=this,o=this.props.exit,a=this.getTimeouts(),s=this.props.nodeRef?void 0:sC.findDOMNode(this);if(!o||$j.disabled){this.safeSetState({status:Fx},function(){i.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:s4},function(){i.props.onExiting(s),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:Fx},function(){i.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,a=!0;return this.nextCallback=function(s){a&&(a=!1,o.nextCallback=null,i(s))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var a=this.props.nodeRef?this.props.nodeRef.current:sC.findDOMNode(this),s=i==null&&!this.props.addEndListener;if(!a||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],d=u[0],m=u[1];this.props.addEndListener(d,m)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===cC)return null;var o=this.props,a=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var s=Jx(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return le.createElement(A5.Provider,{value:null},typeof a=="function"?a(i,s):le.cloneElement(le.Children.only(a),s))},e})(le.Component);wd.contextType=A5;wd.propTypes={};function P1(){}wd.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:P1,onEntering:P1,onEntered:P1,onExit:P1,onExiting:P1,onExited:P1};wd.UNMOUNTED=cC;wd.EXITED=Fx;wd.ENTERING=jx;wd.ENTERED=G1;wd.EXITING=s4;function _0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JN(t,e){var n=function(o){return e&&j.isValidElement(o)?e(o):o},r=Object.create(null);return t&&j.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function b0e(t,e){t=t||{},e=e||{};function n(m){return m in e?e[m]:t[m]}var r=Object.create(null),i=[];for(var o in t)o in e?i.length&&(r[o]=i,i=[]):i.push(o);var a,s={};for(var u in e){if(r[u])for(a=0;a<r[u].length;a++){var d=r[u][a];s[r[u][a]]=n(d)}s[u]=n(u)}for(a=0;a<i.length;a++)s[i[a]]=n(i[a]);return s}function e_(t,e,n){return n[e]!=null?n[e]:t.props[e]}function w0e(t,e){return JN(t.children,function(n){return j.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:e_(n,"appear",t),enter:e_(n,"enter",t),exit:e_(n,"exit",t)})})}function O0e(t,e,n){var r=JN(t.children),i=b0e(e,r);return Object.keys(i).forEach(function(o){var a=i[o];if(j.isValidElement(a)){var s=o in e,u=o in r,d=e[o],m=j.isValidElement(d)&&!d.props.in;u&&(!s||m)?i[o]=j.cloneElement(a,{onExited:n.bind(null,a),in:!0,exit:e_(a,"exit",t),enter:e_(a,"enter",t)}):!u&&s&&!m?i[o]=j.cloneElement(a,{in:!1}):u&&s&&j.isValidElement(d)&&(i[o]=j.cloneElement(a,{onExited:n.bind(null,a),in:d.props.in,exit:e_(a,"exit",t),enter:e_(a,"enter",t)}))}}),i}var S0e=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},C0e={component:"div",childFactory:function(e){return e}},eB=(function(t){iK(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var a=o.handleExited.bind(_0e(o));return o.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,o){var a=o.children,s=o.handleExited,u=o.firstRender;return{children:u?w0e(i,s):O0e(i,a,s),firstRender:!1}},n.handleExited=function(i,o){var a=JN(this.props.children);i.key in a||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(s){var u=Io({},s.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,o=i.component,a=i.childFactory,s=Jx(i,["component","childFactory"]),u=this.state.contextValue,d=S0e(this.state.children).map(a);return delete s.appear,delete s.enter,delete s.exit,o===null?le.createElement(A5.Provider,{value:u},d):le.createElement(A5.Provider,{value:u},le.createElement(o,s,d))},e})(le.Component);eB.propTypes={};eB.defaultProps=C0e;const zj={};function oK(t,e){const n=j.useRef(zj);return n.current===zj&&(n.current=t(e)),n}const T0e=[];function k0e(t){j.useEffect(t,T0e)}class DR{static create(){return new DR}currentId=null;start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function t_(){const t=oK(DR.create).current;return k0e(t.disposeEffect),t}const tB=t=>t.scrollTop;function H0(t,e){const{timeout:n,easing:r,style:i={}}=t;return{duration:i.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:i.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:i.transitionDelay}}function Uw(t){return typeof t=="string"}function sK(t,e,n){return t===void 0||Uw(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function aK(t,e,n){return typeof t=="function"?t(e,n):t}function lK(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function Nj(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function cK(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=t;if(!e){const O=fn(n?.className,o,i?.className,r?.className),E={...n?.style,...i?.style,...r?.style},A={...n,...i,...r};return O.length>0&&(A.className=O),Object.keys(E).length>0&&(A.style=E),{props:A,internalRef:void 0}}const a=lK({...i,...r}),s=Nj(r),u=Nj(i),d=e(a),m=fn(d?.className,n?.className,o,i?.className,r?.className),v={...d?.style,...n?.style,...i?.style,...r?.style},_={...d,...n,...u,...s};return m.length>0&&(_.className=m),Object.keys(v).length>0&&(_.style=v),{props:_,internalRef:d.ref}}function Xn(t,e){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,internalForwardedProps:a,shouldForwardComponentProp:s=!1,...u}=e,{component:d,slots:m={[t]:void 0},slotProps:v={[t]:void 0},..._}=o,O=m[t]||r,E=aK(v[t],i),{props:{component:A,...M},internalRef:L}=cK({className:n,...u,externalForwardedProps:t==="root"?_:void 0,externalSlotProps:E}),$=as(L,E?.ref,e.ref),N=t==="root"?A||d:A,F=sK(O,{...t==="root"&&!d&&!m[t]&&a,...t!=="root"&&!m[t]&&a,...M,...N&&!s&&{as:N},...N&&s&&{component:N},ref:$},i);return[O,F]}function E0e(t){return Qn("MuiCollapse",t)}Wn("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const A0e=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return Un(r,E0e,n)},P0e=Zt("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(ir(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),M0e=Zt("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),R0e=Zt("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),a4=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiCollapse"}),{addEndListener:i,children:o,className:a,collapsedSize:s="0px",component:u,easing:d,in:m,onEnter:v,onEntered:_,onEntering:O,onExit:E,onExited:A,onExiting:M,orientation:L="vertical",slots:$={},slotProps:N={},style:F,timeout:Q=YY.standard,TransitionComponent:W=wd,...H}=r,te={...r,orientation:L,collapsedSize:s},ne=A0e(te),ce=bd(),we=t_(),re=j.useRef(null),se=j.useRef(),be=typeof s=="number"?`${s}px`:s,fe=L==="horizontal",ve=fe?"width":"height",Me=j.useRef(null),Ne=as(n,Me),Qe=Jt=>Sn=>{if(Jt){const nn=Me.current;Sn===void 0?Jt(nn):Jt(nn,Sn)}},Ce=()=>re.current?re.current[fe?"clientWidth":"clientHeight"]:0,Ae=Qe((Jt,Sn)=>{re.current&&fe&&(re.current.style.position="absolute"),Jt.style[ve]=be,v&&v(Jt,Sn)}),Xe=Qe((Jt,Sn)=>{const nn=Ce();re.current&&fe&&(re.current.style.position="");const{duration:Cn,easing:jn}=H0({style:F,timeout:Q,easing:d},{mode:"enter"});if(Q==="auto"){const Gn=ce.transitions.getAutoHeightDuration(nn);Jt.style.transitionDuration=`${Gn}ms`,se.current=Gn}else Jt.style.transitionDuration=typeof Cn=="string"?Cn:`${Cn}ms`;Jt.style[ve]=`${nn}px`,Jt.style.transitionTimingFunction=jn,O&&O(Jt,Sn)}),ke=Qe((Jt,Sn)=>{Jt.style[ve]="auto",_&&_(Jt,Sn)}),ft=Qe(Jt=>{Jt.style[ve]=`${Ce()}px`,E&&E(Jt)}),pt=Qe(A),lt=Qe(Jt=>{const Sn=Ce(),{duration:nn,easing:Cn}=H0({style:F,timeout:Q,easing:d},{mode:"exit"});if(Q==="auto"){const jn=ce.transitions.getAutoHeightDuration(Sn);Jt.style.transitionDuration=`${jn}ms`,se.current=jn}else Jt.style.transitionDuration=typeof nn=="string"?nn:`${nn}ms`;Jt.style[ve]=be,Jt.style.transitionTimingFunction=Cn,M&&M(Jt)}),ot=Jt=>{Q==="auto"&&we.start(se.current||0,Jt),i&&i(Me.current,Jt)},yt={slots:$,slotProps:N,component:u},[Et,Tt]=Xn("root",{ref:Ne,className:fn(ne.root,a),elementType:P0e,externalForwardedProps:yt,ownerState:te,additionalProps:{style:{[fe?"minWidth":"minHeight"]:be,...F}}}),[Ht,wt]=Xn("wrapper",{ref:re,className:ne.wrapper,elementType:M0e,externalForwardedProps:yt,ownerState:te}),[un,Gt]=Xn("wrapperInner",{className:ne.wrapperInner,elementType:R0e,externalForwardedProps:yt,ownerState:te});return q.jsx(W,{in:m,onEnter:Ae,onEntered:ke,onEntering:Xe,onExit:ft,onExited:pt,onExiting:lt,addEndListener:ot,nodeRef:Me,timeout:Q==="auto"?null:Q,...H,children:(Jt,{ownerState:Sn,...nn})=>{const Cn={...te,state:Jt};return q.jsx(Et,{...Tt,className:fn(Tt.className,{entered:ne.entered,exited:!m&&be==="0px"&&ne.hidden}[Jt]),ownerState:Cn,...nn,children:q.jsx(Ht,{...wt,ownerState:Cn,children:q.jsx(un,{...Gt,ownerState:Cn,children:o})})})}})});a4&&(a4.muiSupportAuto=!0);function I0e(t){return Qn("MuiPaper",t)}Wn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const D0e=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,o={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return Un(o,I0e,i)},L0e=Zt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(ir(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),wa=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiPaper"}),i=bd(),{className:o,component:a="div",elevation:s=1,square:u=!1,variant:d="elevation",...m}=r,v={...r,component:a,elevation:s,square:u,variant:d},_=D0e(v);return q.jsx(L0e,{as:a,ownerState:v,className:fn(_.root,o),ref:n,...m,style:{...d==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[s],...i.vars&&{"--Paper-overlay":i.vars.overlays?.[s]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${sT("#fff",r4(s))}, ${sT("#fff",r4(s))})`}},...m.style}})});function Zw(t){try{return t.matches(":focus-visible")}catch{}return!1}class P5{static create(){return new P5}static use(){const e=oK(P5.create).current,[n,r]=j.useState(!1);return e.shouldMount=n,e.setShouldMount=r,j.useEffect(e.mountEffect,[n]),e}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=z0e(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...e){this.mount().then(()=>this.ref.current?.start(...e))}stop(...e){this.mount().then(()=>this.ref.current?.stop(...e))}pulsate(...e){this.mount().then(()=>this.ref.current?.pulsate(...e))}}function $0e(){return P5.use()}function z0e(){let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n}function N0e(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:a,in:s,onExited:u,timeout:d}=t,[m,v]=j.useState(!1),_=fn(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),O={width:a,height:a,top:-(a/2)+o,left:-(a/2)+i},E=fn(n.child,m&&n.childLeaving,r&&n.childPulsate);return!s&&!m&&v(!0),j.useEffect(()=>{if(!s&&u!=null){const A=setTimeout(u,d);return()=>{clearTimeout(A)}}},[u,s,d]),q.jsx("span",{className:_,style:O,children:q.jsx("span",{className:E})})}const Xh=Wn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),l4=550,B0e=80,F0e=vk`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,j0e=vk`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,V0e=vk`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Q0e=Zt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),U0e=Zt(N0e,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Xh.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${F0e};
    animation-duration: ${l4}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${Xh.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${Xh.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Xh.childLeaving} {
    opacity: 0;
    animation-name: ${j0e};
    animation-duration: ${l4}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${Xh.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${V0e};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Z0e=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:a,...s}=r,[u,d]=j.useState([]),m=j.useRef(0),v=j.useRef(null);j.useEffect(()=>{v.current&&(v.current(),v.current=null)},[u]);const _=j.useRef(!1),O=t_(),E=j.useRef(null),A=j.useRef(null),M=j.useCallback(F=>{const{pulsate:Q,rippleX:W,rippleY:H,rippleSize:te,cb:ne}=F;d(ce=>[...ce,q.jsx(U0e,{classes:{ripple:fn(o.ripple,Xh.ripple),rippleVisible:fn(o.rippleVisible,Xh.rippleVisible),ripplePulsate:fn(o.ripplePulsate,Xh.ripplePulsate),child:fn(o.child,Xh.child),childLeaving:fn(o.childLeaving,Xh.childLeaving),childPulsate:fn(o.childPulsate,Xh.childPulsate)},timeout:l4,pulsate:Q,rippleX:W,rippleY:H,rippleSize:te},m.current)]),m.current+=1,v.current=ne},[o]),L=j.useCallback((F={},Q={},W=()=>{})=>{const{pulsate:H=!1,center:te=i||Q.pulsate,fakeElement:ne=!1}=Q;if(F?.type==="mousedown"&&_.current){_.current=!1;return}F?.type==="touchstart"&&(_.current=!0);const ce=ne?null:A.current,we=ce?ce.getBoundingClientRect():{width:0,height:0,left:0,top:0};let re,se,be;if(te||F===void 0||F.clientX===0&&F.clientY===0||!F.clientX&&!F.touches)re=Math.round(we.width/2),se=Math.round(we.height/2);else{const{clientX:fe,clientY:ve}=F.touches&&F.touches.length>0?F.touches[0]:F;re=Math.round(fe-we.left),se=Math.round(ve-we.top)}if(te)be=Math.sqrt((2*we.width**2+we.height**2)/3),be%2===0&&(be+=1);else{const fe=Math.max(Math.abs((ce?ce.clientWidth:0)-re),re)*2+2,ve=Math.max(Math.abs((ce?ce.clientHeight:0)-se),se)*2+2;be=Math.sqrt(fe**2+ve**2)}F?.touches?E.current===null&&(E.current=()=>{M({pulsate:H,rippleX:re,rippleY:se,rippleSize:be,cb:W})},O.start(B0e,()=>{E.current&&(E.current(),E.current=null)})):M({pulsate:H,rippleX:re,rippleY:se,rippleSize:be,cb:W})},[i,M,O]),$=j.useCallback(()=>{L({},{pulsate:!0})},[L]),N=j.useCallback((F,Q)=>{if(O.clear(),F?.type==="touchend"&&E.current){E.current(),E.current=null,O.start(0,()=>{N(F,Q)});return}E.current=null,d(W=>W.length>0?W.slice(1):W),v.current=Q},[O]);return j.useImperativeHandle(n,()=>({pulsate:$,start:L,stop:N}),[$,L,N]),q.jsx(Q0e,{className:fn(Xh.root,o.root,a),ref:A,...s,children:q.jsx(eB,{component:null,exit:!0,children:u})})});function q0e(t){return Qn("MuiButtonBase",t)}const W0e=Wn("MuiButtonBase",["root","disabled","focusVisible"]),H0e=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,a=Un({root:["root",e&&"disabled",n&&"focusVisible"]},q0e,i);return n&&r&&(a.root+=` ${r}`),a},G0e=Zt("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${W0e.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ey=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:a,className:s,component:u="button",disabled:d=!1,disableRipple:m=!1,disableTouchRipple:v=!1,focusRipple:_=!1,focusVisibleClassName:O,LinkComponent:E="a",onBlur:A,onClick:M,onContextMenu:L,onDragLeave:$,onFocus:N,onFocusVisible:F,onKeyDown:Q,onKeyUp:W,onMouseDown:H,onMouseLeave:te,onMouseUp:ne,onTouchEnd:ce,onTouchMove:we,onTouchStart:re,tabIndex:se=0,TouchRippleProps:be,touchRippleRef:fe,type:ve,...Me}=r,Ne=j.useRef(null),Qe=$0e(),Ce=as(Qe.ref,fe),[Ae,Xe]=j.useState(!1);d&&Ae&&Xe(!1),j.useImperativeHandle(i,()=>({focusVisible:()=>{Xe(!0),Ne.current.focus()}}),[]);const ke=Qe.shouldMount&&!m&&!d;j.useEffect(()=>{Ae&&_&&!m&&Qe.pulsate()},[m,_,Ae,Qe]);const ft=Eg(Qe,"start",H,v),pt=Eg(Qe,"stop",L,v),lt=Eg(Qe,"stop",$,v),ot=Eg(Qe,"stop",ne,v),yt=Eg(Qe,"stop",Ye=>{Ae&&Ye.preventDefault(),te&&te(Ye)},v),Et=Eg(Qe,"start",re,v),Tt=Eg(Qe,"stop",ce,v),Ht=Eg(Qe,"stop",we,v),wt=Eg(Qe,"stop",Ye=>{Zw(Ye.target)||Xe(!1),A&&A(Ye)},!1),un=ld(Ye=>{Ne.current||(Ne.current=Ye.currentTarget),Zw(Ye.target)&&(Xe(!0),F&&F(Ye)),N&&N(Ye)}),Gt=()=>{const Ye=Ne.current;return u&&u!=="button"&&!(Ye.tagName==="A"&&Ye.href)},Jt=ld(Ye=>{_&&!Ye.repeat&&Ae&&Ye.key===" "&&Qe.stop(Ye,()=>{Qe.start(Ye)}),Ye.target===Ye.currentTarget&&Gt()&&Ye.key===" "&&Ye.preventDefault(),Q&&Q(Ye),Ye.target===Ye.currentTarget&&Gt()&&Ye.key==="Enter"&&!d&&(Ye.preventDefault(),M&&M(Ye))}),Sn=ld(Ye=>{_&&Ye.key===" "&&Ae&&!Ye.defaultPrevented&&Qe.stop(Ye,()=>{Qe.pulsate(Ye)}),W&&W(Ye),M&&Ye.target===Ye.currentTarget&&Gt()&&Ye.key===" "&&!Ye.defaultPrevented&&M(Ye)});let nn=u;nn==="button"&&(Me.href||Me.to)&&(nn=E);const Cn={};if(nn==="button"){const Ye=!!Me.formAction;Cn.type=ve===void 0&&!Ye?"button":ve,Cn.disabled=d}else!Me.href&&!Me.to&&(Cn.role="button"),d&&(Cn["aria-disabled"]=d);const jn=as(n,Ne),Gn={...r,centerRipple:o,component:u,disabled:d,disableRipple:m,disableTouchRipple:v,focusRipple:_,tabIndex:se,focusVisible:Ae},je=H0e(Gn);return q.jsxs(G0e,{as:nn,className:fn(je.root,s),ownerState:Gn,onBlur:wt,onClick:M,onContextMenu:pt,onFocus:un,onKeyDown:Jt,onKeyUp:Sn,onMouseDown:ft,onMouseLeave:yt,onMouseUp:ot,onDragLeave:lt,onTouchEnd:Tt,onTouchMove:Ht,onTouchStart:Et,ref:jn,tabIndex:d?-1:se,type:ve,...Cn,...Me,children:[a,ke?q.jsx(Z0e,{ref:Ce,center:o,...be}):null]})});function Eg(t,e,n,r=!1){return ld(i=>(n&&n(i),r||t[e](i),!0))}function X0e(t){return typeof t.main=="string"}function Y0e(t,e=[]){if(!X0e(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function ea(t=[]){return([,e])=>e&&Y0e(e,t)}function K0e(t){return Qn("MuiAlert",t)}const Bj=Wn("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function J0e(t){return Qn("MuiCircularProgress",t)}Wn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const yf=44,c4=vk`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,u4=vk`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,eve=typeof c4!="string"?QN`
        animation: ${c4} 1.4s linear infinite;
      `:null,tve=typeof u4!="string"?QN`
        animation: ${u4} 1.4s ease-in-out infinite;
      `:null,nve=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,o={root:["root",n,`color${Nt(r)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Nt(n)}`,i&&"circleDisableShrink"]};return Un(o,J0e,e)},rve=Zt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${Nt(n.color)}`]]}})(ir(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:eve||{animation:`${c4} 1.4s linear infinite`}},...Object.entries(t.palette).filter(ea()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),ive=Zt("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),ove=Zt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${Nt(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(ir(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:tve||{animation:`${u4} 1.4s ease-in-out infinite`}}]}))),sve=Zt("circle",{name:"MuiCircularProgress",slot:"Track"})(ir(({theme:t})=>({stroke:"currentColor",opacity:(t.vars||t).palette.action.activatedOpacity}))),wc=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:a=!1,enableTrackSlot:s=!1,size:u=40,style:d,thickness:m=3.6,value:v=0,variant:_="indeterminate",...O}=r,E={...r,color:o,disableShrink:a,size:u,thickness:m,value:v,variant:_,enableTrackSlot:s},A=nve(E),M={},L={},$={};if(_==="determinate"){const N=2*Math.PI*((yf-m)/2);M.strokeDasharray=N.toFixed(3),$["aria-valuenow"]=Math.round(v),M.strokeDashoffset=`${((100-v)/100*N).toFixed(3)}px`,L.transform="rotate(-90deg)"}return q.jsx(rve,{className:fn(A.root,i),style:{width:u,height:u,...L,...d},ownerState:E,ref:n,role:"progressbar",...$,...O,children:q.jsxs(ive,{className:A.svg,ownerState:E,viewBox:`${yf/2} ${yf/2} ${yf} ${yf}`,children:[s?q.jsx(sve,{className:A.track,ownerState:E,cx:yf,cy:yf,r:(yf-m)/2,fill:"none",strokeWidth:m,"aria-hidden":"true"}):null,q.jsx(ove,{className:A.circle,style:M,ownerState:E,cx:yf,cy:yf,r:(yf-m)/2,fill:"none",strokeWidth:m})]})})});function ave(t){return Qn("MuiIconButton",t)}const Fj=Wn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),lve=t=>{const{classes:e,disabled:n,color:r,edge:i,size:o,loading:a}=t,s={root:["root",a&&"loading",n&&"disabled",r!=="default"&&`color${Nt(r)}`,i&&`edge${Nt(i)}`,`size${Nt(o)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Un(s,ave,e)},cve=Zt(ey,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.loading&&e.loading,n.color!=="default"&&e[`color${Nt(n.color)}`],n.edge&&e[`edge${Nt(n.edge)}`],e[`size${Nt(n.size)}`]]}})(ir(({theme:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),ir(({theme:t})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(ea()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette).filter(ea()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${Fj.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled},[`&.${Fj.loading}`]:{color:"transparent"}}))),uve=Zt("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),u_=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiIconButton"}),{edge:i=!1,children:o,className:a,color:s="default",disabled:u=!1,disableFocusRipple:d=!1,size:m="medium",id:v,loading:_=null,loadingIndicator:O,...E}=r,A=VO(v),M=O??q.jsx(wc,{"aria-labelledby":A,color:"inherit",size:16}),L={...r,edge:i,color:s,disabled:u,disableFocusRipple:d,loading:_,loadingIndicator:M,size:m},$=lve(L);return q.jsxs(cve,{id:_?A:v,className:fn($.root,a),centerRipple:!0,focusRipple:!d,disabled:u||_,ref:n,...E,ownerState:L,children:[typeof _=="boolean"&&q.jsx("span",{className:$.loadingWrapper,style:{display:"contents"},children:q.jsx(uve,{className:$.loadingIndicator,ownerState:L,children:_&&M})}),o]})}),hve=ri(q.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),dve=ri(q.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),fve=ri(q.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),pve=ri(q.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),mve=ri(q.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),gve=t=>{const{variant:e,color:n,severity:r,classes:i}=t,o={root:["root",`color${Nt(n||r)}`,`${e}${Nt(n||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return Un(o,K0e,i)},yve=Zt(wa,{name:"MuiAlert",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Nt(n.color||n.severity)}`]]}})(ir(({theme:t})=>{const e=t.palette.mode==="light"?t.darken:t.lighten,n=t.palette.mode==="light"?t.lighten:t.darken;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(ea(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${r}StandardBg`]:n(t.palette[r].light,.9),[`& .${Bj.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(ea(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${Bj.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(ea(["dark"])).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert[`${r}FilledColor`],backgroundColor:t.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[r].dark:t.palette[r].main,color:t.palette.getContrastText(t.palette[r].main)}}}))]}})),vve=Zt("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),xve=Zt("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),_ve=Zt("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),jj={success:q.jsx(hve,{fontSize:"inherit"}),warning:q.jsx(dve,{fontSize:"inherit"}),error:q.jsx(fve,{fontSize:"inherit"}),info:q.jsx(pve,{fontSize:"inherit"})},V0=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiAlert"}),{action:i,children:o,className:a,closeText:s="Close",color:u,components:d={},componentsProps:m={},icon:v,iconMapping:_=jj,onClose:O,role:E="alert",severity:A="success",slotProps:M={},slots:L={},variant:$="standard",...N}=r,F={...r,color:u,severity:A,variant:$,colorSeverity:u||A},Q=gve(F),W={slots:{closeButton:d.CloseButton,closeIcon:d.CloseIcon,...L},slotProps:{...m,...M}},[H,te]=Xn("root",{ref:n,shouldForwardComponentProp:!0,className:fn(Q.root,a),elementType:yve,externalForwardedProps:{...W,...N},ownerState:F,additionalProps:{role:E,elevation:0}}),[ne,ce]=Xn("icon",{className:Q.icon,elementType:vve,externalForwardedProps:W,ownerState:F}),[we,re]=Xn("message",{className:Q.message,elementType:xve,externalForwardedProps:W,ownerState:F}),[se,be]=Xn("action",{className:Q.action,elementType:_ve,externalForwardedProps:W,ownerState:F}),[fe,ve]=Xn("closeButton",{elementType:u_,externalForwardedProps:W,ownerState:F}),[Me,Ne]=Xn("closeIcon",{elementType:mve,externalForwardedProps:W,ownerState:F});return q.jsxs(H,{...te,children:[v!==!1?q.jsx(ne,{...ce,children:v||_[A]||jj[A]}):null,q.jsx(we,{...re,children:o}),i!=null?q.jsx(se,{...be,children:i}):null,i==null&&O?q.jsx(se,{...be,children:q.jsx(fe,{size:"small","aria-label":s,title:s,color:"inherit",onClick:O,...ve,children:q.jsx(Me,{fontSize:"small",...Ne})})}):null]})});function bve(t){return Qn("MuiTypography",t)}const Vj=Wn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),wve={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Ove=p0e(),Sve=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:a}=t,s={root:["root",o,t.align!=="inherit"&&`align${Nt(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Un(s,bve,a)},Cve=Zt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Nt(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(ir(({theme:t})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([e,n])=>e!=="inherit"&&n&&typeof n=="object").map(([e,n])=>({props:{variant:e},style:n})),...Object.entries(t.palette).filter(ea()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),...Object.entries(t.palette?.text||{}).filter(([,e])=>typeof e=="string").map(([e])=>({props:{color:`text${Nt(e)}`},style:{color:(t.vars||t).palette.text[e]}})),{props:({ownerState:e})=>e.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:e})=>e.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:e})=>e.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:e})=>e.paragraph,style:{marginBottom:16}}]}))),Qj={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ar=j.forwardRef(function(e,n){const{color:r,...i}=qn({props:e,name:"MuiTypography"}),o=!wve[r],a=Ove({...i,...o&&{color:r}}),{align:s="inherit",className:u,component:d,gutterBottom:m=!1,noWrap:v=!1,paragraph:_=!1,variant:O="body1",variantMapping:E=Qj,...A}=a,M={...a,align:s,color:r,className:u,component:d,gutterBottom:m,noWrap:v,paragraph:_,variant:O,variantMapping:E},L=d||(_?"p":E[O]||Qj[O])||"span",$=Sve(M);return q.jsx(Cve,{as:L,ref:n,className:fn($.root,u),...A,ownerState:M,style:{...s!=="inherit"&&{"--Typography-textAlign":s},...A.style}})});function Tve(t){return Qn("MuiAppBar",t)}Wn("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const kve=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${Nt(e)}`,`position${Nt(n)}`]};return Un(i,Tve,r)},Uj=(t,e)=>t?`${t?.replace(")","")}, ${e})`:e,Eve=Zt(wa,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${Nt(n.position)}`],e[`color${Nt(n.color)}`]]}})(ir(({theme:t})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100]),...t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])})}},...Object.entries(t.palette).filter(ea(["contrastText"])).map(([e])=>({props:{color:e},style:{"--AppBar-background":(t.vars??t).palette[e].main,"--AppBar-color":(t.vars??t).palette[e].contrastText}})),{props:e=>e.enableColorOnDark===!0&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>e.enableColorOnDark===!1&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundColor:t.vars?Uj(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?Uj(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundImage:"none"})}}]}))),Ave=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:a=!1,position:s="fixed",...u}=r,d={...r,color:o,position:s,enableColorOnDark:a},m=kve(d);return q.jsx(Eve,{square:!0,component:"header",ownerState:d,elevation:4,className:fn(m.root,i,s==="fixed"&&"mui-fixed"),ref:n,...u})});function uK(t){const e=j.useRef({});return j.useEffect(()=>{e.current=t}),e.current}var pu="top",pd="bottom",md="right",mu="left",nB="auto",Ok=[pu,pd,md,mu],qw="start",aT="end",Pve="clippingParents",hK="viewport",R2="popper",Mve="reference",Zj=Ok.reduce(function(t,e){return t.concat([e+"-"+qw,e+"-"+aT])},[]),dK=[].concat(Ok,[nB]).reduce(function(t,e){return t.concat([e,e+"-"+qw,e+"-"+aT])},[]),Rve="beforeRead",Ive="read",Dve="afterRead",Lve="beforeMain",$ve="main",zve="afterMain",Nve="beforeWrite",Bve="write",Fve="afterWrite",jve=[Rve,Ive,Dve,Lve,$ve,zve,Nve,Bve,Fve];function gm(t){return t?(t.nodeName||"").toLowerCase():null}function mh(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function O_(t){var e=mh(t).Element;return t instanceof e||t instanceof Element}function cd(t){var e=mh(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function rB(t){if(typeof ShadowRoot>"u")return!1;var e=mh(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Vve(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!cd(o)||!gm(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(a){var s=i[a];s===!1?o.removeAttribute(a):o.setAttribute(a,s===!0?"":s)}))})}function Qve(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),s=a.reduce(function(u,d){return u[d]="",u},{});!cd(i)||!gm(i)||(Object.assign(i.style,s),Object.keys(o).forEach(function(u){i.removeAttribute(u)}))})}}const Uve={name:"applyStyles",enabled:!0,phase:"write",fn:Vve,effect:Qve,requires:["computeStyles"]};function cm(t){return t.split("-")[0]}var h_=Math.max,M5=Math.min,Ww=Math.round;function h4(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function fK(){return!/^((?!chrome|android).)*safari/i.test(h4())}function Hw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&cd(t)&&(i=t.offsetWidth>0&&Ww(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Ww(r.height)/t.offsetHeight||1);var a=O_(t)?mh(t):window,s=a.visualViewport,u=!fK()&&n,d=(r.left+(u&&s?s.offsetLeft:0))/i,m=(r.top+(u&&s?s.offsetTop:0))/o,v=r.width/i,_=r.height/o;return{width:v,height:_,top:m,right:d+v,bottom:m+_,left:d,x:d,y:m}}function iB(t){var e=Hw(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function pK(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&rB(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ty(t){return mh(t).getComputedStyle(t)}function Zve(t){return["table","td","th"].indexOf(gm(t))>=0}function cv(t){return((O_(t)?t.ownerDocument:t.document)||window.document).documentElement}function LR(t){return gm(t)==="html"?t:t.assignedSlot||t.parentNode||(rB(t)?t.host:null)||cv(t)}function qj(t){return!cd(t)||ty(t).position==="fixed"?null:t.offsetParent}function qve(t){var e=/firefox/i.test(h4()),n=/Trident/i.test(h4());if(n&&cd(t)){var r=ty(t);if(r.position==="fixed")return null}var i=LR(t);for(rB(i)&&(i=i.host);cd(i)&&["html","body"].indexOf(gm(i))<0;){var o=ty(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function Sk(t){for(var e=mh(t),n=qj(t);n&&Zve(n)&&ty(n).position==="static";)n=qj(n);return n&&(gm(n)==="html"||gm(n)==="body"&&ty(n).position==="static")?e:n||qve(t)||e}function oB(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function EC(t,e,n){return h_(t,M5(e,n))}function Wve(t,e,n){var r=EC(t,e,n);return r>n?n:r}function mK(){return{top:0,right:0,bottom:0,left:0}}function gK(t){return Object.assign({},mK(),t)}function yK(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Hve=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,gK(typeof e!="number"?e:yK(e,Ok))};function Gve(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=cm(n.placement),u=oB(s),d=[mu,md].indexOf(s)>=0,m=d?"height":"width";if(!(!o||!a)){var v=Hve(i.padding,n),_=iB(o),O=u==="y"?pu:mu,E=u==="y"?pd:md,A=n.rects.reference[m]+n.rects.reference[u]-a[u]-n.rects.popper[m],M=a[u]-n.rects.reference[u],L=Sk(o),$=L?u==="y"?L.clientHeight||0:L.clientWidth||0:0,N=A/2-M/2,F=v[O],Q=$-_[m]-v[E],W=$/2-_[m]/2+N,H=EC(F,W,Q),te=u;n.modifiersData[r]=(e={},e[te]=H,e.centerOffset=H-W,e)}}function Xve(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||pK(e.elements.popper,i)&&(e.elements.arrow=i))}const Yve={name:"arrow",enabled:!0,phase:"main",fn:Gve,effect:Xve,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Gw(t){return t.split("-")[1]}var Kve={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Jve(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Ww(n*i)/i||0,y:Ww(r*i)/i||0}}function Wj(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,a=t.offsets,s=t.position,u=t.gpuAcceleration,d=t.adaptive,m=t.roundOffsets,v=t.isFixed,_=a.x,O=_===void 0?0:_,E=a.y,A=E===void 0?0:E,M=typeof m=="function"?m({x:O,y:A}):{x:O,y:A};O=M.x,A=M.y;var L=a.hasOwnProperty("x"),$=a.hasOwnProperty("y"),N=mu,F=pu,Q=window;if(d){var W=Sk(n),H="clientHeight",te="clientWidth";if(W===mh(n)&&(W=cv(n),ty(W).position!=="static"&&s==="absolute"&&(H="scrollHeight",te="scrollWidth")),W=W,i===pu||(i===mu||i===md)&&o===aT){F=pd;var ne=v&&W===Q&&Q.visualViewport?Q.visualViewport.height:W[H];A-=ne-r.height,A*=u?1:-1}if(i===mu||(i===pu||i===pd)&&o===aT){N=md;var ce=v&&W===Q&&Q.visualViewport?Q.visualViewport.width:W[te];O-=ce-r.width,O*=u?1:-1}}var we=Object.assign({position:s},d&&Kve),re=m===!0?Jve({x:O,y:A},mh(n)):{x:O,y:A};if(O=re.x,A=re.y,u){var se;return Object.assign({},we,(se={},se[F]=$?"0":"",se[N]=L?"0":"",se.transform=(Q.devicePixelRatio||1)<=1?"translate("+O+"px, "+A+"px)":"translate3d("+O+"px, "+A+"px, 0)",se))}return Object.assign({},we,(e={},e[F]=$?A+"px":"",e[N]=L?O+"px":"",e.transform="",e))}function exe(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,a=o===void 0?!0:o,s=n.roundOffsets,u=s===void 0?!0:s,d={placement:cm(e.placement),variation:Gw(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Wj(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Wj(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const txe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:exe,data:{}};var bA={passive:!0};function nxe(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,a=r.resize,s=a===void 0?!0:a,u=mh(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&d.forEach(function(m){m.addEventListener("scroll",n.update,bA)}),s&&u.addEventListener("resize",n.update,bA),function(){o&&d.forEach(function(m){m.removeEventListener("scroll",n.update,bA)}),s&&u.removeEventListener("resize",n.update,bA)}}const rxe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nxe,data:{}};var ixe={left:"right",right:"left",bottom:"top",top:"bottom"};function qP(t){return t.replace(/left|right|bottom|top/g,function(e){return ixe[e]})}var oxe={start:"end",end:"start"};function Hj(t){return t.replace(/start|end/g,function(e){return oxe[e]})}function sB(t){var e=mh(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function aB(t){return Hw(cv(t)).left+sB(t).scrollLeft}function sxe(t,e){var n=mh(t),r=cv(t),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,u=0;if(i){o=i.width,a=i.height;var d=fK();(d||!d&&e==="fixed")&&(s=i.offsetLeft,u=i.offsetTop)}return{width:o,height:a,x:s+aB(t),y:u}}function axe(t){var e,n=cv(t),r=sB(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=h_(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=h_(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+aB(t),u=-r.scrollTop;return ty(i||n).direction==="rtl"&&(s+=h_(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:u}}function lB(t){var e=ty(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function vK(t){return["html","body","#document"].indexOf(gm(t))>=0?t.ownerDocument.body:cd(t)&&lB(t)?t:vK(LR(t))}function AC(t,e){var n;e===void 0&&(e=[]);var r=vK(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=mh(r),a=i?[o].concat(o.visualViewport||[],lB(r)?r:[]):r,s=e.concat(a);return i?s:s.concat(AC(LR(a)))}function d4(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function lxe(t,e){var n=Hw(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Gj(t,e,n){return e===hK?d4(sxe(t,n)):O_(e)?lxe(e,n):d4(axe(cv(t)))}function cxe(t){var e=AC(LR(t)),n=["absolute","fixed"].indexOf(ty(t).position)>=0,r=n&&cd(t)?Sk(t):t;return O_(r)?e.filter(function(i){return O_(i)&&pK(i,r)&&gm(i)!=="body"}):[]}function uxe(t,e,n,r){var i=e==="clippingParents"?cxe(t):[].concat(e),o=[].concat(i,[n]),a=o[0],s=o.reduce(function(u,d){var m=Gj(t,d,r);return u.top=h_(m.top,u.top),u.right=M5(m.right,u.right),u.bottom=M5(m.bottom,u.bottom),u.left=h_(m.left,u.left),u},Gj(t,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function xK(t){var e=t.reference,n=t.element,r=t.placement,i=r?cm(r):null,o=r?Gw(r):null,a=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,u;switch(i){case pu:u={x:a,y:e.y-n.height};break;case pd:u={x:a,y:e.y+e.height};break;case md:u={x:e.x+e.width,y:s};break;case mu:u={x:e.x-n.width,y:s};break;default:u={x:e.x,y:e.y}}var d=i?oB(i):null;if(d!=null){var m=d==="y"?"height":"width";switch(o){case qw:u[d]=u[d]-(e[m]/2-n[m]/2);break;case aT:u[d]=u[d]+(e[m]/2-n[m]/2);break}}return u}function lT(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,a=o===void 0?t.strategy:o,s=n.boundary,u=s===void 0?Pve:s,d=n.rootBoundary,m=d===void 0?hK:d,v=n.elementContext,_=v===void 0?R2:v,O=n.altBoundary,E=O===void 0?!1:O,A=n.padding,M=A===void 0?0:A,L=gK(typeof M!="number"?M:yK(M,Ok)),$=_===R2?Mve:R2,N=t.rects.popper,F=t.elements[E?$:_],Q=uxe(O_(F)?F:F.contextElement||cv(t.elements.popper),u,m,a),W=Hw(t.elements.reference),H=xK({reference:W,element:N,placement:i}),te=d4(Object.assign({},N,H)),ne=_===R2?te:W,ce={top:Q.top-ne.top+L.top,bottom:ne.bottom-Q.bottom+L.bottom,left:Q.left-ne.left+L.left,right:ne.right-Q.right+L.right},we=t.modifiersData.offset;if(_===R2&&we){var re=we[i];Object.keys(ce).forEach(function(se){var be=[md,pd].indexOf(se)>=0?1:-1,fe=[pu,pd].indexOf(se)>=0?"y":"x";ce[se]+=re[fe]*be})}return ce}function hxe(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,d=u===void 0?dK:u,m=Gw(r),v=m?s?Zj:Zj.filter(function(E){return Gw(E)===m}):Ok,_=v.filter(function(E){return d.indexOf(E)>=0});_.length===0&&(_=v);var O=_.reduce(function(E,A){return E[A]=lT(t,{placement:A,boundary:i,rootBoundary:o,padding:a})[cm(A)],E},{});return Object.keys(O).sort(function(E,A){return O[E]-O[A]})}function dxe(t){if(cm(t)===nB)return[];var e=qP(t);return[Hj(t),e,Hj(e)]}function fxe(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!0:a,u=n.fallbackPlacements,d=n.padding,m=n.boundary,v=n.rootBoundary,_=n.altBoundary,O=n.flipVariations,E=O===void 0?!0:O,A=n.allowedAutoPlacements,M=e.options.placement,L=cm(M),$=L===M,N=u||($||!E?[qP(M)]:dxe(M)),F=[M].concat(N).reduce(function(ft,pt){return ft.concat(cm(pt)===nB?hxe(e,{placement:pt,boundary:m,rootBoundary:v,padding:d,flipVariations:E,allowedAutoPlacements:A}):pt)},[]),Q=e.rects.reference,W=e.rects.popper,H=new Map,te=!0,ne=F[0],ce=0;ce<F.length;ce++){var we=F[ce],re=cm(we),se=Gw(we)===qw,be=[pu,pd].indexOf(re)>=0,fe=be?"width":"height",ve=lT(e,{placement:we,boundary:m,rootBoundary:v,altBoundary:_,padding:d}),Me=be?se?md:mu:se?pd:pu;Q[fe]>W[fe]&&(Me=qP(Me));var Ne=qP(Me),Qe=[];if(o&&Qe.push(ve[re]<=0),s&&Qe.push(ve[Me]<=0,ve[Ne]<=0),Qe.every(function(ft){return ft})){ne=we,te=!1;break}H.set(we,Qe)}if(te)for(var Ce=E?3:1,Ae=function(pt){var lt=F.find(function(ot){var yt=H.get(ot);if(yt)return yt.slice(0,pt).every(function(Et){return Et})});if(lt)return ne=lt,"break"},Xe=Ce;Xe>0;Xe--){var ke=Ae(Xe);if(ke==="break")break}e.placement!==ne&&(e.modifiersData[r]._skip=!0,e.placement=ne,e.reset=!0)}}const pxe={name:"flip",enabled:!0,phase:"main",fn:fxe,requiresIfExists:["offset"],data:{_skip:!1}};function Xj(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Yj(t){return[pu,md,pd,mu].some(function(e){return t[e]>=0})}function mxe(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,a=lT(e,{elementContext:"reference"}),s=lT(e,{altBoundary:!0}),u=Xj(a,r),d=Xj(s,i,o),m=Yj(u),v=Yj(d);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:d,isReferenceHidden:m,hasPopperEscaped:v},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":v})}const gxe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mxe};function yxe(t,e,n){var r=cm(t),i=[mu,pu].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[mu,md].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function vxe(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,a=dK.reduce(function(m,v){return m[v]=yxe(v,e.rects,o),m},{}),s=a[e.placement],u=s.x,d=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=a}const xxe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:vxe};function _xe(t){var e=t.state,n=t.name;e.modifiersData[n]=xK({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const bxe={name:"popperOffsets",enabled:!0,phase:"read",fn:_xe,data:{}};function wxe(t){return t==="x"?"y":"x"}function Oxe(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!1:a,u=n.boundary,d=n.rootBoundary,m=n.altBoundary,v=n.padding,_=n.tether,O=_===void 0?!0:_,E=n.tetherOffset,A=E===void 0?0:E,M=lT(e,{boundary:u,rootBoundary:d,padding:v,altBoundary:m}),L=cm(e.placement),$=Gw(e.placement),N=!$,F=oB(L),Q=wxe(F),W=e.modifiersData.popperOffsets,H=e.rects.reference,te=e.rects.popper,ne=typeof A=="function"?A(Object.assign({},e.rects,{placement:e.placement})):A,ce=typeof ne=="number"?{mainAxis:ne,altAxis:ne}:Object.assign({mainAxis:0,altAxis:0},ne),we=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,re={x:0,y:0};if(W){if(o){var se,be=F==="y"?pu:mu,fe=F==="y"?pd:md,ve=F==="y"?"height":"width",Me=W[F],Ne=Me+M[be],Qe=Me-M[fe],Ce=O?-te[ve]/2:0,Ae=$===qw?H[ve]:te[ve],Xe=$===qw?-te[ve]:-H[ve],ke=e.elements.arrow,ft=O&&ke?iB(ke):{width:0,height:0},pt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:mK(),lt=pt[be],ot=pt[fe],yt=EC(0,H[ve],ft[ve]),Et=N?H[ve]/2-Ce-yt-lt-ce.mainAxis:Ae-yt-lt-ce.mainAxis,Tt=N?-H[ve]/2+Ce+yt+ot+ce.mainAxis:Xe+yt+ot+ce.mainAxis,Ht=e.elements.arrow&&Sk(e.elements.arrow),wt=Ht?F==="y"?Ht.clientTop||0:Ht.clientLeft||0:0,un=(se=we?.[F])!=null?se:0,Gt=Me+Et-un-wt,Jt=Me+Tt-un,Sn=EC(O?M5(Ne,Gt):Ne,Me,O?h_(Qe,Jt):Qe);W[F]=Sn,re[F]=Sn-Me}if(s){var nn,Cn=F==="x"?pu:mu,jn=F==="x"?pd:md,Gn=W[Q],je=Q==="y"?"height":"width",Ye=Gn+M[Cn],vt=Gn-M[jn],kt=[pu,mu].indexOf(L)!==-1,jt=(nn=we?.[Q])!=null?nn:0,Oe=kt?Ye:Gn-H[je]-te[je]-jt+ce.altAxis,ae=kt?Gn+H[je]+te[je]-jt-ce.altAxis:vt,K=O&&kt?Wve(Oe,Gn,ae):EC(O?Oe:Ye,Gn,O?ae:vt);W[Q]=K,re[Q]=K-Gn}e.modifiersData[r]=re}}const Sxe={name:"preventOverflow",enabled:!0,phase:"main",fn:Oxe,requiresIfExists:["offset"]};function Cxe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Txe(t){return t===mh(t)||!cd(t)?sB(t):Cxe(t)}function kxe(t){var e=t.getBoundingClientRect(),n=Ww(e.width)/t.offsetWidth||1,r=Ww(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Exe(t,e,n){n===void 0&&(n=!1);var r=cd(e),i=cd(e)&&kxe(e),o=cv(e),a=Hw(t,i,n),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((gm(e)!=="body"||lB(o))&&(s=Txe(e)),cd(e)?(u=Hw(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):o&&(u.x=aB(o))),{x:a.left+s.scrollLeft-u.x,y:a.top+s.scrollTop-u.y,width:a.width,height:a.height}}function Axe(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var u=e.get(s);u&&i(u)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function Pxe(t){var e=Axe(t);return jve.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function Mxe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Rxe(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Kj={placement:"bottom",modifiers:[],strategy:"absolute"};function Jj(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Ixe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?Kj:i;return function(s,u,d){d===void 0&&(d=o);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},Kj,o),modifiersData:{},elements:{reference:s,popper:u},attributes:{},styles:{}},v=[],_=!1,O={state:m,setOptions:function(L){var $=typeof L=="function"?L(m.options):L;A(),m.options=Object.assign({},o,m.options,$),m.scrollParents={reference:O_(s)?AC(s):s.contextElement?AC(s.contextElement):[],popper:AC(u)};var N=Pxe(Rxe([].concat(r,m.options.modifiers)));return m.orderedModifiers=N.filter(function(F){return F.enabled}),E(),O.update()},forceUpdate:function(){if(!_){var L=m.elements,$=L.reference,N=L.popper;if(Jj($,N)){m.rects={reference:Exe($,Sk(N),m.options.strategy==="fixed"),popper:iB(N)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(ce){return m.modifiersData[ce.name]=Object.assign({},ce.data)});for(var F=0;F<m.orderedModifiers.length;F++){if(m.reset===!0){m.reset=!1,F=-1;continue}var Q=m.orderedModifiers[F],W=Q.fn,H=Q.options,te=H===void 0?{}:H,ne=Q.name;typeof W=="function"&&(m=W({state:m,options:te,name:ne,instance:O})||m)}}}},update:Mxe(function(){return new Promise(function(M){O.forceUpdate(),M(m)})}),destroy:function(){A(),_=!0}};if(!Jj(s,u))return O;O.setOptions(d).then(function(M){!_&&d.onFirstUpdate&&d.onFirstUpdate(M)});function E(){m.orderedModifiers.forEach(function(M){var L=M.name,$=M.options,N=$===void 0?{}:$,F=M.effect;if(typeof F=="function"){var Q=F({state:m,name:L,instance:O,options:N}),W=function(){};v.push(Q||W)}})}function A(){v.forEach(function(M){return M()}),v=[]}return O}}var Dxe=[rxe,bxe,txe,Uve,xxe,pxe,Sxe,Yve,gxe],Lxe=Ixe({defaultModifiers:Dxe});function Xw(t){const{elementType:e,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...o}=t,a=i?{}:aK(n,r),{props:s,internalRef:u}=cK({...o,externalSlotProps:a}),d=as(u,a?.ref,t.additionalProps?.ref);return sK(e,{...s,ref:d},r)}function G_(t){return parseInt(j.version,10)>=19?t?.props?.ref||null:t?.ref||null}function $xe(t){return typeof t=="function"?t():t}const _K=j.forwardRef(function(e,n){const{children:r,container:i,disablePortal:o=!1}=e,[a,s]=j.useState(null),u=as(j.isValidElement(r)?G_(r):null,n);if(fh(()=>{o||s($xe(i)||document.body)},[i,o]),fh(()=>{if(a&&!o)return Lj(n,a),()=>{Lj(n,null)}},[n,a,o]),o){if(j.isValidElement(r)){const d={ref:u};return j.cloneElement(r,d)}return r}return a&&mm.createPortal(r,a)});function zxe(t){return Qn("MuiPopper",t)}Wn("MuiPopper",["root"]);function Nxe(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function f4(t){return typeof t=="function"?t():t}function Bxe(t){return t.nodeType!==void 0}const Fxe=t=>{const{classes:e}=t;return Un({root:["root"]},zxe,e)},jxe={},Vxe=j.forwardRef(function(e,n){const{anchorEl:r,children:i,direction:o,disablePortal:a,modifiers:s,open:u,placement:d,popperOptions:m,popperRef:v,slotProps:_={},slots:O={},TransitionProps:E,ownerState:A,...M}=e,L=j.useRef(null),$=as(L,n),N=j.useRef(null),F=as(N,v),Q=j.useRef(F);fh(()=>{Q.current=F},[F]),j.useImperativeHandle(v,()=>N.current,[]);const W=Nxe(d,o),[H,te]=j.useState(W),[ne,ce]=j.useState(f4(r));j.useEffect(()=>{N.current&&N.current.forceUpdate()}),j.useEffect(()=>{r&&ce(f4(r))},[r]),fh(()=>{if(!ne||!u)return;const fe=Ne=>{te(Ne.placement)};let ve=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Ne})=>{fe(Ne)}}];s!=null&&(ve=ve.concat(s)),m&&m.modifiers!=null&&(ve=ve.concat(m.modifiers));const Me=Lxe(ne,L.current,{placement:W,...m,modifiers:ve});return Q.current(Me),()=>{Me.destroy(),Q.current(null)}},[ne,a,s,u,m,W]);const we={placement:H};E!==null&&(we.TransitionProps=E);const re=Fxe(e),se=O.root??"div",be=Xw({elementType:se,externalSlotProps:_.root,externalForwardedProps:M,additionalProps:{role:"tooltip",ref:$},ownerState:e,className:re.root});return q.jsx(se,{...be,children:typeof i=="function"?i(we):i})}),Qxe=j.forwardRef(function(e,n){const{anchorEl:r,children:i,container:o,direction:a="ltr",disablePortal:s=!1,keepMounted:u=!1,modifiers:d,open:m,placement:v="bottom",popperOptions:_=jxe,popperRef:O,style:E,transition:A=!1,slotProps:M={},slots:L={},...$}=e,[N,F]=j.useState(!0),Q=()=>{F(!1)},W=()=>{F(!0)};if(!u&&!m&&(!A||N))return null;let H;if(o)H=o;else if(r){const ce=f4(r);H=ce&&Bxe(ce)?vu(ce).body:vu(null).body}const te=!m&&u&&(!A||N)?"none":void 0,ne=A?{in:m,onEnter:Q,onExited:W}:void 0;return q.jsx(_K,{disablePortal:s,container:H,children:q.jsx(Vxe,{anchorEl:r,direction:a,disablePortal:s,modifiers:d,ref:n,open:A?!N:m,placement:v,popperOptions:_,popperRef:O,slotProps:M,slots:L,...$,style:{position:"fixed",top:0,left:0,display:te,...E},TransitionProps:ne,children:i})})}),Uxe=Zt(Qxe,{name:"MuiPopper",slot:"Root"})({}),bK=j.forwardRef(function(e,n){const r=jO(),i=qn({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:s,componentsProps:u,container:d,disablePortal:m,keepMounted:v,modifiers:_,open:O,placement:E,popperOptions:A,popperRef:M,transition:L,slots:$,slotProps:N,...F}=i,Q=$?.root??s?.Root,W={anchorEl:o,container:d,disablePortal:m,keepMounted:v,modifiers:_,open:O,placement:E,popperOptions:A,popperRef:M,transition:L,...F};return q.jsx(Uxe,{as:a,direction:r?"rtl":"ltr",slots:{root:Q},slotProps:N??u,...W,ref:n})});function Zxe(t){return Qn("MuiListSubheader",t)}Wn("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const qxe=t=>{const{classes:e,color:n,disableGutters:r,inset:i,disableSticky:o}=t,a={root:["root",n!=="default"&&`color${Nt(n)}`,!r&&"gutters",i&&"inset",!o&&"sticky"]};return Un(a,Zxe,e)},Wxe=Zt("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${Nt(n.color)}`],!n.disableGutters&&e.gutters,n.inset&&e.inset,!n.disableSticky&&e.sticky]}})(ir(({theme:t})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(t.vars||t).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:72}},{props:({ownerState:e})=>!e.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper}}]}))),p4=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiListSubheader"}),{className:i,color:o="default",component:a="li",disableGutters:s=!1,disableSticky:u=!1,inset:d=!1,...m}=r,v={...r,color:o,component:a,disableGutters:s,disableSticky:u,inset:d},_=qxe(v);return q.jsx(Wxe,{as:a,className:fn(_.root,i),ref:n,ownerState:v,...m})});p4&&(p4.muiSkipListHighlight=!0);const Hxe=ri(q.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function Gxe(t){return Qn("MuiChip",t)}const Yr=Wn("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Xxe=t=>{const{classes:e,disabled:n,size:r,color:i,iconColor:o,onDelete:a,clickable:s,variant:u}=t,d={root:["root",u,n&&"disabled",`size${Nt(r)}`,`color${Nt(i)}`,s&&"clickable",s&&`clickableColor${Nt(i)}`,a&&"deletable",a&&`deletableColor${Nt(i)}`,`${u}${Nt(i)}`],label:["label",`label${Nt(r)}`],avatar:["avatar",`avatar${Nt(r)}`,`avatarColor${Nt(i)}`],icon:["icon",`icon${Nt(r)}`,`iconColor${Nt(o)}`],deleteIcon:["deleteIcon",`deleteIcon${Nt(r)}`,`deleteIconColor${Nt(i)}`,`deleteIcon${Nt(u)}Color${Nt(i)}`]};return Un(d,Gxe,e)},Yxe=Zt("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:i,clickable:o,onDelete:a,size:s,variant:u}=n;return[{[`& .${Yr.avatar}`]:e.avatar},{[`& .${Yr.avatar}`]:e[`avatar${Nt(s)}`]},{[`& .${Yr.avatar}`]:e[`avatarColor${Nt(r)}`]},{[`& .${Yr.icon}`]:e.icon},{[`& .${Yr.icon}`]:e[`icon${Nt(s)}`]},{[`& .${Yr.icon}`]:e[`iconColor${Nt(i)}`]},{[`& .${Yr.deleteIcon}`]:e.deleteIcon},{[`& .${Yr.deleteIcon}`]:e[`deleteIcon${Nt(s)}`]},{[`& .${Yr.deleteIcon}`]:e[`deleteIconColor${Nt(r)}`]},{[`& .${Yr.deleteIcon}`]:e[`deleteIcon${Nt(u)}Color${Nt(r)}`]},e.root,e[`size${Nt(s)}`],e[`color${Nt(r)}`],o&&e.clickable,o&&r!=="default"&&e[`clickableColor${Nt(r)}`],a&&e.deletable,a&&r!=="default"&&e[`deletableColor${Nt(r)}`],e[u],e[`${u}${Nt(r)}`]]}})(ir(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,lineHeight:1.5,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Yr.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Yr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:e,fontSize:t.typography.pxToRem(12)},[`& .${Yr.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${Yr.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${Yr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${Yr.icon}`]:{marginLeft:5,marginRight:-6},[`& .${Yr.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:t.alpha((t.vars||t).palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.alpha((t.vars||t).palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${Yr.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${Yr.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(ea(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText,[`& .${Yr.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[n].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${Yr.icon}`]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:e}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${Yr.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${Yr.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}}},...Object.entries(t.palette).filter(ea(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${Yr.focusVisible}`]:{background:(t.vars||t).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)},[`&.${Yr.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.action.selected,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(ea(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${Yr.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${Yr.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${Yr.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${Yr.avatar}`]:{marginLeft:4},[`& .${Yr.avatarSmall}`]:{marginLeft:2},[`& .${Yr.icon}`]:{marginLeft:4},[`& .${Yr.iconSmall}`]:{marginLeft:2},[`& .${Yr.deleteIcon}`]:{marginRight:5},[`& .${Yr.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(t.palette).filter(ea()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(t.vars||t).palette[n].main,border:`1px solid ${t.alpha((t.vars||t).palette[n].main,.7)}`,[`&.${Yr.clickable}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.hoverOpacity)},[`&.${Yr.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette[n].main,(t.vars||t).palette.action.focusOpacity)},[`& .${Yr.deleteIcon}`]:{color:t.alpha((t.vars||t).palette[n].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].main}}}}))]}})),Kxe=Zt("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${Nt(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function eV(t){return t.key==="Backspace"||t.key==="Delete"}const Yw=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiChip"}),{avatar:i,className:o,clickable:a,color:s="default",component:u,deleteIcon:d,disabled:m=!1,icon:v,label:_,onClick:O,onDelete:E,onKeyDown:A,onKeyUp:M,size:L="medium",variant:$="filled",tabIndex:N,skipFocusWhenDisabled:F=!1,slots:Q={},slotProps:W={},...H}=r,te=j.useRef(null),ne=as(te,n),ce=lt=>{lt.stopPropagation(),E&&E(lt)},we=lt=>{lt.currentTarget===lt.target&&eV(lt)&&lt.preventDefault(),A&&A(lt)},re=lt=>{lt.currentTarget===lt.target&&E&&eV(lt)&&E(lt),M&&M(lt)},se=a!==!1&&O?!0:a,be=se||E?ey:u||"div",fe={...r,component:be,disabled:m,size:L,color:s,iconColor:j.isValidElement(v)&&v.props.color||s,onDelete:!!E,clickable:se,variant:$},ve=Xxe(fe),Me=be===ey?{component:u||"div",focusVisibleClassName:ve.focusVisible,...E&&{disableRipple:!0}}:{};let Ne=null;E&&(Ne=d&&j.isValidElement(d)?j.cloneElement(d,{className:fn(d.props.className,ve.deleteIcon),onClick:ce}):q.jsx(Hxe,{className:ve.deleteIcon,onClick:ce}));let Qe=null;i&&j.isValidElement(i)&&(Qe=j.cloneElement(i,{className:fn(ve.avatar,i.props.className)}));let Ce=null;v&&j.isValidElement(v)&&(Ce=j.cloneElement(v,{className:fn(ve.icon,v.props.className)}));const Ae={slots:Q,slotProps:W},[Xe,ke]=Xn("root",{elementType:Yxe,externalForwardedProps:{...Ae,...H},ownerState:fe,shouldForwardComponentProp:!0,ref:ne,className:fn(ve.root,o),additionalProps:{disabled:se&&m?!0:void 0,tabIndex:F&&m?-1:N,...Me},getSlotProps:lt=>({...lt,onClick:ot=>{lt.onClick?.(ot),O?.(ot)},onKeyDown:ot=>{lt.onKeyDown?.(ot),we(ot)},onKeyUp:ot=>{lt.onKeyUp?.(ot),re(ot)}})}),[ft,pt]=Xn("label",{elementType:Kxe,externalForwardedProps:Ae,ownerState:fe,className:ve.label});return q.jsxs(Xe,{as:be,...ke,children:[Qe||Ce,q.jsx(ft,{...pt,children:_}),Ne]})});function wA(t){return parseInt(t,10)||0}const Jxe={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function e_e(t){for(const e in t)return!1;return!0}function tV(t){return e_e(t)||t.outerHeightStyle===0&&!t.overflowing}const t_e=j.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:o=1,style:a,value:s,...u}=e,{current:d}=j.useRef(s!=null),m=j.useRef(null),v=as(n,m),_=j.useRef(null),O=j.useRef(null),E=j.useCallback(()=>{const N=m.current,F=O.current;if(!N||!F)return;const W=ph(N).getComputedStyle(N);if(W.width==="0px")return{outerHeightStyle:0,overflowing:!1};F.style.width=W.width,F.value=N.value||e.placeholder||"x",F.value.slice(-1)===`
`&&(F.value+=" ");const H=W.boxSizing,te=wA(W.paddingBottom)+wA(W.paddingTop),ne=wA(W.borderBottomWidth)+wA(W.borderTopWidth),ce=F.scrollHeight;F.value="x";const we=F.scrollHeight;let re=ce;o&&(re=Math.max(Number(o)*we,re)),i&&(re=Math.min(Number(i)*we,re)),re=Math.max(re,we);const se=re+(H==="border-box"?te+ne:0),be=Math.abs(re-ce)<=1;return{outerHeightStyle:se,overflowing:be}},[i,o,e.placeholder]),A=ld(()=>{const N=m.current,F=E();if(!N||!F||tV(F))return!1;const Q=F.outerHeightStyle;return _.current!=null&&_.current!==Q}),M=j.useCallback(()=>{const N=m.current,F=E();if(!N||!F||tV(F))return;const Q=F.outerHeightStyle;_.current!==Q&&(_.current=Q,N.style.height=`${Q}px`),N.style.overflow=F.overflowing?"hidden":""},[E]),L=j.useRef(-1);fh(()=>{const N=wk(M),F=m?.current;if(!F)return;const Q=ph(F);Q.addEventListener("resize",N);let W;return typeof ResizeObserver<"u"&&(W=new ResizeObserver(()=>{A()&&(W.unobserve(F),cancelAnimationFrame(L.current),M(),L.current=requestAnimationFrame(()=>{W.observe(F)}))}),W.observe(F)),()=>{N.clear(),cancelAnimationFrame(L.current),Q.removeEventListener("resize",N),W&&W.disconnect()}},[E,M,A]),fh(()=>{M()});const $=N=>{d||M();const F=N.target,Q=F.value.length,W=F.value.endsWith(`
`),H=F.selectionStart===Q;W&&H&&F.setSelectionRange(Q,Q),r&&r(N)};return q.jsxs(j.Fragment,{children:[q.jsx("textarea",{value:s,onChange:$,ref:v,rows:o,style:a,...u}),q.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:O,tabIndex:-1,style:{...Jxe.shadow,...a,paddingTop:0,paddingBottom:0}})]})});function X_({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const cB=j.createContext(void 0);function uv(){return j.useContext(cB)}function nV(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function R5(t,e=!1){return t&&(nV(t.value)&&t.value!==""||e&&nV(t.defaultValue)&&t.defaultValue!=="")}function n_e(t){return t.startAdornment}function r_e(t){return Qn("MuiInputBase",t)}const Kw=Wn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var rV;const $R=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${Nt(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},zR=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},i_e=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:o,focused:a,formControl:s,fullWidth:u,hiddenLabel:d,multiline:m,readOnly:v,size:_,startAdornment:O,type:E}=t,A={root:["root",`color${Nt(n)}`,r&&"disabled",i&&"error",u&&"fullWidth",a&&"focused",s&&"formControl",_&&_!=="medium"&&`size${Nt(_)}`,m&&"multiline",O&&"adornedStart",o&&"adornedEnd",d&&"hiddenLabel",v&&"readOnly"],input:["input",r&&"disabled",E==="search"&&"inputTypeSearch",m&&"inputMultiline",_==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",O&&"inputAdornedStart",o&&"inputAdornedEnd",v&&"readOnly"]};return Un(A,r_e,e)},NR=Zt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:$R})(ir(({theme:t})=>({...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Kw.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:n})=>e.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),BR=Zt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:zR})(ir(({theme:t})=>{const e=t.palette.mode==="light",n={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},r={opacity:"0 !important"},i=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Kw.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${Kw.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:({ownerState:o})=>!o.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:o})=>o.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),iV=KN({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),uB=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:o,autoFocus:a,className:s,color:u,components:d={},componentsProps:m={},defaultValue:v,disabled:_,disableInjectingGlobalStyles:O,endAdornment:E,error:A,fullWidth:M=!1,id:L,inputComponent:$="input",inputProps:N={},inputRef:F,margin:Q,maxRows:W,minRows:H,multiline:te=!1,name:ne,onBlur:ce,onChange:we,onClick:re,onFocus:se,onKeyDown:be,onKeyUp:fe,placeholder:ve,readOnly:Me,renderSuffix:Ne,rows:Qe,size:Ce,slotProps:Ae={},slots:Xe={},startAdornment:ke,type:ft="text",value:pt,...lt}=r,ot=N.value!=null?N.value:pt,{current:yt}=j.useRef(ot!=null),Et=j.useRef(),Tt=j.useCallback(ze=>{},[]),Ht=as(Et,F,N.ref,Tt),[wt,un]=j.useState(!1),Gt=uv(),Jt=X_({props:r,muiFormControl:Gt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Jt.focused=Gt?Gt.focused:wt,j.useEffect(()=>{!Gt&&_&&wt&&(un(!1),ce&&ce())},[Gt,_,wt,ce]);const Sn=Gt&&Gt.onFilled,nn=Gt&&Gt.onEmpty,Cn=j.useCallback(ze=>{R5(ze)?Sn&&Sn():nn&&nn()},[Sn,nn]);fh(()=>{yt&&Cn({value:ot})},[ot,Cn,yt]);const jn=ze=>{se&&se(ze),N.onFocus&&N.onFocus(ze),Gt&&Gt.onFocus?Gt.onFocus(ze):un(!0)},Gn=ze=>{ce&&ce(ze),N.onBlur&&N.onBlur(ze),Gt&&Gt.onBlur?Gt.onBlur(ze):un(!1)},je=(ze,...nt)=>{if(!yt){const tt=ze.target||Et.current;if(tt==null)throw new Error(Jg(1));Cn({value:tt.value})}N.onChange&&N.onChange(ze,...nt),we&&we(ze,...nt)};j.useEffect(()=>{Cn(Et.current)},[]);const Ye=ze=>{Et.current&&ze.currentTarget===ze.target&&Et.current.focus(),re&&re(ze)};let vt=$,kt=N;te&&vt==="input"&&(Qe?kt={type:void 0,minRows:Qe,maxRows:Qe,...kt}:kt={type:void 0,maxRows:W,minRows:H,...kt},vt=t_e);const jt=ze=>{Cn(ze.animationName==="mui-auto-fill-cancel"?Et.current:{value:"x"})};j.useEffect(()=>{Gt&&Gt.setAdornedStart(!!ke)},[Gt,ke]);const Oe={...r,color:Jt.color||"primary",disabled:Jt.disabled,endAdornment:E,error:Jt.error,focused:Jt.focused,formControl:Gt,fullWidth:M,hiddenLabel:Jt.hiddenLabel,multiline:te,size:Jt.size,startAdornment:ke,type:ft},ae=i_e(Oe),K=Xe.root||d.Root||NR,_e=Ae.root||m.root||{},$e=Xe.input||d.Input||BR;return kt={...kt,...Ae.input??m.input},q.jsxs(j.Fragment,{children:[!O&&typeof iV=="function"&&(rV||(rV=q.jsx(iV,{}))),q.jsxs(K,{..._e,ref:n,onClick:Ye,...lt,...!Uw(K)&&{ownerState:{...Oe,..._e.ownerState}},className:fn(ae.root,_e.className,s,Me&&"MuiInputBase-readOnly"),children:[ke,q.jsx(cB.Provider,{value:null,children:q.jsx($e,{"aria-invalid":Jt.error,"aria-describedby":i,autoComplete:o,autoFocus:a,defaultValue:v,disabled:Jt.disabled,id:L,onAnimationStart:jt,name:ne,placeholder:ve,readOnly:Me,required:Jt.required,rows:Qe,value:ot,onKeyDown:be,onKeyUp:fe,type:ft,...kt,...!Uw($e)&&{as:vt,ownerState:{...Oe,...kt.ownerState}},ref:Ht,className:fn(ae.input,kt.className,Me&&"MuiInputBase-readOnly"),onBlur:Gn,onChange:je,onFocus:jn})}),E,Ne?Ne({...Jt,startAdornment:ke}):null]})]})});function o_e(t){return Qn("MuiInput",t)}const I2={...Kw,...Wn("MuiInput",["root","underline","input"])};function s_e(t){return Qn("MuiOutlinedInput",t)}const $p={...Kw,...Wn("MuiOutlinedInput",["root","notchedOutline","input"])};function a_e(t){return Qn("MuiFilledInput",t)}const Rx={...Kw,...Wn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},l_e=ri(q.jsx("path",{d:"M7 10l5 5 5-5z"})),c_e=ri(q.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));function u_e(t){return Qn("MuiAvatar",t)}Wn("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const h_e=t=>{const{classes:e,variant:n,colorDefault:r}=t;return Un({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},u_e,e)},d_e=Zt("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],n.colorDefault&&e.colorDefault]}})(ir(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(t.vars||t).palette.background.default,...t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:t.palette.grey[400],...t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})}}}]}))),f_e=Zt("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),p_e=Zt(c_e,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"});function m_e({crossOrigin:t,referrerPolicy:e,src:n,srcSet:r}){const[i,o]=j.useState(!1);return j.useEffect(()=>{if(!n&&!r)return;o(!1);let a=!0;const s=new Image;return s.onload=()=>{a&&o("loaded")},s.onerror=()=>{a&&o("error")},s.crossOrigin=t,s.referrerPolicy=e,s.src=n,r&&(s.srcset=r),()=>{a=!1}},[t,e,n,r]),i}const Ck=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiAvatar"}),{alt:i,children:o,className:a,component:s="div",slots:u={},slotProps:d={},imgProps:m,sizes:v,src:_,srcSet:O,variant:E="circular",...A}=r;let M=null;const L={...r,component:s,variant:E},$=m_e({...m,...typeof d.img=="function"?d.img(L):d.img,src:_,srcSet:O}),N=_||O,F=N&&$!=="error";L.colorDefault=!F,delete L.ownerState;const Q=h_e(L),[W,H]=Xn("root",{ref:n,className:fn(Q.root,a),elementType:d_e,externalForwardedProps:{slots:u,slotProps:d,component:s,...A},ownerState:L}),[te,ne]=Xn("img",{className:Q.img,elementType:f_e,externalForwardedProps:{slots:u,slotProps:{img:{...m,...d.img}}},additionalProps:{alt:i,src:_,srcSet:O,sizes:v},ownerState:L}),[ce,we]=Xn("fallback",{className:Q.fallback,elementType:p_e,externalForwardedProps:{slots:u,slotProps:d},shouldForwardComponentProp:!0,ownerState:L});return F?M=q.jsx(te,{...ne}):o||o===0?M=o:N&&i?M=i[0]:M=q.jsx(ce,{...we}),q.jsx(W,{...H,children:M})}),g_e={entering:{opacity:1},entered:{opacity:1}},m4=j.forwardRef(function(e,n){const r=bd(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:s,easing:u,in:d,onEnter:m,onEntered:v,onEntering:_,onExit:O,onExited:E,onExiting:A,style:M,timeout:L=i,TransitionComponent:$=wd,...N}=e,F=j.useRef(null),Q=as(F,G_(s),n),W=be=>fe=>{if(be){const ve=F.current;fe===void 0?be(ve):be(ve,fe)}},H=W(_),te=W((be,fe)=>{tB(be);const ve=H0({style:M,timeout:L,easing:u},{mode:"enter"});be.style.webkitTransition=r.transitions.create("opacity",ve),be.style.transition=r.transitions.create("opacity",ve),m&&m(be,fe)}),ne=W(v),ce=W(A),we=W(be=>{const fe=H0({style:M,timeout:L,easing:u},{mode:"exit"});be.style.webkitTransition=r.transitions.create("opacity",fe),be.style.transition=r.transitions.create("opacity",fe),O&&O(be)}),re=W(E),se=be=>{o&&o(F.current,be)};return q.jsx($,{appear:a,in:d,nodeRef:F,onEnter:te,onEntered:ne,onEntering:H,onExit:we,onExited:re,onExiting:ce,addEndListener:se,timeout:L,...N,children:(be,{ownerState:fe,...ve})=>j.cloneElement(s,{style:{opacity:0,visibility:be==="exited"&&!d?"hidden":void 0,...g_e[be],...M,...s.props.style},ref:Q,...ve})})});function y_e(t){return Qn("MuiBackdrop",t)}Wn("MuiBackdrop",["root","invisible"]);const v_e=t=>{const{classes:e,invisible:n}=t;return Un({root:["root",n&&"invisible"]},y_e,e)},x_e=Zt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),wK=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiBackdrop"}),{children:i,className:o,component:a="div",invisible:s=!1,open:u,components:d={},componentsProps:m={},slotProps:v={},slots:_={},TransitionComponent:O,transitionDuration:E,...A}=r,M={...r,component:a,invisible:s},L=v_e(M),$={transition:O,root:d.Root,..._},N={...m,...v},F={component:a,slots:$,slotProps:N},[Q,W]=Xn("root",{elementType:x_e,externalForwardedProps:F,className:fn(L.root,o),ownerState:M}),[H,te]=Xn("transition",{elementType:m4,externalForwardedProps:F,ownerState:M});return q.jsx(H,{in:u,timeout:E,...A,...te,children:q.jsx(Q,{"aria-hidden":!0,...W,classes:L,ref:n,children:i})})});function __e(t){const{badgeContent:e,invisible:n=!1,max:r=99,showZero:i=!1}=t,o=uK({badgeContent:e,max:r});let a=n;n===!1&&e===0&&!i&&(a=!0);const{badgeContent:s,max:u=r}=a?o:t,d=s&&Number(s)>u?`${u}+`:s;return{badgeContent:s,invisible:a,max:u,displayValue:d}}function b_e(t){return Qn("MuiBadge",t)}const w0=Wn("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),l3=10,c3=4,w_e=t=>{const{color:e,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:a={}}=t,s={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${Nt(n.vertical)}${Nt(n.horizontal)}`,`anchorOrigin${Nt(n.vertical)}${Nt(n.horizontal)}${Nt(i)}`,`overlap${Nt(i)}`,e!=="default"&&`color${Nt(e)}`]};return Un(s,b_e,a)},O_e=Zt("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),S_e=Zt("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.badge,e[n.variant],e[`anchorOrigin${Nt(n.anchorOrigin.vertical)}${Nt(n.anchorOrigin.horizontal)}${Nt(n.overlap)}`],n.color!=="default"&&e[`color${Nt(n.color)}`],n.invisible&&e.invisible]}})(ir(({theme:t})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:l3*2,lineHeight:1,padding:"0 6px",height:l3*2,borderRadius:l3,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.entries(t.palette).filter(ea(["contrastText"])).map(([e])=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}})),{props:{variant:"dot"},style:{borderRadius:c3,height:c3*2,minWidth:c3*2,padding:0}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${w0.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${w0.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${w0.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${w0.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${w0.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${w0.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${w0.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${w0.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]})));function oV(t){return{vertical:t?.vertical??"top",horizontal:t?.horizontal??"right"}}const C_e=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiBadge"}),{anchorOrigin:i,className:o,classes:a,component:s,components:u={},componentsProps:d={},children:m,overlap:v="rectangular",color:_="default",invisible:O=!1,max:E=99,badgeContent:A,slots:M,slotProps:L,showZero:$=!1,variant:N="standard",...F}=r,{badgeContent:Q,invisible:W,max:H,displayValue:te}=__e({max:E,invisible:O,badgeContent:A,showZero:$}),ne=uK({anchorOrigin:oV(i),color:_,overlap:v,variant:N,badgeContent:A}),ce=W||Q==null&&N!=="dot",{color:we=_,overlap:re=v,anchorOrigin:se,variant:be=N}=ce?ne:r,fe=oV(se),ve=be!=="dot"?te:void 0,Me={...r,badgeContent:Q,invisible:ce,max:H,displayValue:ve,showZero:$,anchorOrigin:fe,color:we,overlap:re,variant:be},Ne=w_e(Me),Qe={slots:{root:M?.root??u.Root,badge:M?.badge??u.Badge},slotProps:{root:L?.root??d.root,badge:L?.badge??d.badge}},[Ce,Ae]=Xn("root",{elementType:O_e,externalForwardedProps:{...Qe,...F},ownerState:Me,className:fn(Ne.root,o),ref:n,additionalProps:{as:s}}),[Xe,ke]=Xn("badge",{elementType:S_e,externalForwardedProps:Qe,ownerState:Me,className:Ne.badge});return q.jsxs(Ce,{...Ae,children:[m,q.jsx(Xe,{...ke,children:ve})]})}),T_e=Wn("MuiBox",["root"]),k_e=tK(),zn=Ige({themeId:mk,defaultTheme:k_e,defaultClassName:T_e.root,generateClassName:BY.generate});function E_e(t){return Qn("MuiButton",t)}const Ix=Wn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),A_e=j.createContext({}),P_e=j.createContext(void 0),M_e=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:o,loading:a,loadingPosition:s,classes:u}=t,d={root:["root",a&&"loading",o,`${o}${Nt(e)}`,`size${Nt(i)}`,`${o}Size${Nt(i)}`,`color${Nt(e)}`,n&&"disableElevation",r&&"fullWidth",a&&`loadingPosition${Nt(s)}`],startIcon:["icon","startIcon",`iconSize${Nt(i)}`],endIcon:["icon","endIcon",`iconSize${Nt(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},m=Un(d,E_e,u);return{...u,...m}},OK=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],R_e=Zt(ey,{shouldForwardProp:t=>Sc(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Nt(n.color)}`],e[`size${Nt(n.size)}`],e[`${n.variant}Size${Nt(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,n.loading&&e.loading]}})(ir(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],n=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Ix.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${Ix.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${Ix.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Ix.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(ea()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.alpha((t.vars||t).palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.alpha((t.vars||t).palette[r].main,(t.vars||t).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity),"--variant-outlinedBg":t.alpha((t.vars||t).palette.text.primary,(t.vars||t).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Ix.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Ix.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${Ix.loading}`]:{color:"transparent"}}}]}})),I_e=Zt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,n.loading&&e.startIconLoadingStart,e[`iconSize${Nt(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...OK]})),D_e=Zt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,n.loading&&e.endIconLoadingEnd,e[`iconSize${Nt(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...OK]})),L_e=Zt("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),sV=Zt("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),gi=j.forwardRef(function(e,n){const r=j.useContext(A_e),i=j.useContext(P_e),o=oT(r,e),a=qn({props:o,name:"MuiButton"}),{children:s,color:u="primary",component:d="button",className:m,disabled:v=!1,disableElevation:_=!1,disableFocusRipple:O=!1,endIcon:E,focusVisibleClassName:A,fullWidth:M=!1,id:L,loading:$=null,loadingIndicator:N,loadingPosition:F="center",size:Q="medium",startIcon:W,type:H,variant:te="text",...ne}=a,ce=VO(L),we=N??q.jsx(wc,{"aria-labelledby":ce,color:"inherit",size:16}),re={...a,color:u,component:d,disabled:v,disableElevation:_,disableFocusRipple:O,fullWidth:M,loading:$,loadingIndicator:we,loadingPosition:F,size:Q,type:H,variant:te},se=M_e(re),be=(W||$&&F==="start")&&q.jsx(I_e,{className:se.startIcon,ownerState:re,children:W||q.jsx(sV,{className:se.loadingIconPlaceholder,ownerState:re})}),fe=(E||$&&F==="end")&&q.jsx(D_e,{className:se.endIcon,ownerState:re,children:E||q.jsx(sV,{className:se.loadingIconPlaceholder,ownerState:re})}),ve=i||"",Me=typeof $=="boolean"?q.jsx("span",{className:se.loadingWrapper,style:{display:"contents"},children:$&&q.jsx(L_e,{className:se.loadingIndicator,ownerState:re,children:we})}):null;return q.jsxs(R_e,{ownerState:re,className:fn(r.className,se.root,m,ve),component:d,disabled:v||$,focusRipple:!O,focusVisibleClassName:fn(se.focusVisible,A),ref:n,type:H,id:$?ce:L,...ne,classes:se,children:[be,F!=="end"&&Me,s,F==="end"&&Me,fe]})});function $_e(t){return Qn("MuiCard",t)}Wn("MuiCard",["root"]);const z_e=t=>{const{classes:e}=t;return Un({root:["root"]},$_e,e)},N_e=Zt(wa,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),B_e=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiCard"}),{className:i,raised:o=!1,...a}=r,s={...r,raised:o},u=z_e(s);return q.jsx(N_e,{className:fn(u.root,i),elevation:o?8:void 0,ref:n,ownerState:s,...a})});function F_e(t){return Qn("MuiCardActions",t)}Wn("MuiCardActions",["root","spacing"]);const j_e=t=>{const{classes:e,disableSpacing:n}=t;return Un({root:["root",!n&&"spacing"]},F_e,e)},V_e=Zt("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Q_e=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:o,...a}=r,s={...r,disableSpacing:i},u=j_e(s);return q.jsx(V_e,{className:fn(u.root,o),ownerState:s,ref:n,...a})});function U_e(t){return Qn("MuiCardContent",t)}Wn("MuiCardContent",["root"]);const Z_e=t=>{const{classes:e}=t;return Un({root:["root"]},U_e,e)},q_e=Zt("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),W_e=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiCardContent"}),{className:i,component:o="div",...a}=r,s={...r,component:o},u=Z_e(s);return q.jsx(q_e,{as:o,className:fn(u.root,i),ownerState:s,ref:n,...a})});function H_e(t){return Qn("PrivateSwitchBase",t)}Wn("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const G_e=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${Nt(i)}`],input:["input"]};return Un(o,H_e,e)},X_e=Zt(ey,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:t,ownerState:e})=>t==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:t,ownerState:e})=>t==="end"&&e.size!=="small",style:{marginRight:-12}}]}),Y_e=Zt("input",{name:"MuiSwitchBase",shouldForwardProp:Sc})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),K_e=j.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:o,defaultChecked:a,disabled:s,disableFocusRipple:u=!1,edge:d=!1,icon:m,id:v,inputProps:_,inputRef:O,name:E,onBlur:A,onChange:M,onFocus:L,readOnly:$,required:N=!1,tabIndex:F,type:Q,value:W,slots:H={},slotProps:te={},...ne}=e,[ce,we]=E5({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),re=uv(),se=pt=>{L&&L(pt),re&&re.onFocus&&re.onFocus(pt)},be=pt=>{A&&A(pt),re&&re.onBlur&&re.onBlur(pt)},fe=pt=>{if(pt.nativeEvent.defaultPrevented)return;const lt=pt.target.checked;we(lt),M&&M(pt,lt)};let ve=s;re&&typeof ve>"u"&&(ve=re.disabled);const Me=Q==="checkbox"||Q==="radio",Ne={...e,checked:ce,disabled:ve,disableFocusRipple:u,edge:d},Qe=G_e(Ne),Ce={slots:H,slotProps:{input:_,...te}},[Ae,Xe]=Xn("root",{ref:n,elementType:X_e,className:Qe.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Ce,component:"span",...ne},getSlotProps:pt=>({...pt,onFocus:lt=>{pt.onFocus?.(lt),se(lt)},onBlur:lt=>{pt.onBlur?.(lt),be(lt)}}),ownerState:Ne,additionalProps:{centerRipple:!0,focusRipple:!u,disabled:ve,role:void 0,tabIndex:null}}),[ke,ft]=Xn("input",{ref:O,elementType:Y_e,className:Qe.input,externalForwardedProps:Ce,getSlotProps:pt=>({...pt,onChange:lt=>{pt.onChange?.(lt),fe(lt)}}),ownerState:Ne,additionalProps:{autoFocus:r,checked:i,defaultChecked:a,disabled:ve,id:Me?v:void 0,name:E,readOnly:$,required:N,tabIndex:F,type:Q,...Q==="checkbox"&&W===void 0?{}:{value:W}}});return q.jsxs(Ae,{...Xe,children:[q.jsx(ke,{...ft}),ce?o:m]})}),Jw=dye({createStyledComponent:Zt("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${Nt(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>qn({props:t,name:"MuiContainer"})}),g4=typeof KN({})=="function",J_e=(t,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!t.vars&&{colorScheme:t.palette.mode}}),ebe=t=>({color:(t.vars||t).palette.text.primary,...t.typography.body1,backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),SK=(t,e=!1)=>{const n={};e&&t.colorSchemes&&typeof t.getColorSchemeSelector=="function"&&Object.entries(t.colorSchemes).forEach(([o,a])=>{const s=t.getColorSchemeSelector(o);s.startsWith("@")?n[s]={":root":{colorScheme:a.palette?.mode}}:n[s.replace(/\s*&/,"")]={colorScheme:a.palette?.mode}});let r={html:J_e(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:{margin:0,...ebe(t),"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}},...n};const i=t.components?.MuiCssBaseline?.styleOverrides;return i&&(r=[r,i]),r},WP="mui-ecs",tbe=t=>{const e=SK(t,!1),n=Array.isArray(e)?e[0]:e;return!t.vars&&n&&(n.html[`:root:has(${WP})`]={colorScheme:t.palette.mode}),t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([r,i])=>{const o=t.getColorSchemeSelector(r);o.startsWith("@")?n[o]={[`:root:not(:has(.${WP}))`]:{colorScheme:i.palette?.mode}}:n[o.replace(/\s*&/,"")]={[`&:not(:has(.${WP}))`]:{colorScheme:i.palette?.mode}}}),e},nbe=KN(g4?({theme:t,enableColorScheme:e})=>SK(t,e):({theme:t})=>tbe(t));function rbe(t){const e=qn({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return q.jsxs(j.Fragment,{children:[g4&&q.jsx(nbe,{enableColorScheme:r}),!g4&&!r&&q.jsx("span",{className:WP,style:{display:"none"}}),n]})}function CK(t=window){const e=t.document.documentElement.clientWidth;return t.innerWidth-e}function ibe(t){const e=vu(t);return e.body===t?ph(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function PC(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function aV(t){return parseInt(ph(t).getComputedStyle(t).paddingRight,10)||0}function obe(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function lV(t,e,n,r,i){const o=[e,n,...r];[].forEach.call(t.children,a=>{const s=!o.includes(a),u=!obe(a);s&&u&&PC(a,i)})}function u3(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function sbe(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(ibe(r)){const a=CK(ph(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${aV(r)+a}px`;const s=vu(r).querySelectorAll(".mui-fixed");[].forEach.call(s,u=>{n.push({value:u.style.paddingRight,property:"padding-right",el:u}),u.style.paddingRight=`${aV(u)+a}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=vu(r).body;else{const a=r.parentElement,s=ph(r);o=a?.nodeName==="HTML"&&s.getComputedStyle(a).overflowY==="scroll"?a:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{n.forEach(({value:o,el:a,property:s})=>{o?a.style.setProperty(s,o):a.style.removeProperty(s)})}}function abe(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class lbe{constructor(){this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&PC(e.modalRef,!1);const i=abe(n);lV(n,e.mount,e.modalRef,i,!0);const o=u3(this.containers,a=>a.container===n);return o!==-1?(this.containers[o].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=u3(this.containers,o=>o.modals.includes(e)),i=this.containers[r];i.restore||(i.restore=sbe(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=u3(this.containers,a=>a.modals.includes(e)),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&PC(e.modalRef,n),lV(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const a=o.modals[o.modals.length-1];a.modalRef&&PC(a.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function aw(t){let e=t.activeElement;for(;e?.shadowRoot?.activeElement!=null;)e=e.shadowRoot.activeElement;return e}const cbe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function ube(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function hbe(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function dbe(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||hbe(t))}function fbe(t){const e=[],n=[];return Array.from(t.querySelectorAll(cbe)).forEach((r,i)=>{const o=ube(r);o===-1||!dbe(r)||(o===0?e.push(r):n.push({documentOrder:i,tabIndex:o,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function pbe(){return!0}function mbe(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=fbe,isEnabled:a=pbe,open:s}=t,u=j.useRef(!1),d=j.useRef(null),m=j.useRef(null),v=j.useRef(null),_=j.useRef(null),O=j.useRef(!1),E=j.useRef(null),A=as(G_(e),E),M=j.useRef(null);j.useEffect(()=>{!s||!E.current||(O.current=!n)},[n,s]),j.useEffect(()=>{if(!s||!E.current)return;const N=vu(E.current),F=aw(N);return E.current.contains(F)||(E.current.hasAttribute("tabIndex")||E.current.setAttribute("tabIndex","-1"),O.current&&E.current.focus()),()=>{i||(v.current&&v.current.focus&&(u.current=!0,v.current.focus()),v.current=null)}},[s]),j.useEffect(()=>{if(!s||!E.current)return;const N=vu(E.current),F=aw(N),Q=te=>{M.current=te,!(r||!a()||te.key!=="Tab")&&F===E.current&&te.shiftKey&&(u.current=!0,m.current&&m.current.focus())},W=()=>{const te=E.current;if(te===null)return;const ne=aw(N);if(!N.hasFocus()||!a()||u.current){u.current=!1;return}if(te.contains(ne)||r&&ne!==d.current&&ne!==m.current)return;if(ne!==_.current)_.current=null;else if(_.current!==null)return;if(!O.current)return;let ce=[];if((ne===d.current||ne===m.current)&&(ce=o(E.current)),ce.length>0){const we=!!(M.current?.shiftKey&&M.current?.key==="Tab"),re=ce[0],se=ce[ce.length-1];typeof re!="string"&&typeof se!="string"&&(we?se.focus():re.focus())}else te.focus()};N.addEventListener("focusin",W),N.addEventListener("keydown",Q,!0);const H=setInterval(()=>{const te=aw(N);te&&te.tagName==="BODY"&&W()},50);return()=>{clearInterval(H),N.removeEventListener("focusin",W),N.removeEventListener("keydown",Q,!0)}},[n,r,i,a,s,o]);const L=N=>{v.current===null&&(v.current=N.relatedTarget),O.current=!0,_.current=N.target;const F=e.props.onFocus;F&&F(N)},$=N=>{v.current===null&&(v.current=N.relatedTarget),O.current=!0};return q.jsxs(j.Fragment,{children:[q.jsx("div",{tabIndex:s?0:-1,onFocus:$,ref:d,"data-testid":"sentinelStart"}),j.cloneElement(e,{ref:A,onFocus:L}),q.jsx("div",{tabIndex:s?0:-1,onFocus:$,ref:m,"data-testid":"sentinelEnd"})]})}function gbe(t){return typeof t=="function"?t():t}function ybe(t){return t?t.props.hasOwnProperty("in"):!1}const cV=()=>{},OA=new lbe;function vbe(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:o,onTransitionExited:a,children:s,onClose:u,open:d,rootRef:m}=t,v=j.useRef({}),_=j.useRef(null),O=j.useRef(null),E=as(O,m),[A,M]=j.useState(!d),L=ybe(s);let $=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&($=!1);const N=()=>vu(_.current),F=()=>(v.current.modalRef=O.current,v.current.mount=_.current,v.current),Q=()=>{OA.mount(F(),{disableScrollLock:r}),O.current&&(O.current.scrollTop=0)},W=ld(()=>{const fe=gbe(e)||N().body;OA.add(F(),fe),O.current&&Q()}),H=()=>OA.isTopModal(F()),te=ld(fe=>{_.current=fe,fe&&(d&&H()?Q():O.current&&PC(O.current,$))}),ne=j.useCallback(()=>{OA.remove(F(),$)},[$]);j.useEffect(()=>()=>{ne()},[ne]),j.useEffect(()=>{d?W():(!L||!i)&&ne()},[d,ne,L,i,W]);const ce=fe=>ve=>{fe.onKeyDown?.(ve),!(ve.key!=="Escape"||ve.which===229||!H())&&(n||(ve.stopPropagation(),u&&u(ve,"escapeKeyDown")))},we=fe=>ve=>{fe.onClick?.(ve),ve.target===ve.currentTarget&&u&&u(ve,"backdropClick")};return{getRootProps:(fe={})=>{const ve=lK(t);delete ve.onTransitionEnter,delete ve.onTransitionExited;const Me={...ve,...fe};return{role:"presentation",...Me,onKeyDown:ce(Me),ref:E}},getBackdropProps:(fe={})=>{const ve=fe;return{"aria-hidden":!0,...ve,onClick:we(ve),open:d}},getTransitionProps:()=>{const fe=()=>{M(!1),o&&o()},ve=()=>{M(!0),a&&a(),i&&ne()};return{onEnter:Dj(fe,s?.props.onEnter??cV),onExited:Dj(ve,s?.props.onExited??cV)}},rootRef:E,portalRef:te,isTopModal:H,exited:A,hasTransition:L}}function xbe(t){return Qn("MuiModal",t)}Wn("MuiModal",["root","hidden","backdrop"]);const _be=t=>{const{open:e,exited:n,classes:r}=t;return Un({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},xbe,r)},bbe=Zt("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(ir(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),wbe=Zt(wK,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),hB=j.forwardRef(function(e,n){const r=qn({name:"MuiModal",props:e}),{BackdropComponent:i=wbe,BackdropProps:o,classes:a,className:s,closeAfterTransition:u=!1,children:d,container:m,component:v,components:_={},componentsProps:O={},disableAutoFocus:E=!1,disableEnforceFocus:A=!1,disableEscapeKeyDown:M=!1,disablePortal:L=!1,disableRestoreFocus:$=!1,disableScrollLock:N=!1,hideBackdrop:F=!1,keepMounted:Q=!1,onClose:W,onTransitionEnter:H,onTransitionExited:te,open:ne,slotProps:ce={},slots:we={},theme:re,...se}=r,be={...r,closeAfterTransition:u,disableAutoFocus:E,disableEnforceFocus:A,disableEscapeKeyDown:M,disablePortal:L,disableRestoreFocus:$,disableScrollLock:N,hideBackdrop:F,keepMounted:Q},{getRootProps:fe,getBackdropProps:ve,getTransitionProps:Me,portalRef:Ne,isTopModal:Qe,exited:Ce,hasTransition:Ae}=vbe({...be,rootRef:n}),Xe={...be,exited:Ce},ke=_be(Xe),ft={};if(d.props.tabIndex===void 0&&(ft.tabIndex="-1"),Ae){const{onEnter:Tt,onExited:Ht}=Me();ft.onEnter=Tt,ft.onExited=Ht}const pt={slots:{root:_.Root,backdrop:_.Backdrop,...we},slotProps:{...O,...ce}},[lt,ot]=Xn("root",{ref:n,elementType:bbe,externalForwardedProps:{...pt,...se,component:v},getSlotProps:fe,ownerState:Xe,className:fn(s,ke?.root,!Xe.open&&Xe.exited&&ke?.hidden)}),[yt,Et]=Xn("backdrop",{ref:o?.ref,elementType:i,externalForwardedProps:pt,shouldForwardComponentProp:!0,additionalProps:o,getSlotProps:Tt=>ve({...Tt,onClick:Ht=>{Tt?.onClick&&Tt.onClick(Ht)}}),className:fn(o?.className,ke?.backdrop),ownerState:Xe});return!Q&&!ne&&(!Ae||Ce)?null:q.jsx(_K,{ref:Ne,container:m,disablePortal:L,children:q.jsxs(lt,{...ot,children:[!F&&i?q.jsx(yt,{...Et}):null,q.jsx(mbe,{disableEnforceFocus:A,disableAutoFocus:E,disableRestoreFocus:$,isEnabled:Qe,open:ne,children:j.cloneElement(d,ft)})]})})});function Obe(t){return Qn("MuiDialog",t)}const h3=Wn("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),TK=j.createContext({}),Sbe=Zt(wK,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),Cbe=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=t,a={root:["root"],container:["container",`scroll${Nt(n)}`],paper:["paper",`paperScroll${Nt(n)}`,`paperWidth${Nt(String(r))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return Un(a,Obe,e)},Tbe=Zt(hB,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),kbe=Zt("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${Nt(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),Ebe=Zt(wa,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${Nt(n.scroll)}`],e[`paperWidth${Nt(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(ir(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${h3.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${h3.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${h3.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),cT=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiDialog"}),i=bd(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":s,"aria-modal":u=!0,BackdropComponent:d,BackdropProps:m,children:v,className:_,disableEscapeKeyDown:O=!1,fullScreen:E=!1,fullWidth:A=!1,maxWidth:M="sm",onClick:L,onClose:$,open:N,PaperComponent:F=wa,PaperProps:Q={},scroll:W="paper",slots:H={},slotProps:te={},TransitionComponent:ne=m4,transitionDuration:ce=o,TransitionProps:we,...re}=r,se={...r,disableEscapeKeyDown:O,fullScreen:E,fullWidth:A,maxWidth:M,scroll:W},be=Cbe(se),fe=j.useRef(),ve=un=>{fe.current=un.target===un.currentTarget},Me=un=>{L&&L(un),fe.current&&(fe.current=null,$&&$(un,"backdropClick"))},Ne=VO(s),Qe=j.useMemo(()=>({titleId:Ne}),[Ne]),Ce={transition:ne,...H},Ae={transition:we,paper:Q,backdrop:m,...te},Xe={slots:Ce,slotProps:Ae},[ke,ft]=Xn("root",{elementType:Tbe,shouldForwardComponentProp:!0,externalForwardedProps:Xe,ownerState:se,className:fn(be.root,_),ref:n}),[pt,lt]=Xn("backdrop",{elementType:Sbe,shouldForwardComponentProp:!0,externalForwardedProps:Xe,ownerState:se}),[ot,yt]=Xn("paper",{elementType:Ebe,shouldForwardComponentProp:!0,externalForwardedProps:Xe,ownerState:se,className:fn(be.paper,Q.className)}),[Et,Tt]=Xn("container",{elementType:kbe,externalForwardedProps:Xe,ownerState:se,className:be.container}),[Ht,wt]=Xn("transition",{elementType:m4,externalForwardedProps:Xe,ownerState:se,additionalProps:{appear:!0,in:N,timeout:ce,role:"presentation"}});return q.jsx(ke,{closeAfterTransition:!0,slots:{backdrop:pt},slotProps:{backdrop:{transitionDuration:ce,as:d,...lt}},disableEscapeKeyDown:O,onClose:$,open:N,onClick:Me,...ft,...re,children:q.jsx(Ht,{...wt,children:q.jsx(Et,{onMouseDown:ve,...Tt,children:q.jsx(ot,{as:F,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":Ne,"aria-modal":u,...yt,children:q.jsx(TK.Provider,{value:Qe,children:v})})})})})});function Abe(t){return Qn("MuiDialogActions",t)}Wn("MuiDialogActions",["root","spacing"]);const Pbe=t=>{const{classes:e,disableSpacing:n}=t;return Un({root:["root",!n&&"spacing"]},Abe,e)},Mbe=Zt("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),FR=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:o=!1,...a}=r,s={...r,disableSpacing:o},u=Pbe(s);return q.jsx(Mbe,{className:fn(u.root,i),ownerState:s,ref:n,...a})});function Rbe(t){return Qn("MuiDialogContent",t)}Wn("MuiDialogContent",["root","dividers"]);function Ibe(t){return Qn("MuiDialogTitle",t)}const Dbe=Wn("MuiDialogTitle",["root"]),Lbe=t=>{const{classes:e,dividers:n}=t;return Un({root:["root",n&&"dividers"]},Rbe,e)},$be=Zt("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(ir(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${Dbe.root} + &`]:{paddingTop:0}}}]}))),jR=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiDialogContent"}),{className:i,dividers:o=!1,...a}=r,s={...r,dividers:o},u=Lbe(s);return q.jsx($be,{className:fn(u.root,i),ownerState:s,ref:n,...a})}),zbe=t=>{const{classes:e}=t;return Un({root:["root"]},Ibe,e)},Nbe=Zt(ar,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),VR=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiDialogTitle"}),{className:i,id:o,...a}=r,s=r,u=zbe(s),{titleId:d=o}=j.useContext(TK);return q.jsx(Nbe,{component:"h2",className:fn(u.root,i),ownerState:s,ref:n,variant:"h6",id:o??d,...a})});function Bbe(t){return Qn("MuiDivider",t)}const uV=Wn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Fbe=t=>{const{absolute:e,children:n,classes:r,flexItem:i,light:o,orientation:a,textAlign:s,variant:u}=t;return Un({root:["root",e&&"absolute",u,o&&"light",a==="vertical"&&"vertical",i&&"flexItem",n&&"withChildren",n&&a==="vertical"&&"withChildrenVertical",s==="right"&&a!=="vertical"&&"textAlignRight",s==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},Bbe,r)},jbe=Zt("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,n.orientation==="vertical"&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&n.orientation==="vertical"&&e.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&e.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&e.textAlignLeft]}})(ir(({theme:t})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.alpha((t.vars||t).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),Vbe=Zt("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,n.orientation==="vertical"&&e.wrapperVertical]}})(ir(({theme:t})=>({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}}]}))),rd=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiDivider"}),{absolute:i=!1,children:o,className:a,orientation:s="horizontal",component:u=o||s==="vertical"?"div":"hr",flexItem:d=!1,light:m=!1,role:v=u!=="hr"?"separator":void 0,textAlign:_="center",variant:O="fullWidth",...E}=r,A={...r,absolute:i,component:u,flexItem:d,light:m,orientation:s,role:v,textAlign:_,variant:O},M=Fbe(A);return q.jsx(jbe,{as:u,className:fn(M.root,a),role:v,ref:n,ownerState:A,"aria-orientation":v==="separator"&&(u!=="hr"||s==="vertical")?s:void 0,...E,children:o?q.jsx(Vbe,{className:M.wrapper,ownerState:A,children:o}):null})});rd&&(rd.muiSkipListHighlight=!0);function Qbe(t,e,n){const r=e.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=ph(e);let a;if(e.fakeTransform)a=e.fakeTransform;else{const d=o.getComputedStyle(e);a=d.getPropertyValue("-webkit-transform")||d.getPropertyValue("transform")}let s=0,u=0;if(a&&a!=="none"&&typeof a=="string"){const d=a.split("(")[1].split(")")[0].split(",");s=parseInt(d[4],10),u=parseInt(d[5],10)}return t==="left"?i?`translateX(${i.right+s-r.left}px)`:`translateX(${o.innerWidth+s-r.left}px)`:t==="right"?i?`translateX(-${r.right-i.left-s}px)`:`translateX(-${r.left+r.width-s}px)`:t==="up"?i?`translateY(${i.bottom+u-r.top}px)`:`translateY(${o.innerHeight+u-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-u}px)`:`translateY(-${r.top+r.height-u}px)`}function Ube(t){return typeof t=="function"?t():t}function SA(t,e,n){const r=Ube(n),i=Qbe(t,e,r);i&&(e.style.webkitTransform=i,e.style.transform=i)}const Zbe=j.forwardRef(function(e,n){const r=bd(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:s=!0,children:u,container:d,direction:m="down",easing:v=i,in:_,onEnter:O,onEntered:E,onEntering:A,onExit:M,onExited:L,onExiting:$,style:N,timeout:F=o,TransitionComponent:Q=wd,...W}=e,H=j.useRef(null),te=as(G_(u),H,n),ne=Ne=>Qe=>{Ne&&(Qe===void 0?Ne(H.current):Ne(H.current,Qe))},ce=ne((Ne,Qe)=>{SA(m,Ne,d),tB(Ne),O&&O(Ne,Qe)}),we=ne((Ne,Qe)=>{const Ce=H0({timeout:F,style:N,easing:v},{mode:"enter"});Ne.style.webkitTransition=r.transitions.create("-webkit-transform",{...Ce}),Ne.style.transition=r.transitions.create("transform",{...Ce}),Ne.style.webkitTransform="none",Ne.style.transform="none",A&&A(Ne,Qe)}),re=ne(E),se=ne($),be=ne(Ne=>{const Qe=H0({timeout:F,style:N,easing:v},{mode:"exit"});Ne.style.webkitTransition=r.transitions.create("-webkit-transform",Qe),Ne.style.transition=r.transitions.create("transform",Qe),SA(m,Ne,d),M&&M(Ne)}),fe=ne(Ne=>{Ne.style.webkitTransition="",Ne.style.transition="",L&&L(Ne)}),ve=Ne=>{a&&a(H.current,Ne)},Me=j.useCallback(()=>{H.current&&SA(m,H.current,d)},[m,d]);return j.useEffect(()=>{if(_||m==="down"||m==="right")return;const Ne=wk(()=>{H.current&&SA(m,H.current,d)}),Qe=ph(H.current);return Qe.addEventListener("resize",Ne),()=>{Ne.clear(),Qe.removeEventListener("resize",Ne)}},[m,_,d]),j.useEffect(()=>{_||Me()},[_,Me]),q.jsx(Q,{nodeRef:H,onEnter:ce,onEntered:re,onEntering:we,onExit:be,onExited:fe,onExiting:se,addEndListener:ve,appear:s,in:_,timeout:F,...W,children:(Ne,{ownerState:Qe,...Ce})=>j.cloneElement(u,{ref:te,style:{visibility:Ne==="exited"&&!_?"hidden":void 0,...N,...u.props.style},...Ce})})});function qbe(t){return Qn("MuiDrawer",t)}Wn("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const kK=(t,e)=>{const{ownerState:n}=t;return[e.root,(n.variant==="permanent"||n.variant==="persistent")&&e.docked,e.modal]},Wbe=t=>{const{classes:e,anchor:n,variant:r}=t,i={root:["root",`anchor${Nt(n)}`],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Nt(n)}`,r!=="temporary"&&`paperAnchorDocked${Nt(n)}`]};return Un(i,qbe,e)},Hbe=Zt(hB,{name:"MuiDrawer",slot:"Root",overridesResolver:kK})(ir(({theme:t})=>({zIndex:(t.vars||t).zIndex.drawer}))),Gbe=Zt("div",{shouldForwardProp:Sc,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:kK})({flex:"0 0 auto"}),Xbe=Zt(wa,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`paperAnchor${Nt(n.anchor)}`],n.variant!=="temporary"&&e[`paperAnchorDocked${Nt(n.anchor)}`]]}})(ir(({theme:t})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:e})=>e.anchor==="left"&&e.variant!=="temporary",style:{borderRight:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="top"&&e.variant!=="temporary",style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="right"&&e.variant!=="temporary",style:{borderLeft:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="bottom"&&e.variant!=="temporary",style:{borderTop:`1px solid ${(t.vars||t).palette.divider}`}}]}))),EK={left:"right",right:"left",top:"down",bottom:"up"};function Ybe(t){return["left","right"].includes(t)}function Kbe({direction:t},e){return t==="rtl"&&Ybe(e)?EK[e]:e}const Jbe=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiDrawer"}),i=bd(),o=jO(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:u,children:d,className:m,elevation:v=16,hideBackdrop:_=!1,ModalProps:{BackdropProps:O,...E}={},onClose:A,open:M=!1,PaperProps:L={},SlideProps:$,TransitionComponent:N,transitionDuration:F=a,variant:Q="temporary",slots:W={},slotProps:H={},...te}=r,ne=j.useRef(!1);j.useEffect(()=>{ne.current=!0},[]);const ce=Kbe({direction:o?"rtl":"ltr"},s),re={...r,anchor:s,elevation:v,open:M,variant:Q,...te},se=Wbe(re),be={slots:{transition:N,...W},slotProps:{paper:L,transition:$,...H,backdrop:rK(H.backdrop||{...u,...O},{transitionDuration:F})}},[fe,ve]=Xn("root",{ref:n,elementType:Hbe,className:fn(se.root,se.modal,m),shouldForwardComponentProp:!0,ownerState:re,externalForwardedProps:{...be,...te,...E},additionalProps:{open:M,onClose:A,hideBackdrop:_,slots:{backdrop:be.slots.backdrop},slotProps:{backdrop:be.slotProps.backdrop}}}),[Me,Ne]=Xn("paper",{elementType:Xbe,shouldForwardComponentProp:!0,className:fn(se.paper,L.className),ownerState:re,externalForwardedProps:be,additionalProps:{elevation:Q==="temporary"?v:0,square:!0,...Q==="temporary"&&{role:"dialog","aria-modal":"true"}}}),[Qe,Ce]=Xn("docked",{elementType:Gbe,ref:n,className:fn(se.root,se.docked,m),ownerState:re,externalForwardedProps:be,additionalProps:te}),[Ae,Xe]=Xn("transition",{elementType:Zbe,ownerState:re,externalForwardedProps:be,additionalProps:{in:M,direction:EK[ce],timeout:F,appear:ne.current}}),ke=q.jsx(Me,{...Ne,children:d});if(Q==="permanent")return q.jsx(Qe,{...Ce,children:ke});const ft=q.jsx(Ae,{...Xe,children:ke});return Q==="persistent"?q.jsx(Qe,{...Ce,children:ft}):q.jsx(fe,{...ve,children:ft})}),e1e=t=>{const{classes:e,disableUnderline:n,startAdornment:r,endAdornment:i,size:o,hiddenLabel:a,multiline:s}=t,u={root:["root",!n&&"underline",r&&"adornedStart",i&&"adornedEnd",o==="small"&&`size${Nt(o)}`,a&&"hiddenLabel",s&&"multiline"],input:["input"]},d=Un(u,a_e,e);return{...e,...d}},t1e=Zt(NR,{shouldForwardProp:t=>Sc(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...$R(t,e),!n.disableUnderline&&e.underline]}})(ir(({theme:t})=>{const e=t.palette.mode==="light",n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r}},[`&.${Rx.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:r},[`&.${Rx.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:o},variants:[{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Rx.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Rx.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline):n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Rx.disabled}, .${Rx.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Rx.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(ea()).map(([a])=>({props:{disableUnderline:!1,color:a},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[a]?.main}`}}})),{props:({ownerState:a})=>a.startAdornment,style:{paddingLeft:12}},{props:({ownerState:a})=>a.endAdornment,style:{paddingRight:12}},{props:({ownerState:a})=>a.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:a,size:s})=>a.multiline&&s==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:a})=>a.multiline&&a.hiddenLabel&&a.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),n1e=Zt(BR,{name:"MuiFilledInput",slot:"Input",overridesResolver:zR})(ir(({theme:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),dB=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:o={},componentsProps:a,fullWidth:s=!1,hiddenLabel:u,inputComponent:d="input",multiline:m=!1,slotProps:v,slots:_={},type:O="text",...E}=r,A={...r,disableUnderline:i,fullWidth:s,inputComponent:d,multiline:m,type:O},M=e1e(r),L={root:{ownerState:A},input:{ownerState:A}},$=v??a?Fa(L,v??a):L,N=_.root??o.Root??t1e,F=_.input??o.Input??n1e;return q.jsx(uB,{slots:{root:N,input:F},slotProps:$,fullWidth:s,inputComponent:d,multiline:m,ref:n,type:O,...E,classes:M})});dB.muiName="Input";function r1e(t){return Qn("MuiFormControl",t)}Wn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const i1e=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${Nt(n)}`,r&&"fullWidth"]};return Un(i,r1e,e)},o1e=Zt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`margin${Nt(n.margin)}`],n.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),n_=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiFormControl"}),{children:i,className:o,color:a="primary",component:s="div",disabled:u=!1,error:d=!1,focused:m,fullWidth:v=!1,hiddenLabel:_=!1,margin:O="none",required:E=!1,size:A="medium",variant:M="outlined",...L}=r,$={...r,color:a,component:s,disabled:u,error:d,fullWidth:v,hiddenLabel:_,margin:O,required:E,size:A,variant:M},N=i1e($),[F,Q]=j.useState(()=>{let fe=!1;return i&&j.Children.forEach(i,ve=>{if(!kC(ve,["Input","Select"]))return;const Me=kC(ve,["Select"])?ve.props.input:ve;Me&&n_e(Me.props)&&(fe=!0)}),fe}),[W,H]=j.useState(()=>{let fe=!1;return i&&j.Children.forEach(i,ve=>{kC(ve,["Input","Select"])&&(R5(ve.props,!0)||R5(ve.props.inputProps,!0))&&(fe=!0)}),fe}),[te,ne]=j.useState(!1);u&&te&&ne(!1);const ce=m!==void 0&&!u?m:te;let we;j.useRef(!1);const re=j.useCallback(()=>{H(!0)},[]),se=j.useCallback(()=>{H(!1)},[]),be=j.useMemo(()=>({adornedStart:F,setAdornedStart:Q,color:a,disabled:u,error:d,filled:W,focused:ce,fullWidth:v,hiddenLabel:_,size:A,onBlur:()=>{ne(!1)},onFocus:()=>{ne(!0)},onEmpty:se,onFilled:re,registerEffect:we,required:E,variant:M}),[F,a,u,d,W,ce,v,_,we,se,re,E,A,M]);return q.jsx(cB.Provider,{value:be,children:q.jsx(o1e,{as:s,ownerState:$,className:fn(N.root,o),ref:n,...L,children:i})})});function s1e(t){return Qn("MuiFormControlLabel",t)}const uC=Wn("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),a1e=t=>{const{classes:e,disabled:n,labelPlacement:r,error:i,required:o}=t,a={root:["root",n&&"disabled",`labelPlacement${Nt(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return Un(a,s1e,e)},l1e=Zt("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${uC.label}`]:e.label},e.root,e[`labelPlacement${Nt(n.labelPlacement)}`]]}})(ir(({theme:t})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${uC.disabled}`]:{cursor:"default"},[`& .${uC.label}`]:{[`&.${uC.disabled}`]:{color:(t.vars||t).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),c1e=Zt("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(ir(({theme:t})=>({[`&.${uC.error}`]:{color:(t.vars||t).palette.error.main}}))),fB=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiFormControlLabel"}),{checked:i,className:o,componentsProps:a={},control:s,disabled:u,disableTypography:d,inputRef:m,label:v,labelPlacement:_="end",name:O,onChange:E,required:A,slots:M={},slotProps:L={},value:$,...N}=r,F=uv(),Q=u??s.props.disabled??F?.disabled,W=A??s.props.required,H={disabled:Q,required:W};["checked","name","onChange","value","inputRef"].forEach(fe=>{typeof s.props[fe]>"u"&&typeof r[fe]<"u"&&(H[fe]=r[fe])});const te=X_({props:r,muiFormControl:F,states:["error"]}),ne={...r,disabled:Q,labelPlacement:_,required:W,error:te.error},ce=a1e(ne),we={slots:M,slotProps:{...a,...L}},[re,se]=Xn("typography",{elementType:ar,externalForwardedProps:we,ownerState:ne});let be=v;return be!=null&&be.type!==ar&&!d&&(be=q.jsx(re,{component:"span",...se,className:fn(ce.label,se?.className),children:be})),q.jsxs(l1e,{className:fn(ce.root,o),ownerState:ne,ref:n,...N,children:[j.cloneElement(s,H),W?q.jsxs("div",{children:[be,q.jsxs(c1e,{ownerState:ne,"aria-hidden":!0,className:ce.asterisk,children:["","*"]})]}):be]})});function u1e(t){return Qn("MuiFormHelperText",t)}const hV=Wn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var dV;const h1e=t=>{const{classes:e,contained:n,size:r,disabled:i,error:o,filled:a,focused:s,required:u}=t,d={root:["root",i&&"disabled",o&&"error",r&&`size${Nt(r)}`,n&&"contained",s&&"focused",a&&"filled",u&&"required"]};return Un(d,u1e,e)},d1e=Zt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${Nt(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(ir(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${hV.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${hV.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),f1e=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiFormHelperText"}),{children:i,className:o,component:a="p",disabled:s,error:u,filled:d,focused:m,margin:v,required:_,variant:O,...E}=r,A=uv(),M=X_({props:r,muiFormControl:A,states:["variant","size","disabled","error","filled","focused","required"]}),L={...r,component:a,contained:M.variant==="filled"||M.variant==="outlined",variant:M.variant,size:M.size,disabled:M.disabled,error:M.error,filled:M.filled,focused:M.focused,required:M.required};delete L.ownerState;const $=h1e(L);return q.jsx(d1e,{as:a,className:fn($.root,o),ref:n,...E,ownerState:L,children:i===" "?dV||(dV=q.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):i})});function p1e(t){return Qn("MuiFormLabel",t)}const MC=Wn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),m1e=t=>{const{classes:e,color:n,focused:r,disabled:i,error:o,filled:a,required:s}=t,u={root:["root",`color${Nt(n)}`,i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]};return Un(u,p1e,e)},g1e=Zt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled]}})(ir(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(ea()).map(([e])=>({props:{color:e},style:{[`&.${MC.focused}`]:{color:(t.vars||t).palette[e].main}}})),{props:{},style:{[`&.${MC.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${MC.error}`]:{color:(t.vars||t).palette.error.main}}}]}))),y1e=Zt("span",{name:"MuiFormLabel",slot:"Asterisk"})(ir(({theme:t})=>({[`&.${MC.error}`]:{color:(t.vars||t).palette.error.main}}))),v1e=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiFormLabel"}),{children:i,className:o,color:a,component:s="label",disabled:u,error:d,filled:m,focused:v,required:_,...O}=r,E=uv(),A=X_({props:r,muiFormControl:E,states:["color","required","focused","disabled","error","filled"]}),M={...r,color:A.color||"primary",component:s,disabled:A.disabled,error:A.error,filled:A.filled,focused:A.focused,required:A.required},L=m1e(M);return q.jsxs(g1e,{as:s,ownerState:M,className:fn(L.root,o),ref:n,...O,children:[i,A.required&&q.jsxs(y1e,{ownerState:M,"aria-hidden":!0,className:L.asterisk,children:["","*"]})]})}),Ux=Eye({createStyledComponent:Zt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.container&&e.container]}}),componentName:"MuiGrid",useThemeProps:t=>qn({props:t,name:"MuiGrid"}),useTheme:bd});function y4(t){return`scale(${t}, ${t**2})`}const x1e={entering:{opacity:1,transform:y4(1)},entered:{opacity:1,transform:"none"}},d3=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),I5=j.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:a,in:s,onEnter:u,onEntered:d,onEntering:m,onExit:v,onExited:_,onExiting:O,style:E,timeout:A="auto",TransitionComponent:M=wd,...L}=e,$=t_(),N=j.useRef(),F=bd(),Q=j.useRef(null),W=as(Q,G_(o),n),H=fe=>ve=>{if(fe){const Me=Q.current;ve===void 0?fe(Me):fe(Me,ve)}},te=H(m),ne=H((fe,ve)=>{tB(fe);const{duration:Me,delay:Ne,easing:Qe}=H0({style:E,timeout:A,easing:a},{mode:"enter"});let Ce;A==="auto"?(Ce=F.transitions.getAutoHeightDuration(fe.clientHeight),N.current=Ce):Ce=Me,fe.style.transition=[F.transitions.create("opacity",{duration:Ce,delay:Ne}),F.transitions.create("transform",{duration:d3?Ce:Ce*.666,delay:Ne,easing:Qe})].join(","),u&&u(fe,ve)}),ce=H(d),we=H(O),re=H(fe=>{const{duration:ve,delay:Me,easing:Ne}=H0({style:E,timeout:A,easing:a},{mode:"exit"});let Qe;A==="auto"?(Qe=F.transitions.getAutoHeightDuration(fe.clientHeight),N.current=Qe):Qe=ve,fe.style.transition=[F.transitions.create("opacity",{duration:Qe,delay:Me}),F.transitions.create("transform",{duration:d3?Qe:Qe*.666,delay:d3?Me:Me||Qe*.333,easing:Ne})].join(","),fe.style.opacity=0,fe.style.transform=y4(.75),v&&v(fe)}),se=H(_),be=fe=>{A==="auto"&&$.start(N.current||0,fe),r&&r(Q.current,fe)};return q.jsx(M,{appear:i,in:s,nodeRef:Q,onEnter:ne,onEntered:ce,onEntering:te,onExit:re,onExited:se,onExiting:we,addEndListener:be,timeout:A==="auto"?null:A,...L,children:(fe,{ownerState:ve,...Me})=>j.cloneElement(o,{style:{opacity:0,transform:y4(.75),visibility:fe==="exited"&&!s?"hidden":void 0,...x1e[fe],...E,...o.props.style},ref:W,...Me})})});I5&&(I5.muiSupportAuto=!0);const _1e=t=>{const{classes:e,disableUnderline:n}=t,i=Un({root:["root",!n&&"underline"],input:["input"]},o_e,e);return{...e,...i}},b1e=Zt(NR,{shouldForwardProp:t=>Sc(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...$R(t,e),!n.disableUnderline&&e.underline]}})(ir(({theme:t})=>{let n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=t.alpha(t.vars.palette.common.onBackground,t.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${I2.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${I2.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${I2.disabled}, .${I2.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${I2.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(ea()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[r].main}`}}}))]}})),w1e=Zt(BR,{name:"MuiInput",slot:"Input",overridesResolver:zR})({}),pB=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiInput"}),{disableUnderline:i=!1,components:o={},componentsProps:a,fullWidth:s=!1,inputComponent:u="input",multiline:d=!1,slotProps:m,slots:v={},type:_="text",...O}=r,E=_1e(r),M={root:{ownerState:{disableUnderline:i}}},L=m??a?Fa(m??a,M):M,$=v.root??o.Root??b1e,N=v.input??o.Input??w1e;return q.jsx(uB,{slots:{root:$,input:N},slotProps:L,fullWidth:s,inputComponent:u,multiline:d,ref:n,type:_,...O,classes:E})});pB.muiName="Input";function O1e(t){return Qn("MuiInputLabel",t)}Wn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const S1e=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:o,variant:a,required:s}=t,u={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&r!=="medium"&&`size${Nt(r)}`,a],asterisk:[s&&"asterisk"]},d=Un(u,O1e,e);return{...e,...d}},C1e=Zt(v1e,{shouldForwardProp:t=>Sc(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${MC.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(ir(({theme:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:n,size:r})=>e==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:n})=>e==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),r_=j.forwardRef(function(e,n){const r=qn({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,margin:o,shrink:a,variant:s,className:u,...d}=r,m=uv();let v=a;typeof v>"u"&&m&&(v=m.filled||m.focused||m.adornedStart);const _=X_({props:r,muiFormControl:m,states:["size","variant","required","focused"]}),O={...r,disableAnimation:i,formControl:m,shrink:v,size:_.size,variant:_.variant,required:_.required,focused:_.focused},E=S1e(O);return q.jsx(C1e,{"data-shrink":v,ref:n,className:fn(E.root,u),...d,ownerState:O,classes:E})});function T1e(t){return Qn("MuiLink",t)}const k1e=Wn("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),E1e=({theme:t,ownerState:e})=>{const n=e.color;if("colorSpace"in t&&t.colorSpace){const o=Wp(t,`palette.${n}.main`)||Wp(t,`palette.${n}`)||e.color;return t.alpha(o,.4)}const r=Wp(t,`palette.${n}.main`,!1)||Wp(t,`palette.${n}`,!1)||e.color,i=Wp(t,`palette.${n}.mainChannel`)||Wp(t,`palette.${n}Channel`);return"vars"in t&&i?`rgba(${i} / 0.4)`:sT(r,.4)},fV={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},A1e=t=>{const{classes:e,component:n,focusVisible:r,underline:i}=t,o={root:["root",`underline${Nt(i)}`,n==="button"&&"button",r&&"focusVisible"]};return Un(o,T1e,e)},P1e=Zt(ar,{name:"MuiLink",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`underline${Nt(n.underline)}`],n.component==="button"&&e.button]}})(ir(({theme:t})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:e,ownerState:n})=>e==="always"&&n.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},{props:({underline:e,ownerState:n})=>e==="always"&&n.color==="inherit",style:t.colorSpace?{textDecorationColor:t.alpha("currentColor",.4)}:null},...Object.entries(t.palette).filter(ea()).map(([e])=>({props:{underline:"always",color:e},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette[e].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":t.alpha((t.vars||t).palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(t.vars||t).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${k1e.focusVisible}`]:{outline:"auto"}}}]}))),pV=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiLink"}),i=bd(),{className:o,color:a="primary",component:s="a",onBlur:u,onFocus:d,TypographyClasses:m,underline:v="always",variant:_="inherit",sx:O,...E}=r,[A,M]=j.useState(!1),L=Q=>{Zw(Q.target)||M(!1),u&&u(Q)},$=Q=>{Zw(Q.target)&&M(!0),d&&d(Q)},N={...r,color:a,component:s,focusVisible:A,underline:v,variant:_},F=A1e(N);return q.jsx(P1e,{color:a,className:fn(F.root,o),classes:m,component:s,onBlur:L,onFocus:$,ref:n,ownerState:N,variant:_,...E,sx:[...fV[a]===void 0?[{color:a}]:[],...Array.isArray(O)?O:[O]],style:{...E.style,...v==="always"&&a!=="inherit"&&!fV[a]&&{"--Link-underlineColor":E1e({theme:i,ownerState:N})}}})}),ud=j.createContext({});function M1e(t){return Qn("MuiList",t)}Wn("MuiList",["root","padding","dense","subheader"]);const R1e=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return Un({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},M1e,e)},I1e=Zt("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),UO=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiList"}),{children:i,className:o,component:a="ul",dense:s=!1,disablePadding:u=!1,subheader:d,...m}=r,v=j.useMemo(()=>({dense:s}),[s]),_={...r,component:a,dense:s,disablePadding:u},O=R1e(_);return q.jsx(ud.Provider,{value:v,children:q.jsxs(I1e,{as:a,className:fn(O.root,o),ref:n,ownerState:_,...m,children:[d,i]})})});function D1e(t){return Qn("MuiListItem",t)}Wn("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function L1e(t){return Qn("MuiListItemButton",t)}const X1=Wn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),$1e=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},z1e=t=>{const{alignItems:e,classes:n,dense:r,disabled:i,disableGutters:o,divider:a,selected:s}=t,d=Un({root:["root",r&&"dense",!o&&"gutters",a&&"divider",i&&"disabled",e==="flex-start"&&"alignItemsFlexStart",s&&"selected"]},L1e,n);return{...n,...d}},N1e=Zt(ey,{shouldForwardProp:t=>Sc(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:$1e})(ir(({theme:t})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${X1.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),[`&.${X1.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}},[`&.${X1.selected}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity)}},[`&.${X1.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${X1.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),i_=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:a="div",children:s,dense:u=!1,disableGutters:d=!1,divider:m=!1,focusVisibleClassName:v,selected:_=!1,className:O,...E}=r,A=j.useContext(ud),M=j.useMemo(()=>({dense:u||A.dense||!1,alignItems:i,disableGutters:d}),[i,A.dense,u,d]),L=j.useRef(null);fh(()=>{o&&L.current&&L.current.focus()},[o]);const $={...r,alignItems:i,dense:M.dense,disableGutters:d,divider:m,selected:_},N=z1e($),F=as(L,n);return q.jsx(ud.Provider,{value:M,children:q.jsx(N1e,{ref:F,href:E.href||E.to,component:(E.href||E.to)&&a==="div"?"button":a,focusVisibleClassName:fn(N.focusVisible,v),ownerState:$,className:fn(N.root,O),...E,classes:N,children:s})})});function B1e(t){return Qn("MuiListItemSecondaryAction",t)}Wn("MuiListItemSecondaryAction",["root","disableGutters"]);const F1e=t=>{const{disableGutters:e,classes:n}=t;return Un({root:["root",e&&"disableGutters"]},B1e,n)},j1e=Zt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:t})=>t.disableGutters,style:{right:0}}]}),AK=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiListItemSecondaryAction"}),{className:i,...o}=r,a=j.useContext(ud),s={...r,disableGutters:a.disableGutters},u=F1e(s);return q.jsx(j1e,{className:fn(u.root,i),ownerState:s,ref:n,...o})});AK.muiName="ListItemSecondaryAction";const V1e=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.hasSecondaryAction&&e.secondaryAction]},Q1e=t=>{const{alignItems:e,classes:n,dense:r,disableGutters:i,disablePadding:o,divider:a,hasSecondaryAction:s}=t;return Un({root:["root",r&&"dense",!i&&"gutters",!o&&"padding",a&&"divider",e==="flex-start"&&"alignItemsFlexStart",s&&"secondaryAction"],container:["container"],secondaryAction:["secondaryAction"]},D1e,n)},U1e=Zt("div",{name:"MuiListItem",slot:"Root",overridesResolver:V1e})(ir(({theme:t})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${X1.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),Z1e=Zt("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),D5=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiListItem"}),{alignItems:i="center",children:o,className:a,component:s,components:u={},componentsProps:d={},ContainerComponent:m="li",ContainerProps:{className:v,..._}={},dense:O=!1,disableGutters:E=!1,disablePadding:A=!1,divider:M=!1,secondaryAction:L,slotProps:$={},slots:N={},...F}=r,Q=j.useContext(ud),W=j.useMemo(()=>({dense:O||Q.dense||!1,alignItems:i,disableGutters:E}),[i,Q.dense,O,E]),H=j.useRef(null),te=j.Children.toArray(o),ne=te.length&&kC(te[te.length-1],["ListItemSecondaryAction"]),ce={...r,alignItems:i,dense:W.dense,disableGutters:E,disablePadding:A,divider:M,hasSecondaryAction:ne},we=Q1e(ce),re=as(H,n),se={slots:N,slotProps:$},[be,fe]=Xn("secondaryAction",{elementType:AK,externalForwardedProps:se,ownerState:ce,className:we.secondaryAction}),ve=N.root||u.Root||U1e,Me=$.root||d.root||{},Ne={className:fn(we.root,Me.className,a),...F};let Qe=s||"li";return ne?(Qe=!Ne.component&&!s?"div":Qe,m==="li"&&(Qe==="li"?Qe="div":Ne.component==="li"&&(Ne.component="div")),q.jsx(ud.Provider,{value:W,children:q.jsxs(Z1e,{as:m,className:fn(we.container,v),ref:re,ownerState:ce,..._,children:[q.jsx(ve,{...Me,...!Uw(ve)&&{as:Qe,ownerState:{...ce,...Me.ownerState}},...Ne,children:te}),te.pop()]})})):q.jsx(ud.Provider,{value:W,children:q.jsxs(ve,{...Me,as:Qe,ref:re,...!Uw(ve)&&{ownerState:{...ce,...Me.ownerState}},...Ne,children:[te,L&&q.jsx(be,{...fe,children:L})]})})});function q1e(t){return Qn("MuiListItemAvatar",t)}Wn("MuiListItemAvatar",["root","alignItemsFlexStart"]);const W1e=t=>{const{alignItems:e,classes:n}=t;return Un({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},q1e,n)},H1e=Zt("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),G1e=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiListItemAvatar"}),{className:i,...o}=r,a=j.useContext(ud),s={...r,alignItems:a.alignItems},u=W1e(s);return q.jsx(H1e,{className:fn(u.root,i),ownerState:s,ref:n,...o})});function X1e(t){return Qn("MuiListItemIcon",t)}const mV=Wn("MuiListItemIcon",["root","alignItemsFlexStart"]),Y1e=t=>{const{alignItems:e,classes:n}=t;return Un({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},X1e,n)},K1e=Zt("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(ir(({theme:t})=>({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),lw=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiListItemIcon"}),{className:i,...o}=r,a=j.useContext(ud),s={...r,alignItems:a.alignItems},u=Y1e(s);return q.jsx(K1e,{className:fn(u.root,i),ownerState:s,ref:n,...o})});function J1e(t){return Qn("MuiListItemText",t)}const cw=Wn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),ewe=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:o}=t;return Un({root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},J1e,e)},twe=Zt("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${cw.primary}`]:e.primary},{[`& .${cw.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${Vj.root}:where(& .${cw.primary})`]:{display:"block"},[`.${Vj.root}:where(& .${cw.secondary})`]:{display:"block"},variants:[{props:({ownerState:t})=>t.primary&&t.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:56}}]}),tm=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiListItemText"}),{children:i,className:o,disableTypography:a=!1,inset:s=!1,primary:u,primaryTypographyProps:d,secondary:m,secondaryTypographyProps:v,slots:_={},slotProps:O={},...E}=r,{dense:A}=j.useContext(ud);let M=u??i,L=m;const $={...r,disableTypography:a,inset:s,primary:!!M,secondary:!!L,dense:A},N=ewe($),F={slots:_,slotProps:{primary:d,secondary:v,...O}},[Q,W]=Xn("root",{className:fn(N.root,o),elementType:twe,externalForwardedProps:{...F,...E},ownerState:$,ref:n}),[H,te]=Xn("primary",{className:N.primary,elementType:ar,externalForwardedProps:F,ownerState:$}),[ne,ce]=Xn("secondary",{className:N.secondary,elementType:ar,externalForwardedProps:F,ownerState:$});return M!=null&&M.type!==ar&&!a&&(M=q.jsx(H,{variant:A?"body2":"body1",component:te?.variant?void 0:"span",...te,children:M})),L!=null&&L.type!==ar&&!a&&(L=q.jsx(ne,{variant:"body2",color:"textSecondary",...ce,children:L})),q.jsxs(Q,{...W,children:[M,L]})});function f3(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function gV(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function PK(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.startsWith(e.keys.join(""))}function D2(t,e,n,r,i,o){let a=!1,s=i(t,e,e?n:!1);for(;s;){if(s===t.firstChild){if(a)return!1;a=!0}const u=r?!1:s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||!PK(s,o)||u)s=i(t,s,n);else return s.focus(),!0}return!1}const nwe=j.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:a,className:s,disabledItemsFocusable:u=!1,disableListWrap:d=!1,onKeyDown:m,variant:v="selectedMenu",..._}=e,O=j.useRef(null),E=j.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});fh(()=>{i&&O.current.focus()},[i]),j.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(N,{direction:F})=>{const Q=!O.current.style.width;if(N.clientHeight<O.current.clientHeight&&Q){const W=`${CK(ph(N))}px`;O.current.style[F==="rtl"?"paddingLeft":"paddingRight"]=W,O.current.style.width=`calc(100% + ${W})`}return O.current}}),[]);const A=N=>{const F=O.current,Q=N.key;if(N.ctrlKey||N.metaKey||N.altKey){m&&m(N);return}const H=aw(vu(F));if(Q==="ArrowDown")N.preventDefault(),D2(F,H,d,u,f3);else if(Q==="ArrowUp")N.preventDefault(),D2(F,H,d,u,gV);else if(Q==="Home")N.preventDefault(),D2(F,null,d,u,f3);else if(Q==="End")N.preventDefault(),D2(F,null,d,u,gV);else if(Q.length===1){const te=E.current,ne=Q.toLowerCase(),ce=performance.now();te.keys.length>0&&(ce-te.lastTime>500?(te.keys=[],te.repeating=!0,te.previousKeyMatched=!0):te.repeating&&ne!==te.keys[0]&&(te.repeating=!1)),te.lastTime=ce,te.keys.push(ne);const we=H&&!te.repeating&&PK(H,te);te.previousKeyMatched&&(we||D2(F,H,!1,u,f3,te))?N.preventDefault():te.previousKeyMatched=!1}m&&m(N)},M=as(O,n);let L=-1;j.Children.forEach(a,(N,F)=>{if(!j.isValidElement(N)){L===F&&(L+=1,L>=a.length&&(L=-1));return}N.props.disabled||(v==="selectedMenu"&&N.props.selected||L===-1)&&(L=F),L===F&&(N.props.disabled||N.props.muiSkipListHighlight||N.type.muiSkipListHighlight)&&(L+=1,L>=a.length&&(L=-1))});const $=j.Children.map(a,(N,F)=>{if(F===L){const Q={};return o&&(Q.autoFocus=!0),N.props.tabIndex===void 0&&v==="selectedMenu"&&(Q.tabIndex=0),j.cloneElement(N,Q)}return N});return q.jsx(UO,{role:"menu",ref:M,className:s,onKeyDown:A,tabIndex:i?0:-1,..._,children:$})});function rwe(t){return Qn("MuiPopover",t)}Wn("MuiPopover",["root","paper"]);function yV(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function vV(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function xV(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function CA(t){return typeof t=="function"?t():t}const iwe=t=>{const{classes:e}=t;return Un({root:["root"],paper:["paper"]},rwe,e)},owe=Zt(hB,{name:"MuiPopover",slot:"Root"})({}),MK=Zt(wa,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),RK=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiPopover"}),{action:i,anchorEl:o,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:s,anchorReference:u="anchorEl",children:d,className:m,container:v,elevation:_=8,marginThreshold:O=16,open:E,PaperProps:A={},slots:M={},slotProps:L={},transformOrigin:$={vertical:"top",horizontal:"left"},TransitionComponent:N,transitionDuration:F="auto",TransitionProps:Q={},disableScrollLock:W=!1,...H}=r,te=j.useRef(),ne={...r,anchorOrigin:a,anchorReference:u,elevation:_,marginThreshold:O,transformOrigin:$,TransitionComponent:N,transitionDuration:F,TransitionProps:Q},ce=iwe(ne),we=j.useCallback(()=>{if(u==="anchorPosition")return s;const Tt=CA(o),wt=(Tt&&Tt.nodeType===1?Tt:vu(te.current).body).getBoundingClientRect();return{top:wt.top+yV(wt,a.vertical),left:wt.left+vV(wt,a.horizontal)}},[o,a.horizontal,a.vertical,s,u]),re=j.useCallback(Tt=>({vertical:yV(Tt,$.vertical),horizontal:vV(Tt,$.horizontal)}),[$.horizontal,$.vertical]),se=j.useCallback(Tt=>{const Ht={width:Tt.offsetWidth,height:Tt.offsetHeight},wt=re(Ht);if(u==="none")return{top:null,left:null,transformOrigin:xV(wt)};const un=we();let Gt=un.top-wt.vertical,Jt=un.left-wt.horizontal;const Sn=Gt+Ht.height,nn=Jt+Ht.width,Cn=ph(CA(o)),jn=Cn.innerHeight-O,Gn=Cn.innerWidth-O;if(O!==null&&Gt<O){const je=Gt-O;Gt-=je,wt.vertical+=je}else if(O!==null&&Sn>jn){const je=Sn-jn;Gt-=je,wt.vertical+=je}if(O!==null&&Jt<O){const je=Jt-O;Jt-=je,wt.horizontal+=je}else if(nn>Gn){const je=nn-Gn;Jt-=je,wt.horizontal+=je}return{top:`${Math.round(Gt)}px`,left:`${Math.round(Jt)}px`,transformOrigin:xV(wt)}},[o,u,we,re,O]),[be,fe]=j.useState(E),ve=j.useCallback(()=>{const Tt=te.current;if(!Tt)return;const Ht=se(Tt);Ht.top!==null&&Tt.style.setProperty("top",Ht.top),Ht.left!==null&&(Tt.style.left=Ht.left),Tt.style.transformOrigin=Ht.transformOrigin,fe(!0)},[se]);j.useEffect(()=>(W&&window.addEventListener("scroll",ve),()=>window.removeEventListener("scroll",ve)),[o,W,ve]);const Me=()=>{ve()},Ne=()=>{fe(!1)};j.useEffect(()=>{E&&ve()}),j.useImperativeHandle(i,()=>E?{updatePosition:()=>{ve()}}:null,[E,ve]),j.useEffect(()=>{if(!E)return;const Tt=wk(()=>{ve()}),Ht=ph(CA(o));return Ht.addEventListener("resize",Tt),()=>{Tt.clear(),Ht.removeEventListener("resize",Tt)}},[o,E,ve]);let Qe=F;const Ce={slots:{transition:N,...M},slotProps:{transition:Q,paper:A,...L}},[Ae,Xe]=Xn("transition",{elementType:I5,externalForwardedProps:Ce,ownerState:ne,getSlotProps:Tt=>({...Tt,onEntering:(Ht,wt)=>{Tt.onEntering?.(Ht,wt),Me()},onExited:Ht=>{Tt.onExited?.(Ht),Ne()}}),additionalProps:{appear:!0,in:E}});F==="auto"&&!Ae.muiSupportAuto&&(Qe=void 0);const ke=v||(o?vu(CA(o)).body:void 0),[ft,{slots:pt,slotProps:lt,...ot}]=Xn("root",{ref:n,elementType:owe,externalForwardedProps:{...Ce,...H},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:M.backdrop},slotProps:{backdrop:rK(typeof L.backdrop=="function"?L.backdrop(ne):L.backdrop,{invisible:!0})},container:ke,open:E},ownerState:ne,className:fn(ce.root,m)}),[yt,Et]=Xn("paper",{ref:te,className:ce.paper,elementType:MK,externalForwardedProps:Ce,shouldForwardComponentProp:!0,additionalProps:{elevation:_,style:be?void 0:{opacity:0}},ownerState:ne});return q.jsx(ft,{...ot,...!Uw(ft)&&{slots:pt,slotProps:lt,disableScrollLock:W},children:q.jsx(Ae,{...Xe,timeout:Qe,children:q.jsx(yt,{...Et,children:d})})})});function swe(t){return Qn("MuiMenu",t)}Wn("MuiMenu",["root","paper","list"]);const awe={vertical:"top",horizontal:"right"},lwe={vertical:"top",horizontal:"left"},cwe=t=>{const{classes:e}=t;return Un({root:["root"],paper:["paper"],list:["list"]},swe,e)},uwe=Zt(RK,{shouldForwardProp:t=>Sc(t)||t==="classes",name:"MuiMenu",slot:"Root"})({}),hwe=Zt(MK,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),dwe=Zt(nwe,{name:"MuiMenu",slot:"List"})({outline:0}),IK=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:o,className:a,disableAutoFocusItem:s=!1,MenuListProps:u={},onClose:d,open:m,PaperProps:v={},PopoverClasses:_,transitionDuration:O="auto",TransitionProps:{onEntering:E,...A}={},variant:M="selectedMenu",slots:L={},slotProps:$={},...N}=r,F=jO(),Q={...r,autoFocus:i,disableAutoFocusItem:s,MenuListProps:u,onEntering:E,PaperProps:v,transitionDuration:O,TransitionProps:A,variant:M},W=cwe(Q),H=i&&!s&&m,te=j.useRef(null),ne=(Qe,Ce)=>{te.current&&te.current.adjustStyleForScrollbar(Qe,{direction:F?"rtl":"ltr"}),E&&E(Qe,Ce)},ce=Qe=>{Qe.key==="Tab"&&(Qe.preventDefault(),d&&d(Qe,"tabKeyDown"))};let we=-1;j.Children.map(o,(Qe,Ce)=>{j.isValidElement(Qe)&&(Qe.props.disabled||(M==="selectedMenu"&&Qe.props.selected||we===-1)&&(we=Ce))});const re={slots:L,slotProps:{list:u,transition:A,paper:v,...$}},se=Xw({elementType:L.root,externalSlotProps:$.root,ownerState:Q,className:[W.root,a]}),[be,fe]=Xn("paper",{className:W.paper,elementType:hwe,externalForwardedProps:re,shouldForwardComponentProp:!0,ownerState:Q}),[ve,Me]=Xn("list",{className:fn(W.list,u.className),elementType:dwe,shouldForwardComponentProp:!0,externalForwardedProps:re,getSlotProps:Qe=>({...Qe,onKeyDown:Ce=>{ce(Ce),Qe.onKeyDown?.(Ce)}}),ownerState:Q}),Ne=typeof re.slotProps.transition=="function"?re.slotProps.transition(Q):re.slotProps.transition;return q.jsx(uwe,{onClose:d,anchorOrigin:{vertical:"bottom",horizontal:F?"right":"left"},transformOrigin:F?awe:lwe,slots:{root:L.root,paper:be,backdrop:L.backdrop,...L.transition&&{transition:L.transition}},slotProps:{root:se,paper:fe,backdrop:typeof $.backdrop=="function"?$.backdrop(Q):$.backdrop,transition:{...Ne,onEntering:(...Qe)=>{ne(...Qe),Ne?.onEntering?.(...Qe)}}},open:m,ref:n,transitionDuration:O,ownerState:Q,...N,classes:_,children:q.jsx(ve,{actions:te,autoFocus:i&&(we===-1||s),autoFocusItem:H,variant:M,...Me,children:o})})});function fwe(t){return Qn("MuiMenuItem",t)}const L2=Wn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),pwe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},mwe=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:o,classes:a}=t,u=Un({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},fwe,a);return{...a,...u}},gwe=Zt(ey,{shouldForwardProp:t=>Sc(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:pwe})(ir(({theme:t})=>({...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${L2.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),[`&.${L2.focusVisible}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.focusOpacity}`)}},[`&.${L2.selected}:hover`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity)}},[`&.${L2.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${L2.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${uV.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${uV.inset}`]:{marginLeft:52},[`& .${cw.root}`]:{marginTop:0,marginBottom:0},[`& .${cw.inset}`]:{paddingLeft:36},[`& .${mV.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${mV.root} svg`]:{fontSize:"1.25rem"}}}]}))),Bl=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:a=!1,divider:s=!1,disableGutters:u=!1,focusVisibleClassName:d,role:m="menuitem",tabIndex:v,className:_,...O}=r,E=j.useContext(ud),A=j.useMemo(()=>({dense:a||E.dense||!1,disableGutters:u}),[E.dense,a,u]),M=j.useRef(null);fh(()=>{i&&M.current&&M.current.focus()},[i]);const L={...r,dense:A.dense,divider:s,disableGutters:u},$=mwe(r),N=as(M,n);let F;return r.disabled||(F=v!==void 0?v:-1),q.jsx(ud.Provider,{value:A,children:q.jsx(gwe,{ref:N,role:m,tabIndex:F,component:o,focusVisibleClassName:fn($.focusVisible,d),className:fn($.root,_),...O,ownerState:L,classes:$})})});function ywe(t){return Qn("MuiNativeSelect",t)}const mB=Wn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),vwe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:a}=t,s={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${Nt(n)}`,o&&"iconOpen",r&&"disabled"]};return Un(s,ywe,e)},DK=Zt("select",{name:"MuiNativeSelect"})(({theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${mB.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]})),xwe=Zt(DK,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Sc,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${mB.multiple}`]:e.multiple}]}})({}),LK=Zt("svg",{name:"MuiNativeSelect"})(({theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${mB.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),_we=Zt(LK,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Nt(n.variant)}`],n.open&&e.iconOpen]}})({}),bwe=j.forwardRef(function(e,n){const{className:r,disabled:i,error:o,IconComponent:a,inputRef:s,variant:u="standard",...d}=e,m={...e,disabled:i,variant:u,error:o},v=vwe(m);return q.jsxs(j.Fragment,{children:[q.jsx(xwe,{ownerState:m,className:fn(v.select,r),disabled:i,ref:s||n,...d}),e.multiple?null:q.jsx(_we,{as:a,ownerState:m,className:v.icon})]})});var _V;const wwe=Zt("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:Sc})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Owe=Zt("legend",{name:"MuiNotchedOutlined",shouldForwardProp:Sc})(ir(({theme:t})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]})));function Swe(t){const{children:e,classes:n,className:r,label:i,notched:o,...a}=t,s=i!=null&&i!=="",u={...t,notched:o,withLabel:s};return q.jsx(wwe,{"aria-hidden":!0,className:r,ownerState:u,...a,children:q.jsx(Owe,{ownerState:u,children:s?q.jsx("span",{children:i}):_V||(_V=q.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const Cwe=t=>{const{classes:e}=t,r=Un({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},s_e,e);return{...e,...r}},Twe=Zt(NR,{shouldForwardProp:t=>Sc(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:$R})(ir(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${$p.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${$p.notchedOutline}`]:{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):e}},[`&.${$p.focused} .${$p.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(ea()).map(([n])=>({props:{color:n},style:{[`&.${$p.focused} .${$p.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}})),{props:{},style:{[`&.${$p.error} .${$p.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${$p.disabled} .${$p.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),kwe=Zt(Swe,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(ir(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?t.alpha(t.vars.palette.common.onBackground,.23):e}})),Ewe=Zt(BR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:zR})(ir(({theme:t})=>({padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),gB=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:o=!1,inputComponent:a="input",label:s,multiline:u=!1,notched:d,slots:m={},slotProps:v={},type:_="text",...O}=r,E=Cwe(r),A=uv(),M=X_({props:r,muiFormControl:A,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),L={...r,color:M.color||"primary",disabled:M.disabled,error:M.error,focused:M.focused,formControl:A,fullWidth:o,hiddenLabel:M.hiddenLabel,multiline:u,size:M.size,type:_},$=m.root??i.Root??Twe,N=m.input??i.Input??Ewe,[F,Q]=Xn("notchedOutline",{elementType:kwe,className:E.notchedOutline,shouldForwardComponentProp:!0,ownerState:L,externalForwardedProps:{slots:m,slotProps:v},additionalProps:{label:s!=null&&s!==""&&M.required?q.jsxs(j.Fragment,{children:[s,"","*"]}):s}});return q.jsx(uB,{slots:{root:$,input:N},slotProps:v,renderSuffix:W=>q.jsx(F,{...Q,notched:typeof d<"u"?d:!!(W.startAdornment||W.filled||W.focused)}),fullWidth:o,inputComponent:a,multiline:u,ref:n,type:_,...O,classes:{...E,notchedOutline:null}})});gB.muiName="Input";function $K(t){return Qn("MuiSelect",t)}const $2=Wn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var bV;const Awe=Zt(DK,{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${$2.select}`]:e.select},{[`&.${$2.select}`]:e[n.variant]},{[`&.${$2.error}`]:e.error},{[`&.${$2.multiple}`]:e.multiple}]}})({[`&.${$2.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Pwe=Zt(LK,{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Nt(n.variant)}`],n.open&&e.iconOpen]}})({}),Mwe=Zt("input",{shouldForwardProp:t=>nK(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function wV(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function Rwe(t){return t==null||typeof t=="string"&&!t.trim()}const Iwe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:a}=t,s={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${Nt(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Un(s,$K,e)},Dwe=j.forwardRef(function(e,n){const{"aria-describedby":r,"aria-label":i,autoFocus:o,autoWidth:a,children:s,className:u,defaultOpen:d,defaultValue:m,disabled:v,displayEmpty:_,error:O=!1,IconComponent:E,inputRef:A,labelId:M,MenuProps:L={},multiple:$,name:N,onBlur:F,onChange:Q,onClose:W,onFocus:H,onKeyDown:te,onMouseDown:ne,onOpen:ce,open:we,readOnly:re,renderValue:se,required:be,SelectDisplayProps:fe={},tabIndex:ve,type:Me,value:Ne,variant:Qe="standard",...Ce}=e,[Ae,Xe]=E5({controlled:Ne,default:m,name:"Select"}),[ke,ft]=E5({controlled:we,default:d,name:"Select"}),pt=j.useRef(null),lt=j.useRef(null),[ot,yt]=j.useState(null),{current:Et}=j.useRef(we!=null),[Tt,Ht]=j.useState(),wt=as(n,A),un=j.useCallback(st=>{lt.current=st,st&&yt(st)},[]),Gt=ot?.parentNode;j.useImperativeHandle(wt,()=>({focus:()=>{lt.current.focus()},node:pt.current,value:Ae}),[Ae]),j.useEffect(()=>{d&&ke&&ot&&!Et&&(Ht(a?null:Gt.clientWidth),lt.current.focus())},[ot,a]),j.useEffect(()=>{o&&lt.current.focus()},[o]),j.useEffect(()=>{if(!M)return;const st=vu(lt.current).getElementById(M);if(st){const $t=()=>{getSelection().isCollapsed&&lt.current.focus()};return st.addEventListener("click",$t),()=>{st.removeEventListener("click",$t)}}},[M]);const Jt=(st,$t)=>{st?ce&&ce($t):W&&W($t),Et||(Ht(a?null:Gt.clientWidth),ft(st))},Sn=st=>{ne?.(st),st.button===0&&(st.preventDefault(),lt.current.focus(),Jt(!0,st))},nn=st=>{Jt(!1,st)},Cn=j.Children.toArray(s),jn=st=>{const $t=Cn.find(sn=>sn.props.value===st.target.value);$t!==void 0&&(Xe($t.props.value),Q&&Q(st,$t))},Gn=st=>$t=>{let sn;if($t.currentTarget.hasAttribute("tabindex")){if($){sn=Array.isArray(Ae)?Ae.slice():[];const Vn=Ae.indexOf(st.props.value);Vn===-1?sn.push(st.props.value):sn.splice(Vn,1)}else sn=st.props.value;if(st.props.onClick&&st.props.onClick($t),Ae!==sn&&(Xe(sn),Q)){const Vn=$t.nativeEvent||$t,Ar=new Vn.constructor(Vn.type,Vn);Object.defineProperty(Ar,"target",{writable:!0,value:{value:sn,name:N}}),Q(Ar,st)}$||Jt(!1,$t)}},je=st=>{re||([" ","ArrowUp","ArrowDown","Enter"].includes(st.key)&&(st.preventDefault(),Jt(!0,st)),te?.(st))},Ye=ot!==null&&ke,vt=st=>{!Ye&&F&&(Object.defineProperty(st,"target",{writable:!0,value:{value:Ae,name:N}}),F(st))};delete Ce["aria-invalid"];let kt,jt;const Oe=[];let ae=!1;(R5({value:Ae})||_)&&(se?kt=se(Ae):ae=!0);const K=Cn.map(st=>{if(!j.isValidElement(st))return null;let $t;if($){if(!Array.isArray(Ae))throw new Error(Jg(2));$t=Ae.some(sn=>wV(sn,st.props.value)),$t&&ae&&Oe.push(st.props.children)}else $t=wV(Ae,st.props.value),$t&&ae&&(jt=st.props.children);return j.cloneElement(st,{"aria-selected":$t?"true":"false",onClick:Gn(st),onKeyUp:sn=>{sn.key===" "&&sn.preventDefault(),st.props.onKeyUp&&st.props.onKeyUp(sn)},role:"option",selected:$t,value:void 0,"data-value":st.props.value})});ae&&($?Oe.length===0?kt=null:kt=Oe.reduce((st,$t,sn)=>(st.push($t),sn<Oe.length-1&&st.push(", "),st),[]):kt=jt);let _e=Tt;!a&&Et&&ot&&(_e=Gt.clientWidth);let $e;typeof ve<"u"?$e=ve:$e=v?null:0;const ze=fe.id||(N?`mui-component-select-${N}`:void 0),nt={...e,variant:Qe,value:Ae,open:Ye,error:O},tt=Iwe(nt),Ke={...L.PaperProps,...typeof L.slotProps?.paper=="function"?L.slotProps.paper(nt):L.slotProps?.paper},at={...L.MenuListProps,...typeof L.slotProps?.list=="function"?L.slotProps.list(nt):L.slotProps?.list},St=VO();return q.jsxs(j.Fragment,{children:[q.jsx(Awe,{as:"div",ref:un,tabIndex:$e,role:"combobox","aria-controls":Ye?St:void 0,"aria-disabled":v?"true":void 0,"aria-expanded":Ye?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[M,ze].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":be?"true":void 0,"aria-invalid":O?"true":void 0,onKeyDown:je,onMouseDown:v||re?null:Sn,onBlur:vt,onFocus:H,...fe,ownerState:nt,className:fn(fe.className,tt.select,u),id:ze,children:Rwe(kt)?bV||(bV=q.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):kt}),q.jsx(Mwe,{"aria-invalid":O,value:Array.isArray(Ae)?Ae.join(","):Ae,name:N,ref:pt,"aria-hidden":!0,onChange:jn,tabIndex:-1,disabled:v,className:tt.nativeInput,autoFocus:o,required:be,...Ce,ownerState:nt}),q.jsx(Pwe,{as:E,className:tt.icon,ownerState:nt}),q.jsx(IK,{id:`menu-${N||""}`,anchorEl:Gt,open:Ye,onClose:nn,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...L,slotProps:{...L.slotProps,list:{"aria-labelledby":M,role:"listbox","aria-multiselectable":$?"true":void 0,disableListWrap:!0,id:St,...at},paper:{...Ke,style:{minWidth:_e,...Ke!=null?Ke.style:null}}},children:K})]})}),Lwe=t=>{const{classes:e}=t,r=Un({root:["root"]},$K,e);return{...e,...r}},yB={name:"MuiSelect",slot:"Root",shouldForwardProp:t=>Sc(t)&&t!=="variant"},$we=Zt(pB,yB)(""),zwe=Zt(gB,yB)(""),Nwe=Zt(dB,yB)(""),D0=j.forwardRef(function(e,n){const r=qn({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:a={},className:s,defaultOpen:u=!1,displayEmpty:d=!1,IconComponent:m=l_e,id:v,input:_,inputProps:O,label:E,labelId:A,MenuProps:M,multiple:L=!1,native:$=!1,onClose:N,onOpen:F,open:Q,renderValue:W,SelectDisplayProps:H,variant:te="outlined",...ne}=r,ce=$?bwe:Dwe,we=uv(),re=X_({props:r,muiFormControl:we,states:["variant","error"]}),se=re.variant||te,be={...r,variant:se,classes:a},fe=Lwe(be),{root:ve,...Me}=fe,Ne=_||{standard:q.jsx($we,{ownerState:be}),outlined:q.jsx(zwe,{label:E,ownerState:be}),filled:q.jsx(Nwe,{ownerState:be})}[se],Qe=as(n,G_(Ne));return q.jsx(j.Fragment,{children:j.cloneElement(Ne,{inputComponent:ce,inputProps:{children:o,error:re.error,IconComponent:m,variant:se,type:void 0,multiple:L,...$?{id:v}:{autoWidth:i,defaultOpen:u,displayEmpty:d,labelId:A,MenuProps:M,onClose:N,onOpen:F,open:Q,renderValue:W,SelectDisplayProps:{id:v,...H}},...O,classes:O?Fa(Me,O.classes):Me,..._?_.props.inputProps:{}},...(L&&$||d)&&se==="outlined"?{notched:!0}:{},ref:Qe,className:fn(Ne.props.className,s,fe.root),...!_&&{variant:se},...ne})})});D0.muiName="Select";function Bwe(t){return Qn("MuiTooltip",t)}const Ts=Wn("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Fwe(t){return Math.round(t*1e5)/1e5}const jwe=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:o}=t,a={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${Nt(o.split("-")[0])}`],arrow:["arrow"]};return Un(a,Bwe,e)},Vwe=Zt(bK,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(ir(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${Ts.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Ts.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Ts.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${Ts.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${Ts.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${Ts.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${Ts.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${Ts.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Qwe=Zt("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${Nt(n.placement.split("-")[0])}`]]}})(ir(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${Ts.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${Ts.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${Ts.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${Ts.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${Fwe(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${Ts.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${Ts.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${Ts.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${Ts.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${Ts.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${Ts.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${Ts.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${Ts.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${Ts.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${Ts.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),Uwe=Zt("span",{name:"MuiTooltip",slot:"Arrow"})(ir(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:t.alpha(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let TA=!1;const OV=new DR;let z2={x:0,y:0};function kA(t,e){return(n,...r)=>{e&&e(n,...r),t(n,...r)}}const zK=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiTooltip"}),{arrow:i=!1,children:o,classes:a,components:s={},componentsProps:u={},describeChild:d=!1,disableFocusListener:m=!1,disableHoverListener:v=!1,disableInteractive:_=!1,disableTouchListener:O=!1,enterDelay:E=100,enterNextDelay:A=0,enterTouchDelay:M=700,followCursor:L=!1,id:$,leaveDelay:N=0,leaveTouchDelay:F=1500,onClose:Q,onOpen:W,open:H,placement:te="bottom",PopperComponent:ne,PopperProps:ce={},slotProps:we={},slots:re={},title:se,TransitionComponent:be,TransitionProps:fe,...ve}=r,Me=j.isValidElement(o)?o:q.jsx("span",{children:o}),Ne=bd(),Qe=jO(),[Ce,Ae]=j.useState(),[Xe,ke]=j.useState(null),ft=j.useRef(!1),pt=_||L,lt=t_(),ot=t_(),yt=t_(),Et=t_(),[Tt,Ht]=E5({controlled:H,default:!1,name:"Tooltip",state:"open"});let wt=Tt;const un=VO($),Gt=j.useRef(),Jt=ld(()=>{Gt.current!==void 0&&(document.body.style.WebkitUserSelect=Gt.current,Gt.current=void 0),Et.clear()});j.useEffect(()=>Jt,[Jt]);const Sn=Pn=>{OV.clear(),TA=!0,Ht(!0),W&&!wt&&W(Pn)},nn=ld(Pn=>{OV.start(800+N,()=>{TA=!1}),Ht(!1),Q&&wt&&Q(Pn),lt.start(Ne.transitions.duration.shortest,()=>{ft.current=!1})}),Cn=Pn=>{ft.current&&Pn.type!=="touchstart"||(Ce&&Ce.removeAttribute("title"),ot.clear(),yt.clear(),E||TA&&A?ot.start(TA?A:E,()=>{Sn(Pn)}):Sn(Pn))},jn=Pn=>{ot.clear(),yt.start(N,()=>{nn(Pn)})},[,Gn]=j.useState(!1),je=Pn=>{Zw(Pn.target)||(Gn(!1),jn(Pn))},Ye=Pn=>{Ce||Ae(Pn.currentTarget),Zw(Pn.target)&&(Gn(!0),Cn(Pn))},vt=Pn=>{ft.current=!0;const ci=Me.props;ci.onTouchStart&&ci.onTouchStart(Pn)},kt=Pn=>{vt(Pn),yt.clear(),lt.clear(),Jt(),Gt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Et.start(M,()=>{document.body.style.WebkitUserSelect=Gt.current,Cn(Pn)})},jt=Pn=>{Me.props.onTouchEnd&&Me.props.onTouchEnd(Pn),Jt(),yt.start(F,()=>{nn(Pn)})};j.useEffect(()=>{if(!wt)return;function Pn(ci){ci.key==="Escape"&&nn(ci)}return document.addEventListener("keydown",Pn),()=>{document.removeEventListener("keydown",Pn)}},[nn,wt]);const Oe=as(G_(Me),Ae,n);!se&&se!==0&&(wt=!1);const ae=j.useRef(),K=Pn=>{const ci=Me.props;ci.onMouseMove&&ci.onMouseMove(Pn),z2={x:Pn.clientX,y:Pn.clientY},ae.current&&ae.current.update()},_e={},$e=typeof se=="string";d?(_e.title=!wt&&$e&&!v?se:null,_e["aria-describedby"]=wt?un:null):(_e["aria-label"]=$e?se:null,_e["aria-labelledby"]=wt&&!$e?un:null);const ze={..._e,...ve,...Me.props,className:fn(ve.className,Me.props.className),onTouchStart:vt,ref:Oe,...L?{onMouseMove:K}:{}},nt={};O||(ze.onTouchStart=kt,ze.onTouchEnd=jt),v||(ze.onMouseOver=kA(Cn,ze.onMouseOver),ze.onMouseLeave=kA(jn,ze.onMouseLeave),pt||(nt.onMouseOver=Cn,nt.onMouseLeave=jn)),m||(ze.onFocus=kA(Ye,ze.onFocus),ze.onBlur=kA(je,ze.onBlur),pt||(nt.onFocus=Ye,nt.onBlur=je));const tt={...r,isRtl:Qe,arrow:i,disableInteractive:pt,placement:te,PopperComponentProp:ne,touch:ft.current},Ke=typeof we.popper=="function"?we.popper(tt):we.popper,at=j.useMemo(()=>{let Pn=[{name:"arrow",enabled:!!Xe,options:{element:Xe,padding:4}}];return ce.popperOptions?.modifiers&&(Pn=Pn.concat(ce.popperOptions.modifiers)),Ke?.popperOptions?.modifiers&&(Pn=Pn.concat(Ke.popperOptions.modifiers)),{...ce.popperOptions,...Ke?.popperOptions,modifiers:Pn}},[Xe,ce.popperOptions,Ke?.popperOptions]),St=jwe(tt),st=typeof we.transition=="function"?we.transition(tt):we.transition,$t={slots:{popper:s.Popper,transition:s.Transition??be,tooltip:s.Tooltip,arrow:s.Arrow,...re},slotProps:{arrow:we.arrow??u.arrow,popper:{...ce,...Ke??u.popper},tooltip:we.tooltip??u.tooltip,transition:{...fe,...st??u.transition}}},[sn,Vn]=Xn("popper",{elementType:Vwe,externalForwardedProps:$t,ownerState:tt,className:fn(St.popper,ce?.className)}),[Ar,Or]=Xn("transition",{elementType:I5,externalForwardedProps:$t,ownerState:tt}),[ut,Fr]=Xn("tooltip",{elementType:Qwe,className:St.tooltip,externalForwardedProps:$t,ownerState:tt}),[ji,tr]=Xn("arrow",{elementType:Uwe,className:St.arrow,externalForwardedProps:$t,ownerState:tt,ref:ke});return q.jsxs(j.Fragment,{children:[j.cloneElement(Me,ze),q.jsx(sn,{as:ne??bK,placement:te,anchorEl:L?{getBoundingClientRect:()=>({top:z2.y,left:z2.x,right:z2.x,bottom:z2.y,width:0,height:0})}:Ce,popperRef:ae,open:Ce?wt:!1,id:un,transition:!0,...nt,...Vn,popperOptions:at,children:({TransitionProps:Pn})=>q.jsx(Ar,{timeout:Ne.transitions.duration.shorter,...Pn,...Or,children:q.jsxs(ut,{...Fr,children:[se,i?q.jsx(ji,{...tr}):null]})})})]})}),cu=Lye({createStyledComponent:Zt("div",{name:"MuiStack",slot:"Root"}),useThemeProps:t=>qn({props:t,name:"MuiStack"})});function Zwe(t){return Qn("MuiSwitch",t)}const fc=Wn("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),qwe=t=>{const{classes:e,edge:n,size:r,color:i,checked:o,disabled:a}=t,s={root:["root",n&&`edge${Nt(n)}`,`size${Nt(r)}`],switchBase:["switchBase",`color${Nt(i)}`,o&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},u=Un(s,Zwe,e);return{...e,...u}},Wwe=Zt("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.edge&&e[`edge${Nt(n.edge)}`],e[`size${Nt(n.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${fc.thumb}`]:{width:16,height:16},[`& .${fc.switchBase}`]:{padding:4,[`&.${fc.checked}`]:{transform:"translateX(16px)"}}}}]}),Hwe=Zt(K_e,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.switchBase,{[`& .${fc.input}`]:e.input},n.color!=="default"&&e[`color${Nt(n.color)}`]]}})(ir(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${fc.checked}`]:{transform:"translateX(20px)"},[`&.${fc.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${fc.checked} + .${fc.track}`]:{opacity:.5},[`&.${fc.disabled} + .${fc.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${fc.input}`]:{left:"-100%",width:"300%"}})),ir(({theme:t})=>({"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.action.active,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(ea(["light"])).map(([e])=>({props:{color:e},style:{[`&.${fc.checked}`]:{color:(t.vars||t).palette[e].main,"&:hover":{backgroundColor:t.alpha((t.vars||t).palette[e].main,(t.vars||t).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${fc.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${e}DisabledColor`]:`${t.palette.mode==="light"?t.lighten(t.palette[e].main,.62):t.darken(t.palette[e].main,.55)}`}},[`&.${fc.checked} + .${fc.track}`]:{backgroundColor:(t.vars||t).palette[e].main}}}))]}))),Gwe=Zt("span",{name:"MuiSwitch",slot:"Track"})(ir(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`}))),Xwe=Zt("span",{name:"MuiSwitch",slot:"Thumb"})(ir(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),vB=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiSwitch"}),{className:i,color:o="primary",edge:a=!1,size:s="medium",sx:u,slots:d={},slotProps:m={},...v}=r,_={...r,color:o,edge:a,size:s},O=qwe(_),E={slots:d,slotProps:m},[A,M]=Xn("root",{className:fn(O.root,i),elementType:Wwe,externalForwardedProps:E,ownerState:_,additionalProps:{sx:u}}),[L,$]=Xn("thumb",{className:O.thumb,elementType:Xwe,externalForwardedProps:E,ownerState:_}),N=q.jsx(L,{...$}),[F,Q]=Xn("track",{className:O.track,elementType:Gwe,externalForwardedProps:E,ownerState:_});return q.jsxs(A,{...M,children:[q.jsx(Hwe,{type:"checkbox",icon:N,checkedIcon:N,ref:n,ownerState:_,...v,classes:{...O,root:O.switchBase},slots:{...d.switchBase&&{root:d.switchBase},...d.input&&{input:d.input}},slotProps:{...m.switchBase&&{root:typeof m.switchBase=="function"?m.switchBase(_):m.switchBase},input:{role:"switch"},...m.input&&{input:typeof m.input=="function"?m.input(_):m.input}}}),q.jsx(F,{...Q})]})});function Ywe(t){return Qn("MuiTab",t)}const Gh=Wn("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),Kwe=t=>{const{classes:e,textColor:n,fullWidth:r,wrapped:i,icon:o,label:a,selected:s,disabled:u}=t,d={root:["root",o&&a&&"labelIcon",`textColor${Nt(n)}`,r&&"fullWidth",i&&"wrapped",s&&"selected",u&&"disabled"],icon:["iconWrapper","icon"]};return Un(d,Ywe,e)},Jwe=Zt(ey,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.label&&n.icon&&e.labelIcon,e[`textColor${Nt(n.textColor)}`],n.fullWidth&&e.fullWidth,n.wrapped&&e.wrapped,{[`& .${Gh.iconWrapper}`]:e.iconWrapper},{[`& .${Gh.icon}`]:e.icon}]}})(ir(({theme:t})=>({...t.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:e})=>e.label&&(e.iconPosition==="top"||e.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:e})=>e.label&&e.iconPosition!=="top"&&e.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:e})=>e.icon&&e.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="top",style:{[`& > .${Gh.icon}`]:{marginBottom:6}}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="bottom",style:{[`& > .${Gh.icon}`]:{marginTop:6}}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="start",style:{[`& > .${Gh.icon}`]:{marginRight:t.spacing(1)}}},{props:({ownerState:e,iconPosition:n})=>e.icon&&e.label&&n==="end",style:{[`& > .${Gh.icon}`]:{marginLeft:t.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${Gh.selected}`]:{opacity:1},[`&.${Gh.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${Gh.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${Gh.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${Gh.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${Gh.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:({ownerState:e})=>e.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:e})=>e.wrapped,style:{fontSize:t.typography.pxToRem(12)}}]}))),SV=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiTab"}),{className:i,disabled:o=!1,disableFocusRipple:a=!1,fullWidth:s,icon:u,iconPosition:d="top",indicator:m,label:v,onChange:_,onClick:O,onFocus:E,selected:A,selectionFollowsFocus:M,textColor:L="inherit",value:$,wrapped:N=!1,...F}=r,Q={...r,disabled:o,disableFocusRipple:a,selected:A,icon:!!u,iconPosition:d,label:!!v,fullWidth:s,textColor:L,wrapped:N},W=Kwe(Q),H=u&&v&&j.isValidElement(u)?j.cloneElement(u,{className:fn(W.icon,u.props.className)}):u,te=ce=>{!A&&_&&_(ce,$),O&&O(ce)},ne=ce=>{M&&!A&&_&&_(ce,$),E&&E(ce)};return q.jsxs(Jwe,{focusRipple:!a,className:fn(W.root,i),ref:n,role:"tab","aria-selected":A,disabled:o,onClick:te,onFocus:ne,ownerState:Q,tabIndex:A?0:-1,...F,children:[d==="top"||d==="start"?q.jsxs(j.Fragment,{children:[H,v]}):q.jsxs(j.Fragment,{children:[v,H]}),m]})}),NK=j.createContext();function eOe(t){return Qn("MuiTable",t)}Wn("MuiTable",["root","stickyHeader"]);const tOe=t=>{const{classes:e,stickyHeader:n}=t;return Un({root:["root",n&&"stickyHeader"]},eOe,e)},nOe=Zt("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.stickyHeader&&e.stickyHeader]}})(ir(({theme:t})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:e})=>e.stickyHeader,style:{borderCollapse:"separate"}}]}))),CV="table",BK=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiTable"}),{className:i,component:o=CV,padding:a="normal",size:s="medium",stickyHeader:u=!1,...d}=r,m={...r,component:o,padding:a,size:s,stickyHeader:u},v=tOe(m),_=j.useMemo(()=>({padding:a,size:s,stickyHeader:u}),[a,s,u]);return q.jsx(NK.Provider,{value:_,children:q.jsx(nOe,{as:o,role:o===CV?null:"table",ref:n,className:fn(v.root,i),ownerState:m,...d})})}),QR=j.createContext();function rOe(t){return Qn("MuiTableBody",t)}Wn("MuiTableBody",["root"]);const iOe=t=>{const{classes:e}=t;return Un({root:["root"]},rOe,e)},oOe=Zt("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),sOe={variant:"body"},TV="tbody",FK=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiTableBody"}),{className:i,component:o=TV,...a}=r,s={...r,component:o},u=iOe(s);return q.jsx(QR.Provider,{value:sOe,children:q.jsx(oOe,{className:fn(u.root,i),as:o,ref:n,role:o===TV?null:"rowgroup",ownerState:s,...a})})});function aOe(t){return Qn("MuiTableCell",t)}const lOe=Wn("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),cOe=t=>{const{classes:e,variant:n,align:r,padding:i,size:o,stickyHeader:a}=t,s={root:["root",n,a&&"stickyHeader",r!=="inherit"&&`align${Nt(r)}`,i!=="normal"&&`padding${Nt(i)}`,`size${Nt(o)}`]};return Un(s,aOe,e)},uOe=Zt("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${Nt(n.size)}`],n.padding!=="normal"&&e[`padding${Nt(n.padding)}`],n.align!=="inherit"&&e[`align${Nt(n.align)}`],n.stickyHeader&&e.stickyHeader]}})(ir(({theme:t})=>({...t.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?t.lighten(t.alpha(t.palette.divider,1),.88):t.darken(t.alpha(t.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${lOe.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:e})=>e.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]}))),ks=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiTableCell"}),{align:i="inherit",className:o,component:a,padding:s,scope:u,size:d,sortDirection:m,variant:v,..._}=r,O=j.useContext(NK),E=j.useContext(QR),A=E&&E.variant==="head";let M;a?M=a:M=A?"th":"td";let L=u;M==="td"?L=void 0:!L&&A&&(L="col");const $=v||E&&E.variant,N={...r,align:i,component:M,padding:s||(O&&O.padding?O.padding:"normal"),size:d||(O&&O.size?O.size:"medium"),sortDirection:m,stickyHeader:$==="head"&&O&&O.stickyHeader,variant:$},F=cOe(N);let Q=null;return m&&(Q=m==="asc"?"ascending":"descending"),q.jsx(uOe,{as:M,ref:n,className:fn(F.root,o),"aria-sort":Q,scope:L,ownerState:N,..._})});function hOe(t){return Qn("MuiTableContainer",t)}Wn("MuiTableContainer",["root"]);const dOe=t=>{const{classes:e}=t;return Un({root:["root"]},hOe,e)},fOe=Zt("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),jK=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiTableContainer"}),{className:i,component:o="div",...a}=r,s={...r,component:o},u=dOe(s);return q.jsx(fOe,{ref:n,as:o,className:fn(u.root,i),ownerState:s,...a})});function pOe(t){return Qn("MuiTableHead",t)}Wn("MuiTableHead",["root"]);const mOe=t=>{const{classes:e}=t;return Un({root:["root"]},pOe,e)},gOe=Zt("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),yOe={variant:"head"},kV="thead",VK=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiTableHead"}),{className:i,component:o=kV,...a}=r,s={...r,component:o},u=mOe(s);return q.jsx(QR.Provider,{value:yOe,children:q.jsx(gOe,{as:o,className:fn(u.root,i),ref:n,role:o===kV?null:"rowgroup",ownerState:s,...a})})});function vOe(t){return Qn("MuiToolbar",t)}Wn("MuiToolbar",["root","gutters","regular","dense"]);const xOe=t=>{const{classes:e,disableGutters:n,variant:r}=t;return Un({root:["root",!n&&"gutters",r]},vOe,e)},_Oe=Zt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(ir(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}))),xB=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:a=!1,variant:s="regular",...u}=r,d={...r,component:o,disableGutters:a,variant:s},m=xOe(d);return q.jsx(_Oe,{as:o,className:fn(m.root,i),ref:n,ownerState:d,...u})}),bOe=ri(q.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})),wOe=ri(q.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}));function OOe(t){return Qn("MuiTableRow",t)}const EV=Wn("MuiTableRow",["root","selected","hover","head","footer"]),SOe=t=>{const{classes:e,selected:n,hover:r,head:i,footer:o}=t;return Un({root:["root",n&&"selected",r&&"hover",i&&"head",o&&"footer"]},OOe,e)},COe=Zt("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.head&&e.head,n.footer&&e.footer]}})(ir(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${EV.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${EV.selected}`]:{backgroundColor:t.alpha((t.vars||t).palette.primary.main,(t.vars||t).palette.action.selectedOpacity),"&:hover":{backgroundColor:t.alpha((t.vars||t).palette.primary.main,`${(t.vars||t).palette.action.selectedOpacity} + ${(t.vars||t).palette.action.hoverOpacity}`)}}}))),AV="tr",L5=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiTableRow"}),{className:i,component:o=AV,hover:a=!1,selected:s=!1,...u}=r,d=j.useContext(QR),m={...r,component:o,hover:a,selected:s,head:d&&d.variant==="head",footer:d&&d.variant==="footer"},v=SOe(m);return q.jsx(COe,{as:o,ref:n,className:fn(v.root,i),role:o===AV?null:"row",ownerState:m,...u})});function TOe(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function kOe(t,e,n,r={},i=()=>{}){const{ease:o=TOe,duration:a=300}=r;let s=null;const u=e[t];let d=!1;const m=()=>{d=!0},v=_=>{if(d){i(new Error("Animation cancelled"));return}s===null&&(s=_);const O=Math.min(1,(_-s)/a);if(e[t]=o(O)*(n-u)+u,O>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(v)};return u===n?(i(new Error("Element already at target position")),m):(requestAnimationFrame(v),m)}const EOe={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function AOe(t){const{onChange:e,...n}=t,r=j.useRef(),i=j.useRef(null),o=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return fh(()=>{const a=wk(()=>{const u=r.current;o(),u!==r.current&&e(r.current)}),s=ph(i.current);return s.addEventListener("resize",a),()=>{a.clear(),s.removeEventListener("resize",a)}},[e]),j.useEffect(()=>{o(),e(r.current)},[e]),q.jsx("div",{style:EOe,...n,ref:i})}function POe(t){return Qn("MuiTabScrollButton",t)}const MOe=Wn("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),ROe=t=>{const{classes:e,orientation:n,disabled:r}=t;return Un({root:["root",n,r&&"disabled"]},POe,e)},IOe=Zt(ey,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.orientation&&e[n.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${MOe.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),DOe=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiTabScrollButton"}),{className:i,slots:o={},slotProps:a={},direction:s,orientation:u,disabled:d,...m}=r,v=jO(),_={isRtl:v,...r},O=ROe(_),E=o.StartScrollButtonIcon??bOe,A=o.EndScrollButtonIcon??wOe,M=Xw({elementType:E,externalSlotProps:a.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:_}),L=Xw({elementType:A,externalSlotProps:a.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:_});return q.jsx(IOe,{component:"div",className:fn(O.root,i),ref:n,role:null,ownerState:_,tabIndex:null,...m,style:{...m.style,...u==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${v?-90:90}deg)`}},children:s==="left"?q.jsx(E,{...M}):q.jsx(A,{...L})})});function LOe(t){return Qn("MuiTabs",t)}const p3=Wn("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),PV=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,MV=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,EA=(t,e,n)=>{let r=!1,i=n(t,e);for(;i;){if(i===t.firstChild){if(r)return;r=!0}const o=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||o)i=n(t,i);else{i.focus();return}}},$Oe=t=>{const{vertical:e,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:a,scrollButtonsHideMobile:s,classes:u}=t;return Un({root:["root",e&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],list:["list","flexContainer",e&&"flexContainerVertical",e&&"vertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},LOe,u)},zOe=Zt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${p3.scrollButtons}`]:e.scrollButtons},{[`& .${p3.scrollButtons}`]:n.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,n.vertical&&e.vertical]}})(ir(({theme:t})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.scrollButtonsHideMobile,style:{[`& .${p3.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}}}]}))),NOe=Zt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.scroller,n.fixed&&e.fixed,n.hideScrollbar&&e.hideScrollbar,n.scrollableX&&e.scrollableX,n.scrollableY&&e.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:t})=>t.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:t})=>t.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:t})=>t.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:t})=>t.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),BOe=Zt("div",{name:"MuiTabs",slot:"List",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.list,e.flexContainer,n.vertical&&e.flexContainerVertical,n.centered&&e.centered]}})({display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.centered,style:{justifyContent:"center"}}]}),FOe=Zt("span",{name:"MuiTabs",slot:"Indicator"})(ir(({theme:t})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(t.vars||t).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(t.vars||t).palette.secondary.main}},{props:({ownerState:e})=>e.vertical,style:{height:"100%",width:2,right:0}}]}))),jOe=Zt(AOe)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),RV={},VOe=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiTabs"}),i=bd(),o=jO(),{"aria-label":a,"aria-labelledby":s,action:u,centered:d=!1,children:m,className:v,component:_="div",allowScrollButtonsMobile:O=!1,indicatorColor:E="primary",onChange:A,orientation:M="horizontal",ScrollButtonComponent:L,scrollButtons:$="auto",selectionFollowsFocus:N,slots:F={},slotProps:Q={},TabIndicatorProps:W={},TabScrollButtonProps:H={},textColor:te="primary",value:ne,variant:ce="standard",visibleScrollbar:we=!1,...re}=r,se=ce==="scrollable",be=M==="vertical",fe=be?"scrollTop":"scrollLeft",ve=be?"top":"left",Me=be?"bottom":"right",Ne=be?"clientHeight":"clientWidth",Qe=be?"height":"width",Ce={...r,component:_,allowScrollButtonsMobile:O,indicatorColor:E,orientation:M,vertical:be,scrollButtons:$,textColor:te,variant:ce,visibleScrollbar:we,fixed:!se,hideScrollbar:se&&!we,scrollableX:se&&!be,scrollableY:se&&be,centered:d&&!se,scrollButtonsHideMobile:!O},Ae=$Oe(Ce),Xe=Xw({elementType:F.StartScrollButtonIcon,externalSlotProps:Q.startScrollButtonIcon,ownerState:Ce}),ke=Xw({elementType:F.EndScrollButtonIcon,externalSlotProps:Q.endScrollButtonIcon,ownerState:Ce}),[ft,pt]=j.useState(!1),[lt,ot]=j.useState(RV),[yt,Et]=j.useState(!1),[Tt,Ht]=j.useState(!1),[wt,un]=j.useState(!1),[Gt,Jt]=j.useState({overflow:"hidden",scrollbarWidth:0}),Sn=new Map,nn=j.useRef(null),Cn=j.useRef(null),jn={slots:F,slotProps:{indicator:W,scrollButton:H,...Q}},Gn=()=>{const an=nn.current;let En;if(an){const nr=an.getBoundingClientRect();En={clientWidth:an.clientWidth,scrollLeft:an.scrollLeft,scrollTop:an.scrollTop,scrollWidth:an.scrollWidth,top:nr.top,bottom:nr.bottom,left:nr.left,right:nr.right}}let Hn;if(an&&ne!==!1){const nr=Cn.current.children;if(nr.length>0){const ki=nr[Sn.get(ne)];Hn=ki?ki.getBoundingClientRect():null}}return{tabsMeta:En,tabMeta:Hn}},je=ld(()=>{const{tabsMeta:an,tabMeta:En}=Gn();let Hn=0,nr;be?(nr="top",En&&an&&(Hn=En.top-an.top+an.scrollTop)):(nr=o?"right":"left",En&&an&&(Hn=(o?-1:1)*(En[nr]-an[nr]+an.scrollLeft)));const ki={[nr]:Hn,[Qe]:En?En[Qe]:0};if(typeof lt[nr]!="number"||typeof lt[Qe]!="number")ot(ki);else{const hs=Math.abs(lt[nr]-ki[nr]),Xt=Math.abs(lt[Qe]-ki[Qe]);(hs>=1||Xt>=1)&&ot(ki)}}),Ye=(an,{animation:En=!0}={})=>{En?kOe(fe,nn.current,an,{duration:i.transitions.duration.standard}):nn.current[fe]=an},vt=an=>{let En=nn.current[fe];be?En+=an:En+=an*(o?-1:1),Ye(En)},kt=()=>{const an=nn.current[Ne];let En=0;const Hn=Array.from(Cn.current.children);for(let nr=0;nr<Hn.length;nr+=1){const ki=Hn[nr];if(En+ki[Ne]>an){nr===0&&(En=an);break}En+=ki[Ne]}return En},jt=()=>{vt(-1*kt())},Oe=()=>{vt(kt())},[ae,{onChange:K,..._e}]=Xn("scrollbar",{className:fn(Ae.scrollableX,Ae.hideScrollbar),elementType:jOe,shouldForwardComponentProp:!0,externalForwardedProps:jn,ownerState:Ce}),$e=j.useCallback(an=>{K?.(an),Jt({overflow:null,scrollbarWidth:an})},[K]),[ze,nt]=Xn("scrollButtons",{className:fn(Ae.scrollButtons,H.className),elementType:DOe,externalForwardedProps:jn,ownerState:Ce,additionalProps:{orientation:M,slots:{StartScrollButtonIcon:F.startScrollButtonIcon||F.StartScrollButtonIcon,EndScrollButtonIcon:F.endScrollButtonIcon||F.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:Xe,endScrollButtonIcon:ke}}}),tt=()=>{const an={};an.scrollbarSizeListener=se?q.jsx(ae,{..._e,onChange:$e}):null;const Hn=se&&($==="auto"&&(yt||Tt)||$===!0);return an.scrollButtonStart=Hn?q.jsx(ze,{direction:o?"right":"left",onClick:jt,disabled:!yt,...nt}):null,an.scrollButtonEnd=Hn?q.jsx(ze,{direction:o?"left":"right",onClick:Oe,disabled:!Tt,...nt}):null,an},Ke=ld(an=>{const{tabsMeta:En,tabMeta:Hn}=Gn();if(!(!Hn||!En)){if(Hn[ve]<En[ve]){const nr=En[fe]+(Hn[ve]-En[ve]);Ye(nr,{animation:an})}else if(Hn[Me]>En[Me]){const nr=En[fe]+(Hn[Me]-En[Me]);Ye(nr,{animation:an})}}}),at=ld(()=>{se&&$!==!1&&un(!wt)});j.useEffect(()=>{const an=wk(()=>{nn.current&&je()});let En;const Hn=hs=>{hs.forEach(Xt=>{Xt.removedNodes.forEach(Oo=>{En?.unobserve(Oo)}),Xt.addedNodes.forEach(Oo=>{En?.observe(Oo)})}),an(),at()},nr=ph(nn.current);nr.addEventListener("resize",an);let ki;return typeof ResizeObserver<"u"&&(En=new ResizeObserver(an),Array.from(Cn.current.children).forEach(hs=>{En.observe(hs)})),typeof MutationObserver<"u"&&(ki=new MutationObserver(Hn),ki.observe(Cn.current,{childList:!0})),()=>{an.clear(),nr.removeEventListener("resize",an),ki?.disconnect(),En?.disconnect()}},[je,at]),j.useEffect(()=>{const an=Array.from(Cn.current.children),En=an.length;if(typeof IntersectionObserver<"u"&&En>0&&se&&$!==!1){const Hn=an[0],nr=an[En-1],ki={root:nn.current,threshold:.99},hs=ca=>{Et(!ca[0].isIntersecting)},Xt=new IntersectionObserver(hs,ki);Xt.observe(Hn);const Oo=ca=>{Ht(!ca[0].isIntersecting)},Jo=new IntersectionObserver(Oo,ki);return Jo.observe(nr),()=>{Xt.disconnect(),Jo.disconnect()}}},[se,$,wt,m?.length]),j.useEffect(()=>{pt(!0)},[]),j.useEffect(()=>{je()}),j.useEffect(()=>{Ke(RV!==lt)},[Ke,lt]),j.useImperativeHandle(u,()=>({updateIndicator:je,updateScrollButtons:at}),[je,at]);const[St,st]=Xn("indicator",{className:fn(Ae.indicator,W.className),elementType:FOe,externalForwardedProps:jn,ownerState:Ce,additionalProps:{style:lt}}),$t=q.jsx(St,{...st});let sn=0;const Vn=j.Children.map(m,an=>{if(!j.isValidElement(an))return null;const En=an.props.value===void 0?sn:an.props.value;Sn.set(En,sn);const Hn=En===ne;return sn+=1,j.cloneElement(an,{fullWidth:ce==="fullWidth",indicator:Hn&&!ft&&$t,selected:Hn,selectionFollowsFocus:N,onChange:A,textColor:te,value:En,...sn===1&&ne===!1&&!an.props.tabIndex?{tabIndex:0}:{}})}),Ar=an=>{if(an.altKey||an.shiftKey||an.ctrlKey||an.metaKey)return;const En=Cn.current,Hn=aw(vu(En));if(Hn?.getAttribute("role")!=="tab")return;let ki=M==="horizontal"?"ArrowLeft":"ArrowUp",hs=M==="horizontal"?"ArrowRight":"ArrowDown";switch(M==="horizontal"&&o&&(ki="ArrowRight",hs="ArrowLeft"),an.key){case ki:an.preventDefault(),EA(En,Hn,MV);break;case hs:an.preventDefault(),EA(En,Hn,PV);break;case"Home":an.preventDefault(),EA(En,null,PV);break;case"End":an.preventDefault(),EA(En,null,MV);break}},Or=tt(),[ut,Fr]=Xn("root",{ref:n,className:fn(Ae.root,v),elementType:zOe,externalForwardedProps:{...jn,...re,component:_},ownerState:Ce}),[ji,tr]=Xn("scroller",{ref:nn,className:Ae.scroller,elementType:NOe,externalForwardedProps:jn,ownerState:Ce,additionalProps:{style:{overflow:Gt.overflow,[be?`margin${o?"Left":"Right"}`:"marginBottom"]:we?void 0:-Gt.scrollbarWidth}}}),[Pn,ci]=Xn("list",{ref:Cn,className:fn(Ae.list,Ae.flexContainer),elementType:BOe,externalForwardedProps:jn,ownerState:Ce,getSlotProps:an=>({...an,onKeyDown:En=>{Ar(En),an.onKeyDown?.(En)}})});return q.jsxs(ut,{...Fr,children:[Or.scrollButtonStart,Or.scrollbarSizeListener,q.jsxs(ji,{...tr,children:[q.jsx(Pn,{"aria-label":a,"aria-labelledby":s,"aria-orientation":M==="vertical"?"vertical":null,role:"tablist",...ci,children:Vn}),ft&&$t]}),Or.scrollButtonEnd]})});function QOe(t){return Qn("MuiTextField",t)}Wn("MuiTextField",["root"]);const UOe={standard:pB,filled:dB,outlined:gB},ZOe=t=>{const{classes:e}=t;return Un({root:["root"]},QOe,e)},qOe=Zt(n_,{name:"MuiTextField",slot:"Root"})({}),Ba=j.forwardRef(function(e,n){const r=qn({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:a,className:s,color:u="primary",defaultValue:d,disabled:m=!1,error:v=!1,FormHelperTextProps:_,fullWidth:O=!1,helperText:E,id:A,InputLabelProps:M,inputProps:L,InputProps:$,inputRef:N,label:F,maxRows:Q,minRows:W,multiline:H=!1,name:te,onBlur:ne,onChange:ce,onFocus:we,placeholder:re,required:se=!1,rows:be,select:fe=!1,SelectProps:ve,slots:Me={},slotProps:Ne={},type:Qe,value:Ce,variant:Ae="outlined",...Xe}=r,ke={...r,autoFocus:o,color:u,disabled:m,error:v,fullWidth:O,multiline:H,required:se,select:fe,variant:Ae},ft=ZOe(ke),pt=VO(A),lt=E&&pt?`${pt}-helper-text`:void 0,ot=F&&pt?`${pt}-label`:void 0,yt=UOe[Ae],Et={slots:Me,slotProps:{input:$,inputLabel:M,htmlInput:L,formHelperText:_,select:ve,...Ne}},Tt={},Ht=Et.slotProps.inputLabel;Ae==="outlined"&&(Ht&&typeof Ht.shrink<"u"&&(Tt.notched=Ht.shrink),Tt.label=F),fe&&((!ve||!ve.native)&&(Tt.id=void 0),Tt["aria-describedby"]=void 0);const[wt,un]=Xn("root",{elementType:qOe,shouldForwardComponentProp:!0,externalForwardedProps:{...Et,...Xe},ownerState:ke,className:fn(ft.root,s),ref:n,additionalProps:{disabled:m,error:v,fullWidth:O,required:se,color:u,variant:Ae}}),[Gt,Jt]=Xn("input",{elementType:yt,externalForwardedProps:Et,additionalProps:Tt,ownerState:ke}),[Sn,nn]=Xn("inputLabel",{elementType:r_,externalForwardedProps:Et,ownerState:ke}),[Cn,jn]=Xn("htmlInput",{elementType:"input",externalForwardedProps:Et,ownerState:ke}),[Gn,je]=Xn("formHelperText",{elementType:f1e,externalForwardedProps:Et,ownerState:ke}),[Ye,vt]=Xn("select",{elementType:D0,externalForwardedProps:Et,ownerState:ke}),kt=q.jsx(Gt,{"aria-describedby":lt,autoComplete:i,autoFocus:o,defaultValue:d,fullWidth:O,multiline:H,name:te,rows:be,maxRows:Q,minRows:W,type:Qe,value:Ce,id:pt,inputRef:N,onBlur:ne,onChange:ce,onFocus:we,placeholder:re,inputProps:jn,slots:{input:Me.htmlInput?Cn:void 0},...Jt});return q.jsxs(wt,{...un,children:[F!=null&&F!==""&&q.jsx(Sn,{htmlFor:pt,id:ot,...nn,children:F}),fe?q.jsx(Ye,{"aria-describedby":lt,id:pt,labelId:ot,value:Ce,input:kt,...vt,children:a}):kt,E&&q.jsx(Gn,{id:lt,...je,children:E})]})}),WOe=qY({themeId:mk}),HOe=ri(q.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"})),GOe=ri(q.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"})),eO=ri(q.jsx("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"})),UR=ri(q.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"})),tO=ri(q.jsx("path",{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2m-11-4 2.03 2.71L16 11l4 5H8zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6z"}));var Jh=function(){return Jh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Jh.apply(this,arguments)};function ZO(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function XOe(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(m){try{d(r.next(m))}catch(v){a(v)}}function u(m){try{d(r.throw(m))}catch(v){a(v)}}function d(m){m.done?o(m.value):i(m.value).then(s,u)}d((r=r.apply(t,e||[])).next())})}function YOe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}const KOe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class _B extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class JOe extends _B{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class IV extends _B{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class DV extends _B{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var v4;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(v4||(v4={}));class eSe{constructor(e,{headers:n={},customFetch:r,region:i=v4.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=KOe(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return XOe(this,arguments,void 0,function*(n,r={}){var i;let o,a;try{const{headers:s,method:u,body:d,signal:m,timeout:v}=r;let _={},{region:O}=r;O||(O=this.region);const E=new URL(`${this.url}/${n}`);O&&O!=="any"&&(_["x-region"]=O,E.searchParams.set("forceFunctionRegion",O));let A;d&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",A=d):typeof d=="string"?(_["Content-Type"]="text/plain",A=d):typeof FormData<"u"&&d instanceof FormData?A=d:(_["Content-Type"]="application/json",A=JSON.stringify(d)):A=d;let M=m;v&&(a=new AbortController,o=setTimeout(()=>a.abort(),v),m?(M=a.signal,m.addEventListener("abort",()=>a.abort())):M=a.signal);const L=yield this.fetch(E.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),s),body:A,signal:M}).catch(Q=>{throw new JOe(Q)}),$=L.headers.get("x-relay-error");if($&&$==="true")throw new IV(L);if(!L.ok)throw new DV(L);let N=((i=L.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),F;return N==="application/json"?F=yield L.json():N==="application/octet-stream"||N==="application/pdf"?F=yield L.blob():N==="text/event-stream"?F=L:N==="multipart/form-data"?F=yield L.formData():F=yield L.text(),{data:F,error:null,response:L}}catch(s){return{data:null,error:s,response:s instanceof DV||s instanceof IV?s.context:void 0}}finally{o&&clearTimeout(o)}})}}var tSe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},nSe=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let a=null,s=null,u=null,d=o.status,m=o.statusText;if(o.ok){var v,_;if(n.method!=="HEAD"){var O;const L=await o.text();L===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((O=n.headers.get("Accept"))===null||O===void 0)&&O.includes("application/vnd.pgrst.plan+text"))?s=L:s=JSON.parse(L))}const A=(v=n.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),M=(_=o.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");A&&M&&M.length>1&&(u=parseInt(M[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(s)&&(s.length>1?(a={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,u=null,d=406,m="Not Acceptable"):s.length===1?s=s[0]:s=null)}else{var E;const A=await o.text();try{a=JSON.parse(A),Array.isArray(a)&&o.status===404&&(s=[],a=null,d=200,m="OK")}catch{o.status===404&&A===""?(d=204,m="No Content"):a={message:A}}if(a&&n.isMaybeSingle&&(!(a==null||(E=a.details)===null||E===void 0)&&E.includes("0 rows"))&&(a=null,d=200,m="OK"),a&&n.shouldThrowOnError)throw new tSe(a)}return{error:a,data:s,count:u,status:d,statusText:m}});return this.shouldThrowOnError||(i=i.catch(o=>{var a;let s="";const u=o?.cause;if(u){var d,m,v,_;const E=(d=u?.message)!==null&&d!==void 0?d:"",A=(m=u?.code)!==null&&m!==void 0?m:"";s=`${(v=o?.name)!==null&&v!==void 0?v:"FetchError"}: ${o?.message}`,s+=`

Caused by: ${(_=u?.name)!==null&&_!==void 0?_:"Error"}: ${E}`,A&&(s+=` (${A})`),u?.stack&&(s+=`
${u.stack}`)}else{var O;s=(O=o?.stack)!==null&&O!==void 0?O:""}return{error:{message:`${(a=o?.name)!==null&&a!==void 0?a:"FetchError"}: ${o?.message}`,details:s,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},rSe=class extends nSe{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const s=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${s};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const LV=new RegExp("[,()]");var Y1=class extends rSe{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&LV.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&LV.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},iSe=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(s=>/\s/.test(s)&&!o?"":(s==='"'&&(o=!o),s)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new Y1({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,s)=>a.concat(Object.keys(s)),[]);if(o.length>0){const a=[...new Set(o)].map(s=>`"${s}"`);this.url.searchParams.set("columns",a.join(","))}}return new Y1({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(s.length>0){const u=[...new Set(s)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Y1({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Y1({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Y1({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},oSe=class QK{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new iSe(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new QK(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var a;let s;const u=new URL(`${this.url}/rpc/${e}`);let d;r||i?(s=r?"HEAD":"GET",Object.entries(n).filter(([v,_])=>_!==void 0).map(([v,_])=>[v,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([v,_])=>{u.searchParams.append(v,_)})):(s="POST",d=n);const m=new Headers(this.headers);return o&&m.set("Prefer",`count=${o}`),new Y1({method:s,url:u,headers:m,schema:this.schemaName,body:d,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class sSe{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const aSe="2.89.0",lSe=`realtime-js/${aSe}`,UK="1.0.0",cSe="2.0.0",$V=UK,x4=1e4,uSe=1e3,hSe=100;var A0;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(A0||(A0={}));var va;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(va||(va={}));var Sf;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Sf||(Sf={}));var _4;(function(t){t.websocket="websocket"})(_4||(_4={}));var Zx;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Zx||(Zx={}));class dSe{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var i,o;const a=e.topic,s=(i=e.ref)!==null&&i!==void 0?i:"",u=(o=e.join_ref)!==null&&o!==void 0?o:"",d=e.payload.event,m=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},v=Object.keys(m).length===0?"":JSON.stringify(m);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+s.length+a.length+d.length+v.length,O=new ArrayBuffer(this.HEADER_LENGTH+_);let E=new DataView(O),A=0;E.setUint8(A++,this.KINDS.userBroadcastPush),E.setUint8(A++,u.length),E.setUint8(A++,s.length),E.setUint8(A++,a.length),E.setUint8(A++,d.length),E.setUint8(A++,v.length),E.setUint8(A++,n),Array.from(u,L=>E.setUint8(A++,L.charCodeAt(0))),Array.from(s,L=>E.setUint8(A++,L.charCodeAt(0))),Array.from(a,L=>E.setUint8(A++,L.charCodeAt(0))),Array.from(d,L=>E.setUint8(A++,L.charCodeAt(0))),Array.from(v,L=>E.setUint8(A++,L.charCodeAt(0)));var M=new Uint8Array(O.byteLength+r.byteLength);return M.set(new Uint8Array(O),0),M.set(new Uint8Array(r),O.byteLength),M.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,a,s,u]=r;return n({join_ref:i,ref:o,topic:a,event:s,payload:u})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,i)}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),s=n.getUint8(4);let u=this.HEADER_LENGTH+4;const d=r.decode(e.slice(u,u+i));u=u+i;const m=r.decode(e.slice(u,u+o));u=u+o;const v=r.decode(e.slice(u,u+a));u=u+a;const _=e.slice(u,e.byteLength),O=s===this.JSON_ENCODING?JSON.parse(r.decode(_)):_,E={type:this.BROADCAST_EVENT,event:m,payload:O};return a>0&&(E.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class ZK{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Po;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Po||(Po={}));const zV=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=fSe(a,t,e,i),o),{}):{}},fSe=(t,e,n,r)=>{const i=e.find(s=>s.name===t),o=i?.type,a=n[t];return o&&!r.includes(o)?qK(o,a):b4(a)},qK=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return ySe(e,n)}switch(t){case Po.bool:return pSe(e);case Po.float4:case Po.float8:case Po.int2:case Po.int4:case Po.int8:case Po.numeric:case Po.oid:return mSe(e);case Po.json:case Po.jsonb:return gSe(e);case Po.timestamp:return vSe(e);case Po.abstime:case Po.date:case Po.daterange:case Po.int4range:case Po.int8range:case Po.money:case Po.reltime:case Po.text:case Po.time:case Po.timestamptz:case Po.timetz:case Po.tsrange:case Po.tstzrange:return b4(e);default:return b4(e)}},b4=t=>t,pSe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},mSe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},gSe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},ySe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>qK(e,s))}return t},vSe=t=>typeof t=="string"?t.replace(" ","T"):t,WK=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class m3{constructor(e,n,r={},i=x4){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var NV;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(NV||(NV={}));class RC{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RC.syncState(this.state,i,o,a),this.pendingDiffs.forEach(u=>{this.state=RC.syncDiff(this.state,u,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=RC.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),a=this.transformState(n),s={},u={};return this.map(o,(d,m)=>{a[d]||(u[d]=m)}),this.map(a,(d,m)=>{const v=o[d];if(v){const _=m.map(M=>M.presence_ref),O=v.map(M=>M.presence_ref),E=m.filter(M=>O.indexOf(M.presence_ref)<0),A=v.filter(M=>_.indexOf(M.presence_ref)<0);E.length>0&&(s[d]=E),A.length>0&&(u[d]=A)}else s[d]=m}),this.syncDiff(o,{joins:s,leaves:u},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(s,u)=>{var d;const m=(d=e[s])!==null&&d!==void 0?d:[];if(e[s]=this.cloneDeep(u),m.length>0){const v=e[s].map(O=>O.presence_ref),_=m.filter(O=>v.indexOf(O.presence_ref)<0);e[s].unshift(..._)}r(s,m,u)}),this.map(a,(s,u)=>{let d=e[s];if(!d)return;const m=u.map(v=>v.presence_ref);d=d.filter(v=>m.indexOf(v.presence_ref)<0),e[s]=d,i(s,d,u),d.length===0&&delete e[s]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var BV;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(BV||(BV={}));var IC;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(IC||(IC={}));var zg;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(zg||(zg={}));class uw{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=va.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new m3(this,Sf.join,this.params,this.timeout),this.rejoinTimer=new ZK(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=va.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=va.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=va.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=va.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=va.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sf.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new RC(this),this.broadcastEndpointURL=WK(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==va.closed){const{config:{broadcast:a,presence:s,private:u}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(O=>O.filter))!==null&&i!==void 0?i:[],m=!!this.bindings[IC.PRESENCE]&&this.bindings[IC.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,v={},_={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:m}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(O=>e?.(zg.CHANNEL_ERROR,O)),this._onClose(()=>e?.(zg.CLOSED)),this.updateJoinPayload(Object.assign({config:_},v)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:O})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),O===void 0){e?.(zg.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,M=(E=A?.length)!==null&&E!==void 0?E:0,L=[];for(let $=0;$<M;$++){const N=A[$],{filter:{event:F,schema:Q,table:W,filter:H}}=N,te=O&&O[$];if(te&&te.event===F&&uw.isFilterValueEqual(te.schema,Q)&&uw.isFilterValueEqual(te.table,W)&&uw.isFilterValueEqual(te.filter,H))L.push(Object.assign(Object.assign({},N),{id:te.id}));else{this.unsubscribe(),this.state=va.errored,e?.(zg.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,e&&e(zg.SUBSCRIBED);return}}).receive("error",O=>{this.state=va.errored,e?.(zg.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(O).join(", ")||"error")))}).receive("timeout",()=>{e?.(zg.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===va.joined&&e===IC.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let u=s.statusText;try{const d=await s.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,u;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||u===void 0)&&u.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=va.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sf.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new m3(this,Sf.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=va.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new m3(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>hSe){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const a=e.toLocaleLowerCase(),{close:s,error:u,leave:d,join:m}=Sf;if(r&&[s,u,d,m].indexOf(a)>=0&&r!==this._joinRef())return;let _=this._onMessage(a,n,r);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(O=>{var E,A,M;return((E=O.filter)===null||E===void 0?void 0:E.event)==="*"||((M=(A=O.filter)===null||A===void 0?void 0:A.event)===null||M===void 0?void 0:M.toLocaleLowerCase())===a}).map(O=>O.callback(_,r)):(o=this.bindings[a])===null||o===void 0||o.filter(O=>{var E,A,M,L,$,N;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in O){const F=O.id,Q=(E=O.filter)===null||E===void 0?void 0:E.event;return F&&((A=n.ids)===null||A===void 0?void 0:A.includes(F))&&(Q==="*"||Q?.toLocaleLowerCase()===((M=n.data)===null||M===void 0?void 0:M.type.toLocaleLowerCase()))}else{const F=($=(L=O?.filter)===null||L===void 0?void 0:L.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return F==="*"||F===((N=n?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return O.type.toLocaleLowerCase()===a}).map(O=>{if(typeof _=="object"&&"ids"in _){const E=_.data,{schema:A,table:M,commit_timestamp:L,type:$,errors:N}=E;_=Object.assign(Object.assign({},{schema:A,table:M,commit_timestamp:L,eventType:$,new:{},old:{},errors:N}),this._getPayloadRecords(E))}O.callback(_,r)})}_isClosed(){return this.state===va.closed}_isJoined(){return this.state===va.joined}_isJoining(){return this.state===va.joining}_isLeaving(){return this.state===va.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&uw.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Sf.close,{},e)}_onError(e){this._on(Sf.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=va.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=zV(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=zV(e.columns,e.old_record)),n}}const g3=()=>{},AA={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},xSe=[1e3,2e3,5e3,1e4],_Se=1e4,bSe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wSe{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=x4,this.transport=null,this.heartbeatIntervalMs=AA.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=g3,this.ref=0,this.reconnectTimer=null,this.vsn=$V,this.logger=g3,this.conn=null,this.sendBuffer=[],this.serializer=new dSe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${_4.websocket}`,this.httpEndpoint=WK(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sSe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case A0.connecting:return Zx.Connecting;case A0.open:return Zx.Open;case A0.closing:return Zx.Closing;default:return Zx.Closed}}isConnected(){return this.connectionState()===Zx.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new uw(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,a=()=>{this.encode(e,s=>{var u;(u=this.conn)===null||u===void 0||u.send(s)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(uSe,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},AA.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:a}=n,s=a?`(${a})`:"",u=o.status||"";this.log("receive",`${u} ${r} ${i} ${s}`.trim(),o),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===A0.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===A0.open||this.conn.readyState===A0.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Sf.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([bSe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:lSe};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Sf.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ZK(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},AA.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,a,s,u,d,m,v,_,O;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:x4,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:AA.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=e?.heartbeatCallback)!==null&&s!==void 0?s:g3,this.vsn=(u=e?.vsn)!==null&&u!==void 0?u:$V,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e?.reconnectAfterMs)!==null&&d!==void 0?d:(E=>xSe[E-1]||_Se),this.vsn){case UK:this.encode=(m=e?.encode)!==null&&m!==void 0?m:((E,A)=>A(JSON.stringify(E))),this.decode=(v=e?.decode)!==null&&v!==void 0?v:((E,A)=>A(JSON.parse(E)));break;case cSe:this.encode=(_=e?.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(O=e?.decode)!==null&&O!==void 0?O:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var uT=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function OSe(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function SSe(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function CSe(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:a}){const s=OSe(t.baseUrl,r,i),u=await SSe(t.auth),d=await e(s,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...u,...a},body:o?JSON.stringify(o):void 0}),m=await d.text(),v=(d.headers.get("content-type")||"").includes("application/json"),_=v&&m?JSON.parse(m):m;if(!d.ok){const O=v?_:void 0,E=O?.error;throw new uT(E?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:E?.type,icebergCode:E?.code,details:O})}return{status:d.status,headers:d.headers,data:_}}}}function PA(t){return t.join("")}var TSe=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:PA(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${PA(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${PA(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${PA(t.namespace)}`}),!0}catch(e){if(e instanceof uT&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof uT&&n.status===409)return;throw n}}};function M1(t){return t.join("")}var kSe=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${M1(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${M1(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${M1(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${M1(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${M1(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${M1(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof uT&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof uT&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},ESe=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=CSe({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new TSe(this.client,e),this.tableOps=new kSe(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},ZR=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function os(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var ASe=class extends ZR{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},w4=class extends ZR{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const bB=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),PSe=()=>Response,O4=t=>{if(Array.isArray(t))return t.map(n=>O4(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=O4(r)}),e},MSe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},RSe=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function hT(t){"@babel/helpers - typeof";return hT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hT(t)}function ISe(t,e){if(hT(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DSe(t){var e=ISe(t,"string");return hT(e)=="symbol"?e:e+""}function LSe(t,e,n){return(e=DSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FV(Object(n),!0).forEach(function(r){LSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const y3=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},$Se=async(t,e,n)=>{t instanceof await PSe()&&!n?.noResolveJson?t.json().then(r=>{const i=t.status||500,o=r?.statusCode||i+"";e(new ASe(y3(r),i,o))}).catch(r=>{e(new w4(y3(r),r))}):e(new w4(y3(t),t))},zSe=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!r?i:(MSe(r)?(i.headers=yr({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),yr(yr({},i),n))};async function Tk(t,e,n,r,i,o){return new Promise((a,s)=>{t(n,zSe(e,r,i,o)).then(u=>{if(!u.ok)throw u;return r?.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>$Se(u,s,r))})}async function dT(t,e,n,r){return Tk(t,"GET",e,n,r)}async function wf(t,e,n,r,i){return Tk(t,"POST",e,r,i,n)}async function S4(t,e,n,r,i){return Tk(t,"PUT",e,r,i,n)}async function NSe(t,e,n,r){return Tk(t,"HEAD",e,yr(yr({},n),{},{noResolveJson:!0}),r)}async function wB(t,e,n,r,i){return Tk(t,"DELETE",e,r,i,n)}var BSe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(os(e))return{data:null,error:e};throw e}}};let HK;HK=Symbol.toStringTag;var FSe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[HK]="BlobDownloadBuilder",this.promise=null}asStream(){return new BSe(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(os(e))return{data:null,error:e};throw e}}};const jSe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jV={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var VSe=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=bB(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let o;const a=yr(yr({},jV),r);let s=yr(yr({},i.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),u&&o.append("metadata",i.encodeMetadata(u)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),u&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(u))):(o=n,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,u&&(s["x-metadata"]=i.toBase64(i.encodeMetadata(u))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),r?.headers&&(s=yr(yr({},s),r.headers));const d=i._removeEmptyFolders(e),m=i._getFinalPath(d),v=await(t=="PUT"?S4:wf)(i.fetch,`${i.url}/object/${m}`,o,yr({headers:s},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:v.Id,fullPath:v.Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(os(o))return{data:null,error:o};throw o}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const o=i._removeEmptyFolders(t),a=i._getFinalPath(o),s=new URL(i.url+`/object/upload/sign/${a}`);s.searchParams.set("token",e);try{let u;const d=yr({upsert:jV.upsert},r),m=yr(yr({},i.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",d.cacheControl)):(u=n,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType),{data:{path:o,fullPath:(await S4(i.fetch,s.toString(),u,{headers:m})).Key},error:null}}catch(u){if(i.shouldThrowOnError)throw u;if(os(u))return{data:null,error:u};throw u}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=yr({},n.headers);e?.upsert&&(i["x-upsert"]="true");const o=await wf(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(n.url+o.url),s=a.searchParams.get("token");if(!s)throw new ZR("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:s},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(os(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await wf(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(os(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await wf(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(os(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),o=await wf(r.fetch,`${r.url}/object/sign/${i}`,yr({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${r.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(os(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await wf(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>yr(yr({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(os(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),i=r?`?${r}`:"",o=this._getFinalPath(t),a=()=>dT(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new FSe(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:O4(await dT(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(os(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await NSe(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(os(r)&&r instanceof w4){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof e?.transform<"u"?"render/image":"object",a=this.transformOptsToQueryString(e?.transform||{});a!==""&&r.push(a);let s=r.join("&");return s!==""&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${s}`)}}}async remove(t){var e=this;try{return{data:await wB(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=yr(yr(yr({},jSe),e),{},{prefix:t||""});return{data:await wf(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(os(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=yr({},t);return{data:await wf(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(os(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const GK="2.89.0",XK={"X-Client-Info":`storage-js/${GK}`};var QSe=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=yr(yr({},XK),e),this.fetch=bB(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await dT(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await dT(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await wf(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(os(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await S4(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(os(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await wf(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await wB(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},USe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=yr(yr({},XK),e),this.fetch=bB(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await wf(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await dT(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await wB(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(os(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!RSe(t))throw new ZR("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new ESe({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const a=i[o];return typeof a!="function"?a:async(...s)=>{try{return{data:await a.apply(i,s),error:null}}catch(u){if(r)throw u;return{data:null,error:u}}}}})}};const OB={"X-Client-Info":`storage-js/${GK}`,"Content-Type":"application/json"};var YK=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ih(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var v3=class extends YK{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ZSe=class extends YK{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const SB=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),qSe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},VV=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),WSe=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=o?.statusCode||o?.code||r+"";e(new v3(VV(o),r,a))}).catch(()=>{const o=r+"";e(new v3(i.statusText||`HTTP ${r} error`,r,o))});else{const o=r+"";e(new v3(i.statusText||`HTTP ${r} error`,r,o))}}else e(new ZSe(VV(t),t))},HSe=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return r?(qSe(r)?(i.headers=yr({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,yr(yr({},i),n)):i};async function GSe(t,e,n,r,i,o){return new Promise((a,s)=>{t(n,HSe(e,r,i,o)).then(u=>{if(!u.ok)throw u;if(r?.noResolveJson)return u;const d=u.headers.get("content-type");return!d||!d.includes("application/json")?{}:u.json()}).then(u=>a(u)).catch(u=>WSe(u,s,r))})}async function oh(t,e,n,r,i){return GSe(t,"POST",e,r,i,n)}var XSe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=yr(yr({},OB),e),this.fetch=SB(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await oh(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ih(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await oh(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ih(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await oh(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ih(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await oh(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ih(r))return{data:null,error:r};throw r}}},YSe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=yr(yr({},OB),e),this.fetch=SB(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await oh(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ih(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await oh(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ih(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await oh(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ih(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await oh(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ih(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await oh(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ih(n))return{data:null,error:n};throw n}}},KSe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=yr(yr({},OB),e),this.fetch=SB(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await oh(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ih(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await oh(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ih(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await oh(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ih(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await oh(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ih(n))return{data:null,error:n};throw n}}},JSe=class extends KSe{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new e2e(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},e2e=class extends XSe{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,yr(yr({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,yr(yr({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new t2e(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},t2e=class extends YSe{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,yr(yr({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,yr(yr({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,yr(yr({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,yr(yr({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,yr(yr({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},n2e=class extends QSe{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new VSe(this.url,this.headers,t,this.fetch)}get vectors(){return new JSe(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new USe(this.url+"/iceberg",this.headers,this.fetch)}};const KK="2.89.0",K1=30*1e3,C4=3,x3=C4*K1,r2e="http://localhost:9999",i2e="supabase.auth.token",o2e={"X-Client-Info":`gotrue-js/${KK}`},T4="X-Supabase-Api-Version",JK={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},s2e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,a2e=600*1e3;class fT extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function er(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class l2e extends fT{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function c2e(t){return er(t)&&t.name==="AuthApiError"}class qx extends fT{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class fy extends fT{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Gu extends fy{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function u2e(t){return er(t)&&t.name==="AuthSessionMissingError"}class R1 extends fy{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class MA extends fy{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class RA extends fy{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function h2e(t){return er(t)&&t.name==="AuthImplicitGrantRedirectError"}class QV extends fy{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class d2e extends fy{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class k4 extends fy{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function _3(t){return er(t)&&t.name==="AuthRetryableFetchError"}class UV extends fy{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class E4 extends fy{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const $5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ZV=` 	
\r=`.split(""),f2e=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ZV.length;e+=1)t[ZV[e].charCodeAt(0)]=-2;for(let e=0;e<$5.length;e+=1)t[$5[e].charCodeAt(0)]=e;return t})();function qV(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n($5[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n($5[r]),e.queuedBits-=6}}function eJ(t,e,n){const r=f2e[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function WV(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{g2e(a,r,n)};for(let a=0;a<t.length;a+=1)eJ(t.charCodeAt(a),i,o);return e.join("")}function p2e(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function m2e(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}p2e(r,e)}}function g2e(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function ww(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)eJ(t.charCodeAt(i),n,r);return new Uint8Array(e)}function y2e(t){const e=[];return m2e(t,n=>e.push(n)),new Uint8Array(e)}function o_(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>qV(i,n,r)),qV(null,n,r),e.join("")}function v2e(t){return Math.round(Date.now()/1e3)+t}function x2e(){return Symbol("auth-callback")}const sl=()=>typeof window<"u"&&typeof document<"u",Dx={tested:!1,writable:!1},tJ=()=>{if(!sl())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Dx.tested)return Dx.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Dx.tested=!0,Dx.writable=!0}catch{Dx.tested=!0,Dx.writable=!1}return Dx.writable};function _2e(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const nJ=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),b2e=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",J1=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Lx=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},il=async(t,e)=>{await t.removeItem(e)};class qR{constructor(){this.promise=new qR.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}qR.promiseConstructor=Promise;function b3(t){const e=t.split(".");if(e.length!==3)throw new E4("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!s2e.test(e[r]))throw new E4("JWT not in base64url format");return{header:JSON.parse(WV(e[0])),payload:JSON.parse(WV(e[1])),signature:ww(e[2]),raw:{header:e[0],payload:e[1]}}}async function w2e(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function O2e(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function S2e(t){return("0"+t.toString(16)).substr(-2)}function C2e(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,S2e).join("")}async function T2e(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function k2e(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await T2e(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function I1(t,e,n=!1){const r=C2e();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await J1(t,`${e}-code-verifier`,i);const o=await k2e(r);return[o,r===o?"plain":"s256"]}const E2e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function A2e(t){const e=t.headers.get(T4);if(!e||!e.match(E2e))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function P2e(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function M2e(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const R2e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function D1(t){if(!R2e.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function w3(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function I2e(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function HV(t){return JSON.parse(JSON.stringify(t))}const Vx=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),D2e=[502,503,504];async function GV(t){var e;if(!b2e(t))throw new k4(Vx(t),0);if(D2e.includes(t.status))throw new k4(Vx(t),t.status);let n;try{n=await t.json()}catch(o){throw new qx(Vx(o),o)}let r;const i=A2e(t);if(i&&i.getTime()>=JK["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new UV(Vx(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Gu}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new UV(Vx(n),t.status,n.weak_password.reasons);throw new l2e(Vx(n),t.status||500,r)}const L2e=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function gr(t,e,n,r){var i;const o=Object.assign({},r?.headers);o[T4]||(o[T4]=JK["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await $2e(t,e,n+s,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(u):{data:Object.assign({},u),error:null}}async function $2e(t,e,n,r,i,o){const a=L2e(e,r,i,o);let s;try{s=await t(n,Object.assign({},a))}catch(u){throw console.error(u),new k4(Vx(u),0)}if(s.ok||await GV(s),r?.noResolveJson)return s;try{return await s.json()}catch(u){await GV(u)}}function _f(t){var e;let n=null;B2e(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=v2e(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function XV(t){const e=_f(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function R0(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function z2e(t){return{data:t,error:null}}function N2e(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,a=ZO(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},u=Object.assign({},a);return{data:{properties:s,user:u},error:null}}function YV(t){return t}function B2e(t){return t.access_token&&t.refresh_token&&t.expires_in}const O3=["global","local","others"];class F2e{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=nJ(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=O3[0]){if(O3.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${O3.join(", ")}`);try{return await gr(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(er(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await gr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:R0})}catch(r){if(er(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=ZO(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await gr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:N2e,redirectTo:n?.redirectTo})}catch(n){if(er(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await gr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:R0})}catch(n){if(er(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,a,s,u;try{const d={nextPage:null,lastPage:0,total:0},m=await gr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:YV});if(m.error)throw m.error;const v=await m.json(),_=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,O=(u=(s=m.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&u!==void 0?u:[];return O.length>0&&(O.forEach(E=>{const A=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(E.split(";")[1].split("=")[1]);d[`${M}Page`]=A}),d.total=parseInt(_)),{data:Object.assign(Object.assign({},v),d),error:null}}catch(d){if(er(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){D1(e);try{return await gr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:R0})}catch(n){if(er(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){D1(e);try{return await gr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:R0})}catch(r){if(er(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){D1(e);try{return await gr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:R0})}catch(r){if(er(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){D1(e.userId);try{const{data:n,error:r}=await gr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(er(n))return{data:null,error:n};throw n}}async _deleteFactor(e){D1(e.userId),D1(e.id);try{return{data:await gr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(er(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,a,s,u;try{const d={nextPage:null,lastPage:0,total:0},m=await gr(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:YV});if(m.error)throw m.error;const v=await m.json(),_=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,O=(u=(s=m.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&u!==void 0?u:[];return O.length>0&&(O.forEach(E=>{const A=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),M=JSON.parse(E.split(";")[1].split("=")[1]);d[`${M}Page`]=A}),d.total=parseInt(_)),{data:Object.assign(Object.assign({},v),d),error:null}}catch(d){if(er(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await gr(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(er(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await gr(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(er(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await gr(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(er(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await gr(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(er(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await gr(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(er(n))return{data:null,error:n};throw n}}}function KV(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const L1={debug:!!(globalThis&&tJ()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rJ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class j2e extends rJ{}async function V2e(t,e,n){L1.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),L1.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){L1.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{L1.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw L1.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new j2e(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(L1.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Q2e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function iJ(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function U2e(t){return parseInt(t,16)}function Z2e(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function q2e(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:u,resources:d,scheme:m,uri:v,version:_}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const O=iJ(t.address),E=m?`${m}://${r}`:r,A=t.statement?`${t.statement}
`:"",M=`${E} wants you to sign in with your Ethereum account:
${O}

${A}`;let L=`URI: ${v}
Version: ${_}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(L+=`
Expiration Time: ${i.toISOString()}`),s&&(L+=`
Not Before: ${s.toISOString()}`),u&&(L+=`
Request ID: ${u}`),d){let $=`
Resources:`;for(const N of d){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);$+=`
- ${N}`}L+=$}return`${M}
${L}`}class Gs extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class z5 extends Gs{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function W2e({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Gs({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Gs({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Gs({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Gs({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Gs({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Gs({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new Gs({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Gs({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(oJ(a)){if(o.rp.id!==a)return new Gs({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Gs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Gs({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Gs({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Gs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function H2e({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Gs({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Gs({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(oJ(r)){if(n.rpId!==r)return new Gs({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Gs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Gs({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Gs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class G2e{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const X2e=new G2e;function Y2e(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=ZO(t,["challenge","user","excludeCredentials"]),o=ww(e).buffer,a=Object.assign(Object.assign({},n),{id:ww(n.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){s.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];s.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:ww(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return s}function K2e(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=ZO(t,["challenge","allowCredentials"]),i=ww(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const s=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:ww(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function J2e(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:o_(new Uint8Array(t.response.attestationObject)),clientDataJSON:o_(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function eCe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:o_(new Uint8Array(i.authenticatorData)),clientDataJSON:o_(new Uint8Array(i.clientDataJSON)),signature:o_(new Uint8Array(i.signature)),userHandle:i.userHandle?o_(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function oJ(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function JV(){var t,e;return!!(sl()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function tCe(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new z5("Browser returned unexpected credential type",e)}:{data:null,error:new z5("Empty credential response",e)}}catch(e){return{data:null,error:W2e({error:e,options:t})}}}async function nCe(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new z5("Browser returned unexpected credential type",e)}:{data:null,error:new z5("Empty credential response",e)}}catch(e){return{data:null,error:H2e({error:e,options:t})}}}const rCe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},iCe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function N5(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(e(a)){const s=r[o];e(s)?r[o]=N5(s,a):r[o]=N5(a)}else r[o]=a}return r}function oCe(t,e){return N5(rCe,t,e||{})}function sCe(t,e){return N5(iCe,t,e||{})}class aCe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){try{const{data:a,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:s};const u=i??X2e.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:d}=a.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(a.webauthn.type){case"create":{const d=oCe(a.webauthn.credential_options.publicKey,o?.create),{data:m,error:v}=await tCe({publicKey:d,signal:u});return m?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:v}}case"request":{const d=sCe(a.webauthn.credential_options.publicKey,o?.request),{data:m,error:v}=await nCe(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:d,signal:u}));return m?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:v}}}}catch(a){return er(a)?{data:null,error:a}:{data:null,error:new qx("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new fT("rpId is required for WebAuthn authentication")};try{if(!JV())return{data:null,error:new qx("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:s};const{webauthn:u}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(a){return er(a)?{data:null,error:a}:{data:null,error:new qx("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new fT("rpId is required for WebAuthn registration")};try{if(!JV())return{data:null,error:new qx("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(m=>{var v;return(v=m.data)===null||v===void 0?void 0:v.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m?.id}):void 0),{data:null,error:s};const{data:u,error:d}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(a){return er(a)?{data:null,error:a}:{data:null,error:new qx("Unexpected error in register",a)}}}}Q2e();const lCe={url:r2e,storageKey:i2e,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:o2e,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function eQ(t,e,n){return await n()}const $1={};class pT{get jwks(){var e,n;return(n=(e=$1[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){$1[this.storageKey]=Object.assign(Object.assign({},$1[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=$1[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){$1[this.storageKey]=Object.assign(Object.assign({},$1[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},lCe),e);if(this.storageKey=o.storageKey,this.instanceID=(n=pT.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,pT.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&sl()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new F2e({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=nJ(o.fetch),this.lock=o.lock||eQ,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&sl()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=V2e:this.lock=eQ,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new aCe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:tJ()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=KV(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=KV(this.memoryStorage)),sl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${KK}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(sl()&&(n=_2e(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),sl()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),h2e(o)){const u=(e=o.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return er(n)?this._returnResult({error:n}):this._returnResult({error:new qx("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await gr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:_f}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const u=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(o){if(er(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:m,password:v,options:_}=e;let O=null,E=null;this.flowType==="pkce"&&([O,E]=await I1(this.storage,this.storageKey)),o=await gr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:m,password:v,data:(n=_?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:O,code_challenge_method:E},xform:_f})}else if("phone"in e){const{phone:m,password:v,options:_}=e;o=await gr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:v,data:(r=_?.data)!==null&&r!==void 0?r:{},channel:(i=_?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:_f})}else throw new MA("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return await il(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:s});const u=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(o){if(await il(this.storage,`${this.storageKey}-code-verifier`),er(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:a,options:s}=e;n=await gr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:XV})}else if("phone"in e){const{phone:o,password:a,options:s}=e;n=await gr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:XV})}else throw new MA("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new R1;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(er(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,a,s,u,d,m,v,_;let O,E;if("message"in e)O=e.message,E=e.signature;else{const{chain:A,wallet:M,statement:L,options:$}=e;let N;if(sl())if(typeof M=="object")N=M;else{const ne=window;if("ethereum"in ne&&typeof ne.ethereum=="object"&&"request"in ne.ethereum&&typeof ne.ethereum.request=="function")N=ne.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!$?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=M}const F=new URL((n=$?.url)!==null&&n!==void 0?n:window.location.href),Q=await N.request({method:"eth_requestAccounts"}).then(ne=>ne).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Q||Q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const W=iJ(Q[0]);let H=(r=$?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!H){const ne=await N.request({method:"eth_chainId"});H=U2e(ne)}const te={domain:F.host,address:W,statement:L,uri:F.href,version:"1",chainId:H,nonce:(i=$?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=$?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=$?.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(u=$?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=$?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(m=$?.signInWithEthereum)===null||m===void 0?void 0:m.resources};O=q2e(te),E=await N.request({method:"personal_sign",params:[Z2e(O),W]})}try{const{data:A,error:M}=await gr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:O,signature:E},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:_f});if(M)throw M;if(!A||!A.session||!A.user){const L=new R1;return this._returnResult({data:{user:null,session:null},error:L})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:M})}catch(A){if(er(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var n,r,i,o,a,s,u,d,m,v,_,O;let E,A;if("message"in e)E=e.message,A=e.signature;else{const{chain:M,wallet:L,statement:$,options:N}=e;let F;if(sl())if(typeof L=="object")F=L;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))F=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=L}const Q=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in F&&F.signIn){const W=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:Q.host,uri:Q.href}),$?{statement:$}:null));let H;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")H=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)H=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)E=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),A=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${Q.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${Q.href}`,`Issued At: ${(i=(r=N?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=N?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((a=N?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((s=N?.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((u=N?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((d=N?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((v=(m=N?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||v===void 0)&&v.length?["Resources",...N.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const W=await F.signMessage(new TextEncoder().encode(E),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=W}}try{const{data:M,error:L}=await gr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:o_(A)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(O=e.options)===null||O===void 0?void 0:O.captchaToken}}:null),xform:_f});if(L)throw L;if(!M||!M.session||!M.user){const $=new R1;return this._returnResult({data:{user:null,session:null},error:$})}return M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),this._returnResult({data:Object.assign({},M),error:L})}catch(M){if(er(M))return this._returnResult({data:{user:null,session:null},error:M});throw M}}async _exchangeCodeForSession(e){const n=await Lx(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new d2e;const{data:o,error:a}=await gr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:_f});if(await il(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new R1;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(await il(this.storage,`${this.storageKey}-code-verifier`),er(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=e,s=await gr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:_f}),{data:u,error:d}=s;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user){const m=new R1;return this._returnResult({data:{user:null,session:null},error:m})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:d})}catch(n){if(er(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,a;try{if("email"in e){const{email:s,options:u}=e;let d=null,m=null;this.flowType==="pkce"&&([d,m]=await I1(this.storage,this.storageKey));const{error:v}=await gr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=u?.data)!==null&&n!==void 0?n:{},create_user:(r=u?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:d,code_challenge_method:m},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:s,options:u}=e,{data:d,error:m}=await gr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(o=u?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(a=u?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:m})}throw new MA("You must provide either an email or phone number.")}catch(s){if(await il(this.storage,`${this.storageKey}-code-verifier`),er(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:s}=await gr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:_f});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,d=a.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(er(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,a;try{let s=null,u=null;this.flowType==="pkce"&&([s,u]=await I1(this.storage,this.storageKey));const d=await gr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:u}),headers:this.headers,xform:z2e});return!((o=d.data)===null||o===void 0)&&o.url&&sl()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(s){if(await il(this.storage,`${this.storageKey}-code-verifier`),er(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Gu;const{error:i}=await gr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(er(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:a}=await gr(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:a,error:s}=await gr(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:s})}throw new MA("You must provide either an email or phone number and a type")}catch(n){if(er(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Lx(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<x3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await Lx(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=w3()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=I2e(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await gr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:R0}):await this._useSession(async n=>{var r,i,o;const{data:a,error:s}=n;if(s)throw s;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gu}:await gr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:R0})})}catch(n){if(er(n))return u2e(n)&&(await this._removeSession(),await il(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Gu;const a=i.session;let s=null,u=null;this.flowType==="pkce"&&e.email!=null&&([s,u]=await I1(this.storage,this.storageKey));const{data:d,error:m}=await gr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:u}),jwt:a.access_token,xform:R0});if(m)throw m;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await il(this.storage,`${this.storageKey}-code-verifier`),er(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Gu;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=b3(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:s,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:u}=await this._getUser(e.access_token);if(u)throw u;o={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(er(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:s}=n;if(s)throw s;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Gu;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(er(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!sl())throw new RA("No browser detected.");if(e.error||e.error_description||e.error_code)throw new RA(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new QV("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new RA("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new QV("No code detected.");const{data:$,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:u,token_type:d}=e;if(!o||!s||!a||!d)throw new RA("No session defined in URL");const m=Math.round(Date.now()/1e3),v=parseInt(s);let _=m+v;u&&(_=parseInt(u));const O=_-m;O*1e3<=K1&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${O}s, should have been closer to ${v}s`);const E=_-v;m-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,_,m):m-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,_,m);const{data:A,error:M}=await this._getUser(o);if(M)throw M;const L={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:v,expires_at:_,refresh_token:a,token_type:d,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:e.type},error:null})}catch(r){if(er(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Lx(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({error:o});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&!(c2e(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await il(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=x2e(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await I1(this.storage,this.storageKey,!0));try{return await gr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await il(this.storage,`${this.storageKey}-code-verifier`),er(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(er(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,s,u,d,m;const{data:v,error:_}=o;if(_)throw _;const O=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await gr(this.fetch,"GET",O,{headers:this.headers,jwt:(m=(d=v.session)===null||d===void 0?void 0:d.access_token)!==null&&m!==void 0?m:void 0})});if(i)throw i;return sl()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(er(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:s,token:u,access_token:d,nonce:m}=e,v=await gr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:s,id_token:u,access_token:d,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:_f}),{data:_,error:O}=v;return O?this._returnResult({data:{user:null,session:null},error:O}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new R1}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:O}))}catch(i){if(await il(this.storage,`${this.storageKey}-code-verifier`),er(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await gr(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(er(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await O2e(async i=>(i>0&&await w2e(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await gr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_f})),(i,o)=>{const a=200*Math.pow(2,i);return o&&_3(o)&&Date.now()+a-r<K1})}catch(r){if(this._debug(n,"error",r),er(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),sl()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Lx(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Lx(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await J1(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a?.user)!==null&&e!==void 0?e:w3()}else if(i&&!i.user&&!i.user){const a=await Lx(this.storage,this.storageKey+"-user");a&&a?.user?(i.user=a.user,await il(this.storage,this.storageKey+"-user"),await J1(this.storage,this.storageKey,i)):i.user=w3()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<x3;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${x3}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),_3(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(i.access_token);!s&&a?.user?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Gu;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new qR;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Gu;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),er(o)){const a={data:null,error:o};return _3(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,n)}catch(u){o.push(u)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await il(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await J1(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=HV(i);await J1(this.storage,this.storageKey,o)}else{const i=HV(n);await J1(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await il(this.storage,this.storageKey),await il(this.storage,this.storageKey+"-code-verifier"),await il(this.storage,this.storageKey+"-user"),this.userStorage&&await il(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&sl()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),K1);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/K1);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${K1}ms, refresh threshold is ${C4} ticks`),i<=C4&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rJ)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sl()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await I1(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await gr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(er(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:d}=await gr(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&u.type==="totp"&&(!((i=u?.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(er(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?J2e(e.webauthn.credential_response):eCe(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:u}=await gr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:u}))})}catch(n){if(er(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await gr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:Y2e(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:K2e(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(er(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n?.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=b3(r.access_token);let a=null;o.aal&&(a=o.aal);let s=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(s="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await gr(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Gu})})}catch(n){if(er(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Gu});const a=await gr(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&sl()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(er(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Gu});const a=await gr(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&sl()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(er(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await gr(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Gu})})}catch(e){if(er(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await gr(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Gu})})}catch(n){if(er(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(s=>s.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(s=>s.kid===e),r&&this.jwks_cached_at+a2e>i)return r;const{data:o,error:a}=await gr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(s=>s.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:O,error:E}=await this.getSession();if(E||!O.session)return this._returnResult({data:null,error:E});r=O.session.access_token}const{header:i,payload:o,signature:a,raw:{header:s,payload:u}}=b3(r);n?.allowExpired||P2e(o.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!d){const{error:O}=await this.getUser(r);if(O)throw O;return{data:{claims:o,header:i,signature:a},error:null}}const m=M2e(i.alg),v=await crypto.subtle.importKey("jwk",d,m,!0,["verify"]);if(!await crypto.subtle.verify(m,v,a,y2e(`${s}.${u}`)))throw new E4("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if(er(r))return this._returnResult({data:null,error:r});throw r}}}pT.nextInstanceID={};const cCe=pT,uCe="2.89.0";let hC="";typeof Deno<"u"?hC="deno":typeof document<"u"?hC="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hC="react-native":hC="node";const hCe={"X-Client-Info":`supabase-js-${hC}/${uCe}`},dCe={headers:hCe},fCe={schema:"public"},pCe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mCe={};function mT(t){"@babel/helpers - typeof";return mT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mT(t)}function gCe(t,e){if(mT(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yCe(t){var e=gCe(t,"string");return mT(e)=="symbol"?e:e+""}function vCe(t,e,n){return(e=yCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tQ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Es(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tQ(Object(n),!0).forEach(function(r){vCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tQ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const xCe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_Ce=()=>Headers,bCe=(t,e,n)=>{const r=xCe(n),i=_Ce();return async(o,a)=>{var s;const u=(s=await e())!==null&&s!==void 0?s:t;let d=new i(a?.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),r(o,Es(Es({},a),{},{headers:d}))}};function wCe(t){return t.endsWith("/")?t:t+"/"}function OCe(t,e){var n,r;const{db:i,auth:o,realtime:a,global:s}=t,{db:u,auth:d,realtime:m,global:v}=e,_={db:Es(Es({},u),i),auth:Es(Es({},d),o),realtime:Es(Es({},m),a),storage:{},global:Es(Es(Es({},v),s),{},{headers:Es(Es({},(n=v?.headers)!==null&&n!==void 0?n:{}),(r=s?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?_.accessToken=t.accessToken:delete _.accessToken,_}function SCe(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(wCe(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var CCe=class extends cCe{constructor(t){super(t)}},TCe=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const o=SCe(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a=`sb-${o.hostname.split(".")[0]}-auth-token`,s={db:fCe,realtime:mCe,auth:Es(Es({},pCe),{},{storageKey:a}),global:dCe},u=OCe(n??{},s);if(this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(m,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=u.auth)!==null&&d!==void 0?d:{},this.headers,u.global.fetch)}this.fetch=bCe(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Es({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new oSe(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new n2e(this.storageUrl.href,this.headers,this.fetch,n?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new eSe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:a,lock:s,debug:u,throwOnError:d},m,v){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new CCe({url:this.authUrl.href,headers:Es(Es({},_),m),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:s,debug:u,throwOnError:d,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(O=>O.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new wSe(this.realtimeUrl.href,Es(Es({},t),{},{params:Es(Es({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const kCe=(t,e,n)=>new TCe(t,e,n);function ECe(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ECe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ACe="https://llgcvbswrfgswttnevud.supabase.co",PCe="sb_publishable_6OnPZh7s5SgKVm6eagWfYQ_PQU-qJzK",Jr=kCe(ACe,PCe),sJ=j.createContext(void 0),MCe=({children:t})=>{const[e,n]=j.useState(null),[r,i]=j.useState(null),[o,a]=j.useState(null),[s,u]=j.useState([]),[d,m]=j.useState(null),[v,_]=j.useState(null),[O,E]=j.useState(!0),A=async()=>{try{const{data:W,error:H}=await Jr.from("check_in").select("*").order("created_at",{ascending:!1}).limit(1).single();H?(H.code!=="PGRST116"&&console.error("Error fetching latest check-in:",H),a(null)):a(W);const{data:te,error:ne}=await Jr.from("check_in").select("status");if(ne)console.error("Error fetching visited stops:",ne),u([]);else if(te){const ce=[...new Set(te.map(we=>we.status))];u(ce)}}catch(W){console.error("Unexpected error fetching check-ins:",W)}},M=async W=>{try{const{data:H,error:te}=await Jr.from("user_profile").select("*").eq("id",W).single();te?(te.code!=="PGRST116"&&console.error("Error fetching user profile:",te),m(null)):m(H)}catch(H){console.error("Unexpected error fetching profile:",H)}},L=async W=>{try{const{data:H,error:te}=await Jr.from("user_role").select("role").eq("user_id",W).maybeSingle();te?(console.error("Error fetching user role:",te),_(null)):_(H?H.role:null)}catch(H){console.error("Unexpected error fetching role:",H),_(null)}};j.useEffect(()=>{let W=!0;const H=async ce=>{try{await Promise.all([A(),M(ce),L(ce)])}catch(we){console.error("Error fetching user data:",we)}},ne=(async()=>{const{data:{session:ce}}=await Jr.auth.getSession();W&&(i(ce),n(ce?.user??null),ce&&await H(ce.user.id),E(!1));const{data:{subscription:we}}=Jr.auth.onAuthStateChange(async(re,se)=>{W&&(re==="SIGNED_OUT"?(i(null),n(null),a(null),u([]),m(null),_(null),E(!1)):se&&(re==="SIGNED_IN"||re==="TOKEN_REFRESHED"||re==="INITIAL_SESSION")&&(re==="SIGNED_IN"||re==="INITIAL_SESSION"?(E(!0),i(se),n(se.user),await H(se.user.id)):(i(se),n(se.user)),E(!1)))});return we})();return()=>{W=!1,ne.then(ce=>ce?.unsubscribe())}},[]);const $=async()=>{try{const{error:W}=await Jr.auth.signOut();W&&console.error("Error signing out:",W)}catch(W){console.error("Unexpected error during sign out:",W)}finally{i(null),n(null),a(null),u([]),m(null),_(null),E(!1)}},N=async()=>{await A()},F=async()=>{e&&await M(e.id)},Q=async()=>{e&&await L(e.id)};return q.jsx(sJ.Provider,{value:{user:e,session:r,latestCheckIn:o,visitedStops:s,profile:d,role:v,loading:O,signOut:$,refreshCheckIn:N,refreshProfile:F,refreshRole:Q},children:t})},py=()=>{const t=j.useContext(sJ);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},ai={Zrich:[8.5417,47.3769],Tokyo:[139.6917,35.6895],Osaka:[135.5022,34.6937],Papeete:[-149.5667,-17.5333],Auckland:[174.7633,-36.8485],Tahiti:[-149.4068,-17.6509],"Bora-Bora":[-151.7415,-16.5004],Queenstown:[168.6626,-45.0312],Christchurch:[172.6362,-43.5321],Wellington:[174.7762,-41.2865],Sydney:[151.2093,-33.8688],Singapore:[103.8198,1.3521],Frankfurt:[8.6821,50.1109]},CB=[{category:"Stop",key:"Zrich",section:null,name:"Zrich",geolocation:ai.Zrich,startDate:new Date("2025-12-28"),endDate:new Date("2025-12-28")},{key:"ZRH-TYO",category:"Trip",section:null,name:"LX999 ZRH-TYO",startLocation:"Zrich",endLocation:"Tokyo",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[ai.Zrich,ai.Tokyo]},startDateTime:new Date("2025-12-28 13:00 CET"),endTime:new Date("2025-12-29 10:15 JST")},{key:"TYO-OSA",category:"Trip",section:"Japan ",startLocation:"Tokyo",endLocation:"Osaka",transportationMode:"Train",geometricShape:{type:"LineString",coordinates:[ai.Tokyo,ai.Osaka]},startDateTime:new Date("2025-12-29 13:48 JST"),endTime:new Date("2025-12-29 16:15 JST")},{category:"Stop",key:"Osaka",section:"Japan ",name:"Osaka",geolocation:ai.Osaka,startDate:new Date("2025-12-29"),endDate:new Date("2026-01-03")},{key:"OSA-TYO",category:"Trip",section:"Japan ",startLocation:"Osaka",endLocation:"Tokyo",transportationMode:"Train",geometricShape:{type:"LineString",coordinates:[ai.Osaka,ai.Tokyo]},startDateTime:new Date("2026-01-03 11:51 JST"),endTime:new Date("2026-01-03 14:21 JST")},{category:"Stop",key:"Tokyo",section:"Japan ",name:"Tokyo",geolocation:ai.Tokyo,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{key:"TYO-PPT",category:"Trip",section:null,startLocation:"Tokyo",endLocation:"Papeete",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[ai.Tokyo,ai.Papeete]},startDateTime:new Date("2026-01-06 20:00 JST"),endTime:new Date("2026-01-06 11:40 GMT-10")},{key:"PPT-AKL",category:"Trip",section:null,startLocation:"Papeete",endLocation:"Auckland",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[ai.Papeete,ai.Auckland]},startDateTime:new Date("2026-01-24 09:10 GMT-10"),endTime:new Date("2026-01-25 13:40 GMT+13")},{category:"Stop",key:"Tahiti",section:"French Polynesia ",name:"Tahiti",geolocation:ai.Tahiti,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{category:"Stop",key:"Bora-Bora",section:"French Polynesia ",name:"Bora-Bora",geolocation:ai["Bora-Bora"],startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{category:"Stop",key:"Queenstown",section:"South Island ",name:"Queenstown",geolocation:ai.Queenstown,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{category:"Stop",key:"Christchurch",section:"South Island ",name:"Christchurch",geolocation:ai.Christchurch,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{category:"Stop",key:"Auckland",section:"North Island ",name:"Auckland",geolocation:ai.Auckland,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{category:"Stop",key:"Wellington",section:"Cruise ",name:"Wellington",geolocation:ai.Wellington,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{category:"Stop",key:"Sydney",section:"Cruise ",name:"Sydney",geolocation:ai.Sydney,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{key:"SYD-SIN",category:"Trip",section:null,startLocation:"Sydney",endLocation:"Singapore",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[ai.Sydney,ai.Singapore]},startDateTime:new Date("2026-01-26 15:50 AEDT"),endTime:new Date("2026-01-26 21:00 SGT")},{category:"Stop",key:"Singapore",section:"Singapore ",name:"Singapore",geolocation:ai.Singapore,startDate:new Date("2026-01-03"),endDate:new Date("2026-01-06")},{key:"SIN-FRA",category:"Trip",section:null,startLocation:"Singapore",endLocation:"Frankfurt",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[ai.Singapore,ai.Frankfurt]},startDateTime:new Date("2026-01-26 23:55 SGT"),endTime:new Date("2026-01-27 06:05 CET")},{key:"FRA-ZRH",category:"Trip",section:null,startLocation:"Frankfurt",endLocation:"Zrich",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[ai.Frankfurt,ai.Zrich]},startDateTime:new Date("2026-01-27 08:00 CET"),endTime:new Date("2026-01-27 08:50 CET")},{key:"AKL-ZQN",category:"Trip",section:"South Island ",startLocation:"Auckland",endLocation:"Queenstown",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[ai.Auckland,ai.Queenstown]},startDateTime:new Date("2026-01-20 09:00 NZDT"),endTime:new Date("2026-01-20 10:50 NZDT")},{key:"CHC-AKL",category:"Trip",section:"North Island ",startLocation:"Christchurch",endLocation:"Auckland",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[ai.Christchurch,ai.Auckland]},startDateTime:new Date("2026-01-23 16:00 NZDT"),endTime:new Date("2026-01-23 17:25 NZDT")},{key:"PPT-BOB",category:"Trip",section:"French Polynesia ",startLocation:"Papeete",endLocation:"Bora-Bora",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[ai.Papeete,ai["Bora-Bora"]]},startDateTime:new Date("2026-01-08 10:00 GMT-10"),endTime:new Date("2026-01-08 10:50 GMT-10")},{key:"BOB-PPT",category:"Trip",section:"French Polynesia ",startLocation:"Bora-Bora",endLocation:"Papeete",transportationMode:"Plane",geometricShape:{type:"LineString",coordinates:[ai["Bora-Bora"],ai.Papeete]},startDateTime:new Date("2026-01-22 14:00 GMT-10"),endTime:new Date("2026-01-22 14:50 GMT-10")},{key:"CHC-DUN",category:"Trip",section:"South Island ",startLocation:"Christchurch",endLocation:"Dunedin",transportationMode:"Boat",geometricShape:{type:"LineString",coordinates:[[172.719,-43.603],[172.95,-43.65],[173.2,-43.9],[172.4,-44.6],[171.4,-45.3],[170.75,-45.77],[170.619,-45.818]]},startDateTime:new Date("2026-01-20 08:00 NZDT"),endTime:new Date("2026-01-20 18:00 NZDT")},{category:"Stop",key:"Dunedin",section:"South Island ",name:"Dunedin",geolocation:[170.5027,-45.8742],startDate:new Date("2026-01-20"),endDate:new Date("2026-01-22")}],IA=43200,nQ=1440,rQ=Symbol.for("constructDateFrom");function TB(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&rQ in t?t[rQ](e):t instanceof Date?new t.constructor(e):new Date(e)}function G0(t,e){return TB(t,t)}let RCe={};function ICe(){return RCe}function iQ(t){const e=G0(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function kB(t,...e){const n=TB.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function HP(t,e){const n=+G0(t)-+G0(e);return n<0?-1:n>0?1:n}function DCe(t){return TB(t,Date.now())}function LCe(t,e,n){const[r,i]=kB(n?.in,t,e),o=r.getFullYear()-i.getFullYear(),a=r.getMonth()-i.getMonth();return o*12+a}function $Ce(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function zCe(t,e){return+G0(t)-+G0(e)}function NCe(t,e){const n=G0(t);return n.setHours(23,59,59,999),n}function BCe(t,e){const n=G0(t),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function FCe(t,e){const n=G0(t);return+NCe(n)==+BCe(n)}function jCe(t,e,n){const[r,i,o]=kB(n?.in,t,t,e),a=HP(i,o),s=Math.abs(LCe(i,o));if(s<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-a*s);let u=HP(i,o)===-a;FCe(r)&&s===1&&HP(r,o)===1&&(u=!1);const d=a*(s-+u);return d===0?0:d}function VCe(t,e,n){const r=zCe(t,e)/1e3;return $Ce(n?.roundingMethod)(r)}const QCe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},UCe=(t,e,n)=>{let r;const i=QCe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function S3(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const ZCe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qCe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},WCe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},HCe={date:S3({formats:ZCe,defaultWidth:"full"}),time:S3({formats:qCe,defaultWidth:"full"}),dateTime:S3({formats:WCe,defaultWidth:"full"})},GCe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},XCe=(t,e,n,r)=>GCe[t];function N2(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,s=n?.width?String(n.width):a;i=t.formattingValues[s]||t.formattingValues[a]}else{const a=t.defaultWidth,s=n?.width?String(n.width):t.defaultWidth;i=t.values[s]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}const YCe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},KCe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},JCe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eTe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tTe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nTe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rTe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},iTe={ordinalNumber:rTe,era:N2({values:YCe,defaultWidth:"wide"}),quarter:N2({values:KCe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:N2({values:JCe,defaultWidth:"wide"}),day:N2({values:eTe,defaultWidth:"wide"}),dayPeriod:N2({values:tTe,defaultWidth:"wide",formattingValues:nTe,defaultFormattingWidth:"wide"})};function B2(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const a=o[0],s=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(s)?sTe(s,v=>v.test(a)):oTe(s,v=>v.test(a));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const m=e.slice(a.length);return{value:d,rest:m}}}function oTe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function sTe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function aTe(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const s=e.slice(i.length);return{value:a,rest:s}}}const lTe=/^(\d+)(th|st|nd|rd)?/i,cTe=/\d+/i,uTe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hTe={any:[/^b/i,/^(a|c)/i]},dTe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fTe={any:[/1/i,/2/i,/3/i,/4/i]},pTe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mTe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gTe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yTe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vTe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xTe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_Te={ordinalNumber:aTe({matchPattern:lTe,parsePattern:cTe,valueCallback:t=>parseInt(t,10)}),era:B2({matchPatterns:uTe,defaultMatchWidth:"wide",parsePatterns:hTe,defaultParseWidth:"any"}),quarter:B2({matchPatterns:dTe,defaultMatchWidth:"wide",parsePatterns:fTe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:B2({matchPatterns:pTe,defaultMatchWidth:"wide",parsePatterns:mTe,defaultParseWidth:"any"}),day:B2({matchPatterns:gTe,defaultMatchWidth:"wide",parsePatterns:yTe,defaultParseWidth:"any"}),dayPeriod:B2({matchPatterns:vTe,defaultMatchWidth:"any",parsePatterns:xTe,defaultParseWidth:"any"})},bTe={code:"en-US",formatDistance:UCe,formatLong:HCe,formatRelative:XCe,localize:iTe,match:_Te,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wTe(t,e,n){const r=ICe(),i=n?.locale??r.locale??bTe,o=2520,a=HP(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const s=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:a}),[u,d]=kB(n?.in,...a>0?[e,t]:[t,e]),m=VCe(d,u),v=(iQ(d)-iQ(u))/1e3,_=Math.round((m-v)/60);let O;if(_<2)return n?.includeSeconds?m<5?i.formatDistance("lessThanXSeconds",5,s):m<10?i.formatDistance("lessThanXSeconds",10,s):m<20?i.formatDistance("lessThanXSeconds",20,s):m<40?i.formatDistance("halfAMinute",0,s):m<60?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",1,s):_===0?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",_,s);if(_<45)return i.formatDistance("xMinutes",_,s);if(_<90)return i.formatDistance("aboutXHours",1,s);if(_<nQ){const E=Math.round(_/60);return i.formatDistance("aboutXHours",E,s)}else{if(_<o)return i.formatDistance("xDays",1,s);if(_<IA){const E=Math.round(_/nQ);return i.formatDistance("xDays",E,s)}else if(_<IA*2)return O=Math.round(_/IA),i.formatDistance("aboutXMonths",O,s)}if(O=jCe(d,u),O<12){const E=Math.round(_/IA);return i.formatDistance("xMonths",E,s)}else{const E=O%12,A=Math.trunc(O/12);return E<3?i.formatDistance("aboutXYears",A,s):E<9?i.formatDistance("overXYears",A,s):i.formatDistance("almostXYears",A+1,s)}}function aJ(t,e){return wTe(t,DCe(t),e)}const OTe=t=>{switch(t){case"Plane":return"";case"Train":return"";case"Boat":return"";case"Car":return"";default:return""}},STe=({onMenuClick:t})=>{const{user:e,profile:n,latestCheckIn:r,signOut:i,role:o}=py(),a=fk(),[s,u]=j.useState(null),[d,m]=j.useState(null),[v,_]=j.useState([]),O=async()=>{try{const[F,Q,W]=await Promise.all([Jr.from("check_in").select("*").order("created_at",{ascending:!1}).limit(4),Jr.from("blog_post").select("*").order("created_date",{ascending:!1}).limit(4),Jr.from("photo_album").select("*").order("created_at",{ascending:!1}).limit(4)]),H=[...(F.data||[]).map(te=>({id:`checkin-${te.id}`,type:"check-in",title:te.message||`Checked in: ${te.status}`,date:new Date(te.created_at),icon:q.jsx(eO,{color:"primary"}),link:"/"})),...(Q.data||[]).map(te=>({id:`blog-${te.id}`,type:"blog",title:`New Post: ${te.title}`,date:new Date(te.created_date),icon:q.jsx(UR,{color:"secondary"}),link:`/blog?id=${te.id}`})),...(W.data||[]).map(te=>({id:`photo-${te.id}`,type:"photo",title:`Photo Album: ${te.title}`,date:new Date(te.created_at),icon:q.jsx(tO,{sx:{color:"#10b981"}}),link:te.icloud_link,external:!0}))].sort((te,ne)=>ne.date.getTime()-te.date.getTime()).slice(0,4);_(H)}catch(F){console.error("Error fetching notifications:",F)}};j.useEffect(()=>{e&&O()},[e]);const E=F=>{u(F.currentTarget)},A=()=>{u(null)},M=async()=>{await i(),A(),a("/")},L=F=>{m(F.currentTarget)},$=()=>{m(null)},N=j.useMemo(()=>{if(!r)return null;const F=CB.find(H=>H.key===r.status);if(!F)return null;let Q="";F.category==="Stop"?Q=`Now in ${F.name}!`:Q=`Now in ${OTe(F.transportationMode)} ${F.startLocation} -> ${F.endLocation}!`;const W="".repeat(Q.length*1.5);return`${Q}${W}`},[r]);return q.jsx(Ave,{position:"fixed",sx:{zIndex:F=>F.zIndex.drawer+1},children:q.jsxs(xB,{children:[q.jsx(u_,{color:"inherit","aria-label":"open drawer",onClick:t,edge:"start",sx:{mr:2},children:q.jsx(HOe,{})}),q.jsx(ar,{variant:"h6",noWrap:!0,component:"div",sx:{mr:4},children:"Pacific Trip 2026"}),q.jsxs(zn,{sx:{display:{xs:"none",md:"flex"},gap:2},children:[q.jsx(gi,{color:"inherit",component:mc,to:"/blog",children:"Blog"}),q.jsx(gi,{color:"inherit",component:mc,to:"/photos",children:"Photos"}),q.jsx(gi,{color:"inherit",component:mc,to:"/map",children:"Map"}),o==="admin"&&q.jsx(gi,{color:"inherit",component:mc,to:"/admin",children:"Admin"})]}),q.jsx(zn,{sx:{flexGrow:1,display:{xs:"flex",sm:"none"}}}),q.jsx(zn,{sx:{flexGrow:1,display:{xs:"none",sm:"flex"},justifyContent:"center"},children:e&&N&&q.jsx(zn,{sx:{display:"flex",alignItems:"center",bgcolor:"#ef4444",color:"white",px:1.5,py:.5,borderRadius:1,overflow:"hidden",width:{xs:150,sm:250,md:350},position:"relative"},children:q.jsx(ar,{sx:{whiteSpace:"nowrap",fontSize:"0.85rem",fontWeight:600,animation:"ticker 5s linear","@keyframes ticker":{"0%":{transform:"translateX(100%)"},"100%":{}},"&:hover":{animationPlayState:"paused"}},children:N})})}),e?q.jsxs(zn,{sx:{display:"flex",alignItems:"center",gap:2},children:[q.jsx(u_,{color:"inherit",onClick:L,children:q.jsx(C_e,{badgeContent:v.length,color:"error",children:q.jsx(GOe,{})})}),q.jsxs(RK,{open:!!d,anchorEl:d,onClose:$,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:320,borderRadius:2,mt:1.5}},children:[q.jsx(zn,{sx:{p:2,bgcolor:"primary.main",color:"white"},children:q.jsx(ar,{variant:"subtitle1",fontWeight:"bold",children:"Recent Updates"})}),q.jsx(rd,{}),q.jsx(UO,{sx:{p:0},children:v.length>0?v.map((F,Q)=>q.jsxs(le.Fragment,{children:[q.jsxs(D5,{component:F.external?"a":mc,...F.external?{href:F.link,target:"_blank",rel:"noopener noreferrer"}:{to:F.link},onClick:$,sx:{"&:hover":{bgcolor:"action.hover"},textDecoration:"none",color:"inherit",display:"flex",alignItems:"center"},children:[q.jsx(lw,{sx:{minWidth:40},children:F.icon}),q.jsx(tm,{primary:F.title,secondary:aJ(F.date,{addSuffix:!0}),primaryTypographyProps:{variant:"body2",fontWeight:500},secondaryTypographyProps:{variant:"caption"}})]}),Q<v.length-1&&q.jsx(rd,{})]},F.id)):q.jsx(D5,{children:q.jsx(tm,{primary:"No recent activity",primaryTypographyProps:{variant:"body2",textAlign:"center",py:2}})})}),q.jsx(rd,{}),q.jsx(gi,{fullWidth:!0,component:mc,to:"/updates",onClick:$,sx:{textTransform:"none",py:1,borderRadius:0},children:"View All Updates"})]}),q.jsx(zn,{sx:{display:"flex",alignItems:"center",gap:1.5},children:q.jsx(zK,{title:"Account settings",children:q.jsx(u_,{onClick:E,sx:{p:0},children:q.jsx(Ck,{alt:n?.display_name||e.email||"",src:n?.avatar_url||e.user_metadata?.avatar_url,children:(n?.display_name||e.email||"U")[0].toUpperCase()})})})}),q.jsxs(IK,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!s,onClose:A,children:[q.jsxs(zn,{sx:{px:2,py:1.5},children:[q.jsx(ar,{variant:"subtitle2",noWrap:!0,sx:{fontWeight:600},children:n?.display_name||e.email}),n?.display_name&&q.jsx(ar,{variant:"caption",color:"text.secondary",noWrap:!0,display:"block",children:e.email})]}),q.jsx(rd,{}),q.jsx(Bl,{onClick:()=>{A(),a("/profile")},children:"Profile"}),q.jsx(Bl,{onClick:M,children:"Logout"})]})]}):q.jsx(gi,{color:"inherit",component:mc,to:"/login",children:"Login"})]})})},lJ=ri(q.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),CTe=ri([q.jsx("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),q.jsx("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")]),TTe=ri(q.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),kTe=ri(q.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),cJ=ri(q.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),ETe=ri(q.jsx("path",{d:"M20 21c-1.39 0-2.78-.47-4-1.32-2.44 1.71-5.56 1.71-8 0C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 2.52 1.29 5.48 1.29 8 0 1.26.65 2.62.99 4 .99h2v-2zM3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78zM6 6h12v3.97L12 8 6 9.97z"})),ATe=ri(q.jsx("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16m11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M5 11l1.5-4.5h11L19 11z"})),uJ=ri(q.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),PTe=ri(q.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),MTe=ri(q.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),RTe=ri(q.jsx("path",{d:"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5z"})),ITe=ri(q.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"})),DTe=ri(q.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),LTe=ri(q.jsx("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"})),$Te=ri(q.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"})),zTe=ri(q.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),NTe=ri(q.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),BTe=ri(q.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"})),EB=ri(q.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"})),FTe=ri(q.jsx("path",{d:"M12 2c-4 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h2.23l2-2H14l2 2h2v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-3.58-4-8-4M7.5 17c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17m3.5-7H6V6h5zm2 0V6h5v4zm3.5 7c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"})),jTe=ri(q.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"})),B5=280,VTe=({node:t,onSectionClick:e,onStopClick:n,activeKey:r,visitedStops:i,showTransits:o})=>{const[a,s]=j.useState(!1);j.useEffect(()=>{r&&t.children.some(_=>_.key===r)&&s(!0)},[r,t.children]);const u=()=>{s(!a),e(t)},d=r?t.children.some(_=>_.key===r):!1,m=i&&t.children.length>0?t.children.every(_=>i.includes(_.key)):!1;let v="";return d?v="":m&&(v=""),q.jsxs(q.Fragment,{children:[q.jsxs(i_,{onClick:u,sx:{pl:2},children:[q.jsx(zn,{component:"span",sx:{mr:2,width:24,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0,fontSize:"1.2rem",lineHeight:1,transition:"all 0.3s ease",textShadow:d?"0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px currentColor":"none",filter:d?"brightness(1.2)":"none",transform:d?"scale(1.2)":"scale(1)"},children:v}),q.jsx(tm,{primary:t.name,primaryTypographyProps:{noWrap:!0,fontWeight:"medium"}}),a?q.jsx(PTe,{}):q.jsx(MTe,{})]}),q.jsx(a4,{in:a,timeout:"auto",unmountOnExit:!0,children:q.jsx(UO,{component:"div",disablePadding:!0,sx:{pl:2},children:t.children.map(_=>q.jsx(hJ,{node:_,onStopClick:n,active:r===_.key,visited:i?.includes(_.key),showTransits:o},_.key))})})]})},QTe=t=>{switch(t){case"Plane":return"";case"Train":return"";case"Boat":return"";case"Car":return"";default:return""}},hJ=({node:t,onStopClick:e,active:n,visited:r,indent:i=4,showTransits:o})=>{if(t.category==="Trip"&&!n&&!o)return null;const a=v=>{v.stopPropagation(),t.category==="Stop"&&e(t)};let s="";t.category==="Trip"?s=QTe(t.transportationMode):n?s="":r?s="":s="";const u={"@keyframes move-horizontal":{"0%":{transform:"translateX(-2px)"},"50%":{transform:"translateX(2px)"},"100%":{transform:"translateX(-2px)"}}},d=t.category==="Trip"?t.name:null,m=t.category==="Trip";return q.jsx(q.Fragment,{children:q.jsxs(i_,{onClick:a,sx:{pl:i,py:1,justifyContent:"flex-start",alignItems:"center",minHeight:48},children:[q.jsxs(zn,{sx:{position:"relative",mr:2,display:"flex",flexDirection:"column",alignItems:"center",width:24,flexShrink:0},children:[m&&q.jsx(zn,{sx:{position:"absolute",top:-24,bottom:-24,width:"2px",bgcolor:"divider",zIndex:0}}),q.jsx(zn,{component:"span",sx:{position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.paper",fontSize:m?"1.5rem":"1.2rem",lineHeight:1,transition:"all 0.3s ease",animation:n&&m?"move-horizontal 2s infinite ease-in-out":"none",...u},children:s})]}),(d||!m)&&q.jsx(tm,{primary:m?d:t.name,primaryTypographyProps:{fontWeight:n?"bold":"normal",color:n?"primary.main":"text.primary",noWrap:!0}})]})})},UTe=({open:t,onClose:e,variant:n,onStopClick:r,onSectionClick:i,activeKey:o,visitedStops:a})=>{const{role:s}=py(),[u,d]=j.useState(!1),m=le.useMemo(()=>{const v=[],_=new Map;return CB.forEach((O,E)=>{if(O.section){let A=_.get(O.section);A||(A={type:"section",id:O.section,name:O.section,children:[]},_.set(O.section,A),v.push(A)),A.children.push(O)}else v.push({type:"item",node:O})}),v},[]);return q.jsxs(Jbe,{variant:n,open:t,onClose:e,sx:{width:B5,flexShrink:0,"& .MuiDrawer-paper":{width:B5,boxSizing:"border-box",display:"flex",flexDirection:"column"}},children:[q.jsx(xB,{})," ",q.jsx(rd,{}),q.jsxs(UO,{sx:{flexGrow:1,overflowY:"auto"},children:[q.jsxs(i_,{component:mc,to:"/blog",onClick:n==="temporary"?e:void 0,children:[q.jsx(lw,{children:q.jsx(UR,{})}),q.jsx(tm,{primary:"Blog"})]}),q.jsxs(i_,{component:mc,to:"/photos",onClick:n==="temporary"?e:void 0,children:[q.jsx(lw,{children:q.jsx(tO,{})}),q.jsx(tm,{primary:"Photos"})]}),q.jsxs(i_,{component:mc,to:"/map",onClick:n==="temporary"?e:void 0,children:[q.jsx(lw,{children:q.jsx(eO,{})}),q.jsx(tm,{primary:"Map"})]}),s==="admin"&&q.jsxs(i_,{component:mc,to:"/admin",onClick:n==="temporary"?e:void 0,children:[q.jsx(lw,{children:q.jsx(CTe,{})}),q.jsx(tm,{primary:"Admin"})]}),q.jsx(rd,{}),m.map((v,_)=>v.type==="section"?q.jsx(VTe,{node:v,onSectionClick:i,onStopClick:r,activeKey:o,visitedStops:a,showTransits:u},v.id):q.jsx(hJ,{node:v.node,onStopClick:r,active:o===v.node.key,visited:a?.includes(v.node.key),indent:2,showTransits:u},v.node.key+_))]}),q.jsx(rd,{}),q.jsx(zn,{sx:{p:2},children:q.jsx(fB,{control:q.jsx(vB,{checked:u,onChange:v=>d(v.target.checked),size:"small"}),label:"Show Transits"})})]})},ZTe=({children:t,onStopClick:e,onSectionClick:n,activeKey:r,visitedStops:i})=>{const o=bd(),a=WOe(o.breakpoints.down("md")),[s,u]=j.useState(!a),d=()=>{u(!s)};return q.jsxs(zn,{sx:{display:"flex"},children:[q.jsx(rbe,{}),q.jsx(STe,{onMenuClick:d}),q.jsx(UTe,{open:s,onClose:d,variant:a?"temporary":"persistent",onStopClick:e,onSectionClick:n,activeKey:r,visitedStops:i}),q.jsxs(zn,{component:"main",sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden",width:a?"100%":{sm:`calc(100% - ${B5}px)`},marginLeft:a||s?0:`-${B5}px`,transition:m=>m.transitions.create("margin",{easing:m.transitions.easing.sharp,duration:m.transitions.duration.leavingScreen}),...!a&&s&&{transition:m=>m.transitions.create("margin",{easing:m.transitions.easing.easeOut,duration:m.transitions.duration.enteringScreen})}},children:[q.jsx(xB,{})," ",q.jsx(zn,{sx:{flexGrow:1,position:"relative",overflowY:"auto"},children:t})]})]})},qTe="modulepreload",WTe=function(t){return"/"+t},oQ={},Dt=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(d){return Promise.all(d.map(m=>Promise.resolve(m).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),s=a?.nonce||a?.getAttribute("nonce");i=u(n.map(d=>{if(d=WTe(d),d in oQ)return;oQ[d]=!0;const m=d.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${v}`))return;const _=document.createElement("link");if(_.rel=m?"stylesheet":qTe,m||(_.as="script"),_.crossOrigin="",_.href=d,s&&_.setAttribute("nonce",s),document.head.appendChild(_),m)return new Promise((O,E)=>{_.addEventListener("load",O),_.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return i.then(a=>{for(const s of a||[])s.status==="rejected"&&o(s.reason);return e().catch(o)})},HTe=j.createContext(null);function GTe(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===o}function ou(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!ou(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!ou(t[i],e[i]))return!1;return!0}return!1}function sQ(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function aQ(t,e){const n=e.viewState||e,r={};if("longitude"in n&&"latitude"in n&&(n.longitude!==t.center.lng||n.latitude!==t.center.lat)){const i=t.center.constructor;r.center=new i(n.longitude,n.latitude)}return"zoom"in n&&n.zoom!==t.zoom&&(r.zoom=n.zoom),"bearing"in n&&n.bearing!==t.bearing&&(r.bearing=n.bearing),"pitch"in n&&n.pitch!==t.pitch&&(r.pitch=n.pitch),n.padding&&t.padding&&!ou(n.padding,t.padding)&&(r.padding=n.padding),r}const XTe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function lQ(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{let i=null;"interactive"in r&&(i=Object.assign({},r),delete i.interactive);const o=e[r.ref];if(o){i=i||Object.assign({},r),delete i.ref;for(const a of XTe)a in o&&(i[a]=o[a])}return i||r});return{...t,layers:n}}const cQ={version:8,sources:{},layers:[]},uQ={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},hQ={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},dQ={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},YTe=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],KTe=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class nO{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=i=>{const o=this.props[dQ[i.type]];o?o(i):i.type==="error"&&console.error(i.error)},this._onCameraEvent=i=>{if(this._internalUpdate)return;i.viewState=this._propsedCameraUpdate||sQ(this._map.transform);const o=this.props[hQ[i.type]];o&&o(i)},this._onCameraUpdate=i=>this._internalUpdate?i:(this._propsedCameraUpdate=sQ(i),aQ(i,this.props)),this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const o=this.props[uQ[i.type]];o&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),o(i),delete i.features)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n),i=this._updateSize(e),o=this._updateViewState(e);this._updateStyle(e,n),this._updateStyleComponents(e),this._updateHandlers(e,n),(r||i||o&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=nO.savedMaps.pop();if(!r)return null;const i=r.map,o=i.getContainer();for(n.className=o.className;o.childNodes.length>0;)n.appendChild(o.childNodes[0]);i._container=n;const a=i._resizeObserver;a&&(a.disconnect(),a.observe(n)),r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:s}=e;return s&&(s.bounds?i.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):r._updateViewState(s)),i.isStyleLoaded()?i.fire("load"):i.once("style.load",()=>i.fire("load")),i._update(),r}_initialize(e){const{props:n}=this,{mapStyle:r=cQ}=n,i={...n,...n.initialViewState,container:e,style:lQ(r)},o=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[o.longitude||0,o.latitude||0],zoom:o.zoom||0,pitch:o.pitch||0,bearing:o.bearing||0}),n.gl){const s=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=s,n.gl)}const a=new this._MapClass(i);o.padding&&a.setPadding(o.padding),n.cursor&&(a.getCanvas().style.cursor=n.cursor),a.transformCameraUpdate=this._onCameraUpdate,a.on("style.load",()=>{this._styleComponents={light:a.getLight(),sky:a.getSky(),projection:a.getProjection?.(),terrain:a.getTerrain()},this._updateStyleComponents(this.props)}),a.on("sourcedata",()=>{this._updateStyleComponents(this.props)});for(const s in uQ)a.on(s,this._onPointerEvent);for(const s in hQ)a.on(s,this._onCameraEvent);for(const s in dQ)a.on(s,this._onEvent);this._map=a}recycle(){this.map.getContainer().querySelector("[mapboxgl-children]")?.remove(),nO.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e){const n=this._map,r=n.transform;if(!n.isMoving()){const o=aQ(r,e);if(Object.keys(o).length>0)return this._internalUpdate=!0,n.jumpTo(o),this._internalUpdate=!1,!0}return!1}_updateSettings(e,n){const r=this._map;let i=!1;for(const o of YTe)o in e&&!ou(e[o],n[o])&&(i=!0,r[`set${o[0].toUpperCase()}${o.slice(1)}`]?.call(r,e[o]));return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:r=cQ,styleDiffing:i=!0}=e,o={diff:i};"localIdeographFontFamily"in e&&(o.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(lQ(r),o)}}_updateStyleComponents({light:e,projection:n,sky:r,terrain:i}){const o=this._map,a=this._styleComponents;o.style._loaded&&(e&&!ou(e,a.light)&&(a.light=e,o.setLight(e)),n&&!ou(n,a.projection)&&n!==a.projection?.type&&(a.projection=typeof n=="string"?{type:n}:n,o.setProjection?.(a.projection)),r&&!ou(r,a.sky)&&(a.sky=r,o.setSky(r)),i!==void 0&&!ou(i,a.terrain)&&(!i||o.getSource(i.source))&&(a.terrain=i,o.setTerrain(i)))}_updateHandlers(e,n){const r=this._map;for(const i of KTe){const o=e[i]??!0,a=n[i]??!0;ou(o,a)||(o?r[i].enable(o):r[i].disable())}}_queryRenderedFeatures(e){const n=this._map,{interactiveLayerIds:r=[]}=this.props;try{return n.queryRenderedFeatures(e,{layers:r.filter(n.getLayer.bind(n))})}catch{return[]}}_updateHover(e){const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const i=e.type,o=this._hoveredFeatures?.length>0,a=this._queryRenderedFeatures(e.point),s=a.length>0;!s&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,s&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=i}else this._hoveredFeatures=null}}nO.savedMaps=[];const JTe=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function eke(t){if(!t)return null;const e=t.map,n={getMap:()=>e};for(const r of tke(e))!(r in n)&&!JTe.includes(r)&&(n[r]=e[r].bind(e));return n}function tke(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const nke=typeof document<"u"?j.useLayoutEffect:j.useEffect;function rke(t,e){const{RTLTextPlugin:n,maxParallelImageRequests:r,workerCount:i,workerUrl:o}=e;if(n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"){const{pluginUrl:a,lazy:s=!0}=typeof n=="string"?{pluginUrl:n}:n;t.setRTLTextPlugin(a,u=>{u&&console.error(u)},s)}r!==void 0&&t.setMaxParallelImageRequests(r),i!==void 0&&t.setWorkerCount(i),o!==void 0&&t.setWorkerUrl(o)}const qO=j.createContext(null);function ike(t,e){const n=j.useContext(HTe),[r,i]=j.useState(null),o=j.useRef(),{current:a}=j.useRef({mapLib:null,map:null});j.useEffect(()=>{const d=t.mapLib;let m=!0,v;return Promise.resolve(d||Dt(()=>Promise.resolve().then(()=>Cpe),[])).then(_=>{if(!m)return;if(!_)throw new Error("Invalid mapLib");const O="Map"in _?_:_.default;if(!O.Map)throw new Error("Invalid mapLib");rke(O,t),t.reuseMaps&&(v=nO.reuse(t,o.current)),v||(v=new nO(O.Map,t,o.current)),a.map=eke(v),a.mapLib=O,i(v),n?.onMapMount(a.map,t.id)}).catch(_=>{const{onError:O}=t;O?O({type:"error",target:null,originalEvent:null,error:_}):console.error(_)}),()=>{m=!1,v&&(n?.onMapUnmount(t.id),t.reuseMaps?v.recycle():v.destroy())}},[]),nke(()=>{r&&r.setProps(t)}),j.useImperativeHandle(e,()=>a.map,[r]);const s=j.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),u={height:"100%"};return j.createElement("div",{id:t.id,ref:o,style:s},r&&j.createElement(qO.Provider,{value:a},j.createElement("div",{"mapboxgl-children":"",style:u},t.children)))}const dJ=j.forwardRef(ike),oke=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function my(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!oke.test(r)?n[r]=`${i}px`:n[r]=i}}function fJ(t,e){if(t===e)return null;const n=fQ(t),r=fQ(e),i=[];for(const o of r)n.has(o)||i.push(o);for(const o of n)r.has(o)||i.push(o);return i.length===0?null:i}function fQ(t){return new Set(t?t.trim().split(/\s+/):[])}const ske=j.memo(j.forwardRef((t,e)=>{const{map:n,mapLib:r}=j.useContext(qO),i=j.useRef({props:t}),o=j.useMemo(()=>{let L=!1;j.Children.forEach(t.children,F=>{F&&(L=!0)});const $={...t,element:L?document.createElement("div"):void 0},N=new r.Marker($);return N.setLngLat([t.longitude,t.latitude]),N.getElement().addEventListener("click",F=>{i.current.props.onClick?.({type:"click",target:N,originalEvent:F})}),N.on("dragstart",F=>{const Q=F;Q.lngLat=o.getLngLat(),i.current.props.onDragStart?.(Q)}),N.on("drag",F=>{const Q=F;Q.lngLat=o.getLngLat(),i.current.props.onDrag?.(Q)}),N.on("dragend",F=>{const Q=F;Q.lngLat=o.getLngLat(),i.current.props.onDragEnd?.(Q)}),N},[]);j.useEffect(()=>(o.addTo(n.getMap()),()=>{o.remove()}),[]);const{longitude:a,latitude:s,offset:u,style:d,draggable:m=!1,popup:v=null,rotation:_=0,rotationAlignment:O="auto",pitchAlignment:E="auto"}=t;j.useEffect(()=>{my(o.getElement(),d)},[d]),j.useImperativeHandle(e,()=>o,[]);const A=i.current.props;(o.getLngLat().lng!==a||o.getLngLat().lat!==s)&&o.setLngLat([a,s]),u&&!GTe(o.getOffset(),u)&&o.setOffset(u),o.isDraggable()!==m&&o.setDraggable(m),o.getRotation()!==_&&o.setRotation(_),o.getRotationAlignment()!==O&&o.setRotationAlignment(O),o.getPitchAlignment()!==E&&o.setPitchAlignment(E),o.getPopup()!==v&&o.setPopup(v);const M=fJ(A.className,t.className);if(M)for(const L of M)o.toggleClassName(L);return i.current.props=t,mm.createPortal(t.children,o.getElement())})),ake=j.memo(j.forwardRef((t,e)=>{const{map:n,mapLib:r}=j.useContext(qO),i=j.useMemo(()=>document.createElement("div"),[]),o=j.useRef({props:t}),a=j.useMemo(()=>{const s={...t},u=new r.Popup(s);return u.setLngLat([t.longitude,t.latitude]),u.once("open",d=>{o.current.props.onOpen?.(d)}),u},[]);if(j.useEffect(()=>{const s=u=>{o.current.props.onClose?.(u)};return a.on("close",s),a.setDOMContent(i).addTo(n.getMap()),()=>{a.off("close",s),a.isOpen()&&a.remove()}},[]),j.useEffect(()=>{my(a.getElement(),t.style)},[t.style]),j.useImperativeHandle(e,()=>a,[]),a.isOpen()){const s=o.current.props;(a.getLngLat().lng!==t.longitude||a.getLngLat().lat!==t.latitude)&&a.setLngLat([t.longitude,t.latitude]),t.offset&&!ou(s.offset,t.offset)&&a.setOffset(t.offset),(s.anchor!==t.anchor||s.maxWidth!==t.maxWidth)&&(a.options.anchor=t.anchor,a.setMaxWidth(t.maxWidth));const u=fJ(s.className,t.className);if(u)for(const d of u)a.toggleClassName(d);o.current.props=t}return mm.createPortal(t.children,i)}));function Y_(t,e,n,r){const i=j.useContext(qO),o=j.useMemo(()=>t(i),[]);return j.useEffect(()=>{const a=e,s=null,u=typeof e=="function"?e:null,{map:d}=i;return d.hasControl(o)||(d.addControl(o,a?.position),s&&s(i)),()=>{u&&u(i),d.hasControl(o)&&d.removeControl(o)}},[]),o}function lke(t){const e=Y_(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return j.useEffect(()=>{my(e._container,t.style)},[t.style]),null}j.memo(lke);function cke(t){const e=Y_(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return j.useEffect(()=>{my(e._controlContainer,t.style)},[t.style]),null}const uke=j.memo(cke);function hke(t,e){const n=j.useRef({props:t}),r=Y_(({mapLib:i})=>{const o=new i.GeolocateControl(t),a=o._setupUI;return o._setupUI=()=>{o._container.hasChildNodes()||a()},o.on("geolocate",s=>{n.current.props.onGeolocate?.(s)}),o.on("error",s=>{n.current.props.onError?.(s)}),o.on("outofmaxbounds",s=>{n.current.props.onOutOfMaxBounds?.(s)}),o.on("trackuserlocationstart",s=>{n.current.props.onTrackUserLocationStart?.(s)}),o.on("trackuserlocationend",s=>{n.current.props.onTrackUserLocationEnd?.(s)}),o},{position:t.position});return n.current.props=t,j.useImperativeHandle(e,()=>r,[]),j.useEffect(()=>{my(r._container,t.style)},[t.style]),null}j.memo(j.forwardRef(hke));function dke(t){const e=Y_(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return j.useEffect(()=>{my(e._container,t.style)},[t.style]),null}const pJ=j.memo(dke);function fke(t){const e=Y_(({mapLib:o})=>new o.ScaleControl(t),{position:t.position}),n=j.useRef(t),r=n.current;n.current=t;const{style:i}=t;return t.maxWidth!==void 0&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==r.unit&&e.setUnit(t.unit),j.useEffect(()=>{my(e._container,i)},[i]),null}const pke=j.memo(fke);function mke(t){const e=Y_(({mapLib:n})=>new n.TerrainControl(t),{position:t.position});return j.useEffect(()=>{my(e._container,t.style)},[t.style]),null}j.memo(mke);function gke(t){const e=Y_(({mapLib:n})=>new n.LogoControl(t),{position:t.position});return j.useEffect(()=>{my(e._container,t.style)},[t.style]),null}j.memo(gke);function F5(t,e){if(!t)throw new Error(e)}let yke=0;function vke(t,e,n){if(t.style&&t.style._loaded){const r={...n};return delete r.id,delete r.children,t.addSource(e,r),t.getSource(e)}return null}function xke(t,e,n){F5(e.id===n.id,"source id changed"),F5(e.type===n.type,"source type changed");let r="",i=0;for(const a in e)a!=="children"&&a!=="id"&&!ou(n[a],e[a])&&(r=a,i++);if(!i)return;const o=e.type;if(o==="geojson")t.setData(e.data);else if(o==="image")t.updateImage({url:e.url,coordinates:e.coordinates});else switch(r){case"coordinates":t.setCoordinates?.(e.coordinates);break;case"url":t.setUrl?.(e.url);break;case"tiles":t.setTiles?.(e.tiles);break;default:console.warn(`Unable to update <Source> prop: ${r}`)}}function A4(t){const e=j.useContext(qO).map.getMap(),n=j.useRef(t),[,r]=j.useState(0),i=j.useMemo(()=>t.id||`jsx-source-${yke++}`,[]);j.useEffect(()=>{if(e){const a=()=>setTimeout(()=>r(s=>s+1),0);return e.on("styledata",a),a(),()=>{if(e.off("styledata",a),e.style&&e.style._loaded&&e.getSource(i)){const s=e.getStyle()?.layers;if(s)for(const u of s)u.source===i&&e.removeLayer(u.id);e.removeSource(i)}}}},[e]);let o=e&&e.style&&e.getSource(i);return o?xke(o,t,n.current):o=vke(e,i,t),n.current=t,o&&j.Children.map(t.children,a=>a&&j.cloneElement(a,{source:i}))||null}function _ke(t,e,n,r){if(F5(n.id===r.id,"layer id changed"),F5(n.type===r.type,"layer type changed"),n.type==="custom"||r.type==="custom")return;const{layout:i={},paint:o={},filter:a,minzoom:s,maxzoom:u,beforeId:d}=n;if(d!==r.beforeId&&t.moveLayer(e,d),i!==r.layout){const m=r.layout||{};for(const v in i)ou(i[v],m[v])||t.setLayoutProperty(e,v,i[v]);for(const v in m)i.hasOwnProperty(v)||t.setLayoutProperty(e,v,void 0)}if(o!==r.paint){const m=r.paint||{};for(const v in o)ou(o[v],m[v])||t.setPaintProperty(e,v,o[v]);for(const v in m)o.hasOwnProperty(v)||t.setPaintProperty(e,v,void 0)}ou(a,r.filter)||t.setFilter(e,a),(s!==r.minzoom||u!==r.maxzoom)&&t.setLayerZoomRange(e,s,u)}function bke(t,e,n){if(t.style&&t.style._loaded&&(!("source"in n)||t.getSource(n.source))){const r={...n,id:e};delete r.beforeId,t.addLayer(r,n.beforeId)}}let wke=0;function Wx(t){const e=j.useContext(qO).map.getMap(),n=j.useRef(t),[,r]=j.useState(0),i=j.useMemo(()=>t.id||`jsx-layer-${wke++}`,[]);if(j.useEffect(()=>{if(e){const a=()=>r(s=>s+1);return e.on("styledata",a),a(),()=>{e.off("styledata",a),e.style&&e.style._loaded&&e.getLayer(i)&&e.removeLayer(i)}}},[e]),e&&e.style&&e.getLayer(i))try{_ke(e,i,t,n.current)}catch(a){console.warn(a)}else bke(e,i,t);return n.current=t,null}const Oke=t=>({version:8,projection:{type:t},sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"&copy; OpenStreetMap Contributors",maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]}),Ske=t=>{switch(t){case"Plane":return"#3b82f6";case"Train":return"#22c55e";case"Boat":return"#06b6d4";case"Car":return"#f59e0b";default:return"#64748b"}},Cke=t=>{switch(t){case"Plane":return"";case"Train":return"";case"Boat":return"";case"Car":return"";default:return""}},Tke={id:"trip-layer",type:"line",paint:{"line-color":["get","color"],"line-width":4,"line-opacity":.8},layout:{"line-join":"round","line-cap":"round"}},kke={id:"trip-symbol-layer",type:"symbol",layout:{"symbol-placement":"line","symbol-spacing":50,"text-field":["get","symbol"],"text-size":20,"text-keep-upright":!1,"text-rotation-alignment":"map","symbol-avoid-edges":!1,"text-allow-overlap":!0,"text-ignore-placement":!1,"text-rotate":0,"text-offset":[0,.5]},paint:{"text-color":["get","color"],"text-halo-color":"#fff","text-halo-width":1}},Eke={id:"stops-layer",type:"circle",paint:{"circle-radius":6,"circle-color":"#fff","circle-stroke-color":"#000","circle-stroke-width":2}},pc=t=>t>-130?t-360:t,Ake=({item:t,onClose:e})=>{const{role:n,refreshCheckIn:r,user:i}=py(),[o,a]=j.useState(null),[s,u]=j.useState(!0),[d,m]=j.useState(!1),[v,_]=j.useState(!1),[O,E]=j.useState("");j.useEffect(()=>{(async()=>{try{u(!0);const[$,N,F]=await Promise.all([Jr.from("check_in").select("created_at").eq("status",t.key).order("created_at",{ascending:!1}).limit(1),Jr.from("blog_post").select("id",{count:"exact",head:!0}).contains("tags",[t.key]),Jr.from("photo_album").select("id",{count:"exact",head:!0}).contains("tags",[t.key])]),[Q,W]=await Promise.all([Jr.from("blog_post").select("id").contains("tags",[t.key]).order("created_date",{ascending:!1}).limit(1),Jr.from("photo_album").select("icloud_link").contains("tags",[t.key]).order("created_at",{ascending:!1}).limit(1)]);a({lastCheckIn:$.data?.[0]?new Date($.data[0].created_at):null,blogCount:N.count||0,photoCount:F.count||0,latestBlogId:Q.data?.[0]?.id,latestPhotoLink:W.data?.[0]?.icloud_link})}catch($){console.error("Error fetching stats:",$)}finally{u(!1)}})()},[t.key]);const A=()=>{_(!0)},M=async()=>{if(!(!n||n!=="admin"&&n!=="editor"||!i))try{m(!0);const{error:L}=await Jr.from("check_in").insert([{status:t.key,user_id:i.id,message:O||null,created_at:new Date().toISOString()}]);if(L)throw L;await r(),_(!1),E(""),e()}catch(L){console.error("Error checking in:",L),alert("Failed to check in")}finally{m(!1)}};return s?q.jsx(zn,{sx:{display:"flex",justifyContent:"center",p:2,minWidth:150},children:q.jsx(wc,{size:20})}):o?q.jsxs(zn,{sx:{p:.5,minWidth:160},children:[q.jsx(ar,{variant:"subtitle2",fontWeight:"bold",sx:{mb:1,color:"primary.main"},children:t.category==="Stop"?t.name:t.description||t.key}),q.jsx(rd,{sx:{mb:1.5}}),q.jsxs(cu,{spacing:1.5,children:[o.lastCheckIn&&q.jsxs(zn,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[q.jsx(ITe,{sx:{fontSize:18,color:"text.secondary"}}),q.jsxs(ar,{variant:"caption",sx:{fontWeight:500},children:["Last check-in: ",o.lastCheckIn.toLocaleDateString()]})]}),q.jsxs(zn,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[q.jsx(UR,{sx:{fontSize:18,color:"secondary.main"}}),o.blogCount>0?q.jsxs(pV,{component:mc,to:`/blog?id=${o.latestBlogId}`,variant:"caption",sx:{fontWeight:500,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:[o.blogCount," Blog posts"]}):q.jsxs(ar,{variant:"caption",sx:{fontWeight:500},children:[o.blogCount," Blog posts"]})]}),q.jsxs(zn,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[q.jsx(tO,{sx:{fontSize:18,color:"#10b981"}}),o.photoCount>0?q.jsxs(pV,{href:o.latestPhotoLink,target:"_blank",rel:"noopener noreferrer",variant:"caption",sx:{fontWeight:500,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:[o.photoCount," Photo albums"]}):q.jsxs(ar,{variant:"caption",sx:{fontWeight:500},children:[o.photoCount," Photo albums"]})]}),(n==="admin"||n==="editor")&&q.jsx(zn,{sx:{pt:1},children:q.jsx(gi,{variant:"contained",size:"small",startIcon:d?q.jsx(wc,{size:16,color:"inherit"}):q.jsx(TTe,{}),onClick:A,fullWidth:!0,disabled:d,sx:{fontSize:"0.75rem",textTransform:"none"},children:"Check In Here"})}),q.jsxs(cT,{open:v,onClose:()=>_(!1),maxWidth:"xs",fullWidth:!0,children:[q.jsxs(VR,{children:["Check In: ",t.category==="Stop"?t.name:t.key]}),q.jsx(jR,{children:q.jsx(Ba,{autoFocus:!0,margin:"dense",label:"Message (Optional)",fullWidth:!0,variant:"outlined",value:O,onChange:L=>E(L.target.value),multiline:!0,rows:3})}),q.jsxs(FR,{children:[q.jsx(gi,{onClick:()=>_(!1),children:"Cancel"}),q.jsx(gi,{onClick:M,variant:"contained",disabled:d,children:d?"Checking In...":"Confirm"})]})]})]})]}):null},mJ=j.forwardRef(({items:t},e)=>{const{latestCheckIn:n}=py(),r=n?.status,[i,o]=j.useState(null),[a,s]=j.useState("auto"),[u,d]=j.useState("globe"),[m,v]=j.useState(0),_=j.useMemo(()=>Oke(u),[u]);j.useEffect(()=>{let Q;const W=()=>{v(H=>(H+1)%2),Q=requestAnimationFrame(()=>setTimeout(W,500))};return Q=requestAnimationFrame(W),()=>cancelAnimationFrame(Q)},[]);const{stopsGeoJson:O,tripsGeoJson:E}=j.useMemo(()=>{const Q=t.filter(ne=>ne.category==="Stop"),W=t.filter(ne=>ne.category==="Trip"),H=Q.map(ne=>({type:"Feature",properties:ne,geometry:{type:"Point",coordinates:[pc(ne.geolocation[0]),ne.geolocation[1]]}})),te=W.map(ne=>{const ce=ne.geometricShape,we=ce.coordinates.map(re=>[pc(re[0]),re[1]]);return{type:"Feature",properties:{key:ne.key,color:Ske(ne.transportationMode),symbol:Cke(ne.transportationMode),mode:ne.transportationMode,description:`${ne.startLocation} to ${ne.endLocation} (${ne.transportationMode})`},geometry:{...ce,coordinates:we}}});return{stopsGeoJson:{type:"FeatureCollection",features:H},tripsGeoJson:{type:"FeatureCollection",features:te}}},[t]),A=j.useMemo(()=>{const Q=t.find(H=>H.key===r);if(Q){if(Q.category==="Stop")return{longitude:pc(Q.geolocation[0]),latitude:Q.geolocation[1],zoom:3};if(Q.category==="Trip"){const H=Q.geometricShape.coordinates[0];return{longitude:pc(H[0]),latitude:H[1],zoom:3}}}const W=t.find(H=>H.category==="Stop");return W?{longitude:pc(W.geolocation[0]),latitude:W.geolocation[1],zoom:2}:{longitude:0,latitude:0,zoom:1}},[t,r]);j.useEffect(()=>{if(!r||!e||!e.current)return;const Q=t.find(H=>H.key===r);if(!Q)return;const W=e.current;if(Q.category==="Stop")W.flyTo({center:[pc(Q.geolocation[0]),Q.geolocation[1]],zoom:10,essential:!0});else if(Q.category==="Trip"){const H=Q.geometricShape.coordinates;if(H.length>0){let te=pc(H[0][0]),ne=pc(H[0][0]),ce=H[0][1],we=H[0][1];H.forEach(re=>{const se=pc(re[0]),be=re[1];te=Math.min(te,se),ne=Math.max(ne,se),ce=Math.min(ce,be),we=Math.max(we,be)}),W.fitBounds([[te,ce],[ne,we]],{padding:80,maxZoom:10,essential:!0})}}},[r,t,e]);const M=j.useCallback(Q=>{const W=Q.features?.[0];if(W){const H=pc(Q.lngLat.lng),te=Q.lngLat.lat;if(W.geometry.type==="Point"){const ce=W.geometry.coordinates;o({item:W.properties,position:[ce[0],ce[1]]})}else o({item:W.properties,position:[H,te]})}},[]),L=j.useCallback(()=>s("pointer"),[]),$=j.useCallback(()=>s("auto"),[]),N=j.useMemo(()=>({id:"stops-label",type:"symbol",layout:{"text-field":["get","name"],"text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-justify":"auto","text-size":["case",["==",["get","key"],r||""],18,14],"text-font":["case",["==",["get","key"],r||""],["literal",["Noto Sans Regular"]],["literal",["Noto Sans Regular"]]]},paint:{"text-color":["case",["==",["get","key"],r||""],"#ef4444","#000"],"text-halo-color":"#fff","text-halo-width":["case",["==",["get","key"],r||""],2,2]}}),[r]),F=j.useMemo(()=>({id:"active-trip-layer",type:"line",filter:["==",["get","key"],r||""],paint:{"line-color":"#ffffff","line-width":2,"line-dasharray":[2+m,4+m],"line-opacity":.9},layout:{"line-join":"round","line-cap":"round"}}),[r,m]);return q.jsxs("div",{className:"h-full w-full",style:{height:"100%"},children:[q.jsxs(dJ,{ref:e,initialViewState:A,style:{width:"100%",height:"100%"},mapStyle:_,renderWorldCopies:!0,interactiveLayerIds:["stops-layer","stops-label","trip-layer"],onClick:M,cursor:a,onMouseEnter:L,onMouseLeave:$,children:[q.jsx(uke,{position:"top-right"}),q.jsx(pJ,{position:"top-right"}),q.jsxs(A4,{id:"trips",type:"geojson",data:E,children:[q.jsx(Wx,{...Tke}),q.jsx(Wx,{...F}),q.jsx(Wx,{...kke})]}),q.jsxs(A4,{id:"stops",type:"geojson",data:O,children:[q.jsx(Wx,{...Eke}),q.jsx(Wx,{...N})]}),i&&q.jsx(ake,{anchor:"top",longitude:i.position[0],latitude:i.position[1],onClose:()=>o(null),closeButton:!1,maxWidth:"300px",children:q.jsx(Ake,{item:i.item,onClose:()=>o(null)})})]}),q.jsxs(wa,{elevation:3,sx:{position:"absolute",bottom:24,left:24,p:"2px 12px",borderRadius:2,display:"flex",alignItems:"center",gap:1,backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(4px)",zIndex:10},children:[q.jsx(eO,{fontSize:"small",color:u==="mercator"?"primary":"disabled"}),q.jsx(fB,{control:q.jsx(vB,{size:"small",checked:u==="globe",onChange:Q=>d(Q.target.checked?"globe":"mercator")}),label:"",sx:{m:0}}),q.jsx(BTe,{fontSize:"small",color:u==="globe"?"primary":"disabled"})]})]})});mJ.displayName="MapComponent";const Pke=()=>{const{user:t,role:e}=py(),[n,r]=j.useState([]),[i,o]=j.useState(!0),[a,s]=j.useState(null),[u,d]=j.useState(!1),[m,v]=j.useState(!1),[_,O]=j.useState({title:"",icloud_link:"",tags:""}),E=async()=>{try{o(!0);const{data:M,error:L}=await Jr.from("photo_album").select("*").order("created_at",{ascending:!1});if(L)throw L;r(M||[])}catch(M){s(M.message)}finally{o(!1)}};j.useEffect(()=>{E()},[]);const A=async()=>{if(t){if(!_.title||!_.icloud_link){s("Please provide at least a title and a link.");return}try{v(!0);const M=_.tags.split(",").map($=>$.trim()).filter(Boolean),{error:L}=await Jr.from("photo_album").insert([{title:_.title,icloud_link:_.icloud_link,tags:M,owner_id:t.id}]);if(L)throw L;d(!1),O({title:"",icloud_link:"",tags:""}),E()}catch(M){s(M.message)}finally{v(!1)}}};return i?q.jsx(zn,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:q.jsx(wc,{})}):q.jsxs(Jw,{maxWidth:"lg",sx:{py:4},children:[q.jsxs(zn,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:2},children:[q.jsxs(zn,{children:[q.jsx(ar,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Photo Albums"}),q.jsx(ar,{variant:"body1",color:"text.secondary",children:"Capturing the best moments of our journey across the Pacific."})]}),t&&(e==="admin"||e==="editor")&&q.jsx(gi,{variant:"contained",startIcon:q.jsx(lJ,{}),onClick:()=>d(!0),sx:{borderRadius:2,textTransform:"none",px:3,mt:1},children:"Add Album"})]}),a&&q.jsxs(V0,{severity:"error",sx:{mb:4,borderRadius:2},children:["Error loading albums: ",a]}),!a&&n.length===0&&q.jsxs(zn,{sx:{textAlign:"center",py:8},children:[q.jsx(tO,{sx:{fontSize:64,color:"text.disabled",mb:2}}),q.jsx(ar,{variant:"h6",color:"text.secondary",children:"No photo albums found."})]}),q.jsx(Ux,{container:!0,spacing:3,children:n.map(M=>q.jsx(Ux,{size:{xs:12,sm:6,md:4},children:q.jsxs(B_e,{elevation:3,sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:3,transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:6}},children:[q.jsxs(W_e,{sx:{flexGrow:1,py:4,textAlign:"center"},children:[q.jsx(tO,{color:"primary",sx:{fontSize:48,mb:2}}),q.jsx(ar,{variant:"h5",component:"h2",fontWeight:"bold",gutterBottom:!0,children:M.title}),q.jsx(cu,{direction:"row",spacing:1,sx:{mt:1,mb:1,flexWrap:"wrap",justifyContent:"center",gap:1},children:M.tags?.map(L=>q.jsx(Yw,{label:L,size:"small",variant:"outlined"},L))}),q.jsxs(ar,{variant:"body2",color:"text.secondary",children:["Added on ",new Date(M.created_at).toLocaleDateString()]})]}),q.jsx(Q_e,{sx:{p:2,pt:0,justifyContent:"center"},children:q.jsx(gi,{variant:"contained",fullWidth:!0,startIcon:q.jsx($Te,{}),href:M.icloud_link,target:"_blank",rel:"noopener noreferrer",sx:{borderRadius:2,textTransform:"none",py:1},children:"View Album"})})]})},M.id))}),q.jsxs(cT,{open:u,onClose:()=>d(!1),fullWidth:!0,maxWidth:"sm",children:[q.jsx(VR,{sx:{fontWeight:"bold"},children:"Add New Photo Album"}),q.jsx(jR,{dividers:!0,children:q.jsxs(cu,{spacing:3,sx:{mt:1},children:[q.jsx(Ba,{fullWidth:!0,label:"Album Title",value:_.title,onChange:M=>O({..._,title:M.target.value}),placeholder:"e.g. Sunset in Tahiti"}),q.jsx(Ba,{fullWidth:!0,label:"iCloud Album Link",value:_.icloud_link,onChange:M=>O({..._,icloud_link:M.target.value}),placeholder:"https://www.icloud.com/sharedalbum/..."}),q.jsx(Ba,{fullWidth:!0,label:"Tags (comma separated)",value:_.tags,onChange:M=>O({..._,tags:M.target.value}),placeholder:"e.g. islands, beach, nature",helperText:"Add location keys like 'Auckland' to link with the map"})]})}),q.jsxs(FR,{sx:{p:3},children:[q.jsx(gi,{onClick:()=>d(!1),color:"inherit",children:"Cancel"}),q.jsx(gi,{variant:"contained",onClick:A,disabled:m,startIcon:m?q.jsx(wc,{size:20}):q.jsx(EB,{}),children:m?"Saving...":"Save Album"})]})]})]})};function Mke(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Rke=/[$_\p{ID_Start}]/u,Ike=/[$_\u{200C}\u{200D}\p{ID_Continue}]/u,Dke=/[-$_\u{200C}\u{200D}\p{ID_Continue}]/u,Lke=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,$ke=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,gJ={};function vf(t){return t?Rke.test(String.fromCodePoint(t)):!1}function F2(t,e){const r=(e||gJ).jsx?Dke:Ike;return t?r.test(String.fromCodePoint(t)):!1}function pQ(t,e){return(gJ.jsx?$ke:Lke).test(t)}const zke=/[ \t\n\f\r]/g;function Nke(t){return typeof t=="object"?t.type==="text"?mQ(t.value):!1:mQ(t)}function mQ(t){return t.replace(zke,"")===""}let kk=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};kk.prototype.normal={};kk.prototype.property={};kk.prototype.space=void 0;function yJ(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new kk(n,r,e)}function P4(t){return t.toLowerCase()}class bu{constructor(e,n){this.attribute=n,this.property=e}}bu.prototype.attribute="";bu.prototype.booleanish=!1;bu.prototype.boolean=!1;bu.prototype.commaOrSpaceSeparated=!1;bu.prototype.commaSeparated=!1;bu.prototype.defined=!1;bu.prototype.mustUseProperty=!1;bu.prototype.number=!1;bu.prototype.overloadedBoolean=!1;bu.prototype.property="";bu.prototype.spaceSeparated=!1;bu.prototype.space=void 0;let Bke=0;const Dr=K_(),Hs=K_(),M4=K_(),mn=K_(),Mo=K_(),Ow=K_(),Xu=K_();function K_(){return 2**++Bke}const R4=Object.freeze(Object.defineProperty({__proto__:null,boolean:Dr,booleanish:Hs,commaOrSpaceSeparated:Xu,commaSeparated:Ow,number:mn,overloadedBoolean:M4,spaceSeparated:Mo},Symbol.toStringTag,{value:"Module"})),C3=Object.keys(R4);class AB extends bu{constructor(e,n,r,i){let o=-1;if(super(e,n),gQ(this,"space",i),typeof r=="number")for(;++o<C3.length;){const a=C3[o];gQ(this,C3[o],(r&R4[a])===R4[a])}}}AB.prototype.defined=!0;function gQ(t,e,n){n&&(t[e]=n)}function WO(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const o=new AB(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[P4(r)]=r,n[P4(o.attribute)]=r}return new kk(e,n,t.space)}const vJ=WO({properties:{ariaActiveDescendant:null,ariaAtomic:Hs,ariaAutoComplete:null,ariaBusy:Hs,ariaChecked:Hs,ariaColCount:mn,ariaColIndex:mn,ariaColSpan:mn,ariaControls:Mo,ariaCurrent:null,ariaDescribedBy:Mo,ariaDetails:null,ariaDisabled:Hs,ariaDropEffect:Mo,ariaErrorMessage:null,ariaExpanded:Hs,ariaFlowTo:Mo,ariaGrabbed:Hs,ariaHasPopup:null,ariaHidden:Hs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Mo,ariaLevel:mn,ariaLive:null,ariaModal:Hs,ariaMultiLine:Hs,ariaMultiSelectable:Hs,ariaOrientation:null,ariaOwns:Mo,ariaPlaceholder:null,ariaPosInSet:mn,ariaPressed:Hs,ariaReadOnly:Hs,ariaRelevant:null,ariaRequired:Hs,ariaRoleDescription:Mo,ariaRowCount:mn,ariaRowIndex:mn,ariaRowSpan:mn,ariaSelected:Hs,ariaSetSize:mn,ariaSort:null,ariaValueMax:mn,ariaValueMin:mn,ariaValueNow:mn,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function xJ(t,e){return e in t?t[e]:e}function _J(t,e){return xJ(t,e.toLowerCase())}const Fke=WO({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ow,acceptCharset:Mo,accessKey:Mo,action:null,allow:null,allowFullScreen:Dr,allowPaymentRequest:Dr,allowUserMedia:Dr,alt:null,as:null,async:Dr,autoCapitalize:null,autoComplete:Mo,autoFocus:Dr,autoPlay:Dr,blocking:Mo,capture:null,charSet:null,checked:Dr,cite:null,className:Mo,cols:mn,colSpan:null,content:null,contentEditable:Hs,controls:Dr,controlsList:Mo,coords:mn|Ow,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Dr,defer:Dr,dir:null,dirName:null,disabled:Dr,download:M4,draggable:Hs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Dr,formTarget:null,headers:Mo,height:mn,hidden:M4,high:mn,href:null,hrefLang:null,htmlFor:Mo,httpEquiv:Mo,id:null,imageSizes:null,imageSrcSet:null,inert:Dr,inputMode:null,integrity:null,is:null,isMap:Dr,itemId:null,itemProp:Mo,itemRef:Mo,itemScope:Dr,itemType:Mo,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Dr,low:mn,manifest:null,max:null,maxLength:mn,media:null,method:null,min:null,minLength:mn,multiple:Dr,muted:Dr,name:null,nonce:null,noModule:Dr,noValidate:Dr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Dr,optimum:mn,pattern:null,ping:Mo,placeholder:null,playsInline:Dr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Dr,referrerPolicy:null,rel:Mo,required:Dr,reversed:Dr,rows:mn,rowSpan:mn,sandbox:Mo,scope:null,scoped:Dr,seamless:Dr,selected:Dr,shadowRootClonable:Dr,shadowRootDelegatesFocus:Dr,shadowRootMode:null,shape:null,size:mn,sizes:null,slot:null,span:mn,spellCheck:Hs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:mn,step:null,style:null,tabIndex:mn,target:null,title:null,translate:null,type:null,typeMustMatch:Dr,useMap:null,value:Hs,width:mn,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Mo,axis:null,background:null,bgColor:null,border:mn,borderColor:null,bottomMargin:mn,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Dr,declare:Dr,event:null,face:null,frame:null,frameBorder:null,hSpace:mn,leftMargin:mn,link:null,longDesc:null,lowSrc:null,marginHeight:mn,marginWidth:mn,noResize:Dr,noHref:Dr,noShade:Dr,noWrap:Dr,object:null,profile:null,prompt:null,rev:null,rightMargin:mn,rules:null,scheme:null,scrolling:Hs,standby:null,summary:null,text:null,topMargin:mn,valueType:null,version:null,vAlign:null,vLink:null,vSpace:mn,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Dr,disableRemotePlayback:Dr,prefix:null,property:null,results:mn,security:null,unselectable:null},space:"html",transform:_J}),jke=WO({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Xu,accentHeight:mn,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:mn,amplitude:mn,arabicForm:null,ascent:mn,attributeName:null,attributeType:null,azimuth:mn,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:mn,by:null,calcMode:null,capHeight:mn,className:Mo,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:mn,diffuseConstant:mn,direction:null,display:null,dur:null,divisor:mn,dominantBaseline:null,download:Dr,dx:null,dy:null,edgeMode:null,editable:null,elevation:mn,enableBackground:null,end:null,event:null,exponent:mn,externalResourcesRequired:null,fill:null,fillOpacity:mn,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ow,g2:Ow,glyphName:Ow,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:mn,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:mn,horizOriginX:mn,horizOriginY:mn,id:null,ideographic:mn,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:mn,k:mn,k1:mn,k2:mn,k3:mn,k4:mn,kernelMatrix:Xu,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:mn,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:mn,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:mn,overlineThickness:mn,paintOrder:null,panose1:null,path:null,pathLength:mn,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Mo,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:mn,pointsAtY:mn,pointsAtZ:mn,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Xu,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Xu,rev:Xu,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Xu,requiredFeatures:Xu,requiredFonts:Xu,requiredFormats:Xu,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:mn,specularExponent:mn,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:mn,strikethroughThickness:mn,string:null,stroke:null,strokeDashArray:Xu,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:mn,strokeOpacity:mn,strokeWidth:null,style:null,surfaceScale:mn,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Xu,tabIndex:mn,tableValues:null,target:null,targetX:mn,targetY:mn,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Xu,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:mn,underlineThickness:mn,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:mn,values:null,vAlphabetic:mn,vMathematical:mn,vectorEffect:null,vHanging:mn,vIdeographic:mn,version:null,vertAdvY:mn,vertOriginX:mn,vertOriginY:mn,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:mn,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:xJ}),bJ=WO({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),wJ=WO({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:_J}),OJ=WO({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),Vke={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Qke=/[A-Z]/g,yQ=/-[a-z]/g,Uke=/^data[-\w.:]+$/i;function Zke(t,e){const n=P4(e);let r=e,i=bu;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Uke.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(yQ,Wke);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!yQ.test(o)){let a=o.replace(Qke,qke);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}i=AB}return new i(r,e)}function qke(t){return"-"+t.toLowerCase()}function Wke(t){return t.charAt(1).toUpperCase()}const Hke=yJ([vJ,Fke,bJ,wJ,OJ],"html"),PB=yJ([vJ,jke,bJ,wJ,OJ],"svg");function Gke(t){return t.join(" ").trim()}var z1={},T3,vQ;function Xke(){if(vQ)return T3;vQ=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,s=/^\s+|\s+$/g,u=`
`,d="/",m="*",v="",_="comment",O="declaration";function E(M,L){if(typeof M!="string")throw new TypeError("First argument must be a string");if(!M)return[];L=L||{};var $=1,N=1;function F(be){var fe=be.match(e);fe&&($+=fe.length);var ve=be.lastIndexOf(u);N=~ve?be.length-ve:N+be.length}function Q(){var be={line:$,column:N};return function(fe){return fe.position=new W(be),ne(),fe}}function W(be){this.start=be,this.end={line:$,column:N},this.source=L.source}W.prototype.content=M;function H(be){var fe=new Error(L.source+":"+$+":"+N+": "+be);if(fe.reason=be,fe.filename=L.source,fe.line=$,fe.column=N,fe.source=M,!L.silent)throw fe}function te(be){var fe=be.exec(M);if(fe){var ve=fe[0];return F(ve),M=M.slice(ve.length),fe}}function ne(){te(n)}function ce(be){var fe;for(be=be||[];fe=we();)fe!==!1&&be.push(fe);return be}function we(){var be=Q();if(!(d!=M.charAt(0)||m!=M.charAt(1))){for(var fe=2;v!=M.charAt(fe)&&(m!=M.charAt(fe)||d!=M.charAt(fe+1));)++fe;if(fe+=2,v===M.charAt(fe-1))return H("End of comment missing");var ve=M.slice(2,fe-2);return N+=2,F(ve),M=M.slice(fe),N+=2,be({type:_,comment:ve})}}function re(){var be=Q(),fe=te(r);if(fe){if(we(),!te(i))return H("property missing ':'");var ve=te(o),Me=be({type:O,property:A(fe[0].replace(t,v)),value:ve?A(ve[0].replace(t,v)):v});return te(a),Me}}function se(){var be=[];ce(be);for(var fe;fe=re();)fe!==!1&&(be.push(fe),ce(be));return be}return ne(),se()}function A(M){return M?M.replace(s,v):v}return T3=E,T3}var xQ;function Yke(){if(xQ)return z1;xQ=1;var t=z1&&z1.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(z1,"__esModule",{value:!0}),z1.default=n;const e=t(Xke());function n(r,i){let o=null;if(!r||typeof r!="string")return o;const a=(0,e.default)(r),s=typeof i=="function";return a.forEach(u=>{if(u.type!=="declaration")return;const{property:d,value:m}=u;s?i(d,m,u):m&&(o=o||{},o[d]=m)}),o}return z1}var j2={},_Q;function Kke(){if(_Q)return j2;_Q=1,Object.defineProperty(j2,"__esModule",{value:!0}),j2.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(d){return!d||n.test(d)||t.test(d)},a=function(d,m){return m.toUpperCase()},s=function(d,m){return"".concat(m,"-")},u=function(d,m){return m===void 0&&(m={}),o(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(i,s):d=d.replace(r,s),d.replace(e,a))};return j2.camelCase=u,j2}var V2,bQ;function Jke(){if(bQ)return V2;bQ=1;var t=V2&&V2.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(Yke()),n=Kke();function r(i,o){var a={};return!i||typeof i!="string"||(0,e.default)(i,function(s,u){s&&u&&(a[(0,n.camelCase)(s,o)]=u)}),a}return r.default=r,V2=r,V2}var eEe=Jke();const tEe=lv(eEe),SJ=CJ("end"),MB=CJ("start");function CJ(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function nEe(t){const e=MB(t),n=SJ(t);if(e&&n)return{start:e,end:n}}function Ug(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?wQ(t.position):"start"in t||"end"in t?wQ(t):"line"in t||"column"in t?I4(t):""}function I4(t){return OQ(t&&t.line)+":"+OQ(t&&t.column)}function wQ(t){return I4(t&&t.start)+"-"+I4(t&&t.end)}function OQ(t){return t&&typeof t=="number"?t:1}class Ii extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},a=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?i=e:!o.cause&&e&&(a=!0,i=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?o.ruleId=r:(o.source=r.slice(0,u),o.ruleId=r.slice(u+1))}if(!o.place&&o.ancestors&&o.ancestors){const u=o.ancestors[o.ancestors.length-1];u&&(o.place=u.position)}const s=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=s?s.line:void 0,this.name=Ug(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=a&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ii.prototype.file="";Ii.prototype.name="";Ii.prototype.reason="";Ii.prototype.message="";Ii.prototype.stack="";Ii.prototype.column=void 0;Ii.prototype.line=void 0;Ii.prototype.ancestors=void 0;Ii.prototype.cause=void 0;Ii.prototype.fatal=void 0;Ii.prototype.place=void 0;Ii.prototype.ruleId=void 0;Ii.prototype.source=void 0;const RB={}.hasOwnProperty,rEe=new Map,iEe=/[A-Z]/g,oEe=new Set(["table","tbody","thead","tfoot","tr"]),sEe=new Set(["td","th"]),TJ="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function aEe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=mEe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=pEe(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?PB:Hke,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=kJ(i,t,void 0);return o&&typeof o!="string"?o:i.create(t,i.Fragment,{children:o||void 0},void 0)}function kJ(t,e,n){if(e.type==="element")return lEe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return cEe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return hEe(t,e,n);if(e.type==="mdxjsEsm")return uEe(t,e);if(e.type==="root")return dEe(t,e,n);if(e.type==="text")return fEe(t,e)}function lEe(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=PB,t.schema=i),t.ancestors.push(e);const o=AJ(t,e.tagName,!1),a=gEe(t,e);let s=DB(t,e);return oEe.has(e.tagName)&&(s=s.filter(function(u){return typeof u=="string"?!Nke(u):!0})),EJ(t,a,o,e),IB(a,s),t.ancestors.pop(),t.schema=r,t.create(e,o,a,n)}function cEe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}gT(t,e.position)}function uEe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);gT(t,e.position)}function hEe(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=PB,t.schema=i),t.ancestors.push(e);const o=e.name===null?t.Fragment:AJ(t,e.name,!0),a=yEe(t,e),s=DB(t,e);return EJ(t,a,o,e),IB(a,s),t.ancestors.pop(),t.schema=r,t.create(e,o,a,n)}function dEe(t,e,n){const r={};return IB(r,DB(t,e)),t.create(e,t.Fragment,r,n)}function fEe(t,e){return e.value}function EJ(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function IB(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function pEe(t,e,n){return r;function r(i,o,a,s){const d=Array.isArray(a.children)?n:e;return s?d(o,a,s):d(o,a)}}function mEe(t,e){return n;function n(r,i,o,a){const s=Array.isArray(o.children),u=MB(r);return e(i,o,a,s,{columnNumber:u?u.column-1:void 0,fileName:t,lineNumber:u?u.line:void 0},void 0)}}function gEe(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&RB.call(e.properties,i)){const o=vEe(t,i,e.properties[i]);if(o){const[a,s]=o;t.tableCellAlignToStyle&&a==="align"&&typeof s=="string"&&sEe.has(e.tagName)?r=s:n[a]=s}}if(r){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function yEe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const o=r.data.estree.body[0];o.type;const a=o.expression;a.type;const s=a.properties[0];s.type,Object.assign(n,t.evaluater.evaluateExpression(s.argument))}else gT(t,e.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const s=r.value.data.estree.body[0];s.type,o=t.evaluater.evaluateExpression(s.expression)}else gT(t,e.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function DB(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:rEe;for(;++r<e.children.length;){const o=e.children[r];let a;if(t.passKeys){const u=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(u){const d=i.get(u)||0;a=u+"-"+d,i.set(u,d+1)}}const s=kJ(t,o,a);s!==void 0&&n.push(s)}return n}function vEe(t,e,n){const r=Zke(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Mke(n):Gke(n)),r.property==="style"){let i=typeof n=="object"?n:xEe(t,String(n));return t.stylePropertyNameCase==="css"&&(i=_Ee(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?Vke[r.property]||r.property:r.attribute,n]}}function xEe(t,e){try{return tEe(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Ii("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=TJ+"#cannot-parse-style-attribute",i}}function AJ(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let o=-1,a;for(;++o<i.length;){const s=pQ(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};a=a?{type:"MemberExpression",object:a,property:s,computed:!!(o&&s.type==="Literal"),optional:!1}:s}r=a}else r=pQ(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return RB.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);gT(t)}function gT(t,e){const n=new Ii("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=TJ+"#cannot-handle-mdx-estrees-without-createevaluater",n}function _Ee(t){const e={};let n;for(n in t)RB.call(t,n)&&(e[bEe(n)]=t[n]);return e}function bEe(t){let e=t.replace(iEe,wEe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function wEe(t){return"-"+t.toLowerCase()}const k3={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},OEe={};function LB(t,e){const n=OEe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return PJ(t,r,i)}function PJ(t,e,n){if(SEe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return SQ(t.children,e,n)}return Array.isArray(t)?SQ(t,e,n):""}function SQ(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=PJ(t[i],e,n);return r.join("")}function SEe(t){return!!(t&&typeof t=="object")}const CQ=document.createElement("i");function yT(t){const e="&"+t+";";CQ.innerHTML=e;const n=CQ.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function jl(t,e,n,r){const i=t.length;let o=0,a;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);o<r.length;)a=r.slice(o,o+1e4),a.unshift(e,0),t.splice(...a),o+=1e4,e+=1e4}function Kh(t,e){return t.length>0?(jl(t,t.length,0,e),t):e}const TQ={}.hasOwnProperty;function CEe(t){const e={};let n=-1;for(;++n<t.length;)TEe(e,t[n]);return e}function TEe(t,e){let n;for(n in e){const i=(TQ.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let a;if(o)for(a in o){TQ.call(i,a)||(i[a]=[]);const s=o[a];kEe(i[a],Array.isArray(s)?s:s?[s]:[])}}}function kEe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);jl(t,0,0,r)}function MJ(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Sw(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ed=hv(/[A-Za-z]/),xc=hv(/[\dA-Za-z]/),EEe=hv(/[#-'*+\--9=?A-Z^-~]/);function D4(t){return t!==null&&(t<32||t===127)}const L4=hv(/\d/),AEe=hv(/[\dA-Fa-f]/),PEe=hv(/[!-/:-@[-`{-~]/);function Mn(t){return t!==null&&t<-2}function Ri(t){return t!==null&&(t<0||t===32)}function _r(t){return t===-2||t===-1||t===32}const MEe=hv(new RegExp("\\p{P}|\\p{S}","u")),Dg=hv(/\s/);function hv(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function HO(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const o=t.charCodeAt(n);let a="";if(o===37&&xc(t.charCodeAt(n+1))&&xc(t.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){const s=t.charCodeAt(n+1);o<56320&&s>56319&&s<57344?(a=String.fromCharCode(o,s),i=1):a=""}else a=String.fromCharCode(o);a&&(e.push(t.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Rr(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return a;function a(u){return _r(u)?(t.enter(n),s(u)):e(u)}function s(u){return _r(u)&&o++<i?(t.consume(u),s):(t.exit(n),e(u))}}const REe={tokenize:IEe};function IEe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),Rr(t,e,"linePrefix")}function i(s){return t.enter("paragraph"),o(s)}function o(s){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,a(s)}function a(s){if(s===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(s);return}return Mn(s)?(t.consume(s),t.exit("chunkText"),o):(t.consume(s),a)}}const DEe={tokenize:LEe},kQ={tokenize:$Ee};function LEe(t){const e=this,n=[];let r=0,i,o,a;return s;function s(N){if(r<n.length){const F=n[r];return e.containerState=F[1],t.attempt(F[0].continuation,u,d)(N)}return d(N)}function u(N){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&$();const F=e.events.length;let Q=F,W;for(;Q--;)if(e.events[Q][0]==="exit"&&e.events[Q][1].type==="chunkFlow"){W=e.events[Q][1].end;break}L(r);let H=F;for(;H<e.events.length;)e.events[H][1].end={...W},H++;return jl(e.events,Q+1,0,e.events.slice(F)),e.events.length=H,d(N)}return s(N)}function d(N){if(r===n.length){if(!i)return _(N);if(i.currentConstruct&&i.currentConstruct.concrete)return E(N);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(kQ,m,v)(N)}function m(N){return i&&$(),L(r),_(N)}function v(N){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,E(N)}function _(N){return e.containerState={},t.attempt(kQ,O,E)(N)}function O(N){return r++,n.push([e.currentConstruct,e.containerState]),_(N)}function E(N){if(N===null){i&&$(),L(0),t.consume(N);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:o}),A(N)}function A(N){if(N===null){M(t.exit("chunkFlow"),!0),L(0),t.consume(N);return}return Mn(N)?(t.consume(N),M(t.exit("chunkFlow")),r=0,e.interrupt=void 0,s):(t.consume(N),A)}function M(N,F){const Q=e.sliceStream(N);if(F&&Q.push(null),N.previous=o,o&&(o.next=N),o=N,i.defineSkip(N.start),i.write(Q),e.parser.lazy[N.start.line]){let W=i.events.length;for(;W--;)if(i.events[W][1].start.offset<a&&(!i.events[W][1].end||i.events[W][1].end.offset>a))return;const H=e.events.length;let te=H,ne,ce;for(;te--;)if(e.events[te][0]==="exit"&&e.events[te][1].type==="chunkFlow"){if(ne){ce=e.events[te][1].end;break}ne=!0}for(L(r),W=H;W<e.events.length;)e.events[W][1].end={...ce},W++;jl(e.events,te+1,0,e.events.slice(H)),e.events.length=W}}function L(N){let F=n.length;for(;F-- >N;){const Q=n[F];e.containerState=Q[1],Q[0].exit.call(e,t)}n.length=N}function $(){i.write([null]),o=void 0,i=void 0,e.containerState._closeFlow=void 0}}function $Ee(t,e,n){return Rr(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function X0(t){if(t===null||Ri(t)||Dg(t))return 1;if(MEe(t))return 2}function Ek(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const o=t[i].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}const $4={name:"attention",resolveAll:zEe,tokenize:NEe};function zEe(t,e){let n=-1,r,i,o,a,s,u,d,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const v={...t[r][1].end},_={...t[n][1].start};EQ(v,-u),EQ(_,u),a={type:u>1?"strongSequence":"emphasisSequence",start:v,end:{...t[r][1].end}},s={type:u>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:_},o={type:u>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:u>1?"strong":"emphasis",start:{...a.start},end:{...s.end}},t[r][1].end={...a.start},t[n][1].start={...s.end},d=[],t[r][1].end.offset-t[r][1].start.offset&&(d=Kh(d,[["enter",t[r][1],e],["exit",t[r][1],e]])),d=Kh(d,[["enter",i,e],["enter",a,e],["exit",a,e],["enter",o,e]]),d=Kh(d,Ek(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),d=Kh(d,[["exit",o,e],["enter",s,e],["exit",s,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,d=Kh(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,jl(t,r-1,n-r+3,d),n=r+d.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function NEe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=X0(r);let o;return a;function a(u){return o=u,t.enter("attentionSequence"),s(u)}function s(u){if(u===o)return t.consume(u),s;const d=t.exit("attentionSequence"),m=X0(u),v=!m||m===2&&i||n.includes(u),_=!i||i===2&&m||n.includes(r);return d._open=!!(o===42?v:v&&(i||!_)),d._close=!!(o===42?_:_&&(m||!v)),e(u)}}function EQ(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const BEe={name:"autolink",tokenize:FEe};function FEe(t,e,n){let r=0;return i;function i(O){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(O),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(O){return ed(O)?(t.consume(O),a):O===64?n(O):d(O)}function a(O){return O===43||O===45||O===46||xc(O)?(r=1,s(O)):d(O)}function s(O){return O===58?(t.consume(O),r=0,u):(O===43||O===45||O===46||xc(O))&&r++<32?(t.consume(O),s):(r=0,d(O))}function u(O){return O===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(O),t.exit("autolinkMarker"),t.exit("autolink"),e):O===null||O===32||O===60||D4(O)?n(O):(t.consume(O),u)}function d(O){return O===64?(t.consume(O),m):EEe(O)?(t.consume(O),d):n(O)}function m(O){return xc(O)?v(O):n(O)}function v(O){return O===46?(t.consume(O),r=0,m):O===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(O),t.exit("autolinkMarker"),t.exit("autolink"),e):_(O)}function _(O){if((O===45||xc(O))&&r++<63){const E=O===45?_:v;return t.consume(O),E}return n(O)}}const WR={partial:!0,tokenize:jEe};function jEe(t,e,n){return r;function r(o){return _r(o)?Rr(t,i,"linePrefix")(o):i(o)}function i(o){return o===null||Mn(o)?e(o):n(o)}}const RJ={continuation:{tokenize:QEe},exit:UEe,name:"blockQuote",tokenize:VEe};function VEe(t,e,n){const r=this;return i;function i(a){if(a===62){const s=r.containerState;return s.open||(t.enter("blockQuote",{_container:!0}),s.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),o}return n(a)}function o(a){return _r(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function QEe(t,e,n){const r=this;return i;function i(a){return _r(a)?Rr(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):o(a)}function o(a){return t.attempt(RJ,e,n)(a)}}function UEe(t){t.exit("blockQuote")}const IJ={name:"characterEscape",tokenize:ZEe};function ZEe(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),i}function i(o){return PEe(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const DJ={name:"characterReference",tokenize:qEe};function qEe(t,e,n){const r=this;let i=0,o,a;return s;function s(v){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(v),t.exit("characterReferenceMarker"),u}function u(v){return v===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(v),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),o=31,a=xc,m(v))}function d(v){return v===88||v===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(v),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,a=AEe,m):(t.enter("characterReferenceValue"),o=7,a=L4,m(v))}function m(v){if(v===59&&i){const _=t.exit("characterReferenceValue");return a===xc&&!yT(r.sliceSerialize(_))?n(v):(t.enter("characterReferenceMarker"),t.consume(v),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(v)&&i++<o?(t.consume(v),m):n(v)}}const AQ={partial:!0,tokenize:HEe},PQ={concrete:!0,name:"codeFenced",tokenize:WEe};function WEe(t,e,n){const r=this,i={partial:!0,tokenize:Q};let o=0,a=0,s;return u;function u(W){return d(W)}function d(W){const H=r.events[r.events.length-1];return o=H&&H[1].type==="linePrefix"?H[2].sliceSerialize(H[1],!0).length:0,s=W,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(W)}function m(W){return W===s?(a++,t.consume(W),m):a<3?n(W):(t.exit("codeFencedFenceSequence"),_r(W)?Rr(t,v,"whitespace")(W):v(W))}function v(W){return W===null||Mn(W)?(t.exit("codeFencedFence"),r.interrupt?e(W):t.check(AQ,A,F)(W)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),_(W))}function _(W){return W===null||Mn(W)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),v(W)):_r(W)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Rr(t,O,"whitespace")(W)):W===96&&W===s?n(W):(t.consume(W),_)}function O(W){return W===null||Mn(W)?v(W):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),E(W))}function E(W){return W===null||Mn(W)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),v(W)):W===96&&W===s?n(W):(t.consume(W),E)}function A(W){return t.attempt(i,F,M)(W)}function M(W){return t.enter("lineEnding"),t.consume(W),t.exit("lineEnding"),L}function L(W){return o>0&&_r(W)?Rr(t,$,"linePrefix",o+1)(W):$(W)}function $(W){return W===null||Mn(W)?t.check(AQ,A,F)(W):(t.enter("codeFlowValue"),N(W))}function N(W){return W===null||Mn(W)?(t.exit("codeFlowValue"),$(W)):(t.consume(W),N)}function F(W){return t.exit("codeFenced"),e(W)}function Q(W,H,te){let ne=0;return ce;function ce(fe){return W.enter("lineEnding"),W.consume(fe),W.exit("lineEnding"),we}function we(fe){return W.enter("codeFencedFence"),_r(fe)?Rr(W,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(fe):re(fe)}function re(fe){return fe===s?(W.enter("codeFencedFenceSequence"),se(fe)):te(fe)}function se(fe){return fe===s?(ne++,W.consume(fe),se):ne>=a?(W.exit("codeFencedFenceSequence"),_r(fe)?Rr(W,be,"whitespace")(fe):be(fe)):te(fe)}function be(fe){return fe===null||Mn(fe)?(W.exit("codeFencedFence"),H(fe)):te(fe)}}}function HEe(t,e,n){const r=this;return i;function i(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o)}function o(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const E3={name:"codeIndented",tokenize:XEe},GEe={partial:!0,tokenize:YEe};function XEe(t,e,n){const r=this;return i;function i(d){return t.enter("codeIndented"),Rr(t,o,"linePrefix",5)(d)}function o(d){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?a(d):n(d)}function a(d){return d===null?u(d):Mn(d)?t.attempt(GEe,a,u)(d):(t.enter("codeFlowValue"),s(d))}function s(d){return d===null||Mn(d)?(t.exit("codeFlowValue"),a(d)):(t.consume(d),s)}function u(d){return t.exit("codeIndented"),e(d)}}function YEe(t,e,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):Mn(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i):Rr(t,o,"linePrefix",5)(a)}function o(a){const s=r.events[r.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(a):Mn(a)?i(a):n(a)}}const KEe={name:"codeText",previous:eAe,resolve:JEe,tokenize:tAe};function JEe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function eAe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tAe(t,e,n){let r=0,i,o;return a;function a(v){return t.enter("codeText"),t.enter("codeTextSequence"),s(v)}function s(v){return v===96?(t.consume(v),r++,s):(t.exit("codeTextSequence"),u(v))}function u(v){return v===null?n(v):v===32?(t.enter("space"),t.consume(v),t.exit("space"),u):v===96?(o=t.enter("codeTextSequence"),i=0,m(v)):Mn(v)?(t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),u):(t.enter("codeTextData"),d(v))}function d(v){return v===null||v===32||v===96||Mn(v)?(t.exit("codeTextData"),u(v)):(t.consume(v),d)}function m(v){return v===96?(t.consume(v),i++,m):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(v)):(o.type="codeTextData",d(v))}}class nAe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Q2(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Q2(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Q2(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Q2(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Q2(this.left,n.reverse())}}}function Q2(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function LJ(t){const e={};let n=-1,r,i,o,a,s,u,d;const m=new nAe(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,o=0,o<u.length&&u[o][1].type==="lineEndingBlank"&&(o+=2),o<u.length&&u[o][1].type==="content"))for(;++o<u.length&&u[o][1].type!=="content";)u[o][1].type==="chunkText"&&(u[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,rAe(m,n)),n=e[n],d=!0);else if(r[1]._container){for(o=n,i=void 0;o--;)if(a=m.get(o),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(m.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=o);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...m.get(i)[1].start},s=m.slice(i,n),s.unshift(r),m.splice(i,n-i+1,s))}}return jl(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function rAe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const o=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const s=a.events,u=[],d={};let m,v,_=-1,O=n,E=0,A=0;const M=[A];for(;O;){for(;t.get(++i)[1]!==O;);o.push(i),O._tokenizer||(m=r.sliceStream(O),O.next||m.push(null),v&&a.defineSkip(O.start),O._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(m),O._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),v=O,O=O.next}for(O=n;++_<s.length;)s[_][0]==="exit"&&s[_-1][0]==="enter"&&s[_][1].type===s[_-1][1].type&&s[_][1].start.line!==s[_][1].end.line&&(A=_+1,M.push(A),O._tokenizer=void 0,O.previous=void 0,O=O.next);for(a.events=[],O?(O._tokenizer=void 0,O.previous=void 0):M.pop(),_=M.length;_--;){const L=s.slice(M[_],M[_+1]),$=o.pop();u.push([$,$+L.length-1]),t.splice($,2,L)}for(u.reverse(),_=-1;++_<u.length;)d[E+u[_][0]]=E+u[_][1],E+=u[_][1]-u[_][0]-1;return d}const iAe={resolve:sAe,tokenize:aAe},oAe={partial:!0,tokenize:lAe};function sAe(t){return LJ(t),t}function aAe(t,e){let n;return r;function r(s){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?o(s):Mn(s)?t.check(oAe,a,o)(s):(t.consume(s),i)}function o(s){return t.exit("chunkContent"),t.exit("content"),e(s)}function a(s){return t.consume(s),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function lAe(t,e,n){const r=this;return i;function i(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Rr(t,o,"linePrefix")}function o(a){if(a===null||Mn(a))return n(a);const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}function $J(t,e,n,r,i,o,a,s,u){const d=u||Number.POSITIVE_INFINITY;let m=0;return v;function v(L){return L===60?(t.enter(r),t.enter(i),t.enter(o),t.consume(L),t.exit(o),_):L===null||L===32||L===41||D4(L)?n(L):(t.enter(r),t.enter(a),t.enter(s),t.enter("chunkString",{contentType:"string"}),A(L))}function _(L){return L===62?(t.enter(o),t.consume(L),t.exit(o),t.exit(i),t.exit(r),e):(t.enter(s),t.enter("chunkString",{contentType:"string"}),O(L))}function O(L){return L===62?(t.exit("chunkString"),t.exit(s),_(L)):L===null||L===60||Mn(L)?n(L):(t.consume(L),L===92?E:O)}function E(L){return L===60||L===62||L===92?(t.consume(L),O):O(L)}function A(L){return!m&&(L===null||L===41||Ri(L))?(t.exit("chunkString"),t.exit(s),t.exit(a),t.exit(r),e(L)):m<d&&L===40?(t.consume(L),m++,A):L===41?(t.consume(L),m--,A):L===null||L===32||L===40||D4(L)?n(L):(t.consume(L),L===92?M:A)}function M(L){return L===40||L===41||L===92?(t.consume(L),A):A(L)}}function zJ(t,e,n,r,i,o){const a=this;let s=0,u;return d;function d(O){return t.enter(r),t.enter(i),t.consume(O),t.exit(i),t.enter(o),m}function m(O){return s>999||O===null||O===91||O===93&&!u||O===94&&!s&&"_hiddenFootnoteSupport"in a.parser.constructs?n(O):O===93?(t.exit(o),t.enter(i),t.consume(O),t.exit(i),t.exit(r),e):Mn(O)?(t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),v(O))}function v(O){return O===null||O===91||O===93||Mn(O)||s++>999?(t.exit("chunkString"),m(O)):(t.consume(O),u||(u=!_r(O)),O===92?_:v)}function _(O){return O===91||O===92||O===93?(t.consume(O),s++,v):v(O)}}function NJ(t,e,n,r,i,o){let a;return s;function s(_){return _===34||_===39||_===40?(t.enter(r),t.enter(i),t.consume(_),t.exit(i),a=_===40?41:_,u):n(_)}function u(_){return _===a?(t.enter(i),t.consume(_),t.exit(i),t.exit(r),e):(t.enter(o),d(_))}function d(_){return _===a?(t.exit(o),u(a)):_===null?n(_):Mn(_)?(t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),Rr(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===a||_===null||Mn(_)?(t.exit("chunkString"),d(_)):(t.consume(_),_===92?v:m)}function v(_){return _===a||_===92?(t.consume(_),m):m(_)}}function Zg(t,e){let n;return r;function r(i){return Mn(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):_r(i)?Rr(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const cAe={name:"definition",tokenize:hAe},uAe={partial:!0,tokenize:dAe};function hAe(t,e,n){const r=this;let i;return o;function o(O){return t.enter("definition"),a(O)}function a(O){return zJ.call(r,t,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(O)}function s(O){return i=Sw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),O===58?(t.enter("definitionMarker"),t.consume(O),t.exit("definitionMarker"),u):n(O)}function u(O){return Ri(O)?Zg(t,d)(O):d(O)}function d(O){return $J(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(O)}function m(O){return t.attempt(uAe,v,v)(O)}function v(O){return _r(O)?Rr(t,_,"whitespace")(O):_(O)}function _(O){return O===null||Mn(O)?(t.exit("definition"),r.parser.defined.push(i),e(O)):n(O)}}function dAe(t,e,n){return r;function r(s){return Ri(s)?Zg(t,i)(s):n(s)}function i(s){return NJ(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function o(s){return _r(s)?Rr(t,a,"whitespace")(s):a(s)}function a(s){return s===null||Mn(s)?e(s):n(s)}}const fAe={name:"hardBreakEscape",tokenize:pAe};function pAe(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),i}function i(o){return Mn(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const mAe={name:"headingAtx",resolve:gAe,tokenize:yAe};function gAe(t,e){let n=t.length-2,r=3,i,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},jl(t,r,n-r+1,[["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e]])),t}function yAe(t,e,n){let r=0;return i;function i(m){return t.enter("atxHeading"),o(m)}function o(m){return t.enter("atxHeadingSequence"),a(m)}function a(m){return m===35&&r++<6?(t.consume(m),a):m===null||Ri(m)?(t.exit("atxHeadingSequence"),s(m)):n(m)}function s(m){return m===35?(t.enter("atxHeadingSequence"),u(m)):m===null||Mn(m)?(t.exit("atxHeading"),e(m)):_r(m)?Rr(t,s,"whitespace")(m):(t.enter("atxHeadingText"),d(m))}function u(m){return m===35?(t.consume(m),u):(t.exit("atxHeadingSequence"),s(m))}function d(m){return m===null||m===35||Ri(m)?(t.exit("atxHeadingText"),s(m)):(t.consume(m),d)}}const vAe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],MQ=["pre","script","style","textarea"],xAe={concrete:!0,name:"htmlFlow",resolveTo:wAe,tokenize:OAe},_Ae={partial:!0,tokenize:CAe},bAe={partial:!0,tokenize:SAe};function wAe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function OAe(t,e,n){const r=this;let i,o,a,s,u;return d;function d(ke){return m(ke)}function m(ke){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(ke),v}function v(ke){return ke===33?(t.consume(ke),_):ke===47?(t.consume(ke),o=!0,A):ke===63?(t.consume(ke),i=3,r.interrupt?e:Ce):ed(ke)?(t.consume(ke),a=String.fromCharCode(ke),M):n(ke)}function _(ke){return ke===45?(t.consume(ke),i=2,O):ke===91?(t.consume(ke),i=5,s=0,E):ed(ke)?(t.consume(ke),i=4,r.interrupt?e:Ce):n(ke)}function O(ke){return ke===45?(t.consume(ke),r.interrupt?e:Ce):n(ke)}function E(ke){const ft="CDATA[";return ke===ft.charCodeAt(s++)?(t.consume(ke),s===ft.length?r.interrupt?e:re:E):n(ke)}function A(ke){return ed(ke)?(t.consume(ke),a=String.fromCharCode(ke),M):n(ke)}function M(ke){if(ke===null||ke===47||ke===62||Ri(ke)){const ft=ke===47,pt=a.toLowerCase();return!ft&&!o&&MQ.includes(pt)?(i=1,r.interrupt?e(ke):re(ke)):vAe.includes(a.toLowerCase())?(i=6,ft?(t.consume(ke),L):r.interrupt?e(ke):re(ke)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(ke):o?$(ke):N(ke))}return ke===45||xc(ke)?(t.consume(ke),a+=String.fromCharCode(ke),M):n(ke)}function L(ke){return ke===62?(t.consume(ke),r.interrupt?e:re):n(ke)}function $(ke){return _r(ke)?(t.consume(ke),$):ce(ke)}function N(ke){return ke===47?(t.consume(ke),ce):ke===58||ke===95||ed(ke)?(t.consume(ke),F):_r(ke)?(t.consume(ke),N):ce(ke)}function F(ke){return ke===45||ke===46||ke===58||ke===95||xc(ke)?(t.consume(ke),F):Q(ke)}function Q(ke){return ke===61?(t.consume(ke),W):_r(ke)?(t.consume(ke),Q):N(ke)}function W(ke){return ke===null||ke===60||ke===61||ke===62||ke===96?n(ke):ke===34||ke===39?(t.consume(ke),u=ke,H):_r(ke)?(t.consume(ke),W):te(ke)}function H(ke){return ke===u?(t.consume(ke),u=null,ne):ke===null||Mn(ke)?n(ke):(t.consume(ke),H)}function te(ke){return ke===null||ke===34||ke===39||ke===47||ke===60||ke===61||ke===62||ke===96||Ri(ke)?Q(ke):(t.consume(ke),te)}function ne(ke){return ke===47||ke===62||_r(ke)?N(ke):n(ke)}function ce(ke){return ke===62?(t.consume(ke),we):n(ke)}function we(ke){return ke===null||Mn(ke)?re(ke):_r(ke)?(t.consume(ke),we):n(ke)}function re(ke){return ke===45&&i===2?(t.consume(ke),ve):ke===60&&i===1?(t.consume(ke),Me):ke===62&&i===4?(t.consume(ke),Ae):ke===63&&i===3?(t.consume(ke),Ce):ke===93&&i===5?(t.consume(ke),Qe):Mn(ke)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(_Ae,Xe,se)(ke)):ke===null||Mn(ke)?(t.exit("htmlFlowData"),se(ke)):(t.consume(ke),re)}function se(ke){return t.check(bAe,be,Xe)(ke)}function be(ke){return t.enter("lineEnding"),t.consume(ke),t.exit("lineEnding"),fe}function fe(ke){return ke===null||Mn(ke)?se(ke):(t.enter("htmlFlowData"),re(ke))}function ve(ke){return ke===45?(t.consume(ke),Ce):re(ke)}function Me(ke){return ke===47?(t.consume(ke),a="",Ne):re(ke)}function Ne(ke){if(ke===62){const ft=a.toLowerCase();return MQ.includes(ft)?(t.consume(ke),Ae):re(ke)}return ed(ke)&&a.length<8?(t.consume(ke),a+=String.fromCharCode(ke),Ne):re(ke)}function Qe(ke){return ke===93?(t.consume(ke),Ce):re(ke)}function Ce(ke){return ke===62?(t.consume(ke),Ae):ke===45&&i===2?(t.consume(ke),Ce):re(ke)}function Ae(ke){return ke===null||Mn(ke)?(t.exit("htmlFlowData"),Xe(ke)):(t.consume(ke),Ae)}function Xe(ke){return t.exit("htmlFlow"),e(ke)}}function SAe(t,e,n){const r=this;return i;function i(a){return Mn(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o):n(a)}function o(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}function CAe(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(WR,e,n)}}const TAe={name:"htmlText",tokenize:kAe};function kAe(t,e,n){const r=this;let i,o,a;return s;function s(Ce){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(Ce),u}function u(Ce){return Ce===33?(t.consume(Ce),d):Ce===47?(t.consume(Ce),Q):Ce===63?(t.consume(Ce),N):ed(Ce)?(t.consume(Ce),te):n(Ce)}function d(Ce){return Ce===45?(t.consume(Ce),m):Ce===91?(t.consume(Ce),o=0,E):ed(Ce)?(t.consume(Ce),$):n(Ce)}function m(Ce){return Ce===45?(t.consume(Ce),O):n(Ce)}function v(Ce){return Ce===null?n(Ce):Ce===45?(t.consume(Ce),_):Mn(Ce)?(a=v,Me(Ce)):(t.consume(Ce),v)}function _(Ce){return Ce===45?(t.consume(Ce),O):v(Ce)}function O(Ce){return Ce===62?ve(Ce):Ce===45?_(Ce):v(Ce)}function E(Ce){const Ae="CDATA[";return Ce===Ae.charCodeAt(o++)?(t.consume(Ce),o===Ae.length?A:E):n(Ce)}function A(Ce){return Ce===null?n(Ce):Ce===93?(t.consume(Ce),M):Mn(Ce)?(a=A,Me(Ce)):(t.consume(Ce),A)}function M(Ce){return Ce===93?(t.consume(Ce),L):A(Ce)}function L(Ce){return Ce===62?ve(Ce):Ce===93?(t.consume(Ce),L):A(Ce)}function $(Ce){return Ce===null||Ce===62?ve(Ce):Mn(Ce)?(a=$,Me(Ce)):(t.consume(Ce),$)}function N(Ce){return Ce===null?n(Ce):Ce===63?(t.consume(Ce),F):Mn(Ce)?(a=N,Me(Ce)):(t.consume(Ce),N)}function F(Ce){return Ce===62?ve(Ce):N(Ce)}function Q(Ce){return ed(Ce)?(t.consume(Ce),W):n(Ce)}function W(Ce){return Ce===45||xc(Ce)?(t.consume(Ce),W):H(Ce)}function H(Ce){return Mn(Ce)?(a=H,Me(Ce)):_r(Ce)?(t.consume(Ce),H):ve(Ce)}function te(Ce){return Ce===45||xc(Ce)?(t.consume(Ce),te):Ce===47||Ce===62||Ri(Ce)?ne(Ce):n(Ce)}function ne(Ce){return Ce===47?(t.consume(Ce),ve):Ce===58||Ce===95||ed(Ce)?(t.consume(Ce),ce):Mn(Ce)?(a=ne,Me(Ce)):_r(Ce)?(t.consume(Ce),ne):ve(Ce)}function ce(Ce){return Ce===45||Ce===46||Ce===58||Ce===95||xc(Ce)?(t.consume(Ce),ce):we(Ce)}function we(Ce){return Ce===61?(t.consume(Ce),re):Mn(Ce)?(a=we,Me(Ce)):_r(Ce)?(t.consume(Ce),we):ne(Ce)}function re(Ce){return Ce===null||Ce===60||Ce===61||Ce===62||Ce===96?n(Ce):Ce===34||Ce===39?(t.consume(Ce),i=Ce,se):Mn(Ce)?(a=re,Me(Ce)):_r(Ce)?(t.consume(Ce),re):(t.consume(Ce),be)}function se(Ce){return Ce===i?(t.consume(Ce),i=void 0,fe):Ce===null?n(Ce):Mn(Ce)?(a=se,Me(Ce)):(t.consume(Ce),se)}function be(Ce){return Ce===null||Ce===34||Ce===39||Ce===60||Ce===61||Ce===96?n(Ce):Ce===47||Ce===62||Ri(Ce)?ne(Ce):(t.consume(Ce),be)}function fe(Ce){return Ce===47||Ce===62||Ri(Ce)?ne(Ce):n(Ce)}function ve(Ce){return Ce===62?(t.consume(Ce),t.exit("htmlTextData"),t.exit("htmlText"),e):n(Ce)}function Me(Ce){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(Ce),t.exit("lineEnding"),Ne}function Ne(Ce){return _r(Ce)?Rr(t,Qe,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Ce):Qe(Ce)}function Qe(Ce){return t.enter("htmlTextData"),a(Ce)}}const $B={name:"labelEnd",resolveAll:MAe,resolveTo:RAe,tokenize:IAe},EAe={tokenize:DAe},AAe={tokenize:LAe},PAe={tokenize:$Ae};function MAe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&jl(t,0,t.length,n),t}function RAe(t,e){let n=t.length,r=0,i,o,a,s;for(;n--;)if(i=t[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const u={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[o][1].start},end:{...t[a][1].end}},m={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[a-2][1].start}};return s=[["enter",u,e],["enter",d,e]],s=Kh(s,t.slice(o+1,o+r+3)),s=Kh(s,[["enter",m,e]]),s=Kh(s,Ek(e.parser.constructs.insideSpan.null,t.slice(o+r+4,a-3),e)),s=Kh(s,[["exit",m,e],t[a-2],t[a-1],["exit",d,e]]),s=Kh(s,t.slice(a+1)),s=Kh(s,[["exit",u,e]]),jl(t,o,t.length,s),t}function IAe(t,e,n){const r=this;let i=r.events.length,o,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return s;function s(_){return o?o._inactive?v(_):(a=r.parser.defined.includes(Sw(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(_),t.exit("labelMarker"),t.exit("labelEnd"),u):n(_)}function u(_){return _===40?t.attempt(EAe,m,a?m:v)(_):_===91?t.attempt(AAe,m,a?d:v)(_):a?m(_):v(_)}function d(_){return t.attempt(PAe,m,v)(_)}function m(_){return e(_)}function v(_){return o._balanced=!0,n(_)}}function DAe(t,e,n){return r;function r(v){return t.enter("resource"),t.enter("resourceMarker"),t.consume(v),t.exit("resourceMarker"),i}function i(v){return Ri(v)?Zg(t,o)(v):o(v)}function o(v){return v===41?m(v):$J(t,a,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(v)}function a(v){return Ri(v)?Zg(t,u)(v):m(v)}function s(v){return n(v)}function u(v){return v===34||v===39||v===40?NJ(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(v):m(v)}function d(v){return Ri(v)?Zg(t,m)(v):m(v)}function m(v){return v===41?(t.enter("resourceMarker"),t.consume(v),t.exit("resourceMarker"),t.exit("resource"),e):n(v)}}function LAe(t,e,n){const r=this;return i;function i(s){return zJ.call(r,t,o,a,"reference","referenceMarker","referenceString")(s)}function o(s){return r.parser.defined.includes(Sw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(s):n(s)}function a(s){return n(s)}}function $Ae(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),i}function i(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const zAe={name:"labelStartImage",resolveAll:$B.resolveAll,tokenize:NAe};function NAe(t,e,n){const r=this;return i;function i(s){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(s),t.exit("labelImageMarker"),o}function o(s){return s===91?(t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelImage"),a):n(s)}function a(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):e(s)}}const BAe={name:"labelStartLink",resolveAll:$B.resolveAll,tokenize:FAe};function FAe(t,e,n){const r=this;return i;function i(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),o}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const A3={name:"lineEnding",tokenize:jAe};function jAe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Rr(t,e,"linePrefix")}}const GP={name:"thematicBreak",tokenize:VAe};function VAe(t,e,n){let r=0,i;return o;function o(d){return t.enter("thematicBreak"),a(d)}function a(d){return i=d,s(d)}function s(d){return d===i?(t.enter("thematicBreakSequence"),u(d)):r>=3&&(d===null||Mn(d))?(t.exit("thematicBreak"),e(d)):n(d)}function u(d){return d===i?(t.consume(d),r++,u):(t.exit("thematicBreakSequence"),_r(d)?Rr(t,s,"whitespace")(d):s(d))}}const eu={continuation:{tokenize:qAe},exit:HAe,name:"list",tokenize:ZAe},QAe={partial:!0,tokenize:GAe},UAe={partial:!0,tokenize:WAe};function ZAe(t,e,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return s;function s(O){const E=r.containerState.type||(O===42||O===43||O===45?"listUnordered":"listOrdered");if(E==="listUnordered"?!r.containerState.marker||O===r.containerState.marker:L4(O)){if(r.containerState.type||(r.containerState.type=E,t.enter(E,{_container:!0})),E==="listUnordered")return t.enter("listItemPrefix"),O===42||O===45?t.check(GP,n,d)(O):d(O);if(!r.interrupt||O===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(O)}return n(O)}function u(O){return L4(O)&&++a<10?(t.consume(O),u):(!r.interrupt||a<2)&&(r.containerState.marker?O===r.containerState.marker:O===41||O===46)?(t.exit("listItemValue"),d(O)):n(O)}function d(O){return t.enter("listItemMarker"),t.consume(O),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||O,t.check(WR,r.interrupt?n:m,t.attempt(QAe,_,v))}function m(O){return r.containerState.initialBlankLine=!0,o++,_(O)}function v(O){return _r(O)?(t.enter("listItemPrefixWhitespace"),t.consume(O),t.exit("listItemPrefixWhitespace"),_):n(O)}function _(O){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(O)}}function qAe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(WR,i,o);function i(s){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Rr(t,e,"listItemIndent",r.containerState.size+1)(s)}function o(s){return r.containerState.furtherBlankLines||!_r(s)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(s)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(UAe,e,a)(s))}function a(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,Rr(t,t.attempt(eu,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function WAe(t,e,n){const r=this;return Rr(t,i,"listItemIndent",r.containerState.size+1);function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(o):n(o)}}function HAe(t){t.exit(this.containerState.type)}function GAe(t,e,n){const r=this;return Rr(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const a=r.events[r.events.length-1];return!_r(o)&&a&&a[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const RQ={name:"setextUnderline",resolveTo:XAe,tokenize:YAe};function XAe(t,e){let n=t.length,r,i,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",o?(t.splice(i,0,["enter",a,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end={...t[o][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}function YAe(t,e,n){const r=this;let i;return o;function o(d){let m=r.events.length,v;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){v=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||v)?(t.enter("setextHeadingLine"),i=d,a(d)):n(d)}function a(d){return t.enter("setextHeadingLineSequence"),s(d)}function s(d){return d===i?(t.consume(d),s):(t.exit("setextHeadingLineSequence"),_r(d)?Rr(t,u,"lineSuffix")(d):u(d))}function u(d){return d===null||Mn(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const KAe={tokenize:JAe};function JAe(t){const e=this,n=t.attempt(WR,r,t.attempt(this.parser.constructs.flowInitial,i,Rr(t,t.attempt(this.parser.constructs.flow,i,t.attempt(iAe,i)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const ePe={resolveAll:FJ()},tPe=BJ("string"),nPe=BJ("text");function BJ(t){return{resolveAll:FJ(t==="text"?rPe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],o=n.attempt(i,a,s);return a;function a(m){return d(m)?o(m):s(m)}function s(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),u}function u(m){return d(m)?(n.exit("data"),o(m)):(n.consume(m),u)}function d(m){if(m===null)return!0;const v=i[m];let _=-1;if(v)for(;++_<v.length;){const O=v[_];if(!O.previous||O.previous.call(r,r.previous))return!0}return!1}}}function FJ(t){return e;function e(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return t?t(n,r):n}}function rPe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let o=i.length,a=-1,s=0,u;for(;o--;){const d=i[o];if(typeof d=="string"){for(a=d.length;d.charCodeAt(a-1)===32;)s++,a--;if(a)break;a=-1}else if(d===-2)u=!0,s++;else if(d!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(s=0),s){const d={type:n===t.length||u||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?a:r.start._bufferIndex+a,_index:r.start._index+o,line:r.end.line,column:r.end.column-s,offset:r.end.offset-s},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const iPe={42:eu,43:eu,45:eu,48:eu,49:eu,50:eu,51:eu,52:eu,53:eu,54:eu,55:eu,56:eu,57:eu,62:RJ},oPe={91:cAe},sPe={[-2]:E3,[-1]:E3,32:E3},aPe={35:mAe,42:GP,45:[RQ,GP],60:xAe,61:RQ,95:GP,96:PQ,126:PQ},lPe={38:DJ,92:IJ},cPe={[-5]:A3,[-4]:A3,[-3]:A3,33:zAe,38:DJ,42:$4,60:[BEe,TAe],91:BAe,92:[fAe,IJ],93:$B,95:$4,96:KEe},uPe={null:[$4,ePe]},hPe={null:[42,95]},dPe={null:[]},fPe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:hPe,contentInitial:oPe,disable:dPe,document:iPe,flow:aPe,flowInitial:sPe,insideSpan:uPe,string:lPe,text:cPe},Symbol.toStringTag,{value:"Module"}));function pPe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let a=[],s=[];const u={attempt:H(Q),check:H(W),consume:$,enter:N,exit:F,interrupt:H(W,{interrupt:!0})},d={code:null,containerState:{},defineSkip:A,events:[],now:E,parser:t,previous:null,sliceSerialize:_,sliceStream:O,write:v};let m=e.tokenize.call(d,u);return e.resolveAll&&o.push(e),d;function v(we){return a=Kh(a,we),M(),a[a.length-1]!==null?[]:(te(e,0),d.events=Ek(o,d.events,d),d.events)}function _(we,re){return gPe(O(we),re)}function O(we){return mPe(a,we)}function E(){const{_bufferIndex:we,_index:re,line:se,column:be,offset:fe}=r;return{_bufferIndex:we,_index:re,line:se,column:be,offset:fe}}function A(we){i[we.line]=we.column,ce()}function M(){let we;for(;r._index<a.length;){const re=a[r._index];if(typeof re=="string")for(we=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===we&&r._bufferIndex<re.length;)L(re.charCodeAt(r._bufferIndex));else L(re)}}function L(we){m=m(we)}function $(we){Mn(we)?(r.line++,r.column=1,r.offset+=we===-3?2:1,ce()):we!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=we}function N(we,re){const se=re||{};return se.type=we,se.start=E(),d.events.push(["enter",se,d]),s.push(se),se}function F(we){const re=s.pop();return re.end=E(),d.events.push(["exit",re,d]),re}function Q(we,re){te(we,re.from)}function W(we,re){re.restore()}function H(we,re){return se;function se(be,fe,ve){let Me,Ne,Qe,Ce;return Array.isArray(be)?Xe(be):"tokenize"in be?Xe([be]):Ae(be);function Ae(lt){return ot;function ot(yt){const Et=yt!==null&&lt[yt],Tt=yt!==null&&lt.null,Ht=[...Array.isArray(Et)?Et:Et?[Et]:[],...Array.isArray(Tt)?Tt:Tt?[Tt]:[]];return Xe(Ht)(yt)}}function Xe(lt){return Me=lt,Ne=0,lt.length===0?ve:ke(lt[Ne])}function ke(lt){return ot;function ot(yt){return Ce=ne(),Qe=lt,lt.partial||(d.currentConstruct=lt),lt.name&&d.parser.constructs.disable.null.includes(lt.name)?pt():lt.tokenize.call(re?Object.assign(Object.create(d),re):d,u,ft,pt)(yt)}}function ft(lt){return we(Qe,Ce),fe}function pt(lt){return Ce.restore(),++Ne<Me.length?ke(Me[Ne]):ve}}}function te(we,re){we.resolveAll&&!o.includes(we)&&o.push(we),we.resolve&&jl(d.events,re,d.events.length-re,we.resolve(d.events.slice(re),d)),we.resolveTo&&(d.events=we.resolveTo(d.events,d))}function ne(){const we=E(),re=d.previous,se=d.currentConstruct,be=d.events.length,fe=Array.from(s);return{from:be,restore:ve};function ve(){r=we,d.previous=re,d.currentConstruct=se,d.events.length=be,s=fe,ce()}}function ce(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function mPe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,o=e.end._bufferIndex;let a;if(n===i)a=[t[n].slice(r,o)];else{if(a=t.slice(n,i),r>-1){const s=a[0];typeof s=="string"?a[0]=s.slice(r):a.shift()}o>0&&a.push(t[i].slice(0,o))}return a}function gPe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const o=t[n];let a;if(typeof o=="string")a=o;else switch(o){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&i)continue;a=" ";break}default:a=String.fromCharCode(o)}i=o===-2,r.push(a)}return r.join("")}function yPe(t){const r={constructs:CEe([fPe,...(t||{}).extensions||[]]),content:i(REe),defined:[],document:i(DEe),flow:i(KAe),lazy:{},string:i(tPe),text:i(nPe)};return r;function i(o){return a;function a(s){return pPe(r,o,s)}}}function vPe(t){for(;!LJ(t););return t}const IQ=/[\0\t\n\r]/g;function xPe(){let t=1,e="",n=!0,r;return i;function i(o,a,s){const u=[];let d,m,v,_,O;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(a||void 0).decode(o)),v=0,e="",n&&(o.charCodeAt(0)===65279&&v++,n=void 0);v<o.length;){if(IQ.lastIndex=v,d=IQ.exec(o),_=d&&d.index!==void 0?d.index:o.length,O=o.charCodeAt(_),!d){e=o.slice(v);break}if(O===10&&v===_&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),v<_&&(u.push(o.slice(v,_)),t+=_-v),O){case 0:{u.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,u.push(-2);t++<m;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:r=!0,t=1}v=_+1}return s&&(r&&u.push(-5),e&&u.push(e),u.push(null)),u}}const _Pe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function jJ(t){return t.replace(_Pe,bPe)}function bPe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return MJ(n.slice(o?2:1),o?16:10)}return yT(n)||t}const VJ={}.hasOwnProperty;function QJ(t,e,n){return typeof e!="string"&&(n=e,e=void 0),wPe(n)(vPe(yPe(n).document().write(xPe()(t,e,!0))))}function wPe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(jn),autolinkProtocol:ne,autolinkEmail:ne,atxHeading:o(Jt),blockQuote:o(Tt),characterEscape:ne,characterReference:ne,codeFenced:o(Ht),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(Ht,a),codeText:o(wt,a),codeTextData:ne,data:ne,codeFlowValue:ne,definition:o(un),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(Gt),hardBreakEscape:o(Sn),hardBreakTrailing:o(Sn),htmlFlow:o(nn,a),htmlFlowData:ne,htmlText:o(nn,a),htmlTextData:ne,image:o(Cn),label:a,link:o(jn),listItem:o(je),listItemValue:_,listOrdered:o(Gn,v),listUnordered:o(Gn),paragraph:o(Ye),reference:ke,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(Jt),strong:o(vt),thematicBreak:o(jt)},exit:{atxHeading:u(),atxHeadingSequence:Q,autolink:u(),autolinkEmail:Et,autolinkProtocol:yt,blockQuote:u(),characterEscapeValue:ce,characterReferenceMarkerHexadecimal:pt,characterReferenceMarkerNumeric:pt,characterReferenceValue:lt,characterReference:ot,codeFenced:u(M),codeFencedFence:A,codeFencedFenceInfo:O,codeFencedFenceMeta:E,codeFlowValue:ce,codeIndented:u(L),codeText:u(fe),codeTextData:ce,data:ce,definition:u(),definitionDestinationString:F,definitionLabelString:$,definitionTitleString:N,emphasis:u(),hardBreakEscape:u(re),hardBreakTrailing:u(re),htmlFlow:u(se),htmlFlowData:ce,htmlText:u(be),htmlTextData:ce,image:u(Me),label:Qe,labelText:Ne,lineEnding:we,link:u(ve),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ft,resourceDestinationString:Ce,resourceTitleString:Ae,resource:Xe,setextHeading:u(te),setextHeadingLineSequence:H,setextHeadingText:W,strong:u(),thematicBreak:u()}};UJ(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Oe){let ae={type:"root",children:[]};const K={stack:[ae],tokenStack:[],config:e,enter:s,exit:d,buffer:a,resume:m,data:n},_e=[];let $e=-1;for(;++$e<Oe.length;)if(Oe[$e][1].type==="listOrdered"||Oe[$e][1].type==="listUnordered")if(Oe[$e][0]==="enter")_e.push($e);else{const ze=_e.pop();$e=i(Oe,ze,$e)}for($e=-1;++$e<Oe.length;){const ze=e[Oe[$e][0]];VJ.call(ze,Oe[$e][1].type)&&ze[Oe[$e][1].type].call(Object.assign({sliceSerialize:Oe[$e][2].sliceSerialize},K),Oe[$e][1])}if(K.tokenStack.length>0){const ze=K.tokenStack[K.tokenStack.length-1];(ze[1]||DQ).call(K,void 0,ze[0])}for(ae.position={start:O0(Oe.length>0?Oe[0][1].start:{line:1,column:1,offset:0}),end:O0(Oe.length>0?Oe[Oe.length-2][1].end:{line:1,column:1,offset:0})},$e=-1;++$e<e.transforms.length;)ae=e.transforms[$e](ae)||ae;return ae}function i(Oe,ae,K){let _e=ae-1,$e=-1,ze=!1,nt,tt,Ke,at;for(;++_e<=K;){const St=Oe[_e];switch(St[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{St[0]==="enter"?$e++:$e--,at=void 0;break}case"lineEndingBlank":{St[0]==="enter"&&(nt&&!at&&!$e&&!Ke&&(Ke=_e),at=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:at=void 0}if(!$e&&St[0]==="enter"&&St[1].type==="listItemPrefix"||$e===-1&&St[0]==="exit"&&(St[1].type==="listUnordered"||St[1].type==="listOrdered")){if(nt){let st=_e;for(tt=void 0;st--;){const $t=Oe[st];if($t[1].type==="lineEnding"||$t[1].type==="lineEndingBlank"){if($t[0]==="exit")continue;tt&&(Oe[tt][1].type="lineEndingBlank",ze=!0),$t[1].type="lineEnding",tt=st}else if(!($t[1].type==="linePrefix"||$t[1].type==="blockQuotePrefix"||$t[1].type==="blockQuotePrefixWhitespace"||$t[1].type==="blockQuoteMarker"||$t[1].type==="listItemIndent"))break}Ke&&(!tt||Ke<tt)&&(nt._spread=!0),nt.end=Object.assign({},tt?Oe[tt][1].start:St[1].end),Oe.splice(tt||_e,0,["exit",nt,St[2]]),_e++,K++}if(St[1].type==="listItemPrefix"){const st={type:"listItem",_spread:!1,start:Object.assign({},St[1].start),end:void 0};nt=st,Oe.splice(_e,0,["enter",st,St[2]]),_e++,K++,Ke=void 0,at=!0}}}return Oe[ae][1]._spread=ze,K}function o(Oe,ae){return K;function K(_e){s.call(this,Oe(_e),_e),ae&&ae.call(this,_e)}}function a(){this.stack.push({type:"fragment",children:[]})}function s(Oe,ae,K){this.stack[this.stack.length-1].children.push(Oe),this.stack.push(Oe),this.tokenStack.push([ae,K||void 0]),Oe.position={start:O0(ae.start),end:void 0}}function u(Oe){return ae;function ae(K){Oe&&Oe.call(this,K),d.call(this,K)}}function d(Oe,ae){const K=this.stack.pop(),_e=this.tokenStack.pop();if(_e)_e[0].type!==Oe.type&&(ae?ae.call(this,Oe,_e[0]):(_e[1]||DQ).call(this,Oe,_e[0]));else throw new Error("Cannot close `"+Oe.type+"` ("+Ug({start:Oe.start,end:Oe.end})+"): its not open");K.position.end=O0(Oe.end)}function m(){return LB(this.stack.pop())}function v(){this.data.expectingFirstListItemValue=!0}function _(Oe){if(this.data.expectingFirstListItemValue){const ae=this.stack[this.stack.length-2];ae.start=Number.parseInt(this.sliceSerialize(Oe),10),this.data.expectingFirstListItemValue=void 0}}function O(){const Oe=this.resume(),ae=this.stack[this.stack.length-1];ae.lang=Oe}function E(){const Oe=this.resume(),ae=this.stack[this.stack.length-1];ae.meta=Oe}function A(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function M(){const Oe=this.resume(),ae=this.stack[this.stack.length-1];ae.value=Oe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function L(){const Oe=this.resume(),ae=this.stack[this.stack.length-1];ae.value=Oe.replace(/(\r?\n|\r)$/g,"")}function $(Oe){const ae=this.resume(),K=this.stack[this.stack.length-1];K.label=ae,K.identifier=Sw(this.sliceSerialize(Oe)).toLowerCase()}function N(){const Oe=this.resume(),ae=this.stack[this.stack.length-1];ae.title=Oe}function F(){const Oe=this.resume(),ae=this.stack[this.stack.length-1];ae.url=Oe}function Q(Oe){const ae=this.stack[this.stack.length-1];if(!ae.depth){const K=this.sliceSerialize(Oe).length;ae.depth=K}}function W(){this.data.setextHeadingSlurpLineEnding=!0}function H(Oe){const ae=this.stack[this.stack.length-1];ae.depth=this.sliceSerialize(Oe).codePointAt(0)===61?1:2}function te(){this.data.setextHeadingSlurpLineEnding=void 0}function ne(Oe){const K=this.stack[this.stack.length-1].children;let _e=K[K.length-1];(!_e||_e.type!=="text")&&(_e=kt(),_e.position={start:O0(Oe.start),end:void 0},K.push(_e)),this.stack.push(_e)}function ce(Oe){const ae=this.stack.pop();ae.value+=this.sliceSerialize(Oe),ae.position.end=O0(Oe.end)}function we(Oe){const ae=this.stack[this.stack.length-1];if(this.data.atHardBreak){const K=ae.children[ae.children.length-1];K.position.end=O0(Oe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ae.type)&&(ne.call(this,Oe),ce.call(this,Oe))}function re(){this.data.atHardBreak=!0}function se(){const Oe=this.resume(),ae=this.stack[this.stack.length-1];ae.value=Oe}function be(){const Oe=this.resume(),ae=this.stack[this.stack.length-1];ae.value=Oe}function fe(){const Oe=this.resume(),ae=this.stack[this.stack.length-1];ae.value=Oe}function ve(){const Oe=this.stack[this.stack.length-1];if(this.data.inReference){const ae=this.data.referenceType||"shortcut";Oe.type+="Reference",Oe.referenceType=ae,delete Oe.url,delete Oe.title}else delete Oe.identifier,delete Oe.label;this.data.referenceType=void 0}function Me(){const Oe=this.stack[this.stack.length-1];if(this.data.inReference){const ae=this.data.referenceType||"shortcut";Oe.type+="Reference",Oe.referenceType=ae,delete Oe.url,delete Oe.title}else delete Oe.identifier,delete Oe.label;this.data.referenceType=void 0}function Ne(Oe){const ae=this.sliceSerialize(Oe),K=this.stack[this.stack.length-2];K.label=jJ(ae),K.identifier=Sw(ae).toLowerCase()}function Qe(){const Oe=this.stack[this.stack.length-1],ae=this.resume(),K=this.stack[this.stack.length-1];if(this.data.inReference=!0,K.type==="link"){const _e=Oe.children;K.children=_e}else K.alt=ae}function Ce(){const Oe=this.resume(),ae=this.stack[this.stack.length-1];ae.url=Oe}function Ae(){const Oe=this.resume(),ae=this.stack[this.stack.length-1];ae.title=Oe}function Xe(){this.data.inReference=void 0}function ke(){this.data.referenceType="collapsed"}function ft(Oe){const ae=this.resume(),K=this.stack[this.stack.length-1];K.label=ae,K.identifier=Sw(this.sliceSerialize(Oe)).toLowerCase(),this.data.referenceType="full"}function pt(Oe){this.data.characterReferenceType=Oe.type}function lt(Oe){const ae=this.sliceSerialize(Oe),K=this.data.characterReferenceType;let _e;K?(_e=MJ(ae,K==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):_e=yT(ae);const $e=this.stack[this.stack.length-1];$e.value+=_e}function ot(Oe){const ae=this.stack.pop();ae.position.end=O0(Oe.end)}function yt(Oe){ce.call(this,Oe);const ae=this.stack[this.stack.length-1];ae.url=this.sliceSerialize(Oe)}function Et(Oe){ce.call(this,Oe);const ae=this.stack[this.stack.length-1];ae.url="mailto:"+this.sliceSerialize(Oe)}function Tt(){return{type:"blockquote",children:[]}}function Ht(){return{type:"code",lang:null,meta:null,value:""}}function wt(){return{type:"inlineCode",value:""}}function un(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Gt(){return{type:"emphasis",children:[]}}function Jt(){return{type:"heading",depth:0,children:[]}}function Sn(){return{type:"break"}}function nn(){return{type:"html",value:""}}function Cn(){return{type:"image",title:null,url:"",alt:null}}function jn(){return{type:"link",title:null,url:"",children:[]}}function Gn(Oe){return{type:"list",ordered:Oe.type==="listOrdered",start:null,spread:Oe._spread,children:[]}}function je(Oe){return{type:"listItem",spread:Oe._spread,checked:null,children:[]}}function Ye(){return{type:"paragraph",children:[]}}function vt(){return{type:"strong",children:[]}}function kt(){return{type:"text",value:""}}function jt(){return{type:"thematicBreak"}}}function O0(t){return{line:t.line,column:t.column,offset:t.offset}}function UJ(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?UJ(t,r):OPe(t,r)}}function OPe(t,e){let n;for(n in e)if(VJ.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function DQ(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Ug({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Ug({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Ug({start:e.start,end:e.end})+") is still open")}function SPe(t){const e=this;e.parser=n;function n(r){return QJ(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function CPe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function TPe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function kPe(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}function EPe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function APe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function PPe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=HO(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let a,s=t.footnoteCounts.get(r);s===void 0?(s=0,t.footnoteOrder.push(r),a=t.footnoteOrder.length):a=o+1,s+=1,t.footnoteCounts.set(r,s);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,u);const d={type:"element",tagName:"sup",properties:{},children:[u]};return t.patch(e,d),t.applyData(e,d)}function MPe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function RPe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function ZJ(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function IPe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return ZJ(t,e);const i={src:HO(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,o),t.applyData(e,o)}function DPe(t,e){const n={src:HO(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function LPe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function $Pe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return ZJ(t,e);const i={href:HO(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function zPe(t,e){const n={href:HO(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function NPe(t,e,n){const r=t.all(e),i=n?BPe(n):qJ(e),o={},a=[];if(typeof e.checked=="boolean"){const m=r[0];let v;m&&m.type==="element"&&m.tagName==="p"?v=m:(v={type:"element",tagName:"p",properties:{},children:[]},r.unshift(v)),v.children.length>0&&v.children.unshift({type:"text",value:" "}),v.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const m=r[s];(i||s!==0||m.type!=="element"||m.tagName!=="p")&&a.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!i?a.push(...m.children):a.push(m)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:o,children:a};return t.patch(e,d),t.applyData(e,d)}function BPe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=qJ(n[r])}return e}function qJ(t){const e=t.spread;return e??t.children.length>1}function FPe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,o),t.applyData(e,o)}function jPe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function VPe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function QPe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function UPe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},s=MB(e.children[1]),u=SJ(e.children[e.children.length-1]);s&&u&&(a.position={start:s,end:u}),i.push(a)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,o),t.applyData(e,o)}function ZPe(t,e,n){const r=n?n.children:void 0,o=(r?r.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,s=a?a.length:e.children.length;let u=-1;const d=[];for(;++u<s;){const v=e.children[u],_={},O=a?a[u]:void 0;O&&(_.align=O);let E={type:"element",tagName:o,properties:_,children:[]};v&&(E.children=t.all(v),t.patch(v,E),E=t.applyData(v,E)),d.push(E)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,m),t.applyData(e,m)}function qPe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const LQ=9,$Q=32;function WPe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const o=[];for(;r;)o.push(zQ(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return o.push(zQ(e.slice(i),i>0,!1)),o.join("")}function zQ(t,e,n){let r=0,i=t.length;if(e){let o=t.codePointAt(r);for(;o===LQ||o===$Q;)r++,o=t.codePointAt(r)}if(n){let o=t.codePointAt(i-1);for(;o===LQ||o===$Q;)i--,o=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function HPe(t,e){const n={type:"text",value:WPe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function GPe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const XPe={blockquote:CPe,break:TPe,code:kPe,delete:EPe,emphasis:APe,footnoteReference:PPe,heading:MPe,html:RPe,imageReference:IPe,image:DPe,inlineCode:LPe,linkReference:$Pe,link:zPe,listItem:NPe,list:FPe,paragraph:jPe,root:VPe,strong:QPe,table:UPe,tableCell:qPe,tableRow:ZPe,text:HPe,thematicBreak:GPe,toml:DA,yaml:DA,definition:DA,footnoteDefinition:DA};function DA(){}const WJ=-1,HR=0,DC=1,j5=2,zB=3,NB=4,BB=5,FB=6,HJ=7,GJ=8,NQ=typeof self=="object"?self:globalThis,YPe=(t,e)=>{const n=(i,o)=>(t.set(o,i),i),r=i=>{if(t.has(i))return t.get(i);const[o,a]=e[i];switch(o){case HR:case WJ:return n(a,i);case DC:{const s=n([],i);for(const u of a)s.push(r(u));return s}case j5:{const s=n({},i);for(const[u,d]of a)s[r(u)]=r(d);return s}case zB:return n(new Date(a),i);case NB:{const{source:s,flags:u}=a;return n(new RegExp(s,u),i)}case BB:{const s=n(new Map,i);for(const[u,d]of a)s.set(r(u),r(d));return s}case FB:{const s=n(new Set,i);for(const u of a)s.add(r(u));return s}case HJ:{const{name:s,message:u}=a;return n(new NQ[s](u),i)}case GJ:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:s}=new Uint8Array(a);return n(new DataView(s),a)}}return n(new NQ[o](a),i)};return r},BQ=t=>YPe(new Map,t)(0),N1="",{toString:KPe}={},{keys:JPe}=Object,U2=t=>{const e=typeof t;if(e!=="object"||!t)return[HR,e];const n=KPe.call(t).slice(8,-1);switch(n){case"Array":return[DC,N1];case"Object":return[j5,N1];case"Date":return[zB,N1];case"RegExp":return[NB,N1];case"Map":return[BB,N1];case"Set":return[FB,N1];case"DataView":return[DC,n]}return n.includes("Array")?[DC,n]:n.includes("Error")?[HJ,n]:[j5,n]},LA=([t,e])=>t===HR&&(e==="function"||e==="symbol"),e5e=(t,e,n,r)=>{const i=(a,s)=>{const u=r.push(a)-1;return n.set(s,u),u},o=a=>{if(n.has(a))return n.get(a);let[s,u]=U2(a);switch(s){case HR:{let m=a;switch(u){case"bigint":s=GJ,m=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+u);m=null;break;case"undefined":return i([WJ],a)}return i([s,m],a)}case DC:{if(u){let _=a;return u==="DataView"?_=new Uint8Array(a.buffer):u==="ArrayBuffer"&&(_=new Uint8Array(a)),i([u,[..._]],a)}const m=[],v=i([s,m],a);for(const _ of a)m.push(o(_));return v}case j5:{if(u)switch(u){case"BigInt":return i([u,a.toString()],a);case"Boolean":case"Number":case"String":return i([u,a.valueOf()],a)}if(e&&"toJSON"in a)return o(a.toJSON());const m=[],v=i([s,m],a);for(const _ of JPe(a))(t||!LA(U2(a[_])))&&m.push([o(_),o(a[_])]);return v}case zB:return i([s,a.toISOString()],a);case NB:{const{source:m,flags:v}=a;return i([s,{source:m,flags:v}],a)}case BB:{const m=[],v=i([s,m],a);for(const[_,O]of a)(t||!(LA(U2(_))||LA(U2(O))))&&m.push([o(_),o(O)]);return v}case FB:{const m=[],v=i([s,m],a);for(const _ of a)(t||!LA(U2(_)))&&m.push(o(_));return v}}const{message:d}=a;return i([s,{name:u,message:d}],a)};return o},FQ=(t,{json:e,lossy:n}={})=>{const r=[];return e5e(!(e||n),!!e,new Map,r)(t),r},V5=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?BQ(FQ(t,e)):structuredClone(t):(t,e)=>BQ(FQ(t,e));function t5e(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function n5e(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function r5e(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||t5e,r=t.options.footnoteBackLabel||n5e,i=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let u=-1;for(;++u<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[u]);if(!d)continue;const m=t.all(d),v=String(d.identifier).toUpperCase(),_=HO(v.toLowerCase());let O=0;const E=[],A=t.footnoteCounts.get(v);for(;A!==void 0&&++O<=A;){E.length>0&&E.push({type:"text",value:" "});let $=typeof n=="string"?n:n(u,O);typeof $=="string"&&($={type:"text",value:$}),E.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+_+(O>1?"-"+O:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,O),className:["data-footnote-backref"]},children:Array.isArray($)?$:[$]})}const M=m[m.length-1];if(M&&M.type==="element"&&M.tagName==="p"){const $=M.children[M.children.length-1];$&&$.type==="text"?$.value+=" ":M.children.push({type:"text",value:" "}),M.children.push(...E)}else m.push(...E);const L={type:"element",tagName:"li",properties:{id:e+"fn-"+_},children:t.wrap(m,!0)};t.patch(d,L),s.push(L)}if(s.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...V5(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(s,!0)},{type:"text",value:`
`}]}}const jB=(function(t){if(t==null)return a5e;if(typeof t=="function")return GR(t);if(typeof t=="object")return Array.isArray(t)?i5e(t):o5e(t);if(typeof t=="string")return s5e(t);throw new Error("Expected function, string, or object as test")});function i5e(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=jB(t[n]);return GR(r);function r(...i){let o=-1;for(;++o<e.length;)if(e[o].apply(this,i))return!0;return!1}}function o5e(t){const e=t;return GR(n);function n(r){const i=r;let o;for(o in t)if(i[o]!==e[o])return!1;return!0}}function s5e(t){return GR(e);function e(n){return n&&n.type===t}}function GR(t){return e;function e(n,r,i){return!!(l5e(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function a5e(){return!0}function l5e(t){return t!==null&&typeof t=="object"&&"type"in t}const XJ=[],c5e=!0,z4=!1,u5e="skip";function YJ(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const o=jB(i),a=r?-1:1;s(t,void 0,[])();function s(u,d,m){const v=u&&typeof u=="object"?u:{};if(typeof v.type=="string"){const O=typeof v.tagName=="string"?v.tagName:typeof v.name=="string"?v.name:void 0;Object.defineProperty(_,"name",{value:"node ("+(u.type+(O?"<"+O+">":""))+")"})}return _;function _(){let O=XJ,E,A,M;if((!e||o(u,d,m[m.length-1]||void 0))&&(O=h5e(n(u,m)),O[0]===z4))return O;if("children"in u&&u.children){const L=u;if(L.children&&O[0]!==u5e)for(A=(r?L.children.length:-1)+a,M=m.concat(L);A>-1&&A<L.children.length;){const $=L.children[A];if(E=s($,A,M)(),E[0]===z4)return E;A=typeof E[1]=="number"?E[1]:A+a}}return O}}}function h5e(t){return Array.isArray(t)?t:typeof t=="number"?[c5e,t]:t==null?XJ:[t]}function VB(t,e,n,r){let i,o,a;typeof e=="function"&&typeof n!="function"?(o=void 0,a=e,i=n):(o=e,a=n,i=r),YJ(t,o,s,i);function s(u,d){const m=d[d.length-1],v=m?m.children.indexOf(u):void 0;return a(u,v,m)}}const N4={}.hasOwnProperty,d5e={};function f5e(t,e){const n=e||d5e,r=new Map,i=new Map,o=new Map,a={...XPe,...n.handlers},s={all:d,applyData:m5e,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:a,one:u,options:n,patch:p5e,wrap:y5e};return VB(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const v=m.type==="definition"?r:i,_=String(m.identifier).toUpperCase();v.has(_)||v.set(_,m)}}),s;function u(m,v){const _=m.type,O=s.handlers[_];if(N4.call(s.handlers,_)&&O)return O(s,m,v);if(s.options.passThrough&&s.options.passThrough.includes(_)){if("children"in m){const{children:A,...M}=m,L=V5(M);return L.children=s.all(m),L}return V5(m)}return(s.options.unknownHandler||g5e)(s,m,v)}function d(m){const v=[];if("children"in m){const _=m.children;let O=-1;for(;++O<_.length;){const E=s.one(_[O],m);if(E){if(O&&_[O-1].type==="break"&&(!Array.isArray(E)&&E.type==="text"&&(E.value=jQ(E.value)),!Array.isArray(E)&&E.type==="element")){const A=E.children[0];A&&A.type==="text"&&(A.value=jQ(A.value))}Array.isArray(E)?v.push(...E):v.push(E)}}}return v}}function p5e(t,e){t.position&&(e.position=nEe(t))}function m5e(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&o&&Object.assign(n.properties,V5(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function g5e(t,e){const n=e.data||{},r="value"in e&&!(N4.call(n,"hProperties")||N4.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function y5e(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function jQ(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function VQ(t,e){const n=f5e(t,e),r=n.one(t,void 0),i=r5e(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function v5e(t,e){return t&&"run"in t?async function(n,r){const i=VQ(n,{file:r,...e});await t.run(i,r)}:function(n,r){return VQ(n,{file:r,...t||e})}}function QQ(t){if(t)throw t}var P3,UQ;function x5e(){if(UQ)return P3;UQ=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},o=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var m=t.call(d,"constructor"),v=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!v)return!1;var _;for(_ in d);return typeof _>"u"||t.call(d,_)},a=function(d,m){n&&m.name==="__proto__"?n(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},s=function(d,m){if(m==="__proto__")if(t.call(d,m)){if(r)return r(d,m).value}else return;return d[m]};return P3=function u(){var d,m,v,_,O,E,A=arguments[0],M=1,L=arguments.length,$=!1;for(typeof A=="boolean"&&($=A,A=arguments[1]||{},M=2),(A==null||typeof A!="object"&&typeof A!="function")&&(A={});M<L;++M)if(d=arguments[M],d!=null)for(m in d)v=s(A,m),_=s(d,m),A!==_&&($&&_&&(o(_)||(O=i(_)))?(O?(O=!1,E=v&&i(v)?v:[]):E=v&&o(v)?v:{},a(A,{name:m,newValue:u($,E,_)})):typeof _<"u"&&a(A,{name:m,newValue:_}));return A},P3}var _5e=x5e();const M3=lv(_5e);function B4(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function b5e(){const t=[],e={run:n,use:r};return e;function n(...i){let o=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);s(null,...i);function s(u,...d){const m=t[++o];let v=-1;if(u){a(u);return}for(;++v<i.length;)(d[v]===null||d[v]===void 0)&&(d[v]=i[v]);i=d,m?w5e(m,s)(...d):a(null,...d)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function w5e(t,e){let n;return r;function r(...a){const s=t.length>a.length;let u;s&&a.push(i);try{u=t.apply(this,a)}catch(d){const m=d;if(s&&n)throw m;return i(m)}s||(u&&u.then&&typeof u.then=="function"?u.then(o,i):u instanceof Error?i(u):o(u))}function i(a,...s){n||(n=!0,e(a,...s))}function o(a){i(null,a)}}const Vp={basename:O5e,dirname:S5e,extname:C5e,join:T5e,sep:"/"};function O5e(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ak(t);let n=0,r=-1,i=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let a=-1,s=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(o){n=i+1;break}}else a<0&&(o=!0,a=i+1),s>-1&&(t.codePointAt(i)===e.codePointAt(s--)?s<0&&(r=i):(s=-1,r=a));return n===r?r=a:r<0&&(r=t.length),t.slice(n,r)}function S5e(t){if(Ak(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function C5e(t){Ak(t);let e=t.length,n=-1,r=0,i=-1,o=0,a;for(;e--;){const s=t.codePointAt(e);if(s===47){if(a){r=e+1;break}continue}n<0&&(a=!0,n=e+1),s===46?i<0?i=e:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function T5e(...t){let e=-1,n;for(;++e<t.length;)Ak(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":k5e(n)}function k5e(t){Ak(t);const e=t.codePointAt(0)===47;let n=E5e(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function E5e(t,e){let n="",r=0,i=-1,o=0,a=-1,s,u;for(;++a<=t.length;){if(a<t.length)s=t.codePointAt(a);else{if(s===47)break;s=47}if(s===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=a,o=0;continue}}else if(n.length>0){n="",r=0,i=a,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,a):n=t.slice(i+1,a),r=a-i-1;i=a,o=0}else s===46&&o>-1?o++:o=-1}return n}function Ak(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const A5e={cwd:P5e};function P5e(){return"/"}function F4(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function M5e(t){if(typeof t=="string")t=new URL(t);else if(!F4(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return R5e(t)}function R5e(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const R3=["history","path","basename","stem","extname","dirname"];class KJ{constructor(e){let n;e?F4(e)?n={path:e}:typeof e=="string"||I5e(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":A5e.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<R3.length;){const o=R3[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)R3.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Vp.basename(this.path):void 0}set basename(e){D3(e,"basename"),I3(e,"basename"),this.path=Vp.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Vp.dirname(this.path):void 0}set dirname(e){ZQ(this.basename,"dirname"),this.path=Vp.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Vp.extname(this.path):void 0}set extname(e){if(I3(e,"extname"),ZQ(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Vp.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){F4(e)&&(e=M5e(e)),D3(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Vp.basename(this.path,this.extname):void 0}set stem(e){D3(e,"stem"),I3(e,"stem"),this.path=Vp.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Ii(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function I3(t,e){if(t&&t.includes(Vp.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Vp.sep+"`")}function D3(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function ZQ(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function I5e(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const D5e=(function(t){const r=this.constructor.prototype,i=r[t],o=function(){return i.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),L5e={}.hasOwnProperty;class QB extends D5e{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=b5e()}copy(){const e=new QB;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(M3(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(z3("data",this.frozen),this.namespace[e]=n,this):L5e.call(this.namespace,e)&&this.namespace[e]||void 0:e?(z3("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=$A(e),r=this.parser||this.Parser;return L3("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),L3("process",this.parser||this.Parser),$3("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,a){const s=$A(e),u=r.parse(s);r.run(u,s,function(m,v,_){if(m||!v||!_)return d(m);const O=v,E=r.stringify(O,_);N5e(E)?_.value=E:_.result=E,d(m,_)});function d(m,v){m||!v?a(m):o?o(v):n(void 0,v)}}}processSync(e){let n=!1,r;return this.freeze(),L3("processSync",this.parser||this.Parser),$3("processSync",this.compiler||this.Compiler),this.process(e,i),WQ("processSync","process",n),r;function i(o,a){n=!0,QQ(o),r=a}}run(e,n,r){qQ(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(a,s){const u=$A(n);i.run(e,u,d);function d(m,v,_){const O=v||e;m?s(m):a?a(O):r(void 0,O,_)}}}runSync(e,n){let r=!1,i;return this.run(e,n,o),WQ("runSync","run",r),i;function o(a,s){QQ(a),i=s,r=!0}}stringify(e,n){this.freeze();const r=$A(n),i=this.compiler||this.Compiler;return $3("stringify",i),qQ(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(z3("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?s(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(d){if(typeof d=="function")u(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...v]=d;u(m,v)}else a(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function a(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(d.plugins),d.settings&&(i.settings=M3(!0,i.settings,d.settings))}function s(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const v=d[m];o(v)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function u(d,m){let v=-1,_=-1;for(;++v<r.length;)if(r[v][0]===d){_=v;break}if(_===-1)r.push([d,...m]);else if(m.length>0){let[O,...E]=m;const A=r[_][1];B4(A)&&B4(O)&&(O=M3(!0,A,O)),r[_]=[d,O,...E]}}}}const $5e=new QB().freeze();function L3(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function $3(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function z3(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function qQ(t){if(!B4(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function WQ(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function $A(t){return z5e(t)?t:new KJ(t)}function z5e(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function N5e(t){return typeof t=="string"||B5e(t)}function B5e(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const F5e="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",HQ=[],GQ={allowDangerousHtml:!0},j5e=/^(https?|ircs?|mailto|xmpp)$/i,V5e=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Q5e(t){const e=U5e(t),n=Z5e(t);return q5e(e.runSync(e.parse(n),n),t)}function U5e(t){const e=t.rehypePlugins||HQ,n=t.remarkPlugins||HQ,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...GQ}:GQ;return $5e().use(SPe).use(n).use(v5e,r).use(e)}function Z5e(t){const e=t.children||"",n=new KJ;return typeof e=="string"&&(n.value=e),n}function q5e(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,o=e.disallowedElements,a=e.skipHtml,s=e.unwrapDisallowed,u=e.urlTransform||W5e;for(const m of V5e)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+F5e+m.id,void 0);return VB(t,d),aEe(t,{Fragment:q.Fragment,components:i,ignoreInvalidStyle:!0,jsx:q.jsx,jsxs:q.jsxs,passKeys:!0,passNode:!0});function d(m,v,_){if(m.type==="raw"&&_&&typeof v=="number")return a?_.children.splice(v,1):_.children[v]={type:"text",value:m.value},v;if(m.type==="element"){let O;for(O in k3)if(Object.hasOwn(k3,O)&&Object.hasOwn(m.properties,O)){const E=m.properties[O],A=k3[O];(A===null||A.includes(m.tagName))&&(m.properties[O]=u(String(E||""),O,m))}}if(m.type==="element"){let O=n?!n.includes(m.tagName):o?o.includes(m.tagName):!1;if(!O&&r&&typeof v=="number"&&(O=!r(m,v,_)),O&&_&&typeof v=="number")return s&&m.children?_.children.splice(v,1,...m.children):_.children.splice(v,1),v}}}function W5e(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||j5e.test(t.slice(0,e))?t:""}var H5e=Object.defineProperty,G5e=(t,e,n)=>e in t?H5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lg=(t,e,n)=>G5e(t,typeof e!="symbol"?e+"":e,n);let X5e=class JJ{constructor(e=new Map){this.map=e}clone(){return new JJ(new Map(this.map))}increment(e){const n=this.map.get(e)??0;this.map.set(e,n+1)}decrement(e,n){let r=this.map.get(e);r!==void 0&&(r-=1,this.map.set(e,r),r===0&&n())}},zA=class{constructor(){Lg(this,"map",new Map)}getOrCreate(e){let n=this.map.get(e);return n===void 0&&(n=new Set,this.map.set(e,n)),n}get(e){return this.map.get(e)}use(e,n){const r=this.get(e);r!==void 0&&n(r)}delete(e){return this.map.delete(e)}};function Cw(t,e){return e(t),t}function UB(){}const eee="cell";function XQ(t,e){return t===e}const XR=new Map;let Y5e=class{constructor(e={}){Lg(this,"subscriptions",new zA),Lg(this,"singletonSubscriptions",new Map),Lg(this,"graph",new zA),Lg(this,"state",new Map),Lg(this,"distinctNodes",new Map),Lg(this,"executionMaps",new Map),Lg(this,"definitionRegistry",new Set),Lg(this,"combinedCells",[]);for(const n of Object.getOwnPropertySymbols(e))this.state.set(n,e[n])}cellInstance(e,n=!0,r=Symbol()){return this.state.has(r)||this.state.set(r,e),n!==!1&&!this.distinctNodes.has(r)&&this.distinctNodes.set(r,n===!0?XQ:n),r}signalInstance(e=!0,n=Symbol()){return e!==!1&&this.distinctNodes.set(n,e===!0?XQ:e),n}sub(e,n){this.register(e);const r=this.subscriptions.getOrCreate(e);return r.add(n),()=>r.delete(n)}singletonSub(e,n){return this.register(e),n===void 0?this.singletonSubscriptions.delete(e):this.singletonSubscriptions.set(e,n),()=>this.singletonSubscriptions.delete(e)}resetSingletonSubs(){this.singletonSubscriptions.clear()}subMultiple(e,n){const r=this.signalInstance();return this.connect({map:i=>(...o)=>{i(o)},sink:r,sources:e}),this.sub(r,n)}pubIn(e){var n;const r=Reflect.ownKeys(e),i=this.getExecutionMap(r),o=i.refCount.clone(),a=i.participatingNodes.slice(),s=new Map(this.state),u=d=>{this.graph.use(d,m=>{for(const{sources:v,sink:_}of m)v.has(d)&&o.decrement(_,()=>{a.splice(a.indexOf(_),1),u(_)})})};for(;;){const d=a.shift();if(d===void 0)break;const m=d;let v=!1;const _=O=>{const E=this.distinctNodes.get(m);if(E!=null&&E(s.get(m),O)){v=!1;return}v=!0,s.set(m,O),this.state.has(m)&&this.state.set(m,O)};if(Object.prototype.hasOwnProperty.call(e,m)?_(e[m]):i.projections.use(m,O=>{for(const E of O){const A=[...Array.from(E.sources),...Array.from(E.pulls)].map(M=>s.get(M));E.map(_)(...A)}}),v){const O=s.get(m);this.inContext(()=>{this.subscriptions.use(m,E=>{for(const A of E)A(O)})}),(n=this.singletonSubscriptions.get(m))==null||n(O)}else u(m)}}connect({sources:e,pulls:n=[],map:r,sink:i}){const o={map:r,pulls:new Set(n),sink:this.register(i),sources:new Set(e)};for(const a of[...e,...n])this.register(a),this.graph.getOrCreate(a).add(o);this.executionMaps.clear()}pub(e,n){this.pubIn({[e]:n})}pipe(e,...n){return this.combineOperators(...n)(e)}transformer(...e){return n=>Cw(this.signalInstance(),r=>(this.link(this.pipe(r,...e),n),r))}link(e,n){this.connect({map:r=>i=>{r(i)},sink:n,sources:[e]})}combine(...e){return Cw(this.signalInstance(),n=>{this.connect({map:r=>(...i)=>{r(i)},sink:n,sources:e})})}combineCells(...e){const n=this.combinedCells.find(i=>e.length===i.sources.length&&e.every((o,a)=>o===i.sources[a]));if(n)return n.cell;const r=this.cellInstance(e.map(i=>this.getValue(i)),!0);return this.connect({map:i=>(...o)=>{i(o)},sink:r,sources:e}),this.combinedCells.push({sources:e,cell:r}),r}getValue(e){return this.register(e),this.state.get(e)}getValues(e){return e.map(n=>this.getValue(n))}register(e){const n=XR.get(e);return n===void 0||this.definitionRegistry.has(e)?e:(this.definitionRegistry.add(e),Cw(n.type===eee?this.cellInstance(n.initial,n.distinct,e):this.signalInstance(n.distinct,e),r=>{this.inContext(()=>{n.init(this,r)})}))}inContext(e){return e()}changeWith(e,n,r){this.connect({sources:[n],pulls:[e],sink:e,map:i=>(o,a)=>{i(r(a,o))}})}calculateExecutionMap(e){const n=[],r=new Set,i=new zA,o=new X5e,a=new zA,s=(u,d=0)=>{o.increment(u),!r.has(u)&&(this.register(u),i.use(u,m=>{d=Math.max(...Array.from(m).map(v=>n.indexOf(v)))+1}),this.graph.use(u,m=>{for(const v of m)v.sources.has(u)?(a.getOrCreate(v.sink).add(v),s(v.sink,d)):i.getOrCreate(v.sink).add(u)}),r.add(u),n.splice(d,0,u))};return e.forEach(s),{participatingNodes:n,pendingPulls:i,projections:a,refCount:o}}getExecutionMap(e){let n=e;if(e.length===1){n=e[0];const i=this.executionMaps.get(n);if(i!==void 0)return i}else for(const[i,o]of this.executionMaps.entries())if(Array.isArray(i)&&i.length===e.length&&i.every(a=>e.includes(a)))return o;const r=this.calculateExecutionMap(e);return this.executionMaps.set(n,r),r}combineOperators(...e){return n=>{for(const r of e)n=r(n,this);return n}}};function In(t,e=UB,n=!0){return Cw(Symbol(),r=>{XR.set(r,{type:eee,distinct:n,initial:t,init:e})})}function As(t=UB,e=!1){return Cw(Symbol(),n=>{XR.set(n,{type:"signal",distinct:e,init:t})})}function Cm(t=UB){return Cw(Symbol(),e=>{XR.set(e,{type:"signal",distinct:!1,init:t})})}const tee=j.createContext(null);function GO(){const t=j.useContext(tee);if(t===null)throw new Error("useRealm must be used within a RealmContextProvider");return t}function $s(t){const e=GO();e.register(t);const n=j.useCallback(r=>e.sub(t,r),[e,t]);return j.useSyncExternalStore(n,()=>e.getValue(t),()=>e.getValue(t))}function us(...t){const e=GO(),n=j.useMemo(()=>e.combineCells.apply(e,t),[e,...t]);return $s(n)}function Ki(t){const e=GO();return e.register(t),j.useCallback(n=>{e.pub(t,n)},[e,t])}function ny(t){return(e,n)=>{const r=n.signalInstance();return n.connect({map:i=>o=>{i(t(o))},sink:r,sources:[e]}),r}}function Qo(...t){return(e,n)=>{const r=n.signalInstance();return n.connect({map:i=>(...o)=>{i(o)},pulls:t,sink:r,sources:[e]}),r}}function nee(t){return(e,n)=>{const r=n.signalInstance();return n.connect({map:i=>()=>{i(t)},sink:r,sources:[e]}),r}}function Pk(t){return(e,n)=>{const r=n.signalInstance();return n.connect({map:i=>o=>{t(o)&&i(o)},sink:r,sources:[e]}),r}}function ree(t,e){return(n,r)=>{const i=r.signalInstance();return r.connect({map:o=>a=>{o(e=t(e,a))},sink:i,sources:[n]}),i}}function K5e(t,e){return e(t),t}function Q0(){}function Zl(t){return function(e){return{init:n=>{var r;return(r=t.init)==null?void 0:r.call(t,n,e)},postInit:n=>{var r;return(r=t.postInit)==null?void 0:r.call(t,n,e)},update:n=>{var r;return(r=t.update)==null?void 0:r.call(t,n,e)}}}}function J5e({children:t,plugins:e}){const n=le.useMemo(()=>K5e(new Y5e,r=>{var i,o;for(const a of e)(i=a.init)==null||i.call(a,r);for(const a of e)(o=a.postInit)==null||o.call(a,r)}),[]);return le.useEffect(()=>{var r;for(const i of e)(r=i.update)==null||r.call(i,n)}),le.createElement(tee.Provider,{value:n},t)}const Q5=j.createContext(null);function iee(t,e){let n=null;return t!=null&&(n=t[1]),{getTheme:function(){return e??(n!=null?n.getTheme():null)}}}function ql(){const t=j.useContext(Q5);return t==null&&(function(e,...n){const r=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",e);for(const o of n)i.append("v",o);throw r.search=i.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(8),t}function ln(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const i of e)r.append("v",i);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Ff=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,eMe=Ff&&"documentMode"in document?document.documentMode:null,Hp=Ff&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),S_=Ff&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),U5=!(!Ff||!("InputEvent"in window)||eMe)&&"getTargetRanges"in new window.InputEvent("input"),vT=Ff&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),rO=Ff&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,tMe=Ff&&/Android/.test(navigator.userAgent),oee=Ff&&/^(?=.*Chrome).*/i.test(navigator.userAgent),YQ=Ff&&tMe&&oee,Z5=Ff&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!oee;function see(...t){const e=[];for(const n of t)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))e.push(r);return e}const nMe=1,rMe=3,iMe=9,oMe=11,C_=0,aee=1,iO=2,sMe=0,aMe=1,lMe=2,q5=4,W5=8,ZB=128,cMe=1792|(112|(3|q5|W5)|ZB),qB=1,WB=2,HB=3,GB=4,XB=5,YB=6,YR=vT||rO||Z5?"":"",ry=`

`,uMe=S_?"":YR,T_={bold:1,capitalize:1024,code:16,highlight:ZB,italic:2,lowercase:256,strikethrough:q5,subscript:32,superscript:64,underline:W5,uppercase:512},hMe={directionless:1,unmergeable:2},KQ={center:WB,end:YB,justify:GB,left:qB,right:HB,start:XB},dMe={[WB]:"center",[YB]:"end",[GB]:"justify",[qB]:"left",[HB]:"right",[XB]:"start"},fMe={normal:0,segmented:2,token:1},pMe={[sMe]:"normal",[lMe]:"segmented",[aMe]:"token"},JQ="$config";function lee(t,e,n,r,i,o){let a=t.getFirstChild();for(;a!==null;){const s=a.__key;a.__parent===e&&(It(a)&&lee(a,s,n,r,i,o),n.has(s)||o.delete(s),i.push(s)),a=a.getNextSibling()}}const mMe=100;let j4=!1,KB=0;function gMe(t){KB=t.timeStamp}function N3(t,e,n){const r=t.nodeName==="BR",i=e.__lexicalLineBreak;return i&&(t===i||r&&t.previousSibling===i)||r&&yI(t,n)!==void 0}function yMe(t,e,n){const r=Df(gd(n));let i=null,o=null;r!==null&&r.anchorNode===t&&(i=r.anchorOffset,o=r.focusOffset);const a=t.nodeValue;a!==null&&_8(e,a,i,o,!1)}function vMe(t,e,n){if(Kt(t)){const r=t.anchor.getNode();if(r.is(n)&&t.format!==r.getFormat())return!1}return yy(e)&&n.isAttached()}function xMe(t,e,n,r){for(let i=t;i&&!lRe(i);i=Bk(i)){const o=yI(i,e);if(o!==void 0){const a=Fi(o,n);if(a)return Ti(a)||!Ko(i)?void 0:[i,a]}else if(i===r)return[r,qee(n)]}}function cee(t,e,n){j4=!0;const r=performance.now()-KB>mMe;try{eh(t,(()=>{const i=cn()||(function(_){return _.getEditorState().read((()=>{const O=cn();return O!==null?O.clone():null}))})(t),o=new Map,a=t.getRootElement(),s=t._editorState,u=t._blockCursorElement;let d=!1,m="";for(let _=0;_<e.length;_++){const O=e[_],E=O.type,A=O.target,M=xMe(A,t,s,a);if(!M)continue;const[L,$]=M;if(E==="characterData")r&&gn($)&&yy(A)&&vMe(i,A,$)&&yMe(A,$,t);else if(E==="childList"){d=!0;const N=O.addedNodes;for(let W=0;W<N.length;W++){const H=N[W],te=Uee(H),ne=H.parentNode;if(ne!=null&&H!==u&&te===null&&!N3(H,ne,t)){if(S_){const ce=(Ko(H)?H.innerText:null)||H.nodeValue;ce&&(m+=ce)}ne.removeChild(H)}}const F=O.removedNodes,Q=F.length;if(Q>0){let W=0;for(let H=0;H<Q;H++){const te=F[H];(N3(te,A,t)||u===te)&&(A.appendChild(te),W++)}Q!==W&&o.set(L,$)}}}if(o.size>0)for(const[_,O]of o)O.reconcileObservedMutation(_,t);const v=n.takeRecords();if(v.length>0){for(let _=0;_<v.length;_++){const O=v[_],E=O.addedNodes,A=O.target;for(let M=0;M<E.length;M++){const L=E[M],$=L.parentNode;$==null||L.nodeName!=="BR"||N3(L,A,t)||$.removeChild(L)}}n.takeRecords()}i!==null&&(d&&cs(i),S_&&Xee(t)&&i.insertRawText(m))}))}finally{j4=!1}}function uee(t){const e=t._observer;e!==null&&cee(t,e.takeRecords(),e)}function hee(t){(function(e){KB===0&&gd(e).addEventListener("textInput",gMe,!0)})(t),t._observer=new MutationObserver(((e,n)=>{cee(t,e,n)}))}function V4(t){const e=new Map,n=new Set;for(let r=typeof t=="function"?t:t.replace;r.prototype&&r.prototype.getType!==void 0;r=Object.getPrototypeOf(r)){const{ownNodeConfig:i}=_I(r);if(i&&i.stateConfigs)for(const o of i.stateConfigs){let a;"stateConfig"in o?(a=o.stateConfig,o.flat&&n.add(a.key)):a=o,e.set(a.key,a)}}return{flatKeys:n,sharedConfigMap:e}}let _Me=class dee{constructor(e,n,r=void 0,i=new Map,o=void 0){this.node=e,this.sharedNodeState=n,this.unknownState=r,this.knownState=i;const{sharedConfigMap:a}=this.sharedNodeState,s=o!==void 0?o:(function(u,d,m){let v=m.size;if(d)for(const _ in d){const O=u.get(_);O&&m.has(O)||v++}return v})(a,r,i);this.size=s}getValue(e){const n=this.knownState.get(e);if(n!==void 0)return n;this.sharedNodeState.sharedConfigMap.set(e.key,e);let r=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){const i=this.unknownState[e.key];i!==void 0&&(r=e.parse(i)),this.updateFromKnown(e,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const e={...this.unknownState},n={};for(const[r,i]of this.knownState)r.isEqual(i,r.defaultValue)?delete e[r.key]:e[r.key]=r.unparse(i);for(const r of this.sharedNodeState.flatKeys)r in e&&(n[r]=e[r],delete e[r]);return eU(e)&&(n.$=e),n}getWritable(e){if(this.node===e)return this;const{sharedNodeState:n,unknownState:r}=this,i=new Map(this.knownState);return new dee(e,n,(function(o,a,s){let u;if(s)for(const[d,m]of Object.entries(s)){const v=o.get(d);v?a.has(v)||a.set(v,v.parse(m)):(u=u||{},u[d]=m)}return u})(n.sharedConfigMap,i,r),i,this.size)}updateFromKnown(e,n){const r=e.key;this.sharedNodeState.sharedConfigMap.set(r,e);const{knownState:i,unknownState:o}=this;i.has(e)||o&&r in o||(o&&(delete o[r],this.unknownState=eU(o)),this.size++),i.set(e,n)}updateFromUnknown(e,n){const r=this.sharedNodeState.sharedConfigMap.get(e);r?this.updateFromKnown(r,r.parse(n)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=n)}updateFromJSON(e){const{knownState:n}=this;for(const r of n.keys())n.set(r,r.defaultValue);if(this.size=n.size,this.unknownState=void 0,e)for(const[r,i]of Object.entries(e))this.updateFromUnknown(r,i)}};function bMe(t){const e=t.getWritable(),n=e.__state?e.__state.getWritable(e):new _Me(e,fee(e));return e.__state=n,n}function fee(t){return t.__state?t.__state.sharedNodeState:jee(xI(),t.getType()).sharedNodeState}function eU(t){if(t)for(const e in t)return t}function tU(t,e,n){for(const[r,i]of e.knownState){if(t.has(r.key))continue;t.add(r.key);const o=n?n.getValue(r):r.defaultValue;if(o!==i&&!r.isEqual(o,i))return!0}return!1}function nU(t,e,n){const{unknownState:r}=e,i=n?n.unknownState:void 0;if(r){for(const[o,a]of Object.entries(r))if(!t.has(o)&&(t.add(o),a!==(i?i[o]:void 0)))return!0}return!1}function rU(t,e){const n=t.__state;return n&&n.node===t?n.getWritable(e):n}function iU(t,e){const n=t.__mode,r=t.__format,i=t.__style,o=e.__mode,a=e.__format,s=e.__style,u=t.__state,d=e.__state;return(n===null||n===o)&&(r===null||r===a)&&(i===null||i===s)&&(t.__state===null||u===d||(function(m,v){if(m===v)return!0;if(m&&v&&m.size!==v.size)return!1;const _=new Set;return!(m&&tU(_,m,v)||v&&tU(_,v,m)||m&&nU(_,m,v)||v&&nU(_,v,m))})(u,d))}function oU(t,e){const n=t.mergeWithSibling(e),r=ls()._normalizedNodes;return r.add(t.__key),r.add(e.__key),n}function sU(t){let e,n,r=t;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(e=r.getPreviousSibling())!==null&&gn(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==""){if(iU(e,r)){r=oU(e,r);break}break}e.remove()}for(;(n=r.getNextSibling())!==null&&gn(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(n.__text!==""){if(iU(r,n)){r=oU(r,n);break}break}n.remove()}}else r.remove()}function k_(t){return aU(t.anchor),aU(t.focus),t}function aU(t){for(;t.type==="element";){const e=t.getNode(),n=t.offset;let r,i;if(n===e.getChildrenSize()?(r=e.getChildAtIndex(n-1),i=!0):(r=e.getChildAtIndex(n),i=!1),gn(r)){t.set(r.__key,i?r.getTextContentSize():0,"text",!0);break}if(!It(r))break;t.set(r.__key,i?r.getChildrenSize():0,"element",!0)}}let E_,Vl,xT,KR,Q4,U4,A_,Af,Z4,_T,xa="",Qp=null,Up="",Fg="",ew=!1,H5=!1;function G5(t,e){const n=A_.get(t);if(e!==null){const r=G4(t);r.parentNode===e&&e.removeChild(r)}if(Af.has(t)||Vl._keyToDOMMap.delete(t),It(n)){const r=Y5(n,A_);q4(r,0,r.length-1,null)}n!==void 0&&b8(_T,xT,KR,n,"destroyed")}function q4(t,e,n,r){let i=e;for(;i<=n;++i){const o=t[i];o!==void 0&&G5(o,r)}}function $x(t,e){t.setProperty("text-align",e)}const wMe="40px";function pee(t,e){const n=E_.theme.indent;if(typeof n=="string"){const i=t.classList.contains(n);e>0&&!i?t.classList.add(n):e<1&&i&&t.classList.remove(n)}const r=getComputedStyle(t).getPropertyValue("--lexical-indent-base-value")||wMe;t.style.setProperty("padding-inline-start",e===0?"":`calc(${e} * ${r})`)}function mee(t,e){const n=t.style;e===0?$x(n,""):e===qB?$x(n,"left"):e===WB?$x(n,"center"):e===HB?$x(n,"right"):e===GB?$x(n,"justify"):e===XB?$x(n,"start"):e===YB&&$x(n,"end")}function W4(t,e){const n=(function(r){const i=r.__dir;if(i!==null)return i;if(ta(r))return null;const o=r.getParentOrThrow();return ta(o)&&o.__dir===null?"auto":null})(e);n!==null?t.dir=n:t.removeAttribute("dir")}function X5(t,e){const n=Af.get(t);n===void 0&&ln(60);const r=n.createDOM(E_,Vl);if((function(i,o,a){const s=a._keyToDOMMap;(function(u,d,m){const v=`__lexicalKey_${d._key}`;u[v]=m})(o,a,i),s.set(i,o)})(t,r,Vl),gn(n)?r.setAttribute("data-lexical-text","true"):Ti(n)&&r.setAttribute("data-lexical-decorator","true"),It(n)){const i=n.__indent,o=n.__size;if(W4(r,n),i!==0&&pee(r,i),o!==0){const s=o-1;H4(Y5(n,Af),n,0,s,n.getDOMSlot(r))}const a=n.__format;a!==0&&mee(r,a),n.isInline()||gee(null,n,r),vI(n)&&(xa+=ry,Fg+=ry)}else{const i=n.getTextContent();if(Ti(n)){const o=n.decorate(Vl,E_);o!==null&&yee(t,o),r.contentEditable="false"}xa+=i,Fg+=i}return e!==null&&e.insertChild(r),b8(_T,xT,KR,n,"created"),r}function H4(t,e,n,r,i){const o=xa;xa="";let a=n;for(;a<=r;++a){X5(t[a],i);const s=Af.get(t[a]);s!==null&&gn(s)&&(Qp===null&&(Qp=s.getFormat()),Up===""&&(Up=s.getStyle()))}vI(e)&&(xa+=ry),i.element.__lexicalTextContent=xa,xa=o+xa}function lU(t,e){if(t){const n=t.__last;if(n){const r=e.get(n);if(r)return Pf(r)?"line-break":Ti(r)&&r.isInline()?"decorator":null}return"empty"}return null}function gee(t,e,n){const r=lU(t,A_),i=lU(e,Af);r!==i&&e.getDOMSlot(n).setManagedLineBreak(i)}function OMe(t,e,n){var r;Qp=null,Up="",(function(i,o,a){const s=xa,u=i.__size,d=o.__size;xa="";const m=a.element;if(u===1&&d===1){const v=i.__first,_=o.__first;if(v===_)dC(v,m);else{const E=G4(v),A=X5(_,null);try{m.replaceChild(A,E)}catch(M){if(typeof M=="object"&&M!=null){const L=`${M.toString()} Parent: ${m.tagName}, new child: {tag: ${A.tagName} key: ${_}}, old child: {tag: ${E.tagName}, key: ${v}}.`;throw new Error(L)}throw M}G5(v,null)}const O=Af.get(_);gn(O)&&(Qp===null&&(Qp=O.getFormat()),Up===""&&(Up=O.getStyle()))}else{const v=Y5(i,A_),_=Y5(o,Af);if(v.length!==u&&ln(227),_.length!==d&&ln(228),u===0)d!==0&&H4(_,o,0,d-1,a);else if(d===0){if(u!==0){const O=a.after==null&&a.before==null&&a.element.__lexicalLineBreak==null;q4(v,0,u-1,O?null:m),O&&(m.textContent="")}}else(function(O,E,A,M,L,$){const N=M-1,F=L-1;let Q,W,H=$.getFirstChild(),te=0,ne=0;for(;te<=N&&ne<=F;){const re=E[te],se=A[ne];if(re===se)H=B3(dC(se,$.element)),te++,ne++;else{Q===void 0&&(Q=new Set(E)),W===void 0&&(W=new Set(A));const fe=W.has(re),ve=Q.has(se);if(fe)if(ve){const Me=P_(Vl,se);Me===H?H=B3(dC(se,$.element)):($.withBefore(H).insertChild(Me),dC(se,$.element)),te++,ne++}else X5(se,$.withBefore(H)),ne++;else H=B3(G4(re)),G5(re,$.element),te++}const be=Af.get(se);be!==null&&gn(be)&&(Qp===null&&(Qp=be.getFormat()),Up===""&&(Up=be.getStyle()))}const ce=te>N,we=ne>F;if(ce&&!we){const re=A[F+1],se=re===void 0?null:Vl.getElementByKey(re);H4(A,O,ne,F,$.withBefore(se))}else we&&!ce&&q4(E,te,N,$.element)})(o,v,_,u,d,a)}vI(o)&&(xa+=ry),m.__lexicalTextContent=xa,xa=s+xa})(t,e,e.getDOMSlot(n)),r=e,Qp==null||Qp===r.__textFormat||H5||r.setTextFormat(Qp),(function(i){Up===""||Up===i.__textStyle||H5||i.setTextStyle(Up)})(e)}function Y5(t,e){const n=[];let r=t.__first;for(;r!==null;){const i=e.get(r);i===void 0&&ln(101),n.push(r),r=i.__next}return n}function dC(t,e){const n=A_.get(t);let r=Af.get(t);n!==void 0&&r!==void 0||ln(61);const i=ew||U4.has(t)||Q4.has(t),o=P_(Vl,t);if(n===r&&!i){if(It(n)){const a=o.__lexicalTextContent;a!==void 0&&(xa+=a,Fg+=a)}else{const a=n.getTextContent();Fg+=a,xa+=a}return o}if(n!==r&&i&&b8(_T,xT,KR,r,"updated"),r.updateDOM(n,o,E_)){const a=X5(t,null);return e===null&&ln(62),e.replaceChild(a,o),G5(t,null),a}if(It(n)&&It(r)){const a=r.__indent;(ew||a!==n.__indent)&&pee(o,a);const s=r.__format;if((ew||s!==n.__format)&&mee(o,s),i&&(OMe(n,r,o),ta(r)||r.isInline()||gee(n,r,o)),vI(r)&&(xa+=ry,Fg+=ry),(ew||r.__dir!==n.__dir)&&(W4(o,r),ta(r)&&!ew))for(const u of r.getChildren())It(u)&&W4(P_(Vl,u.getKey()),u)}else{const a=r.getTextContent();if(Ti(r)){const s=r.decorate(Vl,E_);s!==null&&yee(t,s)}xa+=a,Fg+=a}if(!H5&&ta(r)&&r.__cachedText!==Fg){const a=r.getWritable();a.__cachedText=Fg,r=a}return o}function yee(t,e){let n=Vl._pendingDecorators;const r=Vl._decorators;if(n===null){if(r[t]===e)return;n=Zee(Vl)}n[t]=e}function B3(t){let e=t.nextSibling;return e!==null&&e===Vl._blockCursorElement&&(e=e.nextSibling),e}function SMe(t,e,n,r,i,o){xa="",Fg="",ew=r===iO,Vl=n,E_=n._config,xT=n._nodes,KR=Vl._listeners.mutation,Q4=i,U4=o,A_=t._nodeMap,Af=e._nodeMap,H5=e._readOnly,Z4=new Map(n._keyToDOMMap);const a=new Map;return _T=a,dC("root",null),Vl=void 0,xT=void 0,Q4=void 0,U4=void 0,A_=void 0,Af=void 0,E_=void 0,Z4=void 0,_T=void 0,a}function G4(t){const e=Z4.get(t);return e===void 0&&ln(75,t),e}function lr(t){return{type:t}}const Mk=lr("SELECTION_CHANGE_COMMAND"),CMe=lr("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),JR=lr("CLICK_COMMAND"),d_=lr("DELETE_CHARACTER_COMMAND"),Tw=lr("INSERT_LINE_BREAK_COMMAND"),bT=lr("INSERT_PARAGRAPH_COMMAND"),kw=lr("CONTROLLED_TEXT_INSERTION_COMMAND"),Rk=lr("PASTE_COMMAND"),X4=lr("REMOVE_TEXT_COMMAND"),wT=lr("DELETE_WORD_COMMAND"),OT=lr("DELETE_LINE_COMMAND"),qg=lr("FORMAT_TEXT_COMMAND"),eI=lr("UNDO_COMMAND"),tI=lr("REDO_COMMAND"),nI=lr("KEYDOWN_COMMAND"),vee=lr("KEY_ARROW_RIGHT_COMMAND"),TMe=lr("MOVE_TO_END"),JB=lr("KEY_ARROW_LEFT_COMMAND"),kMe=lr("MOVE_TO_START"),e8=lr("KEY_ARROW_UP_COMMAND"),t8=lr("KEY_ARROW_DOWN_COMMAND"),oO=lr("KEY_ENTER_COMMAND"),n8=lr("KEY_SPACE_COMMAND"),rI=lr("KEY_BACKSPACE_COMMAND"),Ik=lr("KEY_ESCAPE_COMMAND"),r8=lr("KEY_DELETE_COMMAND"),iI=lr("KEY_TAB_COMMAND"),xee=lr("INSERT_TAB_COMMAND"),K5=lr("INDENT_CONTENT_COMMAND"),Y4=lr("OUTDENT_CONTENT_COMMAND"),i8=lr("DROP_COMMAND"),EMe=lr("FORMAT_ELEMENT_COMMAND"),oI=lr("DRAGSTART_COMMAND"),o8=lr("DRAGOVER_COMMAND"),AMe=lr("DRAGEND_COMMAND"),sI=lr("COPY_COMMAND"),s8=lr("CUT_COMMAND"),K4=lr("SELECT_ALL_COMMAND"),PMe=lr("CLEAR_EDITOR_COMMAND"),MMe=lr("CLEAR_HISTORY_COMMAND"),fC=lr("CAN_REDO_COMMAND"),pC=lr("CAN_UNDO_COMMAND"),aI=lr("FOCUS_COMMAND"),lI=lr("BLUR_COMMAND"),RMe=lr("KEY_MODIFIER_COMMAND"),Ag=Object.freeze({}),J4=30,ez=[["keydown",function(t,e){if(LC=t.timeStamp,_ee=t.key,!e.isComposing()&&!$n(e,nI,t)&&t.key!=null){if(F3&&$U(t))return eh(e,(()=>{NA(e,j3)})),F3=!1,void(j3="");if((function(n){return Yi(n,"ArrowRight",{shiftKey:"any"})})(t))$n(e,vee,t);else if((function(n){return Yi(n,"ArrowRight",$g)})(t))$n(e,TMe,t);else if((function(n){return Yi(n,"ArrowLeft",{shiftKey:"any"})})(t))$n(e,JB,t);else if((function(n){return Yi(n,"ArrowLeft",$g)})(t))$n(e,kMe,t);else if((function(n){return Yi(n,"ArrowUp",{altKey:"any",shiftKey:"any"})})(t))$n(e,e8,t);else if((function(n){return Yi(n,"ArrowDown",{altKey:"any",shiftKey:"any"})})(t))$n(e,t8,t);else if((function(n){return Yi(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})})(t))$C=!0,$n(e,oO,t);else if((function(n){return n.key===" "})(t))$n(e,n8,t);else if((function(n){return Hp&&Yi(n,"o",{ctrlKey:!0})})(t))t.preventDefault(),$C=!0,$n(e,Tw,!0);else if((function(n){return Yi(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})})(t))$C=!1,$n(e,oO,t);else if((function(n){return Yi(n,"Backspace",{shiftKey:"any"})||Hp&&Yi(n,"h",{ctrlKey:!0})})(t))$U(t)?$n(e,rI,t):(t.preventDefault(),$n(e,d_,!0));else if((function(n){return n.key==="Escape"})(t))$n(e,Ik,t);else if((function(n){return Yi(n,"Delete",{})||Hp&&Yi(n,"d",{ctrlKey:!0})})(t))(function(n){return n.key==="Delete"})(t)?$n(e,r8,t):(t.preventDefault(),$n(e,d_,!1));else if((function(n){return Yi(n,"Backspace",LU)})(t))t.preventDefault(),$n(e,wT,!0);else if((function(n){return Yi(n,"Delete",LU)})(t))t.preventDefault(),$n(e,wT,!1);else if((function(n){return Hp&&Yi(n,"Backspace",{metaKey:!0})})(t))t.preventDefault(),$n(e,OT,!0);else if((function(n){return Hp&&(Yi(n,"Delete",{metaKey:!0})||Yi(n,"k",{ctrlKey:!0}))})(t))t.preventDefault(),$n(e,OT,!1);else if((function(n){return Yi(n,"b",$g)})(t))t.preventDefault(),$n(e,qg,"bold");else if((function(n){return Yi(n,"u",$g)})(t))t.preventDefault(),$n(e,qg,"underline");else if((function(n){return Yi(n,"i",$g)})(t))t.preventDefault(),$n(e,qg,"italic");else if((function(n){return Yi(n,"Tab",{shiftKey:"any"})})(t))$n(e,iI,t);else if((function(n){return Yi(n,"z",$g)})(t))t.preventDefault(),$n(e,eI,void 0);else if((function(n){return Hp?Yi(n,"z",{metaKey:!0,shiftKey:!0}):Yi(n,"y",{ctrlKey:!0})||Yi(n,"z",{ctrlKey:!0,shiftKey:!0})})(t))t.preventDefault(),$n(e,tI,void 0);else{const n=e._editorState._selection;n===null||Kt(n)?zU(t)&&(t.preventDefault(),$n(e,K4,t)):(function(r){return Yi(r,"c",$g)})(t)?(t.preventDefault(),$n(e,sI,t)):(function(r){return Yi(r,"x",$g)})(t)?(t.preventDefault(),$n(e,s8,t)):zU(t)&&(t.preventDefault(),$n(e,K4,t))}(function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey})(t)&&$n(e,RMe,t)}}],["pointerdown",function(t,e){const n=t.target,r=t.pointerType;tS(n)&&r!=="touch"&&r!=="pen"&&t.button===0&&eh(e,(()=>{RU(n)||(nz=!0)}))}],["compositionstart",function(t,e){eh(e,(()=>{const n=cn();if(Kt(n)&&!e.isComposing()){const r=n.anchor,i=n.anchor.getNode();ul(r.key),(t.timeStamp<LC+J4||r.type==="element"||!n.isCollapsed()||i.getFormat()!==n.format||gn(i)&&i.getStyle()!==n.style)&&$n(e,kw,uMe)}}))}],["compositionend",function(t,e){S_?Z2=!0:rO||!vT&&!Z5?eh(e,(()=>{NA(e,t.data)})):(F3=!0,j3=t.data)}],["input",function(t,e){t.stopPropagation(),eh(e,(()=>{if(Ko(t.target)&&RU(t.target))return;const n=cn(),r=t.data,i=Cee(t);if(r!=null&&Kt(n)&&Oee(n,i,r,t.timeStamp,!1)){Z2&&(NA(e,r),Z2=!1);const o=n.anchor.getNode(),a=Df(gd(e));if(a===null)return;const s=n.isBackward(),u=s?n.anchor.offset:n.focus.offset,d=s?n.focus.offset:n.anchor.offset;U5&&!n.isCollapsed()&&gn(o)&&a.anchorNode!==null&&o.getTextContent().slice(0,u)+r+o.getTextContent().slice(u+d)===Gee(a.anchorNode)||$n(e,kw,r);const m=r.length;S_&&m>1&&t.inputType==="insertCompositionText"&&!e.isComposing()&&(n.anchor.offset-=m),vT||rO||Z5||!e.isComposing()||(LC=0,ul(null))}else x8(!1,e,r!==null?r:void 0),Z2&&(NA(e,r||void 0),Z2=!1);(function(){cl();const o=ls();uee(o)})()}),{event:t}),tw=null}],["click",function(t,e){eh(e,(()=>{const n=cn(),r=Df(gd(e)),i=eb();if(r){if(Kt(n)){const o=n.anchor,a=o.getNode();if(o.type==="element"&&o.offset===0&&n.isCollapsed()&&!ta(a)&&Ur().getChildrenSize()===1&&a.getTopLevelElementOrThrow().isEmpty()&&i!==null&&n.is(i))r.removeAllRanges(),n.dirty=!0;else if(t.detail===3&&!n.isCollapsed()&&a!==n.focus.getNode()){const s=(function(u,d){let m=u;for(;m!==Ur()&&m!=null;){if(d(m))return m;m=m.getParent()}return null})(a,(u=>It(u)&&!u.isInline()));It(s)&&s.select(0)}}else if(t.pointerType==="touch"||t.pointerType==="pen"){const o=r.anchorNode;(Ko(o)||yy(o))&&cs(c8(i,r,e,t))}}$n(e,JR,t)}))}],["cut",Ag],["copy",Ag],["dragstart",Ag],["dragover",Ag],["dragend",Ag],["paste",Ag],["focus",Ag],["blur",Ag],["drop",Ag]];U5&&ez.push(["beforeinput",(t,e)=>(function(n,r){const i=n.inputType,o=Cee(n);i==="deleteCompositionText"||S_&&Xee(r)||i!=="insertCompositionText"&&eh(r,(()=>{const a=cn();if(i==="deleteContentBackward"){if(a===null){const O=eb();if(!Kt(O))return;cs(O.clone())}if(Kt(a)){const O=a.anchor.key===a.focus.key;if(s=n.timeStamp,_ee==="MediaLast"&&s<LC+J4&&r.isComposing()&&O){if(ul(null),LC=0,setTimeout((()=>{eh(r,(()=>{ul(null)}))}),J4),Kt(a)){const E=a.anchor.getNode();E.markDirty(),gn(E)||ln(142),See(a,E)}}else{ul(null),n.preventDefault();const E=a.anchor.getNode(),A=E.getTextContent(),M=E.canInsertTextAfter(),L=a.anchor.offset===0&&a.focus.offset===A.length;let $=YQ&&O&&!L&&M;if($&&a.isCollapsed()&&($=!Ti(sz(a.anchor,!0))),!$){$n(r,d_,!0);const N=cn();YQ&&Kt(N)&&N.isCollapsed()&&(Hx=N,setTimeout((()=>Hx=null)))}}return}}var s;if(!Kt(a))return;const u=n.data;tw!==null&&x8(!1,r,tw),a.dirty&&tw===null||!a.isCollapsed()||ta(a.anchor.getNode())||o===null||a.applyDOMRange(o),tw=null;const d=a.anchor,m=a.focus,v=d.getNode(),_=m.getNode();if(i!=="insertText"&&i!=="insertTranspose")switch(n.preventDefault(),i){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":$n(r,kw,n);break;case"insertFromComposition":ul(null),$n(r,kw,n);break;case"insertLineBreak":ul(null),$n(r,Tw,!1);break;case"insertParagraph":ul(null),$C&&!rO?($C=!1,$n(r,Tw,!1)):$n(r,bT,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":$n(r,Rk,n);break;case"deleteByComposition":(function(O,E){return O!==E||It(O)||It(E)||!f_(O)||!f_(E)})(v,_)&&$n(r,X4,n);break;case"deleteByDrag":case"deleteByCut":$n(r,X4,n);break;case"deleteContent":$n(r,d_,!1);break;case"deleteWordBackward":$n(r,wT,!0);break;case"deleteWordForward":$n(r,wT,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":$n(r,OT,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":$n(r,OT,!1);break;case"formatStrikeThrough":$n(r,qg,"strikethrough");break;case"formatBold":$n(r,qg,"bold");break;case"formatItalic":$n(r,qg,"italic");break;case"formatUnderline":$n(r,qg,"underline");break;case"historyUndo":$n(r,eI,void 0);break;case"historyRedo":$n(r,tI,void 0)}else{if(u===`
`)n.preventDefault(),$n(r,Tw,!1);else if(u===ry)n.preventDefault(),$n(r,bT,void 0);else if(u==null&&n.dataTransfer){const O=n.dataTransfer.getData("text/plain");n.preventDefault(),a.insertRawText(O)}else u!=null&&Oee(a,o,u,n.timeStamp,!0)?(n.preventDefault(),$n(r,kw,u)):tw=u;bee=n.timeStamp}}))})(t,e)]);let LC=0,_ee=null,bee=0,tw=null;const J5=new WeakMap;let tz=!1,nz=!1,$C=!1,Z2=!1,F3=!1,j3="",Hx=null,wee=[0,"",0,"root",0];function Oee(t,e,n,r,i){const o=t.anchor,a=t.focus,s=o.getNode(),u=ls(),d=Df(gd(u)),m=d!==null?d.anchorNode:null,v=o.key,_=u.getElementByKey(v),O=n.length;return v!==a.key||!gn(s)||(!i&&(!U5||bee<r+50)||s.isDirty()&&O<2||Wee(n))&&o.offset!==a.offset&&!s.isComposing()||Ng(s)||s.isDirty()&&O>1||(i||!U5)&&_!==null&&!s.isComposing()&&m!==sO(_)||d!==null&&e!==null&&(!e.collapsed||e.startContainer!==d.anchorNode||e.startOffset!==d.anchorOffset)||s.getFormat()!==t.format||s.getStyle()!==t.style||(function(E,A){if(A.isSegmented())return!0;if(!E.isCollapsed())return!1;const M=E.anchor.offset,L=A.getParentOrThrow(),$=f_(A);return M===0?!A.canInsertTextBefore()||!L.canInsertTextBefore()&&!A.isComposing()||$||(function(N){const F=N.getPreviousSibling();return(gn(F)||It(F)&&F.isInline())&&!F.canInsertTextAfter()})(A):M===A.getTextContentSize()&&(!A.canInsertTextAfter()||!L.canInsertTextAfter()&&!A.isComposing()||$)})(t,s)}function cU(t,e){return yy(t)&&t.nodeValue!==null&&e!==0&&e!==t.nodeValue.length}function uU(t,e,n){const{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}=t;tz&&(tz=!1,cU(r,i)&&cU(o,a)&&!Hx)||eh(e,(()=>{if(!n)return void cs(null);if(!Nk(e,r,o))return;let s=cn();if(Hx&&Kt(s)&&s.isCollapsed()){const u=s.anchor,d=Hx.anchor;(u.key===d.key&&u.offset===d.offset+1||u.offset===1&&d.getNode().is(u.getNode().getPreviousSibling()))&&(s=Hx.clone(),cs(s))}if(Hx=null,Kt(s)){const u=s.anchor,d=u.getNode();if(s.isCollapsed()){t.type==="Range"&&t.anchorNode===t.focusNode&&(s.dirty=!0);const m=gd(e).event,v=m?m.timeStamp:performance.now(),[_,O,E,A,M]=wee,L=Ur(),$=e.isComposing()===!1&&L.getTextContent()==="";if(v<M+200&&u.offset===E&&u.key===A)XP(s,_,O);else if(u.type==="text")gn(d)||ln(141),See(s,d);else if(u.type==="element"&&!$){It(d)||ln(259);const N=u.getNode();N.isEmpty()?(function(F,Q){const W=Q.getTextFormat(),H=Q.getTextStyle();XP(F,W,H)})(s,N):XP(s,0,"")}}else{const m=u.key,v=s.focus.key,_=s.getNodes(),O=_.length,E=s.isBackward(),A=E?a:i,M=E?i:a,L=E?v:m,$=E?m:v;let N=cMe,F=!1;for(let Q=0;Q<O;Q++){const W=_[Q],H=W.getTextContentSize();if(gn(W)&&H!==0&&!(Q===0&&W.__key===L&&A===H||Q===O-1&&W.__key===$&&M===0)&&(F=!0,N&=W.getFormat(),N===0))break}s.format=F?N:0}}$n(e,Mk,void 0)}))}function XP(t,e,n){t.format===e&&t.style===n||(t.format=e,t.style=n,t.dirty=!0)}function See(t,e){XP(t,e.getFormat(),e.getStyle())}function Cee(t){if(!t.getTargetRanges)return null;const e=t.getTargetRanges();return e.length===0?null:e[0]}function NA(t,e){const n=t._compositionKey;if(ul(null),n!==null&&e!=null){if(e===""){const r=Fi(n),i=sO(t.getElementByKey(n));return void(i!==null&&i.nodeValue!==null&&gn(r)&&_8(r,i.nodeValue,null,null,!0))}if(e[e.length-1]===`
`){const r=cn();if(Kt(r)){const i=r.focus;return r.anchor.set(i.key,i.offset,i.type),void $n(t,oO,null)}}}x8(!0,t,e)}function Tee(t){let e=t.__lexicalEventHandles;return e===void 0&&(e=[],t.__lexicalEventHandles=e),e}const Ew=new Map;function kee(t){const e=sRe(t.target);if(e===null)return;const n=y8(e.anchorNode);if(n===null)return;nz&&(nz=!1,eh(n,(()=>{const u=eb(),d=e.anchorNode;(Ko(d)||yy(d))&&cs(c8(u,e,n,t))})));const r=v8(n),i=r[r.length-1],o=i._key,a=Ew.get(o),s=a||i;s!==n&&uU(e,s,!1),uU(e,n,!0),n!==i?Ew.set(o,n):a&&Ew.delete(o)}function hU(t){t._lexicalHandled=!0}function dU(t){return t._lexicalHandled===!0}function IMe(t){const e=t.ownerDocument,n=J5.get(e);if(n===void 0)return;const r=n-1;r>=0||ln(164),J5.set(e,r),r===0&&e.removeEventListener("selectionchange",kee);const i=gI(t);g8(i)?((function(a){if(a._parentEditor!==null){const s=v8(a),u=s[s.length-1]._key;Ew.get(u)===a&&Ew.delete(u)}else Ew.delete(a._key)})(i),t.__lexicalEditor=null):i&&ln(198);const o=Tee(t);for(let a=0;a<o.length;a++)o[a]();t.__lexicalEventHandles=[]}function rz(t,e,n){cl();const r=t.__key,i=t.getParent();if(i===null)return;const o=(function(s){const u=cn();if(!Kt(u)||!It(s))return u;const{anchor:d,focus:m}=u,v=d.getNode(),_=m.getNode();return az(v,s)&&d.set(s.__key,0,"element"),az(_,s)&&m.set(s.__key,0,"element"),u})(t);let a=!1;if(Kt(o)&&e){const s=o.anchor,u=o.focus;s.key===r&&(nM(s,t,i,t.getPreviousSibling(),t.getNextSibling()),a=!0),u.key===r&&(nM(u,t,i,t.getPreviousSibling(),t.getNextSibling()),a=!0)}else ss(o)&&e&&t.isSelected()&&t.selectPrevious();if(Kt(o)&&e&&!a){const s=t.getIndexWithinParent();p_(t),tM(o,i,s,-1)}else p_(t);n||ra(i)||i.canBeEmpty()||!i.isEmpty()||rz(i,e),e&&o&&ta(i)&&i.isEmpty()&&i.selectEnd()}class XO{static getType(){const{ownNodeType:e}=_I(this);return e===void 0&&ln(64,this.name),e}static clone(e){ln(65,this.name)}$config(){return{}}config(e,n){const r=n.extends||Object.getPrototypeOf(this.constructor);return Object.assign(n,{extends:r,type:e}),{[e]:n}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Qee(this,e)}getType(){return this.__type}isInline(){ln(137,this.constructor.name)}isAttached(){let e=this.__key;for(;e!==null;){if(e==="root")return!0;const n=Fi(e);if(n===null)break;e=n.__parent}return!1}isSelected(e){const n=e||cn();if(n==null)return!1;const r=n.getNodes().some((i=>i.__key===this.__key));if(gn(this))return r;if(Kt(n)&&n.anchor.type==="element"&&n.focus.type==="element"){if(n.isCollapsed())return!1;const i=this.getParent();if(Ti(this)&&this.isInline()&&i){const o=n.isBackward()?n.focus:n.anchor;if(i.is(o.getNode())&&o.offset===i.getChildrenSize()&&this.is(i.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(e===null)return-1;let n=e.getFirstChild(),r=0;for(;n!==null;){if(this.is(n))return r;r++,n=n.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return e===null?null:Fi(e)}getParentOrThrow(){const e=this.getParent();return e===null&&ln(66,this.__key),e}getTopLevelElement(){let e=this;for(;e!==null;){const n=e.getParent();if(ra(n))return It(e)||e===this&&Ti(e)||ln(194),e;e=n}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();return e===null&&ln(67,this.__key),e}getParents(){const e=[];let n=this.getParent();for(;n!==null;)e.push(n),n=n.getParent();return e}getParentKeys(){const e=[];let n=this.getParent();for(;n!==null;)e.push(n.__key),n=n.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return e===null?null:Fi(e)}getPreviousSiblings(){const e=[],n=this.getParent();if(n===null)return e;let r=n.getFirstChild();for(;r!==null&&!r.is(this);)e.push(r),r=r.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return e===null?null:Fi(e)}getNextSiblings(){const e=[];let n=this.getNextSibling();for(;n!==null;)e.push(n),n=n.getNextSibling();return e}getCommonAncestor(e){const n=It(this)?this:this.getParent(),r=It(e)?e:e.getParent(),i=n&&r?JP(n,r):null;return i?i.commonAncestor:null}is(e){return e!=null&&this.__key===e.__key}isBefore(e){const n=JP(this,e);return n!==null&&(n.type==="descendant"||(n.type==="branch"?rte(n)===-1:(n.type!=="same"&&n.type!=="ancestor"&&ln(279),!1)))}isParentOf(e){const n=JP(this,e);return n!==null&&n.type==="ancestor"}getNodesBetween(e){const n=this.isBefore(e),r=[],i=new Set;let o=this;for(;o!==null;){const a=o.__key;if(i.has(a)||(i.add(a),r.push(o)),o===e)break;const s=It(o)?n?o.getFirstChild():o.getLastChild():null;if(s!==null){o=s;continue}const u=n?o.getNextSibling():o.getPreviousSibling();if(u!==null){o=u;continue}const d=o.getParentOrThrow();if(i.has(d.__key)||r.push(d),d===e)break;let m=null,v=d;do{if(v===null&&ln(68),m=n?v.getNextSibling():v.getPreviousSibling(),v=v.getParent(),v===null)break;m!==null||i.has(v.__key)||r.push(v)}while(m===null);o=m}return n||r.reverse(),r}isDirty(){const e=ls()._dirtyLeaves;return e!==null&&e.has(this.__key)}getLatest(){const e=Fi(this.__key);return e===null&&ln(113),e}getWritable(){cl();const e=dv(),n=ls(),r=e._nodeMap,i=this.__key,o=this.getLatest(),a=n._cloneNotNeeded,s=cn();if(s!==null&&s.setCachedNodes(null),a.has(i))return sM(o),o;const u=O8(o);return a.add(i),sM(u),r.set(i,u),u}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,n){ln(70)}updateDOM(e,n,r){ln(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){const e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){ln(18,this.name)}updateFromJSON(e){return(function(n,r){const i=n.getWritable(),o=r.$;let a=o;for(const s of fee(i).flatKeys)s in r&&(a!==void 0&&a!==o||(a={...o}),a[s]=r[s]);return(i.__state||a)&&bMe(n).updateFromJSON(a),i})(this,e)}static transform(){return null}remove(e){rz(this,!0,e)}replace(e,n){cl();let r=cn();r!==null&&(r=r.clone()),W3(this,e);const i=this.getLatest(),o=this.__key,a=e.__key,s=e.getWritable(),u=this.getParentOrThrow().getWritable(),d=u.__size;p_(s);const m=i.getPreviousSibling(),v=i.getNextSibling(),_=i.__prev,O=i.__next,E=i.__parent;if(rz(i,!1,!0),m===null?u.__first=a:m.getWritable().__next=a,s.__prev=_,v===null?u.__last=a:v.getWritable().__prev=a,s.__next=O,s.__parent=E,u.__size=d,n&&(It(this)&&It(s)||ln(139),this.getChildren().forEach((A=>{s.append(A)}))),Kt(r)){cs(r);const A=r.anchor,M=r.focus;A.key===o&&gU(A,s),M.key===o&&gU(M,s)}return L0()===o&&ul(a),s}insertAfter(e,n=!0){cl(),W3(this,e);const r=this.getWritable(),i=e.getWritable(),o=i.getParent(),a=cn();let s=!1,u=!1;if(o!==null){const O=e.getIndexWithinParent();if(p_(i),Kt(a)){const E=o.__key,A=a.anchor,M=a.focus;s=A.type==="element"&&A.key===E&&A.offset===O+1,u=M.type==="element"&&M.key===E&&M.offset===O+1}}const d=this.getNextSibling(),m=this.getParentOrThrow().getWritable(),v=i.__key,_=r.__next;if(d===null?m.__last=v:d.getWritable().__prev=v,m.__size++,r.__next=v,i.__next=_,i.__prev=r.__key,i.__parent=r.__parent,n&&Kt(a)){const O=this.getIndexWithinParent();tM(a,m,O+1);const E=m.__key;s&&a.anchor.set(E,O+2,"element"),u&&a.focus.set(E,O+2,"element")}return e}insertBefore(e,n=!0){cl(),W3(this,e);const r=this.getWritable(),i=e.getWritable(),o=i.__key;p_(i);const a=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),u=r.__prev,d=this.getIndexWithinParent();a===null?s.__first=o:a.getWritable().__next=o,s.__size++,r.__prev=o,i.__prev=u,i.__next=r.__key,i.__parent=r.__parent;const m=cn();return n&&Kt(m)&&tM(m,this.getParentOrThrow(),d),e}isParentRequired(){return!1}createParentElementNode(){return Oi()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,n){cl();const r=this.getPreviousSibling(),i=this.getParentOrThrow();if(r===null)return i.select(0,0);if(It(r))return r.select();if(!gn(r)){const o=r.getIndexWithinParent()+1;return i.select(o,o)}return r.select(e,n)}selectNext(e,n){cl();const r=this.getNextSibling(),i=this.getParentOrThrow();if(r===null)return i.select();if(It(r))return r.select(0,0);if(!gn(r)){const o=r.getIndexWithinParent();return i.select(o,o)}return r.select(e,n)}markDirty(){this.getWritable()}reconcileObservedMutation(e,n){this.markDirty()}}class Dk extends XO{static getType(){return"linebreak"}static clone(e){return new Dk(e.__key)}constructor(e){super(e)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>(function(n){const r=n.parentElement;if(r!==null&&aM(r)){const i=r.firstChild;if(i===n||i.nextSibling===n&&BA(i)){const o=r.lastChild;if(o===n||o.previousSibling===n&&BA(o))return!0}}return!1})(e)||(function(n){const r=n.parentElement;if(r!==null&&aM(r)){const i=r.firstChild;if(i===n||i.nextSibling===n&&BA(i))return!1;const o=r.lastChild;if(o===n||o.previousSibling===n&&BA(o))return!0}return!1})(e)?null:{conversion:DMe,priority:0}}}static importJSON(e){return If().updateFromJSON(e)}}function DMe(t){return{node:If()}}function If(){return vh(new Dk)}function Pf(t){return t instanceof Dk}function BA(t){return yy(t)&&/^( |\t|\r?\n)+$/.test(t.textContent||"")}function V3(t,e){return 16&e?"code":e&ZB?"mark":32&e?"sub":64&e?"sup":null}function Q3(t,e){return 1&e?"strong":2&e?"em":"span"}function Eee(t,e,n,r,i){const o=r.classList;let a=Aw(i,"base");a!==void 0&&o.add(...a),a=Aw(i,"underlineStrikethrough");let s=!1;const u=e&W5&&e&q5;a!==void 0&&(n&W5&&n&q5?(s=!0,u||o.add(...a)):u&&o.remove(...a));for(const d in T_){const m=T_[d];if(a=Aw(i,d),a!==void 0)if(n&m){if(s&&(d==="underline"||d==="strikethrough")){e&m&&o.remove(...a);continue}e&m&&(!u||d!=="underline")&&d!=="strikethrough"||o.add(...a)}else e&m&&o.remove(...a)}}function Aee(t,e,n){const r=e.firstChild,i=n.isComposing(),o=t+(i?YR:"");if(r==null)e.textContent=o;else{const a=r.nodeValue;if(a!==o)if(i||S_){const[s,u,d]=(function(m,v){const _=m.length,O=v.length;let E=0,A=0;for(;E<_&&E<O&&m[E]===v[E];)E++;for(;A+E<_&&A+E<O&&m[_-A-1]===v[O-A-1];)A++;return[E,_-E-A,v.slice(E,O-A)]})(a,o);u!==0&&r.deleteData(s,u),r.insertData(s,d)}else r.nodeValue=o}}function fU(t,e,n,r,i,o){Aee(i,t,e);const a=o.theme.text;a!==void 0&&Eee(0,0,r,t,a)}function FA(t,e){const n=document.createElement(e);return n.appendChild(t),n}class Tm extends XO{static getType(){return"text"}static clone(e){return new Tm(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",n){super(n),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const e=this.getLatest();return pMe[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===L0()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){const n=T_[e];return!!(this.getFormat()&n)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(e,n){return oM(this.getLatest().__format,e,n)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,n){const r=this.__format,i=V3(0,r),o=Q3(0,r),a=i===null?o:i,s=document.createElement(a);let u=s;this.hasFormat("code")&&s.setAttribute("spellcheck","false"),i!==null&&(u=document.createElement(o),s.appendChild(u)),fU(u,this,0,r,this.__text,e);const d=this.__style;return d!==""&&(s.style.cssText=d),s}updateDOM(e,n,r){const i=this.__text,o=e.__format,a=this.__format,s=V3(0,o),u=V3(0,a),d=Q3(0,o),m=Q3(0,a);if((s===null?d:s)!==(u===null?m:u))return!0;if(s===u&&d!==m){const A=n.firstChild;A==null&&ln(48);const M=document.createElement(m);return fU(M,this,0,a,i,r),n.replaceChild(M,A),!1}let v=n;u!==null&&s!==null&&(v=n.firstChild,v==null&&ln(49)),Aee(i,v,this);const _=r.theme.text;_!==void 0&&o!==a&&Eee(0,o,a,v,_);const O=e.__style,E=this.__style;return O!==E&&(n.style.cssText=E),!1}static importDOM(){return{"#text":()=>({conversion:NMe,priority:0}),b:()=>({conversion:$Me,priority:0}),code:()=>({conversion:Pg,priority:0}),em:()=>({conversion:Pg,priority:0}),i:()=>({conversion:Pg,priority:0}),mark:()=>({conversion:Pg,priority:0}),s:()=>({conversion:Pg,priority:0}),span:()=>({conversion:LMe,priority:0}),strong:()=>({conversion:Pg,priority:0}),sub:()=>({conversion:Pg,priority:0}),sup:()=>({conversion:Pg,priority:0}),u:()=>({conversion:Pg,priority:0})}}static importJSON(e){return so().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:n}=super.exportDOM(e);return Ko(n)||ln(132),n.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?n.style.textTransform="lowercase":this.hasFormat("uppercase")?n.style.textTransform="uppercase":this.hasFormat("capitalize")&&(n.style.textTransform="capitalize"),this.hasFormat("bold")&&(n=FA(n,"b")),this.hasFormat("italic")&&(n=FA(n,"i")),this.hasFormat("strikethrough")&&(n=FA(n,"s")),this.hasFormat("underline")&&(n=FA(n,"u")),{element:n}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,n){}setFormat(e){const n=this.getWritable();return n.__format=typeof e=="string"?T_[e]:e,n}setDetail(e){const n=this.getWritable();return n.__detail=typeof e=="string"?hMe[e]:e,n}setStyle(e){const n=this.getWritable();return n.__style=e,n}toggleFormat(e){const n=oM(this.getFormat(),e,null);return this.setFormat(n)}toggleDirectionless(){const e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){const e=this.getWritable();return e.__detail^=2,e}setMode(e){const n=fMe[e];if(this.__mode===n)return this;const r=this.getWritable();return r.__mode=n,r}setTextContent(e){if(this.__text===e)return this;const n=this.getWritable();return n.__text=e,n}select(e,n){cl();let r=e,i=n;const o=cn(),a=this.getTextContent(),s=this.__key;if(typeof a=="string"){const u=a.length;r===void 0&&(r=u),i===void 0&&(i=u)}else r=0,i=0;if(!Kt(o))return Ree(s,r,s,i,"text","text");{const u=L0();u!==o.anchor.key&&u!==o.focus.key||ul(s),o.setTextNodeRange(this,r,this,i)}return o}selectStart(){return this.select(0,0)}selectEnd(){const e=this.getTextContentSize();return this.select(e,e)}spliceText(e,n,r,i){const o=this.getWritable(),a=o.__text,s=r.length;let u=e;u<0&&(u=s+u,u<0&&(u=0));const d=cn();if(i&&Kt(d)){const v=e+s;d.setTextNodeRange(o,v,o,v)}const m=a.slice(0,u)+r+a.slice(u+n);return o.__text=m,o}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){cl();const n=this.getLatest(),r=n.getTextContent();if(r==="")return[];const i=n.__key,o=L0(),a=r.length;e.sort(((te,ne)=>te-ne)),e.push(a);const s=[],u=e.length;for(let te=0,ne=0;te<a&&ne<=u;ne++){const ce=e[ne];ce>te&&(s.push(r.slice(te,ce)),te=ce)}const d=s.length;if(d===1)return[n];const m=s[0],v=n.getParent();let _;const O=n.getFormat(),E=n.getStyle(),A=n.__detail;let M=!1,L=null,$=null;const N=cn();if(Kt(N)){const[te,ne]=N.isBackward()?[N.focus,N.anchor]:[N.anchor,N.focus];te.type==="text"&&te.key===i&&(L=te),ne.type==="text"&&ne.key===i&&($=ne)}n.isSegmented()?(_=so(m),_.__format=O,_.__style=E,_.__detail=A,_.__state=rU(n,_),M=!0):_=n.setTextContent(m);const F=[_];for(let te=1;te<d;te++){const ne=so(s[te]);ne.__format=O,ne.__style=E,ne.__detail=A,ne.__state=rU(n,ne);const ce=ne.__key;o===i&&ul(ce),F.push(ne)}const Q=L?L.offset:null,W=$?$.offset:null;let H=0;for(const te of F){if(!L&&!$)break;const ne=H+te.getTextContentSize();if(L!==null&&Q!==null&&Q<=ne&&Q>=H&&(L.set(te.getKey(),Q-H,"text"),Q<ne&&(L=null)),$!==null&&W!==null&&W<=ne&&W>=H){$.set(te.getKey(),W-H,"text");break}H=ne}if(v!==null){(function(ce){const we=ce.getPreviousSibling(),re=ce.getNextSibling();we!==null&&sM(we),re!==null&&sM(re)})(this);const te=v.getWritable(),ne=this.getIndexWithinParent();M?(te.splice(ne,0,F),this.remove()):te.splice(ne,1,F),Kt(N)&&tM(N,v,ne,d-1)}return F}mergeWithSibling(e){const n=e===this.getPreviousSibling();n||e===this.getNextSibling()||ln(50);const r=this.__key,i=e.__key,o=this.__text,a=o.length;L0()===i&&ul(r);const s=cn();if(Kt(s)){const v=s.anchor,_=s.focus;v!==null&&v.key===i&&OU(v,n,r,e,a),_!==null&&_.key===i&&OU(_,n,r,e,a)}const u=e.__text,d=n?u+o:o+u;this.setTextContent(d);const m=this.getWritable();return e.remove(),m}isTextEntity(){return!1}}function LMe(t){return{forChild:a8(t.style),node:null}}function $Me(t){const e=t,n=e.style.fontWeight==="normal";return{forChild:a8(e.style,n?void 0:"bold"),node:null}}const pU=new WeakMap;function zMe(t){if(!Ko(t))return!1;if(t.nodeName==="PRE")return!0;const e=t.style.whiteSpace;return typeof e=="string"&&e.startsWith("pre")}function NMe(t){const e=t;t.parentElement===null&&ln(129);let n=e.textContent||"";if((function(r){let i,o=r.parentNode;const a=[r];for(;o!==null&&(i=pU.get(o))===void 0&&!zMe(o);)a.push(o),o=o.parentNode;const s=i===void 0?o:i;for(let u=0;u<a.length;u++)pU.set(a[u],s);return s})(e)!==null){const r=n.split(/(\r?\n|\t)/),i=[],o=r.length;for(let a=0;a<o;a++){const s=r[a];s===`
`||s===`\r
`?i.push(If()):s==="	"?i.push(YO()):s!==""&&i.push(so(s))}return{node:i}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),n==="")return{node:null};if(n[0]===" "){let r=e,i=!0;for(;r!==null&&(r=mU(r,!1))!==null;){const o=r.textContent||"";if(o.length>0){/[ \t\n]$/.test(o)&&(n=n.slice(1)),i=!1;break}}i&&(n=n.slice(1))}if(n[n.length-1]===" "){let r=e,i=!0;for(;r!==null&&(r=mU(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){i=!1;break}i&&(n=n.slice(0,n.length-1))}return n===""?{node:null}:{node:so(n)}}function mU(t,e){let n=t;for(;;){let r;for(;(r=e?n.nextSibling:n.previousSibling)===null;){const o=n.parentElement;if(o===null)return null;n=o}if(n=r,Ko(n)){const o=n.style.display;if(o===""&&!uz(n)||o!==""&&!o.startsWith("inline"))return null}let i=n;for(;(i=e?n.firstChild:n.lastChild)!==null;)n=i;if(yy(n))return n;if(n.nodeName==="BR")return null}}const BMe={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Pg(t){const e=BMe[t.nodeName.toLowerCase()];return e===void 0?{node:null}:{forChild:a8(t.style,e),node:null}}function so(t=""){return vh(new Tm(t))}function gn(t){return t instanceof Tm}function a8(t,e){const n=t.fontWeight,r=t.textDecoration.split(" "),i=n==="700"||n==="bold",o=r.includes("line-through"),a=t.fontStyle==="italic",s=r.includes("underline"),u=t.verticalAlign;return d=>(gn(d)&&(i&&!d.hasFormat("bold")&&d.toggleFormat("bold"),o&&!d.hasFormat("strikethrough")&&d.toggleFormat("strikethrough"),a&&!d.hasFormat("italic")&&d.toggleFormat("italic"),s&&!d.hasFormat("underline")&&d.toggleFormat("underline"),u!=="sub"||d.hasFormat("subscript")||d.toggleFormat("subscript"),u!=="super"||d.hasFormat("superscript")||d.toggleFormat("superscript"),e&&!d.hasFormat(e)&&d.toggleFormat(e)),d)}class Lk extends Tm{static getType(){return"tab"}static clone(e){return new Lk(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){const n=super.createDOM(e),r=Aw(e.theme,"tab");return r!==void 0&&n.classList.add(...r),n}static importJSON(e){return YO().updateFromJSON(e)}setTextContent(e){return e!=="	"&&e!==""&&ln(126),super.setTextContent("	")}spliceText(e,n,r,i){return r===""&&n===0||r==="	"&&n===1||ln(286),this}setDetail(e){return e!==2&&ln(127),this}setMode(e){return e!=="normal"&&ln(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function YO(){return vh(new Lk)}function cI(t){return t instanceof Lk}class FMe{constructor(e,n,r){this._selection=null,this.key=e,this.offset=n,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:nte(ah(xm(this,"next")),ah(xm(e,"next")))<0}getNode(){const e=Fi(this.key);return e===null&&ln(20),e}set(e,n,r,i){const o=this._selection,a=this.key;i&&this.key===e&&this.offset===n&&this.type===r||(this.key=e,this.offset=n,this.type=r,$k()||(L0()===a&&ul(e),o!==null&&(o.setCachedNodes(null),o.dirty=!0)))}}function ym(t,e,n){return new FMe(t,e,n)}function U3(t,e){let n=e.__key,r=t.offset,i="element";if(gn(e)){i="text";const o=e.getTextContentSize();r>o&&(r=o)}else if(!It(e)){const o=e.getNextSibling();if(gn(o))n=o.__key,r=0,i="text";else{const a=e.getParent();a&&(n=a.__key,r=e.getIndexWithinParent()+1)}}t.set(n,r,i)}function gU(t,e){if(It(e)){const n=e.getLastDescendant();It(n)||gn(n)?U3(t,n):U3(t,e)}else U3(t,e)}class uI{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!ss(e))return!1;const n=this._nodes,r=e._nodes;return n.size===r.size&&Array.from(n).every((i=>r.has(i)))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new uI(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const n=this.getNodes(),r=n.length,i=n[r-1];let o;if(gn(i))o=i.select();else{const a=i.getIndexWithinParent()+1;o=i.getParentOrThrow().select(a,a)}o.insertNodes(e);for(let a=0;a<r;a++)n[a].remove()}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const n=this._nodes,r=[];for(const i of n){const o=Fi(i);o!==null&&r.push(o)}return $k()||(this._cachedNodes=r),r}getTextContent(){const e=this.getNodes();let n="";for(let r=0;r<e.length;r++)n+=e[r].getTextContent();return n}deleteNodes(){const e=this.getNodes();if((cn()||eb())===this&&e[0]){const n=ia(e[0],"next");ite(Y0(n,n))}for(const n of e)n.remove()}}function Kt(t){return t instanceof J_}class J_{constructor(e,n,r,i){this.anchor=e,this.focus=n,e._selection=this,n._selection=this,this._cachedNodes=null,this.format=r,this.style=i,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!Kt(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const n=(function(r){const i=[],[o,a]=r.getTextSlices();o&&i.push(o.caret.origin);const s=new Set,u=new Set;for(const d of r)if(hd(d)){const{origin:m}=d;i.length===0?s.add(m):(u.add(m),i.push(m))}else{const{origin:m}=d;It(m)&&u.has(m)||i.push(m)}if(a&&i.push(a.caret.origin),aO(r.focus)&&It(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let d=yd(r.focus.origin,"previous");hd(d)&&s.has(d.origin)&&!d.origin.isEmpty()&&d.origin.is(i[i.length-1]);d=bI(d))s.delete(d.origin),i.pop();for(;i.length>1;){const d=i[i.length-1];if(!It(d)||u.has(d)||d.isEmpty()||s.has(d))break;i.pop()}if(i.length===0&&r.isCollapsed()){const d=ah(r.anchor),m=ah(r.anchor.getFlipped()),v=O=>um(O)?O.origin:O.getNodeAtCaret(),_=v(d)||v(m)||(r.anchor.getNodeAtCaret()?d.origin:m.origin);i.push(_)}return i})(ste(QU(this),"next"));return $k()||(this._cachedNodes=n),n}setTextNodeRange(e,n,r,i){this.anchor.set(e.__key,n,"text"),this.focus.set(r.__key,i,"text")}getTextContent(){const e=this.getNodes();if(e.length===0)return"";const n=e[0],r=e[e.length-1],i=this.anchor,o=this.focus,a=i.isBefore(o),[s,u]=iz(this);let d="",m=!0;for(let v=0;v<e.length;v++){const _=e[v];if(It(_)&&!_.isInline())m||(d+=`
`),m=!_.isEmpty();else if(m=!1,gn(_)){let O=_.getTextContent();_===n?_===r?i.type==="element"&&o.type==="element"&&o.offset!==i.offset||(O=s<u?O.slice(s,u):O.slice(u,s)):O=a?O.slice(s):O.slice(u):_===r&&(O=a?O.slice(0,u):O.slice(0,s)),d+=O}else!Ti(_)&&!Pf(_)||_===r&&this.isCollapsed()||(d+=_.getTextContent())}return d}applyDOMRange(e){const n=ls(),r=n.getEditorState()._selection,i=Mee(e.startContainer,e.startOffset,e.endContainer,e.endOffset,n,r);if(i===null)return;const[o,a]=i;this.anchor.set(o.key,o.offset,o.type,!0),this.focus.set(a.key,a.offset,a.type,!0),k_(this)}clone(){const e=this.anchor,n=this.focus;return new J_(ym(e.key,e.offset,e.type),ym(n.key,n.offset,n.type),this.format,this.style)}toggleFormat(e){this.format=oM(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const n=T_[e];return!!(this.format&n)}insertRawText(e){const n=e.split(/(\r?\n|\t)/),r=[],i=n.length;for(let o=0;o<i;o++){const a=n[o];a===`
`||a===`\r
`?r.push(If()):a==="	"?r.push(YO()):r.push(so(a))}this.insertNodes(r)}insertText(e){const n=this.anchor,r=this.focus,i=this.format,o=this.style;let a=n,s=r;!this.isCollapsed()&&r.isBefore(n)&&(a=r,s=n),a.type==="element"&&(function(M,L,$,N){const F=M.getNode(),Q=F.getChildAtIndex(M.offset),W=so();if(W.setFormat($),W.setStyle(N),fI(Q))Q.splice(0,0,[W]);else{const H=ta(F)?Oi().append(W):W;Q===null?F.append(H):Q.insertBefore(H)}M.is(L)&&L.set(W.__key,0,"text"),M.set(W.__key,0,"text")})(a,s,i,o),s.type==="element"&&D_(s,ah(xm(s,"next")));const u=a.offset;let d=s.offset;const m=this.getNodes(),v=m.length;let _=m[0];gn(_)||ln(26);const O=_.getTextContent().length,E=_.getParentOrThrow();let A=m[v-1];if(v===1&&s.type==="element"&&(d=O,s.set(a.key,d,"text")),this.isCollapsed()&&u===O&&(Ng(_)||!_.canInsertTextAfter()||!E.canInsertTextAfter()&&_.getNextSibling()===null)){let M=_.getNextSibling();if(gn(M)&&M.canInsertTextBefore()&&!Ng(M)||(M=so(),M.setFormat(i),M.setStyle(o),E.canInsertTextAfter()?_.insertAfter(M):E.insertAfter(M)),M.select(0,0),_=M,e!=="")return void this.insertText(e)}else if(this.isCollapsed()&&u===0&&(Ng(_)||!_.canInsertTextBefore()||!E.canInsertTextBefore()&&_.getPreviousSibling()===null)){let M=_.getPreviousSibling();if(gn(M)&&!Ng(M)||(M=so(),M.setFormat(i),E.canInsertTextBefore()?_.insertBefore(M):E.insertBefore(M)),M.select(),_=M,e!=="")return void this.insertText(e)}else if(_.isSegmented()&&u!==O){const M=so(_.getTextContent());M.setFormat(i),_.replace(M),_=M}else if(!this.isCollapsed()&&e!==""){const M=A.getParent();if(!E.canInsertTextBefore()||!E.canInsertTextAfter()||It(M)&&(!M.canInsertTextBefore()||!M.canInsertTextAfter()))return this.insertText(""),Pee(this.anchor,this.focus,null),void this.insertText(e)}if(v===1){if(f_(_)){const N=so(e);return N.select(),void _.replace(N)}const M=_.getFormat(),L=_.getStyle();if(u!==d||M===i&&L===o){if(cI(_)){const N=so(e);return N.setFormat(i),N.setStyle(o),N.select(),void _.replace(N)}}else{if(_.getTextContent()!==""){const N=so(e);if(N.setFormat(i),N.setStyle(o),N.select(),u===0)_.insertBefore(N,!1);else{const[F]=_.splitText(u);F.insertAfter(N,!1)}return void(N.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length))}_.setFormat(i),_.setStyle(o)}const $=d-u;_=_.spliceText(u,$,e,!0),_.getTextContent()===""?_.remove():this.anchor.type==="text"&&(_.isComposing()?this.anchor.offset-=e.length:(this.format=M,this.style=L))}else{const M=new Set([..._.getParentKeys(),...A.getParentKeys()]),L=It(_)?_:_.getParentOrThrow();let $=It(A)?A:A.getParentOrThrow(),N=A;if(!L.is($)&&$.isInline())do N=$,$=$.getParentOrThrow();while($.isInline());if(s.type==="text"&&(d!==0||A.getTextContent()==="")||s.type==="element"&&A.getIndexWithinParent()<d)if(gn(A)&&!f_(A)&&d!==A.getTextContentSize()){if(A.isSegmented()){const te=so(A.getTextContent());A.replace(te),A=te}ta(s.getNode())||s.type!=="text"||(A=A.spliceText(0,d,"")),M.add(A.__key)}else{const te=A.getParentOrThrow();te.canBeEmpty()||te.getChildrenSize()!==1?A.remove():te.remove()}else M.add(A.__key);const F=$.getChildren(),Q=new Set(m),W=L.is($),H=L.isInline()&&_.getNextSibling()===null?L:_;for(let te=F.length-1;te>=0;te--){const ne=F[te];if(ne.is(_)||It(ne)&&ne.isParentOf(_))break;ne.isAttached()&&(!Q.has(ne)||ne.is(N)?W||H.insertAfter(ne,!1):ne.remove())}if(!W){let te=$,ne=null;for(;te!==null;){const ce=te.getChildren(),we=ce.length;(we===0||ce[we-1].is(ne))&&(M.delete(te.__key),ne=te),te=te.getParent()}}if(f_(_))if(u===O)_.select();else{const te=so(e);te.select(),_.replace(te)}else _=_.spliceText(u,O-u,e,!0),_.getTextContent()===""?_.remove():_.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length);for(let te=1;te<v;te++){const ne=m[te],ce=ne.__key;M.has(ce)||ne.remove()}}}removeText(){const e=cn()===this;e5(this,yRe(QU(this))),e&&cn()!==this&&cs(this)}formatText(e,n=null){if(this.isCollapsed())return this.toggleFormat(e),void ul(null);const r=this.getNodes(),i=[];for(const F of r)gn(F)&&i.push(F);const o=F=>{r.forEach((Q=>{if(It(Q)){const W=Q.getFormatFlags(e,F);Q.setTextFormat(W)}}))},a=i.length;if(a===0)return this.toggleFormat(e),ul(null),void o(n);const s=this.anchor,u=this.focus,d=this.isBackward(),m=d?u:s,v=d?s:u;let _=0,O=i[0],E=m.type==="element"?0:m.offset;if(m.type==="text"&&E===O.getTextContentSize()&&(_=1,O=i[1],E=0),O==null)return;const A=O.getFormatFlags(e,n);o(A);const M=a-1;let L=i[M];const $=v.type==="text"?v.offset:L.getTextContentSize();if(O.is(L)){if(E===$)return;if(Ng(O)||E===0&&$===O.getTextContentSize())O.setFormat(A);else{const F=O.splitText(E,$),Q=E===0?F[0]:F[1];Q.setFormat(A),m.type==="text"&&m.set(Q.__key,0,"text"),v.type==="text"&&v.set(Q.__key,$-E,"text")}return void(this.format=A)}E===0||Ng(O)||([,O]=O.splitText(E),E=0),O.setFormat(A);const N=L.getFormatFlags(e,A);$>0&&($===L.getTextContentSize()||Ng(L)||([L]=L.splitText($)),L.setFormat(N));for(let F=_+1;F<M;F++){const Q=i[F],W=Q.getFormatFlags(e,N);Q.setFormat(W)}m.type==="text"&&m.set(O.__key,E,"text"),v.type==="text"&&v.set(L.__key,$,"text"),this.format=A|N}insertNodes(e){if(e.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const E=cn();return Kt(E)||ln(134),E.insertNodes(e)}const n=(this.isBackward()?this.focus:this.anchor).getNode(),r=G3(n,td),i=e[e.length-1];if(It(r)&&"__language"in r){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const E=Z3(this);r.splice(E,0,e),i.selectEnd()}return}if(!e.some((E=>(It(E)||Ti(E))&&!E.isInline()))){It(r)||ln(211,n.constructor.name,n.getType());const E=Z3(this);return r.splice(E,0,e),void i.selectEnd()}const o=(function(E){const A=Oi();let M=null;for(let L=0;L<E.length;L++){const $=E[L],N=Pf($);if(N||Ti($)&&$.isInline()||It($)&&$.isInline()||gn($)||$.isParentRequired()){if(M===null&&(M=$.createParentElementNode(),A.append(M),N))continue;M!==null&&M.append($)}else A.append($),M=null}return A})(e),a=o.getLastDescendant(),s=o.getChildren(),u=!It(r)||!r.isEmpty()?this.insertParagraph():null,d=s[s.length-1];let m=s[0];var v;It(v=m)&&td(v)&&!v.isEmpty()&&It(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(It(r)||ln(211,n.constructor.name,n.getType()),r.append(...m.getChildren()),m=s[1]),m&&(r===null&&ln(212,n.constructor.name,n.getType()),(function(E,A,M){const L=A.getParentOrThrow().getLastChild();let $=A;const N=[A];for(;$!==L;)$.getNextSibling()||ln(140),$=$.getNextSibling(),N.push($);let F=E;for(const Q of N)F=F.insertAfter(Q)})(r,m));const _=G3(a,td);u&&It(_)&&(u.canMergeWhenEmpty()||td(d))&&(_.append(...u.getChildren()),u.remove()),It(r)&&r.isEmpty()&&r.remove(),a.selectEnd();const O=It(r)?r.getLastChild():null;Pf(O)&&_!==r&&O.remove()}insertParagraph(){if(this.anchor.key==="root"){const a=Oi();return Ur().splice(this.anchor.offset,0,[a]),a.select(),a}const e=Z3(this),n=G3(this.anchor.getNode(),td);It(n)||ln(213);const r=n.getChildAtIndex(e),i=r?[r,...r.getNextSiblings()]:[],o=n.insertNewAfter(this,!1);return o?(o.append(...i),o.selectStart(),o):null}insertLineBreak(e){const n=If();if(this.insertNodes([n]),e){const r=n.getParentOrThrow(),i=n.getIndexWithinParent();r.select(i,i)}}extract(){const e=this.getNodes(),n=e.length,r=n-1,i=this.anchor,o=this.focus;let a=e[0],s=e[r];const[u,d]=iz(this);if(n===0)return[];if(n===1){if(gn(a)&&!this.isCollapsed()){const v=u>d?d:u,_=u>d?u:d,O=a.splitText(v,_),E=v===0?O[0]:O[1];return E!=null?[E]:[]}return[a]}const m=i.isBefore(o);if(gn(a)){const v=m?u:d;v===a.getTextContentSize()?e.shift():v!==0&&([,a]=a.splitText(v),e[0]=a)}if(gn(s)){const v=s.getTextContent().length,_=m?d:u;_===0?e.pop():_!==v&&([s]=s.splitText(_),e[r]=s)}return e}modify(e,n,r){if(SU(this,e,n,r))return;const i=e==="move",o=ls(),a=Df(gd(o));if(!a)return;const s=o._blockCursorElement,u=o._rootElement,d=this.focus.getNode();if(u===null||s===null||!It(d)||d.isInline()||d.canBeEmpty()||lz(s,o,u),this.dirty){let m=P_(o,this.anchor.key),v=P_(o,this.focus.key);this.anchor.type==="text"&&(m=sO(m)),this.focus.type==="text"&&(v=sO(v)),m&&v&&Iee(a,m,this.anchor.offset,v,this.focus.offset)}if((function(m,v,_,O){m.modify(v,_,O)})(a,e,n?"backward":"forward",r),a.rangeCount>0){const m=a.getRangeAt(0),v=this.anchor.getNode(),_=ta(v)?v:rRe(v);if(this.applyDOMRange(m),this.dirty=!0,!i){const O=this.getNodes(),E=[];let A=!1;for(let M=0;M<O.length;M++){const L=O[M];az(L,_)?E.push(L):A=!0}if(A&&E.length>0)if(n){const M=E[0];It(M)?M.selectStart():M.getParentOrThrow().selectStart()}else{const M=E[E.length-1];It(M)?M.selectEnd():M.getParentOrThrow().selectEnd()}a.anchorNode===m.startContainer&&a.anchorOffset===m.startOffset||(function(M){const L=M.focus,$=M.anchor,N=$.key,F=$.offset,Q=$.type;$.set(L.key,L.offset,L.type,!0),L.set(N,F,Q,!0)})(this)}}r==="lineboundary"&&SU(this,e,n,r,"decorators")}forwardDeletion(e,n,r){if(!r&&(e.type==="element"&&It(n)&&e.offset===n.getChildrenSize()||e.type==="text"&&e.offset===n.getTextContentSize())){const i=n.getParent(),o=n.getNextSibling()||(i===null?null:i.getNextSibling());if(It(o)&&o.isShadowRoot())return!0}return!1}deleteCharacter(e){const n=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let i=r.getNode();if(this.forwardDeletion(r,i,e))return;const o=E8(xm(r,e?"previous":"next"));if(o.getTextSlices().every((s=>s===null||s.distance===0))){let s={type:"initial"};for(const u of o.iterNodeCarets("shadowRoot"))if(hd(u)){if(!u.origin.isInline()){if(u.origin.isShadowRoot()){if(s.type==="merge-block")break;if(It(o.anchor.origin)&&o.anchor.origin.isEmpty()){const d=ah(u);e5(this,Y0(d,d)),o.anchor.origin.remove()}return}s.type!=="merge-next-block"&&s.type!=="merge-block"||(s={block:s.block,caret:u,type:"merge-block"})}}else{if(s.type==="merge-block")break;if(aO(u)){if(It(u.origin)){if(u.origin.isInline()){if(!u.origin.isParentOf(o.anchor.origin))break}else s={block:u.origin,type:"merge-next-block"};continue}if(Ti(u.origin)){if(!u.origin.isIsolated())if(s.type==="merge-next-block"&&(u.origin.isKeyboardSelectable()||!u.origin.isInline())&&It(o.anchor.origin)&&o.anchor.origin.isEmpty()){o.anchor.origin.remove();const d=l8();d.add(u.origin.getKey()),cs(d)}else u.origin.remove();return}break}}if(s.type==="merge-block"){const{caret:u,block:d}=s;return e5(this,Y0(!u.origin.isEmpty()&&d.isEmpty()?Fk(ia(d,u.direction)):o.anchor,u)),this.removeText()}}const a=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&r.offset===0&&vU(this,r.getNode()))return}else{const s=a.type==="text"?a.getNode():null;if(i=r.type==="text"?r.getNode():null,s!==null&&s.isSegmented()){const u=a.offset,d=s.getTextContentSize();if(s.is(i)||e&&u!==d||!e&&u!==0)return void xU(s,e,u)}else if(i!==null&&i.isSegmented()){const u=r.offset,d=i.getTextContentSize();if(i.is(s)||e&&u!==0||!e&&u!==d)return void xU(i,e,u)}(function(u,d){const m=u.anchor,v=u.focus,_=m.getNode(),O=v.getNode();if(_===O&&m.type==="text"&&v.type==="text"){const E=m.offset,A=v.offset,M=E<A,L=M?E:A,$=M?A:E,N=$-1;L!==N&&(function(F){return!(Wee(F)||jMe(F))})(_.getTextContent().slice(L,$))&&(d?v.set(v.key,N,v.type):m.set(m.key,N,m.type))}})(this,e)}}if(this.removeText(),e&&!n&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&ta(r.getParent())&&r.getPreviousSibling()===null&&vU(this,r)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){const n=this.anchor,r=n.getNode();if(this.forwardDeletion(n,r,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function ss(t){return t instanceof uI}function yU(t){const e=t.offset;if(t.type==="text")return e;const n=t.getNode();return e===n.getChildrenSize()?n.getTextContent().length:0}function iz(t){const e=t.getStartEndPoints();if(e===null)return[0,0];const[n,r]=e;return n.type==="element"&&r.type==="element"&&n.key===r.key&&n.offset===r.offset?[0,0]:[yU(n),yU(r)]}function vU(t,e){for(let n=e;n;n=n.getParent()){if(It(n)){if(n.collapseAtStart(t))return!0;if(ra(n))break}if(n.getPreviousSibling())break}return!1}const jMe=(()=>{try{const t=new RegExp("\\p{Emoji}","u"),e=t.test.bind(t);if(e("")&&e("#")&&e(""))return e}catch{}return()=>!1})();function xU(t,e,n){const r=t,i=r.getTextContent().split(/(?=\s)/g),o=i.length;let a=0,s=0;for(let d=0;d<o;d++){const m=d===o-1;if(s=a,a+=i[d].length,e&&a===n||a>n||m){i.splice(d,1),m&&(s=void 0);break}}const u=i.join("").trim();u===""?r.remove():(r.setTextContent(u),r.select(s,s))}function _U(t,e,n,r){let i,o=e;if(Ko(t)){let a=!1;const s=t.childNodes,u=s.length,d=r._blockCursorElement;o===u&&(a=!0,o=u-1);let m=s[o],v=!1;if(m===d)m=s[o+1],v=!0;else if(d!==null){const _=d.parentNode;t===_&&e>Array.prototype.indexOf.call(_.children,d)&&o--}if(i=hw(m),gn(i))o=hm(i,a?"next":"previous");else{let _=hw(t);if(_===null)return null;if(It(_)){const O=r.getElementByKey(_.getKey());O===null&&ln(214),[_,o]=_.getDOMSlot(O).resolveChildIndex(_,O,t,e),It(_)||ln(215),a&&o>=_.getChildrenSize()&&(o=Math.max(0,_.getChildrenSize()-1));let A=_.getChildAtIndex(o);if(It(A)&&(function(M,L,$){const N=M.getParent();return $===null||N===null||!N.canBeEmpty()||N!==$.getNode()})(A,0,n)){const M=a?A.getLastDescendant():A.getFirstDescendant();M===null?_=A:(A=M,_=It(A)?A:A.getParentOrThrow()),o=0}gn(A)?(i=A,_=null,o=hm(A,a?"next":"previous")):A!==_&&a&&!v&&(It(_)||ln(216),o=Math.min(_.getChildrenSize(),o+1))}else{const O=_.getIndexWithinParent();o=e===0&&Ti(_)&&hw(t)===_?O:O+1,_=_.getParentOrThrow()}if(It(_))return ym(_.__key,o,"element")}}else i=hw(t);return gn(i)?ym(i.__key,hm(i,o,"clamp"),"text"):null}function bU(t,e,n){const r=t.offset,i=t.getNode();if(r===0){const o=i.getPreviousSibling(),a=i.getParent();if(e){if((n||!e)&&o===null&&It(a)&&a.isInline()){const s=a.getPreviousSibling();gn(s)&&t.set(s.__key,s.getTextContent().length,"text")}}else It(o)&&!n&&o.isInline()?t.set(o.__key,o.getChildrenSize(),"element"):gn(o)&&t.set(o.__key,o.getTextContent().length,"text")}else if(r===i.getTextContent().length){const o=i.getNextSibling(),a=i.getParent();if(e&&It(o)&&o.isInline())t.set(o.__key,0,"element");else if((n||e)&&o===null&&It(a)&&a.isInline()&&!a.canInsertTextAfter()){const s=a.getNextSibling();gn(s)&&t.set(s.__key,0,"text")}}}function Pee(t,e,n){if(t.type==="text"&&e.type==="text"){const r=t.isBefore(e),i=t.is(e);bU(t,r,i),bU(e,!r,i),i&&e.set(t.key,t.offset,t.type);const o=ls();if(o.isComposing()&&o._compositionKey!==t.key&&Kt(n)){const a=n.anchor,s=n.focus;t.set(a.key,a.offset,a.type,!0),e.set(s.key,s.offset,s.type,!0)}}}function Mee(t,e,n,r,i,o){if(t===null||n===null||!Nk(i,t,n))return null;const a=_U(t,e,Kt(o)?o.anchor:null,i);if(a===null)return null;const s=_U(n,r,Kt(o)?o.focus:null,i);if(s===null)return null;if(a.type==="element"&&s.type==="element"){const u=hw(t),d=hw(n);if(Ti(u)&&Ti(d))return null}return Pee(a,s,o),[a,s]}function eM(t){return It(t)&&!t.isInline()}function Ree(t,e,n,r,i,o){const a=dv(),s=new J_(ym(t,e,i),ym(n,r,o),0,"");return s.dirty=!0,a._selection=s,s}function KO(){const t=ym("root",0,"element"),e=ym("root",0,"element");return new J_(t,e,0,"")}function l8(){return new uI(new Set)}function c8(t,e,n,r){const i=n._window;if(i===null)return null;const o=r||i.event,a=o?o.type:void 0,s=a==="selectionchange",u=!j4&&(s||a==="beforeinput"||a==="compositionstart"||a==="compositionend"||a==="click"&&o&&o.detail===3||a==="drop"||a===void 0);let d,m,v,_;if(Kt(t)&&!u)return t.clone();if(e===null)return null;if(d=e.anchorNode,m=e.focusNode,v=e.anchorOffset,_=e.focusOffset,s&&Kt(t)&&!Nk(n,d,m))return t.clone();const O=Mee(d,v,m,_,n,t);if(O===null)return null;const[E,A]=O;return new J_(E,A,Kt(t)?t.format:0,Kt(t)?t.style:"")}function cn(){return dv()._selection}function eb(){return ls()._editorState._selection}function tM(t,e,n,r=1){const i=t.anchor,o=t.focus,a=i.getNode(),s=o.getNode();if(!e.is(a)&&!e.is(s))return;const u=e.__key;if(t.isCollapsed()){const d=i.offset;if(n<=d&&r>0||n<d&&r<0){const m=Math.max(0,d+r);i.set(u,m,"element"),o.set(u,m,"element"),wU(t)}}else{const d=t.isBackward(),m=d?o:i,v=m.getNode(),_=d?i:o,O=_.getNode();if(e.is(v)){const E=m.offset;(n<=E&&r>0||n<E&&r<0)&&m.set(u,Math.max(0,E+r),"element")}if(e.is(O)){const E=_.offset;(n<=E&&r>0||n<E&&r<0)&&_.set(u,Math.max(0,E+r),"element")}}wU(t)}function wU(t){const e=t.anchor,n=e.offset,r=t.focus,i=r.offset,o=e.getNode(),a=r.getNode();if(t.isCollapsed()){if(!It(o))return;const s=o.getChildrenSize(),u=n>=s,d=u?o.getChildAtIndex(s-1):o.getChildAtIndex(n);if(gn(d)){let m=0;u&&(m=d.getTextContentSize()),e.set(d.__key,m,"text"),r.set(d.__key,m,"text")}}else{if(It(o)){const s=o.getChildrenSize(),u=n>=s,d=u?o.getChildAtIndex(s-1):o.getChildAtIndex(n);if(gn(d)){let m=0;u&&(m=d.getTextContentSize()),e.set(d.__key,m,"text")}}if(It(a)){const s=a.getChildrenSize(),u=i>=s,d=u?a.getChildAtIndex(s-1):a.getChildAtIndex(i);if(gn(d)){let m=0;u&&(m=d.getTextContentSize()),r.set(d.__key,m,"text")}}}}function nM(t,e,n,r,i){let o=null,a=0,s=null;r!==null?(o=r.__key,gn(r)?(a=r.getTextContentSize(),s="text"):It(r)&&(a=r.getChildrenSize(),s="element")):i!==null&&(o=i.__key,gn(i)?s="text":It(i)&&(s="element")),o!==null&&s!==null?t.set(o,a,s):(a=e.getIndexWithinParent(),a===-1&&(a=n.getChildrenSize()),t.set(n.__key,a,"element"))}function OU(t,e,n,r,i){t.type==="text"?t.set(n,t.offset+(e?0:i),"text"):t.offset>r.getIndexWithinParent()&&t.set(t.key,t.offset-1,"element")}function Iee(t,e,n,r,i){try{t.setBaseAndExtent(e,n,r,i)}catch{}}function VMe(t,e,n,r,i,o,a){const s=r.anchorNode,u=r.focusNode,d=r.anchorOffset,m=r.focusOffset,v=document.activeElement;if(i.has(Bee)&&v!==o||v!==null&&m8(v))return;if(!Kt(e))return void(t!==null&&Nk(n,s,u)&&r.removeAllRanges());const _=e.anchor,O=e.focus,E=_.key,A=O.key,M=P_(n,E),L=P_(n,A),$=_.offset,N=O.offset,F=e.format,Q=e.style,W=e.isCollapsed();let H=M,te=L,ne=!1;if(_.type==="text"){H=sO(M);const fe=_.getNode();ne=fe.getFormat()!==F||fe.getStyle()!==Q}else Kt(t)&&t.anchor.type==="text"&&(ne=!0);var ce,we,re,se,be;if(O.type==="text"&&(te=sO(L)),H!==null&&te!==null&&(W&&(t===null||ne||Kt(t)&&(t.format!==F||t.style!==Q))&&(ce=F,we=Q,re=$,se=E,be=performance.now(),wee=[ce,we,re,se,be]),d!==$||m!==N||s!==H||u!==te||r.type==="Range"&&W||(v!==null&&o.contains(v)||o.focus({preventScroll:!0}),_.type==="element"))){if(Iee(r,H,$,te,N),!i.has(HMe)&&e.isCollapsed()&&o!==null&&o===document.activeElement){const fe=Kt(e)&&e.anchor.type==="element"?H.childNodes[$]||null:r.rangeCount>0?r.getRangeAt(0):null;if(fe!==null){let ve;if(fe instanceof Text){const Me=document.createRange();Me.selectNode(fe),ve=Me.getBoundingClientRect()}else ve=fe.getBoundingClientRect();(function(Me,Ne,Qe){const Ce=Yee(Qe),Ae=w8(Ce);if(Ce===null||Ae===null)return;let{top:Xe,bottom:ke}=Ne,ft=0,pt=0,lt=Qe;for(;lt!==null;){const ot=lt===Ce.body;if(ot)ft=0,pt=gd(Me).innerHeight;else{const Et=lt.getBoundingClientRect();ft=Et.top,pt=Et.bottom}let yt=0;if(Xe<ft?yt=-(ft-Xe):ke>pt&&(yt=ke-pt),yt!==0)if(ot)Ae.scrollBy(0,yt);else{const Et=lt.scrollTop;lt.scrollTop+=yt;const Tt=lt.scrollTop-Et;Xe-=Tt,ke-=Tt}if(ot)break;lt=Bk(lt)}})(n,ve,o)}}tz=!0}}function JO(t){let e=cn()||eb();e===null&&(e=Ur().selectEnd()),e.insertNodes(t)}function Z3(t){let e=t;t.isCollapsed()||e.removeText();const n=cn();Kt(n)&&(e=n),Kt(e)||ln(161);const r=e.anchor;let i=r.getNode(),o=r.offset;for(;!td(i);){const a=i;if([i,o]=QMe(i,o),a.is(i))break}return o}function QMe(t,e){const n=t.getParent();if(!n){const i=Oi();return Ur().append(i),i.select(),[Ur(),0]}if(gn(t)){const i=t.splitText(e);if(i.length===0)return[n,t.getIndexWithinParent()];const o=e===0?0:1;return[n,i[0].getIndexWithinParent()+o]}if(!It(t)||e===0)return[n,t.getIndexWithinParent()];const r=t.getChildAtIndex(e);if(r){const i=new J_(ym(t.__key,e,"element"),ym(t.__key,e,"element"),0,""),o=t.insertNewAfter(i);o&&o.append(r,...r.getNextSiblings())}return[n,t.getIndexWithinParent()+1]}function SU(t,e,n,r,i="decorators-and-blocks"){if(e==="move"&&r==="character"&&!t.isCollapsed()){const[m,v]=n===t.isBackward()?[t.focus,t.anchor]:[t.anchor,t.focus];return v.set(m.key,m.offset,m.type),!0}const o=xm(t.focus,n?"previous":"next"),a=r==="lineboundary",s=e==="move";let u=o,d=i==="decorators-and-blocks";if(!ote(u)){for(const m of u){d=!1;const{origin:v}=m;if(!Ti(v)||v.isIsolated()||(u=m,!a||!v.isInline()))break}if(d)for(const m of E8(o).iterNodeCarets(e==="extend"?"shadowRoot":"root")){if(hd(m))m.origin.isInline()||(u=m);else{if(It(m.origin))continue;Ti(m.origin)&&!m.origin.isInline()&&(u=m)}break}}if(u===o)return!1;if(s&&!a&&Ti(u.origin)&&u.origin.isKeyboardSelectable()){const m=l8();return m.add(u.origin.getKey()),cs(m),!0}return u=ah(u),s&&D_(t.anchor,u),D_(t.focus,u),d||!a}let $a=null,za=null,gu=!1,q3=!1,YP=0;const CU={characterData:!0,childList:!0,subtree:!0};function $k(){return gu||$a!==null&&$a._readOnly}function cl(){gu&&ln(13)}function Dee(){YP>99&&ln(14)}function dv(){return $a===null&&ln(195,Lee()),$a}function ls(){return za===null&&ln(196,Lee()),za}function Lee(){let t=0;const e=new Set,n=pI.version;if(typeof window<"u")for(const i of document.querySelectorAll("[contenteditable]")){const o=gI(i);if(g8(o))t++;else if(o){let a=String(o.constructor.version||"<0.17.1");a===n&&(a+=" (separately built, likely a bundler configuration issue)"),e.add(a)}}let r=` Detected on the page: ${t} compatible editor(s) with version ${n}`;return e.size&&(r+=` and incompatible editors with versions ${Array.from(e).join(", ")}`),r}function UMe(){return za}function TU(t,e,n){const r=e.__type,i=jee(t,r);let o=n.get(r);o===void 0&&(o=Array.from(i.transforms),n.set(r,o));const a=o.length;for(let s=0;s<a&&(o[s](e),e.isAttached());s++);}function kU(t,e){return t!==void 0&&t.__key!==e&&t.isAttached()}function $ee(t,e){if(!e)return;const n=t._updateTags;let r=e;Array.isArray(e)||(r=[e]);for(const i of r)n.add(i)}function ZMe(t){return u8(t,ls()._nodes)}function u8(t,e){const n=t.type,r=e.get(n);r===void 0&&ln(17,n);const i=r.klass;t.type!==i.getType()&&ln(18,i.name);const o=i.importJSON(t),a=t.children;if(It(o)&&Array.isArray(a))for(let s=0;s<a.length;s++){const u=u8(a[s],e);o.append(u)}return o}function EU(t,e,n){const r=$a,i=gu,o=za;$a=e,gu=!0,za=t;try{return n()}finally{$a=r,gu=i,za=o}}function Vg(t,e){const n=t._pendingEditorState,r=t._rootElement,i=t._headless||r===null;if(n===null)return;const o=t._editorState,a=o._selection,s=n._selection,u=t._dirtyType!==C_,d=$a,m=gu,v=za,_=t._updating,O=t._observer;let E=null;if(t._pendingEditorState=null,t._editorState=n,!i&&u&&O!==null){za=t,$a=n,gu=!1,t._updating=!0;try{const W=t._dirtyType,H=t._dirtyElements,te=t._dirtyLeaves;O.disconnect(),E=SMe(o,n,t,W,H,te)}catch(W){if(W instanceof Error&&t._onError(W),q3)throw W;return Fee(t,null,r,n),hee(t),t._dirtyType=iO,q3=!0,Vg(t,o),void(q3=!1)}finally{O.observe(r,CU),t._updating=_,$a=d,gu=m,za=v}}n._readOnly||(n._readOnly=!0);const A=t._dirtyLeaves,M=t._dirtyElements,L=t._normalizedNodes,$=t._updateTags,N=t._deferred;u&&(t._dirtyType=C_,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements=new Map,t._normalizedNodes=new Set,t._updateTags=new Set),(function(W,H){const te=W._decorators;let ne=W._pendingDecorators||te;const ce=H._nodeMap;let we;for(we in ne)ce.has(we)||(ne===te&&(ne=Zee(W)),delete ne[we])})(t,n);const F=i?null:Df(gd(t));if(t._editable&&F!==null&&(u||s===null||s.dirty)&&r!==null&&!$.has(GMe)){za=t,$a=n;try{if(O!==null&&O.disconnect(),u||s===null||s.dirty){const W=t._blockCursorElement;W!==null&&lz(W,t,r),VMe(a,s,t,F,$,r)}(function(W,H,te){let ne=W._blockCursorElement;if(Kt(te)&&te.isCollapsed()&&te.anchor.type==="element"&&H.contains(document.activeElement)){const ce=te.anchor,we=ce.getNode(),re=ce.offset;let se=!1,be=null;if(re===we.getChildrenSize())H3(we.getChildAtIndex(re-1))&&(se=!0);else{const fe=we.getChildAtIndex(re);if(fe!==null&&H3(fe)){const ve=fe.getPreviousSibling();(ve===null||H3(ve))&&(se=!0,be=W.getElementByKey(fe.__key))}}if(se){const fe=W.getElementByKey(we.__key);return ne===null&&(W._blockCursorElement=ne=(function(ve){const Me=ve.theme,Ne=document.createElement("div");Ne.contentEditable="false",Ne.setAttribute("data-lexical-cursor","true");let Qe=Me.blockCursor;if(Qe!==void 0){if(typeof Qe=="string"){const Ce=see(Qe);Qe=Me.blockCursor=Ce}Qe!==void 0&&Ne.classList.add(...Qe)}return Ne})(W._config)),H.style.caretColor="transparent",void(be===null?fe.appendChild(ne):fe.insertBefore(ne,be))}}ne!==null&&lz(ne,W,H)})(t,r,s)}finally{O!==null&&O.observe(r,CU),za=v,$a=d}}E!==null&&(function(W,H,te,ne,ce){const we=Array.from(W._listeners.mutation),re=we.length;for(let se=0;se<re;se++){const[be,fe]=we[se];for(const ve of fe){const Me=H.get(ve);Me!==void 0&&be(Me,{dirtyLeaves:ne,prevEditorState:ce,updateTags:te})}}})(t,E,$,A,o),Kt(s)||s===null||a!==null&&a.is(s)||t.dispatchCommand(Mk,void 0);const Q=t._pendingDecorators;Q!==null&&(t._decorators=Q,t._pendingDecorators=null,zC("decorator",t,!0,Q)),(function(W,H,te){const ne=IU(H),ce=IU(te);ne!==ce&&zC("textcontent",W,!0,ce)})(t,e||o,n),zC("update",t,!0,{dirtyElements:M,dirtyLeaves:A,editorState:n,mutatedNodes:E,normalizedNodes:L,prevEditorState:e||o,tags:$}),(function(W,H){if(W._deferred=[],H.length!==0){const te=W._updating;W._updating=!0;try{for(let ne=0;ne<H.length;ne++)H[ne]()}finally{W._updating=te}}})(t,N),(function(W){const H=W._updates;if(H.length!==0){const te=H.shift();if(te){const[ne,ce]=te;hI(W,ne,ce)}}})(t)}function zC(t,e,n,...r){const i=e._updating;e._updating=n;try{const o=Array.from(e._listeners[t]);for(let a=0;a<o.length;a++)o[a].apply(null,r)}finally{e._updating=i}}function AU(t,e){const n=t._updates;let r=e||!1;for(;n.length!==0;){const i=n.shift();if(i){const[o,a]=i,s=t._pendingEditorState;let u;a!==void 0&&(u=a.onUpdate,a.skipTransforms&&(r=!0),a.discrete&&(s===null&&ln(191),s._flushSync=!0),u&&t._deferred.push(u),$ee(t,a.tag)),s==null?hI(t,o,a):o()}}return r}function hI(t,e,n){const r=t._updateTags;let i,o=!1,a=!1;n!==void 0&&(i=n.onUpdate,$ee(t,n.tag),o=n.skipTransforms||!1,a=n.discrete||!1),i&&t._deferred.push(i);const s=t._editorState;let u=t._pendingEditorState,d=!1;(u===null||u._readOnly)&&(u=t._pendingEditorState=zee(u||s),d=!0),u._flushSync=a;const m=$a,v=gu,_=za,O=t._updating;$a=u,gu=!1,t._updating=!0,za=t;const E=t._headless||t.getRootElement()===null;p8(null);try{d&&(E?s._selection!==null&&(u._selection=s._selection.clone()):u._selection=(function($,N){const F=$.getEditorState()._selection,Q=Df(gd($));return Kt(F)||F==null?c8(F,Q,$,N):F.clone()})(t,n&&n.event||null));const M=t._compositionKey;e(),o=AU(t,o),(function($,N){const F=N.getEditorState()._selection,Q=$._selection;if(Kt(Q)){const W=Q.anchor,H=Q.focus;let te;if(W.type==="text"&&(te=W.getNode(),te.selectionTransform(F,Q)),H.type==="text"){const ne=H.getNode();te!==ne&&ne.selectionTransform(F,Q)}}})(u,t),t._dirtyType!==C_&&(o?(function($,N){const F=N._dirtyLeaves,Q=$._nodeMap;for(const W of F){const H=Q.get(W);gn(H)&&H.isAttached()&&H.isSimpleText()&&!H.isUnmergeable()&&sU(H)}})(u,t):(function($,N){const F=N._dirtyLeaves,Q=N._dirtyElements,W=$._nodeMap,H=L0(),te=new Map;let ne=F,ce=ne.size,we=Q,re=we.size;for(;ce>0||re>0;){if(ce>0){N._dirtyLeaves=new Set;for(const se of ne){const be=W.get(se);gn(be)&&be.isAttached()&&be.isSimpleText()&&!be.isUnmergeable()&&sU(be),be!==void 0&&kU(be,H)&&TU(N,be,te),F.add(se)}if(ne=N._dirtyLeaves,ce=ne.size,ce>0){YP++;continue}}N._dirtyLeaves=new Set,N._dirtyElements=new Map,we.delete("root")&&we.set("root",!0);for(const se of we){const be=se[0],fe=se[1];if(Q.set(be,fe),!fe)continue;const ve=W.get(be);ve!==void 0&&kU(ve,H)&&TU(N,ve,te)}ne=N._dirtyLeaves,ce=ne.size,we=N._dirtyElements,re=we.size,YP++}N._dirtyLeaves=F,N._dirtyElements=Q})(u,t),AU(t),(function($,N,F,Q){const W=$._nodeMap,H=N._nodeMap,te=[];for(const[ne]of Q){const ce=H.get(ne);ce!==void 0&&(ce.isAttached()||(It(ce)&&lee(ce,ne,W,H,te,Q),W.has(ne)||Q.delete(ne),te.push(ne)))}for(const ne of te)H.delete(ne);for(const ne of F){const ce=H.get(ne);ce===void 0||ce.isAttached()||(W.has(ne)||F.delete(ne),H.delete(ne))}})(s,u,t._dirtyLeaves,t._dirtyElements)),M!==t._compositionKey&&(u._flushSync=!0);const L=u._selection;if(Kt(L)){const $=u._nodeMap,N=L.anchor.key,F=L.focus.key;$.get(N)!==void 0&&$.get(F)!==void 0||ln(19)}else ss(L)&&L._nodes.size===0&&(u._selection=null)}catch(M){return M instanceof Error&&t._onError(M),t._pendingEditorState=s,t._dirtyType=iO,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),void Vg(t)}finally{$a=m,gu=v,za=_,t._updating=O,YP=0}t._dirtyType!==C_||t._deferred.length>0||(function(M,L){const $=L.getEditorState()._selection,N=M._selection;if(N!==null){if(N.dirty||!N.is($))return!0}else if($!==null)return!0;return!1})(u,t)?u._flushSync?(u._flushSync=!1,Vg(t)):d&&KMe((()=>{Vg(t)})):(u._flushSync=!1,d&&(r.clear(),t._deferred=[],t._pendingEditorState=null))}function eh(t,e,n){za===t&&n===void 0?e():hI(t,e,n)}class NC{constructor(e,n,r){this.element=e,this.before=n||null,this.after=r||null}withBefore(e){return new NC(this.element,e,this.after)}withAfter(e){return new NC(this.element,this.before,e)}withElement(e){return this.element===e?this:new NC(e,this.before,this.after)}insertChild(e){const n=this.before||this.getManagedLineBreak();return n!==null&&n.parentElement!==this.element&&ln(222),this.element.insertBefore(e,n),this}removeChild(e){return e.parentElement!==this.element&&ln(223),this.element.removeChild(e),this}replaceChild(e,n){return n.parentElement!==this.element&&ln(224),this.element.replaceChild(e,n),this}getFirstChild(){const e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){if(e===null)this.removeManagedLineBreak();else{const n=e==="decorator"&&(rO||vT);this.insertManagedLineBreak(n)}}removeManagedLineBreak(){const e=this.getManagedLineBreak();if(e){const n=this.element,r=e.nodeName==="IMG"?e.nextSibling:null;r&&n.removeChild(r),n.removeChild(e),n.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){const n=this.getManagedLineBreak();if(n){if(e===(n.nodeName==="IMG"))return;this.removeManagedLineBreak()}const r=this.element,i=this.before,o=document.createElement("br");if(r.insertBefore(o,i),e){const a=document.createElement("img");a.setAttribute("data-lexical-linebreak","true"),a.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",a.alt="",r.insertBefore(a,o),r.__lexicalLineBreak=a}else r.__lexicalLineBreak=o}getFirstChildOffset(){let e=0;for(let n=this.after;n!==null;n=n.previousSibling)e++;return e}resolveChildIndex(e,n,r,i){if(r===this.element){const u=this.getFirstChildOffset();return[e,Math.min(u+e.getChildrenSize(),Math.max(u,i))]}const o=PU(n,r);o.push(i);const a=PU(n,this.element);let s=e.getIndexWithinParent();for(let u=0;u<a.length;u++){const d=o[u],m=a[u];if(d===void 0||d<m)break;if(d>m){s+=1;break}}return[e.getParentOrThrow(),s]}}function PU(t,e){const n=[];let r=e;for(;r!==t&&r!==null;r=r.parentNode){let i=0;for(let o=r.previousSibling;o!==null;o=o.previousSibling)i++;n.push(i)}return r!==t&&ln(225),n.reverse()}class xu extends XO{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const e=this.getFormat();return dMe[e]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const e=[];let n=this.getFirstChild();for(;n!==null;)e.push(n),n=n.getNextSibling();return e}getChildrenKeys(){const e=[];let n=this.getFirstChild();for(;n!==null;)e.push(n.__key),n=n.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const e=ls()._dirtyElements;return e!==null&&e.has(this.__key)}isLastChild(){const e=this.getLatest(),n=this.getParentOrThrow().getLastChild();return n!==null&&n.is(e)}getAllTextNodes(){const e=[];let n=this.getFirstChild();for(;n!==null;){if(gn(n)&&e.push(n),It(n)){const r=n.getAllTextNodes();e.push(...r)}n=n.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;It(e);){const n=e.getFirstChild();if(n===null)break;e=n}return e}getLastDescendant(){let e=this.getLastChild();for(;It(e);){const n=e.getLastChild();if(n===null)break;e=n}return e}getDescendantByIndex(e){const n=this.getChildren(),r=n.length;if(e>=r){const o=n[r-1];return It(o)&&o.getLastDescendant()||o||null}const i=n[e];return It(i)&&i.getFirstDescendant()||i||null}getFirstChild(){const e=this.getLatest().__first;return e===null?null:Fi(e)}getFirstChildOrThrow(){const e=this.getFirstChild();return e===null&&ln(45,this.__key),e}getLastChild(){const e=this.getLatest().__last;return e===null?null:Fi(e)}getLastChildOrThrow(){const e=this.getLastChild();return e===null&&ln(96,this.__key),e}getChildAtIndex(e){const n=this.getChildrenSize();let r,i;if(e<n/2){for(r=this.getFirstChild(),i=0;r!==null&&i<=e;){if(i===e)return r;r=r.getNextSibling(),i++}return null}for(r=this.getLastChild(),i=n-1;r!==null&&i>=e;){if(i===e)return r;r=r.getPreviousSibling(),i--}return null}getTextContent(){let e="";const n=this.getChildren(),r=n.length;for(let i=0;i<r;i++){const o=n[i];e+=o.getTextContent(),It(o)&&i!==r-1&&!o.isInline()&&(e+=ry)}return e}getTextContentSize(){let e=0;const n=this.getChildren(),r=n.length;for(let i=0;i<r;i++){const o=n[i];e+=o.getTextContentSize(),It(o)&&i!==r-1&&!o.isInline()&&(e+=ry.length)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(e!==""){const n=KQ[e];return!!(this.getFormat()&n)}return!1}hasTextFormat(e){const n=T_[e];return!!(this.getTextFormat()&n)}getFormatFlags(e,n){return oM(this.getLatest().__textFormat,e,n)}getTextStyle(){return this.getLatest().__textStyle}select(e,n){cl();const r=cn();let i=e,o=n;const a=this.getChildrenSize();if(!this.canBeEmpty()){if(e===0&&n===0){const u=this.getFirstChild();if(gn(u)||It(u))return u.select(0,0)}else if(!(e!==void 0&&e!==a||n!==void 0&&n!==a)){const u=this.getLastChild();if(gn(u)||It(u))return u.select()}}i===void 0&&(i=a),o===void 0&&(o=a);const s=this.__key;return Kt(r)?(r.anchor.set(s,i,"element"),r.focus.set(s,o,"element"),r.dirty=!0,r):Ree(s,i,s,o,"element","element")}selectStart(){const e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){const e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){const e=this.getWritable();return this.getChildren().forEach((n=>n.remove())),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){const n=this.getWritable();return n.__dir=e,n}setFormat(e){return this.getWritable().__format=e!==""?KQ[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){const n=this.getWritable();return n.__textFormat=e,n}setTextStyle(e){const n=this.getWritable();return n.__textStyle=e,n}setIndent(e){return this.getWritable().__indent=e,this}splice(e,n,r){const i=r.length,o=this.getChildrenSize(),a=this.getWritable();e+n<=o||ln(226,String(e),String(n),String(o));const s=a.__key,u=[],d=[],m=this.getChildAtIndex(e+n);let v=null,_=o-n+i;if(e!==0)if(e===o)v=this.getLastChild();else{const E=this.getChildAtIndex(e);E!==null&&(v=E.getPreviousSibling())}if(n>0){let E=v===null?this.getFirstChild():v.getNextSibling();for(let A=0;A<n;A++){E===null&&ln(100);const M=E.getNextSibling(),L=E.__key;p_(E.getWritable()),d.push(L),E=M}}let O=v;for(let E=0;E<i;E++){const A=r[E];O!==null&&A.is(O)&&(v=O=O.getPreviousSibling());const M=A.getWritable();M.__parent===s&&_--,p_(M);const L=A.__key;if(O===null)a.__first=L,M.__prev=null;else{const $=O.getWritable();$.__next=L,M.__prev=$.__key}A.__key===s&&ln(76),M.__parent=s,u.push(L),O=A}if(e+n===o)O!==null&&(O.getWritable().__next=null,a.__last=O.__key);else if(m!==null){const E=m.getWritable();if(O!==null){const A=O.getWritable();E.__prev=O.__key,A.__next=m.__key}else E.__prev=null}if(a.__size=_,d.length){const E=cn();if(Kt(E)){const A=new Set(d),M=new Set(u),{anchor:L,focus:$}=E;MU(L,A,M)&&nM(L,L.getNode(),this,v,m),MU($,A,M)&&nM($,$.getNode(),this,v,m),_!==0||this.canBeEmpty()||ra(this)||this.remove()}}return a}getDOMSlot(e){return new NC(e)}exportDOM(e){const{element:n}=super.exportDOM(e);if(Ko(n)){const r=this.getIndent();r>0&&(n.style.paddingInlineStart=40*r+"px");const i=this.getDirection();i&&(n.dir=i)}return{element:n}}exportJSON(){const e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},n=this.getTextFormat(),r=this.getTextStyle();return n!==0&&(e.textFormat=n),r!==""&&(e.textStyle=r),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,n){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,n,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,n){const r=this.getDOMSlot(e);let i=r.getFirstChild();for(let o=this.getFirstChild();o;o=o.getNextSibling()){const a=n.getElementByKey(o.getKey());a!==null&&(i==null?(r.insertChild(a),i=a):i!==a&&r.replaceChild(a,i),i=i.nextSibling)}}}function It(t){return t instanceof xu}function MU(t,e,n){let r=t.getNode();for(;r;){const i=r.__key;if(e.has(i)&&!n.has(i))return!0;r=r.getParent()}return!1}class gy extends XO{decorate(e,n){ln(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Ti(t){return t instanceof gy}class zk extends xu{static getType(){return"root"}static clone(){return new zk}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){ln(51)}getTextContent(){const e=this.__cachedText;return!$k()&&ls()._dirtyType!==C_||e===null?super.getTextContent():e}remove(){ln(52)}replace(e){ln(53)}insertBefore(e){ln(54)}insertAfter(e){ln(55)}updateDOM(e,n){return!1}splice(e,n,r){for(const i of r)It(i)||Ti(i)||ln(282);return super.splice(e,n,r)}static importJSON(e){return Ur().updateFromJSON(e)}collapseAtStart(){return!0}}function ta(t){return t instanceof zk}function zee(t){return new dI(new Map(t._nodeMap))}function h8(){return new dI(new Map([["root",new zk]]))}function Nee(t){const e=t.exportJSON(),n=t.constructor;if(e.type!==n.getType()&&ln(130,n.name),It(t)){const r=e.children;Array.isArray(r)||ln(59,n.name);const i=t.getChildren();for(let o=0;o<i.length;o++){const a=Nee(i[o]);r.push(a)}}return e}class dI{constructor(e,n){this._nodeMap=e,this._selection=n||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(e,n){return EU(n&&n.editor||null,this,e)}clone(e){const n=new dI(this._nodeMap,e===void 0?this._selection:e);return n._readOnly=!0,n}toJSON(){return EU(null,this,(()=>({root:Nee(Ur())})))}}const rM="historic",qMe="history-push",KP="history-merge",WMe="paste",Bee="collaboration",HMe="skip-scroll-into-view",GMe="skip-dom-selection";class d8 extends xu{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class eS extends xu{static getType(){return"paragraph"}static clone(e){return new eS(e.__key)}createDOM(e){const n=document.createElement("p"),r=Aw(e.theme,"paragraph");return r!==void 0&&n.classList.add(...r),n}updateDOM(e,n,r){return!1}static importDOM(){return{p:e=>({conversion:XMe,priority:0})}}exportDOM(e){const{element:n}=super.exportDOM(e);if(Ko(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r)}return{element:n}}static importJSON(e){return Oi().updateFromJSON(e)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(e,n){const r=Oi();r.setTextFormat(e.format),r.setTextStyle(e.style);const i=this.getDirection();return r.setDirection(i),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,n),r}collapseAtStart(){const e=this.getChildren();if(e.length===0||gn(e[0])&&e[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function XMe(t){const e=Oi();return t.style&&(e.setFormat(t.style.textAlign),S8(t,e)),{node:e}}function Oi(){return vh(new eS)}function fI(t){return t instanceof eS}const Lr=0,bo=1,iM=3,gh=4;function Fee(t,e,n,r){const i=t._keyToDOMMap;i.clear(),t._editorState=h8(),t._pendingEditorState=r,t._compositionKey=null,t._dirtyType=C_,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),t._normalizedNodes=new Set,t._updateTags=new Set,t._updates=[],t._blockCursorElement=null;const o=t._observer;o!==null&&(o.disconnect(),t._observer=null),e!==null&&(e.textContent=""),n!==null&&(n.textContent="",i.set("root",n))}function f8(t){const e=t||{},n=UMe(),r=e.theme||{},i=t===void 0?n:e.parentEditor||null,o=e.disableEvents||!1,a=h8(),s=e.namespace||(i!==null?i._config.namespace:Hee()),u=e.editorState,d=[zk,Tm,Dk,Lk,eS,d8,...e.nodes||[]],{onError:m,html:v}=e,_=e.editable===void 0||e.editable;let O;if(t===void 0&&n!==null)O=n._nodes;else{O=new Map;for(let A=0;A<d.length;A++){let M=d[A],L=null,$=null;if(typeof M!="function"){const H=M;M=H.replace,L=H.with,$=H.withKlass||null}const{ownNodeConfig:N}=_I(M),F=M.getType(),Q=M.transform(),W=new Set;N&&N.$transform&&W.add(N.$transform),Q!==null&&W.add(Q),O.set(F,{exportDOM:v&&v.export?v.export.get(M):void 0,klass:M,replace:L,replaceWithKlass:$,sharedNodeState:V4(d[A]),transforms:W})}}const E=new pI(a,i,O,{disableEvents:o,namespace:s,theme:r},m||console.error,(function(A,M){const L=new Map,$=new Set,N=F=>{Object.keys(F).forEach((Q=>{let W=L.get(Q);W===void 0&&(W=[],L.set(Q,W)),W.push(F[Q])}))};return A.forEach((F=>{const Q=F.klass.importDOM;if(Q==null||$.has(Q))return;$.add(Q);const W=Q.call(F.klass);W!==null&&N(W)})),M&&N(M),L})(O,v?v.import:void 0),_,t);return u!==void 0&&(E._pendingEditorState=u,E._dirtyType=iO),E}class pI{constructor(e,n,r,i,o,a,s,u){this._createEditorArgs=u,this._parentEditor=n,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=C_,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=Hee(),this._onError=o,this._htmlConversions=a,this._editable=s,this._headless=n!==null&&n._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(e){const n=this._listeners.update;return n.add(e),()=>{n.delete(e)}}registerEditableListener(e){const n=this._listeners.editable;return n.add(e),()=>{n.delete(e)}}registerDecoratorListener(e){const n=this._listeners.decorator;return n.add(e),()=>{n.delete(e)}}registerTextContentListener(e){const n=this._listeners.textcontent;return n.add(e),()=>{n.delete(e)}}registerRootListener(e){const n=this._listeners.root;return e(this._rootElement,null),n.add(e),()=>{e(null,this._rootElement),n.delete(e)}}registerCommand(e,n,r){r===void 0&&ln(35);const i=this._commands;i.has(e)||i.set(e,[new Set,new Set,new Set,new Set,new Set]);const o=i.get(e);o===void 0&&ln(36,String(e));const a=o[r];return a.add(n),()=>{a.delete(n),o.every((s=>s.size===0))&&i.delete(e)}}registerMutationListener(e,n,r){const i=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,o=this._listeners.mutation;let a=o.get(n);a===void 0&&(a=new Set,o.set(n,a)),a.add(i);const s=r&&r.skipInitialization;return s!==void 0&&s||this.initializeMutationListener(n,i),()=>{a.delete(i),a.size===0&&o.delete(n)}}getRegisteredNode(e){const n=this._nodes.get(e.getType());return n===void 0&&ln(37,e.name),n}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,n){const r=this._editorState,i=FU(r).get(n.getType());if(!i)return;const o=new Map;for(const a of i.keys())o.set(a,"created");o.size>0&&e(o,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,n){const r=this.getRegisteredNode(e);return r.transforms.add(n),r}registerNodeTransform(e,n){const r=this.registerNodeTransformToKlass(e,n),i=[r],o=r.replaceWithKlass;if(o!=null){const a=this.registerNodeTransformToKlass(o,n);i.push(a)}return(function(a,s){const u=FU(a.getEditorState()),d=[];for(const m of s){const v=u.get(m);v&&d.push(v)}d.length!==0&&a.update((()=>{for(const m of d)for(const v of m.keys()){const _=Fi(v);_&&_.markDirty()}}),a._pendingEditorState===null?{tag:KP}:void 0)})(this,i.map((a=>a.klass.getType()))),()=>{i.forEach((a=>a.transforms.delete(n)))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,n){return $n(this,e,n)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const n=this._rootElement;if(e!==n){const r=Aw(this._config.theme,"root"),i=this._pendingEditorState||this._editorState;if(this._rootElement=e,Fee(this,n,e,i),n!==null&&(this._config.disableEvents||IMe(n),r!=null&&n.classList.remove(...r)),e!==null){const o=w8(e),a=e.style;a.userSelect="text",a.whiteSpace="pre-wrap",a.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=o,this._dirtyType=iO,hee(this),this._updateTags.add(KP),Vg(this),this._config.disableEvents||(function(s,u){const d=s.ownerDocument,m=J5.get(d);(m===void 0||m<1)&&d.addEventListener("selectionchange",kee),J5.set(d,(m||0)+1),s.__lexicalEditor=u;const v=Tee(s);for(let _=0;_<ez.length;_++){const[O,E]=ez[_],A=typeof E=="function"?M=>{dU(M)||(hU(M),(u.isEditable()||O==="click")&&E(M,u))}:M=>{if(dU(M))return;hU(M);const L=u.isEditable();switch(O){case"cut":return L&&$n(u,s8,M);case"copy":return $n(u,sI,M);case"paste":return L&&$n(u,Rk,M);case"dragstart":return L&&$n(u,oI,M);case"dragover":return L&&$n(u,o8,M);case"dragend":return L&&$n(u,AMe,M);case"focus":return L&&$n(u,aI,M);case"blur":return L&&$n(u,lI,M);case"drop":return L&&$n(u,i8,M)}};s.addEventListener(O,A),v.push((()=>{s.removeEventListener(O,A)}))}})(e,this),r!=null&&e.classList.add(...r)}else this._window=null,this._updateTags.add(KP),Vg(this);zC("root",this,!1,e,n)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,n){e.isEmpty()&&ln(38);let r=e;r._readOnly&&(r=zee(e),r._selection=e._selection?e._selection.clone():null),uee(this);const i=this._pendingEditorState,o=this._updateTags,a=n!==void 0?n.tag:null;i===null||i.isEmpty()||(a!=null&&o.add(a),Vg(this)),this._pendingEditorState=r,this._dirtyType=iO,this._dirtyElements.set("root",!1),this._compositionKey=null,a!=null&&o.add(a),this._updating||Vg(this)}parseEditorState(e,n){return(function(r,i,o){const a=h8(),s=$a,u=gu,d=za,m=i._dirtyElements,v=i._dirtyLeaves,_=i._cloneNotNeeded,O=i._dirtyType;i._dirtyElements=new Map,i._dirtyLeaves=new Set,i._cloneNotNeeded=new Set,i._dirtyType=0,$a=a,gu=!1,za=i,p8(null);try{const E=i._nodes;u8(r.root,E),o&&o(),a._readOnly=!0}catch(E){E instanceof Error&&i._onError(E)}finally{i._dirtyElements=m,i._dirtyLeaves=v,i._cloneNotNeeded=_,i._dirtyType=O,$a=s,gu=u,za=d}return a})(typeof e=="string"?JSON.parse(e):e,this,n)}read(e){return Vg(this),this.getEditorState().read(e,{editor:this})}update(e,n){(function(r,i,o){r._updating?r._updates.push([i,o]):hI(r,i,o)})(this,e,n)}focus(e,n={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),eh(this,(()=>{const i=cn(),o=Ur();i!==null?i.dirty||cs(i.clone()):o.getChildrenSize()!==0&&(n.defaultSelection==="rootStart"?o.selectStart():o.selectEnd()),Kee("focus"),nRe((()=>{r.removeAttribute("autocapitalize"),e&&e()}))})),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;e!==null&&e.blur();const n=Df(this._window);n!==null&&n.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,zC("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}pI.version="0.35.0+prod.esm";let oz=null;function p8(t){oz=t}let YMe=1;function jee(t,e){const n=mI(t,e);return n===void 0&&ln(30,e),n}function mI(t,e){return t._nodes.get(e)}const KMe=typeof queueMicrotask=="function"?queueMicrotask:t=>{Promise.resolve().then(t)};function RU(t){return Ti(vm(t))}function m8(t){const e=document.activeElement;if(!Ko(e))return!1;const n=e.nodeName;return Ti(vm(t))&&(n==="INPUT"||n==="TEXTAREA"||e.contentEditable==="true"&&gI(e)==null)}function Nk(t,e,n){const r=t.getRootElement();try{return r!==null&&r.contains(e)&&r.contains(n)&&e!==null&&!m8(e)&&y8(e)===t}catch{return!1}}function g8(t){return t instanceof pI}function y8(t){let e=t;for(;e!=null;){const n=gI(e);if(g8(n))return n;e=Bk(e)}return null}function gI(t){return t?t.__lexicalEditor:null}function f_(t){return cI(t)||t.isToken()}function Ng(t){return f_(t)||t.isSegmented()}function yy(t){return tS(t)&&t.nodeType===rMe}function JMe(t){return tS(t)&&t.nodeType===iMe}function sO(t){let e=t;for(;e!=null;){if(yy(e))return e;e=e.firstChild}return null}function oM(t,e,n){const r=T_[e];if(n!==null&&(t&r)==(n&r))return t;let i=t^r;return e==="subscript"?i&=-65:e==="superscript"?i&=-33:e==="lowercase"?(i&=-513,i&=-1025):e==="uppercase"?(i&=-257,i&=-1025):e==="capitalize"&&(i&=-257,i&=-513),i}function Vee(t){return gn(t)||Pf(t)||Ti(t)}function Qee(t,e){const n=(function(){const a=oz;return oz=null,a})();if((e=e||n&&n.__key)!=null)return void(t.__key=e);cl(),Dee();const r=ls(),i=dv(),o=""+YMe++;i._nodeMap.set(o,t),It(t)?r._dirtyElements.set(o,!0):r._dirtyLeaves.add(o),r._cloneNotNeeded.add(o),r._dirtyType=aee,t.__key=o}function p_(t){const e=t.getParent();if(e!==null){const n=t.getWritable(),r=e.getWritable(),i=t.getPreviousSibling(),o=t.getNextSibling(),a=o!==null?o.__key:null,s=i!==null?i.__key:null,u=i!==null?i.getWritable():null,d=o!==null?o.getWritable():null;i===null&&(r.__first=a),o===null&&(r.__last=s),u!==null&&(u.__next=a),d!==null&&(d.__prev=s),n.__prev=null,n.__next=null,n.__parent=null,r.__size--}}function sM(t){Dee();const e=t.getLatest(),n=e.__parent,r=dv(),i=ls(),o=r._nodeMap,a=i._dirtyElements;n!==null&&(function(u,d,m){let v=u;for(;v!==null;){if(m.has(v))return;const _=d.get(v);if(_===void 0)break;m.set(v,!1),v=_.__parent}})(n,o,a);const s=e.__key;i._dirtyType=aee,It(t)?a.set(s,!0):i._dirtyLeaves.add(s)}function ul(t){cl();const e=ls(),n=e._compositionKey;if(t!==n){if(e._compositionKey=t,n!==null){const r=Fi(n);r!==null&&r.getWritable()}if(t!==null){const r=Fi(t);r!==null&&r.getWritable()}}}function L0(){return $k()?null:ls()._compositionKey}function Fi(t,e){const n=(e||dv())._nodeMap.get(t);return n===void 0?null:n}function Uee(t,e){const n=yI(t,ls());return n!==void 0?Fi(n,e):null}function yI(t,e){return t[`__lexicalKey_${e._key}`]}function vm(t,e){let n=t;for(;n!=null;){const r=Uee(n,e);if(r!==null)return r;n=Bk(n)}return null}function Zee(t){const e=t._decorators,n=Object.assign({},e);return t._pendingDecorators=n,n}function IU(t){return t.read((()=>Ur().getTextContent()))}function Ur(){return qee(dv())}function qee(t){return t._nodeMap.get("root")}function cs(t){cl();const e=dv();t!==null&&(t.dirty=!0,t.setCachedNodes(null)),e._selection=t}function hw(t){const e=ls(),n=(function(r,i){let o=r;for(;o!=null;){const a=yI(o,i);if(a!==void 0)return a;o=Bk(o)}return null})(t,e);return n===null?t===e.getRootElement()?Fi("root"):null:Fi(n)}function Wee(t){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(t)}function v8(t){const e=[];let n=t;for(;n!==null;)e.push(n),n=n._parentEditor;return e}function Hee(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function Gee(t){return yy(t)?t.nodeValue:null}function x8(t,e,n){const r=Df(gd(e));if(r===null)return;const i=r.anchorNode;let{anchorOffset:o,focusOffset:a}=r;if(i!==null){let s=Gee(i);const u=vm(i);if(s!==null&&gn(u)){if(s===YR&&n){const d=n.length;s=n,o=d,a=d}s!==null&&_8(u,s,o,a,t)}}}function _8(t,e,n,r,i){let o=t;if(o.isAttached()&&(i||!o.isDirty())){const a=o.isComposing();let s=e;(a||i)&&e[e.length-1]===YR&&(s=e.slice(0,-1));const u=o.getTextContent();if(i||s!==u){if(s===""){if(ul(null),vT||rO||Z5)o.remove();else{const A=ls();setTimeout((()=>{A.update((()=>{o.isAttached()&&o.remove()}))}),20)}return}const d=o.getParent(),m=eb(),v=o.getTextContentSize(),_=L0(),O=o.getKey();if(o.isToken()||_!==null&&O===_&&!a||Kt(m)&&(d!==null&&!d.canInsertTextBefore()&&m.anchor.offset===0||m.anchor.key===t.__key&&m.anchor.offset===0&&!o.canInsertTextBefore()&&!a||m.focus.key===t.__key&&m.focus.offset===v&&!o.canInsertTextAfter()&&!a))return void o.markDirty();const E=cn();if(!Kt(E)||n===null||r===null)return void DU(o,s,E);if(E.setTextNodeRange(o,n,o,r),o.isSegmented()){const A=so(o.getTextContent());o.replace(A),o=A}DU(o,s,E)}}}function DU(t,e,n){if(t.setTextContent(e),Kt(n)){const r=t.getKey();for(const i of["anchor","focus"]){const o=n[i];o.type==="text"&&o.key===r&&(o.offset=hm(t,o.offset,"clamp"))}}}function jA(t,e,n){const r=e[n]||!1;return r==="any"||r===t[n]}function eRe(t,e){return jA(t,e,"altKey")&&jA(t,e,"ctrlKey")&&jA(t,e,"shiftKey")&&jA(t,e,"metaKey")}function Yi(t,e,n){return eRe(t,n)&&t.key.toLowerCase()===e.toLowerCase()}const $g={ctrlKey:!Hp,metaKey:Hp},LU={altKey:Hp,ctrlKey:!Hp};function $U(t){return t.key==="Backspace"}function zU(t){return Yi(t,"a",$g)}function tRe(t){const e=Ur();if(Kt(t)){const n=t.anchor,r=t.focus,i=n.getNode().getTopLevelElementOrThrow().getParentOrThrow();return n.set(i.getKey(),0,"element"),r.set(i.getKey(),i.getChildrenSize(),"element"),k_(t),t}{const n=e.select(0,e.getChildrenSize());return cs(k_(n)),n}}function Aw(t,e){t.__lexicalClassNameCache===void 0&&(t.__lexicalClassNameCache={});const n=t.__lexicalClassNameCache,r=n[e];if(r!==void 0)return r;const i=t[e];if(typeof i=="string"){const o=see(i);return n[e]=o,o}return i}function b8(t,e,n,r,i){if(n.size===0)return;const o=r.__type,a=r.__key,s=e.get(o);s===void 0&&ln(33,o);const u=s.klass;let d=t.get(u);d===void 0&&(d=new Map,t.set(u,d));const m=d.get(a),v=m==="destroyed"&&i==="created";(m===void 0||v)&&d.set(a,v?"updated":i)}function NU(t,e,n){const r=t.getParent();let i=n,o=t;return r!==null&&(e&&n===0?(i=o.getIndexWithinParent(),o=r):e||n!==o.getChildrenSize()||(i=o.getIndexWithinParent()+1,o=r)),o.getChildAtIndex(e?i-1:i)}function sz(t,e){const n=t.offset;if(t.type==="element")return NU(t.getNode(),e,n);{const r=t.getNode();if(e&&n===0||!e&&n===r.getTextContentSize()){const i=e?r.getPreviousSibling():r.getNextSibling();return i===null?NU(r.getParentOrThrow(),e,r.getIndexWithinParent()+(e?0:1)):i}}return null}function Xee(t){const e=gd(t).event,n=e&&e.inputType;return n==="insertFromPaste"||n==="insertFromPasteAsQuotation"}function $n(t,e,n){return(function(r,i,o){const a=v8(r);for(let s=4;s>=0;s--)for(let u=0;u<a.length;u++){const d=a[u],m=d._commands.get(i);if(m!==void 0){const v=m[s];if(v!==void 0){const _=Array.from(v),O=_.length;let E=!1;if(eh(d,(()=>{for(let A=0;A<O;A++)if(_[A](o,r))return void(E=!0)})),E)return E}}}return!1})(t,e,n)}function vI(t){return!ta(t)&&!t.isLastChild()&&!t.isInline()}function P_(t,e){const n=t._keyToDOMMap.get(e);return n===void 0&&ln(75,e),n}function Bk(t){const e=t.assignedSlot||t.parentElement;return cz(e)?e.host:e}function Yee(t){return JMe(t)?t:Ko(t)?t.ownerDocument:null}function Kee(t){cl(),ls()._updateTags.add(t)}function nRe(t){cl(),ls()._deferred.push(t)}function az(t,e){let n=t.getParent();for(;n!==null;){if(n.is(e))return!0;n=n.getParent()}return!1}function w8(t){const e=Yee(t);return e?e.defaultView:null}function gd(t){const e=t._window;return e===null&&ln(78),e}function rRe(t){let e=t.getParentOrThrow();for(;e!==null;){if(ra(e))return e;e=e.getParentOrThrow()}return e}function ra(t){return ta(t)||It(t)&&t.isShadowRoot()}function iRe(t){const e=t.constructor.clone(t);return Qee(e,null),e.afterCloneFrom(t),e}function vh(t){const e=ls(),n=t.getType(),r=mI(e,n);r===void 0&&ln(200,t.constructor.name,n);const{replace:i,replaceWithKlass:o}=r;if(i!==null){const a=i(t),s=a.constructor;return o!==null?a instanceof o||ln(201,o.name,o.getType(),s.name,s.getType(),t.constructor.name,n):a instanceof t.constructor&&s!==t.constructor||ln(202,s.name,s.getType(),t.constructor.name,n),a.__key===t.__key&&ln(203,t.constructor.name,n,s.name,s.getType()),a}return t}function W3(t,e){!ta(t.getParent())||It(e)||Ti(e)||ln(99)}function oRe(t){const e=Fi(t);return e===null&&ln(63,t),e}function H3(t){return(Ti(t)||It(t)&&!t.canBeEmpty())&&!t.isInline()}function lz(t,e,n){n.style.removeProperty("caret-color"),e._blockCursorElement=null;const r=t.parentElement;r!==null&&r.removeChild(t)}function Df(t){return Ff?(t||window).getSelection():null}function sRe(t){const e=w8(t);return e?e.getSelection():null}function Jee(t){return Ko(t)&&t.tagName==="A"}function Ko(t){return tS(t)&&t.nodeType===nMe}function tS(t){return typeof t=="object"&&t!==null&&"nodeType"in t&&typeof t.nodeType=="number"}function cz(t){return tS(t)&&t.nodeType===oMe}function uz(t){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return t.nodeName.match(e)!==null}function aM(t){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return t.nodeName.match(e)!==null}function td(t){if(Ti(t)&&!t.isInline())return!0;if(!It(t)||ra(t))return!1;const e=t.getFirstChild(),n=e===null||Pf(e)||gn(e)||e.isInline();return!t.isInline()&&t.canBeEmpty()!==!1&&n}function G3(t,e){let n=t;for(;n!==null&&n.getParent()!==null&&!e(n);)n=n.getParentOrThrow();return e(n)?n:null}function xI(){return ls()}const BU=new WeakMap,aRe=new Map;function FU(t){if(!t._readOnly&&t.isEmpty())return aRe;t._readOnly||ln(192);let e=BU.get(t);return e||(e=(function(n){const r=new Map;for(const[i,o]of n._nodeMap){const a=o.__type;let s=r.get(a);s||(s=new Map,r.set(a,s)),s.set(i,o)}return r})(t),BU.set(t,e)),e}function O8(t){const e=t.constructor.clone(t);return e.afterCloneFrom(t),e}function S8(t,e){const n=parseInt(t.style.paddingInlineStart,10)||0,r=Math.round(n/40);e.setIndent(r)}function lRe(t){return t.__lexicalUnmanaged===!0}function q2(t,e){return(function(n,r){return Object.prototype.hasOwnProperty.call(n,r)})(t,e)&&t[e]!==XO[e]}function _I(t){const e=JQ in t.prototype?t.prototype[JQ]():void 0,n=(function(a){return a===gy||a===xu||a===XO})(t),r=!n&&q2(t,"getType")?t.getType():void 0;let i,o=r;if(e)if(r)i=e[r];else for(const[a,s]of Object.entries(e))o=a,i=s;if(!n&&o&&(q2(t,"getType")||(t.getType=()=>o),q2(t,"clone")||(t.clone=a=>(p8(a),new t)),q2(t,"importJSON")||(t.importJSON=i&&i.$importJSON||(a=>new t().updateFromJSON(a))),!q2(t,"importDOM")&&i)){const{importDOM:a}=i;a&&(t.importDOM=()=>a)}return{ownNodeConfig:i,ownNodeType:o}}function cRe(t){const e=xI();return cl(),new(e.resolveRegisteredNodeAfterReplacements(e.getRegisteredNode(t))).klass}const uRe={next:"previous",previous:"next"};class C8{constructor(e){this.origin=e}[Symbol.iterator](){return tte({hasNext:aO,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return ia(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return ia(this.origin,this.direction)}remove(){const e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,n){const r=this.getNodeAtCaret();return e.is(this.origin)||e.is(r)||(r===null?this.insert(e):r.replace(e,n)),this}splice(e,n,r="next"){const i=r===this.direction?n:Array.from(n).reverse();let o=this;const a=this.getParentAtCaret(),s=new Map;for(let u=o.getAdjacentCaret();u!==null&&s.size<e;u=u.getAdjacentCaret()){const d=u.origin.getWritable();s.set(d.getKey(),d)}for(const u of i){if(s.size>0){const d=o.getNodeAtCaret();if(d){if(s.delete(d.getKey()),s.delete(u.getKey()),!(d.is(u)||o.origin.is(u))){const m=u.getParent();m&&m.is(a)&&u.remove(),d.replace(u)}}else d===null&&ln(263,Array.from(s).join(" "))}else o.insert(u);o=ia(u,this.direction)}for(const u of s.values())u.remove();return this}}class ST extends C8{type="child";getLatest(){const e=this.origin.getLatest();return e===this.origin?this:yd(e,this.direction)}getParentCaret(e="root"){return ia(T8(this.getParentAtCaret(),e),this.direction)}getFlipped(){const e=tb(this.direction);return ia(this.getNodeAtCaret(),e)||yd(this.origin,e)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(e){return e instanceof ST&&this.direction===e.direction&&this.origin.is(e.origin)}isSamePointCaret(e){return this.isSameNodeCaret(e)}}const hRe={root:ta,shadowRoot:ra};function tb(t){return uRe[t]}function T8(t,e="root"){return hRe[e](t)?null:t}class M_ extends C8{type="sibling";getLatest(){const e=this.origin.getLatest();return e===this.origin?this:ia(e,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return It(this.origin)?yd(this.origin,this.direction):null}getParentCaret(e="root"){return ia(T8(this.getParentAtCaret(),e),this.direction)}getFlipped(){const e=tb(this.direction);return ia(this.getNodeAtCaret(),e)||yd(this.origin.getParentOrThrow(),e)}isSamePointCaret(e){return e instanceof M_&&this.direction===e.direction&&this.origin.is(e.origin)}isSameNodeCaret(e){return(e instanceof M_||e instanceof R_)&&this.direction===e.direction&&this.origin.is(e.origin)}}class R_ extends C8{type="text";constructor(e,n){super(e),this.offset=n}getLatest(){const e=this.origin.getLatest();return e===this.origin?this:I_(e,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(e="root"){return ia(T8(this.getParentAtCaret(),e),this.direction)}getFlipped(){return I_(this.origin,tb(this.direction),this.offset)}isSamePointCaret(e){return e instanceof R_&&this.direction===e.direction&&this.origin.is(e.origin)&&this.offset===e.offset}isSameNodeCaret(e){return(e instanceof M_||e instanceof R_)&&this.direction===e.direction&&this.origin.is(e.origin)}getSiblingCaret(){return ia(this.origin,this.direction)}}function um(t){return t instanceof R_}function aO(t){return t instanceof M_}function hd(t){return t instanceof ST}const dRe={next:class extends R_{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends R_{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},fRe={next:class extends M_{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends M_{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},pRe={next:class extends ST{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(t){return this.origin.splice(0,0,[t]),this}},previous:class extends ST{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(t){return this.origin.splice(this.origin.getChildrenSize(),0,[t]),this}}};function ia(t,e){return t?new fRe[e](t):null}function I_(t,e,n){return t?new dRe[e](t,hm(t,n)):null}function hm(t,e,n="error"){const r=t.getTextContentSize();let i=e==="next"?r:e==="previous"?0:e;return(i<0||i>r)&&(n!=="clamp"&&(function(o,...a){const s=new URL("https://lexical.dev/docs/error"),u=new URLSearchParams;u.append("code",o);for(const d of a)u.append("v",d);s.search=u.toString(),console.warn(`Minified Lexical warning #${o}; visit ${s.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(284,String(e),String(r),t.getKey()),i=i<0?0:r),i}function jU(t,e){return new gRe(t,e)}function yd(t,e){return It(t)?new pRe[e](t):null}function mRe(t){return t&&t.getChildCaret()||t}function bI(t){return t&&mRe(t.getAdjacentCaret())}class k8{type="node-caret-range";constructor(e,n,r){this.anchor=e,this.focus=n,this.direction=r}getLatest(){const e=this.anchor.getLatest(),n=this.focus.getLatest();return e===this.anchor&&n===this.focus?this:new k8(e,n,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const e=i=>{const o=this[i].getLatest();return um(o)?(function(a,s){const{direction:u,origin:d}=a,m=hm(d,s==="focus"?tb(u):u);return jU(a,m-a.offset)})(o,i):null},n=e("anchor"),r=e("focus");if(n&&r){const{caret:i}=n,{caret:o}=r;if(i.isSameNodeCaret(o))return[jU(i,o.offset-i.offset),null]}return[n,r]}iterNodeCarets(e="root"){const n=um(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),i=um(r),o=a=>a.isSameNodeCaret(r)?null:bI(a)||a.getParentCaret(e);return tte({hasNext:a=>a!==null&&!(i&&r.isSameNodeCaret(a)),initial:n.isSameNodeCaret(r)?null:o(n),map:a=>a,step:o})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class gRe{type="slice";constructor(e,n){this.caret=e,this.distance=n}getSliceIndices(){const{distance:e,caret:{offset:n}}=this,r=n+e;return r<n?[r,n]:[n,r]}getTextContent(){const[e,n]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,n)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:e,direction:n}}=this,[r,i]=this.getSliceIndices(),o=e.getTextContent();return I_(e.setTextContent(o.slice(0,r)+o.slice(i)),n,r)}}function E8(t){return Y0(t,ia(Ur(),t.direction))}function ete(t){return Y0(t,t)}function Y0(t,e){return t.direction!==e.direction&&ln(265),new k8(t,e,t.direction)}function tte(t){const{initial:e,hasNext:n,step:r,map:i}=t;let o=e;return{[Symbol.iterator](){return this},next(){if(!n(o))return{done:!0,value:void 0};const a={done:!1,value:i(o)};return o=r(o),a}}}function nte(t,e){const n=JP(t.origin,e.origin);switch(n===null&&ln(275,t.origin.getKey(),e.origin.getKey()),n.type){case"same":{const r=t.type==="text",i=e.type==="text";return r&&i?(function(o,a){return Math.sign(o-a)})(t.offset,e.offset):t.type===e.type?0:r?-1:i?1:t.type==="child"?-1:1}case"ancestor":return t.type==="child"?-1:1;case"descendant":return e.type==="child"?1:-1;case"branch":return rte(n)}}function rte(t){const{a:e,b:n}=t,r=e.__key,i=n.__key;let o=e,a=n;for(;o&&a;o=o.getNextSibling(),a=a.getNextSibling()){if(o.__key===i)return-1;if(a.__key===r)return 1}return o===null?1:-1}function VA(t,e){return e.is(t)}function VU(t){return It(t)?[t.getLatest(),null]:[t.getParent(),t.getLatest()]}function JP(t,e){if(t.is(e))return{commonAncestor:t,type:"same"};const n=new Map;for(let[r,i]=VU(t);r;i=r,r=r.getParent())n.set(r,i);for(let[r,i]=VU(e);r;i=r,r=r.getParent()){const o=n.get(r);if(o!==void 0)return o===null?(VA(t,r)||ln(276),{commonAncestor:r,type:"ancestor"}):i===null?(VA(e,r)||ln(277),{commonAncestor:r,type:"descendant"}):((It(o)||VA(t,o))&&(It(i)||VA(e,i))&&r.is(o.getParent())&&r.is(i.getParent())||ln(278),{a:o,b:i,commonAncestor:r,type:"branch"})}return null}function xm(t,e){const{type:n,key:r,offset:i}=t,o=oRe(t.key);return n==="text"?(gn(o)||ln(266,o.getType(),r),I_(o,e,i)):(It(o)||ln(267,o.getType(),r),vRe(o,t.offset,e))}function D_(t,e){const{origin:n,direction:r}=e,i=r==="next";um(e)?t.set(n.getKey(),e.offset,"text"):aO(e)?gn(n)?t.set(n.getKey(),hm(n,r),"text"):t.set(n.getParentOrThrow().getKey(),n.getIndexWithinParent()+(i?1:0),"element"):(hd(e)&&It(n)||ln(268),t.set(n.getKey(),i?0:n.getChildrenSize(),"element"))}function ite(t){const e=cn(),n=Kt(e)?e:KO();return e5(n,t),cs(n),n}function e5(t,e){D_(t.anchor,e.anchor),D_(t.focus,e.focus)}function QU(t){const{anchor:e,focus:n}=t,r=xm(e,"next"),i=xm(n,"next"),o=nte(r,i)<=0?"next":"previous";return Y0(iy(r,o),iy(i,o))}function Fk(t){const{direction:e,origin:n}=t,r=ia(n,tb(e)).getNodeAtCaret();return r?ia(r,e):yd(n.getParentOrThrow(),e)}function UU(t,e="root"){const n=[t];for(let r=hd(t)?t.getParentCaret(e):t.getSiblingCaret();r!==null;r=r.getParentCaret(e))n.push(Fk(r));return n}function X3(t){return!!t&&t.origin.isAttached()}function yRe(t,e="removeEmptySlices"){if(t.isCollapsed())return t;const n="root",r="next";let i=e;const o=ste(t,r),a=UU(o.anchor,n),s=UU(o.focus.getFlipped(),n),u=new Set,d=[];for(const E of o.iterNodeCarets(n))if(hd(E))u.add(E.origin.getKey());else if(aO(E)){const{origin:A}=E;It(A)&&!u.has(A.getKey())||d.push(A)}for(const E of d)E.remove();for(const E of o.getTextSlices()){if(!E)continue;const{origin:A}=E.caret,M=A.getTextContentSize(),L=Fk(ia(A,r)),$=A.getMode();if(Math.abs(E.distance)===M&&i==="removeEmptySlices"||$==="token"&&E.distance!==0)L.remove();else if(E.distance!==0){i="removeEmptySlices";let N=E.removeTextSlice();const F=E.caret.origin;if($==="segmented"){const Q=N.origin,W=so(Q.getTextContent()).setStyle(Q.getStyle()).setFormat(Q.getFormat());L.replaceOrInsert(W),N=I_(W,r,N.offset)}F.is(a[0].origin)&&(a[0]=N),F.is(s[0].origin)&&(s[0]=N.getFlipped())}}let m,v;for(const E of a)if(X3(E)){m=ah(E);break}for(const E of s)if(X3(E)){v=ah(E);break}const _=(function(E,A,M){if(!E||!A)return null;const L=E.getParentAtCaret(),$=A.getParentAtCaret();if(!L||!$)return null;const N=L.getParents().reverse();N.push(L);const F=$.getParents().reverse();F.push($);const Q=Math.min(N.length,F.length);let W;for(W=0;W<Q&&N[W]===F[W];W++);const H=(ce,we)=>{let re;for(let se=W;se<ce.length;se++){const be=ce[se];if(ra(be))return;!re&&we(be)&&(re=be)}return re},te=H(N,td),ne=te&&H(F,(ce=>M.has(ce.getKey())&&td(ce)));return te&&ne?[te,ne]:null})(m,v,u);if(_){const[E,A]=_;yd(E,"previous").splice(0,A.getChildren()),A.remove()}const O=[m,v,...a,...s].find(X3);if(O)return ete(iy(ah(O),t.direction));ln(269,JSON.stringify(a.map((E=>E.origin.__key))))}function ah(t){const e=(function(i){let o=i;for(;hd(o);){const a=bI(o);if(!hd(a))break;o=a}return o})(t.getLatest()),{direction:n}=e;if(gn(e.origin))return um(e)?e:I_(e.origin,n,n);const r=e.getAdjacentCaret();return aO(r)&&gn(r.origin)?I_(r.origin,n,tb(n)):e}function ote(t){return um(t)&&t.offset!==hm(t.origin,t.direction)}function iy(t,e){return t.direction===e?t:t.getFlipped()}function ste(t,e){return t.direction===e?t:Y0(iy(t.focus,e),iy(t.anchor,e))}function vRe(t,e,n){let r=yd(t,"next");for(let i=0;i<e;i++){const o=r.getAdjacentCaret();if(o===null)break;r=o}return iy(r,n)}function xRe(t){const{origin:e,offset:n,direction:r}=t;if(n===hm(e,r))return t.getSiblingCaret();if(n===hm(e,tb(r)))return Fk(t.getSiblingCaret());const[i]=e.splitText(n);return gn(i)||ln(281),iy(ia(i,"next"),r)}function _Re(t,e){return!0}function bRe(t,{$copyElementNode:e=iRe,$splitTextPointCaretNext:n=xRe,rootMode:r="shadowRoot",$shouldSplit:i=_Re}={}){if(um(t))return n(t);const o=t.getParentCaret(r);if(o){const{origin:a}=o;if(hd(t)&&(!a.canBeEmpty()||!i(a,"first")))return Fk(o);const s=(function(u){const d=[];for(let m=u.getAdjacentCaret();m;m=m.getAdjacentCaret())d.push(m.origin);return d})(t);(s.length>0||a.canBeEmpty()&&i(a,"last"))&&o.insert(e(a).splice(0,0,s))}return o}function wRe(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const i of e)r.append("v",i);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const hz=new Map;function ate(t){const e={};if(!t)return e;const n=t.split(";");for(const r of n)if(r!==""){const[i,o]=r.split(/:([^]+)/);i&&o&&(e[i.trim()]=o.trim())}return e}function ZU(t){let e=hz.get(t);return e===void 0&&(e=ate(t),hz.set(t,e)),e}function lte(t){const e=xI().getElementByKey(t.getKey());if(e===null)return null;const n=e.ownerDocument.defaultView;return n===null?null:n.getComputedStyle(e)}function cte(t){return lte(ta(t)?t:t.getParentOrThrow())}function qU(t){const e=cte(t);return e!==null&&e.direction==="rtl"}function ute(t,e){const n=t.getStartEndPoints();if(e.isSelected(t)&&!Ng(e)&&n!==null){const[r,i]=n,o=t.isBackward(),a=r.getNode(),s=i.getNode(),u=e.is(a),d=e.is(s);if(u||d){const[m,v]=iz(t),_=a.is(s),O=e.is(o?s:a),E=e.is(o?a:s);let A,M=0;_?(M=m>v?v:m,A=m>v?m:v):O?(M=o?v:m,A=void 0):E&&(M=0,A=o?m:v),e.__text=e.__text.slice(M,A)}}return e}function WU(t){if(t.type==="text")return t.offset===t.getNode().getTextContentSize();const e=t.getNode();return It(e)||wRe(177),t.offset===e.getChildrenSize()}function ORe(t){const e=t.getStyle(),n=ate(e);hz.set(e,n)}function SRe(t,e){const n=t.getFormatType(),r=t.getIndent();n!==e.getFormatType()&&e.setFormat(n),r!==e.getIndent()&&e.setIndent(r)}function CRe(t,e,n=SRe){if(t===null)return;const r=t.getStartEndPoints(),i=new Map;let o=null;if(r){const[a,s]=r;o=KO(),o.anchor.set(a.key,a.offset,a.type),o.focus.set(s.key,s.offset,s.type);const u=Y3(a.getNode(),td),d=Y3(s.getNode(),td);It(u)&&i.set(u.getKey(),u),It(d)&&i.set(d.getKey(),d)}for(const a of t.getNodes())if(It(a)&&td(a))i.set(a.getKey(),a);else if(r===null){const s=Y3(a,td);It(s)&&i.set(s.getKey(),s)}for(const[a,s]of i){const u=e();n(s,u),s.replace(u,!0),o&&(a===o.anchor.key&&o.anchor.set(u.getKey(),o.anchor.offset,o.anchor.type),a===o.focus.key&&o.focus.set(u.getKey(),o.focus.offset,o.focus.type))}o&&t.is(cn())&&cs(o)}function hte(t){const e=dte(t);return e!==null&&e.writingMode==="vertical-rl"}function dte(t){const e=t.anchor.getNode();return It(e)?lte(e):cte(e)}function HU(t,e){let n=hte(t)?!e:e;fte(t)&&(n=!n);const r=xm(t.focus,n?"previous":"next");if(ote(r))return!1;for(const i of E8(r)){if(hd(i))return!i.origin.isInline();if(!It(i.origin)){if(Ti(i.origin))return!0;break}}return!1}function TRe(t,e,n,r){t.modify(e?"extend":"move",n,r)}function fte(t){const e=dte(t);return e!==null&&e.direction==="rtl"}function GU(t,e,n){const r=fte(t);let i;i=hte(t)||r?!n:n,TRe(t,e,i,"character")}function Y3(t,e){let n=t;for(;n!==null&&n.getParent()!==null&&!e(n);)n=n.getParentOrThrow();return e(n)?n:null}function pte(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const i of e)r.append("v",i);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const wI=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,kRe=wI&&"documentMode"in document?document.documentMode:null,ERe=wI&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);!(!wI||!("InputEvent"in window)||kRe)&&"getTargetRanges"in new window.InputEvent("input");function mte(...t){const e=[];for(const n of t)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))e.push(r);return e}function Wl(...t){return()=>{for(let e=t.length-1;e>=0;e--)t[e]();t.length=0}}const ARe=wI,PRe=ERe;function Lf(t,...e){const n=mte(...e);n.length>0&&t.classList.add(...n)}function OI(t,...e){const n=mte(...e);n.length>0&&t.classList.remove(...n)}function MRe(t){return t?t.getAdjacentCaret():null}function gte(t,e){let n=t;for(;n!=null;){if(n instanceof e)return n;n=n.getParent()}return null}function dz(t){const e=Mf(t,(n=>It(n)&&!n.isInline()));return It(e)||pte(4,t.__key),e}const Mf=(t,e)=>{let n=t;for(;n!==Ur()&&n!=null;){if(e(n))return n;n=n.getParent()}return null};function yte(t){const e=cn()||eb();let n;if(Kt(e))n=xm(e.focus,"next");else{if(e!=null){const a=e.getNodes(),s=a[a.length-1];s&&(n=ia(s,"next"))}n=n||yd(Ur(),"previous").getFlipped().insert(Oi())}const r=RRe(t,n),i=bI(r),o=hd(i)?ah(i):r;return ite(ete(o)),t.getLatest()}function RRe(t,e,n){let r=iy(e,"next");for(let i=r;i;i=bRe(i,n))r=i;return um(r)&&pte(283),r.insert(t.isInline()?Oi().append(t):t),iy(ia(t.getLatest(),"next"),e.direction)}function A8(t,e){const n=e();return t.replace(n),n.append(t),n}function $0(t,e){return t!==null&&Object.getPrototypeOf(t).constructor.name===e.name}function IRe(t,e){const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i!==null&&n.push(i)}return n}let K3=!(PRe||!ARe)&&void 0;function DRe(t){let e=1;if((function(){if(K3===void 0){const n=document.createElement("div");n.style.cssText="position: absolute; opacity: 0; width: 100px; left: -1000px;",document.body.appendChild(n);const r=n.getBoundingClientRect();n.style.setProperty("zoom","2"),K3=n.getBoundingClientRect().width===r.width,document.body.removeChild(n)}return K3})())for(;t;)e*=Number(window.getComputedStyle(t).getPropertyValue("zoom")),t=t.parentElement;return e}const QA=0,fz=1,pz=2,Of=0,LRe=1,XU=2,$Re=3,zRe=4;function NRe(t,e,n,r,i){if(t===null||n.size===0&&r.size===0&&!i)return Of;const o=e._selection,a=t._selection;if(i)return LRe;if(!(Kt(o)&&Kt(a)&&a.isCollapsed()&&o.isCollapsed()))return Of;const s=(function(L,$,N){const F=L._nodeMap,Q=[];for(const W of $){const H=F.get(W);H!==void 0&&Q.push(H)}for(const[W,H]of N){if(!H)continue;const te=F.get(W);te===void 0||ta(te)||Q.push(te)}return Q})(e,n,r);if(s.length===0)return Of;if(s.length>1){const L=e._nodeMap,$=L.get(o.anchor.key),N=L.get(a.anchor.key);return $&&N&&!t._nodeMap.has($.__key)&&gn($)&&$.__text.length===1&&o.anchor.offset===1?XU:Of}const u=s[0],d=t._nodeMap.get(u.__key);if(!gn(d)||!gn(u)||d.__mode!==u.__mode)return Of;const m=d.__text,v=u.__text;if(m===v)return Of;const _=o.anchor,O=a.anchor;if(_.key!==O.key||_.type!=="text")return Of;const E=_.offset,A=O.offset,M=v.length-m.length;return M===1&&A===E-1?XU:M===-1&&A===E+1?$Re:M===-1&&A===E?zRe:Of}function BRe(t,e){let n=Date.now(),r=Of;return(i,o,a,s,u,d)=>{const m=Date.now();if(d.has(rM))return r=Of,n=m,pz;const v=NRe(i,o,s,u,t.isComposing()),_=(()=>{const O=a===null||a.editor===t,E=d.has(qMe);if(!E&&O&&d.has(KP))return QA;if(i===null)return fz;const A=o._selection;return s.size>0||u.size>0?E===!1&&v!==Of&&v===r&&m<n+e&&O||s.size===1&&(function(M,L,$){const N=L._nodeMap.get(M),F=$._nodeMap.get(M),Q=L._selection,W=$._selection;return!(Kt(Q)&&Kt(W)&&Q.anchor.type==="element"&&Q.focus.type==="element"&&W.anchor.type==="text"&&W.focus.type==="text"||!gn(N)||!gn(F)||N.__parent!==F.__parent)&&JSON.stringify(L.read((()=>N.exportJSON())))===JSON.stringify($.read((()=>F.exportJSON())))})(Array.from(s)[0],i,o)?QA:fz:A!==null?QA:pz})();return n=m,r=v,_}}function YU(t){t.undoStack=[],t.redoStack=[],t.current=null}function FRe(t,e,n){const r=BRe(t,n);return Wl(t.registerCommand(eI,(()=>((function(o,a){const s=a.redoStack,u=a.undoStack;if(u.length!==0){const d=a.current,m=u.pop();d!==null&&(s.push(d),o.dispatchCommand(fC,!0)),u.length===0&&o.dispatchCommand(pC,!1),a.current=m||null,m&&m.editor.setEditorState(m.editorState,{tag:rM})}})(t,e),!0)),Lr),t.registerCommand(tI,(()=>((function(o,a){const s=a.redoStack,u=a.undoStack;if(s.length!==0){const d=a.current;d!==null&&(u.push(d),o.dispatchCommand(pC,!0));const m=s.pop();s.length===0&&o.dispatchCommand(fC,!1),a.current=m||null,m&&m.editor.setEditorState(m.editorState,{tag:rM})}})(t,e),!0)),Lr),t.registerCommand(PMe,(()=>(YU(e),!1)),Lr),t.registerCommand(MMe,(()=>(YU(e),t.dispatchCommand(fC,!1),t.dispatchCommand(pC,!1),!0)),Lr),t.registerUpdateListener((({editorState:o,prevEditorState:a,dirtyLeaves:s,dirtyElements:u,tags:d})=>{const m=e.current,v=e.redoStack,_=e.undoStack,O=m===null?null:m.editorState;if(m!==null&&o===O)return;const E=r(a,o,m,s,u,d);if(E===fz)v.length!==0&&(e.redoStack=[],t.dispatchCommand(fC,!1)),m!==null&&(_.push({...m}),t.dispatchCommand(pC,!0));else if(E===pz)return;e.current={editor:t,editorState:o}})))}function vte(){return{current:null,redoStack:[],undoStack:[]}}function xte({delay:t,externalHistoryState:e}){const[n]=ql();return(function(r,i,o=1e3){const a=j.useMemo((()=>i||vte()),[i]);j.useEffect((()=>FRe(r,a,o)),[o,r,a])})(n,e,t),null}function jRe(t,e){const n=e.body?e.body.childNodes:[];let r=[];const i=[];for(let o=0;o<n.length;o++){const a=n[o];if(!bte.has(a.nodeName)){const s=wte(a,t,i,!1);s!==null&&(r=r.concat(s))}}return(function(o){for(const a of o)a.getNextSibling()instanceof d8&&a.insertAfter(If());for(const a of o){const s=a.getChildren();for(const u of s)a.insertBefore(u);a.remove()}})(i),r}function VRe(t,e){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),r=Ur().getChildren();for(let i=0;i<r.length;i++)_te(t,r[i],n,e);return n.innerHTML}function _te(t,e,n,r=null){let i=r===null||e.isSelected(r);const o=It(e)&&e.excludeFromCopy("html");let a=e;if(r!==null){let O=O8(e);O=gn(O)&&r!==null?ute(r,O):O,a=O}const s=It(a)?a.getChildren():[],u=mI(t,a.getType());let d;d=u&&u.exportDOM!==void 0?u.exportDOM(t,a):a.exportDOM(t);const{element:m,after:v}=d;if(!m)return!1;const _=document.createDocumentFragment();for(let O=0;O<s.length;O++){const E=s[O],A=_te(t,E,_,r);!i&&It(e)&&A&&e.extractWithChild(E,r,"html")&&(i=!0)}if(i&&!o){if((Ko(m)||cz(m))&&m.append(_),n.append(m),v){const O=v.call(a,m);O&&(cz(m)?m.replaceChildren(O):m.replaceWith(O))}}else n.append(_);return i}const bte=new Set(["STYLE","SCRIPT"]);function wte(t,e,n,r,i=new Map,o){let a=[];if(bte.has(t.nodeName))return a;let s=null;const u=(function(E,A){const{nodeName:M}=E,L=A._htmlConversions.get(M.toLowerCase());let $=null;if(L!==void 0)for(const N of L){const F=N(E);F!==null&&($===null||($.priority||0)<=(F.priority||0))&&($=F)}return $!==null?$.conversion:null})(t,e),d=u?u(t):null;let m=null;if(d!==null){m=d.after;const E=d.node;if(s=Array.isArray(E)?E[E.length-1]:E,s!==null){for(const[,A]of i)if(s=A(s,o),!s)break;s&&a.push(...Array.isArray(E)?E:[s])}d.forChild!=null&&i.set(t.nodeName,d.forChild)}const v=t.childNodes;let _=[];const O=(s==null||!ra(s))&&(s!=null&&eM(s)||r);for(let E=0;E<v.length;E++)_.push(...wte(v[E],e,n,O,new Map(i),s));return m!=null&&(_=m(_)),aM(t)&&(_=QRe(t,_,O?()=>{const E=new d8;return n.push(E),E}:Oi)),s==null?_.length>0?a=a.concat(_):aM(t)&&(function(E){return E.nextSibling==null||E.previousSibling==null?!1:uz(E.nextSibling)&&uz(E.previousSibling)})(t)&&(a=a.concat(If())):It(s)&&s.append(..._),a}function QRe(t,e,n){const r=t.style.textAlign,i=[];let o=[];for(let a=0;a<e.length;a++){const s=e[a];if(eM(s))r&&!s.getFormat()&&s.setFormat(r),i.push(s);else if(o.push(s),a===e.length-1||a<e.length-1&&eM(e[a+1])){const u=n();u.setFormat(r),u.append(...o),i.push(u),o=[]}}return i}function lM(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const i of e)r.append("v",i);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function URe(t,e=cn()){return e==null&&lM(166),Kt(e)&&e.isCollapsed()||e.getNodes().length===0?"":VRe(t,e)}function ZRe(t,e=cn()){return e==null&&lM(166),Kt(e)&&e.isCollapsed()||e.getNodes().length===0?null:JSON.stringify(qRe(t,e))}function KU(t,e,n){const r=t.getData("application/x-lexical-editor");if(r)try{const s=JSON.parse(r);if(s.namespace===n._config.namespace&&Array.isArray(s.nodes))return JU(n,WRe(s.nodes),e)}catch{}const i=t.getData("text/html"),o=t.getData("text/plain");if(i&&o!==i)try{const s=new DOMParser().parseFromString((function(u){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:d=>d}).createHTML(u):u})(i),"text/html");return JU(n,jRe(n,s),e)}catch{}const a=o||t.getData("text/uri-list");if(a!=null)if(Kt(e)){const s=a.split(/(\r?\n|\t)/);s[s.length-1]===""&&s.pop();for(let u=0;u<s.length;u++){const d=cn();if(Kt(d)){const m=s[u];m===`
`||m===`\r
`?d.insertParagraph():m==="	"?d.insertNodes([YO()]):d.insertText(m)}}}else e.insertRawText(a)}function JU(t,e,n){t.dispatchCommand(CMe,{nodes:e,selection:n})||(n.insertNodes(e),(function(r){if(Kt(r)&&r.isCollapsed()){const i=r.anchor;let o=null;const a=xm(i,"previous");if(a)if(um(a))o=a.origin;else{const s=Y0(a,yd(Ur(),"next").getFlipped());for(const u of s){if(gn(u.origin)){o=u.origin;break}if(It(u.origin)&&!u.origin.isInline())break}}if(o&&gn(o)){const s=o.getFormat(),u=o.getStyle();r.format===s&&r.style===u||(r.format=s,r.style=u,r.dirty=!0)}}})(n))}function Ote(t,e,n,r=[]){let i=e===null||n.isSelected(e);const o=It(n)&&n.excludeFromCopy("html");let a=n;if(e!==null){let d=O8(n);d=gn(d)&&e!==null?ute(e,d):d,a=d}const s=It(a)?a.getChildren():[],u=(function(d){const m=d.exportJSON(),v=d.constructor;if(m.type!==v.getType()&&lM(58,v.name),It(d)){const _=m.children;Array.isArray(_)||lM(59,v.name)}return m})(a);if(gn(a)){const d=a.__text;d.length>0?u.text=d:i=!1}for(let d=0;d<s.length;d++){const m=s[d],v=Ote(t,e,m,u.children);!i&&It(n)&&v&&n.extractWithChild(m,e,"clone")&&(i=!0)}if(i&&!o)r.push(u);else if(Array.isArray(u.children))for(let d=0;d<u.children.length;d++){const m=u.children[d];r.push(m)}return i}function qRe(t,e){const n=[],r=Ur().getChildren();for(let i=0;i<r.length;i++)Ote(t,e,r[i],n);return{namespace:t._config.namespace,nodes:n}}function WRe(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],i=ZMe(r);gn(i)&&ORe(i),e.push(i)}return e}let B1=null;async function eZ(t,e,n){if(B1!==null)return!1;if(e!==null)return new Promise(((d,m)=>{t.update((()=>{d(tZ(t,e,n))}))}));const r=t.getRootElement(),i=t._window||window,o=window.document,a=Df(i);if(r===null||a===null)return!1;const s=o.createElement("span");s.style.cssText="position: fixed; top: -1000px;",s.append(o.createTextNode("#")),r.append(s);const u=new Range;return u.setStart(s,0),u.setEnd(s,1),a.removeAllRanges(),a.addRange(u),new Promise(((d,m)=>{const v=t.registerCommand(sI,(_=>($0(_,ClipboardEvent)&&(v(),B1!==null&&(window.clearTimeout(B1),B1=null),d(tZ(t,_,n))),!0)),gh);B1=window.setTimeout((()=>{v(),B1=null,d(!1)}),50),o.execCommand("copy"),s.remove()}))}function tZ(t,e,n){if(n===void 0){const i=Df(t._window);if(!i)return!1;const o=i.anchorNode,a=i.focusNode;if(o!==null&&a!==null&&!Nk(t,o,a))return!1;const s=cn();if(s===null)return!1;n=GRe(s)}e.preventDefault();const r=e.clipboardData;return r!==null&&(XRe(r,n),!0)}const HRe=[["text/html",URe],["application/x-lexical-editor",ZRe]];function GRe(t=cn()){const e={"text/plain":t?t.getTextContent():""};if(t){const n=xI();for(const[r,i]of HRe){const o=i(n,t);o!==null&&(e[r]=o)}}return e}function XRe(t,e){for(const n in e){const r=e[n];r!==void 0&&t.setData(n,r)}}function nZ(t,e){if(document.caretRangeFromPoint!==void 0){const n=document.caretRangeFromPoint(t,e);return n===null?null:{node:n.startContainer,offset:n.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const n=document.caretPositionFromPoint(t,e);return n===null?null:{node:n.offsetNode,offset:n.offset}}return null}const nS=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,YRe=nS&&"documentMode"in document?document.documentMode:null,KRe=!(!nS||!("InputEvent"in window)||YRe)&&"getTargetRanges"in new window.InputEvent("input"),JRe=nS&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),rZ=nS&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,eIe=nS&&/^(?=.*Chrome).*/i.test(navigator.userAgent),tIe=nS&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!eIe,iZ=lr("DRAG_DROP_PASTE_FILE");let SI=class Ste extends xu{static getType(){return"quote"}static clone(e){return new Ste(e.__key)}createDOM(e){const n=document.createElement("blockquote");return Lf(n,e.theme.quote),n}updateDOM(e,n){return!1}static importDOM(){return{blockquote:e=>({conversion:nIe,priority:0})}}exportDOM(e){const{element:n}=super.exportDOM(e);if(Ko(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r);const i=this.getDirection();i&&(n.dir=i)}return{element:n}}static importJSON(e){return jk().updateFromJSON(e)}insertNewAfter(e,n){const r=Oi(),i=this.getDirection();return r.setDirection(i),this.insertAfter(r,n),r}collapseAtStart(){const e=Oi();return this.getChildren().forEach((n=>e.append(n))),this.replace(e),!0}canMergeWhenEmpty(){return!0}};function jk(){return vh(new SI)}function mz(t){return t instanceof SI}let Vk=class Cte extends xu{static getType(){return"heading"}static clone(e){return new Cte(e.__tag,e.__key)}constructor(e,n){super(n),this.__tag=e}getTag(){return this.__tag}setTag(e){const n=this.getWritable();return this.__tag=e,n}createDOM(e){const n=this.__tag,r=document.createElement(n),i=e.theme.heading;if(i!==void 0){const o=i[n];Lf(r,o)}return r}updateDOM(e,n,r){return e.__tag!==this.__tag}static importDOM(){return{h1:e=>({conversion:F1,priority:0}),h2:e=>({conversion:F1,priority:0}),h3:e=>({conversion:F1,priority:0}),h4:e=>({conversion:F1,priority:0}),h5:e=>({conversion:F1,priority:0}),h6:e=>({conversion:F1,priority:0}),p:e=>{const n=e.firstChild;return n!==null&&oZ(n)?{conversion:()=>({node:null}),priority:3}:null},span:e=>oZ(e)?{conversion:n=>({node:nm("h1")}),priority:3}:null}}exportDOM(e){const{element:n}=super.exportDOM(e);if(Ko(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r);const i=this.getDirection();i&&(n.dir=i)}return{element:n}}static importJSON(e){return nm(e.tag).updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTag(e.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(e,n=!0){const r=e?e.anchor.offset:0,i=this.getLastDescendant(),o=!i||e&&e.anchor.key===i.getKey()&&r===i.getTextContentSize()||!e?Oi():nm(this.getTag()),a=this.getDirection();if(o.setDirection(a),this.insertAfter(o,n),r===0&&!this.isEmpty()&&e){const s=Oi();s.select(),this.replace(s,!0)}return o}collapseAtStart(){const e=this.isEmpty()?Oi():nm(this.getTag());return this.getChildren().forEach((n=>e.append(n))),this.replace(e),!0}extractWithChild(){return!0}};function oZ(t){return t.nodeName.toLowerCase()==="span"&&t.style.fontSize==="26pt"}function F1(t){const e=t.nodeName.toLowerCase();let n=null;return e!=="h1"&&e!=="h2"&&e!=="h3"&&e!=="h4"&&e!=="h5"&&e!=="h6"||(n=nm(e),t.style!==null&&(S8(t,n),n.setFormat(t.style.textAlign))),{node:n}}function nIe(t){const e=jk();return t.style!==null&&(e.setFormat(t.style.textAlign),S8(t,e)),{node:e}}function nm(t="h1"){return vh(new Vk(t))}function lO(t){return t instanceof Vk}function UA(t){let e=null;if($0(t,DragEvent)?e=t.dataTransfer:$0(t,ClipboardEvent)&&(e=t.clipboardData),e===null)return[!1,[],!1];const n=e.types,r=n.includes("Files"),i=n.includes("text/html")||n.includes("text/plain");return[r,Array.from(e.files),i]}function sZ(t){const e=cn();if(!Kt(e))return!1;const n=new Set,r=e.getNodes();for(let i=0;i<r.length;i++){const o=r[i],a=o.getKey();if(n.has(a))continue;const s=Mf(o,(d=>It(d)&&!d.isInline()));if(s===null)continue;const u=s.getKey();s.canIndent()&&!n.has(u)&&(n.add(u),t(s))}return n.size>0}function aZ(t){const e=vm(t);return Ti(e)}function J3(t){for(const e of["lowercase","uppercase","capitalize"])t.hasFormat(e)&&t.toggleFormat(e)}function rIe(t){return Wl(t.registerCommand(JR,(e=>{const n=cn();return!!ss(n)&&(n.clear(),!0)}),Lr),t.registerCommand(d_,(e=>{const n=cn();return Kt(n)?(n.deleteCharacter(e),!0):!!ss(n)&&(n.deleteNodes(),!0)}),Lr),t.registerCommand(wT,(e=>{const n=cn();return!!Kt(n)&&(n.deleteWord(e),!0)}),Lr),t.registerCommand(OT,(e=>{const n=cn();return!!Kt(n)&&(n.deleteLine(e),!0)}),Lr),t.registerCommand(kw,(e=>{const n=cn();if(typeof e=="string")n!==null&&n.insertText(e);else{if(n===null)return!1;const r=e.dataTransfer;if(r!=null)KU(r,n,t);else if(Kt(n)){const i=e.data;return i&&n.insertText(i),!0}}return!0}),Lr),t.registerCommand(X4,(()=>{const e=cn();return!!Kt(e)&&(e.removeText(),!0)}),Lr),t.registerCommand(qg,(e=>{const n=cn();return!!Kt(n)&&(n.formatText(e),!0)}),Lr),t.registerCommand(EMe,(e=>{const n=cn();if(!Kt(n)&&!ss(n))return!1;const r=n.getNodes();for(const i of r){const o=Mf(i,(a=>It(a)&&!a.isInline()));o!==null&&o.setFormat(e)}return!0}),Lr),t.registerCommand(Tw,(e=>{const n=cn();return!!Kt(n)&&(n.insertLineBreak(e),!0)}),Lr),t.registerCommand(bT,(()=>{const e=cn();return!!Kt(e)&&(e.insertParagraph(),!0)}),Lr),t.registerCommand(xee,(()=>(JO([YO()]),!0)),Lr),t.registerCommand(K5,(()=>sZ((e=>{const n=e.getIndent();e.setIndent(n+1)}))),Lr),t.registerCommand(Y4,(()=>sZ((e=>{const n=e.getIndent();n>0&&e.setIndent(Math.max(0,n-1))}))),Lr),t.registerCommand(e8,(e=>{const n=cn();if(ss(n)){const r=n.getNodes();if(r.length>0)return r[0].selectPrevious(),!0}else if(Kt(n)){const r=sz(n.focus,!0);if(!e.shiftKey&&Ti(r)&&!r.isIsolated()&&!r.isInline())return r.selectPrevious(),e.preventDefault(),!0}return!1}),Lr),t.registerCommand(t8,(e=>{const n=cn();if(ss(n)){const r=n.getNodes();if(r.length>0)return r[0].selectNext(0,0),!0}else if(Kt(n)){if((function(i){const o=i.focus;return o.key==="root"&&o.offset===Ur().getChildrenSize()})(n))return e.preventDefault(),!0;const r=sz(n.focus,!1);if(!e.shiftKey&&Ti(r)&&!r.isIsolated()&&!r.isInline())return r.selectNext(),e.preventDefault(),!0}return!1}),Lr),t.registerCommand(JB,(e=>{const n=cn();if(ss(n)){const r=n.getNodes();if(r.length>0)return e.preventDefault(),qU(r[0])?r[0].selectNext(0,0):r[0].selectPrevious(),!0}if(!Kt(n))return!1;if(HU(n,!0)){const r=e.shiftKey;return e.preventDefault(),GU(n,r,!0),!0}return!1}),Lr),t.registerCommand(vee,(e=>{const n=cn();if(ss(n)){const i=n.getNodes();if(i.length>0)return e.preventDefault(),qU(i[0])?i[0].selectPrevious():i[0].selectNext(0,0),!0}if(!Kt(n))return!1;const r=e.shiftKey;return!!HU(n,!1)&&(e.preventDefault(),GU(n,r,!1),!0)}),Lr),t.registerCommand(rI,(e=>{if(aZ(e.target))return!1;const n=cn();if(Kt(n)){if((function(r){if(!r.isCollapsed())return!1;const{anchor:i}=r;if(i.offset!==0)return!1;const o=i.getNode();if(ta(o))return!1;const a=dz(o);return a.getIndent()>0&&(a.is(o)||o.is(a.getFirstDescendant()))})(n))return e.preventDefault(),t.dispatchCommand(Y4,void 0);if(rZ&&navigator.language==="ko-KR")return!1}else if(!ss(n))return!1;return e.preventDefault(),t.dispatchCommand(d_,!0)}),Lr),t.registerCommand(r8,(e=>{if(aZ(e.target))return!1;const n=cn();return!(!Kt(n)&&!ss(n))&&(e.preventDefault(),t.dispatchCommand(d_,!1))}),Lr),t.registerCommand(oO,(e=>{const n=cn();if(!Kt(n))return!1;if(J3(n),e!==null){if((rZ||JRe||tIe)&&KRe)return!1;if(e.preventDefault(),e.shiftKey)return t.dispatchCommand(Tw,!1)}return t.dispatchCommand(bT,void 0)}),Lr),t.registerCommand(Ik,(()=>{const e=cn();return!!Kt(e)&&(t.blur(),!0)}),Lr),t.registerCommand(i8,(e=>{const[,n]=UA(e);if(n.length>0){const i=nZ(e.clientX,e.clientY);if(i!==null){const{offset:o,node:a}=i,s=vm(a);if(s!==null){const u=KO();if(gn(s))u.anchor.set(s.getKey(),o,"text"),u.focus.set(s.getKey(),o,"text");else{const m=s.getParentOrThrow().getKey(),v=s.getIndexWithinParent()+1;u.anchor.set(m,v,"element"),u.focus.set(m,v,"element")}const d=k_(u);cs(d)}t.dispatchCommand(iZ,n)}return e.preventDefault(),!0}const r=cn();return!!Kt(r)}),Lr),t.registerCommand(oI,(e=>{const[n]=UA(e),r=cn();return!(n&&!Kt(r))}),Lr),t.registerCommand(o8,(e=>{const[n]=UA(e),r=cn();if(n&&!Kt(r))return!1;const i=nZ(e.clientX,e.clientY);if(i!==null){const o=vm(i.node);Ti(o)&&e.preventDefault()}return!0}),Lr),t.registerCommand(K4,(()=>(tRe(),!0)),Lr),t.registerCommand(sI,(e=>(eZ(t,$0(e,ClipboardEvent)?e:null),!0)),Lr),t.registerCommand(s8,(e=>((async function(n,r){await eZ(r,$0(n,ClipboardEvent)?n:null),r.update((()=>{const i=cn();Kt(i)?i.removeText():ss(i)&&i.getNodes().forEach((o=>o.remove()))}))})(e,t),!0)),Lr),t.registerCommand(Rk,(e=>{const[,n,r]=UA(e);return n.length>0&&!r?(t.dispatchCommand(iZ,n),!0):tS(e.target)&&m8(e.target)?!1:cn()!==null&&((function(i,o){i.preventDefault(),o.update((()=>{const a=cn(),s=$0(i,InputEvent)||$0(i,KeyboardEvent)?null:i.clipboardData;s!=null&&a!==null&&KU(s,a,o)}),{tag:WMe})})(e,t),!0)}),Lr),t.registerCommand(n8,(e=>{const n=cn();return Kt(n)&&J3(n),!1}),Lr),t.registerCommand(iI,(e=>{const n=cn();return Kt(n)&&J3(n),!1}),Lr))}function iIe(t){let n={}.singleTilde;const r={name:"strikethrough",tokenize:o,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(a,s){let u=-1;for(;++u<a.length;)if(a[u][0]==="enter"&&a[u][1].type==="strikethroughSequenceTemporary"&&a[u][1]._close){let d=u;for(;d--;)if(a[d][0]==="exit"&&a[d][1].type==="strikethroughSequenceTemporary"&&a[d][1]._open&&a[u][1].end.offset-a[u][1].start.offset===a[d][1].end.offset-a[d][1].start.offset){a[u][1].type="strikethroughSequence",a[d][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},a[d][1].start),end:Object.assign({},a[u][1].end)},v={type:"strikethroughText",start:Object.assign({},a[d][1].end),end:Object.assign({},a[u][1].start)},_=[["enter",m,s],["enter",a[d][1],s],["exit",a[d][1],s],["enter",v,s]],O=s.parser.constructs.insideSpan.null;O&&jl(_,_.length,0,Ek(O,a.slice(d+1,u),s)),jl(_,_.length,0,[["exit",v,s],["enter",a[u][1],s],["exit",a[u][1],s],["exit",m,s]]),jl(a,d-1,u-d+3,_),u=d+_.length-2;break}}for(u=-1;++u<a.length;)a[u][1].type==="strikethroughSequenceTemporary"&&(a[u][1].type="data");return a}function o(a,s,u){const d=this.previous,m=this.events;let v=0;return _;function _(E){return d===126&&m[m.length-1][1].type!=="characterEscape"?u(E):(a.enter("strikethroughSequenceTemporary"),O(E))}function O(E){const A=X0(d);if(E===126)return v>1?u(E):(a.consume(E),v++,O);if(v<2&&!n)return u(E);const M=a.exit("strikethroughSequenceTemporary"),L=X0(E);return M._open=!L||L===2&&!!A,M._close=!A||A===2&&!!L,s(E)}}}const oIe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Tte.peek=uIe;function sIe(){return{canContainEols:["delete"],enter:{strikethrough:lIe},exit:{strikethrough:cIe}}}function aIe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:oIe}],handlers:{delete:Tte}}}function lIe(t){this.enter({type:"delete",children:[]},t)}function cIe(t){this.exit(t)}function Tte(t,e,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(t,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),o(),a}function uIe(){return"~"}kte.peek=gIe;var hIe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],dIe={canContainEols:["highlight"],enter:{highlight:fIe},exit:{highlight:pIe}};function fIe(t){this.enter({type:"highlight",children:[]},t)}function pIe(t){this.exit(t)}var mIe={unsafe:[{character:"=",inConstruct:"phrasing",notInConstruct:hIe}],handlers:{highlight:kte}};function kte(t,e,n,r){const o=n.createTracker(r),a=n.enter("highlight");let s=o.move("==");return s+=o.move(n.containerPhrasing(t,{before:s,after:"=",...o.current()})),s+=o.move("=="),a(),s}function gIe(){return"="}function cM(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}const yIe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],lZ={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};function Ete(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=48&&e<=57}function vIe(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=97&&e<=102||e>=65&&e<=70||e>=48&&e<=57}function xIe(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=97&&e<=122||e>=65&&e<=90}function cZ(t){return xIe(t)||Ete(t)}const _Ie=["","Named character references must be terminated by a semicolon","Numeric character references must be terminated by a semicolon","Named character references cannot be empty","Numeric character references cannot be empty","Named character references must be known","Numeric character references cannot be disallowed","Numeric character references cannot be outside the permissible Unicode range"];function CI(t,e){const n=e||{},r=typeof n.additional=="string"?n.additional.charCodeAt(0):n.additional,i=[];let o=0,a=-1,s="",u,d;n.position&&("start"in n.position||"indent"in n.position?(d=n.position.indent,u=n.position.start):u=n.position);let m=(u?u.line:0)||1,v=(u?u.column:0)||1,_=E(),O;for(o--;++o<=t.length;)if(O===10&&(v=(d?d[a]:0)||1),O=t.charCodeAt(o),O===38){const L=t.charCodeAt(o+1);if(L===9||L===10||L===12||L===32||L===38||L===60||Number.isNaN(L)||r&&L===r){s+=String.fromCharCode(O),v++;continue}const $=o+1;let N=$,F=$,Q;if(L===35){F=++N;const se=t.charCodeAt(F);se===88||se===120?(Q="hexadecimal",F=++N):Q="decimal"}else Q="named";let W="",H="",te="";const ne=Q==="named"?cZ:Q==="decimal"?Ete:vIe;for(F--;++F<=t.length;){const se=t.charCodeAt(F);if(!ne(se))break;te+=String.fromCharCode(se),Q==="named"&&yIe.includes(te)&&(W=te,H=yT(te))}let ce=t.charCodeAt(F)===59;if(ce){F++;const se=Q==="named"?yT(te):!1;se&&(W=te,H=se)}let we=1+F-$,re="";if(!(!ce&&n.nonTerminated===!1))if(!te)Q!=="named"&&A(4,we);else if(Q==="named"){if(ce&&!H)A(5,1);else if(W!==te&&(F=N+W.length,we=1+F-N,ce=!1),!ce){const se=W?1:3;if(n.attribute){const be=t.charCodeAt(F);be===61?(A(se,we),H=""):cZ(be)?H="":A(se,we)}else A(se,we)}re=H}else{ce||A(2,we);let se=Number.parseInt(te,Q==="hexadecimal"?16:10);if(bIe(se))A(7,we),re="";else if(se in lZ)A(6,we),re=lZ[se];else{let be="";wIe(se)&&A(6,we),se>65535&&(se-=65536,be+=String.fromCharCode(se>>>10|55296),se=56320|se&1023),re=be+String.fromCharCode(se)}}if(re){M(),_=E(),o=F-1,v+=F-$+1,i.push(re);const se=E();se.offset++,n.reference&&n.reference.call(n.referenceContext||void 0,re,{start:_,end:se},t.slice($-1,F)),_=se}else te=t.slice($-1,F),s+=te,v+=te.length,o=F-1}else O===10&&(m++,a++,v=0),Number.isNaN(O)?M():(s+=String.fromCharCode(O),v++);return i.join("");function E(){return{line:m,column:v,offset:o+((u?u.offset:0)||0)}}function A(L,$){let N;n.warning&&(N=E(),N.column+=$,N.offset+=$,n.warning.call(n.warningContext||void 0,_Ie[L],N,L))}function M(){s&&(i.push(s),n.text&&n.text.call(n.textContext||void 0,s,{start:_,end:E()}),s="")}}function bIe(t){return t>=55296&&t<=57343||t>1114111}function wIe(t){return t>=1&&t<=8||t===11||t>=13&&t<=31||t>=127&&t<=159||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534}const OIe=/["&'<>`]/g,SIe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,CIe=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,TIe=/[|\\{}()[\]^$+*?.]/g,uZ=new WeakMap;function kIe(t,e){if(t=t.replace(e.subset?EIe(e.subset):OIe,r),e.subset||e.escapeOnly)return t;return t.replace(SIe,n).replace(CIe,r);function n(i,o,a){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,a.charCodeAt(o+2),e)}function r(i,o,a){return e.format(i.charCodeAt(0),a.charCodeAt(o+1),e)}}function EIe(t){let e=uZ.get(t);return e||(e=AIe(t),uZ.set(t,e)),e}function AIe(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(TIe,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}function PIe(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Ate(t,e){return kIe(t,Object.assign({format:PIe},e))}const Pte="  ";function MIe(){return{canContainEols:["mdxJsxTextElement"],enter:{mdxJsxFlowTag:r,mdxJsxFlowTagClosingMarker:i,mdxJsxFlowTagAttribute:v,mdxJsxFlowTagExpressionAttribute:_,mdxJsxFlowTagAttributeValueLiteral:t,mdxJsxFlowTagAttributeValueExpression:t,mdxJsxFlowTagSelfClosingMarker:a,mdxJsxTextTag:r,mdxJsxTextTagClosingMarker:i,mdxJsxTextTagAttribute:v,mdxJsxTextTagExpressionAttribute:_,mdxJsxTextTagAttributeValueLiteral:t,mdxJsxTextTagAttributeValueExpression:t,mdxJsxTextTagSelfClosingMarker:a},exit:{mdxJsxFlowTagClosingMarker:s,mdxJsxFlowTagNamePrimary:u,mdxJsxFlowTagNameMember:d,mdxJsxFlowTagNameLocal:m,mdxJsxFlowTagExpressionAttribute:O,mdxJsxFlowTagExpressionAttributeValue:n,mdxJsxFlowTagAttributeNamePrimary:E,mdxJsxFlowTagAttributeNameLocal:A,mdxJsxFlowTagAttributeValueLiteral:M,mdxJsxFlowTagAttributeValueLiteralValue:n,mdxJsxFlowTagAttributeValueExpression:L,mdxJsxFlowTagAttributeValueExpressionValue:n,mdxJsxFlowTagSelfClosingMarker:$,mdxJsxFlowTag:N,mdxJsxTextTagClosingMarker:s,mdxJsxTextTagNamePrimary:u,mdxJsxTextTagNameMember:d,mdxJsxTextTagNameLocal:m,mdxJsxTextTagExpressionAttribute:O,mdxJsxTextTagExpressionAttributeValue:n,mdxJsxTextTagAttributeNamePrimary:E,mdxJsxTextTagAttributeNameLocal:A,mdxJsxTextTagAttributeValueLiteral:M,mdxJsxTextTagAttributeValueLiteralValue:n,mdxJsxTextTagAttributeValueExpression:L,mdxJsxTextTagAttributeValueExpressionValue:n,mdxJsxTextTagSelfClosingMarker:$,mdxJsxTextTag:N}};function t(){this.buffer()}function e(H){return{line:H.line,column:H.column,offset:H.offset}}function n(H){this.config.enter.data.call(this,H),this.config.exit.data.call(this,H)}function r(H){const te={name:void 0,attributes:[],close:!1,selfClosing:!1,start:H.start,end:H.end};this.data.mdxJsxTagStack||(this.data.mdxJsxTagStack=[]),this.data.mdxJsxTag=te,this.buffer()}function i(H){if(this.data.mdxJsxTagStack.length===0)throw new Ii("Unexpected closing slash `/` in tag, expected an open tag first",{start:H.start,end:H.end},"mdast-util-mdx-jsx:unexpected-closing-slash")}function o(H){if(this.data.mdxJsxTag.close)throw new Ii("Unexpected attribute in closing tag, expected the end of the tag",{start:H.start,end:H.end},"mdast-util-mdx-jsx:unexpected-attribute")}function a(H){if(this.data.mdxJsxTag.close)throw new Ii("Unexpected self-closing slash `/` in closing tag, expected the end of the tag",{start:H.start,end:H.end},"mdast-util-mdx-jsx:unexpected-self-closing-slash")}function s(){const H=this.data.mdxJsxTag;H.close=!0}function u(H){const te=this.data.mdxJsxTag;te.name=this.sliceSerialize(H)}function d(H){const te=this.data.mdxJsxTag;te.name+="."+this.sliceSerialize(H)}function m(H){const te=this.data.mdxJsxTag;te.name+=":"+this.sliceSerialize(H)}function v(H){const te=this.data.mdxJsxTag;o.call(this,H),te.attributes.push({type:"mdxJsxAttribute",name:"",value:null,position:{start:e(H.start),end:void 0}})}function _(H){const te=this.data.mdxJsxTag;o.call(this,H),te.attributes.push({type:"mdxJsxExpressionAttribute",value:"",position:{start:e(H.start),end:void 0}}),this.buffer()}function O(H){const te=this.data.mdxJsxTag,ne=te.attributes[te.attributes.length-1];ne.type;const ce=H.estree;ne.value=this.resume(),ne.position,ne.position.end=e(H.end),ce&&(ne.data={estree:ce})}function E(H){const te=this.data.mdxJsxTag,ne=te.attributes[te.attributes.length-1];ne.type,ne.name=this.sliceSerialize(H),ne.position,ne.position.end=e(H.end)}function A(H){const te=this.data.mdxJsxTag,ne=te.attributes[te.attributes.length-1];ne.type,ne.name+=":"+this.sliceSerialize(H),ne.position,ne.position.end=e(H.end)}function M(H){const te=this.data.mdxJsxTag,ne=te.attributes[te.attributes.length-1];ne.value=CI(this.resume(),{nonTerminated:!1}),ne.position,ne.position.end=e(H.end)}function L(H){const te=this.data.mdxJsxTag,ne=te.attributes[te.attributes.length-1];ne.type;const ce={type:"mdxJsxAttributeValueExpression",value:this.resume()},we=H.estree;we&&(ce.data={estree:we}),ne.value=ce,ne.position,ne.position.end=e(H.end)}function $(){const H=this.data.mdxJsxTag;H.selfClosing=!0}function N(H){const te=this.data.mdxJsxTag,ne=this.data.mdxJsxTagStack,ce=ne[ne.length-1];if(te.close&&ce.name!==te.name)throw new Ii("Unexpected closing tag `"+W(te)+"`, expected corresponding closing tag for `"+W(ce)+"` ("+Ug(ce)+")",{start:H.start,end:H.end},"mdast-util-mdx-jsx:end-tag-mismatch");this.resume(),te.close?ne.pop():this.enter({type:H.type==="mdxJsxTextTag"?"mdxJsxTextElement":"mdxJsxFlowElement",name:te.name||null,attributes:te.attributes,children:[]},H,F),te.selfClosing||te.close?this.exit(H,Q):ne.push(te)}function F(H,te){const ne=this.data.mdxJsxTagStack,ce=ne[ne.length-1],we=H?" before the end of `"+H.type+"`":"",re=H?{start:H.start,end:H.end}:void 0;throw new Ii("Expected a closing tag for `"+W(ce)+"` ("+Ug({start:te.start,end:te.end})+")"+we,re,"mdast-util-mdx-jsx:end-tag-mismatch")}function Q(H,te){const ne=this.data.mdxJsxTag;throw new Ii("Expected the closing tag `"+W(ne)+"` either after the end of `"+te.type+"` ("+Ug(te.end)+") or another opening tag after the start of `"+te.type+"` ("+Ug(te.start)+")",{start:H.start,end:H.end},"mdast-util-mdx-jsx:end-tag-mismatch")}function W(H){return"<"+(H.close?"/":"")+(H.name||"")+">"}}function RIe(t){const e={},n=e.quote||'"',r=e.quoteSmart||!1,i=e.tightSelfClosing||!1,o=e.printWidth||Number.POSITIVE_INFINITY,a=n==='"'?"'":'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize attribute values with `"+n+"` for `options.quote`, expected `\"`, or `'`");return s.peek=DIe,{handlers:{mdxJsxFlowElement:s,mdxJsxTextElement:s},unsafe:[{character:"<",inConstruct:["phrasing"]},{atBreak:!0,character:"<"}],fences:!0,resourceLink:!0};function s(u,d,m,v){const _=u.type==="mdxJsxFlowElement",O=u.name?!u.children||u.children.length===0:!1,E=Mte(m),A=Rte(E),M=m.createTracker(v),L=m.createTracker(v),$=[],N=(_?A:"")+"<"+(u.name||""),F=m.enter(u.type);if(M.move(N),L.move(N),u.attributes&&u.attributes.length>0){if(!u.name)throw new Error("Cannot serialize fragment w/ attributes");let ne=-1;for(;++ne<u.attributes.length;){const ce=u.attributes[ne];let we;if(ce.type==="mdxJsxExpressionAttribute")we="{"+(ce.value||"")+"}";else{if(!ce.name)throw new Error("Cannot serialize attribute w/o name");const re=ce.value,se=ce.name;let be="";if(re!=null)if(typeof re=="object")be="{"+(re.value||"")+"}";else{const fe=r&&cM(re,n)>cM(re,a)?a:n;be=fe+Ate(re,{subset:[fe]})+fe}we=se+(be?"=":"")+be}$.push(we)}}let Q=!1;const W=$.join(" ");_&&(/\r?\n|\r/.test(W)||M.current().now.column+W.length+(O?i?2:3:1)>o)&&(Q=!0);let H=M,te=N;if(Q){H=L;let ne=-1;for(;++ne<$.length;)$[ne]=A+Pte+$[ne];te+=H.move(`
`+$.join(`
`)+`
`+A)}else W&&(te+=H.move(" "+W));return O&&(te+=H.move((i||Q?"":" ")+"/")),te+=H.move(">"),u.children&&u.children.length>0&&(u.type==="mdxJsxTextElement"?te+=H.move(m.containerPhrasing(u,{...H.current(),before:">",after:"<"})):(H.shift(2),te+=H.move(`
`),te+=H.move(IIe(u,m,H.current())),te+=H.move(`
`))),O||(te+=H.move((_?A:"")+"</"+(u.name||"")+">")),F(),te}}function IIe(t,e,n){const r=e.indexStack,i=t.children,o=e.createTracker(n),a=Rte(Mte(e)),s=[];let u=-1;for(r.push(-1);++u<i.length;){const d=i[u];r[r.length-1]=u;const m={before:`
`,after:`
`,...o.current()},v=e.handle(d,t,e,m),_=d.type==="mdxJsxFlowElement"?v:e.indentLines(v,function(O,E,A){return(A?"":a)+O});s.push(o.move(_)),d.type!=="list"&&(e.bulletLastUsed=void 0),u<i.length-1&&s.push(o.move(`

`))}return r.pop(),s.join("")}function Mte(t){let e=0,n=t.stack.length;for(;--n>-1;){const r=t.stack[n];if(r==="blockquote"||r==="listItem")break;r==="mdxJsxFlowElement"&&e++}return e}function Rte(t){return Pte.repeat(t)}function DIe(){return"<"}var hZ=Object.prototype.hasOwnProperty;function dZ(t,e,n){for(n of t.keys())if(BC(n,e))return n}function BC(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&BC(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(i=r,i&&typeof i=="object"&&(i=dZ(e,i),!i)||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(i=r[0],i&&typeof i=="object"&&(i=dZ(e,i),!i)||!BC(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(hZ.call(t,n)&&++r&&!hZ.call(e,n)||!(n in e)||!BC(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}var LIe={};let gz,Ite,Dte,Lte,$te=!0;typeof process<"u"&&({FORCE_COLOR:gz,NODE_DISABLE_COLORS:Ite,NO_COLOR:Dte,TERM:Lte}=LIe||{},$te=process.stdout&&process.stdout.isTTY);const li={enabled:!Ite&&Dte==null&&Lte!=="dumb"&&(gz!=null&&gz!=="0"||$te),reset:Ao(0,0),bold:Ao(1,22),dim:Ao(2,22),italic:Ao(3,23),underline:Ao(4,24),inverse:Ao(7,27),hidden:Ao(8,28),strikethrough:Ao(9,29),black:Ao(30,39),red:Ao(31,39),green:Ao(32,39),yellow:Ao(33,39),blue:Ao(34,39),magenta:Ao(35,39),cyan:Ao(36,39),white:Ao(37,39),gray:Ao(90,39),grey:Ao(90,39),bgBlack:Ao(40,49),bgRed:Ao(41,49),bgGreen:Ao(42,49),bgYellow:Ao(43,49),bgBlue:Ao(44,49),bgMagenta:Ao(45,49),bgCyan:Ao(46,49),bgWhite:Ao(47,49)};function fZ(t,e){let n=0,r,i="",o="";for(;n<t.length;n++)r=t[n],i+=r.open,o+=r.close,~e.indexOf(r.close)&&(e=e.replace(r.rgx,r.close+r.open));return i+e+o}function $Ie(t,e){let n={has:t,keys:e};return n.reset=li.reset.bind(n),n.bold=li.bold.bind(n),n.dim=li.dim.bind(n),n.italic=li.italic.bind(n),n.underline=li.underline.bind(n),n.inverse=li.inverse.bind(n),n.hidden=li.hidden.bind(n),n.strikethrough=li.strikethrough.bind(n),n.black=li.black.bind(n),n.red=li.red.bind(n),n.green=li.green.bind(n),n.yellow=li.yellow.bind(n),n.blue=li.blue.bind(n),n.magenta=li.magenta.bind(n),n.cyan=li.cyan.bind(n),n.white=li.white.bind(n),n.gray=li.gray.bind(n),n.grey=li.grey.bind(n),n.bgBlack=li.bgBlack.bind(n),n.bgRed=li.bgRed.bind(n),n.bgGreen=li.bgGreen.bind(n),n.bgYellow=li.bgYellow.bind(n),n.bgBlue=li.bgBlue.bind(n),n.bgMagenta=li.bgMagenta.bind(n),n.bgCyan=li.bgCyan.bind(n),n.bgWhite=li.bgWhite.bind(n),n}function Ao(t,e){let n={open:`\x1B[${t}m`,close:`\x1B[${e}m`,rgx:new RegExp(`\\x1b\\[${e}m`,"g")};return function(r){return this!==void 0&&this.has!==void 0?(~this.has.indexOf(t)||(this.has.push(t),this.keys.push(n)),r===void 0?this:li.enabled?fZ(this.keys,r+""):r+""):r===void 0?$Ie([t],[n]):li.enabled?fZ([n],r+""):r+""}}function fv(){}fv.prototype={diff:function(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={}),this.options=i;var a=this;function s(F){return o?(setTimeout(function(){o(void 0,F)},0),!0):F}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var u=n.length,d=e.length,m=1,v=u+d;i.maxEditLength&&(v=Math.min(v,i.maxEditLength));var _=(r=i.timeout)!==null&&r!==void 0?r:1/0,O=Date.now()+_,E=[{oldPos:-1,lastComponent:void 0}],A=this.extractCommon(E[0],n,e,0);if(E[0].oldPos+1>=d&&A+1>=u)return s([{value:this.join(n),count:n.length}]);var M=-1/0,L=1/0;function $(){for(var F=Math.max(M,-m);F<=Math.min(L,m);F+=2){var Q=void 0,W=E[F-1],H=E[F+1];W&&(E[F-1]=void 0);var te=!1;if(H){var ne=H.oldPos-F;te=H&&0<=ne&&ne<u}var ce=W&&W.oldPos+1<d;if(!te&&!ce){E[F]=void 0;continue}if(!ce||te&&W.oldPos+1<H.oldPos?Q=a.addToPath(H,!0,void 0,0):Q=a.addToPath(W,void 0,!0,1),A=a.extractCommon(Q,n,e,F),Q.oldPos+1>=d&&A+1>=u)return s(zIe(a,Q.lastComponent,n,e,a.useLongestToken));E[F]=Q,Q.oldPos+1>=d&&(L=Math.min(L,F-1)),A+1>=u&&(M=Math.max(M,F+1))}m++}if(o)(function F(){setTimeout(function(){if(m>v||Date.now()>O)return o();$()||F()},0)})();else for(;m<=v&&Date.now()<=O;){var N=$();if(N)return N}},addToPath:function(e,n,r,i){var o=e.lastComponent;return o&&o.added===n&&o.removed===r?{oldPos:e.oldPos+i,lastComponent:{count:o.count+1,added:n,removed:r,previousComponent:o.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:o}}},extractCommon:function(e,n,r,i){for(var o=n.length,a=r.length,s=e.oldPos,u=s-i,d=0;u+1<o&&s+1<a&&this.equals(n[u+1],r[s+1]);)u++,s++,d++;return d&&(e.lastComponent={count:d,previousComponent:e.lastComponent}),e.oldPos=s,u},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function zIe(t,e,n,r,i){for(var o=[],a;e;)o.push(e),a=e.previousComponent,delete e.previousComponent,e=a;o.reverse();for(var s=0,u=o.length,d=0,m=0;s<u;s++){var v=o[s];if(v.removed){if(v.value=t.join(r.slice(m,m+v.count)),m+=v.count,s&&o[s-1].added){var O=o[s-1];o[s-1]=o[s],o[s]=O}}else{if(!v.added&&i){var _=n.slice(d,d+v.count);_=_.map(function(A,M){var L=r[m+M];return L.length>A.length?L:A}),v.value=t.join(_)}else v.value=t.join(n.slice(d,d+v.count));d+=v.count,v.added||(m+=v.count)}}var E=o[u-1];return u>1&&typeof E.value=="string"&&(E.added||E.removed)&&t.equals("",E.value)&&(o[u-2].value+=E.value,o.pop()),o}var pZ=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,mZ=/\S/,zte=new fv;zte.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!mZ.test(t)&&!mZ.test(e)};zte.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&pZ.test(e[n])&&pZ.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};var Nte=new fv;Nte.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};var NIe=new fv;NIe.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var BIe=new fv;BIe.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function t5(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t5=function(e){return typeof e}:t5=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t5(t)}var FIe=Object.prototype.toString,CT=new fv;CT.useLongestToken=!0;CT.tokenize=Nte.tokenize;CT.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(o,a){return typeof a>"u"?n:a}:r;return typeof t=="string"?t:JSON.stringify(yz(t,null,null,i),i,"  ")};CT.equals=function(t,e){return fv.prototype.equals.call(CT,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function yz(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return n[o];var a;if(FIe.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),n.push(a),o=0;o<t.length;o+=1)a[o]=yz(t[o],e,n,r,i);return e.pop(),n.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),t5(t)==="object"&&t!==null){e.push(t),a={},n.push(a);var s=[],u;for(u in t)t.hasOwnProperty(u)&&s.push(u);for(s.sort(),o=0;o<s.length;o+=1)u=s[o],a[u]=yz(t[u],e,n,r,u);e.pop(),n.pop()}else a=t;return a}var vz=new fv;vz.tokenize=function(t){return t.slice()};vz.join=vz.removeEmpty=function(t){return t};li.red,li.grey,li.green;li.dim().italic;li.dim("");li.dim("");li.dim("");function uM(t){t=t.replace(/\r?\n/g,`
`);let e=t.match(/^[ \t]*(?=\S)/gm),n=0,r=1/0,i=(e||[]).length;for(;n<i;n++)r=Math.min(r,e[n].length);return i&&r?t.replace(new RegExp(`^[ \\t]{${r}}`,"gm"),""):t}class jIe extends Error{constructor(e={}){super(e.message),this.name="Assertion",this.code="ERR_ASSERTION",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.details=e.details||!1,this.generated=!!e.generated,this.operator=e.operator,this.expects=e.expects,this.actual=e.actual}}function dd(t,e,n,r,i,o,a){if(t)return;let s=a||o;if(a instanceof Error)throw a;let u=i;throw new jIe({actual:e,expects:n,operator:r,message:s,details:u,generated:!a})}function VIe(t,e){dd(!!t,!1,!0,"ok",!1,"Expected value to be truthy",e)}function oy(t,e){dd(!t,!0,!1,"not",!1,"Expected value to be falsey",e)}oy.ok=oy;oy.equal=function(t,e,n){dd(!BC(t,e),t,e,"not.equal",!1,"Expected values not to be deeply equal",n)};oy.type=function(t,e,n){let r=typeof t;dd(r!==e,r,e,"not.type",!1,`Expected "${r}" not to be "${e}"`,n)};oy.instance=function(t,e,n){let r="`"+(e.name||e.constructor.name)+"`";dd(!(t instanceof e),t,e,"not.instance",!1,`Expected value not to be an instance of ${r}`,n)};oy.snapshot=function(t,e,n){t=uM(t),e=uM(e),dd(t!==e,t,e,"not.snapshot",!1,"Expected value not to match snapshot",n)};oy.fixture=function(t,e,n){t=uM(t),e=uM(e),dd(t!==e,t,e,"not.fixture",!1,"Expected value not to match fixture",n)};oy.match=function(t,e,n){typeof e=="string"?dd(!t.includes(e),t,e,"not.match",!1,`Expected value not to include "${e}" substring`,n):dd(!e.test(t),t,e,"not.match",!1,`Expected value not to match \`${String(e)}\` pattern`,n)};oy.throws=function(t,e,n){!n&&typeof e=="string"&&(n=e,e=null);try{t()}catch(r){typeof e=="function"?dd(!e(r),!0,!1,"not.throws",!1,"Expected function not to throw matching exception",n):e instanceof RegExp?dd(!e.test(r.message),!0,!1,"not.throws",!1,`Expected function not to throw exception matching \`${String(e)}\` pattern`,n):e||dd(!1,!0,!1,"not.throws",!1,"Expected function not to throw",n)}};const zl={eof:null,exclamationMark:33,dash:45,equalsTo:61,greaterThan:62},gZ={attentionSideAfter:2},Bg={data:"data",lineEnding:"lineEnding",linePrefix:"linePrefix",characterEscape:"characterEscape"};var W2="highlightSequenceTemporary",yZ="highlightSequence",QIe="highlight",UIe="highlightText";function ZIe(){const t={name:"highlight",tokenize:n,resolveAll:e};return{text:{[zl.equalsTo]:t},insideSpan:{null:[t]},attentionMarkers:{null:[zl.equalsTo]}};function e(r,i){let o=-1;for(;++o<r.length;)if(r[o][0]==="enter"&&r[o][1].type===W2&&r[o][1]._close){let a=o;for(;a--;)if(r[a][0]==="exit"&&r[a][1].type===W2&&r[a][1]._open&&r[o][1].end.offset-r[o][1].start.offset===r[a][1].end.offset-r[a][1].start.offset){r[o][1].type=yZ,r[a][1].type=yZ;const s={type:QIe,start:Object.assign({},r[a][1].start),end:Object.assign({},r[o][1].end)},u={type:UIe,start:Object.assign({},r[a][1].end),end:Object.assign({},r[o][1].start)},d=[["enter",s,i],["enter",r[a][1],i],["exit",r[a][1],i],["enter",u,i]],m=i.parser.constructs.insideSpan.null;m&&jl(d,d.length,0,Ek(m,r.slice(a+1,o),i)),jl(d,d.length,0,[["exit",u,i],["enter",r[o][1],i],["exit",r[o][1],i],["exit",s,i]]),jl(r,a-1,o-a+3,d),o=a+d.length-2;break}}for(o=-1;++o<r.length;)r[o][1].type===W2&&(r[o][1].type=Bg.data);return r}function n(r,i,o){const a=this.previous,s=this.events;let u=0;return d;function d(v){return VIe(v===zl.equalsTo,"expected `=`"),a===zl.equalsTo&&s[s.length-1][1].type!==Bg.characterEscape?o(v):(r.enter(W2),m(v))}function m(v){const _=X0(a);if(v===zl.equalsTo)return u>1?o(v):(r.consume(v),u++,m);if(u<2)return o(v);const O=r.exit(W2),E=X0(v);return O._open=!E||E===gZ.attentionSideAfter&&!!_,O._close=!_||_===gZ.attentionSideAfter&&!!E,i(v)}}}const qIe={}.hasOwnProperty,WIe=Symbol("continue"),eL=Symbol("exit"),HIe=Symbol("skip");function GIe(t,e){let n,r;typeof e=="function"?n=e:e&&typeof e=="object"&&(e.enter&&(n=e.enter),e.leave&&(r=e.leave)),i(t,void 0,void 0,[])();function i(o,a,s,u){return tL(o)&&(d.displayName="node ("+o.type+")"),d;function d(){const m=n?vZ(n(o,a,s,u)):[];if(m[0]===eL)return m;if(m[0]!==HIe){let v;for(v in o)if(qIe.call(o,v)&&o[v]&&typeof o[v]=="object"&&v!=="data"&&v!=="position"){const _=u.concat(o),O=o[v];if(Array.isArray(O)){const E=O;let A=0;for(;A>-1&&A<E.length;){const M=E[A];if(tL(M)){const L=i(M,v,A,_)();if(L[0]===eL)return L;A=typeof L[1]=="number"?L[1]:A+1}else A++}}else if(tL(O)){const E=i(O,v,void 0,_)();if(E[0]===eL)return E}}}return r?vZ(r(o,a,s,u)):m}}}function vZ(t){return Array.isArray(t)?t:typeof t=="number"?[WIe,t]:[t]}function tL(t){return!!(t&&typeof t=="object"&&"type"in t&&typeof t.type=="string"&&t.type.length>0)}function XIe(t,e){const n=e.prefix||"",r=e.suffix||"",i=Object.assign({},e.acornOptions),o=[],a=[],s=i.onComment,u=i.onToken;let d=!1,m,v;const _=Object.assign({},i,{onComment:o,preserveParens:!0});u&&(_.onToken=a);const O=YIe(t,e.tokenTypes),E=O.value,A=n+E+r,M=xZ(E);if(M&&!e.allowEmpty)throw new Ii("Unexpected empty expression",{place:$(0),ruleId:"unexpected-empty-expression",source:"micromark-extension-mdx-expression"});try{m=e.expression&&!M?e.acorn.parseExpressionAt(A,0,_):e.acorn.parse(A,_)}catch(N){const F=N,Q=$(F.pos);F.message=String(F.message).replace(/ \(\d+:\d+\)$/,""),F.pos=Q.offset,F.loc={line:Q.line,column:Q.column-1},v=F,d=F.raisedAt>=n.length+E.length||F.message==="Unterminated comment"}if(m&&e.expression&&!M)if(xZ(A.slice(m.end,A.length-r.length)))m={type:"Program",start:0,end:n.length+E.length,body:[{type:"ExpressionStatement",expression:m,start:0,end:n.length+E.length}],sourceType:"module",comments:[]};else{const N=$(m.end),F=new Error("Unexpected content after expression");F.pos=N.offset,F.loc={line:N.line,column:N.column-1},v=F,m=void 0}if(m){if(m.comments=o,GIe(m,function(N,F,Q,W){let H=W[W.length-1],te=F;N.type==="ParenthesizedExpression"&&H&&te&&(typeof Q=="number"&&(H=H[te],te=Q),H[te]=N.expression),L(N)}),Array.isArray(s))s.push(...o);else if(typeof s=="function")for(const N of o)s(N.type==="Block",N.value,N.start,N.end,N.loc.start,N.loc.end);for(const N of a)N.end<=n.length||N.start-n.length>=E.length||(L(N),Array.isArray(u)?u.push(N):u(N))}return{estree:m,error:v,swallow:d};function L(N){const F=$(N.start),Q=$(N.end);N.start=F.offset,N.end=Q.offset,N.loc={start:{line:F.line,column:F.column-1,offset:F.offset},end:{line:Q.line,column:Q.column-1,offset:Q.offset}},N.range=[N.start,N.end]}function $(N){let F=N-n.length;F<0?F=0:F>E.length&&(F=E.length);let Q=KIe(O.stops,F);return Q||(Q={line:e.start.line,column:e.start.column,offset:e.start.offset}),Q}}function xZ(t){return/^\s*$/.test(t.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/[^\r\n]*(\r\n|\n|\r)/g,""))}function YIe(t,e){const n={value:"",stops:[]};let r=-1;for(;++r<t.length;){const i=t[r];if(i[0]==="enter"){const o=i[1].type;if(o==="lineEnding"||e.includes(o)){const a=i[2].sliceStream(i[1]);for(;a.length>0&&a[0]===-1;)a.shift();const s=JIe(a);n.stops.push([n.value.length,i[1].start]),n.value+=s,n.stops.push([n.value.length,i[1].end])}}}return n}function KIe(t,e){let n=0;for(;n<t.length&&t[n][0]<=e;)n+=1;if(n===0)return;const[r,i]=t[n-1],o=e-r;return{line:i.line,column:i.column+o,offset:i.offset+o}}function JIe(t){let e=-1;const n=[];let r;for(;++e<t.length;){const i=t[e];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o="	";break}case-1:{if(r)continue;o=" ";break}default:o=String.fromCharCode(i)}r=i===-2,n.push(o)}return n.join("")}function nL(t){const e=t||{},n=e.loc||{},r=e.range||[void 0,void 0],i=_Z(n.start,r[0]||e.start),o=_Z(n.end,r[1]||e.end);if(i&&o)return{start:i,end:o}}function _Z(t,e){if(t&&typeof t=="object"){const n="line"in t?rL(t.line):void 0,r="column"in t?rL(t.column):void 0;if(n&&r!==void 0)return{line:n,column:r+1,offset:rL(e)}}}function rL(t){return typeof t=="number"&&t>-1?t:void 0}const eDe=2,dw="https://github.com/micromark/micromark-extension-mdx-expression/tree/main/packages/micromark-extension-mdx-expression",tDe="#unexpected-end-of-file-in-expression-expected-a-corresponding-closing-brace-for-",nDe="#unexpected-lazy-line-in-expression-in-container-expected-line-to-be-prefixed",bZ="#unexpected-type-in-code-expected-an-object-spread-spread",rDe="#unexpected-extra-content-in-spread-only-a-single-spread-is-supported",iDe="#could-not-parse-expression-with-acorn";function wZ(t,e,n,r,i,o,a,s,u,d,m){const v=this,_=this.events.length+3;let O=0,E,A;return M;function M(F){return t.enter(n),t.enter(r),t.consume(F),t.exit(r),E=v.now(),L}function L(F){if(F===null){if(A)throw A;const Q=new Ii("Unexpected end of file in expression, expected a corresponding closing brace for `{`",{place:v.now(),ruleId:"unexpected-eof",source:"micromark-extension-mdx-expression"});throw Q.url=dw+tDe,Q}if(Mn(F))return t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),N;if(F===125&&O===0){const Q=o?oDe.call(v,o,a,i,_,E,d||!1,u||!1):{type:"ok",estree:void 0};if(Q.type==="ok"){t.enter(r),t.consume(F),t.exit(r);const W=t.exit(n);return s&&Q.estree&&Object.assign(W,{estree:Q.estree}),e}return A=Q.message,t.enter(i),t.consume(F),$}return t.enter(i),$(F)}function $(F){return F===125&&O===0||F===null||Mn(F)?(t.exit(i),L(F)):(F===123&&!o?O+=1:F===125&&(O-=1),t.consume(F),$)}function N(F){const Q=v.now();if(Q.line!==E.line&&!m&&v.parser.lazy[Q.line]){const W=new Ii("Unexpected lazy line in expression in container, expected line to be prefixed with `>` when in a block quote, whitespace when in a list, etc",{place:v.now(),ruleId:"unexpected-lazy",source:"micromark-extension-mdx-expression"});throw W.url=dw+nDe,W}return _r(F)?Rr(t,L,"linePrefix",eDe+1)(F):L(F)}}function oDe(t,e,n,r,i,o,a){const s=XIe(this.events.slice(r),{acorn:t,tokenTypes:[n],acornOptions:e,start:i,expression:!0,allowEmpty:o,prefix:a?"({":"",suffix:a?"})":""}),u=s.estree;if(a&&u){const d=u.body[0];if(d.type!=="ExpressionStatement"||d.expression.type!=="ObjectExpression"){const m=nL(d),v=new Ii("Unexpected `"+d.type+"` in code: expected an object spread (`{...spread}`)",{place:m.start,ruleId:"non-spread",source:"micromark-extension-mdx-expression"});throw v.url=dw+bZ,v}if(d.expression.properties[1]){const m=nL(d.expression.properties[1]),v=new Ii("Unexpected extra content in spread: only a single spread is supported",{place:m.start,ruleId:"spread-extra",source:"micromark-extension-mdx-expression"});throw v.url=dw+rDe,v}if(d.expression.properties[0]&&d.expression.properties[0].type!=="SpreadElement"){const m=nL(d.expression.properties[0]),v=new Ii("Unexpected `"+d.expression.properties[0].type+"` in code: only spread elements are supported",{place:m.start,ruleId:"non-spread",source:"micromark-extension-mdx-expression"});throw v.url=dw+bZ,v}}if(s.error){const d=new Ii("Could not parse expression with acorn",{cause:s.error,place:{line:s.error.loc.line,column:s.error.loc.column+1,offset:s.error.pos},ruleId:"acorn",source:"micromark-extension-mdx-expression"});return d.url=dw+iDe,{type:"nok",message:d}}return{type:"ok",estree:u}}const OZ="https://github.com/micromark/micromark-extension-mdx-jsx";function Bte(t,e,n,r,i,o,a,s,u,d,m,v,_,O,E,A,M,L,$,N,F,Q,W,H,te,ne,ce,we,re,se,be,fe){const ve=this;let Me,Ne;return Qe;function Qe(K){return t.enter(s),t.enter(u),t.consume(K),t.exit(u),Ce}function Ce(K){return Ri(K)?n(K):(Me=Ae,kt(K))}function Ae(K){if(K===47)return t.enter(d),t.consume(K),t.exit(d),Me=Xe,kt;if(K===62)return vt(K);if(K!==null&&K>=0&&vf(K))return t.enter(v),t.enter(_),t.consume(K),ke;ae(K,"before name","a character that can start a name, such as a letter, `$`, or `_`"+(K===33?" (note: to create a comment in MDX, use `{/* text */}`)":""))}function Xe(K){if(K===62)return vt(K);if(K!==null&&K>=0&&vf(K))return t.enter(v),t.enter(_),t.consume(K),ke;ae(K,"before name","a character that can start a name, such as a letter, `$`, or `_`"+(K===42||K===47?" (note: JS comments in JSX tags are not supported in MDX)":""))}function ke(K){if(K!==null&&K>=0&&F2(K,{jsx:!0}))return t.consume(K),ke;if(K===46||K===47||K===58||K===62||K===123||Ri(K)||Dg(K))return t.exit(_),Me=ft,kt(K);ae(K,"in name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag"+(K===64?" (note: to create a link in MDX, use `[text](url)`)":""))}function ft(K){if(K===46)return t.enter(O),t.consume(K),t.exit(O),Me=pt,kt;if(K===58)return t.enter(A),t.consume(K),t.exit(A),Me=yt,kt;if(K===47||K===62||K===123||K!==null&&K>=0&&vf(K))return t.exit(v),Ht(K);ae(K,"after name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function pt(K){if(K!==null&&K>=0&&vf(K))return t.enter(E),t.consume(K),lt;ae(K,"before member name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function lt(K){if(K!==null&&K>=0&&F2(K,{jsx:!0}))return t.consume(K),lt;if(K===46||K===47||K===62||K===123||Ri(K)||Dg(K))return t.exit(E),Me=ot,kt(K);ae(K,"in member name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag"+(K===64?" (note: to create a link in MDX, use `[text](url)`)":""))}function ot(K){if(K===46)return t.enter(O),t.consume(K),t.exit(O),Me=pt,kt;if(K===47||K===62||K===123||K!==null&&K>=0&&vf(K))return t.exit(v),Ht(K);ae(K,"after member name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function yt(K){if(K!==null&&K>=0&&vf(K))return t.enter(M),t.consume(K),Et;ae(K,"before local name","a character that can start a name, such as a letter, `$`, or `_`"+(K===43||K!==null&&K>46&&K<58?" (note: to create a link in MDX, use `[text](url)`)":""))}function Et(K){if(K!==null&&K>=0&&F2(K,{jsx:!0}))return t.consume(K),Et;if(K===47||K===62||K===123||Ri(K)||Dg(K))return t.exit(M),Me=Tt,kt(K);ae(K,"in local name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag")}function Tt(K){if(K===47||K===62||K===123||K!==null&&K>=0&&vf(K))return t.exit(v),Ht(K);ae(K,"after local name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function Ht(K){if(K===47)return t.enter(m),t.consume(K),t.exit(m),Me=Ye,kt;if(K===62)return vt(K);if(K===123)return wZ.call(ve,t,wt,L,$,N,r,i,o,!0,!1,a)(K);if(K!==null&&K>=0&&vf(K))return t.enter(F),t.enter(Q),t.enter(W),t.consume(K),un;ae(K,"before attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function wt(K){return Me=Ht,kt(K)}function un(K){if(K!==null&&K>=0&&F2(K,{jsx:!0}))return t.consume(K),un;if(K===47||K===58||K===61||K===62||K===123||Ri(K)||Dg(K))return t.exit(W),Me=Gt,kt(K);ae(K,"in attribute name","an attribute name character such as letters, digits, `$`, or `_`; `=` to initialize a value; whitespace before attributes; or the end of the tag")}function Gt(K){if(K===58)return t.enter(H),t.consume(K),t.exit(H),Me=Jt,kt;if(K===61)return t.exit(Q),t.enter(ne),t.consume(K),t.exit(ne),Me=Cn,kt;if(K===47||K===62||K===123||Ri(K)||Dg(K)||K!==null&&K>=0&&vf(K))return t.exit(Q),t.exit(F),Me=Ht,kt(K);ae(K,"after attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function Jt(K){if(K!==null&&K>=0&&vf(K))return t.enter(te),t.consume(K),Sn;ae(K,"before local attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function Sn(K){if(K!==null&&K>=0&&F2(K,{jsx:!0}))return t.consume(K),Sn;if(K===47||K===61||K===62||K===123||Ri(K)||Dg(K))return t.exit(te),t.exit(Q),Me=nn,kt(K);ae(K,"in local attribute name","an attribute name character such as letters, digits, `$`, or `_`; `=` to initialize a value; whitespace before attributes; or the end of the tag")}function nn(K){if(K===61)return t.enter(ne),t.consume(K),t.exit(ne),Me=Cn,kt;if(K===47||K===62||K===123||K!==null&&K>=0&&vf(K))return t.exit(F),Ht(K);ae(K,"after local attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function Cn(K){if(K===34||K===39)return t.enter(ce),t.enter(we),t.consume(K),t.exit(we),Ne=K,Gn;if(K===123)return wZ.call(ve,t,jn,se,be,fe,r,i,o,!1,!1,a)(K);ae(K,"before attribute value","a character that can start an attribute value, such as `\"`, `'`, or `{`"+(K===60?" (note: to use an element or fragment as a prop value in MDX, use `{<element />}`)":""))}function jn(K){return t.exit(F),Me=Ht,kt(K)}function Gn(K){return K===null&&ae(K,"in attribute value","a corresponding closing quote `"+String.fromCodePoint(Ne)+"`"),K===Ne?(t.enter(we),t.consume(K),t.exit(we),t.exit(ce),t.exit(F),Ne=void 0,Me=Ht,kt):Mn(K)?(Me=Gn,kt(K)):(t.enter(re),je(K))}function je(K){return K===null||K===Ne||Mn(K)?(t.exit(re),Gn(K)):(t.consume(K),je)}function Ye(K){if(K===62)return vt(K);ae(K,"after self-closing slash","`>` to end the tag"+(K===42||K===47?" (note: JS comments in JSX tags are not supported in MDX)":""))}function vt(K){return t.enter(u),t.consume(K),t.exit(u),t.exit(s),e}function kt(K){return Mn(K)?(t.enter("lineEnding"),t.consume(K),t.exit("lineEnding"),Oe):_r(K)||Dg(K)?(t.enter("esWhitespace"),jt(K)):Me(K)}function jt(K){return Mn(K)?(t.exit("esWhitespace"),kt(K)):_r(K)||Dg(K)?(t.consume(K),jt):(t.exit("esWhitespace"),Me(K))}function Oe(K){if(!a&&ve.parser.lazy[ve.now().line]){const _e=new Ii("Unexpected lazy line in container, expected line to be prefixed with `>` when in a block quote, whitespace when in a list, etc",ve.now(),"micromark-extension-mdx-jsx:unexpected-lazy");throw _e.url=OZ+"#unexpected-lazy-line-in-container-expected-line-to-be",_e}return kt(K)}function ae(K,_e,$e){const ze=new Ii("Unexpected "+(K===null?"end of file":"character `"+(K===96?"` ` `":String.fromCodePoint(K))+"` ("+sDe(K)+")")+" "+_e+", expected "+$e,ve.now(),"micromark-extension-mdx-jsx:unexpected-"+(K===null?"eof":"character"));throw ze.url=OZ+(K===null?"#unexpected-end-of-file-at-expected-expect":"#unexpected-character-at-expected-expect"),ze}}function sDe(t){return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function aDe(t,e){return{name:"mdxJsxTextTag",tokenize:n};function n(r,i,o){return Bte.call(this,r,i,o,t,e.acornOptions,e.addResult,!0,"mdxJsxTextTag","mdxJsxTextTagMarker","mdxJsxTextTagClosingMarker","mdxJsxTextTagSelfClosingMarker","mdxJsxTextTagName","mdxJsxTextTagNamePrimary","mdxJsxTextTagNameMemberMarker","mdxJsxTextTagNameMember","mdxJsxTextTagNamePrefixMarker","mdxJsxTextTagNameLocal","mdxJsxTextTagExpressionAttribute","mdxJsxTextTagExpressionAttributeMarker","mdxJsxTextTagExpressionAttributeValue","mdxJsxTextTagAttribute","mdxJsxTextTagAttributeName","mdxJsxTextTagAttributeNamePrimary","mdxJsxTextTagAttributeNamePrefixMarker","mdxJsxTextTagAttributeNameLocal","mdxJsxTextTagAttributeInitializerMarker","mdxJsxTextTagAttributeValueLiteral","mdxJsxTextTagAttributeValueLiteralMarker","mdxJsxTextTagAttributeValueLiteralValue","mdxJsxTextTagAttributeValueExpression","mdxJsxTextTagAttributeValueExpressionMarker","mdxJsxTextTagAttributeValueExpressionValue")}}function lDe(t,e){return{concrete:!0,name:"mdxJsxFlowTag",tokenize:n};function n(r,i,o){const a=this;return s;function s(v){return u(v)}function u(v){return Bte.call(a,r,d,o,t,e.acornOptions,e.addResult,!1,"mdxJsxFlowTag","mdxJsxFlowTagMarker","mdxJsxFlowTagClosingMarker","mdxJsxFlowTagSelfClosingMarker","mdxJsxFlowTagName","mdxJsxFlowTagNamePrimary","mdxJsxFlowTagNameMemberMarker","mdxJsxFlowTagNameMember","mdxJsxFlowTagNamePrefixMarker","mdxJsxFlowTagNameLocal","mdxJsxFlowTagExpressionAttribute","mdxJsxFlowTagExpressionAttributeMarker","mdxJsxFlowTagExpressionAttributeValue","mdxJsxFlowTagAttribute","mdxJsxFlowTagAttributeName","mdxJsxFlowTagAttributeNamePrimary","mdxJsxFlowTagAttributeNamePrefixMarker","mdxJsxFlowTagAttributeNameLocal","mdxJsxFlowTagAttributeInitializerMarker","mdxJsxFlowTagAttributeValueLiteral","mdxJsxFlowTagAttributeValueLiteralMarker","mdxJsxFlowTagAttributeValueLiteralValue","mdxJsxFlowTagAttributeValueExpression","mdxJsxFlowTagAttributeValueExpressionMarker","mdxJsxFlowTagAttributeValueExpressionValue")(v)}function d(v){return _r(v)?Rr(r,m,"whitespace")(v):m(v)}function m(v){const _=a.parser.constructs.flow[123],O=Array.isArray(_)?_:_?[_]:[];let E;for(const A of O)if(A.name==="mdxFlowExpression"){E=A;break}return v===60?s(v):v===123&&E?r.attempt(E,m,o)(v):v===null||Mn(v)?i(v):o(v)}}}function cDe(t){const e={},n=e.acorn;let r;if(n){if(!n.parse||!n.parseExpressionAt)throw new Error("Expected a proper `acorn` instance passed in as `options.acorn`");r=Object.assign({ecmaVersion:2024,sourceType:"module"},e.acornOptions,{locations:!0})}else if(e.acornOptions||e.addResult)throw new Error("Expected an `acorn` instance passed in as `options.acorn`");return{flow:{60:lDe(n||void 0,{acornOptions:r,addResult:e.addResult||void 0})},text:{60:aDe(n||void 0,{acornOptions:r,addResult:e.addResult||void 0})}}}function uDe(){return{disable:{null:["autolink","codeIndented","htmlFlow","htmlText"]}}}const SZ={}.hasOwnProperty;function hDe(t,e){const n=e||{};function r(i,...o){let a=r.invalid;const s=r.handlers;if(i&&SZ.call(i,t)){const u=String(i[t]);a=SZ.call(s,u)?s[u]:r.unknown}if(a)return a.call(this,i,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const dDe={}.hasOwnProperty;function Fte(t,e){let n=-1,r;if(e.extensions)for(;++n<e.extensions.length;)Fte(t,e.extensions[n]);for(r in e)if(dDe.call(e,r))switch(r){case"extensions":break;case"unsafe":{CZ(t[r],e[r]);break}case"join":{CZ(t[r],e[r]);break}case"handlers":{fDe(t[r],e[r]);break}default:t.options[r]=e[r]}return t}function CZ(t,e){e&&t.push(...e)}function fDe(t,e){e&&Object.assign(t,e)}function pDe(t,e,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const a=n.indentLines(n.containerFlow(t,o.current()),mDe);return i(),a}function mDe(t,e,n){return">"+(n?"":" ")+t}function jte(t,e){return TZ(t,e.inConstruct,!0)&&!TZ(t,e.notInConstruct,!1)}function TZ(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function kZ(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&jte(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function gDe(t,e){const n=String(t);let r=n.indexOf(e),i=r,o=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++o>a&&(a=o):o=1,i=r+e.length,r=n.indexOf(e,i);return a}function xz(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function yDe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function vDe(t,e,n,r){const i=yDe(n),o=t.value||"",a=i==="`"?"GraveAccent":"Tilde";if(xz(t,n)){const v=n.enter("codeIndented"),_=n.indentLines(o,xDe);return v(),_}const s=n.createTracker(r),u=i.repeat(Math.max(gDe(o,i)+1,3)),d=n.enter("codeFenced");let m=s.move(u);if(t.lang){const v=n.enter(`codeFencedLang${a}`);m+=s.move(n.safe(t.lang,{before:m,after:" ",encode:["`"],...s.current()})),v()}if(t.lang&&t.meta){const v=n.enter(`codeFencedMeta${a}`);m+=s.move(" "),m+=s.move(n.safe(t.meta,{before:m,after:`
`,encode:["`"],...s.current()})),v()}return m+=s.move(`
`),o&&(m+=s.move(o+`
`)),m+=s.move(u),d(),m}function xDe(t,e,n){return(n?"":"    ")+t}function P8(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function _De(t,e,n,r){const i=P8(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("definition");let s=n.enter("label");const u=n.createTracker(r);let d=u.move("[");return d+=u.move(n.safe(n.associationId(t),{before:d,after:"]",...u.current()})),d+=u.move("]: "),s(),!t.url||/[\0- \u007F]/.test(t.url)?(s=n.enter("destinationLiteral"),d+=u.move("<"),d+=u.move(n.safe(t.url,{before:d,after:">",...u.current()})),d+=u.move(">")):(s=n.enter("destinationRaw"),d+=u.move(n.safe(t.url,{before:d,after:t.title?" ":`
`,...u.current()}))),s(),t.title&&(s=n.enter(`title${o}`),d+=u.move(" "+i),d+=u.move(n.safe(t.title,{before:d,after:i,...u.current()})),d+=u.move(i),s()),a(),d}function bDe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function K0(t){return"&#x"+t.toString(16).toUpperCase()+";"}function hM(t,e,n){const r=X0(t),i=X0(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Vte.peek=wDe;function Vte(t,e,n,r){const i=bDe(n),o=n.enter("emphasis"),a=n.createTracker(r),s=a.move(i);let u=a.move(n.containerPhrasing(t,{after:i,before:s,...a.current()}));const d=u.charCodeAt(0),m=hM(r.before.charCodeAt(r.before.length-1),d,i);m.inside&&(u=K0(d)+u.slice(1));const v=u.charCodeAt(u.length-1),_=hM(r.after.charCodeAt(0),v,i);_.inside&&(u=u.slice(0,-1)+K0(v));const O=a.move(i);return o(),n.attentionEncodeSurroundingInfo={after:_.outside,before:m.outside},s+u+O}function wDe(t,e,n){return n.options.emphasis||"*"}function Qte(t,e){let n=!1;return VB(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,z4}),!!((!t.depth||t.depth<3)&&LB(t)&&(e.options.setext||n))}function ODe(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),o=n.createTracker(r);if(Qte(t,n)){const m=n.enter("headingSetext"),v=n.enter("phrasing"),_=n.containerPhrasing(t,{...o.current(),before:`
`,after:`
`});return v(),m(),_+`
`+(i===1?"=":"-").repeat(_.length-(Math.max(_.lastIndexOf("\r"),_.lastIndexOf(`
`))+1))}const a="#".repeat(i),s=n.enter("headingAtx"),u=n.enter("phrasing");o.move(a+" ");let d=n.containerPhrasing(t,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(d)&&(d=K0(d.charCodeAt(0))+d.slice(1)),d=d?a+" "+d:a,n.options.closeAtx&&(d+=" "+a),u(),s(),d}Ute.peek=SDe;function Ute(t){return t.value||""}function SDe(){return"<"}Zte.peek=CDe;function Zte(t,e,n,r){const i=P8(n),o=i==='"'?"Quote":"Apostrophe",a=n.enter("image");let s=n.enter("label");const u=n.createTracker(r);let d=u.move("![");return d+=u.move(n.safe(t.alt,{before:d,after:"]",...u.current()})),d+=u.move("]("),s(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(s=n.enter("destinationLiteral"),d+=u.move("<"),d+=u.move(n.safe(t.url,{before:d,after:">",...u.current()})),d+=u.move(">")):(s=n.enter("destinationRaw"),d+=u.move(n.safe(t.url,{before:d,after:t.title?" ":")",...u.current()}))),s(),t.title&&(s=n.enter(`title${o}`),d+=u.move(" "+i),d+=u.move(n.safe(t.title,{before:d,after:i,...u.current()})),d+=u.move(i),s()),d+=u.move(")"),a(),d}function CDe(){return"!"}qte.peek=TDe;function qte(t,e,n,r){const i=t.referenceType,o=n.enter("imageReference");let a=n.enter("label");const s=n.createTracker(r);let u=s.move("![");const d=n.safe(t.alt,{before:u,after:"]",...s.current()});u+=s.move(d+"]["),a();const m=n.stack;n.stack=[],a=n.enter("reference");const v=n.safe(n.associationId(t),{before:u,after:"]",...s.current()});return a(),n.stack=m,o(),i==="full"||!d||d!==v?u+=s.move(v+"]"):i==="shortcut"?u=u.slice(0,-1):u+=s.move("]"),u}function TDe(){return"!"}Wte.peek=kDe;function Wte(t,e,n){let r=t.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const a=n.unsafe[o],s=n.compilePattern(a);let u;if(a.atBreak)for(;u=s.exec(r);){let d=u.index;r.charCodeAt(d)===10&&r.charCodeAt(d-1)===13&&d--,r=r.slice(0,d)+" "+r.slice(u.index+1)}}return i+r+i}function kDe(){return"`"}function Hte(t,e){const n=LB(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}Gte.peek=EDe;function Gte(t,e,n,r){const i=P8(n),o=i==='"'?"Quote":"Apostrophe",a=n.createTracker(r);let s,u;if(Hte(t,n)){const m=n.stack;n.stack=[],s=n.enter("autolink");let v=a.move("<");return v+=a.move(n.containerPhrasing(t,{before:v,after:">",...a.current()})),v+=a.move(">"),s(),n.stack=m,v}s=n.enter("link"),u=n.enter("label");let d=a.move("[");return d+=a.move(n.containerPhrasing(t,{before:d,after:"](",...a.current()})),d+=a.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),d+=a.move("<"),d+=a.move(n.safe(t.url,{before:d,after:">",...a.current()})),d+=a.move(">")):(u=n.enter("destinationRaw"),d+=a.move(n.safe(t.url,{before:d,after:t.title?" ":")",...a.current()}))),u(),t.title&&(u=n.enter(`title${o}`),d+=a.move(" "+i),d+=a.move(n.safe(t.title,{before:d,after:i,...a.current()})),d+=a.move(i),u()),d+=a.move(")"),s(),d}function EDe(t,e,n){return Hte(t,n)?"<":"["}Xte.peek=ADe;function Xte(t,e,n,r){const i=t.referenceType,o=n.enter("linkReference");let a=n.enter("label");const s=n.createTracker(r);let u=s.move("[");const d=n.containerPhrasing(t,{before:u,after:"]",...s.current()});u+=s.move(d+"]["),a();const m=n.stack;n.stack=[],a=n.enter("reference");const v=n.safe(n.associationId(t),{before:u,after:"]",...s.current()});return a(),n.stack=m,o(),i==="full"||!d||d!==v?u+=s.move(v+"]"):i==="shortcut"?u=u.slice(0,-1):u+=s.move("]"),u}function ADe(){return"["}function M8(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function PDe(t){const e=M8(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function MDe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Yte(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function RDe(t,e,n,r){const i=n.enter("list"),o=n.bulletCurrent;let a=t.ordered?MDe(n):M8(n);const s=t.ordered?a==="."?")":".":PDe(n);let u=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){const m=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&m&&(!m.children||!m.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),Yte(n)===a&&m){let v=-1;for(;++v<t.children.length;){const _=t.children[v];if(_&&_.type==="listItem"&&_.children&&_.children[0]&&_.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(a=s),n.bulletCurrent=a;const d=n.containerFlow(t,r);return n.bulletLastUsed=a,n.bulletCurrent=o,i(),d}function IDe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function DDe(t,e,n,r){const i=IDe(n);let o=n.bulletCurrent||M8(n);e&&e.type==="list"&&e.ordered&&(o=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+o);let a=o.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);const s=n.createTracker(r);s.move(o+" ".repeat(a-o.length)),s.shift(a);const u=n.enter("listItem"),d=n.indentLines(n.containerFlow(t,s.current()),m);return u(),d;function m(v,_,O){return _?(O?"":" ".repeat(a))+v:(O?o:o+" ".repeat(a-o.length))+v}}function LDe(t,e,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),a=n.containerPhrasing(t,r);return o(),i(),a}const $De=jB(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function zDe(t,e,n,r){return(t.children.some(function(a){return $De(a)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function NDe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Kte.peek=BDe;function Kte(t,e,n,r){const i=NDe(n),o=n.enter("strong"),a=n.createTracker(r),s=a.move(i+i);let u=a.move(n.containerPhrasing(t,{after:i,before:s,...a.current()}));const d=u.charCodeAt(0),m=hM(r.before.charCodeAt(r.before.length-1),d,i);m.inside&&(u=K0(d)+u.slice(1));const v=u.charCodeAt(u.length-1),_=hM(r.after.charCodeAt(0),v,i);_.inside&&(u=u.slice(0,-1)+K0(v));const O=a.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:_.outside,before:m.outside},s+u+O}function BDe(t,e,n){return n.options.strong||"*"}function FDe(t,e,n,r){return n.safe(t.value,r)}function jDe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function VDe(t,e,n){const r=(Yte(n)+(n.options.ruleSpaces?" ":"")).repeat(jDe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const R8={blockquote:pDe,break:kZ,code:vDe,definition:_De,emphasis:Vte,hardBreak:kZ,heading:ODe,html:Ute,image:Zte,imageReference:qte,inlineCode:Wte,link:Gte,linkReference:Xte,list:RDe,listItem:DDe,paragraph:LDe,root:zDe,strong:Kte,text:FDe,thematicBreak:VDe},QDe=[UDe];function UDe(t,e,n,r){if(e.type==="code"&&xz(e,r)&&(t.type==="list"||t.type===e.type&&xz(t,r)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===e.type||e.type==="definition"||e.type==="heading"&&Qte(e,r))?void 0:n.spread?1:0}const zx=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],ZDe=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:zx},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:zx},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:zx},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:zx},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:zx},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:zx},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:zx},{atBreak:!0,character:"~"}];function qDe(t){return t.label||!t.identifier?t.label||"":jJ(t.identifier)}function WDe(t){if(!t._compiled){const e=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function HDe(t,e,n){const r=e.indexStack,i=t.children||[],o=[];let a=-1,s=n.before,u;r.push(-1);let d=e.createTracker(n);for(;++a<i.length;){const m=i[a];let v;if(r[r.length-1]=a,a+1<i.length){let E=e.handle.handlers[i[a+1].type];E&&E.peek&&(E=E.peek),v=E?E(i[a+1],t,e,{before:"",after:"",...d.current()}).charAt(0):""}else v=n.after;o.length>0&&(s==="\r"||s===`
`)&&m.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),s=" ",d=e.createTracker(n),d.move(o.join("")));let _=e.handle(m,t,e,{...d.current(),after:v,before:s});u&&u===_.slice(0,1)&&(_=K0(u.charCodeAt(0))+_.slice(1));const O=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,u=void 0,O&&(o.length>0&&O.before&&s===o[o.length-1].slice(-1)&&(o[o.length-1]=o[o.length-1].slice(0,-1)+K0(s.charCodeAt(0))),O.after&&(u=v)),d.move(_),o.push(_),s=_.slice(-1)}return r.pop(),o.join("")}function GDe(t,e,n){const r=e.indexStack,i=t.children||[],o=e.createTracker(n),a=[];let s=-1;for(r.push(-1);++s<i.length;){const u=i[s];r[r.length-1]=s,a.push(o.move(e.handle(u,t,e,{before:`
`,after:`
`,...o.current()}))),u.type!=="list"&&(e.bulletLastUsed=void 0),s<i.length-1&&a.push(o.move(XDe(u,i[s+1],t,e)))}return r.pop(),a.join("")}function XDe(t,e,n,r){let i=r.join.length;for(;i--;){const o=r.join[i](t,e,n,r);if(o===!0||o===1)break;if(typeof o=="number")return`
`.repeat(1+o);if(o===!1)return`

<!---->

`}return`

`}const YDe=/\r?\n|\r/g;function KDe(t,e){const n=[];let r=0,i=0,o;for(;o=YDe.exec(t);)a(t.slice(r,o.index)),n.push(o[0]),r=o.index+o[0].length,i++;return a(t.slice(r)),n.join("");function a(s){n.push(e(s,i,!s))}}function JDe(t,e,n){const r=(n.before||"")+(e||"")+(n.after||""),i=[],o=[],a={};let s=-1;for(;++s<t.unsafe.length;){const m=t.unsafe[s];if(!jte(t.stack,m))continue;const v=t.compilePattern(m);let _;for(;_=v.exec(r);){const O="before"in m||!!m.atBreak,E="after"in m,A=_.index+(O?_[1].length:0);i.includes(A)?(a[A].before&&!O&&(a[A].before=!1),a[A].after&&!E&&(a[A].after=!1)):(i.push(A),a[A]={before:O,after:E})}}i.sort(e3e);let u=n.before?n.before.length:0;const d=r.length-(n.after?n.after.length:0);for(s=-1;++s<i.length;){const m=i[s];m<u||m>=d||m+1<d&&i[s+1]===m+1&&a[m].after&&!a[m+1].before&&!a[m+1].after||i[s-1]===m-1&&a[m].before&&!a[m-1].before&&!a[m-1].after||(u!==m&&o.push(EZ(r.slice(u,m),"\\")),u=m,/[!-/:-@[-`{-~]/.test(r.charAt(m))&&(!n.encode||!n.encode.includes(r.charAt(m)))?o.push("\\"):(o.push(K0(r.charCodeAt(m))),u++))}return o.push(EZ(r.slice(u,d),n.after)),o.join("")}function e3e(t,e){return t-e}function EZ(t,e){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],i=[],o=t+e;let a=-1,s=0,u;for(;u=n.exec(o);)r.push(u.index);for(;++a<r.length;)s!==r[a]&&i.push(t.slice(s,r[a])),i.push("\\"),s=r[a];return i.push(t.slice(s)),i.join("")}function t3e(t){const e=t||{},n=e.now||{};let r=e.lineShift||0,i=n.line||1,o=n.column||1;return{move:u,current:a,shift:s};function a(){return{now:{line:i,column:o},lineShift:r}}function s(d){r+=d}function u(d){const m=d||"",v=m.split(/\r?\n|\r/g),_=v[v.length-1];return i+=v.length-1,o=v.length===1?o+_.length:1+_.length+r,m}}function Jte(t,e){const n=e||{},r={associationId:qDe,containerPhrasing:o3e,containerFlow:s3e,createTracker:t3e,compilePattern:WDe,enter:o,handlers:{...R8},handle:void 0,indentLines:KDe,indexStack:[],join:[...QDe],options:{},safe:a3e,stack:[],unsafe:[...ZDe]};Fte(r,n),r.options.tightDefinitions&&r.join.push(i3e),r.handle=hDe("type",{invalid:n3e,unknown:r3e,handlers:r.handlers});let i=r.handle(t,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return i&&i.charCodeAt(i.length-1)!==10&&i.charCodeAt(i.length-1)!==13&&(i+=`
`),i;function o(a){return r.stack.push(a),s;function s(){r.stack.pop()}}}function n3e(t){throw new Error("Cannot handle value `"+t+"`, expected node")}function r3e(t){const e=t;throw new Error("Cannot handle unknown node `"+e.type+"`")}function i3e(t,e){if(t.type==="definition"&&t.type===e.type)return 0}function o3e(t,e){return HDe(t,this,e)}function s3e(t,e){return GDe(t,this,e)}function a3e(t,e){return JDe(this,t,e)}const l3e=["mdxJsxTextElement","mdxJsxFlowElement"];function ene(t){return l3e.includes(t.type)&&c3e.includes(t.name.toLowerCase())}const c3e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","input","ins","kbd","label","legend","li","link","main","map","mark","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function u3e(t,e){const n=AZ(t),r=AZ(e),i={...n,...r};return h3e(i)}function AZ(t){const e={};return t.split(";").filter(r=>r.trim()!=="").forEach(r=>{const[i,o]=r.split(":").map(a=>a.trim());e[i]=o}),e}function h3e(t){return Object.entries(t).map(([e,n])=>`${e}: ${n}`).join("; ")}function d3e(t){return t.children instanceof Array}function I8({root:t,visitors:e,jsxComponentDescriptors:n,jsxIsAvailable:r,addImportStatements:i=!0}){let o=null;const a=new Set,s=new Map;e=e.sort((L,$)=>($.priority??0)-(L.priority??0)),v(t,null);function u(L,$){a.add(L),$&&s.set(L,{...$})}function d(L,$){if(o===null)return o=$,o;if(!d3e(L))throw new Error("Attempting to append children to a non-parent");const N=L.children,F=N.at(-1);if(F){const Q=e.find(W=>{var H;return(H=W.shouldJoin)==null?void 0:H.call(W,F,$)});if(Q){const W=Q.join(F,$);return N.splice(N.length-1,1,W),W}}return N.push($),$}function m(L,$){L.getChildren().forEach(N=>{v(N,$)})}function v(L,$,N=null){var F;const Q=e.find((W,H)=>{var te;return N?.has(H)?!1:(te=W.testLexicalNode)==null?void 0:te.call(W,L)});if(!Q)throw new Error(`no lexical visitor found for ${L.getType()}`,{cause:L});(F=Q.visitLexicalNode)==null||F.call(Q,{lexicalNode:L,mdastParent:$,actions:{addAndStepInto(W,H={},te=!0){const ne={type:W,...H,...te?{children:[]}:{}};d($,ne),It(L)&&te&&m(L,ne)},appendToParent:d,visitChildren:m,visit:v,registerReferredComponent:u,nextVisitor(){v(L,$,(N??new Set).add(e.indexOf(Q)))}}})}if(o===null)throw new Error("traversal ended with no root element");const _=new Map,O=new Map;for(const L of a){const $=n.find(N=>N.name===L)??s.get(L)??n.find(N=>N.name==="*");if(!$)throw new Error(`Component ${L} is used but not imported`);if($.source)if($.defaultExport)O.set(L,$.source);else{const{source:N}=$,F=_.get(N);F?F.push(L):_.set(N,[L])}}if(!i){for(const[L,$]of _.entries()){const N=$.filter(F=>s.has(F));N.length>0?_.set(L,N):_.delete(L)}for(const L of O.keys())s.has(L)||O.delete(L)}const E=Array.from(_).map(([L,$])=>({type:"mdxjsEsm",value:`import { ${$.join(", ")} } from '${L}'`}));E.push(...Array.from(O).map(([L,$])=>({type:"mdxjsEsm",value:`import ${L} from '${$}'`})));const A=o,M=A.children.find(L=>L.type==="yaml");return M?A.children.splice(A.children.indexOf(M)+1,0,...E):A.children.unshift(...E),n5(A,[]),tne(A),r||nne(A),A}function tne(t){if("children"in t&&t.children.length>0){if(ene(t)&&t.children.length===1){const e=t.children[0];e.type==="mdxJsxTextElement"&&e.name==="span"&&(e.attributes.forEach(n=>{if(n.type==="mdxJsxAttribute"){const r=t.attributes.find(i=>i.type==="mdxJsxAttribute"&&i.name===n.name);if(r)if(n.name==="className"){const i=new Set([...r.value.split(" "),...n.value.split(" ")]);r.value=Array.from(i).join(" ")}else n.name==="style"&&(r.value=u3e(r.value,n.value));else t.attributes.push(n)}}),t.children=e.children)}t.children.forEach(e=>{tne(e)})}}function nne(t){if(Object.hasOwn(t,"children")){const e=t,n=[];e.children.forEach(r=>{r.type==="mdxJsxTextElement"&&r.name==="u"?n.push({type:"html",value:"<u>"},...r.children,{type:"html",value:"</u>"}):(n.push(r),nne(r))}),e.children=n}}const PZ=/\s+$/,MZ=/^\s+/;function n5(t,e){if(t.type==="strong"||t.type==="emphasis"){const n=t.children.at(-1);if(n?.type==="text"){const i=PZ.exec(n.value);if(i){n.value=n.value.replace(PZ,"");const o=e.at(-1);o&&(o.children.splice(o.children.indexOf(t)+1,0,{type:"text",value:i[0]}),n5(o,e.slice(0,-1)))}}const r=t.children.at(0);if(r?.type==="text"){const i=MZ.exec(r.value);if(i){r.value=r.value.replace(MZ,"");const o=e.at(-1);o&&(o.children.splice(o.children.indexOf(t),0,{type:"text",value:i[0]}),n5(o,e.slice(0,-1)))}}}if("children"in t&&t.children.length>0){const n=t;n.children.forEach(r=>{n5(r,[...e,n])})}}function f3e({root:t,toMarkdownOptions:e,toMarkdownExtensions:n,visitors:r,jsxComponentDescriptors:i,jsxIsAvailable:o}){return Jte(I8({root:t,visitors:r,jsxComponentDescriptors:i,jsxIsAvailable:o}),{extensions:n,...e})+`
`}function H2(t){return t.children instanceof Array}class _z extends Error{constructor(e,n){super(e),this.name="MarkdownParseError",this.cause=n}}class bz extends Error{constructor(e){super(e),this.name="UnrecognizedMarkdownConstructError"}}function p3e(t){const e=new Map;return t.type!=="root"?{importDeclarations:{}}:(t.children.filter(r=>r.type==="mdxjsEsm").filter(r=>r.value.startsWith("import ")).forEach(r=>{var i,o;(((o=(i=r.data)==null?void 0:i.estree)==null?void 0:o.body)??[]).forEach(a=>{a.type==="ImportDeclaration"&&a.specifiers.forEach(s=>{e.set(s.local.name,{source:`${a.source.value}`,defaultExport:s.type==="ImportDefaultSpecifier"})})})}),{importDeclarations:Object.fromEntries(e.entries())})}function m3e({root:t,markdown:e,visitors:n,syntaxExtensions:r,mdastExtensions:i,...o}){var a;let s;try{s=QJ(e,{extensions:r,mdastExtensions:i})}catch(u){throw u instanceof Error?new _z(`Error parsing markdown: ${u.message}`,u):new _z(`Error parsing markdown: ${u}`,u)}s.children.length===0&&s.children.push({type:"paragraph",children:[]}),((a=s.children.at(-1))==null?void 0:a.type)!=="paragraph"&&s.children.push({type:"paragraph",children:[]}),D8({root:t,mdastRoot:s,visitors:n,...o})}function D8({root:t,mdastRoot:e,visitors:n,...r}){const i=new WeakMap,o=new WeakMap,a=p3e(e);n=n.sort((d,m)=>(m.priority??0)-(d.priority??0));function s(d,m){if(!H2(d))throw new Error("Attempting to visit children of a non-parent");d.children.forEach(v=>{u(v,m,d)})}function u(d,m,v,_=null){const O=n.find((E,A)=>_?.has(A)?!1:typeof E.testNode=="string"?E.testNode===d.type:E.testNode(d,r));if(!O)try{throw new bz(`Unsupported markdown syntax: ${Jte(d)}`)}catch{throw new bz(`Parsing of the following markdown structure failed: ${JSON.stringify({type:d.type,name:"name"in d?d.name:"N/A"})}`)}O.visitNode({mdastNode:d,lexicalParent:m,mdastParent:v,descriptors:r,metaData:a,actions:{visitChildren:s,nextVisitor(){u(d,m,v,(_??new Set).add(n.indexOf(O)))},addAndStepInto(E){m.append(E),H2(d)&&s(d,E)},addFormatting(E,A){A||H2(d)&&(A=d),A&&i.set(A,E|(i.get(v)??0))},removeFormatting(E,A){A||H2(d)&&(A=d),A&&i.set(A,E^(i.get(v)??0))},getParentFormatting(){return i.get(v)??0},addStyle(E,A){A||H2(d)&&(A=d),A&&o.set(A,E)},getParentStyle(){return o.get(v)??""}}})}u(e,t,null)}var g3e=Object.defineProperty,y3e=(t,e,n)=>e in t?g3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iL=(t,e,n)=>(y3e(t,typeof e!="symbol"?e+"":e,n),n);const RZ="generic-html";class Qk extends xu{constructor(e,n,r,i){super(i),iL(this,"__tag"),iL(this,"__nodeType"),iL(this,"__attributes"),this.__tag=e,this.__nodeType=n,this.__attributes=r}static getType(){return RZ}static clone(e){return new Qk(e.__tag,e.__nodeType,e.__attributes,e.__key)}getTag(){return this.__tag}getNodeType(){return this.__nodeType}getAttributes(){return this.__attributes}updateAttributes(e){const n=this.getWritable();n.__attributes=e}getStyle(){var e;return(e=this.__attributes.find(n=>n.name==="style"))==null?void 0:e.value}createDOM(){const e=this.__tag,n=document.createElement(e);return this.__attributes.forEach(r=>{n.setAttribute(r.name,r.value)}),n}updateDOM(){return!1}static importDOM(){return{}}exportDOM(e){const{element:n}=super.exportDOM(e);return{element:n}}static importJSON(e){const n=rne(e.tag,e.mdxType,e.attributes);return n.setFormat(e.format),n.setIndent(e.indent),n.setDirection(e.direction),n}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),attributes:this.__attributes,mdxType:this.__nodeType,type:RZ,version:1}}extractWithChild(){return!0}isInline(){return this.__nodeType==="mdxJsxTextElement"}}function rne(t,e,n){return vh(new Qk(t,e,n))}function v3e(t){return t instanceof Qk}const x3e={testLexicalNode:v3e,visitLexicalNode({actions:t,lexicalNode:e}){t.addAndStepInto("mdxJsxTextElement",{name:e.getTag(),type:e.getNodeType(),attributes:e.getAttributes()})},priority:-100},_3e={testLexicalNode:Pf,visitLexicalNode:({mdastParent:t,actions:e})=>{e.appendToParent(t,{type:"text",value:`
`})}},b3e={testLexicalNode:fI,visitLexicalNode:({actions:t})=>{t.addAndStepInto("paragraph")}},w3e={testLexicalNode:ta,visitLexicalNode:({actions:t})=>{t.addAndStepInto("root")}},FC=1,jC=2,r5=4,VC=8,TI=16,i5=32,o5=64,s5=128;function IZ(t){return t.type==="text"}const O3e=["u","span","sub","sup"],S3e={shouldJoin:(t,e)=>{if(["text","emphasis","strong","highlight"].includes(t.type))return t.type===e.type;if(t.type==="mdxJsxTextElement"&&e.type==="mdxJsxTextElement"&&O3e.includes(e.name)){const n=e;return t.name===n.name&&JSON.stringify(t.attributes)===JSON.stringify(n.attributes)}return!1},join(t,e){return IZ(t)&&IZ(e)?{type:"text",value:t.value+e.value}:{...t,children:[...t.children,...e.children]}},testLexicalNode:gn,visitLexicalNode:({lexicalNode:t,mdastParent:e,actions:n})=>{const r=t.getPreviousSibling(),i=gn(r)?r.getFormat():0,o=t.getTextContent(),a=t.getFormat(),s=t.getStyle();let u=e;if(s&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"span",children:[],attributes:[{type:"mdxJsxAttribute",name:"style",value:s}]})),i&a&VC&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"u",children:[],attributes:[]})),i&a&o5&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"sup",children:[],attributes:[]})),i&a&i5&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"sub",children:[],attributes:[]})),i&a&jC&&(u=n.appendToParent(u,{type:"emphasis",children:[]})),i&a&FC&&(u=n.appendToParent(u,{type:"strong",children:[]})),i&a&r5&&(u=n.appendToParent(u,{type:"delete",children:[]})),i&a&s5&&(u=n.appendToParent(u,{type:"highlight",children:[]})),a&VC&&!(i&VC)&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"u",children:[],attributes:[]})),a&o5&&!(i&o5)&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"sup",children:[],attributes:[]})),a&i5&&!(i&i5)&&(u=n.appendToParent(u,{type:"mdxJsxTextElement",name:"sub",children:[],attributes:[]})),a&jC&&!(i&jC)&&(u=n.appendToParent(u,{type:"emphasis",children:[]})),a&FC&&!(i&FC)&&(u=n.appendToParent(u,{type:"strong",children:[]})),a&r5&&!(i&r5)&&(u=n.appendToParent(u,{type:"delete",children:[]})),a&s5&&!(i&s5)&&(u=n.appendToParent(u,{type:"highlight",children:[]})),a&TI){n.appendToParent(u,{type:"inlineCode",value:o});return}n.appendToParent(u,{type:"text",value:o})}},C3e={testNode:"break",visitNode:function({lexicalParent:t}){t.append(If())}};function ZA(t,e){return[{testNode:n=>n.type==="mdxJsxTextElement"&&n.name===t,visitNode({actions:n,mdastNode:r,lexicalParent:i}){n.addFormatting(e),n.visitChildren(r,i)}},{testNode:n=>n.type==="html"&&n.value===`<${t}>`,visitNode({actions:n,mdastParent:r}){n.addFormatting(e,r)}},{testNode:n=>n.type==="html"&&n.value===`</${t}>`,visitNode({actions:n,mdastParent:r}){n.removeFormatting(e,r)}}]}const T3e={testNode:"delete",visitNode({mdastNode:t,actions:e,lexicalParent:n}){e.addFormatting(r5),e.visitChildren(t,n)}},k3e={testNode:"highlight",visitNode({mdastNode:t,actions:e,lexicalParent:n}){e.addFormatting(s5),e.visitChildren(t,n)}},E3e={testNode:"inlineCode",visitNode({mdastNode:t,actions:e}){e.addAndStepInto(so(t.value).setFormat(e.getParentFormatting()|TI))}},A3e={testNode:"emphasis",visitNode({mdastNode:t,actions:e,lexicalParent:n}){e.addFormatting(jC),e.visitChildren(t,n)}},P3e={testNode:"strong",visitNode({mdastNode:t,actions:e,lexicalParent:n}){e.addFormatting(FC),e.visitChildren(t,n)}},M3e=[A3e,P3e,...ZA("u",VC),...ZA("code",TI),E3e,T3e,k3e,...ZA("sup",o5),...ZA("sub",i5)],R3e={testNode:ene,visitNode:function({mdastNode:t,actions:e,lexicalParent:n}){t.name==="span"&&t.attributes.length===1&&t.attributes[0].type==="mdxJsxAttribute"&&t.attributes[0].name==="style"?(e.addStyle(t.attributes[0].value,t),e.visitChildren(t,n)):e.addAndStepInto(rne(t.name,t.type,t.attributes))},priority:-100},I3e=["listitem","quote","admonition"],D3e={testNode:"paragraph",visitNode:function({mdastNode:t,lexicalParent:e,actions:n}){I3e.includes(e.getType())?n.visitChildren(t,e):n.addAndStepInto(Oi())}},L3e={testNode:"root",visitNode({actions:t,mdastNode:e,lexicalParent:n}){t.visitChildren(e,n)}},$3e={testNode:"text",visitNode({mdastNode:t,actions:e}){const n=so(t.value);n.setFormat(e.getParentFormatting());const r=e.getParentStyle();r!==""&&n.setStyle(r),e.addAndStepInto(n)}},ine=()=>le.createElement(xte,{externalHistoryState:$s(aLe)});function z3e(t){return{canContainEols:["comment"],enter:{comment(e){this.buffer()}},exit:{comment(e){this.resume()}}}}const DZ=(t,e,n)=>{return r;function r(E){return t.enter("comment"),t.consume(E),i}function i(E){return E===zl.exclamationMark?(t.consume(E),o):n(E)}function o(E){return E===zl.dash?(t.consume(E),a):n(E)}function a(E){return E===zl.dash?(t.consume(E),s):n(E)}function s(E){return E===zl.greaterThan?n(E):Mn(E)?m(E):(t.enter(Bg.data),E===zl.dash?(t.consume(E),u):d(E))}function u(E){return E===zl.greaterThan?n(E):d(E)}function d(E){return E===zl.eof?n(E):E===zl.dash?(t.consume(E),_):Mn(E)?(t.exit(Bg.data),m(E)):(t.consume(E),d)}function m(E){return t.enter(Bg.lineEnding),t.consume(E),t.exit(Bg.lineEnding),Rr(t,v,Bg.linePrefix)}function v(E){return Mn(E)?m(E):(t.enter(Bg.data),d(E))}function _(E){return E===zl.dash?(t.consume(E),O):d(E)}function O(E){return E===zl.greaterThan?(t.exit(Bg.data),t.enter("commentEnd"),t.consume(E),t.exit("commentEnd"),t.exit("comment"),e(E)):E===zl.dash?(t.consume(E),O):d(E)}},N3e={flow:{60:{tokenize:DZ,concrete:!0}},text:{60:{tokenize:DZ}}},B3e="_bold_1tncs_10",F3e="_italic_1tncs_14",j3e="_underline_1tncs_18",V3e="_strikethrough_1tncs_34",Q3e="_underlineStrikethrough_1tncs_38",U3e="_subscript_1tncs_42",Z3e="_superscript_1tncs_47",q3e="_code_1tncs_52",W3e="_nestedListItem_1tncs_59",H3e="_listitem_1tncs_69",G3e="_listItemChecked_1tncs_73",X3e="_listItemUnchecked_1tncs_74",Y3e="_admonitionDanger_1tncs_151",K3e="_admonitionInfo_1tncs_152",J3e="_admonitionNote_1tncs_153",eLe="_admonitionTip_1tncs_154",tLe="_admonitionCaution_1tncs_155",ol={bold:B3e,italic:F3e,underline:j3e,strikethrough:V3e,underlineStrikethrough:Q3e,subscript:U3e,superscript:Z3e,code:q3e,nestedListItem:W3e,listitem:H3e,listItemChecked:G3e,listItemUnchecked:X3e,admonitionDanger:Y3e,admonitionInfo:K3e,admonitionNote:J3e,admonitionTip:eLe,admonitionCaution:tLe},kI={text:{bold:ol.bold,italic:ol.italic,underline:ol.underline,code:ol.code,strikethrough:ol.strikethrough,subscript:ol.subscript,superscript:ol.superscript,underlineStrikethrough:ol.underlineStrikethrough},list:{listitem:ol.listitem,listitemChecked:ol.listItemChecked,listitemUnchecked:ol.listItemUnchecked,nested:{listitem:ol.nestedListItem}},admonition:{danger:ol.admonitionDanger,info:ol.admonitionInfo,note:ol.admonitionNote,tip:ol.admonitionTip,caution:ol.admonitionCaution}},L_=lr("NESTED_EDITOR_UPDATED_COMMAND"),Od=In(null),Uo=In(null),wz=In(""),Oz=In(!0),ml=In(!1,t=>{t.sub(t.pipe(ml,Qo(Od)),([e,n])=>{n?.setEditable(!e)})}),Sz=In(""),LZ=In(!1),TT=In(!1),L8=In(0),kT=In(null),Cz=As(t=>{t.link(t.pipe(kT,Pk(e=>e!==null)),Cz)}),$8=As(t=>{t.sub(t.pipe($8,Qo(Uo)),([e,n])=>{n?.dispatchCommand(qg,e)})}),cO=In(null,t=>{t.sub(t.pipe(cO,Qo(Uo)),([e,n])=>{if(!e||!n)return;const r=e.anchor.getNode();let i=r.getKey()==="root"?r:Mf(r,s=>{const u=s.getParent();return u!==null&&ra(u)});i??(i=r.getTopLevelElementOrThrow());const o=i.getKey();if(n.getElementByKey(o)!==null){const s=lO(i)?i.getTag():i.getType();t.pub(vne,s)}})}),one=In(""),_m=In(""),dM=In(!1),EI=As(t=>{t.link(_m,EI),t.sub(one,e=>{t.pubIn({[dM]:!0,[_m]:e})})}),Tz=As(t=>{t.link(t.pipe(EI,Qo(kz),Pk(([,e])=>!e),ny(([e])=>e)),Tz)},!0),AI=In([]),PI=In([]),sne=In([]),ane=In([]),Uk=In([]),z8=In([]),fM=In({}),MI=In(!1),Zk=In([]),uO=In([]),rS=In([]),pv=In(null),nLe=In(null),lne=In(null),jf=Cc(PI),vd=Cc(AI),hO=Cc(sne),dO=Cc(ane),Vf=Cc(Uk),qk=Cc(z8),kz=In(!1),N8=As(t=>{t.sub(t.pipe(N8,Qo(_m,Od,TT),Pk(([e,n])=>e.trim()!==n.trim())),([e,,n,r])=>{t.pub(kz,!0),n?.update(()=>{Ur().clear(),F8(t,Ur(),e),r?n.focus():cs(null)},{onUpdate:()=>{t.pub(kz,!1)}})})}),cne=As(t=>{t.sub(t.pipe(cne,Qo(Uo,TT)),([e,n,r])=>{n?.update(()=>{const i=cn();if(i!==null){const o={children:[],append(a){this.children.push(a)},getType(){return i.getNodes()[0].getType()}};F8(t,o,e),JO(o.children)}r?n.focus():cs(null)})})});function une(){return ree((t,[e,n])=>(t.forEach(r=>{if(!r)throw new Error("You have a subscription that does not return a teardown");r()}),n?e.map(r=>r(n)):[]),[])}const rLe=In(null),hne=In([],t=>{t.pipe(t.combine(hne,Uo),une())}),dne=In([],t=>{t.pipe(t.combine(dne,Od),une())}),B8=In(null,Q0,(t,e)=>!!(t&&e&&t.editorRef===e.editorRef)),ET=As(),la=In(t=>{throw new Error(`No icon component for ${t}`)});function Cc(t,e){return As((n,r)=>{n.changeWith(t,r,(i,o)=>{Array.isArray(o)||(o=[o]);let a=i;for(const s of o)i.includes(s)||(a=[...a,s]);return a}),e?.(n,r)})}function fne(t){const e=cn();Kt(e)&&t.pubIn({[cO]:e,[L8]:e.format})}const RI=Cc(dne,(t,e)=>{t.pub(e,[n=>n.registerCommand(Mk,(r,i)=>(t.pubIn({[Uo]:i,[TT]:!0}),i._parentEditor===null&&i.getEditorState().read(()=>{t.pub(B8,{rootNode:Ur(),editorType:"lexical",editorRef:i})}),fne(t),!1),gh),n=>n.registerUpdateListener(({dirtyElements:r,dirtyLeaves:i,editorState:o})=>{if(t.getValue(kT)!==null||r.size===0&&i.size===0)return;let s;o.read(()=>{Ur().getLastChild()instanceof gy&&n.update(()=>{Ur().append(Oi())},{discrete:!0}),s=f3e({root:Ur(),visitors:t.getValue(Uk),jsxComponentDescriptors:t.getValue(Zk),toMarkdownExtensions:t.getValue(z8),toMarkdownOptions:t.getValue(fM),jsxIsAvailable:t.getValue(MI)})}),t.pub(_m,s.trim()),t.pub(dM,!1)}),n=>n.registerCommand(aI,()=>(t.pub(TT,!0),!1),gh)])}),AT=Cc(hne,(t,e)=>{t.pub(e,[n=>n.registerUpdateListener(({editorState:r})=>{r.read(()=>{fne(t)})}),n=>n.registerCommand(lI,r=>{var i;const o=t.getValue(Od);return o&&!((i=o.getRootElement())!=null&&i.contains(r.relatedTarget))&&t.pubIn({[TT]:!1,[ET]:r}),!1},gh)])});function F8(t,e,n){try{m3e({root:e,visitors:t.getValue(AI),mdastExtensions:t.getValue(ane),markdown:n,syntaxExtensions:t.getValue(sne),jsxComponentDescriptors:t.getValue(Zk),directiveDescriptors:t.getValue(uO),codeBlockEditorDescriptors:t.getValue(rS)}),t.pub(kT,null)}catch(r){if(r instanceof _z||r instanceof bz)t.pubIn({[_m]:n,[kT]:{error:r.message,source:n}});else throw r}}const pne=In([]),nb=Cc(pne),mne=In([]),iLe=Cc(mne),gne=In([]),oLe=Cc(gne),yne=In([]),sLe=Cc(yne),j8=In([]),V8=Cc(j8),aLe=In(vte()),vne=In("");As();const pM=As(t=>{t.sub(t.pipe(pM,Qo(Uo)),([e,n])=>{n?.update(()=>{const r=cn();Kt(r)&&(CRe(r,e),setTimeout(()=>{n.focus()}))})})}),II=As(t=>{t.sub(t.pipe(II,Qo(Uo)),([e,n])=>{n?.focus(()=>{n.getEditorState().read(()=>{const r=cn();Kt(r)&&(n.update(()=>{const i=e();i.isInline()?(JO([i]),ra(i.getParentOrThrow())&&A8(i,Oi).selectEnd()):yte(i),setTimeout(()=>{"select"in i&&typeof i.select=="function"&&i.select()})}),setTimeout(()=>{n.dispatchCommand(L_,void 0)}))})},{defaultSelection:"rootEnd"})})}),$_=In("rich-text",t=>{function e(){return ree((n,r)=>({current:n.next,next:r}),{current:"rich-text",next:"rich-text"})}t.sub(t.pipe($_,e(),Qo(z_)),([{current:n},r])=>{(n==="source"||n==="diff")&&t.pub(N8,r)}),t.sub(t.pipe($_,e(),Pk(n=>n.current==="rich-text"),Qo(Uo)),([,n])=>{n?.dispatchCommand(L_,void 0)})}),z_=In("",t=>{t.link(_m,z_),t.link(z_,EI)},!0),Q8=In([]),iS=Cc(Q8),xne=In(()=>{throw new Error("No translation function provided")}),mM=In(kI),lLe=Zl({init(t,e){const n=e?.initialMarkdown??"";t.register(RI),t.register(AT),t.register(EI),t.register(z_),t.pubIn({[one]:e?.trim?n.trim():n,[la]:e?.iconComponentFor,[vd]:[L3e,D3e,$3e,C3e,...M3e],[jf]:[eS,Tm,Qk],[Vf]:[w3e,b3e,S3e,_3e,x3e],[wz]:e?.contentEditableClassName,[Oz]:e?.spellCheck,[fM]:e?.toMarkdownOptions,[LZ]:e?.autoFocus,[Sz]:e?.placeholder,[ml]:e?.readOnly,[xne]:e?.translation,[dO]:[sIe(),dIe],[hO]:[iIe(),ZIe()],[qk]:[RIe(),aIe(),mIe],[mM]:e?.lexicalTheme??kI}),t.singletonSub(Cz,e?.onError),t.singletonSub(Tz,r=>{e?.onChange(r,t.getValue(dM))}),t.singletonSub(ET,e?.onBlur),e?.suppressHtmlProcessing||t.pubIn({[dO]:[MIe(),z3e()],[hO]:[cDe(),uDe(),N3e],[vd]:R3e}),e?.suppressSharedHistory||t.pub(nb,ine)},postInit(t,e){const n=f8({editable:e?.readOnly!==!0,namespace:e?.lexicalEditorNamespace??"MDXEditor",nodes:[...t.getValue(PI),...e?.additionalLexicalNodes??[]],onError:r=>{throw r},theme:t.getValue(mM)});e?.editorState!==null&&n.update(()=>{const r=e?.initialMarkdown.trim()??"";F8(t,Ur(),r);const i=e?.autoFocus;if(i){if(i===!0){setTimeout(()=>{n.focus(Q0,{defaultSelection:"rootStart"})});return}setTimeout(()=>{n.focus(Q0,{defaultSelection:i.defaultSelection??"rootStart"})})}}),t.pub(Od,n),t.pub(Uo,n)},update(t,e){t.pubIn({[wz]:e?.contentEditableClassName,[Oz]:e?.spellCheck,[fM]:e?.toMarkdownOptions,[LZ]:e?.autoFocus,[Sz]:e?.placeholder,[ml]:e?.readOnly}),t.singletonSub(Tz,n=>{e?.onChange(n,t.getValue(dM))}),t.singletonSub(ET,e?.onBlur),t.singletonSub(Cz,e?.onError)}});function Bs(){return $s(xne)}function cLe(){return Ur().getTextContent()}function uLe(t,e=!0){if(t)return!1;let n=cLe();return e&&(n=n.trim()),n===""}function hLe(t){if(!uLe(t,!1))return!1;const e=Ur().getChildren(),n=e.length;if(n>1)return!1;for(let r=0;r<n;r++){const i=e[r];if(Ti(i))return!1;if(It(i)){if(!fI(i)||i.__indent!==0)return!1;const o=i.getChildren(),a=o.length;for(let s=0;s<a;s++){const u=o[r];if(!gn(u))return!1}}}return!0}function _ne(t){return()=>hLe(t)}const bne=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?j.useLayoutEffect:j.useEffect;function dLe({editor:t,ariaActiveDescendant:e,ariaAutoComplete:n,ariaControls:r,ariaDescribedBy:i,ariaErrorMessage:o,ariaExpanded:a,ariaInvalid:s,ariaLabel:u,ariaLabelledBy:d,ariaMultiline:m,ariaOwns:v,ariaRequired:_,autoCapitalize:O,className:E,id:A,role:M="textbox",spellCheck:L=!0,style:$,tabIndex:N,"data-testid":F,...Q},W){const[H,te]=j.useState(t.isEditable()),ne=j.useCallback((we=>{we&&we.ownerDocument&&we.ownerDocument.defaultView?t.setRootElement(we):t.setRootElement(null)}),[t]),ce=j.useMemo((()=>(function(...we){return re=>{we.forEach((se=>{typeof se=="function"?se(re):se!=null&&(se.current=re)}))}})(W,ne)),[ne,W]);return bne((()=>(te(t.isEditable()),t.registerEditableListener((we=>{te(we)})))),[t]),q.jsx("div",{"aria-activedescendant":H?e:void 0,"aria-autocomplete":H?n:"none","aria-controls":H?r:void 0,"aria-describedby":i,...o!=null?{"aria-errormessage":o}:{},"aria-expanded":H&&M==="combobox"?!!a:void 0,...s!=null?{"aria-invalid":s}:{},"aria-label":u,"aria-labelledby":d,"aria-multiline":m,"aria-owns":H?v:void 0,"aria-readonly":!H||void 0,"aria-required":_,autoCapitalize:O,className:E,contentEditable:H,"data-testid":F,id:A,ref:ce,role:M,spellCheck:L,style:$,tabIndex:N,...Q})}const fLe=j.forwardRef(dLe);function $Z(t){return t.getEditorState().read(_ne(t.isComposing()))}const U8=j.forwardRef(pLe);function pLe(t,e){const{placeholder:n,...r}=t,[i]=ql();return q.jsxs(q.Fragment,{children:[q.jsx(fLe,{editor:i,...r,ref:e}),n!=null&&q.jsx(mLe,{editor:i,content:n})]})}function mLe({content:t,editor:e}){const n=(function(a){const[s,u]=j.useState((()=>$Z(a)));return bne((()=>{function d(){const m=$Z(a);u(m)}return d(),Wl(a.registerUpdateListener((()=>{d()})),a.registerEditableListener((()=>{d()})))}),[a]),s})(e),[r,i]=j.useState(e.isEditable());if(j.useLayoutEffect((()=>(i(e.isEditable()),e.registerEditableListener((a=>{i(a)})))),[e]),!n)return null;let o=null;return typeof t=="function"?o=t(r):t!==null&&(o=t),o===null?null:q.jsx("div",{"aria-hidden":!0,children:o})}function Ez(t,e){return Ez=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ez(t,e)}var zZ={error:null},gLe=(function(t){var e,n;function r(){for(var o,a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return(o=t.call.apply(t,[this].concat(s))||this).state=zZ,o.resetErrorBoundary=function(){for(var d,m=arguments.length,v=new Array(m),_=0;_<m;_++)v[_]=arguments[_];o.props.onReset==null||(d=o.props).onReset.apply(d,v),o.reset()},o}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,Ez(e,n),r.getDerivedStateFromError=function(o){return{error:o}};var i=r.prototype;return i.reset=function(){this.setState(zZ)},i.componentDidCatch=function(o,a){var s,u;(s=(u=this.props).onError)==null||s.call(u,o,a)},i.componentDidUpdate=function(o,a){var s,u,d,m,v=this.state.error,_=this.props.resetKeys;v!==null&&a.error!==null&&((d=o.resetKeys)===void 0&&(d=[]),(m=_)===void 0&&(m=[]),d.length!==m.length||d.some((function(O,E){return!Object.is(O,m[E])})))&&((s=(u=this.props).onResetKeysChange)==null||s.call(u,o.resetKeys,_),this.reset())},i.render=function(){var o=this.state.error,a=this.props,s=a.fallbackRender,u=a.FallbackComponent,d=a.fallback;if(o!==null){var m={error:o,resetErrorBoundary:this.resetErrorBoundary};if(j.isValidElement(d))return d;if(typeof s=="function")return s(m);if(u)return j.createElement(u,m);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},r})(j.Component);function Z8({children:t,onError:e}){return q.jsx(gLe,{fallback:q.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:e,children:t})}const yLe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?j.useLayoutEffect:j.useEffect;function vLe(t){return{initialValueFn:()=>t.isEditable(),subscribe:e=>t.registerEditableListener(e)}}function xLe(){return(function(t){const[e]=ql(),n=j.useMemo((()=>t(e)),[e,t]),[r,i]=j.useState((()=>n.initialValueFn())),o=j.useRef(r);return yLe((()=>{const{initialValueFn:a,subscribe:s}=n,u=a();return o.current!==u&&(o.current=u,i(u)),s((d=>{o.current=d,i(d)}))}),[n,t]),r})(vLe)}function _Le(t){const e=window.location.origin,n=r=>{if(r.origin!==e)return;const i=t.getRootElement();if(document.activeElement!==i)return;const o=r.data;if(typeof o=="string"){let a;try{a=JSON.parse(o)}catch{return}if(a&&a.protocol==="nuanria_messaging"&&a.type==="request"){const s=a.payload;if(s&&s.functionId==="makeChanges"){const u=s.args;if(u){const[d,m,v,_,O,E]=u;t.update((()=>{const A=cn();if(Kt(A)){const M=A.anchor;let L=M.getNode(),$=0,N=0;if(gn(L)&&d>=0&&m>=0&&($=d,N=d+m,A.setTextNodeRange(L,$,L,N)),$===N&&v===""||(A.insertRawText(v),L=M.getNode()),gn(L)){$=_,N=_+O;const F=L.getTextContentSize();$=$>F?F:$,N=N>F?F:N,A.setTextNodeRange(L,$,L,N)}r.stopImmediatePropagation()}}))}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}const Az=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?j.useLayoutEffect:j.useEffect;function NZ(t){return t.getEditorState().read(_ne(t.isComposing()))}function q8({contentEditable:t,placeholder:e=null,ErrorBoundary:n}){const[r]=ql(),i=(function(o,a){const[s,u]=j.useState((()=>o.getDecorators()));return Az((()=>o.registerDecoratorListener((d=>{mm.flushSync((()=>{u(d)}))}))),[o]),j.useEffect((()=>{u(o.getDecorators())}),[o]),j.useMemo((()=>{const d=[],m=Object.keys(s);for(let v=0;v<m.length;v++){const _=m[v],O=q.jsx(a,{onError:A=>o._onError(A),children:q.jsx(j.Suspense,{fallback:null,children:s[_]})}),E=o.getElementByKey(_);E!==null&&d.push(mm.createPortal(O,E,_))}return d}),[a,s,o])})(r,n);return(function(o){Az((()=>Wl(rIe(o),_Le(o))),[o])})(r),q.jsxs(q.Fragment,{children:[t,q.jsx(bLe,{content:e}),i]})}function bLe({content:t}){const[e]=ql(),n=(function(i){const[o,a]=j.useState((()=>NZ(i)));return Az((()=>{function s(){const u=NZ(i);a(u)}return s(),Wl(i.registerUpdateListener((()=>{s()})),i.registerEditableListener((()=>{s()})))}),[i]),o})(e),r=xLe();return n?typeof t=="function"?t(r):t:null}var oL={exports:{}};var BZ;function wLe(){return BZ||(BZ=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=i(o,r(s)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)e.call(o,s)&&o[s]&&(a=i(a,s));return a}function i(o,a){return a?o?o+" "+a:o+a:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(oL)),oL.exports}var OLe=wLe();const ni=lv(OLe),SLe={undo:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M7.202 18.5V17H14.3788C15.4224 17 16.3205 16.6554 17.073 15.9663C17.8257 15.2773 18.202 14.4263 18.202 13.4135C18.202 12.4007 17.8257 11.5512 17.073 10.8652C16.3205 10.1794 15.4224 9.8365 14.3788 9.8365H7.35775L10.1402 12.6193L9.0865 13.673L4.5 9.0865L9.0865 4.5L10.1402 5.55375L7.35775 8.3365H14.3788C15.8416 8.3365 17.0945 8.82467 18.1375 9.801C19.1805 10.7773 19.702 11.9815 19.702 13.4135C19.702 14.8455 19.1805 16.0513 18.1375 17.0308C17.0945 18.0103 15.8416 18.5 14.3788 18.5H7.202Z",fill:"currentColor"})),redo:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M9.6211 18.5C8.15827 18.5 6.90535 18.0103 5.86235 17.0308C4.81935 16.0513 4.29785 14.8455 4.29785 13.4135C4.29785 11.9815 4.81935 10.7773 5.86235 9.801C6.90535 8.82467 8.15827 8.3365 9.6211 8.3365H16.6421L13.8596 5.55375L14.9134 4.5L19.4999 9.0865L14.9134 13.673L13.8596 12.6193L16.6421 9.8365H9.6211C8.57744 9.8365 7.67935 10.1794 6.92685 10.8652C6.17418 11.5512 5.79785 12.4007 5.79785 13.4135C5.79785 14.4263 6.17418 15.2773 6.92685 15.9663C7.67935 16.6554 8.57744 17 9.6211 17H16.7979V18.5H9.6211Z",fill:"currentColor"})),format_bold:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M7.33838 18.625V5.375H12.1999C13.219 5.375 14.1405 5.69233 14.9644 6.327C15.788 6.9615 16.1999 7.816 16.1999 8.8905C16.1999 9.63783 16.0194 10.2471 15.6584 10.7182C15.2975 11.1894 14.9088 11.5314 14.4921 11.7442C15.005 11.9211 15.4947 12.2708 15.9614 12.7933C16.428 13.3158 16.6614 14.0193 16.6614 14.9038C16.6614 16.1819 16.1902 17.1217 15.2479 17.723C14.3055 18.3243 13.3562 18.625 12.3999 18.625H7.33838ZM9.48838 16.6328H12.3191C13.1063 16.6328 13.6627 16.4142 13.9884 15.977C14.314 15.5398 14.4769 15.1206 14.4769 14.7192C14.4769 14.3179 14.314 13.8987 13.9884 13.4615C13.6627 13.0243 13.0909 12.8058 12.2729 12.8058H9.48838V16.6328ZM9.48838 10.875H12.0826C12.6903 10.875 13.172 10.7013 13.5279 10.3538C13.8835 10.0064 14.0614 9.59042 14.0614 9.10575C14.0614 8.59042 13.8733 8.16925 13.4971 7.84225C13.1208 7.51542 12.6595 7.352 12.1134 7.352H9.48838V10.875Z",fill:"currentColor"})),format_italic:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M5.39404 18.625V16.8173H9.21129L12.4518 7.18275H8.63454V5.375H17.7883V7.18275H14.2785L11.0383 16.8173H14.5478V18.625H5.39404Z",fill:"currentColor"})),format_underlined:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M5.34619 22.125V20.625H18.6537V22.125H5.34619ZM11.9999 18.5287C10.4448 18.5287 9.23102 18.0566 8.35869 17.1125C7.48619 16.1683 7.04994 14.9032 7.04994 13.3172V5.41345H8.90369V13.4095C8.90369 14.4198 9.17228 15.2295 9.70944 15.8385C10.2466 16.4475 11.0101 16.752 11.9999 16.752C12.9898 16.752 13.7533 16.4475 14.2904 15.8385C14.8276 15.2295 15.0962 14.4198 15.0962 13.4095V5.41345H16.9499V13.3172C16.9499 14.9032 16.5137 16.1683 15.6412 17.1125C14.7689 18.0566 13.5551 18.5287 11.9999 18.5287Z",fill:"currentColor"})),format_highlight:le.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"},le.createElement("path",{d:"m9 11-6 6v3h9l3-3"}),le.createElement("path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4"})),code:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M7.99994 17.6537L2.34619 11.9999L7.99994 6.34619L9.06919 7.41544L4.46919 12.0154L9.05369 16.5999L7.99994 17.6537ZM15.9999 17.6537L14.9307 16.5844L19.5307 11.9844L14.9462 7.39994L15.9999 6.34619L21.6537 11.9999L15.9999 17.6537Z",fill:"currentColor"})),strikeThrough:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M12.15 19.6923C10.9732 19.6923 9.9315 19.359 9.025 18.6923C8.11867 18.0256 7.45525 17.1128 7.03475 15.9538L8.6385 15.2635C8.91667 16.0444 9.3545 16.6867 9.952 17.1905C10.5493 17.6944 11.2923 17.9463 12.1808 17.9463C12.9578 17.9463 13.6744 17.7508 14.3307 17.3598C14.9872 16.9686 15.3155 16.3487 15.3155 15.5C15.3155 15.123 15.2555 14.7968 15.1355 14.5213C15.0157 14.2456 14.8462 13.9885 14.627 13.75H16.677C16.7987 13.9705 16.8932 14.2256 16.9605 14.5153C17.0278 14.8051 17.0615 15.1334 17.0615 15.5C17.0615 16.8372 16.5747 17.8702 15.601 18.599C14.6272 19.3279 13.4768 19.6923 12.15 19.6923ZM2.25 11.75V10.25H21.75V11.75H2.25ZM12.05 4.19629C13.0475 4.19629 13.9123 4.42704 14.6443 4.88854C15.3763 5.35004 15.9673 6.05896 16.4173 7.01529L14.823 7.73079C14.6218 7.26029 14.2978 6.84462 13.851 6.48379C13.4042 6.12279 12.8141 5.94229 12.0808 5.94229C11.2244 5.94229 10.5392 6.16221 10.025 6.60204C9.51083 7.04171 9.264 7.59104 9.2845 8.25004H7.5385C7.50133 7.16421 7.89783 6.21712 8.728 5.40879C9.558 4.60046 10.6653 4.19629 12.05 4.19629Z",fill:"currentColor"})),superscript:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M16.6924 8V6.2115C16.6924 5.95383 16.7786 5.73875 16.9511 5.56625C17.1235 5.39392 17.3385 5.30775 17.5961 5.30775H19.5001V4.38475H16.6924V3.5H19.4809C19.7385 3.5 19.9536 3.58625 20.1261 3.75875C20.2985 3.93108 20.3846 4.14617 20.3846 4.404V5.2885C20.3846 5.54617 20.2985 5.76125 20.1261 5.93375C19.9536 6.10608 19.7385 6.19225 19.4809 6.19225H17.5771V7.1155H20.3846V8H16.6924ZM4.44238 18.5L8.84638 11.6287L4.77713 5.30775H6.74438L9.95963 10.404H10.0214L13.2501 5.30775H15.2329L11.1194 11.6287L15.5579 18.5H13.5751L10.0214 12.9308H9.95963L6.42513 18.5H4.44238Z",fill:"currentColor"})),subscript:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M16.6924 20.5V18.7115C16.6924 18.4538 16.7786 18.2387 16.9511 18.0662C17.1235 17.8939 17.3385 17.8077 17.5961 17.8077H19.5001V16.8845H16.6924V16H19.4809C19.7385 16 19.9536 16.0863 20.1261 16.2587C20.2985 16.4311 20.3846 16.6461 20.3846 16.9038V17.7885C20.3846 18.0462 20.2985 18.2612 20.1261 18.4337C19.9536 18.6061 19.7385 18.6923 19.4809 18.6923H17.5771V19.6152H20.3846V20.5H16.6924ZM4.44238 18.6923L8.84638 11.8212L4.77713 5.5H6.74438L9.95963 10.5962H10.0214L13.2501 5.5H15.2329L11.1194 11.8212L15.5579 18.6923H13.5751L10.0214 13.123H9.95963L6.42513 18.6923H4.44238Z",fill:"currentColor"})),format_list_bulleted:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M9.30775 18.75V17.25H20.5V18.75H9.30775ZM9.30775 12.75V11.25H20.5V12.75H9.30775ZM9.30775 6.75005V5.25005H20.5V6.75005H9.30775ZM5.1635 19.6635C4.706 19.6635 4.31442 19.5006 3.98875 19.1748C3.66292 18.8491 3.5 18.4575 3.5 18C3.5 17.5425 3.66292 17.151 3.98875 16.8253C4.31442 16.4995 4.706 16.3365 5.1635 16.3365C5.621 16.3365 6.01258 16.4995 6.33825 16.8253C6.66408 17.151 6.827 17.5425 6.827 18C6.827 18.4575 6.66408 18.8491 6.33825 19.1748C6.01258 19.5006 5.621 19.6635 5.1635 19.6635ZM5.1635 13.6635C4.706 13.6635 4.31442 13.5006 3.98875 13.1748C3.66292 12.8491 3.5 12.4575 3.5 12C3.5 11.5425 3.66292 11.151 3.98875 10.8253C4.31442 10.4995 4.706 10.3365 5.1635 10.3365C5.621 10.3365 6.01258 10.4995 6.33825 10.8253C6.66408 11.151 6.827 11.5425 6.827 12C6.827 12.4575 6.66408 12.8491 6.33825 13.1748C6.01258 13.5006 5.621 13.6635 5.1635 13.6635ZM5.1635 7.66355C4.706 7.66355 4.31442 7.50063 3.98875 7.1748C3.66292 6.84913 3.5 6.45755 3.5 6.00005C3.5 5.54255 3.66292 5.15096 3.98875 4.8253C4.31442 4.49946 4.706 4.33655 5.1635 4.33655C5.621 4.33655 6.01258 4.49946 6.33825 4.8253C6.66408 5.15096 6.827 5.54255 6.827 6.00005C6.827 6.45755 6.66408 6.84913 6.33825 7.1748C6.01258 7.50063 5.621 7.66355 5.1635 7.66355Z",fill:"currentColor"})),format_list_numbered:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M3.5 21.5V20.3078H6V19.25H4.5V18.0577H6V17H3.5V15.8077H6.34625C6.58592 15.8077 6.78683 15.8888 6.949 16.051C7.11117 16.2132 7.19225 16.4141 7.19225 16.6538V17.8462C7.19225 18.0859 7.11117 18.2868 6.949 18.449C6.78683 18.6112 6.58592 18.6923 6.34625 18.6923C6.58592 18.6923 6.78683 18.7733 6.949 18.9355C7.11117 19.0977 7.19225 19.2987 7.19225 19.5385V20.6538C7.19225 20.8936 7.11117 21.0946 6.949 21.2568C6.78683 21.4189 6.58592 21.5 6.34625 21.5H3.5ZM3.5 14.8463V12.25C3.5 12.0103 3.58108 11.8093 3.74325 11.647C3.90542 11.4848 4.10642 11.4038 4.34625 11.4038H6V10.3462H3.5V9.15375H6.34625C6.58592 9.15375 6.78683 9.23483 6.949 9.397C7.11117 9.55933 7.19225 9.76033 7.19225 10V11.75C7.19225 11.9897 7.11117 12.1907 6.949 12.353C6.78683 12.5152 6.58592 12.5963 6.34625 12.5963H4.69225V13.6538H7.19225V14.8463H3.5ZM5 8.19225V3.69225H3.5V2.5H6.19225V8.19225H5ZM9.30775 18.75V17.25H20.5V18.75H9.30775ZM9.30775 12.75V11.25H20.5V12.75H9.30775ZM9.30775 6.75V5.25H20.5V6.75H9.30775Z",fill:"currentColor"})),format_list_checked:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M5.69425 18.452L2.5 15.2578L3.54425 14.2135L5.66925 16.3385L9.91925 12.0885L10.9635 13.1578L5.69425 18.452ZM5.69425 10.8365L2.5 7.64227L3.54425 6.59802L5.66925 8.72302L9.91925 4.47302L10.9635 5.54227L5.69425 10.8365ZM13.0095 16.5578V15.0578H21.5095V16.5578H13.0095ZM13.0095 8.94227V7.44227H21.5095V8.94227H13.0095Z",fill:"currentColor"})),link:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M10.8077 16.5385H7.0385C5.78283 16.5385 4.7125 16.096 3.8275 15.211C2.9425 14.3262 2.5 13.256 2.5 12.0005C2.5 10.745 2.9425 9.67471 3.8275 8.78955C4.7125 7.90421 5.78283 7.46155 7.0385 7.46155H10.8077V8.96155H7.0385C6.19867 8.96155 5.48233 9.25805 4.8895 9.85105C4.2965 10.444 4 11.1604 4 12C4 12.8397 4.2965 13.556 4.8895 14.149C5.48233 14.742 6.19867 15.0385 7.0385 15.0385H10.8077V16.5385ZM8.25 12.75V11.25H15.75V12.75H8.25ZM13.1923 16.5385V15.0385H16.9615C17.8013 15.0385 18.5177 14.742 19.1105 14.149C19.7035 13.556 20 12.8397 20 12C20 11.1604 19.7035 10.444 19.1105 9.85105C18.5177 9.25805 17.8013 8.96155 16.9615 8.96155H13.1923V7.46155H16.9615C18.2172 7.46155 19.2875 7.90405 20.1725 8.78905C21.0575 9.67388 21.5 10.744 21.5 11.9995C21.5 13.255 21.0575 14.3254 20.1725 15.2105C19.2875 16.0959 18.2172 16.5385 16.9615 16.5385H13.1923Z",fill:"currentColor"})),add_photo:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M5.11537 20.5C4.6182 20.5 4.19262 20.323 3.83862 19.969C3.48462 19.615 3.30762 19.1894 3.30762 18.6922V5.30773C3.30762 4.81056 3.48462 4.38498 3.83862 4.03098C4.19262 3.67698 4.6182 3.49998 5.11537 3.49998H13.8076V4.99998H5.11537C5.02553 4.99998 4.95178 5.02881 4.89412 5.08648C4.83645 5.14415 4.80762 5.2179 4.80762 5.30773V18.6922C4.80762 18.7821 4.83645 18.8558 4.89412 18.9135C4.95178 18.9711 5.02553 19 5.11537 19H18.4999C18.5895 19 18.6633 18.9711 18.7211 18.9135C18.7788 18.8558 18.8076 18.7821 18.8076 18.6922V9.99998H20.3076V18.6922C20.3076 19.1894 20.1306 19.615 19.7766 19.969C19.4226 20.323 18.997 20.5 18.4999 20.5H5.11537ZM17.1921 8.61523V6.61523H15.1921V5.11548H17.1921V3.11548H18.6921V5.11548H20.6921V6.61523H18.6921V8.61523H17.1921ZM6.55762 16.75H17.1344L13.8459 12.3655L11.0384 16.0192L9.03837 13.4615L6.55762 16.75Z",fill:"currentColor"})),table:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M3.5 18.6923V5.30775C3.5 4.81058 3.677 4.385 4.031 4.031C4.385 3.677 4.81058 3.5 5.30775 3.5H18.6923C19.1894 3.5 19.615 3.677 19.969 4.031C20.323 4.385 20.5 4.81058 20.5 5.30775V18.6923C20.5 19.1894 20.323 19.615 19.969 19.969C19.615 20.323 19.1894 20.5 18.6923 20.5H5.30775C4.81058 20.5 4.385 20.323 4.031 19.969C3.677 19.615 3.5 19.1894 3.5 18.6923ZM5 9.077H19V5.30775C19 5.21792 18.9712 5.14417 18.9135 5.0865C18.8558 5.02883 18.7821 5 18.6923 5H5.30775C5.21792 5 5.14417 5.02883 5.0865 5.0865C5.02883 5.14417 5 5.21792 5 5.30775V9.077ZM10.1615 14.0385H13.8385V10.577H10.1615V14.0385ZM10.1615 19H13.8385V15.5385H10.1615V19ZM5 14.0385H8.6615V10.577H5V14.0385ZM15.3385 14.0385H19V10.577H15.3385V14.0385ZM5.30775 19H8.6615V15.5385H5V18.6923C5 18.7821 5.02883 18.8558 5.0865 18.9135C5.14417 18.9712 5.21792 19 5.30775 19ZM15.3385 19H18.6923C18.7821 19 18.8558 18.9712 18.9135 18.9135C18.9712 18.8558 19 18.7821 19 18.6923V15.5385H15.3385V19Z",fill:"currentColor"})),horizontal_rule:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M4.5 12.75V11.25H19.5V12.75H4.5Z",fill:"currentColor"})),frontmatter:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M4.5 8.75V7.25H8.5V8.75H4.5Z",fill:"currentColor"}),le.createElement("path",{d:"M4.5 14.75V13.25H8.5V14.75H4.5Z",fill:"currentColor"}),le.createElement("path",{d:"M9.5 8.75V7.25H13.5V8.75H9.5Z",fill:"currentColor"}),le.createElement("path",{d:"M9.5 14.75V13.25H13.5V14.75H9.5Z",fill:"currentColor"}),le.createElement("path",{d:"M14.5 8.75V7.25H18.5V8.75H14.5Z",fill:"currentColor"}),le.createElement("path",{d:"M14.5 14.75V13.25H18.5V14.75H14.5Z",fill:"currentColor"})),frame_source:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M8.6 15.2443L5.35575 12L8.6 8.75575L9.64425 9.825L7.46925 12L9.64425 14.175L8.6 15.2443ZM15.4 15.2443L14.3558 14.175L16.5307 12L14.3558 9.825L15.4 8.75575L18.6443 12L15.4 15.2443ZM5.30775 20.5C4.80258 20.5 4.375 20.325 4.025 19.975C3.675 19.625 3.5 19.1974 3.5 18.6923V15H5V18.6923C5 18.7692 5.03208 18.8398 5.09625 18.9038C5.16025 18.9679 5.23075 19 5.30775 19H9V20.5H5.30775ZM15 20.5V19H18.6923C18.7692 19 18.8398 18.9679 18.9038 18.9038C18.9679 18.8398 19 18.7692 19 18.6923V15H20.5V18.6923C20.5 19.1974 20.325 19.625 19.975 19.975C19.625 20.325 19.1974 20.5 18.6923 20.5H15ZM3.5 9V5.30775C3.5 4.80258 3.675 4.375 4.025 4.025C4.375 3.675 4.80258 3.5 5.30775 3.5H9V5H5.30775C5.23075 5 5.16025 5.03208 5.09625 5.09625C5.03208 5.16025 5 5.23075 5 5.30775V9H3.5ZM19 9V5.30775C19 5.23075 18.9679 5.16025 18.9038 5.09625C18.8398 5.03208 18.7692 5 18.6923 5H15V3.5H18.6923C19.1974 3.5 19.625 3.675 19.975 4.025C20.325 4.375 20.5 4.80258 20.5 5.30775V9H19Z",fill:"currentColor"})),arrow_drop_down:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M11.9999 14.6537L7.59619 10.25H16.4037L11.9999 14.6537Z",fill:"currentColor"})),admonition:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M12.0001 21.4C11.7654 21.4 11.5385 21.3548 11.3193 21.2645C11.1002 21.174 10.9002 21.0435 10.7193 20.873L3.1271 13.2807C2.9566 13.0999 2.8261 12.8999 2.7356 12.6807C2.64526 12.4616 2.6001 12.2346 2.6001 12C2.6001 11.7653 2.64526 11.5358 2.7356 11.3115C2.8261 11.0871 2.9566 10.8897 3.1271 10.7192L10.7193 3.12698C10.9002 2.94614 11.1002 2.81314 11.3193 2.72798C11.5385 2.64264 11.7654 2.59998 12.0001 2.59998C12.2348 2.59998 12.4643 2.64264 12.6886 2.72798C12.9129 2.81314 13.1103 2.94614 13.2808 3.12698L20.8731 10.7192C21.0539 10.8897 21.1869 11.0871 21.2721 11.3115C21.3574 11.5358 21.4001 11.7653 21.4001 12C21.4001 12.2346 21.3574 12.4616 21.2721 12.6807C21.1869 12.8999 21.0539 13.0999 20.8731 13.2807L13.2808 20.873C13.1103 21.0435 12.9129 21.174 12.6886 21.2645C12.4643 21.3548 12.2348 21.4 12.0001 21.4ZM12.2213 19.8037L19.8039 12.2212C19.8552 12.1699 19.8808 12.0961 19.8808 12C19.8808 11.9038 19.8552 11.8301 19.8039 11.7787L12.2213 4.19623C12.17 4.14489 12.0963 4.11923 12.0001 4.11923C11.9039 4.11923 11.8302 4.14489 11.7788 4.19623L4.19635 11.7787C4.14501 11.8301 4.11935 11.9038 4.11935 12C4.11935 12.0961 4.14501 12.1699 4.19635 12.2212L11.7788 19.8037C11.8302 19.8551 11.9039 19.8807 12.0001 19.8807C12.0963 19.8807 12.17 19.8551 12.2213 19.8037ZM11.2501 13.0865H12.7501V7.47123H11.2501V13.0865ZM12.0001 15.702C12.2258 15.702 12.4168 15.6237 12.5731 15.4672C12.7296 15.3109 12.8078 15.1199 12.8078 14.8942C12.8078 14.6686 12.7296 14.4776 12.5731 14.3212C12.4168 14.1647 12.2258 14.0865 12.0001 14.0865C11.7744 14.0865 11.5834 14.1647 11.4271 14.3212C11.2706 14.4776 11.1923 14.6686 11.1923 14.8942C11.1923 15.1199 11.2706 15.3109 11.4271 15.4672C11.5834 15.6237 11.7744 15.702 12.0001 15.702Z",fill:"currentColor"})),sandpack:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M12.9999 22.5C12.4947 22.5 12.0671 22.325 11.7171 21.975C11.3671 21.625 11.1921 21.1974 11.1921 20.6922V7.30775C11.1921 6.80258 11.3671 6.375 11.7171 6.025C12.0671 5.675 12.4947 5.5 12.9999 5.5H16.3844C16.8895 5.5 17.3171 5.675 17.6671 6.025C18.0171 6.375 18.1921 6.80258 18.1921 7.30775V20.6922C18.1921 21.1974 18.0171 21.625 17.6671 21.975C17.3171 22.325 16.8895 22.5 16.3844 22.5H12.9999ZM12.6921 7.30775V20.6922C12.6921 20.7692 12.7242 20.8398 12.7884 20.9038C12.8524 20.9679 12.9229 21 12.9999 21H16.3844C16.4614 21 16.5319 20.9679 16.5959 20.9038C16.66 20.8398 16.6921 20.7692 16.6921 20.6922V7.30775C16.6921 7.23075 16.66 7.16025 16.5959 7.09625C16.5319 7.03208 16.4614 7 16.3844 7H12.9999C12.9229 7 12.8524 7.03208 12.7884 7.09625C12.7242 7.16025 12.6921 7.23075 12.6921 7.30775ZM6.61537 18.5C6.1102 18.5 5.68262 18.325 5.33262 17.975C4.98262 17.625 4.80762 17.1974 4.80762 16.6923V3.30775C4.80762 2.80258 4.98262 2.375 5.33262 2.025C5.68262 1.675 6.1102 1.5 6.61537 1.5H9.99987C10.505 1.5 10.9326 1.675 11.2826 2.025C11.6326 2.375 11.8076 2.80258 11.8076 3.30775V16.6923C11.8076 17.1974 11.6326 17.625 11.2826 17.975C10.9326 18.325 10.505 18.5 9.99987 18.5H6.61537ZM6.30762 3.30775V16.6923C6.30762 16.7692 6.3397 16.8398 6.40387 16.9038C6.46787 16.9679 6.53837 17 6.61537 17H9.99987C10.0769 17 10.1474 16.9679 10.2114 16.9038C10.2755 16.8398 10.3076 16.7692 10.3076 16.6923V3.30775C10.3076 3.23075 10.2755 3.16025 10.2114 3.09625C10.1474 3.03208 10.0769 3 9.99987 3H6.61537C6.53837 3 6.46787 3.03208 6.40387 3.09625C6.3397 3.16025 6.30762 3.23075 6.30762 3.30775Z",fill:"currentColor"})),rich_text:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M5.30775 20.5C4.80258 20.5 4.375 20.325 4.025 19.975C3.675 19.625 3.5 19.1974 3.5 18.6923V5.30775C3.5 4.80258 3.675 4.375 4.025 4.025C4.375 3.675 4.80258 3.5 5.30775 3.5H18.6923C19.1974 3.5 19.625 3.675 19.975 4.025C20.325 4.375 20.5 4.80258 20.5 5.30775V18.6923C20.5 19.1974 20.325 19.625 19.975 19.975C19.625 20.325 19.1974 20.5 18.6923 20.5H5.30775ZM5.30775 19H18.6923C18.7692 19 18.8398 18.9679 18.9038 18.9038C18.9679 18.8398 19 18.7692 19 18.6923V5.30775C19 5.23075 18.9679 5.16025 18.9038 5.09625C18.8398 5.03208 18.7692 5 18.6923 5H5.30775C5.23075 5 5.16025 5.03208 5.09625 5.09625C5.03208 5.16025 5 5.23075 5 5.30775V18.6923C5 18.7692 5.03208 18.8398 5.09625 18.9038C5.16025 18.9679 5.23075 19 5.30775 19ZM6.75 17H17.3268L14 12.3655L11.2308 16.0192L9 13.4615L6.75 17Z",fill:"currentColor"}),le.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 12V6.5H9.1925C9.5925 6.5 9.9425 6.65 10.2425 6.95C10.5425 7.25 10.6925 7.6 10.6925 8V8.6925C10.6925 9.03733 10.605 9.32675 10.43 9.56075C10.255 9.79458 10.0168 9.97817 9.7155 10.1115L10.6155 12H9.404L8.504 10.1925H7.1925V12H6ZM9.1925 9H7.1925V7.6925H9.1925C9.26933 7.6925 9.33983 7.7245 9.404 7.7885C9.468 7.85267 9.5 7.92317 9.5 8V8.6925C9.5 8.76933 9.468 8.83983 9.404 8.904C9.33983 8.968 9.26933 9 9.1925 9Z",fill:"currentColor"}),le.createElement("path",{d:"M12.5 7H17.5V8.25H12.5V7Z",fill:"currentColor"}),le.createElement("path",{d:"M12.5 9.25H17.5V10.5H12.5V9.25Z",fill:"currentColor"})),difference:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.30775 20.5C4.80258 20.5 4.375 20.325 4.025 19.975C3.675 19.625 3.5 19.1974 3.5 18.6923V5.30775C3.5 4.80258 3.675 4.375 4.025 4.025C4.375 3.675 4.80258 3.5 5.30775 3.5H18.6923C19.1974 3.5 19.625 3.675 19.975 4.025C20.325 4.375 20.5 4.80258 20.5 5.30775V18.6923C20.5 19.1974 20.325 19.625 19.975 19.975C19.625 20.325 19.1974 20.5 18.6923 20.5H5.30775ZM18.6923 19H5.30775C5.23075 19 5.16025 18.9679 5.09625 18.9038C5.03208 18.8398 5 18.7692 5 18.6923V5.30775C5 5.23075 5.03208 5.16025 5.09625 5.09625C5.16025 5.03208 5.23075 5 5.30775 5H18.6923C18.7692 5 18.8398 5.03208 18.9038 5.09625C18.9679 5.16025 19 5.23075 19 5.30775V18.6923C19 18.7692 18.9679 18.8398 18.9038 18.9038C18.8398 18.9679 18.7692 19 18.6923 19Z",fill:"currentColor"}),le.createElement("rect",{x:"9",y:"10",width:"5.5",height:"1.5",fill:"currentColor"}),le.createElement("rect",{x:"9",y:"15",width:"5.5",height:"1.5",fill:"currentColor"}),le.createElement("rect",{x:"11",y:"8",width:"1.5",height:"5.5",fill:"currentColor"})),markdown:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.30775 20.5C4.80258 20.5 4.375 20.325 4.025 19.975C3.675 19.625 3.5 19.1974 3.5 18.6923V5.30775C3.5 4.80258 3.675 4.375 4.025 4.025C4.375 3.675 4.80258 3.5 5.30775 3.5H18.6923C19.1974 3.5 19.625 3.675 19.975 4.025C20.325 4.375 20.5 4.80258 20.5 5.30775V18.6923C20.5 19.1974 20.325 19.625 19.975 19.975C19.625 20.325 19.1974 20.5 18.6923 20.5H5.30775ZM18.6923 19H5.30775C5.23075 19 5.16025 18.9679 5.09625 18.9038C5.03208 18.8398 5 18.7692 5 18.6923V5.30775C5 5.23075 5.03208 5.16025 5.09625 5.09625C5.16025 5.03208 5.23075 5 5.30775 5H18.6923C18.7692 5 18.8398 5.03208 18.9038 5.09625C18.9679 5.16025 19 5.23075 19 5.30775V18.6923C19 18.7692 18.9679 18.8398 18.9038 18.9038C18.8398 18.9679 18.7692 19 18.6923 19Z",fill:"currentColor"}),le.createElement("path",{d:"M13 15H11.5V11L9.5 14L7.5 11V15H6V8H7.5L9.5 11L11.5 8H13V15Z",fill:"currentColor"}),le.createElement("path",{d:"M15.9921 15.5833L13.2886 12.8797L14.0546 12.1137L15.4504 13.5016V7.99597L16.5336 7.99993V13.5016L17.9296 12.1137L18.6954 12.8797L15.9921 15.5833Z",fill:"currentColor"})),open_in_new:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M5.30775 20.5C4.80258 20.5 4.375 20.325 4.025 19.975C3.675 19.625 3.5 19.1974 3.5 18.6923V5.30775C3.5 4.80258 3.675 4.375 4.025 4.025C4.375 3.675 4.80258 3.5 5.30775 3.5H11.6152V5H5.30775C5.23075 5 5.16025 5.03208 5.09625 5.09625C5.03208 5.16025 5 5.23075 5 5.30775V18.6923C5 18.7692 5.03208 18.8398 5.09625 18.9038C5.16025 18.9679 5.23075 19 5.30775 19H18.6923C18.7692 19 18.8398 18.9679 18.9038 18.9038C18.9679 18.8398 19 18.7692 19 18.6923V12.3848H20.5V18.6923C20.5 19.1974 20.325 19.625 19.975 19.975C19.625 20.325 19.1974 20.5 18.6923 20.5H5.30775ZM9.71925 15.3345L8.6655 14.2808L17.9462 5H14V3.5H20.5V10H19V6.05375L9.71925 15.3345Z",fill:"currentColor"})),link_off:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M18.8843 16.1038L17.7498 14.9385C18.4228 14.7552 18.9661 14.3946 19.3796 13.8568C19.7931 13.319 19.9998 12.7 19.9998 12C19.9998 11.1604 19.705 10.444 19.1153 9.85105C18.5255 9.25805 17.8139 8.96155 16.9806 8.96155H13.1728V7.46155H16.9806C18.2293 7.46155 19.2947 7.90422 20.1768 8.78955C21.0588 9.67472 21.4998 10.7449 21.4998 12C21.4998 12.8859 21.262 13.6951 20.7863 14.4278C20.3107 15.1606 19.6767 15.7193 18.8843 16.1038ZM15.5806 12.75L14.0806 11.25H15.7306V12.75H15.5806ZM20.1461 22.2538L1.74609 3.8538L2.79984 2.80005L21.1998 21.2L20.1461 22.2538ZM10.8268 16.5386H7.03834C5.78318 16.5386 4.71301 16.0959 3.82784 15.2105C2.94251 14.3254 2.49984 13.2552 2.49984 12C2.49984 10.8885 2.85784 9.91322 3.57384 9.07405C4.28984 8.23505 5.18826 7.72838 6.26909 7.55405H6.49984L7.90759 8.96155H7.03834C6.19851 8.96155 5.48218 9.25805 4.88934 9.85105C4.29634 10.444 3.99984 11.1604 3.99984 12C3.99984 12.8397 4.29634 13.556 4.88934 14.149C5.48218 14.742 6.19851 15.0385 7.03834 15.0385H10.8268V16.5386ZM8.26909 12.75V11.25H10.2113L11.6863 12.75H8.26909Z",fill:"currentColor"})),edit:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M5 19H6.2615L16.498 8.7635L15.2365 7.502L5 17.7385V19ZM3.5 20.5V17.1155L16.6905 3.93075C16.8417 3.79342 17.0086 3.68733 17.1913 3.6125C17.3741 3.5375 17.5658 3.5 17.7663 3.5C17.9668 3.5 18.1609 3.53558 18.3488 3.60675C18.5367 3.67792 18.7032 3.79108 18.848 3.94625L20.0693 5.18275C20.2244 5.32758 20.335 5.49425 20.401 5.68275C20.467 5.87125 20.5 6.05975 20.5 6.24825C20.5 6.44942 20.4657 6.64133 20.397 6.824C20.3283 7.00683 20.2191 7.17383 20.0693 7.325L6.8845 20.5H3.5ZM15.8562 8.14375L15.2365 7.502L16.498 8.7635L15.8562 8.14375Z",fill:"currentColor"})),content_copy:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M9.05775 17.5C8.55258 17.5 8.125 17.325 7.775 16.975C7.425 16.625 7.25 16.1974 7.25 15.6923V4.30775C7.25 3.80258 7.425 3.375 7.775 3.025C8.125 2.675 8.55258 2.5 9.05775 2.5H17.4423C17.9474 2.5 18.375 2.675 18.725 3.025C19.075 3.375 19.25 3.80258 19.25 4.30775V15.6923C19.25 16.1974 19.075 16.625 18.725 16.975C18.375 17.325 17.9474 17.5 17.4423 17.5H9.05775ZM9.05775 16H17.4423C17.5192 16 17.5898 15.9679 17.6538 15.9038C17.7179 15.8398 17.75 15.7692 17.75 15.6923V4.30775C17.75 4.23075 17.7179 4.16025 17.6538 4.09625C17.5898 4.03208 17.5192 4 17.4423 4H9.05775C8.98075 4 8.91025 4.03208 8.84625 4.09625C8.78208 4.16025 8.75 4.23075 8.75 4.30775V15.6923C8.75 15.7692 8.78208 15.8398 8.84625 15.9038C8.91025 15.9679 8.98075 16 9.05775 16ZM5.55775 21C5.05258 21 4.625 20.825 4.275 20.475C3.925 20.125 3.75 19.6974 3.75 19.1923V6.30775H5.25V19.1923C5.25 19.2693 5.28208 19.3398 5.34625 19.4038C5.41025 19.4679 5.48075 19.5 5.55775 19.5H15.4423V21H5.55775Z",fill:"currentColor"})),more_horiz:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M6.23096 13.5C5.81846 13.5 5.46537 13.3531 5.17171 13.0592C4.87787 12.7656 4.73096 12.4125 4.73096 12C4.73096 11.5875 4.87787 11.2344 5.17171 10.9408C5.46537 10.6469 5.81846 10.5 6.23096 10.5C6.64346 10.5 6.99662 10.6469 7.29046 10.9408C7.58412 11.2344 7.73096 11.5875 7.73096 12C7.73096 12.4125 7.58412 12.7656 7.29046 13.0592C6.99662 13.3531 6.64346 13.5 6.23096 13.5ZM12.0002 13.5C11.5877 13.5 11.2346 13.3531 10.941 13.0592C10.6471 12.7656 10.5002 12.4125 10.5002 12C10.5002 11.5875 10.6471 11.2344 10.941 10.9408C11.2346 10.6469 11.5877 10.5 12.0002 10.5C12.4127 10.5 12.7658 10.6469 13.0595 10.9408C13.3533 11.2344 13.5002 11.5875 13.5002 12C13.5002 12.4125 13.3533 12.7656 13.0595 13.0592C12.7658 13.3531 12.4127 13.5 12.0002 13.5ZM17.7695 13.5C17.357 13.5 17.0038 13.3531 16.71 13.0592C16.4163 12.7656 16.2695 12.4125 16.2695 12C16.2695 11.5875 16.4163 11.2344 16.71 10.9408C17.0038 10.6469 17.357 10.5 17.7695 10.5C18.182 10.5 18.535 10.6469 18.8287 10.9408C19.1225 11.2344 19.2695 11.5875 19.2695 12C19.2695 12.4125 19.1225 12.7656 18.8287 13.0592C18.535 13.3531 18.182 13.5 17.7695 13.5Z",fill:"currentColor"})),more_vert:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M12 19.2692C11.5875 19.2692 11.2344 19.1223 10.9408 18.8285C10.6469 18.5348 10.5 18.1817 10.5 17.7692C10.5 17.3567 10.6469 17.0035 10.9408 16.7097C11.2344 16.416 11.5875 16.2692 12 16.2692C12.4125 16.2692 12.7656 16.416 13.0592 16.7097C13.3531 17.0035 13.5 17.3567 13.5 17.7692C13.5 18.1817 13.3531 18.5348 13.0592 18.8285C12.7656 19.1223 12.4125 19.2692 12 19.2692ZM12 13.5C11.5875 13.5 11.2344 13.353 10.9408 13.0592C10.6469 12.7655 10.5 12.4125 10.5 12C10.5 11.5875 10.6469 11.2344 10.9408 10.9407C11.2344 10.6469 11.5875 10.5 12 10.5C12.4125 10.5 12.7656 10.6469 13.0592 10.9407C13.3531 11.2344 13.5 11.5875 13.5 12C13.5 12.4125 13.3531 12.7655 13.0592 13.0592C12.7656 13.353 12.4125 13.5 12 13.5ZM12 7.73071C11.5875 7.73071 11.2344 7.58388 10.9408 7.29021C10.6469 6.99638 10.5 6.64321 10.5 6.23071C10.5 5.81821 10.6469 5.46513 10.9408 5.17146C11.2344 4.87763 11.5875 4.73071 12 4.73071C12.4125 4.73071 12.7656 4.87763 13.0592 5.17146C13.3531 5.46513 13.5 5.81821 13.5 6.23071C13.5 6.64321 13.3531 6.99638 13.0592 7.29021C12.7656 7.58388 12.4125 7.73071 12 7.73071Z",fill:"currentColor"})),close:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M6.39994 18.6538L5.34619 17.6L10.9462 12L5.34619 6.4L6.39994 5.34625L11.9999 10.9463L17.5999 5.34625L18.6537 6.4L13.0537 12L18.6537 17.6L17.5999 18.6538L11.9999 13.0538L6.39994 18.6538Z",fill:"currentColor"})),settings:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M9.69225 21.5L9.3115 18.4538C9.04367 18.3641 8.769 18.2385 8.4875 18.077C8.20617 17.9153 7.95459 17.7422 7.73275 17.5577L4.9115 18.75L2.604 14.75L5.04425 12.9058C5.02125 12.7571 5.00492 12.6077 4.99525 12.4578C4.98559 12.3078 4.98075 12.1583 4.98075 12.0095C4.98075 11.8673 4.98559 11.7228 4.99525 11.576C5.00492 11.4292 5.02125 11.2686 5.04425 11.0943L2.604 9.25L4.9115 5.26925L7.723 6.452C7.96417 6.261 8.22159 6.08633 8.49525 5.928C8.76892 5.76967 9.03784 5.64242 9.302 5.54625L9.69225 2.5H14.3078L14.6885 5.55575C14.9885 5.66475 15.2599 5.792 15.5028 5.9375C15.7458 6.083 15.991 6.2545 16.2385 6.452L19.0885 5.26925L21.396 9.25L18.9173 11.123C18.9531 11.2845 18.9727 11.4355 18.976 11.576C18.9792 11.7163 18.9808 11.8577 18.9808 12C18.9808 12.1358 18.9775 12.274 18.971 12.4145C18.9647 12.5548 18.9417 12.7154 18.902 12.8963L21.3615 14.75L19.0538 18.75L16.2385 17.548C15.991 17.7455 15.7384 17.9202 15.4808 18.072C15.2231 18.224 14.959 18.3481 14.6885 18.4443L14.3078 21.5H9.69225ZM11 20H12.9655L13.325 17.3212C13.8353 17.1879 14.3017 16.9985 14.724 16.753C15.1465 16.5073 15.5539 16.1916 15.9463 15.8057L18.4308 16.85L19.4155 15.15L17.2463 13.5155C17.3296 13.2565 17.3863 13.0026 17.4163 12.7537C17.4464 12.5051 17.4615 12.2538 17.4615 12C17.4615 11.7397 17.4464 11.4884 17.4163 11.2463C17.3863 11.0039 17.3296 10.7564 17.2463 10.5038L19.4345 8.85L18.45 7.15L15.9365 8.2095C15.6018 7.85183 15.2009 7.53583 14.7338 7.2615C14.2664 6.98717 13.7937 6.79292 13.3155 6.67875L13 4H11.0155L10.6845 6.66925C10.1743 6.78975 9.70325 6.97433 9.27125 7.223C8.83909 7.47183 8.42684 7.79233 8.0345 8.1845L5.55 7.15L4.5655 8.85L6.725 10.4595C6.64167 10.6968 6.58334 10.9437 6.55 11.2C6.51667 11.4563 6.5 11.7262 6.5 12.0095C6.5 12.2698 6.51667 12.525 6.55 12.775C6.58334 13.025 6.6385 13.2718 6.7155 13.5155L4.5655 15.15L5.55 16.85L8.025 15.8C8.4045 16.1897 8.81025 16.5089 9.24225 16.7578C9.67442 17.0064 10.152 17.1974 10.675 17.3307L11 20ZM12.0115 15C12.8435 15 13.5515 14.708 14.1355 14.124C14.7195 13.54 15.0115 12.832 15.0115 12C15.0115 11.168 14.7195 10.46 14.1355 9.876C13.5515 9.292 12.8435 9 12.0115 9C11.1692 9 10.4586 9.292 9.87975 9.876C9.30092 10.46 9.0115 11.168 9.0115 12C9.0115 12.832 9.30092 13.54 9.87975 14.124C10.4586 14.708 11.1692 15 12.0115 15Z",fill:"currentColor"})),delete_big:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M7.30775 20.5C6.80908 20.5 6.38308 20.3234 6.02975 19.9702C5.67658 19.6169 5.5 19.1909 5.5 18.6922V5.99998H4.5V4.49998H9V3.61548H15V4.49998H19.5V5.99998H18.5V18.6922C18.5 19.1974 18.325 19.625 17.975 19.975C17.625 20.325 17.1974 20.5 16.6923 20.5H7.30775ZM17 5.99998H7V18.6922C7 18.7821 7.02883 18.8558 7.0865 18.9135C7.14417 18.9711 7.21792 19 7.30775 19H16.6923C16.7692 19 16.8398 18.9679 16.9038 18.9037C16.9679 18.8397 17 18.7692 17 18.6922V5.99998ZM9.404 17H10.9037V7.99998H9.404V17ZM13.0962 17H14.596V7.99998H13.0962V17Z",fill:"currentColor"})),delete_small:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M7.30775 20.5C6.80908 20.5 6.38308 20.3234 6.02975 19.9702C5.67658 19.6169 5.5 19.1909 5.5 18.6922V5.99998H4.5V4.49998H9V3.61548H15V4.49998H19.5V5.99998H18.5V18.6922C18.5 19.1974 18.325 19.625 17.975 19.975C17.625 20.325 17.1974 20.5 16.6923 20.5H7.30775ZM17 5.99998H7V18.6922C7 18.7821 7.02883 18.8558 7.0865 18.9135C7.14417 18.9711 7.21792 19 7.30775 19H16.6923C16.7692 19 16.8398 18.9679 16.9038 18.9037C16.9679 18.8397 17 18.7692 17 18.6922V5.99998ZM9.404 17H10.9037V7.99998H9.404V17ZM13.0962 17H14.596V7.99998H13.0962V17Z",fill:"currentColor"})),format_align_center:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M3.5 20.5V19H20.5V20.5H3.5ZM7.5 16.625V15.125H16.5V16.625H7.5ZM3.5 12.75V11.25H20.5V12.75H3.5ZM7.5 8.875V7.375H16.5V8.875H7.5ZM3.5 5V3.5H20.5V5H3.5Z",fill:"currentColor"})),format_align_left:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M3.5 20.5V19H20.5V20.5H3.5ZM3.5 16.625V15.125H14.5V16.625H3.5ZM3.5 12.75V11.25H20.5V12.75H3.5ZM3.5 8.875V7.375H14.5V8.875H3.5ZM3.5 5V3.5H20.5V5H3.5Z",fill:"currentColor"})),format_align_right:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M3.5 5V3.5H20.5V5H3.5ZM9.5 8.875V7.375H20.5V8.875H9.5ZM3.5 12.75V11.25H20.5V12.75H3.5ZM9.5 16.625V15.125H20.5V16.625H9.5ZM3.5 20.5V19H20.5V20.5H3.5Z",fill:"currentColor"})),add_row:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.025 10.2077C4.375 9.85775 4.80258 9.68275 5.30775 9.68275H6.5V11.1827H5.30775C5.21792 11.1827 5.14417 11.2116 5.0865 11.2693C5.02883 11.3269 5 11.4007 5 11.4905V16.1923C5 16.2821 5.02883 16.3558 5.0865 16.4135C5.14417 16.4712 5.21792 16.5 5.30775 16.5H18.6923C18.7821 16.5 18.8558 16.4712 18.9135 16.4135C18.9712 16.3558 19 16.2821 19 16.1923V11.4905C19 11.4007 18.9712 11.3269 18.9135 11.2693C18.8558 11.2116 18.7821 11.1827 18.6923 11.1827H17.6923V9.68275H18.6923C19.1974 9.68275 19.625 9.85775 19.975 10.2077C20.325 10.5577 20.5 10.9853 20.5 11.4905V16.1923C20.5 16.6974 20.325 17.125 19.975 17.475C19.625 17.825 19.1974 18 18.6923 18H5.30775C4.80258 18 4.375 17.825 4.025 17.475C3.675 17.125 3.5 16.6974 3.5 16.1923V11.4905C3.5 10.9853 3.675 10.5577 4.025 10.2077Z",fill:"currentColor"}),le.createElement("path",{d:"M11.3848 9.68275V7.5H12.8848V9.68275H15V11.1827H12.8848V13.2307H11.3848V11.1827H9.26925V9.68275H11.3848Z",fill:"currentColor"})),add_column:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.70775 4.025C9.35775 4.375 9.18275 4.80258 9.18275 5.30775V6.5H10.6827V5.30775C10.6827 5.21792 10.7116 5.14417 10.7693 5.0865C10.8269 5.02883 10.9007 5 10.9905 5H15.6923C15.7821 5 15.8558 5.02883 15.9135 5.0865C15.9712 5.14417 16 5.21792 16 5.30775V18.6923C16 18.7821 15.9712 18.8558 15.9135 18.9135C15.8558 18.9712 15.7821 19 15.6923 19H10.9905C10.9007 19 10.8269 18.9712 10.7693 18.9135C10.7116 18.8558 10.6827 18.7821 10.6827 18.6923V17.6923H9.18275V18.6923C9.18275 19.1974 9.35775 19.625 9.70775 19.975C10.0577 20.325 10.4853 20.5 10.9905 20.5H15.6923C16.1974 20.5 16.625 20.325 16.975 19.975C17.325 19.625 17.5 19.1974 17.5 18.6923V5.30775C17.5 4.80258 17.325 4.375 16.975 4.025C16.625 3.675 16.1974 3.5 15.6923 3.5H10.9905C10.4853 3.5 10.0577 3.675 9.70775 4.025Z",fill:"currentColor"}),le.createElement("path",{d:"M9.18275 11.3848H7V12.8848H9.18275V15H10.6827V12.8848H12.7307V11.3848H10.6827V9.26925H9.18275V11.3848Z",fill:"currentColor"})),insert_col_left:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M13.0001 20.1152H8.67713H8.75388H8.69238H13.0001ZM7.19238 19.8075C7.19238 20.3127 7.36738 20.7402 7.71738 21.0902C8.06738 21.4402 8.49497 21.6152 9.00013 21.6152H12.6924C13.1975 21.6152 13.6251 21.4402 13.9751 21.0902C14.3251 20.7402 14.5001 20.3127 14.5001 19.8075V10.423H13.0001V19.8075C13.0001 19.8973 12.9713 19.9711 12.9136 20.0287C12.856 20.0864 12.7822 20.1152 12.6924 20.1152H9.00013C8.9103 20.1152 8.83655 20.0864 8.77888 20.0287C8.72122 19.9711 8.69238 19.8973 8.69238 19.8075V4.69223C8.26422 4.74357 7.90722 4.93299 7.62138 5.26048C7.33538 5.58798 7.19238 5.97548 7.19238 6.42298V19.8075ZM13.0001 2.49998V4.61523H10.8846V6.11523H13.0001V8.23073H14.5001V6.11523H16.6154V4.61523H14.5001V2.49998H13.0001Z",fill:"currentColor"})),insert_row_above:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M20.1152 9.99987V14.3229V14.2461V14.3076V9.99987ZM19.8075 15.8076C20.3127 15.8076 20.7402 15.6326 21.0902 15.2826C21.4402 14.9326 21.6152 14.505 21.6152 13.9999V10.3076C21.6152 9.80245 21.4402 9.37487 21.0902 9.02487C20.7402 8.67487 20.3127 8.49987 19.8075 8.49987H10.423V9.99987H19.8075C19.8973 9.99987 19.9711 10.0287 20.0287 10.0864C20.0864 10.144 20.1152 10.2178 20.1152 10.3076V13.9999C20.1152 14.0897 20.0864 14.1635 20.0287 14.2211C19.9711 14.2788 19.8973 14.3076 19.8075 14.3076H4.69223C4.74357 14.7358 4.93299 15.0928 5.26048 15.3786C5.58798 15.6646 5.97548 15.8076 6.42298 15.8076H19.8075ZM2.49998 9.99987H4.61523V12.1154H6.11523V9.99987H8.23073V8.49987H6.11523V6.38462H4.61523V8.49987H2.49998V9.99987Z",fill:"currentColor"})),insert_row_below:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M20.1152 14.1924V9.86939V9.94614V9.88464V14.1924ZM19.8075 8.38464C20.3127 8.38464 20.7402 8.55964 21.0902 8.90964C21.4402 9.25964 21.6152 9.68723 21.6152 10.1924V13.8846C21.6152 14.3898 21.4402 14.8174 21.0902 15.1674C20.7402 15.5174 20.3127 15.6924 19.8075 15.6924H10.423V14.1924H19.8075C19.8973 14.1924 19.9711 14.1636 20.0287 14.1059C20.0864 14.0482 20.1152 13.9745 20.1152 13.8846V10.1924C20.1152 10.1026 20.0864 10.0288 20.0287 9.97114C19.9711 9.91348 19.8973 9.88464 19.8075 9.88464H4.69223C4.74357 9.45648 4.93299 9.09948 5.26048 8.81364C5.58798 8.52764 5.97548 8.38464 6.42298 8.38464H19.8075ZM2.49998 14.1924H4.61523V12.0769H6.11523V14.1924H8.23073V15.6924H6.11523V17.8076H4.61523V15.6924H2.49998V14.1924Z",fill:"currentColor"})),insert_col_right:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M10.8075 20.1152H15.1305H15.0537H15.1152H10.8075ZM16.6152 19.8075C16.6152 20.3127 16.4402 20.7402 16.0902 21.0902C15.7402 21.4402 15.3127 21.6152 14.8075 21.6152H11.1152C10.6101 21.6152 10.1825 21.4402 9.83248 21.0902C9.48248 20.7402 9.30748 20.3127 9.30748 19.8075V10.423H10.8075V19.8075C10.8075 19.8973 10.8363 19.9711 10.894 20.0287C10.9517 20.0864 11.0254 20.1152 11.1152 20.1152H14.8075C14.8973 20.1152 14.9711 20.0864 15.0287 20.0287C15.0864 19.9711 15.1152 19.8973 15.1152 19.8075V4.69223C15.5434 4.74357 15.9004 4.93299 16.1862 5.26048C16.4722 5.58798 16.6152 5.97548 16.6152 6.42298V19.8075ZM10.8075 2.49998V4.61523H12.923V6.11523H10.8075V8.23073H9.30748V6.11523H7.19223V4.61523H9.30748V2.49998H10.8075Z",fill:"currentColor"})),check:le.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},le.createElement("path",{d:"M9.54983 17.6537L4.21533 12.3192L5.28433 11.25L9.54983 15.5155L18.7153 6.34998L19.7843 7.41923L9.54983 17.6537Z",fill:"currentColor"}))},CLe="_editorRoot_1e2ox_53",TLe="_editorWrapper_1e2ox_155",kLe="_toolbarRoot_1e2ox_162",ELe="_readOnlyToolbarRoot_1e2ox_189",ALe="_toolbarToggleItem_1e2ox_208",PLe="_toolbarGroupOfGroups_1e2ox_219",MLe="_toolbarToggleSingleGroup_1e2ox_224",RLe="_toolbarButton_1e2ox_239",ILe="_toolbarButtonDropdownContainer_1e2ox_286",DLe="_selectContainer_1e2ox_288",LLe="_selectItem_1e2ox_301",$Le="_toolbarButtonSelectTrigger_1e2ox_307",zLe="_selectTrigger_1e2ox_308",NLe="_selectDropdownArrow_1e2ox_374",BLe="_contentEditable_1e2ox_380",FLe="_codeMirrorWrapper_1e2ox_392",jLe="_codeMirrorToolbar_1e2ox_409",VLe="_propertyEditorTable_1e2ox_439",QLe="_iconButton_1e2ox_457",ULe="_propertyEditorInput_1e2ox_481",ZLe="_primaryButton_1e2ox_507",qLe="_secondaryButton_1e2ox_508",WLe="_smallButton_1e2ox_523",HLe="_linkDialogEditForm_1e2ox_541",GLe="_linkDialogAnchor_1e2ox_587",XLe="_linkDialogPopoverContent_1e2ox_601",YLe="_tableColumnEditorPopoverContent_1e2ox_602",KLe="_dialogContent_1e2ox_603",JLe="_largeDialogContent_1e2ox_615",e$e="_dialogTitle_1e2ox_625",t$e="_dialogCloseButton_1e2ox_631",n$e="_popoverArrow_1e2ox_650",r$e="_linkDialogPreviewAnchor_1e2ox_654",i$e="_tooltipTrigger_1e2ox_677",o$e="_tooltipContent_1e2ox_681",s$e="_actionButton_1e2ox_695",a$e="_tableEditor_1e2ox_714",l$e="_toolCell_1e2ox_725",c$e="_tableColumnEditorTrigger_1e2ox_744",u$e="_addRowButton_1e2ox_746",h$e="_addColumnButton_1e2ox_747",d$e="_tableColumnEditorToolbar_1e2ox_789",f$e="_toggleGroupRoot_1e2ox_802",p$e="_tableToolsColumn_1e2ox_820",m$e="_leftAlignedCell_1e2ox_829",g$e="_rightAlignedCell_1e2ox_833",y$e="_centeredCell_1e2ox_837",v$e="_dialogOverlay_1e2ox_870",x$e="_focusedImage_1e2ox_916",_$e="_imageWrapper_1e2ox_920",b$e="_editImageToolbar_1e2ox_933",w$e="_editImageButton_1e2ox_937",O$e="_nestedEditor_1e2ox_961",S$e="_imageControlWrapperResizing_1e2ox_1032",C$e="_imageResizer_1e2ox_1036",T$e="_imageResizerN_1e2ox_1045",k$e="_imageResizerNe_1e2ox_1051",E$e="_imageResizerE_1e2ox_1057",A$e="_imageResizerSe_1e2ox_1063",P$e="_imageResizerS_1e2ox_1063",M$e="_imageResizerSw_1e2ox_1075",R$e="_imageResizerW_1e2ox_1081",I$e="_imageResizerNw_1e2ox_1087",D$e="_imagePlaceholder_1e2ox_1093",L$e="_imageDimensionsContainer_1e2ox_1101",$$e="_placeholder_1e2ox_1106",z$e="_rootContentEditableWrapper_1e2ox_1119",N$e="_downshiftInputWrapper_1e2ox_1129",B$e="_downshiftInput_1e2ox_1129",F$e="_downshiftAutocompleteContainer_1e2ox_1160",j$e="_textInput_1e2ox_1206",V$e="_multiFieldForm_1e2ox_1214",Q$e="_formField_1e2ox_1220",U$e="_markdownParseError_1e2ox_1231",Z$e="_popupContainer_1e2ox_1240",Ut={editorRoot:CLe,editorWrapper:TLe,toolbarRoot:kLe,readOnlyToolbarRoot:ELe,toolbarToggleItem:ALe,toolbarGroupOfGroups:PLe,toolbarToggleSingleGroup:MLe,toolbarButton:RLe,toolbarButtonDropdownContainer:ILe,selectContainer:DLe,selectItem:LLe,toolbarButtonSelectTrigger:$Le,selectTrigger:zLe,selectDropdownArrow:NLe,contentEditable:BLe,codeMirrorWrapper:FLe,codeMirrorToolbar:jLe,propertyEditorTable:VLe,iconButton:QLe,propertyEditorInput:ULe,primaryButton:ZLe,secondaryButton:qLe,smallButton:WLe,linkDialogEditForm:HLe,linkDialogAnchor:GLe,linkDialogPopoverContent:XLe,tableColumnEditorPopoverContent:YLe,dialogContent:KLe,largeDialogContent:JLe,dialogTitle:e$e,dialogCloseButton:t$e,popoverArrow:n$e,linkDialogPreviewAnchor:r$e,tooltipTrigger:i$e,tooltipContent:o$e,actionButton:s$e,tableEditor:a$e,toolCell:l$e,tableColumnEditorTrigger:c$e,addRowButton:u$e,addColumnButton:h$e,tableColumnEditorToolbar:d$e,toggleGroupRoot:f$e,tableToolsColumn:p$e,leftAlignedCell:m$e,rightAlignedCell:g$e,centeredCell:y$e,dialogOverlay:v$e,focusedImage:x$e,imageWrapper:_$e,editImageToolbar:b$e,editImageButton:w$e,nestedEditor:O$e,imageControlWrapperResizing:S$e,imageResizer:C$e,imageResizerN:T$e,imageResizerNe:k$e,imageResizerE:E$e,imageResizerSe:A$e,imageResizerS:P$e,imageResizerSw:M$e,imageResizerW:R$e,imageResizerNw:I$e,imagePlaceholder:D$e,imageDimensionsContainer:L$e,placeholder:$$e,rootContentEditableWrapper:z$e,downshiftInputWrapper:N$e,downshiftInput:B$e,downshiftAutocompleteContainer:F$e,textInput:j$e,multiFieldForm:V$e,formField:Q$e,markdownParseError:U$e,popupContainer:Z$e},q$e=new Set(["http:","https:","mailto:","sms:","tel:"]);class vy extends xu{static getType(){return"link"}static clone(e){return new vy(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e="",n={},r){super(r);const{target:i=null,rel:o=null,title:a=null}=n;this.__url=e,this.__target=i,this.__rel=o,this.__title=a}createDOM(e){const n=document.createElement("a");return this.updateLinkDOM(null,n,e),Lf(n,e.theme.link),n}updateLinkDOM(e,n,r){if(Jee(n)){e&&e.__url===this.__url||(n.href=this.sanitizeUrl(this.__url));for(const i of["target","rel","title"]){const o=`__${i}`,a=this[o];e&&e[o]===a||(a?n[i]=a:n.removeAttribute(i))}}}updateDOM(e,n,r){return this.updateLinkDOM(e,n,r),!1}static importDOM(){return{a:e=>({conversion:W$e,priority:1})}}static importJSON(e){return sy().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setURL(e.url).setRel(e.rel||null).setTarget(e.target||null).setTitle(e.title||null)}sanitizeUrl(e){e=VZ(e);try{const n=new URL(VZ(e));if(!q$e.has(n.protocol))return"about:blank"}catch{return e}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(e){const n=this.getWritable();return n.__url=e,n}getTarget(){return this.getLatest().__target}setTarget(e){const n=this.getWritable();return n.__target=e,n}getRel(){return this.getLatest().__rel}setRel(e){const n=this.getWritable();return n.__rel=e,n}getTitle(){return this.getLatest().__title}setTitle(e){const n=this.getWritable();return n.__title=e,n}insertNewAfter(e,n=!0){const r=sy(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,n),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,n,r){if(!Kt(n))return!1;const i=n.anchor.getNode(),o=n.focus.getNode();return this.isParentOf(i)&&this.isParentOf(o)&&n.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function W$e(t){let e=null;if(Jee(t)){const n=t.textContent;(n!==null&&n!==""||t.children.length>0)&&(e=sy(t.getAttribute("href")||"",{rel:t.getAttribute("rel"),target:t.getAttribute("target"),title:t.getAttribute("title")}))}return{node:e}}function sy(t="",e){return vh(new vy(t,e))}function iu(t){return t instanceof vy}let DI=class wne extends vy{constructor(e="",n={},r){super(e,n,r),this.__isUnlinked=n.isUnlinked!==void 0&&n.isUnlinked!==null&&n.isUnlinked}static getType(){return"autolink"}static clone(e){return new wne(e.__url,{isUnlinked:e.__isUnlinked,rel:e.__rel,target:e.__target,title:e.__title},e.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(e){const n=this.getWritable();return n.__isUnlinked=e,n}createDOM(e){return this.__isUnlinked?document.createElement("span"):super.createDOM(e)}updateDOM(e,n,r){return super.updateDOM(e,n,r)||e.__isUnlinked!==this.__isUnlinked}static importJSON(e){return Pz().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setIsUnlinked(e.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(e,n=!0){const r=this.getParentOrThrow().insertNewAfter(e,n);if(It(r)){const i=Pz(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return r.append(i),i}return null}};function Pz(t="",e){return vh(new DI(t,e))}function Cf(t){return t instanceof DI}const fO=lr("TOGGLE_LINK_COMMAND");function FZ(t,e){if(t.type==="element"){const n=t.getNode();return It(n)||(function(r,...i){const o=new URL("https://lexical.dev/docs/error"),a=new URLSearchParams;a.append("code",r);for(const s of i)a.append("v",s);throw o.search=a.toString(),Error(`Minified Lexical error #${r}; visit ${o.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(252),n.getChildren()[t.offset+e]||null}return null}function sL(t,e={}){const{target:n,title:r}=e,i=e.rel===void 0?"noreferrer":e.rel,o=cn();if(o===null||!Kt(o)&&!ss(o))return;if(ss(o)){const d=o.getNodes();return d.length===0?void 0:void d.forEach((m=>{if(t===null){const v=Mf(m,(_=>!Cf(_)&&iu(_)));v&&(v.insertBefore(m),v.getChildren().length===0&&v.remove())}else{const v=Mf(m,(_=>!Cf(_)&&iu(_)));if(v)v.setURL(t),n!==void 0&&v.setTarget(n),i!==void 0&&v.setRel(i);else{const _=sy(t,{rel:i,target:n});m.insertBefore(_),_.append(m)}}}))}const a=o.extract();if(t===null)return void a.forEach((d=>{const m=Mf(d,(v=>!Cf(v)&&iu(v)));if(m){const v=m.getChildren();for(let _=0;_<v.length;_++)m.insertBefore(v[_]);m.remove()}}));const s=new Set,u=d=>{s.has(d.getKey())||(s.add(d.getKey()),d.setURL(t),n!==void 0&&d.setTarget(n),i!==void 0&&d.setRel(i),r!==void 0&&d.setTitle(r))};if(a.length===1){const d=jZ(a[0],iu);if(d!==null)return u(d)}(function(d){const m=cn();if(!Kt(m))return d();const v=k_(m),_=v.isBackward(),O=FZ(v.anchor,_?-1:0),E=FZ(v.focus,_?0:-1);if(d(),O||E){const A=cn();if(Kt(A)){const M=A.clone();if(O){const L=O.getParent();L&&M.anchor.set(L.getKey(),O.getIndexWithinParent()+(_?1:0),"element")}if(E){const L=E.getParent();L&&M.focus.set(L.getKey(),E.getIndexWithinParent()+(_?0:1),"element")}cs(k_(M))}}})((()=>{let d=null;for(const m of a){if(!m.isAttached())continue;const v=jZ(m,iu);if(v){u(v);continue}if(It(m)){if(!m.isInline())continue;if(iu(m)){if(!(Cf(m)||d!==null&&d.getParentOrThrow().isParentOf(m))){u(m),d=m;continue}for(const O of m.getChildren())m.insertBefore(O);m.remove();continue}}const _=m.getPreviousSibling();iu(_)&&_.is(d)?_.append(m):(d=sy(t,{rel:i,target:n,title:r}),m.insertAfter(d),d.append(m))}}))}function jZ(t,e){let n=t;for(;n!==null&&n.getParent()!==null&&!e(n);)n=n.getParentOrThrow();return e(n)?n:null}const H$e=/^\+?[0-9\s()-]{5,}$/;function VZ(t){return t.match(/^[a-z][a-z0-9+.-]*:/i)||t.match(/^[/#.]/)?t:t.includes("@")?`mailto:${t}`:H$e.test(t)?`tel:${t}`:`https://${t}`}function z0(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const i of e)r.append("v",i);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function PT(t){let e=1,n=t.getParent();for(;n!=null;){if(Mr(n)){const r=n.getParent();if(ur(r)){e++,n=r.getParent();continue}z0(40)}return e}return e}function Mz(t){let e=t.getParent();ur(e)||z0(40);let n=e;for(;n!==null;)n=n.getParent(),ur(n)&&(e=n);return e}function One(t){let e=[];const n=t.getChildren().filter(Mr);for(let r=0;r<n.length;r++){const i=n[r],o=i.getFirstChild();ur(o)?e=e.concat(One(o)):e.push(i)}return e}function Xp(t){return Mr(t)&&ur(t.getFirstChild())}function QZ(t){return Oc().append(t)}function Sne(t,e){return Mr(t)&&(e.length===0||e.length===1&&t.is(e[0])&&t.getChildrenSize()===0)}function Rz(t){const e=cn();if(e!==null){let n=e.getNodes();if(Kt(e)){const i=e.getStartEndPoints();i===null&&z0(143);const[o]=i,a=o.getNode(),s=a.getParent();if(ra(a)){const u=a.getFirstChild();if(u)n=u.selectStart().getNodes();else{const d=Oi();a.append(d),n=d.select().getNodes()}}else if(Sne(a,n)){const u=_c(t);if(ra(s)){a.replace(u);const d=Oc();It(a)&&(d.setFormat(a.getFormatType()),d.setIndent(a.getIndent())),u.append(d)}else if(Mr(a)){const d=a.getParentOrThrow();N_(u,d.getChildren()),d.replace(u)}return}}const r=new Set;for(let i=0;i<n.length;i++){const o=n[i];if(It(o)&&o.isEmpty()&&!Mr(o)&&!r.has(o.getKey())){UZ(o,t);continue}let a=Vee(o)?o.getParent():Mr(o)&&o.isEmpty()?o:null;for(;a!=null;){const s=a.getKey();if(ur(a)){if(!r.has(s)){const u=_c(t);N_(u,a.getChildren()),a.replace(u),r.add(s)}break}{const u=a.getParent();if(ra(u)&&!r.has(s)){r.add(s),UZ(a,t);break}a=u}}}}}function N_(t,e){t.splice(t.getChildrenSize(),0,e)}function UZ(t,e){if(ur(t))return t;const n=t.getPreviousSibling(),r=t.getNextSibling(),i=Oc();let o;if(N_(i,t.getChildren()),ur(n)&&e===n.getListType())n.append(i),ur(r)&&e===r.getListType()&&(N_(n,r.getChildren()),r.remove()),o=n;else if(ur(r)&&e===r.getListType())r.getFirstChildOrThrow().insertBefore(i),o=r;else{const a=_c(e);a.append(i),t.replace(a),o=a}return i.setFormat(t.getFormatType()),i.setIndent(t.getIndent()),t.remove(),o}function W8(t,e){const n=t.getLastChild(),r=e.getFirstChild();n&&r&&Xp(n)&&Xp(r)&&(W8(n.getFirstChild(),r.getFirstChild()),r.remove());const i=e.getChildren();i.length>0&&t.append(...i),e.remove()}function G$e(){const t=cn();if(Kt(t)){const e=new Set,n=t.getNodes(),r=t.anchor.getNode();if(Sne(r,n))e.add(Mz(r));else for(let i=0;i<n.length;i++){const o=n[i];if(Vee(o)){const a=gte(o,xy);a!=null&&e.add(Mz(a))}}for(const i of e){let o=i;const a=One(i);for(const s of a){const u=Oi().setTextStyle(t.style).setTextFormat(t.format);N_(u,s.getChildren()),o.insertAfter(u),o=u,s.__key===t.anchor.key&&D_(t.anchor,ah(yd(u,"next"))),s.__key===t.focus.key&&D_(t.focus,ah(yd(u,"next"))),s.remove()}i.remove()}}}function Cne(t){const e=t.getListType()!=="check";let n=t.getStart();for(const r of t.getChildren())Mr(r)&&(r.getValue()!==n&&r.setValue(n),e&&r.getLatest().__checked!=null&&r.setChecked(void 0),ur(r.getFirstChild())||n++)}function X$e(t){const e=new Set;if(Xp(t)||e.has(t.getKey()))return;const n=t.getParent(),r=t.getNextSibling(),i=t.getPreviousSibling();if(Xp(r)&&Xp(i)){const o=i.getFirstChild();if(ur(o)){o.append(t);const a=r.getFirstChild();ur(a)&&(N_(o,a.getChildren()),r.remove(),e.add(r.getKey()))}}else if(Xp(r)){const o=r.getFirstChild();if(ur(o)){const a=o.getFirstChild();a!==null&&a.insertBefore(t)}}else if(Xp(i)){const o=i.getFirstChild();ur(o)&&o.append(t)}else if(ur(n)){const o=Oc().setTextFormat(t.getTextFormat()).setTextStyle(t.getTextStyle()),a=_c(n.getListType()).setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle());o.append(a),a.append(t),i?i.insertAfter(o):r?r.insertBefore(o):n.append(o)}}function Y$e(t){if(Xp(t))return;const e=t.getParent(),n=e?e.getParent():void 0;if(ur(n?n.getParent():void 0)&&Mr(n)&&ur(e)){const r=e?e.getFirstChild():void 0,i=e?e.getLastChild():void 0;if(t.is(r))n.insertBefore(t),e.isEmpty()&&n.remove();else if(t.is(i))n.insertAfter(t),e.isEmpty()&&n.remove();else{const o=e.getListType(),a=Oc(),s=_c(o);a.append(s),t.getPreviousSiblings().forEach((m=>s.append(m)));const u=Oc(),d=_c(o);u.append(d),N_(d,t.getNextSiblings()),n.insertBefore(a),n.insertAfter(u),n.replace(t)}}}function K$e(){const t=cn();if(!Kt(t)||!t.isCollapsed())return!1;const e=t.anchor.getNode();if(!Mr(e)||e.getChildrenSize()!==0)return!1;const n=Mz(e),r=e.getParent();ur(r)||z0(40);const i=r.getParent();let o;if(ra(i))o=Oi(),n.insertAfter(o);else{if(!Mr(i))return!1;o=Oc(),i.insertAfter(o)}o.setTextStyle(t.style).setTextFormat(t.format).select();const a=e.getNextSiblings();if(a.length>0){const s=_c(r.getListType());if(Mr(o)){const u=Oc();u.append(s),o.insertAfter(u)}else o.insertAfter(s);s.append(...a)}return(function(s){let u=s;for(;u.getNextSibling()==null&&u.getPreviousSibling()==null;){const d=u.getParent();if(d==null||!Mr(d)&&!ur(d))break;u=d}u.remove()})(e),!0}function gM(...t){const e=[];for(const n of t)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))e.push(r);return e}let xy=class extends xu{$config(){return this.config("listitem",{$transform:e=>{if(e.__checked==null)return;const n=e.getParent();ur(n)&&n.getListType()!=="check"&&e.getChecked()!=null&&e.setChecked(void 0)},extends:xu,importDOM:{li:()=>({conversion:J$e,priority:0})}})}constructor(e=1,n=void 0,r){super(r),this.__value=e===void 0?1:e,this.__checked=n}afterCloneFrom(e){super.afterCloneFrom(e),this.__value=e.__value,this.__checked=e.__checked}createDOM(e){const n=document.createElement("li");return this.updateListItemDOM(null,n,e),n}updateListItemDOM(e,n,r){const i=this.getParent();ur(i)&&i.getListType()==="check"&&(function(s,u,d,m){ur(u.getFirstChild())?(s.removeAttribute("role"),s.removeAttribute("tabIndex"),s.removeAttribute("aria-checked")):(s.setAttribute("role","checkbox"),s.setAttribute("tabIndex","-1"),d&&u.__checked===d.__checked||s.setAttribute("aria-checked",u.getChecked()?"true":"false"))})(n,this,e),n.value=this.__value,(function(s,u,d){const m=[],v=[],_=u.list,O=_?_.listitem:void 0;let E;if(_&&_.nested&&(E=_.nested.listitem),O!==void 0&&m.push(...gM(O)),_){const A=d.getParent(),M=ur(A)&&A.getListType()==="check",L=d.getChecked();M&&!L||v.push(_.listitemUnchecked),M&&L||v.push(_.listitemChecked),M&&m.push(L?_.listitemChecked:_.listitemUnchecked)}if(E!==void 0){const A=gM(E);d.getChildren().some((M=>ur(M)))?m.push(...A):v.push(...A)}v.length>0&&OI(s,...v),m.length>0&&Lf(s,...m)})(n,r.theme,this);const o=e?e.__style:"",a=this.__style;o!==a&&(a===""?n.removeAttribute("style"):n.style.cssText=a),(function(s,u,d){const m=ZU(u.__textStyle);for(const v in m)s.style.setProperty(`--listitem-marker-${v}`,m[v]);if(d)for(const v in ZU(d.__textStyle))v in m||s.style.removeProperty(`--listitem-marker-${v}`)})(n,this,e)}updateDOM(e,n,r){const i=n;return this.updateListItemDOM(e,i,r),!1}updateFromJSON(e){return super.updateFromJSON(e).setValue(e.value).setChecked(e.checked)}exportDOM(e){const n=this.createDOM(e._config),r=this.getFormatType();r&&(n.style.textAlign=r);const i=this.getDirection();return i&&(n.dir=i),{element:n}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...e){for(let n=0;n<e.length;n++){const r=e[n];if(It(r)&&this.canMergeWith(r)){const i=r.getChildren();this.append(...i),r.remove()}else super.append(r)}return this}replace(e,n){if(Mr(e))return super.replace(e);this.setIndent(0);const r=this.getParentOrThrow();if(!ur(r))return e;if(r.__first===this.getKey())r.insertBefore(e);else if(r.__last===this.getKey())r.insertAfter(e);else{const i=_c(r.getListType());let o=this.getNextSibling();for(;o;){const a=o;o=o.getNextSibling(),i.append(a)}r.insertAfter(e),e.insertAfter(i)}return n&&(It(e)||z0(139),this.getChildren().forEach((i=>{e.append(i)}))),this.remove(),r.getChildrenSize()===0&&r.remove(),e}insertAfter(e,n=!0){const r=this.getParentOrThrow();if(ur(r)||z0(39),Mr(e))return super.insertAfter(e,n);const i=this.getNextSiblings();if(r.insertAfter(e,n),i.length!==0){const o=_c(r.getListType());i.forEach((a=>o.append(a))),e.insertAfter(o,n)}return e}remove(e){const n=this.getPreviousSibling(),r=this.getNextSibling();super.remove(e),n&&r&&Xp(n)&&Xp(r)&&(W8(n.getFirstChild(),r.getFirstChild()),r.remove())}insertNewAfter(e,n=!0){const r=Oc().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(r,n),r}collapseAtStart(e){const n=Oi();this.getChildren().forEach((a=>n.append(a)));const r=this.getParentOrThrow(),i=r.getParentOrThrow(),o=Mr(i);if(r.getChildrenSize()===1)if(o)r.remove(),i.select();else{r.insertBefore(n),r.remove();const a=e.anchor,s=e.focus,u=n.getKey();a.type==="element"&&a.getNode().is(this)&&a.set(u,a.offset,"element"),s.type==="element"&&s.getNode().is(this)&&s.set(u,s.offset,"element")}else r.insertBefore(n),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(e){const n=this.getWritable();return n.__value=e,n}getChecked(){const e=this.getLatest();let n;const r=this.getParent();return ur(r)&&(n=r.getListType()),n==="check"?!!e.__checked:void 0}setChecked(e){const n=this.getWritable();return n.__checked=e,n}toggleChecked(){const e=this.getWritable();return e.setChecked(!e.__checked)}getIndent(){const e=this.getParent();if(e===null||!this.isAttached())return this.getLatest().__indent;let n=e.getParentOrThrow(),r=0;for(;Mr(n);)n=n.getParentOrThrow().getParentOrThrow(),r++;return r}setIndent(e){typeof e!="number"&&z0(117),(e=Math.floor(e))>=0||z0(199);let n=this.getIndent();for(;n!==e;)n<e?(X$e(this),n++):(Y$e(this),n--);return this}canInsertAfter(e){return Mr(e)}canReplaceWith(e){return Mr(e)}canMergeWith(e){return Mr(e)||fI(e)}extractWithChild(e,n){if(!Kt(n))return!1;const r=n.anchor.getNode(),i=n.focus.getNode();return this.isParentOf(r)&&this.isParentOf(i)&&this.getTextContent().length===n.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return _c("bullet")}canMergeWhenEmpty(){return!0}};function J$e(t){if(t.classList.contains("task-list-item")){for(const n of t.children)if(n.tagName==="INPUT")return e4e(n)}const e=t.getAttribute("aria-checked");return{node:Oc(e==="true"||e!=="false"&&void 0)}}function e4e(t){return t.getAttribute("type")!=="checkbox"?{node:null}:{node:Oc(t.hasAttribute("checked"))}}function Oc(t){return vh(new xy(void 0,t))}function Mr(t){return t instanceof xy}let _y=class extends xu{$config(){return this.config("list",{$transform:e=>{(function(n){const r=n.getNextSibling();ur(r)&&n.getListType()===r.getListType()&&W8(n,r)})(e),Cne(e)},extends:xu,importDOM:{ol:()=>({conversion:qZ,priority:0}),ul:()=>({conversion:qZ,priority:0})}})}constructor(e="number",n=1,r){super(r);const i=n4e[e]||e;this.__listType=i,this.__tag=i==="number"?"ol":"ul",this.__start=n}afterCloneFrom(e){super.afterCloneFrom(e),this.__listType=e.__listType,this.__tag=e.__tag,this.__start=e.__start}getTag(){return this.getLatest().__tag}setListType(e){const n=this.getWritable();return n.__listType=e,n.__tag=e==="number"?"ol":"ul",n}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(e){const n=this.getWritable();return n.__start=e,n}createDOM(e,n){const r=this.__tag,i=document.createElement(r);return this.__start!==1&&i.setAttribute("start",String(this.__start)),i.__lexicalListType=this.__listType,ZZ(i,e.theme,this),i}updateDOM(e,n,r){return e.__tag!==this.__tag||(ZZ(n,r.theme,this),!1)}updateFromJSON(e){return super.updateFromJSON(e).setListType(e.listType).setStart(e.start)}exportDOM(e){const n=this.createDOM(e._config,e);return Ko(n)&&(this.__start!==1&&n.setAttribute("start",String(this.__start)),this.__listType==="check"&&n.setAttribute("__lexicalListType","check")),{element:n}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(e,n,r){let i=r;for(let o=0;o<r.length;o++){const a=r[o];Mr(a)||(i===r&&(i=[...r]),i[o]=Oc().append(!It(a)||ur(a)||a.isInline()?a:so(a.getTextContent())))}return super.splice(e,n,i)}extractWithChild(e){return Mr(e)}};function ZZ(t,e,n){const r=[],i=[],o=e.list;if(o!==void 0){const a=o[`${n.__tag}Depth`]||[],s=PT(n)-1,u=s%a.length,d=a[u],m=o[n.__tag];let v;const _=o.nested,O=o.checklist;if(_!==void 0&&_.list&&(v=_.list),m!==void 0&&r.push(m),O!==void 0&&n.__listType==="check"&&r.push(O),d!==void 0){r.push(...gM(d));for(let E=0;E<a.length;E++)E!==u&&i.push(n.__tag+E)}if(v!==void 0){const E=gM(v);s>1?r.push(...E):i.push(...E)}}i.length>0&&OI(t,...i),r.length>0&&Lf(t,...r)}function t4e(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];if(Mr(r)){e.push(r);const i=r.getChildren();i.length>1&&i.forEach((o=>{ur(o)&&e.push(QZ(o))}))}else e.push(QZ(r))}return e}function qZ(t){const e=t.nodeName.toLowerCase();let n=null;return e==="ol"?n=_c("number",t.start):e==="ul"&&(n=(function(r){if(r.getAttribute("__lexicallisttype")==="check"||r.classList.contains("contains-task-list"))return!0;for(const i of r.childNodes)if(Ko(i)&&i.hasAttribute("aria-checked"))return!0;return!1})(t)?_c("check"):_c("bullet")),{after:t4e,node:n}}const n4e={ol:"number",ul:"bullet"};function _c(t="number",e=1){return vh(new _y(t,e))}function ur(t){return t instanceof _y}const Tne=lr("INSERT_CHECK_LIST_COMMAND");function r4e(t){return Wl(t.registerCommand(Tne,(()=>(Rz("check"),!0)),bo),t.registerCommand(t8,(e=>GZ(e,t,!1)),bo),t.registerCommand(e8,(e=>GZ(e,t,!0)),bo),t.registerCommand(Ik,(()=>{if(Iz()!=null){const e=t.getRootElement();return e?.focus(),!0}return!1}),bo),t.registerCommand(n8,(e=>{const n=Iz();return!(n==null||!t.isEditable())&&(t.update((()=>{const r=vm(n);Mr(r)&&(e.preventDefault(),r.toggleChecked())})),!0)}),bo),t.registerCommand(JB,(e=>t.getEditorState().read((()=>{const n=cn();if(Kt(n)&&n.isCollapsed()){const{anchor:r}=n,i=r.type==="element";if(i||r.offset===0){const o=r.getNode(),a=Mf(o,(s=>It(s)&&!s.isInline()));if(Mr(a)){const s=a.getParent();if(ur(s)&&s.getListType()==="check"&&(i||a.getFirstDescendant()===o)){const u=t.getElementByKey(a.__key);if(u!=null&&document.activeElement!==u)return u.focus(),e.preventDefault(),!0}}}}return!1}))),bo),t.registerRootListener(((e,n)=>{e!==null&&(e.addEventListener("click",WZ),e.addEventListener("pointerdown",HZ)),n!==null&&(n.removeEventListener("click",WZ),n.removeEventListener("pointerdown",HZ))})))}function kne(t,e){const n=t.target;if(!Ko(n))return;const r=n.firstChild;if(Ko(r)&&(r.tagName==="UL"||r.tagName==="OL"))return;const i=n.parentNode;if(!i||i.__lexicalListType!=="check")return;const o=n.getBoundingClientRect(),a=DRe(n),s=t.clientX/a,u=window.getComputedStyle?window.getComputedStyle(n,"::before"):{width:"0px"},d=parseFloat(u.width),m=t.pointerType==="touch"?32:0;(n.dir==="rtl"?s<o.right+m&&s>o.right-d-m:s>o.left-m&&s<o.left+d+m)&&e()}function WZ(t){kne(t,(()=>{if(Ko(t.target)){const e=t.target,n=y8(e);n!=null&&n.isEditable()&&n.update((()=>{const r=vm(e);Mr(r)&&(e.focus(),r.toggleChecked())}))}}))}function HZ(t){kne(t,(()=>{t.preventDefault()}))}function Iz(){const t=document.activeElement;return Ko(t)&&t.tagName==="LI"&&t.parentNode!=null&&t.parentNode.__lexicalListType==="check"?t:null}function GZ(t,e,n){const r=Iz();return r!=null&&e.update((()=>{const i=vm(r);if(!Mr(i))return;const o=(function(a,s){let u=s?a.getPreviousSibling():a.getNextSibling(),d=a;for(;u==null&&Mr(d);)d=d.getParentOrThrow().getParent(),d!=null&&(u=s?d.getPreviousSibling():d.getNextSibling());for(;Mr(u);){const m=s?u.getLastChild():u.getFirstChild();if(!ur(m))return u;u=s?m.getLastChild():m.getFirstChild()}return null})(i,n);if(o!=null){o.selectStart();const a=e.getElementByKey(o.__key);a!=null&&(t.preventDefault(),setTimeout((()=>{a.focus()}),0))}})),!1}const i4e=lr("UPDATE_LIST_START_COMMAND"),Ene=lr("INSERT_UNORDERED_LIST_COMMAND"),Ane=lr("INSERT_ORDERED_LIST_COMMAND"),Pne=lr("REMOVE_LIST_COMMAND");function o4e(t){return Wl(t.registerCommand(Ane,(()=>(Rz("number"),!0)),bo),t.registerCommand(i4e,(e=>{const{listNodeKey:n,newStart:r}=e,i=Fi(n);return!!ur(i)&&(i.getListType()==="number"&&(i.setStart(r),Cne(i)),!0)}),bo),t.registerCommand(Ene,(()=>(Rz("bullet"),!0)),bo),t.registerCommand(Pne,(()=>(G$e(),!0)),bo),t.registerCommand(bT,(()=>K$e()),bo),t.registerNodeTransform(xy,(e=>{const n=e.getFirstChild();if(n){if(gn(n)){const r=n.getStyle(),i=n.getFormat();e.getTextStyle()!==r&&e.setTextStyle(r),e.getTextFormat()!==i&&e.setTextFormat(i)}}else{const r=cn();Kt(r)&&(r.style!==e.getTextStyle()||r.format!==e.getTextFormat())&&r.isCollapsed()&&e.is(r.anchor.getNode())&&e.setTextStyle(r.style).setTextFormat(r.format)}})),t.registerNodeTransform(Tm,(e=>{const n=e.getParent();if(Mr(n)&&e.is(n.getFirstChild())){const r=e.getStyle(),i=e.getFormat();r===n.getTextStyle()&&i===n.getTextFormat()||n.setTextStyle(r).setTextFormat(i)}})))}function s4e(t){const e=n=>{const r=n.getParent();if(ur(n.getFirstChild())||!ur(r))return;const i=Mf(n,(o=>Mr(o)&&ur(o.getParent())&&Mr(o.getPreviousSibling())));if(i===null&&n.getIndent()>0)n.setIndent(0);else if(Mr(i)){const o=i.getPreviousSibling();if(Mr(o)){const a=(function(u){let d=u,m=d.getFirstChild();for(;ur(m);){const v=m.getLastChild();if(!Mr(v))break;d=v,m=d.getFirstChild()}return d})(o),s=a.getParent();if(ur(s)){const u=PT(s);u+1<PT(r)&&n.setIndent(u)}}}};return t.registerNodeTransform(_y,(n=>{const r=[n];for(;r.length>0;){const i=r.shift();if(ur(i)){for(const o of i.getChildren())if(Mr(o)){e(o);const a=o.getFirstChild();ur(a)&&r.push(a)}}}}))}function a4e(t){try{const e=t.anchor,n=t.focus,r=t.anchor.getNode(),i=t.focus.getNode();return r===i?r:t.isBackward()?WU(n)?r:i:WU(e)?r:i}catch{return null}}const l4e=["transform","perspective","filter","backdrop-filter","contain","container-type"],c4e=["layout","paint","strict","content"];function u4e(t){let e=t?.parentElement;for(;e;){const n=window.getComputedStyle(e),i=n.willChange.split(",").map(a=>a.trim()).some(a=>l4e.includes(a));if(n.transform!=="none"||n.perspective!=="none"||n.filter!=="none"||n.backdropFilter!=="none"||c4e.includes(n.contain)||n.containerType!=="normal"||n.contentVisibility==="auto"||i)return e;e=e.parentElement}return null}function Mne(t){const e=cn(),n=window.getSelection(),r=document.activeElement,i=t.getRootElement();if(e!==null&&n!==null&&i!==null&&i.contains(n.anchorNode)&&t.isEditable()){const o=n.getRangeAt(0);let a;if(n.isCollapsed){let u=n.anchorNode;u?.nodeType==3&&(u=u.parentNode),a=u.getBoundingClientRect(),a.width=0}else if(n.anchorNode===i){let u=i;for(;u.firstElementChild!=null;)u=u.firstElementChild;a=u.getBoundingClientRect()}else a=o.getBoundingClientRect();const s=u4e(i);if(s){const u=s.getBoundingClientRect();return{top:Math.round(a.top-u.top),left:Math.round(a.left-u.left),width:Math.round(a.width),height:Math.round(a.height)}}return{top:Math.round(a.top),left:Math.round(a.left),width:Math.round(a.width),height:Math.round(a.height)}}else if(r?.className!=="link-input")return null;return null}function h4e(t,e){let n="";return t.getEditorState().read(()=>{const r=cn();if(!r||!Kt(r)||r.isCollapsed())return;const i=r.getNodes();if(i.length===0)return;const o=new Set;i.forEach(u=>{let d=u;for(;d;){if(lO(d)||Mr(d)||d.getType()==="paragraph"||d.getType()==="quote"){It(d)&&o.add(d);break}d=d.getParent()}});const a=o.size>0?Array.from(o):i;function s(u){if(lO(u)){const d=parseInt(u.getTag().replace("h","")),v=u.getChildren().map(_=>s(_)).join("");return"#".repeat(d)+" "+v+`

`}else if(Mr(u)){const d=u.getParent(),m=d&&ur(d)&&d.getListType()==="number"?"1. ":"- ",_=u.getChildren().map(O=>s(O)).join("");return m+_+`
`}else{if(ur(u))return u.getChildren().map(m=>s(m)).join("")+`
`;if(gn(u)){let d=u.getTextContent();const m=u.getFormat();return m&16?`\`${d}\``:(m&1&&(d=`**${d}**`),m&2&&(d=`*${d}*`),m&4&&(d=`~~${d}~~`),d)}else if(iu(u)){const d=u.getURL(),m=u.getTitle(),_=u.getChildren().map(O=>s(O)).join("");return m?`[${_}](${d} "${m}")`:`[${_}](${d})`}else if(It(u))return u.getChildren().map(m=>s(m)).join("")}return u.getTextContent()}n=a.map(u=>s(u)).join("")}),n.trim()}const d4e=({children:t})=>{const e=$s(Od),n=le.useMemo(()=>[e,iee(null,kI)],[e]);return le.createElement(Q5.Provider,{value:n},t)},f4e=()=>{const t=Bs(),e=Ki(lne),n=Ki(rLe),r=v=>{n(v),e(v?{current:v}:null)},[i,o,a,s,u,d,m]=us(wz,Oz,pne,mne,yne,Sz,gne);return le.createElement(le.Fragment,null,s.map((v,_)=>le.createElement(v,{key:_})),le.createElement(Rne,{wrappers:u},le.createElement("div",{className:ni(Ut.rootContentEditableWrapper,"mdxeditor-root-contenteditable")},le.createElement(q8,{contentEditable:le.createElement("div",{ref:r},le.createElement(U8,{className:ni(Ut.contentEditable,i),ariaLabel:t("contentArea.editableMarkdown","editable markdown"),spellCheck:o})),placeholder:le.createElement("div",{className:ni(Ut.contentEditable,Ut.placeholder,i)},le.createElement("p",null,d)),ErrorBoundary:Z8}))),a.map((v,_)=>le.createElement(v,{key:_})),m.map((v,_)=>le.createElement(v,{key:_})))},p4e={listItemIndent:"one"},m4e=t=>SLe[t];function g4e(t,e,n={}){let r=e;for(const[i,o]of Object.entries(n))r=r.replaceAll(`{{${i}}}`,String(o));return r}const Rne=({wrappers:t,children:e})=>{if(t.length===0)return le.createElement(le.Fragment,null,e);const n=t[0];return le.createElement(n,null,le.createElement(Rne,{wrappers:t.slice(1)},e))},y4e=({children:t,className:e,overlayContainer:n})=>{const r=le.useRef(null),i=le.useRef(null),o=Ki(pv),a=Ki(nLe);return le.useEffect(()=>{const s=document.createElement("div");return s.classList.add("mdxeditor-popup-container",Ut.editorRoot,Ut.popupContainer,...(e??"").trim().split(" ").filter(Boolean)),(n??document.body).appendChild(s),r.current=s,o(r),a(i),()=>{s.remove()}},[e,r,n,o,a]),le.createElement("div",{className:ni("mdxeditor",Ut.editorRoot,Ut.editorWrapper,e),ref:i},t)},v4e=({mdxRef:t})=>{const e=GO();return le.useImperativeHandle(t,()=>({getMarkdown:()=>{const n=e.getValue($_);return n==="source"||n==="diff"?e.getValue(z_):e.getValue(_m)},setMarkdown:n=>{e.pub(N8,n)},insertMarkdown:n=>{e.pub(cne,n)},focus:(n,r)=>{var i;(i=e.getValue(Od))==null||i.focus(n,r)},getContentEditableHTML:()=>{var n;return((n=e.getValue(lne))==null?void 0:n.current.innerHTML)??""},getSelectionMarkdown:()=>{const n=e.getValue($_);if(n==="source"||n==="diff")return"";const r=e.getValue(Uo);return r?(e.getValue(Uk),e.getValue(z8),e.getValue(fM),e.getValue(Zk),e.getValue(MI),h4e(r)):""}}),[e]),null},x4e=le.forwardRef((t,e)=>le.createElement(J5e,{plugins:[lLe({contentEditableClassName:t.contentEditableClassName??"",spellCheck:t.spellCheck??!0,initialMarkdown:t.markdown,onChange:t.onChange??Q0,onBlur:t.onBlur??Q0,toMarkdownOptions:t.toMarkdownOptions??p4e,autoFocus:t.autoFocus??!1,placeholder:t.placeholder??"",readOnly:!!t.readOnly,iconComponentFor:t.iconComponentFor??m4e,suppressHtmlProcessing:t.suppressHtmlProcessing??!1,onError:t.onError??Q0,translation:t.translation??g4e,trim:t.trim??!0,lexicalTheme:t.lexicalTheme,..."editorState"in t?{editorState:t.editorState}:{},suppressSharedHistory:t.suppressSharedHistory??!1,additionalLexicalNodes:t.additionalLexicalNodes??[],lexicalEditorNamespace:t.lexicalEditorNamespace??"MDXEditor"}),...t.plugins??[]]},le.createElement(y4e,{className:t.className,overlayContainer:t.overlayContainer},le.createElement(d4e,null,le.createElement(f4e,null))),le.createElement(v4e,{mdxRef:e}))),Ine=typeof window<"u"&&typeof window.document.createElement<"u",yM=Ine&&(()=>{var t;const e=(t=navigator.userAgentData)==null?void 0:t.platform;return e?/mac/i.test(e):/Mac|iPod|iPhone|iPad/.test(navigator.userAgent)})();function _4e(t,e){return yM?t:e}const b4e={testLexicalNode:lO,visitLexicalNode:({lexicalNode:t,actions:e})=>{const n=parseInt(t.getTag()[1],10);e.addAndStepInto("heading",{depth:n})}},w4e={testNode:"heading",visitNode:function({mdastNode:t,actions:e}){e.addAndStepInto(nm(`h${t.depth}`))}},O4e=["Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6"],Dne=[1,2,3,4,5,6],S4e={Digit1:1,Digit2:2,Digit3:3,Digit4:4,Digit5:5,Digit6:6},LI=In(Dne,t=>{t.pub(RI,e=>e.registerCommand(nI,n=>{const{code:r,ctrlKey:i,metaKey:o,altKey:a}=n;return O4e.includes(r)&&_4e(o,i)&&a?(n.preventDefault(),e.update(()=>{if(r==="Digit0")t.pub(pM,()=>Oi());else{const s=t.getValue(LI),u=S4e[r];s.includes(u)&&t.pub(pM,()=>nm(`h${u}`))}}),!0):!1},bo))}),C4e=Zl({init(t){t.pubIn({[iS]:"headings",[vd]:w4e,[jf]:Vk,[Vf]:b4e})},update(t,e){t.pub(LI,e?.allowedHeadingLevels??Dne)}});function XZ(t,e){return t.getEditorState().read((()=>{const n=Fi(e);return n!==null&&n.isSelected()}))}function Lne(t){const[e]=ql(),[n,r]=j.useState((()=>XZ(e,t)));return j.useEffect((()=>{let i=!0;const o=e.registerUpdateListener((()=>{i&&r(XZ(e,t))}));return()=>{i=!1,o()}}),[e,t]),[n,j.useCallback((i=>{e.update((()=>{let o=cn();ss(o)||(o=l8(),cs(o)),ss(o)&&(i?o.add(t):o.delete(t))}))}),[e,t]),j.useCallback((()=>{e.update((()=>{const i=cn();ss(i)&&i.clear()}))}),[e])]}const $ne=lr("INSERT_HORIZONTAL_RULE_COMMAND");function T4e({nodeKey:t}){const[e]=ql(),[n,r,i]=Lne(t);return j.useEffect((()=>Wl(e.registerCommand(JR,(o=>{const a=e.getElementByKey(t);return o.target===a&&(o.shiftKey||i(),r(!n),!0)}),bo))),[i,e,n,t,r]),j.useEffect((()=>{const o=e.getElementByKey(t),a=e._config.theme.hrSelected??"selected";o!==null&&(n?Lf(o,a):OI(o,a))}),[e,n,t]),null}let Wk=class zne extends gy{static getType(){return"horizontalrule"}static clone(e){return new zne(e.__key)}static importJSON(e){return oS().updateFromJSON(e)}static importDOM(){return{hr:()=>({conversion:k4e,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(e){const n=document.createElement("hr");return Lf(n,e.theme.hr),n}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}decorate(){return q.jsx(T4e,{nodeKey:this.__key})}};function k4e(){return{node:oS()}}function oS(){return vh(new Wk)}function H8(t){return t instanceof Wk}function E4e(){const[t]=ql();return j.useEffect((()=>t.registerCommand($ne,(e=>{const n=cn();if(!Kt(n))return!1;if(n.focus.getNode()!==null){const r=oS();yte(r)}return!0}),Lr)),[t]),null}const A4e={testLexicalNode:H8,visitLexicalNode({actions:t}){t.addAndStepInto("thematicBreak")}},P4e={testNode:"thematicBreak",visitNode({actions:t}){t.addAndStepInto(oS())}},Nne=Cm(t=>{t.sub(t.pipe(Nne,Qo(Uo)),([,e])=>{e?.dispatchCommand($ne,void 0)})}),M4e=Zl({init(t){t.pubIn({[iS]:"thematicBreak",[vd]:P4e,[jf]:Wk,[Vf]:A4e,[nb]:E4e})}}),R4e={testNode:"list",visitNode:function({mdastNode:t,lexicalParent:e,actions:n}){const r=t.children.some(o=>typeof o.checked=="boolean")?"check":t.ordered?"number":"bullet",i=_c(r);if(Mr(e)){const o=Oc();o.append(i),e.insertAfter(o)}else e.append(i);n.visitChildren(t,i)}},I4e={testNode:"listItem",visitNode({mdastNode:t,actions:e,lexicalParent:n}){const r=n.getListType()==="check"?t.checked??!1:void 0;e.addAndStepInto(Oc(r))}},D4e={testLexicalNode:ur,visitLexicalNode:({lexicalNode:t,actions:e})=>{e.addAndStepInto("list",{ordered:t.getListType()==="number",spread:!1})}},L4e={testLexicalNode:Mr,visitLexicalNode:({lexicalNode:t,mdastParent:e,actions:n})=>{const r=t.getChildren(),i=r[0];if(r.length===1&&ur(i)){const o=e.children.at(-1);o?n.visitChildren(t,o):n.visitChildren(i,e)}else{const o=t.getParent(),a=n.appendToParent(e,{type:"listItem",checked:o.getListType()==="check"?!!t.getChecked():void 0,spread:!1,children:[]});let s=null;for(const u of t.getChildren())gn(u)||Pf(u)||u.isInline()&&(It(u)||Ti(u))?(s??(s=n.appendToParent(a,{type:"paragraph",children:[]})),n.visit(u,s)):(s=null,n.visit(u,a))}}};function $4e(t,e){return Wl(t.registerCommand(iI,(n=>{const r=cn();if(!Kt(r))return!1;n.preventDefault();const i=(function(o){const a=o.getNodes();if(IRe(a,(_=>eM(_)&&_.canIndent()?_:null)).length>0)return!0;const s=o.anchor,u=o.focus,d=u.isBefore(s)?u:s,m=d.getNode(),v=dz(m);if(v.canIndent()){const _=v.getKey();let O=KO();if(O.anchor.set(_,0,"element"),O.focus.set(_,0,"element"),O=k_(O),O.anchor.is(d))return!0}return!1})(r)?n.shiftKey?Y4:K5:xee;return t.dispatchCommand(i,void 0)}),Lr),t.registerCommand(K5,(()=>{if(e==null)return!1;const n=cn();if(!Kt(n))return!1;const r=n.getNodes().map((i=>dz(i).getIndent()));return Math.max(...r)+1>=e}),gh))}function YZ({maxIndent:t}){const[e]=ql();return j.useEffect((()=>$4e(e,t)),[e,t]),null}function KZ(){const[t]=ql();return j.useEffect((()=>r4e(t)),[t]),null}function JZ({hasStrictIndent:t=!1}){const[e]=ql();return j.useEffect((()=>{if(!e.hasNodes([_y,xy]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[e]),j.useEffect((()=>{if(t)return s4e(e)}),[e,t]),(function(n){j.useEffect((()=>o4e(n)),[n])})(e),null}const z4e={name:"tasklistCheck",tokenize:B4e};function N4e(){return{text:{91:z4e}}}function B4e(t,e,n){const r=this;return i;function i(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(u):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),o)}function o(u){return Ri(u)?(t.enter("taskListCheckValueUnchecked"),t.consume(u),t.exit("taskListCheckValueUnchecked"),a):u===88||u===120?(t.enter("taskListCheckValueChecked"),t.consume(u),t.exit("taskListCheckValueChecked"),a):n(u)}function a(u){return u===93?(t.enter("taskListCheckMarker"),t.consume(u),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),s):n(u)}function s(u){return Mn(u)?e(u):_r(u)?t.check({tokenize:F4e},e,n)(u):n(u)}}function F4e(t,e,n){return Rr(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function j4e(){return{exit:{taskListCheckValueChecked:eq,taskListCheckValueUnchecked:eq,paragraph:Q4e}}}function V4e(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:U4e}}}function eq(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Q4e(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let o=-1,a;for(;++o<i.length;){const s=i[o];if(s.type==="paragraph"){a=s;break}}a===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function U4e(t,e,n,r){const i=t.children[0],o=typeof t.checked=="boolean"&&i&&i.type==="paragraph",a="["+(t.checked?"x":" ")+"] ",s=n.createTracker(r);o&&s.move(a);let u=R8.listItem(t,e,n,{...r,...s.current()});return o&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),u;function d(m){return m+a}}const Z4e=new Map([["number",Ane],["bullet",Ene],["check",Tne],["",Pne]]),Dz=In("",t=>{t.sub(t.pipe(cO,Qo(Uo)),([e,n])=>{if(!e||!n)return;const r=e.anchor.getNode();let i=r.getKey()==="root"?r:Mf(r,s=>{const u=s.getParent();return u!==null&&ra(u)});i??(i=r.getTopLevelElementOrThrow());const o=i.getKey();if(n.getElementByKey(o)!==null)if(ur(i)){const s=gte(r,_y),u=s?s.getListType():i.getListType();t.pub(Dz,u)}else t.pub(Dz,"")})}),Bne=As(t=>{t.sub(t.pipe(Bne,Qo(Uo)),([e,n])=>{n?.dispatchCommand(Z4e.get(e),void 0)})}),q4e=Zl({init(t){var e;(e=t.getValue(Od))==null||e.registerCommand(K5,()=>!H4e(7),gh),t.pubIn({[iS]:"lists",[dO]:j4e(),[hO]:N4e(),[vd]:[R4e,I4e],[jf]:[xy,_y],[Vf]:[D4e,L4e],[qk]:V4e(),[nb]:[YZ,JZ,KZ],[V8]:[YZ,JZ,KZ]})}});function W4e(t){const e=t.getNodes();return e.length===0?new Set([t.anchor.getNode().getParentOrThrow(),t.focus.getNode().getParentOrThrow()]):new Set(e.map(n=>It(n)?n:n.getParentOrThrow()))}function H4e(t){const e=cn();if(!Kt(e))return!1;const n=W4e(e);let r=0;for(const i of n)if(ur(i))r=Math.max(PT(i)+1,r);else if(Mr(i)){const o=i.getParent();if(o?.getChildren().length===1){const a=o.getParent();if(Mr(a)&&a.getChildren().length===1)return!1}if(!ur(o))throw new Error("ListMaxIndentLevelPlugin: A ListItemNode must have a ListNode for a parent.");r=Math.max(PT(o)+1,r)}return r<=t}function G4e(t){return t.length}function X4e(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||G4e,o=[],a=[],s=[],u=[];let d=0,m=-1;for(;++m<t.length;){const A=[],M=[];let L=-1;for(t[m].length>d&&(d=t[m].length);++L<t[m].length;){const $=Y4e(t[m][L]);if(n.alignDelimiters!==!1){const N=i($);M[L]=N,(u[L]===void 0||N>u[L])&&(u[L]=N)}A.push($)}a[m]=A,s[m]=M}let v=-1;if(typeof r=="object"&&"length"in r)for(;++v<d;)o[v]=tq(r[v]);else{const A=tq(r);for(;++v<d;)o[v]=A}v=-1;const _=[],O=[];for(;++v<d;){const A=o[v];let M="",L="";A===99?(M=":",L=":"):A===108?M=":":A===114&&(L=":");let $=n.alignDelimiters===!1?1:Math.max(1,u[v]-M.length-L.length);const N=M+"-".repeat($)+L;n.alignDelimiters!==!1&&($=M.length+$+L.length,$>u[v]&&(u[v]=$),O[v]=$),_[v]=N}a.splice(1,0,_),s.splice(1,0,O),m=-1;const E=[];for(;++m<a.length;){const A=a[m],M=s[m];v=-1;const L=[];for(;++v<d;){const $=A[v]||"";let N="",F="";if(n.alignDelimiters!==!1){const Q=u[v]-(M[v]||0),W=o[v];W===114?N=" ".repeat(Q):W===99?Q%2?(N=" ".repeat(Q/2+.5),F=" ".repeat(Q/2-.5)):(N=" ".repeat(Q/2),F=N):F=" ".repeat(Q)}n.delimiterStart!==!1&&!v&&L.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&$==="")&&(n.delimiterStart!==!1||v)&&L.push(" "),n.alignDelimiters!==!1&&L.push(N),L.push($),n.alignDelimiters!==!1&&L.push(F),n.padding!==!1&&L.push(" "),(n.delimiterEnd!==!1||v!==d-1)&&L.push("|")}E.push(n.delimiterEnd===!1?L.join("").replace(/ +$/,""):L.join(""))}return E.join(`
`)}function Y4e(t){return t==null?"":String(t)}function tq(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function K4e(){return{enter:{table:J4e,tableData:nq,tableHeader:nq,tableRow:tze},exit:{codeText:nze,table:eze,tableData:aL,tableHeader:aL,tableRow:aL}}}function J4e(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function eze(t){this.exit(t),this.data.inTable=void 0}function tze(t){this.enter({type:"tableRow",children:[]},t)}function aL(t){this.exit(t)}function nq(t){this.enter({type:"tableCell",children:[]},t)}function nze(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,rze));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function rze(t,e){return e==="|"?e:t}function ize(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:_,table:a,tableCell:u,tableRow:s}};function a(O,E,A,M){return d(m(O,A,M),O.align)}function s(O,E,A,M){const L=v(O,A,M),$=d([L]);return $.slice(0,$.indexOf(`
`))}function u(O,E,A,M){const L=A.enter("tableCell"),$=A.enter("phrasing"),N=A.containerPhrasing(O,{...M,before:o,after:o});return $(),L(),N}function d(O,E){return X4e(O,{align:E,alignDelimiters:r,padding:n,stringLength:i})}function m(O,E,A){const M=O.children;let L=-1;const $=[],N=E.enter("table");for(;++L<M.length;)$[L]=v(M[L],E,A);return N(),$}function v(O,E,A){const M=O.children;let L=-1;const $=[],N=E.enter("tableRow");for(;++L<M.length;)$[L]=u(M[L],O,E,A);return N(),$}function _(O,E,A){let M=R8.inlineCode(O,E,A);return A.stack.includes("tableCell")&&(M=M.replace(/\|/g,"\\$&")),M}}class oze{constructor(){this.map=[]}add(e,n,r){sze(this,e,n,r)}consume(e){if(this.map.sort(function(o,a){return o[0]-a[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const o of i)e.push(o);i=r.pop()}this.map.length=0}}function sze(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function aze(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const o=r.length-1;r[o]=r[o]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function lze(){return{flow:{null:{name:"table",tokenize:cze,resolveAll:uze}}}}function cze(t,e,n){const r=this;let i=0,o=0,a;return s;function s(ce){let we=r.events.length-1;for(;we>-1;){const be=r.events[we][1].type;if(be==="lineEnding"||be==="linePrefix")we--;else break}const re=we>-1?r.events[we][1].type:null,se=re==="tableHead"||re==="tableRow"?W:u;return se===W&&r.parser.lazy[r.now().line]?n(ce):se(ce)}function u(ce){return t.enter("tableHead"),t.enter("tableRow"),d(ce)}function d(ce){return ce===124||(a=!0,o+=1),m(ce)}function m(ce){return ce===null?n(ce):Mn(ce)?o>1?(o=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(ce),t.exit("lineEnding"),O):n(ce):_r(ce)?Rr(t,m,"whitespace")(ce):(o+=1,a&&(a=!1,i+=1),ce===124?(t.enter("tableCellDivider"),t.consume(ce),t.exit("tableCellDivider"),a=!0,m):(t.enter("data"),v(ce)))}function v(ce){return ce===null||ce===124||Ri(ce)?(t.exit("data"),m(ce)):(t.consume(ce),ce===92?_:v)}function _(ce){return ce===92||ce===124?(t.consume(ce),v):v(ce)}function O(ce){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(ce):(t.enter("tableDelimiterRow"),a=!1,_r(ce)?Rr(t,E,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ce):E(ce))}function E(ce){return ce===45||ce===58?M(ce):ce===124?(a=!0,t.enter("tableCellDivider"),t.consume(ce),t.exit("tableCellDivider"),A):Q(ce)}function A(ce){return _r(ce)?Rr(t,M,"whitespace")(ce):M(ce)}function M(ce){return ce===58?(o+=1,a=!0,t.enter("tableDelimiterMarker"),t.consume(ce),t.exit("tableDelimiterMarker"),L):ce===45?(o+=1,L(ce)):ce===null||Mn(ce)?F(ce):Q(ce)}function L(ce){return ce===45?(t.enter("tableDelimiterFiller"),$(ce)):Q(ce)}function $(ce){return ce===45?(t.consume(ce),$):ce===58?(a=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(ce),t.exit("tableDelimiterMarker"),N):(t.exit("tableDelimiterFiller"),N(ce))}function N(ce){return _r(ce)?Rr(t,F,"whitespace")(ce):F(ce)}function F(ce){return ce===124?E(ce):ce===null||Mn(ce)?!a||i!==o?Q(ce):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(ce)):Q(ce)}function Q(ce){return n(ce)}function W(ce){return t.enter("tableRow"),H(ce)}function H(ce){return ce===124?(t.enter("tableCellDivider"),t.consume(ce),t.exit("tableCellDivider"),H):ce===null||Mn(ce)?(t.exit("tableRow"),e(ce)):_r(ce)?Rr(t,H,"whitespace")(ce):(t.enter("data"),te(ce))}function te(ce){return ce===null||ce===124||Ri(ce)?(t.exit("data"),H(ce)):(t.consume(ce),ce===92?ne:te)}function ne(ce){return ce===92||ce===124?(t.consume(ce),te):te(ce)}}function uze(t,e){let n=-1,r=!0,i=0,o=[0,0,0,0],a=[0,0,0,0],s=!1,u=0,d,m,v;const _=new oze;for(;++n<t.length;){const O=t[n],E=O[1];O[0]==="enter"?E.type==="tableHead"?(s=!1,u!==0&&(rq(_,e,u,d,m),m=void 0,u=0),d={type:"table",start:Object.assign({},E.start),end:Object.assign({},E.end)},_.add(n,0,[["enter",d,e]])):E.type==="tableRow"||E.type==="tableDelimiterRow"?(r=!0,v=void 0,o=[0,0,0,0],a=[0,n+1,0,0],s&&(s=!1,m={type:"tableBody",start:Object.assign({},E.start),end:Object.assign({},E.end)},_.add(n,0,[["enter",m,e]])),i=E.type==="tableDelimiterRow"?2:m?3:1):i&&(E.type==="data"||E.type==="tableDelimiterMarker"||E.type==="tableDelimiterFiller")?(r=!1,a[2]===0&&(o[1]!==0&&(a[0]=a[1],v=qA(_,e,o,i,void 0,v),o=[0,0,0,0]),a[2]=n)):E.type==="tableCellDivider"&&(r?r=!1:(o[1]!==0&&(a[0]=a[1],v=qA(_,e,o,i,void 0,v)),o=a,a=[o[1],n,0,0])):E.type==="tableHead"?(s=!0,u=n):E.type==="tableRow"||E.type==="tableDelimiterRow"?(u=n,o[1]!==0?(a[0]=a[1],v=qA(_,e,o,i,n,v)):a[1]!==0&&(v=qA(_,e,a,i,n,v)),i=0):i&&(E.type==="data"||E.type==="tableDelimiterMarker"||E.type==="tableDelimiterFiller")&&(a[3]=n)}for(u!==0&&rq(_,e,u,d,m),_.consume(e.events),n=-1;++n<e.events.length;){const O=e.events[n];O[0]==="enter"&&O[1].type==="table"&&(O[1]._align=aze(e.events,n))}return t}function qA(t,e,n,r,i,o){const a=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",s="tableContent";n[0]!==0&&(o.end=Object.assign({},nw(e.events,n[0])),t.add(n[0],0,[["exit",o,e]]));const u=nw(e.events,n[1]);if(o={type:a,start:Object.assign({},u),end:Object.assign({},u)},t.add(n[1],0,[["enter",o,e]]),n[2]!==0){const d=nw(e.events,n[2]),m=nw(e.events,n[3]),v={type:s,start:Object.assign({},d),end:Object.assign({},m)};if(t.add(n[2],0,[["enter",v,e]]),r!==2){const _=e.events[n[2]],O=e.events[n[3]];if(_[1].end=Object.assign({},O[1].end),_[1].type="chunkText",_[1].contentType="text",n[3]>n[2]+1){const E=n[2]+1,A=n[3]-n[2]-1;t.add(E,A,[])}}t.add(n[3]+1,0,[["exit",v,e]])}return i!==void 0&&(o.end=Object.assign({},nw(e.events,i)),t.add(i,0,[["exit",o,e]]),o=void 0),o}function rq(t,e,n,r,i){const o=[],a=nw(e.events,n);i&&(i.end=Object.assign({},a),o.push(["exit",i,e])),r.end=Object.assign({},a),o.push(["exit",r,e]),t.add(n+1,0,o)}function nw(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const iq=[["Cat","rgb(125, 50, 0)"],["Dog","rgb(100, 0, 0)"],["Rabbit","rgb(150, 0, 0)"],["Frog","rgb(200, 0, 0)"],["Fox","rgb(200, 75, 0)"],["Hedgehog","rgb(0, 75, 0)"],["Pigeon","rgb(0, 125, 0)"],["Squirrel","rgb(75, 100, 0)"],["Bear","rgb(125, 100, 0)"],["Tiger","rgb(0, 0, 150)"],["Leopard","rgb(0, 0, 200)"],["Zebra","rgb(0, 0, 250)"],["Wolf","rgb(0, 100, 150)"],["Owl","rgb(0, 100, 100)"],["Gull","rgb(100, 0, 100)"],["Squid","rgb(150, 0, 150)"]],oq=iq[Math.floor(Math.random()*iq.length)],hze=j.createContext({clientID:0,color:oq[1],isCollabActive:!1,name:oq[0],yjsDocMap:new Map});function dze(t,e){return j.useContext(hze)}function sq(t){const e=new Set,{ownNodeConfig:n}=_I(t),r=t.transform();if(n){const i=n.$transform;i&&e.add(i)}return r&&e.add(r),e}function Fne({initialEditor:t,children:e,initialNodes:n,initialTheme:r,skipCollabChecks:i,skipEditableListener:o}){const a=j.useRef(!1),s=j.useContext(Q5);s==null&&(function(E,...A){const M=new URL("https://lexical.dev/docs/error"),L=new URLSearchParams;L.append("code",E);for(const $ of A)L.append("v",$);throw M.search=L.toString(),Error(`Minified Lexical error #${E}; visit ${M.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(9);const[u,{getTheme:d}]=s,m=j.useMemo((()=>{const E=r||d()||void 0,A=iee(s,E);E!==void 0&&(t._config.theme=E),t._parentEditor=t._parentEditor||u;const M=t._createEditorArgs,L=M&&M.namespace;if(n){L||(t._config.namespace=u._config.namespace);for(let $ of n){let N=null,F=null;if(typeof $!="function"){const W=$;$=W.replace,N=W.with,F=W.withKlass||null}const Q=mI(t,$.getType());t._nodes.set($.getType(),{exportDOM:Q?Q.exportDOM:void 0,klass:$,replace:N,replaceWithKlass:F,sharedNodeState:V4($),transforms:sq($)})}}else if(M&&M.nodes)L||(t._config.namespace=u._config.namespace);else{const $=t._nodes=new Map(u._nodes);L||(t._config.namespace=u._config.namespace);for(const[N,F]of $)t._nodes.set(N,{exportDOM:F.exportDOM,klass:F.klass,replace:F.replace,replaceWithKlass:F.replaceWithKlass,sharedNodeState:V4(F.klass),transforms:sq(F.klass)})}return[t,A]}),[]),{isCollabActive:v,yjsDocMap:_}=dze(),O=i||a.current||_.has(t.getKey());return j.useEffect((()=>{O&&(a.current=!0)}),[O]),j.useEffect((()=>{if(!o){const E=A=>t.setEditable(A);return E(u.isEditable()),u.registerEditableListener(E)}}),[t,u,o]),q.jsx(Q5.Provider,{value:m,children:!v||O?e:null})}function Er(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function aq(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function jne(...t){return e=>{let n=!1;const r=t.map(i=>{const o=aq(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():aq(t[i],null)}}}}function Lo(...t){return j.useCallback(jne(...t),t)}function fze(t,e){const n=j.createContext(e),r=o=>{const{children:a,...s}=o,u=j.useMemo(()=>s,Object.values(s));return q.jsx(n.Provider,{value:u,children:a})};r.displayName=t+"Provider";function i(o){const a=j.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,i]}function by(t,e=[]){let n=[];function r(o,a){const s=j.createContext(a),u=n.length;n=[...n,a];const d=v=>{const{scope:_,children:O,...E}=v,A=_?.[t]?.[u]||s,M=j.useMemo(()=>E,Object.values(E));return q.jsx(A.Provider,{value:M,children:O})};d.displayName=o+"Provider";function m(v,_){const O=_?.[t]?.[u]||s,E=j.useContext(O);if(E)return E;if(a!==void 0)return a;throw new Error(`\`${v}\` must be used within \`${o}\``)}return[d,m]}const i=()=>{const o=n.map(a=>j.createContext(a));return function(s){const u=s?.[t]||o;return j.useMemo(()=>({[`__scope${t}`]:{...s,[t]:u}}),[s,u])}};return i.scopeName=t,[r,pze(i,...e)]}function pze(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:u,scopeName:d})=>{const v=u(o)[`__scope${d}`];return{...s,...v}},{});return j.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function pO(t){const e=mze(t),n=j.forwardRef((r,i)=>{const{children:o,...a}=r,s=j.Children.toArray(o),u=s.find(yze);if(u){const d=u.props.children,m=s.map(v=>v===u?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:v);return q.jsx(e,{...a,ref:i,children:j.isValidElement(d)?j.cloneElement(d,void 0,m):null})}return q.jsx(e,{...a,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}function mze(t){const e=j.forwardRef((n,r)=>{const{children:i,...o}=n;if(j.isValidElement(i)){const a=xze(i),s=vze(o,i.props);return i.type!==j.Fragment&&(s.ref=r?jne(r,a):a),j.cloneElement(i,s)}return j.Children.count(i)>1?j.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Vne=Symbol("radix.slottable");function gze(t){const e=({children:n})=>q.jsx(q.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=Vne,e}function yze(t){return j.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Vne}function vze(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...s)=>{const u=o(...s);return i(...s),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function xze(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var _ze=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xr=_ze.reduce((t,e)=>{const n=pO(`Primitive.${e}`),r=j.forwardRef((i,o)=>{const{asChild:a,...s}=i,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),q.jsx(u,{...s,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function bze(t,e){t&&mm.flushSync(()=>t.dispatchEvent(e))}function J0(t){const e=j.useRef(t);return j.useEffect(()=>{e.current=t}),j.useMemo(()=>(...n)=>e.current?.(...n),[])}function wze(t,e=globalThis?.document){const n=J0(t);j.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Oze="DismissableLayer",Lz="dismissableLayer.update",Sze="dismissableLayer.pointerDownOutside",Cze="dismissableLayer.focusOutside",lq,Qne=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Hk=j.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:s,...u}=t,d=j.useContext(Qne),[m,v]=j.useState(null),_=m?.ownerDocument??globalThis?.document,[,O]=j.useState({}),E=Lo(e,H=>v(H)),A=Array.from(d.layers),[M]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),L=A.indexOf(M),$=m?A.indexOf(m):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,F=$>=L,Q=Eze(H=>{const te=H.target,ne=[...d.branches].some(ce=>ce.contains(te));!F||ne||(i?.(H),a?.(H),H.defaultPrevented||s?.())},_),W=Aze(H=>{const te=H.target;[...d.branches].some(ce=>ce.contains(te))||(o?.(H),a?.(H),H.defaultPrevented||s?.())},_);return wze(H=>{$===d.layers.size-1&&(r?.(H),!H.defaultPrevented&&s&&(H.preventDefault(),s()))},_),j.useEffect(()=>{if(m)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(lq=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(m)),d.layers.add(m),cq(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=lq)}},[m,_,n,d]),j.useEffect(()=>()=>{m&&(d.layers.delete(m),d.layersWithOutsidePointerEventsDisabled.delete(m),cq())},[m,d]),j.useEffect(()=>{const H=()=>O({});return document.addEventListener(Lz,H),()=>document.removeEventListener(Lz,H)},[]),q.jsx(Xr.div,{...u,ref:E,style:{pointerEvents:N?F?"auto":"none":void 0,...t.style},onFocusCapture:Er(t.onFocusCapture,W.onFocusCapture),onBlurCapture:Er(t.onBlurCapture,W.onBlurCapture),onPointerDownCapture:Er(t.onPointerDownCapture,Q.onPointerDownCapture)})});Hk.displayName=Oze;var Tze="DismissableLayerBranch",kze=j.forwardRef((t,e)=>{const n=j.useContext(Qne),r=j.useRef(null),i=Lo(e,r);return j.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),q.jsx(Xr.div,{...t,ref:i})});kze.displayName=Tze;function Eze(t,e=globalThis?.document){const n=J0(t),r=j.useRef(!1),i=j.useRef(()=>{});return j.useEffect(()=>{const o=s=>{if(s.target&&!r.current){let u=function(){Une(Sze,n,d,{discrete:!0})};const d={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Aze(t,e=globalThis?.document){const n=J0(t),r=j.useRef(!1);return j.useEffect(()=>{const i=o=>{o.target&&!r.current&&Une(Cze,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function cq(){const t=new CustomEvent(Lz);document.dispatchEvent(t)}function Une(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?bze(i,o):i.dispatchEvent(o)}var lL=0;function G8(){j.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??uq()),document.body.insertAdjacentElement("beforeend",t[1]??uq()),lL++,()=>{lL===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),lL--}},[])}function uq(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var cL="focusScope.autoFocusOnMount",uL="focusScope.autoFocusOnUnmount",hq={bubbles:!1,cancelable:!0},Pze="FocusScope",$I=j.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...a}=t,[s,u]=j.useState(null),d=J0(i),m=J0(o),v=j.useRef(null),_=Lo(e,A=>u(A)),O=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(r){let A=function(N){if(O.paused||!s)return;const F=N.target;s.contains(F)?v.current=F:E0(v.current,{select:!0})},M=function(N){if(O.paused||!s)return;const F=N.relatedTarget;F!==null&&(s.contains(F)||E0(v.current,{select:!0}))},L=function(N){if(document.activeElement===document.body)for(const Q of N)Q.removedNodes.length>0&&E0(s)};document.addEventListener("focusin",A),document.addEventListener("focusout",M);const $=new MutationObserver(L);return s&&$.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",A),document.removeEventListener("focusout",M),$.disconnect()}}},[r,s,O.paused]),j.useEffect(()=>{if(s){fq.add(O);const A=document.activeElement;if(!s.contains(A)){const L=new CustomEvent(cL,hq);s.addEventListener(cL,d),s.dispatchEvent(L),L.defaultPrevented||(Mze($ze(Zne(s)),{select:!0}),document.activeElement===A&&E0(s))}return()=>{s.removeEventListener(cL,d),setTimeout(()=>{const L=new CustomEvent(uL,hq);s.addEventListener(uL,m),s.dispatchEvent(L),L.defaultPrevented||E0(A??document.body,{select:!0}),s.removeEventListener(uL,m),fq.remove(O)},0)}}},[s,d,m,O]);const E=j.useCallback(A=>{if(!n&&!r||O.paused)return;const M=A.key==="Tab"&&!A.altKey&&!A.ctrlKey&&!A.metaKey,L=document.activeElement;if(M&&L){const $=A.currentTarget,[N,F]=Rze($);N&&F?!A.shiftKey&&L===F?(A.preventDefault(),n&&E0(N,{select:!0})):A.shiftKey&&L===N&&(A.preventDefault(),n&&E0(F,{select:!0})):L===$&&A.preventDefault()}},[n,r,O.paused]);return q.jsx(Xr.div,{tabIndex:-1,...a,ref:_,onKeyDown:E})});$I.displayName=Pze;function Mze(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(E0(r,{select:e}),document.activeElement!==n)return}function Rze(t){const e=Zne(t),n=dq(e,t),r=dq(e.reverse(),t);return[n,r]}function Zne(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function dq(t,e){for(const n of t)if(!Ize(n,{upTo:e}))return n}function Ize(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Dze(t){return t instanceof HTMLInputElement&&"select"in t}function E0(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Dze(t)&&e&&t.select()}}var fq=Lze();function Lze(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=pq(t,e),t.unshift(e)},remove(e){t=pq(t,e),t[0]?.resume()}}}function pq(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function $ze(t){return t.filter(e=>e.tagName!=="A")}var Ul=globalThis?.document?j.useLayoutEffect:()=>{},zze=Vw[" useId ".trim().toString()]||(()=>{}),Nze=0;function Xg(t){const[e,n]=j.useState(zze());return Ul(()=>{n(r=>r??String(Nze++))},[t]),t||(e?`radix-${e}`:"")}const Bze=["top","right","bottom","left"],ev=Math.min,th=Math.max,vM=Math.round,WA=Math.floor,dm=t=>({x:t,y:t}),Fze={left:"right",right:"left",bottom:"top",top:"bottom"},jze={start:"end",end:"start"};function $z(t,e,n){return th(t,ev(e,n))}function ay(t,e){return typeof t=="function"?t(e):t}function ly(t){return t.split("-")[0]}function sS(t){return t.split("-")[1]}function X8(t){return t==="x"?"y":"x"}function Y8(t){return t==="y"?"height":"width"}const Vze=new Set(["top","bottom"]);function rm(t){return Vze.has(ly(t))?"y":"x"}function K8(t){return X8(rm(t))}function Qze(t,e,n){n===void 0&&(n=!1);const r=sS(t),i=K8(t),o=Y8(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=xM(a)),[a,xM(a)]}function Uze(t){const e=xM(t);return[zz(t),e,zz(e)]}function zz(t){return t.replace(/start|end/g,e=>jze[e])}const mq=["left","right"],gq=["right","left"],Zze=["top","bottom"],qze=["bottom","top"];function Wze(t,e,n){switch(t){case"top":case"bottom":return n?e?gq:mq:e?mq:gq;case"left":case"right":return e?Zze:qze;default:return[]}}function Hze(t,e,n,r){const i=sS(t);let o=Wze(ly(t),n==="start",r);return i&&(o=o.map(a=>a+"-"+i),e&&(o=o.concat(o.map(zz)))),o}function xM(t){return t.replace(/left|right|bottom|top/g,e=>Fze[e])}function Gze(t){return{top:0,right:0,bottom:0,left:0,...t}}function qne(t){return typeof t!="number"?Gze(t):{top:t,right:t,bottom:t,left:t}}function _M(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function yq(t,e,n){let{reference:r,floating:i}=t;const o=rm(e),a=K8(e),s=Y8(a),u=ly(e),d=o==="y",m=r.x+r.width/2-i.width/2,v=r.y+r.height/2-i.height/2,_=r[s]/2-i[s]/2;let O;switch(u){case"top":O={x:m,y:r.y-i.height};break;case"bottom":O={x:m,y:r.y+r.height};break;case"right":O={x:r.x+r.width,y:v};break;case"left":O={x:r.x-i.width,y:v};break;default:O={x:r.x,y:r.y}}switch(sS(e)){case"start":O[a]-=_*(n&&d?-1:1);break;case"end":O[a]+=_*(n&&d?-1:1);break}return O}const Xze=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:m,y:v}=yq(d,r,u),_=r,O={},E=0;for(let A=0;A<s.length;A++){const{name:M,fn:L}=s[A],{x:$,y:N,data:F,reset:Q}=await L({x:m,y:v,initialPlacement:r,placement:_,strategy:i,middlewareData:O,rects:d,platform:a,elements:{reference:t,floating:e}});m=$??m,v=N??v,O={...O,[M]:{...O[M],...F}},Q&&E<=50&&(E++,typeof Q=="object"&&(Q.placement&&(_=Q.placement),Q.rects&&(d=Q.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):Q.rects),{x:m,y:v}=yq(d,_,u)),A=-1)}return{x:m,y:v,placement:_,strategy:i,middlewareData:O}};async function MT(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:v="floating",altBoundary:_=!1,padding:O=0}=ay(e,t),E=qne(O),M=s[_?v==="floating"?"reference":"floating":v],L=_M(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(M)))==null||n?M:M.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:d,rootBoundary:m,strategy:u})),$=v==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),F=await(o.isElement==null?void 0:o.isElement(N))?await(o.getScale==null?void 0:o.getScale(N))||{x:1,y:1}:{x:1,y:1},Q=_M(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:$,offsetParent:N,strategy:u}):$);return{top:(L.top-Q.top+E.top)/F.y,bottom:(Q.bottom-L.bottom+E.bottom)/F.y,left:(L.left-Q.left+E.left)/F.x,right:(Q.right-L.right+E.right)/F.x}}const Yze=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:a,elements:s,middlewareData:u}=e,{element:d,padding:m=0}=ay(t,e)||{};if(d==null)return{};const v=qne(m),_={x:n,y:r},O=K8(i),E=Y8(O),A=await a.getDimensions(d),M=O==="y",L=M?"top":"left",$=M?"bottom":"right",N=M?"clientHeight":"clientWidth",F=o.reference[E]+o.reference[O]-_[O]-o.floating[E],Q=_[O]-o.reference[O],W=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let H=W?W[N]:0;(!H||!await(a.isElement==null?void 0:a.isElement(W)))&&(H=s.floating[N]||o.floating[E]);const te=F/2-Q/2,ne=H/2-A[E]/2-1,ce=ev(v[L],ne),we=ev(v[$],ne),re=ce,se=H-A[E]-we,be=H/2-A[E]/2+te,fe=$z(re,be,se),ve=!u.arrow&&sS(i)!=null&&be!==fe&&o.reference[E]/2-(be<re?ce:we)-A[E]/2<0,Me=ve?be<re?be-re:be-se:0;return{[O]:_[O]+Me,data:{[O]:fe,centerOffset:be-fe-Me,...ve&&{alignmentOffset:Me}},reset:ve}}}),Kze=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:u,elements:d}=e,{mainAxis:m=!0,crossAxis:v=!0,fallbackPlacements:_,fallbackStrategy:O="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:A=!0,...M}=ay(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const L=ly(i),$=rm(s),N=ly(s)===s,F=await(u.isRTL==null?void 0:u.isRTL(d.floating)),Q=_||(N||!A?[xM(s)]:Uze(s)),W=E!=="none";!_&&W&&Q.push(...Hze(s,A,E,F));const H=[s,...Q],te=await MT(e,M),ne=[];let ce=((r=o.flip)==null?void 0:r.overflows)||[];if(m&&ne.push(te[L]),v){const be=Qze(i,a,F);ne.push(te[be[0]],te[be[1]])}if(ce=[...ce,{placement:i,overflows:ne}],!ne.every(be=>be<=0)){var we,re;const be=(((we=o.flip)==null?void 0:we.index)||0)+1,fe=H[be];if(fe&&(!(v==="alignment"?$!==rm(fe):!1)||ce.every(Ne=>rm(Ne.placement)===$?Ne.overflows[0]>0:!0)))return{data:{index:be,overflows:ce},reset:{placement:fe}};let ve=(re=ce.filter(Me=>Me.overflows[0]<=0).sort((Me,Ne)=>Me.overflows[1]-Ne.overflows[1])[0])==null?void 0:re.placement;if(!ve)switch(O){case"bestFit":{var se;const Me=(se=ce.filter(Ne=>{if(W){const Qe=rm(Ne.placement);return Qe===$||Qe==="y"}return!0}).map(Ne=>[Ne.placement,Ne.overflows.filter(Qe=>Qe>0).reduce((Qe,Ce)=>Qe+Ce,0)]).sort((Ne,Qe)=>Ne[1]-Qe[1])[0])==null?void 0:se[0];Me&&(ve=Me);break}case"initialPlacement":ve=s;break}if(i!==ve)return{reset:{placement:ve}}}return{}}}};function vq(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function xq(t){return Bze.some(e=>t[e]>=0)}const Jze=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=ay(t,e);switch(r){case"referenceHidden":{const o=await MT(e,{...i,elementContext:"reference"}),a=vq(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:xq(a)}}}case"escaped":{const o=await MT(e,{...i,altBoundary:!0}),a=vq(o,n.floating);return{data:{escapedOffsets:a,escaped:xq(a)}}}default:return{}}}}},Wne=new Set(["left","top"]);async function e6e(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=ly(n),s=sS(n),u=rm(n)==="y",d=Wne.has(a)?-1:1,m=o&&u?-1:1,v=ay(e,t);let{mainAxis:_,crossAxis:O,alignmentAxis:E}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return s&&typeof E=="number"&&(O=s==="end"?E*-1:E),u?{x:O*m,y:_*d}:{x:_*d,y:O*m}}const t6e=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:a,middlewareData:s}=e,u=await e6e(e,t);return a===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:o+u.y,data:{...u,placement:a}}}}},n6e=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:M=>{let{x:L,y:$}=M;return{x:L,y:$}}},...u}=ay(t,e),d={x:n,y:r},m=await MT(e,u),v=rm(ly(i)),_=X8(v);let O=d[_],E=d[v];if(o){const M=_==="y"?"top":"left",L=_==="y"?"bottom":"right",$=O+m[M],N=O-m[L];O=$z($,O,N)}if(a){const M=v==="y"?"top":"left",L=v==="y"?"bottom":"right",$=E+m[M],N=E-m[L];E=$z($,E,N)}const A=s.fn({...e,[_]:O,[v]:E});return{...A,data:{x:A.x-n,y:A.y-r,enabled:{[_]:o,[v]:a}}}}}},r6e=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:a}=e,{offset:s=0,mainAxis:u=!0,crossAxis:d=!0}=ay(t,e),m={x:n,y:r},v=rm(i),_=X8(v);let O=m[_],E=m[v];const A=ay(s,e),M=typeof A=="number"?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(u){const N=_==="y"?"height":"width",F=o.reference[_]-o.floating[N]+M.mainAxis,Q=o.reference[_]+o.reference[N]-M.mainAxis;O<F?O=F:O>Q&&(O=Q)}if(d){var L,$;const N=_==="y"?"width":"height",F=Wne.has(ly(i)),Q=o.reference[v]-o.floating[N]+(F&&((L=a.offset)==null?void 0:L[v])||0)+(F?0:M.crossAxis),W=o.reference[v]+o.reference[N]+(F?0:(($=a.offset)==null?void 0:$[v])||0)-(F?M.crossAxis:0);E<Q?E=Q:E>W&&(E=W)}return{[_]:O,[v]:E}}}},i6e=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:a,elements:s}=e,{apply:u=()=>{},...d}=ay(t,e),m=await MT(e,d),v=ly(i),_=sS(i),O=rm(i)==="y",{width:E,height:A}=o.floating;let M,L;v==="top"||v==="bottom"?(M=v,L=_===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(L=v,M=_==="end"?"top":"bottom");const $=A-m.top-m.bottom,N=E-m.left-m.right,F=ev(A-m[M],$),Q=ev(E-m[L],N),W=!e.middlewareData.shift;let H=F,te=Q;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(te=N),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(H=$),W&&!_){const ce=th(m.left,0),we=th(m.right,0),re=th(m.top,0),se=th(m.bottom,0);O?te=E-2*(ce!==0||we!==0?ce+we:th(m.left,m.right)):H=A-2*(re!==0||se!==0?re+se:th(m.top,m.bottom))}await u({...e,availableWidth:te,availableHeight:H});const ne=await a.getDimensions(s.floating);return E!==ne.width||A!==ne.height?{reset:{rects:!0}}:{}}}};function zI(){return typeof window<"u"}function aS(t){return Hne(t)?(t.nodeName||"").toLowerCase():"#document"}function hh(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function km(t){var e;return(e=(Hne(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Hne(t){return zI()?t instanceof Node||t instanceof hh(t).Node:!1}function $f(t){return zI()?t instanceof Element||t instanceof hh(t).Element:!1}function bm(t){return zI()?t instanceof HTMLElement||t instanceof hh(t).HTMLElement:!1}function _q(t){return!zI()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof hh(t).ShadowRoot}const o6e=new Set(["inline","contents"]);function Gk(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=zf(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!o6e.has(i)}const s6e=new Set(["table","td","th"]);function a6e(t){return s6e.has(aS(t))}const l6e=[":popover-open",":modal"];function NI(t){return l6e.some(e=>{try{return t.matches(e)}catch{return!1}})}const c6e=["transform","translate","scale","rotate","perspective"],u6e=["transform","translate","scale","rotate","perspective","filter"],h6e=["paint","layout","strict","content"];function J8(t){const e=e9(),n=$f(t)?zf(t):t;return c6e.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||u6e.some(r=>(n.willChange||"").includes(r))||h6e.some(r=>(n.contain||"").includes(r))}function d6e(t){let e=tv(t);for(;bm(e)&&!mO(e);){if(J8(e))return e;if(NI(e))return null;e=tv(e)}return null}function e9(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const f6e=new Set(["html","body","#document"]);function mO(t){return f6e.has(aS(t))}function zf(t){return hh(t).getComputedStyle(t)}function BI(t){return $f(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function tv(t){if(aS(t)==="html")return t;const e=t.assignedSlot||t.parentNode||_q(t)&&t.host||km(t);return _q(e)?e.host:e}function Gne(t){const e=tv(t);return mO(e)?t.ownerDocument?t.ownerDocument.body:t.body:bm(e)&&Gk(e)?e:Gne(e)}function RT(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=Gne(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),a=hh(i);if(o){const s=Nz(a);return e.concat(a,a.visualViewport||[],Gk(i)?i:[],s&&n?RT(s):[])}return e.concat(i,RT(i,[],n))}function Nz(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Xne(t){const e=zf(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=bm(t),o=i?t.offsetWidth:n,a=i?t.offsetHeight:r,s=vM(n)!==o||vM(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function t9(t){return $f(t)?t:t.contextElement}function Pw(t){const e=t9(t);if(!bm(e))return dm(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=Xne(e);let a=(o?vM(n.width):n.width)/r,s=(o?vM(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const p6e=dm(0);function Yne(t){const e=hh(t);return!e9()||!e.visualViewport?p6e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function m6e(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==hh(t)?!1:e}function B_(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=t9(t);let a=dm(1);e&&(r?$f(r)&&(a=Pw(r)):a=Pw(t));const s=m6e(o,n,r)?Yne(o):dm(0);let u=(i.left+s.x)/a.x,d=(i.top+s.y)/a.y,m=i.width/a.x,v=i.height/a.y;if(o){const _=hh(o),O=r&&$f(r)?hh(r):r;let E=_,A=Nz(E);for(;A&&r&&O!==E;){const M=Pw(A),L=A.getBoundingClientRect(),$=zf(A),N=L.left+(A.clientLeft+parseFloat($.paddingLeft))*M.x,F=L.top+(A.clientTop+parseFloat($.paddingTop))*M.y;u*=M.x,d*=M.y,m*=M.x,v*=M.y,u+=N,d+=F,E=hh(A),A=Nz(E)}}return _M({width:m,height:v,x:u,y:d})}function FI(t,e){const n=BI(t).scrollLeft;return e?e.left+n:B_(km(t)).left+n}function Kne(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-FI(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function g6e(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",a=km(r),s=e?NI(e.floating):!1;if(r===a||s&&o)return n;let u={scrollLeft:0,scrollTop:0},d=dm(1);const m=dm(0),v=bm(r);if((v||!v&&!o)&&((aS(r)!=="body"||Gk(a))&&(u=BI(r)),bm(r))){const O=B_(r);d=Pw(r),m.x=O.x+r.clientLeft,m.y=O.y+r.clientTop}const _=a&&!v&&!o?Kne(a,u):dm(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+m.x+_.x,y:n.y*d.y-u.scrollTop*d.y+m.y+_.y}}function y6e(t){return Array.from(t.getClientRects())}function v6e(t){const e=km(t),n=BI(t),r=t.ownerDocument.body,i=th(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=th(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+FI(t);const s=-n.scrollTop;return zf(r).direction==="rtl"&&(a+=th(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}const bq=25;function x6e(t,e){const n=hh(t),r=km(t),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,u=0;if(i){o=i.width,a=i.height;const m=e9();(!m||m&&e==="fixed")&&(s=i.offsetLeft,u=i.offsetTop)}const d=FI(r);if(d<=0){const m=r.ownerDocument,v=m.body,_=getComputedStyle(v),O=m.compatMode==="CSS1Compat"&&parseFloat(_.marginLeft)+parseFloat(_.marginRight)||0,E=Math.abs(r.clientWidth-v.clientWidth-O);E<=bq&&(o-=E)}else d<=bq&&(o+=d);return{width:o,height:a,x:s,y:u}}const _6e=new Set(["absolute","fixed"]);function b6e(t,e){const n=B_(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=bm(t)?Pw(t):dm(1),a=t.clientWidth*o.x,s=t.clientHeight*o.y,u=i*o.x,d=r*o.y;return{width:a,height:s,x:u,y:d}}function wq(t,e,n){let r;if(e==="viewport")r=x6e(t,n);else if(e==="document")r=v6e(km(t));else if($f(e))r=b6e(e,n);else{const i=Yne(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return _M(r)}function Jne(t,e){const n=tv(t);return n===e||!$f(n)||mO(n)?!1:zf(n).position==="fixed"||Jne(n,e)}function w6e(t,e){const n=e.get(t);if(n)return n;let r=RT(t,[],!1).filter(s=>$f(s)&&aS(s)!=="body"),i=null;const o=zf(t).position==="fixed";let a=o?tv(t):t;for(;$f(a)&&!mO(a);){const s=zf(a),u=J8(a);!u&&s.position==="fixed"&&(i=null),(o?!u&&!i:!u&&s.position==="static"&&!!i&&_6e.has(i.position)||Gk(a)&&!u&&Jne(t,a))?r=r.filter(m=>m!==a):i=s,a=tv(a)}return e.set(t,r),r}function O6e(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?NI(e)?[]:w6e(e,this._c):[].concat(n),r],s=a[0],u=a.reduce((d,m)=>{const v=wq(e,m,i);return d.top=th(v.top,d.top),d.right=ev(v.right,d.right),d.bottom=ev(v.bottom,d.bottom),d.left=th(v.left,d.left),d},wq(e,s,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function S6e(t){const{width:e,height:n}=Xne(t);return{width:e,height:n}}function C6e(t,e,n){const r=bm(e),i=km(e),o=n==="fixed",a=B_(t,!0,o,e);let s={scrollLeft:0,scrollTop:0};const u=dm(0);function d(){u.x=FI(i)}if(r||!r&&!o)if((aS(e)!=="body"||Gk(i))&&(s=BI(e)),r){const O=B_(e,!0,o,e);u.x=O.x+e.clientLeft,u.y=O.y+e.clientTop}else i&&d();o&&!r&&i&&d();const m=i&&!r&&!o?Kne(i,s):dm(0),v=a.left+s.scrollLeft-u.x-m.x,_=a.top+s.scrollTop-u.y-m.y;return{x:v,y:_,width:a.width,height:a.height}}function hL(t){return zf(t).position==="static"}function Oq(t,e){if(!bm(t)||zf(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return km(t)===n&&(n=n.ownerDocument.body),n}function ere(t,e){const n=hh(t);if(NI(t))return n;if(!bm(t)){let i=tv(t);for(;i&&!mO(i);){if($f(i)&&!hL(i))return i;i=tv(i)}return n}let r=Oq(t,e);for(;r&&a6e(r)&&hL(r);)r=Oq(r,e);return r&&mO(r)&&hL(r)&&!J8(r)?n:r||d6e(t)||n}const T6e=async function(t){const e=this.getOffsetParent||ere,n=this.getDimensions,r=await n(t.floating);return{reference:C6e(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function k6e(t){return zf(t).direction==="rtl"}const E6e={convertOffsetParentRelativeRectToViewportRelativeRect:g6e,getDocumentElement:km,getClippingRect:O6e,getOffsetParent:ere,getElementRects:T6e,getClientRects:y6e,getDimensions:S6e,getScale:Pw,isElement:$f,isRTL:k6e};function tre(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function A6e(t,e){let n=null,r;const i=km(t);function o(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function a(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),o();const d=t.getBoundingClientRect(),{left:m,top:v,width:_,height:O}=d;if(s||e(),!_||!O)return;const E=WA(v),A=WA(i.clientWidth-(m+_)),M=WA(i.clientHeight-(v+O)),L=WA(m),N={rootMargin:-E+"px "+-A+"px "+-M+"px "+-L+"px",threshold:th(0,ev(1,u))||1};let F=!0;function Q(W){const H=W[0].intersectionRatio;if(H!==u){if(!F)return a();H?a(!1,H):r=setTimeout(()=>{a(!1,1e-7)},1e3)}H===1&&!tre(d,t.getBoundingClientRect())&&a(),F=!1}try{n=new IntersectionObserver(Q,{...N,root:i.ownerDocument})}catch{n=new IntersectionObserver(Q,N)}n.observe(t)}return a(!0),o}function P6e(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=t9(t),m=i||o?[...d?RT(d):[],...RT(e)]:[];m.forEach(L=>{i&&L.addEventListener("scroll",n,{passive:!0}),o&&L.addEventListener("resize",n)});const v=d&&s?A6e(d,n):null;let _=-1,O=null;a&&(O=new ResizeObserver(L=>{let[$]=L;$&&$.target===d&&O&&(O.unobserve(e),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var N;(N=O)==null||N.observe(e)})),n()}),d&&!u&&O.observe(d),O.observe(e));let E,A=u?B_(t):null;u&&M();function M(){const L=B_(t);A&&!tre(A,L)&&n(),A=L,E=requestAnimationFrame(M)}return n(),()=>{var L;m.forEach($=>{i&&$.removeEventListener("scroll",n),o&&$.removeEventListener("resize",n)}),v?.(),(L=O)==null||L.disconnect(),O=null,u&&cancelAnimationFrame(E)}}const M6e=t6e,R6e=n6e,I6e=Kze,D6e=i6e,L6e=Jze,Sq=Yze,$6e=r6e,z6e=(t,e,n)=>{const r=new Map,i={platform:E6e,...n},o={...i.platform,_c:r};return Xze(t,e,{...i,platform:o})};var N6e=typeof document<"u",B6e=function(){},a5=N6e?j.useLayoutEffect:B6e;function bM(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!bM(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!bM(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function nre(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Cq(t,e){const n=nre(t);return Math.round(e*n)/n}function dL(t){const e=j.useRef(t);return a5(()=>{e.current=t}),e}function F6e(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:u,open:d}=t,[m,v]=j.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[_,O]=j.useState(r);bM(_,r)||O(r);const[E,A]=j.useState(null),[M,L]=j.useState(null),$=j.useCallback(Ne=>{Ne!==W.current&&(W.current=Ne,A(Ne))},[]),N=j.useCallback(Ne=>{Ne!==H.current&&(H.current=Ne,L(Ne))},[]),F=o||E,Q=a||M,W=j.useRef(null),H=j.useRef(null),te=j.useRef(m),ne=u!=null,ce=dL(u),we=dL(i),re=dL(d),se=j.useCallback(()=>{if(!W.current||!H.current)return;const Ne={placement:e,strategy:n,middleware:_};we.current&&(Ne.platform=we.current),z6e(W.current,H.current,Ne).then(Qe=>{const Ce={...Qe,isPositioned:re.current!==!1};be.current&&!bM(te.current,Ce)&&(te.current=Ce,mm.flushSync(()=>{v(Ce)}))})},[_,e,n,we,re]);a5(()=>{d===!1&&te.current.isPositioned&&(te.current.isPositioned=!1,v(Ne=>({...Ne,isPositioned:!1})))},[d]);const be=j.useRef(!1);a5(()=>(be.current=!0,()=>{be.current=!1}),[]),a5(()=>{if(F&&(W.current=F),Q&&(H.current=Q),F&&Q){if(ce.current)return ce.current(F,Q,se);se()}},[F,Q,se,ce,ne]);const fe=j.useMemo(()=>({reference:W,floating:H,setReference:$,setFloating:N}),[$,N]),ve=j.useMemo(()=>({reference:F,floating:Q}),[F,Q]),Me=j.useMemo(()=>{const Ne={position:n,left:0,top:0};if(!ve.floating)return Ne;const Qe=Cq(ve.floating,m.x),Ce=Cq(ve.floating,m.y);return s?{...Ne,transform:"translate("+Qe+"px, "+Ce+"px)",...nre(ve.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Qe,top:Ce}},[n,s,ve.floating,m.x,m.y]);return j.useMemo(()=>({...m,update:se,refs:fe,elements:ve,floatingStyles:Me}),[m,se,fe,ve,Me])}const j6e=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Sq({element:r.current,padding:i}).fn(n):{}:r?Sq({element:r,padding:i}).fn(n):{}}}},V6e=(t,e)=>({...M6e(t),options:[t,e]}),Q6e=(t,e)=>({...R6e(t),options:[t,e]}),U6e=(t,e)=>({...$6e(t),options:[t,e]}),Z6e=(t,e)=>({...I6e(t),options:[t,e]}),q6e=(t,e)=>({...D6e(t),options:[t,e]}),W6e=(t,e)=>({...L6e(t),options:[t,e]}),H6e=(t,e)=>({...j6e(t),options:[t,e]});var G6e="Arrow",rre=j.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return q.jsx(Xr.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:q.jsx("polygon",{points:"0,0 30,0 15,10"})})});rre.displayName=G6e;var X6e=rre;function Y6e(t){const[e,n]=j.useState(void 0);return Ul(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let a,s;if("borderBoxSize"in o){const u=o.borderBoxSize,d=Array.isArray(u)?u[0]:u;a=d.inlineSize,s=d.blockSize}else a=t.offsetWidth,s=t.offsetHeight;n({width:a,height:s})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var n9="Popper",[ire,lS]=by(n9),[K6e,ore]=ire(n9),sre=t=>{const{__scopePopper:e,children:n}=t,[r,i]=j.useState(null);return q.jsx(K6e,{scope:e,anchor:r,onAnchorChange:i,children:n})};sre.displayName=n9;var are="PopperAnchor",lre=j.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=ore(are,n),a=j.useRef(null),s=Lo(e,a),u=j.useRef(null);return j.useEffect(()=>{const d=u.current;u.current=r?.current||a.current,d!==u.current&&o.onAnchorChange(u.current)}),r?null:q.jsx(Xr.div,{...i,ref:s})});lre.displayName=are;var r9="PopperContent",[J6e,eNe]=ire(r9),cre=j.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:m=0,sticky:v="partial",hideWhenDetached:_=!1,updatePositionStrategy:O="optimized",onPlaced:E,...A}=t,M=ore(r9,n),[L,$]=j.useState(null),N=Lo(e,ot=>$(ot)),[F,Q]=j.useState(null),W=Y6e(F),H=W?.width??0,te=W?.height??0,ne=r+(o!=="center"?"-"+o:""),ce=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},we=Array.isArray(d)?d:[d],re=we.length>0,se={padding:ce,boundary:we.filter(nNe),altBoundary:re},{refs:be,floatingStyles:fe,placement:ve,isPositioned:Me,middlewareData:Ne}=F6e({strategy:"fixed",placement:ne,whileElementsMounted:(...ot)=>P6e(...ot,{animationFrame:O==="always"}),elements:{reference:M.anchor},middleware:[V6e({mainAxis:i+te,alignmentAxis:a}),u&&Q6e({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?U6e():void 0,...se}),u&&Z6e({...se}),q6e({...se,apply:({elements:ot,rects:yt,availableWidth:Et,availableHeight:Tt})=>{const{width:Ht,height:wt}=yt.reference,un=ot.floating.style;un.setProperty("--radix-popper-available-width",`${Et}px`),un.setProperty("--radix-popper-available-height",`${Tt}px`),un.setProperty("--radix-popper-anchor-width",`${Ht}px`),un.setProperty("--radix-popper-anchor-height",`${wt}px`)}}),F&&H6e({element:F,padding:s}),rNe({arrowWidth:H,arrowHeight:te}),_&&W6e({strategy:"referenceHidden",...se})]}),[Qe,Ce]=dre(ve),Ae=J0(E);Ul(()=>{Me&&Ae?.()},[Me,Ae]);const Xe=Ne.arrow?.x,ke=Ne.arrow?.y,ft=Ne.arrow?.centerOffset!==0,[pt,lt]=j.useState();return Ul(()=>{L&&lt(window.getComputedStyle(L).zIndex)},[L]),q.jsx("div",{ref:be.setFloating,"data-radix-popper-content-wrapper":"",style:{...fe,transform:Me?fe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pt,"--radix-popper-transform-origin":[Ne.transformOrigin?.x,Ne.transformOrigin?.y].join(" "),...Ne.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:q.jsx(J6e,{scope:n,placedSide:Qe,onArrowChange:Q,arrowX:Xe,arrowY:ke,shouldHideArrow:ft,children:q.jsx(Xr.div,{"data-side":Qe,"data-align":Ce,...A,ref:N,style:{...A.style,animation:Me?void 0:"none"}})})})});cre.displayName=r9;var ure="PopperArrow",tNe={top:"bottom",right:"left",bottom:"top",left:"right"},hre=j.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=eNe(ure,r),a=tNe[o.placedSide];return q.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:q.jsx(X6e,{...i,ref:n,style:{...i.style,display:"block"}})})});hre.displayName=ure;function nNe(t){return t!==null}var rNe=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:i}=e,a=i.arrow?.centerOffset!==0,s=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[d,m]=dre(n),v={start:"0%",center:"50%",end:"100%"}[m],_=(i.arrow?.x??0)+s/2,O=(i.arrow?.y??0)+u/2;let E="",A="";return d==="bottom"?(E=a?v:`${_}px`,A=`${-u}px`):d==="top"?(E=a?v:`${_}px`,A=`${r.floating.height+u}px`):d==="right"?(E=`${-u}px`,A=a?v:`${O}px`):d==="left"&&(E=`${r.floating.width+u}px`,A=a?v:`${O}px`),{data:{x:E,y:A}}}});function dre(t){const[e,n="center"]=t.split("-");return[e,n]}var i9=sre,jI=lre,o9=cre,s9=hre,iNe="Portal",Xk=j.forwardRef((t,e)=>{const{container:n,...r}=t,[i,o]=j.useState(!1);Ul(()=>o(!0),[]);const a=n||i&&globalThis?.document?.body;return a?sC.createPortal(q.jsx(Xr.div,{...r,ref:e}),a):null});Xk.displayName=iNe;function oNe(t,e){return j.useReducer((n,r)=>e[n][r]??n,t)}var mv=t=>{const{present:e,children:n}=t,r=sNe(e),i=typeof n=="function"?n({present:r.isPresent}):j.Children.only(n),o=Lo(r.ref,aNe(i));return typeof n=="function"||r.isPresent?j.cloneElement(i,{ref:o}):null};mv.displayName="Presence";function sNe(t){const[e,n]=j.useState(),r=j.useRef(null),i=j.useRef(t),o=j.useRef("none"),a=t?"mounted":"unmounted",[s,u]=oNe(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const d=HA(r.current);o.current=s==="mounted"?d:"none"},[s]),Ul(()=>{const d=r.current,m=i.current;if(m!==t){const _=o.current,O=HA(d);t?u("MOUNT"):O==="none"||d?.display==="none"?u("UNMOUNT"):u(m&&_!==O?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),Ul(()=>{if(e){let d;const m=e.ownerDocument.defaultView??window,v=O=>{const A=HA(r.current).includes(CSS.escape(O.animationName));if(O.target===e&&A&&(u("ANIMATION_END"),!i.current)){const M=e.style.animationFillMode;e.style.animationFillMode="forwards",d=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=M)})}},_=O=>{O.target===e&&(o.current=HA(r.current))};return e.addEventListener("animationstart",_),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{m.clearTimeout(d),e.removeEventListener("animationstart",_),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:j.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function HA(t){return t?.animationName||"none"}function aNe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var lNe=Vw[" useInsertionEffect ".trim().toString()]||Ul;function cy({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,o,a]=cNe({defaultProp:e,onChange:n}),s=t!==void 0,u=s?t:i;{const m=j.useRef(t!==void 0);j.useEffect(()=>{const v=m.current;v!==s&&console.warn(`${r} is changing from ${v?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=s},[s,r])}const d=j.useCallback(m=>{if(s){const v=uNe(m)?m(t):m;v!==t&&a.current?.(v)}else o(m)},[s,t,o,a]);return[u,d]}function cNe({defaultProp:t,onChange:e}){const[n,r]=j.useState(t),i=j.useRef(n),o=j.useRef(e);return lNe(()=>{o.current=e},[e]),j.useEffect(()=>{i.current!==n&&(o.current?.(n),i.current=n)},[n,i]),[n,r,o]}function uNe(t){return typeof t=="function"}var hNe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},j1=new WeakMap,GA=new WeakMap,XA={},fL=0,fre=function(t){return t&&(t.host||fre(t.parentNode))},dNe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=fre(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},fNe=function(t,e,n,r){var i=dNe(e,Array.isArray(t)?t:[t]);XA[n]||(XA[n]=new WeakMap);var o=XA[n],a=[],s=new Set,u=new Set(i),d=function(v){!v||s.has(v)||(s.add(v),d(v.parentNode))};i.forEach(d);var m=function(v){!v||u.has(v)||Array.prototype.forEach.call(v.children,function(_){if(s.has(_))m(_);else try{var O=_.getAttribute(r),E=O!==null&&O!=="false",A=(j1.get(_)||0)+1,M=(o.get(_)||0)+1;j1.set(_,A),o.set(_,M),a.push(_),A===1&&E&&GA.set(_,!0),M===1&&_.setAttribute(n,"true"),E||_.setAttribute(r,"true")}catch(L){console.error("aria-hidden: cannot operate on ",_,L)}})};return m(e),s.clear(),fL++,function(){a.forEach(function(v){var _=j1.get(v)-1,O=o.get(v)-1;j1.set(v,_),o.set(v,O),_||(GA.has(v)||v.removeAttribute(r),GA.delete(v)),O||v.removeAttribute(n)}),fL--,fL||(j1=new WeakMap,j1=new WeakMap,GA=new WeakMap,XA={})}},a9=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=hNe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),fNe(r,i,n,"aria-hidden")):function(){return null}},l5="right-scroll-bar-position",c5="width-before-scroll-bar",pNe="with-scroll-bars-hidden",mNe="--removed-body-scroll-bar-size";function pL(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function gNe(t,e){var n=j.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var yNe=typeof window<"u"?j.useLayoutEffect:j.useEffect,Tq=new WeakMap;function vNe(t,e){var n=gNe(null,function(r){return t.forEach(function(i){return pL(i,r)})});return yNe(function(){var r=Tq.get(n);if(r){var i=new Set(r),o=new Set(t),a=n.current;i.forEach(function(s){o.has(s)||pL(s,null)}),o.forEach(function(s){i.has(s)||pL(s,a)})}Tq.set(n,t)},[t]),n}function xNe(t){return t}function _Ne(t,e){e===void 0&&(e=xNe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var a=e(o,r);return n.push(a),function(){n=n.filter(function(s){return s!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(s){return o(s)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var s=n;n=[],s.forEach(o),a=n}var u=function(){var m=a;a=[],m.forEach(o)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(m){a.push(m),d()},filter:function(m){return a=a.filter(m),n}}}};return i}function bNe(t){t===void 0&&(t={});var e=_Ne(null);return e.options=Jh({async:!0,ssr:!1},t),e}var pre=function(t){var e=t.sideCar,n=ZO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return j.createElement(r,Jh({},n))};pre.isSideCarExport=!0;function wNe(t,e){return t.useMedium(e),pre}var mre=bNe(),mL=function(){},VI=j.forwardRef(function(t,e){var n=j.useRef(null),r=j.useState({onScrollCapture:mL,onWheelCapture:mL,onTouchMoveCapture:mL}),i=r[0],o=r[1],a=t.forwardProps,s=t.children,u=t.className,d=t.removeScrollBar,m=t.enabled,v=t.shards,_=t.sideCar,O=t.noRelative,E=t.noIsolation,A=t.inert,M=t.allowPinchZoom,L=t.as,$=L===void 0?"div":L,N=t.gapMode,F=ZO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Q=_,W=vNe([n,e]),H=Jh(Jh({},F),i);return j.createElement(j.Fragment,null,m&&j.createElement(Q,{sideCar:mre,removeScrollBar:d,shards:v,noRelative:O,noIsolation:E,inert:A,setCallbacks:o,allowPinchZoom:!!M,lockRef:n,gapMode:N}),a?j.cloneElement(j.Children.only(s),Jh(Jh({},H),{ref:W})):j.createElement($,Jh({},H,{className:u,ref:W}),s))});VI.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};VI.classNames={fullWidth:c5,zeroRight:l5};var ONe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function SNe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ONe();return e&&t.setAttribute("nonce",e),t}function CNe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function TNe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var kNe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=SNe())&&(CNe(e,n),TNe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},ENe=function(){var t=kNe();return function(e,n){j.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},gre=function(){var t=ENe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},ANe={left:0,top:0,right:0,gap:0},gL=function(t){return parseInt(t||"",10)||0},PNe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[gL(n),gL(r),gL(i)]},MNe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return ANe;var e=PNe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},RNe=gre(),Mw="data-scroll-locked",INe=function(t,e,n,r){var i=t.left,o=t.top,a=t.right,s=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(pNe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(Mw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(l5,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(c5,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(l5," .").concat(l5,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(c5," .").concat(c5,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Mw,`] {
    `).concat(mNe,": ").concat(s,`px;
  }
`)},kq=function(){var t=parseInt(document.body.getAttribute(Mw)||"0",10);return isFinite(t)?t:0},DNe=function(){j.useEffect(function(){return document.body.setAttribute(Mw,(kq()+1).toString()),function(){var t=kq()-1;t<=0?document.body.removeAttribute(Mw):document.body.setAttribute(Mw,t.toString())}},[])},LNe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;DNe();var o=j.useMemo(function(){return MNe(i)},[i]);return j.createElement(RNe,{styles:INe(o,!e,i,n?"":"!important")})},Bz=!1;if(typeof window<"u")try{var YA=Object.defineProperty({},"passive",{get:function(){return Bz=!0,!0}});window.addEventListener("test",YA,YA),window.removeEventListener("test",YA,YA)}catch{Bz=!1}var V1=Bz?{passive:!1}:!1,$Ne=function(t){return t.tagName==="TEXTAREA"},yre=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!$Ne(t)&&n[e]==="visible")},zNe=function(t){return yre(t,"overflowY")},NNe=function(t){return yre(t,"overflowX")},Eq=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=vre(t,r);if(i){var o=xre(t,r),a=o[1],s=o[2];if(a>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},BNe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},FNe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},vre=function(t,e){return t==="v"?zNe(e):NNe(e)},xre=function(t,e){return t==="v"?BNe(e):FNe(e)},jNe=function(t,e){return t==="h"&&e==="rtl"?-1:1},VNe=function(t,e,n,r,i){var o=jNe(t,window.getComputedStyle(e).direction),a=o*r,s=n.target,u=e.contains(s),d=!1,m=a>0,v=0,_=0;do{if(!s)break;var O=xre(t,s),E=O[0],A=O[1],M=O[2],L=A-M-o*E;(E||L)&&vre(t,s)&&(v+=L,_+=E);var $=s.parentNode;s=$&&$.nodeType===Node.DOCUMENT_FRAGMENT_NODE?$.host:$}while(!u&&s!==document.body||u&&(e.contains(s)||e===s));return(m&&Math.abs(v)<1||!m&&Math.abs(_)<1)&&(d=!0),d},KA=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Aq=function(t){return[t.deltaX,t.deltaY]},Pq=function(t){return t&&"current"in t?t.current:t},QNe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},UNe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},ZNe=0,Q1=[];function qNe(t){var e=j.useRef([]),n=j.useRef([0,0]),r=j.useRef(),i=j.useState(ZNe++)[0],o=j.useState(gre)[0],a=j.useRef(t);j.useEffect(function(){a.current=t},[t]),j.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var A=YOe([t.lockRef.current],(t.shards||[]).map(Pq),!0).filter(Boolean);return A.forEach(function(M){return M.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),A.forEach(function(M){return M.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var s=j.useCallback(function(A,M){if("touches"in A&&A.touches.length===2||A.type==="wheel"&&A.ctrlKey)return!a.current.allowPinchZoom;var L=KA(A),$=n.current,N="deltaX"in A?A.deltaX:$[0]-L[0],F="deltaY"in A?A.deltaY:$[1]-L[1],Q,W=A.target,H=Math.abs(N)>Math.abs(F)?"h":"v";if("touches"in A&&H==="h"&&W.type==="range")return!1;var te=window.getSelection(),ne=te&&te.anchorNode,ce=ne?ne===W||ne.contains(W):!1;if(ce)return!1;var we=Eq(H,W);if(!we)return!0;if(we?Q=H:(Q=H==="v"?"h":"v",we=Eq(H,W)),!we)return!1;if(!r.current&&"changedTouches"in A&&(N||F)&&(r.current=Q),!Q)return!0;var re=r.current||Q;return VNe(re,M,A,re==="h"?N:F)},[]),u=j.useCallback(function(A){var M=A;if(!(!Q1.length||Q1[Q1.length-1]!==o)){var L="deltaY"in M?Aq(M):KA(M),$=e.current.filter(function(Q){return Q.name===M.type&&(Q.target===M.target||M.target===Q.shadowParent)&&QNe(Q.delta,L)})[0];if($&&$.should){M.cancelable&&M.preventDefault();return}if(!$){var N=(a.current.shards||[]).map(Pq).filter(Boolean).filter(function(Q){return Q.contains(M.target)}),F=N.length>0?s(M,N[0]):!a.current.noIsolation;F&&M.cancelable&&M.preventDefault()}}},[]),d=j.useCallback(function(A,M,L,$){var N={name:A,delta:M,target:L,should:$,shadowParent:WNe(L)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(F){return F!==N})},1)},[]),m=j.useCallback(function(A){n.current=KA(A),r.current=void 0},[]),v=j.useCallback(function(A){d(A.type,Aq(A),A.target,s(A,t.lockRef.current))},[]),_=j.useCallback(function(A){d(A.type,KA(A),A.target,s(A,t.lockRef.current))},[]);j.useEffect(function(){return Q1.push(o),t.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:_}),document.addEventListener("wheel",u,V1),document.addEventListener("touchmove",u,V1),document.addEventListener("touchstart",m,V1),function(){Q1=Q1.filter(function(A){return A!==o}),document.removeEventListener("wheel",u,V1),document.removeEventListener("touchmove",u,V1),document.removeEventListener("touchstart",m,V1)}},[]);var O=t.removeScrollBar,E=t.inert;return j.createElement(j.Fragment,null,E?j.createElement(o,{styles:UNe(i)}):null,O?j.createElement(LNe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function WNe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const HNe=wNe(mre,qNe);var QI=j.forwardRef(function(t,e){return j.createElement(VI,Jh({},t,{ref:e,sideCar:HNe}))});QI.classNames=VI.classNames;var UI="Popover",[_re]=by(UI,[lS]),Yk=lS(),[GNe,gv]=_re(UI),bre=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:a=!1}=t,s=Yk(e),u=j.useRef(null),[d,m]=j.useState(!1),[v,_]=cy({prop:r,defaultProp:i??!1,onChange:o,caller:UI});return q.jsx(i9,{...s,children:q.jsx(GNe,{scope:e,contentId:Xg(),triggerRef:u,open:v,onOpenChange:_,onOpenToggle:j.useCallback(()=>_(O=>!O),[_]),hasCustomAnchor:d,onCustomAnchorAdd:j.useCallback(()=>m(!0),[]),onCustomAnchorRemove:j.useCallback(()=>m(!1),[]),modal:a,children:n})})};bre.displayName=UI;var wre="PopoverAnchor",Ore=j.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=gv(wre,n),o=Yk(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:s}=i;return j.useEffect(()=>(a(),()=>s()),[a,s]),q.jsx(jI,{...o,...r,ref:e})});Ore.displayName=wre;var Sre="PopoverTrigger",l9=j.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=gv(Sre,n),o=Yk(n),a=Lo(e,i.triggerRef),s=q.jsx(Xr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Are(i.open),...r,ref:a,onClick:Er(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?s:q.jsx(jI,{asChild:!0,...o,children:s})});l9.displayName=Sre;var c9="PopoverPortal",[XNe,YNe]=_re(c9,{forceMount:void 0}),Cre=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,o=gv(c9,e);return q.jsx(XNe,{scope:e,forceMount:n,children:q.jsx(mv,{present:n||o.open,children:q.jsx(Xk,{asChild:!0,container:i,children:r})})})};Cre.displayName=c9;var gO="PopoverContent",ZI=j.forwardRef((t,e)=>{const n=YNe(gO,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,o=gv(gO,t.__scopePopover);return q.jsx(mv,{present:r||o.open,children:o.modal?q.jsx(JNe,{...i,ref:e}):q.jsx(eBe,{...i,ref:e})})});ZI.displayName=gO;var KNe=pO("PopoverContent.RemoveScroll"),JNe=j.forwardRef((t,e)=>{const n=gv(gO,t.__scopePopover),r=j.useRef(null),i=Lo(e,r),o=j.useRef(!1);return j.useEffect(()=>{const a=r.current;if(a)return a9(a)},[]),q.jsx(QI,{as:KNe,allowPinchZoom:!0,children:q.jsx(Tre,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Er(t.onCloseAutoFocus,a=>{a.preventDefault(),o.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Er(t.onPointerDownOutside,a=>{const s=a.detail.originalEvent,u=s.button===0&&s.ctrlKey===!0,d=s.button===2||u;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Er(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),eBe=j.forwardRef((t,e)=>{const n=gv(gO,t.__scopePopover),r=j.useRef(!1),i=j.useRef(!1);return q.jsx(Tre,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=o.target;n.triggerRef.current?.contains(a)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),Tre=j.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:m,...v}=t,_=gv(gO,n),O=Yk(n);return G8(),q.jsx($I,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:q.jsx(Hk,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:m,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>_.onOpenChange(!1),children:q.jsx(o9,{"data-state":Are(_.open),role:"dialog",id:_.contentId,...O,...v,ref:e,style:{...v.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),kre="PopoverClose",tBe=j.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=gv(kre,n);return q.jsx(Xr.button,{type:"button",...r,ref:e,onClick:Er(t.onClick,()=>i.onOpenChange(!1))})});tBe.displayName=kre;var nBe="PopoverArrow",Ere=j.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Yk(n);return q.jsx(s9,{...i,...r,ref:e})});Ere.displayName=nBe;function Are(t){return t?"open":"closed"}var u9=bre,rBe=Ore,h9=Cre,iBe=ZI,d9=Ere;function Pre(t){const e=t+"CollectionProvider",[n,r]=by(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=A=>{const{scope:M,children:L}=A,$=le.useRef(null),N=le.useRef(new Map).current;return q.jsx(i,{scope:M,itemMap:N,collectionRef:$,children:L})};a.displayName=e;const s=t+"CollectionSlot",u=pO(s),d=le.forwardRef((A,M)=>{const{scope:L,children:$}=A,N=o(s,L),F=Lo(M,N.collectionRef);return q.jsx(u,{ref:F,children:$})});d.displayName=s;const m=t+"CollectionItemSlot",v="data-radix-collection-item",_=pO(m),O=le.forwardRef((A,M)=>{const{scope:L,children:$,...N}=A,F=le.useRef(null),Q=Lo(M,F),W=o(m,L);return le.useEffect(()=>(W.itemMap.set(F,{ref:F,...N}),()=>{W.itemMap.delete(F)})),q.jsx(_,{[v]:"",ref:Q,children:$})});O.displayName=m;function E(A){const M=o(t+"CollectionConsumer",A);return le.useCallback(()=>{const $=M.collectionRef.current;if(!$)return[];const N=Array.from($.querySelectorAll(`[${v}]`));return Array.from(M.itemMap.values()).sort((W,H)=>N.indexOf(W.ref.current)-N.indexOf(H.ref.current))},[M.collectionRef,M.itemMap])}return[{Provider:a,Slot:d,ItemSlot:O},E,r]}var oBe=j.createContext(void 0);function qI(t){const e=j.useContext(oBe);return t||e||"ltr"}var yL="rovingFocusGroup.onEntryFocus",sBe={bubbles:!1,cancelable:!0},Kk="RovingFocusGroup",[Fz,Mre,aBe]=Pre(Kk),[lBe,WI]=by(Kk,[aBe]),[cBe,uBe]=lBe(Kk),Rre=j.forwardRef((t,e)=>q.jsx(Fz.Provider,{scope:t.__scopeRovingFocusGroup,children:q.jsx(Fz.Slot,{scope:t.__scopeRovingFocusGroup,children:q.jsx(hBe,{...t,ref:e})})}));Rre.displayName=Kk;var hBe=j.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:m=!1,...v}=t,_=j.useRef(null),O=Lo(e,_),E=qI(o),[A,M]=cy({prop:a,defaultProp:s??null,onChange:u,caller:Kk}),[L,$]=j.useState(!1),N=J0(d),F=Mre(n),Q=j.useRef(!1),[W,H]=j.useState(0);return j.useEffect(()=>{const te=_.current;if(te)return te.addEventListener(yL,N),()=>te.removeEventListener(yL,N)},[N]),q.jsx(cBe,{scope:n,orientation:r,dir:E,loop:i,currentTabStopId:A,onItemFocus:j.useCallback(te=>M(te),[M]),onItemShiftTab:j.useCallback(()=>$(!0),[]),onFocusableItemAdd:j.useCallback(()=>H(te=>te+1),[]),onFocusableItemRemove:j.useCallback(()=>H(te=>te-1),[]),children:q.jsx(Xr.div,{tabIndex:L||W===0?-1:0,"data-orientation":r,...v,ref:O,style:{outline:"none",...t.style},onMouseDown:Er(t.onMouseDown,()=>{Q.current=!0}),onFocus:Er(t.onFocus,te=>{const ne=!Q.current;if(te.target===te.currentTarget&&ne&&!L){const ce=new CustomEvent(yL,sBe);if(te.currentTarget.dispatchEvent(ce),!ce.defaultPrevented){const we=F().filter(ve=>ve.focusable),re=we.find(ve=>ve.active),se=we.find(ve=>ve.id===A),fe=[re,se,...we].filter(Boolean).map(ve=>ve.ref.current);Lre(fe,m)}}Q.current=!1}),onBlur:Er(t.onBlur,()=>$(!1))})})}),Ire="RovingFocusGroupItem",Dre=j.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,children:a,...s}=t,u=Xg(),d=o||u,m=uBe(Ire,n),v=m.currentTabStopId===d,_=Mre(n),{onFocusableItemAdd:O,onFocusableItemRemove:E,currentTabStopId:A}=m;return j.useEffect(()=>{if(r)return O(),()=>E()},[r,O,E]),q.jsx(Fz.ItemSlot,{scope:n,id:d,focusable:r,active:i,children:q.jsx(Xr.span,{tabIndex:v?0:-1,"data-orientation":m.orientation,...s,ref:e,onMouseDown:Er(t.onMouseDown,M=>{r?m.onItemFocus(d):M.preventDefault()}),onFocus:Er(t.onFocus,()=>m.onItemFocus(d)),onKeyDown:Er(t.onKeyDown,M=>{if(M.key==="Tab"&&M.shiftKey){m.onItemShiftTab();return}if(M.target!==M.currentTarget)return;const L=pBe(M,m.orientation,m.dir);if(L!==void 0){if(M.metaKey||M.ctrlKey||M.altKey||M.shiftKey)return;M.preventDefault();let N=_().filter(F=>F.focusable).map(F=>F.ref.current);if(L==="last")N.reverse();else if(L==="prev"||L==="next"){L==="prev"&&N.reverse();const F=N.indexOf(M.currentTarget);N=m.loop?mBe(N,F+1):N.slice(F+1)}setTimeout(()=>Lre(N))}}),children:typeof a=="function"?a({isCurrentTabStop:v,hasTabStop:A!=null}):a})})});Dre.displayName=Ire;var dBe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fBe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function pBe(t,e,n){const r=fBe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return dBe[r]}function Lre(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function mBe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $re=Rre,f9=Dre,gBe="Separator",Mq="horizontal",yBe=["horizontal","vertical"],zre=j.forwardRef((t,e)=>{const{decorative:n,orientation:r=Mq,...i}=t,o=vBe(r)?r:Mq,s=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return q.jsx(Xr.div,{"data-orientation":o,...s,...i,ref:e})});zre.displayName=gBe;function vBe(t){return yBe.includes(t)}var xBe=zre,Nre="Toggle",Bre=j.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r,onPressedChange:i,...o}=t,[a,s]=cy({prop:n,onChange:i,defaultProp:r??!1,caller:Nre});return q.jsx(Xr.button,{type:"button","aria-pressed":a,"data-state":a?"on":"off","data-disabled":t.disabled?"":void 0,...o,ref:e,onClick:Er(t.onClick,()=>{t.disabled||s(!a)})})});Bre.displayName=Nre;var yv="ToggleGroup",[Fre,jre]=by(yv,[WI]),Vre=WI(),p9=le.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single"){const i=r;return q.jsx(_Be,{...i,ref:e})}if(n==="multiple"){const i=r;return q.jsx(bBe,{...i,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${yv}\``)});p9.displayName=yv;var[Qre,Ure]=Fre(yv),_Be=le.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=t,[a,s]=cy({prop:n,defaultProp:r??"",onChange:i,caller:yv});return q.jsx(Qre,{scope:t.__scopeToggleGroup,type:"single",value:le.useMemo(()=>a?[a]:[],[a]),onItemActivate:s,onItemDeactivate:le.useCallback(()=>s(""),[s]),children:q.jsx(Zre,{...o,ref:e})})}),bBe=le.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=t,[a,s]=cy({prop:n,defaultProp:r??[],onChange:i,caller:yv}),u=le.useCallback(m=>s((v=[])=>[...v,m]),[s]),d=le.useCallback(m=>s((v=[])=>v.filter(_=>_!==m)),[s]);return q.jsx(Qre,{scope:t.__scopeToggleGroup,type:"multiple",value:a,onItemActivate:u,onItemDeactivate:d,children:q.jsx(Zre,{...o,ref:e})})});p9.displayName=yv;var[wBe,OBe]=Fre(yv),Zre=le.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:i=!0,orientation:o,dir:a,loop:s=!0,...u}=t,d=Vre(n),m=qI(a),v={role:"group",dir:m,...u};return q.jsx(wBe,{scope:n,rovingFocus:i,disabled:r,children:i?q.jsx($re,{asChild:!0,...d,orientation:o,dir:m,loop:s,children:q.jsx(Xr.div,{...v,ref:e})}):q.jsx(Xr.div,{...v,ref:e})})}),wM="ToggleGroupItem",qre=le.forwardRef((t,e)=>{const n=Ure(wM,t.__scopeToggleGroup),r=OBe(wM,t.__scopeToggleGroup),i=Vre(t.__scopeToggleGroup),o=n.value.includes(t.value),a=r.disabled||t.disabled,s={...t,pressed:o,disabled:a},u=le.useRef(null);return r.rovingFocus?q.jsx(f9,{asChild:!0,...i,focusable:!a,active:o,ref:u,children:q.jsx(Rq,{...s,ref:e})}):q.jsx(Rq,{...s,ref:e})});qre.displayName=wM;var Rq=le.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...i}=t,o=Ure(wM,n),a={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},s=o.type==="single"?a:void 0;return q.jsx(Bre,{...s,...i,ref:e,onPressedChange:u=>{u?o.onItemActivate(r):o.onItemDeactivate(r)}})}),SBe=p9,CBe=qre,m9="Toolbar",[TBe]=by(m9,[WI,jre]),g9=WI(),Wre=jre(),[kBe,Hre]=TBe(m9),Gre=j.forwardRef((t,e)=>{const{__scopeToolbar:n,orientation:r="horizontal",dir:i,loop:o=!0,...a}=t,s=g9(n),u=qI(i);return q.jsx(kBe,{scope:n,orientation:r,dir:u,children:q.jsx($re,{asChild:!0,...s,orientation:r,dir:u,loop:o,children:q.jsx(Xr.div,{role:"toolbar","aria-orientation":r,dir:u,...a,ref:e})})})});Gre.displayName=m9;var Xre="ToolbarSeparator",Yre=j.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,i=Hre(Xre,n);return q.jsx(xBe,{orientation:i.orientation==="horizontal"?"vertical":"horizontal",...r,ref:e})});Yre.displayName=Xre;var EBe="ToolbarButton",y9=j.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,i=g9(n);return q.jsx(f9,{asChild:!0,...i,focusable:!t.disabled,children:q.jsx(Xr.button,{type:"button",...r,ref:e})})});y9.displayName=EBe;var ABe="ToolbarLink",PBe=j.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,i=g9(n);return q.jsx(f9,{asChild:!0,...i,focusable:!0,children:q.jsx(Xr.a,{...r,ref:e,onKeyDown:Er(t.onKeyDown,o=>{o.key===" "&&o.currentTarget.click()})})})});PBe.displayName=ABe;var Kre="ToolbarToggleGroup",Jre=j.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,i=Hre(Kre,n),o=Wre(n);return q.jsx(SBe,{"data-orientation":i.orientation,dir:i.dir,...o,...r,ref:e,rovingFocus:!1})});Jre.displayName=Kre;var MBe="ToolbarToggleItem",eie=j.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,i=Wre(n),o={__scopeToolbar:t.__scopeToolbar};return q.jsx(y9,{asChild:!0,...o,children:q.jsx(CBe,{...i,...r,ref:e})})});eie.displayName=MBe;var v9=Gre,tie=Yre,m_=y9,HI=Jre,u5=eie;function x9(t,e){return t===null||t===e?!1:t.dataset.editorDialog!==void 0||t.dataset.toolbarItem!==void 0||t.dataset.editorDropdown?!0:x9(t.parentElement,e)}function RBe(){const t=[...Array(256).keys()].map(n=>n.toString(16).padStart(2,"0")),e=crypto.getRandomValues(new Uint8Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,[...e.entries()].map(([n,r])=>[4,6,8,10].includes(n)?`-${t[r]}`:t[r]).join("")}const nie=t=>t===0?"th":"td",rie={center:Ut.centeredCell,left:Ut.leftAlignedCell,right:Ut.rightAlignedCell},IBe=({mdastNode:t,parentEditor:e,lexicalTable:n})=>{const[r,i]=le.useState(null),[o,a]=us(la,ml),s=le.useMemo(()=>A=>(A.__cacheKey??(A.__cacheKey=RBe()),A.__cacheKey),[]),u=le.useCallback(A=>{const M=n.getColCount();if(A===null){i(null);return}let[L,$]=A;if(L>M-1&&(L=0,$++),L<0&&(L=M-1,$-=1),$>n.getRowCount()-1){i(null),e.update(()=>{if(n.getLatest().getNextSibling())n.getLatest().selectNext();else{const F=Oi();n.insertAfter(F),F.select()}});return}if($<0){i(null),e.update(()=>{n.getLatest().selectPrevious()});return}i([L,$])},[n,e]);le.useEffect(()=>{n.focusEmitter.subscribe(u)},[n,u]);const d=le.useCallback(A=>{A.preventDefault(),e.update(()=>{n.addRowToBottom(),i([0,n.getRowCount()])})},[e,n]),m=le.useCallback(A=>{A.preventDefault(),e.update(()=>{n.addColumnToRight(),i([n.getColCount(),0])})},[e,n]),[v,_]=le.useState([-1,-1]),O=le.useCallback(A=>{let M=A.target;for(;M&&!["TH","TD"].includes(M.tagName);){if(M===A.currentTarget)return;M=M.parentElement}if(M===null)return;const L=M.parentElement,N=L.parentElement.tagName==="TFOOT"?-1:Array.from(L.children).indexOf(M),F=M.tagName==="TH"?-1:Array.from(L.parentElement.children).indexOf(L);_([N,F])},[]),E=Bs();return le.createElement("table",{className:Ut.tableEditor,onMouseOver:O,onMouseLeave:()=>{_([-1,-1])}},le.createElement("colgroup",null,a?null:le.createElement("col",null),Array.from({length:t.children[0].children.length},(A,M)=>{const $=(t.align??[])[M]??"left",N=rie[$];return le.createElement("col",{key:M,className:N})}),a?null:le.createElement("col",null)),a||le.createElement("thead",null,le.createElement("tr",null,le.createElement("th",{className:Ut.tableToolsColumn}),Array.from({length:t.children[0].children.length},(A,M)=>le.createElement("th",{key:M,"data-tool-cell":!0},le.createElement($Be,{setActiveCellWithBoundaries:u,parentEditor:e,colIndex:M,highlightedCoordinates:v,lexicalTable:n,align:(t.align??[])[M]}))),le.createElement("th",{className:Ut.tableToolsColumn,"data-tool-cell":!0},le.createElement("button",{className:Ut.iconButton,type:"button",title:E("table.deleteTable","Delete table"),onClick:A=>{A.preventDefault(),e.update(()=>{n.selectNext(),n.remove()})}},o("delete_small"))))),le.createElement("tbody",null,t.children.map((A,M)=>{const L=nie(M);return le.createElement("tr",{key:M},a||le.createElement(L,{className:Ut.toolCell,"data-tool-cell":!0},le.createElement(zBe,{setActiveCellWithBoundaries:u,parentEditor:e,rowIndex:M,highlightedCoordinates:v,lexicalTable:n})),A.children.map(($,N)=>{var F;return le.createElement(DBe,{align:(F=t.align)==null?void 0:F[N],key:s($),contents:$.children,setActiveCell:u,rowIndex:M,colIndex:N,lexicalTable:n,parentEditor:e,activeCell:a?[-1,-1]:r})}),a||M===0&&le.createElement("th",{rowSpan:n.getRowCount(),"data-tool-cell":!0},le.createElement("button",{type:"button",className:Ut.addColumnButton,onClick:m},o("add_column"))))})),a||le.createElement("tfoot",null,le.createElement("tr",null,le.createElement("th",null),le.createElement("th",{colSpan:n.getColCount()},le.createElement("button",{type:"button",className:Ut.addRowButton,onClick:d},o("add_row"))),le.createElement("th",null))))},DBe=({align:t,...e})=>{const{activeCell:n,setActiveCell:r}=e,i=!!(n&&n[0]===e.colIndex&&n[1]===e.rowIndex),o=rie[t??"left"],a=nie(e.rowIndex);return le.createElement(a,{className:o,"data-active":i,onClick:()=>{r([e.colIndex,e.rowIndex])}},le.createElement(LBe,{...e,focus:i}))},LBe=({focus:t,setActiveCell:e,parentEditor:n,lexicalTable:r,contents:i,colIndex:o,rowIndex:a})=>{const[s,u,d,m,v,_,O,E,A]=us(AI,Uk,PI,Zk,uO,rS,MI,Od,j8),[M]=le.useState(()=>{const $=f8({nodes:d,theme:kI,namespace:"TableCellEditor"});return $.update(()=>{D8({root:Ur(),mdastRoot:{type:"root",children:[{type:"paragraph",children:i}]},visitors:s,jsxComponentDescriptors:m,directiveDescriptors:v,codeBlockEditorDescriptors:_})}),$}),L=le.useCallback($=>{M.getEditorState().read(()=>{const N=I8({root:Ur(),jsxComponentDescriptors:m,visitors:u,jsxIsAvailable:O});n.update(()=>{r.updateCellContents(o,a,N.children[0].children)},{discrete:!0}),n.dispatchCommand(L_,void 0)}),e($)},[o,M,u,m,O,r,n,a,e]);return le.useEffect(()=>Wl(M.registerCommand(iI,$=>{$.preventDefault();const N=$.shiftKey?[o-1,a]:[o+1,a];return L(N),!0},gh),M.registerCommand(aI,()=>(e([o,a]),!1),bo),M.registerCommand(oO,$=>{$?.preventDefault();const N=$?.shiftKey?[o,a-1]:[o,a+1];return L(N),!0},gh),M.registerCommand(lI,$=>{const N=$.relatedTarget;return x9(N,E.getRootElement())?!1:(L(null),!0)},Lr),M.registerCommand(L_,()=>(L(null),!0),Lr)),[o,M,E,a,L,e]),le.useEffect(()=>{t&&M.focus()},[t,M]),le.createElement(Fne,{initialEditor:M},le.createElement(q8,{contentEditable:le.createElement(U8,null),placeholder:le.createElement("div",null),ErrorBoundary:Z8}),A.map(($,N)=>le.createElement($,{key:N})),le.createElement(xte,null))},$Be=({parentEditor:t,highlightedCoordinates:e,align:n,lexicalTable:r,colIndex:i,setActiveCellWithBoundaries:o})=>{const[a,s]=us(pv,la),u=le.useCallback(_=>{t.update(()=>{r.insertColumnAt(_)}),o([_,0])},[t,r,o]),d=le.useCallback(_=>{t.update(()=>{r.deleteColumnAt(_)})},[t,r]),m=le.useCallback((_,O)=>{t.update(()=>{r.setColumnAlign(_,O)})},[t,r]),v=Bs();return le.createElement(u9,null,le.createElement(l9,{className:Ut.tableColumnEditorTrigger,"data-active":e[0]===i+1,title:v("table.columnMenu","Column menu")},s("more_horiz")),le.createElement(h9,{container:a?.current},le.createElement(ZI,{className:ni(Ut.tableColumnEditorPopoverContent),onOpenAutoFocus:_=>{_.preventDefault()},sideOffset:5,side:"top"},le.createElement(v9,{className:Ut.tableColumnEditorToolbar},le.createElement(HI,{className:Ut.toggleGroupRoot,onValueChange:_=>{m(i,_)},value:n??"left",type:"single","aria-label":v("table.textAlignment","Text alignment")},le.createElement(u5,{value:"left",title:v("table.alignLeft","Align left")},s("format_align_left")),le.createElement(u5,{value:"center",title:v("table.alignCenter","Align center")},s("format_align_center")),le.createElement(u5,{value:"right",title:v("table.alignRight","Align right")},s("format_align_right"))),le.createElement(tie,null),le.createElement(m_,{onClick:u.bind(null,i),title:v("table.insertColumnLeft","Insert a column to the left of this one")},s("insert_col_left")),le.createElement(m_,{onClick:u.bind(null,i+1),title:v("table.insertColumnRight","Insert a column to the right of this one")},s("insert_col_right")),le.createElement(m_,{onClick:d.bind(null,i),title:v("table.deleteColumn","Delete this column")},s("delete_small"))),le.createElement(d9,{className:Ut.popoverArrow}))))},zBe=({parentEditor:t,highlightedCoordinates:e,lexicalTable:n,rowIndex:r,setActiveCellWithBoundaries:i})=>{const[o,a]=us(pv,la),s=le.useCallback(m=>{t.update(()=>{n.insertRowAt(m)}),i([0,m])},[t,n,i]),u=le.useCallback(m=>{t.update(()=>{n.deleteRowAt(m)})},[t,n]),d=Bs();return le.createElement(u9,null,le.createElement(l9,{className:Ut.tableColumnEditorTrigger,"data-active":e[1]===r,title:d("table.rowMenu","Row menu")},a("more_horiz")),le.createElement(h9,{container:o?.current},le.createElement(ZI,{className:ni(Ut.tableColumnEditorPopoverContent),onOpenAutoFocus:m=>{m.preventDefault()},sideOffset:5,side:"bottom"},le.createElement(v9,{className:Ut.tableColumnEditorToolbar},le.createElement(m_,{onClick:s.bind(null,r),title:d("table.insertRowAbove","Insert a row above this one")},a("insert_row_above")),le.createElement(m_,{onClick:s.bind(null,r+1),title:d("table.insertRowBelow","Insert a row below this one")},a("insert_row_below")),le.createElement(m_,{onClick:u.bind(null,r),title:d("table.deleteRow","Delete this row")},a("delete_small"))),le.createElement(d9,{className:Ut.popoverArrow}))))};var NBe=Object.defineProperty,BBe=(t,e,n)=>e in t?NBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Iq=(t,e,n)=>(BBe(t,typeof e!="symbol"?e+"":e,n),n);const Dq={type:"tableCell",children:[]};function FBe(){let t=Q0;return{publish:e=>{t(e)},subscribe:e=>{t=e}}}class cS extends gy{constructor(e,n){super(n),Iq(this,"__mdastNode"),Iq(this,"focusEmitter",FBe()),this.__mdastNode=e??{type:"table",children:[]}}static getType(){return"table"}static clone(e){return new cS(structuredClone(e.__mdastNode),e.__key)}static importJSON(e){return _9(e.mdastNode)}static importDOM(){return{table:()=>({conversion:VBe,priority:3})}}exportJSON(){return{mdastNode:structuredClone(this.__mdastNode),type:"table",version:1}}getMdastNode(){return this.__mdastNode}getRowCount(){return this.__mdastNode.children.length}getColCount(){var e;return((e=this.__mdastNode.children[0])==null?void 0:e.children.length)||0}createDOM(){return document.createElement("div")}updateDOM(){return!1}updateCellContents(e,n,r){const o=this.getWritable().__mdastNode,a=o.children[n],s=a.children,u=s[e],d=Array.from(s),m={...u,children:r},v={...a,children:d};d[e]=m,o.children[n]=v}insertColumnAt(e){const r=this.getWritable().__mdastNode;for(let i=0;i<r.children.length;i++){const o=r.children[i],a=o.children,s=Array.from(a),u={...o,children:s};s.splice(e,0,structuredClone(Dq)),r.children[i]=u}r.align&&r.align.length>0&&r.align.splice(e,0,"left")}deleteColumnAt(e){const r=this.getWritable().__mdastNode;for(let i=0;i<r.children.length;i++){const o=r.children[i],a=o.children,s=Array.from(a),u={...o,children:s};s.splice(e,1),r.children[i]=u}}insertRowAt(e){const r=this.getWritable().__mdastNode,i={type:"tableRow",children:Array.from({length:this.getColCount()},()=>structuredClone(Dq))};r.children.splice(e,0,i)}deleteRowAt(e){this.getRowCount()===1?(this.selectNext(),this.remove()):this.getWritable().__mdastNode.children.splice(e,1)}addRowToBottom(){this.insertRowAt(this.getRowCount())}addColumnToRight(){this.insertColumnAt(this.getColCount())}setColumnAlign(e,n){const i=this.getWritable().__mdastNode;i.align??(i.align=[]),i.align[e]=n}decorate(e){return le.createElement(IBe,{lexicalTable:this,mdastNode:this.__mdastNode,parentEditor:e})}select(e){this.focusEmitter.publish(e??[0,0])}isInline(){return!1}}function jBe(t){return t instanceof cS}function _9(t){return new cS(t)}function VBe(t){const e=t.querySelectorAll("tr"),n=Array.from(e).map(r=>({type:"tableRow",children:Array.from(r.querySelectorAll("td, th")).map(i=>({type:"tableCell",children:[{type:"text",value:i.textContent}]}))}));return{node:new cS({type:"table",children:n})}}const QBe={testLexicalNode:jBe,visitLexicalNode({actions:t,mdastParent:e,lexicalNode:n}){t.appendToParent(e,n.getMdastNode())}},UBe={testNode:"table",visitNode({mdastNode:t,lexicalParent:e}){e.append(_9(t))}};function ZBe(t=1,e=1){const n={type:"table",children:[]};for(let r=0;r<t;r++){const i={type:"tableRow",children:[]};for(let o=0;o<e;o++){const a={type:"tableCell",children:[]};i.children.push(a)}n.children.push(i)}return n}const iie=As(t=>{t.link(t.pipe(iie,ny(({rows:e,columns:n})=>()=>_9(ZBe(e,n)))),II)}),qBe=Zl({init(t,e){t.pubIn({[dO]:K4e(),[hO]:lze(),[vd]:UBe,[jf]:cS,[Vf]:QBe,[qk]:ize({tableCellPadding:e?.tableCellPadding??!0,tablePipeAlign:e?.tablePipeAlign??!0})})}}),WBe={testNode:"link",visitNode({mdastNode:t,actions:e}){e.addAndStepInto(sy(t.url,{title:t.title}))}},HBe={testLexicalNode:iu,visitLexicalNode:({lexicalNode:t,actions:e})=>{e.addAndStepInto("link",{url:t.getURL(),title:t.getTitle()})}};function GBe({validateUrl:t,attributes:e}){const[n]=ql();return j.useEffect((()=>{if(!n.hasNodes([vy]))throw new Error("LinkPlugin: LinkNode not registered on editor");return Wl(n.registerCommand(fO,(r=>{if(r===null)return sL(r),!0;if(typeof r=="string")return!(t!==void 0&&!t(r))&&(sL(r,e),!0);{const{url:i,target:o,rel:a,title:s}=r;return sL(i,{...e,rel:a,target:o,title:s}),!0}}),bo),t!==void 0?n.registerCommand(Rk,(r=>{const i=cn();if(!Kt(i)||i.isCollapsed()||!$0(r,ClipboardEvent)||r.clipboardData===null)return!1;const o=r.clipboardData.getData("text");return!!t(o)&&!i.getNodes().some((a=>It(a)))&&(n.dispatchCommand(fO,{...e,url:o}),r.preventDefault(),!0)}),bo):()=>{})}),[n,t,e]),null}function Lq(t,e=(n=>n)){return n=>{const r=t.exec(n);return r===null?null:{index:r.index,length:r[0].length,text:r[0],url:e(r[0])}}}function oie(t,e){for(let n=0;n<e.length;n++){const r=e[n](t);if(r)return r}return null}const XBe=/[.,;\s]/;function OM(t){return XBe.test(t)}function sie(t){return OM(t[t.length-1])}function jz(t){return OM(t[0])}function aie(t){let e=t.getPreviousSibling();return It(e)&&(e=e.getLastDescendant()),e===null||Pf(e)||gn(e)&&sie(e.getTextContent())}function lie(t){let e=t.getNextSibling();return It(e)&&(e=e.getFirstDescendant()),e===null||Pf(e)||gn(e)&&jz(e.getTextContent())}function YBe(t,e,n,r){return(t>0?OM(n[t-1]):aie(r[0]))?e<n.length?OM(n[e]):lie(r[r.length-1]):!1}function KBe(t,e,n){const r=[],i=[],o=[];let a=0,s=0;const u=[...t];for(;u.length>0;){const d=u[0],m=d.getTextContent().length,v=s;s+m<=e?(r.push(d),a+=m):v>=n?o.push(d):i.push(d),s+=m,u.shift()}return[a,r,i,o]}function JBe(t,e,n,r){const i=Pz(r.url,r.attributes);if(t.length===1){let o,a=t[0];e===0?[o,a]=a.splitText(n):[,o,a]=a.splitText(e,n);const s=so(r.text);return s.setFormat(o.getFormat()),s.setDetail(o.getDetail()),s.setStyle(o.getStyle()),i.append(s),o.replace(i),a}if(t.length>1){const o=t[0];let a,s=o.getTextContent().length;e===0?a=o:[,a]=o.splitText(e);const u=[];let d;for(let O=1;O<t.length;O++){const E=t[O],A=E.getTextContent().length,M=s;if(M<n)if(s+A<=n)u.push(E);else{const[L,$]=E.splitText(n-M);u.push(L),d=$}s+=A}const m=cn(),v=m?m.getNodes().find(gn):void 0,_=so(a.getTextContent());return _.setFormat(a.getFormat()),_.setDetail(a.getDetail()),_.setStyle(a.getStyle()),i.append(_,...u),v&&v===a&&(Kt(m)?_.select(m.anchor.offset,m.focus.offset):ss(m)&&_.select(0,_.getTextContent().length)),a.replace(i),d}}function vL(t,e,n){const r=t.getChildren(),i=r.length;for(let u=0;u<i;u++){const d=r[u];if(!gn(d)||!d.isSimpleText())return h5(t),void n(null,t.getURL())}const o=t.getTextContent(),a=oie(o,e);if(a===null||a.text!==o||!aie(t)||!lie(t))return h5(t),void n(null,t.getURL());const s=t.getURL();if(s!==a.url&&(t.setURL(a.url),n(a.url,s)),a.attributes){const u=t.getRel();u!==a.attributes.rel&&(t.setRel(a.attributes.rel||null),n(a.attributes.rel||null,u));const d=t.getTarget();d!==a.attributes.target&&(t.setTarget(a.attributes.target||null),n(a.attributes.target||null,d))}}function h5(t){const e=t.getChildren();for(let n=e.length-1;n>=0;n--)t.insertAfter(e[n]);return t.remove(),e.map((n=>n.getLatest()))}function e8e(t,e,n){j.useEffect((()=>{t.hasNodes([DI])||(function(i,...o){const a=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",i);for(const u of o)s.append("v",u);throw a.search=s.toString(),Error(`Minified Lexical error #${i}; visit ${a.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(77);const r=(i,o)=>{n&&n(i,o)};return Wl(t.registerNodeTransform(Tm,(i=>{const o=i.getParentOrThrow(),a=i.getPreviousSibling();if(Cf(o)&&!o.getIsUnlinked())vL(o,e,r);else if(!iu(o)){if(i.isSimpleText()&&(jz(i.getTextContent())||!Cf(a))){const s=(function(u){const d=[u];let m=u.getNextSibling();for(;m!==null&&gn(m)&&m.isSimpleText()&&(d.push(m),!/[\s]/.test(m.getTextContent()));)m=m.getNextSibling();return d})(i);(function(u,d,m){let v=[...u];const _=v.map((M=>M.getTextContent())).join("");let O,E=_,A=0;for(;(O=oie(E,d))&&O!==null;){const M=O.index,L=M+O.length;if(YBe(A+M,A+L,_,v)){const[$,,N,F]=KBe(v,A+M,A+L),Q=JBe(N,A+M-$,A+L-$,O);v=Q?[Q,...F]:F,m(O.url,null),A=0}else A+=L;E=E.substring(L)}})(s,e,r)}(function(s,u,d){const m=s.getPreviousSibling(),v=s.getNextSibling(),_=s.getTextContent();var O;!Cf(m)||m.getIsUnlinked()||jz(_)&&(O=_,!(m.isEmailURI()?/^\.[a-zA-Z]{2,}/.test(O):/^\.[a-zA-Z0-9]{1,}/.test(O)))||(m.append(s),vL(m,u,d),d(null,m.getURL())),!Cf(v)||v.getIsUnlinked()||sie(_)||(h5(v),vL(v,u,d),d(null,v.getURL()))})(i,e,r)}})),t.registerCommand(fO,(i=>{const o=cn();return i!==null||!Kt(o)||o.extract().forEach((a=>{const s=a.getParent();Cf(s)&&(s.setIsUnlinked(!s.getIsUnlinked()),s.markDirty())})),!1}),bo))}),[t,e,n])}function t8e({matchers:t,onChange:e}){const[n]=ql();return e8e(n,t,e),null}const n8e=/((https?:\/\/(www\.)?)|(www\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,r8e=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/,i8e=[Lq(n8e,t=>t.startsWith("http")?t:`https://${t}`),Lq(r8e,t=>`mailto:${t}`)],o8e=()=>le.createElement(t8e,{matchers:i8e}),s8e=In(!1),a8e=Zl({init(t,e){const n=!!e?.disableAutoLink,r=e?.validateUrl?{validateUrl:e.validateUrl}:{},i=()=>le.createElement(le.Fragment,null,le.createElement(GBe,{...r}),n?null:le.createElement(o8e,null));t.pubIn({[iS]:"link",[vd]:WBe,[jf]:[vy,DI],[Vf]:HBe,[s8e]:n,[V8]:i,[nb]:i})}});function l8e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var c8e=["color"],u8e=j.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=l8e(t,c8e);return j.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),j.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const $q=()=>le.createElement("div",{className:Ut.imagePlaceholder},le.createElement(u8e,null));function Vz(t){const{nodeKey:e,imageSource:n,initialImagePath:r,title:i,alt:o,width:a,height:s}=t,[u,d,m]=us(aoe,la,ml),[v]=ql(),_=Ki(ooe),O=Bs();return le.createElement("div",{className:Ut.editImageToolbar},le.createElement("button",{className:Ut.iconButton,type:"button",title:O("imageEditor.deleteImage","Delete image"),disabled:m,onClick:E=>{E.preventDefault(),v.update(()=>{var A;(A=Fi(e))==null||A.remove()})}},d("delete_small")),!u&&le.createElement("button",{type:"button",className:ni(Ut.iconButton,Ut.editImageButton),title:O("imageEditor.editImage","Edit image"),disabled:m,onClick:()=>{_({nodeKey:e,initialValues:{src:r??n,title:i,altText:o,width:yO(a),height:yO(s)}})}},d("settings")))}var GI="Dialog",[cie]=by(GI),[h8e,Qf]=cie(GI),uie=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,s=j.useRef(null),u=j.useRef(null),[d,m]=cy({prop:r,defaultProp:i??!1,onChange:o,caller:GI});return q.jsx(h8e,{scope:e,triggerRef:s,contentRef:u,contentId:Xg(),titleId:Xg(),descriptionId:Xg(),open:d,onOpenChange:m,onOpenToggle:j.useCallback(()=>m(v=>!v),[m]),modal:a,children:n})};uie.displayName=GI;var hie="DialogTrigger",d8e=j.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Qf(hie,n),o=Lo(e,i.triggerRef);return q.jsx(Xr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":O9(i.open),...r,ref:o,onClick:Er(t.onClick,i.onOpenToggle)})});d8e.displayName=hie;var b9="DialogPortal",[f8e,die]=cie(b9,{forceMount:void 0}),fie=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,o=Qf(b9,e);return q.jsx(f8e,{scope:e,forceMount:n,children:j.Children.map(r,a=>q.jsx(mv,{present:n||o.open,children:q.jsx(Xk,{asChild:!0,container:i,children:a})}))})};fie.displayName=b9;var SM="DialogOverlay",pie=j.forwardRef((t,e)=>{const n=die(SM,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=Qf(SM,t.__scopeDialog);return o.modal?q.jsx(mv,{present:r||o.open,children:q.jsx(m8e,{...i,ref:e})}):null});pie.displayName=SM;var p8e=pO("DialogOverlay.RemoveScroll"),m8e=j.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Qf(SM,n);return q.jsx(QI,{as:p8e,allowPinchZoom:!0,shards:[i.contentRef],children:q.jsx(Xr.div,{"data-state":O9(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),F_="DialogContent",mie=j.forwardRef((t,e)=>{const n=die(F_,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=Qf(F_,t.__scopeDialog);return q.jsx(mv,{present:r||o.open,children:o.modal?q.jsx(g8e,{...i,ref:e}):q.jsx(y8e,{...i,ref:e})})});mie.displayName=F_;var g8e=j.forwardRef((t,e)=>{const n=Qf(F_,t.__scopeDialog),r=j.useRef(null),i=Lo(e,n.contentRef,r);return j.useEffect(()=>{const o=r.current;if(o)return a9(o)},[]),q.jsx(gie,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Er(t.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Er(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,s=a.button===0&&a.ctrlKey===!0;(a.button===2||s)&&o.preventDefault()}),onFocusOutside:Er(t.onFocusOutside,o=>o.preventDefault())})}),y8e=j.forwardRef((t,e)=>{const n=Qf(F_,t.__scopeDialog),r=j.useRef(!1),i=j.useRef(!1);return q.jsx(gie,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{t.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{t.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=o.target;n.triggerRef.current?.contains(a)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),gie=j.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...a}=t,s=Qf(F_,n),u=j.useRef(null),d=Lo(e,u);return G8(),q.jsxs(q.Fragment,{children:[q.jsx($I,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:q.jsx(Hk,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":O9(s.open),...a,ref:d,onDismiss:()=>s.onOpenChange(!1)})}),q.jsxs(q.Fragment,{children:[q.jsx(x8e,{titleId:s.titleId}),q.jsx(b8e,{contentRef:u,descriptionId:s.descriptionId})]})]})}),w9="DialogTitle",yie=j.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Qf(w9,n);return q.jsx(Xr.h2,{id:i.titleId,...r,ref:e})});yie.displayName=w9;var vie="DialogDescription",v8e=j.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Qf(vie,n);return q.jsx(Xr.p,{id:i.descriptionId,...r,ref:e})});v8e.displayName=vie;var xie="DialogClose",_ie=j.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Qf(xie,n);return q.jsx(Xr.button,{type:"button",...r,ref:e,onClick:Er(t.onClick,()=>i.onOpenChange(!1))})});_ie.displayName=xie;function O9(t){return t?"open":"closed"}var bie="DialogTitleWarning",[ant,wie]=fze(bie,{contentName:F_,titleName:w9,docsSlug:"dialog"}),x8e=({titleId:t})=>{const e=wie(bie),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return j.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},_8e="DialogDescriptionWarning",b8e=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wie(_8e).contentName}}.`;return j.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Oie=uie,Sie=fie,Cie=pie,Tie=mie,kie=yie,Eie=_ie,Jk=t=>t.type==="checkbox",s_=t=>t instanceof Date,ru=t=>t==null;const Aie=t=>typeof t=="object";var oa=t=>!ru(t)&&!Array.isArray(t)&&Aie(t)&&!s_(t),Pie=t=>oa(t)&&t.target?Jk(t.target)?t.target.checked:t.target.value:t,w8e=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Mie=(t,e)=>t.has(w8e(e)),O8e=t=>{const e=t.constructor&&t.constructor.prototype;return oa(e)&&e.hasOwnProperty("isPrototypeOf")},S9=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Vo(t){if(t instanceof Date)return new Date(t);const e=typeof FileList<"u"&&t instanceof FileList;if(S9&&(t instanceof Blob||e))return t;const n=Array.isArray(t);if(!n&&!(oa(t)&&O8e(t)))return t;const r=n?[]:Object.create(Object.getPrototypeOf(t));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=Vo(t[i]));return r}var XI=t=>/^\w*$/.test(t),Do=t=>t===void 0,YI=t=>Array.isArray(t)?t.filter(Boolean):[],C9=t=>YI(t.replace(/["|']|\]/g,"").split(/\.|\[/)),kn=(t,e,n)=>{if(!e||!oa(t))return n;const r=(XI(e)?[e]:C9(e)).reduce((i,o)=>ru(i)?i:i[o],t);return Do(r)||r===t?Do(t[e])?n:t[e]:r},Ju=t=>typeof t=="boolean",yc=t=>typeof t=="function",oo=(t,e,n)=>{let r=-1;const i=XI(e)?[e]:C9(e),o=i.length,a=o-1;for(;++r<o;){const s=i[r];let u=n;if(r!==a){const d=t[s];u=oa(d)||Array.isArray(d)?d:isNaN(+i[r+1])?{}:[]}if(s==="__proto__"||s==="constructor"||s==="prototype")return;t[s]=u,t=t[s]}};const CM={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},nd={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Mg={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Rie=le.createContext(null);Rie.displayName="HookFormContext";const KI=()=>le.useContext(Rie);var Iie=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(i,o,{get:()=>{const a=o;return e._proxyFormState[a]!==nd.all&&(e._proxyFormState[a]=!r||nd.all),n&&(n[a]=!0),t[a]}});return i};const JI=typeof window<"u"?le.useLayoutEffect:le.useEffect;function S8e(t){const e=KI(),{control:n=e.control,disabled:r,name:i,exact:o}=t||{},[a,s]=le.useState(n._formState),u=le.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return JI(()=>n._subscribe({name:i,formState:u.current,exact:o,callback:d=>{!r&&s({...n._formState,...d})}}),[i,r,o]),le.useEffect(()=>{u.current.isValid&&n._setValid(!0)},[n]),le.useMemo(()=>Iie(a,n,u.current,!1),[a,n])}var sh=t=>typeof t=="string",Qz=(t,e,n,r,i)=>sh(t)?(r&&e.watch.add(t),kn(n,t,i)):Array.isArray(t)?t.map(o=>(r&&e.watch.add(o),kn(n,o))):(r&&(e.watchAll=!0),n),Uz=t=>ru(t)||!Aie(t);function Tf(t,e,n=new WeakSet){if(Uz(t)||Uz(e))return Object.is(t,e);if(s_(t)&&s_(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const o of r){const a=t[o];if(!i.includes(o))return!1;if(o!=="ref"){const s=e[o];if(s_(a)&&s_(s)||oa(a)&&oa(s)||Array.isArray(a)&&Array.isArray(s)?!Tf(a,s,n):!Object.is(a,s))return!1}}return!0}function C8e(t){const e=KI(),{control:n=e.control,name:r,defaultValue:i,disabled:o,exact:a,compute:s}=t||{},u=le.useRef(i),d=le.useRef(s),m=le.useRef(void 0),v=le.useRef(n),_=le.useRef(r);d.current=s;const[O,E]=le.useState(()=>{const F=n._getWatch(r,u.current);return d.current?d.current(F):F}),A=le.useCallback(F=>{const Q=Qz(r,n._names,F||n._formValues,!1,u.current);return d.current?d.current(Q):Q},[n._formValues,n._names,r]),M=le.useCallback(F=>{if(!o){const Q=Qz(r,n._names,F||n._formValues,!1,u.current);if(d.current){const W=d.current(Q);Tf(W,m.current)||(E(W),m.current=W)}else E(Q)}},[n._formValues,n._names,o,r]);JI(()=>((v.current!==n||!Tf(_.current,r))&&(v.current=n,_.current=r,M()),n._subscribe({name:r,formState:{values:!0},exact:a,callback:F=>{M(F.values)}})),[n,a,r,M]),le.useEffect(()=>n._removeUnmounted());const L=v.current!==n,$=_.current,N=le.useMemo(()=>{if(o)return null;const F=!L&&!Tf($,r);return L||F?A():null},[o,L,r,$,A]);return N!==null?N:O}function T8e(t){const e=KI(),{name:n,disabled:r,control:i=e.control,shouldUnregister:o,defaultValue:a,exact:s=!0}=t,u=Mie(i._names.array,n),d=le.useMemo(()=>kn(i._formValues,n,kn(i._defaultValues,n,a)),[i,n,a]),m=C8e({control:i,name:n,defaultValue:d,exact:s}),v=S8e({control:i,name:n,exact:s}),_=le.useRef(t),O=le.useRef(void 0),E=le.useRef(i.register(n,{...t.rules,value:m,...Ju(t.disabled)?{disabled:t.disabled}:{}}));_.current=t;const A=le.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!kn(v.errors,n)},isDirty:{enumerable:!0,get:()=>!!kn(v.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!kn(v.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!kn(v.validatingFields,n)},error:{enumerable:!0,get:()=>kn(v.errors,n)}}),[v,n]),M=le.useCallback(F=>E.current.onChange({target:{value:Pie(F),name:n},type:CM.CHANGE}),[n]),L=le.useCallback(()=>E.current.onBlur({target:{value:kn(i._formValues,n),name:n},type:CM.BLUR}),[n,i._formValues]),$=le.useCallback(F=>{const Q=kn(i._fields,n);Q&&Q._f&&F&&(Q._f.ref={focus:()=>yc(F.focus)&&F.focus(),select:()=>yc(F.select)&&F.select(),setCustomValidity:W=>yc(F.setCustomValidity)&&F.setCustomValidity(W),reportValidity:()=>yc(F.reportValidity)&&F.reportValidity()})},[i._fields,n]),N=le.useMemo(()=>({name:n,value:m,...Ju(r)||v.disabled?{disabled:v.disabled||r}:{},onChange:M,onBlur:L,ref:$}),[n,r,v.disabled,M,L,$,m]);return le.useEffect(()=>{const F=i._options.shouldUnregister||o,Q=O.current;Q&&Q!==n&&!u&&i.unregister(Q),i.register(n,{..._.current.rules,...Ju(_.current.disabled)?{disabled:_.current.disabled}:{}});const W=(H,te)=>{const ne=kn(i._fields,H);ne&&ne._f&&(ne._f.mount=te)};if(W(n,!0),F){const H=Vo(kn(i._options.defaultValues,n,_.current.defaultValue));oo(i._defaultValues,n,H),Do(kn(i._formValues,n))&&oo(i._formValues,n,H)}return!u&&i.register(n),O.current=n,()=>{(u?F&&!i._state.action:F)?i.unregister(n):W(n,!1)}},[n,i,u,o]),le.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),le.useMemo(()=>({field:N,formState:v,fieldState:A}),[N,v,A])}const k8e=t=>t.render(T8e(t));var E8e=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},uu=t=>Array.isArray(t)?t:[t],zq=()=>{let t=[];return{get observers(){return t},next:i=>{for(const o of t)o.next&&o.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(o=>o!==i)}}),unsubscribe:()=>{t=[]}}};function Die(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],o=e[r];if(i&&oa(i)&&o){const a=Die(i,o);oa(a)&&(n[r]=a)}else t[r]&&(n[r]=o)}return n}var Nl=t=>oa(t)&&!Object.keys(t).length,T9=t=>t.type==="file",TM=t=>{if(!S9)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Lie=t=>t.type==="select-multiple",k9=t=>t.type==="radio",A8e=t=>k9(t)||Jk(t),xL=t=>TM(t)&&t.isConnected;function P8e(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Do(t)?r++:t[e[r++]];return t}function M8e(t){for(const e in t)if(t.hasOwnProperty(e)&&!Do(t[e]))return!1;return!0}function Ds(t,e){const n=Array.isArray(e)?e:XI(e)?[e]:C9(e),r=n.length===1?t:P8e(t,n),i=n.length-1,o=n[i];return r&&delete r[o],i!==0&&(oa(r)&&Nl(r)||Array.isArray(r)&&M8e(r))&&Ds(t,n.slice(0,-1)),t}var R8e=t=>{for(const e in t)if(yc(t[e]))return!0;return!1};function $ie(t){return Array.isArray(t)||oa(t)&&!R8e(t)}function Zz(t,e={}){for(const n in t){const r=t[n];$ie(r)?(e[n]=Array.isArray(r)?[]:{},Zz(r,e[n])):Do(r)||(e[n]=!0)}return e}function rw(t,e,n){n||(n=Zz(e));for(const r in t){const i=t[r];if($ie(i))Do(e)||Uz(n[r])?n[r]=Zz(i,Array.isArray(i)?[]:{}):rw(i,ru(e)?{}:e[r],n[r]);else{const o=e[r];n[r]=!Tf(i,o)}}return n}const Nq={value:!1,isValid:!1},Bq={value:!0,isValid:!0};var zie=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Do(t[0].attributes.value)?Do(t[0].value)||t[0].value===""?Bq:{value:t[0].value,isValid:!0}:Bq:Nq}return Nq},Nie=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Do(t)?t:e?t===""?NaN:t&&+t:n&&sh(t)?new Date(t):r?r(t):t;const Fq={isValid:!1,value:null};var Bie=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,Fq):Fq;function jq(t){const e=t.ref;return T9(e)?e.files:k9(e)?Bie(t.refs).value:Lie(e)?[...e.selectedOptions].map(({value:n})=>n):Jk(e)?zie(t.refs).value:Nie(Do(e.value)?t.ref.value:e.value,t)}var I8e=(t,e,n,r)=>{const i={};for(const o of t){const a=kn(e,o);a&&oo(i,o,a._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},kM=t=>t instanceof RegExp,G2=t=>Do(t)?t:kM(t)?t.source:oa(t)?kM(t.value)?t.value.source:t.value:t,fw=t=>({isOnSubmit:!t||t===nd.onSubmit,isOnBlur:t===nd.onBlur,isOnChange:t===nd.onChange,isOnAll:t===nd.all,isOnTouch:t===nd.onTouched});const Vq="AsyncFunction";var D8e=t=>!!t&&!!t.validate&&!!(yc(t.validate)&&t.validate.constructor.name===Vq||oa(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Vq)),L8e=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),qz=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Rw=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const o=kn(t,i);if(o){const{_f:a,...s}=o;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],i)&&!r)return!0;if(a.ref&&e(a.ref,a.name)&&!r)return!0;if(Rw(s,e))break}else if(oa(s)&&Rw(s,e))break}}};function Qq(t,e,n){const r=kn(t,n);if(r||XI(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const o=i.join("."),a=kn(e,o),s=kn(t,o);if(a&&!Array.isArray(a)&&n!==o)return{name:n};if(s&&s.type)return{name:o,error:s};if(s&&s.root&&s.root.type)return{name:`${o}.root`,error:s.root};i.pop()}return{name:n}}var $8e=(t,e,n,r)=>{n(t);const{name:i,...o}=t;return Nl(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(a=>e[a]===(!r||nd.all))},z8e=(t,e,n)=>!t||!e||t===e||uu(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),N8e=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,B8e=(t,e)=>!YI(kn(t,e)).length&&Ds(t,e),Fie=(t,e,n)=>{const r=uu(kn(t,n));return oo(r,"root",e[n]),oo(t,n,r),t};function Uq(t,e,n="validate"){if(sh(t)||Array.isArray(t)&&t.every(sh)||Ju(t)&&!t)return{type:n,message:sh(t)?t:"",ref:e}}var U1=t=>oa(t)&&!kM(t)?t:{value:t,message:""},Wz=async(t,e,n,r,i,o)=>{const{ref:a,refs:s,required:u,maxLength:d,minLength:m,min:v,max:_,pattern:O,validate:E,name:A,valueAsNumber:M,mount:L}=t._f,$=kn(n,A);if(!L||e.has(A))return{};const N=s?s[0]:a,F=re=>{i&&N.reportValidity&&(N.setCustomValidity(Ju(re)?"":re||""),N.reportValidity())},Q={},W=k9(a),H=Jk(a),te=W||H,ne=(M||T9(a))&&Do(a.value)&&Do($)||TM(a)&&a.value===""||$===""||Array.isArray($)&&!$.length,ce=E8e.bind(null,A,r,Q),we=(re,se,be,fe=Mg.maxLength,ve=Mg.minLength)=>{const Me=re?se:be;Q[A]={type:re?fe:ve,message:Me,ref:a,...ce(re?fe:ve,Me)}};if(o?!Array.isArray($)||!$.length:u&&(!te&&(ne||ru($))||Ju($)&&!$||H&&!zie(s).isValid||W&&!Bie(s).isValid)){const{value:re,message:se}=sh(u)?{value:!!u,message:u}:U1(u);if(re&&(Q[A]={type:Mg.required,message:se,ref:N,...ce(Mg.required,se)},!r))return F(se),Q}if(!ne&&(!ru(v)||!ru(_))){let re,se;const be=U1(_),fe=U1(v);if(!ru($)&&!isNaN($)){const ve=a.valueAsNumber||$&&+$;ru(be.value)||(re=ve>be.value),ru(fe.value)||(se=ve<fe.value)}else{const ve=a.valueAsDate||new Date($),Me=Ce=>new Date(new Date().toDateString()+" "+Ce),Ne=a.type=="time",Qe=a.type=="week";sh(be.value)&&$&&(re=Ne?Me($)>Me(be.value):Qe?$>be.value:ve>new Date(be.value)),sh(fe.value)&&$&&(se=Ne?Me($)<Me(fe.value):Qe?$<fe.value:ve<new Date(fe.value))}if((re||se)&&(we(!!re,be.message,fe.message,Mg.max,Mg.min),!r))return F(Q[A].message),Q}if((d||m)&&!ne&&(sh($)||o&&Array.isArray($))){const re=U1(d),se=U1(m),be=!ru(re.value)&&$.length>+re.value,fe=!ru(se.value)&&$.length<+se.value;if((be||fe)&&(we(be,re.message,se.message),!r))return F(Q[A].message),Q}if(O&&!ne&&sh($)){const{value:re,message:se}=U1(O);if(kM(re)&&!$.match(re)&&(Q[A]={type:Mg.pattern,message:se,ref:a,...ce(Mg.pattern,se)},!r))return F(se),Q}if(E){if(yc(E)){const re=await E($,n),se=Uq(re,N);if(se&&(Q[A]={...se,...ce(Mg.validate,se.message)},!r))return F(se.message),Q}else if(oa(E)){let re={};for(const se in E){if(!Nl(re)&&!r)break;const be=Uq(await E[se]($,n),N,se);be&&(re={...be,...ce(se,be.message)},F(be.message),r&&(Q[A]=re))}if(!Nl(re)&&(Q[A]={ref:N,...re},!r))return Q}}return F(!0),Q};const F8e={mode:nd.onSubmit,reValidateMode:nd.onChange,shouldFocusError:!0};function j8e(t={}){let e={...F8e,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:yc(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=oa(e.defaultValues)||oa(e.values)?Vo(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:Vo(i),a={action:!1,mount:!1,watch:!1,keepIsValid:!1},s={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,d=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={...m};let _={...v};const O={array:zq(),state:zq()},E=e.criteriaMode===nd.all,A=je=>Ye=>{clearTimeout(d),d=setTimeout(je,Ye)},M=async je=>{if(!a.keepIsValid&&!e.disabled&&(v.isValid||_.isValid||je)){let Ye;e.resolver?(Ye=Nl((await te()).errors),L()):Ye=await ce(r,!0),Ye!==n.isValid&&O.state.next({isValid:Ye})}},L=(je,Ye)=>{!e.disabled&&(v.isValidating||v.validatingFields||_.isValidating||_.validatingFields)&&((je||Array.from(s.mount)).forEach(vt=>{vt&&(Ye?oo(n.validatingFields,vt,Ye):Ds(n.validatingFields,vt))}),O.state.next({validatingFields:n.validatingFields,isValidating:!Nl(n.validatingFields)}))},$=(je,Ye=[],vt,kt,jt=!0,Oe=!0)=>{if(kt&&vt&&!e.disabled){if(a.action=!0,Oe&&Array.isArray(kn(r,je))){const ae=vt(kn(r,je),kt.argA,kt.argB);jt&&oo(r,je,ae)}if(Oe&&Array.isArray(kn(n.errors,je))){const ae=vt(kn(n.errors,je),kt.argA,kt.argB);jt&&oo(n.errors,je,ae),B8e(n.errors,je)}if((v.touchedFields||_.touchedFields)&&Oe&&Array.isArray(kn(n.touchedFields,je))){const ae=vt(kn(n.touchedFields,je),kt.argA,kt.argB);jt&&oo(n.touchedFields,je,ae)}(v.dirtyFields||_.dirtyFields)&&(n.dirtyFields=rw(i,o)),O.state.next({name:je,isDirty:re(je,Ye),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else oo(o,je,Ye)},N=(je,Ye)=>{oo(n.errors,je,Ye),O.state.next({errors:n.errors})},F=je=>{n.errors=je,O.state.next({errors:n.errors,isValid:!1})},Q=(je,Ye,vt,kt)=>{const jt=kn(r,je);if(jt){const Oe=kn(o,je,Do(vt)?kn(i,je):vt);Do(Oe)||kt&&kt.defaultChecked||Ye?oo(o,je,Ye?Oe:jq(jt._f)):fe(je,Oe),a.mount&&!a.action&&M()}},W=(je,Ye,vt,kt,jt)=>{let Oe=!1,ae=!1;const K={name:je};if(!e.disabled){if(!vt||kt){(v.isDirty||_.isDirty)&&(ae=n.isDirty,n.isDirty=K.isDirty=re(),Oe=ae!==K.isDirty);const _e=Tf(kn(i,je),Ye);ae=!!kn(n.dirtyFields,je),_e?Ds(n.dirtyFields,je):oo(n.dirtyFields,je,!0),K.dirtyFields=n.dirtyFields,Oe=Oe||(v.dirtyFields||_.dirtyFields)&&ae!==!_e}if(vt){const _e=kn(n.touchedFields,je);_e||(oo(n.touchedFields,je,vt),K.touchedFields=n.touchedFields,Oe=Oe||(v.touchedFields||_.touchedFields)&&_e!==vt)}Oe&&jt&&O.state.next(K)}return Oe?K:{}},H=(je,Ye,vt,kt)=>{const jt=kn(n.errors,je),Oe=(v.isValid||_.isValid)&&Ju(Ye)&&n.isValid!==Ye;if(e.delayError&&vt?(u=A(()=>N(je,vt)),u(e.delayError)):(clearTimeout(d),u=null,vt?oo(n.errors,je,vt):Ds(n.errors,je)),(vt?!Tf(jt,vt):jt)||!Nl(kt)||Oe){const ae={...kt,...Oe&&Ju(Ye)?{isValid:Ye}:{},errors:n.errors,name:je};n={...n,...ae},O.state.next(ae)}},te=async je=>(L(je,!0),await e.resolver(o,e.context,I8e(je||s.mount,r,e.criteriaMode,e.shouldUseNativeValidation))),ne=async je=>{const{errors:Ye}=await te(je);if(L(je),je)for(const vt of je){const kt=kn(Ye,vt);kt?oo(n.errors,vt,kt):Ds(n.errors,vt)}else n.errors=Ye;return Ye},ce=async(je,Ye,vt={valid:!0})=>{for(const kt in je){const jt=je[kt];if(jt){const{_f:Oe,...ae}=jt;if(Oe){const K=s.array.has(Oe.name),_e=jt._f&&D8e(jt._f);_e&&v.validatingFields&&L([Oe.name],!0);const $e=await Wz(jt,s.disabled,o,E,e.shouldUseNativeValidation&&!Ye,K);if(_e&&v.validatingFields&&L([Oe.name]),$e[Oe.name]&&(vt.valid=!1,Ye))break;!Ye&&(kn($e,Oe.name)?K?Fie(n.errors,$e,Oe.name):oo(n.errors,Oe.name,$e[Oe.name]):Ds(n.errors,Oe.name))}!Nl(ae)&&await ce(ae,Ye,vt)}}return vt.valid},we=()=>{for(const je of s.unMount){const Ye=kn(r,je);Ye&&(Ye._f.refs?Ye._f.refs.every(vt=>!xL(vt)):!xL(Ye._f.ref))&&yt(je)}s.unMount=new Set},re=(je,Ye)=>!e.disabled&&(je&&Ye&&oo(o,je,Ye),!Tf(Ae(),i)),se=(je,Ye,vt)=>Qz(je,s,{...a.mount?o:Do(Ye)?i:sh(je)?{[je]:Ye}:Ye},vt,Ye),be=je=>YI(kn(a.mount?o:i,je,e.shouldUnregister?kn(i,je,[]):[])),fe=(je,Ye,vt={})=>{const kt=kn(r,je);let jt=Ye;if(kt){const Oe=kt._f;Oe&&(!Oe.disabled&&oo(o,je,Nie(Ye,Oe)),jt=TM(Oe.ref)&&ru(Ye)?"":Ye,Lie(Oe.ref)?[...Oe.ref.options].forEach(ae=>ae.selected=jt.includes(ae.value)):Oe.refs?Jk(Oe.ref)?Oe.refs.forEach(ae=>{(!ae.defaultChecked||!ae.disabled)&&(Array.isArray(jt)?ae.checked=!!jt.find(K=>K===ae.value):ae.checked=jt===ae.value||!!jt)}):Oe.refs.forEach(ae=>ae.checked=ae.value===jt):T9(Oe.ref)?Oe.ref.value="":(Oe.ref.value=jt,Oe.ref.type||O.state.next({name:je,values:Vo(o)})))}(vt.shouldDirty||vt.shouldTouch)&&W(je,jt,vt.shouldTouch,vt.shouldDirty,!0),vt.shouldValidate&&Ce(je)},ve=(je,Ye,vt)=>{for(const kt in Ye){if(!Ye.hasOwnProperty(kt))return;const jt=Ye[kt],Oe=je+"."+kt,ae=kn(r,Oe);(s.array.has(je)||oa(jt)||ae&&!ae._f)&&!s_(jt)?ve(Oe,jt,vt):fe(Oe,jt,vt)}},Me=(je,Ye,vt={})=>{const kt=kn(r,je),jt=s.array.has(je),Oe=Vo(Ye);oo(o,je,Oe),jt?(O.array.next({name:je,values:Vo(o)}),(v.isDirty||v.dirtyFields||_.isDirty||_.dirtyFields)&&vt.shouldDirty&&O.state.next({name:je,dirtyFields:rw(i,o),isDirty:re(je,Oe)})):kt&&!kt._f&&!ru(Oe)?ve(je,Oe,vt):fe(je,Oe,vt),qz(je,s)&&O.state.next({...n,name:je}),O.state.next({name:a.mount?je:void 0,values:Vo(o)})},Ne=async je=>{a.mount=!0;const Ye=je.target;let vt=Ye.name,kt=!0;const jt=kn(r,vt),Oe=_e=>{kt=Number.isNaN(_e)||s_(_e)&&isNaN(_e.getTime())||Tf(_e,kn(o,vt,_e))},ae=fw(e.mode),K=fw(e.reValidateMode);if(jt){let _e,$e;const ze=Ye.type?jq(jt._f):Pie(je),nt=je.type===CM.BLUR||je.type===CM.FOCUS_OUT,tt=!L8e(jt._f)&&!e.resolver&&!kn(n.errors,vt)&&!jt._f.deps||N8e(nt,kn(n.touchedFields,vt),n.isSubmitted,K,ae),Ke=qz(vt,s,nt);oo(o,vt,ze),nt?(!Ye||!Ye.readOnly)&&(jt._f.onBlur&&jt._f.onBlur(je),u&&u(0)):jt._f.onChange&&jt._f.onChange(je);const at=W(vt,ze,nt),St=!Nl(at)||Ke;if(!nt&&O.state.next({name:vt,type:je.type,values:Vo(o)}),tt)return(v.isValid||_.isValid)&&(e.mode==="onBlur"?nt&&M():nt||M()),St&&O.state.next({name:vt,...Ke?{}:at});if(!nt&&Ke&&O.state.next({...n}),e.resolver){const{errors:st}=await te([vt]);if(L([vt]),Oe(ze),kt){const $t=Qq(n.errors,r,vt),sn=Qq(st,r,$t.name||vt);_e=sn.error,vt=sn.name,$e=Nl(st)}}else L([vt],!0),_e=(await Wz(jt,s.disabled,o,E,e.shouldUseNativeValidation))[vt],L([vt]),Oe(ze),kt&&(_e?$e=!1:(v.isValid||_.isValid)&&($e=await ce(r,!0)));kt&&(jt._f.deps&&(!Array.isArray(jt._f.deps)||jt._f.deps.length>0)&&Ce(jt._f.deps),H(vt,$e,_e,at))}},Qe=(je,Ye)=>{if(kn(n.errors,Ye)&&je.focus)return je.focus(),1},Ce=async(je,Ye={})=>{let vt,kt;const jt=uu(je);if(e.resolver){const Oe=await ne(Do(je)?je:jt);vt=Nl(Oe),kt=je?!jt.some(ae=>kn(Oe,ae)):vt}else je?(kt=(await Promise.all(jt.map(async Oe=>{const ae=kn(r,Oe);return await ce(ae&&ae._f?{[Oe]:ae}:ae)}))).every(Boolean),!(!kt&&!n.isValid)&&M()):kt=vt=await ce(r);return O.state.next({...!sh(je)||(v.isValid||_.isValid)&&vt!==n.isValid?{}:{name:je},...e.resolver||!je?{isValid:vt}:{},errors:n.errors}),Ye.shouldFocus&&!kt&&Rw(r,Qe,je?jt:s.mount),kt},Ae=(je,Ye)=>{let vt={...a.mount?o:i};return Ye&&(vt=Die(Ye.dirtyFields?n.dirtyFields:n.touchedFields,vt)),Do(je)?vt:sh(je)?kn(vt,je):je.map(kt=>kn(vt,kt))},Xe=(je,Ye)=>({invalid:!!kn((Ye||n).errors,je),isDirty:!!kn((Ye||n).dirtyFields,je),error:kn((Ye||n).errors,je),isValidating:!!kn(n.validatingFields,je),isTouched:!!kn((Ye||n).touchedFields,je)}),ke=je=>{je&&uu(je).forEach(Ye=>Ds(n.errors,Ye)),O.state.next({errors:je?n.errors:{}})},ft=(je,Ye,vt)=>{const kt=(kn(r,je,{_f:{}})._f||{}).ref,jt=kn(n.errors,je)||{},{ref:Oe,message:ae,type:K,..._e}=jt;oo(n.errors,je,{..._e,...Ye,ref:kt}),O.state.next({name:je,errors:n.errors,isValid:!1}),vt&&vt.shouldFocus&&kt&&kt.focus&&kt.focus()},pt=(je,Ye)=>yc(je)?O.state.subscribe({next:vt=>"values"in vt&&je(se(void 0,Ye),vt)}):se(je,Ye,!0),lt=je=>O.state.subscribe({next:Ye=>{z8e(je.name,Ye.name,je.exact)&&$8e(Ye,je.formState||v,Cn,je.reRenderRoot)&&je.callback({values:{...o},...n,...Ye,defaultValues:i})}}).unsubscribe,ot=je=>(a.mount=!0,_={..._,...je.formState},lt({...je,formState:{...m,...je.formState}})),yt=(je,Ye={})=>{for(const vt of je?uu(je):s.mount)s.mount.delete(vt),s.array.delete(vt),Ye.keepValue||(Ds(r,vt),Ds(o,vt)),!Ye.keepError&&Ds(n.errors,vt),!Ye.keepDirty&&Ds(n.dirtyFields,vt),!Ye.keepTouched&&Ds(n.touchedFields,vt),!Ye.keepIsValidating&&Ds(n.validatingFields,vt),!e.shouldUnregister&&!Ye.keepDefaultValue&&Ds(i,vt);O.state.next({values:Vo(o)}),O.state.next({...n,...Ye.keepDirty?{isDirty:re()}:{}}),!Ye.keepIsValid&&M()},Et=({disabled:je,name:Ye})=>{(Ju(je)&&a.mount||je||s.disabled.has(Ye))&&(je?s.disabled.add(Ye):s.disabled.delete(Ye))},Tt=(je,Ye={})=>{let vt=kn(r,je);const kt=Ju(Ye.disabled)||Ju(e.disabled);return oo(r,je,{...vt||{},_f:{...vt&&vt._f?vt._f:{ref:{name:je}},name:je,mount:!0,...Ye}}),s.mount.add(je),vt?Et({disabled:Ju(Ye.disabled)?Ye.disabled:e.disabled,name:je}):Q(je,!0,Ye.value),{...kt?{disabled:Ye.disabled||e.disabled}:{},...e.progressive?{required:!!Ye.required,min:G2(Ye.min),max:G2(Ye.max),minLength:G2(Ye.minLength),maxLength:G2(Ye.maxLength),pattern:G2(Ye.pattern)}:{},name:je,onChange:Ne,onBlur:Ne,ref:jt=>{if(jt){Tt(je,Ye),vt=kn(r,je);const Oe=Do(jt.value)&&jt.querySelectorAll&&jt.querySelectorAll("input,select,textarea")[0]||jt,ae=A8e(Oe),K=vt._f.refs||[];if(ae?K.find(_e=>_e===Oe):Oe===vt._f.ref)return;oo(r,je,{_f:{...vt._f,...ae?{refs:[...K.filter(xL),Oe,...Array.isArray(kn(i,je))?[{}]:[]],ref:{type:Oe.type,name:je}}:{ref:Oe}}}),Q(je,!1,void 0,Oe)}else vt=kn(r,je,{}),vt._f&&(vt._f.mount=!1),(e.shouldUnregister||Ye.shouldUnregister)&&!(Mie(s.array,je)&&a.action)&&s.unMount.add(je)}}},Ht=()=>e.shouldFocusError&&Rw(r,Qe,s.mount),wt=je=>{Ju(je)&&(O.state.next({disabled:je}),Rw(r,(Ye,vt)=>{const kt=kn(r,vt);kt&&(Ye.disabled=kt._f.disabled||je,Array.isArray(kt._f.refs)&&kt._f.refs.forEach(jt=>{jt.disabled=kt._f.disabled||je}))},0,!1))},un=(je,Ye)=>async vt=>{let kt;vt&&(vt.preventDefault&&vt.preventDefault(),vt.persist&&vt.persist());let jt=Vo(o);if(O.state.next({isSubmitting:!0}),e.resolver){const{errors:Oe,values:ae}=await te();L(),n.errors=Oe,jt=Vo(ae)}else await ce(r);if(s.disabled.size)for(const Oe of s.disabled)Ds(jt,Oe);if(Ds(n.errors,"root"),Nl(n.errors)){O.state.next({errors:{}});try{await je(jt,vt)}catch(Oe){kt=Oe}}else Ye&&await Ye({...n.errors},vt),Ht(),setTimeout(Ht);if(O.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Nl(n.errors)&&!kt,submitCount:n.submitCount+1,errors:n.errors}),kt)throw kt},Gt=(je,Ye={})=>{kn(r,je)&&(Do(Ye.defaultValue)?Me(je,Vo(kn(i,je))):(Me(je,Ye.defaultValue),oo(i,je,Vo(Ye.defaultValue))),Ye.keepTouched||Ds(n.touchedFields,je),Ye.keepDirty||(Ds(n.dirtyFields,je),n.isDirty=Ye.defaultValue?re(je,Vo(kn(i,je))):re()),Ye.keepError||(Ds(n.errors,je),v.isValid&&M()),O.state.next({...n}))},Jt=(je,Ye={})=>{const vt=je?Vo(je):i,kt=Vo(vt),jt=Nl(je),Oe=jt?i:kt;if(Ye.keepDefaultValues||(i=vt),!Ye.keepValues){if(Ye.keepDirtyValues){const ae=new Set([...s.mount,...Object.keys(rw(i,o))]);for(const K of Array.from(ae))kn(n.dirtyFields,K)?oo(Oe,K,kn(o,K)):Me(K,kn(Oe,K))}else{if(S9&&Do(je))for(const ae of s.mount){const K=kn(r,ae);if(K&&K._f){const _e=Array.isArray(K._f.refs)?K._f.refs[0]:K._f.ref;if(TM(_e)){const $e=_e.closest("form");if($e){$e.reset();break}}}}if(Ye.keepFieldsRef)for(const ae of s.mount)Me(ae,kn(Oe,ae));else r={}}o=e.shouldUnregister?Ye.keepDefaultValues?Vo(i):{}:Vo(Oe),O.array.next({values:{...Oe}}),O.state.next({values:{...Oe}})}s={mount:Ye.keepDirtyValues?s.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!v.isValid||!!Ye.keepIsValid||!!Ye.keepDirtyValues||!e.shouldUnregister&&!Nl(Oe),a.watch=!!e.shouldUnregister,a.keepIsValid=!!Ye.keepIsValid,a.action=!1,Ye.keepErrors||(n.errors={}),O.state.next({submitCount:Ye.keepSubmitCount?n.submitCount:0,isDirty:jt?!1:Ye.keepDirty?n.isDirty:!!(Ye.keepDefaultValues&&!Tf(je,i)),isSubmitted:Ye.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:jt?{}:Ye.keepDirtyValues?Ye.keepDefaultValues&&o?rw(i,o):n.dirtyFields:Ye.keepDefaultValues&&je?rw(i,je):Ye.keepDirty?n.dirtyFields:{},touchedFields:Ye.keepTouched?n.touchedFields:{},errors:Ye.keepErrors?n.errors:{},isSubmitSuccessful:Ye.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Sn=(je,Ye)=>Jt(yc(je)?je(o):je,{...e.resetOptions,...Ye}),nn=(je,Ye={})=>{const vt=kn(r,je),kt=vt&&vt._f;if(kt){const jt=kt.refs?kt.refs[0]:kt.ref;jt.focus&&setTimeout(()=>{jt.focus(),Ye.shouldSelect&&yc(jt.select)&&jt.select()})}},Cn=je=>{n={...n,...je}},Gn={control:{register:Tt,unregister:yt,getFieldState:Xe,handleSubmit:un,setError:ft,_subscribe:lt,_runSchema:te,_updateIsValidating:L,_focusError:Ht,_getWatch:se,_getDirty:re,_setValid:M,_setFieldArray:$,_setDisabledField:Et,_setErrors:F,_getFieldArray:be,_reset:Jt,_resetDefaultValues:()=>yc(e.defaultValues)&&e.defaultValues().then(je=>{Sn(je,e.resetOptions),O.state.next({isLoading:!1})}),_removeUnmounted:we,_disableForm:wt,_subjects:O,_proxyFormState:v,get _fields(){return r},get _formValues(){return o},get _state(){return a},set _state(je){a=je},get _defaultValues(){return i},get _names(){return s},set _names(je){s=je},get _formState(){return n},get _options(){return e},set _options(je){e={...e,...je}}},subscribe:ot,trigger:Ce,register:Tt,handleSubmit:un,watch:pt,setValue:Me,getValues:Ae,reset:Sn,resetField:Gt,clearErrors:ke,unregister:yt,setError:ft,setFocus:nn,getFieldState:Xe};return{...Gn,formControl:Gn}}var S0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const t=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=(Math.random()*16+t)%16|0;return(e=="x"?n:n&3|8).toString(16)})},_L=(t,e,n={})=>n.shouldFocus||Do(n.shouldFocus)?n.focusName||`${t}.${Do(n.focusIndex)?e:n.focusIndex}.`:"",bL=(t,e)=>[...t,...uu(e)],wL=t=>Array.isArray(t)?t.map(()=>{}):void 0;function OL(t,e,n){return[...t.slice(0,e),...uu(n),...t.slice(e)]}var SL=(t,e,n)=>Array.isArray(t)?(Do(t[n])&&(t[n]=void 0),t.splice(n,0,t.splice(e,1)[0]),t):[],CL=(t,e)=>[...uu(e),...uu(t)];function V8e(t,e){let n=0;const r=[...t];for(const i of e)r.splice(i-n,1),n++;return YI(r).length?r:[]}var TL=(t,e)=>Do(e)?[]:V8e(t,uu(e).sort((n,r)=>n-r)),kL=(t,e,n)=>{[t[e],t[n]]=[t[n],t[e]]},Zq=(t,e,n)=>(t[e]=n,t);function Q8e(t){const e=KI(),{control:n=e.control,name:r,keyName:i="id",shouldUnregister:o,rules:a}=t,[s,u]=le.useState(n._getFieldArray(r)),d=le.useRef(n._getFieldArray(r).map(S0)),m=le.useRef(!1);n._names.array.add(r),le.useMemo(()=>a&&s.length>=0&&n.register(r,a),[n,r,s.length,a]),JI(()=>n._subjects.array.subscribe({next:({values:F,name:Q})=>{if(Q===r||!Q){const W=kn(F,r);Array.isArray(W)&&(u(W),d.current=W.map(S0))}}}).unsubscribe,[n,r]);const v=le.useCallback(F=>{m.current=!0,n._setFieldArray(r,F)},[n,r]),_=(F,Q)=>{const W=uu(Vo(F)),H=bL(n._getFieldArray(r),W);n._names.focus=_L(r,H.length-1,Q),d.current=bL(d.current,W.map(S0)),v(H),u(H),n._setFieldArray(r,H,bL,{argA:wL(F)})},O=(F,Q)=>{const W=uu(Vo(F)),H=CL(n._getFieldArray(r),W);n._names.focus=_L(r,0,Q),d.current=CL(d.current,W.map(S0)),v(H),u(H),n._setFieldArray(r,H,CL,{argA:wL(F)})},E=F=>{const Q=TL(n._getFieldArray(r),F);d.current=TL(d.current,F),v(Q),u(Q),!Array.isArray(kn(n._fields,r))&&oo(n._fields,r,void 0),n._setFieldArray(r,Q,TL,{argA:F})},A=(F,Q,W)=>{const H=uu(Vo(Q)),te=OL(n._getFieldArray(r),F,H);n._names.focus=_L(r,F,W),d.current=OL(d.current,F,H.map(S0)),v(te),u(te),n._setFieldArray(r,te,OL,{argA:F,argB:wL(Q)})},M=(F,Q)=>{const W=n._getFieldArray(r);kL(W,F,Q),kL(d.current,F,Q),v(W),u(W),n._setFieldArray(r,W,kL,{argA:F,argB:Q},!1)},L=(F,Q)=>{const W=n._getFieldArray(r);SL(W,F,Q),SL(d.current,F,Q),v(W),u(W),n._setFieldArray(r,W,SL,{argA:F,argB:Q},!1)},$=(F,Q)=>{const W=Vo(Q),H=Zq(n._getFieldArray(r),F,W);d.current=[...H].map((te,ne)=>!te||ne===F?S0():d.current[ne]),v(H),u([...H]),n._setFieldArray(r,H,Zq,{argA:F,argB:W},!0,!1)},N=F=>{const Q=uu(Vo(F));d.current=Q.map(S0),v([...Q]),u([...Q]),n._setFieldArray(r,[...Q],W=>W,{},!0,!1)};return le.useEffect(()=>{if(n._state.action=!1,qz(r,n._names)&&n._subjects.state.next({...n._formState}),m.current&&(!fw(n._options.mode).isOnSubmit||n._formState.isSubmitted)&&!fw(n._options.reValidateMode).isOnSubmit)if(n._options.resolver)n._runSchema([r]).then(F=>{n._updateIsValidating([r]);const Q=kn(F.errors,r),W=kn(n._formState.errors,r);(W?!Q&&W.type||Q&&(W.type!==Q.type||W.message!==Q.message):Q&&Q.type)&&(Q?oo(n._formState.errors,r,Q):Ds(n._formState.errors,r),n._subjects.state.next({errors:n._formState.errors}))});else{const F=kn(n._fields,r);F&&F._f&&!(fw(n._options.reValidateMode).isOnSubmit&&fw(n._options.mode).isOnSubmit)&&Wz(F,n._names.disabled,n._formValues,n._options.criteriaMode===nd.all,n._options.shouldUseNativeValidation,!0).then(Q=>!Nl(Q)&&n._subjects.state.next({errors:Fie(n._formState.errors,Q,r)}))}n._subjects.state.next({name:r,values:Vo(n._formValues)}),n._names.focus&&Rw(n._fields,(F,Q)=>{if(n._names.focus&&Q.startsWith(n._names.focus)&&F.focus)return F.focus(),1}),n._names.focus="",n._setValid(),m.current=!1},[s,r,n]),le.useEffect(()=>(!kn(n._formValues,r)&&n._setFieldArray(r),()=>{const F=(Q,W)=>{const H=kn(n._fields,Q);H&&H._f&&(H._f.mount=W)};n._options.shouldUnregister||o?n.unregister(r):F(r,!1)}),[r,n,i,o]),{swap:le.useCallback(M,[v,r,n]),move:le.useCallback(L,[v,r,n]),prepend:le.useCallback(O,[v,r,n]),append:le.useCallback(_,[v,r,n]),remove:le.useCallback(E,[v,r,n]),insert:le.useCallback(A,[v,r,n]),update:le.useCallback($,[v,r,n]),replace:le.useCallback(N,[v,r,n]),fields:le.useMemo(()=>s.map((F,Q)=>({...F,[i]:d.current[Q]||S0()})),[s,i])}}function E9(t={}){const e=le.useRef(void 0),n=le.useRef(void 0),[r,i]=le.useState({isDirty:!1,isValidating:!1,isLoading:yc(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:yc(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!yc(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:a,...s}=j8e(t);e.current={...s,formState:r}}const o=e.current.control;return o._options=t,JI(()=>{const a=o._subscribe({formState:o._proxyFormState,callback:()=>i({...o._formState}),reRenderRoot:!0});return i(s=>({...s,isReady:!0})),o._formState.isReady=!0,a},[o]),le.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),le.useEffect(()=>{t.mode&&(o._options.mode=t.mode),t.reValidateMode&&(o._options.reValidateMode=t.reValidateMode)},[o,t.mode,t.reValidateMode]),le.useEffect(()=>{t.errors&&(o._setErrors(t.errors),o._focusError())},[o,t.errors]),le.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,t.shouldUnregister]),le.useEffect(()=>{if(o._proxyFormState.isDirty){const a=o._getDirty();a!==r.isDirty&&o._subjects.state.next({isDirty:a})}},[o,r.isDirty]),le.useEffect(()=>{var a;t.values&&!Tf(t.values,n.current)?(o._reset(t.values,{keepFieldsRef:!0,...o._options.resetOptions}),!((a=o._options.resetOptions)===null||a===void 0)&&a.keepIsValid||o._setValid(),n.current=t.values,i(s=>({...s}))):o._resetDefaultValues()},[o,t.values]),le.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=Iie(r,o),e.current}var EL={exports:{}},io={};var qq;function U8e(){if(qq)return io;qq=1;var t=60103,e=60106,n=60107,r=60108,i=60114,o=60109,a=60110,s=60112,u=60113,d=60120,m=60115,v=60116,_=60121,O=60122,E=60117,A=60129,M=60131;if(typeof Symbol=="function"&&Symbol.for){var L=Symbol.for;t=L("react.element"),e=L("react.portal"),n=L("react.fragment"),r=L("react.strict_mode"),i=L("react.profiler"),o=L("react.provider"),a=L("react.context"),s=L("react.forward_ref"),u=L("react.suspense"),d=L("react.suspense_list"),m=L("react.memo"),v=L("react.lazy"),_=L("react.block"),O=L("react.server.block"),E=L("react.fundamental"),A=L("react.debug_trace_mode"),M=L("react.legacy_hidden")}function $(se){if(typeof se=="object"&&se!==null){var be=se.$$typeof;switch(be){case t:switch(se=se.type,se){case n:case i:case r:case u:case d:return se;default:switch(se=se&&se.$$typeof,se){case a:case s:case v:case m:case o:return se;default:return be}}case e:return be}}}var N=o,F=t,Q=s,W=n,H=v,te=m,ne=e,ce=i,we=r,re=u;return io.ContextConsumer=a,io.ContextProvider=N,io.Element=F,io.ForwardRef=Q,io.Fragment=W,io.Lazy=H,io.Memo=te,io.Portal=ne,io.Profiler=ce,io.StrictMode=we,io.Suspense=re,io.isAsyncMode=function(){return!1},io.isConcurrentMode=function(){return!1},io.isContextConsumer=function(se){return $(se)===a},io.isContextProvider=function(se){return $(se)===o},io.isElement=function(se){return typeof se=="object"&&se!==null&&se.$$typeof===t},io.isForwardRef=function(se){return $(se)===s},io.isFragment=function(se){return $(se)===n},io.isLazy=function(se){return $(se)===v},io.isMemo=function(se){return $(se)===m},io.isPortal=function(se){return $(se)===e},io.isProfiler=function(se){return $(se)===i},io.isStrictMode=function(se){return $(se)===r},io.isSuspense=function(se){return $(se)===u},io.isValidElementType=function(se){return typeof se=="string"||typeof se=="function"||se===n||se===i||se===A||se===r||se===u||se===d||se===M||typeof se=="object"&&se!==null&&(se.$$typeof===v||se.$$typeof===m||se.$$typeof===o||se.$$typeof===a||se.$$typeof===s||se.$$typeof===E||se.$$typeof===_||se[0]===O)},io.typeOf=$,io}var Wq;function Z8e(){return Wq||(Wq=1,EL.exports=U8e()),EL.exports}Z8e();let Hq=t=>typeof t=="object"&&t!=null&&t.nodeType===1,Gq=(t,e)=>(!e||t!=="hidden")&&t!=="visible"&&t!=="clip",AL=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){let n=getComputedStyle(t,null);return Gq(n.overflowY,e)||Gq(n.overflowX,e)||(r=>{let i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(t)}return!1},JA=(t,e,n,r,i,o,a,s)=>o<t&&a>e||o>t&&a<e?0:o<=t&&s<=n||a>=e&&s>=n?o-t-r:a>e&&s<n||o<t&&s>n?a-e+i:0,q8e=t=>{let e=t.parentElement;return e??(t.getRootNode().host||null)};var W8e=(t,e)=>{var n,r,i,o,a,s;if(typeof document>"u")return[];let{inline:u,boundary:d,skipOverflowHiddenElements:m}=e,v=typeof d=="function"?d:re=>re!==d;if(!Hq(t))throw new TypeError("Invalid target");let _=document.scrollingElement||document.documentElement,O=[],E=t;for(;Hq(E)&&v(E);){if(E=q8e(E),E===_){O.push(E);break}E!=null&&E===document.body&&AL(E)&&!AL(document.documentElement)||E!=null&&AL(E,m)&&O.push(E)}let A=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,M=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,L=(a=window.scrollX)!=null?a:pageXOffset,$=(s=window.scrollY)!=null?s:pageYOffset,{height:N,width:F,top:Q,right:W,bottom:H,left:te}=t.getBoundingClientRect(),ne=Q,ce=u==="center"?te+F/2:u==="end"?W:te,we=[];for(let re=0;re<O.length;re++){let se=O[re],{height:be,width:fe,top:ve,right:Me,bottom:Ne,left:Qe}=se.getBoundingClientRect();if(Q>=0&&te>=0&&H<=M&&W<=A&&Q>=ve&&H<=Ne&&te>=Qe&&W<=Me)return we;let Ce=getComputedStyle(se),Ae=parseInt(Ce.borderLeftWidth,10),Xe=parseInt(Ce.borderTopWidth,10),ke=parseInt(Ce.borderRightWidth,10),ft=parseInt(Ce.borderBottomWidth,10),pt=0,lt=0,ot="offsetWidth"in se?se.offsetWidth-se.clientWidth-Ae-ke:0,yt="offsetHeight"in se?se.offsetHeight-se.clientHeight-Xe-ft:0,Et="offsetWidth"in se?se.offsetWidth===0?0:fe/se.offsetWidth:0,Tt="offsetHeight"in se?se.offsetHeight===0?0:be/se.offsetHeight:0;if(_===se)pt=JA($,$+M,M,Xe,ft,$+ne,$+ne+N,N),lt=u==="start"?ce:u==="center"?ce-A/2:u==="end"?ce-A:JA(L,L+A,A,Ae,ke,L+ce,L+ce+F,F),pt=Math.max(0,pt+$),lt=Math.max(0,lt+L);else{pt=JA(ve,Ne,be,Xe,ft+yt,ne,ne+N,N),lt=u==="start"?ce-Qe-Ae:u==="center"?ce-(Qe+fe/2)+ot/2:u==="end"?ce-Me+ke+ot:JA(Qe,Me,fe,Ae,ke+ot,ce,ce+F,F);let{scrollLeft:Ht,scrollTop:wt}=se;pt=Math.max(0,Math.min(wt+pt/Tt,se.scrollHeight-be/Tt+yt)),lt=Math.max(0,Math.min(Ht+lt/Et,se.scrollWidth-fe/Et+ot)),ne+=wt-pt,ce+=Ht-lt}we.push({el:se,top:pt,left:lt})}return we},H8e=0;function jie(){}function G8e(t,e){if(t){var n=W8e(t,{boundary:e});n.forEach(function(r){var i=r.el,o=r.top,a=r.left;i.scrollTop=o,i.scrollLeft=a})}}function Xq(t,e,n){var r=t===e||e instanceof n.Node&&t.contains&&t.contains(e);return r}function Vie(t,e){var n;function r(){n&&clearTimeout(n)}function i(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];r(),n=setTimeout(function(){n=null,t.apply(void 0,a)},e)}return i.cancel=r,i}function Rg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return e.some(function(s){return s&&s.apply(void 0,[r].concat(o)),r.preventDownshiftDefault||r.hasOwnProperty("nativeEvent")&&r.nativeEvent.preventDownshiftDefault})}}function eP(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){e.forEach(function(i){typeof i=="function"?i(r):i&&(i.current=r)})}}function X8e(){return String(H8e++)}function Y8e(t){var e=t.isOpen,n=t.resultCount,r=t.previousResultCount;return e?n?n!==r?n+" result"+(n===1?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":""}function Hz(t,e){return Object.keys(t).reduce(function(n,r){return n[r]=Qie(e,r)?e[r]:t[r],n},{})}function Qie(t,e){return t[e]!==void 0}function K8e(t){var e=t.key,n=t.keyCode;return n>=37&&n<=40&&e.indexOf("Arrow")!==0?"Arrow"+e:e}function tP(t,e,n,r,i){if(i===void 0&&(i=!0),n===0)return-1;var o=n-1;(typeof e!="number"||e<0||e>=n)&&(e=t>0?-1:o+1);var a=e+t;a<0?a=i?o:0:a>o&&(a=i?0:o);var s=IT(t,a,n,r,i);return s===-1?e>=n?-1:e:s}function IT(t,e,n,r,i){var o=r(e);if(!o||!o.hasAttribute("disabled"))return e;if(t>0){for(var a=e+1;a<n;a++)if(!r(a).hasAttribute("disabled"))return a}else for(var s=e-1;s>=0;s--)if(!r(s).hasAttribute("disabled"))return s;return i?t>0?IT(1,0,n,r,!1):IT(-1,n-1,n,r,!1):-1}function Yq(t,e,n,r){return r===void 0&&(r=!0),e.some(function(i){return i&&(Xq(i,t,n)||r&&Xq(i,n.document.activeElement,n))})}var J8e=Vie(function(t){Uie(t).textContent=""},500);function e9e(t,e){var n=Uie(e);t&&(n.textContent=t,J8e(e))}function Uie(t){t===void 0&&(t=document);var e=t.getElementById("a11y-status-message");return e||(e=t.createElement("div"),e.setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),t.body.appendChild(e),e)}var t9e=["isInitialMount","highlightedIndex","items","environment"],Zie={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function n9e(t,e,n){var r=t.props,i=t.type,o={};Object.keys(e).forEach(function(a){r9e(a,t,e,n),n[a]!==e[a]&&(o[a]=n[a])}),r.onStateChange&&Object.keys(o).length&&r.onStateChange(Io({type:i},o))}function r9e(t,e,n,r){var i=e.props,o=e.type,a="on"+A9(t)+"Change";i[a]&&r[t]!==void 0&&r[t]!==n[t]&&i[a](Io({type:o},r))}function i9e(t,e){return e.changes}function o9e(t){var e=t.selectedItem,n=t.itemToString;return e?n(e)+" has been selected.":""}var s9e=Vie(function(t,e){e9e(t(),e)},200),a9e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect;function l9e(t){var e=t.id,n=e===void 0?"downshift-"+X8e():e,r=t.labelId,i=t.menuId,o=t.getItemId,a=t.toggleButtonId,s=t.inputId,u=j.useRef({labelId:r||n+"-label",menuId:i||n+"-menu",getItemId:o||function(d){return n+"-item-"+d},toggleButtonId:a||n+"-toggle-button",inputId:s||n+"-input"});return u.current}function c9e(t,e,n,r){var i,o;if(t===void 0){if(e===void 0)throw new Error(r);i=n[e],o=e}else o=e===void 0?n.indexOf(t):e,i=t;return[i,o]}function u9e(t){return t?String(t):""}function A9(t){return""+t.slice(0,1).toUpperCase()+t.slice(1)}function qie(t){var e=j.useRef(t);return e.current=t,e}function h9e(t,e,n){var r=j.useRef(),i=j.useRef(),o=j.useCallback(function(_,O){i.current=O,_=Hz(_,O.props);var E=t(_,O),A=O.props.stateReducer(_,Io({},O,{changes:E}));return A},[t]),a=j.useReducer(o,e),s=a[0],u=a[1],d=qie(n),m=j.useCallback(function(_){return u(Io({props:d.current},_))},[d]),v=i.current;return j.useEffect(function(){v&&r.current&&r.current!==s&&n9e(v,Hz(r.current,v.props),s),r.current=s},[s,n,v]),[s,m]}var QC={itemToString:u9e,stateReducer:i9e,getA11ySelectionMessage:o9e,scrollIntoView:G8e,environment:typeof window>"u"?{}:window};function im(t,e,n){n===void 0&&(n=Zie);var r=t["default"+A9(e)];return r!==void 0?r:n[e]}function nP(t,e,n){n===void 0&&(n=Zie);var r=t[e];if(r!==void 0)return r;var i=t["initial"+A9(e)];return i!==void 0?i:im(t,e,n)}function d9e(t){var e=nP(t,"selectedItem"),n=nP(t,"isOpen"),r=nP(t,"highlightedIndex"),i=nP(t,"inputValue");return{highlightedIndex:r<0&&e&&n?t.items.indexOf(e):r,isOpen:n,selectedItem:e,inputValue:i}}function UC(t,e,n){var r=t.items,i=t.initialHighlightedIndex,o=t.defaultHighlightedIndex,a=e.selectedItem,s=e.highlightedIndex;return r.length===0?-1:i!==void 0&&s===i?i:o!==void 0?o:a?r.indexOf(a):n===0?-1:n<0?r.length-1:0}function f9e(t,e,n,r){var i=j.useRef({isMouseDown:!1,isTouchMove:!1});return j.useEffect(function(){if(n?.addEventListener!=null){var o=function(){i.current.isMouseDown=!0},a=function(v){i.current.isMouseDown=!1,t&&!Yq(v.target,e.map(function(_){return _.current}),n)&&r()},s=function(){i.current.isTouchMove=!1},u=function(){i.current.isTouchMove=!0},d=function(v){t&&!i.current.isTouchMove&&!Yq(v.target,e.map(function(_){return _.current}),n,!1)&&r()};return n.addEventListener("mousedown",o),n.addEventListener("mouseup",a),n.addEventListener("touchstart",s),n.addEventListener("touchmove",u),n.addEventListener("touchend",d),function(){n.removeEventListener("mousedown",o),n.removeEventListener("mouseup",a),n.removeEventListener("touchstart",s),n.removeEventListener("touchmove",u),n.removeEventListener("touchend",d)}}},[t,n]),i}var p9e=function(){return jie};function Kq(t,e,n){var r=n.isInitialMount,i=n.highlightedIndex,o=n.items,a=n.environment,s=Jx(n,t9e);j.useEffect(function(){r||s9e(function(){return t(Io({highlightedIndex:i,highlightedItem:o[i],resultCount:o.length},s))},a.document)},e)}function m9e(t){var e=t.highlightedIndex,n=t.isOpen,r=t.itemRefs,i=t.getItemNodeFromIndex,o=t.menuElement,a=t.scrollIntoView,s=j.useRef(!0);return a9e(function(){e<0||!n||!Object.keys(r.current).length||(s.current===!1?s.current=!0:a(i(e),o))},[e]),s}var g9e=jie;function Jq(t,e,n){var r;n===void 0&&(n=!0);var i=((r=t.items)==null?void 0:r.length)&&e>=0;return Io({isOpen:!1,highlightedIndex:-1},i&&Io({selectedItem:t.items[e],isOpen:im(t,"isOpen"),highlightedIndex:im(t,"highlightedIndex")},n&&{inputValue:t.itemToString(t.items[e])}))}function y9e(t,e,n){var r=e.type,i=e.props,o;switch(r){case n.ItemMouseMove:o={highlightedIndex:e.disabled?-1:e.index};break;case n.MenuMouseLeave:o={highlightedIndex:-1};break;case n.ToggleButtonClick:case n.FunctionToggleMenu:o={isOpen:!t.isOpen,highlightedIndex:t.isOpen?-1:UC(i,t,0)};break;case n.FunctionOpenMenu:o={isOpen:!0,highlightedIndex:UC(i,t,0)};break;case n.FunctionCloseMenu:o={isOpen:!1};break;case n.FunctionSetHighlightedIndex:o={highlightedIndex:e.highlightedIndex};break;case n.FunctionSetInputValue:o={inputValue:e.inputValue};break;case n.FunctionReset:o={highlightedIndex:im(i,"highlightedIndex"),isOpen:im(i,"isOpen"),selectedItem:im(i,"selectedItem"),inputValue:im(i,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return Io({},t,o)}bn.array.isRequired,bn.func,bn.func,bn.func,bn.number,bn.number,bn.number,bn.bool,bn.bool,bn.bool,bn.any,bn.any,bn.any,bn.string,bn.string,bn.string,bn.func,bn.string,bn.func,bn.func,bn.func,bn.func,bn.func,bn.shape({addEventListener:bn.func,removeEventListener:bn.func,document:bn.shape({getElementById:bn.func,activeElement:bn.any,body:bn.any})});function v9e(t){var e=t.isOpen,n=t.resultCount,r=t.previousResultCount;return e?n?n!==r?"".concat(n," result").concat(n===1?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}Jh(Jh({},QC),{getA11yStatusMessage:v9e});var P9=0,M9=1,R9=2,I9=3,D9=4,L9=5,$9=6,z9=7,N9=8,EM=9,B9=10,Wie=11,Hie=12,F9=13,Gie=14,Xie=15,Yie=16,Kie=17,Jie=18,j9=19,eoe=20,toe=21,V9=22,noe=Object.freeze({__proto__:null,InputKeyDownArrowDown:P9,InputKeyDownArrowUp:M9,InputKeyDownEscape:R9,InputKeyDownHome:I9,InputKeyDownEnd:D9,InputKeyDownPageUp:L9,InputKeyDownPageDown:$9,InputKeyDownEnter:z9,InputChange:N9,InputBlur:EM,InputFocus:B9,MenuMouseLeave:Wie,ItemMouseMove:Hie,ItemClick:F9,ToggleButtonClick:Gie,FunctionToggleMenu:Xie,FunctionOpenMenu:Yie,FunctionCloseMenu:Kie,FunctionSetHighlightedIndex:Jie,FunctionSelectItem:j9,FunctionSetInputValue:eoe,FunctionReset:toe,ControlledPropUpdatedSelectedItem:V9});function x9e(t){var e=d9e(t),n=e.selectedItem,r=e.inputValue;return r===""&&n&&t.defaultInputValue===void 0&&t.initialInputValue===void 0&&t.inputValue===void 0&&(r=t.itemToString(n)),Io({},e,{inputValue:r})}bn.array.isRequired,bn.func,bn.func,bn.func,bn.func,bn.number,bn.number,bn.number,bn.bool,bn.bool,bn.bool,bn.any,bn.any,bn.any,bn.string,bn.string,bn.string,bn.string,bn.string,bn.string,bn.func,bn.string,bn.string,bn.func,bn.func,bn.func,bn.func,bn.func,bn.func,bn.shape({addEventListener:bn.func,removeEventListener:bn.func,document:bn.shape({getElementById:bn.func,activeElement:bn.any,body:bn.any})});function _9e(t,e,n){var r=j.useRef(),i=h9e(t,e,n),o=i[0],a=i[1];return j.useEffect(function(){Qie(n,"selectedItem")&&(n.selectedItemChanged(r.current,n.selectedItem)&&a({type:V9,inputValue:n.itemToString(n.selectedItem)}),r.current=o.selectedItem===r.current?n.selectedItem:o.selectedItem)},[o.selectedItem,n.selectedItem]),[Hz(o,n),a]}var b9e=Io({},QC,{selectedItemChanged:function(e,n){return e!==n},getA11yStatusMessage:Y8e});function w9e(t,e){var n,r=e.type,i=e.props,o=e.altKey,a;switch(r){case F9:a={isOpen:im(i,"isOpen"),highlightedIndex:im(i,"highlightedIndex"),selectedItem:i.items[e.index],inputValue:i.itemToString(i.items[e.index])};break;case P9:t.isOpen?a={highlightedIndex:tP(1,t.highlightedIndex,i.items.length,e.getItemNodeFromIndex,!0)}:a={highlightedIndex:o&&t.selectedItem==null?-1:UC(i,t,1,e.getItemNodeFromIndex),isOpen:i.items.length>=0};break;case M9:t.isOpen?o?a=Jq(i,t.highlightedIndex):a={highlightedIndex:tP(-1,t.highlightedIndex,i.items.length,e.getItemNodeFromIndex,!0)}:a={highlightedIndex:UC(i,t,-1,e.getItemNodeFromIndex),isOpen:i.items.length>=0};break;case z9:a=Jq(i,t.highlightedIndex);break;case R9:a=Io({isOpen:!1,highlightedIndex:-1},!t.isOpen&&{selectedItem:null,inputValue:""});break;case L9:a={highlightedIndex:tP(-10,t.highlightedIndex,i.items.length,e.getItemNodeFromIndex,!1)};break;case $9:a={highlightedIndex:tP(10,t.highlightedIndex,i.items.length,e.getItemNodeFromIndex,!1)};break;case I9:a={highlightedIndex:IT(1,0,i.items.length,e.getItemNodeFromIndex,!1)};break;case D9:a={highlightedIndex:IT(-1,i.items.length-1,i.items.length,e.getItemNodeFromIndex,!1)};break;case EM:a=Io({isOpen:!1,highlightedIndex:-1},t.highlightedIndex>=0&&((n=i.items)==null?void 0:n.length)&&e.selectItem&&{selectedItem:i.items[t.highlightedIndex],inputValue:i.itemToString(i.items[t.highlightedIndex])});break;case N9:a={isOpen:!0,highlightedIndex:im(i,"highlightedIndex"),inputValue:e.inputValue};break;case B9:a={isOpen:!0,highlightedIndex:UC(i,t,0)};break;case j9:a={selectedItem:e.selectedItem,inputValue:i.itemToString(e.selectedItem)};break;case V9:a={inputValue:e.inputValue};break;default:return y9e(t,e,noe)}return Io({},t,a)}var O9e=["onMouseLeave","refKey","ref"],S9e=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],C9e=["onClick","onPress","refKey","ref"],T9e=["onKeyDown","onChange","onInput","onFocus","onBlur","onChangeText","refKey","ref"];roe.stateChangeTypes=noe;function roe(t){t===void 0&&(t={});var e=Io({},b9e,t),n=e.initialIsOpen,r=e.defaultIsOpen,i=e.items,o=e.scrollIntoView,a=e.environment,s=e.getA11yStatusMessage,u=e.getA11ySelectionMessage,d=e.itemToString,m=x9e(e),v=_9e(w9e,m,e),_=v[0],O=v[1],E=_.isOpen,A=_.highlightedIndex,M=_.selectedItem,L=_.inputValue,$=j.useRef(null),N=j.useRef({}),F=j.useRef(null),Q=j.useRef(null),W=j.useRef(!0),H=l9e(e),te=j.useRef(),ne=qie({state:_,props:e}),ce=j.useCallback(function(ot){return N.current[H.getItemId(ot)]},[H]);Kq(s,[E,A,L,i],Io({isInitialMount:W.current,previousResultCount:te.current,items:i,environment:a,itemToString:d},_)),Kq(u,[M],Io({isInitialMount:W.current,previousResultCount:te.current,items:i,environment:a,itemToString:d},_));var we=m9e({menuElement:$.current,highlightedIndex:A,isOpen:E,itemRefs:N,scrollIntoView:o,getItemNodeFromIndex:ce});g9e({isInitialMount:W.current}),j.useEffect(function(){var ot=n||r||E;ot&&F.current&&F.current.focus()},[]),j.useEffect(function(){W.current||(te.current=i.length)});var re=f9e(E,[F,$,Q],a,function(){O({type:EM,selectItem:!1})}),se=p9e();j.useEffect(function(){return W.current=!1,function(){W.current=!0}},[]),j.useEffect(function(){var ot;if(!E)N.current={};else if(((ot=a.document)==null?void 0:ot.activeElement)!==F.current){var yt;F==null||(yt=F.current)==null||yt.focus()}},[E,a]);var be=j.useMemo(function(){return{ArrowDown:function(yt){yt.preventDefault(),O({type:P9,altKey:yt.altKey,getItemNodeFromIndex:ce})},ArrowUp:function(yt){yt.preventDefault(),O({type:M9,altKey:yt.altKey,getItemNodeFromIndex:ce})},Home:function(yt){ne.current.state.isOpen&&(yt.preventDefault(),O({type:I9,getItemNodeFromIndex:ce}))},End:function(yt){ne.current.state.isOpen&&(yt.preventDefault(),O({type:D9,getItemNodeFromIndex:ce}))},Escape:function(yt){var Et=ne.current.state;(Et.isOpen||Et.inputValue||Et.selectedItem||Et.highlightedIndex>-1)&&(yt.preventDefault(),O({type:R9}))},Enter:function(yt){var Et=ne.current.state;!Et.isOpen||yt.which===229||(yt.preventDefault(),O({type:z9,getItemNodeFromIndex:ce}))},PageUp:function(yt){ne.current.state.isOpen&&(yt.preventDefault(),O({type:L9,getItemNodeFromIndex:ce}))},PageDown:function(yt){ne.current.state.isOpen&&(yt.preventDefault(),O({type:$9,getItemNodeFromIndex:ce}))}}},[O,ne,ce]),fe=j.useCallback(function(ot){return Io({id:H.labelId,htmlFor:H.inputId},ot)},[H]),ve=j.useCallback(function(ot,yt){var Et,Tt=ot===void 0?{}:ot,Ht=Tt.onMouseLeave,wt=Tt.refKey,un=wt===void 0?"ref":wt,Gt=Tt.ref,Jt=Jx(Tt,O9e),Sn=yt===void 0?{}:yt;return Sn.suppressRefError,Io((Et={},Et[un]=eP(Gt,function(nn){$.current=nn}),Et.id=H.menuId,Et.role="listbox",Et["aria-labelledby"]=Jt&&Jt["aria-label"]?void 0:""+H.labelId,Et.onMouseLeave=Rg(Ht,function(){O({type:Wie})}),Et),Jt)},[O,se,H]),Me=j.useCallback(function(ot){var yt,Et,Tt=ot===void 0?{}:ot,Ht=Tt.item,wt=Tt.index,un=Tt.refKey,Gt=un===void 0?"ref":un,Jt=Tt.ref,Sn=Tt.onMouseMove,nn=Tt.onMouseDown,Cn=Tt.onClick;Tt.onPress;var jn=Tt.disabled,Gn=Jx(Tt,S9e),je=ne.current,Ye=je.props,vt=je.state,kt=c9e(Ht,wt,Ye.items,"Pass either item or index to getItemProps!"),jt=kt[1],Oe="onClick",ae=Cn,K=function(){jt!==vt.highlightedIndex&&(we.current=!1,O({type:Hie,index:jt,disabled:jn}))},_e=function(){O({type:F9,index:jt})},$e=function(nt){return nt.preventDefault()};return Io((yt={},yt[Gt]=eP(Jt,function(ze){ze&&(N.current[H.getItemId(jt)]=ze)}),yt.disabled=jn,yt.role="option",yt["aria-selected"]=""+(jt===vt.highlightedIndex),yt.id=H.getItemId(jt),yt),!jn&&(Et={},Et[Oe]=Rg(ae,_e),Et),{onMouseMove:Rg(Sn,K),onMouseDown:Rg(nn,$e)},Gn)},[O,ne,we,H]),Ne=j.useCallback(function(ot){var yt,Et=ot===void 0?{}:ot,Tt=Et.onClick;Et.onPress;var Ht=Et.refKey,wt=Ht===void 0?"ref":Ht,un=Et.ref,Gt=Jx(Et,C9e),Jt=ne.current.state,Sn=function(){O({type:Gie})};return Io((yt={},yt[wt]=eP(un,function(nn){Q.current=nn}),yt["aria-controls"]=H.menuId,yt["aria-expanded"]=Jt.isOpen,yt.id=H.toggleButtonId,yt.tabIndex=-1,yt),!Gt.disabled&&Io({},{onClick:Rg(Tt,Sn)}),Gt)},[O,ne,H]),Qe=j.useCallback(function(ot,yt){var Et,Tt=ot===void 0?{}:ot,Ht=Tt.onKeyDown,wt=Tt.onChange,un=Tt.onInput,Gt=Tt.onFocus,Jt=Tt.onBlur;Tt.onChangeText;var Sn=Tt.refKey,nn=Sn===void 0?"ref":Sn,Cn=Tt.ref,jn=Jx(Tt,T9e),Gn=yt===void 0?{}:yt;Gn.suppressRefError;var je=ne.current.state,Ye=function($e){var ze=K8e($e);ze&&be[ze]&&be[ze]($e)},vt=function($e){O({type:N9,inputValue:$e.target.value})},kt=function($e){if(je.isOpen&&!re.current.isMouseDown){var ze=$e.relatedTarget===null&&a.document.activeElement!==a.document.body;O({type:EM,selectItem:!ze})}},jt=function(){je.isOpen||O({type:B9})},Oe="onChange",ae={};if(!jn.disabled){var K;ae=(K={},K[Oe]=Rg(wt,un,vt),K.onKeyDown=Rg(Ht,Ye),K.onBlur=Rg(Jt,kt),K.onFocus=Rg(Gt,jt),K)}return Io((Et={},Et[nn]=eP(Cn,function(_e){F.current=_e}),Et["aria-activedescendant"]=je.isOpen&&je.highlightedIndex>-1?H.getItemId(je.highlightedIndex):"",Et["aria-autocomplete"]="list",Et["aria-controls"]=H.menuId,Et["aria-expanded"]=je.isOpen,Et["aria-labelledby"]=jn&&jn["aria-label"]?void 0:""+H.labelId,Et.autoComplete="off",Et.id=H.inputId,Et.role="combobox",Et.value=je.inputValue,Et),ae,jn)},[se,ne,H,be,O,re,a]),Ce=j.useCallback(function(){O({type:Xie})},[O]),Ae=j.useCallback(function(){O({type:Kie})},[O]),Xe=j.useCallback(function(){O({type:Yie})},[O]),ke=j.useCallback(function(ot){O({type:Jie,highlightedIndex:ot})},[O]),ft=j.useCallback(function(ot){O({type:j9,selectedItem:ot})},[O]),pt=j.useCallback(function(ot){O({type:eoe,inputValue:ot})},[O]),lt=j.useCallback(function(){O({type:toe})},[O]);return{getItemProps:Me,getLabelProps:fe,getMenuProps:ve,getInputProps:Qe,getToggleButtonProps:Ne,toggleMenu:Ce,openMenu:Xe,closeMenu:Ae,setHighlightedIndex:ke,setInputValue:pt,selectItem:ft,reset:lt,highlightedIndex:A,isOpen:E,selectedItem:M,inputValue:L}}bn.array,bn.array,bn.array,bn.func,bn.func,bn.func,bn.number,bn.number,bn.number,bn.func,bn.func,bn.string,bn.string,bn.shape({addEventListener:bn.func,removeEventListener:bn.func,document:bn.shape({getElementById:bn.func,activeElement:bn.any,body:bn.any})});QC.itemToString,QC.stateReducer,QC.environment;const eW=20,ioe=t=>t.suggestions.length>0?le.createElement(k9e,{...t}):le.createElement("input",{className:Ut.textInput,size:40,autoFocus:!0,...t.register(t.inputName)}),k9e=({autofocus:t,suggestions:e,control:n,inputName:r,placeholder:i,initialInputValue:o,setValue:a})=>{const[s,u]=le.useState(e.slice(0,eW)),d=$s(la),m=e.length>0,{isOpen:v,getToggleButtonProps:_,getMenuProps:O,getInputProps:E,highlightedIndex:A,getItemProps:M,selectedItem:L}=roe({initialInputValue:o,onInputValueChange({inputValue:N=""}){a(r,N),N=N.toLowerCase()||"";const F=[];for(const Q of e)if(Q.toLowerCase().includes(N)&&(F.push(Q),F.length>=eW))break;u(F)},items:s,itemToString(N){return N??""}}),$=v&&s.length>0;return le.createElement("div",{className:Ut.downshiftAutocompleteContainer},le.createElement("div",{"data-visible-dropdown":$,className:Ut.downshiftInputWrapper},le.createElement(k8e,{name:r,control:n,render:({field:N})=>{const F=E();return le.createElement("input",{...F,name:N.name,placeholder:i,className:Ut.downshiftInput,size:30,"data-editor-dialog":!0,autoFocus:t})}}),m&&le.createElement("button",{"aria-label":"toggle menu",type:"button",..._()},d("arrow_drop_down"))),le.createElement("div",{className:Ut.downshiftAutocompleteContainer},le.createElement("ul",{...O(),"data-visible":$},s.map((N,F)=>le.createElement("li",{"data-selected":L===N,"data-highlighted":A===F,key:`${N}${F}`,...M({item:N,index:F})},N)))))},E9e=()=>{const[t,e,n,r,i]=us(Gz,g_,pv,N0,DT),o=Ki(loe),a=Ki(soe),s=Bs(),{register:u,handleSubmit:d,control:m,setValue:v,reset:_}=E9({values:e.type==="editing"?e.initialValues:{}}),O=()=>{_({src:"",title:"",altText:"",width:void 0,height:void 0})};return e.type==="inactive"?null:le.createElement(Oie,{open:!0,onOpenChange:E=>{E||(a(),O())}},le.createElement(Sie,{container:n?.current},le.createElement(Cie,{className:Ut.dialogOverlay}),le.createElement(Tie,{className:Ut.dialogContent,onOpenAutoFocus:E=>{E.preventDefault()}},le.createElement(kie,null,s("uploadImage.dialogTitle","Upload an image")),le.createElement("form",{onSubmit:async E=>{E.preventDefault(),E.stopPropagation(),await d(o)(E),O()},className:Ut.multiFieldForm},r===null?le.createElement("input",{type:"hidden",accept:"image/*",...u("file")}):le.createElement("div",{className:Ut.formField},le.createElement("label",{htmlFor:"file"},s("uploadImage.uploadInstructions","Upload an image from your device:")),le.createElement("input",{type:"file",accept:"image/*",...u("file")})),le.createElement("div",{className:Ut.formField},le.createElement("label",{htmlFor:"src"},r!==null?s("uploadImage.addViaUrlInstructions","Or add an image from an URL:"):s("uploadImage.addViaUrlInstructionsNoUpload","Add an image from an URL:")),le.createElement(ioe,{register:u,initialInputValue:e.type==="editing"?e.initialValues.src??"":"",inputName:"src",suggestions:t,setValue:v,control:m,placeholder:s("uploadImage.autoCompletePlaceholder","Select or paste an image src")})),le.createElement("div",{className:Ut.formField},le.createElement("label",{htmlFor:"alt"},s("uploadImage.alt","Alt:")),le.createElement("input",{type:"text",...u("altText"),className:Ut.textInput})),le.createElement("div",{className:Ut.formField},le.createElement("label",{htmlFor:"title"},s("uploadImage.title","Title:")),le.createElement("input",{type:"text",...u("title"),className:Ut.textInput})),i&&le.createElement("div",{className:Ut.imageDimensionsContainer},le.createElement("div",{className:Ut.formField},le.createElement("label",{htmlFor:"width"},s("uploadImage.width","Width:")),le.createElement("input",{type:"number",min:0,...u("width"),className:Ut.textInput})),le.createElement("div",{className:Ut.formField},le.createElement("label",{htmlFor:"height"},s("uploadImage.height","Height:")),le.createElement("input",{type:"number",min:0,...u("height"),className:Ut.textInput}))),le.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--spacing-2)"}},le.createElement("button",{type:"submit",title:s("dialogControls.save","Save"),"aria-label":s("dialogControls.save","Save"),className:ni(Ut.primaryButton)},s("dialogControls.save","Save")),le.createElement(Eie,{asChild:!0},le.createElement("button",{type:"reset",title:s("dialogControls.cancel","Cancel"),"aria-label":s("dialogControls.cancel","Cancel"),className:ni(Ut.secondaryButton)},s("dialogControls.cancel","Cancel"))))))))};function PL(t,e,n){return Math.min(Math.max(t,e),n)}const vo={east:1,north:8,south:2,west:4};function A9e({onResizeStart:t,onResizeEnd:e,imageRef:n,maxWidth:r,editor:i}){const o=j.useRef(null),a=j.useRef({priority:"",value:"default"}),s=j.useRef({currentHeight:0,currentWidth:0,direction:0,isResizing:!1,ratio:0,startHeight:0,startWidth:0,startX:0,startY:0}),u=i.getRootElement(),d=r??(u!==null?u.getBoundingClientRect().width-20:100),m=u!==null?u.getBoundingClientRect().height-20:100,v=100,_=100,O=$=>{const N=$===vo.east||$===vo.west,F=$===vo.north||$===vo.south,Q=$&vo.north&&$&vo.west||$&vo.south&&$&vo.east,W=N?"ew":F?"ns":Q?"nwse":"nesw";u!==null&&u.style.setProperty("cursor",`${W}-resize`,"important"),document.body!==null&&(document.body.style.setProperty("cursor",`${W}-resize`,"important"),a.current.value=document.body.style.getPropertyValue("-webkit-user-select"),a.current.priority=document.body.style.getPropertyPriority("-webkit-user-select"),document.body.style.setProperty("-webkit-user-select","none","important"))},E=()=>{u!==null&&u.style.setProperty("cursor","text"),document.body!==null&&(document.body.style.setProperty("cursor","default"),document.body.style.setProperty("-webkit-user-select",a.current.value,a.current.priority))},A=($,N)=>{if(!i.isEditable())return;const F=n.current,Q=o.current;if(F!==null&&Q!==null){$.preventDefault();const{width:W,height:H}=F.getBoundingClientRect(),te=s.current;te.startWidth=W,te.startHeight=H,te.ratio=W/H,te.currentWidth=W,te.currentHeight=H,te.startX=$.clientX,te.startY=$.clientY,te.isResizing=!0,te.direction=N,O(N),t(),Q.classList.add(Ut.imageControlWrapperResizing),F.style.height=`${H}px`,F.style.width=`${W}px`,document.addEventListener("pointermove",M),document.addEventListener("pointerup",L)}},M=$=>{const N=n.current,F=s.current,Q=F.direction&(vo.east|vo.west),W=F.direction&(vo.south|vo.north);if(N!==null&&F.isResizing)if(Q&&W){let H=Math.floor(F.startX-$.clientX);H=F.direction&vo.east?-H:H;const te=PL(F.startWidth+H,v,d),ne=te/F.ratio;N.style.width=`${te}px`,N.style.height=`${ne}px`,F.currentHeight=ne,F.currentWidth=te}else if(W){let H=Math.floor(F.startY-$.clientY);H=F.direction&vo.south?-H:H;const te=PL(F.startHeight+H,_,m);N.style.height=`${te}px`,F.currentHeight=te}else{let H=Math.floor(F.startX-$.clientX);H=F.direction&vo.east?-H:H;const te=PL(F.startWidth+H,v,d);N.style.width=`${te}px`,F.currentWidth=te}},L=()=>{const $=n.current,N=s.current,F=o.current;if($!==null&&F!==null&&N.isResizing){const Q=N.currentWidth,W=N.currentHeight;N.startWidth=0,N.startHeight=0,N.ratio=0,N.startX=0,N.startY=0,N.currentWidth=0,N.currentHeight=0,N.isResizing=!1,F.classList.remove(Ut.imageControlWrapperResizing),E(),e(Q,W),document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",L)}};return j.createElement("div",{ref:o},j.createElement("div",{className:ni(Ut.imageResizer,Ut.imageResizerN),onPointerDown:$=>{A($,vo.north)}}),j.createElement("div",{className:ni(Ut.imageResizer,Ut.imageResizerNe),onPointerDown:$=>{A($,vo.north|vo.east)}}),j.createElement("div",{className:ni(Ut.imageResizer,Ut.imageResizerE),onPointerDown:$=>{A($,vo.east)}}),j.createElement("div",{className:ni(Ut.imageResizer,Ut.imageResizerSe),onPointerDown:$=>{A($,vo.south|vo.east)}}),j.createElement("div",{className:ni(Ut.imageResizer,Ut.imageResizerS),onPointerDown:$=>{A($,vo.south)}}),j.createElement("div",{className:ni(Ut.imageResizer,Ut.imageResizerSw),onPointerDown:$=>{A($,vo.south|vo.west)}}),j.createElement("div",{className:ni(Ut.imageResizer,Ut.imageResizerW),onPointerDown:$=>{A($,vo.west)}}),j.createElement("div",{className:ni(Ut.imageResizer,Ut.imageResizerNw),onPointerDown:$=>{A($,vo.north|vo.west)}}))}const P9e="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`
    <svg id="imgLoadError" xmlns="http://www.w3.org/2000/svg" width="100" height="100">
      <rect x="0" y="0" width="100" height="100" fill="none" stroke="red" stroke-width="4" stroke-dasharray="4" />
      <text x="50" y="55" text-anchor="middle" font-size="20" fill="red"></text>
    </svg>
`),M9e={__cache:{},read(t){if(this.__cache[t]||(this.__cache[t]=new Promise(e=>{const n=new Image;n.onerror=()=>{this.__cache[t]=P9e,e()},n.onload=()=>{this.__cache[t]=t,e()},n.src=t})),this.__cache[t]instanceof Promise)throw this.__cache[t];return this.__cache[t]}};function R9e({title:t,alt:e,className:n,imageRef:r,src:i,width:o,height:a}){return le.createElement("img",{className:n??void 0,alt:e,src:M9e.read(i),title:t,ref:r,draggable:"false",width:o,height:a})}function I9e({src:t,title:e,alt:n,nodeKey:r,width:i,height:o,rest:a}){const[s,u,d,m,v,_]=us(Kz,Xz,DT,Yz,ml,Jz),O=le.useRef(null),E=le.useRef(null),[A,M,L]=Lne(r),[$]=ql(),[N,F]=le.useState(null),Q=le.useRef(null),[W,H]=le.useState(!1),[te,ne]=le.useState(null),[ce,we]=le.useState(null),re=le.useCallback(Ce=>{if(A&&ss(cn())){Ce.preventDefault();const Xe=Fi(r);AM(Xe)&&Xe.remove()}return!1},[A,r]),se=le.useCallback(Ce=>{const Ae=cn(),Xe=E.current;return A&&ss(Ae)&&Ae.getNodes().length===1&&Xe!==null&&Xe!==document.activeElement?(Ce.preventDefault(),Xe.focus(),!0):!1},[A]),be=le.useCallback(Ce=>E.current===Ce.target?(cs(null),$.update(()=>{M(!0);const Ae=$.getRootElement();Ae!==null&&Ae.focus()}),!0):!1,[$,M]);le.useEffect(()=>{m?(async()=>{ce||we(t);const Ae=await m(t);ne(Ae)})().catch(Ae=>{console.error(Ae)}):ne(t)},[t,m,ce]),le.useEffect(()=>{if(d&&O.current){const{current:Ce}=O;tW(Ce,"width",i),tW(Ce,"height",o)}},[d,i,o]),le.useEffect(()=>{let Ce=!0;const Ae=Wl($.registerUpdateListener(({editorState:Xe})=>{Ce&&F(Xe.read(()=>cn()))}),$.registerCommand(Mk,(Xe,ke)=>(Q.current=ke,!1),bo),$.registerCommand(JR,Xe=>{const ke=Xe;return W?!0:ke.target===O.current?(ke.shiftKey?M(!A):(L(),M(!0)),!0):!1},bo),$.registerCommand(oI,Xe=>Xe.target===O.current?(Xe.preventDefault(),!0):!1,bo),$.registerCommand(r8,re,bo),$.registerCommand(rI,re,bo),$.registerCommand(oO,se,bo),$.registerCommand(Ik,be,bo));return()=>{Ce=!1,Ae()}},[L,$,W,A,r,re,se,be,M]);const fe=(Ce,Ae)=>{setTimeout(()=>{H(!1)},200),$.update(()=>{const Xe=Fi(r);AM(Xe)&&Xe.setWidthAndHeight(Ce,Ae)})},ve=()=>{H(!0)},Me=ss(N),Ne=A,Qe=le.useMemo(()=>{if(a.length===0)return null;const Ce=a.find(Ae=>Ae.type==="mdxJsxAttribute"&&(Ae.name==="class"||Ae.name==="className"));return Ce?Ce.value:null},[a]);return te!==null?le.createElement(le.Suspense,{fallback:s?le.createElement(s,null):null},le.createElement("div",{className:Ut.imageWrapper,"data-editor-block-type":"image"},le.createElement("div",{draggable:Me},le.createElement(R9e,{width:i,height:o,className:ni({[Ut.focusedImage]:Ne},Qe),src:te,title:e??"",alt:n??"",imageRef:O})),Me&&Ne&&!u&&le.createElement(A9e,{editor:$,imageRef:O,onResizeStart:ve,onResizeEnd:fe}),v||le.createElement(_,{nodeKey:r,imageSource:te,initialImagePath:ce,title:e??"",alt:n??"",width:i,height:o}))):null}const tW=(t,e,n)=>{typeof n=="number"?t.style[e]=`${n}px`:t.style.removeProperty(e)};var D9e=Object.defineProperty,L9e=(t,e,n)=>e in t?D9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z1=(t,e,n)=>(L9e(t,typeof e!="symbol"?e+"":e,n),n);function $9e(t){if(t instanceof HTMLImageElement){const{alt:e,src:n,title:r,width:i,height:o}=t;return{node:rb({altText:e,src:n,title:r,width:i,height:o})}}return null}class eE extends gy{constructor(e,n,r,i,o,a,s){super(s),Z1(this,"__src"),Z1(this,"__altText"),Z1(this,"__title"),Z1(this,"__width"),Z1(this,"__height"),Z1(this,"__rest"),this.__src=e,this.__title=r,this.__altText=n,this.__width=i??"inherit",this.__height=o??"inherit",this.__rest=a??[]}static getType(){return"image"}static clone(e){return new eE(e.__src,e.__altText,e.__title,e.__width,e.__height,e.__rest,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__src=e.__src,this.__altText=e.__altText,this.__title=e.__title,this.__width=e.__width,this.__height=e.__height,this.__rest=e.__rest}static importJSON(e){const{altText:n,title:r,src:i,width:o,rest:a,height:s}=e;return rb({altText:n,title:r,src:i,height:s,width:o,rest:a})}exportDOM(){const e=document.createElement("img");return e.setAttribute("src",this.__src),e.setAttribute("alt",this.__altText),this.__title&&e.setAttribute("title",this.__title),this.__width&&e.setAttribute("width",this.__width.toString()),this.__height&&e.setAttribute("height",this.__height.toString()),{element:e}}static importDOM(){return{img:()=>({conversion:$9e,priority:0})}}exportJSON(){return{altText:this.getAltText(),title:this.getTitle(),height:this.__height==="inherit"?0:this.__height,width:this.__width==="inherit"?0:this.__width,src:this.getSrc(),rest:this.__rest,type:"image",version:1}}setWidthAndHeight(e,n){const r=this.getWritable();r.__width=e,r.__height=n}createDOM(e,n){const r=document.createElement("span"),o=e.theme.image;return o!==void 0&&(r.className=o),r}updateDOM(){return!1}getSrc(){return this.__src}getAltText(){return this.__altText}getTitle(){return this.__title}getHeight(){return this.__height}getWidth(){return this.__width}getRest(){return this.__rest}setTitle(e){this.getWritable().__title=e}setSrc(e){this.getWritable().__src=e}setAltText(e){this.getWritable().__altText=e??""}shouldBeSerializedAsElement(){return this.__width!=="inherit"||this.__height!=="inherit"||this.__rest.length>0}decorate(e){return le.createElement(I9e,{src:this.getSrc(),title:this.getTitle(),nodeKey:this.getKey(),width:this.__width,height:this.__height,alt:this.__altText,rest:this.__rest})}}function rb(t){const{altText:e,title:n,src:r,key:i,width:o,height:a,rest:s}=t;return new eE(r,e,n,o,a,s,i)}function AM(t){return t instanceof eE}const z9e={testLexicalNode:AM,visitLexicalNode({mdastParent:t,lexicalNode:e,actions:n}){if(e.shouldBeSerializedAsElement()){const r=new Image;e.getHeight()!=="inherit"&&(r.height=e.getHeight()),e.getWidth()!=="inherit"&&(r.width=e.getWidth()),e.getAltText()&&(r.alt=e.getAltText()),e.getTitle()&&(r.title=e.getTitle());for(const i of e.getRest())i.type==="mdxJsxAttribute"&&typeof i.value=="string"&&r.setAttribute(i.name,i.value);n.appendToParent(t,{type:"html",value:r.outerHTML.replace(/>$/,` src="${e.getSrc()}" />`)})}else n.appendToParent(t,{type:"image",url:e.getSrc(),alt:e.getAltText(),title:e.getTitle()})}},N9e={testNode:"image",visitNode({mdastNode:t,actions:e}){e.addAndStepInto(rb({src:t.url,altText:t.alt??"",title:t.title??""}))}},B9e={testNode:t=>t.type==="html"&&t.value.trim().startsWith("<img"),visitNode({mdastNode:t,lexicalParent:e}){const n=document.createElement("div");n.innerHTML=t.value;const r=n.querySelector("img");if(!r)throw new Error("Invalid HTML image");const i=r.src,o=r.alt,a=r.title,s=r.width,u=r.height,d=rb({src:i||"",altText:o,title:a,width:s,height:u});if(e.getType()==="root"){const m=Oi();m.append(d),e.append(m)}else e.append(d)}};function X2(t,e){const n=t.attributes.find(r=>r.type==="mdxJsxAttribute"&&r.name===e);if(n)return n.value}const F9e={testNode:t=>(t.type==="mdxJsxTextElement"||t.type==="mdxJsxFlowElement")&&t.name==="img",visitNode({mdastNode:t,lexicalParent:e}){const n=X2(t,"src");if(!n)return;const r=X2(t,"alt")??"",i=X2(t,"title"),o=X2(t,"height"),a=X2(t,"width"),s=t.attributes.filter(d=>d.type==="mdxJsxAttribute"&&!["src","alt","title","height","width"].includes(d.name)),u=rb({src:n,altText:r,title:i,width:a?parseInt(a,10):void 0,height:o?parseInt(o,10):void 0,rest:s});if(e.getType()==="root"){const d=Oi();d.append(u),e.append(d)}else e.append(u)}},Q9=As(t=>{t.sub(t.pipe(Q9,Qo(Uo)),([e,n])=>{n?.update(()=>{const r=rb({altText:e.altText??"",src:e.src,title:e.title??"",width:yO(e.width),height:yO(e.height)});JO([r]),ra(r.getParentOrThrow())&&A8(r,Oi).selectEnd()})})}),j9e=As(t=>{t.sub(t.pipe(j9e,Qo(N0)),([e,n])=>{const r=i=>{t.pub(Q9,{...e,src:i})};"file"in e?n?.(e.file).then(r).catch(i=>{throw i}):r(e.src)})}),Gz=In([]),Xz=In(!1),N0=In(null),Yz=In(null),Kz=In(null),g_=In({type:"inactive"},t=>{t.sub(t.pipe(loe,Qo(Uo,N0,g_,DT)),([e,n,r,i,o])=>{const a=i.type==="editing"?s=>{n?.update(()=>{const{nodeKey:u}=i,d=Fi(u);if(d.setTitle(e.title),d.setAltText(e.altText),d.setSrc(s),o){const m=yO(e.width),v=yO(e.height);d.setWidthAndHeight(m??"inherit",v??"inherit")}}),t.pub(g_,{type:"inactive"})}:s=>{t.pub(Q9,{...e,src:s}),t.pub(g_,{type:"inactive"})};e.file&&e.file.length>0?r?.(e.file.item(0)).then(a).catch(s=>{throw s}):e.src&&a(e.src)}),t.pub(AT,e=>{const n=t.getValue(N0);return Wl(e.registerCommand(PM,r=>{const i=rb(r);return JO([i]),ra(i.getParentOrThrow())&&A8(i,Oi).selectEnd(),!0},Lr),e.registerCommand(oI,r=>q9e(r),iM),e.registerCommand(o8,r=>W9e(r,!!n),bo),e.registerCommand(i8,r=>H9e(r,e,t.getValue(N0)),iM),e.registerCommand(Rk,r=>{var i,o;if(!n){let d=Array.from(((i=r.clipboardData)==null?void 0:i.items)??[]);return d=d.filter(m=>m.type.includes("text")),!d.length||d.length===0}const a=Array.from(((o=r.clipboardData)==null?void 0:o.items)??[]);if(a.some(d=>!d.type.includes("image"))||!a.length||a.length===0)return!1;const u=t.getValue(N0);return Promise.all(a.map(d=>u(d.getAsFile()))).then(d=>{d.forEach(m=>{e.dispatchCommand(PM,{src:m,altText:""})})}).catch(d=>{throw d}),!0},gh))})}),V9e=Cm(t=>{t.link(t.pipe(V9e,nee({type:"new"})),g_)}),ooe=As(t=>{t.link(t.pipe(ooe,ny(e=>({type:"editing",...e}))),g_)}),soe=Cm(t=>{t.link(t.pipe(soe,nee({type:"inactive"})),g_)}),aoe=In(!1),DT=In(!1),loe=As(),Jz=In(Vz),yO=t=>{if(typeof t>"u")return;const e=parseInt(String(t),10);return Number.isNaN(e)?void 0:e},Q9e=Zl({init(t,e){t.pubIn({[vd]:[N9e,B9e,F9e],[jf]:eE,[Vf]:z9e,[nb]:e?.ImageDialog??E9e,[N0]:e?.imageUploadHandler??null,[Gz]:e?.imageAutocompleteSuggestions??[],[Xz]:!!e?.disableImageResize,[aoe]:!!e?.disableImageSettingsButton,[DT]:!!e?.allowSetImageDimensions,[Yz]:e?.imagePreviewHandler??null,[Jz]:e?.EditImageToolbar??Vz,[Kz]:e?.imagePlaceholder??$q})},update(t,e){t.pubIn({[N0]:e?.imageUploadHandler??null,[Gz]:e?.imageAutocompleteSuggestions??[],[Xz]:!!e?.disableImageResize,[Yz]:e?.imagePreviewHandler??null,[DT]:!!e?.allowSetImageDimensions,[Jz]:e?.EditImageToolbar??Vz,[Kz]:e?.imagePlaceholder??$q})}}),U9e=t=>Ine?(t??window).getSelection():null,PM=lr("INSERT_IMAGE_COMMAND"),Z9e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function q9e(t){const e=U9();if(!e)return!1;const n=t.dataTransfer;if(!n)return!1;n.setData("text/plain","_");const r=document.createElement("img");return r.src=Z9e,n.setDragImage(r,0,0),n.setData("application/x-lexical-drag",JSON.stringify({data:{altText:e.__altText,title:e.__title,key:e.getKey(),src:e.__src},type:"image"})),!0}function W9e(t,e){var n;if(e){let i=Array.from(((n=t.dataTransfer)==null?void 0:n.items)??[]);if(i=i.filter(o=>o.type.includes("image")),i.length>0)return t.preventDefault(),!0}return U9()?(coe(t)||t.preventDefault(),!0):!1}function H9e(t,e,n){var r;let i=Array.from(((r=t.dataTransfer)==null?void 0:r.items)??[]);if(i=i.filter(s=>s.type.includes("image")),i.length>0&&n!==null)return t.preventDefault(),Promise.all(i.map(s=>s.kind==="string"?new Promise(u=>{s.getAsString(u)}):n(s.getAsFile()))).then(s=>{s.forEach(u=>{e.dispatchCommand(PM,{src:u,altText:""})})}).catch(s=>{throw s}),!0;const o=U9();if(!o)return!1;const a=G9e(t);if(!a)return!1;if(t.preventDefault(),coe(t)){const s=X9e(t);o.remove();const u=KO();s!=null&&u.applyDOMRange(s),cs(u),e.dispatchCommand(PM,a)}return!0}function U9(){const t=cn();if(!ss(t))return null;const n=t.getNodes()[0];return AM(n)?n:null}function G9e(t){var e;const n=(e=t.dataTransfer)==null?void 0:e.getData("application/x-lexical-drag");if(!n)return null;const{type:r,data:i}=JSON.parse(n);return r!=="image"?null:i}function coe(t){const e=t.target;return!!(e&&e instanceof HTMLElement&&e.parentElement)}function X9e(t){let e;const n=t.target,r=n==null?null:n.nodeType===9?n.defaultView:n.ownerDocument.defaultView,i=U9e(r);if(document.caretRangeFromPoint)e=document.caretRangeFromPoint(t.clientX,t.clientY);else if(t.rangeParent&&i!==null)i.collapse(t.rangeParent,t.rangeOffset??0),e=i.getRangeAt(0);else throw Error("Cannot get the selection when dragging");return e}var ML={exports:{}},nW;function Y9e(){return nW||(nW=1,(function(t){(function(){var e;e=t.exports=i,e.format=i,e.vsprintf=r,typeof console<"u"&&typeof console.log=="function"&&(e.printf=n);function n(){console.log(i.apply(null,arguments))}function r(o,a){return i.apply(null,[o].concat(a))}function i(o){for(var a=1,s=[].slice.call(arguments),u=0,d=o.length,m="",v,_=!1,O,E,A=!1,M,L=function(){return s[a++]},$=function(){for(var N="";/\d/.test(o[u]);)N+=o[u++],v=o[u];return N.length>0?parseInt(N):null};u<d;++u)if(v=o[u],_)switch(_=!1,v=="."?(A=!1,v=o[++u]):v=="0"&&o[u+1]=="."?(A=!0,u+=2,v=o[u]):A=!0,M=$(),v){case"b":m+=parseInt(L(),10).toString(2);break;case"c":O=L(),typeof O=="string"||O instanceof String?m+=O:m+=String.fromCharCode(parseInt(O,10));break;case"d":m+=parseInt(L(),10);break;case"f":E=String(parseFloat(L()).toFixed(M||6)),m+=A?E:E.replace(/^0/,"");break;case"j":m+=JSON.stringify(L());break;case"o":m+="0"+parseInt(L(),10).toString(8);break;case"s":m+=L();break;case"x":m+="0x"+parseInt(L(),10).toString(16);break;case"X":m+="0x"+parseInt(L(),10).toString(16).toUpperCase();break;default:m+=v;break}else v==="%"?_=!0:m+=v;return m}})()})(ML)),ML.exports}var K9e=Y9e();const J9e=lv(K9e),rP=Object.assign(Nx(Error),{eval:Nx(EvalError),range:Nx(RangeError),reference:Nx(ReferenceError),syntax:Nx(SyntaxError),type:Nx(TypeError),uri:Nx(URIError)});function Nx(t){return e.displayName=t.displayName||t.name,e;function e(n,...r){const i=n&&J9e(n,...r);return new t(i)}}const iP={}.hasOwnProperty,rW={yaml:"-",toml:"+"};function Z9(t){const e=[];let n=-1;const r=Array.isArray(t)?t:t?[t]:["yaml"];for(;++n<r.length;)e[n]=eFe(r[n]);return e}function eFe(t){let e=t;if(typeof e=="string"){if(!iP.call(rW,e))throw rP("Missing matter definition for `%s`",e);e={type:e,marker:rW[e]}}else if(typeof e!="object")throw rP("Expected matter to be an object, not `%j`",e);if(!iP.call(e,"type"))throw rP("Missing `type` in matter `%j`",e);if(!iP.call(e,"fence")&&!iP.call(e,"marker"))throw rP("Missing `marker` or `fence` in matter `%j`",e);return e}function tFe(t){const e=Z9(t),n={};let r=-1;for(;++r<e.length;){const i=e[r],o=e6(i,"open").charCodeAt(0),a=nFe(i),s=n[o];Array.isArray(s)?s.push(a):n[o]=[a]}return{flow:n}}function nFe(t){const e=t.anywhere,n=t.type,r=n+"Fence",i=r+"Sequence",o=n+"Value",a={tokenize:m,partial:!0};let s,u=0;return{tokenize:d,concrete:!0};function d(v,_,O){const E=this;return A;function A(H){const te=E.now();return te.column===1&&(te.line===1||e)&&(s=e6(t,"open"),u=0,H===s.charCodeAt(u))?(v.enter(n),v.enter(r),v.enter(i),M(H)):O(H)}function M(H){return u===s.length?(v.exit(i),_r(H)?(v.enter("whitespace"),L(H)):$(H)):H===s.charCodeAt(u++)?(v.consume(H),M):O(H)}function L(H){return _r(H)?(v.consume(H),L):(v.exit("whitespace"),$(H))}function $(H){return Mn(H)?(v.exit(r),v.enter("lineEnding"),v.consume(H),v.exit("lineEnding"),s=e6(t,"close"),u=0,v.attempt(a,W,N)):O(H)}function N(H){return H===null||Mn(H)?Q(H):(v.enter(o),F(H))}function F(H){return H===null||Mn(H)?(v.exit(o),Q(H)):(v.consume(H),F)}function Q(H){return H===null?O(H):(v.enter("lineEnding"),v.consume(H),v.exit("lineEnding"),v.attempt(a,W,N))}function W(H){return v.exit(n),_(H)}}function m(v,_,O){let E=0;return A;function A(N){return N===s.charCodeAt(E)?(v.enter(r),v.enter(i),M(N)):O(N)}function M(N){return E===s.length?(v.exit(i),_r(N)?(v.enter("whitespace"),L(N)):$(N)):N===s.charCodeAt(E++)?(v.consume(N),M):O(N)}function L(N){return _r(N)?(v.consume(N),L):(v.exit("whitespace"),$(N))}function $(N){return N===null||Mn(N)?(v.exit(r),_(N)):O(N)}}}function e6(t,e){return t.marker?iW(t.marker,e).repeat(3):iW(t.fence,e)}function iW(t,e){return typeof t=="string"?t:t[e]}function rFe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function iFe(t){const e=Z9(t),n={},r={};let i=-1;for(;++i<e.length;){const o=e[i];n[o.type]=oFe(o),r[o.type]=sFe,r[o.type+"Value"]=aFe}return{enter:n,exit:r}}function oFe(t){return e;function e(n){this.enter({type:t.type,value:""},n),this.buffer()}}function sFe(t){const e=this.resume(),n=this.stack[this.stack.length-1];this.exit(t),n.value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,"")}function aFe(t){this.config.enter.data.call(this,t),this.config.exit.data.call(this,t)}function lFe(t){const e=[],n={},r=Z9(t);let i=-1;for(;++i<r.length;){const o=r[i];n[o.type]=cFe(o);const a=t6(o,"open");e.push({atBreak:!0,character:a.charAt(0),after:rFe(a.charAt(1))})}return{unsafe:e,handlers:n}}function cFe(t){const e=t6(t,"open"),n=t6(t,"close");return r;function r(i){return e+(i.value?`
`+i.value:"")+`
`+n}}function t6(t,e){return t.marker?oW(t.marker,e).repeat(3):oW(t.fence,e)}function oW(t,e){return typeof t=="string"?t:t[e]}function uoe(t){return typeof t>"u"||t===null}function uFe(t){return typeof t=="object"&&t!==null}function hFe(t){return Array.isArray(t)?t:uoe(t)?[]:[t]}function dFe(t,e){var n,r,i,o;if(e)for(o=Object.keys(e),n=0,r=o.length;n<r;n+=1)i=o[n],t[i]=e[i];return t}function fFe(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}function pFe(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var mFe=uoe,gFe=uFe,yFe=hFe,vFe=fFe,xFe=pFe,_Fe=dFe,_a={isNothing:mFe,isObject:gFe,toArray:yFe,repeat:vFe,isNegativeZero:xFe,extend:_Fe};function hoe(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}function LT(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=hoe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}LT.prototype=Object.create(Error.prototype);LT.prototype.constructor=LT;LT.prototype.toString=function(e){return this.name+": "+hoe(this,e)};var vc=LT;function RL(t,e,n,r,i){var o="",a="",s=Math.floor(i/2)-1;return r-e>s&&(o=" ... ",e=r-s+o.length),n-r>s&&(a=" ...",n=r+s-a.length),{str:o+t.slice(e,n).replace(/\t/g,"")+a,pos:r-e+o.length}}function IL(t,e){return _a.repeat(" ",e-t.length)+t}function bFe(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,a=-1;o=n.exec(t.buffer);)i.push(o.index),r.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var s="",u,d,m=Math.min(t.line+e.linesAfter,i.length).toString().length,v=e.maxLength-(e.indent+m+3);for(u=1;u<=e.linesBefore&&!(a-u<0);u++)d=RL(t.buffer,r[a-u],i[a-u],t.position-(r[a]-r[a-u]),v),s=_a.repeat(" ",e.indent)+IL((t.line-u+1).toString(),m)+" | "+d.str+`
`+s;for(d=RL(t.buffer,r[a],i[a],t.position,v),s+=_a.repeat(" ",e.indent)+IL((t.line+1).toString(),m)+" | "+d.str+`
`,s+=_a.repeat("-",e.indent+m+3+d.pos)+`^
`,u=1;u<=e.linesAfter&&!(a+u>=i.length);u++)d=RL(t.buffer,r[a+u],i[a+u],t.position-(r[a]-r[a+u]),v),s+=_a.repeat(" ",e.indent)+IL((t.line+u+1).toString(),m)+" | "+d.str+`
`;return s.replace(/\n$/,"")}var wFe=bFe,OFe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],SFe=["scalar","sequence","mapping"];function CFe(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}function TFe(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(OFe.indexOf(n)===-1)throw new vc('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=CFe(e.styleAliases||null),SFe.indexOf(this.kind)===-1)throw new vc('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var fl=TFe;function sW(t,e){var n=[];return t[e].forEach(function(r){var i=n.length;n.forEach(function(o,a){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=a)}),n[i]=r}),n}function kFe(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}function n6(t){return this.extend(t)}n6.prototype.extend=function(e){var n=[],r=[];if(e instanceof fl)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new vc("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof fl))throw new vc("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new vc("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new vc("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof fl))throw new vc("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(n6.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=sW(i,"implicit"),i.compiledExplicit=sW(i,"explicit"),i.compiledTypeMap=kFe(i.compiledImplicit,i.compiledExplicit),i};var doe=n6,foe=new fl("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),poe=new fl("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),moe=new fl("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),goe=new doe({explicit:[foe,poe,moe]});function EFe(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function AFe(){return null}function PFe(t){return t===null}var yoe=new fl("tag:yaml.org,2002:null",{kind:"scalar",resolve:EFe,construct:AFe,predicate:PFe,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function MFe(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function RFe(t){return t==="true"||t==="True"||t==="TRUE"}function IFe(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var voe=new fl("tag:yaml.org,2002:bool",{kind:"scalar",resolve:MFe,construct:RFe,predicate:IFe,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function DFe(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function LFe(t){return 48<=t&&t<=55}function $Fe(t){return 48<=t&&t<=57}function zFe(t){if(t===null)return!1;var e=t.length,n=0,r=!1,i;if(!e)return!1;if(i=t[n],(i==="-"||i==="+")&&(i=t[++n]),i==="0"){if(n+1===e)return!0;if(i=t[++n],i==="b"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!DFe(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!LFe(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<e;n++)if(i=t[n],i!=="_"){if(!$Fe(t.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}function NFe(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function BFe(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!_a.isNegativeZero(t)}var xoe=new fl("tag:yaml.org,2002:int",{kind:"scalar",resolve:zFe,construct:NFe,predicate:BFe,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),FFe=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function jFe(t){return!(t===null||!FFe.test(t)||t[t.length-1]==="_")}function VFe(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var QFe=/^[-+]?[0-9]+e/;function UFe(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(_a.isNegativeZero(t))return"-0.0";return n=t.toString(10),QFe.test(n)?n.replace("e",".e"):n}function ZFe(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||_a.isNegativeZero(t))}var _oe=new fl("tag:yaml.org,2002:float",{kind:"scalar",resolve:jFe,construct:VFe,predicate:ZFe,represent:UFe,defaultStyle:"lowercase"}),boe=goe.extend({implicit:[yoe,voe,xoe,_oe]}),woe=boe,Ooe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Soe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function qFe(t){return t===null?!1:Ooe.exec(t)!==null||Soe.exec(t)!==null}function WFe(t){var e,n,r,i,o,a,s,u=0,d=null,m,v,_;if(e=Ooe.exec(t),e===null&&(e=Soe.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(o=+e[4],a=+e[5],s=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(m=+e[10],v=+(e[11]||0),d=(m*60+v)*6e4,e[9]==="-"&&(d=-d)),_=new Date(Date.UTC(n,r,i,o,a,s,u)),d&&_.setTime(_.getTime()-d),_}function HFe(t){return t.toISOString()}var Coe=new fl("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:qFe,construct:WFe,instanceOf:Date,represent:HFe});function GFe(t){return t==="<<"||t===null}var Toe=new fl("tag:yaml.org,2002:merge",{kind:"scalar",resolve:GFe}),q9=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function XFe(t){if(t===null)return!1;var e,n,r=0,i=t.length,o=q9;for(n=0;n<i;n++)if(e=o.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function YFe(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,o=q9,a=0,s=[];for(e=0;e<i;e++)e%4===0&&e&&(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)),a=a<<6|o.indexOf(r.charAt(e));return n=i%4*6,n===0?(s.push(a>>16&255),s.push(a>>8&255),s.push(a&255)):n===18?(s.push(a>>10&255),s.push(a>>2&255)):n===12&&s.push(a>>4&255),new Uint8Array(s)}function KFe(t){var e="",n=0,r,i,o=t.length,a=q9;for(r=0;r<o;r++)r%3===0&&r&&(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]),n=(n<<8)+t[r];return i=o%3,i===0?(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]):i===2?(e+=a[n>>10&63],e+=a[n>>4&63],e+=a[n<<2&63],e+=a[64]):i===1&&(e+=a[n>>2&63],e+=a[n<<4&63],e+=a[64],e+=a[64]),e}function JFe(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var koe=new fl("tag:yaml.org,2002:binary",{kind:"scalar",resolve:XFe,construct:YFe,predicate:JFe,represent:KFe}),e7e=Object.prototype.hasOwnProperty,t7e=Object.prototype.toString;function n7e(t){if(t===null)return!0;var e=[],n,r,i,o,a,s=t;for(n=0,r=s.length;n<r;n+=1){if(i=s[n],a=!1,t7e.call(i)!=="[object Object]")return!1;for(o in i)if(e7e.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function r7e(t){return t!==null?t:[]}var Eoe=new fl("tag:yaml.org,2002:omap",{kind:"sequence",resolve:n7e,construct:r7e}),i7e=Object.prototype.toString;function o7e(t){if(t===null)return!0;var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(r=a[e],i7e.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[e]=[i[0],r[i[0]]]}return!0}function s7e(t){if(t===null)return[];var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1)r=a[e],i=Object.keys(r),o[e]=[i[0],r[i[0]]];return o}var Aoe=new fl("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:o7e,construct:s7e}),a7e=Object.prototype.hasOwnProperty;function l7e(t){if(t===null)return!0;var e,n=t;for(e in n)if(a7e.call(n,e)&&n[e]!==null)return!1;return!0}function c7e(t){return t!==null?t:{}}var Poe=new fl("tag:yaml.org,2002:set",{kind:"mapping",resolve:l7e,construct:c7e}),W9=woe.extend({implicit:[Coe,Toe],explicit:[koe,Eoe,Aoe,Poe]}),nv=Object.prototype.hasOwnProperty,MM=1,Moe=2,Roe=3,RM=4,DL=1,u7e=2,aW=3,h7e=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,d7e=/[\x85\u2028\u2029]/,f7e=/[,\[\]\{\}]/,Ioe=/^(?:!|!!|![a-z\-]+!)$/i,Doe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function lW(t){return Object.prototype.toString.call(t)}function fm(t){return t===10||t===13}function y_(t){return t===9||t===32}function hu(t){return t===9||t===32||t===10||t===13}function pw(t){return t===44||t===91||t===93||t===123||t===125}function p7e(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function m7e(t){return t===120?2:t===117?4:t===85?8:0}function g7e(t){return 48<=t&&t<=57?t-48:-1}function cW(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}function y7e(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}function Loe(t,e,n){e==="__proto__"?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[e]=n}var $oe=new Array(256),zoe=new Array(256);for(var q1=0;q1<256;q1++)$oe[q1]=cW(q1)?1:0,zoe[q1]=cW(q1);function v7e(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||W9,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Noe(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=wFe(n),new vc(e,n)}function sr(t,e){throw Noe(t,e)}function IM(t,e){t.onWarning&&t.onWarning.call(null,Noe(t,e))}var uW={YAML:function(e,n,r){var i,o,a;e.version!==null&&sr(e,"duplication of %YAML directive"),r.length!==1&&sr(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&sr(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&sr(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&IM(e,"unsupported YAML version of the document")},TAG:function(e,n,r){var i,o;r.length!==2&&sr(e,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],Ioe.test(i)||sr(e,"ill-formed tag handle (first argument) of the TAG directive"),nv.call(e.tagMap,i)&&sr(e,'there is a previously declared suffix for "'+i+'" tag handle'),Doe.test(o)||sr(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{sr(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function U0(t,e,n,r){var i,o,a,s;if(e<n){if(s=t.input.slice(e,n),r)for(i=0,o=s.length;i<o;i+=1)a=s.charCodeAt(i),a===9||32<=a&&a<=1114111||sr(t,"expected valid JSON character");else h7e.test(s)&&sr(t,"the stream contains non-printable characters");t.result+=s}}function hW(t,e,n,r){var i,o,a,s;for(_a.isObject(n)||sr(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),a=0,s=i.length;a<s;a+=1)o=i[a],nv.call(e,o)||(Loe(e,o,n[o]),r[o]=!0)}function mw(t,e,n,r,i,o,a,s,u){var d,m;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),d=0,m=i.length;d<m;d+=1)Array.isArray(i[d])&&sr(t,"nested arrays are not supported inside keys"),typeof i=="object"&&lW(i[d])==="[object Object]"&&(i[d]="[object Object]");if(typeof i=="object"&&lW(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(d=0,m=o.length;d<m;d+=1)hW(t,e,o[d],n);else hW(t,e,o,n);else!t.json&&!nv.call(n,i)&&nv.call(e,i)&&(t.line=a||t.line,t.lineStart=s||t.lineStart,t.position=u||t.position,sr(t,"duplicated mapping key")),Loe(e,i,o),delete n[i];return e}function H9(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):sr(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Js(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);i!==0;){for(;y_(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(fm(i))for(H9(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&IM(t,"deficient indentation"),r}function eD(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||hu(n)))}function G9(t,e){e===1?t.result+=" ":e>1&&(t.result+=_a.repeat(`
`,e-1))}function x7e(t,e,n){var r,i,o,a,s,u,d,m,v=t.kind,_=t.result,O;if(O=t.input.charCodeAt(t.position),hu(O)||pw(O)||O===35||O===38||O===42||O===33||O===124||O===62||O===39||O===34||O===37||O===64||O===96||(O===63||O===45)&&(i=t.input.charCodeAt(t.position+1),hu(i)||n&&pw(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,s=!1;O!==0;){if(O===58){if(i=t.input.charCodeAt(t.position+1),hu(i)||n&&pw(i))break}else if(O===35){if(r=t.input.charCodeAt(t.position-1),hu(r))break}else{if(t.position===t.lineStart&&eD(t)||n&&pw(O))break;if(fm(O))if(u=t.line,d=t.lineStart,m=t.lineIndent,Js(t,!1,-1),t.lineIndent>=e){s=!0,O=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=u,t.lineStart=d,t.lineIndent=m;break}}s&&(U0(t,o,a,!1),G9(t,t.line-u),o=a=t.position,s=!1),y_(O)||(a=t.position+1),O=t.input.charCodeAt(++t.position)}return U0(t,o,a,!1),t.result?!0:(t.kind=v,t.result=_,!1)}function _7e(t,e){var n,r,i;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(U0(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,i=t.position;else return!0;else fm(n)?(U0(t,r,i,!0),G9(t,Js(t,!1,e)),r=i=t.position):t.position===t.lineStart&&eD(t)?sr(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);sr(t,"unexpected end of the stream within a single quoted scalar")}function b7e(t,e){var n,r,i,o,a,s;if(s=t.input.charCodeAt(t.position),s!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(s=t.input.charCodeAt(t.position))!==0;){if(s===34)return U0(t,n,t.position,!0),t.position++,!0;if(s===92){if(U0(t,n,t.position,!0),s=t.input.charCodeAt(++t.position),fm(s))Js(t,!1,e);else if(s<256&&$oe[s])t.result+=zoe[s],t.position++;else if((a=m7e(s))>0){for(i=a,o=0;i>0;i--)s=t.input.charCodeAt(++t.position),(a=p7e(s))>=0?o=(o<<4)+a:sr(t,"expected hexadecimal character");t.result+=y7e(o),t.position++}else sr(t,"unknown escape sequence");n=r=t.position}else fm(s)?(U0(t,n,r,!0),G9(t,Js(t,!1,e)),n=r=t.position):t.position===t.lineStart&&eD(t)?sr(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}sr(t,"unexpected end of the stream within a double quoted scalar")}function w7e(t,e){var n=!0,r,i,o,a=t.tag,s,u=t.anchor,d,m,v,_,O,E=Object.create(null),A,M,L,$;if($=t.input.charCodeAt(t.position),$===91)m=93,O=!1,s=[];else if($===123)m=125,O=!0,s={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),$=t.input.charCodeAt(++t.position);$!==0;){if(Js(t,!0,e),$=t.input.charCodeAt(t.position),$===m)return t.position++,t.tag=a,t.anchor=u,t.kind=O?"mapping":"sequence",t.result=s,!0;n?$===44&&sr(t,"expected the node content, but found ','"):sr(t,"missed comma between flow collection entries"),M=A=L=null,v=_=!1,$===63&&(d=t.input.charCodeAt(t.position+1),hu(d)&&(v=_=!0,t.position++,Js(t,!0,e))),r=t.line,i=t.lineStart,o=t.position,vO(t,e,MM,!1,!0),M=t.tag,A=t.result,Js(t,!0,e),$=t.input.charCodeAt(t.position),(_||t.line===r)&&$===58&&(v=!0,$=t.input.charCodeAt(++t.position),Js(t,!0,e),vO(t,e,MM,!1,!0),L=t.result),O?mw(t,s,E,M,A,L,r,i,o):v?s.push(mw(t,null,E,M,A,L,r,i,o)):s.push(A),Js(t,!0,e),$=t.input.charCodeAt(t.position),$===44?(n=!0,$=t.input.charCodeAt(++t.position)):n=!1}sr(t,"unexpected end of the stream within a flow collection")}function O7e(t,e){var n,r,i=DL,o=!1,a=!1,s=e,u=0,d=!1,m,v;if(v=t.input.charCodeAt(t.position),v===124)r=!1;else if(v===62)r=!0;else return!1;for(t.kind="scalar",t.result="";v!==0;)if(v=t.input.charCodeAt(++t.position),v===43||v===45)DL===i?i=v===43?aW:u7e:sr(t,"repeat of a chomping mode identifier");else if((m=g7e(v))>=0)m===0?sr(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?sr(t,"repeat of an indentation width identifier"):(s=e+m-1,a=!0);else break;if(y_(v)){do v=t.input.charCodeAt(++t.position);while(y_(v));if(v===35)do v=t.input.charCodeAt(++t.position);while(!fm(v)&&v!==0)}for(;v!==0;){for(H9(t),t.lineIndent=0,v=t.input.charCodeAt(t.position);(!a||t.lineIndent<s)&&v===32;)t.lineIndent++,v=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>s&&(s=t.lineIndent),fm(v)){u++;continue}if(t.lineIndent<s){i===aW?t.result+=_a.repeat(`
`,o?1+u:u):i===DL&&o&&(t.result+=`
`);break}for(r?y_(v)?(d=!0,t.result+=_a.repeat(`
`,o?1+u:u)):d?(d=!1,t.result+=_a.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=_a.repeat(`
`,u):t.result+=_a.repeat(`
`,o?1+u:u),o=!0,a=!0,u=0,n=t.position;!fm(v)&&v!==0;)v=t.input.charCodeAt(++t.position);U0(t,n,t.position,!1)}return!0}function dW(t,e){var n,r=t.tag,i=t.anchor,o=[],a,s=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,sr(t,"tab characters must not be used in indentation")),!(u!==45||(a=t.input.charCodeAt(t.position+1),!hu(a))));){if(s=!0,t.position++,Js(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(n=t.line,vO(t,e,Roe,!1,!0),o.push(t.result),Js(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&u!==0)sr(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return s?(t.tag=r,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function S7e(t,e,n){var r,i,o,a,s,u,d=t.tag,m=t.anchor,v={},_=Object.create(null),O=null,E=null,A=null,M=!1,L=!1,$;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=v),$=t.input.charCodeAt(t.position);$!==0;){if(!M&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,sr(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),o=t.line,($===63||$===58)&&hu(r))$===63?(M&&(mw(t,v,_,O,E,null,a,s,u),O=E=A=null),L=!0,M=!0,i=!0):M?(M=!1,i=!0):sr(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,$=r;else{if(a=t.line,s=t.lineStart,u=t.position,!vO(t,n,Moe,!1,!0))break;if(t.line===o){for($=t.input.charCodeAt(t.position);y_($);)$=t.input.charCodeAt(++t.position);if($===58)$=t.input.charCodeAt(++t.position),hu($)||sr(t,"a whitespace character is expected after the key-value separator within a block mapping"),M&&(mw(t,v,_,O,E,null,a,s,u),O=E=A=null),L=!0,M=!1,i=!1,O=t.tag,E=t.result;else if(L)sr(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=d,t.anchor=m,!0}else if(L)sr(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=d,t.anchor=m,!0}if((t.line===o||t.lineIndent>e)&&(M&&(a=t.line,s=t.lineStart,u=t.position),vO(t,e,RM,!0,i)&&(M?E=t.result:A=t.result),M||(mw(t,v,_,O,E,A,a,s,u),O=E=A=null),Js(t,!0,-1),$=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&$!==0)sr(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return M&&mw(t,v,_,O,E,null,a,s,u),L&&(t.tag=d,t.anchor=m,t.kind="mapping",t.result=v),L}function C7e(t){var e,n=!1,r=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&sr(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(n=!0,a=t.input.charCodeAt(++t.position)):a===33?(r=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,n){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):sr(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!hu(a);)a===33&&(r?sr(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),Ioe.test(i)||sr(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),f7e.test(o)&&sr(t,"tag suffix cannot contain flow indicator characters")}o&&!Doe.test(o)&&sr(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{sr(t,"tag name is malformed: "+o)}return n?t.tag=o:nv.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:sr(t,'undeclared tag handle "'+i+'"'),!0}function T7e(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&sr(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!hu(n)&&!pw(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&sr(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function k7e(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!hu(r)&&!pw(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&sr(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),nv.call(t.anchorMap,n)||sr(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Js(t,!0,-1),!0}function vO(t,e,n,r,i){var o,a,s,u=1,d=!1,m=!1,v,_,O,E,A,M;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=s=RM===n||Roe===n,r&&Js(t,!0,-1)&&(d=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;C7e(t)||T7e(t);)Js(t,!0,-1)?(d=!0,s=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):s=!1;if(s&&(s=d||i),(u===1||RM===n)&&(MM===n||Moe===n?A=e:A=e+1,M=t.position-t.lineStart,u===1?s&&(dW(t,M)||S7e(t,M,A))||w7e(t,A)?m=!0:(a&&O7e(t,A)||_7e(t,A)||b7e(t,A)?m=!0:k7e(t)?(m=!0,(t.tag!==null||t.anchor!==null)&&sr(t,"alias node should not have any properties")):x7e(t,A,MM===n)&&(m=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(m=s&&dW(t,M))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&sr(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),v=0,_=t.implicitTypes.length;v<_;v+=1)if(E=t.implicitTypes[v],E.resolve(t.result)){t.result=E.construct(t.result),t.tag=E.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(nv.call(t.typeMap[t.kind||"fallback"],t.tag))E=t.typeMap[t.kind||"fallback"][t.tag];else for(E=null,O=t.typeMap.multi[t.kind||"fallback"],v=0,_=O.length;v<_;v+=1)if(t.tag.slice(0,O[v].tag.length)===O[v].tag){E=O[v];break}E||sr(t,"unknown tag !<"+t.tag+">"),t.result!==null&&E.kind!==t.kind&&sr(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+E.kind+'", not "'+t.kind+'"'),E.resolve(t.result,t.tag)?(t.result=E.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):sr(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||m}function E7e(t){var e=t.position,n,r,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(Js(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),n=t.position;a!==0&&!hu(a);)a=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),i=[],r.length<1&&sr(t,"directive name must not be less than one character in length");a!==0;){for(;y_(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!fm(a));break}if(fm(a))break;for(n=t.position;a!==0&&!hu(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(n,t.position))}a!==0&&H9(t),nv.call(uW,r)?uW[r](t,r,i):IM(t,'unknown document directive "'+r+'"')}if(Js(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Js(t,!0,-1)):o&&sr(t,"directives end mark is expected"),vO(t,t.lineIndent-1,RM,!1,!0),Js(t,!0,-1),t.checkLineBreaks&&d7e.test(t.input.slice(e,t.position))&&IM(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&eD(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Js(t,!0,-1));return}if(t.position<t.length-1)sr(t,"end of the stream or a document separator is expected");else return}function Boe(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new v7e(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,sr(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)E7e(n);return n.documents}function A7e(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=Boe(t,n);if(typeof e!="function")return r;for(var i=0,o=r.length;i<o;i+=1)e(r[i])}function P7e(t,e){var n=Boe(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new vc("expected a single document in the stream, but found more")}}var M7e=A7e,R7e=P7e,Foe={loadAll:M7e,load:R7e},joe=Object.prototype.toString,Voe=Object.prototype.hasOwnProperty,X9=65279,I7e=9,$T=10,D7e=13,L7e=32,$7e=33,z7e=34,r6=35,N7e=37,B7e=38,F7e=39,j7e=42,Qoe=44,V7e=45,DM=58,Q7e=61,U7e=62,Z7e=63,q7e=64,Uoe=91,Zoe=93,W7e=96,qoe=123,H7e=124,Woe=125,Hl={};Hl[0]="\\0";Hl[7]="\\a";Hl[8]="\\b";Hl[9]="\\t";Hl[10]="\\n";Hl[11]="\\v";Hl[12]="\\f";Hl[13]="\\r";Hl[27]="\\e";Hl[34]='\\"';Hl[92]="\\\\";Hl[133]="\\N";Hl[160]="\\_";Hl[8232]="\\L";Hl[8233]="\\P";var G7e=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],X7e=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Y7e(t,e){var n,r,i,o,a,s,u;if(e===null)return{};for(n={},r=Object.keys(e),i=0,o=r.length;i<o;i+=1)a=r[i],s=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),u=t.compiledTypeMap.fallback[a],u&&Voe.call(u.styleAliases,s)&&(s=u.styleAliases[s]),n[a]=s;return n}function K7e(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new vc("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+_a.repeat("0",r-e.length)+e}var J7e=1,zT=2;function eje(t){this.schema=t.schema||W9,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=_a.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=Y7e(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?zT:J7e,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function fW(t,e){for(var n=_a.repeat(" ",e),r=0,i=-1,o="",a,s=t.length;r<s;)i=t.indexOf(`
`,r),i===-1?(a=t.slice(r),r=s):(a=t.slice(r,i+1),r=i+1),a.length&&a!==`
`&&(o+=n),o+=a;return o}function i6(t,e){return`
`+_a.repeat(" ",t.indent*e)}function tje(t,e){var n,r,i;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(i=t.implicitTypes[n],i.resolve(e))return!0;return!1}function LM(t){return t===L7e||t===I7e}function NT(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==X9||65536<=t&&t<=1114111}function pW(t){return NT(t)&&t!==X9&&t!==D7e&&t!==$T}function mW(t,e,n){var r=pW(t),i=r&&!LM(t);return(n?r:r&&t!==Qoe&&t!==Uoe&&t!==Zoe&&t!==qoe&&t!==Woe)&&t!==r6&&!(e===DM&&!i)||pW(e)&&!LM(e)&&t===r6||e===DM&&i}function nje(t){return NT(t)&&t!==X9&&!LM(t)&&t!==V7e&&t!==Z7e&&t!==DM&&t!==Qoe&&t!==Uoe&&t!==Zoe&&t!==qoe&&t!==Woe&&t!==r6&&t!==B7e&&t!==j7e&&t!==$7e&&t!==H7e&&t!==Q7e&&t!==U7e&&t!==F7e&&t!==z7e&&t!==N7e&&t!==q7e&&t!==W7e}function rje(t){return!LM(t)&&t!==DM}function mC(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function Hoe(t){var e=/^\n* /;return e.test(t)}var Goe=1,o6=2,Xoe=3,Yoe=4,iw=5;function ije(t,e,n,r,i,o,a,s){var u,d=0,m=null,v=!1,_=!1,O=r!==-1,E=-1,A=nje(mC(t,0))&&rje(mC(t,t.length-1));if(e||a)for(u=0;u<t.length;d>=65536?u+=2:u++){if(d=mC(t,u),!NT(d))return iw;A=A&&mW(d,m,s),m=d}else{for(u=0;u<t.length;d>=65536?u+=2:u++){if(d=mC(t,u),d===$T)v=!0,O&&(_=_||u-E-1>r&&t[E+1]!==" ",E=u);else if(!NT(d))return iw;A=A&&mW(d,m,s),m=d}_=_||O&&u-E-1>r&&t[E+1]!==" "}return!v&&!_?A&&!a&&!i(t)?Goe:o===zT?iw:o6:n>9&&Hoe(t)?iw:a?o===zT?iw:o6:_?Yoe:Xoe}function oje(t,e,n,r,i){t.dump=(function(){if(e.length===0)return t.quotingType===zT?'""':"''";if(!t.noCompatMode&&(G7e.indexOf(e)!==-1||X7e.test(e)))return t.quotingType===zT?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,n),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),s=r||t.flowLevel>-1&&n>=t.flowLevel;function u(d){return tje(t,d)}switch(ije(e,s,t.indent,a,u,t.quotingType,t.forceQuotes&&!r,i)){case Goe:return e;case o6:return"'"+e.replace(/'/g,"''")+"'";case Xoe:return"|"+gW(e,t.indent)+yW(fW(e,o));case Yoe:return">"+gW(e,t.indent)+yW(fW(sje(e,a),o));case iw:return'"'+aje(e)+'"';default:throw new vc("impossible error: invalid scalar style")}})()}function gW(t,e){var n=Hoe(t)?String(e):"",r=t[t.length-1]===`
`,i=r&&(t[t.length-2]===`
`||t===`
`),o=i?"+":r?"":"-";return n+o+`
`}function yW(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function sje(t,e){for(var n=/(\n+)([^\n]*)/g,r=(function(){var d=t.indexOf(`
`);return d=d!==-1?d:t.length,n.lastIndex=d,vW(t.slice(0,d),e)})(),i=t[0]===`
`||t[0]===" ",o,a;a=n.exec(t);){var s=a[1],u=a[2];o=u[0]===" ",r+=s+(!i&&!o&&u!==""?`
`:"")+vW(u,e),i=o}return r}function vW(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,i=0,o,a=0,s=0,u="";r=n.exec(t);)s=r.index,s-i>e&&(o=a>i?a:s,u+=`
`+t.slice(i,o),i=o+1),a=s;return u+=`
`,t.length-i>e&&a>i?u+=t.slice(i,a)+`
`+t.slice(a+1):u+=t.slice(i),u.slice(1)}function aje(t){for(var e="",n=0,r,i=0;i<t.length;n>=65536?i+=2:i++)n=mC(t,i),r=Hl[n],!r&&NT(n)?(e+=t[i],n>=65536&&(e+=t[i+1])):e+=r||K7e(n);return e}function lje(t,e,n){var r="",i=t.tag,o,a,s;for(o=0,a=n.length;o<a;o+=1)s=n[o],t.replacer&&(s=t.replacer.call(n,String(o),s)),(uy(t,e,s,!1,!1)||typeof s>"u"&&uy(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=i,t.dump="["+r+"]"}function xW(t,e,n,r){var i="",o=t.tag,a,s,u;for(a=0,s=n.length;a<s;a+=1)u=n[a],t.replacer&&(u=t.replacer.call(n,String(a),u)),(uy(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&uy(t,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=i6(t,e)),t.dump&&$T===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function cje(t,e,n){var r="",i=t.tag,o=Object.keys(n),a,s,u,d,m;for(a=0,s=o.length;a<s;a+=1)m="",r!==""&&(m+=", "),t.condenseFlow&&(m+='"'),u=o[a],d=n[u],t.replacer&&(d=t.replacer.call(n,u,d)),uy(t,e,u,!1,!1)&&(t.dump.length>1024&&(m+="? "),m+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),uy(t,e,d,!1,!1)&&(m+=t.dump,r+=m));t.tag=i,t.dump="{"+r+"}"}function uje(t,e,n,r){var i="",o=t.tag,a=Object.keys(n),s,u,d,m,v,_;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new vc("sortKeys must be a boolean or a function");for(s=0,u=a.length;s<u;s+=1)_="",(!r||i!=="")&&(_+=i6(t,e)),d=a[s],m=n[d],t.replacer&&(m=t.replacer.call(n,d,m)),uy(t,e+1,d,!0,!0,!0)&&(v=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,v&&(t.dump&&$T===t.dump.charCodeAt(0)?_+="?":_+="? "),_+=t.dump,v&&(_+=i6(t,e)),uy(t,e+1,m,!0,v)&&(t.dump&&$T===t.dump.charCodeAt(0)?_+=":":_+=": ",_+=t.dump,i+=_));t.tag=o,t.dump=i||"{}"}function _W(t,e,n){var r,i,o,a,s,u;for(i=n?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(s=i[o],(s.instanceOf||s.predicate)&&(!s.instanceOf||typeof e=="object"&&e instanceof s.instanceOf)&&(!s.predicate||s.predicate(e))){if(n?s.multi&&s.representName?t.tag=s.representName(e):t.tag=s.tag:t.tag="?",s.represent){if(u=t.styleMap[s.tag]||s.defaultStyle,joe.call(s.represent)==="[object Function]")r=s.represent(e,u);else if(Voe.call(s.represent,u))r=s.represent[u](e,u);else throw new vc("!<"+s.tag+'> tag resolver accepts not "'+u+'" style');t.dump=r}return!0}return!1}function uy(t,e,n,r,i,o,a){t.tag=null,t.dump=n,_W(t,n,!1)||_W(t,n,!0);var s=joe.call(t.dump),u=r,d;r&&(r=t.flowLevel<0||t.flowLevel>e);var m=s==="[object Object]"||s==="[object Array]",v,_;if(m&&(v=t.duplicates.indexOf(n),_=v!==-1),(t.tag!==null&&t.tag!=="?"||_||t.indent!==2&&e>0)&&(i=!1),_&&t.usedDuplicates[v])t.dump="*ref_"+v;else{if(m&&_&&!t.usedDuplicates[v]&&(t.usedDuplicates[v]=!0),s==="[object Object]")r&&Object.keys(t.dump).length!==0?(uje(t,e,t.dump,i),_&&(t.dump="&ref_"+v+t.dump)):(cje(t,e,t.dump),_&&(t.dump="&ref_"+v+" "+t.dump));else if(s==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?xW(t,e-1,t.dump,i):xW(t,e,t.dump,i),_&&(t.dump="&ref_"+v+t.dump)):(lje(t,e,t.dump),_&&(t.dump="&ref_"+v+" "+t.dump));else if(s==="[object String]")t.tag!=="?"&&oje(t,t.dump,e,o,u);else{if(s==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new vc("unacceptable kind of an object to dump "+s)}t.tag!==null&&t.tag!=="?"&&(d=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",t.dump=d+" "+t.dump)}return!0}function hje(t,e){var n=[],r=[],i,o;for(s6(t,n,r),i=0,o=r.length;i<o;i+=1)e.duplicates.push(n[r[i]]);e.usedDuplicates=new Array(o)}function s6(t,e,n){var r,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)s6(t[i],e,n);else for(r=Object.keys(t),i=0,o=r.length;i<o;i+=1)s6(t[r[i]],e,n)}function dje(t,e){e=e||{};var n=new eje(e);n.noRefs||hje(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),uy(n,0,r,!0,!0)?n.dump+`
`:""}var fje=dje,pje={dump:fje};function Y9(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var mje=fl,gje=doe,yje=goe,vje=boe,xje=woe,_je=W9,bje=Foe.load,wje=Foe.loadAll,Oje=pje.dump,Sje=vc,Cje={binary:koe,float:_oe,map:moe,null:yoe,pairs:Aoe,set:Poe,timestamp:Coe,bool:voe,int:xoe,merge:Toe,omap:Eoe,seq:poe,str:foe},Tje=Y9("safeLoad","load"),kje=Y9("safeLoadAll","loadAll"),Eje=Y9("safeDump","dump"),bW={Type:mje,Schema:gje,FAILSAFE_SCHEMA:yje,JSON_SCHEMA:vje,CORE_SCHEMA:xje,DEFAULT_SCHEMA:_je,load:bje,loadAll:wje,dump:Oje,YAMLException:Sje,types:Cje,safeLoad:Tje,safeLoadAll:kje,safeDump:Eje};const Aje=({yaml:t,onChange:e})=>{const[n,r,i,o]=us(ml,pv,la,$M),a=Bs(),s=Ki($M),u=Ki(Koe),d=le.useMemo(()=>t?Object.entries(bW.load(t)).map(([L,$])=>({key:L,value:$})):[],[t]),{register:m,control:v,handleSubmit:_}=E9({defaultValues:{yamlConfig:d}}),{fields:O,append:E,remove:A}=Q8e({control:v,name:"yamlConfig"}),M=le.useCallback(({yamlConfig:L})=>{if(L.length===0){u(),s(!1);return}const $=L.reduce((N,{key:F,value:Q})=>(F&&Q&&(N[F]=Q),N),{});e(bW.dump($).trim()),s(!1)},[e,s,u]);return le.createElement(le.Fragment,null,le.createElement(Oie,{open:o,onOpenChange:L=>{s(L)}},le.createElement(Sie,{container:r?.current},le.createElement(Cie,{className:Ut.dialogOverlay}),le.createElement(Tie,{className:Ut.largeDialogContent,"data-editor-type":"frontmatter"},le.createElement(kie,{className:Ut.dialogTitle},a("frontmatterEditor.title","Edit document frontmatter")),le.createElement("form",{onSubmit:L=>{_(M)(L),L.stopPropagation()},onReset:L=>{L.stopPropagation(),s(!1)}},le.createElement("table",{className:Ut.propertyEditorTable},le.createElement("colgroup",null,le.createElement("col",null),le.createElement("col",null),le.createElement("col",null)),le.createElement("thead",null,le.createElement("tr",null,le.createElement("th",null,a("frontmatterEditor.key","Key")),le.createElement("th",null,a("frontmatterEditor.value","Value")),le.createElement("th",null))),le.createElement("tbody",null,O.map((L,$)=>le.createElement("tr",{key:L.id},le.createElement("td",null,le.createElement(wW,{...m(`yamlConfig.${$}.key`,{required:!0}),autofocusIfEmpty:!0,readOnly:n})),le.createElement("td",null,le.createElement(wW,{...m(`yamlConfig.${$}.value`,{required:!0}),readOnly:n})),le.createElement("td",null,le.createElement("button",{type:"button",onClick:()=>{A($)},className:Ut.iconButton,disabled:n},i("delete_big")))))),le.createElement("tfoot",null,le.createElement("tr",null,le.createElement("td",null,le.createElement("button",{disabled:n,className:ni(Ut.primaryButton,Ut.smallButton),type:"button",onClick:()=>{E({key:"",value:""})}},a("frontmatterEditor.addEntry","Add entry")))))),le.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--spacing-2)"}},le.createElement("button",{type:"submit",className:Ut.primaryButton},a("dialogControls.save","Save")),le.createElement("button",{type:"reset",className:Ut.secondaryButton},a("dialogControls.cancel","Cancel")))),le.createElement(Eie,{asChild:!0},le.createElement("button",{className:Ut.dialogCloseButton,"aria-label":a("dialogControls.cancel","Cancel")},i("close")))))))},wW=le.forwardRef(({className:t,autofocusIfEmpty:e,...n},r)=>le.createElement("input",{className:ni(Ut.propertyEditorInput,t),...n,ref:r}));var Pje=Object.defineProperty,Mje=(t,e,n)=>e in t?Pje(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rje=(t,e,n)=>(Mje(t,e+"",n),n);class tE extends gy{constructor(e,n){super(n),Rje(this,"__yaml"),this.__yaml=e}static getType(){return"frontmatter"}static clone(e){return new tE(e.__yaml,e.__key)}static importJSON(e){const{yaml:n}=e;return tD(n)}exportJSON(){return{yaml:this.getYaml(),type:"frontmatter",version:1}}createDOM(e){return document.createElement("div")}updateDOM(){return!1}getYaml(){return this.getLatest().__yaml}setYaml(e){e!==this.__yaml&&(this.getWritable().__yaml=e)}decorate(e){return le.createElement(Aje,{yaml:this.getYaml(),onChange:n=>{e.update(()=>{this.setYaml(n)})}})}isKeyboardSelectable(){return!1}}function tD(t){return new tE(t)}function v_(t){return t instanceof tE}const Ije={testLexicalNode:v_,visitLexicalNode:({actions:t,lexicalNode:e})=>{t.addAndStepInto("yaml",{value:e.getYaml()})}},Dje={testNode:"yaml",visitNode({mdastNode:t,actions:e}){e.addAndStepInto(tD(t.value))}},$M=In(!1),Lje=Cm(t=>{t.sub(t.pipe(Lje,Qo(Od)),([,e])=>{e?.update(()=>{const n=Ur().getFirstChild();if(!v_(n)){const r=tD('"": ""');n?n.insertBefore(r):Ur().append(r)}}),t.pub($M,!0)})}),Koe=Cm(t=>{t.sub(t.pipe(Koe,Qo(Od)),([,e])=>{e?.update(()=>{const n=Ur().getFirstChild();v_(n)&&n.remove()}),t.pub($M,!1)})}),$je=In(!1,t=>{t.pub(RI,e=>e.registerUpdateListener(({editorState:n})=>{n.read(()=>{t.pub($je,v_(Ur().getFirstChild()))})}))}),zje=Zl({init:t=>{t.pubIn({[dO]:iFe("yaml"),[hO]:tFe(),[jf]:tE,[vd]:Dje,[Vf]:Ije,[qk]:lFe("yaml"),[RI]:e=>e.registerCommand(nI,n=>{let r=!1;return e.read(()=>{const i=cn();if(Kt(i))if(i.isCollapsed()&&i.anchor.offset===0&&i.focus.offset===0&&n.key==="Backspace"){let o=i.getNodes()[0];gn(o)&&(o=o.getParent());const a=o?.getPreviousSibling();v_(a)&&(r=!0,n.preventDefault())}else{const o=i.getNodes()[0];if(v_(o)){const a=o.getYaml();setTimeout(()=>{e.update(()=>{const s=Ur().getFirstChild();v_(s)||Ur().splice(0,0,[tD(a)])},{discrete:!0})})}}}),!!r},gh)})}}),Nje={testNode:"blockquote",visitNode({actions:t}){t.addAndStepInto(jk())}},Bje={testLexicalNode:mz,visitLexicalNode:({lexicalNode:t,mdastParent:e,actions:n})=>{const r={type:"paragraph",children:[]};n.appendToParent(e,{type:"blockquote",children:[r]}),n.visitChildren(t,r)}},Fje=Zl({init(t){t.pubIn({[iS]:"quote",[vd]:Nje,[jf]:SI,[Vf]:Bje})}}),Joe=le.createContext(void 0);function nD(){const t=le.useContext(Joe);if(!t)throw new Error("useNestedEditor must be used within a NestedEditorsProvider");return t}function jje(){const{parentEditor:t,mdastNode:e,lexicalNode:n}=nD();return function(i){t.update(()=>{Kee("history-push");const o=Fi(n.getKey());o&&o.setMdastNode({...e,...i})},{discrete:!0}),t.dispatchCommand(L_,void 0)}}function Vje(){const{parentEditor:t,lexicalNode:e}=nD();return()=>{t.update(()=>{const n=Fi(e.getKey());n.selectNext(),n.remove()})}}const Qje=function(t){const{getContent:e,getUpdatedMdastNode:n,contentEditableProps:r,block:i=!1}=t,{mdastNode:o,lexicalNode:a,focusEmitter:s}=nD(),u=jje(),d=Vje(),m=e(o),v=GO(),[_,O,E,A,M,L,$,N,F,Q]=us(Od,AI,Uk,PI,Zk,uO,rS,MI,j8,mM),W=Ki(B8),[H]=le.useState(()=>f8({nodes:A,theme:v.getValue(mM),namespace:"NestedEditor"}));return le.useEffect(()=>{s.subscribe(()=>{H.focus()})},[H,s]),le.useEffect(()=>{H.update(()=>{Ur().clear();let te=m;i?te.length===0&&(te=[{type:"paragraph",children:[]}]):te=[{type:"paragraph",children:m}],D8({root:Ur(),mdastRoot:{type:"root",children:te},visitors:O,directiveDescriptors:L,codeBlockEditorDescriptors:$,jsxComponentDescriptors:M})})},[H,i,O]),le.useEffect(()=>{function te(){H.getEditorState().read(()=>{const ne=I8({root:Ur(),visitors:E,jsxComponentDescriptors:M,jsxIsAvailable:N,addImportStatements:!1}),ce=i?ne.children:ne.children[0].children;u(n(structuredClone(o),ce))})}return Wl(H.registerCommand(aI,()=>(W({editorType:"lexical",rootNode:a,editorRef:H}),!1),bo),H.registerCommand(lI,ne=>{const ce=ne.relatedTarget;return x9(ce,_.getRootElement())?!1:(te(),W(null),!0)},Lr),H.registerCommand(L_,()=>(te(),!0),Lr),H.registerCommand(Mk,()=>(W({editorType:"lexical",rootNode:a,editorRef:H}),!1),iM),H.registerCommand(rI,(ne,ce)=>{const we=ce.getRootElement();return we?.innerText===`
`?(d(),!0):!1},gh))},[i,H,E,n,M,N,a,o,d,W,u,_]),le.createElement(Fne,{initialEditor:H,initialTheme:Q},le.createElement(q8,{contentEditable:le.createElement(U8,{...r,className:ni(Ut.nestedEditor,r?.className)}),placeholder:null,ErrorBoundary:Z8}),le.createElement(ine,null),F.map((te,ne)=>le.createElement(te,{key:ne})))};function a6(){let t=Q0;return{publish:()=>{t()},subscribe:e=>{t=e}}}var Uje=Object.defineProperty,Zje=(t,e,n)=>e in t?Uje(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,C0=(t,e,n)=>(Zje(t,typeof e!="symbol"?e+"":e,n),n);class uS extends gy{constructor(e,n,r,i){super(i),C0(this,"__code"),C0(this,"__meta"),C0(this,"__language"),C0(this,"__focusEmitter",a6()),C0(this,"setCode",o=>{o!==this.__code&&(this.getWritable().__code=o)}),C0(this,"setMeta",o=>{o!==this.__meta&&(this.getWritable().__meta=o)}),C0(this,"setLanguage",o=>{o!==this.__language&&(this.getWritable().__language=o)}),C0(this,"select",()=>{this.__focusEmitter.publish()}),this.__code=e,this.__meta=r,this.__language=n}static getType(){return"codeblock"}static clone(e){return new uS(e.__code,e.__language,e.__meta,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__code=e.__code,this.__meta=e.__meta,this.__language=e.__language,this.__focusEmitter=a6()}static importJSON(e){const{code:n,meta:r,language:i}=e;return nE({code:n,language:i,meta:r})}static importDOM(){return{pre:()=>({conversion:Gje,priority:3})}}exportJSON(){return{code:this.getCode(),language:this.getLanguage(),meta:this.getMeta(),type:"codeblock",version:1}}createDOM(e,n){return document.createElement("div")}updateDOM(){return!1}getCode(){return this.__code}getMeta(){return this.__meta}getLanguage(){return this.__language}decorate(e){return le.createElement(Wje,{parentEditor:e,code:this.getCode(),meta:this.getMeta(),language:this.getLanguage(),codeBlockNode:this,nodeKey:this.getKey(),focusEmitter:this.__focusEmitter})}isInline(){return!1}}const ese=le.createContext(null),qje=({parentEditor:t,lexicalNode:e,children:n})=>{const r=le.useMemo(()=>({lexicalNode:e,parentEditor:t,setCode:i=>{t.update(()=>{e.setCode(i),setTimeout(()=>{t.dispatchCommand(L_,void 0)},0)})},setLanguage:i=>{t.update(()=>{e.setLanguage(i)})},setMeta:i=>{t.update(()=>{e.setMeta(i)})}}),[e,t]);return le.createElement(ese.Provider,{value:r},n)};function l6(){const t=le.useContext(ese);if(!t)throw new Error("useCodeBlockEditor must be used within a CodeBlockEditor");return t}const Wje=t=>{const e=$s(rS),n=$s(K9);let r=e.sort((u,d)=>d.priority-u.priority).find(u=>u.match(t.language||"",t.meta||""));if(r??(r=e.find(u=>u.match(n||"",t.meta||""))),!r)throw new Error(`No CodeBlockEditor registered for language=${t.language} meta=${t.meta}`);const i=r.Editor,{codeBlockNode:o,parentEditor:a,...s}=t;return le.createElement(qje,{parentEditor:t.parentEditor,lexicalNode:t.codeBlockNode},le.createElement(i,{...s}))};function nE(t){const{code:e="",language:n="",meta:r=""}=t;return new uS(e,n,r)}function Hje(t){return t instanceof uS}function Gje(t){const e=t,n=e.textContent,r=t.getAttribute("class")??"",i=t.getAttribute("data-language")??"",o=/language-(\w+)/.exec(r),a=o?o[1]:i,s=e.getAttribute("data-meta")??"";return{node:nE({code:n,language:a,meta:s})}}const Xje={testLexicalNode:Hje,visitLexicalNode:({lexicalNode:t,actions:e})=>{e.addAndStepInto("code",{value:t.getCode(),lang:t.getLanguage(),meta:t.getMeta()})}},Yje={testNode:(t,{codeBlockEditorDescriptors:e})=>t.type==="code"?e.find(r=>r.match(t.lang,t.meta))!==void 0:!1,visitNode({mdastNode:t,actions:e}){e.addAndStepInto(nE({code:t.value,language:t.lang,meta:t.meta}))}},K9=In(""),J9=As(t=>{t.link(t.pipe(J9,Qo(K9),ny(([e,n])=>()=>nE({language:n,...e}))),II)}),Kje=Cc(rS),Jje=Zl({update(t,e){t.pub(K9,e?.defaultCodeBlockLanguage??"")},init(t,e){t.pubIn({[iS]:"codeblock",[rS]:e?.codeBlockEditorDescriptors??[],[vd]:Yje,[jf]:uS,[Vf]:Xje})}});let c6=[],tse=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?tse:c6).push(n=n+t[e])})();function eVe(t){if(t<768)return!1;for(let e=0,n=c6.length;;){let r=e+n>>1;if(t<c6[r])n=r;else if(t>=tse[r])e=r+1;else return!0;if(e==n)return!1}}function OW(t){return t>=127462&&t<=127487}const SW=8205;function tVe(t,e,n=!0,r=!0){return(n?nse:nVe)(t,e,r)}function nse(t,e,n){if(e==t.length)return e;e&&rse(t.charCodeAt(e))&&ise(t.charCodeAt(e-1))&&e--;let r=LL(t,e);for(e+=CW(r);e<t.length;){let i=LL(t,e);if(r==SW||i==SW||n&&eVe(i))e+=CW(i),r=i;else if(OW(i)){let o=0,a=e-2;for(;a>=0&&OW(LL(t,a));)o++,a-=2;if(o%2==0)break;e+=2}else break}return e}function nVe(t,e,n){for(;e>0;){let r=nse(t,e-2,n);if(r<e)return r;e--}return 0}function LL(t,e){let n=t.charCodeAt(e);if(!ise(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return rse(r)?(n-55296<<10)+(r-56320)+65536:n}function rse(t){return t>=56320&&t<57344}function ise(t){return t>=55296&&t<56320}function CW(t){return t<65536?1:2}let Di=class ose{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=xO(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Yp.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=xO(this,e,n);let r=[];return this.decompose(e,n,r,0),Yp.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new ZC(this),o=new ZC(e);for(let a=n,s=n;;){if(i.next(a),o.next(a),a=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(s+=i.value.length,i.done||s>=r)return!0}}iter(e=1){return new ZC(this,e)}iterRange(e,n=this.length){return new sse(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new ase(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ose.empty:e.length<=32?new Ls(e):Yp.from(Ls.split(e,[]))}};class Ls extends Di{constructor(e,n=rVe(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let o=0;;o++){let a=this.text[o],s=i+a.length;if((n?r:s)>=e)return new iVe(i,s,r,a);i=s+1,r++}}decompose(e,n,r,i){let o=e<=0&&n>=this.length?this:new Ls(TW(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let a=r.pop(),s=d5(o.text,a.text.slice(),0,o.length);if(s.length<=32)r.push(new Ls(s,a.length+o.length));else{let u=s.length>>1;r.push(new Ls(s.slice(0,u)),new Ls(s.slice(u)))}}else r.push(o)}replace(e,n,r){if(!(r instanceof Ls))return super.replace(e,n,r);[e,n]=xO(this,e,n);let i=d5(this.text,d5(r.text,TW(this.text,0,e)),n),o=this.length+r.length-(n-e);return i.length<=32?new Ls(i,o):Yp.from(Ls.split(i,[]),o)}sliceString(e,n=this.length,r=`
`){[e,n]=xO(this,e,n);let i="";for(let o=0,a=0;o<=n&&a<this.text.length;a++){let s=this.text[a],u=o+s.length;o>e&&a&&(i+=r),e<u&&n>o&&(i+=s.slice(Math.max(0,e-o),n-o)),o=u+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let o of e)r.push(o),i+=o.length+1,r.length==32&&(n.push(new Ls(r,i)),r=[],i=-1);return i>-1&&n.push(new Ls(r,i)),n}}class Yp extends Di{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let o=0;;o++){let a=this.children[o],s=i+a.length,u=r+a.lines-1;if((n?u:s)>=e)return a.lineInner(e,n,r,i);i=s+1,r=u+1}}decompose(e,n,r,i){for(let o=0,a=0;a<=n&&o<this.children.length;o++){let s=this.children[o],u=a+s.length;if(e<=u&&n>=a){let d=i&((a<=e?1:0)|(u>=n?2:0));a>=e&&u<=n&&!d?r.push(s):s.decompose(e-a,n-a,r,d)}a=u+1}}replace(e,n,r){if([e,n]=xO(this,e,n),r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let a=this.children[i],s=o+a.length;if(e>=o&&n<=s){let u=a.replace(e-o,n-o,r),d=this.lines-a.lines+u.lines;if(u.lines<d>>4&&u.lines>d>>6){let m=this.children.slice();return m[i]=u,new Yp(m,this.length-(n-e)+r.length)}return super.replace(o,s,u)}o=s+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=xO(this,e,n);let i="";for(let o=0,a=0;o<this.children.length&&a<=n;o++){let s=this.children[o],u=a+s.length;a>e&&o&&(i+=r),e<u&&n>a&&(i+=s.sliceString(e-a,n-a,r)),a=u+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Yp))return 0;let r=0,[i,o,a,s]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,o+=n){if(i==a||o==s)return r;let u=this.children[i],d=e.children[o];if(u!=d)return r+u.scanIdentical(d,n);r+=u.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let O of e)r+=O.lines;if(r<32){let O=[];for(let E of e)E.flatten(O);return new Ls(O,n)}let i=Math.max(32,r>>5),o=i<<1,a=i>>1,s=[],u=0,d=-1,m=[];function v(O){let E;if(O.lines>o&&O instanceof Yp)for(let A of O.children)v(A);else O.lines>a&&(u>a||!u)?(_(),s.push(O)):O instanceof Ls&&u&&(E=m[m.length-1])instanceof Ls&&O.lines+E.lines<=32?(u+=O.lines,d+=O.length+1,m[m.length-1]=new Ls(E.text.concat(O.text),E.length+1+O.length)):(u+O.lines>i&&_(),u+=O.lines,d+=O.length+1,m.push(O))}function _(){u!=0&&(s.push(m.length==1?m[0]:Yp.from(m,d)),d=-1,u=m.length=0)}for(let O of e)v(O);return _(),s.length==1?s[0]:new Yp(s,n)}}Di.empty=new Ls([""],0);function rVe(t){let e=-1;for(let n of t)e+=n.length+1;return e}function d5(t,e,n=0,r=1e9){for(let i=0,o=0,a=!0;o<t.length&&i<=r;o++){let s=t[o],u=i+s.length;u>=n&&(u>r&&(s=s.slice(0,r-i)),i<n&&(s=s.slice(n-i)),a?(e[e.length-1]+=s,a=!1):e.push(s)),i=u+1}return e}function TW(t,e,n){return d5(t,[""],e,n)}class ZC{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Ls?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],o=this.offsets[r],a=o>>1,s=i instanceof Ls?i.text.length:i.children.length;if(a==(n>0?s:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Ls){let u=i.text[a+(n<0?-1:0)];if(this.offsets[r]+=n,u.length>Math.max(0,e))return this.value=e==0?u:n>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=i.children[a+(n<0?-1:0)];e>u.length?(e-=u.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(u),this.offsets.push(n>0?1:(u instanceof Ls?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class sse{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new ZC(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class ase{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Di.prototype[Symbol.iterator]=function(){return this.iter()},ZC.prototype[Symbol.iterator]=sse.prototype[Symbol.iterator]=ase.prototype[Symbol.iterator]=function(){return this});let iVe=class{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}};function xO(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function ba(t,e,n=!0,r=!0){return tVe(t,e,n,r)}function oVe(t){return t>=56320&&t<57344}function sVe(t){return t>=55296&&t<56320}function su(t,e){let n=t.charCodeAt(e);if(!sVe(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return oVe(r)?(n-55296<<10)+(r-56320)+65536:n}function eF(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Kp(t){return t<65536?1:2}const u6=/\r\n?|\n/;var dl=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(dl||(dl={}));class pm{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let o=this.sections[n++],a=this.sections[n++];a<0?(e(r,i,o),i+=o):i+=a,r+=o}}iterChangedRanges(e,n=!1){h6(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new pm(e)}composeDesc(e){return this.empty?e:e.empty?this:lse(this,e)}mapDesc(e,n=!1){return e.empty?this:d6(this,e,n)}mapPos(e,n=-1,r=dl.Simple){let i=0,o=0;for(let a=0;a<this.sections.length;){let s=this.sections[a++],u=this.sections[a++],d=i+s;if(u<0){if(d>e)return o+(e-i);o+=s}else{if(r!=dl.Simple&&d>=e&&(r==dl.TrackDel&&i<e&&d>e||r==dl.TrackBefore&&i<e||r==dl.TrackAfter&&d>e))return null;if(d>e||d==e&&n<0&&!s)return e==i||n<0?o:o+u;o+=u}i=d}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let o=this.sections[r++],a=this.sections[r++],s=i+o;if(a>=0&&i<=n&&s>=e)return i<e&&s>n?"cover":!0;i=s}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new pm(e)}static create(e){return new pm(e)}}class Xs extends pm{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return h6(this,(n,r,i,o,a)=>e=e.replace(i,i+(r-n),a),!1),e}mapDesc(e,n=!1){return d6(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,o=0;i<n.length;i+=2){let a=n[i],s=n[i+1];if(s>=0){n[i]=s,n[i+1]=a;let u=i>>1;for(;r.length<u;)r.push(Di.empty);r.push(a?e.slice(o,o+a):Di.empty)}o+=a}return new Xs(n,r)}compose(e){return this.empty?e:e.empty?this:lse(this,e,!0)}map(e,n=!1){return e.empty?this:d6(this,e,n,!0)}iterChanges(e,n=!1){h6(this,e,n)}get desc(){return pm.create(this.sections)}filter(e){let n=[],r=[],i=[],o=new BT(this);e:for(let a=0,s=0;;){let u=a==e.length?1e9:e[a++];for(;s<u||s==u&&o.len==0;){if(o.done)break e;let m=Math.min(o.len,u-s);Fl(i,m,-1);let v=o.ins==-1?-1:o.off==0?o.ins:0;Fl(n,m,v),v>0&&B0(r,n,o.text),o.forward(m),s+=m}let d=e[a++];for(;s<d;){if(o.done)break e;let m=Math.min(o.len,d-s);Fl(n,m,-1),Fl(i,m,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(m),s+=m}}return{changes:new Xs(n,r),filtered:pm.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],o=[],a=0,s=null;function u(m=!1){if(!m&&!i.length)return;a<n&&Fl(i,n-a,-1);let v=new Xs(i,o);s=s?s.compose(v.map(s)):v,i=[],o=[],a=0}function d(m){if(Array.isArray(m))for(let v of m)d(v);else if(m instanceof Xs){if(m.length!=n)throw new RangeError(`Mismatched change set length (got ${m.length}, expected ${n})`);u(),s=s?s.compose(m.map(s)):m}else{let{from:v,to:_=v,insert:O}=m;if(v>_||v<0||_>n)throw new RangeError(`Invalid change range ${v} to ${_} (in doc of length ${n})`);let E=O?typeof O=="string"?Di.of(O.split(r||u6)):O:Di.empty,A=E.length;if(v==_&&A==0)return;v<a&&u(),v>a&&Fl(i,v-a,-1),Fl(i,_-v,A),B0(o,i,E),a=_}}return d(e),u(!s),s}static empty(e){return new Xs(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")n.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((a,s)=>s&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)n.push(o[0],0);else{for(;r.length<i;)r.push(Di.empty);r[i]=Di.of(o.slice(1)),n.push(o[0],r[i].length)}}}return new Xs(n,r)}static createSet(e,n){return new Xs(e,n)}}function Fl(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function B0(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Di.empty);t.push(n)}}function h6(t,e,n){let r=t.inserted;for(let i=0,o=0,a=0;a<t.sections.length;){let s=t.sections[a++],u=t.sections[a++];if(u<0)i+=s,o+=s;else{let d=i,m=o,v=Di.empty;for(;d+=s,m+=u,u&&r&&(v=v.append(r[a-2>>1])),!(n||a==t.sections.length||t.sections[a+1]<0);)s=t.sections[a++],u=t.sections[a++];e(i,d,o,m,v),i=d,o=m}}}function d6(t,e,n,r=!1){let i=[],o=r?[]:null,a=new BT(t),s=new BT(e);for(let u=-1;;){if(a.done&&s.len||s.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&s.ins==-1){let d=Math.min(a.len,s.len);Fl(i,d,-1),a.forward(d),s.forward(d)}else if(s.ins>=0&&(a.ins<0||u==a.i||a.off==0&&(s.len<a.len||s.len==a.len&&!n))){let d=s.len;for(Fl(i,s.ins,-1);d;){let m=Math.min(a.len,d);a.ins>=0&&u<a.i&&a.len<=m&&(Fl(i,0,a.ins),o&&B0(o,i,a.text),u=a.i),a.forward(m),d-=m}s.next()}else if(a.ins>=0){let d=0,m=a.len;for(;m;)if(s.ins==-1){let v=Math.min(m,s.len);d+=v,m-=v,s.forward(v)}else if(s.ins==0&&s.len<m)m-=s.len,s.next();else break;Fl(i,d,u<a.i?a.ins:0),o&&u<a.i&&B0(o,i,a.text),u=a.i,a.forward(a.len-m)}else{if(a.done&&s.done)return o?Xs.createSet(i,o):pm.create(i);throw new Error("Mismatched change set lengths")}}}function lse(t,e,n=!1){let r=[],i=n?[]:null,o=new BT(t),a=new BT(e);for(let s=!1;;){if(o.done&&a.done)return i?Xs.createSet(r,i):pm.create(r);if(o.ins==0)Fl(r,o.len,0,s),o.next();else if(a.len==0&&!a.done)Fl(r,0,a.ins,s),i&&B0(i,r,a.text),a.next();else{if(o.done||a.done)throw new Error("Mismatched change set lengths");{let u=Math.min(o.len2,a.len),d=r.length;if(o.ins==-1){let m=a.ins==-1?-1:a.off?0:a.ins;Fl(r,u,m,s),i&&m&&B0(i,r,a.text)}else a.ins==-1?(Fl(r,o.off?0:o.len,u,s),i&&B0(i,r,o.textBit(u))):(Fl(r,o.off?0:o.len,a.off?0:a.ins,s),i&&!a.off&&B0(i,r,a.text));s=(o.ins>u||a.ins>=0&&a.len>u)&&(s||r.length>d),o.forward2(u),a.forward(u)}}}}class BT{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Di.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Di.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class a_{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new a_(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return Qt.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return Qt.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Qt.range(e.anchor,e.head)}static create(e,n,r){return new a_(e,n,r)}}class Qt{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:Qt.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Qt([this.main],0)}addRange(e,n=!0){return Qt.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,Qt.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Qt(e.ranges.map(n=>a_.fromJSON(n)),e.main)}static single(e,n=e){return new Qt([Qt.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=r:o.from<r)return Qt.normalized(e.slice(),n);r=o.to}return new Qt(e,n)}static cursor(e,n=0,r,i){return a_.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let o=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?a_.create(n,e,48|o):a_.create(e,n,(n>e?8:0)|o)}static normalized(e,n=0){let r=e[n];e.sort((i,o)=>i.from-o.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let o=e[i],a=e[i-1];if(o.empty?o.from<=a.to:o.from<a.to){let s=a.from,u=Math.max(o.to,a.to);i<=n&&n--,e.splice(--i,2,o.anchor>o.head?Qt.range(u,s):Qt.range(s,u))}}return new Qt(e,n)}}function cse(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let tF=0;class Dn{constructor(e,n,r,i,o){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=tF++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new Dn(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:nF),!!e.static,e.enables)}of(e){return new f5([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new f5(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new f5(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function nF(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class f5{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=tF++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,o=this.id,a=e[o]>>1,s=this.type==2,u=!1,d=!1,m=[];for(let v of this.dependencies)v=="doc"?u=!0:v=="selection"?d=!0:(((n=e[v.id])!==null&&n!==void 0?n:1)&1)==0&&m.push(e[v.id]);return{create(v){return v.values[a]=r(v),1},update(v,_){if(u&&_.docChanged||d&&(_.docChanged||_.selection)||f6(v,m)){let O=r(v);if(s?!kW(O,v.values[a],i):!i(O,v.values[a]))return v.values[a]=O,1}return 0},reconfigure:(v,_)=>{let O,E=_.config.address[o];if(E!=null){let A=NM(_,E);if(this.dependencies.every(M=>M instanceof Dn?_.facet(M)===v.facet(M):M instanceof Fs?_.field(M,!1)==v.field(M,!1):!0)||(s?kW(O=r(v),A,i):i(O=r(v),A)))return v.values[a]=A,0}else O=r(v);return v.values[a]=O,1}}}}function kW(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function f6(t,e){let n=!1;for(let r of e)qC(t,r)&1&&(n=!0);return n}function aVe(t,e,n){let r=n.map(u=>t[u.id]),i=n.map(u=>u.type),o=r.filter(u=>!(u&1)),a=t[e.id]>>1;function s(u){let d=[];for(let m=0;m<r.length;m++){let v=NM(u,r[m]);if(i[m]==2)for(let _ of v)d.push(_);else d.push(v)}return e.combine(d)}return{create(u){for(let d of r)qC(u,d);return u.values[a]=s(u),1},update(u,d){if(!f6(u,o))return 0;let m=s(u);return e.compare(m,u.values[a])?0:(u.values[a]=m,1)},reconfigure(u,d){let m=f6(u,r),v=d.config.facets[e.id],_=d.facet(e);if(v&&!m&&nF(n,v))return u.values[a]=_,0;let O=s(u);return e.compare(O,_)?(u.values[a]=_,0):(u.values[a]=O,1)}}}const oP=Dn.define({static:!0});class Fs{constructor(e,n,r,i,o){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let n=new Fs(tF++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(oP).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let o=r.values[n],a=this.updateF(o,i);return this.compareF(o,a)?0:(r.values[n]=a,1)},reconfigure:(r,i)=>{let o=r.facet(oP),a=i.facet(oP),s;return(s=o.find(u=>u.field==this))&&s!=a.find(u=>u.field==this)?(r.values[n]=s.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,oP.of({field:this,create:e})]}get extension(){return this}}const Gx={lowest:4,low:3,default:2,high:1,highest:0};function Y2(t){return e=>new use(e,t)}const Uf={highest:Y2(Gx.highest),high:Y2(Gx.high),default:Y2(Gx.default),low:Y2(Gx.low),lowest:Y2(Gx.lowest)};class use{constructor(e,n){this.inner=e,this.prec=n}}class hS{of(e){return new p6(this,e)}reconfigure(e){return hS.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class p6{constructor(e,n){this.compartment=e,this.inner=n}}class zM{constructor(e,n,r,i,o,a){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],o=Object.create(null),a=new Map;for(let _ of lVe(e,n,a))_ instanceof Fs?i.push(_):(o[_.facet.id]||(o[_.facet.id]=[])).push(_);let s=Object.create(null),u=[],d=[];for(let _ of i)s[_.id]=d.length<<1,d.push(O=>_.slot(O));let m=r?.config.facets;for(let _ in o){let O=o[_],E=O[0].facet,A=m&&m[_]||[];if(O.every(M=>M.type==0))if(s[E.id]=u.length<<1|1,nF(A,O))u.push(r.facet(E));else{let M=E.combine(O.map(L=>L.value));u.push(r&&E.compare(M,r.facet(E))?r.facet(E):M)}else{for(let M of O)M.type==0?(s[M.id]=u.length<<1|1,u.push(M.value)):(s[M.id]=d.length<<1,d.push(L=>M.dynamicSlot(L)));s[E.id]=d.length<<1,d.push(M=>aVe(M,E,O))}}let v=d.map(_=>_(s));return new zM(e,a,v,s,u,o)}}function lVe(t,e,n){let r=[[],[],[],[],[]],i=new Map;function o(a,s){let u=i.get(a);if(u!=null){if(u<=s)return;let d=r[u].indexOf(a);d>-1&&r[u].splice(d,1),a instanceof p6&&n.delete(a.compartment)}if(i.set(a,s),Array.isArray(a))for(let d of a)o(d,s);else if(a instanceof p6){if(n.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(a.compartment)||a.inner;n.set(a.compartment,d),o(d,s)}else if(a instanceof use)o(a.inner,a.prec);else if(a instanceof Fs)r[s].push(a),a.provides&&o(a.provides,s);else if(a instanceof f5)r[s].push(a),a.facet.extensions&&o(a.facet.extensions,Gx.default);else{let d=a.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(d,s)}}return o(t,Gx.default),r.reduce((a,s)=>a.concat(s))}function qC(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function NM(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const hse=Dn.define(),m6=Dn.define({combine:t=>t.some(e=>e),static:!0}),dse=Dn.define({combine:t=>t.length?t[0]:void 0,static:!0}),fse=Dn.define(),pse=Dn.define(),mse=Dn.define(),gse=Dn.define({combine:t=>t.length?t[0]:!1});class wy{constructor(e,n){this.type=e,this.value=n}static define(){return new cVe}}class cVe{of(e){return new wy(this,e)}}class uVe{constructor(e){this.map=e}of(e){return new xr(this,e)}}class xr{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new xr(this.type,n)}is(e){return this.type==e}static define(e={}){return new uVe(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let o=i.map(n);o&&r.push(o)}return r}}xr.reconfigure=xr.define();xr.appendConfig=xr.define();class na{constructor(e,n,r,i,o,a){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=a,this._doc=null,this._state=null,r&&cse(r,n.newLength),o.some(s=>s.type==na.time)||(this.annotations=o.concat(na.time.of(Date.now())))}static create(e,n,r,i,o,a){return new na(e,n,r,i,o,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(na.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}na.time=wy.define();na.userEvent=wy.define();na.addToHistory=wy.define();na.remote=wy.define();function hVe(t,e){let n=[];for(let r=0,i=0;;){let o,a;if(r<t.length&&(i==e.length||e[i]>=t[r]))o=t[r++],a=t[r++];else if(i<e.length)o=e[i++],a=e[i++];else return n;!n.length||n[n.length-1]<o?n.push(o,a):n[n.length-1]<a&&(n[n.length-1]=a)}}function yse(t,e,n){var r;let i,o,a;return n?(i=e.changes,o=Xs.empty(e.changes.length),a=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),a=t.changes.compose(i)),{changes:a,selection:e.selection?e.selection.map(o):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:xr.mapEffects(t.effects,i).concat(xr.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function g6(t,e,n){let r=e.selection,i=Iw(e.annotations);return e.userEvent&&(i=i.concat(na.userEvent.of(e.userEvent))),{changes:e.changes instanceof Xs?e.changes:Xs.of(e.changes||[],n,t.facet(dse)),selection:r&&(r instanceof Qt?r:Qt.single(r.anchor,r.head)),effects:Iw(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function vse(t,e,n){let r=g6(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(n=!1);let a=!!e[o].sequential;r=yse(r,g6(t,e[o],a?r.changes.newLength:t.doc.length),a)}let i=na.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return fVe(n?dVe(i):i)}function dVe(t){let e=t.startState,n=!0;for(let i of e.facet(fse)){let o=i(t);if(o===!1){n=!1;break}Array.isArray(o)&&(n=n===!0?o:hVe(n,o))}if(n!==!0){let i,o;if(n===!1)o=t.changes.invertedDesc,i=Xs.empty(e.doc.length);else{let a=t.changes.filter(n);i=a.changes,o=a.filtered.mapDesc(a.changes).invertedDesc}t=na.create(e,i,t.selection&&t.selection.map(o),xr.mapEffects(t.effects,o),t.annotations,t.scrollIntoView)}let r=e.facet(pse);for(let i=r.length-1;i>=0;i--){let o=r[i](t);o instanceof na?t=o:Array.isArray(o)&&o.length==1&&o[0]instanceof na?t=o[0]:t=vse(e,Iw(o),!1)}return t}function fVe(t){let e=t.startState,n=e.facet(mse),r=t;for(let i=n.length-1;i>=0;i--){let o=n[i](t);o&&Object.keys(o).length&&(r=yse(r,g6(e,o,t.changes.newLength),!0))}return r==t?t:na.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const pVe=[];function Iw(t){return t==null?pVe:Array.isArray(t)?t:[t]}var Xo=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(Xo||(Xo={}));const mVe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let y6;try{y6=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function gVe(t){if(y6)return y6.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||mVe.test(n)))return!0}return!1}function yVe(t){return e=>{if(!/\S/.test(e))return Xo.Space;if(gVe(e))return Xo.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Xo.Word;return Xo.Other}}class $r{constructor(e,n,r,i,o,a){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,a&&(a._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)qC(this,s<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return qC(this,r),NM(this,r)}update(...e){return vse(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let s of e.effects)s.is(hS.reconfigure)?(n&&(i=new Map,n.compartments.forEach((u,d)=>i.set(d,u)),n=null),i.set(s.value.compartment,s.value.extension)):s.is(xr.reconfigure)?(n=null,r=s.value):s.is(xr.appendConfig)&&(n=null,r=Iw(r).concat(s.value));let o;n?o=e.startState.values.slice():(n=zM.resolve(r,i,this),o=new $r(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(u,d)=>d.reconfigure(u,this),null).values);let a=e.startState.facet(m6)?e.newSelection:e.newSelection.asSingle();new $r(n,e.newDoc,a,o,(s,u)=>u.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:Qt.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),o=[r.range],a=Iw(r.effects);for(let s=1;s<n.ranges.length;s++){let u=e(n.ranges[s]),d=this.changes(u.changes),m=d.map(i);for(let _=0;_<s;_++)o[_]=o[_].map(m);let v=i.mapDesc(d,!0);o.push(u.range.map(v)),i=i.compose(m),a=xr.mapEffects(a,m).concat(xr.mapEffects(Iw(u.effects),v))}return{changes:i,selection:Qt.create(o,n.mainIndex),effects:a}}changes(e=[]){return e instanceof Xs?e:Xs.of(e,this.doc.length,this.facet($r.lineSeparator))}toText(e){return Di.of(e.split(this.facet($r.lineSeparator)||u6))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(qC(this,n),NM(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Fs&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let o in r)if(Object.prototype.hasOwnProperty.call(e,o)){let a=r[o],s=e[o];i.push(a.init(u=>a.spec.fromJSON(s,u)))}}return $r.create({doc:e.doc,selection:Qt.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=zM.resolve(e.extensions||[],new Map),r=e.doc instanceof Di?e.doc:Di.of((e.doc||"").split(n.staticFacet($r.lineSeparator)||u6)),i=e.selection?e.selection instanceof Qt?e.selection:Qt.single(e.selection.anchor,e.selection.head):Qt.single(0);return cse(i,r.length),n.staticFacet(m6)||(i=i.asSingle()),new $r(n,r,i,n.dynamicSlots.map(()=>null),(o,a)=>a.create(o),null)}get tabSize(){return this.facet($r.tabSize)}get lineBreak(){return this.facet($r.lineSeparator)||`
`}get readOnly(){return this.facet(gse)}phrase(e,...n){for(let r of this.facet($r.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>n.length?r:n[o-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let o of this.facet(hse))for(let a of o(this,n,r))Object.prototype.hasOwnProperty.call(a,e)&&i.push(a[e]);return i}charCategorizer(e){let n=this.languageDataAt("wordChars",e);return yVe(n.length?n[0]:"")}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),a=e-r,s=e-r;for(;a>0;){let u=ba(n,a,!1);if(o(n.slice(u,a))!=Xo.Word)break;a=u}for(;s<i;){let u=ba(n,s);if(o(n.slice(s,u))!=Xo.Word)break;s=u}return a==s?null:Qt.range(a+r,s+r)}}$r.allowMultipleSelections=m6;$r.tabSize=Dn.define({combine:t=>t.length?t[0]:4});$r.lineSeparator=dse;$r.readOnly=gse;$r.phrases=Dn.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});$r.languageData=hse;$r.changeFilter=fse;$r.transactionFilter=pse;$r.transactionExtender=mse;hS.reconfigure=xr.define();function Em(t,e,n={}){let r={};for(let i of t)for(let o of Object.keys(i)){let a=i[o],s=r[o];if(s===void 0)r[o]=a;else if(!(s===a||a===void 0))if(Object.hasOwnProperty.call(n,o))r[o]=n[o](s,a);else throw new Error("Config merge conflict for field "+o)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class rv{eq(e){return this==e}range(e,n=e){return v6.create(e,n,this)}}rv.prototype.startSide=rv.prototype.endSide=0;rv.prototype.point=!1;rv.prototype.mapMode=dl.TrackDel;function rF(t,e){return t==e||t.constructor==e.constructor&&t.eq(e)}let v6=class xse{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new xse(e,n,r)}};function x6(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}let vVe=class _se{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let o=r?this.to:this.from;for(let a=i,s=o.length;;){if(a==s)return a;let u=a+s>>1,d=o[u]-e||(r?this.value[u].endSide:this.value[u].startSide)-n;if(u==a)return d>=0?a:s;d>=0?s=u:a=u+1}}between(e,n,r,i){for(let o=this.findIndex(n,-1e9,!0),a=this.findIndex(r,1e9,!1,o);o<a;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,n){let r=[],i=[],o=[],a=-1,s=-1;for(let u=0;u<this.value.length;u++){let d=this.value[u],m=this.from[u]+e,v=this.to[u]+e,_,O;if(m==v){let E=n.mapPos(m,d.startSide,d.mapMode);if(E==null||(_=O=E,d.startSide!=d.endSide&&(O=n.mapPos(m,d.endSide),O<_)))continue}else if(_=n.mapPos(m,d.startSide),O=n.mapPos(v,d.endSide),_>O||_==O&&d.startSide>0&&d.endSide<=0)continue;(O-_||d.endSide-d.startSide)<0||(a<0&&(a=_),d.point&&(s=Math.max(s,O-_)),r.push(d),i.push(_-a),o.push(O-a))}return{mapped:r.length?new _se(i,o,r,s):null,pos:a}}};class Kr{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new Kr(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:o=this.length}=e,a=e.filter;if(n.length==0&&!a)return this;if(r&&(n=n.slice().sort(x6)),this.isEmpty)return n.length?Kr.of(n):this;let s=new bse(this,null,-1).goto(0),u=0,d=[],m=new _u;for(;s.value||u<n.length;)if(u<n.length&&(s.from-n[u].from||s.startSide-n[u].value.startSide)>=0){let v=n[u++];m.addInner(v.from,v.to,v.value)||d.push(v)}else s.rangeIndex==1&&s.chunkIndex<this.chunk.length&&(u==n.length||this.chunkEnd(s.chunkIndex)<n[u].from)&&(!a||i>this.chunkEnd(s.chunkIndex)||o<this.chunkPos[s.chunkIndex])&&m.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!a||i>s.to||o<s.from||a(s.from,s.to,s.value))&&(m.addInner(s.from,s.to,s.value)||d.push(v6.create(s.from,s.to,s.value))),s.next());return m.finishInner(this.nextLayer.isEmpty&&!d.length?Kr.empty:this.nextLayer.update({add:d,filter:a,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let a=0;a<this.chunk.length;a++){let s=this.chunkPos[a],u=this.chunk[a],d=e.touchesRange(s,s+u.length);if(d===!1)i=Math.max(i,u.maxPoint),n.push(u),r.push(e.mapPos(s));else if(d===!0){let{mapped:m,pos:v}=u.map(s,e);m&&(i=Math.max(i,m.maxPoint),n.push(m),r.push(v))}}let o=this.nextLayer.map(e);return n.length==0?o:new Kr(r,n,o||Kr.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],a=this.chunk[i];if(n>=o&&e<=o+a.length&&a.between(o,e-o,n-o,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return FT.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return FT.from(e).goto(n)}static compare(e,n,r,i,o=-1){let a=e.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=o),s=n.filter(v=>v.maxPoint>0||!v.isEmpty&&v.maxPoint>=o),u=EW(a,s,r),d=new K2(a,u,o),m=new K2(s,u,o);r.iterGaps((v,_,O)=>AW(d,v,m,_,O,i)),r.empty&&r.length==0&&AW(d,0,m,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let o=e.filter(m=>!m.isEmpty&&n.indexOf(m)<0),a=n.filter(m=>!m.isEmpty&&e.indexOf(m)<0);if(o.length!=a.length)return!1;if(!o.length)return!0;let s=EW(o,a),u=new K2(o,s,0).goto(r),d=new K2(a,s,0).goto(r);for(;;){if(u.to!=d.to||!_6(u.active,d.active)||u.point&&(!d.point||!rF(u.point,d.point)))return!1;if(u.to>i)return!0;u.next(),d.next()}}static spans(e,n,r,i,o=-1){let a=new K2(e,null,o).goto(n),s=n,u=a.openStart;for(;;){let d=Math.min(a.to,r);if(a.point){let m=a.activeForPoint(a.to),v=a.pointFrom<n?m.length+1:a.point.startSide<0?m.length:Math.min(m.length,u);i.point(s,d,a.point,m,v,a.pointRank),u=Math.min(a.openEnd(d),m.length)}else d>s&&(i.span(s,d,a.active,u),u=a.openEnd(d));if(a.to>r)return u+(a.point&&a.to>r?1:0);s=a.to,a.next()}}static of(e,n=!1){let r=new _u;for(let i of e instanceof v6?[e]:n?xVe(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return Kr.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=Kr.empty;i=i.nextLayer)n=new Kr(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}Kr.empty=new Kr([],[],null,-1);function xVe(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(x6(e,r)>0)return t.slice().sort(x6);e=r}return t}Kr.empty.nextLayer=Kr.empty;class _u{finishChunk(e){this.chunks.push(new vVe(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new _u)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(Kr.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Kr.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function EW(t,e,n){let r=new Map;for(let o of t)for(let a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<=0&&r.set(o.chunk[a],o.chunkPos[a]);let i=new Set;for(let o of e)for(let a=0;a<o.chunk.length;a++){let s=r.get(o.chunk[a]);s!=null&&(n?n.mapPos(s):s)==o.chunkPos[a]&&!n?.touchesRange(s,s+o.chunk[a].length)&&i.add(o.chunk[a])}return i}class bse{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class FT{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let o=0;o<e.length;o++)for(let a=e[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&i.push(new bse(a,n,r,o));return i.length==1?i[0]:new FT(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)$L(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)$L(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),$L(this.heap,0)}}}function $L(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class K2{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=FT.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){sP(this.active,e),sP(this.activeTo,e),sP(this.activeRank,e),this.minActive=PW(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:o}=this.cursor;for(;n<this.activeRank.length&&(o-this.activeRank[n]||i-this.activeTo[n])>0;)n++;aP(this.active,n,r),aP(this.activeTo,n,i),aP(this.activeRank,n,o),e&&aP(e,n,this.cursor.from),this.minActive=PW(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&sP(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function AW(t,e,n,r,i,o){t.goto(e),n.goto(r);let a=r+i,s=r,u=r-e,d=!!o.boundChange;for(let m=!1;;){let v=t.to+u-n.to,_=v||t.endSide-n.endSide,O=_<0?t.to+u:n.to,E=Math.min(O,a);if(t.point||n.point?(t.point&&n.point&&rF(t.point,n.point)&&_6(t.activeForPoint(t.to),n.activeForPoint(n.to))||o.comparePoint(s,E,t.point,n.point),m=!1):(m&&o.boundChange(s),E>s&&!_6(t.active,n.active)&&o.compareRange(s,E,t.active,n.active),d&&E<a&&(v||t.openEnd(O)!=n.openEnd(O))&&(m=!0)),O>a)break;s=O,_<=0&&t.next(),_>=0&&n.next()}}function _6(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!rF(t[n],e[n]))return!1;return!0}function sP(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function aP(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function PW(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Nf(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=ba(t,i));return r}function b6(t,e,n,r){for(let i=0,o=0;;){if(o>=e)return i;if(i==t.length)break;o+=t.charCodeAt(i)==9?n-o%n:1,i=ba(t,i)}return r===!0?-1:t.length}const w6="",MW=typeof Symbol>"u"?"__"+w6:Symbol.for(w6),O6=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),RW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class hy{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function o(a,s,u,d){let m=[],v=/^@(\w+)\b/.exec(a[0]),_=v&&v[1]=="keyframes";if(v&&s==null)return u.push(a[0]+";");for(let O in s){let E=s[O];if(/&/.test(O))o(O.split(/,\s*/).map(A=>a.map(M=>A.replace(/&/,M))).reduce((A,M)=>A.concat(M)),E,u);else if(E&&typeof E=="object"){if(!v)throw new RangeError("The value of a property ("+O+") should be a primitive value.");o(i(O),E,m,_)}else E!=null&&m.push(O.replace(/_.*/,"").replace(/[A-Z]/g,A=>"-"+A.toLowerCase())+": "+E+";")}(m.length||_)&&u.push((r&&!v&&!d?a.map(r):a).join(", ")+" {"+m.join(" ")+"}")}for(let a in e)o(i(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=RW[MW]||1;return RW[MW]=e+1,w6+e.toString(36)}static mount(e,n,r){let i=e[O6],o=r&&r.nonce;i?o&&i.setNonce(o):i=new _Ve(e,o),i.mount(Array.isArray(n)?n:[n],e)}}let IW=new Map;class _Ve{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let o=IW.get(r);if(o)return e[O6]=o;this.sheet=new i.CSSStyleSheet,IW.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[O6]=this}mount(e,n){let r=this.sheet,i=0,o=0;for(let a=0;a<e.length;a++){let s=e[a],u=this.modules.indexOf(s);if(u<o&&u>-1&&(this.modules.splice(u,1),o--,u=-1),u==-1){if(this.modules.splice(o++,0,s),r)for(let d=0;d<s.rules.length;d++)r.insertRule(s.rules[d],i++)}else{for(;o<u;)i+=this.modules[o++].rules.length;i+=s.rules.length,o++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let a="";for(let u=0;u<this.modules.length;u++)a+=this.modules[u].getRules()+`
`;this.styleTag.textContent=a;let s=n.head||n;this.styleTag.parentNode!=s&&s.insertBefore(this.styleTag,s.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var iv={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},jT={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},bVe=typeof navigator<"u"&&/Mac/.test(navigator.platform),wVe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var hl=0;hl<10;hl++)iv[48+hl]=iv[96+hl]=String(hl);for(var hl=1;hl<=24;hl++)iv[hl+111]="F"+hl;for(var hl=65;hl<=90;hl++)iv[hl]=String.fromCharCode(hl+32),jT[hl]=String.fromCharCode(hl);for(var zL in iv)jT.hasOwnProperty(zL)||(jT[zL]=iv[zL]);function OVe(t){var e=bVe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||wVe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?jT:iv)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function xo(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)wse(t,arguments[e]);return t}function wse(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)wse(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}let gc=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},S6=typeof document<"u"?document:{documentElement:{style:{}}};const C6=/Edge\/(\d+)/.exec(gc.userAgent),Ose=/MSIE \d/.test(gc.userAgent),T6=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(gc.userAgent),rD=!!(Ose||T6||C6),DW=!rD&&/gecko\/(\d+)/i.test(gc.userAgent),NL=!rD&&/Chrome\/(\d+)/.exec(gc.userAgent),SVe="webkitFontSmoothing"in S6.documentElement.style,k6=!rD&&/Apple Computer/.test(gc.vendor),LW=k6&&(/Mobile\/\w+/.test(gc.userAgent)||gc.maxTouchPoints>2);var Ln={mac:LW||/Mac/.test(gc.platform),windows:/Win/.test(gc.platform),linux:/Linux|X11/.test(gc.platform),ie:rD,ie_version:Ose?S6.documentMode||6:T6?+T6[1]:C6?+C6[1]:0,gecko:DW,gecko_version:DW?+(/Firefox\/(\d+)/.exec(gc.userAgent)||[0,0])[1]:0,chrome:!!NL,chrome_version:NL?+NL[1]:0,ios:LW,android:/Android\b/.test(gc.userAgent),webkit_version:SVe?+(/\bAppleWebKit\/(\d+)/.exec(gc.userAgent)||[0,0])[1]:0,safari:k6,safari_version:k6?+(/\bVersion\/(\d+(\.\d+)?)/.exec(gc.userAgent)||[0,0])[1]:0,tabSize:S6.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function iF(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const BM=Object.create(null);function oF(t,e,n){if(t==e)return!0;t||(t=BM),e||(e=BM);let r=Object.keys(t),i=Object.keys(e);if(r.length-0!=i.length-0)return!1;for(let o of r)if(o!=n&&(i.indexOf(o)==-1||t[o]!==e[o]))return!1;return!0}function CVe(t,e){for(let n=t.attributes.length-1;n>=0;n--){let r=t.attributes[n].name;e[r]==null&&t.removeAttribute(r)}for(let n in e){let r=e[n];n=="style"?t.style.cssText=r:t.getAttribute(n)!=r&&t.setAttribute(n,r)}}function $W(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function TVe(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class Sd{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var pl=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(pl||(pl={}));class Zn extends rv{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new rE(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new j_(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:o,end:a}=Sse(e,n);r=(o?n?-3e8:-1:5e8)-1,i=(a?n?2e8:1:-6e8)+1}return new j_(e,r,i,n,e.widget||null,!0)}static line(e){return new iE(e)}static set(e,n=!1){return Kr.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Zn.none=Kr.empty;class rE extends Zn{constructor(e){let{start:n,end:r}=Sse(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?iF(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||BM}eq(e){return this==e||e instanceof rE&&this.tagName==e.tagName&&oF(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}rE.prototype.point=!1;class iE extends Zn{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof iE&&this.spec.class==e.spec.class&&oF(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}iE.prototype.mapMode=dl.TrackBefore;iE.prototype.point=!0;class j_ extends Zn{constructor(e,n,r,i,o,a){super(n,r,o,e),this.block=i,this.isReplace=a,this.mapMode=i?n<=0?dl.TrackBefore:dl.TrackAfter:dl.TrackDel}get type(){return this.startSide!=this.endSide?pl.WidgetRange:this.startSide<=0?pl.WidgetBefore:pl.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof j_&&kVe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}j_.prototype.point=!0;function Sse(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function kVe(t,e){return t==e||!!(t&&e&&t.compare(e))}function Dw(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class VT extends rv{constructor(e,n){super(),this.tagName=e,this.attributes=n}eq(e){return e==this||e instanceof VT&&this.tagName==e.tagName&&oF(this.attributes,e.attributes)}static create(e){return new VT(e.tagName,e.attributes||BM)}static set(e,n=!1){return Kr.of(e,n)}}VT.prototype.startSide=VT.prototype.endSide=-1;function QT(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function E6(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function p5(t,e){if(!e.anchorNode)return!1;try{return E6(t,e.anchorNode)}catch{return!1}}function m5(t){return t.nodeType==3?UT(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function WC(t,e,n,r){return n?zW(t,e,n,r,-1)||zW(t,e,n,r,1):!1}function ov(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function FM(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function zW(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:dy(t))){if(t.nodeName=="DIV")return!1;let o=t.parentNode;if(!o||o.nodeType!=1)return!1;e=ov(t)+(i<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?dy(t):0}else return!1}}function dy(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function jM(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function EVe(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Cse(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function AVe(t,e,n,r,i,o,a,s){let u=t.ownerDocument,d=u.defaultView||window;for(let m=t,v=!1;m&&!v;)if(m.nodeType==1){let _,O=m==u.body,E=1,A=1;if(O)_=EVe(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(m).position)&&(v=!0),m.scrollHeight<=m.clientHeight&&m.scrollWidth<=m.clientWidth){m=m.assignedSlot||m.parentNode;continue}let $=m.getBoundingClientRect();({scaleX:E,scaleY:A}=Cse(m,$)),_={left:$.left,right:$.left+m.clientWidth*E,top:$.top,bottom:$.top+m.clientHeight*A}}let M=0,L=0;if(i=="nearest")e.top<_.top?(L=e.top-(_.top+a),n>0&&e.bottom>_.bottom+L&&(L=e.bottom-_.bottom+a)):e.bottom>_.bottom&&(L=e.bottom-_.bottom+a,n<0&&e.top-L<_.top&&(L=e.top-(_.top+a)));else{let $=e.bottom-e.top,N=_.bottom-_.top;L=(i=="center"&&$<=N?e.top+$/2-N/2:i=="start"||i=="center"&&n<0?e.top-a:e.bottom-N+a)-_.top}if(r=="nearest"?e.left<_.left?(M=e.left-(_.left+o),n>0&&e.right>_.right+M&&(M=e.right-_.right+o)):e.right>_.right&&(M=e.right-_.right+o,n<0&&e.left<_.left+M&&(M=e.left-(_.left+o))):M=(r=="center"?e.left+(e.right-e.left)/2-(_.right-_.left)/2:r=="start"==s?e.left-o:e.right-(_.right-_.left)+o)-_.left,M||L)if(O)d.scrollBy(M,L);else{let $=0,N=0;if(L){let F=m.scrollTop;m.scrollTop+=L/A,N=(m.scrollTop-F)*A}if(M){let F=m.scrollLeft;m.scrollLeft+=M/E,$=(m.scrollLeft-F)*E}e={left:e.left-$,top:e.top-N,right:e.right-$,bottom:e.bottom-N},$&&Math.abs($-M)<1&&(r="nearest"),N&&Math.abs(N-L)<1&&(i="nearest")}if(O)break;(e.top<_.top||e.bottom>_.bottom||e.left<_.left||e.right>_.right)&&(e={left:Math.max(e.left,_.left),right:Math.min(e.right,_.right),top:Math.max(e.top,_.top),bottom:Math.min(e.bottom,_.bottom)}),m=m.assignedSlot||m.parentNode}else if(m.nodeType==11)m=m.host;else break}function PVe(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class MVe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?dy(n):0),r,Math.min(e.focusOffset,r?dy(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Qx=null;Ln.safari&&Ln.safari_version>=26&&(Qx=!1);function Tse(t){if(t.setActive)return t.setActive();if(Qx)return t.focus(Qx);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Qx==null?{get preventScroll(){return Qx={preventScroll:!0},!0}}:void 0),!Qx){Qx=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],o=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=o&&(r.scrollLeft=o)}}}let NW;function UT(t,e,n=e){let r=NW||(NW=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Lw(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,t.dispatchEvent(o);let a=new KeyboardEvent("keyup",i);return a.synthetic=!0,t.dispatchEvent(a),o.defaultPrevented||a.defaultPrevented}function RVe(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function IVe(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,dy(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=dy(n))}else{if(n==t)return!0;r=ov(n),n=n.parentNode}}function kse(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Ese(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=dy(n)}else if(n.parentNode&&!FM(n))r=ov(n),n=n.parentNode;else return null}}function Ase(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!FM(n))r=ov(n)+1,n=n.parentNode;else return null}}class Ef{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Ef(e.parentNode,ov(e),n)}static after(e,n){return new Ef(e.parentNode,ov(e)+1,n)}}var wo=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(wo||(wo={}));const V_=wo.LTR,sF=wo.RTL;function Pse(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const DVe=Pse("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),LVe=Pse("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),A6=Object.create(null),zp=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);A6[e]=n,A6[n]=-e}function Mse(t){return t<=247?DVe[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?LVe[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const $Ve=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Wg{get dir(){return this.level%2?sF:V_}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let o=-1;for(let a=0;a<e.length;a++){let s=e[a];if(s.from<=n&&s.to>=n){if(s.level==r)return a;(o<0||(i!=0?i<0?s.from<n:s.to>n:e[o].level>s.level))&&(o=a)}}if(o<0)throw new RangeError("Index out of range");return o}}function Rse(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!Rse(r.inner,i.inner))return!1}return!0}const _o=[];function zVe(t,e,n,r,i){for(let o=0;o<=r.length;o++){let a=o?r[o-1].to:e,s=o<r.length?r[o].from:n,u=o?256:i;for(let d=a,m=u,v=u;d<s;d++){let _=Mse(t.charCodeAt(d));_==512?_=m:_==8&&v==4&&(_=16),_o[d]=_==4?2:_,_&7&&(v=_),m=_}for(let d=a,m=u,v=u;d<s;d++){let _=_o[d];if(_==128)d<s-1&&m==_o[d+1]&&m&24?_=_o[d]=m:_o[d]=256;else if(_==64){let O=d+1;for(;O<s&&_o[O]==64;)O++;let E=d&&m==8||O<n&&_o[O]==8?v==1?1:8:256;for(let A=d;A<O;A++)_o[A]=E;d=O-1}else _==8&&v==1&&(_o[d]=1);m=_,_&7&&(v=_)}}}function NVe(t,e,n,r,i){let o=i==1?2:1;for(let a=0,s=0,u=0;a<=r.length;a++){let d=a?r[a-1].to:e,m=a<r.length?r[a].from:n;for(let v=d,_,O,E;v<m;v++)if(O=A6[_=t.charCodeAt(v)])if(O<0){for(let A=s-3;A>=0;A-=3)if(zp[A+1]==-O){let M=zp[A+2],L=M&2?i:M&4?M&1?o:i:0;L&&(_o[v]=_o[zp[A]]=L),s=A;break}}else{if(zp.length==189)break;zp[s++]=v,zp[s++]=_,zp[s++]=u}else if((E=_o[v])==2||E==1){let A=E==i;u=A?0:1;for(let M=s-3;M>=0;M-=3){let L=zp[M+2];if(L&2)break;if(A)zp[M+2]|=2;else{if(L&4)break;zp[M+2]|=4}}}}}function BVe(t,e,n,r){for(let i=0,o=r;i<=n.length;i++){let a=i?n[i-1].to:t,s=i<n.length?n[i].from:e;for(let u=a;u<s;){let d=_o[u];if(d==256){let m=u+1;for(;;)if(m==s){if(i==n.length)break;m=n[i++].to,s=i<n.length?n[i].from:e}else if(_o[m]==256)m++;else break;let v=o==1,_=(m<e?_o[m]:r)==1,O=v==_?v?1:2:r;for(let E=m,A=i,M=A?n[A-1].to:t;E>u;)E==M&&(E=n[--A].from,M=A?n[A-1].to:t),_o[--E]=O;u=m}else o=d,u++}}}function P6(t,e,n,r,i,o,a){let s=r%2?2:1;if(r%2==i%2)for(let u=e,d=0;u<n;){let m=!0,v=!1;if(d==o.length||u<o[d].from){let A=_o[u];A!=s&&(m=!1,v=A==16)}let _=!m&&s==1?[]:null,O=m?r:r+1,E=u;e:for(;;)if(d<o.length&&E==o[d].from){if(v)break e;let A=o[d];if(!m)for(let M=A.to,L=d+1;;){if(M==n)break e;if(L<o.length&&o[L].from==M)M=o[L++].to;else{if(_o[M]==s)break e;break}}if(d++,_)_.push(A);else{A.from>u&&a.push(new Wg(u,A.from,O));let M=A.direction==V_!=!(O%2);M6(t,M?r+1:r,i,A.inner,A.from,A.to,a),u=A.to}E=A.to}else{if(E==n||(m?_o[E]!=s:_o[E]==s))break;E++}_?P6(t,u,E,r+1,i,_,a):u<E&&a.push(new Wg(u,E,O)),u=E}else for(let u=n,d=o.length;u>e;){let m=!0,v=!1;if(!d||u>o[d-1].to){let A=_o[u-1];A!=s&&(m=!1,v=A==16)}let _=!m&&s==1?[]:null,O=m?r:r+1,E=u;e:for(;;)if(d&&E==o[d-1].to){if(v)break e;let A=o[--d];if(!m)for(let M=A.from,L=d;;){if(M==e)break e;if(L&&o[L-1].to==M)M=o[--L].from;else{if(_o[M-1]==s)break e;break}}if(_)_.push(A);else{A.to<u&&a.push(new Wg(A.to,u,O));let M=A.direction==V_!=!(O%2);M6(t,M?r+1:r,i,A.inner,A.from,A.to,a),u=A.from}E=A.from}else{if(E==e||(m?_o[E-1]!=s:_o[E-1]==s))break;E--}_?P6(t,E,u,r+1,i,_,a):E<u&&a.push(new Wg(E,u,O)),u=E}}function M6(t,e,n,r,i,o,a){let s=e%2?2:1;zVe(t,i,o,r,s),NVe(t,i,o,r,s),BVe(i,o,r,s),P6(t,i,o,e,n,r,a)}function FVe(t,e,n){if(!t)return[new Wg(0,0,e==sF?1:0)];if(e==V_&&!n.length&&!$Ve.test(t))return Ise(t.length);if(n.length)for(;t.length>_o.length;)_o[_o.length]=256;let r=[],i=e==V_?0:1;return M6(t,i,i,n,0,t.length,r),r}function Ise(t){return[new Wg(0,t,0)]}let Dse="";function jVe(t,e,n,r,i){var o;let a=r.head-t.from,s=Wg.find(e,a,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc),u=e[s],d=u.side(i,n);if(a==d){let _=s+=i?1:-1;if(_<0||_>=e.length)return null;u=e[s=_],a=u.side(!i,n),d=u.side(i,n)}let m=ba(t.text,a,u.forward(i,n));(m<u.from||m>u.to)&&(m=d),Dse=t.text.slice(Math.min(a,m),Math.max(a,m));let v=s==(i?e.length-1:0)?null:e[s+(i?1:-1)];return v&&m==d&&v.level+(i?0:1)<u.level?Qt.cursor(v.side(!i,n)+t.from,v.forward(i,n)?1:-1,v.level):Qt.cursor(m+t.from,u.forward(i,n)?-1:1,u.level)}function VVe(t,e,n){for(let r=e;r<n;r++){let i=Mse(t.charCodeAt(r));if(i==1)return V_;if(i==2||i==4)return sF}return V_}const Lse=Dn.define(),$se=Dn.define(),zse=Dn.define(),Nse=Dn.define(),R6=Dn.define(),Bse=Dn.define(),Fse=Dn.define(),aF=Dn.define(),lF=Dn.define(),jse=Dn.define({combine:t=>t.some(e=>e)}),Vse=Dn.define({combine:t=>t.some(e=>e)}),Qse=Dn.define();class $w{constructor(e,n="nearest",r="nearest",i=5,o=5,a=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=o,this.isSnapshot=a}map(e){return e.empty?this:new $w(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new $w(Qt.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const lP=xr.define({map:(t,e)=>t.map(e)}),Use=xr.define();function du(t,e,n){let r=t.facet(Nse);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Qg=Dn.define({combine:t=>t.length?t[0]:!0});let QVe=0;const gw=Dn.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class zs{constructor(e,n,r,i,o){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(gw.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(gw.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:o,decorations:a}=n||{};return new zs(QVe++,e,r,i,s=>{let u=[];return a&&u.push(ZT.of(d=>{let m=d.plugin(s);return m?a(m):Zn.none})),o&&u.push(o(s)),u})}static fromClass(e,n){return zs.define((r,i)=>new e(r,i),n)}}class BL{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(du(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){du(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){du(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Zse=Dn.define(),cF=Dn.define(),ZT=Dn.define(),qse=Dn.define(),Wse=Dn.define(),oE=Dn.define(),Hse=Dn.define();function BW(t,e){let n=t.state.facet(Hse);if(!n.length)return n;let r=n.map(o=>o instanceof Function?o(t):o),i=[];return Kr.spans(r,e.from,e.to,{point(){},span(o,a,s,u){let d=o-e.from,m=a-e.from,v=i;for(let _=s.length-1;_>=0;_--,u--){let O=s[_].spec.bidiIsolate,E;if(O==null&&(O=VVe(e.text,d,m)),u>0&&v.length&&(E=v[v.length-1]).to==d&&E.direction==O)E.to=m,v=E.inner;else{let A={from:d,to:m,direction:O,inner:[]};v.push(A),v=A.inner}}}}),i}const Gse=Dn.define();function uF(t){let e=0,n=0,r=0,i=0;for(let o of t.state.facet(Gse)){let a=o(t);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(n=Math.max(n,a.right)),a.top!=null&&(r=Math.max(r,a.top)),a.bottom!=null&&(i=Math.max(i,a.bottom)))}return{left:e,right:n,top:r,bottom:i}}const gC=Dn.define();class id{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new id(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,o=0,a=0;;){let s=i<e.length?e[i].fromB:1e9,u=o<n.length?n[o]:1e9,d=Math.min(s,u);if(d==1e9)break;let m=d+a,v=d,_=m;for(;;)if(o<n.length&&n[o]<=v){let O=n[o+1];o+=2,v=Math.max(v,O);for(let E=i;E<e.length&&e[E].fromB<=v;E++)a=e[E].toA-e[E].toB;_=Math.max(_,O+a)}else if(i<e.length&&e[i].fromB<=v){let O=e[i++];v=Math.max(v,O.toB),_=Math.max(_,O.toA),a=O.toA-O.toB}else break;r.push(new id(m,_,d,v))}return r}}class VM{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Xs.empty(this.startState.doc.length);for(let o of r)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,a,s,u)=>i.push(new id(o,a,s,u))),this.changedRanges=i}static create(e,n,r){return new VM(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const UVe=[];class sa{constructor(e,n,r=0){this.dom=e,this.length=n,this.flags=r,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return UVe}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let n=this.domAttrs;n&&CVe(this.dom,n)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,n=this.posAtStart){let r=n;for(let i of this.children){if(i==e)return r;r+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,n){return null}domPosFor(e,n){let r=ov(this.dom),i=this.length?e>0:n>0;return new Ef(this.parent.dom,r+(i?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof oD)return e;return null}static get(e){return e.cmTile}}class iD extends sa{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let n=this.dom,r=null,i,o=e?.node==n?e:null,a=0;for(let s of this.children){if(s.sync(e),a+=s.length+s.breakAfter,i=r?r.nextSibling:n.firstChild,o&&i!=s.dom&&(o.written=!0),s.dom.parentNode==n)for(;i&&i!=s.dom;)i=FW(i);else n.insertBefore(s.dom,i);r=s.dom}for(i=r?r.nextSibling:n.firstChild,o&&i&&(o.written=!0);i;)i=FW(i);this.length=a}}function FW(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class oD extends iD{constructor(e,n){super(n),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let n=sa.get(e);if(n&&this.owns(n))return n;e=e.parentNode}}blockTiles(e){for(let n=[],r=this,i=0,o=0;;)if(i==r.children.length){if(!n.length)return;r=r.parent,r.breakAfter&&o++,i=n.pop()}else{let a=r.children[i++];if(a instanceof Z0)n.push(i),r=a,i=0;else{let s=o+a.length,u=e(a,o);if(u!==void 0)return u;o=s+a.breakAfter}}}resolveBlock(e,n){let r,i=-1,o,a=-1;if(this.blockTiles((s,u)=>{let d=u+s.length;if(e>=u&&e<=d){if(s.isWidget()&&n>=-1&&n<=1){if(s.flags&32)return!0;s.flags&16&&(r=void 0)}(u<e||e==d&&(n<-1?s.length:s.covers(1)))&&(!r||!s.isWidget()&&r.isWidget())&&(r=s,i=e-u),(d>e||e==u&&(n>1?s.length:s.covers(-1)))&&(!o||!s.isWidget()&&o.isWidget())&&(o=s,a=e-u)}}),!r&&!o)throw new Error("No tile at position "+e);return r&&n<0||!o?{tile:r,offset:i}:{tile:o,offset:a}}}class Z0 extends iD{constructor(e,n){super(e),this.wrapper=n}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,n){let r=new Z0(n||document.createElement(e.tagName),e);return n||(r.flags|=4),r}}class _O extends iD{constructor(e,n){super(e),this.attrs=n}isLine(){return!0}static start(e,n,r){let i=new _O(n||document.createElement("div"),e);return(!n||!r)&&(i.flags|=4),i}get domAttrs(){return this.attrs}resolveInline(e,n,r){let i=null,o=-1,a=null,s=-1;function u(m,v){for(let _=0,O=0;_<m.children.length&&O<=v;_++){let E=m.children[_],A=O+E.length;A>=v&&(E.isComposite()?u(E,v-O):(!a||a.isHidden&&(n>0||r&&qVe(a,E)))&&(A>v||E.flags&32)?(a=E,s=v-O):(O<v||E.flags&16&&!E.isHidden)&&(i=E,o=v-O)),O=A}}u(this,e);let d=(n<0?i:a)||i||a;return d?{tile:d,offset:d==i?o:s}:null}coordsIn(e,n){let r=this.resolveInline(e,n,!0);return r?r.tile.coordsIn(Math.max(0,r.offset),n):ZVe(this)}domIn(e,n){let r=this.resolveInline(e,n);if(r){let{tile:i,offset:o}=r;if(this.dom.contains(i.dom))return i.isText()?new Ef(i.dom,Math.min(i.dom.nodeValue.length,o)):i.domPosFor(o,i.flags&16?1:i.flags&32?-1:n);let a=r.tile.parent,s=!1;for(let u of a.children){if(s)return new Ef(u.dom,0);u==r.tile&&(s=!0)}}return new Ef(this.dom,0)}}function ZVe(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=m5(e);return n[n.length-1]||null}function qVe(t,e){let n=t.coordsIn(0,1),r=e.coordsIn(0,1);return n&&r&&r.top<n.bottom}class lu extends iD{constructor(e,n){super(e),this.mark=n}get domAttrs(){return this.mark.attrs}static of(e,n){let r=new lu(n||document.createElement(e.tagName),e);return n||(r.flags|=4),r}}class l_ extends sa{constructor(e,n){super(e,n.length),this.text=n}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,n){let r=this.dom.nodeValue.length;e>r&&(e=r);let i=e,o=e,a=0;e==0&&n<0||e==r&&n>=0?Ln.chrome||Ln.gecko||(e?(i--,a=1):o<r&&(o++,a=-1)):n<0?i--:o<r&&o++;let s=UT(this.dom,i,o).getClientRects();if(!s.length)return null;let u=s[(a?a<0:n>=0)?0:s.length-1];return Ln.safari&&!a&&u.width==0&&(u=Array.prototype.find.call(s,d=>d.width)||u),a?jM(u,a<0):u||null}static of(e,n){let r=new l_(n||document.createTextNode(e),e);return n||(r.flags|=2),r}}class bO extends sa{constructor(e,n,r,i){super(e,n,i),this.widget=r}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,n){return this.coordsInWidget(e,n,!1)}coordsInWidget(e,n,r){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;if(r)return jM(this.dom.getBoundingClientRect(),this.length?e==0:n<=0);{let o=this.dom.getClientRects(),a=null;if(!o.length)return null;let s=this.flags&16?!0:this.flags&32?!1:e>0;for(let u=s?o.length-1:0;a=o[u],!(e>0?u==0:u==o.length-1||a.top<a.bottom);u+=s?-1:1);return jM(a,!s)}}get overrideDOMText(){if(!this.length)return Di.empty;let{root:e}=this;if(!e)return Di.empty;let n=this.posAtStart;return e.view.state.doc.slice(n,n+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,n,r,i,o){return o||(o=e.toDOM(n),e.editable||(o.contentEditable="false")),new bO(o,r,e,i)}}class QM extends sa{constructor(e){let n=document.createElement("img");n.className="cm-widgetBuffer",n.setAttribute("aria-hidden","true"),super(n,0,e)}get isHidden(){return!1}get overrideDOMText(){return Di.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class WVe{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,n,r){let{tile:i,index:o,beforeBreak:a,parents:s}=this;for(;e||n>0;)if(i.isComposite())if(a){if(!e)break;r&&r.break(),e--,a=!1}else if(o==i.children.length){if(!e&&!s.length)break;r&&r.leave(i),a=!!i.breakAfter,{tile:i,index:o}=s.pop(),o++}else{let u=i.children[o],d=u.breakAfter;(n>0?u.length<=e:u.length<e)&&(!r||r.skip(u,0,u.length)!==!1||!u.isComposite)?(a=!!d,o++,e-=u.length):(s.push({tile:i,index:o}),i=u,o=0,r&&u.isComposite()&&r.enter(u))}else if(o==i.length)a=!!i.breakAfter,{tile:i,index:o}=s.pop(),o++;else if(e){let u=Math.min(e,i.length-o);r&&r.skip(i,o,o+u),e-=u,o+=u}else break;return this.tile=i,this.index=o,this.beforeBreak=a,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class HVe{constructor(e,n,r,i){this.from=e,this.to=n,this.wrapper=r,this.rank=i}}class GVe{constructor(e,n,r){this.cache=e,this.root=n,this.blockWrappers=r,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,n,r,i){var o;this.flushBuffer();let a=this.ensureMarks(n,r),s=a.lastChild;if(s&&s.isText()&&!(s.flags&8)){this.cache.reused.set(s,2);let u=a.children[a.children.length-1]=new l_(s.dom,s.text+e);u.parent=a}else a.append(i||l_.of(e,(o=this.cache.find(l_))===null||o===void 0?void 0:o.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,n){let r=this.curLine;r.dom!=n.line.dom&&(r.setDOM(this.cache.reused.has(n.line)?FL(n.line.dom):n.line.dom),this.cache.reused.set(n.line,2));let i=r;for(let s=n.marks.length-1;s>=0;s--){let u=n.marks[s],d=i.lastChild;if(d instanceof lu&&d.mark.eq(u.mark))d.dom!=u.dom&&d.setDOM(FL(u.dom)),i=d;else{if(this.cache.reused.get(u)){let v=sa.get(u.dom);v&&v.setDOM(FL(u.dom))}let m=lu.of(u.mark,u.dom);i.append(m),i=m}this.cache.reused.set(u,2)}let o=sa.get(e.text);o&&this.cache.reused.set(o,2);let a=new l_(e.text,e.text.nodeValue);a.flags|=8,i.append(a)}addInlineWidget(e,n,r){let i=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);i||this.flushBuffer();let o=this.ensureMarks(n,r);!i&&!(e.flags&16)&&o.append(this.getBuffer(1)),o.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,n,r){this.flushBuffer(),this.ensureMarks(n,r).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let n=this.afterWidget||this.lastBlock;n.length+=e,this.pos+=e}addLineStart(e,n){var r;e||(e=Xse);let i=_O.start(e,n||((r=this.cache.find(_O))===null||r===void 0?void 0:r.dom),!!n);this.getBlockPos().append(this.lastBlock=this.curLine=i)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,n){var r;let i=this.curLine;for(let o=e.length-1;o>=0;o--){let a=e[o],s;if(n>0&&(s=i.lastChild)&&s instanceof lu&&s.mark.eq(a))i=s,n--;else{let u=lu.of(a,(r=this.cache.find(lu,d=>d.mark.eq(a)))===null||r===void 0?void 0:r.dom);i.append(u),i=u,n=0}}return i}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!jW(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(Ln.ios&&jW(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(jL,0,32)||new bO(jL.toDOM(),0,jL,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let n=new HVe(e.from,e.to,e.value,e.rank),r=this.wrappers.length;for(;r>0&&(this.wrappers[r-1].rank-n.rank||this.wrappers[r-1].to-n.to)<0;)r--;this.wrappers.splice(r,0,n)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let n=this.root;for(let r of this.wrappers){let i=n.lastChild;if(r.from<this.pos&&i instanceof Z0&&i.wrapper.eq(r.wrapper))n=i;else{let o=Z0.of(r.wrapper,(e=this.cache.find(Z0,a=>a.wrapper.eq(r.wrapper)))===null||e===void 0?void 0:e.dom);n.append(o),n=o}}return n}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let n=2|(e<0?16:32),r=this.cache.find(QM,void 0,1);return r&&(r.flags=n),r||new QM(n)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class XVe{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:i,lineBreak:o,done:a}=this.cursor.next(this.skipCount);if(this.skipCount=0,a)throw new Error("Ran out of text content when drawing inline views");this.text=i;let s=this.textOff=Math.min(e,i.length);return o?null:i.slice(0,s)}let n=Math.min(this.text.length,this.textOff+e),r=this.text.slice(this.textOff,n);return this.textOff=n,r}}const UM=[bO,_O,l_,lu,QM,Z0,oD];for(let t=0;t<UM.length;t++)UM[t].bucket=t;class YVe{constructor(e){this.view=e,this.buckets=UM.map(()=>[]),this.index=UM.map(()=>0),this.reused=new Map}add(e){let n=e.constructor.bucket,r=this.buckets[n];r.length<6?r.push(e):r[this.index[n]=(this.index[n]+1)%6]=e}find(e,n,r=2){let i=e.bucket,o=this.buckets[i],a=this.index[i];for(let s=o.length-1;s>=0;s--){let u=(s+a)%o.length,d=o[u];if((!n||n(d))&&!this.reused.has(d))return o.splice(u,1),u<a&&this.index[i]--,this.reused.set(d,r),d}return null}findWidget(e,n,r){let i=this.buckets[0];if(i.length)for(let o=0,a=0;;o++){if(o==i.length){if(a)return null;a=1,o=0}let s=i[o];if(!this.reused.has(s)&&(a==0?s.widget.compare(e):s.widget.constructor==e.constructor&&e.updateDOM(s.dom,this.view)))return i.splice(o,1),o<this.index[0]&&this.index[0]--,this.reused.set(s,1),s.length=n,s.flags=s.flags&-498|r,s}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,n=2){if(!this.reused.has(e))return this.reused.set(e,n),e.dom}}class KVe{constructor(e,n,r,i,o){this.view=e,this.decorations=i,this.disallowBlockEffectsFor=o,this.openWidget=!1,this.openMarks=0,this.cache=new YVe(e),this.text=new XVe(e.state.doc),this.builder=new GVe(this.cache,new oD(e,e.contentDOM),Kr.iter(r)),this.cache.reused.set(n,2),this.old=new WVe(n),this.reuseWalker={skip:(a,s,u)=>{if(this.cache.add(a),a.isComposite())return!1},enter:a=>this.cache.add(a),leave:()=>{},break:()=>{}}}run(e,n){let r=n&&this.getCompositionContext(n.text);for(let i=0,o=0,a=0;;){let s=a<e.length?e[a++]:null,u=s?s.fromA:this.old.root.length;if(u>i){let d=u-i;this.preserve(d,!a,!s),i=u,o+=d}if(!s)break;this.forward(s.fromA,s.toA),n&&s.fromA<=n.range.fromA&&s.toA>=n.range.toA?(this.emit(o,n.range.fromB),this.builder.addComposition(n,r),this.text.skip(n.range.toB-n.range.fromB),this.emit(n.range.toB,s.toB)):this.emit(o,s.toB),o=s.toB,i=s.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,n,r){let i=tQe(this.old),o=this.openMarks;this.old.advance(e,r?1:-1,{skip:(a,s,u)=>{if(a.isWidget())if(this.openWidget)this.builder.continueWidget(u-s);else{let d=u>0||s<a.length?bO.of(a.widget,this.view,u-s,a.flags&496,this.cache.maybeReuse(a)):this.cache.reuse(a);d.flags&256?(d.flags&=-2,this.builder.addBlockWidget(d)):(this.builder.ensureLine(null),this.builder.addInlineWidget(d,i,o),o=i.length)}else if(a.isText())this.builder.ensureLine(null),!s&&u==a.length?this.builder.addText(a.text,i,o,this.cache.reuse(a)):(this.cache.add(a),this.builder.addText(a.text.slice(s,u),i,o)),o=i.length;else if(a.isLine())a.flags&=-2,this.cache.reused.set(a,1),this.builder.addLine(a);else if(a instanceof QM)this.cache.add(a);else if(a instanceof lu)this.builder.ensureLine(null),this.builder.addMark(a,i,o),this.cache.reused.set(a,1),o=i.length;else return!1;this.openWidget=!1},enter:a=>{a.isLine()?this.builder.addLineStart(a.attrs,this.cache.maybeReuse(a)):(this.cache.add(a),a instanceof lu&&i.unshift(a.mark)),this.openWidget=!1},leave:a=>{a.isLine()?i.length&&(i.length=o=0):a instanceof lu&&(i.shift(),o=Math.min(o,i.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,n){let r=null,i=this.builder,o=0,a=Kr.spans(this.decorations,e,n,{point:(s,u,d,m,v,_)=>{if(d instanceof j_){if(this.disallowBlockEffectsFor[_]){if(d.block)throw new RangeError("Block decorations may not be specified via plugins");if(u>this.view.state.doc.lineAt(s).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(o=m.length,v>m.length)i.continueWidget(u-s);else{let O=d.widget||(d.block?wO.block:wO.inline),E=JVe(d),A=this.cache.findWidget(O,u-s,E)||bO.of(O,this.view,u-s,E);d.block?(d.startSide>0&&i.addLineStartIfNotCovered(r),i.addBlockWidget(A)):(i.ensureLine(r),i.addInlineWidget(A,m,v))}r=null}else r=eQe(r,d);u>s&&this.text.skip(u-s)},span:(s,u,d,m)=>{for(let v=s;v<u;){let _=this.text.next(Math.min(512,u-v));_==null?(i.addLineStartIfNotCovered(r),i.addBreak(),v++):(i.ensureLine(r),i.addText(_,d,m),v+=_.length),r=null}}});i.addLineStartIfNotCovered(r),this.openWidget=a>o,this.openMarks=a}forward(e,n){n-e<=10?this.old.advance(n-e,1,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(n-e-10,-1),this.old.advance(5,1,this.reuseWalker))}getCompositionContext(e){let n=[],r=null;for(let i=e.parentNode;;i=i.parentNode){let o=sa.get(i);if(i==this.view.contentDOM)break;o instanceof lu?n.push(o):o?.isLine()?r=o:i.nodeName=="DIV"&&!r&&i!=this.view.contentDOM?r=new _O(i,Xse):n.push(lu.of(new rE({tagName:i.nodeName.toLowerCase(),attributes:TVe(i)}),i))}return{line:r,marks:n}}}function jW(t,e){let n=r=>{for(let i of r.children)if((e?i.isText():i.length)||n(i))return!0;return!1};return n(t)}function JVe(t){let e=t.isReplace?(t.startSide<0?64:0)|(t.endSide>0?128:0):t.startSide>0?32:16;return t.block&&(e|=256),e}const Xse={class:"cm-line"};function eQe(t,e){let n=e.spec.attributes,r=e.spec.class;return!n&&!r||(t||(t={class:"cm-line"}),n&&iF(n,t),r&&(t.class+=" "+r)),t}function tQe(t){let e=[];for(let n=t.parents.length;n>1;n--){let r=n==t.parents.length?t.tile:t.parents[n].tile;r instanceof lu&&e.push(r.mark)}return e}function FL(t){let e=sa.get(t);return e&&e.setDOM(t.cloneNode()),t}class wO extends Sd{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}wO.inline=new wO("span");wO.block=new wO("div");const jL=new class extends Sd{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class VW{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Zn.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new oD(e,e.contentDOM),this.updateInner([new id(0,0,0,e.state.doc.length)],null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:m,toA:v})=>v<this.minWidthFrom||m>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!uQe(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let o=i>-1?rQe(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){let{from:m,to:v}=this.hasComposition;r=new id(m,v,e.changes.mapPos(m,-1),e.changes.mapPos(v,1)).addToSet(r.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Ln.ie||Ln.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,s=this.blockWrappers;this.updateDeco();let u=sQe(a,this.decorations,e.changes);u.length&&(r=id.extendWithRanges(r,u));let d=lQe(s,this.blockWrappers,e.changes);return d.length&&(r=id.extendWithRanges(r,d)),o&&!r.some(m=>m.fromA<=o.range.fromA&&m.toA>=o.range.toA)&&(r=o.range.addToSet(r.slice())),this.tile.flags&2&&r.length==0?!1:(this.updateInner(r,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0;let{observer:r}=this.view;r.ignore(()=>{if(n||e.length){let a=this.tile,s=new KVe(this.view,a,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=s.run(e,n),I6(a,s.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ln.chrome||Ln.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(o),o&&(o.written||r.selectionRange.focusNode!=o.node||!this.tile.dom.contains(o.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.tile.children)o.isWidget()&&o.widget instanceof VL&&i.push(o.dom);r.updateGaps(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(Use)&&(this.editContextFormatting=r.value)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:r}=this.tile,i=this.view.root.activeElement,o=i==r,a=!o&&!(this.view.state.facet(Qg)||r.tabIndex>-1)&&p5(r,this.view.observer.selectionRange)&&!(i&&r.contains(i));if(!(o||n||a))return;let s=this.forceSelection;this.forceSelection=!1;let u=this.view.state.selection.main,d,m;if(u.empty?m=d=this.inlineDOMNearPos(u.anchor,u.assoc||1):(m=this.inlineDOMNearPos(u.head,u.head==u.from?1:-1),d=this.inlineDOMNearPos(u.anchor,u.anchor==u.from?1:-1)),Ln.gecko&&u.empty&&!this.hasComposition&&nQe(d)){let _=document.createTextNode("");this.view.observer.ignore(()=>d.node.insertBefore(_,d.node.childNodes[d.offset]||null)),d=m=new Ef(_,0),s=!0}let v=this.view.observer.selectionRange;(s||!v.focusNode||(!WC(d.node,d.offset,v.anchorNode,v.anchorOffset)||!WC(m.node,m.offset,v.focusNode,v.focusOffset))&&!this.suppressWidgetCursorChange(v,u))&&(this.view.observer.ignore(()=>{Ln.android&&Ln.chrome&&r.contains(v.focusNode)&&cQe(v.focusNode,r)&&(r.blur(),r.focus({preventScroll:!0}));let _=QT(this.view.root);if(_)if(u.empty){if(Ln.gecko){let O=iQe(d.node,d.offset);if(O&&O!=3){let E=(O==1?Ese:Ase)(d.node,d.offset);E&&(d=new Ef(E.node,E.offset))}}_.collapse(d.node,d.offset),u.bidiLevel!=null&&_.caretBidiLevel!==void 0&&(_.caretBidiLevel=u.bidiLevel)}else if(_.extend){_.collapse(d.node,d.offset);try{_.extend(m.node,m.offset)}catch{}}else{let O=document.createRange();u.anchor>u.head&&([d,m]=[m,d]),O.setEnd(m.node,m.offset),O.setStart(d.node,d.offset),_.removeAllRanges(),_.addRange(O)}a&&this.view.root.activeElement==r&&(r.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(d,m)),this.impreciseAnchor=d.precise?null:new Ef(v.anchorNode,v.anchorOffset),this.impreciseHead=m.precise?null:new Ef(v.focusNode,v.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&WC(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=QT(e.root),{anchorNode:i,anchorOffset:o}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let a=this.lineAt(n.head,n.assoc);if(!a)return;let s=a.posAtStart;if(n.head==s||n.head==s+a.length)return;let u=this.coordsAt(n.head,-1),d=this.coordsAt(n.head,1);if(!u||!d||u.bottom>d.top)return;let m=this.domAtPos(n.head+n.assoc,n.assoc);r.collapse(m.node,m.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let v=e.observer.selectionRange;e.docView.posFromDOM(v.anchorNode,v.anchorOffset)!=n.from&&r.collapse(i,o)}posFromDOM(e,n){let r=this.tile.nearest(e);if(!r)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let i=r.posAtStart;if(r.isComposite()){let o;if(e==r.dom)o=r.dom.childNodes[n];else{let a=dy(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==r.dom)break;a==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?a=-1:a=1),e=s}a<0?o=e:o=e.nextSibling}if(o==r.dom.firstChild)return i;for(;o&&!sa.get(o);)o=o.nextSibling;if(!o)return i+r.length;for(let a=0,s=i;;a++){let u=r.children[a];if(u.dom==o)return s;s+=u.length+u.breakAfter}}else return r.isText()?e==r.dom?i+n:i+(n?r.length:0):i}domAtPos(e,n){let{tile:r,offset:i}=this.tile.resolveBlock(e,n);return r.isWidget()?r.domPosFor(e,n):r.domIn(i,n)}inlineDOMNearPos(e,n){let r,i=-1,o=!1,a,s=-1,u=!1;return this.tile.blockTiles((d,m)=>{if(d.isWidget()){if(d.flags&32&&m>=e)return!0;d.flags&16&&(o=!0)}else{let v=m+d.length;if(m<=e&&(r=d,i=e-m,o=v<e),v>=e&&!a&&(a=d,s=e-m,u=m>e),m>e&&a)return!0}}),!r&&!a?this.domAtPos(e,n):(o&&a?r=null:u&&r&&(a=null),r&&n<0||!a?r.domIn(i,n):a.domIn(s,n))}coordsAt(e,n){let{tile:r,offset:i}=this.tile.resolveBlock(e,n);return r.isWidget()?r.widget instanceof VL?null:r.coordsInWidget(i,n,!0):r.coordsIn(i,n)}lineAt(e,n){let{tile:r}=this.tile.resolveBlock(e,n);return r.isLine()?r:null}coordsForChar(e){let{tile:n,offset:r}=this.tile.resolveBlock(e,1);if(!n.isLine())return null;function i(o,a){if(o.isComposite())for(let s of o.children){if(s.length>=a){let u=i(s,a);if(u)return u}if(a-=s.length,a<0)break}else if(o.isText()&&a<o.length){let s=ba(o.text,a);if(s==a)return null;let u=UT(o.dom,a,s).getClientRects();for(let d=0;d<u.length;d++){let m=u[d];if(d==u.length-1||m.top<m.bottom&&m.left<m.right)return m}}return null}return i(n,r)}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,o=this.view.contentDOM.clientWidth,a=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,u=this.view.textDirection==wo.LTR,d=0,m=(v,_,O)=>{for(let E=0;E<v.children.length&&!(_>i);E++){let A=v.children[E],M=_+A.length,L=A.dom.getBoundingClientRect(),{height:$}=L;if(O&&!E&&(d+=L.top-O.top),A instanceof Z0)M>r&&m(A,_,L);else if(_>=r&&(d>0&&n.push(-d),n.push($+d),d=0,a)){let N=A.dom.lastChild,F=N?m5(N):[];if(F.length){let Q=F[F.length-1],W=u?Q.right-L.left:L.right-Q.left;W>s&&(s=W,this.minWidth=o,this.minWidthFrom=_,this.minWidthTo=M)}}O&&E==v.children.length-1&&(d+=O.bottom-L.bottom),_=M+A.breakAfter}};return m(this.tile,0,null),n}textDirectionAt(e){let{tile:n}=this.tile.resolveBlock(e,1);return getComputedStyle(n.dom).direction=="rtl"?wo.RTL:wo.LTR}measureTextSize(){let e=this.tile.blockTiles(a=>{if(a.isLine()&&a.children.length&&a.length<=20){let s=0,u;for(let d of a.children){if(!d.isText()||/[^ -~]/.test(d.text))return;let m=m5(d.dom);if(m.length!=1)return;s+=m[0].width,u=m[0].height}if(s)return{lineHeight:a.dom.getBoundingClientRect().height,charWidth:s/a.length,textHeight:u}}});if(e)return e;let n=document.createElement("div"),r,i,o;return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(n);let a=m5(n.firstChild)[0];r=n.getBoundingClientRect().height,i=a&&a.width?a.width/27:7,o=a&&a.height?a.height:r,n.remove()}),{lineHeight:r,charWidth:i,textHeight:o}}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let o=i==n.viewports.length?null:n.viewports[i],a=o?o.from-1:this.view.state.doc.length;if(a>r){let s=(n.lineBlockAt(a).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(Zn.replace({widget:new VL(s),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!o)break;r=o.to+1}return Zn.set(e)}updateDeco(){let e=1,n=this.view.state.facet(ZT).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),r=!1,i=this.view.state.facet(Wse).map((o,a)=>{let s=typeof o=="function";return s&&(r=!0),s?o(this.view):o});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(Kr.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(qse).map(o=>typeof o=="function"?o(this.view):o)}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(Qse))try{if(d(this.view,e.range,e))return!0}catch(m){du(this.view.state,m,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let o=uF(this.view),a={left:r.left-o.left,top:r.top-o.top,right:r.right+o.right,bottom:r.bottom+o.bottom},{offsetWidth:s,offsetHeight:u}=this.view.scrollDOM;AVe(this.view.scrollDOM,a,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,u),-u),this.view.textDirection==wo.LTR)}lineHasWidget(e){let n=r=>r.isWidget()||r.children.some(n);return n(this.tile.resolveBlock(e,1).tile)}destroy(){I6(this.tile)}}function I6(t,e){let n=e?.get(t);if(n!=1){n==null&&t.destroy();for(let r of t.children)I6(r,e)}}function nQe(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function Yse(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=Ese(n.focusNode,n.focusOffset),i=Ase(n.focusNode,n.focusOffset),o=r||i;if(i&&r&&i.node!=r.node){let s=sa.get(i.node);if(!s||s.isText()&&s.text!=i.node.nodeValue)o=i;else if(t.docView.lastCompositionAfterCursor){let u=sa.get(r.node);!u||u.isText()&&u.text!=r.node.nodeValue||(o=i)}}if(t.docView.lastCompositionAfterCursor=o!=r,!o)return null;let a=e-o.offset;return{from:a,to:a+o.node.nodeValue.length,node:o.node}}function rQe(t,e,n){let r=Yse(t,n);if(!r)return null;let{node:i,from:o,to:a}=r,s=i.nodeValue;if(/[\n\r]/.test(s)||t.state.doc.sliceString(r.from,r.to)!=s)return null;let u=e.invertedDesc;return{range:new id(u.mapPos(o),u.mapPos(a),o,a),text:i}}function iQe(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let oQe=class{constructor(){this.changes=[]}compareRange(e,n){Dw(e,n,this.changes)}comparePoint(e,n){Dw(e,n,this.changes)}boundChange(e){Dw(e,e,this.changes)}};function sQe(t,e,n){let r=new oQe;return Kr.compare(t,e,n,r),r.changes}class aQe{constructor(){this.changes=[]}compareRange(e,n){Dw(e,n,this.changes)}comparePoint(){}boundChange(e){Dw(e,e,this.changes)}}function lQe(t,e,n){let r=new aQe;return Kr.compare(t,e,n,r),r.changes}function cQe(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function uQe(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}class VL extends Sd{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function hQe(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),o=e-i.from;if(i.length==0)return Qt.cursor(e);o==0?n=1:o==i.length&&(n=-1);let a=o,s=o;n<0?a=ba(i.text,o,!1):s=ba(i.text,o);let u=r(i.text.slice(a,s));for(;a>0;){let d=ba(i.text,a,!1);if(r(i.text.slice(d,a))!=u)break;a=d}for(;s<i.length;){let d=ba(i.text,s);if(r(i.text.slice(s,d))!=u)break;s=d}return Qt.range(a+i.from,s+i.from)}function dQe(t,e,n,r,i){let o=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let s=t.viewState.heightOracle.textHeight,u=Math.floor((i-n.top-(t.defaultLineHeight-s)*.5)/s);o+=u*t.viewState.heightOracle.lineLength}let a=t.state.sliceDoc(n.from,n.to);return n.from+b6(a,o,t.state.tabSize)}function D6(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let o of r.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!i||o.type==pl.Text&&(i.type!=o.type||(n<0?o.from<e:o.to>e)))&&(i=o)}}return i||r}return r}function fQe(t,e,n,r){let i=D6(t,e.head,e.assoc||-1),o=!r||i.type!=pl.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let a=t.dom.getBoundingClientRect(),s=t.textDirectionAt(i.from),u=t.posAtCoords({x:n==(s==wo.LTR)?a.right-1:a.left+1,y:(o.top+o.bottom)/2});if(u!=null)return Qt.cursor(u,n?-1:1)}return Qt.cursor(n?i.to:i.from,n?-1:1)}function QW(t,e,n,r){let i=t.state.doc.lineAt(e.head),o=t.bidiSpans(i),a=t.textDirectionAt(i.from);for(let s=e,u=null;;){let d=jVe(i,o,a,s,n),m=Dse;if(!d){if(i.number==(n?t.state.doc.lines:1))return s;m=`
`,i=t.state.doc.line(i.number+(n?1:-1)),o=t.bidiSpans(i),d=t.visualLineSide(i,!n)}if(u){if(!u(m))return s}else{if(!r)return d;u=r(m)}s=d}}function pQe(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return o=>{let a=r(o);return i==Xo.Space&&(i=a),i==a}}function mQe(t,e,n,r){let i=e.head,o=n?1:-1;if(i==(n?t.state.doc.length:0))return Qt.cursor(i,e.assoc);let a=e.goalColumn,s,u=t.contentDOM.getBoundingClientRect(),d=t.coordsAtPos(i,e.assoc||-1),m=t.documentTop;if(d)a==null&&(a=d.left-u.left),s=o<0?d.top:d.bottom;else{let O=t.viewState.lineBlockAt(i);a==null&&(a=Math.min(u.right-u.left,t.defaultCharacterWidth*(i-O.from))),s=(o<0?O.top:O.bottom)+m}let v=u.left+a,_=r??t.viewState.heightOracle.textHeight>>1;for(let O=0;;O+=10){let E=s+(_+O)*o,A=L6(t,{x:v,y:E},!1,o);return Qt.cursor(A.pos,A.assoc,void 0,a)}}function HC(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(o,a,s)=>{if(e>o&&e<a){let u=r||n||(e-o<a-e?-1:1);e=u<0?o:a,r=u}});if(!r)return e}}function Kse(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],o=null;if(i.empty){let a=HC(t,i.from,0);a!=i.from&&(o=Qt.cursor(a,-1))}else{let a=HC(t,i.from,-1),s=HC(t,i.to,1);(a!=i.from||s!=i.to)&&(o=Qt.range(i.from==i.anchor?a:s,i.from==i.head?a:s))}o&&(n||(n=e.ranges.slice()),n[r]=o)}return n?Qt.create(n,e.mainIndex):e}function QL(t,e,n){let r=HC(t.state.facet(oE).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:Qt.cursor(r,r<n.from?1:-1)}class Jp{constructor(e,n){this.pos=e,this.assoc=n}}function L6(t,e,n,r){let i=t.contentDOM.getBoundingClientRect(),o=i.top+t.viewState.paddingTop,{x:a,y:s}=e,u=s-o,d;for(;;){if(u<0)return new Jp(0,1);if(u>t.viewState.docHeight)return new Jp(t.state.doc.length,-1);if(d=t.elementAtHeight(u),r==null)break;if(d.type==pl.Text){let _=t.docView.coordsAt(r<0?d.from:d.to,r);if(_&&(r<0?_.top<=u+o:_.bottom>=u+o))break}let v=t.viewState.heightOracle.textHeight/2;u=r>0?d.bottom+v:d.top-v}if(t.viewport.from>=d.to||t.viewport.to<=d.from){if(n)return null;if(d.type==pl.Text){let v=dQe(t,i,d,a,s);return new Jp(v,v==d.from?1:-1)}}if(d.type!=pl.Text)return u<(d.top+d.bottom)/2?new Jp(d.from,1):new Jp(d.to,-1);let m=t.docView.lineAt(d.from,2);return(!m||m.length!=d.length)&&(m=t.docView.lineAt(d.from,-2)),Jse(t,m,d.from,a,s)}function Jse(t,e,n,r,i){let o=-1,a=null,s=1e9,u=1e9,d=i,m=i,v=(_,O)=>{for(let E=0;E<_.length;E++){let A=_[E];if(A.top==A.bottom)continue;let M=A.left>r?A.left-r:A.right<r?r-A.right:0,L=A.top>i?A.top-i:A.bottom<i?i-A.bottom:0;A.top<=m&&A.bottom>=d&&(d=Math.min(A.top,d),m=Math.max(A.bottom,m),L=0),(o<0||(L-u||M-s)<0)&&(o>=0&&u&&s<M&&a.top<=m-2&&a.bottom>=d+2?u=0:(o=O,s=M,u=L,a=A))}};if(e.isText()){for(let O=0;O<e.length;){let E=ba(e.text,O);if(v(UT(e.dom,O,E).getClientRects(),O),!s&&!u)break;O=E}return r>(a.left+a.right)/2==(UW(t,o+n)==wo.LTR)?new Jp(n+ba(e.text,o),-1):new Jp(n+o,1)}else{if(!e.length)return new Jp(n,1);for(let A=0;A<e.children.length;A++){let M=e.children[A];if(M.flags&48)continue;let L=(M.dom.nodeType==1?M.dom:UT(M.dom,0,M.length)).getClientRects();if(v(L,A),!s&&!u)break}let _=e.children[o],O=e.posBefore(_,n);return _.isComposite()||_.isText()?Jse(t,_,O,Math.max(a.left,Math.min(a.right,r)),i):r>(a.left+a.right)/2==(UW(t,o+n)==wo.LTR)?new Jp(O+_.length,-1):new Jp(O,1)}}function UW(t,e){let n=t.state.doc.lineAt(e);return t.bidiSpans(n)[Wg.find(t.bidiSpans(n),e-n.from,-1,1)].dir}const yC="";class gQe{constructor(e,n){this.points=e,this.view=n,this.text="",this.lineSeparator=n.state.facet($r.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=yC}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let o=this.text.length;this.readNode(i);let a=sa.get(i),s=i.nextSibling;if(s==n){a?.breakAfter&&!s&&r!=this.view.contentDOM&&this.lineBreak();break}let u=sa.get(s);(a&&u?a.breakAfter:(a?a.breakAfter:FM(i))||FM(s)&&(i.nodeName!="BR"||a?.isWidget())&&this.text.length>o)&&!vQe(s,n)&&this.lineBreak(),i=s}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,a=1,s;if(this.lineSeparator?(o=n.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(s=i.exec(n))&&(o=s.index,a=s[0].length),this.append(n.slice(r,o<0?n.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=a-1);r=o+a}}readNode(e){let n=sa.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(yQe(e,r.node,r.offset)?n:0))}}function yQe(t,e,n){for(;;){if(!e||n<dy(e))return!1;if(e==t)return!0;n=ov(e)+1,e=e.parentNode}}function vQe(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let r=sa.get(t);if(!r?.isWidget())return!1;r&&(n||(n=[])).push(r)}if(n)for(let r of n){let i=r.overrideDOMText;if(i?.length)return!1}return!0}class ZW{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class xQe{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:o,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=eae(e.docView.tile,n,r,0))){let s=o||a?[]:bQe(e),u=new gQe(s,e);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=wQe(s,this.bounds.from)}else{let s=e.observer.selectionRange,u=o&&o.node==s.focusNode&&o.offset==s.focusOffset||!E6(e.contentDOM,s.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(s.focusNode,s.focusOffset),d=a&&a.node==s.anchorNode&&a.offset==s.anchorOffset||!E6(e.contentDOM,s.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(s.anchorNode,s.anchorOffset),m=e.viewport;if((Ln.ios||Ln.chrome)&&e.state.selection.main.empty&&u!=d&&(m.from>0||m.to<e.state.doc.length)){let v=Math.min(u,d),_=Math.max(u,d),O=m.from-v,E=m.to-_;(O==0||O==1||v==0)&&(E==0||E==-1||_==e.state.doc.length)&&(u=0,d=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(Qt.range(d,u)):this.newSel=Qt.single(d,u)}}}function eae(t,e,n,r){if(t.isComposite()){let i=-1,o=-1,a=-1,s=-1;for(let u=0,d=r,m=r;u<t.children.length;u++){let v=t.children[u],_=d+v.length;if(d<e&&_>n)return eae(v,e,n,d);if(_>=e&&i==-1&&(i=u,o=d),d>n&&v.dom.parentNode==t.dom){a=u,s=m;break}m=_,d=_+v.breakAfter}return{from:o,to:s<0?r+t.length:s,startDOM:(i?t.children[i-1].dom.nextSibling:null)||t.dom.firstChild,endDOM:a<t.children.length&&a>=0?t.children[a].dom:null}}else return t.isText()?{from:r,to:r+t.length,startDOM:t.dom,endDOM:t.dom.nextSibling}:null}function tae(t,e){let n,{newSel:r}=e,i=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:s}=e.bounds,u=i.from,d=null;(o===8||Ln.android&&e.text.length<s-a)&&(u=i.to,d="end");let m=nae(t.state.doc.sliceString(a,s,yC),e.text,u-a,d);m&&(Ln.chrome&&o==13&&m.toB==m.from+2&&e.text.slice(m.from,m.toB)==yC+yC&&m.toB--,n={from:a+m.from,to:a+m.toA,insert:Di.of(e.text.slice(m.from,m.toB).split(yC))})}else r&&(!t.hasFocus&&t.state.facet(Qg)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(Ln.mac||Ln.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=Qt.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Di.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:t.state.doc.lineAt(i.from).to<i.to&&t.docView.lineHasWidget(i.to)&&t.inputState.insertingTextAt>Date.now()-50?n={from:i.from,to:i.to,insert:t.state.toText(t.inputState.insertingText)}:Ln.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=Qt.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Di.of([" "])}),n)return hF(t,n,r,o);if(r&&!r.main.eq(i)){let a=!1,s="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(a=!0),s=t.inputState.lastSelectionOrigin,s=="select.pointer"&&(r=Kse(t.state.facet(oE).map(u=>u(t)),r))),t.dispatch({selection:r,scrollIntoView:a,userEvent:s}),!0}else return!1}function hF(t,e,n,r=-1){if(Ln.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(Ln.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Lw(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Lw(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Lw(t.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a,s=()=>a||(a=_Qe(t,e,n));return t.state.facet(Bse).some(u=>u(t,e.from,e.to,o,s))||t.dispatch(s()),!0}function _Qe(t,e,n){let r,i=t.state,o=i.selection.main,a=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let u=e.from<o.from?-1:1,d=u<0?o.from:o.to,m=HC(i.facet(oE).map(v=>v(t)),d,u);e.from==m&&(a=m)}if(a>-1)r={changes:e,selection:Qt.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let u=o.from<e.from?i.sliceDoc(o.from,e.from):"",d=o.to>e.to?i.sliceDoc(e.to,o.to):"";r=i.replaceSelection(t.state.toText(u+e.insert.sliceString(0,void 0,t.state.lineBreak)+d))}else{let u=i.changes(e),d=n&&n.main.to<=u.newLength?n.main:void 0;if(i.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=o.to+10&&e.to>=o.to-10){let m=t.state.sliceDoc(e.from,e.to),v,_=n&&Yse(t,n.main.head);if(_){let E=e.insert.length-(e.to-e.from);v={from:_.from,to:_.to-E}}else v=t.state.doc.lineAt(o.head);let O=o.to-e.to;r=i.changeByRange(E=>{if(E.from==o.from&&E.to==o.to)return{changes:u,range:d||E.map(u)};let A=E.to-O,M=A-m.length;if(t.state.sliceDoc(M,A)!=m||A>=v.from&&M<=v.to)return{range:E};let L=i.changes({from:M,to:A,insert:e.insert}),$=E.to-o.to;return{changes:L,range:d?Qt.range(Math.max(0,d.anchor+$),Math.max(0,d.head+$)):E.map(L)}})}else r={changes:u,selection:d&&i.selection.replaceRange(d)}}let s="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,s+=".compose",t.inputState.compositionFirstChange&&(s+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:s,scrollIntoView:!0})}function nae(t,e,n,r){let i=Math.min(t.length,e.length),o=0;for(;o<i&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&t.length==e.length)return null;let a=t.length,s=e.length;for(;a>0&&s>0&&t.charCodeAt(a-1)==e.charCodeAt(s-1);)a--,s--;if(r=="end"){let u=Math.max(0,o-Math.min(a,s));n-=a+u-o}if(a<o&&t.length<e.length){let u=n<=o&&n>=a?o-n:0;o-=u,s=o+(s-a),a=o}else if(s<o){let u=n<=o&&n>=s?o-n:0;o-=u,a=o+(a-s),s=o}return{from:o,toA:a,toB:s}}function bQe(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new ZW(n,r)),(i!=n||o!=r)&&e.push(new ZW(i,o))),e}function wQe(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?Qt.single(n+e,r+e):null}class OQe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ln.safari&&e.contentDOM.addEventListener("input",()=>null),Ln.gecko&&NQe(e.contentDOM.ownerDocument)}handleEvent(e){!MQe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=SQe(e),r=this.handlers,i=this.view.contentDOM;for(let o in n)if(o!="scroll"){let a=!n[o].handlers.length,s=r[o];s&&a!=!s.handlers.length&&(i.removeEventListener(o,this.handleEvent),s=null),s||i.addEventListener(o,this.handleEvent,{passive:a})}for(let o in r)o!="scroll"&&!n[o]&&i.removeEventListener(o,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&iae.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ln.android&&Ln.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Ln.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=rae.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||CQe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Lw(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Ln.safari&&!Ln.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function qW(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){du(n.state,i)}}}function SQe(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,o=i&&i.plugin.domEventHandlers,a=i&&i.plugin.domEventObservers;if(o)for(let s in o){let u=o[s];u&&n(s).handlers.push(qW(r.value,u))}if(a)for(let s in a){let u=a[s];u&&n(s).observers.push(qW(r.value,u))}}for(let r in Bf)n(r).handlers.push(Bf[r]);for(let r in xd)n(r).observers.push(xd[r]);return e}const rae=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],CQe="dthko",iae=[16,17,18,20,91,92,224,225],cP=6;function uP(t){return Math.max(0,t)*.7+8}function TQe(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class kQe{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=PVe(e.contentDOM),this.atoms=e.state.facet(oE).map(a=>a(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet($r.allowMultipleSelections)&&EQe(e,n),this.dragging=PQe(e,n)&&aae(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&TQe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,o=0,a=this.view.win.innerWidth,s=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:s}=this.scrollParents.y.getBoundingClientRect());let u=uF(this.view);e.clientX-u.left<=i+cP?n=-uP(i-e.clientX):e.clientX+u.right>=a-cP&&(n=uP(e.clientX-a)),e.clientY-u.top<=o+cP?r=-uP(o-e.clientY):e.clientY+u.bottom>=s-cP&&(r=uP(e.clientY-s)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=Kse(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function EQe(t,e){let n=t.state.facet(Lse);return n.length?n[0](e):Ln.mac?e.metaKey:e.ctrlKey}function AQe(t,e){let n=t.state.facet($se);return n.length?n[0](e):Ln.mac?!e.altKey:!e.ctrlKey}function PQe(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=QT(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let a=i[o];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function MQe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=sa.get(n))&&r.isWidget()&&!r.isHidden&&r.widget.ignoreEvent(e))return!1;return!0}const Bf=Object.create(null),xd=Object.create(null),oae=Ln.ie&&Ln.ie_version<15||Ln.ios&&Ln.webkit_version<604;function RQe(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),sae(t,n.value)},50)}function sD(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function sae(t,e){e=sD(t.state,aF,e);let{state:n}=t,r,i=1,o=n.toText(e),a=o.lines==n.selection.ranges.length;if($6!=null&&n.selection.ranges.every(u=>u.empty)&&$6==o.toString()){let u=-1;r=n.changeByRange(d=>{let m=n.doc.lineAt(d.from);if(m.from==u)return{range:d};u=m.from;let v=n.toText((a?o.line(i++).text:e)+n.lineBreak);return{changes:{from:m.from,insert:v},range:Qt.cursor(d.from+v.length)}})}else a?r=n.changeByRange(u=>{let d=o.line(i++);return{changes:{from:u.from,to:u.to,insert:d.text},range:Qt.cursor(u.from+d.length)}}):r=n.replaceSelection(o);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}xd.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Bf.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);xd.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};xd.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Bf.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(zse))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=DQe(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new kQe(t,e,n,r)),r&&t.observer.ignore(()=>{Tse(t.contentDOM);let o=t.root.activeElement;o&&!o.contains(t.contentDOM)&&o.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function WW(t,e,n,r){if(r==1)return Qt.cursor(e,n);if(r==2)return hQe(t.state,e,n);{let i=t.docView.lineAt(e,n),o=t.state.doc.lineAt(i?i.posAtEnd:e),a=i?i.posAtStart:o.from,s=i?i.posAtEnd:o.to;return s<t.state.doc.length&&s==o.to&&s++,Qt.range(a,s)}}const IQe=Ln.ie&&Ln.ie_version<=11;let HW=null,GW=0,XW=0;function aae(t){if(!IQe)return t.detail;let e=HW,n=XW;return HW=t,XW=Date.now(),GW=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(GW+1)%3:1}function DQe(t,e){let n=t.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),r=aae(e),i=t.state.selection;return{update(o){o.docChanged&&(n.pos=o.changes.mapPos(n.pos),i=i.map(o.changes))},get(o,a,s){let u=t.posAndSideAtCoords({x:o.clientX,y:o.clientY},!1),d,m=WW(t,u.pos,u.assoc,r);if(n.pos!=u.pos&&!a){let v=WW(t,n.pos,n.assoc,r),_=Math.min(v.from,m.from),O=Math.max(v.to,m.to);m=_<m.from?Qt.range(_,O):Qt.range(O,_)}return a?i.replaceRange(i.main.extend(m.from,m.to)):s&&r==1&&i.ranges.length>1&&(d=LQe(i,u.pos))?d:s?i.addRange(m):Qt.create([m])}}}function LQe(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return Qt.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Bf.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.tile.nearest(e.target);if(i&&i.isWidget()){let o=i.posAtStart,a=o+i.length;(o>=n.to||a<=n.from)&&(n=Qt.range(o,a))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",sD(t.state,lF,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Bf.dragend=t=>(t.inputState.draggedContent=null,!1);function YW(t,e,n,r){if(n=sD(t.state,aF,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,a=r&&o&&AQe(t,e)?{from:o.from,to:o.to}:null,s={from:i,insert:n},u=t.state.changes(a?[a,s]:s);t.focus(),t.dispatch({changes:u,selection:{anchor:u.mapPos(i,-1),head:u.mapPos(i,1)},userEvent:a?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Bf.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,o=()=>{++i==n.length&&YW(t,e,r.filter(a=>a!=null).join(t.state.lineBreak),!1)};for(let a=0;a<n.length;a++){let s=new FileReader;s.onerror=o,s.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(s.result)||(r[a]=s.result),o()},s.readAsText(n[a])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return YW(t,e,r,!0),!0}return!1};Bf.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=oae?null:e.clipboardData;return n?(sae(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(RQe(t),!1)};function $Qe(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function zQe(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:o}of t.selection.ranges){let a=t.doc.lineAt(o);a.number>i&&(e.push(a.text),n.push({from:a.from,to:Math.min(t.doc.length,a.to+1)})),i=a.number}r=!0}return{text:sD(t,lF,e.join(t.lineBreak)),ranges:n,linewise:r}}let $6=null;Bf.copy=Bf.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=zQe(t.state);if(!n&&!i)return!1;$6=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=oae?null:e.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):($Qe(t,n),!1)};const lae=wy.define();function cae(t,e){let n=[];for(let r of t.facet(Fse)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:lae.of(!0)}):null}function uae(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=cae(t.state,e);n?t.dispatch(n):t.update([])}},10)}xd.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),uae(t)};xd.blur=t=>{t.observer.clearSelectionRange(),uae(t)};xd.compositionstart=xd.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};xd.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ln.chrome&&Ln.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};xd.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Bf.beforeinput=(t,e)=>{var n,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let o=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),a=e.getTargetRanges();if(o&&a.length){let s=a[0],u=t.posAtDOM(s.startContainer,s.startOffset),d=t.posAtDOM(s.endContainer,s.endOffset);return hF(t,{from:u,to:d,insert:t.state.toText(o)},null),!0}}let i;if(Ln.chrome&&Ln.android&&(i=rae.find(o=>o.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let o=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>o+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Ln.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Ln.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>xd.compositionend(t,e),20),!1};const KW=new Set;function NQe(t){KW.has(t)||(KW.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const JW=["pre-wrap","normal","pre-line","break-spaces"];let OO=!1;function eH(){OO=!1}class BQe{constructor(e){this.lineWrapping=e,this.doc=Di.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return JW.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,o,a){let s=JW.indexOf(e)>-1,u=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=o,u){this.heightSamples={};for(let d=0;d<a.length;d++){let m=a[d];m<0?d++:this.heightSamples[Math.floor(m*10)]=!0}}return u}}class FQe{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class kf{constructor(e,n,r,i,o){this.from=e,this.length=n,this.top=r,this.height=i,this._content=o}get type(){return typeof this._content=="number"?pl.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof j_?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new kf(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Ro=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(Ro||(Ro={}));const g5=.001;class bc{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>g5&&(OO=!0),this.height=e)}replace(e,n,r){return bc.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let o=this,a=r.doc;for(let s=i.length-1;s>=0;s--){let{fromA:u,toA:d,fromB:m,toB:v}=i[s],_=o.lineAt(u,Ro.ByPosNoHeight,r.setDoc(n),0,0),O=_.to>=d?_:o.lineAt(d,Ro.ByPosNoHeight,r,0,0);for(v+=O.to-d,d=O.to;s>0&&_.from<=i[s-1].toA;)u=i[s-1].fromA,m=i[s-1].fromB,s--,u<_.from&&(_=o.lineAt(u,Ro.ByPosNoHeight,r,0,0));m+=_.from-u,u=_.from;let E=dF.build(r.setDoc(a),e,m,v);o=ZM(o,o.replace(u,d,E))}return o.updateHeight(r,0)}static empty(){return new Yu(0,0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,o=0;for(;;)if(n==r)if(i>o*2){let s=e[n-1];s.break?e.splice(--n,1,s.left,null,s.right):e.splice(--n,1,s.left,s.right),r+=1+s.break,i-=s.size}else if(o>i*2){let s=e[r];s.break?e.splice(r,1,s.left,null,s.right):e.splice(r,1,s.left,s.right),r+=2+s.break,o-=s.size}else break;else if(i<o){let s=e[n++];s&&(i+=s.size)}else{let s=e[--r];s&&(o+=s.size)}let a=0;return e[n-1]==null?(a=1,n--):e[n]==null&&(a=1,r++),new VQe(bc.of(e.slice(0,n)),a,bc.of(e.slice(r)))}}function ZM(t,e){return t==e?t:(t.constructor!=e.constructor&&(OO=!0),e)}bc.prototype.size=1;const jQe=Zn.replace({});class hae extends bc{constructor(e,n,r){super(e,n),this.deco=r,this.spaceAbove=0}mainBlock(e,n){return new kf(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,n,r,i){return this.spaceAbove&&e<r+this.spaceAbove?new kf(i,0,r,this.spaceAbove,jQe):this.mainBlock(r,i)}lineAt(e,n,r,i,o){let a=this.mainBlock(i,o);return this.spaceAbove?this.blockAt(0,r,i,o).join(a):a}forEachLine(e,n,r,i,o,a){e<=o+this.length&&n>=o&&a(this.lineAt(0,Ro.ByPos,r,i,o))}setMeasuredHeight(e){let n=e.heights[e.index++];n<0?(this.spaceAbove=-n,n=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(n)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setMeasuredHeight(i),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Yu extends hae{constructor(e,n,r){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=r}mainBlock(e,n){return new kf(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof Yu||i instanceof al&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof al?i=new Yu(i.length,this.height,this.spaceAbove):i.height=this.height,this.outdated||(i.outdated=!1),i):bc.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setMeasuredHeight(i):(r||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class al extends bc{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,o=i-r+1,a,s=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*o);a=u/o,this.length>o+1&&(s=(this.height-u)/(this.length-o-1))}else a=this.height/o;return{firstLine:r,lastLine:i,perLine:a,perChar:s}}blockAt(e,n,r,i){let{firstLine:o,lastLine:a,perLine:s,perChar:u}=this.heightMetrics(n,i);if(n.lineWrapping){let d=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),m=n.doc.lineAt(d),v=s+m.length*u,_=Math.max(r,e-v/2);return new kf(m.from,m.length,_,v,0)}else{let d=Math.max(0,Math.min(a-o,Math.floor((e-r)/s))),{from:m,length:v}=n.doc.line(o+d);return new kf(m,v,r+s*d,s,0)}}lineAt(e,n,r,i,o){if(n==Ro.ByHeight)return this.blockAt(e,r,i,o);if(n==Ro.ByPosNoHeight){let{from:O,to:E}=r.doc.lineAt(e);return new kf(O,E-O,0,0,0)}let{firstLine:a,perLine:s,perChar:u}=this.heightMetrics(r,o),d=r.doc.lineAt(e),m=s+d.length*u,v=d.number-a,_=i+s*v+u*(d.from-o-v);return new kf(d.from,d.length,Math.max(i,Math.min(_,i+this.height-m)),m,0)}forEachLine(e,n,r,i,o,a){e=Math.max(e,o),n=Math.min(n,o+this.length);let{firstLine:s,perLine:u,perChar:d}=this.heightMetrics(r,o);for(let m=e,v=i;m<=n;){let _=r.doc.lineAt(m);if(m==e){let E=_.number-s;v+=u*E+d*(e-o-E)}let O=u+d*_.length;a(new kf(_.from,_.length,v,O,0)),v+=O,m=_.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let o=r[r.length-1];o instanceof al?r[r.length-1]=new al(o.length+i):r.push(null,new al(i-1))}if(e>0){let o=r[0];o instanceof al?r[0]=new al(e+o.length):r.unshift(new al(e-1),null)}return bc.of(r)}decomposeLeft(e,n){n.push(new al(e-1),null)}decomposeRight(e,n){n.push(null,new al(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let o=n+this.length;if(i&&i.from<=n+this.length&&i.more){let a=[],s=Math.max(n,i.from),u=-1;for(i.from>n&&a.push(new al(i.from-n-1).updateHeight(e,n));s<=o&&i.more;){let m=e.doc.lineAt(s).length;a.length&&a.push(null);let v=i.heights[i.index++],_=0;v<0&&(_=-v,v=i.heights[i.index++]),u==-1?u=v:Math.abs(v-u)>=g5&&(u=-2);let O=new Yu(m,v,_);O.outdated=!1,a.push(O),s+=m+1}s<=o&&a.push(null,new al(o-s).updateHeight(e,s));let d=bc.of(a);return(u<0||Math.abs(d.height-this.height)>=g5||Math.abs(u-this.heightMetrics(e,n).perLine)>=g5)&&(OO=!0),ZM(this,d)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class VQe extends bc{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let o=r+this.left.height;return e<o?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,o,i+this.left.length+this.break)}lineAt(e,n,r,i,o){let a=i+this.left.height,s=o+this.left.length+this.break,u=n==Ro.ByHeight?e<a:e<s,d=u?this.left.lineAt(e,n,r,i,o):this.right.lineAt(e,n,r,a,s);if(this.break||(u?d.to<s:d.from>s))return d;let m=n==Ro.ByPosNoHeight?Ro.ByPosNoHeight:Ro.ByPos;return u?d.join(this.right.lineAt(s,m,r,a,s)):this.left.lineAt(s,m,r,i,o).join(d)}forEachLine(e,n,r,i,o,a){let s=i+this.left.height,u=o+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,n,r,i,o,a),n>=u&&this.right.forEachLine(e,n,r,s,u,a);else{let d=this.lineAt(u,Ro.ByPos,r,i,o);e<d.from&&this.left.forEachLine(e,d.from-1,r,i,o,a),d.to>=e&&d.from<=n&&a(d),n>d.to&&this.right.forEachLine(d.to+1,n,r,s,u,a)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let o=[];e>0&&this.decomposeLeft(e,o);let a=o.length;for(let s of r)o.push(s);if(e>0&&tH(o,a-1),n<this.length){let s=o.length;this.decomposeRight(n,o),tH(o,s)}return bc.of(o)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?bc.of(this.break?[e,null,n]:[e,n]):(this.left=ZM(this.left,e),this.right=ZM(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:o,right:a}=this,s=n+o.length+this.break,u=null;return i&&i.from<=n+o.length&&i.more?u=o=o.updateHeight(e,n,r,i):o.updateHeight(e,n,r),i&&i.from<=s+a.length&&i.more?u=a=a.updateHeight(e,s,r,i):a.updateHeight(e,s,r),u?this.balanced(o,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function tH(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof al&&(r=t[e+1])instanceof al&&t.splice(e-1,3,new al(n.length+1+r.length))}const QQe=5;class dF{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Yu?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Yu(r-this.pos,-1,0)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,o=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let a=n-e;r.block?this.addBlock(new hae(a,i,r)):(a||o||i>=QQe)&&this.addLineDeco(i,o,a)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Yu(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,n){let r=new al(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Yu)return e;let n=new Yu(0,-1,0);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Yu)&&!this.isCovered?this.nodes.push(new Yu(0,-1,0)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Yu&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let o=new dF(r,e);return Kr.spans(n,r,i,o,0),o.finish(r)}}function UQe(t,e,n){let r=new ZQe;return Kr.compare(t,e,n,r,0),r.changes}class ZQe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&Dw(e,n,this.changes,5)}}function qQe(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),a=Math.min(i.innerWidth,n.right),s=Math.max(0,n.top),u=Math.min(i.innerHeight,n.bottom);for(let d=t.parentNode;d&&d!=r.body;)if(d.nodeType==1){let m=d,v=window.getComputedStyle(m);if((m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth)&&v.overflow!="visible"){let _=m.getBoundingClientRect();o=Math.max(o,_.left),a=Math.min(a,_.right),s=Math.max(s,_.top),u=Math.min(d==t.parentNode?i.innerHeight:u,_.bottom)}d=v.position=="absolute"||v.position=="fixed"?m.offsetParent:m.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:o-n.left,right:Math.max(o,a)-n.left,top:s-(n.top+e),bottom:Math.max(s,u)-(n.top+e)}}function WQe(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function HQe(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class UL{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e,n){return Zn.replace({widget:new GQe(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class GQe extends Sd{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class nH{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=rH,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=wo.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(cF).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new BQe(n),this.stateDeco=e.facet(ZT).filter(r=>typeof r!="function"),this.heightMap=bc.empty().applyChanges(this.stateDeco,Di.empty,this.heightOracle.setDoc(e.doc),[new id(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Zn.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:o,to:a})=>i>=o&&i<=a)){let{from:o,to:a}=this.lineBlockAt(i);e.push(new hP(o,a))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?rH:new fF(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(vC(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(ZT).filter(m=>typeof m!="function");let i=e.changedRanges,o=id.extendWithRanges(i,UQe(r,this.stateDeco,e?e.changes:Xs.empty(this.state.doc.length))),a=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);eH(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=a||OO)&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let u=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<u.from||n.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,n));let d=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Vse)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?wo.RTL:wo.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),s=n.getBoundingClientRect(),u=a||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let d=0,m=0;if(s.width&&s.height){let{scaleX:F,scaleY:Q}=Cse(n,s);(F>.005&&Math.abs(this.scaleX-F)>.005||Q>.005&&Math.abs(this.scaleY-Q)>.005)&&(this.scaleX=F,this.scaleY=Q,d|=16,a=u=!0)}let v=(parseInt(r.paddingTop)||0)*this.scaleY,_=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=v||this.paddingBottom!=_)&&(this.paddingTop=v,this.paddingBottom=_,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let O=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=O&&(this.scrollAnchorHeight=-1,this.scrollTop=O),this.scrolledToBottom=kse(e.scrollDOM);let E=(this.printing?HQe:qQe)(n,this.paddingTop),A=E.top-this.pixelViewport.top,M=E.bottom-this.pixelViewport.bottom;this.pixelViewport=E;let L=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(L!=this.inView&&(this.inView=L,L&&(u=!0)),!this.inView&&!this.scrollTarget&&!WQe(e.dom))return 0;let $=s.width;if((this.contentDOMWidth!=$||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),u){let F=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(F)&&(a=!0),a||i.lineWrapping&&Math.abs($-this.contentDOMWidth)>i.charWidth){let{lineHeight:Q,charWidth:W,textHeight:H}=e.docView.measureTextSize();a=Q>0&&i.refresh(o,Q,W,H,Math.max(5,$/W),F),a&&(e.docView.minWidth=0,d|=16)}A>0&&M>0?m=Math.max(A,M):A<0&&M<0&&(m=Math.min(A,M)),eH();for(let Q of this.viewports){let W=Q.from==this.viewport.from?F:e.docView.measureVisibleLineHeights(Q);this.heightMap=(a?bc.empty().applyChanges(this.stateDeco,Di.empty,this.heightOracle,[new id(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,a,new FQe(Q.from,W))}OO&&(d|=2)}let N=!this.viewportIsAppropriate(this.viewport,m)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return N&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(m,this.scrollTarget),d|=this.updateForViewport()),(d&2||N)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.heightOracle,{visibleTop:a,visibleBottom:s}=this,u=new hP(i.lineAt(a-r*1e3,Ro.ByHeight,o,0,0).from,i.lineAt(s+(1-r)*1e3,Ro.ByHeight,o,0,0).to);if(n){let{head:d}=n.range;if(d<u.from||d>u.to){let m=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),v=i.lineAt(d,Ro.ByPos,o,0,0),_;n.y=="center"?_=(v.top+v.bottom)/2-m/2:n.y=="start"||n.y=="nearest"&&d<u.from?_=v.top:_=v.bottom-m,u=new hP(i.lineAt(_-1e3/2,Ro.ByHeight,o,0,0).from,i.lineAt(_+m+1e3/2,Ro.ByHeight,o,0,0).to)}}return u}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new hP(this.heightMap.lineAt(r,Ro.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Ro.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Ro.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(n,Ro.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:s}=this;return(e==0||i<=a-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||o>=s+Math.max(10,Math.min(r,250)))&&i>a-2*1e3&&o<s+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new UL(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,o=i>>1,a=i<<1;if(this.defaultTextDirection!=wo.LTR&&!r)return[];let s=[],u=(m,v,_,O)=>{if(v-m<o)return;let E=this.state.selection.main,A=[E.from];E.empty||A.push(E.to);for(let L of A)if(L>m&&L<v){u(m,L-10,_,O),u(L+10,v,_,O);return}let M=YQe(e,L=>L.from>=_.from&&L.to<=_.to&&Math.abs(L.from-m)<o&&Math.abs(L.to-v)<o&&!A.some($=>L.from<$&&L.to>$));if(!M){if(v<_.to&&n&&r&&n.visibleRanges.some(N=>N.from<=v&&N.to>=v)){let N=n.moveToLineBoundary(Qt.cursor(v),!1,!0).head;N>m&&(v=N)}let L=this.gapSize(_,m,v,O),$=r||L<2e6?L:2e6;M=new UL(m,v,L,$)}s.push(M)},d=m=>{if(m.length<a||m.type!=pl.Text)return;let v=XQe(m.from,m.to,this.stateDeco);if(v.total<a)return;let _=this.scrollTarget?this.scrollTarget.range.head:null,O,E;if(r){let A=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,M,L;if(_!=null){let $=fP(v,_),N=((this.visibleBottom-this.visibleTop)/2+A)/m.height;M=$-N,L=$+N}else M=(this.visibleTop-m.top-A)/m.height,L=(this.visibleBottom-m.top+A)/m.height;O=dP(v,M),E=dP(v,L)}else{let A=v.total*this.heightOracle.charWidth,M=i*this.heightOracle.charWidth,L=0;if(A>2e6)for(let W of e)W.from>=m.from&&W.from<m.to&&W.size!=W.displaySize&&W.from*this.heightOracle.charWidth+L<this.pixelViewport.left&&(L=W.size-W.displaySize);let $=this.pixelViewport.left+L,N=this.pixelViewport.right+L,F,Q;if(_!=null){let W=fP(v,_),H=((N-$)/2+M)/A;F=W-H,Q=W+H}else F=($-M)/A,Q=(N+M)/A;O=dP(v,F),E=dP(v,Q)}O>m.from&&u(m.from,O,m,v),E<m.to&&u(E,m.to,m,v)};for(let m of this.viewportLines)Array.isArray(m.type)?m.type.forEach(d):d(m);return s}gapSize(e,n,r,i){let o=fP(i,r)-fP(i,n);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){UL.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Zn.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];Kr.spans(n,this.viewport.from,this.viewport.to,{span(o,a){r.push({from:o,to:a})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let o=0;o<r.length&&!(i&8);o++){let a=this.visibleRanges[o],s=r[o];(a.from!=s.from||a.to!=s.to)&&(i|=4,e&&e.mapPos(a.from,-1)==s.from&&e.mapPos(a.to,1)==s.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||vC(this.heightMap.lineAt(e,Ro.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||vC(this.heightMap.lineAt(this.scaler.fromDOM(e),Ro.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return vC(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let hP=class{constructor(e,n){this.from=e,this.to=n}};function XQe(t,e,n){let r=[],i=t,o=0;return Kr.spans(n,t,e,{span(){},point(a,s){a>i&&(r.push({from:i,to:a}),o+=a-i),i=s}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function dP({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:o,to:a}=e[i],s=a-o;if(r<=s)return o+r;r-=s}}function fP(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function YQe(t,e){for(let n of t)if(e(n))return n}const rH={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class fF{constructor(e,n,r){let i=0,o=0,a=0;this.viewports=r.map(({from:s,to:u})=>{let d=n.lineAt(s,Ro.ByPos,e,0,0).top,m=n.lineAt(u,Ro.ByPos,e,0,0).bottom;return i+=m-d,{from:s,to:u,top:d,bottom:m,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let s of this.viewports)s.domTop=a+(s.top-o)*this.scale,a=s.domBottom=s.domTop+(s.bottom-s.top),o=s.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.top)return i+(e-r)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);r=o.bottom,i=o.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.domTop)return r+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);r=o.bottom,i=o.domBottom}}eq(e){return e instanceof fF?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function vC(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new kf(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>vC(i,e)):t._content)}const pP=Dn.define({combine:t=>t.join(" ")}),z6=Dn.define({combine:t=>t.indexOf(!0)>-1}),N6=hy.newName(),dae=hy.newName(),fae=hy.newName(),pae={"&light":"."+dae,"&dark":"."+fae};function B6(t,e,n){return new hy(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const KQe=B6("."+N6,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},pae),JQe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ZL=Ln.ie&&Ln.ie_version<=11;class eUe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new MVe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Ln.ie&&Ln.ie_version<=11||Ln.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ln.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ln.chrome&&Ln.chrome_version<126)&&(this.editContext=new nUe(e),e.state.facet(Qg)&&(e.contentDOM.editContext=this.editContext.editContext)),ZL&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Qg)?r.root.activeElement!=this.dom:!p5(this.dom,i))return;let o=i.anchorNode&&r.docView.tile.nearest(i.anchorNode);if(o&&o.isWidget()&&o.widget.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Ln.ie&&Ln.ie_version<=11||Ln.android&&Ln.chrome)&&!r.state.selection.main.empty&&i.focusNode&&WC(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=QT(e.root);if(!n)return!1;let r=Ln.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&tUe(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=p5(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&IVe(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,JQe),ZL&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ZL&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Lw(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let o of e){let a=this.readMutation(o);a&&(a.typeOver&&(i=!0),n==-1?{from:n,to:r}=a:(n=Math.min(a.from,n),r=Math.max(a.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&p5(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new xQe(this.view,e,n,r);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=tae(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.tile.nearest(e.target);if(!n||n.isWidget())return null;if(n.markDirty(e.type=="attributes"),e.type=="childList"){let r=iH(n,e.previousSibling||e.target.previousSibling,-1),i=iH(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Qg)!=e.state.facet(Qg)&&(e.view.contentDOM.editContext=e.state.facet(Qg)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function iH(t,e,n){for(;e;){let r=sa.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function oH(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor,1);return WC(a.node,a.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function tUe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return oH(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?oH(t,n):null}class nUe{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:o,head:a}=i,s=this.toEditorPos(r.updateRangeStart),u=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:s,drifted:!1});let d=u-s>r.text.length;s==this.from&&o<this.from?s=o:u==this.to&&o>this.to&&(u=o);let m=nae(e.state.sliceDoc(s,u),r.text,(d?i.from:i.to)-s,d?"end":null);if(!m){let _=Qt.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));_.main.eq(i)||e.dispatch({selection:_,userEvent:"select"});return}let v={from:m.from+s,to:m.toA+s,insert:Di.of(r.text.slice(m.from,m.toB).split(`
`))};if((Ln.mac||Ln.android)&&v.from==a-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(v={from:s,to:u,insert:Di.of([r.text.replace("."," ")])}),this.pendingContextChange=v,!e.state.readOnly){let _=this.to-this.from+(v.to-v.from+v.insert.length);hF(e,v,Qt.single(this.toEditorPos(r.selectionStart,_),this.toEditorPos(r.selectionEnd,_)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),v.from<v.to&&!v.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],o=null;for(let a=this.toEditorPos(r.rangeStart),s=this.toEditorPos(r.rangeEnd);a<s;a++){let u=e.coordsForChar(a);o=u&&new DOMRect(u.left,u.top,u.right-u.left,u.bottom-u.top)||o||new DOMRect,i.push(o)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let o of r.getTextFormats()){let a=o.underlineStyle,s=o.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(s)){let u=this.toEditorPos(o.rangeStart),d=this.toEditorPos(o.rangeEnd);if(u<d){let m=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(s)?1:2}px`;i.push(Zn.mark({attributes:{style:m}}).range(u,d))}}}e.dispatch({effects:Use.of(Zn.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=QT(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((o,a,s,u,d)=>{if(r)return;let m=d.length-(a-o);if(i&&a>=i.to)if(i.from==o&&i.to==a&&i.insert.eq(d)){i=this.pendingContextChange=null,n+=m,this.to+=m;return}else i=null,this.revertPending(e.state);if(o+=n,a+=n,a<=this.from)this.from+=m,this.to+=m;else if(o<this.to){if(o<this.from||a>this.to||this.to-this.from+d.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(a),d.toString()),this.to+=m}n+=m}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class pn{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(o=>r(o,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||RVe(e.parent)||document,this.viewState=new nH(e.state||$r.create(e)),e.scrollTo&&e.scrollTo.is(lP)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(gw).map(i=>new BL(i));for(let i of this.plugins)i.update(this);this.observer=new eUe(this),this.inputState=new OQe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new VW(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof na?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,o=this.state;for(let _ of e){if(_.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=_.state}if(this.destroyed){this.viewState.state=o;return}let a=this.hasFocus,s=0,u=null;e.some(_=>_.annotation(lae))?(this.inputState.notifiedFocused=a,s=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,u=cae(o,a),u||(s=1));let d=this.observer.delayedAndroidKey,m=null;if(d?(this.observer.clearDelayedAndroidKey(),m=this.observer.readChange(),(m&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(m=null)):this.observer.clear(),o.facet($r.phrases)!=this.state.facet($r.phrases))return this.setState(o);i=VM.create(this,o,e),i.flags|=s;let v=this.viewState.scrollTarget;try{this.updateState=2;for(let _ of e){if(v&&(v=v.map(_.changes)),_.scrollIntoView){let{main:O}=_.state.selection;v=new $w(O.empty?O:Qt.cursor(O.head,O.head>O.anchor?-1:1))}for(let O of _.effects)O.is(lP)&&(v=O.value.clip(this.state))}this.viewState.update(i,v),this.bidiCache=qM.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(gC)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(_=>_.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(pP)!=i.state.facet(pP)&&(this.viewState.mustMeasureContent=!0),(n||r||v||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let _ of this.state.facet(R6))try{_(i)}catch(O){du(this.state,O,"update listener")}(u||m)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),m&&!tae(this,m)&&d.force&&Lw(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new nH(e),this.plugins=e.facet(gw).map(r=>new BL(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new VW(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(gw),r=e.state.facet(gw);if(n!=r){let i=[];for(let o of r){let a=n.indexOf(o);if(a<0)i.push(new BL(o));else{let s=this.plugins[a];s.mustUpdate=e,i.push(s)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){du(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:a}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let s=0;;s++){if(a<0)if(kse(r))o=-1,a=this.viewState.heightMap.height;else{let O=this.viewState.scrollAnchorAt(i);o=O.from,a=O.top}this.updateState=1;let u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(s>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];u&4||([this.measureRequests,d]=[d,this.measureRequests]);let m=d.map(O=>{try{return O.read(this)}catch(E){return du(this.state,E),sH}}),v=VM.create(this,this.state,[]),_=!1;v.flags|=u,n?n.flags|=u:n=v,this.updateState=2,v.empty||(this.updatePlugins(v),this.inputState.update(v),this.updateAttrs(),_=this.docView.update(v),_&&this.docViewUpdate());for(let O=0;O<d.length;O++)if(m[O]!=sH)try{let E=d[O];E.write&&E.write(m[O],this)}catch(E){du(this.state,E)}if(_&&this.docView.updateSelection(!0),!v.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let E=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-a;if(E>1||E<-1){i=i+E,r.scrollTop=i/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let s of this.state.facet(R6))s(n)}get themeClasses(){return N6+" "+(this.state.facet(z6)?fae:dae)+" "+this.state.facet(pP)}updateAttrs(){let e=aH(this,Zse,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Qg)?"true":"false",class:"cm-content",style:`${Ln.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),aH(this,cF,n);let r=this.observer.ignore(()=>{let i=$W(this.contentDOM,this.contentAttrs,n),o=$W(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(pn.announce)){n&&(this.announceDOM.textContent=""),n=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(gC);let e=this.state.facet(pn.cspNonce);hy.mount(this.root,this.styleModules.concat(KQe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return QL(this,e,QW(this,e,n,r))}moveByGroup(e,n){return QL(this,e,QW(this,e,n,r=>pQe(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),o=r[n?r.length-1:0];return Qt.cursor(o.side(n,i)+e.from,o.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return fQe(this,e,n,r)}moveVertically(e,n,r){return QL(this,e,mQe(this,e,n,r))}domAtPos(e,n=1){return this.docView.domAtPos(e,n)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){this.readMeasured();let r=L6(this,e,n);return r&&r.pos}posAndSideAtCoords(e,n=!0){return this.readMeasured(),L6(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),a=o[Wg.find(o,e-i.from,-1,n)];return jM(r,a.dir==wo.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(jse)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>rUe)return Ise(e.length);let n=this.textDirectionAt(e.from),r;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==n&&(o.fresh||Rse(o.isolates,r=BW(this,e))))return o.order;r||(r=BW(this,e));let i=FVe(e.text,n,r);return this.bidiCache.push(new qM(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ln.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Tse(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return lP.of(new $w(typeof e=="number"?Qt.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return lP.of(new $w(Qt.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return zs.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return zs.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=hy.newName(),i=[pP.of(r),gC.of(B6(`.${r}`,e))];return n&&n.dark&&i.push(z6.of(!0)),i}static baseTheme(e){return Uf.lowest(gC.of(B6("."+N6,e,pae)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&sa.get(r)||sa.get(e);return((n=i?.root)===null||n===void 0?void 0:n.view)||null}}pn.styleModule=gC;pn.inputHandler=Bse;pn.clipboardInputFilter=aF;pn.clipboardOutputFilter=lF;pn.scrollHandler=Qse;pn.focusChangeEffect=Fse;pn.perLineTextDirection=jse;pn.exceptionSink=Nse;pn.updateListener=R6;pn.editable=Qg;pn.mouseSelectionStyle=zse;pn.dragMovesSelection=$se;pn.clickAddsSelectionRange=Lse;pn.decorations=ZT;pn.blockWrappers=qse;pn.outerDecorations=Wse;pn.atomicRanges=oE;pn.bidiIsolatedRanges=Hse;pn.scrollMargins=Gse;pn.darkTheme=z6;pn.cspNonce=Dn.define({combine:t=>t.length?t[0]:""});pn.contentAttributes=cF;pn.editorAttributes=Zse;pn.lineWrapping=pn.contentAttributes.of({class:"cm-lineWrapping"});pn.announce=xr.define();const rUe=4096,sH={};class qM{constructor(e,n,r,i,o,a){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=o,this.order=a}static update(e,n){if(n.empty&&!e.some(o=>o.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:wo.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let a=e[o];a.dir==i&&!n.touchesRange(a.from,a.to)&&r.push(new qM(n.mapPos(a.from,1),n.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return r}}function aH(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let o=r[i],a=typeof o=="function"?o(t):o;a&&iF(a,n)}return n}const iUe=Ln.mac?"mac":Ln.windows?"win":Ln.linux?"linux":"key";function oUe(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,o,a,s;for(let u=0;u<n.length-1;++u){const d=n[u];if(/^(cmd|meta|m)$/i.test(d))s=!0;else if(/^a(lt)?$/i.test(d))i=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))a=!0;else if(/^mod$/i.test(d))e=="mac"?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),s&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function mP(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const sUe=Uf.default(pn.domEventHandlers({keydown(t,e){return gae(mae(e.state),t,e,"editor")}})),dS=Dn.define({enables:sUe}),lH=new WeakMap;function mae(t){let e=t.facet(dS),n=lH.get(e);return n||lH.set(e,n=cUe(e.reduce((r,i)=>r.concat(i),[]))),n}function aUe(t,e,n){return gae(mae(t.state),e,t,n)}let I0=null;const lUe=4e3;function cUe(t,e=iUe){let n=Object.create(null),r=Object.create(null),i=(a,s)=>{let u=r[a];if(u==null)r[a]=s;else if(u!=s)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},o=(a,s,u,d,m)=>{var v,_;let O=n[a]||(n[a]=Object.create(null)),E=s.split(/ (?!$)/).map(L=>oUe(L,e));for(let L=1;L<E.length;L++){let $=E.slice(0,L).join(" ");i($,!0),O[$]||(O[$]={preventDefault:!0,stopPropagation:!1,run:[N=>{let F=I0={view:N,prefix:$,scope:a};return setTimeout(()=>{I0==F&&(I0=null)},lUe),!0}]})}let A=E.join(" ");i(A,!1);let M=O[A]||(O[A]={preventDefault:!1,stopPropagation:!1,run:((_=(v=O._any)===null||v===void 0?void 0:v.run)===null||_===void 0?void 0:_.slice())||[]});u&&M.run.push(u),d&&(M.preventDefault=!0),m&&(M.stopPropagation=!0)};for(let a of t){let s=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let d of s){let m=n[d]||(n[d]=Object.create(null));m._any||(m._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:v}=a;for(let _ in m)m[_].run.push(O=>v(O,F6))}let u=a[e]||a.key;if(u)for(let d of s)o(d,u,a.run,a.preventDefault,a.stopPropagation),a.shift&&o(d,"Shift-"+u,a.shift,a.preventDefault,a.stopPropagation)}return n}let F6=null;function gae(t,e,n,r){F6=e;let i=OVe(e),o=su(i,0),a=Kp(o)==i.length&&i!=" ",s="",u=!1,d=!1,m=!1;I0&&I0.view==n&&I0.scope==r&&(s=I0.prefix+" ",iae.indexOf(e.keyCode)<0&&(d=!0,I0=null));let v=new Set,_=M=>{if(M){for(let L of M.run)if(!v.has(L)&&(v.add(L),L(n)))return M.stopPropagation&&(m=!0),!0;M.preventDefault&&(M.stopPropagation&&(m=!0),d=!0)}return!1},O=t[r],E,A;return O&&(_(O[s+mP(i,e,!a)])?u=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ln.windows&&e.ctrlKey&&e.altKey)&&!(Ln.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(E=iv[e.keyCode])&&E!=i?(_(O[s+mP(E,e,!0)])||e.shiftKey&&(A=jT[e.keyCode])!=i&&A!=E&&_(O[s+mP(A,e,!1)]))&&(u=!0):a&&e.shiftKey&&_(O[s+mP(i,e,!0)])&&(u=!0),!u&&_(O._any)&&(u=!0)),d&&(u=!0),u&&m&&e.stopPropagation(),F6=null,u}class sE{constructor(e,n,r,i,o){this.className=e,this.left=n,this.top=r,this.width=i,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let o=yae(e);return[new sE(n,i.left-o.left,i.top-o.top,null,i.bottom-i.top)]}else return uUe(e,n,r)}}function yae(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==wo.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function cH(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let o=t.dom.getBoundingClientRect(),a=(i.top+i.bottom)/2,s=t.posAtCoords({x:o.left+1,y:a}),u=t.posAtCoords({x:o.right-1,y:a});return s==null||u==null?r:{from:Math.max(r.from,Math.min(s,u)),to:Math.min(r.to,Math.max(s,u))}}function uUe(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),o=t.textDirection==wo.LTR,a=t.contentDOM,s=a.getBoundingClientRect(),u=yae(t),d=a.querySelector(".cm-line"),m=d&&window.getComputedStyle(d),v=s.left+(m?parseInt(m.paddingLeft)+Math.min(0,parseInt(m.textIndent)):0),_=s.right-(m?parseInt(m.paddingRight):0),O=D6(t,r,1),E=D6(t,i,-1),A=O.type==pl.Text?O:null,M=E.type==pl.Text?E:null;if(A&&(t.lineWrapping||O.widgetLineBreaks)&&(A=cH(t,r,1,A)),M&&(t.lineWrapping||E.widgetLineBreaks)&&(M=cH(t,i,-1,M)),A&&M&&A.from==M.from&&A.to==M.to)return $(N(n.from,n.to,A));{let Q=A?N(n.from,null,A):F(O,!1),W=M?N(null,n.to,M):F(E,!0),H=[];return(A||O).to<(M||E).from-(A&&M?1:0)||O.widgetLineBreaks>1&&Q.bottom+t.defaultLineHeight/2<W.top?H.push(L(v,Q.bottom,_,W.top)):Q.bottom<W.top&&t.elementAtHeight((Q.bottom+W.top)/2).type==pl.Text&&(Q.bottom=W.top=(Q.bottom+W.top)/2),$(Q).concat(H).concat($(W))}function L(Q,W,H,te){return new sE(e,Q-u.left,W-u.top,H-Q,te-W)}function $({top:Q,bottom:W,horizontal:H}){let te=[];for(let ne=0;ne<H.length;ne+=2)te.push(L(H[ne],Q,H[ne+1],W));return te}function N(Q,W,H){let te=1e9,ne=-1e9,ce=[];function we(be,fe,ve,Me,Ne){let Qe=t.coordsAtPos(be,be==H.to?-2:2),Ce=t.coordsAtPos(ve,ve==H.from?2:-2);!Qe||!Ce||(te=Math.min(Qe.top,Ce.top,te),ne=Math.max(Qe.bottom,Ce.bottom,ne),Ne==wo.LTR?ce.push(o&&fe?v:Qe.left,o&&Me?_:Ce.right):ce.push(!o&&Me?v:Ce.left,!o&&fe?_:Qe.right))}let re=Q??H.from,se=W??H.to;for(let be of t.visibleRanges)if(be.to>re&&be.from<se)for(let fe=Math.max(be.from,re),ve=Math.min(be.to,se);;){let Me=t.state.doc.lineAt(fe);for(let Ne of t.bidiSpans(Me)){let Qe=Ne.from+Me.from,Ce=Ne.to+Me.from;if(Qe>=ve)break;Ce>fe&&we(Math.max(Qe,fe),Q==null&&Qe<=re,Math.min(Ce,ve),W==null&&Ce>=se,Ne.dir)}if(fe=Me.to+1,fe>=ve)break}return ce.length==0&&we(re,Q==null,se,W==null,t.textDirection),{top:te,bottom:ne,horizontal:ce}}function F(Q,W){let H=s.top+(W?Q.top:Q.bottom);return{top:H,bottom:H,horizontal:[]}}}function hUe(t,e){return t.constructor==e.constructor&&t.eq(e)}class dUe{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(y5)!=e.state.facet(y5)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(y5);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!hUe(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e,Ln.safari&&Ln.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const y5=Dn.define();function vae(t){return[zs.define(e=>new dUe(e,t)),y5.of(t)]}const qT=Dn.define({combine(t){return Em(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function fUe(t={}){return[qT.of(t),pUe,mUe,gUe,Vse.of(!0)]}function xae(t){return t.startState.facet(qT)!=t.state.facet(qT)}const pUe=vae({above:!0,markers(t){let{state:e}=t,n=e.facet(qT),r=[];for(let i of e.selection.ranges){let o=i==e.selection.main;if(i.empty||n.drawRangeCursor){let a=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",s=i.empty?i:Qt.cursor(i.head,i.head>i.anchor?-1:1);for(let u of sE.forRange(t,a,s))r.push(u)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=xae(t);return n&&uH(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){uH(e.state,t)},class:"cm-cursorLayer"});function uH(t,e){e.style.animationDuration=t.facet(qT).cursorBlinkRate+"ms"}const mUe=vae({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:sE.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||xae(t)},class:"cm-selectionLayer"}),gUe=Uf.highest(pn.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),_ae=xr.define({map(t,e){return t==null?null:e.mapPos(t)}}),xC=Fs.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(_ae)?r.value:n,t)}}),yUe=zs.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(xC);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(xC)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(xC),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(xC)!=t&&this.view.dispatch({effects:_ae.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function vUe(){return[xC,yUe]}function hH(t,e,n,r,i){e.lastIndex=0;for(let o=t.iterRange(n,r),a=n,s;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;s=e.exec(o.value);)i(a+s.index,s)}function xUe(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}class _Ue{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:o,maxLength:a=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(s,u,d,m)=>i(m,d,d+s[0].length,s,u);else if(typeof r=="function")this.addMatch=(s,u,d,m)=>{let v=r(s,u,d);v&&m(d,d+s[0].length,v)};else if(r)this.addMatch=(s,u,d,m)=>m(d,d+s[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=a}createDeco(e){let n=new _u,r=n.add.bind(n);for(let{from:i,to:o}of xUe(e,this.maxLength))hH(e.state.doc,this.regexp,i,o,(a,s)=>this.addMatch(s,e,a,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((o,a,s,u)=>{u>=e.view.viewport.from&&s<=e.view.viewport.to&&(r=Math.min(s,r),i=Math.max(u,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let o of e.visibleRanges){let a=Math.max(o.from,r),s=Math.min(o.to,i);if(s>=a){let u=e.state.doc.lineAt(a),d=u.to<s?e.state.doc.lineAt(s):u,m=Math.max(o.from,u.from),v=Math.min(o.to,d.to);if(this.boundary){for(;a>u.from;a--)if(this.boundary.test(u.text[a-1-u.from])){m=a;break}for(;s<d.to;s++)if(this.boundary.test(d.text[s-d.from])){v=s;break}}let _=[],O,E=(A,M,L)=>_.push(L.range(A,M));if(u==d)for(this.regexp.lastIndex=m-u.from;(O=this.regexp.exec(u.text))&&O.index<v-u.from;)this.addMatch(O,e,O.index+u.from,E);else hH(e.state.doc,this.regexp,m,v,(A,M)=>this.addMatch(M,e,A,E));n=n.update({filterFrom:m,filterTo:v,filter:(A,M)=>A<m||M>v,add:_})}}return n}}const j6=/x/.unicode!=null?"gu":"g",bUe=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,j6),wUe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let qL=null;function OUe(){var t;if(qL==null&&typeof document<"u"&&document.body){let e=document.body.style;qL=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return qL||!1}const v5=Dn.define({combine(t){let e=Em(t,{render:null,specialChars:bUe,addSpecialChars:null});return(e.replaceTabs=!OUe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,j6)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,j6)),e}});function SUe(t={}){return[v5.of(t),CUe()]}let dH=null;function CUe(){return dH||(dH=zs.fromClass(class{constructor(t){this.view=t,this.decorations=Zn.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(v5)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new _Ue({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,o=su(e[0],0);if(o==9){let a=i.lineAt(r),s=n.state.tabSize,u=Nf(a.text,s,r-a.from);return Zn.replace({widget:new AUe((s-u%s)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Zn.replace({widget:new EUe(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(v5);t.startState.facet(v5)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const TUe="";function kUe(t){return t>=32?TUe:t==10?"":String.fromCharCode(9216+t)}class EUe extends Sd{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=kUe(this.code),r=e.state.phrase("Control character")+" "+(wUe[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let o=document.createElement("span");return o.textContent=n,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class AUe extends Sd{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function PUe(){return RUe}const MUe=Zn.line({class:"cm-activeLine"}),RUe=zs.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(MUe.range(i.from)),e=i.from)}return Zn.set(n)}},{decorations:t=>t.decorations}),V6=2e3;function IUe(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),o=[];if(e.off>V6||n.off>V6||e.col<0||n.col<0){let a=Math.min(e.off,n.off),s=Math.max(e.off,n.off);for(let u=r;u<=i;u++){let d=t.doc.line(u);d.length<=s&&o.push(Qt.range(d.from+a,d.to+s))}}else{let a=Math.min(e.col,n.col),s=Math.max(e.col,n.col);for(let u=r;u<=i;u++){let d=t.doc.line(u),m=b6(d.text,a,t.tabSize,!0);if(m<0)o.push(Qt.cursor(d.to));else{let v=b6(d.text,s,t.tabSize);o.push(Qt.range(d.from+m,d.from+v))}}}return o}function DUe(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function fH(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,o=i>V6?-1:i==r.length?DUe(t,e.clientX):Nf(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function LUe(t,e){let n=fH(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let o=i.changes.mapPos(i.startState.doc.line(n.line).from),a=i.state.doc.lineAt(o);n={line:a.number,col:n.col,off:Math.min(n.off,a.length)},r=r.map(i.changes)}},get(i,o,a){let s=fH(t,i);if(!s)return r;let u=IUe(t.state,n,s);return u.length?a?Qt.create(u.concat(r.ranges)):Qt.create(u):r}}:null}function $Ue(t){let e=(n=>n.altKey&&n.button==0);return pn.mouseSelectionStyle.of((n,r)=>e(r)?LUe(n,r):null)}const zUe={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},NUe={style:"cursor: crosshair"};function BUe(t={}){let[e,n]=zUe[t.key||"Alt"],r=zs.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,pn.contentAttributes.of(i=>{var o;return!((o=i.plugin(r))===null||o===void 0)&&o.isDown?NUe:null})]}const gP="-10000px";class bae{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(a=>a);let o=null;this.tooltipViews=this.tooltips.map(a=>o=r(a,o))}update(e,n){var r;let i=e.state.facet(this.facet),o=i.filter(u=>u);if(i===this.input){for(let u of this.tooltipViews)u.update&&u.update(e);return!1}let a=[],s=n?[]:null;for(let u=0;u<o.length;u++){let d=o[u],m=-1;if(d){for(let v=0;v<this.tooltips.length;v++){let _=this.tooltips[v];_&&_.create==d.create&&(m=v)}if(m<0)a[u]=this.createTooltipView(d,u?a[u-1]:null),s&&(s[u]=!!d.above);else{let v=a[u]=this.tooltipViews[m];s&&(s[u]=n[m]),v.update&&v.update(e)}}}for(let u of this.tooltipViews)a.indexOf(u)<0&&(this.removeTooltipView(u),(r=u.destroy)===null||r===void 0||r.call(u));return n&&(s.forEach((u,d)=>n[d]=u),n.length=s.length),this.input=i,this.tooltips=o,this.tooltipViews=a,!0}}function FUe(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const WL=Dn.define({combine:t=>{var e,n,r;return{position:Ln.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||FUe}}}),pH=new WeakMap,pF=zs.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(WL);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new bae(t,mF,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(WL);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=gP,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(Ln.safari){let a=o.getBoundingClientRect();n=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}else n=!!o.offsetParent&&o.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(t=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=uF(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,a)=>{let s=this.manager.tooltipViews[a];return s.getCoords?s.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(WL).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let s of this.manager.tooltipViews)s.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:o}=t,a=[];for(let s=0;s<this.manager.tooltips.length;s++){let u=this.manager.tooltips[s],d=this.manager.tooltipViews[s],{dom:m}=d,v=t.pos[s],_=t.size[s];if(!v||u.clip!==!1&&(v.bottom<=Math.max(n.top,r.top)||v.top>=Math.min(n.bottom,r.bottom)||v.right<Math.max(n.left,r.left)-.1||v.left>Math.min(n.right,r.right)+.1)){m.style.top=gP;continue}let O=u.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,E=O?7:0,A=_.right-_.left,M=(e=pH.get(d))!==null&&e!==void 0?e:_.bottom-_.top,L=d.offset||VUe,$=this.view.textDirection==wo.LTR,N=_.width>r.right-r.left?$?r.left:r.right-_.width:$?Math.max(r.left,Math.min(v.left-(O?14:0)+L.x,r.right-A)):Math.min(Math.max(r.left,v.left-A+(O?14:0)-L.x),r.right-A),F=this.above[s];!u.strictSide&&(F?v.top-M-E-L.y<r.top:v.bottom+M+E+L.y>r.bottom)&&F==r.bottom-v.bottom>v.top-r.top&&(F=this.above[s]=!F);let Q=(F?v.top-r.top:r.bottom-v.bottom)-E;if(Q<M&&d.resize!==!1){if(Q<this.view.defaultLineHeight){m.style.top=gP;continue}pH.set(d,M),m.style.height=(M=Q)/o+"px"}else m.style.height&&(m.style.height="");let W=F?v.top-M-E-L.y:v.bottom+E+L.y,H=N+A;if(d.overlap!==!0)for(let te of a)te.left<H&&te.right>N&&te.top<W+M&&te.bottom>W&&(W=F?te.top-M-2-E:te.bottom+E+2);if(this.position=="absolute"?(m.style.top=(W-t.parent.top)/o+"px",mH(m,(N-t.parent.left)/i)):(m.style.top=W/o+"px",mH(m,N/i)),O){let te=v.left+($?L.x:-L.x)-(N+14-7);O.style.left=te/i+"px"}d.overlap!==!0&&a.push({left:N,top:W,right:H,bottom:W+M}),m.classList.toggle("cm-tooltip-above",F),m.classList.toggle("cm-tooltip-below",!F),d.positioned&&d.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=gP}},{eventObservers:{scroll(){this.maybeMeasure()}}});function mH(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const jUe=pn.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),VUe={x:0,y:0},mF=Dn.define({enables:[pF,jUe]}),WM=Dn.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class aD{static create(e){return new aD(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new bae(e,WM,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const QUe=mF.compute([WM],t=>{let e=t.facet(WM);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:aD.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class UUe{constructor(e,n,r,i,o){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.tile.nearest(n.target);if(!r)return;let i,o=1;if(r.isWidget())i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let s=e.coordsAtPos(i);if(!s||n.y<s.top||n.y>s.bottom||n.x<s.left-e.defaultCharacterWidth||n.x>s.right+e.defaultCharacterWidth)return;let u=e.bidiSpans(e.state.doc.lineAt(i)).find(m=>m.from<=i&&m.to>=i),d=u&&u.dir==wo.RTL?-1:1;o=n.x<s.left?-d:d}let a=this.source(e,i,o);if(a?.then){let s=this.pending={pos:i};a.then(u=>{this.pending==s&&(this.pending=null,u&&!(Array.isArray(u)&&!u.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(u)?u:[u])}))},u=>du(e.state,u,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(pF),n=e?e.manager.tooltips.findIndex(r=>r.create==aD.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:o}=this;if(i.length&&o&&!ZUe(o.dom,e)||this.pending){let{pos:a}=i[0]||this.pending,s=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:a;(a==s?this.view.posAtCoords(this.lastMove)!=a:!qUe(this.view,a,s,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const yP=4;function ZUe(t,e){let{left:n,right:r,top:i,bottom:o}=t.getBoundingClientRect(),a;if(a=t.querySelector(".cm-tooltip-arrow")){let s=a.getBoundingClientRect();i=Math.min(s.top,i),o=Math.max(s.bottom,o)}return e.clientX>=n-yP&&e.clientX<=r+yP&&e.clientY>=i-yP&&e.clientY<=o+yP}function qUe(t,e,n,r,i,o){let a=t.scrollDOM.getBoundingClientRect(),s=t.documentTop+t.documentPadding.top+t.contentHeight;if(a.left>r||a.right<r||a.top>i||Math.min(a.bottom,s)<i)return!1;let u=t.posAtCoords({x:r,y:i},!1);return u>=e&&u<=n}function WUe(t,e={}){let n=xr.define(),r=Fs.define({create(){return[]},update(i,o){if(i.length&&(e.hideOnChange&&(o.docChanged||o.selection)?i=[]:e.hideOn&&(i=i.filter(a=>!e.hideOn(o,a))),o.docChanged)){let a=[];for(let s of i){let u=o.changes.mapPos(s.pos,-1,dl.TrackDel);if(u!=null){let d=Object.assign(Object.create(null),s);d.pos=u,d.end!=null&&(d.end=o.changes.mapPos(d.end)),a.push(d)}}i=a}for(let a of o.effects)a.is(n)&&(i=a.value),a.is(HUe)&&(i=[]);return i},provide:i=>WM.from(i)});return{active:r,extension:[r,zs.define(i=>new UUe(i,t,r,n,e.hoverTime||300)),QUe]}}function wae(t,e){let n=t.plugin(pF);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const HUe=xr.define(),gH=Dn.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function WT(t,e){let n=t.plugin(Oae),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Oae=zs.fromClass(class{constructor(t){this.input=t.state.facet(HT),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(gH);this.top=new vP(t,!0,e.topContainer),this.bottom=new vP(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(gH);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new vP(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new vP(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(HT);if(n!=this.input){let r=n.filter(u=>u),i=[],o=[],a=[],s=[];for(let u of r){let d=this.specs.indexOf(u),m;d<0?(m=u(t.view),s.push(m)):(m=this.panels[d],m.update&&m.update(t)),i.push(m),(m.top?o:a).push(m)}this.specs=r,this.panels=i,this.top.sync(o),this.bottom.sync(a);for(let u of s)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>pn.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class vP{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=yH(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=yH(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function yH(t){let e=t.nextSibling;return t.remove(),e}const HT=Dn.define({enables:Oae});class wm extends rv{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}wm.prototype.elementClass="";wm.prototype.toDOM=void 0;wm.prototype.mapMode=dl.TrackBefore;wm.prototype.startSide=wm.prototype.endSide=-1;wm.prototype.point=!0;const x5=Dn.define(),GUe=Dn.define(),XUe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Kr.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},GC=Dn.define();function Sae(t){return[Cae(),GC.of({...XUe,...t})]}const vH=Dn.define({combine:t=>t.some(e=>e)});function Cae(t){return[YUe]}const YUe=zs.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(GC).map(e=>new _H(t,e)),this.fixed=!t.state.facet(vH);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(vH)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=Kr.iter(this.view.state.facet(x5),this.view.viewport.from),r=[],i=this.gutters.map(o=>new KUe(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(o.type)){let a=!0;for(let s of o.type)if(s.type==pl.Text&&a){Q6(n,r,s.from);for(let u of i)u.line(this.view,s,r);a=!1}else if(s.widget)for(let u of i)u.widget(this.view,s)}else if(o.type==pl.Text){Q6(n,r,o.from);for(let a of i)a.line(this.view,o,r)}else if(o.widget)for(let a of i)a.widget(this.view,o);for(let o of i)o.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(GC),n=t.state.facet(GC),r=t.docChanged||t.heightChanged||t.viewportChanged||!Kr.eq(t.startState.facet(x5),t.state.facet(x5),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let o of n){let a=e.indexOf(o);a<0?i.push(new _H(this.view,o)):(this.gutters[a].update(t),i.push(this.gutters[a]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>pn.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==wo.LTR?{left:r,right:i}:{right:r,left:i}})});function xH(t){return Array.isArray(t)?t:[t]}function Q6(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class KUe{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Kr.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,o=(n.top-this.height)/e.scaleY,a=n.height/e.scaleY;if(this.i==i.elements.length){let s=new Tae(e,a,o,r);i.elements.push(s),i.dom.appendChild(s.dom)}else i.elements[this.i].update(e,a,o,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Q6(this.cursor,i,n.from),r.length&&(i=i.concat(r));let o=this.gutter.config.lineMarker(e,n,i);o&&i.unshift(o);let a=this.gutter;i.length==0&&!a.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let o of e.state.facet(GUe)){let a=o(e,n.widget,n);a&&(i||(i=[])).push(a)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class _H{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let o=i.target,a;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let u=o.getBoundingClientRect();a=(u.top+u.bottom)/2}else a=i.clientY;let s=e.lineBlockAtHeight(a-e.documentTop);n.domEventHandlers[r](e,s,i)&&i.preventDefault()});this.markers=xH(n.markers(e)),n.initialSpacer&&(this.spacer=new Tae(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=xH(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Kr.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Tae{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),JUe(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let o=0,a=0;;){let s=a,u=o<n.length?n[o++]:null,d=!1;if(u){let m=u.elementClass;m&&(r+=" "+m);for(let v=a;v<this.markers.length;v++)if(this.markers[v].compare(u)){s=v,d=!0;break}}else s=this.markers.length;for(;a<s;){let m=this.markers[a++];if(m.toDOM){m.destroy(i);let v=i.nextSibling;i.remove(),i=v}}if(!u)break;u.toDOM&&(d?i=i.nextSibling:this.dom.insertBefore(u.toDOM(e),i)),d&&a++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function JUe(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const eZe=Dn.define(),tZe=Dn.define(),yw=Dn.define({combine(t){return Em(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let o=r[i],a=n[i];r[i]=o?(s,u,d)=>o(s,u,d)||a(s,u,d):a}return r}})}});class HL extends wm{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function GL(t,e){return t.state.facet(yw).formatNumber(e,t.state)}const nZe=GC.compute([yw],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(eZe)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new HL(GL(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(tZe)){let o=i(e,n,r);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(yw)!=e.state.facet(yw),initialSpacer(e){return new HL(GL(e,bH(e.state.doc.lines)))},updateSpacer(e,n){let r=GL(n.view,bH(n.view.state.doc.lines));return r==e.number?e:new HL(r)},domEventHandlers:t.facet(yw).domEventHandlers,side:"before"}));function gF(t={}){return[yw.of(t),Cae(),nZe]}function bH(t){let e=9;for(;e<t;)e=e*10+9;return e}const rZe=new class extends wm{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},iZe=x5.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(rZe.range(i)))}return Kr.of(e)});function oZe(){return iZe}const kae=1024;let sZe=0,od=class{constructor(e,n){this.from=e,this.to=n}};class wr{constructor(e={}){this.id=sZe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=aa.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}wr.closedBy=new wr({deserialize:t=>t.split(" ")});wr.openedBy=new wr({deserialize:t=>t.split(" ")});wr.group=new wr({deserialize:t=>t.split(" ")});wr.isolate=new wr({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});wr.contextHash=new wr({perNode:!0});wr.lookAhead=new wr({perNode:!0});wr.mounted=new wr({perNode:!0});class zw{constructor(e,n,r,i=!1){this.tree=e,this.overlay=n,this.parser=r,this.bracketed=i}static get(e){return e&&e.props&&e.props[wr.mounted.id]}}const aZe=Object.create(null);class aa{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):aZe,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new aa(e.name||"",n,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(wr.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(wr.group),o=-1;o<(i?i.length:0);o++){let a=n[o<0?r.name:i[o]];if(a)return a}}}}aa.none=new aa("",Object.create(null),0,8);class fS{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let o of e){let a=o(r);if(a){i||(i=Object.assign({},r.props));let s=a[1],u=a[0];u.combine&&u.id in i&&(s=u.combine(i[u.id],s)),i[u.id]=s}}n.push(i?new aa(r.name,i,r.id,r.flags):r)}return new fS(n)}}const xP=new WeakMap,wH=new WeakMap;var Bi;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays",t[t.EnterBracketed=16]="EnterBracketed"})(Bi||(Bi={}));class Gr{constructor(e,n,r,i,o){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[a,s]of o)this.props[typeof a=="number"?a:a.id]=s}}toString(){let e=zw.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new HM(this.topNode,e)}cursorAt(e,n=0,r=0){let i=xP.get(this)||this.topNode,o=new HM(i);return o.moveTo(e,n),xP.set(this,o._tree),o}get topNode(){return new Ql(this,0,0,null)}resolve(e,n=0){let r=GT(xP.get(this)||this.topNode,e,n,!1);return xP.set(this,r),r}resolveInner(e,n=0){let r=GT(wH.get(this)||this.topNode,e,n,!0);return wH.set(this,r),r}resolveStack(e,n=0){return uZe(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:o=this.length}=e,a=e.mode||0,s=(a&Bi.IncludeAnonymous)>0;for(let u=this.cursor(a|Bi.IncludeAnonymous);;){let d=!1;if(u.from<=o&&u.to>=i&&(!s&&u.type.isAnonymous||n(u)!==!1)){if(u.firstChild())continue;d=!0}for(;d&&r&&(s||!u.type.isAnonymous)&&r(u),!u.nextSibling();){if(!u.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:xF(aa.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Gr(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Gr(aa.none,n,r,i)))}static build(e){return hZe(e)}}Gr.empty=new Gr(aa.none,[],[],0);class yF{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new yF(this.buffer,this.index)}}class sv{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return aa.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return o+"("+a.join(",")+")"}findChild(e,n,r,i,o){let{buffer:a}=this,s=-1;for(let u=e;u!=n&&!(Eae(o,i,a[u+1],a[u+2])&&(s=u,r>0));u=a[u+3]);return s}slice(e,n,r){let i=this.buffer,o=new Uint16Array(n-e),a=0;for(let s=e,u=0;s<n;){o[u++]=i[s++],o[u++]=i[s++]-r;let d=o[u++]=i[s++]-r;o[u++]=i[s++]-e,a=Math.max(a,d)}return new sv(o,a,this.set)}}function Eae(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function GT(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let a=!r&&t instanceof Ql&&t.index<0?null:t.parent;if(!a)return t;t=a}let o=r?0:Bi.IgnoreOverlays;if(r)for(let a=t,s=a.parent;s;a=s,s=a.parent)a instanceof Ql&&a.index<0&&((i=s.enter(e,n,o))===null||i===void 0?void 0:i.from)!=a.from&&(t=s);for(;;){let a=t.enter(e,n,o);if(!a)return t;t=a}}class Aae{cursor(e=0){return new HM(this,e)}getChild(e,n=null,r=null){let i=OH(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return OH(this,e,n,r)}resolve(e,n=0){return GT(this,e,n,!1)}resolveInner(e,n=0){return GT(this,e,n,!0)}matchContext(e){return U6(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class Ql extends Aae{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,o=0){var a;for(let s=this;;){for(let{children:u,positions:d}=s._tree,m=n>0?u.length:-1;e!=m;e+=n){let v=u[e],_=d[e]+s.from;if(!(!(o&Bi.EnterBracketed&&v instanceof Gr&&((a=zw.get(v))===null||a===void 0?void 0:a.overlay)===null&&(_>=r||_+v.length<=r))&&!Eae(i,r,_,_+v.length))){if(v instanceof sv){if(o&Bi.ExcludeBuffers)continue;let O=v.findChild(0,v.buffer.length,n,r-_,i);if(O>-1)return new om(new lZe(s,v,e,_),null,O)}else if(o&Bi.IncludeAnonymous||!v.type.isAnonymous||vF(v)){let O;if(!(o&Bi.IgnoreMounts)&&(O=zw.get(v))&&!O.overlay)return new Ql(O.tree,_,e,s);let E=new Ql(v,_,e,s);return o&Bi.IncludeAnonymous||!E.type.isAnonymous?E:E.nextChild(n<0?v.children.length-1:0,n,r,i,o)}}}if(o&Bi.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+n:e=n<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,n,r=0){let i;if(!(r&Bi.IgnoreOverlays)&&(i=zw.get(this._tree))&&i.overlay){let o=e-this.from,a=r&Bi.EnterBracketed&&i.bracketed;for(let{from:s,to:u}of i.overlay)if((n>0||a?s<=o:s<o)&&(n<0||a?u>=o:u>o))return new Ql(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function OH(t,e,n,r){let i=t.cursor(),o=[];if(!i.firstChild())return o;if(n!=null){for(let a=!1;!a;)if(a=i.type.is(n),!i.nextSibling())return o}for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return r==null?o:[]}}function U6(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class lZe{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class om extends Aae{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return o<0?null:new om(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,n,r=0){if(r&Bi.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return o<0?null:new om(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new om(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new om(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];if(o>i){let a=r.buffer[this.index+1];e.push(r.slice(i,o,a)),n.push(0)}return new Gr(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Pae(t){if(!t.length)return null;let e=0,n=t[0];for(let o=1;o<t.length;o++){let a=t[o];(a.from>n.from||a.to<n.to)&&(n=a,e=o)}let r=n instanceof Ql&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new cZe(i,n)}class cZe{constructor(e,n){this.heads=e,this.node=n}get next(){return Pae(this.heads)}}function uZe(t,e,n){let r=t.resolveInner(e,n),i=null;for(let o=r instanceof Ql?r:r.context.parent;o;o=o.parent)if(o.index<0){let a=o.parent;(i||(i=[r])).push(a.resolve(e,n)),o=a}else{let a=zw.get(o.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let s=new Ql(a.tree,a.overlay[0].from+o.from,-1,o);(i||(i=[r])).push(GT(s,e,n,!1))}}return i?Pae(i):r}class HM{get name(){return this.type.name}constructor(e,n=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=n&~Bi.EnterBracketed,e instanceof Ql)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Ql?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&Bi.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Bi.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Bi.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let o=n+e,a=e<0?-1:r._tree.children.length;o!=a;o+=e){let s=r._tree.children[o];if(this.mode&Bi.IncludeAnonymous||s instanceof sv||!s.type.isAnonymous||vF(s))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let a=e;a;a=a._parent)if(a.index==i){if(i==this.index)return a;n=a,r=o+1;break e}i=this.stack[--o]}for(let i=r;i<this.stack.length;i++)n=new om(this.buffer,n,this.stack[i]);return this.bufferNode=new om(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return U6(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return U6(this._tree,e,i);let a=r[n.buffer[this.stack[o]]];if(!a.isAnonymous){if(e[i]&&e[i]!=a.name)return!1;i--}}return!0}}function vF(t){return t.children.some(e=>e instanceof sv||!e.type.isAnonymous||vF(e))}function hZe(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=kae,reused:o=[],minRepeatType:a=r.types.length}=t,s=Array.isArray(n)?new yF(n,n.length):n,u=r.types,d=0,m=0;function v(Q,W,H,te,ne,ce){let{id:we,start:re,end:se,size:be}=s,fe=m,ve=d;if(be<0)if(s.next(),be==-1){let Ae=o[we];H.push(Ae),te.push(re-Q);return}else if(be==-3){d=we;return}else if(be==-4){m=we;return}else throw new RangeError(`Unrecognized record size: ${be}`);let Me=u[we],Ne,Qe,Ce=re-Q;if(se-re<=i&&(Qe=M(s.pos-W,ne))){let Ae=new Uint16Array(Qe.size-Qe.skip),Xe=s.pos-Qe.size,ke=Ae.length;for(;s.pos>Xe;)ke=L(Qe.start,Ae,ke);Ne=new sv(Ae,se-Qe.start,r),Ce=Qe.start-Q}else{let Ae=s.pos-be;s.next();let Xe=[],ke=[],ft=we>=a?we:-1,pt=0,lt=se;for(;s.pos>Ae;)ft>=0&&s.id==ft&&s.size>=0?(s.end<=lt-i&&(E(Xe,ke,re,pt,s.end,lt,ft,fe,ve),pt=Xe.length,lt=s.end),s.next()):ce>2500?_(re,Ae,Xe,ke):v(re,Ae,Xe,ke,ft,ce+1);if(ft>=0&&pt>0&&pt<Xe.length&&E(Xe,ke,re,pt,re,lt,ft,fe,ve),Xe.reverse(),ke.reverse(),ft>-1&&pt>0){let ot=O(Me,ve);Ne=xF(Me,Xe,ke,0,Xe.length,0,se-re,ot,ot)}else Ne=A(Me,Xe,ke,se-re,fe-se,ve)}H.push(Ne),te.push(Ce)}function _(Q,W,H,te){let ne=[],ce=0,we=-1;for(;s.pos>W;){let{id:re,start:se,end:be,size:fe}=s;if(fe>4)s.next();else{if(we>-1&&se<we)break;we<0&&(we=be-i),ne.push(re,se,be),ce++,s.next()}}if(ce){let re=new Uint16Array(ce*4),se=ne[ne.length-2];for(let be=ne.length-3,fe=0;be>=0;be-=3)re[fe++]=ne[be],re[fe++]=ne[be+1]-se,re[fe++]=ne[be+2]-se,re[fe++]=fe;H.push(new sv(re,ne[2]-se,r)),te.push(se-Q)}}function O(Q,W){return(H,te,ne)=>{let ce=0,we=H.length-1,re,se;if(we>=0&&(re=H[we])instanceof Gr){if(!we&&re.type==Q&&re.length==ne)return re;(se=re.prop(wr.lookAhead))&&(ce=te[we]+re.length+se)}return A(Q,H,te,ne,ce,W)}}function E(Q,W,H,te,ne,ce,we,re,se){let be=[],fe=[];for(;Q.length>te;)be.push(Q.pop()),fe.push(W.pop()+H-ne);Q.push(A(r.types[we],be,fe,ce-ne,re-ce,se)),W.push(ne-H)}function A(Q,W,H,te,ne,ce,we){if(ce){let re=[wr.contextHash,ce];we=we?[re].concat(we):[re]}if(ne>25){let re=[wr.lookAhead,ne];we=we?[re].concat(we):[re]}return new Gr(Q,W,H,te,we)}function M(Q,W){let H=s.fork(),te=0,ne=0,ce=0,we=H.end-i,re={size:0,start:0,skip:0};e:for(let se=H.pos-Q;H.pos>se;){let be=H.size;if(H.id==W&&be>=0){re.size=te,re.start=ne,re.skip=ce,ce+=4,te+=4,H.next();continue}let fe=H.pos-be;if(be<0||fe<se||H.start<we)break;let ve=H.id>=a?4:0,Me=H.start;for(H.next();H.pos>fe;){if(H.size<0)if(H.size==-3||H.size==-4)ve+=4;else break e;else H.id>=a&&(ve+=4);H.next()}ne=Me,te+=be,ce+=ve}return(W<0||te==Q)&&(re.size=te,re.start=ne,re.skip=ce),re.size>4?re:void 0}function L(Q,W,H){let{id:te,start:ne,end:ce,size:we}=s;if(s.next(),we>=0&&te<a){let re=H;if(we>4){let se=s.pos-(we-4);for(;s.pos>se;)H=L(Q,W,H)}W[--H]=re,W[--H]=ce-Q,W[--H]=ne-Q,W[--H]=te}else we==-3?d=te:we==-4&&(m=te);return H}let $=[],N=[];for(;s.pos>0;)v(t.start||0,t.bufferStart||0,$,N,-1,0);let F=(e=t.length)!==null&&e!==void 0?e:$.length?N[0]+$[0].length:0;return new Gr(u[t.topID],$.reverse(),N.reverse(),F)}const SH=new WeakMap;function _5(t,e){if(!t.isAnonymous||e instanceof sv||e.type!=t)return 1;let n=SH.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Gr)){n=1;break}n+=_5(t,r)}SH.set(e,n)}return n}function xF(t,e,n,r,i,o,a,s,u){let d=0;for(let E=r;E<i;E++)d+=_5(t,e[E]);let m=Math.ceil(d*1.5/8),v=[],_=[];function O(E,A,M,L,$){for(let N=M;N<L;){let F=N,Q=A[N],W=_5(t,E[N]);for(N++;N<L;N++){let H=_5(t,E[N]);if(W+H>=m)break;W+=H}if(N==F+1){if(W>m){let H=E[F];O(H.children,H.positions,0,H.children.length,A[F]+$);continue}v.push(E[F])}else{let H=A[N-1]+E[N-1].length-Q;v.push(xF(t,E,A,F,N,Q,H,null,u))}_.push(Q+$-o)}}return O(e,n,r,i,0),(s||u)(v,_,a)}class Mae{constructor(){this.map=new WeakMap}setBuffer(e,n,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(n,r)}getBuffer(e,n){let r=this.map.get(e);return r&&r.get(n)}set(e,n){e instanceof om?this.setBuffer(e.context.buffer,e.index,n):e instanceof Ql&&this.map.set(e.tree,n)}get(e){return e instanceof om?this.getBuffer(e.context.buffer,e.index):e instanceof Ql?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Yg{constructor(e,n,r,i,o=!1,a=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(o?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new Yg(0,e.length,e,0,!1,r)];for(let o of n)o.to>e.length&&i.push(o);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],o=1,a=e.length?e[0]:null;for(let s=0,u=0,d=0;;s++){let m=s<n.length?n[s]:null,v=m?m.fromA:1e9;if(v-u>=r)for(;a&&a.from<v;){let _=a;if(u>=_.from||v<=_.to||d){let O=Math.max(_.from,u)-d,E=Math.min(_.to,v)-d;_=O>=E?null:new Yg(O,E,_.tree,_.offset+d,s>0,!!m)}if(_&&i.push(_),a.to>v)break;a=o<e.length?e[o++]:null}if(!m)break;u=m.toA,d=m.toA-m.toB}return i}}class lD{startParse(e,n,r){return typeof e=="string"&&(e=new dZe(e)),r=r?r.length?r.map(i=>new od(i.from,i.to)):[new od(0,0)]:[new od(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let o=i.advance();if(o)return o}}}class dZe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}function Rae(t){return(e,n,r,i)=>new pZe(e,t,n,r,i)}class CH{constructor(e,n,r,i,o,a){this.parser=e,this.parse=n,this.overlay=r,this.bracketed=i,this.target=o,this.from=a}}function TH(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class fZe{constructor(e,n,r,i,o,a,s,u){this.parser=e,this.predicate=n,this.mounts=r,this.index=i,this.start=o,this.bracketed=a,this.target=s,this.prev=u,this.depth=0,this.ranges=[]}}const Z6=new wr({perNode:!0});class pZe{constructor(e,n,r,i,o){this.nest=n,this.input=r,this.fragments=i,this.ranges=o,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new Gr(r.type,r.children,r.positions,r.length,r.propValues.concat([[Z6,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[wr.mounted.id]=new zw(n,e.overlay,e.parser,e.bracketed),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new yZe(this.fragments),n=null,r=null,i=new HM(new Ql(this.baseTree,this.ranges[0].from,0,null),Bi.IncludeAnonymous|Bi.IgnoreMounts);e:for(let o,a;;){let s=!0,u;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)s=!1;else if(e.hasNode(i)){if(n){let d=n.mounts.find(m=>m.frag.from<=i.from&&m.frag.to>=i.to&&m.mount.overlay);if(d)for(let m of d.mount.overlay){let v=m.from+d.pos,_=m.to+d.pos;v>=i.from&&_<=i.to&&!n.ranges.some(O=>O.from<_&&O.to>v)&&n.ranges.push({from:v,to:_})}}s=!1}else if(r&&(a=mZe(r.ranges,i.from,i.to)))s=a!=2;else if(!i.type.isAnonymous&&(o=this.nest(i,this.input))&&(i.from<i.to||!o.overlay)){i.tree||(gZe(i),n&&n.depth++,r&&r.depth++);let d=e.findMounts(i.from,o.parser);if(typeof o.overlay=="function")n=new fZe(o.parser,o.overlay,d,this.inner.length,i.from,!!o.bracketed,i.tree,n);else{let m=AH(this.ranges,o.overlay||(i.from<i.to?[new od(i.from,i.to)]:[]));m.length&&TH(m),(m.length||!o.overlay)&&this.inner.push(new CH(o.parser,m.length?o.parser.startParse(this.input,PH(d,m),m):o.parser.startParse(""),o.overlay?o.overlay.map(v=>new od(v.from-i.from,v.to-i.from)):null,!!o.bracketed,i.tree,m.length?m[0].from:i.from)),o.overlay?m.length&&(r={ranges:m,depth:0,prev:r}):s=!1}}else if(n&&(u=n.predicate(i))&&(u===!0&&(u=new od(i.from,i.to)),u.from<u.to)){let d=n.ranges.length-1;d>=0&&n.ranges[d].to==u.from?n.ranges[d]={from:n.ranges[d].from,to:u.to}:n.ranges.push(u)}if(s&&i.firstChild())n&&n.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(n&&!--n.depth){let d=AH(this.ranges,n.ranges);d.length&&(TH(d),this.inner.splice(n.index,0,new CH(n.parser,n.parser.startParse(this.input,PH(n.mounts,d),d),n.ranges.map(m=>new od(m.from-n.start,m.to-n.start)),n.bracketed,n.target,d[0].from))),n=n.prev}r&&!--r.depth&&(r=r.prev)}}}}function mZe(t,e,n){for(let r of t){if(r.from>=n)break;if(r.to>e)return r.from<=e&&r.to>=n?2:1}return 0}function kH(t,e,n,r,i,o){if(e<n){let a=t.buffer[e+1];r.push(t.slice(e,n,a)),i.push(a-o)}}function gZe(t){let{node:e}=t,n=[],r=e.context.buffer;do n.push(t.index),t.parent();while(!t.tree);let i=t.tree,o=i.children.indexOf(r),a=i.children[o],s=a.buffer,u=[o];function d(m,v,_,O,E,A){let M=n[A],L=[],$=[];kH(a,m,M,L,$,O);let N=s[M+1],F=s[M+2];u.push(L.length);let Q=A?d(M+4,s[M+3],a.set.types[s[M]],N,F-N,A-1):e.toTree();return L.push(Q),$.push(N-O),kH(a,s[M+3],v,L,$,O),new Gr(_,L,$,E)}i.children[o]=d(0,s.length,aa.none,0,a.length,n.length-1);for(let m of u){let v=t.tree.children[m],_=t.tree.positions[m];t.yield(new Ql(v,_+t.from,m,t._tree))}}class EH{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(Bi.IncludeAnonymous|Bi.IgnoreMounts)}moveTo(e){let{cursor:n}=this,r=e-this.offset;for(;!this.done&&n.from<r;)n.to>=e&&n.enter(r,1,Bi.IgnoreOverlays|Bi.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof Gr)n=n.children[0];else break}return!1}}let yZe=class{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(n=r.tree.prop(Z6))!==null&&n!==void 0?n:r.to,this.inner=new EH(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(Z6))!==null&&e!==void 0?e:n.to,this.inner=new EH(n.tree,-n.offset)}}findMounts(e,n){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let o=this.inner.cursor.node;o;o=o.parent){let a=(r=o.tree)===null||r===void 0?void 0:r.prop(wr.mounted);if(a&&a.parser==n)for(let s=this.fragI;s<this.fragments.length;s++){let u=this.fragments[s];if(u.from>=o.to)break;u.tree==this.curFrag.tree&&i.push({frag:u,pos:o.from-u.offset,mount:a})}}}return i}};function AH(t,e){let n=null,r=e;for(let i=1,o=0;i<t.length;i++){let a=t[i-1].to,s=t[i].from;for(;o<r.length;o++){let u=r[o];if(u.from>=s)break;u.to<=a||(n||(r=n=e.slice()),u.from<a?(n[o]=new od(u.from,a),u.to>s&&n.splice(o+1,0,new od(s,u.to))):u.to>s?n[o--]=new od(s,u.to):n.splice(o--,1))}}return r}function vZe(t,e,n,r){let i=0,o=0,a=!1,s=!1,u=-1e9,d=[];for(;;){let m=i==t.length?1e9:a?t[i].to:t[i].from,v=o==e.length?1e9:s?e[o].to:e[o].from;if(a!=s){let _=Math.max(u,n),O=Math.min(m,v,r);_<O&&d.push(new od(_,O))}if(u=Math.min(m,v),u==1e9)break;m==u&&(a?(a=!1,i++):a=!0),v==u&&(s?(s=!1,o++):s=!0)}return d}function PH(t,e){let n=[];for(let{pos:r,mount:i,frag:o}of t){let a=r+(i.overlay?i.overlay[0].from:0),s=a+i.tree.length,u=Math.max(o.from,a),d=Math.min(o.to,s);if(i.overlay){let m=i.overlay.map(_=>new od(_.from+r,_.to+r)),v=vZe(e,m,u,d);for(let _=0,O=u;;_++){let E=_==v.length,A=E?d:v[_].from;if(A>O&&n.push(new Yg(O,A,i.tree,-a,o.from>=O||o.openStart,o.to<=A||o.openEnd)),E)break;O=v[_].to}}else n.push(new Yg(u,d,i.tree,-a,o.from>=a||o.openStart,o.to<=s||o.openEnd))}return n}let xZe=0;class nh{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=xZe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof nh&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let i=new nh(r,[],null,[]);if(i.set.push(i),n)for(let o of n.set)i.set.push(o);return i}static defineModifier(e){let n=new GM(e);return r=>r.modified.indexOf(n)>-1?r:GM.get(r.base||r,r.modified.concat(n).sort((i,o)=>i.id-o.id))}}let _Ze=0;class GM{constructor(e){this.name=e,this.instances=[],this.id=_Ze++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(s=>s.base==e&&bZe(n,s.modified));if(r)return r;let i=[],o=new nh(e.name,i,e,n);for(let s of n)s.instances.push(o);let a=wZe(n);for(let s of e.set)if(!s.modified.length)for(let u of a)i.push(GM.get(s,u));return o}}function bZe(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function wZe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function pS(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let o=[],a=2,s=i;for(let v=0;;){if(s=="..."&&v>0&&v+3==i.length){a=1;break}let _=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!_)throw new RangeError("Invalid path: "+i);if(o.push(_[0]=="*"?"":_[0][0]=='"'?JSON.parse(_[0]):_[0]),v+=_[0].length,v==i.length)break;let O=i[v++];if(v==i.length&&O=="!"){a=0;break}if(O!="/")throw new RangeError("Invalid path: "+i);s=i.slice(v)}let u=o.length-1,d=o[u];if(!d)throw new RangeError("Invalid path: "+i);let m=new XT(r,a,u>0?o.slice(0,u):null);e[d]=m.sort(e[d])}}return Iae.add(e)}const Iae=new wr({combine(t,e){let n,r,i;for(;t||e;){if(!t||e&&t.depth>=e.depth?(i=e,e=e.next):(i=t,t=t.next),n&&n.mode==i.mode&&!i.context&&!n.context)continue;let o=new XT(i.tags,i.mode,i.context);n?n.next=o:r=o,n=o}return r}});class XT{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}XT.empty=new XT([],2,null);function Dae(t,e){let n=Object.create(null);for(let o of t)if(!Array.isArray(o.tag))n[o.tag.id]=o.class;else for(let a of o.tag)n[a.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let a=i;for(let s of o)for(let u of s.set){let d=n[u.id];if(d){a=a?a+" "+d:d;break}}return a},scope:r}}function OZe(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function SZe(t,e,n,r=0,i=t.length){let o=new CZe(r,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),r,i,"",o.highlighters),o.flush(i)}class CZe{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,o){let{type:a,from:s,to:u}=e;if(s>=r||u<=n)return;a.isTop&&(o=this.highlighters.filter(O=>!O.scope||O.scope(a)));let d=i,m=TZe(e)||XT.empty,v=OZe(o,m.tags);if(v&&(d&&(d+=" "),d+=v,m.mode==1&&(i+=(i?" ":"")+v)),this.startSpan(Math.max(n,s),d),m.opaque)return;let _=e.tree&&e.tree.prop(wr.mounted);if(_&&_.overlay){let O=e.node.enter(_.overlay[0].from+s,1),E=this.highlighters.filter(M=>!M.scope||M.scope(_.tree.type)),A=e.firstChild();for(let M=0,L=s;;M++){let $=M<_.overlay.length?_.overlay[M]:null,N=$?$.from+s:u,F=Math.max(n,L),Q=Math.min(r,N);if(F<Q&&A)for(;e.from<Q&&(this.highlightRange(e,F,Q,i,o),this.startSpan(Math.min(Q,e.to),d),!(e.to>=N||!e.nextSibling())););if(!$||N>r)break;L=$.to+s,L>n&&(this.highlightRange(O.cursor(),Math.max(n,$.from+s),Math.min(r,L),"",E),this.startSpan(Math.min(r,L),d))}A&&e.parent()}else if(e.firstChild()){_&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,o),this.startSpan(Math.min(r,e.to),d)}while(e.nextSibling());e.parent()}}}function TZe(t){let e=t.type.prop(Iae);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const An=nh.define,_P=An(),P0=An(),MH=An(P0),RH=An(P0),M0=An(),bP=An(M0),XL=An(M0),jp=An(),Bx=An(jp),Np=An(),Bp=An(),q6=An(),J2=An(q6),wP=An(),Be={comment:_P,lineComment:An(_P),blockComment:An(_P),docComment:An(_P),name:P0,variableName:An(P0),typeName:MH,tagName:An(MH),propertyName:RH,attributeName:An(RH),className:An(P0),labelName:An(P0),namespace:An(P0),macroName:An(P0),literal:M0,string:bP,docString:An(bP),character:An(bP),attributeValue:An(bP),number:XL,integer:An(XL),float:An(XL),bool:An(M0),regexp:An(M0),escape:An(M0),color:An(M0),url:An(M0),keyword:Np,self:An(Np),null:An(Np),atom:An(Np),unit:An(Np),modifier:An(Np),operatorKeyword:An(Np),controlKeyword:An(Np),definitionKeyword:An(Np),moduleKeyword:An(Np),operator:Bp,derefOperator:An(Bp),arithmeticOperator:An(Bp),logicOperator:An(Bp),bitwiseOperator:An(Bp),compareOperator:An(Bp),updateOperator:An(Bp),definitionOperator:An(Bp),typeOperator:An(Bp),controlOperator:An(Bp),punctuation:q6,separator:An(q6),bracket:J2,angleBracket:An(J2),squareBracket:An(J2),paren:An(J2),brace:An(J2),content:jp,heading:Bx,heading1:An(Bx),heading2:An(Bx),heading3:An(Bx),heading4:An(Bx),heading5:An(Bx),heading6:An(Bx),contentSeparator:An(jp),list:An(jp),quote:An(jp),emphasis:An(jp),strong:An(jp),link:An(jp),monospace:An(jp),strikethrough:An(jp),inserted:An(),deleted:An(),changed:An(),invalid:An(),meta:wP,documentMeta:An(wP),annotation:An(wP),processingInstruction:An(wP),definition:nh.defineModifier("definition"),constant:nh.defineModifier("constant"),function:nh.defineModifier("function"),standard:nh.defineModifier("standard"),local:nh.defineModifier("local"),special:nh.defineModifier("special")};for(let t in Be){let e=Be[t];e instanceof nh&&(e.name=t)}Dae([{tag:Be.link,class:"tok-link"},{tag:Be.heading,class:"tok-heading"},{tag:Be.emphasis,class:"tok-emphasis"},{tag:Be.strong,class:"tok-strong"},{tag:Be.keyword,class:"tok-keyword"},{tag:Be.atom,class:"tok-atom"},{tag:Be.bool,class:"tok-bool"},{tag:Be.url,class:"tok-url"},{tag:Be.labelName,class:"tok-labelName"},{tag:Be.inserted,class:"tok-inserted"},{tag:Be.deleted,class:"tok-deleted"},{tag:Be.literal,class:"tok-literal"},{tag:Be.string,class:"tok-string"},{tag:Be.number,class:"tok-number"},{tag:[Be.regexp,Be.escape,Be.special(Be.string)],class:"tok-string2"},{tag:Be.variableName,class:"tok-variableName"},{tag:Be.local(Be.variableName),class:"tok-variableName tok-local"},{tag:Be.definition(Be.variableName),class:"tok-variableName tok-definition"},{tag:Be.special(Be.variableName),class:"tok-variableName2"},{tag:Be.definition(Be.propertyName),class:"tok-propertyName tok-definition"},{tag:Be.typeName,class:"tok-typeName"},{tag:Be.namespace,class:"tok-namespace"},{tag:Be.className,class:"tok-className"},{tag:Be.macroName,class:"tok-macroName"},{tag:Be.propertyName,class:"tok-propertyName"},{tag:Be.operator,class:"tok-operator"},{tag:Be.comment,class:"tok-comment"},{tag:Be.meta,class:"tok-meta"},{tag:Be.invalid,class:"tok-invalid"},{tag:Be.punctuation,class:"tok-punctuation"}]);var YL;const F0=new wr;function cD(t){return Dn.define({combine:t?e=>e.concat(t):void 0})}const _F=new wr;class lh{constructor(e,n,r=[],i=""){this.data=e,this.name=i,$r.prototype.hasOwnProperty("tree")||Object.defineProperty($r.prototype,"tree",{get(){return ao(this)}}),this.parser=n,this.extension=[av.of(this),$r.languageData.of((o,a,s)=>{let u=IH(o,a,s),d=u.type.prop(F0);if(!d)return[];let m=o.facet(d),v=u.type.prop(_F);if(v){let _=u.resolve(a-u.from,s);for(let O of v)if(O.test(_,o)){let E=o.facet(O.facet);return O.type=="replace"?E:E.concat(m)}}return m})].concat(r)}isActiveAt(e,n,r=-1){return IH(e,n,r).type.prop(F0)==this.data}findRegions(e){let n=e.facet(av);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(o,a)=>{if(o.prop(F0)==this.data){r.push({from:a,to:a+o.length});return}let s=o.prop(wr.mounted);if(s){if(s.tree.prop(F0)==this.data){if(s.overlay)for(let u of s.overlay)r.push({from:u.from+a,to:u.to+a});else r.push({from:a,to:a+o.length});return}else if(s.overlay){let u=r.length;if(i(s.tree,s.overlay[0].from+a),r.length>u)return}}for(let u=0;u<o.children.length;u++){let d=o.children[u];d instanceof Gr&&i(d,o.positions[u]+a)}};return i(ao(e),0),r}get allowsNesting(){return!0}}lh.setState=xr.define();function IH(t,e,n){let r=t.facet(av),i=ao(t).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(e,n,Bi.ExcludeBuffers|Bi.EnterBracketed))o.type.isTop&&(i=o);return i}class SO extends lh{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=cD(e.languageData);return new SO(n,e.parser.configure({props:[F0.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new SO(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ao(t){let e=t.field(lh.state,!1);return e?e.tree:Gr.empty}class kZe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let eC=null;class Q_{constructor(e,n,r=[],i,o,a,s,u){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=a,this.skipped=s,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Q_(e,n,[],Gr.empty,0,r,[],null)}startParse(){return this.parser.startParse(new kZe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Gr.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Yg.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Yg.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=eC;eC=this;try{return e()}finally{eC=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=DH(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:o,viewport:a,skipped:s}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((d,m,v,_)=>u.push({fromA:d,toA:m,fromB:v,toB:_})),r=Yg.applyChanges(r,u),i=Gr.empty,o=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){s=[];for(let d of this.skipped){let m=e.mapPos(d.from,1),v=e.mapPos(d.to,-1);m<v&&s.push({from:m,to:v})}}}return new Q_(this.parser,n,r,i,o,a,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=DH(this.fragments,i,o),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends lD{createParse(n,r,i){let o=i[0].from,a=i[i.length-1].to;return{parsedPos:o,advance(){let u=eC;if(u){for(let d of i)u.tempSkipped.push(d);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=a,new Gr(aa.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return eC}}function DH(t,e,n){return Yg.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class CO{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new CO(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Q_.create(e.facet(av).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new CO(r)}}lh.state=Fs.define({create:CO.init,update(t,e){for(let n of e.effects)if(n.is(lh.setState))return n.value;return e.startState.facet(av)!=e.state.facet(av)?CO.init(e.state):t.apply(e)}});let Lae=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Lae=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const KL=typeof navigator<"u"&&(!((YL=navigator.scheduling)===null||YL===void 0)&&YL.isInputPending)?()=>navigator.scheduling.isInputPending():null,EZe=zs.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(lh.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(lh.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Lae(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(lh.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!KL?Math.max(25,e.timeRemaining()-5):1e9),s=o.context.treeLen<i&&r.doc.length>i+1e3,u=o.context.work(()=>KL&&KL()||Date.now()>a,i+(s?0:1e5));this.chunkBudget-=Date.now()-n,(u||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:lh.setState.of(new CO(o.context))})),this.chunkBudget>0&&!(u&&!s)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>du(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),av=Dn.define({combine(t){return t.length?t[0]:null},enables:t=>[lh.state,EZe,pn.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class TO{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}class Pt{constructor(e,n,r,i,o,a=void 0){this.name=e,this.alias=n,this.extensions=r,this.filename=i,this.loadFunc=o,this.support=a,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:n,support:r}=e;if(!n){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=()=>Promise.resolve(r)}return new Pt(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,n,r)}static matchFilename(e,n){for(let i of e)if(i.filename&&i.filename.test(n))return i;let r=/\.([^.]+)$/.exec(n);if(r){for(let i of e)if(i.extensions.indexOf(r[1])>-1)return i}return null}static matchLanguageName(e,n,r=!0){n=n.toLowerCase();for(let i of e)if(i.alias.some(o=>o==n))return i;if(r)for(let i of e)for(let o of i.alias){let a=n.indexOf(o);if(a>-1&&(o.length>2||!/\w/.test(n[a-1])&&!/\w/.test(n[a+o.length])))return i}return null}}const AZe=Dn.define(),aE=Dn.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function U_(t){let e=t.facet(aE);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function YT(t,e){let n="",r=t.tabSize,i=t.facet(aE)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let o=0;o<e;o++)n+=i;return n}function bF(t,e){t instanceof $r&&(t=new uD(t));for(let r of t.state.facet(AZe)){let i=r(t,e);if(i!==void 0)return i}let n=ao(t.state);return n.length>=e?PZe(t,n,e):null}class uD{constructor(e,n={}){this.state=e,this.options=n,this.unit=U_(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.countColumn(r,e-i),a=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return a>-1&&(o+=a-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,n=e.length){return Nf(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),o=this.options.overrideIndentation;if(o){let a=o(i);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const mS=new wr;function PZe(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let o=[];for(let a=i;a&&!(a.from<r.node.from||a.to>r.node.to||a.from==r.node.from&&a.type==r.node.type);a=a.parent)o.push(a);for(let a=o.length-1;a>=0;a--)r={node:o[a],next:r}}return $ae(r,t,n)}function $ae(t,e,n){for(let r=t;r;r=r.next){let i=RZe(r.node);if(i)return i(wF.create(e,n,r))}return 0}function MZe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function RZe(t){let e=t.type.prop(mS);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(wr.closedBy))){let i=t.lastChild,o=i&&r.indexOf(i.name)>-1;return a=>zae(a,!0,1,void 0,o&&!MZe(a)?i.from:void 0)}return t.parent==null?IZe:null}function IZe(){return 0}class wF extends uD{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new wF(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(DZe(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return $ae(this.context.next,this.base,this.pos)}}function DZe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function LZe(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),a=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let s=n.to;;){let u=e.childAfter(s);if(!u||u==r)return null;if(!u.type.isSkipped){if(u.from>=a)return null;let d=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+d}}s=u.to}}function $Ze({closing:t,align:e=!0,units:n=1}){return r=>zae(r,e,n,t)}function zae(t,e,n,r,i){let o=t.textAfter,a=o.match(/^\s*/)[0].length,s=r&&o.slice(a,a+r.length)==r||i==t.pos+a,u=e?LZe(t):null;return u?s?t.column(u.from):t.column(u.to):t.baseIndent+(s?0:t.unit*n)}const zZe=t=>t.baseIndent;function b5({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const NZe=200;function BZe(){return $r.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+NZe)return t;let o=n.sliceString(i.from,r);if(!e.some(d=>d.test(o)))return t;let{state:a}=t,s=-1,u=[];for(let{head:d}of a.selection.ranges){let m=a.doc.lineAt(d);if(m.from==s)continue;s=m.from;let v=bF(a,m.from);if(v==null)continue;let _=/^\s*/.exec(m.text)[0],O=YT(a,v);_!=O&&u.push({from:m.from,to:m.from+_.length,insert:O})}return u.length?[t,{changes:u,sequential:!0}]:t})}const Nae=Dn.define(),gS=new wr;function Bae(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function FZe(t,e,n){let r=ao(t);if(r.length<n)return null;let i=r.resolveStack(n,1),o=null;for(let a=i;a;a=a.next){let s=a.node;if(s.to<=n||s.from>n)continue;if(o&&s.from<e)break;let u=s.type.prop(gS);if(u&&(s.to<r.length-50||r.length==t.doc.length||!jZe(s))){let d=u(s,t);d&&d.from<=n&&d.from>=e&&d.to>n&&(o=d)}}return o}function jZe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function XM(t,e,n){for(let r of t.facet(Nae)){let i=r(t,e,n);if(i)return i}return FZe(t,e,n)}function Fae(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const hD=xr.define({map:Fae}),lE=xr.define({map:Fae});function jae(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(r=>r.from<=n&&r.to>=n)||e.push(t.lineBlockAt(n));return e}const Z_=Fs.define({create(){return Zn.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,r)=>t=LH(t,n,r)),t=t.map(e.changes);for(let n of e.effects)if(n.is(hD)&&!VZe(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(Uae),i=r?Zn.replace({widget:new GZe(r(e.state,n.value))}):$H;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(lE)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=LH(t,e.selection.main.head)),t},provide:t=>pn.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push($H.range(r,i))}return Zn.set(e,!0)}});function LH(t,e,n=e){let r=!1;return t.between(e,n,(i,o)=>{i<n&&o>e&&(r=!0)}),r?t.update({filterFrom:e,filterTo:n,filter:(i,o)=>i>=n||o<=e}):t}function YM(t,e,n){var r;let i=null;return(r=t.field(Z_,!1))===null||r===void 0||r.between(e,n,(o,a)=>{(!i||i.from>o)&&(i={from:o,to:a})}),i}function VZe(t,e,n){let r=!1;return t.between(e,e,(i,o)=>{i==e&&o==n&&(r=!0)}),r}function Vae(t,e){return t.field(Z_,!1)?e:e.concat(xr.appendConfig.of(Zae()))}const QZe=t=>{for(let e of jae(t)){let n=XM(t.state,e.from,e.to);if(n)return t.dispatch({effects:Vae(t.state,[hD.of(n),Qae(t,n)])}),!0}return!1},UZe=t=>{if(!t.state.field(Z_,!1))return!1;let e=[];for(let n of jae(t)){let r=YM(t.state,n.from,n.to);r&&e.push(lE.of(r),Qae(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Qae(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return pn.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const ZZe=t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),o=XM(e,i.from,i.to);o&&n.push(hD.of(o)),r=(o?t.lineBlockAt(o.to):i).to+1}return n.length&&t.dispatch({effects:Vae(t.state,n)}),!!n.length},qZe=t=>{let e=t.state.field(Z_,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(r,i)=>{n.push(lE.of({from:r,to:i}))}),t.dispatch({effects:n}),!0},WZe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:QZe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:UZe},{key:"Ctrl-Alt-[",run:ZZe},{key:"Ctrl-Alt-]",run:qZe}],HZe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Uae=Dn.define({combine(t){return Em(t,HZe)}});function Zae(t){return[Z_,KZe]}function qae(t,e){let{state:n}=t,r=n.facet(Uae),i=a=>{let s=t.lineBlockAt(t.posAtDOM(a.target)),u=YM(t.state,s.from,s.to);u&&t.dispatch({effects:lE.of(u)}),a.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=i,o}const $H=Zn.replace({widget:new class extends Sd{toDOM(t){return qae(t,null)}}});class GZe extends Sd{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return qae(e,this.value)}}const XZe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class JL extends wm{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function YZe(t={}){let e={...XZe,...t},n=new JL(e,!0),r=new JL(e,!1),i=zs.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(av)!=a.state.facet(av)||a.startState.field(Z_,!1)!=a.state.field(Z_,!1)||ao(a.startState)!=ao(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let s=new _u;for(let u of a.viewportLineBlocks){let d=YM(a.state,u.from,u.to)?r:XM(a.state,u.from,u.to)?n:null;d&&s.add(u.from,u.from,d)}return s.finish()}}),{domEventHandlers:o}=e;return[i,Sae({class:"cm-foldGutter",markers(a){var s;return((s=a.plugin(i))===null||s===void 0?void 0:s.markers)||Kr.empty},initialSpacer(){return new JL(e,!1)},domEventHandlers:{...o,click:(a,s,u)=>{if(o.click&&o.click(a,s,u))return!0;let d=YM(a.state,s.from,s.to);if(d)return a.dispatch({effects:lE.of(d)}),!0;let m=XM(a.state,s.from,s.to);return m?(a.dispatch({effects:hD.of(m)}),!0):!1}}}),Zae()]}const KZe=pn.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class cE{constructor(e,n){this.specs=e;let r;function i(s){let u=hy.newName();return(r||(r=Object.create(null)))["."+u]=s,u}const o=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,a=n.scope;this.scope=a instanceof lh?s=>s.prop(F0)==a.data:a?s=>s==a:void 0,this.style=Dae(e.map(s=>({tag:s.tag,class:s.class||i(Object.assign({},s,{tag:null}))})),{all:o}).style,this.module=r?new hy(r):null,this.themeType=n.themeType}static define(e,n){return new cE(e,n||{})}}const W6=Dn.define(),Wae=Dn.define({combine(t){return t.length?[t[0]]:null}});function e$(t){let e=t.facet(W6);return e.length?e:t.facet(Wae)}function Hae(t,e){let n=[eqe],r;return t instanceof cE&&(t.module&&n.push(pn.styleModule.of(t.module)),r=t.themeType),e?.fallback?n.push(Wae.of(t)):r?n.push(W6.computeN([pn.darkTheme],i=>i.facet(pn.darkTheme)==(r=="dark")?[t]:[])):n.push(W6.of(t)),n}class JZe{constructor(e){this.markCache=Object.create(null),this.tree=ao(e.state),this.decorations=this.buildDeco(e,e$(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=ao(e.state),r=e$(e.state),i=r!=e$(e.startState),{viewport:o}=e.view,a=e.changes.mapPos(this.decoratedTo,1);n.length<o.to&&!i&&n.type==this.tree.type&&a>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=o.to)}buildDeco(e,n){if(!n||!this.tree.length)return Zn.none;let r=new _u;for(let{from:i,to:o}of e.visibleRanges)SZe(this.tree,n,(a,s,u)=>{r.add(a,s,this.markCache[u]||(this.markCache[u]=Zn.mark({class:u})))},i,o);return r.finish()}}const eqe=Uf.high(zs.fromClass(JZe,{decorations:t=>t.decorations})),tqe=cE.define([{tag:Be.meta,color:"#404740"},{tag:Be.link,textDecoration:"underline"},{tag:Be.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Be.emphasis,fontStyle:"italic"},{tag:Be.strong,fontWeight:"bold"},{tag:Be.strikethrough,textDecoration:"line-through"},{tag:Be.keyword,color:"#708"},{tag:[Be.atom,Be.bool,Be.url,Be.contentSeparator,Be.labelName],color:"#219"},{tag:[Be.literal,Be.inserted],color:"#164"},{tag:[Be.string,Be.deleted],color:"#a11"},{tag:[Be.regexp,Be.escape,Be.special(Be.string)],color:"#e40"},{tag:Be.definition(Be.variableName),color:"#00f"},{tag:Be.local(Be.variableName),color:"#30a"},{tag:[Be.typeName,Be.namespace],color:"#085"},{tag:Be.className,color:"#167"},{tag:[Be.special(Be.variableName),Be.macroName],color:"#256"},{tag:Be.definition(Be.propertyName),color:"#00c"},{tag:Be.comment,color:"#940"},{tag:Be.invalid,color:"#f00"}]),nqe=pn.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Gae=1e4,Xae="()[]{}",Yae=Dn.define({combine(t){return Em(t,{afterCursor:!0,brackets:Xae,maxScanDistance:Gae,renderMatch:oqe})}}),rqe=Zn.mark({class:"cm-matchingBracket"}),iqe=Zn.mark({class:"cm-nonmatchingBracket"});function oqe(t){let e=[],n=t.matched?rqe:iqe;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const sqe=Fs.define({create(){return Zn.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(Yae);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=sm(e.state,i.head,-1,r)||i.head>0&&sm(e.state,i.head-1,1,r)||r.afterCursor&&(sm(e.state,i.head,1,r)||i.head<e.state.doc.length&&sm(e.state,i.head+1,-1,r));o&&(n=n.concat(r.renderMatch(o,e.state)))}return Zn.set(n,!0)},provide:t=>pn.decorations.from(t)}),aqe=[sqe,nqe];function lqe(t={}){return[Yae.of(t),aqe]}const Kae=new wr;function H6(t,e,n){let r=t.prop(e<0?wr.openedBy:wr.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function G6(t){let e=t.type.prop(Kae);return e?e(t.node):t}function sm(t,e,n,r={}){let i=r.maxScanDistance||Gae,o=r.brackets||Xae,a=ao(t),s=a.resolveInner(e,n);for(let u=s;u;u=u.parent){let d=H6(u.type,n,o);if(d&&u.from<u.to){let m=G6(u);if(m&&(n>0?e>=m.from&&e<m.to:e>m.from&&e<=m.to))return cqe(t,e,n,u,m,d,o)}}return uqe(t,e,n,a,s.type,i,o)}function cqe(t,e,n,r,i,o,a){let s=r.parent,u={from:i.from,to:i.to},d=0,m=s?.cursor();if(m&&(n<0?m.childBefore(r.from):m.childAfter(r.to)))do if(n<0?m.to<=r.from:m.from>=r.to){if(d==0&&o.indexOf(m.type.name)>-1&&m.from<m.to){let v=G6(m);return{start:u,end:v?{from:v.from,to:v.to}:void 0,matched:!0}}else if(H6(m.type,n,a))d++;else if(H6(m.type,-n,a)){if(d==0){let v=G6(m);return{start:u,end:v&&v.from<v.to?{from:v.from,to:v.to}:void 0,matched:!1}}d--}}while(n<0?m.prevSibling():m.nextSibling());return{start:u,matched:!1}}function uqe(t,e,n,r,i,o,a){let s=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),u=a.indexOf(s);if(u<0||u%2==0!=n>0)return null;let d={from:n<0?e-1:e,to:n>0?e+1:e},m=t.doc.iterRange(e,n>0?t.doc.length:0),v=0;for(let _=0;!m.next().done&&_<=o;){let O=m.value;n<0&&(_+=O.length);let E=e+_*n;for(let A=n>0?0:O.length-1,M=n>0?O.length:-1;A!=M;A+=n){let L=a.indexOf(O[A]);if(!(L<0||r.resolveInner(E+A,1).type!=i))if(L%2==0==n>0)v++;else{if(v==1)return{start:d,end:{from:E+A,to:E+A+1},matched:L>>1==u>>1};v--}}n>0&&(_+=O.length)}return m.done?{start:d,matched:!1}:null}function zH(t,e,n,r=0,i=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let o=i;for(let a=r;a<e;a++)t.charCodeAt(a)==9?o+=n-o%n:o++;return o}class Jae{constructor(e,n,r,i){this.string=e,this.tabSize=n,this.indentUnit=r,this.overrideIndent=i,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e instanceof RegExp?e.test(n):e(n)),r)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=zH(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:zH(this.string,null,this.tabSize)}match(e,n,r){if(typeof e=="string"){let i=a=>r?a.toLowerCase():a,o=this.string.substr(this.pos,e.length);return i(o)==i(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&n!==!1&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function hqe(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||dqe,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||CF,mergeTokens:t.mergeTokens!==!1}}function dqe(t){if(typeof t!="object")return t;let e={};for(let n in t){let r=t[n];e[n]=r instanceof Array?r.slice():r}return e}const NH=new WeakMap;class OF extends lh{constructor(e){let n=cD(e.languageData),r=hqe(e),i,o=new class extends lD{createParse(a,s,u){return new pqe(i,a,s,u)}};super(n,o,[],e.name),this.topNode=yqe(n,this),i=this,this.streamParser=r,this.stateAfter=new wr({perNode:!0}),this.tokenTable=e.tokenTable?new rle(r.tokenTable):gqe}static define(e){return new OF(e)}getIndent(e){let n,{overrideIndentation:r}=e.options;r&&(n=NH.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let i=SF(this,e.node.tree,e.node.from,e.node.from,n??e.pos),o,a;if(i?(a=i.state,o=i.pos+1):(a=this.streamParser.startState(e.unit),o=e.node.from),e.pos-o>1e4)return null;for(;o<e.pos;){let u=e.state.doc.lineAt(o),d=Math.min(e.pos,u.to);if(u.length){let m=r?r(u.from):-1,v=new Jae(u.text,e.state.tabSize,e.unit,m<0?void 0:m);for(;v.pos<d-u.from;)tle(this.streamParser.token,v,a)}else this.streamParser.blankLine(a,e.unit);if(d==e.pos)break;o=u.to+1}let s=e.lineAt(e.pos);return r&&n==null&&NH.set(e.state,s.from),this.streamParser.indent(a,/^\s*(.*)/.exec(s.text)[1],e)}get allowsNesting(){return!1}}function SF(t,e,n,r,i){let o=n>=r&&n+e.length<=i&&e.prop(t.stateAfter);if(o)return{state:t.streamParser.copyState(o),pos:n+e.length};for(let a=e.children.length-1;a>=0;a--){let s=e.children[a],u=n+e.positions[a],d=s instanceof Gr&&u<i&&SF(t,s,u,r,i);if(d)return d}return null}function ele(t,e,n,r,i){if(i&&n<=0&&r>=e.length)return e;!i&&n==0&&e.type==t.topNode&&(i=!0);for(let o=e.children.length-1;o>=0;o--){let a=e.positions[o],s=e.children[o],u;if(a<r&&s instanceof Gr){if(!(u=ele(t,s,n-a,r-a,i)))break;return i?new Gr(e.type,e.children.slice(0,o).concat(u),e.positions.slice(0,o+1),a+u.length):u}}return null}function fqe(t,e,n,r,i){for(let o of e){let a=o.from+(o.openStart?25:0),s=o.to-(o.openEnd?25:0),u=a<=n&&s>n&&SF(t,o.tree,0-o.offset,n,s),d;if(u&&u.pos<=r&&(d=ele(t,o.tree,n+o.offset,u.pos+o.offset,!1)))return{state:u.state,tree:d}}return{state:t.streamParser.startState(i?U_(i):4),tree:Gr.empty}}let pqe=class{constructor(e,n,r,i){this.lang=e,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;let o=Q_.get(),a=i[0].from,{state:s,tree:u}=fqe(e,r,a,this.to,o?.state);this.state=s,this.parsedPos=this.chunkStart=a+u.length;for(let d=0;d<u.children.length;d++)this.chunks.push(u.children[d]),this.chunkPos.push(u.positions[d]);o&&this.parsedPos<o.viewport.from-1e5&&i.some(d=>d.from<=o.viewport.from&&d.to>=o.viewport.from)&&(this.state=this.lang.streamParser.startState(U_(o.state)),o.skipUntilInView(this.parsedPos,o.viewport.from),this.parsedPos=o.viewport.from),this.moveRangeIndex()}advance(){let e=Q_.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(n,this.chunkStart+512);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let r=n.indexOf(`
`);r>-1&&(n=n.slice(0,r))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),r=e+n.length;for(let i=this.rangeIndex;;){let o=this.ranges[i].to;if(o>=r||(n=n.slice(0,o-(r-n.length)),i++,i==this.ranges.length))break;let a=this.ranges[i].from,s=this.lineAfter(a);n+=s,r=a+s.length}return{line:n,end:r}}skipGapsTo(e,n,r){for(;;){let i=this.ranges[this.rangeIndex].to,o=e+n;if(r>0?i>o:i>=o)break;let a=this.ranges[++this.rangeIndex].from;n+=a-i}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,r,i){let o=4;if(this.ranges.length>1){i=this.skipGapsTo(n,i,1),n+=i;let s=this.chunk.length;i=this.skipGapsTo(r,i,-1),r+=i,o+=this.chunk.length-s}let a=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&o==4&&a>=0&&this.chunk[a]==e&&this.chunk[a+2]==n?this.chunk[a+2]=r:this.chunk.push(e,n,r,o),i}parseLine(e){let{line:n,end:r}=this.nextLine(),i=0,{streamParser:o}=this.lang,a=new Jae(n,e?e.state.tabSize:4,e?U_(e.state):2);if(a.eol())o.blankLine(this.state,a.indentUnit);else for(;!a.eol();){let s=tle(o.token,a,this.state);if(s&&(i=this.emitToken(this.lang.tokenTable.resolve(s),this.parsedPos+a.start,this.parsedPos+a.pos,i)),a.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Gr.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:mqe,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new Gr(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Gr(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}};function tle(t,e,n){e.start=e.pos;for(let r=0;r<10;r++){let i=t(e,n);if(e.pos>e.start)return i}throw new Error("Stream parser failed to advance stream.")}const CF=Object.create(null),KT=[aa.none],mqe=new fS(KT),BH=[],FH=Object.create(null),nle=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])nle[t]=ile(CF,e);class rle{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),nle)}resolve(e){return e?this.table[e]||(this.table[e]=ile(this.extra,e)):0}}const gqe=new rle(CF);function t$(t,e){BH.indexOf(t)>-1||(BH.push(t),console.warn(e))}function ile(t,e){let n=[];for(let s of e.split(" ")){let u=[];for(let d of s.split(".")){let m=t[d]||Be[d];m?typeof m=="function"?u.length?u=u.map(m):t$(d,`Modifier ${d} used at start of tag`):u.length?t$(d,`Tag ${d} used as modifier`):u=Array.isArray(m)?m:[m]:t$(d,`Unknown highlighting tag ${d}`)}for(let d of u)n.push(d)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(s=>s.id),o=FH[i];if(o)return o.id;let a=FH[i]=aa.define({id:KT.length,name:r,props:[pS({[r]:n})]});return KT.push(a),a.id}function yqe(t,e){let n=aa.define({id:KT.length,name:"Document",props:[F0.add(()=>t),mS.add(()=>r=>e.getIndent(r))],top:!0});return KT.push(n),n}wo.RTL,wo.LTR;class TF{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=ao(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),o=i.search(sle(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function jH(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function vqe(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let o=1;o<i.length;o++)n[i[o]]=!0}let r=jH(e)+jH(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function ole(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:vqe(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:n}:null}}function xqe(t,e){return n=>{for(let r=ao(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(n)}}class VH{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function x_(t){return t.selection.main.from}function sle(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",o=r[r.length-1]!="$";return!i&&!o?t:new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const kF=wy.define();function _qe(t,e,n,r){let{main:i}=t.selection,o=n-i.from,a=r-i.from;return{...t.changeByRange(s=>{if(s!=i&&n!=r&&t.sliceDoc(s.from+o,s.from+a)!=t.sliceDoc(n,r))return{range:s};let u=t.toText(e);return{changes:{from:s.from+o,to:r==i.from?s.to:s.from+a,insert:u},range:Qt.cursor(s.from+o+u.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const QH=new WeakMap;function bqe(t){if(!Array.isArray(t))return t;let e=QH.get(t);return e||QH.set(t,e=ole(t)),e}const KM=xr.define(),JT=xr.define();class wqe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=su(e,n),i=Kp(r);this.chars.push(r);let o=e.slice(n,n+i),a=o.toUpperCase();this.folded.push(su(a==o?o.toLowerCase():a,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:o,byWord:a}=this;if(n.length==1){let $=su(e,0),N=Kp($),F=N==e.length?0:-100;if($!=n[0])if($==r[0])F+=-200;else return null;return this.ret(F,[0,N])}let s=e.indexOf(this.pattern);if(s==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let u=n.length,d=0;if(s<0){for(let $=0,N=Math.min(e.length,200);$<N&&d<u;){let F=su(e,$);(F==n[d]||F==r[d])&&(i[d++]=$),$+=Kp(F)}if(d<u)return null}let m=0,v=0,_=!1,O=0,E=-1,A=-1,M=/[a-z]/.test(e),L=!0;for(let $=0,N=Math.min(e.length,200),F=0;$<N&&v<u;){let Q=su(e,$);s<0&&(m<u&&Q==n[m]&&(o[m++]=$),O<u&&(Q==n[O]||Q==r[O]?(O==0&&(E=$),A=$+1,O++):O=0));let W,H=Q<255?Q>=48&&Q<=57||Q>=97&&Q<=122?2:Q>=65&&Q<=90?1:0:(W=eF(Q))!=W.toLowerCase()?1:W!=W.toUpperCase()?2:0;(!$||H==1&&M||F==0&&H!=0)&&(n[v]==Q||r[v]==Q&&(_=!0)?a[v++]=$:a.length&&(L=!1)),F=H,$+=Kp(Q)}return v==u&&a[0]==0&&L?this.result(-100+(_?-200:0),a,e):O==u&&E==0?this.ret(-200-e.length+(A==e.length?0:-100),[0,A]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):O==u?this.ret(-900-e.length,[E,A]):v==u?this.result(-100+(_?-200:0)+-700+(L?0:-1100),a,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],o=0;for(let a of n){let s=a+(this.astral?Kp(su(r,a)):1);o&&i[o-1]==a?i[o-1]=s:(i[o++]=a,i[o++]=s)}return this.ret(e-r.length,i)}}class Oqe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Na=Dn.define({combine(t){return Em(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Sqe,filterStrict:!1,compareCompletions:(e,n)=>(e.sortText||e.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>UH(e(r),n(r)),optionClass:(e,n)=>r=>UH(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function UH(t,e){return t?e?t+" "+e:t:e}function Sqe(t,e,n,r,i,o){let a=t.textDirection==wo.RTL,s=a,u=!1,d="top",m,v,_=e.left-i.left,O=i.right-e.right,E=r.right-r.left,A=r.bottom-r.top;if(s&&_<Math.min(E,O)?s=!1:!s&&O<Math.min(E,_)&&(s=!0),E<=(s?_:O))m=Math.max(i.top,Math.min(n.top,i.bottom-A))-e.top,v=Math.min(400,s?_:O);else{u=!0,v=Math.min(400,(a?e.right:i.right-e.left)-30);let $=i.bottom-e.bottom;$>=A||$>e.top?m=n.bottom-e.top:(d="bottom",m=e.bottom-n.top)}let M=(e.bottom-e.top)/o.offsetHeight,L=(e.right-e.left)/o.offsetWidth;return{style:`${d}: ${m/M}px; max-width: ${v/L}px`,class:"cm-completionInfo-"+(u?a?"left-narrow":"right-narrow":s?"left":"right")}}function Cqe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,o){let a=document.createElement("span");a.className="cm-completionLabel";let s=n.displayLabel||n.label,u=0;for(let d=0;d<o.length;){let m=o[d++],v=o[d++];m>u&&a.appendChild(document.createTextNode(s.slice(u,m)));let _=a.appendChild(document.createElement("span"));_.appendChild(document.createTextNode(s.slice(m,v))),_.className="cm-completionMatchedText",u=v}return u<s.length&&a.appendChild(document.createTextNode(s.slice(u))),a},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function n$(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class Tqe{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:u=>this.placeInfo(u),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:o,selected:a}=i.open,s=e.state.facet(Na);this.optionContent=Cqe(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=n$(o.length,a,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",u=>{let{options:d}=e.state.field(n).open;for(let m=u.target,v;m&&m!=this.dom;m=m.parentNode)if(m.nodeName=="LI"&&(v=/-(\d+)$/.exec(m.id))&&+v[1]<d.length){this.applyCompletion(e,d[+v[1]]),u.preventDefault();return}}),this.dom.addEventListener("focusout",u=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Na).closeOnBlur&&u.relatedTarget!=e.contentDOM&&e.dispatch({effects:JT.of(null)})}),this.showOptions(o,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:o,selected:a,disabled:s}=r.open;(!i.open||i.open.options!=o)&&(this.range=n$(o.length,a,e.state.facet(Na).maxRenderedOptions),this.showOptions(o,r.id)),this.updateSel(),s!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=n$(n.options.length,n.selected,this.view.state.facet(Na).maxRenderedOptions),this.showOptions(n.options,e.id));let r=this.updateSelectedOption(n.selected);if(r){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:o}=i;if(!o)return;let a=typeof o=="string"?document.createTextNode(o):o(i);if(!a)return;"then"in a?a.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s,i)}).catch(s=>du(this.view.state,s,"completion info")):(this.addInfoPane(a,i),r.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",r.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:o}=e;r.appendChild(i),this.infoDestroy=o||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&(r.removeAttribute("aria-selected"),r.removeAttribute("aria-describedby"));return n&&Eqe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.space;if(!o){let a=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:a.clientWidth,bottom:a.clientHeight}}return i.top>Math.min(o.bottom,n.bottom)-10||i.bottom<Math.max(o.top,n.top)+10?null:this.view.state.facet(Na).positionInfo(this.view,n,i,r,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",a=>{a.target==i&&a.preventDefault()});let o=null;for(let a=r.from;a<r.to;a++){let{completion:s,match:u}=e[a],{section:d}=s;if(d){let _=typeof d=="string"?d:d.name;if(_!=o&&(a>r.from||r.from==0))if(o=_,typeof d!="string"&&d.header)i.appendChild(d.header(d));else{let O=i.appendChild(document.createElement("completion-section"));O.textContent=_}}const m=i.appendChild(document.createElement("li"));m.id=n+"-"+a,m.setAttribute("role","option");let v=this.optionClass(s);v&&(m.className=v);for(let _ of this.optionContent){let O=_(s,this.view.state,this.view,u);O&&m.appendChild(O)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function kqe(t,e){return n=>new Tqe(n,t,e)}function Eqe(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function ZH(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Aqe(t,e){let n=[],r=null,i=null,o=m=>{n.push(m);let{section:v}=m.completion;if(v){r||(r=[]);let _=typeof v=="string"?v:v.name;r.some(O=>O.name==_)||r.push(typeof v=="string"?{name:_}:v)}},a=e.facet(Na);for(let m of t)if(m.hasResult()){let v=m.result.getMatch;if(m.result.filter===!1)for(let _ of m.result.options)o(new VH(_,m.source,v?v(_):[],1e9-n.length));else{let _=e.sliceDoc(m.from,m.to),O,E=a.filterStrict?new Oqe(_):new wqe(_);for(let A of m.result.options)if(O=E.match(A.label)){let M=A.displayLabel?v?v(A,O.matched):[]:O.matched,L=O.score+(A.boost||0);if(o(new VH(A,m.source,M,L)),typeof A.section=="object"&&A.section.rank==="dynamic"){let{name:$}=A.section;i||(i=Object.create(null)),i[$]=Math.max(L,i[$]||-1e9)}}}}if(r){let m=Object.create(null),v=0,_=(O,E)=>(O.rank==="dynamic"&&E.rank==="dynamic"?i[E.name]-i[O.name]:0)||(typeof O.rank=="number"?O.rank:1e9)-(typeof E.rank=="number"?E.rank:1e9)||(O.name<E.name?-1:1);for(let O of r.sort(_))v-=1e5,m[O.name]=v;for(let O of n){let{section:E}=O.completion;E&&(O.score+=m[typeof E=="string"?E:E.name])}}let s=[],u=null,d=a.compareCompletions;for(let m of n.sort((v,_)=>_.score-v.score||d(v.completion,_.completion))){let v=m.completion;!u||u.label!=v.label||u.detail!=v.detail||u.type!=null&&v.type!=null&&u.type!=v.type||u.apply!=v.apply||u.boost!=v.boost?s.push(m):ZH(m.completion)>ZH(u)&&(s[s.length-1]=m),u=m.completion}return s}class vw{constructor(e,n,r,i,o,a){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=o,this.disabled=a}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new vw(this.options,qH(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,o,a){if(i&&!a&&e.some(d=>d.isPending))return i.setDisabled();let s=Aqe(e,n);if(!s.length)return i&&e.some(d=>d.isPending)?i.setDisabled():null;let u=n.facet(Na).selectOnOpen?0:-1;if(i&&i.selected!=u&&i.selected!=-1){let d=i.options[i.selected].completion;for(let m=0;m<s.length;m++)if(s[m].completion==d){u=m;break}}return new vw(s,qH(r,u),{pos:e.reduce((d,m)=>m.hasResult()?Math.min(d,m.from):d,1e8),create:Lqe,above:o.aboveCursor},i?i.timestamp:Date.now(),u,!1)}map(e){return new vw(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new vw(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class JM{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new JM(Iqe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(Na),o=(r.override||n.languageDataAt("autocomplete",x_(n)).map(bqe)).map(u=>(this.active.find(m=>m.source==u)||new sd(u,this.active.some(m=>m.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((u,d)=>u==this.active[d])&&(o=this.active);let a=this.open,s=e.effects.some(u=>u.is(EF));a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some(u=>u.hasResult()&&e.changes.touchesRange(u.from,u.to))||!Pqe(o,this.active)||s?a=vw.build(o,n,this.id,a,r,s):a&&a.disabled&&!o.some(u=>u.isPending)&&(a=null),!a&&o.every(u=>!u.isPending)&&o.some(u=>u.hasResult())&&(o=o.map(u=>u.hasResult()?new sd(u.source,0):u));for(let u of e.effects)u.is(lle)&&(a=a&&a.setSelected(u.value,this.id));return o==this.active&&a==this.open?this:new JM(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Mqe:Rqe}}function Pqe(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,o=r==e.length;if(i||o)return i==o;if(t[n++].result!=e[r++].result)return!1}}const Mqe={"aria-autocomplete":"list"},Rqe={};function qH(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Iqe=[];function ale(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(kF);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class sd{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=ale(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new sd(i.source,0)),r&4&&i.state==0&&(i=new sd(this.source,1)),i=i.updateFor(e,r);for(let o of e.effects)if(o.is(KM))i=new sd(i.source,1,o.value);else if(o.is(JT))i=new sd(i.source,0);else if(o.is(EF))for(let a of o.value)a.source==i.source&&(i=a);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(x_(e.state))}}class Nw extends sd{constructor(e,n,r,i,o,a){super(e,3,n),this.limit=r,this.result=i,this.from=o,this.to=a}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),s=x_(e.state);if(s>a||!i||n&2&&(x_(e.startState)==this.from||s<this.limit))return new sd(this.source,n&4?1:0);let u=e.changes.mapPos(this.limit);return Dqe(i.validFor,e.state,o,a)?new Nw(this.source,this.explicit,u,i,o,a):i.update&&(i=i.update(i,o,a,new TF(e.state,s,!1)))?new Nw(this.source,this.explicit,u,i,i.from,(r=i.to)!==null&&r!==void 0?r:x_(e.state)):new sd(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Nw(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new sd(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Dqe(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):sle(t,!0).test(i)}const EF=xr.define({map(t,e){return t.map(n=>n.map(e))}}),lle=xr.define(),au=Fs.define({create(){return JM.start()},update(t,e){return t.update(e)},provide:t=>[mF.from(t,e=>e.tooltip),pn.contentAttributes.from(t,e=>e.attrs)]});function AF(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(au).active.find(i=>i.source==e.source);return r instanceof Nw?(typeof n=="string"?t.dispatch({..._qe(t.state,n,r.from,r.to),annotations:kF.of(e.completion)}):n(t,e.completion,r.from,r.to),!0):!1}const Lqe=kqe(au,AF);function OP(t,e="option"){return n=>{let r=n.state.field(au,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Na).interactionDelay)return!1;let i=1,o;e=="page"&&(o=wae(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=r.open.options,s=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:a-1;return s<0?s=e=="page"?0:a-1:s>=a&&(s=e=="page"?a-1:0),n.dispatch({effects:lle.of(s)}),!0}}const $qe=t=>{let e=t.state.field(au,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Na).interactionDelay?!1:AF(t,e.open.options[e.open.selected])},r$=t=>t.state.field(au,!1)?(t.dispatch({effects:KM.of(!0)}),!0):!1,zqe=t=>{let e=t.state.field(au,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:JT.of(null)}),!0)};class Nqe{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const Bqe=50,Fqe=1e3,jqe=zs.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(au).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(au),n=t.state.facet(Na);if(!t.selectionSet&&!t.docChanged&&t.startState.field(au)==e)return;let r=t.transactions.some(o=>{let a=ale(o,n);return a&8||(o.selection||o.docChanged)&&!(a&3)});for(let o=0;o<this.running.length;o++){let a=this.running[o];if(r||a.context.abortOnDocChange&&t.docChanged||a.updates.length+t.transactions.length>Bqe&&Date.now()-a.time>Fqe){for(let s of a.context.abortListeners)try{s()}catch(u){du(this.view.state,u)}a.context.abortListeners=null,this.running.splice(o--,1)}else a.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(o=>o.effects.some(a=>a.is(KM)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(a=>a.active.source==o.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let o of t.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(au);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Na).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=x_(e),r=new TF(e,n,t.explicit,this.view),i=new Nqe(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:JT.of(null)}),du(this.view.state,o)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Na).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Na),r=this.view.state.field(au);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(o.done===void 0)continue;if(this.running.splice(i--,1),o.done){let s=x_(o.updates.length?o.updates[0].startState:this.view.state),u=Math.min(s,o.done.from+(o.active.explicit?0:1)),d=new Nw(o.active.source,o.active.explicit,u,o.done,o.done.from,(t=o.done.to)!==null&&t!==void 0?t:s);for(let m of o.updates)d=d.update(m,n);if(d.hasResult()){e.push(d);continue}}let a=r.active.find(s=>s.source==o.active.source);if(a&&a.isPending)if(o.done==null){let s=new sd(o.active.source,0);for(let u of o.updates)s=s.update(u,n);s.isPending||e.push(s)}else this.startQuery(a)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:EF.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(au,!1);if(e&&e.tooltip&&this.view.state.facet(Na).closeOnBlur){let n=e.open&&wae(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:JT.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:KM.of(!1)}),20),this.composing=0}}}),Vqe=typeof navigator=="object"&&/Win/.test(navigator.platform),Qqe=Uf.highest(pn.domEventHandlers({keydown(t,e){let n=e.state.field(au,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(Vqe&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(a=>a.source==r.source),o=r.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(t.key)>-1&&AF(e,r),!1}})),cle=pn.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Uqe{constructor(e,n,r,i){this.field=e,this.line=n,this.from=r,this.to=i}}class PF{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,dl.TrackDel),r=e.mapPos(this.to,1,dl.TrackDel);return n==null||r==null?null:new PF(this.field,n,r)}}class MF{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],i=[n],o=e.doc.lineAt(n),a=/^\s*/.exec(o.text)[0];for(let u of this.lines){if(r.length){let d=a,m=/^\t*/.exec(u)[0].length;for(let v=0;v<m;v++)d+=e.facet(aE);i.push(n+d.length-m),u=d+u.slice(m)}r.push(u),n+=u.length+1}let s=this.fieldPositions.map(u=>new PF(u.field,i[u.line]+u.from,i[u.line]+u.to));return{text:r,ranges:s}}static parse(e){let n=[],r=[],i=[],o;for(let a of e.split(/\r\n?|\n/)){for(;o=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(a);){let s=o[1]?+o[1]:null,u=o[2]||o[3]||"",d=-1,m=u.replace(/\\[{}]/g,v=>v[1]);for(let v=0;v<n.length;v++)(s!=null?n[v].seq==s:m&&n[v].name==m)&&(d=v);if(d<0){let v=0;for(;v<n.length&&(s==null||n[v].seq!=null&&n[v].seq<s);)v++;n.splice(v,0,{seq:s,name:m}),d=v;for(let _ of i)_.field>=d&&_.field++}for(let v of i)if(v.line==r.length&&v.from>o.index){let _=o[2]?3+(o[1]||"").length:2;v.from-=_,v.to-=_}i.push(new Uqe(d,r.length,o.index,o.index+m.length)),a=a.slice(0,o.index)+u+a.slice(o.index+o[0].length)}a=a.replace(/\\([{}])/g,(s,u,d)=>{for(let m of i)m.line==r.length&&m.from>d&&(m.from--,m.to--);return u}),r.push(a)}return new MF(r,i)}}let Zqe=Zn.widget({widget:new class extends Sd{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),qqe=Zn.mark({class:"cm-snippetField"});class yS{constructor(e,n){this.ranges=e,this.active=n,this.deco=Zn.set(e.map(r=>(r.from==r.to?Zqe:qqe).range(r.from,r.to)),!0)}map(e){let n=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;n.push(i)}return new yS(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const uE=xr.define({map(t,e){return t&&t.map(e)}}),Wqe=xr.define(),ek=Fs.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(uE))return n.value;if(n.is(Wqe)&&t)return new yS(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>pn.decorations.from(t,e=>e?e.deco:Zn.none)});function RF(t,e){return Qt.create(t.filter(n=>n.field==e).map(n=>Qt.range(n.from,n.to)))}function Hqe(t){let e=MF.parse(t);return(n,r,i,o)=>{let{text:a,ranges:s}=e.instantiate(n.state,i),{main:u}=n.state.selection,d={changes:{from:i,to:o==u.from?u.to:o,insert:Di.of(a)},scrollIntoView:!0,annotations:r?[kF.of(r),na.userEvent.of("input.complete")]:void 0};if(s.length&&(d.selection=RF(s,0)),s.some(m=>m.field>0)){let m=new yS(s,0),v=d.effects=[uE.of(m)];n.state.field(ek,!1)===void 0&&v.push(xr.appendConfig.of([ek,Jqe,eWe,cle]))}n.dispatch(n.state.update(d))}}function ule(t){return({state:e,dispatch:n})=>{let r=e.field(ek,!1);if(!r||t<0&&r.active==0)return!1;let i=r.active+t,o=t>0&&!r.ranges.some(a=>a.field==i+t);return n(e.update({selection:RF(r.ranges,i),effects:uE.of(o?null:new yS(r.ranges,i)),scrollIntoView:!0})),!0}}const Gqe=({state:t,dispatch:e})=>t.field(ek,!1)?(e(t.update({effects:uE.of(null)})),!0):!1,Xqe=ule(1),Yqe=ule(-1),Kqe=[{key:"Tab",run:Xqe,shift:Yqe},{key:"Escape",run:Gqe}],WH=Dn.define({combine(t){return t.length?t[0]:Kqe}}),Jqe=Uf.highest(dS.compute([WH],t=>t.facet(WH)));function nu(t,e){return{...e,apply:Hqe(t)}}const eWe=pn.domEventHandlers({mousedown(t,e){let n=e.state.field(ek,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=n.ranges.find(o=>o.from<=r&&o.to>=r);return!i||i.field==n.active?!1:(e.dispatch({selection:RF(n.ranges,i.field),effects:uE.of(n.ranges.some(o=>o.field>i.field)?new yS(n.ranges,i.field):null),scrollIntoView:!0}),!0)}}),tk={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},c_=xr.define({map(t,e){let n=e.mapPos(t,-1,dl.TrackAfter);return n??void 0}}),IF=new class extends rv{};IF.startSide=1;IF.endSide=-1;const hle=Fs.define({create(){return Kr.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(c_)&&(t=t.update({add:[IF.range(n.value,n.value+1)]}));return t}});function tWe(){return[rWe,hle]}const i$="()[]{}<>";function dle(t){for(let e=0;e<i$.length;e+=2)if(i$.charCodeAt(e)==t)return i$.charAt(e+1);return eF(t<128?t:t+1)}function fle(t,e){return t.languageDataAt("closeBrackets",e)[0]||tk}const nWe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),rWe=pn.inputHandler.of((t,e,n,r)=>{if((nWe?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&Kp(su(r,0))==1||e!=i.from||n!=i.to)return!1;let o=sWe(t.state,r);return o?(t.dispatch(o),!0):!1}),iWe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=fle(t,t.selection.main.head).brackets||tk.brackets,i=null,o=t.changeByRange(a=>{if(a.empty){let s=aWe(t.doc,a.head);for(let u of r)if(u==s&&dD(t.doc,a.head)==dle(su(u,0)))return{changes:{from:a.head-u.length,to:a.head+u.length},range:Qt.cursor(a.head-u.length)}}return{range:i=a}});return i||e(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},oWe=[{key:"Backspace",run:iWe}];function sWe(t,e){let n=fle(t,t.selection.main.head),r=n.brackets||tk.brackets;for(let i of r){let o=dle(su(i,0));if(e==i)return o==i?uWe(t,i,r.indexOf(i+i+i)>-1,n):lWe(t,i,o,n.before||tk.before);if(e==o&&ple(t,t.selection.main.from))return cWe(t,i,o)}return null}function ple(t,e){let n=!1;return t.field(hle).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function dD(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Kp(su(n,0)))}function aWe(t,e){let n=t.sliceString(e-2,e);return Kp(su(n,0))==n.length?n:n.slice(1)}function lWe(t,e,n,r){let i=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:n,from:a.to}],effects:c_.of(a.to+e.length),range:Qt.range(a.anchor+e.length,a.head+e.length)};let s=dD(t.doc,a.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:e+n,from:a.head},effects:c_.of(a.head+e.length),range:Qt.cursor(a.head+e.length)}:{range:i=a}});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function cWe(t,e,n){let r=null,i=t.changeByRange(o=>o.empty&&dD(t.doc,o.head)==n?{changes:{from:o.head,to:o.head+n.length,insert:n},range:Qt.cursor(o.head+n.length)}:r={range:o});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function uWe(t,e,n,r){let i=r.stringPrefixes||tk.stringPrefixes,o=null,a=t.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:e,from:s.to}],effects:c_.of(s.to+e.length),range:Qt.range(s.anchor+e.length,s.head+e.length)};let u=s.head,d=dD(t.doc,u),m;if(d==e){if(HH(t,u))return{changes:{insert:e+e,from:u},effects:c_.of(u+e.length),range:Qt.cursor(u+e.length)};if(ple(t,u)){let _=n&&t.sliceDoc(u,u+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:u,to:u+_.length,insert:_},range:Qt.cursor(u+_.length)}}}else{if(n&&t.sliceDoc(u-2*e.length,u)==e+e&&(m=GH(t,u-2*e.length,i))>-1&&HH(t,m))return{changes:{insert:e+e+e+e,from:u},effects:c_.of(u+e.length),range:Qt.cursor(u+e.length)};if(t.charCategorizer(u)(d)!=Xo.Word&&GH(t,u,i)>-1&&!hWe(t,u,e,i))return{changes:{insert:e+e,from:u},effects:c_.of(u+e.length),range:Qt.cursor(u+e.length)}}return{range:o=s}});return o?null:t.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function HH(t,e){let n=ao(t).resolveInner(e+1);return n.parent&&n.from==e}function hWe(t,e,n,r){let i=ao(t).resolveInner(e,-1),o=r.reduce((a,s)=>Math.max(a,s.length),0);for(let a=0;a<5;a++){let s=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),u=s.indexOf(n);if(!u||u>-1&&r.indexOf(s.slice(0,u))>-1){let m=i.firstChild;for(;m&&m.from==i.from&&m.to-m.from>n.length+u;){if(t.sliceDoc(m.to-n.length,m.to)==n)return!1;m=m.firstChild}return!0}let d=i.to==e&&i.parent;if(!d)break;i=d}return!1}function GH(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=Xo.Word)return e;for(let i of n){let o=e-i.length;if(t.sliceDoc(o,e)==i&&r(t.sliceDoc(o-1,o))!=Xo.Word)return o}return-1}function dWe(t={}){return[Qqe,au,Na.of(t),jqe,fWe,cle]}const mle=[{key:"Ctrl-Space",run:r$},{mac:"Alt-`",run:r$},{mac:"Alt-i",run:r$},{key:"Escape",run:zqe},{key:"ArrowDown",run:OP(!0)},{key:"ArrowUp",run:OP(!1)},{key:"PageDown",run:OP(!0,"page")},{key:"PageUp",run:OP(!1,"page")},{key:"Enter",run:$qe}],fWe=Uf.highest(dS.computeN([Na],t=>t.facet(Na).defaultKeymap?[mle]:[])),pWe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=LF(t.state,n.from);return r.line?mWe(t):r.block?yWe(t):!1};function DF(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const mWe=DF(_We,0),gWe=DF(gle,0),yWe=DF((t,e)=>gle(t,e,xWe(e)),0);function LF(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const tC=50;function vWe(t,{open:e,close:n},r,i){let o=t.sliceDoc(r-tC,r),a=t.sliceDoc(i,i+tC),s=/\s*$/.exec(o)[0].length,u=/^\s*/.exec(a)[0].length,d=o.length-s;if(o.slice(d-e.length,d)==e&&a.slice(u,u+n.length)==n)return{open:{pos:r-s,margin:s&&1},close:{pos:i+u,margin:u&&1}};let m,v;i-r<=2*tC?m=v=t.sliceDoc(r,i):(m=t.sliceDoc(r,r+tC),v=t.sliceDoc(i-tC,i));let _=/^\s*/.exec(m)[0].length,O=/\s*$/.exec(v)[0].length,E=v.length-O-n.length;return m.slice(_,_+e.length)==e&&v.slice(E,E+n.length)==n?{open:{pos:r+_+e.length,margin:/\s/.test(m.charAt(_+e.length))?1:0},close:{pos:i-O-n.length,margin:/\s/.test(v.charAt(E-1))?1:0}}:null}function xWe(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function gle(t,e,n=e.selection.ranges){let r=n.map(o=>LF(e,o.from).block);if(!r.every(o=>o))return null;let i=n.map((o,a)=>vWe(e,r[a],o.from,o.to));if(t!=2&&!i.every(o=>o))return{changes:e.changes(n.map((o,a)=>i[a]?[]:[{from:o.from,insert:r[a].open+" "},{from:o.to,insert:" "+r[a].close}]))};if(t!=1&&i.some(o=>o)){let o=[];for(let a=0,s;a<i.length;a++)if(s=i[a]){let u=r[a],{open:d,close:m}=s;o.push({from:d.pos-u.open.length,to:d.pos+d.margin},{from:m.pos-m.margin,to:m.pos+u.close.length})}return{changes:o}}return null}function _We(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:a}of n){let s=r.length,u=1e9,d=LF(e,o).line;if(d){for(let m=o;m<=a;){let v=e.doc.lineAt(m);if(v.from>i&&(o==a||a>v.from)){i=v.from;let _=/^\s*/.exec(v.text)[0].length,O=_==v.length,E=v.text.slice(_,_+d.length)==d?_:-1;_<v.text.length&&_<u&&(u=_),r.push({line:v,comment:E,token:d,indent:_,empty:O,single:!1})}m=v.to+1}if(u<1e9)for(let m=s;m<r.length;m++)r[m].indent<r[m].line.text.length&&(r[m].indent=u);r.length==s+1&&(r[s].single=!0)}}if(t!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:s,token:u,indent:d,empty:m,single:v}of r)(v||!m)&&o.push({from:s.from+d,insert:u+" "});let a=e.changes(o);return{changes:a,selection:e.selection.map(a,1)}}else if(t!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:a,comment:s,token:u}of r)if(s>=0){let d=a.from+s,m=d+u.length;a.text[m-a.from]==" "&&m++,o.push({from:d,to:m})}return{changes:o}}return null}const X6=wy.define(),bWe=wy.define(),wWe=Dn.define(),yle=Dn.define({combine(t){return Em(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),vle=Fs.define({create(){return am.empty},update(t,e){let n=e.state.facet(yle),r=e.annotation(X6);if(r){let u=fu.fromTransaction(e,r.selection),d=r.side,m=d==0?t.undone:t.done;return u?m=eR(m,m.length,n.minDepth,u):m=ble(m,e.startState.selection),new am(d==0?r.rest:m,d==0?m:r.rest)}let i=e.annotation(bWe);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(na.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let o=fu.fromTransaction(e),a=e.annotation(na.time),s=e.annotation(na.userEvent);return o?t=t.addChanges(o,a,s,n,e):e.selection&&(t=t.addSelection(e.startState.selection,a,s,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new am(t.done.map(fu.fromJSON),t.undone.map(fu.fromJSON))}});function OWe(t={}){return[vle,yle.of(t),pn.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?xle:e.inputType=="historyRedo"?Y6:null;return r?(e.preventDefault(),r(n)):!1}})]}function fD(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(vle,!1);if(!i)return!1;let o=i.pop(t,n,e);return o?(r(o),!0):!1}}const xle=fD(0,!1),Y6=fD(1,!1),SWe=fD(0,!0),CWe=fD(1,!0);class fu{constructor(e,n,r,i,o){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new fu(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new fu(e.changes&&Xs.fromJSON(e.changes),[],e.mapped&&pm.fromJSON(e.mapped),e.startSelection&&Qt.fromJSON(e.startSelection),e.selectionsAfter.map(Qt.fromJSON))}static fromTransaction(e,n){let r=ad;for(let i of e.startState.facet(wWe)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new fu(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,ad)}static selection(e){return new fu(void 0,ad,void 0,void 0,e)}}function eR(t,e,n,r){let i=e+1>n+20?e-n-1:0,o=t.slice(i,e);return o.push(r),o}function TWe(t,e){let n=[],r=!1;return t.iterChangedRanges((i,o)=>n.push(i,o)),e.iterChangedRanges((i,o,a,s)=>{for(let u=0;u<n.length;){let d=n[u++],m=n[u++];s>=d&&a<=m&&(r=!0)}}),r}function kWe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function _le(t,e){return t.length?e.length?t.concat(e):t:e}const ad=[],EWe=200;function ble(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-EWe));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),eR(t,t.length-1,1e9,n.setSelAfter(r)))}else return[fu.selection([e])]}function AWe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function o$(t,e){if(!t.length)return t;let n=t.length,r=ad;for(;n;){let i=PWe(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=t.slice(0,n);return o[n-1]=i,o}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[fu.selection(r)]:ad}function PWe(t,e,n){let r=_le(t.selectionsAfter.length?t.selectionsAfter.map(s=>s.map(e)):ad,n);if(!t.changes)return fu.selection(r);let i=t.changes.map(e),o=e.mapDesc(t.changes,!0),a=t.mapped?t.mapped.composeDesc(o):o;return new fu(i,xr.mapEffects(t.effects,e),a,t.startSelection.map(o),r)}const MWe=/^(input\.type|delete)($|\.)/;class am{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new am(this.done,this.undone):this}addChanges(e,n,r,i,o){let a=this.done,s=a[a.length-1];return s&&s.changes&&!s.changes.empty&&e.changes&&(!r||MWe.test(r))&&(!s.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,TWe(s.changes,e.changes))||r=="input.type.compose")?a=eR(a,a.length-1,i.minDepth,new fu(e.changes.compose(s.changes),_le(xr.mapEffects(e.effects,s.changes),s.effects),s.mapped,s.startSelection,ad)):a=eR(a,a.length,i.minDepth,e),new am(a,ad,n,r)}addSelection(e,n,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:ad;return o.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&kWe(o[o.length-1],e)?this:new am(ble(this.done,e),this.undone,n,r)}addMapping(e){return new am(o$(this.done,e),o$(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1],a=o.selectionsAfter[0]||n.selection;if(r&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:X6.of({side:e,rest:AWe(i),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let s=i.length==1?ad:i.slice(0,i.length-1);return o.mapped&&(s=o$(s,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:X6.of({side:e,rest:s,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}am.empty=new am(ad,ad);const RWe=[{key:"Mod-z",run:xle,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Y6,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Y6,preventDefault:!0},{key:"Mod-u",run:SWe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:CWe,preventDefault:!0}];function vS(t,e){return Qt.create(t.ranges.map(e),t.mainIndex)}function Zf(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function qf({state:t,dispatch:e},n){let r=vS(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Zf(t,r)),!0)}function pD(t,e){return Qt.cursor(e?t.to:t.from)}function wle(t,e){return qf(t,n=>n.empty?t.moveByChar(n,e):pD(n,e))}function Gl(t){return t.textDirectionAt(t.state.selection.main.head)==wo.LTR}const Ole=t=>wle(t,!Gl(t)),Sle=t=>wle(t,Gl(t));function Cle(t,e){return qf(t,n=>n.empty?t.moveByGroup(n,e):pD(n,e))}const IWe=t=>Cle(t,!Gl(t)),DWe=t=>Cle(t,Gl(t));function LWe(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function mD(t,e,n){let r=ao(t).resolveInner(e.head),i=n?wr.closedBy:wr.openedBy;for(let u=e.head;;){let d=n?r.childAfter(u):r.childBefore(u);if(!d)break;LWe(t,d,i)?r=d:u=n?d.to:d.from}let o=r.type.prop(i),a,s;return o&&(a=n?sm(t,r.from,1):sm(t,r.to,-1))&&a.matched?s=n?a.end.to:a.end.from:s=n?r.to:r.from,Qt.cursor(s,n?-1:1)}const $We=t=>qf(t,e=>mD(t.state,e,!Gl(t))),zWe=t=>qf(t,e=>mD(t.state,e,Gl(t)));function Tle(t,e){return qf(t,n=>{if(!n.empty)return pD(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const kle=t=>Tle(t,!1),Ele=t=>Tle(t,!0);function Ale(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let o of t.state.facet(pn.scrollMargins)){let a=o(t);a?.top&&(n=Math.max(a?.top,n)),a?.bottom&&(r=Math.max(a?.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function Ple(t,e){let n=Ale(t),{state:r}=t,i=vS(r.selection,a=>a.empty?t.moveVertically(a,e,n.height):pD(a,e));if(i.eq(r.selection))return!1;let o;if(n.selfScroll){let a=t.coordsAtPos(r.selection.main.head),s=t.scrollDOM.getBoundingClientRect(),u=s.top+n.marginTop,d=s.bottom-n.marginBottom;a&&a.top>u&&a.bottom<d&&(o=pn.scrollIntoView(i.main.head,{y:"start",yMargin:a.top-u}))}return t.dispatch(Zf(r,i),{effects:o}),!0}const XH=t=>Ple(t,!1),K6=t=>Ple(t,!0);function vv(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let o=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=Qt.cursor(r.from+o))}return i}const NWe=t=>qf(t,e=>vv(t,e,!0)),BWe=t=>qf(t,e=>vv(t,e,!1)),FWe=t=>qf(t,e=>vv(t,e,!Gl(t))),jWe=t=>qf(t,e=>vv(t,e,Gl(t))),VWe=t=>qf(t,e=>Qt.cursor(t.lineBlockAt(e.head).from,1)),QWe=t=>qf(t,e=>Qt.cursor(t.lineBlockAt(e.head).to,-1));function UWe(t,e,n){let r=!1,i=vS(t.selection,o=>{let a=sm(t,o.head,-1)||sm(t,o.head,1)||o.head>0&&sm(t,o.head-1,1)||o.head<t.doc.length&&sm(t,o.head+1,-1);if(!a||!a.end)return o;r=!0;let s=a.start.from==o.head?a.end.to:a.end.from;return Qt.cursor(s)});return r?(e(Zf(t,i)),!0):!1}const ZWe=({state:t,dispatch:e})=>UWe(t,e);function Cd(t,e){let n=vS(t.state.selection,r=>{let i=e(r);return Qt.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Zf(t.state,n)),!0)}function Mle(t,e){return Cd(t,n=>t.moveByChar(n,e))}const Rle=t=>Mle(t,!Gl(t)),Ile=t=>Mle(t,Gl(t));function Dle(t,e){return Cd(t,n=>t.moveByGroup(n,e))}const qWe=t=>Dle(t,!Gl(t)),WWe=t=>Dle(t,Gl(t)),HWe=t=>Cd(t,e=>mD(t.state,e,!Gl(t))),GWe=t=>Cd(t,e=>mD(t.state,e,Gl(t)));function Lle(t,e){return Cd(t,n=>t.moveVertically(n,e))}const $le=t=>Lle(t,!1),zle=t=>Lle(t,!0);function Nle(t,e){return Cd(t,n=>t.moveVertically(n,e,Ale(t).height))}const YH=t=>Nle(t,!1),KH=t=>Nle(t,!0),XWe=t=>Cd(t,e=>vv(t,e,!0)),YWe=t=>Cd(t,e=>vv(t,e,!1)),KWe=t=>Cd(t,e=>vv(t,e,!Gl(t))),JWe=t=>Cd(t,e=>vv(t,e,Gl(t))),eHe=t=>Cd(t,e=>Qt.cursor(t.lineBlockAt(e.head).from)),tHe=t=>Cd(t,e=>Qt.cursor(t.lineBlockAt(e.head).to)),JH=({state:t,dispatch:e})=>(e(Zf(t,{anchor:0})),!0),eG=({state:t,dispatch:e})=>(e(Zf(t,{anchor:t.doc.length})),!0),tG=({state:t,dispatch:e})=>(e(Zf(t,{anchor:t.selection.main.anchor,head:0})),!0),nG=({state:t,dispatch:e})=>(e(Zf(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),nHe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),rHe=({state:t,dispatch:e})=>{let n=gD(t).map(({from:r,to:i})=>Qt.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:Qt.create(n),userEvent:"select"})),!0},iHe=({state:t,dispatch:e})=>{let n=vS(t.selection,r=>{let i=ao(t),o=i.resolveStack(r.from,1);if(r.empty){let a=i.resolveStack(r.from,-1);a.node.from>=o.node.from&&a.node.to<=o.node.to&&(o=a)}for(let a=o;a;a=a.next){let{node:s}=a;if((s.from<r.from&&s.to>=r.to||s.to>r.to&&s.from<=r.from)&&a.next)return Qt.range(s.to,s.from)}return r});return n.eq(t.selection)?!1:(e(Zf(t,n)),!0)};function Ble(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let o of n.selection.ranges){let a=n.doc.lineAt(o.head);if(e?a.to<t.state.doc.length:a.from>0)for(let s=o;;){let u=t.moveVertically(s,e);if(u.head<a.from||u.head>a.to){i.some(d=>d.head==u.head)||i.push(u);break}else{if(u.head==s.head)break;s=u}}}return i.length==r.ranges.length?!1:(t.dispatch(Zf(n,Qt.create(i,i.length-1))),!0)}const oHe=t=>Ble(t,!1),sHe=t=>Ble(t,!0),aHe=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=Qt.create([n.main]):n.main.empty||(r=Qt.create([Qt.cursor(n.main.head)])),r?(e(Zf(t,r)),!0):!1};function hE(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(o=>{let{from:a,to:s}=o;if(a==s){let u=e(o);u<a?(n="delete.backward",u=SP(t,u,!1)):u>a&&(n="delete.forward",u=SP(t,u,!0)),a=Math.min(a,u),s=Math.max(s,u)}else a=SP(t,a,!1),s=SP(t,s,!0);return a==s?{range:o}:{changes:{from:a,to:s},range:Qt.cursor(a,a<o.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?pn.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function SP(t,e,n){if(t instanceof pn)for(let r of t.state.facet(pn.atomicRanges).map(i=>i(t)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=n?o:i)});return e}const Fle=(t,e,n)=>hE(t,r=>{let i=r.from,{state:o}=t,a=o.doc.lineAt(i),s,u;if(n&&!e&&i>a.from&&i<a.from+200&&!/[^ \t]/.test(s=a.text.slice(0,i-a.from))){if(s[s.length-1]=="	")return i-1;let d=Nf(s,o.tabSize),m=d%U_(o)||U_(o);for(let v=0;v<m&&s[s.length-1-v]==" ";v++)i--;u=i}else u=ba(a.text,i-a.from,e,e)+a.from,u==i&&a.number!=(e?o.doc.lines:1)?u+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(u-a.from,i-a.from))&&(u=ba(a.text,u-a.from,!1,!1)+a.from);return u}),J6=t=>Fle(t,!1,!0),jle=t=>Fle(t,!0,!1),Vle=(t,e)=>hE(t,n=>{let r=n.head,{state:i}=t,o=i.doc.lineAt(r),a=i.charCategorizer(r);for(let s=null;;){if(r==(e?o.to:o.from)){r==n.head&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let u=ba(o.text,r-o.from,e)+o.from,d=o.text.slice(Math.min(r,u)-o.from,Math.max(r,u)-o.from),m=a(d);if(s!=null&&m!=s)break;(d!=" "||r!=n.head)&&(s=m),r=u}return r}),Qle=t=>Vle(t,!1),lHe=t=>Vle(t,!0),cHe=t=>hE(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),uHe=t=>hE(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),hHe=t=>hE(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),dHe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Di.of(["",""])},range:Qt.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},fHe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,o=t.doc.lineAt(i),a=i==o.from?i-1:ba(o.text,i-o.from,!1)+o.from,s=i==o.to?i+1:ba(o.text,i-o.from,!0)+o.from;return{changes:{from:a,to:s,insert:t.doc.slice(i,s).append(t.doc.slice(a,i))},range:Qt.cursor(s)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function gD(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=t.doc.lineAt(r.to-1)),n>=i.number){let a=e[e.length-1];a.to=o.to,a.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return e}function Ule(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let o of gD(t)){if(n?o.to==t.doc.length:o.from==0)continue;let a=t.doc.lineAt(n?o.to+1:o.from-1),s=a.length+1;if(n){r.push({from:o.to,to:a.to},{from:o.from,insert:a.text+t.lineBreak});for(let u of o.ranges)i.push(Qt.range(Math.min(t.doc.length,u.anchor+s),Math.min(t.doc.length,u.head+s)))}else{r.push({from:a.from,to:o.from},{from:o.to,insert:t.lineBreak+a.text});for(let u of o.ranges)i.push(Qt.range(u.anchor-s,u.head-s))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:Qt.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const pHe=({state:t,dispatch:e})=>Ule(t,e,!1),mHe=({state:t,dispatch:e})=>Ule(t,e,!0);function Zle(t,e,n){if(t.readOnly)return!1;let r=[];for(let o of gD(t))n?r.push({from:o.from,insert:t.doc.slice(o.from,o.to)+t.lineBreak}):r.push({from:o.to,insert:t.lineBreak+t.doc.slice(o.from,o.to)});let i=t.changes(r);return e(t.update({changes:i,selection:t.selection.map(i,n?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const gHe=({state:t,dispatch:e})=>Zle(t,e,!1),yHe=({state:t,dispatch:e})=>Zle(t,e,!0),vHe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(gD(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=vS(e.selection,i=>{let o;if(t.lineWrapping){let a=t.lineBlockAt(i.head),s=t.coordsAtPos(i.head,i.assoc||1);s&&(o=a.bottom+t.documentTop-s.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,o)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function xHe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=ao(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(wr.closedBy))&&o.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const rG=qle(!1),_He=qle(!0);function qle(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:a}=i,s=e.doc.lineAt(o),u=!t&&o==a&&xHe(e,o);t&&(o=a=(a<=s.to?s:e.doc.lineAt(a)).to);let d=new uD(e,{simulateBreak:o,simulateDoubleBreak:!!u}),m=bF(d,o);for(m==null&&(m=Nf(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));a<s.to&&/\s/.test(s.text[a-s.from]);)a++;u?{from:o,to:a}=u:o>s.from&&o<s.from+100&&!/\S/.test(s.text.slice(0,o))&&(o=s.from);let v=["",YT(e,m)];return u&&v.push(YT(e,d.lineIndent(s.from,-1))),{changes:{from:o,to:a,insert:Di.of(v)},range:Qt.cursor(o+1+v[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function $F(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let a=r.from;a<=r.to;){let s=t.doc.lineAt(a);s.number>n&&(r.empty||r.to>s.from)&&(e(s,i,r),n=s.number),a=s.to+1}let o=t.changes(i);return{changes:i,range:Qt.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const bHe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new uD(t,{overrideIndentation:o=>{let a=n[o];return a??-1}}),i=$F(t,(o,a,s)=>{let u=bF(r,o.from);if(u==null)return;/\S/.test(o.text)||(u=0);let d=/^\s*/.exec(o.text)[0],m=YT(t,u);(d!=m||s.from<o.from+d.length)&&(n[o.from]=u,a.push({from:o.from,to:o.from+d.length,insert:m}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},Wle=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update($F(t,(n,r)=>{r.push({from:n.from,insert:t.facet(aE)})}),{userEvent:"input.indent"})),!0),Hle=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update($F(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let o=Nf(i,t.tabSize),a=0,s=YT(t,Math.max(0,o-U_(t)));for(;a<i.length&&a<s.length&&i.charCodeAt(a)==s.charCodeAt(a);)a++;r.push({from:n.from+a,to:n.from+i.length,insert:s.slice(a)})}),{userEvent:"delete.dedent"})),!0),wHe=t=>(t.setTabFocusMode(),!0),OHe=[{key:"Ctrl-b",run:Ole,shift:Rle,preventDefault:!0},{key:"Ctrl-f",run:Sle,shift:Ile},{key:"Ctrl-p",run:kle,shift:$le},{key:"Ctrl-n",run:Ele,shift:zle},{key:"Ctrl-a",run:VWe,shift:eHe},{key:"Ctrl-e",run:QWe,shift:tHe},{key:"Ctrl-d",run:jle},{key:"Ctrl-h",run:J6},{key:"Ctrl-k",run:cHe},{key:"Ctrl-Alt-h",run:Qle},{key:"Ctrl-o",run:dHe},{key:"Ctrl-t",run:fHe},{key:"Ctrl-v",run:K6}],SHe=[{key:"ArrowLeft",run:Ole,shift:Rle,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:IWe,shift:qWe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:FWe,shift:KWe,preventDefault:!0},{key:"ArrowRight",run:Sle,shift:Ile,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:DWe,shift:WWe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:jWe,shift:JWe,preventDefault:!0},{key:"ArrowUp",run:kle,shift:$le,preventDefault:!0},{mac:"Cmd-ArrowUp",run:JH,shift:tG},{mac:"Ctrl-ArrowUp",run:XH,shift:YH},{key:"ArrowDown",run:Ele,shift:zle,preventDefault:!0},{mac:"Cmd-ArrowDown",run:eG,shift:nG},{mac:"Ctrl-ArrowDown",run:K6,shift:KH},{key:"PageUp",run:XH,shift:YH},{key:"PageDown",run:K6,shift:KH},{key:"Home",run:BWe,shift:YWe,preventDefault:!0},{key:"Mod-Home",run:JH,shift:tG},{key:"End",run:NWe,shift:XWe,preventDefault:!0},{key:"Mod-End",run:eG,shift:nG},{key:"Enter",run:rG,shift:rG},{key:"Mod-a",run:nHe},{key:"Backspace",run:J6,shift:J6,preventDefault:!0},{key:"Delete",run:jle,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Qle,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:lHe,preventDefault:!0},{mac:"Mod-Backspace",run:uHe,preventDefault:!0},{mac:"Mod-Delete",run:hHe,preventDefault:!0}].concat(OHe.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),CHe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:$We,shift:HWe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:zWe,shift:GWe},{key:"Alt-ArrowUp",run:pHe},{key:"Shift-Alt-ArrowUp",run:gHe},{key:"Alt-ArrowDown",run:mHe},{key:"Shift-Alt-ArrowDown",run:yHe},{key:"Mod-Alt-ArrowUp",run:oHe},{key:"Mod-Alt-ArrowDown",run:sHe},{key:"Escape",run:aHe},{key:"Mod-Enter",run:_He},{key:"Alt-l",mac:"Ctrl-l",run:rHe},{key:"Mod-i",run:iHe,preventDefault:!0},{key:"Mod-[",run:Hle},{key:"Mod-]",run:Wle},{key:"Mod-Alt-\\",run:bHe},{key:"Shift-Mod-k",run:vHe},{key:"Shift-Mod-\\",run:ZWe},{key:"Mod-/",run:pWe},{key:"Alt-A",run:gWe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:wHe}].concat(SHe),THe={key:"Tab",run:Wle,shift:Hle};var iG={};class tR{constructor(e,n,r,i,o,a,s,u,d,m=0,v){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=o,this.score=a,this.buffer=s,this.bufferBase=u,this.curContext=d,this.lookAhead=m,this.parent=v}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new tR(e,[],n,r,r,0,[],0,i?new oG(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let r=e>>19,i=e&65535,{parser:o}=this.p,a=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),s=o.dynamicPrecedence(i);if(s&&(this.score+=s),r==0){this.pushState(o.getGoto(this.state,i,!0),this.reducePos),i<o.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(i,this.reducePos);return}let u=this.stack.length-(r-1)*3-(e&262144?6:0),d=u?this.stack[u-2]:this.p.ranges[0].from,m=this.reducePos-d;m>=2e3&&!(!((n=this.p.parser.nodeSet.types[i])===null||n===void 0)&&n.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=m):this.p.lastBigReductionSize<m&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=m));let v=u?this.stack[u-1]:0,_=this.bufferBase+this.buffer.length-v;if(i<o.minRepeatTerm||e&131072){let O=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,d,O,_+4,!0)}if(e&262144)this.state=this.stack[u];else{let O=this.stack[u-3];this.state=o.getGoto(O,i,!0)}for(;this.stack.length>u;)this.stack.pop();this.reduceContext(i,d)}storeNode(e,n,r,i=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,s=this.buffer.length;if(s==0&&a.parent&&(s=a.bufferBase-a.parent.bufferBase,a=a.parent),s>0&&a.buffer[s-4]==0&&a.buffer[s-1]>-1){if(n==r)return;if(a.buffer[s-2]>=n){a.buffer[s-2]=r;return}}}if(!o||this.pos==r)this.buffer.push(e,n,r,i);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let s=!1;for(let u=a;u>0&&this.buffer[u-2]>r;u-=4)if(this.buffer[u-1]>=0){s=!0;break}if(s)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,i>4&&(i-=4)}this.buffer[a]=e,this.buffer[a+1]=n,this.buffer[a+2]=r,this.buffer[a+3]=i}}shift(e,n,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:a}=this.p;(i>this.pos||n<=a.maxNode)&&(this.pos=i,a.stateFlag(o,1)||(this.reducePos=i)),this.pushState(o,r),this.shiftContext(n,r),n<=a.maxNode&&this.buffer.push(n,r,i,4)}else this.pos=i,this.shiftContext(n,r),n<=this.p.parser.maxNode&&this.buffer.push(n,r,i,4)}apply(e,n,r,i){e&65536?this.reduce(e):this.shift(e,n,r,i)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new tR(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new kHe(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(r==0)return!1;if((r&65536)==0)return!0;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let i=[];for(let o=0,a;o<n.length;o+=2)(a=n[o+1])!=this.state&&this.p.parser.hasAction(a,e)&&i.push(n[o],a);if(this.stack.length<120)for(let o=0;i.length<8&&o<n.length;o+=2){let a=n[o+1];i.some((s,u)=>u&1&&s==a)||i.push(n[o],a)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let o=n[i+1];if(o==this.state)continue;let a=this.split();a.pushState(o,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(n[i],this.pos),a.reducePos=this.pos,a.score-=200,r.push(a)}return r}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if((n&65536)==0)return!1;if(!e.validAction(this.state,n)){let r=n>>19,i=n&65535,o=this.stack.length-r*3;if(o<0||e.getGoto(this.stack[o],i,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;n=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],r=(i,o)=>{if(!n.includes(i))return n.push(i),e.allActions(i,a=>{if(!(a&393216))if(a&65536){let s=(a>>19)-o;if(s>1){let u=a&65535,d=this.stack.length-s*3;if(d>=0&&e.getGoto(this.stack[d],u,!1)>=0)return s<<19|65536|u}}else{let s=r(a,o+1);if(s!=null)return s}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new oG(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class oG{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class kHe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}}class nR{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new nR(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new nR(this.stack,this.pos,this.index)}}function _C(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let r=0,i=0;r<t.length;){let o=0;for(;;){let a=t.charCodeAt(r++),s=!1;if(a==126){o=65535;break}a>=92&&a--,a>=34&&a--;let u=a-32;if(u>=46&&(u-=46,s=!0),o+=u,s)break;o*=46}n?n[i++]=o:n=new e(o)}return n}class w5{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const sG=new w5;class EHe{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=sG,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,o=this.pos+e;for(;o<r.from;){if(!i)return null;let a=this.ranges[--i];o-=r.from-a.to,r=a}for(;n<0?o>r.to:o>=r.to;){if(i==this.ranges.length-1)return null;let a=this.ranges[++i];o+=a.from-r.to,r=a}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(r=o,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,s=this.range;for(;s.to<=r;)s=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>s.to&&(this.chunk2=this.chunk2.slice(0,s.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=sG,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}}class Bw{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:r}=n.p;Gle(this.data,e,n,this.id,r.data,r.tokenPrecTable)}}Bw.prototype.contextual=Bw.prototype.fallback=Bw.prototype.extend=!1;class rR{constructor(e,n,r){this.precTable=n,this.elseToken=r,this.data=typeof e=="string"?_C(e):e}token(e,n){let r=e.pos,i=0;for(;;){let o=e.next<0,a=e.resolveOffset(1,1);if(Gle(this.data,e,n,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(o||i++,a==null)break;e.reset(a,e.token)}i&&(e.reset(r,e.token),e.acceptToken(this.elseToken,i))}}rR.prototype.contextual=Bw.prototype.fallback=Bw.prototype.extend=!1;class xh{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function Gle(t,e,n,r,i,o){let a=0,s=1<<r,{dialect:u}=n.p.parser;e:for(;(s&t[a])!=0;){let d=t[a+1];for(let O=a+3;O<d;O+=2)if((t[O+1]&s)>0){let E=t[O];if(u.allows(E)&&(e.token.value==-1||e.token.value==E||AHe(E,e.token.value,i,o))){e.acceptToken(E);break}}let m=e.next,v=0,_=t[a+2];if(e.next<0&&_>v&&t[d+_*3-3]==65535){a=t[d+_*3-1];continue e}for(;v<_;){let O=v+_>>1,E=d+O+(O<<1),A=t[E],M=t[E+1]||65536;if(m<A)_=O;else if(m>=M)v=O+1;else{a=t[E+2],e.advance();continue e}}break}}function aG(t,e,n){for(let r=e,i;(i=t[r])!=65535;r++)if(i==n)return r-e;return-1}function AHe(t,e,n,r){let i=aG(n,r,e);return i<0||aG(n,r,t)<i}const qu=typeof process<"u"&&iG&&/\bparse\b/.test(iG.LOG);let s$=null;function lG(t,e,n){let r=t.cursor(Bi.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}let PHe=class{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?lG(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?lG(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=r.children[i],a=this.start[n]+r.positions[i];if(a>e)return this.nextStart=a,null;if(o instanceof Gr){if(a==e){if(a<this.safeFrom)return null;let s=a+o.length;if(s<=this.safeTo){let u=o.prop(wr.lookAhead);if(!u||s+u<this.fragment.to)return o}}this.index[n]++,a+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(a),this.index.push(0))}else this.index[n]++,this.nextStart=a+o.length}}};class MHe{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new w5)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:o}=i,a=i.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,u=0;for(let d=0;d<o.length;d++){if((1<<d&a)==0)continue;let m=o[d],v=this.tokens[d];if(!(r&&!m.fallback)&&((m.contextual||v.start!=e.pos||v.mask!=a||v.context!=s)&&(this.updateCachedToken(v,m,e),v.mask=a,v.context=s),v.lookAhead>v.end+25&&(u=Math.max(v.lookAhead,u)),v.value!=0)){let _=n;if(v.extended>-1&&(n=this.addActions(e,v.extended,v.end,n)),n=this.addActions(e,v.value,v.end,n),!m.extend&&(r=v,n>_))break}}for(;this.actions.length>n;)this.actions.pop();return u&&e.setLookAhead(u),!r&&e.pos==this.stream.end&&(r=new w5,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new w5,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:o}=r.p;for(let a=0;a<o.specialized.length;a++)if(o.specialized[a]==e.value){let s=o.specializers[a](this.stream.read(e.start,e.end),r);if(s>=0&&r.p.parser.dialect.allows(s>>1)){(s&1)==0?e.value=s>>1:e.extended=s>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let o=0;o<i;o+=3)if(this.actions[o]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:o}=e,{parser:a}=e.p,{data:s}=a;for(let u=0;u<2;u++)for(let d=a.stateSlot(o,u?2:1);;d+=3){if(s[d]==65535)if(s[d+1]==1)d=jg(s,d+2);else{i==0&&s[d+1]==2&&(i=this.putAction(jg(s,d+2),n,r,i));break}s[d]==n&&(i=this.putAction(jg(s,d+1),n,r,i))}return i}}class RHe{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new EHe(n,i),this.tokens=new MHe(e,this.stream),this.topTerm=e.top[1];let{from:o}=i[0];this.stacks=[tR.start(this,e.top[0],o)],this.fragments=r.length&&this.stream.end-o>e.bufferLength*4?new PHe(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,r=this.stacks=[],i,o;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let s=e[a];for(;;){if(this.tokens.mainToken=null,s.pos>n)r.push(s);else{if(this.advanceStack(s,r,e))continue;{i||(i=[],o=[]),i.push(s);let u=this.tokens.getMainToken(s);o.push(u.value,u.end)}}break}}if(!r.length){let a=i&&DHe(i);if(a)return qu&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw qu&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let a=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,o,r);if(a)return qu&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(r.length>a)for(r.sort((s,u)=>u.score-s.score);r.length>a;)r.pop();r.some(s=>s.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let s=r[a];for(let u=a+1;u<r.length;u++){let d=r[u];if(s.sameState(d)||s.buffer.length>500&&d.buffer.length>500)if((s.score-d.score||s.buffer.length-d.buffer.length)>0)r.splice(u--,1);else{r.splice(a--,1);continue e}}}r.length>12&&(r.sort((a,s)=>s.score-a.score),r.splice(12,r.length-12))}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:o}=this,a=qu?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,m=d?e.curContext.hash:0;for(let v=this.fragments.nodeAt(i);v;){let _=this.parser.nodeSet.types[v.type.id]==v.type?o.getGoto(e.state,v.type.id):-1;if(_>-1&&v.length&&(!d||(v.prop(wr.contextHash)||0)==m))return e.useNode(v,_),qu&&console.log(a+this.stackID(e)+` (via reuse of ${o.getName(v.type.id)})`),!0;if(!(v instanceof Gr)||v.children.length==0||v.positions[0]>0)break;let O=v.children[0];if(O instanceof Gr&&v.positions[0]==0)v=O;else break}}let s=o.stateSlot(e.state,4);if(s>0)return e.reduce(s),qu&&console.log(a+this.stackID(e)+` (via always-reduce ${o.getName(s&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let u=this.tokens.getActions(e);for(let d=0;d<u.length;){let m=u[d++],v=u[d++],_=u[d++],O=d==u.length||!r,E=O?e:e.split(),A=this.tokens.mainToken;if(E.apply(m,v,A?A.start:E.pos,_),qu&&console.log(a+this.stackID(E)+` (via ${(m&65536)==0?"shift":`reduce of ${o.getName(m&65535)}`} for ${o.getName(v)} @ ${i}${E==e?"":", split"})`),O)return!0;E.pos>i?n.push(E):r.push(E)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return cG(e,n),!0}}runRecovery(e,n,r){let i=null,o=!1;for(let a=0;a<e.length;a++){let s=e[a],u=n[a<<1],d=n[(a<<1)+1],m=qu?this.stackID(s)+" -> ":"";if(s.deadEnd&&(o||(o=!0,s.restart(),qu&&console.log(m+this.stackID(s)+" (restarted)"),this.advanceFully(s,r))))continue;let v=s.split(),_=m;for(let O=0;O<10&&v.forceReduce()&&(qu&&console.log(_+this.stackID(v)+" (via force-reduce)"),!this.advanceFully(v,r));O++)qu&&(_=this.stackID(v)+" -> ");for(let O of s.recoverByInsert(u))qu&&console.log(m+this.stackID(O)+" (via recover-insert)"),this.advanceFully(O,r);this.stream.end>s.pos?(d==s.pos&&(d++,u=0),s.recoverByDelete(u,d),qu&&console.log(m+this.stackID(s)+` (via recover-delete ${this.parser.getName(u)})`),cG(s,r)):(!i||i.score<s.score)&&(i=s)}return i}stackToTree(e){return e.close(),Gr.build({buffer:nR.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(s$||(s$=new WeakMap)).get(e);return n||s$.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function cG(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class IHe{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const a$=t=>t;class Xle{constructor(e){this.start=e.start,this.shift=e.shift||a$,this.reduce=e.reduce||a$,this.reuse=e.reuse||a$,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class kO extends lD{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let s=0;s<e.repeatNodeCount;s++)n.push("");let r=Object.keys(e.topRules).map(s=>e.topRules[s][1]),i=[];for(let s=0;s<n.length;s++)i.push([]);function o(s,u,d){i[s].push([u,u.deserialize(String(d))])}if(e.nodeProps)for(let s of e.nodeProps){let u=s[0];typeof u=="string"&&(u=wr[u]);for(let d=1;d<s.length;){let m=s[d++];if(m>=0)o(m,u,s[d++]);else{let v=s[d+-m];for(let _=-m;_>0;_--)o(s[d++],u,v);d++}}}this.nodeSet=new fS(n.map((s,u)=>aa.define({name:u>=this.minRepeatTerm?void 0:s,id:u,props:i[u],top:r.indexOf(u)>-1,error:u==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(u)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=kae;let a=_C(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let s=0;s<this.specializerSpecs.length;s++)this.specialized[s]=this.specializerSpecs[s].term;this.specializers=this.specializerSpecs.map(uG),this.states=_C(e.states,Uint32Array),this.data=_C(e.stateData),this.goto=_C(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(s=>typeof s=="number"?new Bw(a,s):s),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new RHe(this,e,n,r);for(let o of this.wrappers)i=o(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let o=i[n+1];;){let a=i[o++],s=a&1,u=i[o++];if(s&&r)return u;for(let d=o+(a>>1);o<d;o++)if(i[o]==e)return u;if(s)return-1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let o=this.stateSlot(e,i?2:1),a;;o+=3){if((a=r[o])==65535)if(r[o+1]==1)a=r[o=jg(r,o+2)];else{if(r[o+1]==2)return jg(r,o+2);break}if(a==n||a==0)return jg(r,o+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,r=>r==n?!0:null)}allActions(e,n){let r=this.stateSlot(e,4),i=r?n(r):void 0;for(let o=this.stateSlot(e,1);i==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=jg(this.data,o+2);else break;i=n(jg(this.data,o+1))}return i}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=jg(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];n.some((o,a)=>a&1&&o==i)||n.push(this.data[r],i)}}return n}configure(e){let n=Object.assign(Object.create(kO.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(o=>o.from==r);return i?i.to:r})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let o=e.specializers.find(s=>s.from==r.external);if(!o)return r;let a=Object.assign(Object.assign({},r),{external:o.to});return n.specializers[i]=uG(a),a})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let o of e.split(" ")){let a=n.indexOf(o);a>=0&&(r[a]=!0)}let i=null;for(let o=0;o<n.length;o++)if(!r[o])for(let a=this.dialects[n[o]],s;(s=this.data[a++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[s]=1;return new IHe(e,r,i)}static deserialize(e){return new kO(e)}}function jg(t,e){return t[e]|t[e+1]<<16}function DHe(t){let e=null;for(let n of t){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function uG(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const LHe=122,hG=1,$He=123,zHe=124,Yle=2,NHe=125,BHe=3,FHe=4,Kle=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],jHe=58,VHe=40,Jle=95,QHe=91,O5=45,UHe=46,ZHe=35,qHe=37,WHe=38,HHe=92,GHe=10,XHe=42;function nk(t){return t>=65&&t<=90||t>=97&&t<=122||t>=161}function zF(t){return t>=48&&t<=57}function dG(t){return zF(t)||t>=97&&t<=102||t>=65&&t<=70}const ece=(t,e,n)=>(r,i)=>{for(let o=!1,a=0,s=0;;s++){let{next:u}=r;if(nk(u)||u==O5||u==Jle||o&&zF(u))!o&&(u!=O5||s>0)&&(o=!0),a===s&&u==O5&&a++,r.advance();else if(u==HHe&&r.peek(1)!=GHe){if(r.advance(),dG(r.next)){do r.advance();while(dG(r.next));r.next==32&&r.advance()}else r.next>-1&&r.advance();o=!0}else{o&&r.acceptToken(a==2&&i.canShift(Yle)?e:u==VHe?n:t);break}}},YHe=new xh(ece($He,Yle,zHe)),KHe=new xh(ece(NHe,BHe,FHe)),JHe=new xh(t=>{if(Kle.includes(t.peek(-1))){let{next:e}=t;(nk(e)||e==Jle||e==ZHe||e==UHe||e==XHe||e==QHe||e==jHe&&nk(t.peek(1))||e==O5||e==WHe)&&t.acceptToken(LHe)}}),eGe=new xh(t=>{if(!Kle.includes(t.peek(-1))){let{next:e}=t;if(e==qHe&&(t.advance(),t.acceptToken(hG)),nk(e)){do t.advance();while(nk(t.next)||zF(t.next));t.acceptToken(hG)}}}),tGe=pS({"AtKeyword import charset namespace keyframes media supports":Be.definitionKeyword,"from to selector":Be.keyword,NamespaceName:Be.namespace,KeyframeName:Be.labelName,KeyframeRangeName:Be.operatorKeyword,TagName:Be.tagName,ClassName:Be.className,PseudoClassName:Be.constant(Be.className),IdName:Be.labelName,"FeatureName PropertyName":Be.propertyName,AttributeName:Be.attributeName,NumberLiteral:Be.number,KeywordQuery:Be.keyword,UnaryQueryOp:Be.operatorKeyword,"CallTag ValueName":Be.atom,VariableName:Be.variableName,Callee:Be.operatorKeyword,Unit:Be.unit,"UniversalSelector NestingSelector":Be.definitionOperator,"MatchOp CompareOp":Be.compareOperator,"ChildOp SiblingOp, LogicOp":Be.logicOperator,BinOp:Be.arithmeticOperator,Important:Be.modifier,Comment:Be.blockComment,ColorLiteral:Be.color,"ParenthesizedContent StringLiteral":Be.string,":":Be.punctuation,"PseudoOp #":Be.derefOperator,"; ,":Be.separator,"( )":Be.paren,"[ ]":Be.squareBracket,"{ }":Be.brace}),nGe={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},rGe={__proto__:null,or:98,and:98,not:106,only:106,layer:170},iGe={__proto__:null,selector:112,layer:166},oGe={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},sGe={__proto__:null,to:207},aGe=kO.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:" Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[tGe],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[JHe,eGe,YHe,KHe,1,2,3,4,new rR("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:t=>nGe[t]||-1},{term:125,get:t=>rGe[t]||-1},{term:4,get:t=>iGe[t]||-1},{term:25,get:t=>oGe[t]||-1},{term:123,get:t=>sGe[t]||-1}],tokenPrec:1963});let l$=null;function c$(){if(!l$&&typeof document=="object"&&document.body){let{style:t}=document.body,e=[],n=new Set;for(let r in t)r!="cssText"&&r!="cssFloat"&&typeof t[r]=="string"&&(/[A-Z]/.test(r)&&(r=r.replace(/[A-Z]/g,i=>"-"+i.toLowerCase())),n.has(r)||(e.push(r),n.add(r)));l$=e.sort().map(r=>({type:"property",label:r,apply:r+": "}))}return l$||[]}const fG=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(t=>({type:"class",label:t})),pG=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(t=>({type:"keyword",label:t})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(t=>({type:"constant",label:t}))),lGe=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(t=>({type:"type",label:t})),cGe=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(t=>({type:"keyword",label:t})),Ig=/^(\w[\w-]*|-\w[\w-]*|)$/,uGe=/^-(-[\w-]*)?$/;function hGe(t,e){var n;if((t.name=="("||t.type.isError)&&(t=t.parent||t),t.name!="ArgList")return!1;let r=(n=t.parent)===null||n===void 0?void 0:n.firstChild;return r?.name!="Callee"?!1:e.sliceString(r.from,r.to)=="var"}const mG=new Mae,dGe=["Declaration"];function fGe(t){for(let e=t;;){if(e.type.isTop)return e;if(!(e=e.parent))return t}}function tce(t,e,n){if(e.to-e.from>4096){let r=mG.get(e);if(r)return r;let i=[],o=new Set,a=e.cursor(Bi.IncludeAnonymous);if(a.firstChild())do for(let s of tce(t,a.node,n))o.has(s.label)||(o.add(s.label),i.push(s));while(a.nextSibling());return mG.set(e,i),i}else{let r=[],i=new Set;return e.cursor().iterate(o=>{var a;if(n(o)&&o.matchContext(dGe)&&((a=o.node.nextSibling)===null||a===void 0?void 0:a.name)==":"){let s=t.sliceString(o.from,o.to);i.has(s)||(i.add(s),r.push({label:s,type:"variable"}))}}),r}}const nce=t=>e=>{let{state:n,pos:r}=e,i=ao(n).resolveInner(r,-1),o=i.type.isError&&i.from==i.to-1&&n.doc.sliceString(i.from,i.to)=="-";if(i.name=="PropertyName"||(o||i.name=="TagName")&&/^(Block|Styles)$/.test(i.resolve(i.to).name))return{from:i.from,options:c$(),validFor:Ig};if(i.name=="ValueName")return{from:i.from,options:pG,validFor:Ig};if(i.name=="PseudoClassName")return{from:i.from,options:fG,validFor:Ig};if(t(i)||(e.explicit||o)&&hGe(i,n.doc))return{from:t(i)||o?i.from:r,options:tce(n.doc,fGe(i),t),validFor:uGe};if(i.name=="TagName"){for(let{parent:u}=i;u;u=u.parent)if(u.name=="Block")return{from:i.from,options:c$(),validFor:Ig};return{from:i.from,options:lGe,validFor:Ig}}if(i.name=="AtKeyword")return{from:i.from,options:cGe,validFor:Ig};if(!e.explicit)return null;let a=i.resolve(r),s=a.childBefore(r);return s&&s.name==":"&&a.name=="PseudoClassSelector"?{from:r,options:fG,validFor:Ig}:s&&s.name==":"&&a.name=="Declaration"||a.name=="ArgList"?{from:r,options:pG,validFor:Ig}:a.name=="Block"||a.name=="Styles"?{from:r,options:c$(),validFor:Ig}:null},rce=nce(t=>t.name=="VariableName"),rk=SO.define({name:"css",parser:aGe.configure({props:[mS.add({Declaration:b5()}),gS.add({"Block KeyframeList":Bae})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function ice(){return new TO(rk,rk.data.of({autocomplete:rce}))}const pGe=Object.freeze(Object.defineProperty({__proto__:null,css:ice,cssCompletionSource:rce,cssLanguage:rk,defineCSSCompletionSource:nce},Symbol.toStringTag,{value:"Module"})),mGe=55,gGe=1,yGe=56,vGe=2,xGe=57,_Ge=3,gG=4,bGe=5,NF=6,oce=7,sce=8,ace=9,lce=10,wGe=11,OGe=12,SGe=13,u$=58,CGe=14,TGe=15,yG=59,cce=21,kGe=23,uce=24,EGe=25,eN=27,hce=28,AGe=29,PGe=32,MGe=35,RGe=37,IGe=38,DGe=0,LGe=1,$Ge={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},zGe={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},vG={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function NGe(t){return t==45||t==46||t==58||t>=65&&t<=90||t==95||t>=97&&t<=122||t>=161}let xG=null,_G=null,bG=0;function tN(t,e){let n=t.pos+e;if(bG==n&&_G==t)return xG;let r=t.peek(e),i="";for(;NGe(r);)i+=String.fromCharCode(r),r=t.peek(++e);return _G=t,bG=n,xG=i?i.toLowerCase():r==BGe||r==FGe?void 0:null}const dce=60,iR=62,BF=47,BGe=63,FGe=33,jGe=45;function wG(t,e){this.name=t,this.parent=e}const VGe=[NF,lce,oce,sce,ace],QGe=new Xle({start:null,shift(t,e,n,r){return VGe.indexOf(e)>-1?new wG(tN(r,1)||"",t):t},reduce(t,e){return e==cce&&t?t.parent:t},reuse(t,e,n,r){let i=e.type.id;return i==NF||i==RGe?new wG(tN(r,1)||"",t):t},strict:!1}),UGe=new xh((t,e)=>{if(t.next!=dce){t.next<0&&e.context&&t.acceptToken(u$);return}t.advance();let n=t.next==BF;n&&t.advance();let r=tN(t,0);if(r===void 0)return;if(!r)return t.acceptToken(n?TGe:CGe);let i=e.context?e.context.name:null;if(n){if(r==i)return t.acceptToken(wGe);if(i&&zGe[i])return t.acceptToken(u$,-2);if(e.dialectEnabled(DGe))return t.acceptToken(OGe);for(let o=e.context;o;o=o.parent)if(o.name==r)return;t.acceptToken(SGe)}else{if(r=="script")return t.acceptToken(oce);if(r=="style")return t.acceptToken(sce);if(r=="textarea")return t.acceptToken(ace);if($Ge.hasOwnProperty(r))return t.acceptToken(lce);i&&vG[i]&&vG[i][r]?t.acceptToken(u$,-1):t.acceptToken(NF)}},{contextual:!0}),ZGe=new xh(t=>{for(let e=0,n=0;;n++){if(t.next<0){n&&t.acceptToken(yG);break}if(t.next==jGe)e++;else if(t.next==iR&&e>=2){n>=3&&t.acceptToken(yG,-2);break}else e=0;t.advance()}});function qGe(t){for(;t;t=t.parent)if(t.name=="svg"||t.name=="math")return!0;return!1}const WGe=new xh((t,e)=>{if(t.next==BF&&t.peek(1)==iR){let n=e.dialectEnabled(LGe)||qGe(e.context);t.acceptToken(n?bGe:gG,2)}else t.next==iR&&t.acceptToken(gG,1)});function FF(t,e,n){let r=2+t.length;return new xh(i=>{for(let o=0,a=0,s=0;;s++){if(i.next<0){s&&i.acceptToken(e);break}if(o==0&&i.next==dce||o==1&&i.next==BF||o>=2&&o<r&&i.next==t.charCodeAt(o-2))o++,a++;else if(o==r&&i.next==iR){s>a?i.acceptToken(e,-a):i.acceptToken(n,-(a-2));break}else if((i.next==10||i.next==13)&&s){i.acceptToken(e,1);break}else o=a=0;i.advance()}})}const HGe=FF("script",mGe,gGe),GGe=FF("style",yGe,vGe),XGe=FF("textarea",xGe,_Ge),YGe=pS({"Text RawText IncompleteTag IncompleteCloseTag":Be.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":Be.angleBracket,TagName:Be.tagName,"MismatchedCloseTag/TagName":[Be.tagName,Be.invalid],AttributeName:Be.attributeName,"AttributeValue UnquotedAttributeValue":Be.attributeValue,Is:Be.definitionOperator,"EntityReference CharacterReference":Be.character,Comment:Be.blockComment,ProcessingInst:Be.processingInstruction,DoctypeDecl:Be.documentMeta}),KGe=kO.deserialize({version:14,states:",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[",stateData:",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~",goto:"%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:" StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:68,context:QGe,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,22,31,34,37,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,30,33,36,38,"OpenTag"],["group",-10,14,15,18,19,20,21,40,41,42,43,"Entity",17,"Entity TextContent",-3,29,32,35,"TextContent Entity"],["isolate",-11,22,30,31,33,34,36,37,38,39,42,43,"ltr",-3,27,28,40,""]],propSources:[YGe],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[HGe,GGe,XGe,WGe,UGe,ZGe,0,1,2,3,4,5],topRules:{Document:[0,16]},dialects:{noMatch:0,selfClosing:515},tokenPrec:517});function fce(t,e){let n=Object.create(null);for(let r of t.getChildren(uce)){let i=r.getChild(EGe),o=r.getChild(eN)||r.getChild(hce);i&&(n[e.read(i.from,i.to)]=o?o.type.id==eN?e.read(o.from+1,o.to-1):e.read(o.from,o.to):"")}return n}function OG(t,e){let n=t.getChild(kGe);return n?e.read(n.from,n.to):" "}function h$(t,e,n){let r;for(let i of n)if(!i.attrs||i.attrs(r||(r=fce(t.node.parent.firstChild,e))))return{parser:i.parser,bracketed:!0};return null}function pce(t=[],e=[]){let n=[],r=[],i=[],o=[];for(let s of t)(s.tag=="script"?n:s.tag=="style"?r:s.tag=="textarea"?i:o).push(s);let a=e.length?Object.create(null):null;for(let s of e)(a[s.name]||(a[s.name]=[])).push(s);return Rae((s,u)=>{let d=s.type.id;if(d==AGe)return h$(s,u,n);if(d==PGe)return h$(s,u,r);if(d==MGe)return h$(s,u,i);if(d==cce&&o.length){let m=s.node,v=m.firstChild,_=v&&OG(v,u),O;if(_){for(let E of o)if(E.tag==_&&(!E.attrs||E.attrs(O||(O=fce(v,u))))){let A=m.lastChild,M=A.type.id==IGe?A.from:m.to;if(M>v.to)return{parser:E.parser,overlay:[{from:v.to,to:M}]}}}}if(a&&d==uce){let m=s.node,v;if(v=m.firstChild){let _=a[u.read(v.from,v.to)];if(_)for(let O of _){if(O.tagName&&O.tagName!=OG(m.parent,u))continue;let E=m.lastChild;if(E.type.id==eN){let A=E.from+1,M=E.lastChild,L=E.to-(M&&M.isError?0:1);if(L>A)return{parser:O.parser,overlay:[{from:A,to:L}],bracketed:!0}}else if(E.type.id==hce)return{parser:O.parser,overlay:[{from:E.from,to:E.to}]}}}}return null})}const JGe=316,eXe=317,SG=1,tXe=2,nXe=3,rXe=4,iXe=318,oXe=320,sXe=321,aXe=5,lXe=6,cXe=0,nN=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],mce=125,uXe=59,rN=47,hXe=42,dXe=43,fXe=45,pXe=60,mXe=44,gXe=63,yXe=46,vXe=91,xXe=new Xle({start:!1,shift(t,e){return e==aXe||e==lXe||e==oXe?t:e==sXe},strict:!1}),_Xe=new xh((t,e)=>{let{next:n}=t;(n==mce||n==-1||e.context)&&t.acceptToken(iXe)},{contextual:!0,fallback:!0}),bXe=new xh((t,e)=>{let{next:n}=t,r;nN.indexOf(n)>-1||n==rN&&((r=t.peek(1))==rN||r==hXe)||n!=mce&&n!=uXe&&n!=-1&&!e.context&&t.acceptToken(JGe)},{contextual:!0}),wXe=new xh((t,e)=>{t.next==vXe&&!e.context&&t.acceptToken(eXe)},{contextual:!0}),OXe=new xh((t,e)=>{let{next:n}=t;if(n==dXe||n==fXe){if(t.advance(),n==t.next){t.advance();let r=!e.context&&e.canShift(SG);t.acceptToken(r?SG:tXe)}}else n==gXe&&t.peek(1)==yXe&&(t.advance(),t.advance(),(t.next<48||t.next>57)&&t.acceptToken(nXe))},{contextual:!0});function d$(t,e){return t>=65&&t<=90||t>=97&&t<=122||t==95||t>=192||!e&&t>=48&&t<=57}const SXe=new xh((t,e)=>{if(t.next!=pXe||!e.dialectEnabled(cXe)||(t.advance(),t.next==rN))return;let n=0;for(;nN.indexOf(t.next)>-1;)t.advance(),n++;if(d$(t.next,!0)){for(t.advance(),n++;d$(t.next,!1);)t.advance(),n++;for(;nN.indexOf(t.next)>-1;)t.advance(),n++;if(t.next==mXe)return;for(let r=0;;r++){if(r==7){if(!d$(t.next,!0))return;break}if(t.next!="extends".charCodeAt(r))break;t.advance(),n++}}t.acceptToken(rXe,-n)}),CXe=pS({"get set async static":Be.modifier,"for while do if else switch try catch finally return throw break continue default case defer":Be.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":Be.operatorKeyword,"let var const using function class extends":Be.definitionKeyword,"import export from":Be.moduleKeyword,"with debugger new":Be.keyword,TemplateString:Be.special(Be.string),super:Be.atom,BooleanLiteral:Be.bool,this:Be.self,null:Be.null,Star:Be.modifier,VariableName:Be.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Be.function(Be.variableName),VariableDefinition:Be.definition(Be.variableName),Label:Be.labelName,PropertyName:Be.propertyName,PrivatePropertyName:Be.special(Be.propertyName),"CallExpression/MemberExpression/PropertyName":Be.function(Be.propertyName),"FunctionDeclaration/VariableDefinition":Be.function(Be.definition(Be.variableName)),"ClassDeclaration/VariableDefinition":Be.definition(Be.className),"NewExpression/VariableName":Be.className,PropertyDefinition:Be.definition(Be.propertyName),PrivatePropertyDefinition:Be.definition(Be.special(Be.propertyName)),UpdateOp:Be.updateOperator,"LineComment Hashbang":Be.lineComment,BlockComment:Be.blockComment,Number:Be.number,String:Be.string,Escape:Be.escape,ArithOp:Be.arithmeticOperator,LogicOp:Be.logicOperator,BitOp:Be.bitwiseOperator,CompareOp:Be.compareOperator,RegExp:Be.regexp,Equals:Be.definitionOperator,Arrow:Be.function(Be.punctuation),": Spread":Be.punctuation,"( )":Be.paren,"[ ]":Be.squareBracket,"{ }":Be.brace,"InterpolationStart InterpolationEnd":Be.special(Be.brace),".":Be.derefOperator,", ;":Be.separator,"@":Be.meta,TypeName:Be.typeName,TypeDefinition:Be.definition(Be.typeName),"type enum interface implements namespace module declare":Be.definitionKeyword,"abstract global Privacy readonly override":Be.modifier,"is keyof unique infer asserts":Be.operatorKeyword,JSXAttributeValue:Be.attributeValue,JSXText:Be.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Be.angleBracket,"JSXIdentifier JSXNameSpacedName":Be.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Be.attributeName,"JSXBuiltin/JSXIdentifier":Be.standard(Be.tagName)}),TXe={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},kXe={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},EXe={__proto__:null,"<":193},AXe=kO.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:xXe,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[CXe],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[bXe,wXe,OXe,SXe,2,3,4,5,6,7,8,9,10,11,12,13,14,_Xe,new rR("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new rR("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:t=>TXe[t]||-1},{term:343,get:t=>kXe[t]||-1},{term:95,get:t=>EXe[t]||-1}],tokenPrec:15201}),jF=[nu("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),nu("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),nu("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),nu("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),nu("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),nu(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),nu("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),nu(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),nu(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),nu('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),nu('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],gce=jF.concat([nu("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),nu("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),nu("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),CG=new Mae,yce=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function nC(t){return(e,n)=>{let r=e.node.getChild("VariableDefinition");return r&&n(r,t),!0}}const PXe=["FunctionDeclaration"],MXe={FunctionDeclaration:nC("function"),ClassDeclaration:nC("class"),ClassExpression:()=>!0,EnumDeclaration:nC("constant"),TypeAliasDeclaration:nC("type"),NamespaceDeclaration:nC("namespace"),VariableDefinition(t,e){t.matchContext(PXe)||e(t,"variable")},TypeDefinition(t,e){e(t,"type")},__proto__:null};function vce(t,e){let n=CG.get(e);if(n)return n;let r=[],i=!0;function o(a,s){let u=t.sliceString(a.from,a.to);r.push({label:u,type:s})}return e.cursor(Bi.IncludeAnonymous).iterate(a=>{if(i)i=!1;else if(a.name){let s=MXe[a.name];if(s&&s(a,o)||yce.has(a.name))return!1}else if(a.to-a.from>8192){for(let s of vce(t,a.node))r.push(s);return!1}}),CG.set(e,r),r}const oR=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,VF=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function xce(t){let e=ao(t.state).resolveInner(t.pos,-1);if(VF.indexOf(e.name)>-1)return null;let n=e.name=="VariableName"||e.to-e.from<20&&oR.test(t.state.sliceDoc(e.from,e.to));if(!n&&!t.explicit)return null;let r=[];for(let i=e;i;i=i.parent)yce.has(i.name)&&(r=r.concat(vce(t.state.doc,i)));return{options:r,from:n?e.from:t.pos,validFor:oR}}function f$(t,e,n){var r;let i=[];for(;;){let o=e.firstChild,a;if(o?.name=="VariableName")return i.push(t(o)),{path:i.reverse(),name:n};if(o?.name=="MemberExpression"&&((r=a=o.lastChild)===null||r===void 0?void 0:r.name)=="PropertyName")i.push(t(a)),e=o;else return null}}function _ce(t){let e=r=>t.state.doc.sliceString(r.from,r.to),n=ao(t.state).resolveInner(t.pos,-1);return n.name=="PropertyName"?f$(e,n.parent,e(n)):(n.name=="."||n.name=="?.")&&n.parent.name=="MemberExpression"?f$(e,n.parent,""):VF.indexOf(n.name)>-1?null:n.name=="VariableName"||n.to-n.from<20&&oR.test(e(n))?{path:[],name:e(n)}:n.name=="MemberExpression"?f$(e,n,""):t.explicit?{path:[],name:""}:null}function RXe(t,e){let n=[],r=new Set;for(let i=0;;i++){for(let a of(Object.getOwnPropertyNames||Object.keys)(t)){if(!/^[a-zA-Z_$\xaa-\uffdc][\w$\xaa-\uffdc]*$/.test(a)||r.has(a))continue;r.add(a);let s;try{s=t[a]}catch{continue}n.push({label:a,type:typeof s=="function"?/^[A-Z]/.test(a)?"class":e?"function":"method":e?"variable":"property",boost:-i})}let o=Object.getPrototypeOf(t);if(!o)return n;t=o}}function IXe(t){let e=new Map;return n=>{let r=_ce(n);if(!r)return null;let i=t;for(let a of r.path)if(i=i[a],!i)return null;let o=e.get(i);return o||e.set(i,o=RXe(i,!r.path.length)),{from:n.pos-r.name.length,options:o,validFor:oR}}}const fd=SO.define({name:"javascript",parser:AXe.configure({props:[mS.add({IfStatement:b5({except:/^\s*({|else\b)/}),TryStatement:b5({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:zZe,SwitchBody:t=>{let e=t.textAfter,n=/^\s*\}/.test(e),r=/^\s*(case|default)\b/.test(e);return t.baseIndent+(n?0:r?1:2)*t.unit},Block:$Ze({closing:"}"}),ArrowFunction:t=>t.baseIndent+t.unit,"TemplateString BlockComment":()=>null,"Statement Property":b5({except:/^\s*{/}),JSXElement(t){let e=/^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},JSXEscape(t){let e=/\s*\}/.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},"JSXOpenTag JSXSelfClosingTag"(t){return t.column(t.node.from)+t.unit}}),gS.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":Bae,BlockComment(t){return{from:t.from+2,to:t.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),bce={test:t=>/^JSX/.test(t.name),facet:cD({commentTokens:{block:{open:"{/*",close:"*/}"}}})},QF=fd.configure({dialect:"ts"},"typescript"),UF=fd.configure({dialect:"jsx",props:[_F.add(t=>t.isTop?[bce]:void 0)]}),ZF=fd.configure({dialect:"jsx ts",props:[_F.add(t=>t.isTop?[bce]:void 0)]},"typescript");let wce=t=>({label:t,type:"keyword"});const Oce="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(wce),DXe=Oce.concat(["declare","implements","private","protected","public"].map(wce));function Sce(t={}){let e=t.jsx?t.typescript?ZF:UF:t.typescript?QF:fd,n=t.typescript?gce.concat(DXe):jF.concat(Oce);return new TO(e,[fd.data.of({autocomplete:xqe(VF,ole(n))}),fd.data.of({autocomplete:xce}),t.jsx?Cce:[]])}function LXe(t){for(;;){if(t.name=="JSXOpenTag"||t.name=="JSXSelfClosingTag"||t.name=="JSXFragmentTag")return t;if(t.name=="JSXEscape"||!t.parent)return null;t=t.parent}}function TG(t,e,n=t.length){for(let r=e?.firstChild;r;r=r.nextSibling)if(r.name=="JSXIdentifier"||r.name=="JSXBuiltin"||r.name=="JSXNamespacedName"||r.name=="JSXMemberExpression")return t.sliceString(r.from,Math.min(r.to,n));return""}const $Xe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Cce=pn.inputHandler.of((t,e,n,r,i)=>{if(($Xe?t.composing:t.compositionStarted)||t.state.readOnly||e!=n||r!=">"&&r!="/"||!fd.isActiveAt(t.state,e,-1))return!1;let o=i(),{state:a}=o,s=a.changeByRange(u=>{var d;let{head:m}=u,v=ao(a).resolveInner(m-1,-1),_;if(v.name=="JSXStartTag"&&(v=v.parent),!(a.doc.sliceString(m-1,m)!=r||v.name=="JSXAttributeValue"&&v.to>m)){if(r==">"&&v.name=="JSXFragmentTag")return{range:u,changes:{from:m,insert:"</>"}};if(r=="/"&&v.name=="JSXStartCloseTag"){let O=v.parent,E=O.parent;if(E&&O.from==m-2&&((_=TG(a.doc,E.firstChild,m))||((d=E.firstChild)===null||d===void 0?void 0:d.name)=="JSXFragmentTag")){let A=`${_}>`;return{range:Qt.cursor(m+A.length,-1),changes:{from:m,insert:A}}}}else if(r==">"){let O=LXe(v);if(O&&O.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(a.doc.sliceString(m,m+2))&&(_=TG(a.doc,O,m)))return{range:u,changes:{from:m,insert:`</${_}>`}}}}return{range:u}});return s.changes.empty?!1:(t.dispatch([o,a.update(s,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});function zXe(t,e){return e||(e={parserOptions:{ecmaVersion:2019,sourceType:"module"},env:{browser:!0,node:!0,es6:!0,es2015:!0,es2017:!0,es2020:!0},rules:{}},t.getRules().forEach((n,r)=>{var i;!((i=n.meta.docs)===null||i===void 0)&&i.recommended&&(e.rules[r]=2)})),n=>{let{state:r}=n,i=[];for(let{from:o,to:a}of fd.findRegions(r)){let s=r.doc.lineAt(o),u={line:s.number-1,col:o-s.from,pos:o};for(let d of t.verify(r.sliceDoc(o,a),e))i.push(NXe(d,r.doc,u))}return i}}function kG(t,e,n,r){return n.line(t+r.line).from+e+(t==1?r.col-1:-1)}function NXe(t,e,n){let r=kG(t.line,t.column,e,n),i={from:r,to:t.endLine!=null&&t.endColumn!=1?kG(t.endLine,t.endColumn,e,n):r,message:t.message,source:t.ruleId?"eslint:"+t.ruleId:"eslint",severity:t.severity==1?"warning":"error"};if(t.fix){let{range:o,text:a}=t.fix,s=o[0]+n.pos-r,u=o[1]+n.pos-r;i.actions=[{name:"fix",apply(d,m){d.dispatch({changes:{from:m+s,to:m+u,insert:a},scrollIntoView:!0})}}]}return i}const CP=Object.freeze(Object.defineProperty({__proto__:null,autoCloseTags:Cce,completionPath:_ce,esLint:zXe,javascript:Sce,javascriptLanguage:fd,jsxLanguage:UF,localCompletionSource:xce,scopeCompletionSource:IXe,snippets:jF,tsxLanguage:ZF,typescriptLanguage:QF,typescriptSnippets:gce},Symbol.toStringTag,{value:"Module"})),rC=["_blank","_self","_top","_parent"],p$=["ascii","utf-8","utf-16","latin1","latin1"],m$=["get","post","put","delete"],g$=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Wu=["true","false"],Jn={},BXe={a:{attrs:{href:null,ping:null,type:null,media:null,target:rC,hreflang:null}},abbr:Jn,address:Jn,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:Jn,aside:Jn,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:Jn,base:{attrs:{href:null,target:rC}},bdi:Jn,bdo:Jn,blockquote:{attrs:{cite:null}},body:Jn,br:Jn,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:g$,formmethod:m$,formnovalidate:["novalidate"],formtarget:rC,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:Jn,center:Jn,cite:Jn,code:Jn,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:Jn,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:Jn,div:Jn,dl:Jn,dt:Jn,em:Jn,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:Jn,figure:Jn,footer:Jn,form:{attrs:{action:null,name:null,"accept-charset":p$,autocomplete:["on","off"],enctype:g$,method:m$,novalidate:["novalidate"],target:rC}},h1:Jn,h2:Jn,h3:Jn,h4:Jn,h5:Jn,h6:Jn,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:Jn,hgroup:Jn,hr:Jn,html:{attrs:{manifest:null}},i:Jn,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:g$,formmethod:m$,formnovalidate:["novalidate"],formtarget:rC,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:Jn,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:Jn,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:Jn,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:p$,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:Jn,noscript:Jn,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:Jn,param:{attrs:{name:null,value:null}},pre:Jn,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:Jn,rt:Jn,ruby:Jn,samp:Jn,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:p$}},section:Jn,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:Jn,source:{attrs:{src:null,type:null,media:null}},span:Jn,strong:Jn,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:Jn,summary:Jn,sup:Jn,table:Jn,tbody:Jn,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:Jn,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:Jn,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:Jn,time:{attrs:{datetime:null}},title:Jn,tr:Jn,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:Jn,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:Jn},Tce={accesskey:null,class:null,contenteditable:Wu,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Wu,autocorrect:Wu,autocapitalize:Wu,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Wu,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Wu,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Wu,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Wu,"aria-hidden":Wu,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Wu,"aria-multiselectable":Wu,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Wu,"aria-relevant":null,"aria-required":Wu,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},kce="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(t=>"on"+t);for(let t of kce)Tce[t]=null;class ik{constructor(e,n){this.tags={...BXe,...e},this.globalAttrs={...Tce,...n},this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}ik.default=new ik;function EO(t,e,n=t.length){if(!e)return"";let r=e.firstChild,i=r&&r.getChild("TagName");return i?t.sliceString(i.from,Math.min(i.to,n)):""}function AO(t,e=!1){for(;t;t=t.parent)if(t.name=="Element")if(e)e=!1;else return t;return null}function Ece(t,e,n){let r=n.tags[EO(t,AO(e))];return r?.children||n.allTags}function qF(t,e){let n=[];for(let r=AO(e);r&&!r.type.isTop;r=AO(r.parent)){let i=EO(t,r);if(i&&r.lastChild.name=="CloseTag")break;i&&n.indexOf(i)<0&&(e.name=="EndTag"||e.from>=r.firstChild.to)&&n.push(i)}return n}const Ace=/^[:\-\.\w\u00b7-\uffff]*$/;function EG(t,e,n,r,i){let o=/\s*>/.test(t.sliceDoc(i,i+5))?"":">",a=AO(n,n.name=="StartTag"||n.name=="TagName");return{from:r,to:i,options:Ece(t.doc,a,e).map(s=>({label:s,type:"type"})).concat(qF(t.doc,n).map((s,u)=>({label:"/"+s,apply:"/"+s+o,type:"type",boost:99-u}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function AG(t,e,n,r){let i=/\s*>/.test(t.sliceDoc(r,r+5))?"":">";return{from:n,to:r,options:qF(t.doc,e).map((o,a)=>({label:o,apply:o+i,type:"type",boost:99-a})),validFor:Ace}}function FXe(t,e,n,r){let i=[],o=0;for(let a of Ece(t.doc,n,e))i.push({label:"<"+a,type:"type"});for(let a of qF(t.doc,n))i.push({label:"</"+a+">",type:"type",boost:99-o++});return{from:r,to:r,options:i,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function jXe(t,e,n,r,i){let o=AO(n),a=o?e.tags[EO(t.doc,o)]:null,s=a&&a.attrs?Object.keys(a.attrs):[],u=a&&a.globalAttrs===!1?s:s.length?s.concat(e.globalAttrNames):e.globalAttrNames;return{from:r,to:i,options:u.map(d=>({label:d,type:"property"})),validFor:Ace}}function VXe(t,e,n,r,i){var o;let a=(o=n.parent)===null||o===void 0?void 0:o.getChild("AttributeName"),s=[],u;if(a){let d=t.sliceDoc(a.from,a.to),m=e.globalAttrs[d];if(!m){let v=AO(n),_=v?e.tags[EO(t.doc,v)]:null;m=_?.attrs&&_.attrs[d]}if(m){let v=t.sliceDoc(r,i).toLowerCase(),_='"',O='"';/^['"]/.test(v)?(u=v[0]=='"'?/^[^"]*$/:/^[^']*$/,_="",O=t.sliceDoc(i,i+1)==v[0]?"":v[0],v=v.slice(1),r++):u=/^[^\s<>='"]*$/;for(let E of m)s.push({label:E,apply:_+E+O,type:"constant"})}}return{from:r,to:i,options:s,validFor:u}}function Pce(t,e){let{state:n,pos:r}=e,i=ao(n).resolveInner(r,-1),o=i.resolve(r);for(let a=r,s;o==i&&(s=i.childBefore(a));){let u=s.lastChild;if(!u||!u.type.isError||u.from<u.to)break;o=i=s,a=u.from}return i.name=="TagName"?i.parent&&/CloseTag$/.test(i.parent.name)?AG(n,i,i.from,r):EG(n,t,i,i.from,r):i.name=="StartTag"||i.name=="IncompleteTag"?EG(n,t,i,r,r):i.name=="StartCloseTag"||i.name=="IncompleteCloseTag"?AG(n,i,r,r):i.name=="OpenTag"||i.name=="SelfClosingTag"||i.name=="AttributeName"?jXe(n,t,i,i.name=="AttributeName"?i.from:r,r):i.name=="Is"||i.name=="AttributeValue"||i.name=="UnquotedAttributeValue"?VXe(n,t,i,i.name=="Is"?r:i.from,r):e.explicit&&(o.name=="Element"||o.name=="Text"||o.name=="Document")?FXe(n,t,i,r):null}function Mce(t){return Pce(ik.default,t)}function Rce(t){let{extraTags:e,extraGlobalAttributes:n}=t,r=n||e?new ik(e,n):ik.default;return i=>Pce(r,i)}const QXe=fd.parser.configure({top:"SingleExpression"}),Ice=[{tag:"script",attrs:t=>t.type=="text/typescript"||t.lang=="ts",parser:QF.parser},{tag:"script",attrs:t=>t.type=="text/babel"||t.type=="text/jsx",parser:UF.parser},{tag:"script",attrs:t=>t.type=="text/typescript-jsx",parser:ZF.parser},{tag:"script",attrs(t){return/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(t.type)},parser:QXe},{tag:"script",attrs(t){return!t.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(t.type)},parser:fd.parser},{tag:"style",attrs(t){return(!t.lang||t.lang=="css")&&(!t.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(t.type))},parser:rk.parser}],Dce=[{name:"style",parser:rk.parser.configure({top:"Styles"})}].concat(kce.map(t=>({name:t,parser:fd.parser}))),Lce=SO.define({name:"html",parser:KGe.configure({props:[mS.add({Element(t){let e=/^(\s*)(<\/)?/.exec(t.textAfter);return t.node.to<=t.pos+e[0].length?t.continue():t.lineIndent(t.node.from)+(e[2]?0:t.unit)},"OpenTag CloseTag SelfClosingTag"(t){return t.column(t.node.from)+t.unit},Document(t){if(t.pos+/\s*/.exec(t.textAfter)[0].length<t.node.to)return t.continue();let e=null,n;for(let r=t.node;;){let i=r.lastChild;if(!i||i.name!="Element"||i.to!=r.to)break;e=r=i}return e&&!((n=e.lastChild)&&(n.name=="CloseTag"||n.name=="SelfClosingTag"))?t.lineIndent(e.from)+t.unit:null}}),gS.add({Element(t){let e=t.firstChild,n=t.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:n.name=="CloseTag"?n.from:t.to}}}),Kae.add({"OpenTag CloseTag":t=>t.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-_"}}),XC=Lce.configure({wrap:pce(Ice,Dce)});function $ce(t={}){let e="",n;t.matchClosingTags===!1&&(e="noMatch"),t.selfClosingTags===!0&&(e=(e?e+" ":"")+"selfClosing"),(t.nestedLanguages&&t.nestedLanguages.length||t.nestedAttributes&&t.nestedAttributes.length)&&(n=pce((t.nestedLanguages||[]).concat(Ice),(t.nestedAttributes||[]).concat(Dce)));let r=n?Lce.configure({wrap:n,dialect:e}):e?XC.configure({dialect:e}):XC;return new TO(r,[XC.data.of({autocomplete:Rce(t)}),t.autoCloseTags!==!1?zce:[],Sce().support,ice().support])}const PG=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),zce=pn.inputHandler.of((t,e,n,r,i)=>{if(t.composing||t.state.readOnly||e!=n||r!=">"&&r!="/"||!XC.isActiveAt(t.state,e,-1))return!1;let o=i(),{state:a}=o,s=a.changeByRange(u=>{var d,m,v;let _=a.doc.sliceString(u.from-1,u.to)==r,{head:O}=u,E=ao(a).resolveInner(O,-1),A;if(_&&r==">"&&E.name=="EndTag"){let M=E.parent;if(((m=(d=M.parent)===null||d===void 0?void 0:d.lastChild)===null||m===void 0?void 0:m.name)!="CloseTag"&&(A=EO(a.doc,M.parent,O))&&!PG.has(A)){let L=O+(a.doc.sliceString(O,O+1)===">"?1:0),$=`</${A}>`;return{range:u,changes:{from:O,to:L,insert:$}}}}else if(_&&r=="/"&&E.name=="IncompleteCloseTag"){let M=E.parent;if(E.from==O-2&&((v=M.lastChild)===null||v===void 0?void 0:v.name)!="CloseTag"&&(A=EO(a.doc,M,O))&&!PG.has(A)){let L=O+(a.doc.sliceString(O,O+1)===">"?1:0),$=`${A}>`;return{range:Qt.cursor(O+$.length,-1),changes:{from:O,to:L,insert:$}}}}return{range:u}});return s.changes.empty?!1:(t.dispatch([o,a.update(s,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),UXe=Object.freeze(Object.defineProperty({__proto__:null,autoCloseTags:zce,html:$ce,htmlCompletionSource:Mce,htmlCompletionSourceWith:Rce,htmlLanguage:XC},Symbol.toStringTag,{value:"Module"}));function ZXe(t,e,n,r){const i=$s(Uo),o=Ki(B8),a=le.useRef(null),{lexicalNode:s}=l6(),u=le.useRef(!1),d=le.useRef(!1),m=le.useCallback(()=>{o({editorType:e,rootNode:s,editorRef:a.current})},[e,s,o]),v=le.useCallback(_=>{var O,E,A,M,L,$;if(_.key==="ArrowDown"){const N=(E=(O=a.current)==null?void 0:O.getCodemirror())==null?void 0:E.state;if(N){const F=N.doc.length,Q=N.selection.ranges[0].to;F===Q&&(u.current?(i?.update(()=>{var W,H;const te=Fi(t);te.getNextSibling()?((H=(W=a.current)==null?void 0:W.getCodemirror())==null||H.contentDOM.blur(),te.selectNext()):te.insertAfter(Oi())}),u.current=!1):u.current=!0)}}else if(_.key==="ArrowUp"){const N=(M=(A=a.current)==null?void 0:A.getCodemirror())==null?void 0:M.state;N&&N.selection.ranges[0].from===0&&(d.current?(i?.update(()=>{var Q,W;const H=Fi(t);H.getPreviousSibling()&&((W=(Q=a.current)==null?void 0:Q.getCodemirror())==null||W.contentDOM.blur(),H.selectPrevious())}),d.current=!1):d.current=!0)}else if(_.key==="Enter")_.stopPropagation();else if(_.key==="Backspace"||_.key==="Delete"){const N=($=(L=a.current)==null?void 0:L.getCodemirror())==null?void 0:$.state;N?.doc.length===0&&i?.update(()=>{Fi(t).remove()})}},[i,t]);return le.useEffect(()=>{const _=a.current;return setTimeout(()=>{var O,E;(O=_?.getCodemirror())==null||O.contentDOM.addEventListener("focus",m),(E=_?.getCodemirror())==null||E.contentDOM.addEventListener("keydown",v)},300),()=>{var O,E;(O=_?.getCodemirror())==null||O.contentDOM.removeEventListener("focus",m),(E=_?.getCodemirror())==null||E.contentDOM.removeEventListener("keydown",v)}},[a,m,v,n]),le.useEffect(()=>{r.subscribe(()=>{var _,O;(O=(_=a.current)==null?void 0:_.getCodemirror())==null||O.focus(),m()})},[r,a,t,m]),a}function en(t){return new TO(OF.define(t))}function T0(t){return Dt(()=>import("./index-0jWi-CcP.js"),[]).then(e=>e.sql({dialect:e[t]}))}const qXe=[Pt.of({name:"C",extensions:["c","h","ino"],load(){return Dt(()=>import("./index-CFcdtG0E.js"),[]).then(t=>t.cpp())}}),Pt.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load(){return Dt(()=>import("./index-CFcdtG0E.js"),[]).then(t=>t.cpp())}}),Pt.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load(){return T0("Cassandra")}}),Pt.of({name:"CSS",extensions:["css"],load(){return Dt(()=>Promise.resolve().then(()=>pGe),void 0).then(t=>t.css())}}),Pt.of({name:"Go",extensions:["go"],load(){return Dt(()=>import("./index-0in3v2D2.js"),[]).then(t=>t.go())}}),Pt.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load(){return Dt(()=>Promise.resolve().then(()=>UXe),void 0).then(t=>t.html())}}),Pt.of({name:"Java",extensions:["java"],load(){return Dt(()=>import("./index-Bk7jHal9.js"),[]).then(t=>t.java())}}),Pt.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load(){return Dt(()=>Promise.resolve().then(()=>CP),void 0).then(t=>t.javascript())}}),Pt.of({name:"Jinja",extensions:["j2","jinja","jinja2"],load(){return Dt(()=>import("./index-DWmQli1j.js"),[]).then(t=>t.jinja())}}),Pt.of({name:"JSON",alias:["json5"],extensions:["json","map"],load(){return Dt(()=>import("./index-WOca_lbJ.js"),[]).then(t=>t.json())}}),Pt.of({name:"JSX",extensions:["jsx"],load(){return Dt(()=>Promise.resolve().then(()=>CP),void 0).then(t=>t.javascript({jsx:!0}))}}),Pt.of({name:"LESS",extensions:["less"],load(){return Dt(()=>import("./index-CBsmjdDQ.js"),[]).then(t=>t.less())}}),Pt.of({name:"Liquid",extensions:["liquid"],load(){return Dt(()=>import("./index-X_q6SMNZ.js"),[]).then(t=>t.liquid())}}),Pt.of({name:"MariaDB SQL",load(){return T0("MariaSQL")}}),Pt.of({name:"Markdown",extensions:["md","markdown","mkd"],load(){return Dt(()=>Promise.resolve().then(()=>Het),void 0).then(t=>t.markdown())}}),Pt.of({name:"MS SQL",load(){return T0("MSSQL")}}),Pt.of({name:"MySQL",load(){return T0("MySQL")}}),Pt.of({name:"PHP",extensions:["php","php3","php4","php5","php7","phtml"],load(){return Dt(()=>import("./index-3rEPM3zu.js"),[]).then(t=>t.php())}}),Pt.of({name:"PLSQL",extensions:["pls"],load(){return T0("PLSQL")}}),Pt.of({name:"PostgreSQL",load(){return T0("PostgreSQL")}}),Pt.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load(){return Dt(()=>import("./index-CM-bpsDm.js"),[]).then(t=>t.python())}}),Pt.of({name:"Rust",extensions:["rs"],load(){return Dt(()=>import("./index-C7l9Qyit.js"),[]).then(t=>t.rust())}}),Pt.of({name:"Sass",extensions:["sass"],load(){return Dt(()=>import("./index-BbbJOFfK.js"),[]).then(t=>t.sass({indented:!0}))}}),Pt.of({name:"SCSS",extensions:["scss"],load(){return Dt(()=>import("./index-BbbJOFfK.js"),[]).then(t=>t.sass())}}),Pt.of({name:"SQL",extensions:["sql"],load(){return T0("StandardSQL")}}),Pt.of({name:"SQLite",load(){return T0("SQLite")}}),Pt.of({name:"TSX",extensions:["tsx"],load(){return Dt(()=>Promise.resolve().then(()=>CP),void 0).then(t=>t.javascript({jsx:!0,typescript:!0}))}}),Pt.of({name:"TypeScript",alias:["ts"],extensions:["ts","mts","cts"],load(){return Dt(()=>Promise.resolve().then(()=>CP),void 0).then(t=>t.javascript({typescript:!0}))}}),Pt.of({name:"WebAssembly",extensions:["wat","wast"],load(){return Dt(()=>import("./index-B227-JSK.js"),[]).then(t=>t.wast())}}),Pt.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load(){return Dt(()=>import("./index-PqpHPyYd.js"),[]).then(t=>t.xml())}}),Pt.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load(){return Dt(()=>import("./index-Q3jDVsDL.js"),[]).then(t=>t.yaml())}}),Pt.of({name:"APL",extensions:["dyalog","apl"],load(){return Dt(()=>import("./apl-B4CMkyY2.js"),[]).then(t=>en(t.apl))}}),Pt.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load(){return Dt(()=>import("./asciiarmor-Df11BRmG.js"),[]).then(t=>en(t.asciiArmor))}}),Pt.of({name:"ASN.1",extensions:["asn","asn1"],load(){return Dt(()=>import("./asn1-EdZsLKOL.js"),[]).then(t=>en(t.asn1({})))}}),Pt.of({name:"Asterisk",filename:/^extensions\.conf$/i,load(){return Dt(()=>import("./asterisk-B-8jnY81.js"),[]).then(t=>en(t.asterisk))}}),Pt.of({name:"Brainfuck",extensions:["b","bf"],load(){return Dt(()=>import("./brainfuck-C4LP7Hcl.js"),[]).then(t=>en(t.brainfuck))}}),Pt.of({name:"Cobol",extensions:["cob","cpy"],load(){return Dt(()=>import("./cobol-CWcv1MsR.js"),[]).then(t=>en(t.cobol))}}),Pt.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load(){return Dt(()=>import("./clike-B9uivgTg.js"),[]).then(t=>en(t.csharp))}}),Pt.of({name:"Clojure",extensions:["clj","cljc","cljx"],load(){return Dt(()=>import("./clojure-BMjYHr_A.js"),[]).then(t=>en(t.clojure))}}),Pt.of({name:"ClojureScript",extensions:["cljs"],load(){return Dt(()=>import("./clojure-BMjYHr_A.js"),[]).then(t=>en(t.clojure))}}),Pt.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load(){return Dt(()=>import("./css-BnMrqG3P.js"),[]).then(t=>en(t.gss))}}),Pt.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load(){return Dt(()=>import("./cmake-BQqOBYOt.js"),[]).then(t=>en(t.cmake))}}),Pt.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load(){return Dt(()=>import("./coffeescript-S37ZYGWr.js"),[]).then(t=>en(t.coffeeScript))}}),Pt.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load(){return Dt(()=>import("./commonlisp-DBKNyK5s.js"),[]).then(t=>en(t.commonLisp))}}),Pt.of({name:"Cypher",extensions:["cyp","cypher"],load(){return Dt(()=>import("./cypher-C_CwsFkJ.js"),[]).then(t=>en(t.cypher))}}),Pt.of({name:"Cython",extensions:["pyx","pxd","pxi"],load(){return Dt(()=>import("./python-BuPzkPfP.js"),[]).then(t=>en(t.cython))}}),Pt.of({name:"Crystal",extensions:["cr"],load(){return Dt(()=>import("./crystal-SjHAIU92.js"),[]).then(t=>en(t.crystal))}}),Pt.of({name:"D",extensions:["d"],load(){return Dt(()=>import("./d-pRatUO7H.js"),[]).then(t=>en(t.d))}}),Pt.of({name:"Dart",extensions:["dart"],load(){return Dt(()=>import("./clike-B9uivgTg.js"),[]).then(t=>en(t.dart))}}),Pt.of({name:"diff",extensions:["diff","patch"],load(){return Dt(()=>import("./diff-DbItnlRl.js"),[]).then(t=>en(t.diff))}}),Pt.of({name:"Dockerfile",filename:/^Dockerfile$/,load(){return Dt(()=>import("./dockerfile-BKs6k2Af.js"),__vite__mapDeps([0,1])).then(t=>en(t.dockerFile))}}),Pt.of({name:"DTD",extensions:["dtd"],load(){return Dt(()=>import("./dtd-DF_7sFjM.js"),[]).then(t=>en(t.dtd))}}),Pt.of({name:"Dylan",extensions:["dylan","dyl","intr"],load(){return Dt(()=>import("./dylan-DwRh75JA.js"),[]).then(t=>en(t.dylan))}}),Pt.of({name:"EBNF",load(){return Dt(()=>import("./ebnf-CDyGwa7X.js"),[]).then(t=>en(t.ebnf))}}),Pt.of({name:"ECL",extensions:["ecl"],load(){return Dt(()=>import("./ecl-Cabwm37j.js"),[]).then(t=>en(t.ecl))}}),Pt.of({name:"edn",extensions:["edn"],load(){return Dt(()=>import("./clojure-BMjYHr_A.js"),[]).then(t=>en(t.clojure))}}),Pt.of({name:"Eiffel",extensions:["e"],load(){return Dt(()=>import("./eiffel-CnydiIhH.js"),[]).then(t=>en(t.eiffel))}}),Pt.of({name:"Elm",extensions:["elm"],load(){return Dt(()=>import("./elm-vLlmbW-K.js"),[]).then(t=>en(t.elm))}}),Pt.of({name:"Erlang",extensions:["erl"],load(){return Dt(()=>import("./erlang-BNw1qcRV.js"),[]).then(t=>en(t.erlang))}}),Pt.of({name:"Esper",load(){return Dt(()=>import("./sql-D0XecflT.js"),[]).then(t=>en(t.esper))}}),Pt.of({name:"Factor",extensions:["factor"],load(){return Dt(()=>import("./factor-kuTfRLto.js"),__vite__mapDeps([2,1])).then(t=>en(t.factor))}}),Pt.of({name:"FCL",load(){return Dt(()=>import("./fcl-Kvtd6kyn.js"),[]).then(t=>en(t.fcl))}}),Pt.of({name:"Forth",extensions:["forth","fth","4th"],load(){return Dt(()=>import("./forth-Ffai-XNe.js"),[]).then(t=>en(t.forth))}}),Pt.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load(){return Dt(()=>import("./fortran-DYz_wnZ1.js"),[]).then(t=>en(t.fortran))}}),Pt.of({name:"F#",alias:["fsharp"],extensions:["fs"],load(){return Dt(()=>import("./mllike-CXdrOF99.js"),[]).then(t=>en(t.fSharp))}}),Pt.of({name:"Gas",extensions:["s"],load(){return Dt(()=>import("./gas-Bneqetm1.js"),[]).then(t=>en(t.gas))}}),Pt.of({name:"Gherkin",extensions:["feature"],load(){return Dt(()=>import("./gherkin-heZmZLOM.js"),[]).then(t=>en(t.gherkin))}}),Pt.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load(){return Dt(()=>import("./groovy-D9Dt4D0W.js"),[]).then(t=>en(t.groovy))}}),Pt.of({name:"Haskell",extensions:["hs"],load(){return Dt(()=>import("./haskell-Cw1EW3IL.js"),[]).then(t=>en(t.haskell))}}),Pt.of({name:"Haxe",extensions:["hx"],load(){return Dt(()=>import("./haxe-H-WmDvRZ.js"),[]).then(t=>en(t.haxe))}}),Pt.of({name:"HXML",extensions:["hxml"],load(){return Dt(()=>import("./haxe-H-WmDvRZ.js"),[]).then(t=>en(t.hxml))}}),Pt.of({name:"HTTP",load(){return Dt(()=>import("./http-DBlCnlav.js"),[]).then(t=>en(t.http))}}),Pt.of({name:"IDL",extensions:["pro"],load(){return Dt(()=>import("./idl-BEugSyMb.js"),[]).then(t=>en(t.idl))}}),Pt.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load(){return Dt(()=>import("./javascript-iXu5QeM3.js"),[]).then(t=>en(t.jsonld))}}),Pt.of({name:"Julia",extensions:["jl"],load(){return Dt(()=>import("./julia-DuME0IfC.js"),[]).then(t=>en(t.julia))}}),Pt.of({name:"Kotlin",extensions:["kt","kts"],load(){return Dt(()=>import("./clike-B9uivgTg.js"),[]).then(t=>en(t.kotlin))}}),Pt.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load(){return Dt(()=>import("./livescript-BwQOo05w.js"),[]).then(t=>en(t.liveScript))}}),Pt.of({name:"Lua",extensions:["lua"],load(){return Dt(()=>import("./lua-BgMRiT3U.js"),[]).then(t=>en(t.lua))}}),Pt.of({name:"mIRC",extensions:["mrc"],load(){return Dt(()=>import("./mirc-CjQqDB4T.js"),[]).then(t=>en(t.mirc))}}),Pt.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load(){return Dt(()=>import("./mathematica-DTrFuWx2.js"),[]).then(t=>en(t.mathematica))}}),Pt.of({name:"Modelica",extensions:["mo"],load(){return Dt(()=>import("./modelica-Dc1JOy9r.js"),[]).then(t=>en(t.modelica))}}),Pt.of({name:"MUMPS",extensions:["mps"],load(){return Dt(()=>import("./mumps-BT43cFF4.js"),[]).then(t=>en(t.mumps))}}),Pt.of({name:"Mbox",extensions:["mbox"],load(){return Dt(()=>import("./mbox-CNhZ1qSd.js"),[]).then(t=>en(t.mbox))}}),Pt.of({name:"Nginx",filename:/nginx.*\.conf$/i,load(){return Dt(()=>import("./nginx-DdIZxoE0.js"),[]).then(t=>en(t.nginx))}}),Pt.of({name:"NSIS",extensions:["nsh","nsi"],load(){return Dt(()=>import("./nsis-LdVXkNf5.js"),__vite__mapDeps([3,1])).then(t=>en(t.nsis))}}),Pt.of({name:"NTriples",extensions:["nt","nq"],load(){return Dt(()=>import("./ntriples-BfvgReVJ.js"),[]).then(t=>en(t.ntriples))}}),Pt.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load(){return Dt(()=>import("./clike-B9uivgTg.js"),[]).then(t=>en(t.objectiveC))}}),Pt.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load(){return Dt(()=>import("./clike-B9uivgTg.js"),[]).then(t=>en(t.objectiveCpp))}}),Pt.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load(){return Dt(()=>import("./mllike-CXdrOF99.js"),[]).then(t=>en(t.oCaml))}}),Pt.of({name:"Octave",extensions:["m"],load(){return Dt(()=>import("./octave-Ck1zUtKM.js"),[]).then(t=>en(t.octave))}}),Pt.of({name:"Oz",extensions:["oz"],load(){return Dt(()=>import("./oz-BzwKVEFT.js"),[]).then(t=>en(t.oz))}}),Pt.of({name:"Pascal",extensions:["p","pas"],load(){return Dt(()=>import("./pascal--L3eBynH.js"),[]).then(t=>en(t.pascal))}}),Pt.of({name:"Perl",extensions:["pl","pm"],load(){return Dt(()=>import("./perl-CdXCOZ3F.js"),[]).then(t=>en(t.perl))}}),Pt.of({name:"Pig",extensions:["pig"],load(){return Dt(()=>import("./pig-CevX1Tat.js"),[]).then(t=>en(t.pig))}}),Pt.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load(){return Dt(()=>import("./powershell-CFHJl5sT.js"),[]).then(t=>en(t.powerShell))}}),Pt.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load(){return Dt(()=>import("./properties-C78fOPTZ.js"),[]).then(t=>en(t.properties))}}),Pt.of({name:"ProtoBuf",extensions:["proto"],load(){return Dt(()=>import("./protobuf-ChK-085T.js"),[]).then(t=>en(t.protobuf))}}),Pt.of({name:"Pug",alias:["jade"],extensions:["pug","jade"],load(){return Dt(()=>import("./pug-DeIclll2.js"),__vite__mapDeps([4,5])).then(t=>en(t.pug))}}),Pt.of({name:"Puppet",extensions:["pp"],load(){return Dt(()=>import("./puppet-DMA9R1ak.js"),[]).then(t=>en(t.puppet))}}),Pt.of({name:"Q",extensions:["q"],load(){return Dt(()=>import("./q-pXgVlZs6.js"),[]).then(t=>en(t.q))}}),Pt.of({name:"R",alias:["rscript"],extensions:["r","R"],load(){return Dt(()=>import("./r-B6wPVr8A.js"),[]).then(t=>en(t.r))}}),Pt.of({name:"RPM Changes",load(){return Dt(()=>import("./rpm-CTu-6PCP.js"),[]).then(t=>en(t.rpmChanges))}}),Pt.of({name:"RPM Spec",extensions:["spec"],load(){return Dt(()=>import("./rpm-CTu-6PCP.js"),[]).then(t=>en(t.rpmSpec))}}),Pt.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],filename:/^(Gemfile|Rakefile)$/,load(){return Dt(()=>import("./ruby-B2Rjki9n.js"),[]).then(t=>en(t.ruby))}}),Pt.of({name:"SAS",extensions:["sas"],load(){return Dt(()=>import("./sas-B4kiWyti.js"),[]).then(t=>en(t.sas))}}),Pt.of({name:"Scala",extensions:["scala"],load(){return Dt(()=>import("./clike-B9uivgTg.js"),[]).then(t=>en(t.scala))}}),Pt.of({name:"Scheme",extensions:["scm","ss"],load(){return Dt(()=>import("./scheme-C41bIUwD.js"),[]).then(t=>en(t.scheme))}}),Pt.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load(){return Dt(()=>import("./shell-CjFT_Tl9.js"),[]).then(t=>en(t.shell))}}),Pt.of({name:"Sieve",extensions:["siv","sieve"],load(){return Dt(()=>import("./sieve-C3Gn_uJK.js"),[]).then(t=>en(t.sieve))}}),Pt.of({name:"Smalltalk",extensions:["st"],load(){return Dt(()=>import("./smalltalk-CnHTOXQT.js"),[]).then(t=>en(t.smalltalk))}}),Pt.of({name:"Solr",load(){return Dt(()=>import("./solr-DehyRSwq.js"),[]).then(t=>en(t.solr))}}),Pt.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load(){return Dt(()=>import("./mllike-CXdrOF99.js"),[]).then(t=>en(t.sml))}}),Pt.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load(){return Dt(()=>import("./sparql-DkYu6x3z.js"),[]).then(t=>en(t.sparql))}}),Pt.of({name:"Spreadsheet",alias:["excel","formula"],load(){return Dt(()=>import("./spreadsheet-BCZA_wO0.js"),[]).then(t=>en(t.spreadsheet))}}),Pt.of({name:"Squirrel",extensions:["nut"],load(){return Dt(()=>import("./clike-B9uivgTg.js"),[]).then(t=>en(t.squirrel))}}),Pt.of({name:"Stylus",extensions:["styl"],load(){return Dt(()=>import("./stylus-B533Al4x.js"),[]).then(t=>en(t.stylus))}}),Pt.of({name:"Swift",extensions:["swift"],load(){return Dt(()=>import("./swift-BzpIVaGY.js"),[]).then(t=>en(t.swift))}}),Pt.of({name:"sTeX",load(){return Dt(()=>import("./stex-C3f8Ysf7.js"),[]).then(t=>en(t.stex))}}),Pt.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load(){return Dt(()=>import("./stex-C3f8Ysf7.js"),[]).then(t=>en(t.stex))}}),Pt.of({name:"SystemVerilog",extensions:["v","sv","svh"],load(){return Dt(()=>import("./verilog-C6RDOZhf.js"),[]).then(t=>en(t.verilog))}}),Pt.of({name:"Tcl",extensions:["tcl"],load(){return Dt(()=>import("./tcl-DVfN8rqt.js"),[]).then(t=>en(t.tcl))}}),Pt.of({name:"Textile",extensions:["textile"],load(){return Dt(()=>import("./textile-CnDTJFAw.js"),[]).then(t=>en(t.textile))}}),Pt.of({name:"TiddlyWiki",load(){return Dt(()=>import("./tiddlywiki-DO-Gjzrf.js"),[]).then(t=>en(t.tiddlyWiki))}}),Pt.of({name:"Tiki wiki",load(){return Dt(()=>import("./tiki-DGYXhP31.js"),[]).then(t=>en(t.tiki))}}),Pt.of({name:"TOML",extensions:["toml"],load(){return Dt(()=>import("./toml-Bm5Em-hy.js"),[]).then(t=>en(t.toml))}}),Pt.of({name:"Troff",extensions:["1","2","3","4","5","6","7","8","9"],load(){return Dt(()=>import("./troff-wAsdV37c.js"),[]).then(t=>en(t.troff))}}),Pt.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load(){return Dt(()=>import("./ttcn-CfJYG6tj.js"),[]).then(t=>en(t.ttcn))}}),Pt.of({name:"TTCN_CFG",extensions:["cfg"],load(){return Dt(()=>import("./ttcn-cfg-B9xdYoR4.js"),[]).then(t=>en(t.ttcnCfg))}}),Pt.of({name:"Turtle",extensions:["ttl"],load(){return Dt(()=>import("./turtle-B1tBg_DP.js"),[]).then(t=>en(t.turtle))}}),Pt.of({name:"Web IDL",extensions:["webidl"],load(){return Dt(()=>import("./webidl-ZXfAyPTL.js"),[]).then(t=>en(t.webIDL))}}),Pt.of({name:"VB.NET",extensions:["vb"],load(){return Dt(()=>import("./vb-CmGdzxic.js"),[]).then(t=>en(t.vb))}}),Pt.of({name:"VBScript",extensions:["vbs"],load(){return Dt(()=>import("./vbscript-BuJXcnF6.js"),[]).then(t=>en(t.vbScript))}}),Pt.of({name:"Velocity",extensions:["vtl"],load(){return Dt(()=>import("./velocity-D8B20fx6.js"),[]).then(t=>en(t.velocity))}}),Pt.of({name:"Verilog",extensions:["v"],load(){return Dt(()=>import("./verilog-C6RDOZhf.js"),[]).then(t=>en(t.verilog))}}),Pt.of({name:"VHDL",extensions:["vhd","vhdl"],load(){return Dt(()=>import("./vhdl-lSbBsy5d.js"),[]).then(t=>en(t.vhdl))}}),Pt.of({name:"XQuery",extensions:["xy","xquery","xq","xqm","xqy"],load(){return Dt(()=>import("./xquery-DzFWVndE.js"),[]).then(t=>en(t.xQuery))}}),Pt.of({name:"Yacas",extensions:["ys"],load(){return Dt(()=>import("./yacas-BJ4BC0dw.js"),[]).then(t=>en(t.yacas))}}),Pt.of({name:"Z80",extensions:["z80"],load(){return Dt(()=>import("./z80-Hz9HOZM7.js"),[]).then(t=>en(t.z80))}}),Pt.of({name:"MscGen",extensions:["mscgen","mscin","msc"],load(){return Dt(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(t=>en(t.mscgen))}}),Pt.of({name:"X",extensions:["xu"],load(){return Dt(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(t=>en(t.xu))}}),Pt.of({name:"MsGenny",extensions:["msgenny"],load(){return Dt(()=>import("./mscgen-BA5vi2Kp.js"),[]).then(t=>en(t.msgenny))}}),Pt.of({name:"Vue",extensions:["vue"],load(){return Dt(()=>import("./index-BFg9Epwc.js"),[]).then(t=>t.vue())}}),Pt.of({name:"Angular Template",load(){return Dt(()=>import("./index-BH1osE1Z.js"),[]).then(t=>t.angular())}})],MG="#2e3440",WF="#3b4252",RG="#434c5e",TP="#4c566a",IG="#e5e9f0",iN="#eceff4",y$="#8fbcbb",DG="#88c0d0",WXe="#81a1c1",xf="#5e81ac",HXe="#bf616a",W1="#d08770",v$="#ebcb8b",LG="#a3be8c",GXe="#b48ead",$G="#d30102",HF=iN,x$=HF,XXe="#ffffff",_$=WF,YXe=HF,zG=WF,KXe=pn.theme({"&":{color:MG,backgroundColor:XXe},".cm-content":{caretColor:zG},".cm-cursor, .cm-dropCursor":{borderLeftColor:zG},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:YXe},".cm-panels":{backgroundColor:HF,color:TP},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${TP}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:IG},".cm-activeLine":{backgroundColor:x$},".cm-selectionMatch":{backgroundColor:IG},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${TP}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:iN},".cm-gutters":{backgroundColor:iN,color:MG,border:"none"},".cm-activeLineGutter":{backgroundColor:x$},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:_$},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:_$,borderBottomColor:_$},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:x$,color:TP}}},{dark:!1}),JXe=cE.define([{tag:Be.keyword,color:xf},{tag:[Be.name,Be.deleted,Be.character,Be.propertyName,Be.macroName],color:W1},{tag:[Be.variableName],color:W1},{tag:[Be.function(Be.variableName)],color:xf},{tag:[Be.labelName],color:WXe},{tag:[Be.color,Be.constant(Be.name),Be.standard(Be.name)],color:xf},{tag:[Be.definition(Be.name),Be.separator],color:LG},{tag:[Be.brace],color:y$},{tag:[Be.annotation],color:$G},{tag:[Be.number,Be.changed,Be.annotation,Be.modifier,Be.self,Be.namespace],color:DG},{tag:[Be.typeName,Be.className],color:v$},{tag:[Be.operator,Be.operatorKeyword],color:LG},{tag:[Be.tagName],color:GXe},{tag:[Be.squareBracket],color:HXe},{tag:[Be.angleBracket],color:W1},{tag:[Be.attributeName],color:v$},{tag:[Be.regexp],color:xf},{tag:[Be.quote],color:WF},{tag:[Be.string],color:W1},{tag:Be.link,color:y$,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[Be.url,Be.escape,Be.special(Be.string)],color:W1},{tag:[Be.meta],color:DG},{tag:[Be.comment],color:RG,fontStyle:"italic"},{tag:Be.strong,fontWeight:"bold",color:xf},{tag:Be.emphasis,fontStyle:"italic",color:xf},{tag:Be.strikethrough,textDecoration:"line-through"},{tag:Be.heading,fontWeight:"bold",color:xf},{tag:Be.special(Be.heading1),fontWeight:"bold",color:xf},{tag:Be.heading1,fontWeight:"bold",color:xf},{tag:[Be.heading2,Be.heading3,Be.heading4],fontWeight:"bold",color:xf},{tag:[Be.heading5,Be.heading6],color:xf},{tag:[Be.atom,Be.bool,Be.special(Be.variableName)],color:W1},{tag:[Be.processingInstruction,Be.inserted],color:y$},{tag:[Be.contentSeparator],color:v$},{tag:Be.invalid,color:RG,borderBottom:`1px dotted ${$G}`}]),Nce=[KXe,Hae(JXe)],NG=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class PO{constructor(e,n,r=0,i=e.length,o,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?s=>o(NG(s)):NG,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return su(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=eF(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Kp(e);let i=this.normalize(n);if(i.length)for(let o=0,a=r;;o++){let s=i.charCodeAt(o),u=this.match(s,a,this.bufferPos+this.bufferStart);if(o==i.length-1){if(u)return this.value=u,this;break}a==r&&o<n.length&&n.charCodeAt(o)==s&&a++}}}match(e,n,r){let i=null;for(let o=0;o<this.matches.length;o+=2){let a=this.matches[o],s=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?i={from:this.matches[o+1],to:r}:(this.matches[o]++,s=!0)),s||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(PO.prototype[Symbol.iterator]=function(){return this});const Bce={from:-1,to:-1,match:/.*/.exec("")},GF="gm"+(/x/.unicode==null?"":"u");class Fce{constructor(e,n,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=Bce,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new jce(e,n,r,i,o);this.re=new RegExp(n,GF+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let a=e.lineAt(i);this.curLineStart=a.from,this.matchPos=sR(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=sR(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const b$=new WeakMap;class Fw{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=b$.get(e);if(!i||i.from>=r||i.to<=n){let s=new Fw(n,e.sliceString(n,r));return b$.set(e,s),s}if(i.from==n&&i.to==r)return i;let{text:o,from:a}=i;return a>n&&(o=e.sliceString(n,a)+o,a=n),i.to<r&&(o+=e.sliceString(i.to,r)),b$.set(e,new Fw(a,o)),new Fw(n,o.slice(n-a,r-a))}}class jce{constructor(e,n,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=Bce,this.matchPos=sR(e,i),this.re=new RegExp(n,GF+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=Fw.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=sR(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Fw.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Fce.prototype[Symbol.iterator]=jce.prototype[Symbol.iterator]=function(){return this});function eYe(t){try{return new RegExp(t,GF),!0}catch{return!1}}function sR(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function oN(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=xo("input",{class:"cm-textfield",name:"line",value:e}),r=xo("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),t.dispatch({effects:YC.of(!1)}),t.focus()):o.keyCode==13&&(o.preventDefault(),i())},onsubmit:o=>{o.preventDefault(),i()}},xo("label",t.state.phrase("Go to line"),": ",n)," ",xo("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),xo("button",{name:"close",onclick:()=>{t.dispatch({effects:YC.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},[""]));function i(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!o)return;let{state:a}=t,s=a.doc.lineAt(a.selection.main.head),[,u,d,m,v]=o,_=m?+m.slice(1):0,O=d?+d:s.number;if(d&&v){let M=O/100;u&&(M=M*(u=="-"?-1:1)+s.number/a.doc.lines),O=Math.round(a.doc.lines*M)}else d&&u&&(O=O*(u=="-"?-1:1)+s.number);let E=a.doc.line(Math.max(1,Math.min(a.doc.lines,O))),A=Qt.cursor(E.from+Math.max(0,Math.min(_,E.length)));t.dispatch({effects:[YC.of(!1),pn.scrollIntoView(A.from,{y:"center"})],selection:A}),t.focus()}return{dom:r}}const YC=xr.define(),BG=Fs.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(YC)&&(t=n.value);return t},provide:t=>HT.from(t,e=>e?oN:null)}),tYe=t=>{let e=WT(t,oN);if(!e){let n=[YC.of(!0)];t.state.field(BG,!1)==null&&n.push(xr.appendConfig.of([BG,nYe])),t.dispatch({effects:n}),e=WT(t,oN)}return e&&e.dom.querySelector("input").select(),!0},nYe=pn.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),rYe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},iYe=Dn.define({combine(t){return Em(t,rYe,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function oYe(t){return[uYe,cYe]}const sYe=Zn.mark({class:"cm-selectionMatch"}),aYe=Zn.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function FG(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=Xo.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=Xo.Word)}function lYe(t,e,n,r){return t(e.sliceDoc(n,n+1))==Xo.Word&&t(e.sliceDoc(r-1,r))==Xo.Word}const cYe=zs.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(iYe),{state:n}=t,r=n.selection;if(r.ranges.length>1)return Zn.none;let i=r.main,o,a=null;if(i.empty){if(!e.highlightWordAroundCursor)return Zn.none;let u=n.wordAt(i.head);if(!u)return Zn.none;a=n.charCategorizer(i.head),o=n.sliceDoc(u.from,u.to)}else{let u=i.to-i.from;if(u<e.minSelectionLength||u>200)return Zn.none;if(e.wholeWords){if(o=n.sliceDoc(i.from,i.to),a=n.charCategorizer(i.head),!(FG(a,n,i.from,i.to)&&lYe(a,n,i.from,i.to)))return Zn.none}else if(o=n.sliceDoc(i.from,i.to),!o)return Zn.none}let s=[];for(let u of t.visibleRanges){let d=new PO(n.doc,o,u.from,u.to);for(;!d.next().done;){let{from:m,to:v}=d.value;if((!a||FG(a,n,m,v))&&(i.empty&&m<=i.from&&v>=i.to?s.push(aYe.range(m,v)):(m>=i.to||v<=i.from)&&s.push(sYe.range(m,v)),s.length>e.maxMatches))return Zn.none}}return Zn.set(s)}},{decorations:t=>t.decorations}),uYe=pn.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),hYe=({state:t,dispatch:e})=>{let{selection:n}=t,r=Qt.create(n.ranges.map(i=>t.wordAt(i.head)||Qt.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function dYe(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let a=!1,s=new PO(t.doc,e,r[r.length-1].to);;)if(s.next(),s.done){if(a)return null;s=new PO(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),a=!0}else{if(a&&r.some(u=>u.from==s.value.from))continue;if(o){let u=t.wordAt(s.value.from);if(!u||u.from!=s.value.from||u.to!=s.value.to)continue}return s.value}}const fYe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(o=>o.from===o.to))return hYe({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(o=>t.sliceDoc(o.from,o.to)!=r))return!1;let i=dYe(t,r);return i?(e(t.update({selection:t.selection.addRange(Qt.range(i.from,i.to),!1),effects:pn.scrollIntoView(i.to)})),!0):!1},xS=Dn.define({combine(t){return Em(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new CYe(e),scrollToMatch:e=>pn.scrollIntoView(e)})}});class Vce{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||eYe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new yYe(this):new mYe(this)}getCursor(e,n=0,r){let i=e.doc?e:$r.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?sw(this,i,n,r):ow(this,i,n,r)}}class Qce{constructor(e){this.spec=e}}function ow(t,e,n,r){return new PO(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?pYe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function pYe(t,e){return(n,r,i,o)=>((o>n||o+i.length<r)&&(o=Math.max(0,n-2),i=t.sliceString(o,Math.min(t.length,r+2))),(e(aR(i,n-o))!=Xo.Word||e(lR(i,n-o))!=Xo.Word)&&(e(lR(i,r-o))!=Xo.Word||e(aR(i,r-o))!=Xo.Word))}class mYe extends Qce{constructor(e){super(e)}nextMatch(e,n,r){let i=ow(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let o=Math.min(e.doc.length,n+this.spec.unquoted.length);i=ow(this.spec,e,0,o).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let o=Math.max(n,i-1e4-this.spec.unquoted.length),a=ow(this.spec,e,o,i),s=null;for(;!a.nextOverlapping().done;)s=a.value;if(s)return s;if(o==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=ow(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=ow(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}function sw(t,e,n,r){return new Fce(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?gYe(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function aR(t,e){return t.slice(ba(t,e,!1),e)}function lR(t,e){return t.slice(e,ba(t,e))}function gYe(t){return(e,n,r)=>!r[0].length||(t(aR(r.input,r.index))!=Xo.Word||t(lR(r.input,r.index))!=Xo.Word)&&(t(lR(r.input,r.index+r[0].length))!=Xo.Word||t(aR(r.input,r.index+r[0].length))!=Xo.Word)}class yYe extends Qce{nextMatch(e,n,r){let i=sw(this.spec,e,r,e.doc.length).next();return i.done&&(i=sw(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let o=Math.max(n,r-i*1e4),a=sw(this.spec,e,o,r),s=null;for(;!a.next().done;)s=a.value;if(s&&(o==n||s.from>o+10))return s;if(o==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let o=+r.slice(0,i);if(o>0&&o<e.match.length)return e.match[o]+r.slice(i)}return n})}matchAll(e,n){let r=sw(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let o=sw(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}const ok=xr.define(),XF=xr.define(),q0=Fs.define({create(t){return new w$(sN(t).create(),null)},update(t,e){for(let n of e.effects)n.is(ok)?t=new w$(n.value.create(),t.panel):n.is(XF)&&(t=new w$(t.query,n.value?YF:null));return t},provide:t=>HT.from(t,e=>e.panel)});class w${constructor(e,n){this.query=e,this.panel=n}}const vYe=Zn.mark({class:"cm-searchMatch"}),xYe=Zn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),_Ye=zs.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(q0))}update(t){let e=t.state.field(q0);(e!=t.startState.field(q0)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Zn.none;let{view:n}=this,r=new _u;for(let i=0,o=n.visibleRanges,a=o.length;i<a;i++){let{from:s,to:u}=o[i];for(;i<a-1&&u>o[i+1].from-500;)u=o[++i].to;t.highlight(n.state,s,u,(d,m)=>{let v=n.state.selection.ranges.some(_=>_.from==d&&_.to==m);r.add(d,m,v?xYe:vYe)})}return r.finish()}},{decorations:t=>t.decorations});function dE(t){return e=>{let n=e.state.field(q0,!1);return n&&n.query.spec.valid?t(e,n):qce(e)}}const cR=dE((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=Qt.single(r.from,r.to),o=t.state.facet(xS);return t.dispatch({selection:i,effects:[KF(t,r),o.scrollToMatch(i.main,t)],userEvent:"select.search"}),Zce(t),!0}),uR=dE((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let o=Qt.single(i.from,i.to),a=t.state.facet(xS);return t.dispatch({selection:o,effects:[KF(t,i),a.scrollToMatch(o.main,t)],userEvent:"select.search"}),Zce(t),!0}),bYe=dE((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:Qt.create(n.map(r=>Qt.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),wYe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],a=0;for(let s=new PO(t.doc,t.sliceDoc(r,i));!s.next().done;){if(o.length>1e3)return!1;s.value.from==r&&(a=o.length),o.push(Qt.range(s.value.from,s.value.to))}return e(t.update({selection:Qt.create(o,a),userEvent:"select.search.matches"})),!0},jG=dE((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,r,r);if(!o)return!1;let a=o,s=[],u,d,m=[];a.from==r&&a.to==i&&(d=n.toText(e.getReplacement(a)),s.push({from:a.from,to:a.to,insert:d}),a=e.nextMatch(n,a.from,a.to),m.push(pn.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let v=t.state.changes(s);return a&&(u=Qt.single(a.from,a.to).map(v),m.push(KF(t,a)),m.push(n.facet(xS).scrollToMatch(u.main,t))),t.dispatch({changes:v,selection:u,effects:m,userEvent:"input.replace"}),!0}),OYe=dE((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:o,to:a}=i;return{from:o,to:a,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:pn.announce.of(r),userEvent:"input.replace.all"}),!0});function YF(t){return t.state.facet(xS).createPanel(t)}function sN(t,e){var n,r,i,o,a;let s=t.selection.main,u=s.empty||s.to>s.from+100?"":t.sliceDoc(s.from,s.to);if(e&&!u)return e;let d=t.facet(xS);return new Vce({search:((n=e?.literal)!==null&&n!==void 0?n:d.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:d.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:d.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:d.regexp,wholeWord:(a=e?.wholeWord)!==null&&a!==void 0?a:d.wholeWord})}function Uce(t){let e=WT(t,YF);return e&&e.dom.querySelector("[main-field]")}function Zce(t){let e=Uce(t);e&&e==t.root.activeElement&&e.select()}const qce=t=>{let e=t.state.field(q0,!1);if(e&&e.panel){let n=Uce(t);if(n&&n!=t.root.activeElement){let r=sN(t.state,e.query.spec);r.valid&&t.dispatch({effects:ok.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[XF.of(!0),e?ok.of(sN(t.state,e.query.spec)):xr.appendConfig.of(kYe)]});return!0},Wce=t=>{let e=t.state.field(q0,!1);if(!e||!e.panel)return!1;let n=WT(t,YF);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:XF.of(!1)}),!0},SYe=[{key:"Mod-f",run:qce,scope:"editor search-panel"},{key:"F3",run:cR,shift:uR,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:cR,shift:uR,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Wce,scope:"editor search-panel"},{key:"Mod-Shift-l",run:wYe},{key:"Mod-Alt-g",run:tYe},{key:"Mod-d",run:fYe,preventDefault:!0}];class CYe{constructor(e){this.view=e;let n=this.query=e.state.field(q0).query.spec;this.commit=this.commit.bind(this),this.searchField=xo("input",{value:n.search,placeholder:Hu(e,"Find"),"aria-label":Hu(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=xo("input",{value:n.replace,placeholder:Hu(e,"Replace"),"aria-label":Hu(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=xo("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=xo("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=xo("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,o,a){return xo("button",{class:"cm-button",name:i,onclick:o,type:"button"},a)}this.dom=xo("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>cR(e),[Hu(e,"next")]),r("prev",()=>uR(e),[Hu(e,"previous")]),r("select",()=>bYe(e),[Hu(e,"all")]),xo("label",null,[this.caseField,Hu(e,"match case")]),xo("label",null,[this.reField,Hu(e,"regexp")]),xo("label",null,[this.wordField,Hu(e,"by word")]),...e.state.readOnly?[]:[xo("br"),this.replaceField,r("replace",()=>jG(e),[Hu(e,"replace")]),r("replaceAll",()=>OYe(e),[Hu(e,"replace all")])],xo("button",{name:"close",onclick:()=>Wce(e),"aria-label":Hu(e,"close"),type:"button"},[""])])}commit(){let e=new Vce({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:ok.of(e)}))}keydown(e){aUe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?uR:cR)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),jG(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(ok)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(xS).top}}function Hu(t,e){return t.state.phrase(e)}const kP=30,EP=/[\s\.,:;?!]/;function KF(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,o=Math.max(r.from,e-kP),a=Math.min(i,n+kP),s=t.state.sliceDoc(o,a);if(o!=r.from){for(let u=0;u<kP;u++)if(!EP.test(s[u+1])&&EP.test(s[u])){s=s.slice(u);break}}if(a!=i){for(let u=s.length-1;u>s.length-kP;u--)if(!EP.test(s[u-1])&&EP.test(s[u])){s=s.slice(0,u);break}}return pn.announce.of(`${t.state.phrase("current match")}. ${s} ${t.state.phrase("on line")} ${r.number}.`)}const TYe=pn.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),kYe=[q0,Uf.low(_Ye),TYe];class VG{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class Xx{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(sk).markerFilter;i&&(e=i(e,r));let o=e.slice().sort((O,E)=>O.from-E.from||O.to-E.to),a=new _u,s=[],u=0,d=r.doc.iter(),m=0,v=r.doc.length;for(let O=0;;){let E=O==o.length?null:o[O];if(!E&&!s.length)break;let A,M;if(s.length)A=u,M=s.reduce((N,F)=>Math.min(N,F.to),E&&E.from>A?E.from:1e8);else{if(A=E.from,A>v)break;M=E.to,s.push(E),O++}for(;O<o.length;){let N=o[O];if(N.from==A&&(N.to>N.from||N.to==A))s.push(N),O++,M=Math.min(N.to,M);else{M=Math.min(N.from,M);break}}M=Math.min(M,v);let L=!1;if(s.some(N=>N.from==A&&(N.to==M||M==v))&&(L=A==M,!L&&M-A<10)){let N=A-(m+d.value.length);N>0&&(d.next(N),m=A);for(let F=A;;){if(F>=M){L=!0;break}if(!d.lineBreak&&m+d.value.length>F)break;F=m+d.value.length,m+=d.value.length,d.next()}}let $=FYe(s);if(L)a.add(A,A,Zn.widget({widget:new $Ye($),diagnostics:s.slice()}));else{let N=s.reduce((F,Q)=>Q.markClass?F+" "+Q.markClass:F,"");a.add(A,M,Zn.mark({class:"cm-lintRange cm-lintRange-"+$+N,diagnostics:s.slice(),inclusiveEnd:s.some(F=>F.to>M)}))}if(u=M,u==v)break;for(let N=0;N<s.length;N++)s[N].to<=u&&s.splice(N--,1)}let _=a.finish();return new Xx(_,n,MO(_))}}function MO(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,o,{spec:a})=>{if(!(e&&a.diagnostics.indexOf(e)<0))if(!r)r=new VG(i,o,e||a.diagnostics[0]);else{if(a.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new VG(r.from,o,r.diagnostic)}}),r}function EYe(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(sk).hideOn(t,n,r);if(i!=null)return i;let o=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(a=>a.is(Hce))||t.changes.touchesRange(o.from,Math.max(o.to,r)))}function AYe(t,e){return t.field(ch,!1)?e:e.concat(xr.appendConfig.of(jYe))}const Hce=xr.define(),JF=xr.define(),Gce=xr.define(),ch=Fs.define({create(){return new Xx(Zn.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let o=e.changes.mapPos(t.selected.from,1);r=MO(n,t.selected.diagnostic,o)||MO(n,null,o)}!n.size&&i&&e.state.facet(sk).autoPanel&&(i=null),t=new Xx(n,i,r)}for(let n of e.effects)if(n.is(Hce)){let r=e.state.facet(sk).autoPanel?n.value.length?ak.open:null:t.panel;t=Xx.init(n.value,r,e.state)}else n.is(JF)?t=new Xx(t.diagnostics,n.value?ak.open:null,t.selected):n.is(Gce)&&(t=new Xx(t.diagnostics,t.panel,n.value));return t},provide:t=>[HT.from(t,e=>e.panel),pn.decorations.from(t,e=>e.diagnostics)]}),PYe=Zn.mark({class:"cm-lintRange cm-lintRange-active"});function MYe(t,e,n){let{diagnostics:r}=t.state.field(ch),i,o=-1,a=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(u,d,{spec:m})=>{if(e>=u&&e<=d&&(u==d||(e>u||n>0)&&(e<d||n<0)))return i=m.diagnostics,o=u,a=d,!1});let s=t.state.facet(sk).tooltipFilter;return i&&s&&(i=s(i,t.state)),i?{pos:o,end:a,above:t.state.doc.lineAt(o).to<a,create(){return{dom:RYe(t,i)}}}:null}function RYe(t,e){return xo("ul",{class:"cm-tooltip-lint"},e.map(n=>Yce(t,n,!1)))}const IYe=t=>{let e=t.state.field(ch,!1);(!e||!e.panel)&&t.dispatch({effects:AYe(t.state,[JF.of(!0)])});let n=WT(t,ak.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},QG=t=>{let e=t.state.field(ch,!1);return!e||!e.panel?!1:(t.dispatch({effects:JF.of(!1)}),!0)},DYe=t=>{let e=t.state.field(ch,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},LYe=[{key:"Mod-Shift-m",run:IYe,preventDefault:!0},{key:"F8",run:DYe}],sk=Dn.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...Em(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:UG,tooltipFilter:UG,needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n,hideOn:(e,n)=>e?n?(r,i,o)=>e(r,i,o)||n(r,i,o):e:n,autoPanel:(e,n)=>e||n})}}});function UG(t,e){return t?e?(n,r)=>e(t(n,r),r):t:e}function Xce(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function Yce(t,e,n){var r;let i=n?Xce(e.actions):[];return xo("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},xo("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((o,a)=>{let s=!1,u=O=>{if(O.preventDefault(),s)return;s=!0;let E=MO(t.state.field(ch).diagnostics,e);E&&o.apply(t,E.from,E.to)},{name:d}=o,m=i[a]?d.indexOf(i[a]):-1,v=m<0?d:[d.slice(0,m),xo("u",d.slice(m,m+1)),d.slice(m+1)],_=o.markClass?" "+o.markClass:"";return xo("button",{type:"button",class:"cm-diagnosticAction"+_,onclick:u,onmousedown:u,"aria-label":` Action: ${d}${m<0?"":` (access key "${i[a]})"`}.`},v)}),e.source&&xo("div",{class:"cm-diagnosticSource"},e.source))}class $Ye extends Sd{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return xo("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class ZG{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Yce(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class ak{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)QG(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],a=Xce(o.actions);for(let s=0;s<a.length;s++)if(a[s].toUpperCase().charCodeAt(0)==i.keyCode){let u=MO(this.view.state.field(ch).diagnostics,o);u&&o.actions[s].apply(e,u.from,u.to)}}else return;i.preventDefault()},r=i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)};this.list=xo("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=xo("div",{class:"cm-panel-lint"},this.list,xo("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>QG(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(ch).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(ch),r=0,i=!1,o=null,a=new Set;for(e.between(0,this.view.state.doc.length,(s,u,{spec:d})=>{for(let m of d.diagnostics){if(a.has(m))continue;a.add(m);let v=-1,_;for(let O=r;O<this.items.length;O++)if(this.items[O].diagnostic==m){v=O;break}v<0?(_=new ZG(this.view,m),this.items.splice(r,0,_),i=!0):(_=this.items[v],v>r&&(this.items.splice(r,v-r),i=!0)),n&&_.diagnostic==n.diagnostic?_.dom.hasAttribute("aria-selected")||(_.dom.setAttribute("aria-selected","true"),o=_):_.dom.hasAttribute("aria-selected")&&_.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new ZG(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:u})=>{let d=u.height/this.list.offsetHeight;s.top<u.top?this.list.scrollTop-=(u.top-s.top)/d:s.bottom>u.bottom&&(this.list.scrollTop+=(s.bottom-u.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(ch),r=MO(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Gce.of(r)})}static open(e){return new ak(e)}}function zYe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function AP(t){return zYe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const NYe=pn.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:AP("#d11")},".cm-lintRange-warning":{backgroundImage:AP("orange")},".cm-lintRange-info":{backgroundImage:AP("#999")},".cm-lintRange-hint":{backgroundImage:AP("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function BYe(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function FYe(t){let e="hint",n=1;for(let r of t){let i=BYe(r.severity);i>n&&(n=i,e=r.severity)}return e}const jYe=[ch,pn.decorations.compute([ch],t=>{let{selected:e,panel:n}=t.field(ch);return!e||!n||e.from==e.to?Zn.none:Zn.set([PYe.range(e.from,e.to)])}),WUe(MYe,{hideOn:EYe}),NYe],Kce=[gF(),oZe(),SUe(),OWe(),YZe(),fUe(),vUe(),$r.allowMultipleSelections.of(!0),BZe(),Hae(tqe,{fallback:!0}),lqe(),tWe(),dWe(),$Ue(),BUe(),PUe(),oYe(),dS.of([...oWe,...CHe,...SYe,...RWe,...WZe,...mle,...LYe])];function qG(t,[e,n]){return Math.min(n,Math.max(e,t))}function VYe(t){const e=j.useRef({value:t,previous:t});return j.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Jce=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),QYe="VisuallyHidden",eue=j.forwardRef((t,e)=>q.jsx(Xr.span,{...t,ref:e,style:{...Jce,...t.style}}));eue.displayName=QYe;var UYe=eue,ZYe=[" ","Enter","ArrowUp","ArrowDown"],qYe=[" ","Enter"],q_="Select",[yD,vD,WYe]=Pre(q_),[_S]=by(q_,[WYe,lS]),xD=lS(),[HYe,xv]=_S(q_),[GYe,XYe]=_S(q_),tue=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:o,value:a,defaultValue:s,onValueChange:u,dir:d,name:m,autoComplete:v,disabled:_,required:O,form:E}=t,A=xD(e),[M,L]=j.useState(null),[$,N]=j.useState(null),[F,Q]=j.useState(!1),W=qI(d),[H,te]=cy({prop:r,defaultProp:i??!1,onChange:o,caller:q_}),[ne,ce]=cy({prop:a,defaultProp:s,onChange:u,caller:q_}),we=j.useRef(null),re=M?E||!!M.closest("form"):!0,[se,be]=j.useState(new Set),fe=Array.from(se).map(ve=>ve.props.value).join(";");return q.jsx(i9,{...A,children:q.jsxs(HYe,{required:O,scope:e,trigger:M,onTriggerChange:L,valueNode:$,onValueNodeChange:N,valueNodeHasChildren:F,onValueNodeHasChildrenChange:Q,contentId:Xg(),value:ne,onValueChange:ce,open:H,onOpenChange:te,dir:W,triggerPointerDownPosRef:we,disabled:_,children:[q.jsx(yD.Provider,{scope:e,children:q.jsx(GYe,{scope:t.__scopeSelect,onNativeOptionAdd:j.useCallback(ve=>{be(Me=>new Set(Me).add(ve))},[]),onNativeOptionRemove:j.useCallback(ve=>{be(Me=>{const Ne=new Set(Me);return Ne.delete(ve),Ne})},[]),children:n})}),re?q.jsxs(bue,{"aria-hidden":!0,required:O,tabIndex:-1,name:m,autoComplete:v,value:ne,onChange:ve=>ce(ve.target.value),disabled:_,form:E,children:[ne===void 0?q.jsx("option",{value:""}):null,Array.from(se)]},fe):null]})})};tue.displayName=q_;var nue="SelectTrigger",rue=j.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,o=xD(n),a=xv(nue,n),s=a.disabled||r,u=Lo(e,a.onTriggerChange),d=vD(n),m=j.useRef("touch"),[v,_,O]=Oue(A=>{const M=d().filter(N=>!N.disabled),L=M.find(N=>N.value===a.value),$=Sue(M,A,L);$!==void 0&&a.onValueChange($.value)}),E=A=>{s||(a.onOpenChange(!0),O()),A&&(a.triggerPointerDownPosRef.current={x:Math.round(A.pageX),y:Math.round(A.pageY)})};return q.jsx(jI,{asChild:!0,...o,children:q.jsx(Xr.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":wue(a.value)?"":void 0,...i,ref:u,onClick:Er(i.onClick,A=>{A.currentTarget.focus(),m.current!=="mouse"&&E(A)}),onPointerDown:Er(i.onPointerDown,A=>{m.current=A.pointerType;const M=A.target;M.hasPointerCapture(A.pointerId)&&M.releasePointerCapture(A.pointerId),A.button===0&&A.ctrlKey===!1&&A.pointerType==="mouse"&&(E(A),A.preventDefault())}),onKeyDown:Er(i.onKeyDown,A=>{const M=v.current!=="";!(A.ctrlKey||A.altKey||A.metaKey)&&A.key.length===1&&_(A.key),!(M&&A.key===" ")&&ZYe.includes(A.key)&&(E(),A.preventDefault())})})})});rue.displayName=nue;var iue="SelectValue",oue=j.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:a="",...s}=t,u=xv(iue,n),{onValueNodeHasChildrenChange:d}=u,m=o!==void 0,v=Lo(e,u.onValueNodeChange);return Ul(()=>{d(m)},[d,m]),q.jsx(Xr.span,{...s,ref:v,style:{pointerEvents:"none"},children:wue(u.value)?q.jsx(q.Fragment,{children:a}):o})});oue.displayName=iue;var YYe="SelectIcon",sue=j.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return q.jsx(Xr.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});sue.displayName=YYe;var KYe="SelectPortal",aue=t=>q.jsx(Xk,{asChild:!0,...t});aue.displayName=KYe;var W_="SelectContent",lue=j.forwardRef((t,e)=>{const n=xv(W_,t.__scopeSelect),[r,i]=j.useState();if(Ul(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?mm.createPortal(q.jsx(cue,{scope:t.__scopeSelect,children:q.jsx(yD.Slot,{scope:t.__scopeSelect,children:q.jsx("div",{children:t.children})})}),o):null}return q.jsx(uue,{...t,ref:e})});lue.displayName=W_;var bf=10,[cue,_v]=_S(W_),JYe="SelectContentImpl",eKe=pO("SelectContent.RemoveScroll"),uue=j.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:a,side:s,sideOffset:u,align:d,alignOffset:m,arrowPadding:v,collisionBoundary:_,collisionPadding:O,sticky:E,hideWhenDetached:A,avoidCollisions:M,...L}=t,$=xv(W_,n),[N,F]=j.useState(null),[Q,W]=j.useState(null),H=Lo(e,ot=>F(ot)),[te,ne]=j.useState(null),[ce,we]=j.useState(null),re=vD(n),[se,be]=j.useState(!1),fe=j.useRef(!1);j.useEffect(()=>{if(N)return a9(N)},[N]),G8();const ve=j.useCallback(ot=>{const[yt,...Et]=re().map(wt=>wt.ref.current),[Tt]=Et.slice(-1),Ht=document.activeElement;for(const wt of ot)if(wt===Ht||(wt?.scrollIntoView({block:"nearest"}),wt===yt&&Q&&(Q.scrollTop=0),wt===Tt&&Q&&(Q.scrollTop=Q.scrollHeight),wt?.focus(),document.activeElement!==Ht))return},[re,Q]),Me=j.useCallback(()=>ve([te,N]),[ve,te,N]);j.useEffect(()=>{se&&Me()},[se,Me]);const{onOpenChange:Ne,triggerPointerDownPosRef:Qe}=$;j.useEffect(()=>{if(N){let ot={x:0,y:0};const yt=Tt=>{ot={x:Math.abs(Math.round(Tt.pageX)-(Qe.current?.x??0)),y:Math.abs(Math.round(Tt.pageY)-(Qe.current?.y??0))}},Et=Tt=>{ot.x<=10&&ot.y<=10?Tt.preventDefault():N.contains(Tt.target)||Ne(!1),document.removeEventListener("pointermove",yt),Qe.current=null};return Qe.current!==null&&(document.addEventListener("pointermove",yt),document.addEventListener("pointerup",Et,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",yt),document.removeEventListener("pointerup",Et,{capture:!0})}}},[N,Ne,Qe]),j.useEffect(()=>{const ot=()=>Ne(!1);return window.addEventListener("blur",ot),window.addEventListener("resize",ot),()=>{window.removeEventListener("blur",ot),window.removeEventListener("resize",ot)}},[Ne]);const[Ce,Ae]=Oue(ot=>{const yt=re().filter(Ht=>!Ht.disabled),Et=yt.find(Ht=>Ht.ref.current===document.activeElement),Tt=Sue(yt,ot,Et);Tt&&setTimeout(()=>Tt.ref.current.focus())}),Xe=j.useCallback((ot,yt,Et)=>{const Tt=!fe.current&&!Et;($.value!==void 0&&$.value===yt||Tt)&&(ne(ot),Tt&&(fe.current=!0))},[$.value]),ke=j.useCallback(()=>N?.focus(),[N]),ft=j.useCallback((ot,yt,Et)=>{const Tt=!fe.current&&!Et;($.value!==void 0&&$.value===yt||Tt)&&we(ot)},[$.value]),pt=r==="popper"?aN:hue,lt=pt===aN?{side:s,sideOffset:u,align:d,alignOffset:m,arrowPadding:v,collisionBoundary:_,collisionPadding:O,sticky:E,hideWhenDetached:A,avoidCollisions:M}:{};return q.jsx(cue,{scope:n,content:N,viewport:Q,onViewportChange:W,itemRefCallback:Xe,selectedItem:te,onItemLeave:ke,itemTextRefCallback:ft,focusSelectedItem:Me,selectedItemText:ce,position:r,isPositioned:se,searchRef:Ce,children:q.jsx(QI,{as:eKe,allowPinchZoom:!0,children:q.jsx($I,{asChild:!0,trapped:$.open,onMountAutoFocus:ot=>{ot.preventDefault()},onUnmountAutoFocus:Er(i,ot=>{$.trigger?.focus({preventScroll:!0}),ot.preventDefault()}),children:q.jsx(Hk,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:ot=>ot.preventDefault(),onDismiss:()=>$.onOpenChange(!1),children:q.jsx(pt,{role:"listbox",id:$.contentId,"data-state":$.open?"open":"closed",dir:$.dir,onContextMenu:ot=>ot.preventDefault(),...L,...lt,onPlaced:()=>be(!0),ref:H,style:{display:"flex",flexDirection:"column",outline:"none",...L.style},onKeyDown:Er(L.onKeyDown,ot=>{const yt=ot.ctrlKey||ot.altKey||ot.metaKey;if(ot.key==="Tab"&&ot.preventDefault(),!yt&&ot.key.length===1&&Ae(ot.key),["ArrowUp","ArrowDown","Home","End"].includes(ot.key)){let Tt=re().filter(Ht=>!Ht.disabled).map(Ht=>Ht.ref.current);if(["ArrowUp","End"].includes(ot.key)&&(Tt=Tt.slice().reverse()),["ArrowUp","ArrowDown"].includes(ot.key)){const Ht=ot.target,wt=Tt.indexOf(Ht);Tt=Tt.slice(wt+1)}setTimeout(()=>ve(Tt)),ot.preventDefault()}})})})})})})});uue.displayName=JYe;var tKe="SelectItemAlignedPosition",hue=j.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,o=xv(W_,n),a=_v(W_,n),[s,u]=j.useState(null),[d,m]=j.useState(null),v=Lo(e,H=>m(H)),_=vD(n),O=j.useRef(!1),E=j.useRef(!0),{viewport:A,selectedItem:M,selectedItemText:L,focusSelectedItem:$}=a,N=j.useCallback(()=>{if(o.trigger&&o.valueNode&&s&&d&&A&&M&&L){const H=o.trigger.getBoundingClientRect(),te=d.getBoundingClientRect(),ne=o.valueNode.getBoundingClientRect(),ce=L.getBoundingClientRect();if(o.dir!=="rtl"){const Ht=ce.left-te.left,wt=ne.left-Ht,un=H.left-wt,Gt=H.width+un,Jt=Math.max(Gt,te.width),Sn=window.innerWidth-bf,nn=qG(wt,[bf,Math.max(bf,Sn-Jt)]);s.style.minWidth=Gt+"px",s.style.left=nn+"px"}else{const Ht=te.right-ce.right,wt=window.innerWidth-ne.right-Ht,un=window.innerWidth-H.right-wt,Gt=H.width+un,Jt=Math.max(Gt,te.width),Sn=window.innerWidth-bf,nn=qG(wt,[bf,Math.max(bf,Sn-Jt)]);s.style.minWidth=Gt+"px",s.style.right=nn+"px"}const we=_(),re=window.innerHeight-bf*2,se=A.scrollHeight,be=window.getComputedStyle(d),fe=parseInt(be.borderTopWidth,10),ve=parseInt(be.paddingTop,10),Me=parseInt(be.borderBottomWidth,10),Ne=parseInt(be.paddingBottom,10),Qe=fe+ve+se+Ne+Me,Ce=Math.min(M.offsetHeight*5,Qe),Ae=window.getComputedStyle(A),Xe=parseInt(Ae.paddingTop,10),ke=parseInt(Ae.paddingBottom,10),ft=H.top+H.height/2-bf,pt=re-ft,lt=M.offsetHeight/2,ot=M.offsetTop+lt,yt=fe+ve+ot,Et=Qe-yt;if(yt<=ft){const Ht=we.length>0&&M===we[we.length-1].ref.current;s.style.bottom="0px";const wt=d.clientHeight-A.offsetTop-A.offsetHeight,un=Math.max(pt,lt+(Ht?ke:0)+wt+Me),Gt=yt+un;s.style.height=Gt+"px"}else{const Ht=we.length>0&&M===we[0].ref.current;s.style.top="0px";const un=Math.max(ft,fe+A.offsetTop+(Ht?Xe:0)+lt)+Et;s.style.height=un+"px",A.scrollTop=yt-ft+A.offsetTop}s.style.margin=`${bf}px 0`,s.style.minHeight=Ce+"px",s.style.maxHeight=re+"px",r?.(),requestAnimationFrame(()=>O.current=!0)}},[_,o.trigger,o.valueNode,s,d,A,M,L,o.dir,r]);Ul(()=>N(),[N]);const[F,Q]=j.useState();Ul(()=>{d&&Q(window.getComputedStyle(d).zIndex)},[d]);const W=j.useCallback(H=>{H&&E.current===!0&&(N(),$?.(),E.current=!1)},[N,$]);return q.jsx(rKe,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:O,onScrollButtonChange:W,children:q.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:F},children:q.jsx(Xr.div,{...i,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});hue.displayName=tKe;var nKe="SelectPopperPosition",aN=j.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=bf,...o}=t,a=xD(n);return q.jsx(o9,{...a,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});aN.displayName=nKe;var[rKe,e7]=_S(W_,{}),lN="SelectViewport",due=j.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,o=_v(lN,n),a=e7(lN,n),s=Lo(e,o.onViewportChange),u=j.useRef(0);return q.jsxs(q.Fragment,{children:[q.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),q.jsx(yD.Slot,{scope:n,children:q.jsx(Xr.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Er(i.onScroll,d=>{const m=d.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:_}=a;if(_?.current&&v){const O=Math.abs(u.current-m.scrollTop);if(O>0){const E=window.innerHeight-bf*2,A=parseFloat(v.style.minHeight),M=parseFloat(v.style.height),L=Math.max(A,M);if(L<E){const $=L+O,N=Math.min(E,$),F=$-N;v.style.height=N+"px",v.style.bottom==="0px"&&(m.scrollTop=F>0?F:0,v.style.justifyContent="flex-end")}}}u.current=m.scrollTop})})})]})});due.displayName=lN;var fue="SelectGroup",[iKe,oKe]=_S(fue),sKe=j.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Xg();return q.jsx(iKe,{scope:n,id:i,children:q.jsx(Xr.div,{role:"group","aria-labelledby":i,...r,ref:e})})});sKe.displayName=fue;var pue="SelectLabel",aKe=j.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=oKe(pue,n);return q.jsx(Xr.div,{id:i.id,...r,ref:e})});aKe.displayName=pue;var hR="SelectItem",[lKe,mue]=_S(hR),gue=j.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...a}=t,s=xv(hR,n),u=_v(hR,n),d=s.value===r,[m,v]=j.useState(o??""),[_,O]=j.useState(!1),E=Lo(e,$=>u.itemRefCallback?.($,r,i)),A=Xg(),M=j.useRef("touch"),L=()=>{i||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return q.jsx(lKe,{scope:n,value:r,disabled:i,textId:A,isSelected:d,onItemTextChange:j.useCallback($=>{v(N=>N||($?.textContent??"").trim())},[]),children:q.jsx(yD.ItemSlot,{scope:n,value:r,disabled:i,textValue:m,children:q.jsx(Xr.div,{role:"option","aria-labelledby":A,"data-highlighted":_?"":void 0,"aria-selected":d&&_,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:E,onFocus:Er(a.onFocus,()=>O(!0)),onBlur:Er(a.onBlur,()=>O(!1)),onClick:Er(a.onClick,()=>{M.current!=="mouse"&&L()}),onPointerUp:Er(a.onPointerUp,()=>{M.current==="mouse"&&L()}),onPointerDown:Er(a.onPointerDown,$=>{M.current=$.pointerType}),onPointerMove:Er(a.onPointerMove,$=>{M.current=$.pointerType,i?u.onItemLeave?.():M.current==="mouse"&&$.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Er(a.onPointerLeave,$=>{$.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:Er(a.onKeyDown,$=>{u.searchRef?.current!==""&&$.key===" "||(qYe.includes($.key)&&L(),$.key===" "&&$.preventDefault())})})})})});gue.displayName=hR;var bC="SelectItemText",yue=j.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...o}=t,a=xv(bC,n),s=_v(bC,n),u=mue(bC,n),d=XYe(bC,n),[m,v]=j.useState(null),_=Lo(e,L=>v(L),u.onItemTextChange,L=>s.itemTextRefCallback?.(L,u.value,u.disabled)),O=m?.textContent,E=j.useMemo(()=>q.jsx("option",{value:u.value,disabled:u.disabled,children:O},u.value),[u.disabled,u.value,O]),{onNativeOptionAdd:A,onNativeOptionRemove:M}=d;return Ul(()=>(A(E),()=>M(E)),[A,M,E]),q.jsxs(q.Fragment,{children:[q.jsx(Xr.span,{id:u.textId,...o,ref:_}),u.isSelected&&a.valueNode&&!a.valueNodeHasChildren?mm.createPortal(o.children,a.valueNode):null]})});yue.displayName=bC;var vue="SelectItemIndicator",cKe=j.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return mue(vue,n).isSelected?q.jsx(Xr.span,{"aria-hidden":!0,...r,ref:e}):null});cKe.displayName=vue;var cN="SelectScrollUpButton",uKe=j.forwardRef((t,e)=>{const n=_v(cN,t.__scopeSelect),r=e7(cN,t.__scopeSelect),[i,o]=j.useState(!1),a=Lo(e,r.onScrollButtonChange);return Ul(()=>{if(n.viewport&&n.isPositioned){let s=function(){const d=u.scrollTop>0;o(d)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),i?q.jsx(xue,{...t,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop-u.offsetHeight)}}):null});uKe.displayName=cN;var uN="SelectScrollDownButton",hKe=j.forwardRef((t,e)=>{const n=_v(uN,t.__scopeSelect),r=e7(uN,t.__scopeSelect),[i,o]=j.useState(!1),a=Lo(e,r.onScrollButtonChange);return Ul(()=>{if(n.viewport&&n.isPositioned){let s=function(){const d=u.scrollHeight-u.clientHeight,m=Math.ceil(u.scrollTop)<d;o(m)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),i?q.jsx(xue,{...t,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop+u.offsetHeight)}}):null});hKe.displayName=uN;var xue=j.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,o=_v("SelectScrollButton",n),a=j.useRef(null),s=vD(n),u=j.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return j.useEffect(()=>()=>u(),[u]),Ul(()=>{s().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[s]),q.jsx(Xr.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Er(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Er(i.onPointerMove,()=>{o.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Er(i.onPointerLeave,()=>{u()})})}),dKe="SelectSeparator",_ue=j.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return q.jsx(Xr.div,{"aria-hidden":!0,...r,ref:e})});_ue.displayName=dKe;var hN="SelectArrow",fKe=j.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=xD(n),o=xv(hN,n),a=_v(hN,n);return o.open&&a.position==="popper"?q.jsx(s9,{...i,...r,ref:e}):null});fKe.displayName=hN;var pKe="SelectBubbleInput",bue=j.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=j.useRef(null),o=Lo(r,i),a=VYe(e);return j.useEffect(()=>{const s=i.current;if(!s)return;const u=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==e&&m){const v=new Event("change",{bubbles:!0});m.call(s,e),s.dispatchEvent(v)}},[a,e]),q.jsx(Xr.select,{...n,style:{...Jce,...n.style},ref:o,defaultValue:e})});bue.displayName=pKe;function wue(t){return t===""||t===void 0}function Oue(t){const e=J0(t),n=j.useRef(""),r=j.useRef(0),i=j.useCallback(a=>{const s=n.current+a;e(s),(function u(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))})(s)},[e]),o=j.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function Sue(t,e,n){const i=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let a=mKe(t,Math.max(o,0));i.length===1&&(a=a.filter(d=>d!==n));const u=a.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}function mKe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Cue=tue,Tue=rue,gKe=oue,kue=sue,yKe=aue,vKe=lue,xKe=due,_Ke=gue,bKe=yue,wKe=_ue,[_D]=by("Tooltip",[lS]),bD=lS(),Eue="TooltipProvider",OKe=700,dN="tooltip.open",[SKe,t7]=_D(Eue),Aue=t=>{const{__scopeTooltip:e,delayDuration:n=OKe,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=t,a=j.useRef(!0),s=j.useRef(!1),u=j.useRef(0);return j.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),q.jsx(SKe,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:j.useCallback(()=>{window.clearTimeout(u.current),a.current=!1},[]),onClose:j.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:j.useCallback(d=>{s.current=d},[]),disableHoverableContent:i,children:o})};Aue.displayName=Eue;var lk="Tooltip",[CKe,fE]=_D(lk),Pue=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i,onOpenChange:o,disableHoverableContent:a,delayDuration:s}=t,u=t7(lk,t.__scopeTooltip),d=bD(e),[m,v]=j.useState(null),_=Xg(),O=j.useRef(0),E=a??u.disableHoverableContent,A=s??u.delayDuration,M=j.useRef(!1),[L,$]=cy({prop:r,defaultProp:i??!1,onChange:H=>{H?(u.onOpen(),document.dispatchEvent(new CustomEvent(dN))):u.onClose(),o?.(H)},caller:lk}),N=j.useMemo(()=>L?M.current?"delayed-open":"instant-open":"closed",[L]),F=j.useCallback(()=>{window.clearTimeout(O.current),O.current=0,M.current=!1,$(!0)},[$]),Q=j.useCallback(()=>{window.clearTimeout(O.current),O.current=0,$(!1)},[$]),W=j.useCallback(()=>{window.clearTimeout(O.current),O.current=window.setTimeout(()=>{M.current=!0,$(!0),O.current=0},A)},[A,$]);return j.useEffect(()=>()=>{O.current&&(window.clearTimeout(O.current),O.current=0)},[]),q.jsx(i9,{...d,children:q.jsx(CKe,{scope:e,contentId:_,open:L,stateAttribute:N,trigger:m,onTriggerChange:v,onTriggerEnter:j.useCallback(()=>{u.isOpenDelayedRef.current?W():F()},[u.isOpenDelayedRef,W,F]),onTriggerLeave:j.useCallback(()=>{E?Q():(window.clearTimeout(O.current),O.current=0)},[Q,E]),onOpen:F,onClose:Q,disableHoverableContent:E,children:n})})};Pue.displayName=lk;var fN="TooltipTrigger",Mue=j.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=fE(fN,n),o=t7(fN,n),a=bD(n),s=j.useRef(null),u=Lo(e,s,i.onTriggerChange),d=j.useRef(!1),m=j.useRef(!1),v=j.useCallback(()=>d.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),q.jsx(jI,{asChild:!0,...a,children:q.jsx(Xr.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:u,onPointerMove:Er(t.onPointerMove,_=>{_.pointerType!=="touch"&&!m.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),m.current=!0)}),onPointerLeave:Er(t.onPointerLeave,()=>{i.onTriggerLeave(),m.current=!1}),onPointerDown:Er(t.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:Er(t.onFocus,()=>{d.current||i.onOpen()}),onBlur:Er(t.onBlur,i.onClose),onClick:Er(t.onClick,i.onClose)})})});Mue.displayName=fN;var n7="TooltipPortal",[TKe,kKe]=_D(n7,{forceMount:void 0}),Rue=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,o=fE(n7,e);return q.jsx(TKe,{scope:e,forceMount:n,children:q.jsx(mv,{present:n||o.open,children:q.jsx(Xk,{asChild:!0,container:i,children:r})})})};Rue.displayName=n7;var RO="TooltipContent",Iue=j.forwardRef((t,e)=>{const n=kKe(RO,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=t,a=fE(RO,t.__scopeTooltip);return q.jsx(mv,{present:r||a.open,children:a.disableHoverableContent?q.jsx(Due,{side:i,...o,ref:e}):q.jsx(EKe,{side:i,...o,ref:e})})}),EKe=j.forwardRef((t,e)=>{const n=fE(RO,t.__scopeTooltip),r=t7(RO,t.__scopeTooltip),i=j.useRef(null),o=Lo(e,i),[a,s]=j.useState(null),{trigger:u,onClose:d}=n,m=i.current,{onPointerInTransitChange:v}=r,_=j.useCallback(()=>{s(null),v(!1)},[v]),O=j.useCallback((E,A)=>{const M=E.currentTarget,L={x:E.clientX,y:E.clientY},$=RKe(L,M.getBoundingClientRect()),N=IKe(L,$),F=DKe(A.getBoundingClientRect()),Q=$Ke([...N,...F]);s(Q),v(!0)},[v]);return j.useEffect(()=>()=>_(),[_]),j.useEffect(()=>{if(u&&m){const E=M=>O(M,m),A=M=>O(M,u);return u.addEventListener("pointerleave",E),m.addEventListener("pointerleave",A),()=>{u.removeEventListener("pointerleave",E),m.removeEventListener("pointerleave",A)}}},[u,m,O,_]),j.useEffect(()=>{if(a){const E=A=>{const M=A.target,L={x:A.clientX,y:A.clientY},$=u?.contains(M)||m?.contains(M),N=!LKe(L,a);$?_():N&&(_(),d())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[u,m,a,d,_]),q.jsx(Due,{...t,ref:o})}),[AKe,PKe]=_D(lk,{isInside:!1}),MKe=gze("TooltipContent"),Due=j.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:a,...s}=t,u=fE(RO,n),d=bD(n),{onClose:m}=u;return j.useEffect(()=>(document.addEventListener(dN,m),()=>document.removeEventListener(dN,m)),[m]),j.useEffect(()=>{if(u.trigger){const v=_=>{_.target?.contains(u.trigger)&&m()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[u.trigger,m]),q.jsx(Hk,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:v=>v.preventDefault(),onDismiss:m,children:q.jsxs(o9,{"data-state":u.stateAttribute,...d,...s,ref:e,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[q.jsx(MKe,{children:r}),q.jsx(AKe,{scope:n,isInside:!0,children:q.jsx(UYe,{id:u.contentId,role:"tooltip",children:i||r})})]})})});Iue.displayName=RO;var Lue="TooltipArrow",$ue=j.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=bD(n);return PKe(Lue,n).isInside?null:q.jsx(s9,{...i,...r,ref:e})});$ue.displayName=Lue;function RKe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function IKe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function DKe(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function LKe(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const s=e[o],u=e[a],d=s.x,m=s.y,v=u.x,_=u.y;m>r!=_>r&&n<(v-d)*(r-m)/(_-m)+d&&(i=!i)}return i}function $Ke(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),zKe(e)}function zKe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const o=e[e.length-1],a=e[e.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var zue=Aue,Nue=Pue,Bue=Mue,Fue=Rue,jue=Iue,NKe=$ue;const pE=le.forwardRef(({title:t,children:e},n)=>{const r=$s(pv);return le.createElement(zue,{delayDuration:100},le.createElement(Nue,null,le.createElement(Bue,{ref:n,asChild:!0},le.createElement("span",{className:Ut.tooltipTrigger},e)),le.createElement(Fue,{container:r?.current},le.createElement(jue,{className:ni(Ut.tooltipContent),sideOffset:10},t))))}),Vue=le.forwardRef(({children:t,className:e,...n},r)=>le.createElement(_Ke,{...n,ref:r,className:ni(e,Ut.selectItem)},le.createElement(bKe,null,t))),BKe=({title:t,placeholder:e,className:n})=>{const[r,i]=us(ml,la);return le.createElement(pE,{title:t},le.createElement(Tue,{"aria-label":e,className:ni(Ut.selectTrigger,n),"data-toolbar-item":!0,disabled:r},le.createElement(gKe,{placeholder:e}),le.createElement(kue,{className:Ut.selectDropdownArrow},i("arrow_drop_down"))))},Que=({children:t,className:e=Ut.selectContainer})=>{const n=$s(pv);return le.createElement(yKe,{container:n?.current},le.createElement(vKe,{className:ni(e,"mdxeditor-select-content"),onCloseAutoFocus:r=>{r.preventDefault()},position:"popper"},le.createElement(xKe,{"data-editor-dropdown":!0},t)))},FKe=({children:t,title:e,className:n})=>{const[r,i]=us(ml,la);return le.createElement(pE,{title:e},le.createElement(Tue,{className:ni(Ut.toolbarButtonSelectTrigger,n),disabled:r},t,le.createElement(kue,{className:Ut.selectDropdownArrow},i("arrow_drop_down"))))},Uue=t=>le.createElement(Cue,{value:t.value||"",onValueChange:t.onChange,disabled:t.disabled},le.createElement(BKe,{title:t.triggerTitle,placeholder:t.placeholder}),le.createElement(Que,null,t.items.map((e,n)=>e==="separator"?le.createElement(wKe,{key:n}):le.createElement(Vue,{key:n,value:e.value},e.label)))),WG="__EMPTY_VALUE__",jKe=({language:t,nodeKey:e,code:n,focusEmitter:r})=>{const i=Bs(),{parentEditor:o,lexicalNode:a}=l6(),[s,u,d,m,v]=us(ml,mN,gN,la,pN),_=ZXe(e,"codeblock",t,r),{setCode:O}=l6(),E=le.useRef(null),A=le.useRef(null),M=le.useRef(O);return M.current=O,_.current={getCodemirror:()=>E.current},le.useEffect(()=>{const L=A.current;return(async()=>{const $=[...u,Kce,Nce,gF(),dS.of([THe]),pn.lineWrapping,pn.updateListener.of(({state:N})=>{M.current(N.doc.toString())}),pn.domEventHandlers({focus:()=>{o.update(()=>{cs(null)})}})];if(s&&$.push($r.readOnly.of(!0)),t!==""&&d){const N=qXe.find(F=>F.name===t||F.alias.includes(t)||F.extensions.includes(t));if(N)try{const F=await N.load();$.push(F.extension)}catch{console.warn("failed to load language support for",t)}}L.innerHTML="",E.current=new pn({parent:L,state:$r.create({doc:n,extensions:$})}),L.addEventListener("keydown",HG)})(),()=>{var $;($=E.current)==null||$.destroy(),E.current=null,L.removeEventListener("keydown",HG)}},[s,t,...u]),le.createElement("div",{className:Ut.codeMirrorWrapper},le.createElement("div",{className:Ut.codeMirrorToolbar},le.createElement(Uue,{disabled:s,value:t,onChange:L=>{o.update(()=>{a.setLanguage(L===WG?"":L),setTimeout(()=>{o.update(()=>{a.getLatest().select()})})})},triggerTitle:i("codeBlock.selectLanguage","Select code block language"),placeholder:i("codeBlock.inlineLanguage","Language"),items:Object.entries(v).map(([L,$])=>({value:L||WG,label:$}))}),le.createElement("button",{className:Ut.iconButton,type:"button",disabled:s,title:i("codeblock.delete","Delete code block"),onClick:L=>{L.preventDefault(),o.update(()=>{a.remove()})}},m("delete_small"))),le.createElement("div",{ref:A}))};function HG(t){t.stopPropagation()}const pN=In({js:"JavaScript",ts:"TypeScript",tsx:"TypeScript (React)",jsx:"JavaScript (React)",css:"CSS"}),VKe=As(t=>{t.link(t.pipe(VKe,ny(({language:e,code:n})=>({code:n,language:e,meta:""}))),J9)}),mN=In([]),gN=In(!0),QKe=Zl({update(t,e){t.pubIn({[pN]:e?.codeBlockLanguages,[mN]:e?.codeMirrorExtensions??[],[gN]:e?.autoLoadLanguageSupport??!0})},init(t,e){t.pubIn({[pN]:e?.codeBlockLanguages,[mN]:e?.codeMirrorExtensions??[],[Kje]:UKe(e?.codeBlockLanguages??{}),[gN]:e?.autoLoadLanguageSupport??!0})}});function UKe(t){return{match(e,n){return Object.hasOwn(t,e??"")&&!n},priority:1,Editor:jKe}}const ZKe={}.hasOwnProperty,qKe={},GG=/^[^\t\n\r "#'.<=>`}]+$/,WKe=/^[^\t\n\r "'<=>`}]+$/;function HKe(){return{canContainEols:["textDirective"],enter:{directiveContainer:XKe,directiveContainerAttributes:S$,directiveContainerLabel:JKe,directiveLeaf:YKe,directiveLeafAttributes:S$,directiveText:KKe,directiveTextAttributes:S$},exit:{directiveContainer:P$,directiveContainerAttributeClassValue:T$,directiveContainerAttributeIdValue:C$,directiveContainerAttributeName:E$,directiveContainerAttributeValue:k$,directiveContainerAttributes:A$,directiveContainerLabel:eJe,directiveContainerName:O$,directiveLeaf:P$,directiveLeafAttributeClassValue:T$,directiveLeafAttributeIdValue:C$,directiveLeafAttributeName:E$,directiveLeafAttributeValue:k$,directiveLeafAttributes:A$,directiveLeafName:O$,directiveText:P$,directiveTextAttributeClassValue:T$,directiveTextAttributeIdValue:C$,directiveTextAttributeName:E$,directiveTextAttributeValue:k$,directiveTextAttributes:A$,directiveTextName:O$}}}function GKe(t){const e=qKe;if(e.quote!=='"'&&e.quote!=="'"&&e.quote!==null&&e.quote!==void 0)throw new Error("Invalid quote `"+e.quote+"`, expected `'` or `\"`");return n.peek=tJe,{handlers:{containerDirective:n,leafDirective:n,textDirective:n},unsafe:[{character:"\r",inConstruct:["leafDirectiveLabel","containerDirectiveLabel"]},{character:`
`,inConstruct:["leafDirectiveLabel","containerDirectiveLabel"]},{before:"[^:]",character:":",after:"[A-Za-z]",inConstruct:["phrasing"]},{atBreak:!0,character:":",after:":"}]};function n(o,a,s,u){const d=s.createTracker(u),m=nJe(o),v=s.enter(o.type);let _=d.move(m+(o.name||"")),O;if(o.type==="containerDirective"){const E=(o.children||[])[0];O=XG(E)?E:void 0}else O=o;if(O&&O.children&&O.children.length>0){const E=s.enter("label"),A=`${o.type}Label`,M=s.enter(A);_+=d.move("["),_+=d.move(s.containerPhrasing(O,{...d.current(),before:_,after:"]"})),_+=d.move("]"),M(),E()}if(_+=d.move(r(o,s)),o.type==="containerDirective"){const E=(o.children||[])[0];let A=o;XG(E)&&(A=Object.assign({},o,{children:o.children.slice(1)})),A&&A.children&&A.children.length>0&&(_+=d.move(`
`),_+=d.move(s.containerFlow(A,d.current()))),_+=d.move(`
`+m)}return v(),_}function r(o,a){const s=o.attributes||{},u=[];let d,m,v,_;for(_ in s)if(ZKe.call(s,_)&&s[_]!==void 0&&s[_]!==null){const O=String(s[_]);if(_==="id")v=e.preferShortcut!==!1&&GG.test(O)?"#"+O:i("id",O,o,a);else if(_==="class"){const E=O.split(/[\t\n\r ]+/g),A=[],M=[];let L=-1;for(;++L<E.length;)(e.preferShortcut!==!1&&GG.test(E[L])?M:A).push(E[L]);d=A.length>0?i("class",A.join(" "),o,a):"",m=M.length>0?"."+M.join("."):""}else u.push(i(_,O,o,a))}return d&&u.unshift(d),m&&u.unshift(m),v&&u.unshift(v),u.length>0?"{"+u.join(" ")+"}":""}function i(o,a,s,u){if(e.collapseEmptyAttributes!==!1&&!a)return o;if(e.preferUnquoted&&WKe.test(a))return o+"="+a;const d=e.quote||u.options.quote||'"',m=d==='"'?"'":'"',v=e.quoteSmart&&cM(a,d)>cM(a,m)?m:d,_=s.type==="textDirective"?[v]:[v,`
`,"\r"];return o+"="+v+Ate(a,{subset:_})+v}}function XKe(t){r7.call(this,"containerDirective",t)}function YKe(t){r7.call(this,"leafDirective",t)}function KKe(t){r7.call(this,"textDirective",t)}function r7(t,e){this.enter({type:t,name:"",attributes:{},children:[]},e)}function O$(t){const e=this.stack[this.stack.length-1];e.type==="containerDirective"||e.type==="leafDirective"||e.type,e.name=this.sliceSerialize(t)}function JKe(t){this.enter({type:"paragraph",data:{directiveLabel:!0},children:[]},t)}function eJe(t){this.exit(t)}function S$(){this.data.directiveAttributes=[],this.buffer()}function C$(t){this.data.directiveAttributes.push(["id",CI(this.sliceSerialize(t),{attribute:!0})])}function T$(t){this.data.directiveAttributes.push(["class",CI(this.sliceSerialize(t),{attribute:!0})])}function k$(t){const e=this.data.directiveAttributes;e[e.length-1][1]=CI(this.sliceSerialize(t),{attribute:!0})}function E$(t){this.data.directiveAttributes.push([this.sliceSerialize(t),""])}function A$(){const t=this.data.directiveAttributes,e={};let n=-1;for(;++n<t.length;){const i=t[n];i[0]==="class"&&e.class?e.class+=" "+i[1]:e[i[0]]=i[1]}this.data.directiveAttributes=void 0,this.resume();const r=this.stack[this.stack.length-1];r.type==="containerDirective"||r.type==="leafDirective"||r.type,r.attributes=e}function P$(t){this.exit(t)}function tJe(){return":"}function XG(t){return!!(t&&t.type==="paragraph"&&t.data&&t.data.directiveLabel)}function nJe(t){let e=0;return t.type==="containerDirective"?(YJ(t,function(n,r){if(n.type==="containerDirective"){let i=r.length,o=0;for(;i--;)r[i].type==="containerDirective"&&o++;o>e&&(e=o)}}),e+=3):t.type==="leafDirective"?e=2:e=1,":".repeat(e)}function i7(t,e,n,r,i,o,a,s,u,d,m,v,_,O,E){let A,M;return L;function L(fe){return t.enter(r),t.enter(i),t.consume(fe),t.exit(i),$}function $(fe){return fe===35?(A=a,N(fe)):fe===46?(A=s,N(fe)):fe===58||fe===95||ed(fe)?(t.enter(o),t.enter(u),t.consume(fe),W):E&&_r(fe)?Rr(t,$,"whitespace")(fe):!E&&Ri(fe)?Zg(t,$)(fe):be(fe)}function N(fe){const ve=A+"Marker";return t.enter(o),t.enter(A),t.enter(ve),t.consume(fe),t.exit(ve),F}function F(fe){if(fe===null||fe===34||fe===35||fe===39||fe===46||fe===60||fe===61||fe===62||fe===96||fe===125||Ri(fe))return n(fe);const ve=A+"Value";return t.enter(ve),t.consume(fe),Q}function Q(fe){if(fe===null||fe===34||fe===39||fe===60||fe===61||fe===62||fe===96)return n(fe);if(fe===35||fe===46||fe===125||Ri(fe)){const ve=A+"Value";return t.exit(ve),t.exit(A),t.exit(o),$(fe)}return t.consume(fe),Q}function W(fe){return fe===45||fe===46||fe===58||fe===95||xc(fe)?(t.consume(fe),W):(t.exit(u),E&&_r(fe)?Rr(t,H,"whitespace")(fe):!E&&Ri(fe)?Zg(t,H)(fe):H(fe))}function H(fe){return fe===61?(t.enter(d),t.consume(fe),t.exit(d),te):(t.exit(o),$(fe))}function te(fe){return fe===null||fe===60||fe===61||fe===62||fe===96||fe===125||E&&Mn(fe)?n(fe):fe===34||fe===39?(t.enter(m),t.enter(_),t.consume(fe),t.exit(_),M=fe,ce):E&&_r(fe)?Rr(t,te,"whitespace")(fe):!E&&Ri(fe)?Zg(t,te)(fe):(t.enter(v),t.enter(O),t.consume(fe),M=void 0,ne)}function ne(fe){return fe===null||fe===34||fe===39||fe===60||fe===61||fe===62||fe===96?n(fe):fe===125||Ri(fe)?(t.exit(O),t.exit(v),t.exit(o),$(fe)):(t.consume(fe),ne)}function ce(fe){return fe===M?(t.enter(_),t.consume(fe),t.exit(_),t.exit(m),t.exit(o),se):(t.enter(v),we(fe))}function we(fe){return fe===M?(t.exit(v),ce(fe)):fe===null?n(fe):Mn(fe)?E?n(fe):Zg(t,we)(fe):(t.enter(O),t.consume(fe),re)}function re(fe){return fe===M||fe===null||Mn(fe)?(t.exit(O),we(fe)):(t.consume(fe),re)}function se(fe){return fe===125||Ri(fe)?$(fe):be(fe)}function be(fe){return fe===125?(t.enter(i),t.consume(fe),t.exit(i),t.exit(r),e):n(fe)}}function o7(t,e,n,r,i,o,a){let s=0,u=0,d;return m;function m(M){return t.enter(r),t.enter(i),t.consume(M),t.exit(i),v}function v(M){return M===93?(t.enter(i),t.consume(M),t.exit(i),t.exit(r),e):(t.enter(o),_(M))}function _(M){if(M===93&&!u)return A(M);const L=t.enter("chunkText",{contentType:"text",previous:d});return d&&(d.next=L),d=L,O(M)}function O(M){return M===null||s>999||M===91&&++u>32?n(M):M===93&&!u--?(t.exit("chunkText"),A(M)):Mn(M)?a?n(M):(t.consume(M),t.exit("chunkText"),_):(t.consume(M),M===92?E:O)}function E(M){return M===91||M===92||M===93?(t.consume(M),s++,O):O(M)}function A(M){return t.exit(o),t.enter(i),t.consume(M),t.exit(i),t.exit(r),e}}function s7(t,e,n,r){const i=this;return o;function o(s){return ed(s)?(t.enter(r),t.consume(s),a):n(s)}function a(s){return s===45||s===95||xc(s)?(t.consume(s),a):(t.exit(r),i.previous===45||i.previous===95?n(s):e(s))}}const rJe={tokenize:sJe,concrete:!0},iJe={tokenize:aJe,partial:!0},oJe={tokenize:lJe,partial:!0},PP={tokenize:cJe,partial:!0};function sJe(t,e,n){const r=this,i=r.events[r.events.length-1],o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0;let a=0,s;return u;function u(ne){return t.enter("directiveContainer"),t.enter("directiveContainerFence"),t.enter("directiveContainerSequence"),d(ne)}function d(ne){return ne===58?(t.consume(ne),a++,d):a<3?n(ne):(t.exit("directiveContainerSequence"),s7.call(r,t,m,n,"directiveContainerName")(ne))}function m(ne){return ne===91?t.attempt(iJe,v,v)(ne):v(ne)}function v(ne){return ne===123?t.attempt(oJe,_,_)(ne):_(ne)}function _(ne){return Rr(t,O,"whitespace")(ne)}function O(ne){return t.exit("directiveContainerFence"),ne===null?H(ne):Mn(ne)?r.interrupt?e(ne):t.attempt(PP,E,H)(ne):n(ne)}function E(ne){return ne===null?H(ne):Mn(ne)?t.check(PP,N,H)(ne):(t.enter("directiveContainerContent"),A(ne))}function A(ne){return t.attempt({tokenize:te,partial:!0},W,o?Rr(t,M,"linePrefix",o+1):M)(ne)}function M(ne){return ne===null?W(ne):Mn(ne)?t.check(PP,$,W)(ne):$(ne)}function L(ne){if(ne===null){const ce=t.exit("chunkDocument");return r.parser.lazy[ce.start.line]=!1,W(ne)}return Mn(ne)?t.check(PP,F,Q)(ne):(t.consume(ne),L)}function $(ne){const ce=t.enter("chunkDocument",{contentType:"document",previous:s});return s&&(s.next=ce),s=ce,L(ne)}function N(ne){return t.enter("directiveContainerContent"),A(ne)}function F(ne){t.consume(ne);const ce=t.exit("chunkDocument");return r.parser.lazy[ce.start.line]=!1,A}function Q(ne){const ce=t.exit("chunkDocument");return r.parser.lazy[ce.start.line]=!1,W(ne)}function W(ne){return t.exit("directiveContainerContent"),H(ne)}function H(ne){return t.exit("directiveContainer"),e(ne)}function te(ne,ce,we){let re=0;return Rr(ne,se,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function se(ve){return ne.enter("directiveContainerFence"),ne.enter("directiveContainerSequence"),be(ve)}function be(ve){return ve===58?(ne.consume(ve),re++,be):re<a?we(ve):(ne.exit("directiveContainerSequence"),Rr(ne,fe,"whitespace")(ve))}function fe(ve){return ve===null||Mn(ve)?(ne.exit("directiveContainerFence"),ce(ve)):we(ve)}}}function aJe(t,e,n){return o7(t,e,n,"directiveContainerLabel","directiveContainerLabelMarker","directiveContainerLabelString",!0)}function lJe(t,e,n){return i7(t,e,n,"directiveContainerAttributes","directiveContainerAttributesMarker","directiveContainerAttribute","directiveContainerAttributeId","directiveContainerAttributeClass","directiveContainerAttributeName","directiveContainerAttributeInitializerMarker","directiveContainerAttributeValueLiteral","directiveContainerAttributeValue","directiveContainerAttributeValueMarker","directiveContainerAttributeValueData",!0)}function cJe(t,e,n){const r=this;return i;function i(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o}function o(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const uJe={tokenize:fJe},hJe={tokenize:pJe,partial:!0},dJe={tokenize:mJe,partial:!0};function fJe(t,e,n){const r=this;return i;function i(m){return t.enter("directiveLeaf"),t.enter("directiveLeafSequence"),t.consume(m),o}function o(m){return m===58?(t.consume(m),t.exit("directiveLeafSequence"),s7.call(r,t,a,n,"directiveLeafName")):n(m)}function a(m){return m===91?t.attempt(hJe,s,s)(m):s(m)}function s(m){return m===123?t.attempt(dJe,u,u)(m):u(m)}function u(m){return Rr(t,d,"whitespace")(m)}function d(m){return m===null||Mn(m)?(t.exit("directiveLeaf"),e(m)):n(m)}}function pJe(t,e,n){return o7(t,e,n,"directiveLeafLabel","directiveLeafLabelMarker","directiveLeafLabelString",!0)}function mJe(t,e,n){return i7(t,e,n,"directiveLeafAttributes","directiveLeafAttributesMarker","directiveLeafAttribute","directiveLeafAttributeId","directiveLeafAttributeClass","directiveLeafAttributeName","directiveLeafAttributeInitializerMarker","directiveLeafAttributeValueLiteral","directiveLeafAttributeValue","directiveLeafAttributeValueMarker","directiveLeafAttributeValueData",!0)}const gJe={tokenize:_Je,previous:xJe},yJe={tokenize:bJe,partial:!0},vJe={tokenize:wJe,partial:!0};function xJe(t){return t!==58||this.events[this.events.length-1][1].type==="characterEscape"}function _Je(t,e,n){const r=this;return i;function i(u){return t.enter("directiveText"),t.enter("directiveTextMarker"),t.consume(u),t.exit("directiveTextMarker"),s7.call(r,t,o,n,"directiveTextName")}function o(u){return u===58?n(u):u===91?t.attempt(yJe,a,a)(u):a(u)}function a(u){return u===123?t.attempt(vJe,s,s)(u):s(u)}function s(u){return t.exit("directiveText"),e(u)}}function bJe(t,e,n){return o7(t,e,n,"directiveTextLabel","directiveTextLabelMarker","directiveTextLabelString")}function wJe(t,e,n){return i7(t,e,n,"directiveTextAttributes","directiveTextAttributesMarker","directiveTextAttribute","directiveTextAttributeId","directiveTextAttributeClass","directiveTextAttributeName","directiveTextAttributeInitializerMarker","directiveTextAttributeValueLiteral","directiveTextAttributeValue","directiveTextAttributeValueMarker","directiveTextAttributeValueData")}function OJe(){return{text:{58:gJe},flow:{58:[rJe,uJe]}}}var SJe=Object.defineProperty,CJe=(t,e,n)=>e in t?SJe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M$=(t,e,n)=>(CJe(t,typeof e!="symbol"?e+"":e,n),n);class mE extends gy{constructor(e,n){super(n),M$(this,"__mdastNode"),M$(this,"__focusEmitter",a6()),M$(this,"select",()=>{this.__focusEmitter.publish()}),this.__mdastNode=e}static getType(){return"directive"}static clone(e){return new mE(structuredClone(e.__mdastNode),e.__key)}static importJSON(e){return a7(e.mdastNode)}getMdastNode(){return this.__mdastNode}exportJSON(){return{mdastNode:structuredClone(this.__mdastNode),type:"directive",version:1}}createDOM(){return document.createElement(this.__mdastNode.type==="textDirective"?"span":"div")}updateDOM(){return!1}setMdastNode(e){this.getWritable().__mdastNode=e}decorate(e,n){return le.createElement(TJe,{lexicalNode:this,mdastNode:this.getMdastNode(),parentEditor:e,config:n,focusEmitter:this.__focusEmitter})}isInline(){return this.__mdastNode.type==="textDirective"}isKeyboardSelectable(){return!0}}const TJe=t=>{const{mdastNode:e}=t,[n]=us(uO),r=n.find(o=>o.testNode(e));if(!r)throw new Error(`No descriptor found for directive ${e.name}`);const i=r.Editor;return le.createElement(Joe.Provider,{value:t},le.createElement(i,{descriptor:r,mdastNode:e,lexicalNode:t.lexicalNode,parentEditor:t.parentEditor}))};function a7(t,e){return new mE(t,e)}function kJe(t){return t instanceof mE}const EJe={testLexicalNode:kJe,visitLexicalNode({actions:t,mdastParent:e,lexicalNode:n}){t.appendToParent(e,n.getMdastNode())}},AJe=["leafDirective","containerDirective","textDirective"];function PJe(t){return AJe.includes(t.type)}const MJe=t=>({testNode:(e,{directiveDescriptors:n})=>{if(PJe(e)){const r=n.find(i=>i.testNode(e));return t&&!r&&e.type==="textDirective"?!0:r!==void 0}return!1},visitNode({lexicalParent:e,mdastNode:n,descriptors:r}){!t||r.directiveDescriptors.some(o=>o.testNode(n))?e.append(a7(n)):e.append(so(`:${n.name}`))}}),Zue=As(t=>{t.link(t.pipe(Zue,ny(e=>()=>a7({children:[],...e}))),II)}),RJe=Zl({update:(t,e)=>{t.pub(uO,e?.directiveDescriptors??[])},init:(t,e)=>{t.pubIn({[uO]:e?.directiveDescriptors??[],[dO]:HKe(),[hO]:OJe(),[vd]:MJe(e?.escapeUnknownTextDirectives),[jf]:mE,[Vf]:EJe,[qk]:GKe()})}}),que=["note","tip","danger","info","caution"],IJe={name:"admonition",attributes:[],hasChildren:!0,testNode(t){return que.includes(t.name)},Editor({mdastNode:t}){var e;const{config:{theme:n}}=nD();return le.createElement("div",{className:(e=n.admonition)==null?void 0:e[t.name]},le.createElement(Qje,{block:!0,getContent:r=>r.children,getUpdatedMdastNode:(r,i)=>({...r,children:i})}))}};function DJe({url:t,title:e,text:n,onSubmit:r,onCancel:i,linkAutocompleteSuggestions:o,showLinkTitleField:a,showAnchorTextField:s}){const{register:u,handleSubmit:d,control:m,setValue:v,reset:_}=E9({values:{url:t,title:e,text:n}}),O=Bs();return le.createElement("form",{onSubmit:E=>{d(r)(E),E.stopPropagation(),E.preventDefault()},onReset:E=>{E.stopPropagation(),i()},onKeyDown:E=>{E.key==="Escape"&&(E.stopPropagation(),i())},className:ni(Ut.multiFieldForm,Ut.linkDialogEditForm)},le.createElement("div",{className:Ut.formField},le.createElement("label",{htmlFor:"link-url"},O("createLink.url","URL")),le.createElement(ioe,{register:u,initialInputValue:t,inputName:"url",suggestions:o,setValue:v,control:m,placeholder:O("createLink.urlPlaceholder","Select or paste an URL"),autofocus:!0})),s?le.createElement("div",{className:Ut.formField},le.createElement("label",{htmlFor:"link-text",title:O("createLink.textTooltip","The text to be displayed for the link")},O("createLink.text","Anchor text")),le.createElement("input",{id:"link-text",className:Ut.textInput,size:40,...u("text")})):null,a?le.createElement("div",{className:Ut.formField},le.createElement("label",{htmlFor:"link-title",title:O("createLink.titleTooltip","The link's title attribute, shown on hover")},O("createLink.title","Link title")),le.createElement("input",{id:"link-title",className:Ut.textInput,size:40,...u("title")})):null,le.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--spacing-2)"}},le.createElement("button",{type:"submit",title:O("createLink.saveTooltip","Set URL"),"aria-label":O("createLink.saveTooltip","Set URL"),className:ni(Ut.primaryButton)},O("dialogControls.save","Save")),le.createElement("button",{type:"reset",title:O("createLink.cancelTooltip","Cancel change"),"aria-label":O("createLink.cancelTooltip","Cancel change"),className:ni(Ut.secondaryButton)},O("dialogControls.cancel","Cancel"))))}const LJe=()=>{const[t,e,n,r,i,o,a]=us(pv,Uo,la,tu,Kue,Jue,the),s=Ki(Wue),u=Ki(Hue),d=Ki(Gue),m=Ki(Xue),v=Ki(Yue);le.useEffect(()=>{const L=()=>{e?.getEditorState().read(()=>{s(!0)})};return window.addEventListener("resize",L),window.addEventListener("scroll",L),()=>{window.removeEventListener("resize",L),window.removeEventListener("scroll",L)}},[e,s]);const[_,O]=le.useState(!1),E=Bs();if(r.type==="inactive")return null;const A=r.rectangle,M=r.type==="preview"&&r.url.startsWith("http");return le.createElement(u9,{open:!0},le.createElement(rBe,{"data-visible":r.type==="edit",className:Ut.linkDialogAnchor,style:{top:`${A.top}px`,left:`${A.left}px`,width:`${A.width}px`,height:`${A.height}px`}}),le.createElement(h9,{container:t?.current},le.createElement(iBe,{className:ni(Ut.linkDialogPopoverContent),sideOffset:5,onOpenAutoFocus:L=>{L.preventDefault()},key:r.linkNodeKey},r.type==="edit"&&le.createElement(DJe,{url:r.url,title:r.title,text:r.text,onSubmit:u,onCancel:d.bind(null),linkAutocompleteSuggestions:i,showLinkTitleField:a,showAnchorTextField:r.withAnchorText}),r.type==="preview"&&le.createElement(le.Fragment,null,le.createElement("a",{className:Ut.linkDialogPreviewAnchor,href:r.url,...M?{target:"_blank",rel:"noreferrer"}:{},onClick:L=>{o!==null&&(L.preventDefault(),o(r.url))},title:M?E("linkPreview.open","Open {{url}} in new window",{url:r.url}):r.url},le.createElement("span",null,r.url),M&&n("open_in_new")),le.createElement(R$,{onClick:()=>{m()},title:E("linkPreview.edit","Edit link URL"),"aria-label":E("linkPreview.edit","Edit link URL")},n("edit")),le.createElement(zue,null,le.createElement(Nue,{open:_},le.createElement(Bue,{asChild:!0},le.createElement(R$,{title:E("linkPreview.copyToClipboard","Copy to clipboard"),"aria-label":E("linkPreview.copyToClipboard","Copy to clipboard"),onClick:()=>{window.navigator.clipboard.writeText(r.url).then(()=>{O(!0),setTimeout(()=>{O(!1)},1e3)})}},n(_?"check":"content_copy"))),le.createElement(Fue,{container:t?.current},le.createElement(jue,{className:ni(Ut.tooltipContent),sideOffset:5},E("linkPreview.copied","Copied!"),le.createElement(NKe,null))))),le.createElement(R$,{title:E("linkPreview.remove","Remove link"),"aria-label":E("linkPreview.remove","Remove link"),onClick:()=>{v()}},n("link_off"))),le.createElement(d9,{className:Ut.popoverArrow}))))},R$=le.forwardRef(({className:t,...e},n)=>le.createElement("button",{className:ni(Ut.actionButton,t),ref:n,...e}));function yN(t){if(!t)return null;const e=a4e(t);if(e===null)return null;const n=e.getParent();return iu(n)?n:iu(e)?e:null}const Wue=As(),tu=In({type:"inactive"},t=>{t.pub(AT,e=>e.registerCommand(Ik,()=>t.getValue(tu).type==="preview"?(t.pub(tu,{type:"inactive"}),!0):!1,bo)),t.sub(t.pipe($_),e=>{e!=="rich-text"&&t.pub(tu,{type:"inactive"})}),t.pub(AT,e=>e.registerCommand(nI,n=>{if(n.key==="k"&&(yM?n.metaKey:n.ctrlKey)&&!t.getValue(ml)){const r=cn();return Kt(r)?(t.pub(l7),n.stopPropagation(),n.preventDefault(),!0):!1}return!1},iM)),t.sub(t.pipe(Xue,Qo(tu,Uo)),([,e,n])=>{if(e.type==="preview")setTimeout(()=>{n?.getEditorState().read(()=>{const r=Fi(e.linkNodeKey),i=iu(r)?r.getTextContent().length>0&&r.getChildrenSize()<=1:!1,o=i&&r?r.getTextContent():"";t.pub(tu,{type:"edit",initialUrl:e.url,url:e.url,title:e.title,text:o,withAnchorText:i,linkNodeKey:e.linkNodeKey,rectangle:e.rectangle})})});else throw new Error("Cannot switch to edit mode when not in preview mode")}),t.sub(t.pipe(Hue,Qo(Uo,tu,cO)),([e,n,r,i])=>{var o,a,s;const u=((o=e.text)==null?void 0:o.trim())??"",d=((a=e.url)==null?void 0:a.trim())??"",m=((s=e.title)==null?void 0:s.trim())??"";if(d!==""){if(i?.isCollapsed()){const v=u||m||d;n?.update(()=>{const _=yN(i);if(_)if(Cf(_)){const O=sy(d,{title:m});O.append(so(u)),_.replace(O),O.select()}else _.setURL(d),_.setTitle(m),YG(_.getFirstChild(),u);else{const O=sy(d,{title:m});O.append(so(v)),JO([O]),O.select()}},{discrete:!0})}else n?.update(()=>{YG(i?.anchor.getNode(),u)}),n?.dispatchCommand(fO,{url:d,title:m});t.pub(tu,{type:"preview",linkNodeKey:r.linkNodeKey,rectangle:r.rectangle,title:m,url:d})}else r.type==="edit"&&r.initialUrl!==""&&n?.dispatchCommand(fO,null),t.pub(tu,{type:"inactive"})}),t.link(t.pipe(Gue,Qo(tu,Uo),ny(([,e,n])=>{if(e.type==="edit")return n?.focus(),e.initialUrl===""?{type:"inactive"}:{type:"preview",url:e.initialUrl,linkNodeKey:e.linkNodeKey,rectangle:e.rectangle};throw new Error("Cannot cancel edit when not in edit mode")})),tu),t.link(t.pipe(t.combine(cO,Wue),Qo(Uo,tu,ml),ny(([[e],n,r,i])=>{if(Kt(e)&&n&&!i){const o=yN(e);if(!e.isCollapsed())return{type:"inactive"};if(o){const a=Mne(n);return a?{type:"preview",url:o.getURL(),linkNodeKey:o.getKey(),title:o.getTitle(),rectangle:a}:{type:"inactive"}}else return{type:"inactive"}}else return{type:"inactive"}})),tu)}),Hue=As(),Gue=Cm();Cm();const Xue=Cm(),Yue=Cm(t=>{t.sub(t.pipe(Yue,Qo(Uo)),([,e])=>{e?.dispatchCommand(fO,null)})}),l7=Cm(t=>{t.sub(t.pipe(l7,Qo(cO,Uo),Pk(([,e])=>Kt(e))),([,e,n])=>{n?.focus(()=>{setTimeout(()=>{n.getEditorState().read(()=>{const r=yN(e),i=Mne(n),o=r?.getURL()??"",a=r?.getURL()??"",s=r?.getTitle()??"",u=r?.getKey()??"",d=r?r.getTextContent().length>0&&r.getChildrenSize()<=1:!!e?.isCollapsed(),m=d&&r?r.getTextContent():"";t.pub(tu,{type:"edit",initialUrl:o,url:a,title:s,text:m,withAnchorText:d,linkNodeKey:u,rectangle:i})})})})})}),Kue=In([]),Jue=In(null),ehe=In(null,t=>{t.pub(AT,e=>{function n(r){const[i,o]=t.getValues([ml,ehe]);!i||o===null||e.update(()=>{const a=vm(r.target);if(a!==null){const s=Mf(a,u=>u instanceof vy);s!==null&&o(r,s,s.getURL())}})}return e.registerRootListener((r,i)=>{r&&r.addEventListener("click",n),i&&i.removeEventListener("click",n)})})});function YG(t,e){gn(t)&&e&&(t.setTextContent(e),t.selectStart())}const the=In(!0),$Je=Zl({init(t,e){t.pub(nb,e?.LinkDialog??LJe),t.pub(Jue,e?.onClickLinkCallback??null),t.pub(ehe,e?.onReadOnlyClickLinkCallback??null),t.pub(the,e?.showLinkTitleField??!0)},update(t,e={}){t.pub(Kue,e.linkAutocompleteSuggestions??[])}});function c7(t,e){return le.forwardRef((n,r)=>{const i=ni(e.className,n.className);return le.createElement(t,{...e,...n,className:i,ref:r})})}function zJe(t){return({title:e,children:n,...r})=>le.createElement(t,{...r},le.createElement(pE,{title:e},n))}const NJe=({readOnly:t,children:e,className:n})=>le.createElement(v9,{className:ni("mdxeditor-toolbar",Ut.toolbarRoot,{[Ut.readOnlyToolbarRoot]:t},n),...t?{tabIndex:-1}:{}},e),BJe=c7(m_,{className:Ut.toolbarButton,"data-toolbar-item":!0}),gE=zJe(BJe),nhe=c7(u5,{className:Ut.toolbarToggleItem,"data-toolbar-item":!0});c7(HI,{type:"single",className:Ut.toolbarToggleSingleGroup});const rhe=le.forwardRef(({on:t,title:e,children:n,disabled:r,...i},o)=>le.createElement(HI,{type:"single",className:Ut.toolbarToggleSingleGroup,...i,value:t?"on":"off",ref:o},le.createElement(nhe,{"aria-label":e,value:"on",disabled:r},le.createElement(pE,{title:e},n)))),ihe=({items:t})=>le.createElement("div",{className:Ut.toolbarGroupOfGroups},t.map((e,n)=>le.createElement(rhe,{key:n,title:e.title,on:e.active,onValueChange:r=>{e.onChange(r==="on")},disabled:e.disabled},e.contents))),FJe=({value:t,onChange:e,className:n,ggClassName:r,items:i})=>{const o=Bs();return le.createElement("div",{className:ni(Ut.toolbarGroupOfGroups,r)},le.createElement(HI,{"aria-label":o("toolbar.toggleGroup","toggle group"),type:"single",className:ni(Ut.toolbarToggleSingleGroup,n),onValueChange:e,value:t||"",onFocus:a=>{a.preventDefault()}},i.map((a,s)=>le.createElement(nhe,{key:s,"aria-label":a.title,value:a.value},le.createElement(pE,{title:a.title},a.contents)))))},jJe=t=>{const e=$s(ml);return le.createElement(le.Fragment,null,t.items.length===1?le.createElement(gE,{title:t.title,onClick:()=>{t.onChoose("")},disabled:e},t.children):le.createElement(Cue,{value:"",onValueChange:t.onChoose},le.createElement(FKe,{title:t.title},t.children),le.createElement(Que,{className:Ut.toolbarButtonDropdownContainer},t.items.map((n,r)=>le.createElement(Vue,{key:r,value:n.value},n.label)))))},H1=tie,I$=In(()=>null),D$=In(""),KG=()=>"This is an empty toolbar. Pass `{toolbarContents: () => { return <>toolbar components</> }}` to the toolbarPlugin to customize it.",VJe=Zl({init(t,e){const n=e?.toolbarPosition==="bottom"?oLe:iLe;t.pubIn({[I$]:e?.toolbarContents??KG,[D$]:e?.toolbarClassName??"",[n]:()=>{const[r,i,o]=us(I$,ml,D$);return le.createElement(NJe,{className:o,readOnly:i},r())}})},update(t,e){t.pub(I$,e?.toolbarContents??KG),t.pub(D$,e?.toolbarClassName??"")}});class Ks{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}offset(e,n=e){return new Ks(this.fromA+e,this.toA+e,this.fromB+n,this.toB+n)}}function H_(t,e,n,r,i,o){if(t==r)return[];let a=h7(t,e,n,r,i,o),s=d7(t,e+a,n,r,i+a,o);e+=a,n-=s,i+=a,o-=s;let u=n-e,d=o-i;if(!u||!d)return[new Ks(e,n,i,o)];if(u>d){let v=t.slice(e,n).indexOf(r.slice(i,o));if(v>-1)return[new Ks(e,e+v,i,i),new Ks(e+v+d,n,o,o)]}else if(d>u){let v=r.slice(i,o).indexOf(t.slice(e,n));if(v>-1)return[new Ks(e,e,i,i+v),new Ks(n,n,i+v+u,o)]}if(u==1||d==1)return[new Ks(e,n,i,o)];let m=ahe(t,e,n,r,i,o);if(m){let[v,_,O]=m;return H_(t,e,v,r,i,_).concat(H_(t,v+O,n,r,_+O,o))}return QJe(t,e,n,r,i,o)}let wC=1e9,OC=0,u7=!1;function QJe(t,e,n,r,i,o){let a=n-e,s=o-i;if(wC<1e9&&Math.min(a,s)>wC*16||OC>0&&Date.now()>OC)return Math.min(a,s)>wC*64?[new Ks(e,n,i,o)]:JG(t,e,n,r,i,o);let u=Math.ceil((a+s)/2);L$.reset(u),$$.reset(u);let d=(O,E)=>t.charCodeAt(e+O)==r.charCodeAt(i+E),m=(O,E)=>t.charCodeAt(n-O-1)==r.charCodeAt(o-E-1),v=(a-s)%2!=0?$$:null,_=v?null:L$;for(let O=0;O<u;O++){if(O>wC||OC>0&&!(O&63)&&Date.now()>OC)return JG(t,e,n,r,i,o);let E=L$.advance(O,a,s,u,v,!1,d)||$$.advance(O,a,s,u,_,!0,m);if(E)return UJe(t,e,n,e+E[0],r,i,o,i+E[1])}return[new Ks(e,n,i,o)]}class ohe{constructor(){this.vec=[]}reset(e){this.len=e<<1;for(let n=0;n<this.len;n++)this.vec[n]=-1;this.vec[e+1]=0,this.start=this.end=0}advance(e,n,r,i,o,a,s){for(let u=-e+this.start;u<=e-this.end;u+=2){let d=i+u,m=u==-e||u!=e&&this.vec[d-1]<this.vec[d+1]?this.vec[d+1]:this.vec[d-1]+1,v=m-u;for(;m<n&&v<r&&s(m,v);)m++,v++;if(this.vec[d]=m,m>n)this.end+=2;else if(v>r)this.start+=2;else if(o){let _=i+(n-r)-u;if(_>=0&&_<this.len&&o.vec[_]!=-1)if(a){let O=o.vec[_];if(O>=n-m)return[O,i+O-_]}else{let O=n-o.vec[_];if(m>=O)return[m,v]}}}return null}}const L$=new ohe,$$=new ohe;function UJe(t,e,n,r,i,o,a,s){let u=!1;return!IO(t,r)&&++r==n&&(u=!0),!IO(i,s)&&++s==a&&(u=!0),u?[new Ks(e,n,o,a)]:H_(t,e,r,i,o,s).concat(H_(t,r,n,i,s,a))}function she(t,e){let n=1,r=Math.min(t,e);for(;n<r;)n=n<<1;return n}function h7(t,e,n,r,i,o){if(e==n||e==o||t.charCodeAt(e)!=r.charCodeAt(i))return 0;let a=she(n-e,o-i);for(let s=e,u=i;;){let d=s+a,m=u+a;if(d>n||m>o||t.slice(s,d)!=r.slice(u,m)){if(a==1)return s-e-(IO(t,s)?0:1);a=a>>1}else{if(d==n||m==o)return d-e;s=d,u=m}}}function d7(t,e,n,r,i,o){if(e==n||i==o||t.charCodeAt(n-1)!=r.charCodeAt(o-1))return 0;let a=she(n-e,o-i);for(let s=n,u=o;;){let d=s-a,m=u-a;if(d<e||m<i||t.slice(d,s)!=r.slice(m,u)){if(a==1)return n-s-(IO(t,s)?0:1);a=a>>1}else{if(d==e||m==i)return n-d;s=d,u=m}}}function vN(t,e,n,r,i,o,a,s){let u=r.slice(i,o),d=null;for(;;){if(d||a<s)return d;for(let m=e+a;;){IO(t,m)||m++;let v=m+a;if(IO(t,v)||(v+=v==m+1?1:-1),v>=n)break;let _=t.slice(m,v),O=-1;for(;(O=u.indexOf(_,O+1))!=-1;){let E=h7(t,v,n,r,i+O+_.length,o),A=d7(t,e,m,r,i,i+O),M=_.length+E+A;(!d||d[2]<M)&&(d=[m-A,i+O-A,M])}m=v}if(s<0)return d;a=a>>1}}function ahe(t,e,n,r,i,o){let a=n-e,s=o-i;if(a<s){let u=ahe(r,i,o,t,e,n);return u&&[u[1],u[0],u[2]]}return a<4||s*2<a?null:vN(t,e,n,r,i,o,Math.floor(a/4),-1)}function JG(t,e,n,r,i,o){u7=!0;let a=n-e,s=o-i,u;if(a<s){let _=vN(r,i,o,t,e,n,Math.floor(a/6),50);u=_&&[_[1],_[0],_[2]]}else u=vN(t,e,n,r,i,o,Math.floor(s/6),50);if(!u)return[new Ks(e,n,i,o)];let[d,m,v]=u;return H_(t,e,d,r,i,m).concat(H_(t,d+v,n,r,m+v,o))}function lhe(t,e){for(let n=1;n<t.length;n++){let r=t[n-1],i=t[n];r.toA>i.fromA-e&&r.toB>i.fromB-e&&(t[n-1]=new Ks(r.fromA,i.toA,r.fromB,i.toB),t.splice(n--,1))}}function ZJe(t,e,n){for(;;){lhe(n,1);let r=!1;for(let i=0;i<n.length;i++){let o=n[i],a,s;(a=h7(t,o.fromA,o.toA,e,o.fromB,o.toB))&&(o=n[i]=new Ks(o.fromA+a,o.toA,o.fromB+a,o.toB)),(s=d7(t,o.fromA,o.toA,e,o.fromB,o.toB))&&(o=n[i]=new Ks(o.fromA,o.toA-s,o.fromB,o.toB-s));let u=o.toA-o.fromA,d=o.toB-o.fromB;if(u&&d)continue;let m=o.fromA-(i?n[i-1].toA:0),v=(i<n.length-1?n[i+1].fromA:t.length)-o.toA;if(!m||!v)continue;let _=u?t.slice(o.fromA,o.toA):e.slice(o.fromB,o.toB);m<=_.length&&t.slice(o.fromA-m,o.fromA)==_.slice(_.length-m)?(n[i]=new Ks(o.fromA-m,o.toA-m,o.fromB-m,o.toB-m),r=!0):v<=_.length&&t.slice(o.toA,o.toA+v)==_.slice(0,v)&&(n[i]=new Ks(o.fromA+v,o.toA+v,o.fromB+v,o.toB+v),r=!0)}if(!r)break}return n}function qJe(t,e,n){for(let r=0,i=0;i<t.length;i++){let o=t[i],a=o.toA-o.fromA,s=o.toB-o.fromB;if(a&&s||a>3||s>3){let u=i==t.length-1?e.length:t[i+1].fromA,d=o.fromA-r,m=u-o.toA,v=tX(e,o.fromA,d),_=eX(e,o.toA,m),O=o.fromA-v,E=_-o.toA;if((!a||!s)&&O&&E){let A=Math.max(a,s),[M,L,$]=a?[e,o.fromA,o.toA]:[n,o.fromB,o.toB];A>O&&e.slice(v,o.fromA)==M.slice($-O,$)?(o=t[i]=new Ks(v,v+a,o.fromB-O,o.toB-O),v=o.fromA,_=eX(e,o.toA,u-o.toA)):A>E&&e.slice(o.toA,_)==M.slice(L,L+E)&&(o=t[i]=new Ks(_-a,_,o.fromB+E,o.toB+E),_=o.toA,v=tX(e,o.fromA,o.fromA-r)),O=o.fromA-v,E=_-o.toA}if(O||E)o=t[i]=new Ks(o.fromA-O,o.toA+E,o.fromB-O,o.toB+E);else if(a){if(!s){let A=rX(e,o.fromA,o.toA),M,L=A<0?-1:nX(e,o.toA,o.fromA);A>-1&&(M=A-o.fromA)<=m&&e.slice(o.fromA,A)==e.slice(o.toA,o.toA+M)?o=t[i]=o.offset(M):L>-1&&(M=o.toA-L)<=d&&e.slice(o.fromA-M,o.fromA)==e.slice(L,o.toA)&&(o=t[i]=o.offset(-M))}}else{let A=rX(n,o.fromB,o.toB),M,L=A<0?-1:nX(n,o.toB,o.fromB);A>-1&&(M=A-o.fromB)<=m&&n.slice(o.fromB,A)==n.slice(o.toB,o.toB+M)?o=t[i]=o.offset(M):L>-1&&(M=o.toB-L)<=d&&n.slice(o.fromB-M,o.fromB)==n.slice(L,o.toB)&&(o=t[i]=o.offset(-M))}}r=o.toA}return lhe(t,3),t}let __;try{__=new RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch{}function che(t){return t>48&&t<58||t>64&&t<91||t>96&&t<123}function uhe(t,e){if(e==t.length)return 0;let n=t.charCodeAt(e);return n<192?che(n)?1:0:__?!fhe(n)||e==t.length-1?__.test(String.fromCharCode(n))?1:0:__.test(t.slice(e,e+2))?2:0:0}function hhe(t,e){if(!e)return 0;let n=t.charCodeAt(e-1);return n<192?che(n)?1:0:__?!phe(n)||e==1?__.test(String.fromCharCode(n))?1:0:__.test(t.slice(e-2,e))?2:0:0}const dhe=8;function eX(t,e,n){if(e==t.length||!hhe(t,e))return e;for(let r=e,i=e+n,o=0;o<dhe;o++){let a=uhe(t,r);if(!a||r+a>i)return r;r+=a}return e}function tX(t,e,n){if(!e||!uhe(t,e))return e;for(let r=e,i=e-n,o=0;o<dhe;o++){let a=hhe(t,r);if(!a||r-a<i)return r;r-=a}return e}function nX(t,e,n){for(;e!=n;e--)if(t.charCodeAt(e-1)==10)return e;return-1}function rX(t,e,n){for(;e!=n;e++)if(t.charCodeAt(e)==10)return e;return-1}const fhe=t=>t>=55296&&t<=56319,phe=t=>t>=56320&&t<=57343;function IO(t,e){return!e||e==t.length||!fhe(t.charCodeAt(e-1))||!phe(t.charCodeAt(e))}function WJe(t,e,n){var r;return wC=((r=n?.scanLimit)!==null&&r!==void 0?r:1e9)>>1,OC=n?.timeout?Date.now()+n.timeout:0,u7=!1,ZJe(t,e,H_(t,0,t.length,e,0,e.length))}function mhe(){return!u7}function ghe(t,e,n){return qJe(WJe(t,e,n),t,e)}const em=Dn.define({combine:t=>t[0]}),xN=xr.define(),HJe=Dn.define(),DO=Fs.define({create(t){return null},update(t,e){for(let n of e.effects)n.is(xN)&&(t=n.value);for(let n of e.state.facet(HJe))t=n(t,e);return t}});class jw{constructor(e,n,r,i,o,a=!0){this.changes=e,this.fromA=n,this.toA=r,this.fromB=i,this.toB=o,this.precise=a}offset(e,n){return e||n?new jw(this.changes,this.fromA+e,this.toA+e,this.fromB+n,this.toB+n,this.precise):this}get endA(){return Math.max(this.fromA,this.toA-1)}get endB(){return Math.max(this.fromB,this.toB-1)}static build(e,n,r){let i=ghe(e.toString(),n.toString(),r);return yhe(i,e,n,0,0,mhe())}static updateA(e,n,r,i,o){return lX(aX(e,i,!0,r.length),e,n,r,o)}static updateB(e,n,r,i,o){return lX(aX(e,i,!1,n.length),e,n,r,o)}}function iX(t,e,n,r){let i=n.lineAt(t),o=r.lineAt(e);return i.to==t&&o.to==e&&t<n.length&&e<r.length?[t+1,e+1]:[i.from,o.from]}function oX(t,e,n,r){let i=n.lineAt(t),o=r.lineAt(e);return i.from==t&&o.from==e?[t,e]:[i.to+1,o.to+1]}function yhe(t,e,n,r,i,o){let a=[];for(let s=0;s<t.length;s++){let u=t[s],[d,m]=iX(u.fromA+r,u.fromB+i,e,n),[v,_]=oX(u.toA+r,u.toB+i,e,n),O=[u.offset(-d+r,-m+i)];for(;s<t.length-1;){let E=t[s+1],[A,M]=iX(E.fromA+r,E.fromB+i,e,n);if(A>v+1&&M>_+1)break;O.push(E.offset(-d+r,-m+i)),[v,_]=oX(E.toA+r,E.toB+i,e,n),s++}a.push(new jw(O,d,Math.max(d,v),m,Math.max(m,_),o))}return a}const MP=1e3;function sX(t,e,n,r){let i=0,o=t.length;for(;;){if(i==o){let m=0,v=0;i&&({toA:m,toB:v}=t[i-1]);let _=e-(n?m:v);return[m+_,v+_]}let a=i+o>>1,s=t[a],[u,d]=n?[s.fromA,s.toA]:[s.fromB,s.toB];if(u>e)o=a;else if(d<=e)i=a+1;else return r?[s.fromA,s.fromB]:[s.toA,s.toB]}}function aX(t,e,n,r){let i=[];return e.iterChangedRanges((o,a,s,u)=>{let d=0,m=n?e.length:r,v=0,_=n?r:e.length;o>MP&&([d,v]=sX(t,o-MP,n,!0)),a<e.length-MP&&([m,_]=sX(t,a+MP,n,!1));let O=u-s-(a-o),E,[A,M]=n?[O,0]:[0,O];i.length&&(E=i[i.length-1]).toA>=d?i[i.length-1]={fromA:E.fromA,fromB:E.fromB,toA:m,toB:_,diffA:E.diffA+A,diffB:E.diffB+M}:i.push({fromA:d,toA:m,fromB:v,toB:_,diffA:A,diffB:M})}),i}function lX(t,e,n,r,i){if(!t.length)return e;let o=[];for(let a=0,s=0,u=0,d=0;;a++){let m=a==t.length?null:t[a],v=m?m.fromA+s:n.length,_=m?m.fromB+u:r.length;for(;d<e.length;){let M=e[d];if(Math.min(n.length,M.toA+s)>v||Math.min(r.length,M.toB+u)>_)break;o.push(M.offset(s,u)),d++}if(!m)break;let O=m.toA+s+m.diffA,E=m.toB+u+m.diffB,A=ghe(n.sliceString(v,O),r.sliceString(_,E),i);for(let M of yhe(A,n,r,v,_,mhe()))o.push(M);for(s+=m.diffA,u+=m.diffB;d<e.length;){let M=e[d];if(M.fromA+s>O&&M.fromB+u>E)break;d++}}return o}const GJe={scanLimit:500},vhe=zs.fromClass(class{constructor(t){({deco:this.deco,gutter:this.gutter}=hX(t))}update(t){(t.docChanged||t.viewportChanged||XJe(t.startState,t.state)||YJe(t.startState,t.state))&&({deco:this.deco,gutter:this.gutter}=hX(t.view))}},{decorations:t=>t.deco}),RP=Uf.low(Sae({class:"cm-changeGutter",markers:t=>{var e;return((e=t.plugin(vhe))===null||e===void 0?void 0:e.gutter)||Kr.empty}}));function XJe(t,e){return t.field(DO,!1)!=e.field(DO,!1)}function YJe(t,e){return t.facet(em)!=e.facet(em)}const cX=Zn.line({class:"cm-changedLine"}),KJe=Zn.mark({class:"cm-changedText"}),JJe=Zn.mark({tagName:"ins",class:"cm-insertedLine"}),eet=Zn.mark({tagName:"del",class:"cm-deletedLine"}),uX=new class extends wm{constructor(){super(...arguments),this.elementClass="cm-changedLineGutter"}};function tet(t,e,n,r,i,o){let a=n?t.fromA:t.fromB,s=n?t.toA:t.toB,u=0;if(a!=s){i.add(a,a,cX),i.add(a,s,n?eet:JJe),o&&o.add(a,a,uX);for(let d=e.iterRange(a,s-1),m=a;!d.next().done;){if(d.lineBreak){m++,i.add(m,m,cX),o&&o.add(m,m,uX);continue}let v=m+d.value.length;if(r)for(;u<t.changes.length;){let _=t.changes[u],O=a+(n?_.fromA:_.fromB),E=a+(n?_.toA:_.toB),A=Math.max(m,O),M=Math.min(v,E);if(A<M&&i.add(A,M,KJe),E<v)u++;else break}m=v}}}function hX(t){let e=t.state.field(DO),{side:n,highlightChanges:r,markGutter:i,overrideChunk:o}=t.state.facet(em),a=n=="a",s=new _u,u=i?new _u:null,{from:d,to:m}=t.viewport;for(let v of e){if((a?v.fromA:v.fromB)>=m)break;(a?v.toA:v.toB)>d&&(!o||!o(t.state,v,s,u))&&tet(v,t.state.doc,a,r,s,u)}return{deco:s.finish(),gutter:u&&u.finish()}}class IP extends Sd{constructor(e){super(),this.height=e}eq(e){return this.height==e.height}toDOM(){let e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}const dR=xr.define({map:(t,e)=>t.map(e)}),SC=Fs.define({create:()=>Zn.none,update:(t,e)=>{for(let n of e.effects)if(n.is(dR))return n.value;return t.map(e.changes)},provide:t=>pn.decorations.from(t)}),DP=.01;function dX(t,e){if(t.size!=e.size)return!1;let n=t.iter(),r=e.iter();for(;n.value;){if(n.from!=r.from||Math.abs(n.value.spec.widget.height-r.value.spec.widget.height)>1)return!1;n.next(),r.next()}return!0}function net(t,e,n){let r=new _u,i=new _u,o=t.state.field(SC).iter(),a=e.state.field(SC).iter(),s=0,u=0,d=0,m=0,v=t.viewport,_=e.viewport;for(let M=0;;M++){let L=M<n.length?n[M]:null,$=L?L.fromA:t.state.doc.length,N=L?L.fromB:e.state.doc.length;if(s<$){let F=t.lineBlockAt(s).top+d,Q=e.lineBlockAt(u).top+m,W=F-Q;W<-DP?(d-=W,r.add(s,s,Zn.widget({widget:new IP(-W),block:!0,side:-1}))):W>DP&&(m+=W,i.add(u,u,Zn.widget({widget:new IP(W),block:!0,side:-1})))}if($>s+1e3&&s<v.from&&$>v.from&&u<_.from&&N>_.from){let F=Math.min(v.from-s,_.from-u);s+=F,u+=F,M--}else if(L)s=L.toA,u=L.toB;else break;for(;o.value&&o.from<s;)d-=o.value.spec.widget.height,o.next();for(;a.value&&a.from<u;)m-=a.value.spec.widget.height,a.next()}for(;o.value;)d-=o.value.spec.widget.height,o.next();for(;a.value;)m-=a.value.spec.widget.height,a.next();let O=t.contentHeight+d-(e.contentHeight+m);O<DP?r.add(t.state.doc.length,t.state.doc.length,Zn.widget({widget:new IP(-O),block:!0,side:1})):O>DP&&i.add(e.state.doc.length,e.state.doc.length,Zn.widget({widget:new IP(O),block:!0,side:1}));let E=r.finish(),A=i.finish();dX(E,t.state.field(SC))||t.dispatch({effects:dR.of(E)}),dX(A,e.state.field(SC))||e.dispatch({effects:dR.of(A)})}const _N=xr.define({map:(t,e)=>e.mapPos(t)});class ret extends Sd{constructor(e){super(),this.lines=e}eq(e){return this.lines==e.lines}toDOM(e){let n=document.createElement("div");return n.className="cm-collapsedLines",n.textContent=e.state.phrase("$ unchanged lines",this.lines),n.addEventListener("click",r=>{let i=e.posAtDOM(r.target);e.dispatch({effects:_N.of(i)});let{side:o,sibling:a}=e.state.facet(em);a&&a().dispatch({effects:_N.of(iet(i,e.state.field(DO),o=="a"))})}),n}ignoreEvent(e){return e instanceof MouseEvent}get estimatedHeight(){return 27}get type(){return"collapsed-unchanged-code"}}function iet(t,e,n){let r=0,i=0;for(let o=0;;o++){let a=o<e.length?e[o]:null;if(!a||(n?a.fromA:a.fromB)>=t)return i+(t-r);[r,i]=n?[a.toA,a.toB]:[a.toB,a.toA]}}const oet=Fs.define({create(t){return Zn.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(_N)&&(t=t.update({filter:r=>r!=n.value}));return t},provide:t=>pn.decorations.from(t)});function fX({margin:t=3,minSize:e=4}){return oet.init(n=>set(n,t,e))}function set(t,e,n){let r=new _u,i=t.facet(em).side=="a",o=t.field(DO),a=1;for(let s=0;;s++){let u=s<o.length?o[s]:null,d=s?a+e:1,m=u?t.doc.lineAt(i?u.fromA:u.fromB).number-1-e:t.doc.lines,v=m-d+1;if(v>=n&&r.add(t.doc.line(d).from,t.doc.line(m).to,Zn.replace({widget:new ret(v),block:!0})),!u)break;a=t.doc.lineAt(Math.min(t.doc.length,i?u.toA:u.toB)).number}return r.finish()}const aet=pn.styleModule.of(new hy({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),cet=pn.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine, .cm-inlineChangedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb22aa, #22bb22aa) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff88aa, #88ff88aa) bottom/100% 2px no-repeat"},"&.cm-merge-b .cm-deletedText":{background:"#ff000033"},".cm-insertedLine, .cm-deletedLine, .cm-deletedLine del":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer","&:before":{content:'""',marginInlineEnd:"7px"},"&:after":{content:'""',marginInlineStart:"7px"}},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"},".cm-inlineChangedLineGutter":{background:"#75d"}}),pX=new hS,LP=new hS;class uet{constructor(e){this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=e.diffConfig||GJe;let n=[Uf.low(vhe),cet,aet,SC,pn.updateListener.of(v=>{this.measuring<0&&(v.heightChanged||v.viewportChanged)&&!v.transactions.some(_=>_.effects.some(O=>O.is(dR)))&&this.measure()})],r=[em.of({side:"a",sibling:()=>this.b,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&r.push(RP);let i=$r.create({doc:e.a.doc,selection:e.a.selection,extensions:[e.a.extensions||[],pn.editorAttributes.of({class:"cm-merge-a"}),LP.of(r),n]}),o=[em.of({side:"b",sibling:()=>this.a,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&o.push(RP);let a=$r.create({doc:e.b.doc,selection:e.b.selection,extensions:[e.b.extensions||[],pn.editorAttributes.of({class:"cm-merge-b"}),LP.of(o),n]});this.chunks=jw.build(i.doc,a.doc,this.diffConf);let s=[DO.init(()=>this.chunks),pX.of(e.collapseUnchanged?fX(e.collapseUnchanged):[])];i=i.update({effects:xr.appendConfig.of(s)}).state,a=a.update({effects:xr.appendConfig.of(s)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";let u=e.orientation||"a-b",d=document.createElement("div");d.className="cm-mergeViewEditor";let m=document.createElement("div");m.className="cm-mergeViewEditor",this.editorDOM.appendChild(u=="a-b"?d:m),this.editorDOM.appendChild(u=="a-b"?m:d),this.a=new pn({state:i,parent:d,root:e.root,dispatchTransactions:v=>this.dispatch(v,this.a)}),this.b=new pn({state:a,parent:m,root:e.root,dispatchTransactions:v=>this.dispatch(v,this.b)}),this.setupRevertControls(!!e.revertControls,e.revertControls=="b-to-a",e.renderRevertControl),e.parent&&e.parent.appendChild(this.dom),this.scheduleMeasure()}dispatch(e,n){if(e.some(r=>r.docChanged)){let r=e[e.length-1],i=e.reduce((a,s)=>a.compose(s.changes),Xs.empty(e[0].startState.doc.length));this.chunks=n==this.a?jw.updateA(this.chunks,r.newDoc,this.b.state.doc,i,this.diffConf):jw.updateB(this.chunks,this.a.state.doc,r.newDoc,i,this.diffConf),n.update([...e,r.state.update({effects:xN.of(this.chunks)})]);let o=n==this.a?this.b:this.a;o.update([o.state.update({effects:xN.of(this.chunks)})]),this.scheduleMeasure()}else n.update(e)}reconfigure(e){if("diffConfig"in e&&(this.diffConf=e.diffConfig),"orientation"in e){let o=e.orientation!="b-a";if(o!=(this.editorDOM.firstChild==this.a.dom.parentNode)){let a=this.a.dom.parentNode,s=this.b.dom.parentNode;a.remove(),s.remove(),this.editorDOM.insertBefore(o?a:s,this.editorDOM.firstChild),this.editorDOM.appendChild(o?s:a),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){let o=!!this.revertDOM,a=this.revertToA,s=this.renderRevert;"revertControls"in e&&(o=!!e.revertControls,a=e.revertControls=="b-to-a"),"renderRevertControl"in e&&(s=e.renderRevertControl),this.setupRevertControls(o,a,s)}let n="highlightChanges"in e,r="gutter"in e,i="collapseUnchanged"in e;if(n||r||i){let o=[],a=[];if(n||r){let s=this.a.state.facet(em),u=r?e.gutter!==!1:s.markGutter,d=n?e.highlightChanges!==!1:s.highlightChanges;o.push(LP.reconfigure([em.of({side:"a",sibling:()=>this.b,highlightChanges:d,markGutter:u}),u?RP:[]])),a.push(LP.reconfigure([em.of({side:"b",sibling:()=>this.a,highlightChanges:d,markGutter:u}),u?RP:[]]))}if(i){let s=pX.reconfigure(e.collapseUnchanged?fX(e.collapseUnchanged):[]);o.push(s),a.push(s)}this.a.dispatch({effects:o}),this.b.dispatch({effects:a})}this.scheduleMeasure()}setupRevertControls(e,n,r){this.revertToA=n,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=r,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",i=>this.revertClicked(i)),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}scheduleMeasure(){if(this.measuring<0){let e=this.dom.ownerDocument.defaultView||window;this.measuring=e.requestAnimationFrame(()=>{this.measuring=-1,this.measure()})}}measure(){net(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}updateRevertButtons(){let e=this.revertDOM,n=e.firstChild,r=this.a.viewport,i=this.b.viewport;for(let o=0;o<this.chunks.length;o++){let a=this.chunks[o];if(a.fromA>r.to||a.fromB>i.to)break;if(a.fromA<r.from||a.fromB<i.from)continue;let s=this.a.lineBlockAt(a.fromA).top+"px";for(;n&&+n.dataset.chunk<o;)n=mX(n);n&&n.dataset.chunk==String(o)?(n.style.top!=s&&(n.style.top=s),n=n.nextSibling):e.insertBefore(this.renderRevertButton(s,o),n)}for(;n;)n=mX(n)}renderRevertButton(e,n){let r;if(this.renderRevert)r=this.renderRevert();else{r=document.createElement("button");let i=this.a.state.phrase("Revert this chunk");r.setAttribute("aria-label",i),r.setAttribute("title",i),r.textContent=this.revertToLeft?"":""}return r.style.top=e,r.setAttribute("data-chunk",String(n)),r}revertClicked(e){let n=e.target,r;for(;n&&n.parentNode!=this.revertDOM;)n=n.parentNode;if(n&&(r=this.chunks[n.dataset.chunk])){let[i,o,a,s,u,d]=this.revertToA?[this.b,this.a,r.fromB,r.toB,r.fromA,r.toA]:[this.a,this.b,r.fromA,r.toA,r.fromB,r.toB],m=i.state.sliceDoc(a,Math.max(a,s-1));a!=s&&d<=o.state.doc.length&&(m+=i.state.lineBreak),o.dispatch({changes:{from:u,to:Math.min(o.state.doc.length,d),insert:m},userEvent:"revert"}),e.preventDefault()}}destroy(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}}function mX(t){let e=t.nextSibling;return t.remove(),e}class fR{static create(e,n,r,i,o){let a=i+(i<<8)+e+(n<<4)|0;return new fR(e,n,r,a,o,[],[])}constructor(e,n,r,i,o,a,s){this.type=e,this.value=n,this.from=r,this.hash=i,this.end=o,this.children=a,this.positions=s,this.hashProp=[[wr.contextHash,i]]}addChild(e,n){e.prop(wr.contextHash)!=this.hash&&(e=new Gr(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(n)}toTree(e,n=this.end){let r=this.children.length-1;return r>=0&&(n=Math.max(n,this.positions[r]+this.children[r].length+this.from)),new Gr(e.types[this.type],this.children,this.positions,n-this.from).balance({makeTree:(i,o,a)=>new Gr(aa.none,i,o,a,this.hashProp)})}}var vn;(function(t){t[t.Document=1]="Document",t[t.CodeBlock=2]="CodeBlock",t[t.FencedCode=3]="FencedCode",t[t.Blockquote=4]="Blockquote",t[t.HorizontalRule=5]="HorizontalRule",t[t.BulletList=6]="BulletList",t[t.OrderedList=7]="OrderedList",t[t.ListItem=8]="ListItem",t[t.ATXHeading1=9]="ATXHeading1",t[t.ATXHeading2=10]="ATXHeading2",t[t.ATXHeading3=11]="ATXHeading3",t[t.ATXHeading4=12]="ATXHeading4",t[t.ATXHeading5=13]="ATXHeading5",t[t.ATXHeading6=14]="ATXHeading6",t[t.SetextHeading1=15]="SetextHeading1",t[t.SetextHeading2=16]="SetextHeading2",t[t.HTMLBlock=17]="HTMLBlock",t[t.LinkReference=18]="LinkReference",t[t.Paragraph=19]="Paragraph",t[t.CommentBlock=20]="CommentBlock",t[t.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",t[t.Escape=22]="Escape",t[t.Entity=23]="Entity",t[t.HardBreak=24]="HardBreak",t[t.Emphasis=25]="Emphasis",t[t.StrongEmphasis=26]="StrongEmphasis",t[t.Link=27]="Link",t[t.Image=28]="Image",t[t.InlineCode=29]="InlineCode",t[t.HTMLTag=30]="HTMLTag",t[t.Comment=31]="Comment",t[t.ProcessingInstruction=32]="ProcessingInstruction",t[t.Autolink=33]="Autolink",t[t.HeaderMark=34]="HeaderMark",t[t.QuoteMark=35]="QuoteMark",t[t.ListMark=36]="ListMark",t[t.LinkMark=37]="LinkMark",t[t.EmphasisMark=38]="EmphasisMark",t[t.CodeMark=39]="CodeMark",t[t.CodeText=40]="CodeText",t[t.CodeInfo=41]="CodeInfo",t[t.LinkTitle=42]="LinkTitle",t[t.LinkLabel=43]="LinkLabel",t[t.URL=44]="URL"})(vn||(vn={}));class het{constructor(e,n){this.start=e,this.content=n,this.marks=[],this.parsers=[]}}class det{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return KC(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,n=0,r=0){for(let i=n;i<e;i++)r+=this.text.charCodeAt(i)==9?4-r%4:1;return r}findColumn(e){let n=0;for(let r=0;n<this.text.length&&r<e;n++)r+=this.text.charCodeAt(n)==9?4-r%4:1;return n}scrub(){if(!this.baseIndent)return this.text;let e="";for(let n=0;n<this.basePos;n++)e+=" ";return e+this.text.slice(this.basePos)}}function gX(t,e,n){if(n.pos==n.text.length||t!=e.block&&n.indent>=e.stack[n.depth+1].value+n.baseIndent)return!0;if(n.indent>=n.baseIndent+4)return!1;let r=(t.type==vn.OrderedList?m7:p7)(n,e,!1);return r>0&&(t.type!=vn.BulletList||f7(n,e,!1)<0)&&n.text.charCodeAt(n.pos+r-1)==t.value}const xhe={[vn.Blockquote](t,e,n){return n.next!=62?!1:(n.markers.push(mi(vn.QuoteMark,e.lineStart+n.pos,e.lineStart+n.pos+1)),n.moveBase(n.pos+(Td(n.text.charCodeAt(n.pos+1))?2:1)),t.end=e.lineStart+n.text.length,!0)},[vn.ListItem](t,e,n){return n.indent<n.baseIndent+t.value&&n.next>-1?!1:(n.moveBaseColumn(n.baseIndent+t.value),!0)},[vn.OrderedList]:gX,[vn.BulletList]:gX,[vn.Document](){return!0}};function Td(t){return t==32||t==9||t==10||t==13}function KC(t,e=0){for(;e<t.length&&Td(t.charCodeAt(e));)e++;return e}function yX(t,e,n){for(;e>n&&Td(t.charCodeAt(e-1));)e--;return e}function _he(t){if(t.next!=96&&t.next!=126)return-1;let e=t.pos+1;for(;e<t.text.length&&t.text.charCodeAt(e)==t.next;)e++;if(e<t.pos+3)return-1;if(t.next==96){for(let n=e;n<t.text.length;n++)if(t.text.charCodeAt(n)==96)return-1}return e}function bhe(t){return t.next!=62?-1:t.text.charCodeAt(t.pos+1)==32?2:1}function f7(t,e,n){if(t.next!=42&&t.next!=45&&t.next!=95)return-1;let r=1;for(let i=t.pos+1;i<t.text.length;i++){let o=t.text.charCodeAt(i);if(o==t.next)r++;else if(!Td(o))return-1}return n&&t.next==45&&She(t)>-1&&t.depth==e.stack.length&&e.parser.leafBlockParsers.indexOf(Ehe.SetextHeading)>-1||r<3?-1:1}function whe(t,e){for(let n=t.stack.length-1;n>=0;n--)if(t.stack[n].type==e)return!0;return!1}function p7(t,e,n){return(t.next==45||t.next==43||t.next==42)&&(t.pos==t.text.length-1||Td(t.text.charCodeAt(t.pos+1)))&&(!n||whe(e,vn.BulletList)||t.skipSpace(t.pos+2)<t.text.length)?1:-1}function m7(t,e,n){let r=t.pos,i=t.next;for(;i>=48&&i<=57;){r++;if(r==t.text.length)return-1;i=t.text.charCodeAt(r)}return r==t.pos||r>t.pos+9||i!=46&&i!=41||r<t.text.length-1&&!Td(t.text.charCodeAt(r+1))||n&&!whe(e,vn.OrderedList)&&(t.skipSpace(r+1)==t.text.length||r>t.pos+1||t.next!=49)?-1:r+1-t.pos}function Ohe(t){if(t.next!=35)return-1;let e=t.pos+1;for(;e<t.text.length&&t.text.charCodeAt(e)==35;)e++;if(e<t.text.length&&t.text.charCodeAt(e)!=32)return-1;let n=e-t.pos;return n>6?-1:n}function She(t){if(t.next!=45&&t.next!=61||t.indent>=t.baseIndent+4)return-1;let e=t.pos+1;for(;e<t.text.length&&t.text.charCodeAt(e)==t.next;)e++;let n=e;for(;e<t.text.length&&Td(t.text.charCodeAt(e));)e++;return e==t.text.length?n:-1}const bN=/^[ \t]*$/,Che=/-->/,The=/\?>/,wN=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,Che],[/^\s*<\?/,The],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,bN],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,bN]];function khe(t,e,n){if(t.next!=60)return-1;let r=t.text.slice(t.pos);for(let i=0,o=wN.length-(n?1:0);i<o;i++)if(wN[i][0].test(r))return i;return-1}function vX(t,e){let n=t.countIndent(e,t.pos,t.indent),r=t.countIndent(t.skipSpace(e),e,n);return r>=n+5?n+1:r}function k0(t,e,n){let r=t.length-1;r>=0&&t[r].to==e&&t[r].type==vn.CodeText?t[r].to=n:t.push(mi(vn.CodeText,e,n))}const $P={LinkReference:void 0,IndentedCode(t,e){let n=e.baseIndent+4;if(e.indent<n)return!1;let r=e.findColumn(n),i=t.lineStart+r,o=t.lineStart+e.text.length,a=[],s=[];for(k0(a,i,o);t.nextLine()&&e.depth>=t.stack.length;)if(e.pos==e.text.length){k0(s,t.lineStart-1,t.lineStart);for(let u of e.markers)s.push(u)}else{if(e.indent<n)break;{if(s.length){for(let d of s)d.type==vn.CodeText?k0(a,d.from,d.to):a.push(d);s=[]}k0(a,t.lineStart-1,t.lineStart);for(let d of e.markers)a.push(d);o=t.lineStart+e.text.length;let u=t.lineStart+e.findColumn(e.baseIndent+4);u<o&&k0(a,u,o)}}return s.length&&(s=s.filter(u=>u.type!=vn.CodeText),s.length&&(e.markers=s.concat(e.markers))),t.addNode(t.buffer.writeElements(a,-i).finish(vn.CodeBlock,o-i),i),!0},FencedCode(t,e){let n=_he(e);if(n<0)return!1;let r=t.lineStart+e.pos,i=e.next,o=n-e.pos,a=e.skipSpace(n),s=yX(e.text,e.text.length,a),u=[mi(vn.CodeMark,r,r+o)];a<s&&u.push(mi(vn.CodeInfo,t.lineStart+a,t.lineStart+s));for(let d=!0,m=!0,v=!1;t.nextLine()&&e.depth>=t.stack.length;d=!1){let _=e.pos;if(e.indent-e.baseIndent<4)for(;_<e.text.length&&e.text.charCodeAt(_)==i;)_++;if(_-e.pos>=o&&e.skipSpace(_)==e.text.length){for(let O of e.markers)u.push(O);m&&v&&k0(u,t.lineStart-1,t.lineStart),u.push(mi(vn.CodeMark,t.lineStart+e.pos,t.lineStart+_)),t.nextLine();break}else{v=!0,d||(k0(u,t.lineStart-1,t.lineStart),m=!1);for(let A of e.markers)u.push(A);let O=t.lineStart+e.basePos,E=t.lineStart+e.text.length;O<E&&(k0(u,O,E),m=!1)}}return t.addNode(t.buffer.writeElements(u,-r).finish(vn.FencedCode,t.prevLineEnd()-r),r),!0},Blockquote(t,e){let n=bhe(e);return n<0?!1:(t.startContext(vn.Blockquote,e.pos),t.addNode(vn.QuoteMark,t.lineStart+e.pos,t.lineStart+e.pos+1),e.moveBase(e.pos+n),null)},HorizontalRule(t,e){if(f7(e,t,!1)<0)return!1;let n=t.lineStart+e.pos;return t.nextLine(),t.addNode(vn.HorizontalRule,n),!0},BulletList(t,e){let n=p7(e,t,!1);if(n<0)return!1;t.block.type!=vn.BulletList&&t.startContext(vn.BulletList,e.basePos,e.next);let r=vX(e,e.pos+1);return t.startContext(vn.ListItem,e.basePos,r-e.baseIndent),t.addNode(vn.ListMark,t.lineStart+e.pos,t.lineStart+e.pos+n),e.moveBaseColumn(r),null},OrderedList(t,e){let n=m7(e,t,!1);if(n<0)return!1;t.block.type!=vn.OrderedList&&t.startContext(vn.OrderedList,e.basePos,e.text.charCodeAt(e.pos+n-1));let r=vX(e,e.pos+n);return t.startContext(vn.ListItem,e.basePos,r-e.baseIndent),t.addNode(vn.ListMark,t.lineStart+e.pos,t.lineStart+e.pos+n),e.moveBaseColumn(r),null},ATXHeading(t,e){let n=Ohe(e);if(n<0)return!1;let r=e.pos,i=t.lineStart+r,o=yX(e.text,e.text.length,r),a=o;for(;a>r&&e.text.charCodeAt(a-1)==e.next;)a--;(a==o||a==r||!Td(e.text.charCodeAt(a-1)))&&(a=e.text.length);let s=t.buffer.write(vn.HeaderMark,0,n).writeElements(t.parser.parseInline(e.text.slice(r+n+1,a),i+n+1),-i);a<e.text.length&&s.write(vn.HeaderMark,a-r,o-r);let u=s.finish(vn.ATXHeading1-1+n,e.text.length-r);return t.nextLine(),t.addNode(u,i),!0},HTMLBlock(t,e){let n=khe(e,t,!1);if(n<0)return!1;let r=t.lineStart+e.pos,i=wN[n][1],o=[],a=i!=bN;for(;!i.test(e.text)&&t.nextLine();){if(e.depth<t.stack.length){a=!1;break}for(let d of e.markers)o.push(d)}a&&t.nextLine();let s=i==Che?vn.CommentBlock:i==The?vn.ProcessingInstructionBlock:vn.HTMLBlock,u=t.prevLineEnd();return t.addNode(t.buffer.writeElements(o,-r).finish(s,u-r),r),!0},SetextHeading:void 0};class fet{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,n,r){if(this.stage==-1)return!1;let i=r.content+`
`+n.scrub(),o=this.advance(i);return o>-1&&o<i.length?this.complete(e,r,o):!1}finish(e,n){return(this.stage==2||this.stage==3)&&KC(n.content,this.pos)==n.content.length?this.complete(e,n,n.content.length):!1}complete(e,n,r){return e.addLeafElement(n,mi(vn.LinkReference,this.start,this.start+r,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(zhe(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(mi(vn.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(Lhe(e,KC(e,this.pos),this.start)))return-1}else if(this.stage==2){let n=KC(e,this.pos),r=0;if(n>this.pos){let i=$he(e,n,this.start);if(i){let o=z$(e,i.to-this.start);o>0&&(this.nextStage(i),r=o)}}return r||(r=z$(e,this.pos)),r>0&&r<e.length?r:-1}else return z$(e,this.pos)}}}function z$(t,e){for(;e<t.length;e++){let n=t.charCodeAt(e);if(n==10)break;if(!Td(n))return-1}return e}class pet{nextLine(e,n,r){let i=n.depth<e.stack.length?-1:She(n),o=n.next;if(i<0)return!1;let a=mi(vn.HeaderMark,e.lineStart+n.pos,e.lineStart+i);return e.nextLine(),e.addLeafElement(r,mi(o==61?vn.SetextHeading1:vn.SetextHeading2,r.start,e.prevLineEnd(),[...e.parser.parseInline(r.content,r.start),a])),!0}finish(){return!1}}const Ehe={LinkReference(t,e){return e.content.charCodeAt(0)==91?new fet(e):null},SetextHeading(){return new pet}},met=[(t,e)=>Ohe(e)>=0,(t,e)=>_he(e)>=0,(t,e)=>bhe(e)>=0,(t,e)=>p7(e,t,!0)>=0,(t,e)=>m7(e,t,!0)>=0,(t,e)=>f7(e,t,!0)>=0,(t,e)=>khe(e,t,!0)>=0],get={text:"",end:0};class yet{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.line=new det,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=i[i.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=i[0].from,this.block=fR.create(vn.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=r.length?new _et(r,n):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let r=0;;){let i=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;r<e.markers.length&&(!i||e.markers[r].from<i.end);){let o=e.markers[r++];this.addNode(o.type,o.from,o.to)}if(!i)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let r of this.parser.blockParsers)if(r){let i=r(this,e);if(i!=!1){if(i==!0)return null;e.forward();continue e}}break}let n=new het(this.lineStart+e.pos,e.text.slice(e.pos));for(let r of this.parser.leafBlockParsers)if(r){let i=r(this,n);i&&n.parsers.push(i)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let r of this.parser.endLeafBlock)if(r(this,e,n))break e}for(let r of n.parsers)if(r.nextLine(this,e,n))return null;n.content+=`
`+e.scrub();for(let r of e.markers)n.marks.push(r)}return this.finishLeaf(n),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let n=this.fragments.takeNodes(this);return n?(this.absoluteLineStart+=n,this.lineStart=Nhe(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let n=get;if(n.end=e,e>=this.to)n.text="";else if(n.text=this.lineChunkAt(e),n.end+=n.text.length,this.ranges.length>1){let r=this.absoluteLineStart,i=this.rangeI;for(;this.ranges[i].to<n.end;){i++;let o=this.ranges[i].from,a=this.lineChunkAt(o);n.end=o+a.length,n.text=n.text.slice(0,this.ranges[i-1].to-r)+a,r=n.end-n.text.length}}return n}readLine(){let{line:e}=this,{text:n,end:r}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=r,e.reset(n);e.depth<this.stack.length;e.depth++){let i=this.stack[e.depth],o=this.parser.skipContextMarkup[i.type];if(!o)throw new Error("Unhandled block context "+vn[i.type]);let a=this.line.markers.length;if(!o(i,this,e)){this.line.markers.length>a&&(i.end=this.line.markers[this.line.markers.length-1].to),e.forward();break}e.forward()}}lineChunkAt(e){let n=this.input.chunk(e),r;if(this.input.lineChunks)r=n==`
`?"":n;else{let i=n.indexOf(`
`);r=i<0?n:n.slice(0,i)}return e+r.length>this.to?r.slice(0,this.to-e):r}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,n,r=0){this.block=fR.create(e,r,this.lineStart+n,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,n,r=0){this.startContext(this.parser.getNodeType(e),n,r)}addNode(e,n,r){typeof e=="number"&&(e=new Gr(this.parser.nodeSet.types[e],LO,LO,(r??this.prevLineEnd())-n)),this.block.addChild(e,n-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,n){this.addNode(this.buffer.writeElements(SN(n.children,e.marks),-n.from).finish(n.type,n.to-n.from),n.from)}finishContext(){let e=this.stack.pop(),n=this.stack[this.stack.length-1];n.addChild(e.toTree(this.parser.nodeSet),e.from-n.from),this.block=n}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?Ahe(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let r of e.parsers)if(r.finish(this,e))return;let n=SN(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(n,-e.start).finish(vn.Paragraph,e.content.length),e.start)}elt(e,n,r,i){return typeof e=="string"?mi(this.parser.getNodeType(e),n,r,i):new Rhe(e,n)}get buffer(){return new Mhe(this.parser.nodeSet)}}function Ahe(t,e,n,r,i){let o=t[e].to,a=[],s=[],u=n.from+r;function d(m,v){for(;v?m>=o:m>o;){let _=t[e+1].from-o;r+=_,m+=_,e++,o=t[e].to}}for(let m=n.firstChild;m;m=m.nextSibling){d(m.from+r,!0);let v=m.from+r,_,O=i.get(m.tree);O?_=O:m.to+r>o?(_=Ahe(t,e,m,r,i),d(m.to+r,!1)):_=m.toTree(),a.push(_),s.push(v-u)}return d(n.to+r,!1),new Gr(n.type,a,s,n.to+r-u,n.tree?n.tree.propValues:void 0)}class wD extends lD{constructor(e,n,r,i,o,a,s,u,d){super(),this.nodeSet=e,this.blockParsers=n,this.leafBlockParsers=r,this.blockNames=i,this.endLeafBlock=o,this.skipContextMarkup=a,this.inlineParsers=s,this.inlineNames=u,this.wrappers=d,this.nodeTypes=Object.create(null);for(let m of e.types)this.nodeTypes[m.name]=m.id}createParse(e,n,r){let i=new yet(this,e,n,r);for(let o of this.wrappers)i=o(i,e,n,r);return i}configure(e){let n=ON(e);if(!n)return this;let{nodeSet:r,skipContextMarkup:i}=this,o=this.blockParsers.slice(),a=this.leafBlockParsers.slice(),s=this.blockNames.slice(),u=this.inlineParsers.slice(),d=this.inlineNames.slice(),m=this.endLeafBlock.slice(),v=this.wrappers;if(iC(n.defineNodes)){i=Object.assign({},i);let _=r.types.slice(),O;for(let E of n.defineNodes){let{name:A,block:M,composite:L,style:$}=typeof E=="string"?{name:E}:E;if(_.some(Q=>Q.name==A))continue;L&&(i[_.length]=(Q,W,H)=>L(W,H,Q.value));let N=_.length,F=L?["Block","BlockContext"]:M?N>=vn.ATXHeading1&&N<=vn.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;_.push(aa.define({id:N,name:A,props:F&&[[wr.group,F]]})),$&&(O||(O={}),Array.isArray($)||$ instanceof nh?O[A]=$:Object.assign(O,$))}r=new fS(_),O&&(r=r.extend(pS(O)))}if(iC(n.props)&&(r=r.extend(...n.props)),iC(n.remove))for(let _ of n.remove){let O=this.blockNames.indexOf(_),E=this.inlineNames.indexOf(_);O>-1&&(o[O]=a[O]=void 0),E>-1&&(u[E]=void 0)}if(iC(n.parseBlock))for(let _ of n.parseBlock){let O=s.indexOf(_.name);if(O>-1)o[O]=_.parse,a[O]=_.leaf;else{let E=_.before?zP(s,_.before):_.after?zP(s,_.after)+1:s.length-1;o.splice(E,0,_.parse),a.splice(E,0,_.leaf),s.splice(E,0,_.name)}_.endLeaf&&m.push(_.endLeaf)}if(iC(n.parseInline))for(let _ of n.parseInline){let O=d.indexOf(_.name);if(O>-1)u[O]=_.parse;else{let E=_.before?zP(d,_.before):_.after?zP(d,_.after)+1:d.length-1;u.splice(E,0,_.parse),d.splice(E,0,_.name)}}return n.wrap&&(v=v.concat(n.wrap)),new wD(r,o,a,s,m,i,u,d,v)}getNodeType(e){let n=this.nodeTypes[e];if(n==null)throw new RangeError(`Unknown node type '${e}'`);return n}parseInline(e,n){let r=new g7(this,e,n);e:for(let i=n;i<r.end;){let o=r.char(i);for(let a of this.inlineParsers)if(a){let s=a(r,o,i);if(s>=0){i=s;continue e}}i++}return r.resolveMarkers(0)}}function iC(t){return t!=null&&t.length>0}function ON(t){if(!Array.isArray(t))return t;if(t.length==0)return null;let e=ON(t[0]);if(t.length==1)return e;let n=ON(t.slice(1));if(!n||!e)return e||n;let r=(a,s)=>(a||LO).concat(s||LO),i=e.wrap,o=n.wrap;return{props:r(e.props,n.props),defineNodes:r(e.defineNodes,n.defineNodes),parseBlock:r(e.parseBlock,n.parseBlock),parseInline:r(e.parseInline,n.parseInline),remove:r(e.remove,n.remove),wrap:i?o?(a,s,u,d)=>i(o(a,s,u,d),s,u,d):i:o}}function zP(t,e){let n=t.indexOf(e);if(n<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return n}let Phe=[aa.none];for(let t=1,e;e=vn[t];t++)Phe[t]=aa.define({id:t,name:e,props:t>=vn.Escape?[]:[[wr.group,t in xhe?["Block","BlockContext"]:["Block","LeafBlock"]]],top:e=="Document"});const LO=[];let Mhe=class{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,n,r,i=0){return this.content.push(e,n,r,4+i*4),this}writeElements(e,n=0){for(let r of e)r.writeTo(this,n);return this}finish(e,n){return Gr.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:n})}},ck=class{constructor(e,n,r,i=LO){this.type=e,this.from=n,this.to=r,this.children=i}writeTo(e,n){let r=e.content.length;e.writeElements(this.children,n),e.content.push(this.type,this.from+n,this.to+n,e.content.length+4-r)}toTree(e){return new Mhe(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}};class Rhe{constructor(e,n){this.tree=e,this.from=n}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return LO}writeTo(e,n){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+n,this.to+n,-1)}toTree(){return this.tree}}function mi(t,e,n,r){return new ck(t,e,n,r)}const Ihe={resolve:"Emphasis",mark:"EmphasisMark"},Dhe={resolve:"Emphasis",mark:"EmphasisMark"},Yx={},pR={};class Ku{constructor(e,n,r,i){this.type=e,this.from=n,this.to=r,this.side=i}}const xX="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let uk=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{uk=new RegExp("[\\p{S}|\\p{P}]","u")}catch{}const N$={Escape(t,e,n){if(e!=92||n==t.end-1)return-1;let r=t.char(n+1);for(let i=0;i<xX.length;i++)if(xX.charCodeAt(i)==r)return t.append(mi(vn.Escape,n,n+2));return-1},Entity(t,e,n){if(e!=38)return-1;let r=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(t.slice(n+1,n+31));return r?t.append(mi(vn.Entity,n,n+1+r[0].length)):-1},InlineCode(t,e,n){if(e!=96||n&&t.char(n-1)==96)return-1;let r=n+1;for(;r<t.end&&t.char(r)==96;)r++;let i=r-n,o=0;for(;r<t.end;r++)if(t.char(r)==96){if(o++,o==i&&t.char(r+1)!=96)return t.append(mi(vn.InlineCode,n,r+1,[mi(vn.CodeMark,n,n+i),mi(vn.CodeMark,r+1-i,r+1)]))}else o=0;return-1},HTMLTag(t,e,n){if(e!=60||n==t.end-1)return-1;let r=t.slice(n+1,t.end),i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(r);if(i)return t.append(mi(vn.Autolink,n,n+1+i[0].length,[mi(vn.LinkMark,n,n+1),mi(vn.URL,n+1,n+i[0].length),mi(vn.LinkMark,n+i[0].length,n+1+i[0].length)]));let o=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(r);if(o)return t.append(mi(vn.Comment,n,n+1+o[0].length));let a=/^\?[^]*?\?>/.exec(r);if(a)return t.append(mi(vn.ProcessingInstruction,n,n+1+a[0].length));let s=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(r);return s?t.append(mi(vn.HTMLTag,n,n+1+s[0].length)):-1},Emphasis(t,e,n){if(e!=95&&e!=42)return-1;let r=n+1;for(;t.char(r)==e;)r++;let i=t.slice(n-1,n),o=t.slice(r,r+1),a=uk.test(i),s=uk.test(o),u=/\s|^$/.test(i),d=/\s|^$/.test(o),m=!d&&(!s||u||a),v=!u&&(!a||d||s),_=m&&(e==42||!v||a),O=v&&(e==42||!m||s);return t.append(new Ku(e==95?Ihe:Dhe,n,r,(_?1:0)|(O?2:0)))},HardBreak(t,e,n){if(e==92&&t.char(n+1)==10)return t.append(mi(vn.HardBreak,n,n+2));if(e==32){let r=n+1;for(;t.char(r)==32;)r++;if(t.char(r)==10&&r>=n+2)return t.append(mi(vn.HardBreak,n,r+1))}return-1},Link(t,e,n){return e==91?t.append(new Ku(Yx,n,n+1,1)):-1},Image(t,e,n){return e==33&&t.char(n+1)==91?t.append(new Ku(pR,n,n+2,1)):-1},LinkEnd(t,e,n){if(e!=93)return-1;for(let r=t.parts.length-1;r>=0;r--){let i=t.parts[r];if(i instanceof Ku&&(i.type==Yx||i.type==pR)){if(!i.side||t.skipSpace(i.to)==n&&!/[(\[]/.test(t.slice(n+1,n+2)))return t.parts[r]=null,-1;let o=t.takeContent(r),a=t.parts[r]=vet(t,o,i.type==Yx?vn.Link:vn.Image,i.from,n+1);if(i.type==Yx)for(let s=0;s<r;s++){let u=t.parts[s];u instanceof Ku&&u.type==Yx&&(u.side=0)}return a.to}}return-1}};function vet(t,e,n,r,i){let{text:o}=t,a=t.char(i),s=i;if(e.unshift(mi(vn.LinkMark,r,r+(n==vn.Image?2:1))),e.push(mi(vn.LinkMark,i-1,i)),a==40){let u=t.skipSpace(i+1),d=Lhe(o,u-t.offset,t.offset),m;d&&(u=t.skipSpace(d.to),u!=d.to&&(m=$he(o,u-t.offset,t.offset),m&&(u=t.skipSpace(m.to)))),t.char(u)==41&&(e.push(mi(vn.LinkMark,i,i+1)),s=u+1,d&&e.push(d),m&&e.push(m),e.push(mi(vn.LinkMark,u,s)))}else if(a==91){let u=zhe(o,i-t.offset,t.offset,!1);u&&(e.push(u),s=u.to)}return mi(n,r,s,e)}function Lhe(t,e,n){if(t.charCodeAt(e)==60){for(let i=e+1;i<t.length;i++){let o=t.charCodeAt(i);if(o==62)return mi(vn.URL,e+n,i+1+n);if(o==60||o==10)return!1}return null}else{let i=0,o=e;for(let a=!1;o<t.length;o++){let s=t.charCodeAt(o);if(Td(s))break;if(a)a=!1;else if(s==40)i++;else if(s==41){if(!i)break;i--}else s==92&&(a=!0)}return o>e?mi(vn.URL,e+n,o+n):o==t.length?null:!1}}function $he(t,e,n){let r=t.charCodeAt(e);if(r!=39&&r!=34&&r!=40)return!1;let i=r==40?41:r;for(let o=e+1,a=!1;o<t.length;o++){let s=t.charCodeAt(o);if(a)a=!1;else{if(s==i)return mi(vn.LinkTitle,e+n,o+1+n);s==92&&(a=!0)}}return null}function zhe(t,e,n,r){for(let i=!1,o=e+1,a=Math.min(t.length,o+999);o<a;o++){let s=t.charCodeAt(o);if(i)i=!1;else{if(s==93)return r?!1:mi(vn.LinkLabel,e+n,o+1+n);if(r&&!Td(s)&&(r=!1),s==91)return!1;s==92&&(i=!0)}}return null}class g7{constructor(e,n,r){this.parser=e,this.text=n,this.offset=r,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,n){return this.text.slice(e-this.offset,n-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,n,r,i,o){return this.append(new Ku(e,n,r,(i?1:0)|(o?2:0)))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let n=this.parts[e];if(n instanceof Ku&&(n.type==Yx||n.type==pR))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let r=e;r<this.parts.length;r++){let i=this.parts[r];if(!(i instanceof Ku&&i.type.resolve&&i.side&2))continue;let o=i.type==Ihe||i.type==Dhe,a=i.to-i.from,s,u=r-1;for(;u>=e;u--){let A=this.parts[u];if(A instanceof Ku&&A.side&1&&A.type==i.type&&!(o&&(i.side&1||A.side&2)&&(A.to-A.from+a)%3==0&&((A.to-A.from)%3||a%3))){s=A;break}}if(!s)continue;let d=i.type.resolve,m=[],v=s.from,_=i.to;if(o){let A=Math.min(2,s.to-s.from,a);v=s.to-A,_=i.from+A,d=A==1?"Emphasis":"StrongEmphasis"}s.type.mark&&m.push(this.elt(s.type.mark,v,s.to));for(let A=u+1;A<r;A++)this.parts[A]instanceof ck&&m.push(this.parts[A]),this.parts[A]=null;i.type.mark&&m.push(this.elt(i.type.mark,i.from,_));let O=this.elt(d,v,_,m);this.parts[u]=o&&s.from!=v?new Ku(s.type,s.from,v,s.side):null,(this.parts[r]=o&&i.to!=_?new Ku(i.type,_,i.to,i.side):null)?this.parts.splice(r,0,O):this.parts[r]=O}let n=[];for(let r=e;r<this.parts.length;r++){let i=this.parts[r];i instanceof ck&&n.push(i)}return n}findOpeningDelimiter(e){for(let n=this.parts.length-1;n>=0;n--){let r=this.parts[n];if(r instanceof Ku&&r.type==e&&r.side&1)return n}return null}takeContent(e){let n=this.resolveMarkers(e);return this.parts.length=e,n}getDelimiterAt(e){let n=this.parts[e];return n instanceof Ku?n:null}skipSpace(e){return KC(this.text,e-this.offset)+this.offset}elt(e,n,r,i){return typeof e=="string"?mi(this.parser.getNodeType(e),n,r,i):new Rhe(e,n)}}g7.linkStart=Yx;g7.imageStart=pR;function SN(t,e){if(!e.length)return t;if(!t.length)return e;let n=t.slice(),r=0;for(let i of e){for(;r<n.length&&n[r].to<i.to;)r++;if(r<n.length&&n[r].from<i.from){let o=n[r];o instanceof ck&&(n[r]=new ck(o.type,o.from,o.to,SN(o.children,[i])))}else n.splice(r++,0,i)}return n}const xet=[vn.CodeBlock,vn.ListItem,vn.OrderedList,vn.BulletList];class _et{constructor(e,n){this.fragments=e,this.input=n,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,n){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let o=this.fragment.to;for(;o>0&&this.input.read(o-1,o)!=`
`;)o--;this.fragmentEnd=o?o-1:0}let r=this.cursor;r||(r=this.cursor=this.fragment.tree.cursor(),r.firstChild());let i=e+this.fragment.offset;for(;r.to<=i;)if(!r.parent())return!1;for(;;){if(r.from>=i)return this.fragment.from<=n;if(!r.childAfter(i))return!1}}matches(e){let n=this.cursor.tree;return n&&n.prop(wr.contextHash)==e}takeNodes(e){let n=this.cursor,r=this.fragment.offset,i=this.fragmentEnd-(this.fragment.openEnd?1:0),o=e.absoluteLineStart,a=o,s=e.block.children.length,u=a,d=s;for(;;){if(n.to-r>i){if(n.type.isAnonymous&&n.firstChild())continue;break}let m=Nhe(n.from-r,e.ranges);if(n.to-r<=e.ranges[e.rangeI].to)e.addNode(n.tree,m);else{let v=new Gr(e.parser.nodeSet.types[vn.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(v,n.tree),e.addNode(v,m)}if(n.type.is("Block")&&(xet.indexOf(n.type.id)<0?(a=n.to-r,s=e.block.children.length):(a=u,s=d,u=n.to-r,d=e.block.children.length)),!n.nextSibling())break}for(;e.block.children.length>s;)e.block.children.pop(),e.block.positions.pop();return a-o}}function Nhe(t,e){let n=t;for(let r=1;r<e.length;r++){let i=e[r-1].to,o=e[r].from;i<t&&(n-=o-i)}return n}const bet=pS({"Blockquote/...":Be.quote,HorizontalRule:Be.contentSeparator,"ATXHeading1/... SetextHeading1/...":Be.heading1,"ATXHeading2/... SetextHeading2/...":Be.heading2,"ATXHeading3/...":Be.heading3,"ATXHeading4/...":Be.heading4,"ATXHeading5/...":Be.heading5,"ATXHeading6/...":Be.heading6,"Comment CommentBlock":Be.comment,Escape:Be.escape,Entity:Be.character,"Emphasis/...":Be.emphasis,"StrongEmphasis/...":Be.strong,"Link/... Image/...":Be.link,"OrderedList/... BulletList/...":Be.list,"BlockQuote/...":Be.quote,"InlineCode CodeText":Be.monospace,"URL Autolink":Be.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":Be.processingInstruction,"CodeInfo LinkLabel":Be.labelName,LinkTitle:Be.string,Paragraph:Be.content}),wet=new wD(new fS(Phe).extend(bet),Object.keys($P).map(t=>$P[t]),Object.keys($P).map(t=>Ehe[t]),Object.keys($P),met,xhe,Object.keys(N$).map(t=>N$[t]),Object.keys(N$),[]);function Oet(t,e,n){let r=[];for(let i=t.firstChild,o=e;;i=i.nextSibling){let a=i?i.from:n;if(a>o&&r.push({from:o,to:a}),!i)break;o=i.to}return r}function Cet(t){let{codeParser:e,htmlParser:n}=t;return{wrap:Rae((i,o)=>{let a=i.type.id;if(e&&(a==vn.CodeBlock||a==vn.FencedCode)){let s="";if(a==vn.FencedCode){let d=i.node.getChild(vn.CodeInfo);d&&(s=o.read(d.from,d.to))}let u=e(s);if(u)return{parser:u,overlay:d=>d.type.id==vn.CodeText,bracketed:a==vn.FencedCode}}else if(n&&(a==vn.HTMLBlock||a==vn.HTMLTag||a==vn.CommentBlock))return{parser:n,overlay:Oet(i.node,i.from,i.to)};return null})}}const Tet={resolve:"Strikethrough",mark:"StrikethroughMark"},ket={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":Be.strikethrough}},{name:"StrikethroughMark",style:Be.processingInstruction}],parseInline:[{name:"Strikethrough",parse(t,e,n){if(e!=126||t.char(n+1)!=126||t.char(n+2)==126)return-1;let r=t.slice(n-1,n),i=t.slice(n+2,n+3),o=/\s|^$/.test(r),a=/\s|^$/.test(i),s=uk.test(r),u=uk.test(i);return t.addDelimiter(Tet,n,n+2,!a&&(!u||o||s),!o&&(!s||a||u))},after:"Emphasis"}]};function JC(t,e,n=0,r,i=0){let o=0,a=!0,s=-1,u=-1,d=!1,m=()=>{r.push(t.elt("TableCell",i+s,i+u,t.parser.parseInline(e.slice(s,u),i+s)))};for(let v=n;v<e.length;v++){let _=e.charCodeAt(v);_==124&&!d?((!a||s>-1)&&o++,a=!1,r&&(s>-1&&m(),r.push(t.elt("TableDelimiter",v+i,v+i+1))),s=u=-1):(d||_!=32&&_!=9)&&(s<0&&(s=v),u=v+1),d=!d&&_==92}return s>-1&&(o++,r&&m()),o}function _X(t,e){for(let n=e;n<t.length;n++){let r=t.charCodeAt(n);if(r==124)return!0;r==92&&n++}return!1}const Bhe=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class bX{constructor(){this.rows=null}nextLine(e,n,r){if(this.rows==null){this.rows=!1;let i;if((n.next==45||n.next==58||n.next==124)&&Bhe.test(i=n.text.slice(n.pos))){let o=[];JC(e,r.content,0,o,r.start)==JC(e,i,n.pos)&&(this.rows=[e.elt("TableHeader",r.start,r.start+r.content.length,o),e.elt("TableDelimiter",e.lineStart+n.pos,e.lineStart+n.text.length)])}}else if(this.rows){let i=[];JC(e,n.text,n.pos,i,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+n.pos,e.lineStart+n.text.length,i))}return!1}finish(e,n){return this.rows?(e.addLeafElement(n,e.elt("Table",n.start,n.start+n.content.length,this.rows)),!0):!1}}const Eet={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":Be.heading}},"TableRow",{name:"TableCell",style:Be.content},{name:"TableDelimiter",style:Be.processingInstruction}],parseBlock:[{name:"Table",leaf(t,e){return _X(e.content,0)?new bX:null},endLeaf(t,e,n){if(n.parsers.some(i=>i instanceof bX)||!_X(e.text,e.basePos))return!1;let r=t.peekLine();return Bhe.test(r)&&JC(t,e.text,e.basePos)==JC(t,r,e.basePos)},before:"SetextHeading"}]};class Aet{nextLine(){return!1}finish(e,n){return e.addLeafElement(n,e.elt("Task",n.start,n.start+n.content.length,[e.elt("TaskMarker",n.start,n.start+3),...e.parser.parseInline(n.content.slice(3),n.start+3)])),!0}}const Pet={defineNodes:[{name:"Task",block:!0,style:Be.list},{name:"TaskMarker",style:Be.atom}],parseBlock:[{name:"TaskList",leaf(t,e){return/^\[[ xX]\][ \t]/.test(e.content)&&t.parentType().name=="ListItem"?new Aet:null},after:"SetextHeading"}]},wX=/(www\.)|(https?:\/\/)|([\w.+-]{1,100}@)|(mailto:|xmpp:)/gy,OX=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,Met=/[\w-]+\.[\w-]+($|\/)/,SX=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,CX=/\/[a-zA-Z\d@.]+/gy;function TX(t,e,n,r){let i=0;for(let o=e;o<n;o++)t[o]==r&&i++;return i}function Ret(t,e){OX.lastIndex=e;let n=OX.exec(t);if(!n||Met.exec(n[0])[0].indexOf("_")>-1)return-1;let r=e+n[0].length;for(;;){let i=t[r-1],o;if(/[?!.,:*_~]/.test(i)||i==")"&&TX(t,e,r,")")>TX(t,e,r,"("))r--;else if(i==";"&&(o=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(t.slice(e,r))))r=e+o.index;else break}return r}function kX(t,e){SX.lastIndex=e;let n=SX.exec(t);if(!n)return-1;let r=n[0][n[0].length-1];return r=="_"||r=="-"?-1:e+n[0].length-(r=="."?1:0)}const Iet={parseInline:[{name:"Autolink",parse(t,e,n){let r=n-t.offset;if(r&&/\w/.test(t.text[r-1]))return-1;wX.lastIndex=r;let i=wX.exec(t.text),o=-1;if(!i)return-1;if(i[1]||i[2]){if(o=Ret(t.text,r+i[0].length),o>-1&&t.hasOpenLink){let a=/([^\[\]]|\[[^\]]*\])*/.exec(t.text.slice(r,o));o=r+a[0].length}}else i[3]?o=kX(t.text,r):(o=kX(t.text,r+i[0].length),o>-1&&i[0]=="xmpp:"&&(CX.lastIndex=o,i=CX.exec(t.text),i&&(o=i.index+i[0].length)));return o<0?-1:(t.addElement(t.elt("URL",n,o+t.offset)),o+t.offset)}}]},Det=[Eet,Pet,ket,Iet];function Fhe(t,e,n){return(r,i,o)=>{if(i!=t||r.char(o+1)==t)return-1;let a=[r.elt(n,o,o+1)];for(let s=o+1;s<r.end;s++){let u=r.char(s);if(u==t)return r.addElement(r.elt(e,o,s+1,a.concat(r.elt(n,s,s+1))));if(u==92&&a.push(r.elt("Escape",s,s+++2)),Td(u))break}return-1}}const Let={defineNodes:[{name:"Superscript",style:Be.special(Be.content)},{name:"SuperscriptMark",style:Be.processingInstruction}],parseInline:[{name:"Superscript",parse:Fhe(94,"Superscript","SuperscriptMark")}]},$et={defineNodes:[{name:"Subscript",style:Be.special(Be.content)},{name:"SubscriptMark",style:Be.processingInstruction}],parseInline:[{name:"Subscript",parse:Fhe(126,"Subscript","SubscriptMark")}]},zet={defineNodes:[{name:"Emoji",style:Be.character}],parseInline:[{name:"Emoji",parse(t,e,n){let r;return e!=58||!(r=/^[a-zA-Z_0-9]+:/.exec(t.slice(n+1,t.end)))?-1:t.addElement(t.elt("Emoji",n,n+1+r[0].length))}}]},jhe=cD({commentTokens:{block:{open:"<!--",close:"-->"}}}),Vhe=new wr,Qhe=wet.configure({props:[gS.add(t=>!t.is("Block")||t.is("Document")||CN(t)!=null||Net(t)?void 0:(e,n)=>({from:n.doc.lineAt(e.from).to,to:e.to})),Vhe.add(CN),mS.add({Document:()=>null}),F0.add({Document:jhe})]});function CN(t){let e=/^(?:ATX|Setext)Heading(\d)$/.exec(t.name);return e?+e[1]:void 0}function Net(t){return t.name=="OrderedList"||t.name=="BulletList"}function Bet(t,e){let n=t;for(;;){let r=n.nextSibling,i;if(!r||(i=CN(r.type))!=null&&i<=e)break;n=r}return n.to}const Fet=Nae.of((t,e,n)=>{for(let r=ao(t).resolveInner(n,-1);r&&!(r.from<e);r=r.parent){let i=r.type.prop(Vhe);if(i==null)continue;let o=Bet(r,i);if(o>n)return{from:n,to:o}}return null});function y7(t){return new lh(jhe,t,[],"markdown")}const Uhe=y7(Qhe),jet=Qhe.configure([Det,$et,Let,zet,{props:[gS.add({Table:(t,e)=>({from:e.doc.lineAt(t.from).to,to:t.to})})]}]),hk=y7(jet);function Vet(t,e){return n=>{if(n&&t){let r=null;if(n=/\S*/.exec(n)[0],typeof t=="function"?r=t(n):r=Pt.matchLanguageName(t,n,!0),r instanceof Pt)return r.support?r.support.language.parser:Q_.getSkippingParser(r.load());if(r)return r.parser}return e?e.parser:null}}class B${constructor(e,n,r,i,o,a,s){this.node=e,this.from=n,this.to=r,this.spaceBefore=i,this.spaceAfter=o,this.type=a,this.item=s}blank(e,n=!0){let r=this.spaceBefore+(this.node.name=="Blockquote"?">":"");if(e!=null){for(;r.length<e;)r+=" ";return r}else{for(let i=this.to-this.from-r.length-this.spaceAfter.length;i>0;i--)r+=" ";return r+(n?this.spaceAfter:"")}}marker(e,n){let r=this.node.name=="OrderedList"?String(+qhe(this.item,e)[2]+n):"";return this.spaceBefore+r+this.type+this.spaceAfter}}function Zhe(t,e){let n=[],r=[];for(let i=t;i;i=i.parent){if(i.name=="FencedCode")return r;(i.name=="ListItem"||i.name=="Blockquote")&&n.push(i)}for(let i=n.length-1;i>=0;i--){let o=n[i],a,s=e.lineAt(o.from),u=o.from-s.from;if(o.name=="Blockquote"&&(a=/^ *>( ?)/.exec(s.text.slice(u))))r.push(new B$(o,u,u+a[0].length,"",a[1],">",null));else if(o.name=="ListItem"&&o.parent.name=="OrderedList"&&(a=/^( *)\d+([.)])( *)/.exec(s.text.slice(u)))){let d=a[3],m=a[0].length;d.length>=4&&(d=d.slice(0,d.length-4),m-=4),r.push(new B$(o.parent,u,u+m,a[1],d,a[2],o))}else if(o.name=="ListItem"&&o.parent.name=="BulletList"&&(a=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(s.text.slice(u)))){let d=a[4],m=a[0].length;d.length>4&&(d=d.slice(0,d.length-4),m-=4);let v=a[2];a[3]&&(v+=a[3].replace(/[xX]/," ")),r.push(new B$(o.parent,u,u+m,a[1],d,v,o))}}return r}function qhe(t,e){return/^(\s*)(\d+)(?=[.)])/.exec(e.sliceString(t.from,t.from+10))}function F$(t,e,n,r=0){for(let i=-1,o=t;;){if(o.name=="ListItem"){let s=qhe(o,e),u=+s[2];if(i>=0){if(u!=i+1)return;n.push({from:o.from+s[1].length,to:o.from+s[0].length,insert:String(i+2+r)})}i=u}let a=o.nextSibling;if(!a)break;o=a}}function v7(t,e){let n=/^[ \t]*/.exec(t)[0].length;if(!n||e.facet(aE)!="	")return t;let r=Nf(t,4,n),i="";for(let o=r;o>0;)o>=4?(i+="	",o-=4):(i+=" ",o--);return i+t.slice(n)}const Whe=(t={})=>({state:e,dispatch:n})=>{let r=ao(e),{doc:i}=e,o=null,a=e.changeByRange(s=>{if(!s.empty||!hk.isActiveAt(e,s.from,-1)&&!hk.isActiveAt(e,s.from,1))return o={range:s};let u=s.from,d=i.lineAt(u),m=Zhe(r.resolveInner(u,-1),i);for(;m.length&&m[m.length-1].from>u-d.from;)m.pop();if(!m.length)return o={range:s};let v=m[m.length-1];if(v.to-v.spaceAfter.length>u-d.from)return o={range:s};let _=u>=v.to-v.spaceAfter.length&&!/\S/.test(d.text.slice(v.to));if(v.item&&_){let L=v.node.firstChild,$=v.node.getChild("ListItem","ListItem");if(L.to>=u||$&&$.to<u||d.from>0&&!/[^\s>]/.test(i.lineAt(d.from-1).text)||t.nonTightLists===!1){let N=m.length>1?m[m.length-2]:null,F,Q="";N&&N.item?(F=d.from+N.from,Q=N.marker(i,1)):F=d.from+(N?N.to:0);let W=[{from:F,to:u,insert:Q}];return v.node.name=="OrderedList"&&F$(v.item,i,W,-2),N&&N.node.name=="OrderedList"&&F$(N.item,i,W),{range:Qt.cursor(F+Q.length),changes:W}}else{let N=AX(m,e,d);return{range:Qt.cursor(u+N.length+1),changes:{from:d.from,insert:N+e.lineBreak}}}}if(v.node.name=="Blockquote"&&_&&d.from){let L=i.lineAt(d.from-1),$=/>\s*$/.exec(L.text);if($&&$.index==v.from){let N=e.changes([{from:L.from+$.index,to:L.to},{from:d.from+v.from,to:d.to}]);return{range:s.map(N),changes:N}}}let O=[];v.node.name=="OrderedList"&&F$(v.item,i,O);let E=v.item&&v.item.from<d.from,A="";if(!E||/^[\s\d.)\-+*>]*/.exec(d.text)[0].length>=v.to)for(let L=0,$=m.length-1;L<=$;L++)A+=L==$&&!E?m[L].marker(i,1):m[L].blank(L<$?Nf(d.text,4,m[L+1].from)-A.length:null);let M=u;for(;M>d.from&&/\s/.test(d.text.charAt(M-d.from-1));)M--;return A=v7(A,e),Qet(v.node,e.doc)&&(A=AX(m,e,d)+e.lineBreak+A),O.push({from:M,to:u,insert:e.lineBreak+A}),{range:Qt.cursor(M+A.length+1),changes:O}});return o?!1:(n(e.update(a,{scrollIntoView:!0,userEvent:"input"})),!0)},Hhe=Whe();function EX(t){return t.name=="QuoteMark"||t.name=="ListMark"}function Qet(t,e){if(t.name!="OrderedList"&&t.name!="BulletList")return!1;let n=t.firstChild,r=t.getChild("ListItem","ListItem");if(!r)return!1;let i=e.lineAt(n.to),o=e.lineAt(r.from),a=/^[\s>]*$/.test(i.text);return i.number+(a?0:1)<o.number}function AX(t,e,n){let r="";for(let i=0,o=t.length-2;i<=o;i++)r+=t[i].blank(i<o?Nf(n.text,4,t[i+1].from)-r.length:null,i<o);return v7(r,e)}function Uet(t,e){let n=t.resolveInner(e,-1),r=e;EX(n)&&(r=n.from,n=n.parent);for(let i;i=n.childBefore(r);)if(EX(i))r=i.from;else if(i.name=="OrderedList"||i.name=="BulletList")n=i.lastChild,r=n.to;else break;return n}const Ghe=({state:t,dispatch:e})=>{let n=ao(t),r=null,i=t.changeByRange(o=>{let a=o.from,{doc:s}=t;if(o.empty&&hk.isActiveAt(t,o.from)){let u=s.lineAt(a),d=Zhe(Uet(n,a),s);if(d.length){let m=d[d.length-1],v=m.to-m.spaceAfter.length+(m.spaceAfter?1:0);if(a-u.from>v&&!/\S/.test(u.text.slice(v,a-u.from)))return{range:Qt.cursor(u.from+v),changes:{from:u.from+v,to:a}};if(a-u.from==v&&(!m.item||u.from<=m.item.from||!/\S/.test(u.text.slice(0,m.to)))){let _=u.from+m.from;if(m.item&&m.node.from<m.item.from&&/\S/.test(u.text.slice(m.from,m.to))){let O=m.blank(Nf(u.text,4,m.to)-Nf(u.text,4,m.from));return _==u.from&&(O=v7(O,t)),{range:Qt.cursor(_+O.length),changes:{from:_,to:u.from+m.to,insert:O}}}if(_<a)return{range:Qt.cursor(_),changes:{from:_,to:a}}}}}return r={range:o}});return r?!1:(e(t.update(i,{scrollIntoView:!0,userEvent:"delete"})),!0)},Xhe=[{key:"Enter",run:Hhe},{key:"Backspace",run:Ghe}],Yhe=$ce({matchClosingTags:!1});function Khe(t={}){let{codeLanguages:e,defaultCodeLanguage:n,addKeymap:r=!0,base:{parser:i}=Uhe,completeHTMLTags:o=!0,pasteURLAsLink:a=!0,htmlTagLanguage:s=Yhe}=t;if(!(i instanceof wD))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let u=t.extensions?[t.extensions]:[],d=[s.support,Fet],m;a&&d.push(Jhe),n instanceof TO?(d.push(n.support),m=n.language):n&&(m=n);let v=e||m?Vet(e,m):void 0;u.push(Cet({codeParser:v,htmlParser:s.language.parser})),r&&d.push(Uf.high(dS.of(Xhe)));let _=y7(i.configure(u));return o&&d.push(_.data.of({autocomplete:Zet})),new TO(_,d)}function Zet(t){let{state:e,pos:n}=t,r=/<[:\-\.\w\u00b7-\uffff]*$/.exec(e.sliceDoc(n-25,n));if(!r)return null;let i=ao(e).resolveInner(n,-1);for(;i&&!i.type.isTop;){if(i.name=="CodeBlock"||i.name=="FencedCode"||i.name=="ProcessingInstructionBlock"||i.name=="CommentBlock"||i.name=="Link"||i.name=="Image")return null;i=i.parent}return{from:n-r[0].length,to:n,options:qet(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}let j$=null;function qet(){if(j$)return j$;let t=Mce(new TF($r.create({extensions:Yhe}),0,!0));return j$=t?t.options:[]}const Wet=/code|horizontalrule|html|link|comment|processing|escape|entity|image|mark|url/i,Jhe=pn.domEventHandlers({paste:(t,e)=>{var n;let{main:r}=e.state.selection;if(r.empty)return!1;let i=(n=t.clipboardData)===null||n===void 0?void 0:n.getData("text/plain");if(!i||!/^(https?:\/\/|mailto:|xmpp:|www\.)/.test(i)||(/^www\./.test(i)&&(i="https://"+i),!hk.isActiveAt(e.state,r.from,1)))return!1;let o=ao(e.state),a=!1;return o.iterate({from:r.from,to:r.to,enter:s=>{(s.from>r.from||Wet.test(s.name))&&(a=!0)},leave:s=>{s.to<r.to&&(a=!0)}}),a?!1:(e.dispatch({changes:[{from:r.from,insert:"["},{from:r.to,insert:`](${i})`}],userEvent:"input.paste",scrollIntoView:!0}),!0)}}),Het=Object.freeze(Object.defineProperty({__proto__:null,commonmarkLanguage:Uhe,deleteMarkupBackward:Ghe,insertNewlineContinueMarkup:Hhe,insertNewlineContinueMarkupCommand:Whe,markdown:Khe,markdownKeymap:Xhe,markdownLanguage:hk,pasteURLAsLink:Jhe},Symbol.toStringTag,{value:"Module"})),TN=[Kce,Nce,Khe(),gF(),pn.lineWrapping],Get=()=>{const[t,e,n]=us(_m,ml,x7),r=Ki(z_),i=Ki(ET),o=le.useRef(null),a=le.useCallback(s=>{var u;if(s!==null){const d=[...n,...TN,pn.updateListener.of(({state:m})=>{r(m.doc.toString())}),pn.focusChangeEffect.of((m,v)=>(v||i(new FocusEvent("blur")),null))];e&&d.push($r.readOnly.of(!0)),s.innerHTML="",o.current=new pn({parent:s,state:$r.create({doc:t,extensions:d})})}else(u=o.current)==null||u.destroy(),o.current=null},[t,e,r,n,i]);return le.createElement("div",{ref:a,className:"cm-sourceView mdxeditor-source-editor"})};function PX(t,e){t!==void 0&&t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}})}const Xet=()=>{const t=GO(),[e,n,r,i]=us(_m,mR,ml,ede),o=Ki(z_),a=le.useRef(null),s=le.useRef(null),u=$s(x7),d=Ki(ET);return le.useEffect(()=>t.sub(mR,m=>{var v;PX((v=s.current)==null?void 0:v.a,m)}),[t]),le.useEffect(()=>t.sub(_m,m=>{var v;PX((v=s.current)==null?void 0:v.b,m)}),[t]),le.useEffect(()=>{const m=r||i,v=m?{renderRevertControl:void 0,revertControls:void 0}:{renderRevertControl:()=>{const _=document.createElement("button");return _.classList.add("cm-merge-revert"),_.appendChild(document.createTextNode("")),_},revertControls:"a-to-b"};return s.current=new uet({...v,parent:a.current,orientation:"a-b",gutter:!0,a:{doc:n,extensions:[...u,...TN,$r.readOnly.of(!0)]},b:{doc:e,extensions:[...u,...TN,$r.readOnly.of(m),pn.updateListener.of(({state:_})=>{const O=_.doc.toString();o(O)}),pn.focusChangeEffect.of((_,O)=>(O||d(new FocusEvent("blur")),null))]}}),()=>{var _;(_=s.current)==null||_.destroy(),s.current=null}},[o,u]),le.createElement("div",{ref:a,className:"mdxeditor-diff-editor"})},Yet=({children:t})=>{const[e,n]=us(kT,$_);return le.createElement("div",{className:"mdxeditor-diff-source-wrapper"},e?le.createElement("div",{className:Ut.markdownParseError},le.createElement("p",null,e.error,"."),le.createElement("p",null,"You can fix the errors in source mode and switch to rich text mode when you are ready.")):null,le.createElement("div",{className:"mdxeditor-rich-text-editor",style:{display:n==="rich-text"&&e==null?"block":"none"}},t),n==="diff"?le.createElement(Xet,null):null,n==="source"?le.createElement(Get,null):null)},mR=In(""),x7=In([]),ede=In(!1),Ket=Zl({update:(t,e)=>{t.pub(mR,e?.diffMarkdown??"")},init(t,e){t.pubIn({[mR]:e?.diffMarkdown??"",[x7]:e?.codeMirrorExtensions??[],[sLe]:Yet,[ede]:e?.readOnlyDiff??!1,[$_]:e?.viewMode??"rich-text"})}});var V$={exports:{}},MX;function Jet(){return MX||(MX=1,(function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};var n=(function(r){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,o=0,a={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function $(N){return N instanceof u?new u(N.type,$(N.content),N.alias):Array.isArray(N)?N.map($):N.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function($){return Object.prototype.toString.call($).slice(8,-1)},objId:function($){return $.__id||Object.defineProperty($,"__id",{value:++o}),$.__id},clone:function $(N,F){F=F||{};var Q,W;switch(s.util.type(N)){case"Object":if(W=s.util.objId(N),F[W])return F[W];Q={},F[W]=Q;for(var H in N)N.hasOwnProperty(H)&&(Q[H]=$(N[H],F));return Q;case"Array":return W=s.util.objId(N),F[W]?F[W]:(Q=[],F[W]=Q,N.forEach(function(te,ne){Q[ne]=$(te,F)}),Q);default:return N}},getLanguage:function($){for(;$;){var N=i.exec($.className);if(N)return N[1].toLowerCase();$=$.parentElement}return"none"},setLanguage:function($,N){$.className=$.className.replace(RegExp(i,"gi"),""),$.classList.add("language-"+N)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(Q){var $=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Q.stack)||[])[1];if($){var N=document.getElementsByTagName("script");for(var F in N)if(N[F].src==$)return N[F]}return null}},isActive:function($,N,F){for(var Q="no-"+N;$;){var W=$.classList;if(W.contains(N))return!0;if(W.contains(Q))return!1;$=$.parentElement}return!!F}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function($,N){var F=s.util.clone(s.languages[$]);for(var Q in N)F[Q]=N[Q];return F},insertBefore:function($,N,F,Q){Q=Q||s.languages;var W=Q[$],H={};for(var te in W)if(W.hasOwnProperty(te)){if(te==N)for(var ne in F)F.hasOwnProperty(ne)&&(H[ne]=F[ne]);F.hasOwnProperty(te)||(H[te]=W[te])}var ce=Q[$];return Q[$]=H,s.languages.DFS(s.languages,function(we,re){re===ce&&we!=$&&(this[we]=H)}),H},DFS:function $(N,F,Q,W){W=W||{};var H=s.util.objId;for(var te in N)if(N.hasOwnProperty(te)){F.call(N,te,N[te],Q||te);var ne=N[te],ce=s.util.type(ne);ce==="Object"&&!W[H(ne)]?(W[H(ne)]=!0,$(ne,F,null,W)):ce==="Array"&&!W[H(ne)]&&(W[H(ne)]=!0,$(ne,F,te,W))}}},plugins:{},highlightAll:function($,N){s.highlightAllUnder(document,$,N)},highlightAllUnder:function($,N,F){var Q={callback:F,container:$,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",Q),Q.elements=Array.prototype.slice.apply(Q.container.querySelectorAll(Q.selector)),s.hooks.run("before-all-elements-highlight",Q);for(var W=0,H;H=Q.elements[W++];)s.highlightElement(H,N===!0,Q.callback)},highlightElement:function($,N,F){var Q=s.util.getLanguage($),W=s.languages[Q];s.util.setLanguage($,Q);var H=$.parentElement;H&&H.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(H,Q);var te=$.textContent,ne={element:$,language:Q,grammar:W,code:te};function ce(re){ne.highlightedCode=re,s.hooks.run("before-insert",ne),ne.element.innerHTML=ne.highlightedCode,s.hooks.run("after-highlight",ne),s.hooks.run("complete",ne),F&&F.call(ne.element)}if(s.hooks.run("before-sanity-check",ne),H=ne.element.parentElement,H&&H.nodeName.toLowerCase()==="pre"&&!H.hasAttribute("tabindex")&&H.setAttribute("tabindex","0"),!ne.code){s.hooks.run("complete",ne),F&&F.call(ne.element);return}if(s.hooks.run("before-highlight",ne),!ne.grammar){ce(s.util.encode(ne.code));return}if(N&&r.Worker){var we=new Worker(s.filename);we.onmessage=function(re){ce(re.data)},we.postMessage(JSON.stringify({language:ne.language,code:ne.code,immediateClose:!0}))}else ce(s.highlight(ne.code,ne.grammar,ne.language))},highlight:function($,N,F){var Q={code:$,grammar:N,language:F};if(s.hooks.run("before-tokenize",Q),!Q.grammar)throw new Error('The language "'+Q.language+'" has no grammar.');return Q.tokens=s.tokenize(Q.code,Q.grammar),s.hooks.run("after-tokenize",Q),u.stringify(s.util.encode(Q.tokens),Q.language)},tokenize:function($,N){var F=N.rest;if(F){for(var Q in F)N[Q]=F[Q];delete N.rest}var W=new v;return _(W,W.head,$),m($,W,N,W.head,0),E(W)},hooks:{all:{},add:function($,N){var F=s.hooks.all;F[$]=F[$]||[],F[$].push(N)},run:function($,N){var F=s.hooks.all[$];if(!(!F||!F.length))for(var Q=0,W;W=F[Q++];)W(N)}},Token:u};r.Prism=s;function u($,N,F,Q){this.type=$,this.content=N,this.alias=F,this.length=(Q||"").length|0}u.stringify=function $(N,F){if(typeof N=="string")return N;if(Array.isArray(N)){var Q="";return N.forEach(function(ce){Q+=$(ce,F)}),Q}var W={type:N.type,content:$(N.content,F),tag:"span",classes:["token",N.type],attributes:{},language:F},H=N.alias;H&&(Array.isArray(H)?Array.prototype.push.apply(W.classes,H):W.classes.push(H)),s.hooks.run("wrap",W);var te="";for(var ne in W.attributes)te+=" "+ne+'="'+(W.attributes[ne]||"").replace(/"/g,"&quot;")+'"';return"<"+W.tag+' class="'+W.classes.join(" ")+'"'+te+">"+W.content+"</"+W.tag+">"};function d($,N,F,Q){$.lastIndex=N;var W=$.exec(F);if(W&&Q&&W[1]){var H=W[1].length;W.index+=H,W[0]=W[0].slice(H)}return W}function m($,N,F,Q,W,H){for(var te in F)if(!(!F.hasOwnProperty(te)||!F[te])){var ne=F[te];ne=Array.isArray(ne)?ne:[ne];for(var ce=0;ce<ne.length;++ce){if(H&&H.cause==te+","+ce)return;var we=ne[ce],re=we.inside,se=!!we.lookbehind,be=!!we.greedy,fe=we.alias;if(be&&!we.pattern.global){var ve=we.pattern.toString().match(/[imsuy]*$/)[0];we.pattern=RegExp(we.pattern.source,ve+"g")}for(var Me=we.pattern||we,Ne=Q.next,Qe=W;Ne!==N.tail&&!(H&&Qe>=H.reach);Qe+=Ne.value.length,Ne=Ne.next){var Ce=Ne.value;if(N.length>$.length)return;if(!(Ce instanceof u)){var Ae=1,Xe;if(be){if(Xe=d(Me,Qe,$,se),!Xe||Xe.index>=$.length)break;var lt=Xe.index,ke=Xe.index+Xe[0].length,ft=Qe;for(ft+=Ne.value.length;lt>=ft;)Ne=Ne.next,ft+=Ne.value.length;if(ft-=Ne.value.length,Qe=ft,Ne.value instanceof u)continue;for(var pt=Ne;pt!==N.tail&&(ft<ke||typeof pt.value=="string");pt=pt.next)Ae++,ft+=pt.value.length;Ae--,Ce=$.slice(Qe,ft),Xe.index-=Qe}else if(Xe=d(Me,0,Ce,se),!Xe)continue;var lt=Xe.index,ot=Xe[0],yt=Ce.slice(0,lt),Et=Ce.slice(lt+ot.length),Tt=Qe+Ce.length;H&&Tt>H.reach&&(H.reach=Tt);var Ht=Ne.prev;yt&&(Ht=_(N,Ht,yt),Qe+=yt.length),O(N,Ht,Ae);var wt=new u(te,re?s.tokenize(ot,re):ot,fe,ot);if(Ne=_(N,Ht,wt),Et&&_(N,Ne,Et),Ae>1){var un={cause:te+","+ce,reach:Tt};m($,N,F,Ne.prev,Qe,un),H&&un.reach>H.reach&&(H.reach=un.reach)}}}}}}function v(){var $={value:null,prev:null,next:null},N={value:null,prev:$,next:null};$.next=N,this.head=$,this.tail=N,this.length=0}function _($,N,F){var Q=N.next,W={value:F,prev:N,next:Q};return N.next=W,Q.prev=W,$.length++,W}function O($,N,F){for(var Q=N.next,W=0;W<F&&Q!==$.tail;W++)Q=Q.next;N.next=Q,Q.prev=N,$.length-=W}function E($){for(var N=[],F=$.head.next;F!==$.tail;)N.push(F.value),F=F.next;return N}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function($){var N=JSON.parse($.data),F=N.language,Q=N.code,W=N.immediateClose;r.postMessage(s.highlight(Q,s.languages[F],F)),W&&r.close()},!1)),s;var A=s.util.currentScript();A&&(s.filename=A.src,A.hasAttribute("data-manual")&&(s.manual=!0));function M(){s.manual||s.highlightAll()}if(!s.manual){var L=document.readyState;L==="loading"||L==="interactive"&&A&&A.defer?document.addEventListener("DOMContentLoaded",M):window.requestAnimationFrame?window.requestAnimationFrame(M):window.setTimeout(M,16)}return s})(e);t.exports&&(t.exports=n),typeof D7<"u"&&(D7.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(i,o){var a={};a["language-"+o]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[o]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};s["language-"+o]={pattern:/[\s\S]+/,inside:n.languages[o]};var u={};u[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,i){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:n.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,(function(r){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var o=r.languages.markup;o&&(o.tag.addInlined("style","css"),o.tag.addAttribute("style","css"))})(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,(function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",i=function(A,M){return" Error "+A+" while fetching file: "+M},o=" Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",u="loading",d="loaded",m="failed",v="pre[data-src]:not(["+s+'="'+d+'"]):not(['+s+'="'+u+'"])';function _(A,M,L){var $=new XMLHttpRequest;$.open("GET",A,!0),$.onreadystatechange=function(){$.readyState==4&&($.status<400&&$.responseText?M($.responseText):$.status>=400?L(i($.status,$.statusText)):L(o))},$.send(null)}function O(A){var M=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(A||"");if(M){var L=Number(M[1]),$=M[2],N=M[3];return $?N?[L,Number(N)]:[L,void 0]:[L,L]}}n.hooks.add("before-highlightall",function(A){A.selector+=", "+v}),n.hooks.add("before-sanity-check",function(A){var M=A.element;if(M.matches(v)){A.code="",M.setAttribute(s,u);var L=M.appendChild(document.createElement("CODE"));L.textContent=r;var $=M.getAttribute("data-src"),N=A.language;if(N==="none"){var F=(/\.(\w+)$/.exec($)||[,"none"])[1];N=a[F]||F}n.util.setLanguage(L,N),n.util.setLanguage(M,N);var Q=n.plugins.autoloader;Q&&Q.loadLanguages(N),_($,function(W){M.setAttribute(s,d);var H=O(M.getAttribute("data-range"));if(H){var te=W.split(/\r\n?|\n/g),ne=H[0],ce=H[1]==null?te.length:H[1];ne<0&&(ne+=te.length),ne=Math.max(0,Math.min(ne-1,te.length)),ce<0&&(ce+=te.length),ce=Math.max(0,Math.min(ce,te.length)),W=te.slice(ne,ce).join(`
`),M.hasAttribute("data-start")||M.setAttribute("data-start",String(ne+1))}L.textContent=W,n.highlightElement(L)},function(W){M.setAttribute(s,m),L.textContent=W})}}),n.plugins.fileHighlight={highlight:function(M){for(var L=(M||document).querySelectorAll(v),$=0,N;N=L[$++];)n.highlightElement(N)}};var E=!1;n.fileHighlight=function(){E||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),E=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(V$)),V$.exports}Jet();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(t){t.type==="entity"&&(t.attributes.title=t.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(e,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};i["language-"+n]={pattern:/[\s\S]+/,inside:Prism.languages[n]};var o={};o[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:i},Prism.languages.insertBefore("markup","cdata",o)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(t,e){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+t+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[e,"language-"+e],inside:Prism.languages[e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(t){var e=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(m){return m=m.replace(/<inner>/g,function(){return e}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+m+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,i=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),o=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;t.languages.markdown=t.languages.extend("markup",{}),t.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:t.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+i+o+"(?:"+i+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+i+o+")(?:"+i+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:t.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+i+")"+o+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+i+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:t.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(m){["url","bold","italic","strike","code-snippet"].forEach(function(v){m!==v&&(t.languages.markdown[m].inside.content.inside[v]=t.languages.markdown[v])})}),t.hooks.add("after-tokenize",function(m){if(m.language!=="markdown"&&m.language!=="md")return;function v(_){if(!(!_||typeof _=="string"))for(var O=0,E=_.length;O<E;O++){var A=_[O];if(A.type!=="code"){v(A.content);continue}var M=A.content[1],L=A.content[3];if(M&&L&&M.type==="code-language"&&L.type==="code-block"&&typeof M.content=="string"){var $=M.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");$=(/[a-z][\w-]*/i.exec($)||[""])[0].toLowerCase();var N="language-"+$;L.alias?typeof L.alias=="string"?L.alias=[L.alias,N]:L.alias.push(N):L.alias=[N]}}}v(m.tokens)}),t.hooks.add("wrap",function(m){if(m.type==="code-block"){for(var v="",_=0,O=m.classes.length;_<O;_++){var E=m.classes[_],A=/language-(.+)/.exec(E);if(A){v=A[1];break}}var M=t.languages[v];if(M)m.content=t.highlight(d(m.content),M,v);else if(v&&v!=="none"&&t.plugins.autoloader){var L="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);m.attributes.id=L,t.plugins.autoloader.loadLanguages(v,function(){var $=document.getElementById(L);$&&($.innerHTML=t.highlight($.textContent,t.languages[v],v))})}}});var a=RegExp(t.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function d(m){var v=m.replace(a,"");return v=v.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(_,O){if(O=O.toLowerCase(),O[0]==="#"){var E;return O[1]==="x"?E=parseInt(O.slice(2),16):E=Number(O.slice(1)),u(E)}else{var A=s[O];return A||_}}),v}t.languages.md=t.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(t){var e=t.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};e.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:e},boolean:e.boolean,variable:e.variable}})(Prism);var RX={},IX;function ett(){return IX||(IX=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),RX}ett();var DX={},LX;function ttt(){return LX||(LX=1,(function(t){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),t.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},t.languages.rust["closure-params"].inside.rest=t.languages.rust,t.languages.rust.attribute.inside.string=t.languages.rust.string})(Prism)),DX}ttt();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(t){t.inside.interpolation.inside=Prism.languages.swift});var $X={},zX;function ntt(){return zX||(zX=1,(function(t){t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),t.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete t.languages.typescript.parameter,delete t.languages.typescript["literal-property"];var e=t.languages.extend("typescript",{});delete e["class-name"],t.languages.typescript["class-name"].inside=e,t.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),t.languages.ts=t.languages.typescript})(Prism)),$X}ntt();var NX={},BX;function rtt(){return BX||(BX=1,(function(t){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,r={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};t.languages.java=t.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[r,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:r.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:r.inside}],keyword:e,function:[t.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),t.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),t.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":r,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:r.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:r.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),NX}rtt();var FX={},jX;function itt(){return jX||(jX=1,(function(t){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});t.languages.cpp=t.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),t.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return n})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),t.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t.languages.cpp}}}}),t.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),t.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:t.languages.extend("cpp",{})}}),t.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},t.languages.cpp["base-clause"])})(Prism)),FX}itt();function tde(t,e){for(const n of t.childNodes){if(Ko(n)&&n.tagName===e)return!0;tde(n,e)}return!1}const CC="data-language",oC="data-highlight-language",NP="data-theme";class yE extends xu{static getType(){return"code"}static clone(e){return new yE(e.__language,e.__key)}constructor(e,n){super(n),this.__language=e||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(e){super.afterCloneFrom(e),this.__language=e.__language,this.__theme=e.__theme,this.__isSyntaxHighlightSupported=e.__isSyntaxHighlightSupported}createDOM(e){const n=document.createElement("code");Lf(n,e.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();r&&(n.setAttribute(CC,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(oC,r));const i=this.getTheme();i&&n.setAttribute(NP,i);const o=this.getStyle();return o&&n.setAttribute("style",o),n}updateDOM(e,n,r){const i=this.__language,o=e.__language;i?i!==o&&n.setAttribute(CC,i):o&&n.removeAttribute(CC);const a=this.__isSyntaxHighlightSupported;e.__isSyntaxHighlightSupported&&o?a&&i?i!==o&&n.setAttribute(oC,i):n.removeAttribute(oC):a&&i&&n.setAttribute(oC,i);const s=this.__theme,u=e.__theme;s?s!==u&&n.setAttribute(NP,s):u&&n.removeAttribute(NP);const d=this.__style,m=e.__style;return d?d!==m&&n.setAttribute("style",d):m&&n.removeAttribute("style"),!1}exportDOM(e){const n=document.createElement("pre");Lf(n,e._config.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();r&&(n.setAttribute(CC,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(oC,r));const i=this.getTheme();i&&n.setAttribute(NP,i);const o=this.getStyle();return o&&n.setAttribute("style",o),{element:n}}static importDOM(){return{code:e=>e.textContent!=null&&(/\r?\n/.test(e.textContent)||tde(e,"BR"))?{conversion:VX,priority:1}:null,div:()=>({conversion:ott,priority:1}),pre:()=>({conversion:VX,priority:0}),table:e=>Q$(e)?{conversion:stt,priority:3}:null,td:e=>{const n=e,r=n.closest("table");return n.classList.contains("js-file-line")||r&&Q$(r)?{conversion:QX,priority:3}:null},tr:e=>{const n=e.closest("table");return n&&Q$(n)?{conversion:QX,priority:3}:null}}}static importJSON(e){return Hg().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setLanguage(e.language).setTheme(e.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(e,n=!0){const r=this.getChildren(),i=r.length;if(i>=2&&r[i-1].getTextContent()===`
`&&r[i-2].getTextContent()===`
`&&e.isCollapsed()&&e.anchor.key===this.__key&&e.anchor.offset===i){r[i-1].remove(),r[i-2].remove();const u=Oi();return this.insertAfter(u,n),u}const{anchor:o,focus:a}=e,s=(o.isBefore(a)?o:a).getNode();if(gn(s)){let u=ltt(s);const d=[];for(;;)if(cI(u))d.push(YO()),u=u.getNextSibling();else{if(!ode(u))break;{let M=0;const L=u.getTextContent(),$=u.getTextContentSize();for(;M<$&&L[M]===" ";)M++;if(M!==0&&d.push(ide(" ".repeat(M))),M!==$)break;u=u.getNextSibling()}}const m=s.splitText(o.offset)[0],v=o.offset===0?0:1,_=m.getIndexWithinParent()+v,O=s.getParentOrThrow(),E=[If(),...d];O.splice(_,0,E);const A=d[d.length-1];A?A.select():o.offset===0?m.selectPrevious():m.getNextSibling().selectNext(0,0)}if(_7(s)){const{offset:u}=e.anchor;s.splice(u,0,[If()]),s.select(u+1,u+1)}return null}canIndent(){return!1}collapseAtStart(){const e=Oi();return this.getChildren().forEach((n=>e.append(n))),this.replace(e),!0}setLanguage(e){const n=this.getWritable();return n.__language=e||void 0,n}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(e){const n=this.getWritable();return n.__isSyntaxHighlightSupported=e,n}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(e){const n=this.getWritable();return n.__theme=e||void 0,n}getTheme(){return this.getLatest().__theme}}function Hg(t,e){return cRe(yE).setLanguage(t).setTheme(e)}function _7(t){return t instanceof yE}function VX(t){return{node:Hg(t.getAttribute(CC))}}function ott(t){const e=t,n=UX(e);return n||(function(r){let i=r.parentElement;for(;i!==null;){if(UX(i))return!0;i=i.parentElement}return!1})(e)?{node:n?Hg():null}:{node:null}}function stt(){return{node:Hg()}}function QX(){return{node:null}}function UX(t){return t.style.fontFamily.match("monospace")!==null}function Q$(t){return t.classList.contains("js-file-line-container")}let nde=class rde extends Tm{constructor(e="",n,r){super(e,r),this.__highlightType=n}static getType(){return"code-highlight"}static clone(e){return new rde(e.__text,e.__highlightType||void 0,e.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(e){const n=this.getWritable();return n.__highlightType=e||void 0,n}canHaveFormat(){return!1}createDOM(e){const n=super.createDOM(e),r=U$(e.theme,this.__highlightType);return Lf(n,r),n}updateDOM(e,n,r){const i=super.updateDOM(e,n,r),o=U$(r.theme,e.__highlightType),a=U$(r.theme,this.__highlightType);return o!==a&&(o&&OI(n,o),a&&Lf(n,a)),i}static importJSON(e){return ide().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setHighlightType(e.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(e){return this}isParentRequired(){return!0}createParentElementNode(){return Hg()}};function U$(t,e){return e&&t&&t.codeHighlight&&t.codeHighlight[e]}function ide(t="",e){return vh(new nde(t,e))}function ode(t){return t instanceof nde}function att(t,e){let n=t;for(let r=ia(t,e);r&&(ode(r.origin)||cI(r.origin));r=MRe(r))n=r.origin;return n}function ltt(t){return att(t,"previous")}(function(t){t.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var e={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(e).forEach((function(n){var r=e[n],i=[];/^\w+$/.test(n)||i.push(/\w+/.exec(n)[0]),n==="diff"&&i.push("bold"),t.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:i,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}})),Object.defineProperty(t.languages.diff,"PREFIXES",{value:e})})(Prism);function kN(t,e){const n={};for(const r of t){const i=e(r);i&&(n[i]?n[i].push(r):n[i]=[r])}return n}function ctt(t){const e=kN(t,(n=>n.type));return{element:e.element||[],multilineElement:e["multiline-element"]||[],textFormat:e["text-format"]||[],textMatch:e["text-match"]||[]}}const ZX=/[!-/:-@[-`{-~\s]/;function utt(t){return gn(t)&&!t.hasFormat("code")}function htt(t,...e){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",t);for(const i of e)r.append("v",i);throw n.search=r.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function qX(t,e,n){const r=n.length;for(let i=e;i>=r;i--){const o=i-r;if(sde(t,o,n,0,r)&&t[o+r]!==" ")return o}return-1}function sde(t,e,n,r,i){for(let o=0;o<i;o++)if(t[e+o]!==n[r+o])return!1;return!0}function dtt(t,e=_de){const n=ctt(e),r=kN(n.textFormat,(({tag:a})=>a[a.length-1])),i=kN(n.textMatch,(({trigger:a})=>a));for(const a of e){const s=a.type;if(s==="element"||s==="text-match"||s==="multiline-element"){const u=a.dependencies;for(const d of u)t.hasNode(d)||htt(173,d.getType())}}const o=(a,s,u)=>{(function(d,m,v,_){const O=d.getParent();if(!ra(O)||d.getFirstChild()!==m)return!1;const E=m.getTextContent();if(E[v-1]!==" ")return!1;for(const{regExp:A,replace:M}of _){const L=E.match(A);if(L&&L[0].length===(L[0].endsWith(" ")?v:v-1)){const $=m.getNextSiblings(),[N,F]=m.splitText(v);if(M(d,F?[F,...$]:$,L,!1)!==!1)return N.remove(),!0}}return!1})(a,s,u,n.element)||(function(d,m,v,_){const O=d.getParent();if(!ra(O)||d.getFirstChild()!==m)return!1;const E=m.getTextContent();if(E[v-1]!==" ")return!1;for(const{regExpStart:A,replace:M,regExpEnd:L}of _){if(L&&!("optional"in L)||L&&"optional"in L&&!L.optional)continue;const $=E.match(A);if($&&$[0].length===($[0].endsWith(" ")?v:v-1)){const N=m.getNextSiblings(),[F,Q]=m.splitText(v);if(M(d,Q?[Q,...N]:N,$,null,null,!1)!==!1)return F.remove(),!0}}return!1})(a,s,u,n.multilineElement)||(function(d,m,v){let _=d.getTextContent();const O=v[_[m-1]];if(O==null)return!1;m<_.length&&(_=_.slice(0,m));for(const E of O){if(!E.replace||!E.regExp)continue;const A=_.match(E.regExp);if(A===null)continue;const M=A.index||0,L=M+A[0].length;let $;return M===0?[$]=d.splitText(L):[,$]=d.splitText(M,L),$.selectNext(0,0),E.replace($,A),!0}return!1})(s,u,i)||(function(d,m,v){const _=d.getTextContent(),O=m-1,E=_[O],A=v[E];if(!A)return!1;for(const M of A){const{tag:L}=M,$=L.length,N=O-$+1;if($>1&&!sde(_,N,L,0,$)||_[N-1]===" ")continue;const F=_[O+1];if(M.intraword===!1&&F&&!ZX.test(F))continue;const Q=d;let W=Q,H=qX(_,N,L),te=W;for(;H<0&&(te=te.getPreviousSibling())&&!Pf(te);)if(gn(te)){if(te.hasFormat("code"))continue;const Me=te.getTextContent();W=te,H=qX(Me,Me.length,L)}if(H<0||W===Q&&H+$===N)continue;const ne=W.getTextContent();if(H>0&&ne[H-1]===E)continue;const ce=ne[H-1];if(M.intraword===!1&&ce&&!ZX.test(ce))continue;const we=Q.getTextContent(),re=we.slice(0,N)+we.slice(O+1);Q.setTextContent(re);const se=W===Q?re:ne;W.setTextContent(se.slice(0,H)+se.slice(H+$));const be=cn(),fe=KO();cs(fe);const ve=O-$*(W===Q?2:1)+1;fe.anchor.set(W.__key,H,"text"),fe.focus.set(Q.__key,ve,"text");for(const Me of M.format)fe.hasFormat(Me)||fe.formatText(Me);fe.anchor.set(fe.focus.key,fe.focus.offset,fe.focus.type);for(const Me of M.format)fe.hasFormat(Me)&&fe.toggleFormat(Me);return Kt(be)&&(fe.format=be.format),!0}})(s,u,r)};return t.registerUpdateListener((({tags:a,dirtyLeaves:s,editorState:u,prevEditorState:d})=>{if(a.has(Bee)||a.has(rM)||t.isComposing())return;const m=u.read(cn),v=d.read(cn);if(!Kt(v)||!Kt(m)||!m.isCollapsed()||m.is(v))return;const _=m.anchor.key,O=m.anchor.offset,E=u._nodeMap.get(_);!gn(E)||!s.has(_)||O!==1&&O>v.anchor.offset+1||t.update((()=>{if(!utt(E))return;const A=E.getParent();A===null||_7(A)||o(A,E,m.anchor.offset)}))}))}const ftt=/^(\s*)(\d{1,})\.\s/,ptt=/^(\s*)[-*+]\s/,mtt=/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,gtt=/^(#{1,6})\s/,ytt=/^>\s/,vtt=/^[ \t]*```([\w-]+)?/,xtt=/[ \t]*```$/,ade=t=>(e,n,r,i)=>{const o=t(r);o.append(...n),e.replace(o),i||o.select(0,0)},b7=t=>(e,n,r,i)=>{const o=e.getPreviousSibling(),a=e.getNextSibling(),s=Oc(t==="check"?r[3]==="x":void 0);if(ur(a)&&a.getListType()===t){const d=a.getFirstChild();d!==null?d.insertBefore(s):a.append(s),e.remove()}else if(ur(o)&&o.getListType()===t)o.append(s),e.remove();else{const d=_c(t,t==="number"?Number(r[2]):void 0);d.append(s),e.replace(d)}s.append(...n),i||s.select(0,0);const u=(function(d){const m=d.match(/\t/g),v=d.match(/ /g);let _=0;return m&&(_+=m.length),v&&(_+=Math.floor(v.length/4)),_})(r[1]);u&&s.setIndent(u)},OD=(t,e,n)=>{const r=[],i=t.getChildren();let o=0;for(const a of i)if(Mr(a)){if(a.getChildrenSize()===1){const m=a.getFirstChild();if(ur(m)){r.push(OD(m,e,n+1));continue}}const s=" ".repeat(4*n),u=t.getListType(),d=u==="number"?`${t.getStart()+o}. `:u==="check"?`- [${a.getChecked()?"x":" "}] `:"- ";r.push(s+d+e(a)),o++}return r.join(`
`)},_tt={dependencies:[Vk],export:(t,e)=>{if(!lO(t))return null;const n=Number(t.getTag().slice(1));return"#".repeat(n)+" "+e(t)},regExp:gtt,replace:ade((t=>{const e="h"+t[1].length;return nm(e)})),type:"element"},lde={dependencies:[SI],export:(t,e)=>{if(!mz(t))return null;const n=e(t).split(`
`),r=[];for(const i of n)r.push("> "+i);return r.join(`
`)},regExp:ytt,replace:(t,e,n,r)=>{if(r){const o=t.getPreviousSibling();if(mz(o))return o.splice(o.getChildrenSize(),0,[If(),...e]),void t.remove()}const i=jk();i.append(...e),t.replace(i),r||i.select(0,0)},type:"element"},cde={dependencies:[yE],export:t=>{if(!_7(t))return null;const e=t.getTextContent();return"```"+(t.getLanguage()||"")+(e?`
`+e:"")+"\n```"},regExpEnd:{optional:!0,regExp:xtt},regExpStart:vtt,replace:(t,e,n,r,i,o)=>{let a,s;if(!e&&i){if(i.length===1)r?(a=Hg(),s=n[1]+i[0]):(a=Hg(n[1]),s=i[0].startsWith(" ")?i[0].slice(1):i[0]);else{if(a=Hg(n[1]),i[0].trim().length===0)for(;i.length>0&&!i[0].length;)i.shift();else i[0]=i[0].startsWith(" ")?i[0].slice(1):i[0];for(;i.length>0&&!i[i.length-1].length;)i.pop();s=i.join(`
`)}const u=so(s);a.append(u),t.append(a)}else e&&ade((u=>Hg(u?u[1]:void 0)))(t,e,n,o)},type:"multiline-element"},ude={dependencies:[_y,xy],export:(t,e)=>ur(t)?OD(t,e,0):null,regExp:ptt,replace:b7("bullet"),type:"element"},btt={dependencies:[_y,xy],export:(t,e)=>ur(t)?OD(t,e,0):null,regExp:mtt,replace:b7("check"),type:"element"},hde={dependencies:[_y,xy],export:(t,e)=>ur(t)?OD(t,e,0):null,regExp:ftt,replace:b7("number"),type:"element"},dde={format:["code"],tag:"`",type:"text-format"},wtt={format:["highlight"],tag:"==",type:"text-format"},fde={format:["bold","italic"],tag:"***",type:"text-format"},pde={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},mde={format:["bold"],tag:"**",type:"text-format"},gde={format:["bold"],intraword:!1,tag:"__",type:"text-format"},Ott={format:["strikethrough"],tag:"~~",type:"text-format"},yde={format:["italic"],tag:"*",type:"text-format"},vde={format:["italic"],intraword:!1,tag:"_",type:"text-format"},xde={dependencies:[vy],export:(t,e,n)=>{if(!iu(t)||Cf(t))return null;const r=t.getTitle(),i=e(t);return r?`[${i}](${t.getURL()} "${r}")`:`[${i}](${t.getURL()})`},importRegExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(t,e)=>{const[,n,r,i]=e,o=sy(r,{title:i}),a=n.split("[").length-1,s=n.split("]").length-1;let u=n,d="";if(a<s)return;if(a>s){const v=n.split("[");d="["+v[0],u=v.slice(1).join("[")}const m=so(u);return m.setFormat(t.getFormat()),o.append(m),t.replace(o),d&&o.insertBefore(so(d)),m},trigger:")",type:"text-match"},Stt=[_tt,lde,ude,hde],Ctt=[cde],Ttt=[dde,fde,pde,mde,gde,wtt,yde,vde,Ott],ktt=[xde],_de=[...Stt,...Ctt,...Ttt,...ktt],Ett=[{dependencies:[Wk],export:t=>H8(t)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(t,e,n,r)=>{const i=oS();r||t.getNextSibling()!=null?t.replace(i):t.insertBefore(i),i.selectNext()},type:"element"},..._de];function WX({transformers:t=Ett}){const[e]=ql();return j.useEffect((()=>dtt(e,t)),[e,t]),null}const Att=Zl({init(t){const e=t.getValue(Q8),n=e.includes("headings")?t.getValue(LI):[],r=Rtt(e,n);t.pubIn({[nb]:()=>le.createElement(WX,{transformers:r}),[V8]:()=>le.createElement(WX,{transformers:r})})}}),Ptt=t=>(e,n,r)=>{const i=t(r);i.append(...n),e.replace(i),i.select(0,0)},Mtt={dependencies:[Wk],export:t=>H8(t)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(t,e,n,r)=>{const i=oS();r||t.getNextSibling()!=null?t.replace(i):t.insertBefore(i),i.selectNext()},type:"element"};function Rtt(t,e){const n=[fde,pde,mde,gde,dde,yde,vde];if(t.includes("headings")){const r=Math.min(...e),i=Math.max(...e),o=new RegExp(`^(#{${r},${i}})\\s`),a={dependencies:[Vk],export:(s,u)=>{if(!lO(s))return null;const d=Number(s.getTag().slice(1));return"#".repeat(d)+" "+u(s)},regExp:o,replace:Ptt(s=>{const u=`h${s[1].length}`;return nm(u)}),type:"element"};n.push(a)}if(t.includes("thematicBreak")&&n.push(Mtt),t.includes("quote")&&n.push(lde),t.includes("link")&&n.push(xde),t.includes("lists")&&n.push(hde,ude,btt),t.includes("codeblock")){const r={...cde,dependencies:[uS],replace:(i,o,a)=>{const s=nE({code:"",language:a[1]??"",meta:""});i.selectPrevious(),i.replace(s),setTimeout(()=>{s.select()},80)}};n.push(r)}return n}const Itt=()=>{const t=Ki(pM),e=$s(vne),n=$s(Q8),r=n.includes("quote"),i=n.includes("headings"),o=Bs();if(!r&&!i)return null;const a=[{label:o("toolbar.blockTypes.paragraph","Paragraph"),value:"paragraph"}];if(r&&a.push({label:o("toolbar.blockTypes.quote","Quote"),value:"quote"}),i){const s=$s(LI);a.push(...s.map(u=>({label:o("toolbar.blockTypes.heading","Heading {{level}}",{level:u}),value:`h${u}`})))}return le.createElement(Uue,{value:e,onChange:s=>{switch(s){case"quote":t(()=>jk());break;case"paragraph":t(()=>Oi());break;case"":break;default:if(s.startsWith("h"))t(()=>nm(s));else throw new Error(`Unknown block type: ${s}`)}},triggerTitle:o("toolbar.blockTypeSelect.selectBlockTypeTooltip","Select block type"),placeholder:o("toolbar.blockTypeSelect.placeholder","Block type"),items:a})},Z$=({format:t,addTitle:e,removeTitle:n,icon:r,formatName:i})=>{const[o,a]=us(L8,la),s=Ki($8),u=(o&t)!==0;return le.createElement(rhe,{title:u?n:e,on:u,onValueChange:()=>{s(i)}},a(r))},Dtt=({options:t})=>{const e=Bs(),n=typeof t>"u";return le.createElement("div",{className:Ut.toolbarGroupOfGroups},n||t.includes("Bold")?le.createElement(Z$,{format:FC,addTitle:e("toolbar.bold","Bold"),removeTitle:e("toolbar.removeBold","Remove bold"),icon:"format_bold",formatName:"bold"}):null,n||t.includes("Italic")?le.createElement(Z$,{format:jC,addTitle:e("toolbar.italic","Italic"),removeTitle:e("toolbar.removeItalic","Remove italic"),icon:"format_italic",formatName:"italic"}):null,n||t.includes("Underline")?le.createElement(Z$,{format:VC,addTitle:e("toolbar.underline","Underline"),removeTitle:e("toolbar.removeUnderline","Remove underline"),icon:"format_underlined",formatName:"underline"}):null)};function Ltt(t){return{note:t("admonitions.note","Note"),tip:t("admonitions.tip","Tip"),danger:t("admonitions.danger","Danger"),info:t("admonitions.info","Info"),caution:t("admonitions.caution","Caution")}}const $tt=()=>{const[t,e]=us(L8,la),n=Ki($8),r=Bs(),i=(t&TI)!==0,o=i?r("toolbar.removeInlineCode","Remove code format"):r("toolbar.inlineCode","Inline code format");return le.createElement(ihe,{items:[{title:o,contents:e("code"),active:i,onChange:n.bind(null,"code")}]})},ztt=()=>{const t=Ki(l7),e=$s(la),n=Bs();return le.createElement(gE,{"aria-label":n("toolbar.link","Create link"),title:n("toolbar.link","Create link"),onClick:r=>{t()}},e("link"))},Ntt=()=>{const t=Ki(Zue),e=$s(la),n=Bs(),r=le.useMemo(()=>{const i=Ltt(n);return que.map(o=>({value:o,label:i[o]}))},[n]);return le.createElement(jJe,{title:n("toolbar.admonition","Insert Admonition"),onChoose:i=>{t({type:"containerDirective",name:i})},items:r},e("admonition"))},Btt=()=>{const t=Ki(J9),e=$s(la),n=Bs();return le.createElement(gE,{title:n("toolbar.codeBlock","Insert Code Block"),onClick:()=>{t({})}},e("frame_source"))},bde=In(!1,t=>{t.link(t.pipe(Uo,ny(e=>{var n,r;return["td","th"].includes(((r=(n=e?.getRootElement())==null?void 0:n.parentNode)==null?void 0:r.nodeName.toLowerCase())??"")})),bde)}),Ftt=()=>{const t=$s(la),e=Ki(iie),n=Bs(),r=$s(bde);return le.createElement(gE,{title:n("toolbar.table","Insert Table"),onClick:()=>{e({rows:3,columns:3})},...r?{"aria-disabled":!0,"data-disabled":!0,disabled:!0}:{}},t("table"))},jtt=()=>{const t=Ki(Nne),e=$s(la),n=Bs();return le.createElement(gE,{title:n("toolbar.thematicBreak","Insert thematic break"),onClick:()=>{t()}},e("horizontal_rule"))},Vtt={bullet:"format_list_bulleted",number:"format_list_numbered",check:"format_list_checked"},Qtt=({options:t=["bullet","number","check"]})=>{const[e,n]=us(Dz,la),r=Ki(Bne),i=Bs(),o={bullet:i("toolbar.bulletedList","Bulleted list"),number:i("toolbar.numberedList","Numbered list"),check:i("toolbar.checkList","Check list")},a=t.map(s=>({value:s,title:o[s],contents:n(Vtt[s])}));return le.createElement(FJe,{value:e||"",items:a,onChange:r})},Utt=()=>{const[t,e]=us(la,Uo),[n,r]=le.useState(!1),[i,o]=le.useState(!1),a=Bs();return le.useEffect(()=>{if(e)return Wl(e.registerCommand(pC,s=>(r(s),!1),gh),e.registerCommand(fC,s=>(o(s),!1),gh))},[e]),le.createElement(ihe,{items:[{title:a("toolbar.undo","Undo {{shortcut}}",{shortcut:yM?"Z":"Ctrl+Z"}),disabled:!n,contents:t("undo"),active:!1,onChange:()=>e?.dispatchCommand(eI,void 0)},{title:a("toolbar.redo","Redo {{shortcut}}",{shortcut:yM?"Y":"Ctrl+Y"}),disabled:!i,contents:t("redo"),active:!1,onChange:()=>e?.dispatchCommand(tI,void 0)}]})},Ztt=({posts:t,onPostClick:e})=>{const n=j.useMemo(()=>{const i=[...t].sort((a,s)=>new Date(s.created_date).getTime()-new Date(a.created_date).getTime()),o={};return i.forEach(a=>{const s=new Date(a.created_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});o[s]||(o[s]=[]),o[s].push(a)}),o},[t]),r=Object.keys(n);return t.length===0?q.jsx(zn,{sx:{py:4,textAlign:"center"},children:q.jsx(ar,{color:"text.secondary",children:"No blog posts found."})}):q.jsx(zn,{children:q.jsx(UO,{sx:{width:"100%",bgcolor:"background.paper"},children:r.map(i=>q.jsxs(zn,{sx:{mb:2},children:[q.jsx(p4,{component:"div",sx:{bgcolor:"grey.50",fontWeight:"bold",borderRadius:1,mb:1,lineHeight:"40px"},children:i}),n[i].map(o=>q.jsx(wa,{elevation:0,sx:{mb:1,border:"1px solid",borderColor:"divider",borderRadius:2,"&:hover":{bgcolor:"action.hover",cursor:e?"pointer":"default"}},onClick:()=>e?.(o),children:q.jsxs(D5,{alignItems:"flex-start",children:[q.jsx(G1e,{children:q.jsx(Ck,{alt:o.author?.display_name||o.author_id,src:o.author?.avatar_url||"",children:(o.author?.display_name||o.author_id)[0].toUpperCase()})}),q.jsx(tm,{primary:q.jsxs(zn,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[q.jsx(ar,{variant:"h6",component:"span",sx:{fontWeight:600},children:o.title}),q.jsx(ar,{variant:"caption",color:"text.secondary",children:new Date(o.created_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),secondary:q.jsxs(zn,{sx:{mt:1},children:[q.jsxs(ar,{variant:"body2",color:"text.primary",sx:{mb:1,fontWeight:500},children:["by ",o.author?.display_name||o.author_id]}),q.jsx(zn,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:o.tags?.map(a=>q.jsx(Yw,{label:a,size:"small",variant:"outlined",sx:{borderRadius:1}},a))})]})})]})},o.id))]},i))})})},qtt=`
# Our Travel Story

Welcome to our blog! This is where we will share the most memorable moments from our trip across the Pacific.

## Recent Highlights
- **Tokyo**: The vibrant energy of Shinjuku was incredible.
- **Bora Bora**: Most beautiful water we've ever seen.
- **Sydney**: Watching the sunset over the Opera House.

Stay tuned for more updates!
`,Wtt=()=>{const{user:t,role:e,profile:n}=py(),[r,i]=j.useState([]),[o,a]=j.useState(!0),[s,u]=j.useState(null),[d,m]=j.useState(qtt),[v,_]=j.useState(""),[O,E]=j.useState([]),[A,M]=j.useState(null),[L,$]=j.useState(null),[N,F]=j.useState(""),Q=le.useRef(null),[W,H]=j.useState(!1),[te,ne]=j.useState(null),[ce,we]=j.useState(""),[re,se]=j.useState(""),[be,fe]=j.useState(!1),[ve,Me]=j.useState(!1),[Ne,Qe]=j.useState("list"),[Ce,Ae]=ype(),Xe=async()=>{a(!0);const{data:wt,error:un}=await Jr.from("blog_post").select("*").order("created_date",{ascending:!1});if(un){u(un.message),a(!1);return}if(wt&&wt.length>0){const Gt=[...new Set(wt.map(nn=>nn.author_id))],{data:Jt,error:Sn}=await Jr.from("user_profile").select("*").in("id",Gt);if(Sn)console.error("Error fetching profiles:",Sn),i(wt);else{const nn=(Jt||[]).reduce((jn,Gn)=>(jn[Gn.id]=Gn,jn),{}),Cn=wt.map(jn=>({...jn,author:nn[jn.author_id]}));i(Cn)}}else i([]);a(!1)};le.useEffect(()=>{Xe()},[]),le.useEffect(()=>{const wt=Ce.get("id");if(wt&&r.length>0){const un=r.find(Gt=>Gt.id===wt);un&&(m(un.content||""),_(un.title),E(un.tags||[]),M(un.id),$(un.author||null),Qe("post"),Me(!1))}},[Ce,r]);const ke=wt=>{m(wt.content||""),_(wt.title),E(wt.tags||[]),M(wt.id),$(wt.author||null),Qe("post"),Me(!1)},ft=()=>{m(`# New Story

Start writing here...`),_(""),E([]),M(null),$(null),Qe("post"),Me(!0)},pt=async()=>{if(!t){u("You must be logged in to save posts.");return}if(!v.trim()){u("Please provide a title for your story.");return}const wt=Q.current?.getMarkdown()||d,un={title:v,content:wt,tags:O,author_id:t.id,last_modified_date:new Date,visible:!0};let Gt;A?Gt=await Jr.from("blog_post").update(un).eq("id",A):(Gt=await Jr.from("blog_post").insert([{...un,created_date:new Date}]).select(),!Gt.error&&Gt.data&&M(Gt.data[0].id)),Gt.error?u(Gt.error.message):(u(null),!A&&n&&$(n),Me(!1),Xe())},lt=async()=>{if(!A||!window.confirm("Are you sure you want to delete this story? This action cannot be undone."))return;const{error:wt}=await Jr.from("blog_post").delete().eq("id",A);wt?u(wt.message):(M(null),$(null),Qe("list"),Ae({}),Xe())},ot=wt=>new Promise((un,Gt)=>{const Jt=new FileReader;Jt.readAsDataURL(wt),Jt.onload=Sn=>{const nn=new Image;nn.src=Sn.target?.result,nn.onload=()=>{const Cn=document.createElement("canvas"),jn=1200,Gn=1200;let je=nn.width,Ye=nn.height;je>Ye?je>jn&&(Ye*=jn/je,je=jn):Ye>Gn&&(je*=Gn/Ye,Ye=Gn),Cn.width=je,Cn.height=Ye,Cn.getContext("2d")?.drawImage(nn,0,0,je,Ye),Cn.toBlob(kt=>{if(!kt){Gt(new Error("Canvas is empty"));return}const jt=new File([kt],wt.name.replace(/\.[^/.]+$/,"")+".webp",{type:"image/webp",lastModified:Date.now()});un(jt)},"image/webp",.8)},nn.onerror=Cn=>Gt(Cn)},Jt.onerror=Sn=>Gt(Sn)}),yt=async wt=>{if(!t)throw new Error("You must be logged in to upload images");try{const un=await ot(wt),Sn=`${`${t.id}/${Date.now()}.webp`}`,{error:nn}=await Jr.storage.from("blog-images").upload(Sn,un,{contentType:"image/webp",upsert:!1});if(nn)throw nn;const{data:{publicUrl:Cn}}=Jr.storage.from("blog-images").getPublicUrl(Sn);return Cn}catch(un){throw console.error("Image upload failed:",un),un}},Et=wt=>{wt.key==="Enter"&&N.trim()&&(O.includes(N.trim())||E([...O,N.trim()]),F(""),wt.preventDefault())},Tt=wt=>{E(O.filter(un=>un!==wt))},Ht=async()=>{try{fe(!0);let wt=ce;te&&(wt=await yt(te)),wt&&(Q.current?.insertMarkdown(`![${re}](${wt})`),H(!1),ne(null),we(""),se(""))}catch(wt){u(wt.message||"Error uploading image")}finally{fe(!1)}};return le.useEffect(()=>{},[Ne,ve,A]),q.jsxs(zn,{sx:{p:4,maxWidth:1200,mx:"auto"},children:[q.jsxs(zn,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:2,position:"sticky",top:0,zIndex:10,backgroundColor:"background.default",pb:2,pt:1},className:"notranslate",children:[q.jsxs(zn,{children:[q.jsx(ar,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:Ne==="list"?"Trip Stories":v||"New Story"}),Ne==="list"&&q.jsx(ar,{variant:"body1",color:"text.secondary",children:"Detailed accounts and personal experiences from our journey."})]}),q.jsxs(zn,{sx:{display:"flex",gap:2,mt:1},children:[Ne==="list"&&(e==="admin"||e==="editor")&&q.jsx(gi,{variant:"contained",startIcon:q.jsx(lJ,{}),onClick:ft,sx:{borderRadius:2,textTransform:"none",px:3},children:"Create New Story"}),Ne==="post"&&q.jsx(gi,{variant:"outlined",startIcon:q.jsx(LTe,{}),onClick:()=>{Qe("list"),Ae({})},sx:{borderRadius:2,textTransform:"none",px:3},children:"Back to List"}),Ne==="post"&&(!A||L?.id===t?.id)&&q.jsxs(q.Fragment,{children:[q.jsx(gi,{variant:"contained",startIcon:ve?q.jsx(jTe,{}):q.jsx(uJ,{}),onClick:()=>Me(!ve),sx:{borderRadius:2,textTransform:"none",px:3,backgroundColor:ve?"success.main":"primary.main","&:hover":{backgroundColor:ve?"success.dark":"primary.dark"}},children:ve?"View Mode":"Edit Mode"}),ve&&q.jsx(gi,{variant:"contained",color:"primary",startIcon:q.jsx(EB,{}),onClick:pt,sx:{borderRadius:2,textTransform:"none",px:3},children:"Save Story"}),A&&!ve&&q.jsx(gi,{variant:"outlined",color:"error",startIcon:q.jsx(cJ,{}),onClick:lt,sx:{borderRadius:2,textTransform:"none",px:3},children:"Delete"})]})]})]}),s&&q.jsx(V0,{severity:"error",sx:{mb:3,borderRadius:2},children:s}),o?q.jsx(zn,{sx:{display:"flex",justifyContent:"center",py:8},children:q.jsx(wc,{})}):Ne==="list"?q.jsx(Ztt,{posts:r,onPostClick:ke}):q.jsxs(wa,{elevation:3,sx:{p:3,borderRadius:3,minHeight:"600px"},children:[ve?q.jsxs(cu,{spacing:3,sx:{mb:4},className:"notranslate",children:[q.jsx(Ba,{fullWidth:!0,label:"Story Title",variant:"outlined",value:v,onChange:wt=>_(wt.target.value),slotProps:{input:{style:{fontSize:"1.5rem",fontWeight:"bold"}}}}),q.jsxs(zn,{children:[q.jsx(Ba,{fullWidth:!0,label:"Add Tags (Press Enter)",variant:"outlined",value:N,onChange:wt=>F(wt.target.value),onKeyDown:Et,placeholder:"e.g. Sydney, Adventure"}),q.jsx(cu,{direction:"row",spacing:1,sx:{mt:1,flexWrap:"wrap",gap:1},children:O.map(wt=>q.jsx(Yw,{label:wt,onDelete:()=>Tt(wt),color:"primary",variant:"outlined"},wt))})]})]}):q.jsxs(zn,{sx:{mb:4},className:"notranslate",children:[q.jsxs(zn,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[q.jsx(Ck,{src:L?.avatar_url||"",alt:L?.display_name||"Author",sx:{width:40,height:40},children:(L?.display_name||"A")[0].toUpperCase()}),q.jsxs(zn,{children:[q.jsx(ar,{variant:"subtitle2",fontWeight:"bold",children:L?.display_name||"Unknown Author"}),q.jsxs(ar,{variant:"caption",color:"text.secondary",children:["Post created on ",r.find(wt=>wt.id===A)?.created_date?new Date(r.find(wt=>wt.id===A).created_date).toLocaleDateString():"Unknown Date"]})]})]}),q.jsx(cu,{direction:"row",spacing:1,sx:{mb:2},children:O.map(wt=>q.jsx(Yw,{label:wt,size:"small"},wt))})]}),q.jsx(zn,{sx:{"& .mdxeditor":{fontSize:"1.1rem",lineHeight:1.6},"& img":{maxWidth:"100%",height:"auto",borderRadius:2},"& .mdxeditor-toolbar":{position:"sticky",top:0,zIndex:30,backgroundColor:"background.paper",borderBottom:"1px solid",borderColor:"divider"}},className:ve?"notranslate":"",children:ve?q.jsx("div",{id:"mdx-editor",children:q.jsx(x4e,{ref:Q,markdown:d,onChange:m,readOnly:!1,contentEditableClassName:"prose max-w-none",plugins:[C4e(),q4e(),Fje(),M4e(),Att(),a8e(),$Je(),qBe(),Q9e({imageUploadHandler:yt}),Jje({defaultCodeBlockLanguage:"js"}),QKe({codeBlockLanguages:{js:"JavaScript",css:"CSS",html:"HTML"}}),RJe({directiveDescriptors:[IJe]}),Ket({viewMode:"rich-text",diffMarkdown:d}),zje(),VJe({toolbarContents:()=>q.jsxs(q.Fragment,{children:[q.jsx(Utt,{}),q.jsx(H1,{}),q.jsx(Itt,{}),q.jsx(H1,{}),q.jsx(Dtt,{}),q.jsx($tt,{}),q.jsx(H1,{}),q.jsx(Qtt,{}),q.jsx(H1,{}),q.jsx(ztt,{}),q.jsx(zK,{title:"Insert Image",children:q.jsx(u_,{size:"small",onClick:()=>H(!0),sx:{mx:.5},children:q.jsx(DTe,{fontSize:"small"})})}),q.jsx(H1,{}),q.jsx(Ftt,{}),q.jsx(jtt,{}),q.jsx(H1,{}),q.jsx(Btt,{}),q.jsx(Ntt,{})]})})]},`${A||"new"}-${ve}`)}):q.jsx("div",{className:"prose max-w-none",children:q.jsx(Q5e,{children:d})})})]}),q.jsxs(cT,{open:W,onClose:()=>H(!1),maxWidth:"sm",fullWidth:!0,children:[q.jsx(VR,{children:"Insert Image"}),q.jsx(jR,{children:q.jsxs(zn,{sx:{mt:2,display:"flex",flexDirection:"column",gap:2},children:[q.jsxs(gi,{variant:"outlined",component:"label",startIcon:q.jsx(kTe,{}),sx:{mb:1},children:["Upload File",q.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:wt=>{wt.target.files?.[0]&&(ne(wt.target.files[0]),we(""))}})]}),te&&q.jsxs(ar,{variant:"body2",color:"text.secondary",children:["Selected: ",te.name]}),q.jsx(ar,{variant:"body2",align:"center",color:"text.secondary",children:"- OR -"}),q.jsx(Ba,{label:"Image URL",value:ce,onChange:wt=>{we(wt.target.value),ne(null)},fullWidth:!0,disabled:!!te}),q.jsx(Ba,{label:"Alt Text",value:re,onChange:wt=>se(wt.target.value),fullWidth:!0,helperText:"Description of the image for accessibility"})]})}),q.jsxs(FR,{children:[q.jsx(gi,{onClick:()=>H(!1),children:"Cancel"}),q.jsx(gi,{onClick:Ht,variant:"contained",disabled:be||!te&&!ce,children:be?"Uploading...":"Insert"})]})]})]})},Htt=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!0),[i,o]=j.useState(null),a=async()=>{try{r(!0);const[s,u,d]=await Promise.all([Jr.from("check_in").select("*").order("created_at",{ascending:!1}).limit(10),Jr.from("blog_post").select("*").order("created_date",{ascending:!1}).limit(10),Jr.from("photo_album").select("*").order("created_at",{ascending:!1}).limit(10)]),m=[...(s.data||[]).map(v=>({id:`checkin-${v.id}`,type:"check-in",title:v.message||`Checked in: ${v.status}`,description:"Status update from the map.",date:new Date(v.created_at),icon:q.jsx(eO,{color:"primary",sx:{fontSize:32}})})),...(u.data||[]).map(v=>({id:`blog-${v.id}`,type:"blog",title:v.title,description:"New blog post published.",date:new Date(v.created_date),icon:q.jsx(UR,{color:"secondary",sx:{fontSize:32}}),link:`/blog?id=${v.id}`})),...(d.data||[]).map(v=>({id:`photo-${v.id}`,type:"photo",title:v.title,description:"New photo album shared.",date:new Date(v.created_at),icon:q.jsx(tO,{sx:{color:"#10b981",fontSize:32}}),link:v.icloud_link,external:!0}))].sort((v,_)=>_.date.getTime()-v.date.getTime());e(m)}catch(s){o(s.message)}finally{r(!1)}};return j.useEffect(()=>{a()},[]),n?q.jsx(zn,{sx:{display:"flex",justifyContent:"center",py:8},children:q.jsx(wc,{})}):q.jsxs(Jw,{maxWidth:"md",sx:{py:4},children:[q.jsxs(zn,{sx:{mb:4,textAlign:"center"},children:[q.jsx(ar,{variant:"h3",fontWeight:"bold",gutterBottom:!0,children:"Latest Updates"}),q.jsx(ar,{variant:"body1",color:"text.secondary",children:"Stay up to date with the latest stories, check-ins, and photos from our journey."})]}),i&&q.jsxs(V0,{severity:"error",sx:{mb:4,borderRadius:2},children:["Error loading updates: ",i]}),q.jsx(wa,{elevation:2,sx:{borderRadius:3,overflow:"hidden"},children:q.jsx(UO,{sx:{p:0},children:t.length>0?t.map((s,u)=>q.jsxs(le.Fragment,{children:[q.jsx(D5,{disablePadding:!0,children:q.jsxs(i_,{component:s.link?s.external?"a":mc:"div",...s.link?s.external?{href:s.link,target:"_blank",rel:"noopener noreferrer"}:{to:s.link}:{},sx:{py:3,px:4,cursor:s.link?"pointer":"default","&:hover":s.link?{}:{backgroundColor:"transparent"}},children:[q.jsx(lw,{sx:{minWidth:60},children:s.icon}),q.jsx(tm,{primary:s.title,secondary:q.jsxs(zn,{sx:{mt:.5},children:[q.jsx(ar,{variant:"body2",color:"text.secondary",children:s.description}),q.jsxs(ar,{variant:"caption",sx:{mt:1,display:"block",fontStyle:"italic"},children:[aJ(s.date,{addSuffix:!0}),"  ",s.date.toLocaleDateString()]})]}),primaryTypographyProps:{variant:"h6",fontWeight:"bold"}})]})}),u<t.length-1&&q.jsx(rd,{})]},s.id)):q.jsx(zn,{sx:{py:8,textAlign:"center"},children:q.jsx(ar,{color:"text.secondary",children:"No updates found."})})})})]})},Gtt=()=>{const{user:t,refreshProfile:e}=py(),[n,r]=j.useState(!0),[i,o]=j.useState(!1),[a,s]=j.useState(null),[u,d]=j.useState(!1),[m,v]=j.useState(""),[_,O]=j.useState(""),[E,A]=j.useState(""),[M,L]=j.useState(!0);j.useEffect(()=>{t&&$()},[t]);const $=async()=>{if(t)try{r(!0);const{data:F,error:Q}=await Jr.from("user_profile").select("*").eq("id",t.id).single();if(Q){if(Q.code!=="PGRST116")throw Q}else F&&(v(F.display_name||""),O(F.avatar_url||""),A(F.bio||""),L(F.is_public??!0))}catch(F){s(F.message)}finally{r(!1)}},N=async F=>{if(F.preventDefault(),!!t)try{o(!0),s(null),d(!1);const Q={id:t.id,display_name:m,avatar_url:_,bio:E,is_public:M,updated_at:new Date},{error:W}=await Jr.from("user_profile").upsert(Q);if(W)throw W;await e(),d(!0)}catch(Q){s(Q.message)}finally{o(!1)}};return n?q.jsx(zn,{sx:{display:"flex",justifyContent:"center",py:8},children:q.jsx(wc,{})}):t?q.jsx(Jw,{maxWidth:"md",sx:{py:4},children:q.jsxs(wa,{elevation:3,sx:{p:4,borderRadius:3},children:[q.jsx(zn,{sx:{mb:4,textAlign:"center"},children:q.jsxs(cu,{direction:"row",spacing:3,alignItems:"center",justifyContent:"center",children:[q.jsx(Ck,{src:_||t.user_metadata?.avatar_url,sx:{width:100,height:100,boxShadow:3},children:q.jsx(zTe,{sx:{fontSize:60}})}),q.jsxs(zn,{sx:{textAlign:"left"},children:[q.jsx(ar,{variant:"h4",fontWeight:"bold",children:m||"Your Profile"}),q.jsx(ar,{variant:"body2",color:"text.secondary",children:t.email})]})]})}),q.jsx(rd,{sx:{mb:4}}),a&&q.jsx(V0,{severity:"error",sx:{mb:3},children:a}),u&&q.jsx(V0,{severity:"success",sx:{mb:3},children:"Profile updated successfully!"}),q.jsxs(zn,{component:"form",onSubmit:N,children:[q.jsxs(Ux,{container:!0,spacing:3,children:[q.jsx(Ux,{size:{xs:12,sm:6},children:q.jsx(Ba,{fullWidth:!0,label:"Display Name",value:m,onChange:F=>v(F.target.value),placeholder:"Public name"})}),q.jsx(Ux,{size:{xs:12},children:q.jsx(Ba,{fullWidth:!0,label:"Avatar URL",value:_,onChange:F=>O(F.target.value),placeholder:"https://example.com/avatar.jpg"})}),q.jsx(Ux,{size:{xs:12},children:q.jsx(Ba,{fullWidth:!0,label:"Bio",multiline:!0,rows:4,value:E,onChange:F=>A(F.target.value),placeholder:"Tell us about yourself..."})}),q.jsxs(Ux,{size:{xs:12},children:[q.jsx(fB,{control:q.jsx(vB,{checked:M,onChange:F=>L(F.target.checked),color:"primary"}),label:"Public Profile"}),q.jsx(ar,{variant:"caption",color:"text.secondary",sx:{display:"block",ml:1},children:"When public, others can see your stories and photos."})]})]}),q.jsx(zn,{sx:{mt:4,display:"flex",justifyContent:"flex-end"},children:q.jsx(gi,{type:"submit",variant:"contained",size:"large",startIcon:i?q.jsx(wc,{size:20,color:"inherit"}):q.jsx(EB,{}),disabled:i,sx:{borderRadius:2,px:4},children:i?"Saving...":"Save Profile"})})]})]})}):q.jsx(Jw,{maxWidth:"sm",sx:{py:8},children:q.jsx(V0,{severity:"warning",children:"Please login to view and edit your profile."})})},Xtt=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[i,o]=j.useState(!1),[a,s]=j.useState(null),[u,d]=j.useState(!1),m=fk(),v=async _=>{_.preventDefault(),o(!0),s(null);try{if(u){const{error:O}=await Jr.auth.signUp({email:t,password:n});if(O)throw O;s("Check your email for the confirmation link!")}else{const{error:O}=await Jr.auth.signInWithPassword({email:t,password:n});if(O)throw O;m("/")}}catch(O){s(O.message)}finally{o(!1)}};return q.jsx(zn,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999},children:q.jsx(Jw,{maxWidth:"sm",children:q.jsx(zn,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:q.jsxs(wa,{elevation:24,sx:{p:{xs:3,sm:6},width:"100%",borderRadius:4,bgcolor:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[q.jsx(ar,{variant:"h3",align:"center",gutterBottom:!0,sx:{fontWeight:800,color:"#1a1a1a",mb:1,letterSpacing:"-0.02em"},children:"Pacific Trip"}),q.jsx(ar,{variant:"body1",align:"center",color:"text.secondary",sx:{mb:5,fontWeight:500},children:u?"Join our private family travel journal":"Welcome back to our journey"}),a&&q.jsx(V0,{severity:a.includes("email")?"success":"error",sx:{mb:4,borderRadius:2},children:a}),q.jsxs("form",{onSubmit:v,children:[q.jsx(Ba,{label:"Email address",variant:"outlined",fullWidth:!0,margin:"normal",required:!0,value:t,onChange:_=>e(_.target.value),slotProps:{input:{sx:{borderRadius:2}}}}),q.jsx(Ba,{label:"Password",type:"password",variant:"outlined",fullWidth:!0,margin:"normal",required:!0,value:n,onChange:_=>r(_.target.value),slotProps:{input:{sx:{borderRadius:2}}}}),q.jsx(gi,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:i,sx:{mt:4,mb:2,height:56,borderRadius:2,textTransform:"none",fontSize:"1.1rem",fontWeight:700,boxShadow:"0 8px 16px rgba(0,0,0,0.1)"},children:i?q.jsx(wc,{size:24,color:"inherit"}):u?"Create Account":"Sign In"})]}),q.jsx(zn,{sx:{mt:3,textAlign:"center"},children:q.jsxs(ar,{variant:"body2",color:"text.secondary",children:[u?"Already have an account?":"New to the journal?",q.jsx(gi,{variant:"text",onClick:()=>d(!u),sx:{textTransform:"none",fontWeight:700,ml:1,color:"primary.main"},children:u?"Log In":"Sign Up"})]})})]})})})})},Ytt=[{label:"UTC",value:"Z"},{label:"Zurich/Frankfurt/Paris (CET)",value:"+01:00"},{label:"Singapore (SGT)",value:"+08:00"},{label:"Japan (JST)",value:"+09:00"},{label:"Sydney (AEDT)",value:"+11:00"},{label:"New Zealand (NZDT)",value:"+13:00"},{label:"Tahiti (TAHT)",value:"-10:00"},{label:"UTC-05:00",value:"-05:00"},{label:"UTC-08:00",value:"-08:00"}],HX=({label:t,value:e,onChange:n})=>{const{local:r,offset:i}=j.useMemo(()=>{if(!e)return{local:"",offset:"Z"};const s=e.match(/^(.+)(Z|[+-]\d{2}:?\d{2})$/);return s?{local:s[1],offset:s[2]}:{local:e,offset:"Z"}},[e]),o=s=>{n(`${s}${i}`)},a=s=>{n(`${r}${s}`)};return q.jsxs(cu,{direction:"row",spacing:1,sx:{width:"100%"},children:[q.jsx(Ba,{label:t,type:"datetime-local",value:r,onChange:s=>o(s.target.value),fullWidth:!0,slotProps:{inputLabel:{shrink:!0}}}),q.jsxs(n_,{sx:{minWidth:120},children:[q.jsx(r_,{shrink:!0,children:"Timezone"}),q.jsx(D0,{value:i,onChange:s=>a(s.target.value),label:"Timezone",displayEmpty:!0,children:Ytt.map(s=>q.jsxs(Bl,{value:s.value,children:[s.label," (",s.value,")"]},s.value))})]})]})},Ktt=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!0),[i,o]=j.useState(null),[a,s]=j.useState(!1),[u,d]=j.useState(!1),[m,v]=j.useState("view"),[_,O]=j.useState(null),E=j.useRef(null),A=j.useCallback(async()=>{r(!0);const{data:se,error:be}=await Jr.from("itinerary_item").select("*").order("start_time",{ascending:!0});be?console.error("Error fetching itinerary:",be):e(se||[]),r(!1)},[]);j.useEffect(()=>{A()},[A]);const M=se=>{o({...se}),s(!0)},L=async se=>{if(!confirm("Are you sure you want to delete this item?"))return;const{error:be}=await Jr.from("itinerary_item").delete().eq("key",se);be?alert("Error deleting item: "+be.message):A()},$=async()=>{if(!i)return;const{error:se}=await Jr.from("itinerary_item").upsert(i);se?alert("Error saving item: "+se.message):(s(!1),o(null),A())},N=(se,be)=>{o(fe=>fe?{...fe,[se]:be}:null)},F=()=>{if(i?.category==="Stop"){const se=Array.isArray(i.geolocation)?i.geolocation:[0,0];O(se)}else if(i?.category==="Trip"){const se=i.geometric_shape||{type:"LineString",coordinates:[]};O(se)}d(!0),v("edit")},Q=se=>{if(m!=="edit"||!i)return;const{lng:be,lat:fe}=se.lngLat,ve=pc(be);i.category==="Stop"?O([ve,fe]):i.category==="Trip"&&O(Me=>({type:"LineString",coordinates:[...Me?.coordinates||[],[ve,fe]]}))},W=()=>{i?.category==="Stop"?N("geolocation",_):i?.category==="Trip"&&N("geometric_shape",_),d(!1)},H=()=>{i?.category==="Trip"&&O({type:"LineString",coordinates:[]})},te=()=>{i?.category==="Trip"&&O(se=>{const be=se?.coordinates||[];return be.length===0?se:{type:"LineString",coordinates:be.slice(0,-1)}})},ne={id:"line-layer",type:"line",paint:{"line-color":"#ff0000","line-width":4}},ce=j.useMemo(()=>{if(i?.category==="Stop"&&Array.isArray(_)&&_.length===2)return{longitude:_[0],latitude:_[1],zoom:4};if(i?.category==="Trip"&&_?.coordinates?.length>0){const se=_.coordinates[0];return{longitude:se[0],latitude:se[1],zoom:4}}return{longitude:0,latitude:0,zoom:1}},[u]),we=se=>{if(se.category==="Stop")return q.jsx(NTe,{fontSize:"small",color:"action"});switch(se.transportation_mode){case"Plane":return q.jsx(RTe,{fontSize:"small",color:"primary"});case"Train":return q.jsx(FTe,{fontSize:"small",color:"primary"});case"Boat":return q.jsx(ETe,{fontSize:"small",color:"primary"});case"Car":return q.jsx(ATe,{fontSize:"small",color:"primary"});default:return q.jsx(eO,{fontSize:"small",color:"action"})}},re=se=>se?new Date(se).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return n?q.jsx(wc,{}):q.jsxs(zn,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[q.jsxs(zn,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[q.jsx(ar,{variant:"h6",children:"Itinerary Items"}),q.jsx(gi,{variant:"contained",onClick:()=>{o({key:"",category:"Stop",section:null,name:"",start_time:new Date().toISOString(),end_time:new Date().toISOString(),start_location_key:null,end_location_key:null,transportation_mode:null,geometric_shape:null,geolocation:[0,0]}),s(!0)},children:"Add New Item"})]}),q.jsx(jK,{component:wa,sx:{flex:1,overflow:"auto"},children:q.jsxs(BK,{size:"small",stickyHeader:!0,children:[q.jsx(VK,{children:q.jsxs(L5,{children:[q.jsx(ks,{children:"Key"}),q.jsx(ks,{children:"Category"}),q.jsx(ks,{children:"Name/Details"}),q.jsx(ks,{children:"From:"}),q.jsx(ks,{children:"To:"}),q.jsx(ks,{children:"Actions"})]})}),q.jsx(FK,{children:t.map(se=>q.jsxs(L5,{children:[q.jsx(ks,{children:q.jsxs(cu,{direction:"row",alignItems:"center",spacing:1,children:[we(se),q.jsx(ar,{variant:"body2",children:se.key})]})}),q.jsx(ks,{children:se.category}),q.jsx(ks,{children:se.name||`${se.start_location_key} -> ${se.end_location_key}`}),q.jsx(ks,{children:re(se.start_time)}),q.jsx(ks,{children:re(se.end_time)}),q.jsxs(ks,{children:[q.jsx(u_,{size:"small",onClick:()=>M(se),children:q.jsx(uJ,{})}),q.jsx(u_,{size:"small",onClick:()=>L(se.key),children:q.jsx(cJ,{})})]})]},se.key))})]})}),q.jsxs(cT,{open:a,onClose:()=>s(!1),maxWidth:"md",fullWidth:!0,children:[q.jsx(VR,{children:i?.key?"Edit Item":"New Item"}),q.jsx(jR,{children:q.jsxs(cu,{spacing:2,sx:{mt:1},children:[q.jsx(Ba,{label:"Key (Unique ID)",value:i?.key||"",onChange:se=>N("key",se.target.value),fullWidth:!0,disabled:!!(t.find(se=>se.key===i?.key)&&i?.key)}),q.jsxs(n_,{fullWidth:!0,children:[q.jsx(r_,{children:"Category"}),q.jsxs(D0,{value:i?.category||"Stop",label:"Category",onChange:se=>N("category",se.target.value),children:[q.jsx(Bl,{value:"Stop",children:"Stop"}),q.jsx(Bl,{value:"Trip",children:"Trip"})]})]}),q.jsx(Ba,{label:"Section",value:i?.section||"",onChange:se=>N("section",se.target.value),fullWidth:!0}),i?.category==="Stop"&&q.jsx(Ba,{label:"Name",value:i?.name||"",onChange:se=>N("name",se.target.value),fullWidth:!0}),q.jsxs(cu,{direction:"row",spacing:2,children:[q.jsx(HX,{label:"From:",value:i?.start_time,onChange:se=>N("start_time",se)}),q.jsx(HX,{label:"To:",value:i?.end_time,onChange:se=>N("end_time",se)})]}),i?.category==="Trip"&&q.jsxs(q.Fragment,{children:[q.jsx(Ba,{label:"Transport Name (e.g. Flight LX999)",value:i?.name||"",onChange:se=>N("name",se.target.value),fullWidth:!0}),q.jsxs(cu,{direction:"row",spacing:2,children:[q.jsxs(n_,{fullWidth:!0,children:[q.jsx(r_,{children:"Start Location"}),q.jsxs(D0,{value:i?.start_location_key||"",label:"Start Location",onChange:se=>N("start_location_key",se.target.value),children:[q.jsx(Bl,{value:"",children:q.jsx("em",{children:"None"})}),t.filter(se=>se.category==="Stop").map(se=>q.jsx(Bl,{value:se.key,children:se.name||se.key},se.key))]})]}),q.jsxs(n_,{fullWidth:!0,children:[q.jsx(r_,{children:"End Location"}),q.jsxs(D0,{value:i?.end_location_key||"",label:"End Location",onChange:se=>N("end_location_key",se.target.value),children:[q.jsx(Bl,{value:"",children:q.jsx("em",{children:"None"})}),t.filter(se=>se.category==="Stop").map(se=>q.jsx(Bl,{value:se.key,children:se.name||se.key},se.key))]})]})]}),q.jsxs(n_,{fullWidth:!0,children:[q.jsx(r_,{children:"Transportation Mode"}),q.jsxs(D0,{value:i?.transportation_mode||"",label:"Transportation Mode",onChange:se=>N("transportation_mode",se.target.value),children:[q.jsx(Bl,{value:"Plane",children:"Plane"}),q.jsx(Bl,{value:"Train",children:"Train"}),q.jsx(Bl,{value:"Boat",children:"Boat"}),q.jsx(Bl,{value:"Car",children:"Car"})]})]})]}),q.jsx(gi,{variant:"outlined",startIcon:q.jsx(eO,{}),onClick:F,children:"Edit Location / Shape on Map"}),i?.category==="Trip"&&i?.geometric_shape&&q.jsxs(ar,{variant:"caption",color:"text.secondary",children:["Path has ",i.geometric_shape.coordinates?.length||0," points"]}),i?.category==="Stop"&&i?.geolocation&&q.jsxs(ar,{variant:"caption",color:"text.secondary",children:["Lat: ",i.geolocation[1],", Lng: ",i.geolocation[0]]})]})}),q.jsxs(FR,{children:[q.jsx(gi,{onClick:()=>s(!1),children:"Cancel"}),q.jsx(gi,{onClick:$,variant:"contained",children:"Save"})]})]}),q.jsx(cT,{open:u,onClose:()=>d(!1),fullScreen:!0,children:q.jsxs(zn,{sx:{position:"relative",height:"100%",width:"100%"},children:[q.jsx(zn,{sx:{position:"absolute",top:16,right:16,zIndex:10,display:"flex",gap:1},children:q.jsxs(wa,{sx:{p:1},children:[q.jsx(gi,{onClick:()=>d(!1),color:"inherit",children:"Cancel"}),q.jsx(gi,{onClick:W,variant:"contained",sx:{ml:1},children:"Confirm"})]})}),i?.category==="Trip"&&q.jsx(zn,{sx:{position:"absolute",top:16,left:16,zIndex:10},children:q.jsxs(wa,{sx:{p:1,display:"flex",gap:1},children:[q.jsx(gi,{size:"small",onClick:te,disabled:!_?.coordinates?.length,children:"Undo Last"}),q.jsx(gi,{size:"small",onClick:H,color:"error",children:"Clear All"})]})}),q.jsxs(dJ,{ref:E,initialViewState:ce,mapStyle:"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json",style:{width:"100%",height:"100%"},onClick:Q,cursor:m==="edit"?"crosshair":"grab",children:[q.jsx(pJ,{position:"top-left"}),q.jsx(pke,{}),i?.category==="Stop"&&_&&q.jsx(ske,{longitude:_[0],latitude:_[1],color:"red",draggable:!0,onDragEnd:se=>O([pc(se.lngLat.lng),se.lngLat.lat])}),i?.category==="Trip"&&_&&q.jsxs(A4,{id:"trip-edit-source",type:"geojson",data:_,children:[q.jsx(Wx,{...ne}),q.jsx(Wx,{id:"trip-edit-points",type:"circle",paint:{"circle-radius":4,"circle-color":"#fff","circle-stroke-color":"#ff0000","circle-stroke-width":2}})]})]})]})})]})},Jtt=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!0),i=async()=>{r(!0);try{const{data:a,error:s}=await Jr.rpc("get_full_user_data");if(s)throw s;const u=a.map(d=>({...d,role:d.role}));e(u)}catch(a){console.error("Error fetching users:",a),alert("Error loading users")}finally{r(!1)}};j.useEffect(()=>{i()},[]);const o=async(a,s)=>{try{const{error:u}=await Jr.from("user_role").upsert({user_id:a,role:s}).select();if(u)throw u;e(d=>d.map(m=>m.id===a?{...m,role:s}:m))}catch(u){console.error("Error updating role:",u),alert("Failed to update role: "+u.message)}};return n?q.jsx(wc,{}):q.jsxs(zn,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[q.jsxs(zn,{sx:{mb:2},children:[q.jsx(ar,{variant:"h6",children:"User Management"}),q.jsx(ar,{variant:"body2",color:"text.secondary",children:'Manage user access and roles. Users with "No Role" cannot access the application.'})]}),q.jsx(jK,{component:wa,sx:{flex:1,overflow:"auto"},children:q.jsxs(BK,{size:"small",stickyHeader:!0,children:[q.jsx(VK,{children:q.jsxs(L5,{children:[q.jsx(ks,{children:"User"}),q.jsx(ks,{children:"Email"}),q.jsx(ks,{children:"Bio"}),q.jsx(ks,{children:"Current Status"}),q.jsx(ks,{children:"Action"})]})}),q.jsx(FK,{children:t.map(a=>q.jsxs(L5,{children:[q.jsx(ks,{children:q.jsxs(cu,{direction:"row",spacing:2,alignItems:"center",children:[q.jsx(Ck,{src:a.avatar_url||void 0,alt:a.display_name||"User"}),q.jsxs(zn,{children:[q.jsx(ar,{variant:"subtitle2",children:a.display_name||"Unnamed User"}),q.jsxs(ar,{variant:"caption",color:"text.secondary",sx:{fontFamily:"monospace"},children:[a.id.slice(0,8),"..."]})]})]})}),q.jsx(ks,{children:q.jsx(ar,{variant:"body2",children:a.email})}),q.jsx(ks,{children:q.jsx(ar,{variant:"body2",noWrap:!0,sx:{maxWidth:200},children:a.bio||"-"})}),q.jsx(ks,{children:a.role?q.jsx(Yw,{label:a.role.toUpperCase(),color:a.role==="admin"?"error":"primary",size:"small"}):q.jsx(Yw,{label:"PENDING",color:"warning",size:"small"})}),q.jsx(ks,{children:q.jsxs(n_,{size:"small",sx:{minWidth:120},children:[q.jsx(r_,{children:"Role"}),q.jsxs(D0,{value:a.role||"",label:"Role",onChange:s=>o(a.id,s.target.value),children:[q.jsx(Bl,{value:"guest",children:"Guest"}),q.jsx(Bl,{value:"editor",children:"Editor"}),q.jsx(Bl,{value:"admin",children:"Admin"})]})]})})]},a.id))})]})})]})};function GX(t){const{children:e,value:n,index:r,...i}=t;return q.jsx("div",{role:"tabpanel",hidden:n!==r,id:`admin-tabpanel-${r}`,"aria-labelledby":`admin-tab-${r}`,style:{height:"100%",flex:1,display:n===r?"flex":"none",flexDirection:"column"},...i,children:n===r&&q.jsx(zn,{sx:{p:2,height:"100%",display:"flex",flexDirection:"column"},children:e})})}const ent=()=>{const{role:t}=py(),[e,n]=j.useState(0);if(t!=="admin")return q.jsx(zn,{sx:{p:3,mt:8},children:q.jsx(V0,{severity:"error",children:"Access Denied. You must be an administrator to view this page."})});const r=(i,o)=>{n(o)};return q.jsxs(zn,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column",pt:4},children:[q.jsx(ar,{variant:"h4",component:"h1",gutterBottom:!0,sx:{mt:2},children:"Admin Dashboard"}),q.jsx(zn,{sx:{borderBottom:1,borderColor:"divider"},children:q.jsxs(VOe,{value:e,onChange:r,"aria-label":"admin tabs",children:[q.jsx(SV,{label:"Itinerary Management"}),q.jsx(SV,{label:"User Management"})]})}),q.jsxs(wa,{elevation:3,sx:{flex:1,mt:2,overflow:"hidden",display:"flex",flexDirection:"column"},children:[q.jsx(GX,{value:e,index:0,children:q.jsx(Ktt,{})}),q.jsx(GX,{value:e,index:1,children:q.jsx(Jtt,{})})]})]})};function tnt(){const t=j.useRef(null),e=Sm(),{user:n,loading:r,latestCheckIn:i,visitedStops:o,role:a,signOut:s,refreshRole:u}=py(),[d,m]=j.useState(!1),v=j.useCallback(E=>{t.current&&t.current.flyTo({center:[pc(E.geolocation[0]),E.geolocation[1]],zoom:10,essential:!0})},[]),_=j.useCallback(E=>{if(t.current&&E.children.length>0){const A=new vY.LngLatBounds;E.children.forEach(M=>{M.category==="Stop"?A.extend([pc(M.geolocation[0]),M.geolocation[1]]):M.category==="Trip"&&M.geometricShape.coordinates.forEach(L=>{A.extend([pc(L[0]),L[1]])})}),t.current.fitBounds(A,{padding:50,maxZoom:10,essential:!0})}},[]),O=async()=>{m(!0),await u(),m(!1)};return r?q.jsx(zn,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"background.default"},children:q.jsx(wc,{})}):n?a?q.jsx(ZTe,{onStopClick:v,onSectionClick:_,activeKey:i?.status,visitedStops:o,children:q.jsxs(X7,{children:[q.jsx(Fp,{path:"/",element:q.jsx(Ffe,{to:"/blog",replace:!0})}),q.jsx(Fp,{path:"/map",element:q.jsx(zn,{sx:{display:e.pathname==="/"||e.pathname==="/map"?"block":"none",height:"100%"},children:q.jsx(mJ,{ref:t,items:CB})})}),q.jsx(Fp,{path:"/photos",element:q.jsx(Pke,{})}),q.jsx(Fp,{path:"/blog",element:q.jsx(Wtt,{})}),q.jsx(Fp,{path:"/updates",element:q.jsx(Htt,{})}),q.jsx(Fp,{path:"/profile",element:q.jsx(Gtt,{})}),q.jsx(Fp,{path:"/admin",element:q.jsx(ent,{})}),q.jsx(Fp,{path:"*",element:null})]})}):q.jsx(Jw,{maxWidth:"sm",sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh"},children:q.jsxs(wa,{elevation:3,sx:{p:4,textAlign:"center",borderRadius:2},children:[q.jsx(ar,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"Access Pending"}),q.jsx(ar,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Your account is currently pending approval. Please wait for an administrator to assign you a role before you can access the application."}),q.jsxs(cu,{direction:"row",spacing:2,justifyContent:"center",sx:{mt:2},children:[q.jsx(gi,{variant:"outlined",onClick:O,disabled:d,startIcon:d?q.jsx(wc,{size:20}):null,children:d?"Checking...":"Check Again"}),q.jsx(gi,{variant:"contained",color:"primary",onClick:s,children:"Sign Out"})]})]})}):q.jsx(X7,{children:q.jsx(Fp,{path:"*",element:q.jsx(Xtt,{})})})}Ude.createRoot(document.getElementById("root")).render(q.jsx(j.StrictMode,{children:q.jsx(dpe,{children:q.jsx(MCe,{children:q.jsx(tnt,{})})})}));export{Xle as C,xh as E,Bi as I,SO as L,Mae as N,kO as a,TO as b,b5 as c,xqe as d,ole as e,gS as f,ao as g,$Ze as h,mS as i,zZe as j,Bae as k,rR as l,nu as m,pn as n,Qt as o,$ce as p,Rae as q,nce as r,pS as s,Be as t,Kae as u,fd as v};
